$TXT Created by                   VISTA-LOAD-AITC-6.AAC.DOMAIN.EXT  (KIDS) on Friday, 07/26/19 at 06:42
=============================================================================
Run Date: NOV 05, 2019                     Designation: TIU*1*327
Package : TIU - TEXT INTEGRATION UTILITIES    Priority: EMERGENCY
Version : 1       SEQ #291                      Status: Released
                  Compliance Date: NOV 15, 2019
=============================================================================

Associated patches: (v)TIU*1*323   <<= must be installed BEFORE `TIU*1*327'

Subject: CCRA-HSRM TIU NOTES CONTROL CHARACTERS FIX

Category: 
  - Routine

Description:
============

 THIS IS AN EMERGENCY PATCH.
 It deploys the following functionality changes and defect fixes:
  
 Story 1067877:
 1. An issue has been discovered when a COMMUNITY CARE
 TIU note that is sent is sent from VistA to HealthShare Referral 
 Management Syatem (HSRM) has embedded $c(13) characters in the text, it
 causes the VistA HL7 to stop transmitting the HL7 Text Integration Utility
 (TIU) Progress Note message to HSRM without sending the proper HL7
 sequence to tell the receiving station it is done transmitting. When the
 sending station doesn't send the correct terminating sequence of
 characters, the receiving station doesn't know to send an HL7
 Acknowledgement (ACK or NAK) sequence in response.
 When the receiving station doesn't send an ACK or NAK back in response,
 the sending station will resend the segment that has the $c(13) character
 again. The receiving station will fail to send the ACK or NAK. This issue
 causes the HL7 sending get hung in a loop.
   
 This patch implements code that will check for the $c(13) and other  
 control characters in each segment, and strips it out before sending it to
 HL7 to transmit.
  
 2. The Logical Link TIUCCRA was installed by the previous 
 patch TIU*1.0*323 with the AUTOSTART flag set to "Disabled".
 This patch is checking that the TIU*1.0*323 has been installed, and sets
 the TIUCCRA logical link AUTOSTART flag to "Enabled".
  
 3. Remove the additional lines in the NTE segment that are 
 added in error by the  previous  patch code.
  
 Test Sites:
 -----------
    Lebanon, PA Station #595
    Philadelphia, PA Station #642
    Montana Ft. Harrison, MT Station #436
    Togus, ME Station #402
  
 Documentation Retrieval Instructions:
 -------------------------------------
  Updated documentation describing the new functionality introduced by this
  patch is available.
    
  The preferred method is to retrieve files from download.vista.domain.ext.
  This transmits the files from the first available server. Sites may also
  elect to retrieve files directly from a specific server.
    
  Sites may retrieve the documentation directly using Secure File Transfer
  Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory at the following OI
  Field Offices:
    
     Hines:                        domain.ext   
     Salt Lake City:               domain.ext
    
  Documentation can also be found on the VA Software Documentation Library 
  at: 
    
  http://www.domain.ext/vdl/
  
 Software and Documentation Retrieval Instructions:
 ---------------------------------------------------- 
 Software is distributed by PackMan.
  
 Backout and rollback Procedure:
 -------------------------------
 In order to back out this patch, sites must use the
 KIDS option to Backup a Transport Global after loading
 the patch. They can then restore the routines from the
 backup message. If this option is not used, then backing
 out is not possible.
  
 In the event of a catastrophic failure, the Facility CIO may make the 
 decision to back-out the patch.
  
 It is imperative that you have performed a backup of the routines
 included in this patch prior to installation.
  
 The back-out plan is to restore the routines from the backup created.
  
 No data was modified by this patch installation and, therefore, no 
 rollback strategy is required.
  
 To verify the back-out completed successfully, ensure the checksum 
 matches the pre-patch checksum from the patch description.
  
 -------------------------
 This patch may be installed with users on the system although it is 
 recommended that it be installed during non-peak hours to minimize
 potential disruption to users. The patch is distributed in KIDS format
 in a PackMan message.  This patch requires TIU*1*323 and installation
 time is less than 5 minutes.
  
 Setup/Configuration Instructions:
 ---------------------------------
  
 These steps can be completed with users on the system. 
 TIU*1.0*323 must be installed in order to install this patch. This patch
 should take less than 15 minutes to install.
  
 Prior to starting the install you will need the IP address, Port and 
 DNS Name for the HealthShare Server to connect to.
  
  
 1.  Choose the PackMan message containing this patch.
    
  2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
    
  3.  From the KIDS Menu, select the Installation Menu.  From this menu, 
      you may elect to use the following options. When prompted for the
      INSTALL NAME, enter TIU*1.0*327.
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as Data Dictionaries (DDs) or
          templates.
          IN ORDER TO BACKOUT THIS PATCH, THIS OPTION MUST BE USE.
      b.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed.  It compares all components of this patch
          (routines, DDs, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
       
  4.  From the Installation Menu, select the Install Package(s) option and
      when prompted for the INSTALL NAME, enter TIU*1.0*327.
  
  5.  At the prompt, "Enter the IP address for the HealthShare server", 
      enter the IP address for the HealthShare server you will send the
      NON-VA Consults to.
  
  6.  At the prompt, "Enter the Port for the HealthShare server:", enter   
      the port the HealthShare server is listening on.
     
  7.  If prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? NO//' respond NO.
    
  8.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
      NO//" respond NO.
    
  9.  If prompted "Want to DISABLE Scheduled Options, Menu Options, 
       and Protocols? NO//" respond NO. 
    
  10.  If prompted "Delay Install (Minutes):  (0 - 60): 0//" respond 0.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.0;TEXT INTEGRATION UTILITIES;**[Patch List]**;July 24, 2019;Build 37

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: TIUCCRHL
    Before: B92952231   After:B103035520  **323,327**
Routine Name: TIUPR327
    Before:       n/a   After:   B673609  **327**
 
Routine list of preceding patches: 323

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUL 09, 2019
Completed By:                               Date Completed: NOV 05, 2019
Released By :                               Date Released : NOV 05, 2019
=============================================================================


Packman Mail Message:
=====================

$END TXT
