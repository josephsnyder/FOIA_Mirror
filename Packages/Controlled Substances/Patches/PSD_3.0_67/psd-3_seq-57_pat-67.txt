$TXT Created by CROSSMAN,PAMELA at VMPDEV20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Monday, 07/14/08 at 16:24
=============================================================================
Run Date: OCT 01, 2008                     Designation: PSD*3*67
Package : PSD - CONTROLLED SUBSTANCES         Priority: Mandatory
Version : 3        SEQ #57                      Status: Released
                  Compliance Date: NOV 01, 2008
=============================================================================

Associated patches: (v)PSD*3*45    <<= must be installed BEFORE `PSD*3*67'
                    (v)PSD*3*62    <<= must be installed BEFORE `PSD*3*67'

Subject: RETURN TO STOCK QUANTITY/ORDER ENTRY FOR WARD/PKI REPORTS

Category: 
  - Routine

Description:
============

 This patch will correct the following problems:
  
 1.  The CS Order Entry For Ward [PSD ORDER ENTRY] option in VistA errors
     when the user enters a ? at the DRUG prompt.
  
 2.  Wrong data is being displayed on the DEA PKI software reports in
     VistA.  If the order is pending, the report is displaying date filled 
     and date released information from the Prescription file (#52) instead
     of from the Pending Orders file (#52.41).
  
 3.  When returning a controlled substance to stock using 'Return To
     Stock' option, the quantity input is not allowing decimals.
  
 4.  The input for DRUG, PROVIDER, and PATIENT in the Digitally Signed
     Orders Report [PSD DIGITALLY SIGNED ORDERS] is case sensitive when
     asking ^ALL question.  It needs to accept any case of input.
  
  
 Associated Remedy Tickets:
 ==========================
 1.  HD232044 - <UNDEFINED>WO+6^DIC2 ^PSD(58.8 and <UNDEFINED>WR+32^DDSU
 2.  HD193638 - Wrong Data on Dig-Signed CS Orders Report
 3.  HD237225 - Return to stock won't accept quantity
 4.  HD256577 - Digitally signed report is case-sensitive
  
  
 Associated NSR:
 ===============
 N/A
  
  
 Participating Test Sites:
 =========================
 Butler VAMC
 Hines VAMC
 Philadelphia VAMC
 Pittsburg VAMC
 Puget Sound HCS
 Togus VAMC
  
  
 Remedy Ticket Overview:
 =======================
 1.  HD232044 - <UNDEFINED>WO+6^DIC2 ^PSD(58.8 and <UNDEFINED>WR+32^DDSU
  
     Problem:  
     --------
     When using the CS Order Entry For Ward [PSD ORDER ENTRY] option in
     VistA and the user enters a ? at the DRUG prompt, the application
     errors.
  
     Solution:
     ---------
     Modify the variables in the PSDORP routine that are passed to the DIC
     routine.
  
  
 2.  HD193638 - Wrong Data on Dig-Signed CS Orders Report
  
     Problem: 
     --------
     Wrong data is being displayed on the Digitally Signed CS Orders Report
     [PSD DIGITALLY SIGNED ORDERS] menu option.  If the order is pending,
     the report is displaying date filled and date released information
     from the Prescription file (#52) instead of from the Pending Orders
     file (#52.41).
  
     Solution:  
     ---------
     Modify routine PSDDSOR1 to only look in the Pending Orders file
     (#52.41) when printing the digitally signed pending orders.
  
  
 3.  HD237225 - Return to stock won't accept quantity
  
     Problem: 
     --------
     When Pharmacy tries to return a controlled substance to stock using 
     Complete Green Sheet [PSD COMPETE GS] option, the quantity input has a
     loop in it.  It will not accept decimals or any other answer.
  
     Solution:  
     ---------
     Modify routine PSDGSRV1 to accept decimals and start with minimum of
     .01 for quantity. 
  
  
 4.  HD256577 - Digitally signed report is case-sensitive
  
     Problem:  
     --------
     The input for DRUG, PROVIDER, and PATIENT in the Digitally Signed
     Orders Report [PSD DIGITALLY SIGNED ORDERS] is case sensitive when
     asking ^ALL question.  It needs to accept any case of input.
  
     Solution:  
     ---------
     Modify routine PSDDSOR to accept any form of input for DRUG, PROVIDER
     and PATIENT, and then will change the input to all upper case.
  
  
 Installation Instructions:
 ==========================
 If installed during the normal workday, it is recommended that the 
 Controlled Substances users be off the system.  Other VISTA users will not
 be affected.
  
 Install Time - less than 5 minutes.
  
 1.  Load Transport Global 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  Start Up KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter PSD*3.0*67):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
     a.  Choose the Install Package(s) option to start the patch
         install.
  
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         NO//' press RETURN. 
  
     c. When prompted 'Want to DISABLE Scheduled Options, Menu 
        Options, and Protocols? NO//' press RETURN.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0; CONTROLLED SUBSTANCES ;**[Patch List]**;13 Feb 97;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSDDSOR
    Before: B74602772   After: B76244326  **40,42,45,67**
Routine Name: PSDDSOR1
    Before:  B8766491   After:  B9308208  **40,67**
Routine Name: PSDGSRV1
    Before: B33992603   After: B34012900  **4,8,9,56,62,67**
Routine Name: PSDORP
    Before: B26130595   After: B23089929  **58,62,67**
 
Routine list of preceding patches: 45, 62

=============================================================================
User Information:
Entered By  : DEHGHANIAN,JAMSHID            Date Entered  : JUL 24, 2007
Completed By: WERNER,GARY                   Date Completed: SEP 26, 2008
Released By : VECE,VIRGINIA                 Date Released : OCT 01, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
