Released PRCA*4.5*360 SEQ #317
Extracted from mail message
**KIDS**:PRCA*4.5*360^

**INSTALL NAME**
PRCA*4.5*360
"BLD",11398,0)
PRCA*4.5*360^ACCOUNTS RECEIVABLE^0^3191203^y
"BLD",11398,4,0)
^9.64PA^^
"BLD",11398,6.3)
10
"BLD",11398,"INIT")
POSTINIT^PRCAP360
"BLD",11398,"KRN",0)
^9.67PA^1.5^24
"BLD",11398,"KRN",.4,0)
.4
"BLD",11398,"KRN",.401,0)
.401
"BLD",11398,"KRN",.402,0)
.402
"BLD",11398,"KRN",.403,0)
.403
"BLD",11398,"KRN",.5,0)
.5
"BLD",11398,"KRN",.84,0)
.84
"BLD",11398,"KRN",1.5,0)
1.5
"BLD",11398,"KRN",1.6,0)
1.6
"BLD",11398,"KRN",1.61,0)
1.61
"BLD",11398,"KRN",1.62,0)
1.62
"BLD",11398,"KRN",3.6,0)
3.6
"BLD",11398,"KRN",3.8,0)
3.8
"BLD",11398,"KRN",9.2,0)
9.2
"BLD",11398,"KRN",9.8,0)
9.8
"BLD",11398,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",11398,"KRN",9.8,"NM",1,0)
PRCAP360^^0^B13830908
"BLD",11398,"KRN",9.8,"NM",2,0)
RCXFMSUR^^0^B119963189
"BLD",11398,"KRN",9.8,"NM",3,0)
RCXFMSUF^^0^B59363720
"BLD",11398,"KRN",9.8,"NM",4,0)
RCRJRBD^^0^B101712890
"BLD",11398,"KRN",9.8,"NM",5,0)
PRCABJV^^0^B56218047
"BLD",11398,"KRN",9.8,"NM",6,0)
RCRJRBDT^^0^B66710288
"BLD",11398,"KRN",9.8,"NM",7,0)
RCCPCPS1^^0^B59707766
"BLD",11398,"KRN",9.8,"NM","B","PRCABJV",5)

"BLD",11398,"KRN",9.8,"NM","B","PRCAP360",1)

"BLD",11398,"KRN",9.8,"NM","B","RCCPCPS1",7)

"BLD",11398,"KRN",9.8,"NM","B","RCRJRBD",4)

"BLD",11398,"KRN",9.8,"NM","B","RCRJRBDT",6)

"BLD",11398,"KRN",9.8,"NM","B","RCXFMSUF",3)

"BLD",11398,"KRN",9.8,"NM","B","RCXFMSUR",2)

"BLD",11398,"KRN",19,0)
19
"BLD",11398,"KRN",19.1,0)
19.1
"BLD",11398,"KRN",101,0)
101
"BLD",11398,"KRN",409.61,0)
409.61
"BLD",11398,"KRN",771,0)
771
"BLD",11398,"KRN",779.2,0)
779.2
"BLD",11398,"KRN",870,0)
870
"BLD",11398,"KRN",8989.51,0)
8989.51
"BLD",11398,"KRN",8989.52,0)
8989.52
"BLD",11398,"KRN",8994,0)
8994
"BLD",11398,"KRN","B",.4,.4)

"BLD",11398,"KRN","B",.401,.401)

"BLD",11398,"KRN","B",.402,.402)

"BLD",11398,"KRN","B",.403,.403)

"BLD",11398,"KRN","B",.5,.5)

"BLD",11398,"KRN","B",.84,.84)

"BLD",11398,"KRN","B",1.5,1.5)

"BLD",11398,"KRN","B",1.6,1.6)

"BLD",11398,"KRN","B",1.61,1.61)

"BLD",11398,"KRN","B",1.62,1.62)

"BLD",11398,"KRN","B",3.6,3.6)

"BLD",11398,"KRN","B",3.8,3.8)

"BLD",11398,"KRN","B",9.2,9.2)

"BLD",11398,"KRN","B",9.8,9.8)

"BLD",11398,"KRN","B",19,19)

"BLD",11398,"KRN","B",19.1,19.1)

"BLD",11398,"KRN","B",101,101)

"BLD",11398,"KRN","B",409.61,409.61)

"BLD",11398,"KRN","B",771,771)

"BLD",11398,"KRN","B",779.2,779.2)

"BLD",11398,"KRN","B",870,870)

"BLD",11398,"KRN","B",8989.51,8989.51)

"BLD",11398,"KRN","B",8989.52,8989.52)

"BLD",11398,"KRN","B",8994,8994)

"BLD",11398,"QDEF")
^^^^NO^^^^^^NO
"BLD",11398,"QUES",0)
^9.62^^
"BLD",11398,"REQB",0)
^9.611^3^3
"BLD",11398,"REQB",1,0)
PRCA*4.5*350^1
"BLD",11398,"REQB",2,0)
PRCA*4.5*351^1
"BLD",11398,"REQB",3,0)
PRCA*4.5*362^1
"BLD",11398,"REQB","B","PRCA*4.5*350",1)

"BLD",11398,"REQB","B","PRCA*4.5*351",2)

"BLD",11398,"REQB","B","PRCA*4.5*362",3)

"INIT")
POSTINIT^PRCAP360
"MBREQ")
0
"PKG",561,-1)
1^1
"PKG",561,0)
ACCOUNTS RECEIVABLE^PRCA^FMS
"PKG",561,22,0)
^9.49I^1^1
"PKG",561,22,1,0)
4.5^2950320^2950331
"PKG",561,22,1,"PAH",1,0)
360^3191203
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","PRCABJV")
0^5^B56218047^B55801728
"RTN","PRCABJV",1,0)
PRCABJV ;WASH-ISC@ALTOONA,PA/TJK-FILE VERIFICATION FOR BACKGROUND JOB ;4/6/95  10:13 AM
"RTN","PRCABJV",2,0)
V ;;4.5;Accounts Receivable;**1,48,63,114,141,170,176,173,192,220,296,310,315,338,350,360**;Mar 20, 1995;Build 10
"RTN","PRCABJV",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCABJV",4,0)
 ;;patch 192 changes all occurrences of CHAMPUS to TRICARE
"RTN","PRCABJV",5,0)
EN1(FILE,X1,X2,ERROR) ;
"RTN","PRCABJV",6,0)
 ;FILE IS THE FILE NUMBER
"RTN","PRCABJV",7,0)
 ;X1 AND X2 ARE 3 PART VARIABLES SEPARATED BY SEMI-COLONS WITH
"RTN","PRCABJV",8,0)
 ;THE FORMAT (X-REF INDEX;NODE;PIECE)
"RTN","PRCABJV",9,0)
 ;AN ERROR ARRAY IS SET IF VALIDATION FAILS
"RTN","PRCABJV",10,0)
 NEW LT,CNT,I,I1,I2,I3,REC,IND,ND,PC,DATA,J,LN,FILENT
"RTN","PRCABJV",11,0)
 S LT=$S(FILE[430.3:"TRANST",FILE[430.2:"CAT",1:"EVENT"),CNT=0
"RTN","PRCABJV",12,0)
 F I=1,2 S J=@("X"_I),IND(I)=$P(J,";"),ND(I)=$P(J,";",2),PC(I)=$P(J,";",3)
"RTN","PRCABJV",13,0)
 F I1=1:1 D  Q:(DATA(0)="EOF")!(ERROR)
"RTN","PRCABJV",14,0)
    .S LN=$T(@LT+I1) F I=3:1:6 S DATA(I-3)=$P(LN,";",I)
"RTN","PRCABJV",15,0)
    .Q:DATA(0)="EOF"
"RTN","PRCABJV",16,0)
    .G RC:FILE<430
"RTN","PRCABJV",17,0)
    .I '$D(^PRCA(FILE,"B",DATA(0))) S ERROR=1 Q
"RTN","PRCABJV",18,0)
    .S REC=$O(^PRCA(FILE,"B",DATA(0),0)) I 'REC S ERROR=1 Q
"RTN","PRCABJV",19,0)
    .I DATA(3)'=REC S ERROR=1 Q
"RTN","PRCABJV",20,0)
    .I $P(^PRCA(FILE,REC,0),U)'=DATA(0) S ERROR=1 Q
"RTN","PRCABJV",21,0)
    .G CNT:X1=""
"RTN","PRCABJV",22,0)
    .F I2=1,2 D  Q:ERROR  I I2=1,X2="" Q
"RTN","PRCABJV",23,0)
       ..I '$D(^PRCA(FILE,IND(I2),DATA(I2))) S ERROR=1 G Q2
"RTN","PRCABJV",24,0)
       ..;  do not check if category number is a zero
"RTN","PRCABJV",25,0)
       ..I I2=1,DATA(1)'=0,$O(^PRCA(FILE,IND(I2),DATA(I2),0))'=REC S ERROR=1 G Q2
"RTN","PRCABJV",26,0)
       ..I $P(^PRCA(FILE,REC,ND(I2)),U,PC(I2))'=DATA(I2) S ERROR=1
"RTN","PRCABJV",27,0)
Q2 ..Q
"RTN","PRCABJV",28,0)
CNT .Q:ERROR
"RTN","PRCABJV",29,0)
    .S CNT=CNT+1
"RTN","PRCABJV",30,0)
Q1 .Q
"RTN","PRCABJV",31,0)
RC .I '$D(^RC(FILE,"B",DATA(0))) S ERROR=1 Q
"RTN","PRCABJV",32,0)
    .S REC=$O(^RC(FILE,"B",DATA(0),0)) I 'REC S ERROR=1 Q
"RTN","PRCABJV",33,0)
    .I DATA(3)'=REC S ERROR=1 Q
"RTN","PRCABJV",34,0)
    .I $P(^RC(FILE,REC,0),U)'=DATA(0) S ERROR=1 Q
"RTN","PRCABJV",35,0)
    .G CNT:X1=""
"RTN","PRCABJV",36,0)
    .F I3=1,2 D  Q:ERROR  I I3=1,X2="" Q
"RTN","PRCABJV",37,0)
       ..I '$D(^RC(FILE,IND(I3),DATA(I3))) S ERROR=1 G Q3
"RTN","PRCABJV",38,0)
       ..I $O(^RC(FILE,IND(I3),DATA(I3),0))'=REC S ERROR=1 G Q3
"RTN","PRCABJV",39,0)
       ..I $P(^RC(FILE,REC,ND(I3)),U,PC(I3))'=DATA(I3) S ERROR=1
"RTN","PRCABJV",40,0)
Q3 ..Q
"RTN","PRCABJV",41,0)
    .G CNT
"RTN","PRCABJV",42,0)
 I FILE>429.99,$P(^PRCA(FILE,0),U,4)'=CNT S ERROR=1 G EXIT
"RTN","PRCABJV",43,0)
 G EXIT:FILE>429.99
"RTN","PRCABJV",44,0)
 I $P(^RC(FILE,0),U,4)'=CNT S ERROR=1
"RTN","PRCABJV",45,0)
EXIT Q:'ERROR
"RTN","PRCABJV",46,0)
 S FILENT=$S(FILE>429.99:$P(^PRCA(FILE,0),U,4),1:$P(^RC(FILE,0),U,4))
"RTN","PRCABJV",47,0)
 S ERROR(1)="An error has been detected in the "_$P(^DIC(FILE,0),U)_" File."
"RTN","PRCABJV",48,0)
 I DATA(0)="EOF" S ERROR(2)="There are too many entries in your file."
"RTN","PRCABJV",49,0)
 I DATA(0)'="EOF" S ERROR(2)="The "_DATA(0)_" Entry in your file is missing or corrupted."
"RTN","PRCABJV",50,0)
 Q
"RTN","PRCABJV",51,0)
TRANST ;
"RTN","PRCABJV",52,0)
 ;;ACTIVE;102;A;16
"RTN","PRCABJV",53,0)
 ;;ADD (AMEND);302;AD;37
"RTN","PRCABJV",54,0)
 ;;ADMIN.COST CHARGE;12;AC;12
"RTN","PRCABJV",55,0)
 ;;AMEND;303;AM;38
"RTN","PRCABJV",56,0)
 ;;AMENDED BILL;110;AB;33
"RTN","PRCABJV",57,0)
 ;;ARCHIVED;115;XX;49
"RTN","PRCABJV",58,0)
 ;;BILL INCOMPLETE;201;BI;27
"RTN","PRCABJV",59,0)
 ;;CANCELLATION;111;CN;39
"RTN","PRCABJV",60,0)
 ;;CANCELLED BILL;210;CB;26
"RTN","PRCABJV",61,0)
 ;;CASH COLLECTION BY RC/DOJ;7;CJ;7
"RTN","PRCABJV",62,0)
 ;;CHARGE SUSPENDED;19;CS;47
"RTN","PRCABJV",63,0)
 ;;COLLECTED/CLOSED;108;CC;22
"RTN","PRCABJV",64,0)
 ;;COMMENT;17;CM;45
"RTN","PRCABJV",65,0)
 ;;CS ADD CASE INFO;47;CZ;67
"RTN","PRCABJV",66,0)
 ;;CS ADMIN ADJ TR REV?N;54;AO;76
"RTN","PRCABJV",67,0)
 ;;CS ADMIN ADJ TR REV?Y;53;AN;75
"RTN","PRCABJV",68,0)
 ;;CS ADMIN.COST CHARGE;52;AE;74
"RTN","PRCABJV",69,0)
 ;;CS BILL RECALL;34;CR;53
"RTN","PRCABJV",70,0)
 ;;CS CASE RECALL;45;CO;64
"RTN","PRCABJV",71,0)
 ;;CS DEBTOR NEW BILL;39;CK;85
"RTN","PRCABJV",72,0)
 ;;CS DEBTOR RECALL;35;CE;56
"RTN","PRCABJV",73,0)
 ;;CS DEBTOR RE-REFER BILL;64;RS;87
"RTN","PRCABJV",74,0)
 ;;CS DECR ADJ NOT APP;40;CA;66
"RTN","PRCABJV",75,0)
 ;;CS DECREASE ADJ;49;CY;70
"RTN","PRCABJV",76,0)
 ;;CS DEL BILL RECALL;37;CF;55
"RTN","PRCABJV",77,0)
 ;;CS DEL CASE RECALL;46;CG;65
"RTN","PRCABJV",78,0)
 ;;CS DEL DEBTOR RECALL;38;CL;57
"RTN","PRCABJV",79,0)
 ;;CS INC ADJ TR REV?N;58;AT;80
"RTN","PRCABJV",80,0)
 ;;CS INC ADJ TR REV?Y;57;AS;79
"RTN","PRCABJV",81,0)
 ;;CS INCREASE ADJ;51;AI;73
"RTN","PRCABJV",82,0)
 ;;CS NEW DBTR NEW BILL;48;CH;68
"RTN","PRCABJV",83,0)
 ;;CS PEND RECON;61;RK;83
"RTN","PRCABJV",84,0)
 ;;CS RECALL PLACED;62;CQ;84
"RTN","PRCABJV",85,0)
 ;;CS RECON WORKED;50;CV;71
"RTN","PRCABJV",86,0)
 ;;CS RE-REFER BILL CANCEL;65;RC;88
"RTN","PRCABJV",87,0)
 ;;CS RE-REFER BILL REQUEST;63;RR;86
"RTN","PRCABJV",88,0)
 ;;CS STOP DELETED;36;CD;54
"RTN","PRCABJV",89,0)
 ;;CS STOP PLACED;33;CP;51
"RTN","PRCABJV",90,0)
 ;;CS UPDATE DEBT;41;CU;60
"RTN","PRCABJV",91,0)
 ;;DEBIT VOUCHER (SF 5515);30;DV;30
"RTN","PRCABJV",92,0)
 ;;DECREASE ADJUSTMENT;21;DA;35
"RTN","PRCABJV",93,0)
 ;;DEL REPAY PLAN;31;DP;72
"RTN","PRCABJV",94,0)
 ;;DELETE (AMEND);301;DL;36
"RTN","PRCABJV",95,0)
 ;;EXEMPT INT/ADM. COST;14;E;14
"RTN","PRCABJV",96,0)
 ;;IN-ACTIVE;103;IA;17
"RTN","PRCABJV",97,0)
 ;;INCOMPLETE;101;IN;15
"RTN","PRCABJV",98,0)
 ;;INCREASE ADJUSTMENT;1;AJ;1
"RTN","PRCABJV",99,0)
 ;;INTEREST/ADM. CHARGE;13;IC;13
"RTN","PRCABJV",100,0)
 ;;MARSHAL/COURT COST;15;ML;24
"RTN","PRCABJV",101,0)
 ;;NEW BILL;104;N;18
"RTN","PRCABJV",102,0)
 ;;OLD BILL;106;OB;28
"RTN","PRCABJV",103,0)
 ;;OPEN;112;OP;42
"RTN","PRCABJV",104,0)
 ;;PAYMENT (IN FULL);20;PF;34
"RTN","PRCABJV",105,0)
 ;;PAYMENT (IN PART);2;PP;2
"RTN","PRCABJV",106,0)
 ;;PENDING APPROVAL;205;PA;20
"RTN","PRCABJV",107,0)
 ;;PENDING ARCHIVE;114;X;48
"RTN","PRCABJV",108,0)
 ;;PENDING CALM CODE;107;PC;21
"RTN","PRCABJV",109,0)
 ;;REESTABLISH TO RC/DOJ;5;RR;5
"RTN","PRCABJV",110,0)
 ;;RE-ESTABLISH;250;RW;43
"RTN","PRCABJV",111,0)
 ;;REFER TO DOJ;4;RJ;4
"RTN","PRCABJV",112,0)
 ;;REFER TO RC;3;RC;3
"RTN","PRCABJV",113,0)
 ;;REFUND REVIEW;113;PR;44
"RTN","PRCABJV",114,0)
 ;;REFUNDED;120;RF;41
"RTN","PRCABJV",115,0)
 ;;REPAYMENT PLAN;16;RP;25
"RTN","PRCABJV",116,0)
 ;;RETURNED BY RC/DOJ;6;RD;6
"RTN","PRCABJV",117,0)
 ;;RETURNED FOR AMENDMENT;230;RA;32
"RTN","PRCABJV",118,0)
 ;;RETURNED FROM AR (NEW);220;RT;31
"RTN","PRCABJV",119,0)
 ;;SUSPENDED;240;SP;40
"RTN","PRCABJV",120,0)
 ;;SUSPENSE;105;S;19
"RTN","PRCABJV",121,0)
 ;;TERM.BY COMPROMISE;9;TC;9
"RTN","PRCABJV",122,0)
 ;;TERM.BY FIS.OFFICER;8;TO;8
"RTN","PRCABJV",123,0)
 ;;TERM.BY RC/DOJ;29;TJ;29
"RTN","PRCABJV",124,0)
 ;;UNSUSPENDED;18;US;46
"RTN","PRCABJV",125,0)
 ;;WAIVED IN FULL;10;WF;10
"RTN","PRCABJV",126,0)
 ;;WAIVED IN PART;11;WP;11
"RTN","PRCABJV",127,0)
 ;;WRITE-OFF;109;WO;23
"RTN","PRCABJV",128,0)
 ;;EOF
"RTN","PRCABJV",129,0)
 ;
"RTN","PRCABJV",130,0)
 ;PRCA*4.5*338 - Added and Alphabetized Community Care categories
"RTN","PRCABJV",131,0)
CAT ;patch 192 - ISC-0502-N2803 change Champus to Tricare
"RTN","PRCABJV",132,0)
 ;;ADULT DAY HEALTH CARE;40;AD;33
"RTN","PRCABJV",133,0)
 ;;C (MEANS TEST);24;C;18
"RTN","PRCABJV",134,0)
 ;;CC INPT;65;CJ;63
"RTN","PRCABJV",135,0)
 ;;CC MTF INPT;69;CX;67
"RTN","PRCABJV",136,0)
 ;;CC MTF OPT;86;D3;84
"RTN","PRCABJV",137,0)
 ;;CC MTF RX CO-PAYMENT;70;CY;68
"RTN","PRCABJV",138,0)
 ;;CC MTF THIRD PARTY;53;C4;51
"RTN","PRCABJV",139,0)
 ;;CC NO-FAULT AUTO;60;C8;58
"RTN","PRCABJV",140,0)
 ;;CC NURSING HOME CARE - LTC;71;CL;69
"RTN","PRCABJV",141,0)
 ;;CC OPT;84;D1;82
"RTN","PRCABJV",142,0)
 ;;CC RESPITE CARE;72;CN;70
"RTN","PRCABJV",143,0)
 ;;CC RX CO-PAYMENT;66;CK;64
"RTN","PRCABJV",144,0)
 ;;CC THIRD PARTY;51;C2;49
"RTN","PRCABJV",145,0)
 ;;CC TORT FEASOR;61;C9;59
"RTN","PRCABJV",146,0)
 ;;CC URGENT CARE;87;U1;85
"RTN","PRCABJV",147,0)
 ;;CC WORKERS' COMP;59;CA;57
"RTN","PRCABJV",148,0)
 ;;CCN INPT;67;CO;65
"RTN","PRCABJV",149,0)
 ;;CCN NO-FAULT AUTO;57;CB;55
"RTN","PRCABJV",150,0)
 ;;CCN NURSING HOME CARE - LTC;73;CR;71
"RTN","PRCABJV",151,0)
 ;;CCN OPT;85;D2;83
"RTN","PRCABJV",152,0)
 ;;CCN RESPITE CARE;74;CU;72
"RTN","PRCABJV",153,0)
 ;;CCN RX CO-PAYMENT;68;CQ;66
"RTN","PRCABJV",154,0)
 ;;CCN THIRD PARTY;52;C3;50
"RTN","PRCABJV",155,0)
 ;;CCN TORT FEASOR;58;CC;56
"RTN","PRCABJV",156,0)
 ;;CCN WORKERS' COMP;56;CD;54
"RTN","PRCABJV",157,0)
 ;;CHAMPVA;36;CV;29
"RTN","PRCABJV",158,0)
 ;;CHAMPVA SUBSISTENCE;34;CS;27
"RTN","PRCABJV",159,0)
 ;;CHAMPVA THIRD PARTY;35;CT;28
"RTN","PRCABJV",160,0)
 ;;CHOICE INPT;63;CF;61
"RTN","PRCABJV",161,0)
 ;;CHOICE NO-FAULT AUTO;54;C5;52
"RTN","PRCABJV",162,0)
 ;;CHOICE NURSING HOME CARE - LTC;75;CH;73
"RTN","PRCABJV",163,0)
 ;;CHOICE OPT;83;CZ;81
"RTN","PRCABJV",164,0)
 ;;CHOICE RESPITE CARE;76;CI;74
"RTN","PRCABJV",165,0)
 ;;CHOICE RX CO-PAYMENT;64;CG;62
"RTN","PRCABJV",166,0)
 ;;CHOICE THIRD PARTY;50;C1;48
"RTN","PRCABJV",167,0)
 ;;CHOICE TORT FEASOR;55;C6;53
"RTN","PRCABJV",168,0)
 ;;CHOICE WORKERS' COMP;62;C7;60
"RTN","PRCABJV",169,0)
 ;;COMP & PEN PROCEEDS;8;CM;43
"RTN","PRCABJV",170,0)
 ;;CRIME OF PER.VIO.;27;CP;8
"RTN","PRCABJV",171,0)
 ;;CURRENT EMP.;14;CE;16
"RTN","PRCABJV",172,0)
 ;;CWT PROCEEDS;7;CW;42
"RTN","PRCABJV",173,0)
 ;;DOMICILIARY;41;DO;34
"RTN","PRCABJV",174,0)
 ;;EMERGENCY/HUMANITARIAN;25;H;2
"RTN","PRCABJV",175,0)
 ;;EMERGENCY/HUMANITARIAN REIMB.;48;HR;46
"RTN","PRCABJV",176,0)
 ;;ENHANCED USE LEASE PROCEEDS;10;EP;44
"RTN","PRCABJV",177,0)
 ;;EX-EMPLOYEE;13;E;15
"RTN","PRCABJV",178,0)
 ;;FEDERAL AGENCIES-REFUND;15;F2;13
"RTN","PRCABJV",179,0)
 ;;FEDERAL AGENCIES-REIMB.;16;F1;14
"RTN","PRCABJV",180,0)
 ;;FEE REIMB INS;47;FR;45
"RTN","PRCABJV",181,0)
 ;;GERIATRIC EVAL-INSTITUTIONAL;44;GE;37
"RTN","PRCABJV",182,0)
 ;;GERIATRIC EVAL-NON-INSTITUTION;45;GN;38
"RTN","PRCABJV",183,0)
 ;;HOSPITAL CARE (NSC);1;HC;5
"RTN","PRCABJV",184,0)
 ;;HOSPITAL CARE PER DIEM;32;HP;25
"RTN","PRCABJV",185,0)
 ;;INELIGIBLE HOSP.;20;I;1
"RTN","PRCABJV",186,0)
 ;;INELIGIBLE HOSP. REIMB.;49;IR;47
"RTN","PRCABJV",187,0)
 ;;INTERAGENCY;19;IA;20
"RTN","PRCABJV",188,0)
 ;;MEDICARE;28;MC;21
"RTN","PRCABJV",189,0)
 ;;MILITARY;17;M;12
"RTN","PRCABJV",190,0)
 ;;NO-FAULT AUTO ACC.;26;NA;7
"RTN","PRCABJV",191,0)
 ;;NURSING HOME CARE PER DIEM;31;NP;24
"RTN","PRCABJV",192,0)
 ;;NURSING HOME CARE(NSC);3;NC;3
"RTN","PRCABJV",193,0)
 ;;NURSING HOME CARE-LTC;46;NL;39
"RTN","PRCABJV",194,0)
 ;;NURSING HOME PROCEEDS;5;NH;40
"RTN","PRCABJV",195,0)
 ;;OUTPATIENT CARE(NSC);2;OC;4
"RTN","PRCABJV",196,0)
 ;;PARKING FEES;6;PF;41
"RTN","PRCABJV",197,0)
 ;;PREPAYMENT;33;PP;26
"RTN","PRCABJV",198,0)
 ;;REIMBURS.HEALTH INS.;21;RI;9
"RTN","PRCABJV",199,0)
 ;;RESPITE CARE-INSTITUTIONAL;42;RC;35
"RTN","PRCABJV",200,0)
 ;;RESPITE CARE-NON-INSTITUTIONAL;43;RN;36
"RTN","PRCABJV",201,0)
 ;;RX CO-PAYMENT/NSC VET;30;PN;23
"RTN","PRCABJV",202,0)
 ;;RX CO-PAYMENT/SC VET;29;PS;22
"RTN","PRCABJV",203,0)
 ;;SHARING AGREEMENTS;18;SA;19
"RTN","PRCABJV",204,0)
 ;;TORT FEASOR;22;TF;10
"RTN","PRCABJV",205,0)
 ;;TRICARE;37;T1;30
"RTN","PRCABJV",206,0)
 ;;TRICARE BLIND REHABILITATION;80;T7;78
"RTN","PRCABJV",207,0)
 ;;TRICARE DENTAL;81;T8;79
"RTN","PRCABJV",208,0)
 ;;TRICARE DES;77;T4;75
"RTN","PRCABJV",209,0)
 ;;TRICARE PATIENT;38;T2;31
"RTN","PRCABJV",210,0)
 ;;TRICARE PHARMACY;82;T9;80
"RTN","PRCABJV",211,0)
 ;;TRICARE SCI;78;T5;76
"RTN","PRCABJV",212,0)
 ;;TRICARE TBI;79;T6;77
"RTN","PRCABJV",213,0)
 ;;TRICARE THIRD PARTY;39;T3;32
"RTN","PRCABJV",214,0)
 ;;VENDOR;11;V;17
"RTN","PRCABJV",215,0)
 ;;WORKMAN'S COMP.;23;WC;6
"RTN","PRCABJV",216,0)
 ;;EOF
"RTN","PRCABJV",217,0)
EVENT ;
"RTN","PRCABJV",218,0)
 ;;CASH PAYMENT;6;;6
"RTN","PRCABJV",219,0)
 ;;CHECK/MO PAYMENT;4;;4
"RTN","PRCABJV",220,0)
 ;;COMMENT;1;;1
"RTN","PRCABJV",221,0)
 ;;CREDIT CARD PAYMENT;7;;7
"RTN","PRCABJV",222,0)
 ;;DEPT OF JUSTICE PAYMENT;5;;5
"RTN","PRCABJV",223,0)
 ;;REGIONAL COUNSEL PAYMENT;3;;3
"RTN","PRCABJV",224,0)
 ;;FOLLOW-UP LETTER;10;;10
"RTN","PRCABJV",225,0)
 ;;IRS PAYMENT;11;;11
"RTN","PRCABJV",226,0)
 ;;PATIENT STATEMENT;2;;2
"RTN","PRCABJV",227,0)
 ;;TDA PAYMENT;8;;8
"RTN","PRCABJV",228,0)
 ;;UB PRINTED;9;;9
"RTN","PRCABJV",229,0)
 ;;LOCKBOX;12;;12
"RTN","PRCABJV",230,0)
 ;;TOP PAYMENT;13;;13
"RTN","PRCABJV",231,0)
 ;;EDI LOCKBOX;14;;14
"RTN","PRCABJV",232,0)
 ;;ADMINISTRATIVE OFFSET;15;;15
"RTN","PRCABJV",233,0)
 ;;PRIVATE COLLECTION AGENCY;16;;16
"RTN","PRCABJV",234,0)
 ;;EOF
"RTN","PRCAP360")
0^1^B13830908^n/a
"RTN","PRCAP360",1,0)
PRCAP360 ;SAB/Albany - PRCA*4.5*360 POST INSTALL;07/30/19 2:10pm
"RTN","PRCAP360",2,0)
 ;;4.5;Accounts Receivable;**360**;Mar 20, 1995;Build 10
"RTN","PRCAP360",3,0)
 ;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAP360",4,0)
 Q
"RTN","PRCAP360",5,0)
 ;
"RTN","PRCAP360",6,0)
POSTINIT ;Post Install for PRCA*4.5*360
"RTN","PRCAP360",7,0)
 D BMES^XPDUTL(" >>  Starting the Post-Initialization routine for PRCA*4.5*360 ")
"RTN","PRCAP360",8,0)
 ; Adding AR CATEGORY
"RTN","PRCAP360",9,0)
 D ARCAT
"RTN","PRCAP360",10,0)
 ; rebuild cross-references
"RTN","PRCAP360",11,0)
 D BMES^XPDUTL(" >>  End of the Post-Initialization routine for PRCA*4.5*360")
"RTN","PRCAP360",12,0)
 Q
"RTN","PRCAP360",13,0)
 ;
"RTN","PRCAP360",14,0)
ARCAT ;AR CATEGORY ENTRY (430.2)
"RTN","PRCAP360",15,0)
 N LOOP,FDA,FDAIEN,DATA,CHKIEN,NUM,NEWREC,SEMI2
"RTN","PRCAP360",16,0)
 N DA,DIE,DLAYGO,DR,FUND,X,Y
"RTN","PRCAP360",17,0)
 ;
"RTN","PRCAP360",18,0)
 D MES^XPDUTL("     -> Adding new AR CATEGORY entries to file 430.2 ...")
"RTN","PRCAP360",19,0)
 ; Add new AR categories
"RTN","PRCAP360",20,0)
 S SEMI2=2  ; Two semicolons";;" counted for each field
"RTN","PRCAP360",21,0)
 F LOOP=2:1 S DATA=$T(ARDATA+LOOP) Q:$P(DATA,";",3)="END"  D
"RTN","PRCAP360",22,0)
 .S NEWREC=1 ; New record indicator
"RTN","PRCAP360",23,0)
 .;Extract the new AR Category to be added.
"RTN","PRCAP360",24,0)
 .;Check to insure that the AR Category doesn't exist already
"RTN","PRCAP360",25,0)
 .S CHKIEN=""  ; Initialized the check variable
"RTN","PRCAP360",26,0)
 .S CHKIEN=$O(^PRCA(430.2,"B",$P(DATA,";",3),"")) ;   Category Name (UNEDITABLE)
"RTN","PRCAP360",27,0)
 .I +CHKIEN S NEWREC=0 D MES^XPDUTL($P(DATA,";",3)_" already exist and updating...")
"RTN","PRCAP360",28,0)
 . K DD,DO,Y
"RTN","PRCAP360",29,0)
 . S DLAYGO=430.2,DIC="^PRCA(430.2,",DIC(0)="L",X=$P(DATA,";",3)
"RTN","PRCAP360",30,0)
 . ;
"RTN","PRCAP360",31,0)
 . ; If no entry found, create a new entry
"RTN","PRCAP360",32,0)
 . I '+CHKIEN D FILE^DICN S CHKIEN=+Y K DIC,DINUM,DLAYGO
"RTN","PRCAP360",33,0)
 . ;
"RTN","PRCAP360",34,0)
 .S DR=""
"RTN","PRCAP360",35,0)
 .;                                                  Field# | Name of field
"RTN","PRCAP360",36,0)
 .S:NEWREC=1 DR="1///"_$P(DATA,";",2+SEMI2)        ; 1      | Abbreviation (UNEDITABLE)
"RTN","PRCAP360",37,0)
 .S DR=DR_";2///"_$P(DATA,";",3+SEMI2)             ; 2      | AMIS Seg # (UNEDITABLE)
"RTN","PRCAP360",38,0)
 .S DR=DR_";3///"_$P(DATA,";",4+SEMI2)             ; 3      | GL Number
"RTN","PRCAP360",39,0)
 .S DR=DR_";5///"_$P(DATA,";",5+SEMI2)             ; 5      | Type   (P,O,T,V,C,N)
"RTN","PRCAP360",40,0)
 .S:NEWREC=1 DR=DR_";6////"_$P(DATA,";",6+SEMI2)   ; 6      | Category number (UNEDITABLE)
"RTN","PRCAP360",41,0)
 .S DR=DR_";7///"_$P(DATA,";",7+SEMI2)             ; 7      | Receivable Code 
"RTN","PRCAP360",42,0)
 .S DR=DR_";9///"_$P(DATA,";",11+SEMI2)            ; 9      | Interest
"RTN","PRCAP360",43,0)
 .S DR=DR_";10///"_$P(DATA,";",9+SEMI2)            ;10      | Admin 
"RTN","PRCAP360",44,0)
 .S DR=DR_";11///"_$P(DATA,";",10+SEMI2)           ;11      | Penalty 
"RTN","PRCAP360",45,0)
 .S:NEWREC=1 DR=DR_";12///"_$P(DATA,";",11+SEMI2)  ;12      | Accrued (UNEDITABLE)
"RTN","PRCAP360",46,0)
 .S DR=DR_";13///"_$P(DATA,";",12+SEMI2)           ;13      | Refund
"RTN","PRCAP360",47,0)
 .S DR=DR_";14///"_$P(DATA,";",13+SEMI2)           ;14      | Paragraph Codes
"RTN","PRCAP360",48,0)
 .; REFERRALS
"RTN","PRCAP360",49,0)
 .S DR=DR_";1.01///1;"                             ;1.01    | Refer to DMC? 
"RTN","PRCAP360",50,0)
 .S DR=DR_"1.02///2;"                              ;1.02    | Refer to TOP? 
"RTN","PRCAP360",51,0)
 .S DR=DR_"1.03///3"                               ;1.03    | Refer to CS? 
"RTN","PRCAP360",52,0)
 .;
"RTN","PRCAP360",53,0)
 .I $E(DR,1)=";" S DR=$P(DR,";",2,$L(DR))          ; Remove ";" to update existing record with data specified in fields
"RTN","PRCAP360",54,0)
 .;
"RTN","PRCAP360",55,0)
 .S DIE="^PRCA(430.2,",DA=CHKIEN
"RTN","PRCAP360",56,0)
 .D ^DIE
"RTN","PRCAP360",57,0)
 S DA=CHKIEN,DIK="^IBE(430.2," D IX^DIK            ; Re-Index
"RTN","PRCAP360",58,0)
 D MES^XPDUTL("        New AR CATEGORY added.")
"RTN","PRCAP360",59,0)
 Q
"RTN","PRCAP360",60,0)
 ; ACTUAL FIELD SETTINGS NEXT LINE
"RTN","PRCAP360",61,0)
 ;;CC URGENT CARE;U1;240;1221;P;87;2;1;1;0;1;2;30,40,55,80,85,50,60,65,70
"RTN","PRCAP360",62,0)
 ;
"RTN","PRCAP360",63,0)
 ; field    1      2  3   4   5  6 7 8 9 10111213
"RTN","PRCAP360",64,0)
ARDATA ; New AR Category data. (Internal data format)
"RTN","PRCAP360",65,0)
 ;;Category Name;Abbreviation;AMIS Seg #;GL Number;Type;AR Cat #;Receivable Code;Interest;Admin;Penalty;Accrued;Refund;Paragraph Codes
"RTN","PRCAP360",66,0)
 ;;CC URGENT CARE;U1;240;1221;P;87;2;1;1;0;1;2;30,40,55,80,85,50,60,65,70
"RTN","PRCAP360",67,0)
 ;;END
"RTN","RCCPCPS1")
0^7^B59707766^B54822379
"RTN","RCCPCPS1",1,0)
RCCPCPS1 ;WISC/RFJ-build description for patient statement ;08 Aug 2001
"RTN","RCCPCPS1",2,0)
 ;;4.5;Accounts Receivable;**34,48,104,170,176,192,265,362,360**;Mar 20, 1995;Build 10
"RTN","RCCPCPS1",3,0)
 ;;Per VHA Directive 6402, this routine should not be modified.
"RTN","RCCPCPS1",4,0)
 Q
"RTN","RCCPCPS1",5,0)
 ;
"RTN","RCCPCPS1",6,0)
 ;
"RTN","RCCPCPS1",7,0)
TRANDESC(RCTRANDA,RCWIDTH) ;  build the description array for a transaction
"RTN","RCCPCPS1",8,0)
 ;
"RTN","RCCPCPS1",9,0)
 ;  initialize
"RTN","RCCPCPS1",10,0)
 N DESCRIPT,RCBILLDA,RCCATEG,RCCATTXT,RCDATA0,RCDATA1,RCDATA3,RCLINE,TRANTYPE,X
"RTN","RCCPCPS1",11,0)
 I '$G(RCWIDTH) S RCWIDTH=50 ; Default max. width is 50 characters
"RTN","RCCPCPS1",12,0)
 K RCDESC
"RTN","RCCPCPS1",13,0)
 S RCLINE=1,RCDESC(1)=""
"RTN","RCCPCPS1",14,0)
 ;
"RTN","RCCPCPS1",15,0)
 S RCBILLDA=+$P($G(^PRCA(433,RCTRANDA,0)),"^",2) I 'RCBILLDA Q
"RTN","RCCPCPS1",16,0)
 S RCDATA0=^PRCA(430,RCBILLDA,0)
"RTN","RCCPCPS1",17,0)
 S RCCATEG=+$P(RCDATA0,"^",2),RCCATTXT=$P($G(^PRCA(430.2,RCCATEG,0)),"^")
"RTN","RCCPCPS1",18,0)
 S RCDATA1=^PRCA(433,RCTRANDA,1)
"RTN","RCCPCPS1",19,0)
 S TRANTYPE=$P(RCDATA1,"^",2)
"RTN","RCCPCPS1",20,0)
 ;
"RTN","RCCPCPS1",21,0)
 ;  build the first line description
"RTN","RCCPCPS1",22,0)
 ;  if transaction type is an increase or decrease, set description
"RTN","RCCPCPS1",23,0)
 I TRANTYPE=1!(TRANTYPE=35) D
"RTN","RCCPCPS1",24,0)
 .   ;  if c means test, set description to category for c means test
"RTN","RCCPCPS1",25,0)
 .   I RCCATEG=18 S DESCRIPT=$S($P(RCDATA0,"^",16):$P(^PRCA(430.2,$P(RCDATA0,"^",16),0),"^"),1:RCCATTXT) Q
"RTN","RCCPCPS1",26,0)
 .   ;  otherwise, set to category name
"RTN","RCCPCPS1",27,0)
 .   ;PRCA*4.5*362
"RTN","RCCPCPS1",28,0)
 .   I RCCATEG>47,RCCATEG<86 D  Q
"RTN","RCCPCPS1",29,0)
 .   . I RCCATTXT["RX" S DESCRIPT="COMMUNITY CARE RX" Q
"RTN","RCCPCPS1",30,0)
 .   . I RCCATTXT["INPT" S DESCRIPT="COMMUNITY CARE INPT" Q
"RTN","RCCPCPS1",31,0)
 .   . I RCCATTXT["OPT" S DESCRIPT="COMMUNITY CARE OUTPATIENT" Q
"RTN","RCCPCPS1",32,0)
 .   . I RCCATTXT["URGENT" S DESCRIPT="COMMUNITY CARE URGENT CARE" Q
"RTN","RCCPCPS1",33,0)
 .   . I RCCATTXT["RESPITE" S DESCRIPT="COMMUNITY CARE RESPITE CARE" Q
"RTN","RCCPCPS1",34,0)
 .   . I RCCATTXT["NURSING" S DESCRIPT="COMMUNITY CARE NURSING HOME"
"RTN","RCCPCPS1",35,0)
 .   ;end PRCA*4.5*362
"RTN","RCCPCPS1",36,0)
 .   ;
"RTN","RCCPCPS1",37,0)
 .   S DESCRIPT=RCCATTXT
"RTN","RCCPCPS1",38,0)
 ;
"RTN","RCCPCPS1",39,0)
 ;  if the bill category is a rx-copay and it is an increase adjustment
"RTN","RCCPCPS1",40,0)
 ;  then set the description to copay
"RTN","RCCPCPS1",41,0)
 I RCCATEG=22!(RCCATEG=23),TRANTYPE=1 S DESCRIPT="COPAY"
"RTN","RCCPCPS1",42,0)
 ;
"RTN","RCCPCPS1",43,0)
 ;  if the bill category is adult day health care, remove health
"RTN","RCCPCPS1",44,0)
 I RCCATEG=33 S DESCRIPT="ADULT DAY CARE"
"RTN","RCCPCPS1",45,0)
 ;
"RTN","RCCPCPS1",46,0)
 ;  if the bill category is respite or geriatric eval,
"RTN","RCCPCPS1",47,0)
 ;  take the 2nd piece removing institutional
"RTN","RCCPCPS1",48,0)
 I RCCATEG=35!(RCCATEG=36)!(RCCATEG=37)!(RCCATEG=38) S DESCRIPT=$P(RCCATTXT,"-")_$S(RCCATEG=35!(RCCATEG=37):" IN",1:" OUT")_"PATIENT"
"RTN","RCCPCPS1",49,0)
 ;
"RTN","RCCPCPS1",50,0)
 ;  if it is a comment transaction
"RTN","RCCPCPS1",51,0)
 I TRANTYPE=45 S DESCRIPT="COMMENT: "_$P($G(^PRCA(433,RCTRANDA,5)),"^",2)
"RTN","RCCPCPS1",52,0)
 ;
"RTN","RCCPCPS1",53,0)
 ;  prepayment bill (1=increase, 35=decrease, otherwise refund)
"RTN","RCCPCPS1",54,0)
 I RCCATEG=26 S DESCRIPT=$S(TRANTYPE=1:"OVERPAYMENT CREDIT",TRANTYPE=35:"OVERPAYMENT CREDIT DECREASE",1:"OVERPAYMENT REFUND")
"RTN","RCCPCPS1",55,0)
 ;
"RTN","RCCPCPS1",56,0)
 ;  if the first line description not set (like payments), set it
"RTN","RCCPCPS1",57,0)
 ;  to the type of transaction
"RTN","RCCPCPS1",58,0)
 I $G(DESCRIPT)="" S DESCRIPT=$P($G(^PRCA(430.3,+$P(RCDATA1,"^",2),0)),"^")
"RTN","RCCPCPS1",59,0)
 ;
"RTN","RCCPCPS1",60,0)
 ;  if the transaction date is different from the process date,
"RTN","RCCPCPS1",61,0)
 ;  show it with the description
"RTN","RCCPCPS1",62,0)
 I $P(RCDATA1,"^"),$P($P(RCDATA1,"^"),".")'=$P($P(RCDATA1,"^",9),".") S DESCRIPT=DESCRIPT_"  ("_$$DATE($P($P(RCDATA1,"^"),"."))_")"
"RTN","RCCPCPS1",63,0)
 ;
"RTN","RCCPCPS1",64,0)
 ;  set the first description line
"RTN","RCCPCPS1",65,0)
 D SETDESC(DESCRIPT)
"RTN","RCCPCPS1",66,0)
 ;
"RTN","RCCPCPS1",67,0)
 ;  if it is a payment transaction, show amount paid interest, admin, other
"RTN","RCCPCPS1",68,0)
 I TRANTYPE=2!(TRANTYPE=34) D
"RTN","RCCPCPS1",69,0)
 .   S RCDATA3=$G(^PRCA(433,RCTRANDA,3))
"RTN","RCCPCPS1",70,0)
 .   ;  if not interest, admin, or other, quit
"RTN","RCCPCPS1",71,0)
 .   I '$P(RCDATA3,"^",2),'$P(RCDATA3,"^",3),'$P(RCDATA3,"^",4),'$P(RCDATA3,"^",5) Q
"RTN","RCCPCPS1",72,0)
 .   ;
"RTN","RCCPCPS1",73,0)
 .   S DESCRIPT="  (Int:"_$J(+$P(RCDATA3,"^",2),1,2)_"  Adm:"_$J(+$P(RCDATA3,"^",3),1,2)
"RTN","RCCPCPS1",74,0)
 .   ;  calculate other
"RTN","RCCPCPS1",75,0)
 .   S X=$P(RCDATA1,"^",5)-$P(RCDATA3,"^")-$P(RCDATA3,"^",2)-$P(RCDATA3,"^",3)
"RTN","RCCPCPS1",76,0)
 .   S DESCRIPT=DESCRIPT_$S(X:" Other:"_$J(X,1,2)_")",1:")")
"RTN","RCCPCPS1",77,0)
 .   D SETDESC(DESCRIPT)
"RTN","RCCPCPS1",78,0)
 ;
"RTN","RCCPCPS1",79,0)
 ;  if it is a admin cost or interest charge, total the amounts
"RTN","RCCPCPS1",80,0)
 I TRANTYPE=13!(TRANTYPE=12) D  Q
"RTN","RCCPCPS1",81,0)
 .   S X=$G(^PRCA(433,RCTRANDA,2)) I X="" Q
"RTN","RCCPCPS1",82,0)
 .   S RCTOTAL("INT")=$G(RCTOTAL("INT"))+$P(X,"^",7)
"RTN","RCCPCPS1",83,0)
 .   S RCTOTAL("ADM")=$G(RCTOTAL("ADM"))+$P(X,"^",8)
"RTN","RCCPCPS1",84,0)
 .   S RCTOTAL("OTH")=$G(RCTOTAL("OTH"))+($P(RCDATA1,"^",5)-$P(X,"^",7)-$P(X,"^",8))
"RTN","RCCPCPS1",85,0)
 ;
"RTN","RCCPCPS1",86,0)
 ;  if not an increase adjustment, quit
"RTN","RCCPCPS1",87,0)
 I TRANTYPE'=1 Q
"RTN","RCCPCPS1",88,0)
 ;
"RTN","RCCPCPS1",89,0)
 ;  increase to c means test, ltc or rx-copay, get data from ib
"RTN","RCCPCPS1",90,0)
 I RCCATEG=18!(RCCATEG=22)!(RCCATEG=23)!((RCCATEG>32)&(RCCATEG<40)) D  Q     ;PRCA*4.5*362 - added quit, no longer the last check
"RTN","RCCPCPS1",91,0)
 .   S X="IBRFN1" X ^%ZOSF("TEST") I '$T Q
"RTN","RCCPCPS1",92,0)
 .   K ^TMP("IBRFN1",$J)
"RTN","RCCPCPS1",93,0)
 .   D STMT^IBRFN1(RCTRANDA)
"RTN","RCCPCPS1",94,0)
 .   D IBDATA
"RTN","RCCPCPS1",95,0)
 ;
"RTN","RCCPCPS1",96,0)
 ; PRCA*4.5*362
"RTN","RCCPCPS1",97,0)
 ; Community Care Transaction Description Adjustments
"RTN","RCCPCPS1",98,0)
 I RCCATEG>47,RCCATEG<86 D
"RTN","RCCPCPS1",99,0)
 .   S X="IBRFN1" X ^%ZOSF("TEST") I '$T Q
"RTN","RCCPCPS1",100,0)
 .   K ^TMP("IBRFN1",$J)
"RTN","RCCPCPS1",101,0)
 .   D STMT^IBRFN1(RCTRANDA)
"RTN","RCCPCPS1",102,0)
 .   D IBDATA
"RTN","RCCPCPS1",103,0)
 ;END PRCA*4.5*362
"RTN","RCCPCPS1",104,0)
 Q
"RTN","RCCPCPS1",105,0)
 ;
"RTN","RCCPCPS1",106,0)
 ;
"RTN","RCCPCPS1",107,0)
 ;  Returns RCDESC(1..n) array of Bill Description
"RTN","RCCPCPS1",108,0)
BILLDESC(RCBILLDA,RCWIDTH) ;
"RTN","RCCPCPS1",109,0)
 ;  initialize
"RTN","RCCPCPS1",110,0)
 N DESCRIPT,RCCATEG,RCCATTXT,RCDATA0,RCLINE,X
"RTN","RCCPCPS1",111,0)
 I '$G(RCWIDTH) S RCWIDTH=50 ; Default max. width is 50 characters
"RTN","RCCPCPS1",112,0)
 K RCDESC
"RTN","RCCPCPS1",113,0)
 S RCLINE=1,RCDESC(1)=""
"RTN","RCCPCPS1",114,0)
 ;
"RTN","RCCPCPS1",115,0)
 S RCDATA0=^PRCA(430,RCBILLDA,0)
"RTN","RCCPCPS1",116,0)
 S RCCATEG=+$P(RCDATA0,"^",2),RCCATTXT=$P($G(^PRCA(430.2,RCCATEG,0)),"^")
"RTN","RCCPCPS1",117,0)
 ;
"RTN","RCCPCPS1",118,0)
 ;  if category=c means test, set the description and quit
"RTN","RCCPCPS1",119,0)
 I RCCATEG=18 S DESCRIPT=$S($P(RCDATA0,"^",16):$P(^PRCA(430.2,$P(RCDATA0,"^",16),0),"^"),1:RCCATTXT) D SETDESC(DESCRIPT) Q
"RTN","RCCPCPS1",120,0)
 ;
"RTN","RCCPCPS1",121,0)
 ;  set the category description
"RTN","RCCPCPS1",122,0)
 D SETDESC(RCCATTXT)
"RTN","RCCPCPS1",123,0)
 ;
"RTN","RCCPCPS1",124,0)
 ;  if category not champva subsitence and not tricare patient, quit
"RTN","RCCPCPS1",125,0)
 I RCCATEG'=27,RCCATEG'=31 Q
"RTN","RCCPCPS1",126,0)
 ;
"RTN","RCCPCPS1",127,0)
 ;  build description for champva subsistence and tricare patient bills
"RTN","RCCPCPS1",128,0)
 ;  get data from ib
"RTN","RCCPCPS1",129,0)
 S X="IBRFN1" X ^%ZOSF("TEST") I '$T Q
"RTN","RCCPCPS1",130,0)
 K ^TMP("IBRFN1",$J)
"RTN","RCCPCPS1",131,0)
 D STMTB^IBRFN1($P(RCDATA0,"^"))
"RTN","RCCPCPS1",132,0)
 D IBDATA
"RTN","RCCPCPS1",133,0)
 Q
"RTN","RCCPCPS1",134,0)
 ;
"RTN","RCCPCPS1",135,0)
 ;
"RTN","RCCPCPS1",136,0)
IBDATA ;  get data from IB for description
"RTN","RCCPCPS1",137,0)
 N IBDATA,IBJ,IBIEN
"RTN","RCCPCPS1",138,0)
 ;
"RTN","RCCPCPS1",139,0)
 ;  show IB data
"RTN","RCCPCPS1",140,0)
 S IBJ=0 F  S IBJ=$O(^TMP("IBRFN1",$J,IBJ)) Q:'IBJ  S IBDATA=^TMP("IBRFN1",$J,IBJ) D
"RTN","RCCPCPS1",141,0)
 .   ;
"RTN","RCCPCPS1",142,0)
 .   ;  if no drug or bill date returned from IB, then it is outpatient
"RTN","RCCPCPS1",143,0)
 .   ;PRCA*4.5*362 - finish completing line 1 of the Transaction for Community Care copays
"RTN","RCCPCPS1",144,0)
 .   I RCDESC(1)["COMMUNITY CARE RESPITE" D       ;determine if inpatient or outpatient
"RTN","RCCPCPS1",145,0)
 .   . I $P(IBDATA,"^",5) D SETDESC("INPATIENT") Q
"RTN","RCCPCPS1",146,0)
 .   . D SETDESC("OUTPATIENT")
"RTN","RCCPCPS1",147,0)
 .   ;
"RTN","RCCPCPS1",148,0)
 .   I RCDESC(1)["COMMUNITY CARE NURSING" D       ;determining if Nursing Home or Adult Day Care
"RTN","RCCPCPS1",149,0)
 .   . I $P(IBDATA,"^",5) D SETDESC("INPATIENT") Q
"RTN","RCCPCPS1",150,0)
 .   . S RCDESC(1)="" S DESCRIPT="COMMUNITY CARE ADULT DAY CARE" D SETDESC(DESCRIPT)
"RTN","RCCPCPS1",151,0)
 .   ;
"RTN","RCCPCPS1",152,0)
 .   I RCDESC(1)["COMMUNITY CARE RX" D  Q       ;Use Bill from date as Fill Date
"RTN","RCCPCPS1",153,0)
 .   . D:$P(IBDATA,"^",3) SETDESC("FD:"_$$DATE($P(IBDATA,"^",3)))
"RTN","RCCPCPS1",154,0)
 .   ;END PRCA*4.5*362
"RTN","RCCPCPS1",155,0)
 .   ;
"RTN","RCCPCPS1",156,0)
 .   ;Start PRCA*4.5*360 - Split CC PER DIEM and CC INPT into different displays
"RTN","RCCPCPS1",157,0)
 .   ;
"RTN","RCCPCPS1",158,0)
 .   I RCDESC(1)["COMMUNITY CARE INPT" D
"RTN","RCCPCPS1",159,0)
 .   . S IBIEN=$O(^IB("B",$P(IBDATA,U),0))
"RTN","RCCPCPS1",160,0)
 .   . ;S IBATIEN=$$GET1^DIQ(350,IBIEN_",",.01)
"RTN","RCCPCPS1",161,0)
 .   . S IBACNM=$$GET1^DIQ(350,IBIEN_",",.03)
"RTN","RCCPCPS1",162,0)
 .   . I IBACNM["PER DIEM" D SETDESC("PER DIEM")
"RTN","RCCPCPS1",163,0)
 .   ;END PRCA*4.5*360
"RTN","RCCPCPS1",164,0)
 .   ;
"RTN","RCCPCPS1",165,0)
 .   I $P(IBDATA,"^",3)="" D:$P(IBDATA,"^",2) SETDESC("VISIT DATE: "_$$DATE($P(IBDATA,"^",2))) Q
"RTN","RCCPCPS1",166,0)
 .   ;
"RTN","RCCPCPS1",167,0)
 .   ;  if no drug quantity returned from ib, then it is inpatient
"RTN","RCCPCPS1",168,0)
 .   I '$P(IBDATA,"^",6) D  Q
"RTN","RCCPCPS1",169,0)
 .   .   I $P(IBDATA,"^",2) D SETDESC("  ADMISSION DATE: "_$$DATE($P(IBDATA,"^",2)))
"RTN","RCCPCPS1",170,0)
 .   .   I $P(IBDATA,"^",3) D SETDESC("  BEGINNING DATE OF BILLING CYCLE: "_$$DATE($P(IBDATA,"^",3)))
"RTN","RCCPCPS1",171,0)
 .   .   I $P(IBDATA,"^",4) D SETDESC("  ENDING DATE OF BILLING CYCLE: "_$$DATE($P(IBDATA,"^",4)))
"RTN","RCCPCPS1",172,0)
 .   .   I $P(IBDATA,"^",5) D SETDESC("  DISCHARGE DATE: "_$$DATE($P(IBDATA,"^",5)))
"RTN","RCCPCPS1",173,0)
 .   ;
"RTN","RCCPCPS1",174,0)
 .   ;  pharmacy
"RTN","RCCPCPS1",175,0)
 .   D:$P(IBDATA,"^",2) SETDESC("RX:"_$P(IBDATA,"^",2))
"RTN","RCCPCPS1",176,0)
 .   D:$P(IBDATA,"^",7) SETDESC("FD:"_$$DATE($P(IBDATA,"^",7)))
"RTN","RCCPCPS1",177,0)
 .   ;
"RTN","RCCPCPS1",178,0)
 .   ;  if not patient statement detail, quit
"RTN","RCCPCPS1",179,0)
 .   I $$DET^RCFN01($P(RCDATA0,"^",9))'=2 Q
"RTN","RCCPCPS1",180,0)
 .   ;
"RTN","RCCPCPS1",181,0)
 .   ;  return pharmacy detail
"RTN","RCCPCPS1",182,0)
 .   I $P(IBDATA,"^",3)'="" D SETDESC(" DRUG:"_$TR($P(IBDATA,"^",3),"|~"))
"RTN","RCCPCPS1",183,0)
 .   I $P(IBDATA,"^",4) D SETDESC(" DAYS:"_$P(IBDATA,"^",4))
"RTN","RCCPCPS1",184,0)
 .   I $P(IBDATA,"^",6) D SETDESC(" QTY:"_$P(IBDATA,"^",6))
"RTN","RCCPCPS1",185,0)
 .   I $P(IBDATA,"^",5)'="" D SETDESC(" PHY:"_$P(IBDATA,"^",5))
"RTN","RCCPCPS1",186,0)
 .   I $P(IBDATA,"^",8) D SETDESC(" CHG:$"_$J($P(IBDATA,"^",8),0,2))
"RTN","RCCPCPS1",187,0)
 ;
"RTN","RCCPCPS1",188,0)
 K ^TMP("IBRFN1",$J)
"RTN","RCCPCPS1",189,0)
 Q
"RTN","RCCPCPS1",190,0)
 ;
"RTN","RCCPCPS1",191,0)
 ;
"RTN","RCCPCPS1",192,0)
 ; Add line to the description, not longer than RCWIDTH
"RTN","RCCPCPS1",193,0)
 ; Input: RCLINE,RCWIDTH
"RTN","RCCPCPS1",194,0)
 ; Output: RCDESC
"RTN","RCCPCPS1",195,0)
SETDESC(DESCRIPT) N LENGTH
"RTN","RCCPCPS1",196,0)
 ;  calculate the length of the description
"RTN","RCCPCPS1",197,0)
 S LENGTH=$L(RCDESC(RCLINE))+$L(DESCRIPT)
"RTN","RCCPCPS1",198,0)
 I RCDESC(RCLINE)'="" S LENGTH=LENGTH+1
"RTN","RCCPCPS1",199,0)
 ;
"RTN","RCCPCPS1",200,0)
 ;  the description line cannot go over RCWIDTH characters
"RTN","RCCPCPS1",201,0)
 I LENGTH<RCWIDTH S RCDESC(RCLINE)=RCDESC(RCLINE)_$S(RCDESC(RCLINE)="":"",1:" ")_DESCRIPT Q
"RTN","RCCPCPS1",202,0)
 ;
"RTN","RCCPCPS1",203,0)
 ; Description line to add is over RCWIDTH
"RTN","RCCPCPS1",204,0)
 ; The given string will be splitted _only_ if the limit is more than 44 characters.
"RTN","RCCPCPS1",205,0)
 I $L(DESCRIPT)>RCWIDTH D  Q
"RTN","RCCPCPS1",206,0)
 .   I RCDESC(RCLINE)'="" S RCLINE=RCLINE+1
"RTN","RCCPCPS1",207,0)
 .   S RCDESC(RCLINE)=$E(DESCRIPT,1,RCWIDTH)
"RTN","RCCPCPS1",208,0)
 .   S RCLINE=RCLINE+1
"RTN","RCCPCPS1",209,0)
 .   S RCDESC(RCLINE)=$E(DESCRIPT,RCWIDTH+1,2*RCWIDTH)
"RTN","RCCPCPS1",210,0)
 ;
"RTN","RCCPCPS1",211,0)
 ;  over RCWIDTH characters, start new line
"RTN","RCCPCPS1",212,0)
 I RCDESC(RCLINE)'="" S RCLINE=RCLINE+1
"RTN","RCCPCPS1",213,0)
 S RCDESC(RCLINE)=DESCRIPT
"RTN","RCCPCPS1",214,0)
 Q
"RTN","RCCPCPS1",215,0)
 ;
"RTN","RCCPCPS1",216,0)
DATE(FMDT) ;  format date mm/dd/yyyy
"RTN","RCCPCPS1",217,0)
 I 'FMDT Q ""
"RTN","RCCPCPS1",218,0)
 N X,Y,%DT S %DT="TX",X=FMDT D ^%DT Q:Y<0 ""
"RTN","RCCPCPS1",219,0)
 Q $E(FMDT,4,5)_"/"_$E(FMDT,6,7)_"/"_(1700+$E(FMDT,1,3))
"RTN","RCRJRBD")
0^4^B101712890^B101571445
"RTN","RCRJRBD",1,0)
RCRJRBD ;WISC/RFJ,TJK-bad debt extractor and report ;10/18/10 9:00am
"RTN","RCRJRBD",2,0)
 ;;4.5;Accounts Receivable;**101,139,170,193,203,215,220,138,239,273,282,310,315,340,346,338,351,360**;Mar 20, 1995;Build 10
"RTN","RCRJRBD",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCRJRBD",4,0)
 ; IA 4385 for calls to $$MRATYPE^IBCEMU2 and $$MRADTACT^IBCEMU2
"RTN","RCRJRBD",5,0)
 Q
"RTN","RCRJRBD",6,0)
 ;
"RTN","RCRJRBD",7,0)
 ;PRCA*4.5*346 Modify SGL compile code 133.N3 to 133N.3 to
"RTN","RCRJRBD",8,0)
 ;             ensure line item 528713 - 133N dollars are accrued
"RTN","RCRJRBD",9,0)
 ;
"RTN","RCRJRBD",10,0)
 ;
"RTN","RCRJRBD",11,0)
START(DATEEND) ;  run bad debt report
"RTN","RCRJRBD",12,0)
 ;  the DATEEND is the last day of the month being run
"RTN","RCRJRBD",13,0)
 ;  from the routine RCRJRCOL which is the data extractor.  The
"RTN","RCRJRBD",14,0)
 ;  current receivable dollars is stored in ^TMP($J,"RCRJRBD",SGL)
"RTN","RCRJRBD",15,0)
 ;  where SGL is the standard general ledger 1319, 1338, or 1339.
"RTN","RCRJRBD",16,0)
 ;
"RTN","RCRJRBD",17,0)
 N ACTDATE,ACTUALCA,ACTUALWO,BEGDATE,BILLDA,CATEGORY
"RTN","RCRJRBD",18,0)
 N COLLECT,CONTRACT,DR,ENDDATE,FUND,PAY,PAYMENT,PRIN,PRINCPAL
"RTN","RCRJRBD",19,0)
 N RCRJFMM,RCRJDATE,SGL,TRANDA,TRANDATE,TRANTYPE,VALUE,WRITEOFF
"RTN","RCRJRBD",20,0)
 N RCPRIN,RCTOMCCF,RCVALUE,RSC,MRATYPE,ARACTDT
"RTN","RCRJRBD",21,0)
 ;
"RTN","RCRJRBD",22,0)
 ;  lock the bad debt file for storing data, lock cannot fail
"RTN","RCRJRBD",23,0)
 ;  this lock can be used to monitor if the report is running
"RTN","RCRJRBD",24,0)
 F  L +^RC(348.1):$S($G(DILOCKTM)>5:DILOCKTM,1:5) Q:$T
"RTN","RCRJRBD",25,0)
 ;
"RTN","RCRJRBD",26,0)
 ;  calculate the base percentages from past data
"RTN","RCRJRBD",27,0)
 ;  example:  DATEEND=2980331  => BEGDATE=2970300
"RTN","RCRJRBD",28,0)
 ;                             => ENDDATE=2980229
"RTN","RCRJRBD",29,0)
 ;   add one day to ending date to go to next month
"RTN","RCRJRBD",30,0)
 S BEGDATE=($E(DATEEND,1,3)-1)_$E(DATEEND,4,5)_"00"
"RTN","RCRJRBD",31,0)
 S ENDDATE=($$FMADD^XLFDT($E(DATEEND,1,5)_"00",-1))+1
"RTN","RCRJRBD",32,0)
 ;  loop bills activated between these dates
"RTN","RCRJRBD",33,0)
 S ACTDATE=BEGDATE
"RTN","RCRJRBD",34,0)
 F  S ACTDATE=$O(^PRCA(430,"ACTDT",ACTDATE)) Q:'ACTDATE!(ACTDATE>ENDDATE)  D
"RTN","RCRJRBD",35,0)
 . S BILLDA=0 F  S BILLDA=$O(^PRCA(430,"ACTDT",ACTDATE,BILLDA)) Q:'BILLDA  D
"RTN","RCRJRBD",36,0)
 . . S CATEGORY=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCRJRBD",37,0)
 . . ;  do not look at prepayments
"RTN","RCRJRBD",38,0)
 . . I 'CATEGORY!(CATEGORY=26) Q
"RTN","RCRJRBD",39,0)
 . . ;
"RTN","RCRJRBD",40,0)
 . . ;  only look at bills with a 0 principal balance
"RTN","RCRJRBD",41,0)
 . . I $P($G(^PRCA(430,BILLDA,7)),"^") Q
"RTN","RCRJRBD",42,0)
 . . ;
"RTN","RCRJRBD",43,0)
 . . ;  only report fund 528701,03,04,11 and 4032/528709 bills
"RTN","RCRJRBD",44,0)
 . . ;PRCA*4.5*338 - grab existing FUND for bill.  Only recalculate if FUND = NULL
"RTN","RCRJRBD",45,0)
 . . S FUND=$$GET1^DIQ(430,BILLDA_",",203)
"RTN","RCRJRBD",46,0)
 . . I FUND="" S FUND=$$GETFUNDB^RCXFMSUF(BILLDA,1)
"RTN","RCRJRBD",47,0)
 . . ;end PRCA*4.5*338
"RTN","RCRJRBD",48,0)
 . . I '$$PTACCT^PRCAACC(FUND),$E(FUND,1,4)'=4032 Q
"RTN","RCRJRBD",49,0)
 . . ;
"RTN","RCRJRBD",50,0)
 . . ;  determine MRA type of bill, given bill# and bill active date
"RTN","RCRJRBD",51,0)
 . . ;  DBIA #4385 activated on 31-Mar-2004
"RTN","RCRJRBD",52,0)
 . . S MRATYPE=$$MRATYPE^IBCEMU2(BILLDA,ACTDATE)
"RTN","RCRJRBD",53,0)
 . . ;
"RTN","RCRJRBD",54,0)
 . . ;  derive standard general ledger (SGL) from cat/fund/MRA type
"RTN","RCRJRBD",55,0)
 . . S SGL=$$BDRSGL(CATEGORY,FUND,MRATYPE)
"RTN","RCRJRBD",56,0)
 . . ;
"RTN","RCRJRBD",57,0)
 . . ;  determine the original amount of the bill (add increase
"RTN","RCRJRBD",58,0)
 . . ;  adjustments below)
"RTN","RCRJRBD",59,0)
 . . S PRIN=$P($G(^PRCA(430,BILLDA,0)),"^",3)
"RTN","RCRJRBD",60,0)
 . . S PAY=0
"RTN","RCRJRBD",61,0)
 . . ;
"RTN","RCRJRBD",62,0)
 . . ;  get the $ transations for bills
"RTN","RCRJRBD",63,0)
 . . S TRANDA=0
"RTN","RCRJRBD",64,0)
 . . F  S TRANDA=$O(^PRCA(433,"C",BILLDA,TRANDA)) Q:'TRANDA  D
"RTN","RCRJRBD",65,0)
 . . . S TRANTYPE=$P($G(^PRCA(433,TRANDA,1)),"^",2)
"RTN","RCRJRBD",66,0)
 . . . I "^1^73^2^34^43^"'[("^"_TRANTYPE_"^") Q           ; *340 added 73
"RTN","RCRJRBD",67,0)
 . . . S VALUE=$$TRANBAL^RCRJRCOT(TRANDA) I VALUE="" Q
"RTN","RCRJRBD",68,0)
 . . . ;  increase adjustments or re-establish
"RTN","RCRJRBD",69,0)
 . . . I TRANTYPE=1!(TRANTYPE=73)!(TRANTYPE=43) S PRIN=PRIN+$P(VALUE,"^") Q    ; *340 added 73
"RTN","RCRJRBD",70,0)
 . . . ;  payments
"RTN","RCRJRBD",71,0)
 . . . I TRANTYPE=2!(TRANTYPE=34) S PAY=PAY+$P(VALUE,"^") Q
"RTN","RCRJRBD",72,0)
 . . ;
"RTN","RCRJRBD",73,0)
 . . ;  payment cannot be greater than principle
"RTN","RCRJRBD",74,0)
 . . I PAY>PRIN S PAY=PRIN
"RTN","RCRJRBD",75,0)
 . . ;
"RTN","RCRJRBD",76,0)
 . . ;  store the data
"RTN","RCRJRBD",77,0)
 . . S PRINCPAL(SGL)=$G(PRINCPAL(SGL))+PRIN
"RTN","RCRJRBD",78,0)
 . . S PAYMENT(SGL)=$G(PAYMENT(SGL))+PAY
"RTN","RCRJRBD",79,0)
 . . ;
"RTN","RCRJRBD",80,0)
 ;
"RTN","RCRJRBD",81,0)
 ;  calculate the writeoffs from 2/0/98
"RTN","RCRJRBD",82,0)
 ;  2/0/98 is when fms cleared out actual writeoffs and contract adj
"RTN","RCRJRBD",83,0)
 K ^XTMP("PRCABDET")
"RTN","RCRJRBD",84,0)
 S ^XTMP("PRCABDET",0)=$$FMADD^XLFDT(DT,10)_"^"_DT_"^BAD DEBT REPORT AUDIT"
"RTN","RCRJRBD",85,0)
 F TRANTYPE=8,9,10,11,35 D
"RTN","RCRJRBD",86,0)
 . S TRANDATE=2980200
"RTN","RCRJRBD",87,0)
 . ;  do not pick up transactions after the end date
"RTN","RCRJRBD",88,0)
 . F  S TRANDATE=$O(^PRCA(433,"AT",TRANTYPE,TRANDATE)) Q:'TRANDATE!($P(TRANDATE,".")>DATEEND)  D
"RTN","RCRJRBD",89,0)
 . . S TRANDA=0 F  S TRANDA=$O(^PRCA(433,"AT",TRANTYPE,TRANDATE,TRANDA)) Q:'TRANDA  D
"RTN","RCRJRBD",90,0)
 . . . ;  do not look at decrease adj which are not contract adj
"RTN","RCRJRBD",91,0)
 . . . I TRANTYPE=35,'$P($G(^PRCA(433,TRANDA,8)),"^",8) Q
"RTN","RCRJRBD",92,0)
 . . . ;
"RTN","RCRJRBD",93,0)
 . . . S BILLDA=$P($G(^PRCA(433,TRANDA,0)),"^",2)
"RTN","RCRJRBD",94,0)
 . . . I 'BILLDA Q
"RTN","RCRJRBD",95,0)
 . . . S CATEGORY=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCRJRBD",96,0)
 . . . ;  do not look at prepayments
"RTN","RCRJRBD",97,0)
 . . . I 'CATEGORY!(CATEGORY=26) Q
"RTN","RCRJRBD",98,0)
 . . . ;
"RTN","RCRJRBD",99,0)
 . . . ;  only report fund 528701,03,04,11 and 4032/528709 (ltc) bills
"RTN","RCRJRBD",100,0)
 . . . ;PRCA*4.5*338 - grab existing FUND for bill.  Only recalculate if FUND = NULL
"RTN","RCRJRBD",101,0)
 . . . S FUND=$$GET1^DIQ(430,BILLDA_",",203)
"RTN","RCRJRBD",102,0)
 . . . I FUND="" S FUND=$$GETFUNDB^RCXFMSUF(BILLDA,1)
"RTN","RCRJRBD",103,0)
 . . . ;end PRCA*4.5*338
"RTN","RCRJRBD",104,0)
 . . . I '$$PTACCT^PRCAACC(FUND),$E(FUND,1,4)'=4032 Q
"RTN","RCRJRBD",105,0)
 . . . ;
"RTN","RCRJRBD",106,0)
 . . . ;  get bill active date
"RTN","RCRJRBD",107,0)
 . . . S ARACTDT=+$P($P($G(^PRCA(430,BILLDA,6)),"^",21),".")
"RTN","RCRJRBD",108,0)
 . . . ;  determine MRA type of bill, given bill# and bill active date
"RTN","RCRJRBD",109,0)
 . . . ;  DBIA #4385 activated on 31-Mar-2004
"RTN","RCRJRBD",110,0)
 . . . S MRATYPE=$$MRATYPE^IBCEMU2(BILLDA,ARACTDT)
"RTN","RCRJRBD",111,0)
 . . . ;
"RTN","RCRJRBD",112,0)
 . . . ; derive standard general ledger (SGL) from cat/fund/MRA type
"RTN","RCRJRBD",113,0)
 . . . S SGL=$$BDRSGL(CATEGORY,FUND,MRATYPE)
"RTN","RCRJRBD",114,0)
 . . . ;
"RTN","RCRJRBD",115,0)
 . . . ;  get the principal transaction value
"RTN","RCRJRBD",116,0)
 . . . S RCVALUE=+$P($$TRANBAL^RCRJRCOT(TRANDA),"^")
"RTN","RCRJRBD",117,0)
 . . . ;  temp variable for value (used below)
"RTN","RCRJRBD",118,0)
 . . . S RCPRIN=RCVALUE
"RTN","RCRJRBD",119,0)
 . . . ;
"RTN","RCRJRBD",120,0)
 . . . ;  add actual writeoff amount for fiscal year
"RTN","RCRJRBD",121,0)
 . . . I TRANTYPE'=35 S ACTUALWO(SGL)=$G(ACTUALWO(SGL))+RCVALUE
"RTN","RCRJRBD",122,0)
 . . . ;  add actual contract adjustments for fiscal year
"RTN","RCRJRBD",123,0)
 . . . I TRANTYPE=35 S ACTUALCA(SGL)=$G(ACTUALCA(SGL))+RCVALUE
"RTN","RCRJRBD",124,0)
 . . . ;PRCA*4.5*338 - retrieve RSC from Bill.  If no RSC in BILL, calculate it.
"RTN","RCRJRBD",125,0)
 . . . S RSC=$$GET1^DIQ(430,BILLDA_",",255.1)       ;Check for accrued RSC
"RTN","RCRJRBD",126,0)
 . . . S:RSC="" RSC=$$GET1^DIQ(430,BILLDA_",",255)  ;if no accrued RSC, check for non-accrued.
"RTN","RCRJRBD",127,0)
 . . . S:RSC="" RSC=$$CALCRSC^RCXFMSUR(BILLDA)      ;if neither present, calculate
"RTN","RCRJRBD",128,0)
 . . . ;end PRCA*4.5*338
"RTN","RCRJRBD",129,0)
 . . . S ^XTMP("PRCABDET",BILLDA,CATEGORY,FUND,RSC,SGL,TRANDA,TRANDATE,TRANTYPE,RCPRIN,RCVALUE,0,0)=""
"RTN","RCRJRBD",130,0)
 ;
"RTN","RCRJRBD",131,0)
 ;  remove all the entries from the bad debt file
"RTN","RCRJRBD",132,0)
 D DELETALL
"RTN","RCRJRBD",133,0)
 ;
"RTN","RCRJRBD",134,0)
 ;  calculate percentages and store them
"RTN","RCRJRBD",135,0)
 ; PRCA*4.5*338 - corrected 133.N3 to 133N.3, also added 1319.7, 1319.8, 1319.9
"RTN","RCRJRBD",136,0)
 F SGL=1319,1319.2,1319.3,1319.4,1319.5,1319.6,1319.7,1319.8,1319.9,1338,1338.2,1338.3,1339,1339.1,"133N","133N.2","133N.3" D    ;PRCA*4.5*346
"RTN","RCRJRBD",137,0)
 . ;  collection %
"RTN","RCRJRBD",138,0)
 . S COLLECT=0 I $G(PRINCPAL(SGL)) S COLLECT=$J($G(PAYMENT(SGL))/PRINCPAL(SGL)*100,0,2)
"RTN","RCRJRBD",139,0)
 . ;  patch PRCA*4.5*138: for the first year from when MRA is activated at a site, there is no collection
"RTN","RCRJRBD",140,0)
 . ;  history for post-MRA non-Medicare bills(SGL 133N). So, to calculate the percentage for SGL 133N, the
"RTN","RCRJRBD",141,0)
 . ;  payment and the principal for SGL 1339 are used in the first year.
"RTN","RCRJRBD",142,0)
 . ;  override the collection value for SGL=133N for the first year from MRA activation.
"RTN","RCRJRBD",143,0)
 . ;;  Re-evaluate the calc. of the percentage for 133N as well as 1339.
"RTN","RCRJRBD",144,0)
 . ;;I SGL="133N",$G(PRINCIPAL(1339)) D  ;
"RTN","RCRJRBD",145,0)
 . ;;. N X1,X2,X,%Y
"RTN","RCRJRBD",146,0)
 . ;;. ;  X2=MRA Activation Date, X1=Today, X=diff in days, %Y=0 invalid dates
"RTN","RCRJRBD",147,0)
 . ;;. ;  DBIA #4385 activated on 31-Mar-2004
"RTN","RCRJRBD",148,0)
 . ;;. S X2=$$MRADTACT^IBCEMU2,X1=$$DT^XLFDT D ^%DTC
"RTN","RCRJRBD",149,0)
 . ;;. I %Y,X'>364.25 S COLLECT=$J($G(PAYMENT(1339))/PRINCPAL(1339)*100,0,2)
"RTN","RCRJRBD",150,0)
 . S DR=".02////"_+COLLECT_";"
"RTN","RCRJRBD",151,0)
 . ;
"RTN","RCRJRBD",152,0)
 . ;  current month receivable (this is built in the routine
"RTN","RCRJRBD",153,0)
 . ;  RCRJRCO1 and is stored in ^TMP($J,"RCRJRBD",SGL))
"RTN","RCRJRBD",154,0)
 . S DR=DR_".07////"_+$G(^TMP($J,"RCRJRBD",SGL))_";"
"RTN","RCRJRBD",155,0)
 . ;
"RTN","RCRJRBD",156,0)
 . ;  calculate allowance estimate for 1319 and 1338
"RTN","RCRJRBD",157,0)
 . ;  .08 allowance estimate = (writeoff % * current receivables)
"RTN","RCRJRBD",158,0)
 . ;  .09 actual writeoffs fytd
"RTN","RCRJRBD",159,0)
 . I SGL=1319!(SGL=1319.2)!(SGL=1319.3)!(SGL=1319.4)!(SGL=1319.5)!(SGL=1319.6)!(SGL=1319.7)!(SGL=1319.8)!(SGL=1319.9)!(SGL=1338)!(SGL=1338.2)!(SGL=1338.3) D
"RTN","RCRJRBD",160,0)
 . . S WRITEOFF=100-COLLECT
"RTN","RCRJRBD",161,0)
 . . S DR=DR_".03////"_WRITEOFF_";"
"RTN","RCRJRBD",162,0)
 . . S DR=DR_".08////"_$J((WRITEOFF/100)*$G(^TMP($J,"RCRJRBD",SGL)),0,2)_";"
"RTN","RCRJRBD",163,0)
 . . S DR=DR_".09////"_+$G(ACTUALWO(SGL))_";"
"RTN","RCRJRBD",164,0)
 . ;  calculate allowance estimate for 1339
"RTN","RCRJRBD",165,0)
 . ;  .08 allowance estimate = (contract % * current receivables)
"RTN","RCRJRBD",166,0)
 . ;  .09 actual contract adjustments fytd
"RTN","RCRJRBD",167,0)
 . I SGL=1339!(SGL=1339.1)!(SGL="133N")!(SGL="133N.2")!(SGL="133N.3") D
"RTN","RCRJRBD",168,0)
 . . S CONTRACT=100-COLLECT
"RTN","RCRJRBD",169,0)
 . . S DR=DR_".04////"_CONTRACT_";"
"RTN","RCRJRBD",170,0)
 . . S DR=DR_".08////"_$J((CONTRACT/100)*$G(^TMP($J,"RCRJRBD",SGL)),0,2)_";"
"RTN","RCRJRBD",171,0)
 . . S DR=DR_".09////"_+$G(ACTUALCA(SGL))_";"
"RTN","RCRJRBD",172,0)
 . ;
"RTN","RCRJRBD",173,0)
 . ;  set changed locally flag to no
"RTN","RCRJRBD",174,0)
 . S DR=DR_".1////0;"
"RTN","RCRJRBD",175,0)
 . D STORE(SGL,DR)
"RTN","RCRJRBD",176,0)
 ;
"RTN","RCRJRBD",177,0)
 L -^RC(348.1)
"RTN","RCRJRBD",178,0)
 ;
"RTN","RCRJRBD",179,0)
 ;   ;  put the report in a mail message (rcrjfmm=1)
"RTN","RCRJRBD",180,0)
 ;   S RCRJFMM=1
"RTN","RCRJRBD",181,0)
 ;   S RCRJDATE=DATEEND
"RTN","RCRJRBD",182,0)
 ;   D DQ^RCRJRBDR
"RTN","RCRJRBD",183,0)
 ;
"RTN","RCRJRBD",184,0)
 ;  transmit the allowances to FMS, and then generate the report.
"RTN","RCRJRBD",185,0)
 D BADDEBT^RCXFMSSV(DATEEND)
"RTN","RCRJRBD",186,0)
 Q
"RTN","RCRJRBD",187,0)
 ;
"RTN","RCRJRBD",188,0)
 ;
"RTN","RCRJRBD",189,0)
STORE(SGL,DR) ;  store data for Standard Ledger Account
"RTN","RCRJRBD",190,0)
 N D0,DA,DD,DI,DIC,DIE,DINUM,DO,DQ,X,Y
"RTN","RCRJRBD",191,0)
 S DIC="^RC(348.1,",DIC(0)="L",X=SGL,DIC("DR")=DR
"RTN","RCRJRBD",192,0)
 D FILE^DICN
"RTN","RCRJRBD",193,0)
 Q
"RTN","RCRJRBD",194,0)
 ;
"RTN","RCRJRBD",195,0)
 ;
"RTN","RCRJRBD",196,0)
DELETALL ;  delete all the entries from the bad debt file
"RTN","RCRJRBD",197,0)
 N %,DA,DIC,DIK,X,Y
"RTN","RCRJRBD",198,0)
 S DIK="^RC(348.1,"
"RTN","RCRJRBD",199,0)
 S DA=0 F  S DA=$O(^RC(348.1,DA)) Q:'DA  D ^DIK
"RTN","RCRJRBD",200,0)
 Q
"RTN","RCRJRBD",201,0)
 ;
"RTN","RCRJRBD",202,0)
 ;
"RTN","RCRJRBD",203,0)
WD3() ;  return the third work day of the month
"RTN","RCRJRBD",204,0)
 N J,P,V,X
"RTN","RCRJRBD",205,0)
 S J=0 F P=$E(DT,1,5)_"01":1 S V=$$DOW^XLFDT(P,1) I V,V<6,'$D(^HOLIDAY("B",P)) S J=J+1 Q:J=3
"RTN","RCRJRBD",206,0)
 S X=+$E(P,6,7)
"RTN","RCRJRBD",207,0)
 Q X
"RTN","RCRJRBD",208,0)
 ;
"RTN","RCRJRBD",209,0)
 ;
"RTN","RCRJRBD",210,0)
PREVMONT(FORDATE) ; return the previous month's date
"RTN","RCRJRBD",211,0)
 N PREVDATE
"RTN","RCRJRBD",212,0)
 S PREVDATE=$E(FORDATE,1,5)-1
"RTN","RCRJRBD",213,0)
 I $E(PREVDATE,4,5)="00" S PREVDATE=($E(PREVDATE,1,3)-1)_12
"RTN","RCRJRBD",214,0)
 Q PREVDATE_"00"
"RTN","RCRJRBD",215,0)
 ;
"RTN","RCRJRBD",216,0)
 ; derive standard general ledger (SGL) from category and fund
"RTN","RCRJRBD",217,0)
SGL(CATEGORY,FUND) ;
"RTN","RCRJRBD",218,0)
 I $G(FUND)=528709 Q 1319.2 ;new long term care fund
"RTN","RCRJRBD",219,0)
 I $E($G(FUND),1,4)=4032 Q 1319.2 ; breakout long term care as a subset
"RTN","RCRJRBD",220,0)
 I $G(FUND)=528711&(CAT=6)!(CAT=7) Q 1319.5  ; breakout pharmacy
"RTN","RCRJRBD",221,0)
 I $G(FUND)=528711&(CAT=9) Q "133N.2"  ; pharmacy reimburs health ins
"RTN","RCRJRBD",222,0)
 I $G(FUND)=528711&(CAT=10) Q 1338.2  ; pharmacy tort feasor
"RTN","RCRJRBD",223,0)
 I CATEGORY=8 Q 1339   ; crime or per. vio.
"RTN","RCRJRBD",224,0)
 I CATEGORY=9 Q 1339   ; reimbursable health insurance
"RTN","RCRJRBD",225,0)
 I CATEGORY=46 Q 1339   ; EMER/HUMAN REIMB INS  ;315
"RTN","RCRJRBD",226,0)
 I CATEGORY=10 Q 1338  ; tort feasor
"RTN","RCRJRBD",227,0)
 I CATEGORY=21 Q 1339  ; medicare
"RTN","RCRJRBD",228,0)
 I CATEGORY=45 Q 1339.1  ; Fee Basis
"RTN","RCRJRBD",229,0)
 Q 1319
"RTN","RCRJRBD",230,0)
 ;
"RTN","RCRJRBD",231,0)
 ;
"RTN","RCRJRBD",232,0)
BDRSGL(CAT,FUND,MRATYPE) ; Calculate SGLs for the BDR process
"RTN","RCRJRBD",233,0)
 ;PRCA*4.5*310/DRF Added fund 528713, Non-VA Reimbursable Insurance
"RTN","RCRJRBD",234,0)
 ;
"RTN","RCRJRBD",235,0)
 ; This API will be used by both the ARDC (routine RCRJRCOC)
"RTN","RCRJRBD",236,0)
 ; and the BDR estimate calculator to associate receivables
"RTN","RCRJRBD",237,0)
 ; with the correct standard general ledger account (SGL).
"RTN","RCRJRBD",238,0)
 ; The following table will be implemented:
"RTN","RCRJRBD",239,0)
 ;
"RTN","RCRJRBD",240,0)
 ; Receivable Type (Category)        Fund      SGL
"RTN","RCRJRBD",241,0)
 ;==================================================
"RTN","RCRJRBD",242,0)
 ; Medical Care Co-payments                 528703    1319
"RTN","RCRJRBD",243,0)
 ;  (plus Inelig, Emerg./Hum. rec.)
"RTN","RCRJRBD",244,0)
 ; Long Term Care Co-payments               528709    1319.2
"RTN","RCRJRBD",245,0)
 ; Medication Co-payments                   528701    1319.3
"RTN","RCRJRBD",246,0)
 ; Crimes of Personal Violence (8),         528704    1319.4
"RTN","RCRJRBD",247,0)
 ;  Medicare (21), No-Fault Auto
"RTN","RCRJRBD",248,0)
 ;  (7), Workman's Comp (6)
"RTN","RCRJRBD",249,0)
 ; Tort Feasor (10)                         528704    1338
"RTN","RCRJRBD",250,0)
 ; RHI (9), pre-MRA                         528704    1339
"RTN","RCRJRBD",251,0)
 ; RHI (9), post-MRA, MRA rec.              528704    133H
"RTN","RCRJRBD",252,0)
 ; RHI (9), post-MRA, non-MRA rec.          528704    133N
"RTN","RCRJRBD",253,0)
 ; Non-VA Tort Feasor                       528713    1338.3
"RTN","RCRJRBD",254,0)
 ; Non-VA RHI (45), pre-MRA                 528713    1339.1
"RTN","RCRJRBD",255,0)
 ; Non-VA RHI (45), post-MRA, MRA rec.      528713    133H.2
"RTN","RCRJRBD",256,0)
 ; Non-VA RHI (45), post-MRA, non-MRA rec.  528713    133N.3
"RTN","RCRJRBD",257,0)
 ; Non-VA No-Fault Auto, Workman's Comp (6) 528713    1319.6
"RTN","RCRJRBD",258,0)
 ; Inpat./Outpat./Urgent Care Community     528714    1319.7
"RTN","RCRJRBD",259,0)
 ;  Care copayments
"RTN","RCRJRBD",260,0)
 ; RX Community Care copayments             528714    1319.8
"RTN","RCRJRBD",261,0)
 ; LTC Community Care copayments            528714    1319.9 
"RTN","RCRJRBD",262,0)
 ; Pharmacy No Fault Auto(7),               528711    1319.5
"RTN","RCRJRBD",263,0)
 ; Pharmacy Workman's Comp(6)
"RTN","RCRJRBD",264,0)
 ; Pharmacy RHI, non MRA (9)                528711    133N.2
"RTN","RCRJRBD",265,0)
 ; Pharmacy Tort Feasor (10)                528711    1338.2
"RTN","RCRJRBD",266,0)
 ;
"RTN","RCRJRBD",267,0)
 ;  Input:  CAT  --  Pointer to the receivable category in file 430.2
"RTN","RCRJRBD",268,0)
 ;         FUND  --  Receivable fund calculated by routine RCXFMSUF
"RTN","RCRJRBD",269,0)
 ;      MRATYPE  --  Indicator of an MRA (2) or non-MRA (3) receivable
"RTN","RCRJRBD",270,0)
 ;
"RTN","RCRJRBD",271,0)
 ;
"RTN","RCRJRBD",272,0)
 I $G(FUND)=528709 Q 1319.2
"RTN","RCRJRBD",273,0)
 I $E($G(FUND),1,4)=4032 Q 1319.2
"RTN","RCRJRBD",274,0)
 I $G(FUND)=528701 Q 1319.3
"RTN","RCRJRBD",275,0)
 I $G(FUND)=528711&((CAT=6)!(CAT=7)) Q 1319.5
"RTN","RCRJRBD",276,0)
 I $G(FUND)=528711&(CAT=9) Q "133N.2"
"RTN","RCRJRBD",277,0)
 I $G(FUND)=528711&(CAT=10) Q 1338.2
"RTN","RCRJRBD",278,0)
 ;PRCA*4.5*338 - Add new Community Care Categories
"RTN","RCRJRBD",279,0)
 ; THIRD PARTY =528713 new code begins
"RTN","RCRJRBD",280,0)
 I $G(FUND)=528713&(CAT=10!(CAT=53)!(CAT=56)!(CAT=59)) Q 1338.3   ;patch 338 Add Comm Care Tort Feasor
"RTN","RCRJRBD",281,0)
 I $G(FUND)=528713&(CAT=8!(CAT=21)!(CAT=6)!(CAT=7)!(CAT=52)!(CAT=54)!(CAT=55)!(CAT=57)!(CAT=59)!(CAT=60)) Q 1319.6  ;patch 338 Added Comm Care No Fault and Workers Comp
"RTN","RCRJRBD",282,0)
 I ((CAT>47)&(CAT<52)) Q $S(MRATYPE=2:"133H.2",MRATYPE=3:"133N.3",1:1339.1)  ;patch 338 Comm Care Reimb ins types.
"RTN","RCRJRBD",283,0)
 ; FIRST PARTY = 528714  - Community Care Copays
"RTN","RCRJRBD",284,0)
 I $G(FUND)=528714&(CAT=61!(CAT=81)!(CAT=63)!(CAT=82)!(CAT=65)!(CAT=83)!(CAT=67)!(CAT=84)!(CAT=85)) Q 1319.7    ;INP/OPT copays
"RTN","RCRJRBD",285,0)
 I $G(FUND)=528714&(CAT=62!(CAT=64)!(CAT=66)!(CAT=68)) Q 1319.8    ;rx copays
"RTN","RCRJRBD",286,0)
 I $G(FUND)=528714&(CAT>68)&(CAT<75) Q 1319.9    ;LTC copays
"RTN","RCRJRBD",287,0)
 ;end PRCA*4.5*338
"RTN","RCRJRBD",288,0)
 I CAT=8!(CAT=21)!(CAT=7)!(CAT=6) Q 1319.4
"RTN","RCRJRBD",289,0)
 I CAT=10 Q 1338
"RTN","RCRJRBD",290,0)
 I CAT=9 Q $S(MRATYPE=2:"133H",MRATYPE=3:"133N",1:1339)
"RTN","RCRJRBD",291,0)
 I CAT=46 Q $S(MRATYPE=2:"133H",MRATYPE=3:"133N",1:1339)  ;315 
"RTN","RCRJRBD",292,0)
 I CAT=45 Q $S(MRATYPE=2:"133H.2",MRATYPE=3:"133N.3",1:1339.1)
"RTN","RCRJRBD",293,0)
 Q 1319
"RTN","RCRJRBDT")
0^6^B66710288^B66401701
"RTN","RCRJRBDT",1,0)
RCRJRBDT ;WISC/RFJ-bad debt retransmit ;9/2/10 8:47am
"RTN","RCRJRBDT",2,0)
 ;;4.5;Accounts Receivable;**101,170,191,138,239,273,310,338,360**;Mar 20, 1995;Build 10
"RTN","RCRJRBDT",3,0)
 ;Per VA Directive 6402, this routine should not be modified.
"RTN","RCRJRBDT",4,0)
 ;
"RTN","RCRJRBDT",5,0)
 ;
"RTN","RCRJRBDT",6,0)
 ; - deactivate this option with patch PRCA*4.5*239
"RTN","RCRJRBDT",7,0)
 W !!,"This option may no longer be used to retransmit the Bad Debt"
"RTN","RCRJRBDT",8,0)
 W !,"allowance estimates to FMS."
"RTN","RCRJRBDT",9,0)
 W !!,"Please use the option 'Monthly NDB, SV and WR Regenerate' to"
"RTN","RCRJRBDT",10,0)
 W !,"recalculate the allowance estimates and transmit them to FMS.",!!
"RTN","RCRJRBDT",11,0)
 ;
"RTN","RCRJRBDT",12,0)
 S DIR(0)="E" D ^DIR K DIR,DIRUT,DUOUT,DTOUT,DIROUT,X,Y
"RTN","RCRJRBDT",13,0)
 ;
"RTN","RCRJRBDT",14,0)
 Q
"RTN","RCRJRBDT",15,0)
 ;
"RTN","RCRJRBDT",16,0)
 ;
"RTN","RCRJRBDT",17,0)
 N DA347,DATEMOYR,FMSDOCNO,GECSDATA,RCRJFSV
"RTN","RCRJRBDT",18,0)
 ;  the date of the report is for previous month if the DT is before the EOAM date of the current month,  it is for the current month if the date is after the EOAM cut-off date.
"RTN","RCRJRBDT",19,0)
 I $E(DT,6,7)'>$E($$LDATE^RCRJR(DT),6,7) S DATEMOYR=$$PREVMONT^RCRJRBD(DT)
"RTN","RCRJRBDT",20,0)
 I $E(DT,6,7)>$E($$LDATE^RCRJR(DT),6,7) S DATEMOYR=$E($$LDATE^RCRJR(DT),1,5)_"00"
"RTN","RCRJRBDT",21,0)
 ;S DATEMOYR=$$PREVMONT^RCRJRBD(DT)
"RTN","RCRJRBDT",22,0)
 W !!,"This option will retransmit the Bad Debt documents to FMS (SV23, SV27, SV2B)."
"RTN","RCRJRBDT",23,0)
 ;
"RTN","RCRJRBDT",24,0)
 ;I +$E(DT,6,7)<$$WD3^RCRJRBD D  Q
"RTN","RCRJRBDT",25,0)
 I $E(DT,6,7)<$E($$LDATE^RCRJR(DT),6,7)!($E(DT,6,7)'<$E($$LDAY^RCRJR(DT),6,7)) D  Q
"RTN","RCRJRBDT",26,0)
 .  W !,"The FMS documents will be automatically sent to FMS on the second to last ",!,"workday of this month."
"RTN","RCRJRBDT",27,0)
 ;  try and find SV document to see if its accepted
"RTN","RCRJRBDT",28,0)
 S FMSDOCNO=""
"RTN","RCRJRBDT",29,0)
 K GECSDATA
"RTN","RCRJRBDT",30,0)
 S DA347=$O(^RC(347,"D","SV-"_$E(DATEMOYR,1,5)_"01",0))
"RTN","RCRJRBDT",31,0)
 I DA347 S FMSDOCNO=$P($G(^RC(347,DA347,0)),"^",9)
"RTN","RCRJRBDT",32,0)
 ;  if there is an entry, find the code sheet in gcs to rebuild
"RTN","RCRJRBDT",33,0)
 ;  gecsdata will be the ien for file 2100.1
"RTN","RCRJRBDT",34,0)
 I FMSDOCNO'="" D DATA^GECSSGET(FMSDOCNO,0)
"RTN","RCRJRBDT",35,0)
 I $G(GECSDATA) D
"RTN","RCRJRBDT",36,0)
 .   W !!,"The SV document has been transmitted to fms, document number: "_FMSDOCNO
"RTN","RCRJRBDT",37,0)
 .   I $E($G(GECSDATA(2100.1,GECSDATA,3,"E")))="A" D  Q
"RTN","RCRJRBDT",38,0)
 .   .   W !,"The SV document has been ACCEPTED in FMS and will not be resent."
"RTN","RCRJRBDT",39,0)
 .   .   S RCRJFSV=1
"RTN","RCRJRBDT",40,0)
 .   W !,"The SV document has NOT been ACCEPTED and will be RETRANSMITTED."
"RTN","RCRJRBDT",41,0)
 I $G(RCRJFSV) Q
"RTN","RCRJRBDT",42,0)
 ;
"RTN","RCRJRBDT",43,0)
 I $$ASKOKAY(DATEMOYR)'=1 Q
"RTN","RCRJRBDT",44,0)
 ;
"RTN","RCRJRBDT",45,0)
 ;  make sure this code is not executed.
"RTN","RCRJRBDT",46,0)
 ;W !!,"Re-sending the documents to FMS ..."
"RTN","RCRJRBDT",47,0)
 ;D BADDEBT^RCXFMSSV
"RTN","RCRJRBDT",48,0)
 ;W " Done.",!,"The Bad Debt Report will be sent to the G.FMS mail group."
"RTN","RCRJRBDT",49,0)
 Q
"RTN","RCRJRBDT",50,0)
 ;
"RTN","RCRJRBDT",51,0)
 ;
"RTN","RCRJRBDT",52,0)
ASKOKAY(DATEMOYR) ;  ask if its okay
"RTN","RCRJRBDT",53,0)
 ;  1 is yes, otherwise no
"RTN","RCRJRBDT",54,0)
 N DIR,DIQ2,DTOUT,DUOUT,X,Y
"RTN","RCRJRBDT",55,0)
 S Y=DATEMOYR D DD^%DT
"RTN","RCRJRBDT",56,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","RCRJRBDT",57,0)
 S DIR("A")="  Are you SURE you want to resend the Bad Debt Report for "_Y
"RTN","RCRJRBDT",58,0)
 W ! D ^DIR
"RTN","RCRJRBDT",59,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCRJRBDT",60,0)
 Q Y
"RTN","RCRJRBDT",61,0)
 ;
"RTN","RCRJRBDT",62,0)
 ;
"RTN","RCRJRBDT",63,0)
ENDOFREP ;  print end of bad debt report footnotes
"RTN","RCRJRBDT",64,0)
 ;  called from rcrjrbdr
"RTN","RCRJRBDT",65,0)
 ;
"RTN","RCRJRBDT",66,0)
 ;  print footnote
"RTN","RCRJRBDT",67,0)
 S Y=RCRJDATE D DD^%DT S ENDDATE=Y
"RTN","RCRJRBDT",68,0)
 F %=1:1 S DATA=$P($T(FOOTNOTE+%),";",3,99) Q:DATA=""  D
"RTN","RCRJRBDT",69,0)
 .   I DATA["DATEREPT" S DATA=$P(DATA,"DATEREPT")_DATEREPT_$P(DATA,"DATEREPT",2)
"RTN","RCRJRBDT",70,0)
 .   I DATA["ENDDATE" S DATA=$P(DATA,"ENDDATE")_ENDDATE_$P(DATA,"ENDDATE",2)
"RTN","RCRJRBDT",71,0)
 .   D SETLINE^RCRJRBDR(DATA)
"RTN","RCRJRBDT",72,0)
 Q
"RTN","RCRJRBDT",73,0)
 ;
"RTN","RCRJRBDT",74,0)
 ;
"RTN","RCRJRBDT",75,0)
FOOTNOTE ;  report footnotes (from rcrjrbdr)
"RTN","RCRJRBDT",76,0)
 ;;(1) Calculated Percentages and the Allowance for Contract Adj - Third Party
"RTN","RCRJRBDT",77,0)
 ;;    for SGL 1339 are based on bills created prior to the activation of the
"RTN","RCRJRBDT",78,0)
 ;;    Medicare Remittance Advice software.  Over time, there will no longer be
"RTN","RCRJRBDT",79,0)
 ;;    any bills in this category.
"RTN","RCRJRBDT",80,0)
 ;; 
"RTN","RCRJRBDT",81,0)
 ;;(2) Calculated Percentages and the Allowance for Contract Adj - Third Party
"RTN","RCRJRBDT",82,0)
 ;;    for SGL 133N are based on non-Medicare WNR bills created after the
"RTN","RCRJRBDT",83,0)
 ;;    activation of the Medicare Remittance Advice software.
"RTN","RCRJRBDT",84,0)
 ;; 
"RTN","RCRJRBDT",85,0)
 ;;(3) The "Allowance Estimate for DATEREPT" is the dollar value estimated
"RTN","RCRJRBDT",86,0)
 ;;    as the Allowance for Bad Debt or Contract Adjustment for the month.
"RTN","RCRJRBDT",87,0)
 ;; 
"RTN","RCRJRBDT",88,0)
 ;;(4) The "Bad Debt Write-Off (Plus)" is the actual write-offs or contract
"RTN","RCRJRBDT",89,0)
 ;;    adjustments accomplished from FEB 1,1998 thru ENDDATE.
"RTN","RCRJRBDT",90,0)
 ;; 
"RTN","RCRJRBDT",91,0)
 ;;(5) The "Transmitted Amount to FMS for Month" is the sum of (3) and (4).
"RTN","RCRJRBDT",92,0)
 ;;    The transmitted dollar value is normally a credit value.
"RTN","RCRJRBDT",93,0)
 ;; 
"RTN","RCRJRBDT",94,0)
 ;;(6) Facilities are responsible for reporting monthly accrued unbilled
"RTN","RCRJRBDT",95,0)
 ;;    amounts.  When such amounts are identified and reported, a portion of
"RTN","RCRJRBDT",96,0)
 ;;    those dollars should be reported as uncollectable.  The estimated
"RTN","RCRJRBDT",97,0)
 ;;    uncollectable value of the unbilled amounts should be included as part
"RTN","RCRJRBDT",98,0)
 ;;    of the facility's monthly allowance for bad debt or contract adjustments.
"RTN","RCRJRBDT",99,0)
 ;;    The AR Override Option should be used to adjust the value provided to
"RTN","RCRJRBDT",100,0)
 ;;    report the estimated uncollectable accrued unbilled amounts for the
"RTN","RCRJRBDT",101,0)
 ;;    month.  Facilities may wish to consider using the allowance percentages
"RTN","RCRJRBDT",102,0)
 ;;    provided with this report, if no other means of determining the
"RTN","RCRJRBDT",103,0)
 ;;    estimated allowance for the accrued unbilled amount is acceptable.
"RTN","RCRJRBDT",104,0)
 ;; 
"RTN","RCRJRBDT",105,0)
 ;;(7) Only members in the facility's local RC AR DATA COLLECTOR mail group
"RTN","RCRJRBDT",106,0)
 ;;    will receive this report.
"RTN","RCRJRBDT",107,0)
 ;
"RTN","RCRJRBDT",108,0)
 ;
"RTN","RCRJRBDT",109,0)
 ;
"RTN","RCRJRBDT",110,0)
BDR ; Compile new Bad Debt Report.
"RTN","RCRJRBDT",111,0)
 ;   This code will be used to compile the new Bad Debt Report.
"RTN","RCRJRBDT",112,0)
 ;   This routine is invokved by routine RCRJRBDR when the Bad
"RTN","RCRJRBDT",113,0)
 ;   Debt Report needs to be printed.
"RTN","RCRJRBDT",114,0)
 ;
"RTN","RCRJRBDT",115,0)
 ;     Variable input:  LINE  --  set to 0
"RTN","RCRJRBDT",116,0)
 ;                     SPACE  --  set to 81 space characters
"RTN","RCRJRBDT",117,0)
 ;                  DATEREPT  --  formatted month and year
"RTN","RCRJRBDT",118,0)
 ;
"RTN","RCRJRBDT",119,0)
 N RCARR,RCX,RCD,RCDATA,RCREC,X
"RTN","RCRJRBDT",120,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",121,0)
 D SETLINE($E(SPACE,1,32)_"Bad Debt Report")
"RTN","RCRJRBDT",122,0)
 D SETLINE($E(SPACE,1,13)_"Allowance for Bad Debt and Contract Adjustment Report")
"RTN","RCRJRBDT",123,0)
 D SETLINE($E(SPACE,1,27)_"for the month of "_DATEREPT)
"RTN","RCRJRBDT",124,0)
 I $D(RCRJFXSV) D
"RTN","RCRJRBDT",125,0)
 . D SETLINE(" ")
"RTN","RCRJRBDT",126,0)
 . I $E(RCRJFXSV,1,2)="SV" D SETLINE($E(SPACE,1,13)_"***** Report sent to FMS, doc id: "_RCRJFXSV_" *****") Q
"RTN","RCRJRBDT",127,0)
 . ;  report errored out or did not get generated to fms
"RTN","RCRJRBDT",128,0)
 . D SETLINE($E(SPACE,1,10)_"***** NOTICE:  Report was NOT sent to FMS, the message is *****")
"RTN","RCRJRBDT",129,0)
 . D SETLINE($E(SPACE,1,10)_"***** "_RCRJFXSV_" *****")
"RTN","RCRJRBDT",130,0)
 ;
"RTN","RCRJRBDT",131,0)
 ;  show mccf
"RTN","RCRJRBDT",132,0)
 ; PRCA*4.5*310/DRF - add fee basis fund (528713) to report
"RTN","RCRJRBDT",133,0)
 ; PRCA*4.5*338/DRF - add fund (528714) to report
"RTN","RCRJRBDT",134,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",135,0)
 D SETLINE($E(SPACE,1,26)_"Medical Care Collection Fund")
"RTN","RCRJRBDT",136,0)
 D SETLINE($E(SPACE,1,2)_" Funds 528701; 528703; 528704; 528709; 528711; 528713; and 528714")
"RTN","RCRJRBDT",137,0)
 D SETLINE($E(SPACE,1,2)_" ----------------------------------------------------------------")
"RTN","RCRJRBDT",138,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",139,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",140,0)
 D SETLINE($E(SPACE,1,57)_"Contract           EOM")
"RTN","RCRJRBDT",141,0)
 D SETLINE("FUND - SGL Account     Collection%     Write-Off%     Adjustment%     Allowance")
"RTN","RCRJRBDT",142,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",143,0)
 ;
"RTN","RCRJRBDT",144,0)
 ; List the fund/SGLs as:
"RTN","RCRJRBDT",145,0)
 ;   Order     SGL in file      Fund - SGL on report
"RTN","RCRJRBDT",146,0)
 ;   ===============================================
"RTN","RCRJRBDT",147,0)
 ;     1            1319.3             528701 - 1319
"RTN","RCRJRBDT",148,0)
 ;     2              1319             528703 - 1319
"RTN","RCRJRBDT",149,0)
 ;     3            1319.4             528704 - 1319
"RTN","RCRJRBDT",150,0)
 ;     4              1339             528704 - 1339
"RTN","RCRJRBDT",151,0)
 ;     5              133N             528704 - 133N
"RTN","RCRJRBDT",152,0)
 ;     6              1338             528704 - 1338
"RTN","RCRJRBDT",153,0)
 ;     7            1319.2             528709 - 1319
"RTN","RCRJRBDT",154,0)
 ;     8            1319.5             528711 - 1319
"RTN","RCRJRBDT",155,0)
 ;     9            133N.2             528711 - 133N
"RTN","RCRJRBDT",156,0)
 ;    10            1338.2             528711 - 1338
"RTN","RCRJRBDT",157,0)
 ;    11            1319.6             528713 - 1319
"RTN","RCRJRBDT",158,0)
 ;    12            1339.1             528713 - 1339
"RTN","RCRJRBDT",159,0)
 ;    13            133N.3             528713 - 133N
"RTN","RCRJRBDT",160,0)
 ;    14            1338.3             528713 - 1338
"RTN","RCRJRBDT",161,0)
 ;    15            1319.7             528714 - 1319
"RTN","RCRJRBDT",162,0)
 ;    16            1319.8             528714 - 1319
"RTN","RCRJRBDT",163,0)
 ;    17            1319.9             528714 - 1319
"RTN","RCRJRBDT",164,0)
 ;
"RTN","RCRJRBDT",165,0)
 S RCARR(1)="1319.3^528701 - 1319"
"RTN","RCRJRBDT",166,0)
 S RCARR(2)="1319^528703 - 1319"
"RTN","RCRJRBDT",167,0)
 S RCARR(3)="1319.4^528704 - 1319"
"RTN","RCRJRBDT",168,0)
 S RCARR(4)="1339^528704 - 1339"
"RTN","RCRJRBDT",169,0)
 S RCARR(5)="133N^528704 - 133N"
"RTN","RCRJRBDT",170,0)
 S RCARR(6)="1338^528704 - 1338"
"RTN","RCRJRBDT",171,0)
 S RCARR(7)="1319.2^528709 - 1319"
"RTN","RCRJRBDT",172,0)
 S RCARR(8)="1319.5^528711 - 1319"
"RTN","RCRJRBDT",173,0)
 S RCARR(9)="133N.2^528711 - 133N"
"RTN","RCRJRBDT",174,0)
 S RCARR(10)="1338.2^528711 - 1338"
"RTN","RCRJRBDT",175,0)
 S RCARR(11)="1319.6^528713 - 1319"
"RTN","RCRJRBDT",176,0)
 S RCARR(12)="1339.1^528713 - 1339"
"RTN","RCRJRBDT",177,0)
 S RCARR(13)="133N.3^528713 - 133N"
"RTN","RCRJRBDT",178,0)
 S RCARR(14)="1338.3^528713 - 1338"
"RTN","RCRJRBDT",179,0)
 S RCARR(15)="1319.7^528714 - 1319.7"
"RTN","RCRJRBDT",180,0)
 S RCARR(16)="1319.8^528714 - 1319.8"
"RTN","RCRJRBDT",181,0)
 S RCARR(17)="1319.9^528714 - 1319.9"
"RTN","RCRJRBDT",182,0)
 ;
"RTN","RCRJRBDT",183,0)
 S RCX="" F  S RCX=$O(RCARR(RCX)) Q:RCX=""  S RCD=RCARR(RCX) D
"RTN","RCRJRBDT",184,0)
 .S RCDATA=$G(^RC(348.1,+$O(^RC(348.1,"B",$P(RCD,"^"),0)),0))
"RTN","RCRJRBDT",185,0)
 .Q:RCDATA=""
"RTN","RCRJRBDT",186,0)
 .S RCREC=$P(RCD,"^",2)_$J($P(RCDATA,"^",2),21,2)
"RTN","RCRJRBDT",187,0)
 .I RCD[528714 S RCREC=$P(RCD,"^",2)_$J($P(RCDATA,"^",2),19,2) ; patch PRCA*4.5*338 align subcategory format for first party 
"RTN","RCRJRBDT",188,0)
 .S RCREC=RCREC_$J($P(RCDATA,"^",3),15,2)
"RTN","RCRJRBDT",189,0)
 .S RCREC=RCREC_$J($P(RCDATA,"^",4),16,2)
"RTN","RCRJRBDT",190,0)
 .S X=+$P(RCDATA,"^",8)
"RTN","RCRJRBDT",191,0)
 .S X=$FN(X,",")_$S(X[".":"",1:".")_$E("00",$L($P(X,".",2))+1,2)
"RTN","RCRJRBDT",192,0)
 .S RCREC=RCREC_$J(X,14)
"RTN","RCRJRBDT",193,0)
 .D SETLINE(RCREC)
"RTN","RCRJRBDT",194,0)
 ;
"RTN","RCRJRBDT",195,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",196,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",197,0)
 D SETLINE("SGL Definitions")
"RTN","RCRJRBDT",198,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",199,0)
 D SETLINE("1319   Allowance for Bad Debt")
"RTN","RCRJRBDT",200,0)
 D SETLINE("1319.7 Allowance Community Care Inpatient/Outpatient/Urgent Care copayments")
"RTN","RCRJRBDT",201,0)
 D SETLINE("1319.8 Allowance Community Care RX copayments")
"RTN","RCRJRBDT",202,0)
 D SETLINE("1319.9 Allowance Community Care LTC copayments")
"RTN","RCRJRBDT",203,0)
 D SETLINE("1338   Allowance for Tort Feasors")
"RTN","RCRJRBDT",204,0)
 D SETLINE("1339   Allowance for Contract Adjustments pre-MRA (Medicare Remittance Advice)")
"RTN","RCRJRBDT",205,0)
 D SETLINE("133N   Allowance for Contract Adjustments post-MRA")
"RTN","RCRJRBDT",206,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",207,0)
 D SETLINE(" ")
"RTN","RCRJRBDT",208,0)
 D SETLINE("Only members in the facility's local RC AR DATA COLLECTOR mail group")
"RTN","RCRJRBDT",209,0)
 D SETLINE("will receive this report.")
"RTN","RCRJRBDT",210,0)
 Q
"RTN","RCRJRBDT",211,0)
 ;
"RTN","RCRJRBDT",212,0)
SETLINE(DATA) ;  build the line for the report
"RTN","RCRJRBDT",213,0)
 S LINE=LINE+1,^TMP($J,"RCRJRCORMM",LINE)=DATA
"RTN","RCRJRBDT",214,0)
 Q
"RTN","RCXFMSUF")
0^3^B59363720^B57862958
"RTN","RCXFMSUF",1,0)
RCXFMSUF ;WISC/RFJ-calculate fms fund code for a bill ; 10/20/10 10:37am
"RTN","RCXFMSUF",2,0)
 ;;4.5;Accounts Receivable;**90,101,135,157,160,165,170,203,207,173,211,192,220,235,273,310,315,338,351,360**;Mar 20, 1995;Build 10
"RTN","RCXFMSUF",3,0)
 ;;Per VA Directive 6402, this routine should not be modifieD
"RTN","RCXFMSUF",4,0)
 Q
"RTN","RCXFMSUF",5,0)
 ;
"RTN","RCXFMSUF",6,0)
 ;
"RTN","RCXFMSUF",7,0)
GETFUNDO(TYPE) ;  return the fund for other type associated collections
"RTN","RCXFMSUF",8,0)
 ;  type can equal:
"RTN","RCXFMSUF",9,0)
 ;  I for interest         A for admin
"RTN","RCXFMSUF",10,0)
 ;  M for marshall fee     C for court cost
"RTN","RCXFMSUF",11,0)
 I TYPE="I" Q "1435"
"RTN","RCXFMSUF",12,0)
 I TYPE="A" Q "3220"
"RTN","RCXFMSUF",13,0)
 I TYPE="M" Q "0869"
"RTN","RCXFMSUF",14,0)
 I TYPE="C" Q "0869"
"RTN","RCXFMSUF",15,0)
 Q ""
"RTN","RCXFMSUF",16,0)
 ;
"RTN","RCXFMSUF",17,0)
 ;
"RTN","RCXFMSUF",18,0)
GETFUNDB(BILLDA,DONTSTOR,RCEFT) ;  return a bills fms fund code
"RTN","RCXFMSUF",19,0)
 ;  pass DONTSTOR equal 1 to prevent storing the fund code
"RTN","RCXFMSUF",20,0)
 ;  cannot rely on data in the fund field since it may reference the
"RTN","RCXFMSUF",21,0)
 ;  old funds S FUND=$P($G(^PRCA(430,BILLDA,11)),"^",17).  since there
"RTN","RCXFMSUF",22,0)
 ;  are reports which use 11;17, set it for a bill once its computed
"RTN","RCXFMSUF",23,0)
 ;  until all references to the fund are eliminated.
"RTN","RCXFMSUF",24,0)
 ;  rceft = 1 if processing an EFT deposit
"RTN","RCXFMSUF",25,0)
 ;
"RTN","RCXFMSUF",26,0)
 N ACTDATE,CATEGDA,FUND,NEWFUND
"RTN","RCXFMSUF",27,0)
 ;
"RTN","RCXFMSUF",28,0)
 ;  calculate a bills fund
"RTN","RCXFMSUF",29,0)
 I $G(RCEFT)=1 S FUND="5287"_$S(DT<3030926:"",DT'<3030926&(DT<$$ADDPTEDT^PRCAACC()):".4",1:"04") Q FUND
"RTN","RCXFMSUF",30,0)
 S CATEGDA=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCXFMSUF",31,0)
 ;
"RTN","RCXFMSUF",32,0)
 ;PRCA*4.5*360 - increased CATEGDA check for CC URGENT CARE
"RTN","RCXFMSUF",33,0)
 I CATEGDA>85 Q ""
"RTN","RCXFMSUF",34,0)
 ;
"RTN","RCXFMSUF",35,0)
 ;  piece 5 is new fund, remove spaces
"RTN","RCXFMSUF",36,0)
 S FUND=$P($TR($T(@CATEGDA)," "),";",5)
"RTN","RCXFMSUF",37,0)
 ;
"RTN","RCXFMSUF",38,0)
 ;  set fund 528711 for 3rd party RX bills after 4/27/2011
"RTN","RCXFMSUF",39,0)
 I $$TYP^IBRFN(BILLDA)="PH" D
"RTN","RCXFMSUF",40,0)
 . I (CATEGDA=6)!(CATEGDA=7)!(CATEGDA=9)!(CATEGDA=10),$$CHECKRXS(BILLDA) S FUND=528711
"RTN","RCXFMSUF",41,0)
 ;
"RTN","RCXFMSUF",42,0)
 ;  if category is vendor(17), ex-employee(15), current employee(16)
"RTN","RCXFMSUF",43,0)
 ;  federal agency refund(13), federal agency reimb(14), military(12)
"RTN","RCXFMSUF",44,0)
 ;  set the fund to what is stored in the file.  This was entered
"RTN","RCXFMSUF",45,0)
 ;  by the user during the audit process.  If fund is in the file
"RTN","RCXFMSUF",46,0)
 ;  already, do not need to store it again.
"RTN","RCXFMSUF",47,0)
 ;  if category is nursing home proceeds (40), parking fees (41),
"RTN","RCXFMSUF",48,0)
 ;  cwt proceeds (42), comp & pen proceeds (43), enhanced use lease
"RTN","RCXFMSUF",49,0)
 ;  proceeds (44), set the fund to what is stored in the file.
"RTN","RCXFMSUF",50,0)
 ;  This was generated by the software at the time of bill enter.
"RTN","RCXFMSUF",51,0)
 I CATEGDA=17!(CATEGDA=15)!(CATEGDA=16)!(CATEGDA=13)!(CATEGDA=14)!(CATEGDA=12)!(CATEGDA=40)!(CATEGDA=41)!(CATEGDA=42)!(CATEGDA=43)!(CATEGDA=44) D
"RTN","RCXFMSUF",52,0)
 .   I $P($G(^PRCA(430,BILLDA,11)),"^",17)'="" S FUND=$P(^(11),"^",17),DONTSTOR=1
"RTN","RCXFMSUF",53,0)
 ;
"RTN","RCXFMSUF",54,0)
 ;  public law states that bills in the category ineligible (1),
"RTN","RCXFMSUF",55,0)
 ;  emerg/human (2), torts (10), or medicare (21) which are older 
"RTN","RCXFMSUF",56,0)
 ;  than oct 1, 1992 should be reported under fund 3220.
"RTN","RCXFMSUF",57,0)
 I CATEGDA=1!(CATEGDA=2)!(CATEGDA=10)!(CATEGDA=21) D
"RTN","RCXFMSUF",58,0)
 .   S ACTDATE=$P($G(^PRCA(430,BILLDA,6)),"^",21)
"RTN","RCXFMSUF",59,0)
 .   I ACTDATE,ACTDATE<2921001 S FUND=3220 Q
"RTN","RCXFMSUF",60,0)
 .   ;
"RTN","RCXFMSUF",61,0)
 .   ;  patch157 changes ineligibles.  an ineligible activated before
"RTN","RCXFMSUF",62,0)
 .   ;  oct 1, 1992 or after sep 30, 2000 will be recorded in fund 0160A1.
"RTN","RCXFMSUF",63,0)
 .   ;  otherwise it will be recorded in fund 5287.3 if before 3040928
"RTN","RCXFMSUF",64,0)
 .   ; if 3040928 or after,  fund should be 528703
"RTN","RCXFMSUF",65,0)
 .   I CATEGDA=1,ACTDATE,ACTDATE<3001001 S FUND=$S(DT<$$ADDPTEDT^PRCAACC():"5287.3",1:528703)
"RTN","RCXFMSUF",66,0)
 ;
"RTN","RCXFMSUF",67,0)
 ;  set the fund for the bill
"RTN","RCXFMSUF",68,0)
 ; PRCA*4.5*310/DRF Add Non-VA fund 528713
"RTN","RCXFMSUF",69,0)
 ;
"RTN","RCXFMSUF",70,0)
 I $G(DONTSTOR)'=1 D STORE^RCXFMSUR(BILLDA,"",FUND)
"RTN","RCXFMSUF",71,0)
 ; 
"RTN","RCXFMSUF",72,0)
 ; PRCA*4.5*338 Added funds for Community Care 
"RTN","RCXFMSUF",73,0)
 I FUND>528704,FUND<528709!(FUND=528710)!(FUND=528711) Q FUND
"RTN","RCXFMSUF",74,0)
 I FUND=528713 Q FUND
"RTN","RCXFMSUF",75,0)
 I FUND=528714 Q FUND
"RTN","RCXFMSUF",76,0)
 ;
"RTN","RCXFMSUF",77,0)
 I $G(REPRODT),REPRODT<3030926,$E(FUND,1,4)=5287 Q 5287
"RTN","RCXFMSUF",78,0)
 I $G(REPRODT),REPRODT<3031001,$E(FUND,1,4)=5287,$G(REFMS) Q 5287
"RTN","RCXFMSUF",79,0)
 I DT<3030926,$E(FUND,1,4)=5287 Q 5287 ; Effective date
"RTN","RCXFMSUF",80,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528709 Q 4032 ;Effective date-528709
"RTN","RCXFMSUF",81,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528709,$G(REFMS) Q 4032 ;Resubmitted documents not held
"RTN","RCXFMSUF",82,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528709 Q 4032
"RTN","RCXFMSUF",83,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528709 Q 4032
"RTN","RCXFMSUF",84,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528701 Q 5287.1 ;Effective date-528701
"RTN","RCXFMSUF",85,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528701,$G(REFMS) Q 5287.1 ;Resubmitted documents not held
"RTN","RCXFMSUF",86,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528701 Q 5287.1
"RTN","RCXFMSUF",87,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528701 Q 5287.1
"RTN","RCXFMSUF",88,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528703 Q 5287.3 ;Effective date-528703
"RTN","RCXFMSUF",89,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528703,$G(REFMS) Q 5287.3 ;Resubmitted documents not held
"RTN","RCXFMSUF",90,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528703 Q 5287.3
"RTN","RCXFMSUF",91,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528703 Q 5287.3
"RTN","RCXFMSUF",92,0)
 I $G(REPRODT),REPRODT<$$ADDPTEDT^PRCAACC(),FUND=528704 Q 5287.4 ;Effective date-528704
"RTN","RCXFMSUF",93,0)
 I $G(REPRODT),REPRODT<3041001,FUND=528704,$G(REFMS) Q 5287.4 ;Resubmitted documents not held
"RTN","RCXFMSUF",94,0)
 I $G(DATEEND),$E(DATEEND,2,5)<"0410",FUND=528704 Q 5287.4
"RTN","RCXFMSUF",95,0)
 I DT<$$ADDPTEDT^PRCAACC(),FUND=528704 Q 5287.4
"RTN","RCXFMSUF",96,0)
 Q FUND
"RTN","RCXFMSUF",97,0)
 ;
"RTN","RCXFMSUF",98,0)
CHECKRXS(BILLDA) ; returns true (1) if bill has any scripts on or after 4/27/11
"RTN","RCXFMSUF",99,0)
 N RXNUM,NEWFUND,FILLDT,ARRXS
"RTN","RCXFMSUF",100,0)
 S NEWFUND=0
"RTN","RCXFMSUF",101,0)
 D SET^IBCSC5A(BILLDA,.ARRXS,)
"RTN","RCXFMSUF",102,0)
 S RXNUM=0,FILLDT=""
"RTN","RCXFMSUF",103,0)
 F  S RXNUM=$O(ARRXS(RXNUM)) Q:RXNUM'>0!(NEWFUND)  D
"RTN","RCXFMSUF",104,0)
 .  S FILLDT=$O(ARRXS(RXNUM,0))
"RTN","RCXFMSUF",105,0)
 .  I FILLDT'<3110427 S NEWFUND=1
"RTN","RCXFMSUF",106,0)
 Q NEWFUND
"RTN","RCXFMSUF",107,0)
 ;
"RTN","RCXFMSUF",108,0)
 ;  this is a listing of all categories and associated funds
"RTN","RCXFMSUF",109,0)
 ;  the label is from the internal entry number in the category
"RTN","RCXFMSUF",110,0)
 ;  file 430.2.  piece 3 is a description, piece 4 is the old fund,
"RTN","RCXFMSUF",111,0)
 ;  piece 5 is the new fund
"RTN","RCXFMSUF",112,0)
 ;  PRCA*4.5*310/DRF Added 45 - FEE REIMB INS to routine.
"RTN","RCXFMSUF",113,0)
0 ;;no fund                        ;       ;
"RTN","RCXFMSUF",114,0)
1 ;;INELIGIBLE HOSP.               ;3220   ;0160R1
"RTN","RCXFMSUF",115,0)
2 ;;EMERGENCY/HUMANITARIAN         ;0160A1 ;528703
"RTN","RCXFMSUF",116,0)
3 ;;NURSING HOME CARE(NSC)         ;2431   ;528703
"RTN","RCXFMSUF",117,0)
4 ;;OUTPATIENT CARE(NSC)           ;2431   ;528703
"RTN","RCXFMSUF",118,0)
5 ;;HOSPITAL CARE (NSC)            ;2431   ;528703
"RTN","RCXFMSUF",119,0)
6 ;;WORKMAN'S COMP.                ;5014   ;528704
"RTN","RCXFMSUF",120,0)
7 ;;NO-FAULT AUTO ACC.             ;5014   ;528704
"RTN","RCXFMSUF",121,0)
8 ;;CRIME OF PER.VIO.              ;5014   ;528704
"RTN","RCXFMSUF",122,0)
9 ;;REIMBURS.HEALTH INS.           ;5014   ;528704
"RTN","RCXFMSUF",123,0)
10 ;;TORT FEASOR                   ;0160A1 ;528704
"RTN","RCXFMSUF",124,0)
11 ;;no entry                      ;       ;
"RTN","RCXFMSUF",125,0)
12 ;;MILITARY                      ;0160A1 ;0160R1
"RTN","RCXFMSUF",126,0)
13 ;;FEDERAL AGENCIES-REFUND       ;0160A1 ;0160A1
"RTN","RCXFMSUF",127,0)
14 ;;FEDERAL AGENCIES-REIMB.       ;0160R1 ;0160R1
"RTN","RCXFMSUF",128,0)
15 ;;EX-EMPLOYEE                   ;0160A1 ;0160A1
"RTN","RCXFMSUF",129,0)
16 ;;CURRENT EMP.                  ;0160A1 ;0160A1
"RTN","RCXFMSUF",130,0)
17 ;;VENDOR                        ;0160A1 ;0160A1
"RTN","RCXFMSUF",131,0)
18 ;;C (MEANS TEST)                ;2431   ;528703
"RTN","RCXFMSUF",132,0)
19 ;;SHARING AGREEMENTS            ;0160A1 ;0160R1
"RTN","RCXFMSUF",133,0)
20 ;;INTERAGENCY                   ;0160A1 ;0160R1
"RTN","RCXFMSUF",134,0)
21 ;;MEDICARE                      ;5014   ;528704
"RTN","RCXFMSUF",135,0)
22 ;;RX CO-PAYMENT/SC VET          ;5014   ;528701
"RTN","RCXFMSUF",136,0)
23 ;;RX CO-PAYMENT/NSC VET         ;5014   ;528701
"RTN","RCXFMSUF",137,0)
24 ;;NURSING HOME CARE PER DIEM    ;2431   ;528703
"RTN","RCXFMSUF",138,0)
25 ;;HOSPITAL CARE PER DIEM        ;2431   ;528703
"RTN","RCXFMSUF",139,0)
26 ;;PREPAYMENT                    ;5014   ;528703
"RTN","RCXFMSUF",140,0)
27 ;;CHAMPVA SUBSISTENCE           ;3220   ;3220
"RTN","RCXFMSUF",141,0)
28 ;;CHAMPVA THIRD PARTY           ;3220   ;0160R1
"RTN","RCXFMSUF",142,0)
29 ;;CHAMPVA                       ;0160A1 ;0160R1
"RTN","RCXFMSUF",143,0)
30 ;;TRICARE                       ;0160A1 ;0160R1
"RTN","RCXFMSUF",144,0)
31 ;;TRICARE PATIENT               ;0160A1 ;0160R1
"RTN","RCXFMSUF",145,0)
32 ;;TRICARE THIRD PARTY           ;0160A1 ;0160R1
"RTN","RCXFMSUF",146,0)
33 ;;ADULT DAY HEALTH CARE         ;4032   ;528709
"RTN","RCXFMSUF",147,0)
34 ;;DOMICILIARY                   ;4032   ;528709
"RTN","RCXFMSUF",148,0)
35 ;;RESPITE CARE-INSTITUTIONAL    ;4032   ;528709
"RTN","RCXFMSUF",149,0)
36 ;;RESPITE CARE-NON-INSTITUTIONAL;4032   ;528709
"RTN","RCXFMSUF",150,0)
37 ;;GERIATRIC EVAL-INSTITUTIONAL  ;4032   ;528709
"RTN","RCXFMSUF",151,0)
38 ;;GERIATRIC EVAL-NON-INSTITUTION;4032   ;528709
"RTN","RCXFMSUF",152,0)
39 ;;NURSING HOME CARE-LTC         ;4032   ;528709
"RTN","RCXFMSUF",153,0)
40 ;;NURSING HOME PROCEEDS         ;       ;528705
"RTN","RCXFMSUF",154,0)
41 ;;PARKING FEES                  ;       ;528706
"RTN","RCXFMSUF",155,0)
42 ;;CWT PROCEEDS                  ;       ;528707
"RTN","RCXFMSUF",156,0)
43 ;;COMP & PEN PROCEEDS           ;       ;528708
"RTN","RCXFMSUF",157,0)
44 ;;ENHANCED USE LEASE PROCEEDS   ;5358.3 ;528710
"RTN","RCXFMSUF",158,0)
45 ;;FEE REIMB INS                 ;       ;528713
"RTN","RCXFMSUF",159,0)
46 ;;EMERGENCY/HUMANITARIAN REIMB. ;       ;528704  ;315
"RTN","RCXFMSUF",160,0)
47 ;;INELIGIBLE REIMB. INS.        ;       ;0160R1  ;315
"RTN","RCXFMSUF",161,0)
48 ;;CHOICE THIRD PARTY            ;       ;528713
"RTN","RCXFMSUF",162,0)
49 ;;CC THIRD PARTY                ;       ;528713
"RTN","RCXFMSUF",163,0)
50 ;;CCN THIRD PARTY               ;       ;528713
"RTN","RCXFMSUF",164,0)
51 ;;CC MTF THIRD PARTY            ;       ;528713
"RTN","RCXFMSUF",165,0)
52 ;;CHOICE NO-FAULT AUTO          ;       ;528713
"RTN","RCXFMSUF",166,0)
53 ;;CHOICE TORT FEASOR            ;       ;528713
"RTN","RCXFMSUF",167,0)
54 ;;CCN WORKERS' COMP             ;       ;528713
"RTN","RCXFMSUF",168,0)
55 ;;CCN NO-FAULT AUTO             ;       ;528713
"RTN","RCXFMSUF",169,0)
56 ;;CCN TORT FEASOR               ;       ;528713
"RTN","RCXFMSUF",170,0)
57 ;;CC WORKERS' COMP              ;       ;528713
"RTN","RCXFMSUF",171,0)
58 ;;CC NO-FAULT AUTO              ;       ;528713
"RTN","RCXFMSUF",172,0)
59 ;;CC TORT FEASOR                ;       ;528713
"RTN","RCXFMSUF",173,0)
60 ;;CHOICE WORKERS' COMP          ;       ;528713
"RTN","RCXFMSUF",174,0)
61 ;;CHOICE INPT                   ;       ;528714
"RTN","RCXFMSUF",175,0)
62 ;;CHOICE RX CO-PAYMENT          ;       ;528714
"RTN","RCXFMSUF",176,0)
63 ;;CC INPT                       ;       ;528714
"RTN","RCXFMSUF",177,0)
64 ;;CC RX CO-PAYMENT              ;       ;528714
"RTN","RCXFMSUF",178,0)
65 ;;CCN INPT                      ;       ;528714
"RTN","RCXFMSUF",179,0)
66 ;;CCN RX CO-PAYMENT             ;       ;528714
"RTN","RCXFMSUF",180,0)
67 ;;CC MTF INPT                   ;       ;528714
"RTN","RCXFMSUF",181,0)
68 ;;CC MTF RX CO-PAYMENT          ;       ;528714
"RTN","RCXFMSUF",182,0)
69 ;;CC NURSING HOME CARE - LTC    ;       ;528714
"RTN","RCXFMSUF",183,0)
70 ;;CC RESPITE CARE               ;       ;528714
"RTN","RCXFMSUF",184,0)
71 ;;CCN NURSING HOME CARE - LTC   ;       ;528714
"RTN","RCXFMSUF",185,0)
72 ;;CCN RESPITE CARE              ;       ;528714
"RTN","RCXFMSUF",186,0)
73 ;;CHOICE NURSING HOME CARE - LTC ;      ;528714
"RTN","RCXFMSUF",187,0)
74 ;;CHOICE RESPITE CARE           ;       ;528714
"RTN","RCXFMSUF",188,0)
75 ;;TRICARE DES                   ;       ;0160R1
"RTN","RCXFMSUF",189,0)
76 ;;TRICARE SCI                   ;       ;0160R1
"RTN","RCXFMSUF",190,0)
77 ;;TRICARE TBI                   ;       ;0160R1
"RTN","RCXFMSUF",191,0)
78 ;;TRICARE BLIND REHABILITATION  ;       ;0160R1
"RTN","RCXFMSUF",192,0)
79 ;;TRICARE DENTAL                ;       ;0160R1
"RTN","RCXFMSUF",193,0)
80 ;;TRICARE PHARMACY              ;       ;0160R1
"RTN","RCXFMSUF",194,0)
81 ;;CHOICE OPT                    ;       ;528714
"RTN","RCXFMSUF",195,0)
82 ;;CC OPT                        ;       ;528714
"RTN","RCXFMSUF",196,0)
83 ;;CCN OPT                       ;       ;528714
"RTN","RCXFMSUF",197,0)
84 ;;CC MTF OPT                    ;       ;528714
"RTN","RCXFMSUF",198,0)
85 ;;CC URGENT CARE                ;       ;528714  ;PRCA*4.5*360
"RTN","RCXFMSUR")
0^2^B119963189^B118788042
"RTN","RCXFMSUR",1,0)
RCXFMSUR ;WISC/RFJ-revenue source codes ;10/19/10 1:47pm
"RTN","RCXFMSUR",2,0)
 ;;4.5;Accounts Receivable;**90,101,170,203,173,220,231,273,310,315,338,360**;Mar 20, 1995;Build 10
"RTN","RCXFMSUR",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","RCXFMSUR",4,0)
 ;Read ^DGCR(399) via IA 3820
"RTN","RCXFMSUR",5,0)
 Q
"RTN","RCXFMSUR",6,0)
 ;
"RTN","RCXFMSUR",7,0)
 ;
"RTN","RCXFMSUR",8,0)
CALCRSC(BILLDA,RCEFT) ;  calculate the revenue source code for a bill
"RTN","RCXFMSUR",9,0)
 ;  rceft = 1 if processing an EFT deposit
"RTN","RCXFMSUR",10,0)
 ;  returns the 4 column (character) rsc
"RTN","RCXFMSUR",11,0)
 N CATEGDA,COLUMN1,COLUMN2,COLUMN3,COLUMN4,RSC
"RTN","RCXFMSUR",12,0)
 ;  if rsc already calculated, return it
"RTN","RCXFMSUR",13,0)
 I $G(RCEFT)=1 S RSC="8NZZ" Q RSC
"RTN","RCXFMSUR",14,0)
 S RSC=$P($G(^PRCA(430,BILLDA,11)),"^",23)
"RTN","RCXFMSUR",15,0)
 I $L(RSC)=4,RSC'="ARRV" Q RSC
"RTN","RCXFMSUR",16,0)
 ;
"RTN","RCXFMSUR",17,0)
 ;  calculate it and store it
"RTN","RCXFMSUR",18,0)
 S CATEGDA=+$P($G(^PRCA(430,BILLDA,0)),"^",2)
"RTN","RCXFMSUR",19,0)
 ;
"RTN","RCXFMSUR",20,0)
 ;PRCA$4.5*338 If a Community Care Category, retrieve RSC, store it and exit.
"RTN","RCXFMSUR",21,0)
 I CATEGDA>47,(CATEGDA<75) D  Q RSC
"RTN","RCXFMSUR",22,0)
 . S RSC=$$GETCCRSC(CATEGDA,BILLDA)
"RTN","RCXFMSUR",23,0)
 . D STORE(BILLDA,RSC)
"RTN","RCXFMSUR",24,0)
 I CATEGDA>80,(CATEGDA<86) D  Q RSC  ; prca*4.5*360 added CC UC
"RTN","RCXFMSUR",25,0)
 . S RSC=$$GETCCRSC(CATEGDA,BILLDA)
"RTN","RCXFMSUR",26,0)
 . D STORE(BILLDA,RSC)
"RTN","RCXFMSUR",27,0)
 ;
"RTN","RCXFMSUR",28,0)
 ;  if prepayment, send ARRV
"RTN","RCXFMSUR",29,0)
 I CATEGDA=26 D STORE(BILLDA,"ARRV") Q "ARRV"
"RTN","RCXFMSUR",30,0)
 ;
"RTN","RCXFMSUR",31,0)
 S COLUMN1=$$COLUMN1
"RTN","RCXFMSUR",32,0)
 ;
"RTN","RCXFMSUR",33,0)
 ; check for 3rd party RX bills after 4/27/2011 for col 2
"RTN","RCXFMSUR",34,0)
 N RX3P S RX3P=0
"RTN","RCXFMSUR",35,0)
 I ("PH"=$$TYP^IBRFN(BILLDA)) D
"RTN","RCXFMSUR",36,0)
 .  S RX3P=$$CHECKRXS^RCXFMSUF(BILLDA)
"RTN","RCXFMSUR",37,0)
 ;
"RTN","RCXFMSUR",38,0)
 S COLUMN2=$$COLUMN2
"RTN","RCXFMSUR",39,0)
 ;
"RTN","RCXFMSUR",40,0)
 ;  if column2 cannot be determined, return the rsc of ARRV
"RTN","RCXFMSUR",41,0)
 I COLUMN2="" D STORE(BILLDA,"ARRV") Q "ARRV"
"RTN","RCXFMSUR",42,0)
 ;
"RTN","RCXFMSUR",43,0)
 ;  if column2 is not a 5 for reimbursable health insurance, or category not 45 (FEE REIMB INS)
"RTN","RCXFMSUR",44,0)
 ;  return ZZ in columns 3 and 4
"RTN","RCXFMSUR",45,0)
 I COLUMN2'=5,CATEGDA'=45 D STORE(BILLDA,COLUMN1_COLUMN2_"ZZ") Q COLUMN1_COLUMN2_"ZZ"
"RTN","RCXFMSUR",46,0)
 ;
"RTN","RCXFMSUR",47,0)
 ;  for reimbursable health insurance, compute columns 3 and 4
"RTN","RCXFMSUR",48,0)
 S COLUMN3=$$COLUMN3
"RTN","RCXFMSUR",49,0)
 S COLUMN4=$$COLUMN4
"RTN","RCXFMSUR",50,0)
 ;
"RTN","RCXFMSUR",51,0)
 D STORE(BILLDA,COLUMN1_COLUMN2_COLUMN3_COLUMN4)
"RTN","RCXFMSUR",52,0)
 Q COLUMN1_COLUMN2_COLUMN3_COLUMN4
"RTN","RCXFMSUR",53,0)
 ;
"RTN","RCXFMSUR",54,0)
 ;
"RTN","RCXFMSUR",55,0)
STORE(DA,RSC,FUND) ;  store the revenue source code  or fund in the file
"RTN","RCXFMSUR",56,0)
 I $G(^PRCA(430,DA,0))="" Q
"RTN","RCXFMSUR",57,0)
 N D,D0,DI,DIC,DIE,DQ,DR,X,Y
"RTN","RCXFMSUR",58,0)
 S DR=""
"RTN","RCXFMSUR",59,0)
 I $G(RSC)'="" S DR="255.1////"_RSC_";"
"RTN","RCXFMSUR",60,0)
 I $G(FUND)'="" S DR=DR_"203////"_FUND_";"
"RTN","RCXFMSUR",61,0)
 S (DIC,DIE)="^PRCA(430,"
"RTN","RCXFMSUR",62,0)
 D ^DIE
"RTN","RCXFMSUR",63,0)
 Q
"RTN","RCXFMSUR",64,0)
 ;
"RTN","RCXFMSUR",65,0)
 ;
"RTN","RCXFMSUR",66,0)
COLUMN1() ;  return column 1 number
"RTN","RCXFMSUR",67,0)
 Q 8
"RTN","RCXFMSUR",68,0)
 ;
"RTN","RCXFMSUR",69,0)
 ;
"RTN","RCXFMSUR",70,0)
COLUMN2() ;  return column 2 number
"RTN","RCXFMSUR",71,0)
 I CATEGDA=5 Q 1     ; hospital care (nsc)
"RTN","RCXFMSUR",72,0)
 I CATEGDA=4 Q 2     ; outpatient care (nsc)
"RTN","RCXFMSUR",73,0)
 I CATEGDA=3 Q 3     ; nursing home care (nsc)
"RTN","RCXFMSUR",74,0)
 I CATEGDA=1 Q 4     ; ineligible hospital
"RTN","RCXFMSUR",75,0)
 I CATEGDA=9&$G(RX3P) Q "R"    ; pharmacy reimbursable health insurance
"RTN","RCXFMSUR",76,0)
 I CATEGDA=9 Q 5     ; reimbursable health insurance
"RTN","RCXFMSUR",77,0)
 I CATEGDA=10&$G(RX3P) Q "S"     ; pharmacy tort feasor
"RTN","RCXFMSUR",78,0)
 I CATEGDA=10 Q 6    ; tort feasor
"RTN","RCXFMSUR",79,0)
 I CATEGDA=6&$G(RX3P) Q "T"     ;pharmacy workman's comp
"RTN","RCXFMSUR",80,0)
 I CATEGDA=6 Q 7     ; workmans comp
"RTN","RCXFMSUR",81,0)
 I CATEGDA=18 Q 8    ; c (means test)
"RTN","RCXFMSUR",82,0)
 I CATEGDA=2 Q 9     ; emergency/humanitarian
"RTN","RCXFMSUR",83,0)
 I CATEGDA=7&$G(RX3P) Q "Q"     ;pharmacy no fault auto acc
"RTN","RCXFMSUR",84,0)
 I CATEGDA=7 Q "A"   ; no fault auto accident
"RTN","RCXFMSUR",85,0)
 I CATEGDA=22 Q "B"  ; rx copay/sc vet
"RTN","RCXFMSUR",86,0)
 I CATEGDA=23 Q "C"  ; rx copay/nsc vet
"RTN","RCXFMSUR",87,0)
 I CATEGDA=24 Q "D"  ; nursing home care per diem
"RTN","RCXFMSUR",88,0)
 I CATEGDA=25 Q "E"  ; hospital care per diem
"RTN","RCXFMSUR",89,0)
 I CATEGDA=21 Q "F"  ; medicare
"RTN","RCXFMSUR",90,0)
 I CATEGDA=33 Q "G"  ; adult day health care
"RTN","RCXFMSUR",91,0)
 I CATEGDA=34 Q "H"  ; domiciliary
"RTN","RCXFMSUR",92,0)
 I CATEGDA=35 Q "I"  ; respite care - institutional
"RTN","RCXFMSUR",93,0)
 I CATEGDA=36 Q "J"  ; respite care - non-institutional
"RTN","RCXFMSUR",94,0)
 I CATEGDA=37 Q "K"  ; geriatric evaluation - institutional
"RTN","RCXFMSUR",95,0)
 I CATEGDA=38 Q "L"  ; geriatric evaluation - non-institutional
"RTN","RCXFMSUR",96,0)
 I CATEGDA=39 Q "M"  ; nursing home care - ltc
"RTN","RCXFMSUR",97,0)
 I CATEGDA=45 Q "F"  ; Fee Basis
"RTN","RCXFMSUR",98,0)
 I CATEGDA=46 D  Q COLUMN2
"RTN","RCXFMSUR",99,0)
 . N COL
"RTN","RCXFMSUR",100,0)
 . D DIQ399(BILLDA)
"RTN","RCXFMSUR",101,0)
 . S COL=$G(IBCNDATA(399,BILLDA,.05,"I"))
"RTN","RCXFMSUR",102,0)
 . S COLUMN2=$S(COL=1:"U",COL=2:"U",COL=3:"V",1:"V")
"RTN","RCXFMSUR",103,0)
 Q ""
"RTN","RCXFMSUR",104,0)
 ;
"RTN","RCXFMSUR",105,0)
 ;
"RTN","RCXFMSUR",106,0)
COLUMN3() ;  return the column 3 number
"RTN","RCXFMSUR",107,0)
 N AGE,DECIMAL,DFN,IBCNDATA,TYPEAGE,TYPECARE,TYPEMEAN,TYPESERV,VA,VADM,VAERR
"RTN","RCXFMSUR",108,0)
 ;
"RTN","RCXFMSUR",109,0)
 D DIQ399(BILLDA)
"RTN","RCXFMSUR",110,0)
 ;
"RTN","RCXFMSUR",111,0)
 ;  PRCA*4.5*310/DRF
"RTN","RCXFMSUR",112,0)
 ;  for Fee Basis, column3 = 1 (inpatient) or 2 (outpatient)
"RTN","RCXFMSUR",113,0)
 I CATEGDA=45 S COLUMN3=$S($G(IBCNDATA(399,BILLDA,.05,"I"))=1:1,$G(IBCNDATA(399,BILLDA,.05,"I"))=2:2,1:2) Q COLUMN3
"RTN","RCXFMSUR",114,0)
 ;
"RTN","RCXFMSUR",115,0)
 D TYPECARE
"RTN","RCXFMSUR",116,0)
 ;
"RTN","RCXFMSUR",117,0)
 ;  compute service connected at time of care (1 digit binary)
"RTN","RCXFMSUR",118,0)
 ;  type of service connected is set as follows:
"RTN","RCXFMSUR",119,0)
 ;        0 = SC Vet                   1 = NSC Vet
"RTN","RCXFMSUR",120,0)
 S TYPESERV=1
"RTN","RCXFMSUR",121,0)
 ;  service connected at time of care (.18) = yes (1)
"RTN","RCXFMSUR",122,0)
 I $G(IBCNDATA(399,BILLDA,.18,"I"))=1 S TYPESERV=0
"RTN","RCXFMSUR",123,0)
 ;
"RTN","RCXFMSUR",124,0)
 S DFN=$P($G(^PRCA(430,BILLDA,0)),"^",7)
"RTN","RCXFMSUR",125,0)
 D DEM^VADPT
"RTN","RCXFMSUR",126,0)
 ;
"RTN","RCXFMSUR",127,0)
 ;  compute means test at time of care (1 digit binary)
"RTN","RCXFMSUR",128,0)
 ;  type of means test is set as follows:
"RTN","RCXFMSUR",129,0)
 ;        0 = Cat A                    1 = Cat C
"RTN","RCXFMSUR",130,0)
 S TYPEMEAN=0
"RTN","RCXFMSUR",131,0)
 I $$BIL^DGMTUB(DFN,$G(IBCNDATA(399,BILLDA,151,"I")))=1 S TYPEMEAN=1
"RTN","RCXFMSUR",132,0)
 ;
"RTN","RCXFMSUR",133,0)
 ;  compute patient age at time of care (1 digit binary)
"RTN","RCXFMSUR",134,0)
 ;  type of age is set as follows:
"RTN","RCXFMSUR",135,0)
 ;        0 = under 65                 1 = 65 and older
"RTN","RCXFMSUR",136,0)
 S AGE=$$FMDIFF^XLFDT($G(IBCNDATA(399,BILLDA,151,"I")),$P($G(VADM(3)),"^"))\365.25
"RTN","RCXFMSUR",137,0)
 S TYPEAGE=1
"RTN","RCXFMSUR",138,0)
 I AGE<65 S TYPEAGE=0
"RTN","RCXFMSUR",139,0)
 ;
"RTN","RCXFMSUR",140,0)
 ;  convert to decimal  typecare  typeserv  typemean  typeage
"RTN","RCXFMSUR",141,0)
 ;             binary=  1   1         1         1         1
"RTN","RCXFMSUR",142,0)
 ;            decimal= 16 + 8     +   4     +   2     +   1
"RTN","RCXFMSUR",143,0)
 S DECIMAL=$S(TYPECARE="11":24,TYPECARE="10":16,TYPECARE="01":8,1:0)
"RTN","RCXFMSUR",144,0)
 I TYPESERV S DECIMAL=DECIMAL+4
"RTN","RCXFMSUR",145,0)
 I TYPEMEAN S DECIMAL=DECIMAL+2
"RTN","RCXFMSUR",146,0)
 I TYPEAGE S DECIMAL=DECIMAL+1
"RTN","RCXFMSUR",147,0)
 I DECIMAL<10 Q DECIMAL
"RTN","RCXFMSUR",148,0)
 Q $C(65+DECIMAL-10)
"RTN","RCXFMSUR",149,0)
 ;
"RTN","RCXFMSUR",150,0)
 ;
"RTN","RCXFMSUR",151,0)
COLUMN4() ;  return the column 4 number (reserved for future expansion)
"RTN","RCXFMSUR",152,0)
 Q "Z"
"RTN","RCXFMSUR",153,0)
 ;
"RTN","RCXFMSUR",154,0)
 ;
"RTN","RCXFMSUR",155,0)
DIQ399(DA)  ;  get data from file 399
"RTN","RCXFMSUR",156,0)
 N D0,DIC,DIQ,DIQ2,DR
"RTN","RCXFMSUR",157,0)
 K IBCNDATA
"RTN","RCXFMSUR",158,0)
 S DIQ(0)="IE",DIC="^DGCR(399,",DIQ="IBCNDATA",DR=".04;.05;.18;151;" D EN^DIQ1
"RTN","RCXFMSUR",159,0)
 Q
"RTN","RCXFMSUR",160,0)
 ;
"RTN","RCXFMSUR",161,0)
 ;
"RTN","RCXFMSUR",162,0)
TYPECARE ;  compute type of care (2 digit binary)
"RTN","RCXFMSUR",163,0)
 ;  type of care is set as follows:
"RTN","RCXFMSUR",164,0)
 ;      00 = inpatient (hospital)    01 = outpatient
"RTN","RCXFMSUR",165,0)
 ;      10 = nursing home            11 = other
"RTN","RCXFMSUR",166,0)
 ;  default is other if it cannot be computed
"RTN","RCXFMSUR",167,0)
 S TYPECARE="11"
"RTN","RCXFMSUR",168,0)
 ;  bill classification (.05) = outpatient (3) or human.emerg(opt) (4)
"RTN","RCXFMSUR",169,0)
 I $G(IBCNDATA(399,BILLDA,.05,"I"))=3!($G(IBCNDATA(399,BILLDA,.05,"I"))=4) S TYPECARE="01" Q
"RTN","RCXFMSUR",170,0)
 ;  location of care (.04) = hospital inpt or outpt (1)
"RTN","RCXFMSUR",171,0)
 I $G(IBCNDATA(399,BILLDA,.04,"I"))=1 S TYPECARE="00" Q
"RTN","RCXFMSUR",172,0)
 ;  location of care (.04) = skilled nursing (nhcu) (2)
"RTN","RCXFMSUR",173,0)
 I $G(IBCNDATA(399,BILLDA,.04,"I"))=2 S TYPECARE="10"
"RTN","RCXFMSUR",174,0)
 Q
"RTN","RCXFMSUR",175,0)
 ;
"RTN","RCXFMSUR",176,0)
 ;
"RTN","RCXFMSUR",177,0)
ADDEDIT ;  enter/edit revenue source codes for fund 0160A1 bills.  These
"RTN","RCXFMSUR",178,0)
 ;  bills have the rsc entered by the user.  The user can select
"RTN","RCXFMSUR",179,0)
 ;  from rscs in file 347.3
"RTN","RCXFMSUR",180,0)
 W !!,"This option should be used with CAUTION.  This option will allow the"
"RTN","RCXFMSUR",181,0)
 W !,"user owning the PRCASVC supervisor security key, to add or edit the"
"RTN","RCXFMSUR",182,0)
 W !,"Revenue Source Codes selectable for non MCCF bills.  If an invalid"
"RTN","RCXFMSUR",183,0)
 W !,"Revenue Source Code is entered or changed, all code sheets sent to"
"RTN","RCXFMSUR",184,0)
 W !,"FMS referencing the invalid Revenue Source Code will reject.  Be"
"RTN","RCXFMSUR",185,0)
 W !,"cautious when entering new Revenue Source Codes or editing existing"
"RTN","RCXFMSUR",186,0)
 W !,"Revenue Source Codes.  New Revenue Source Codes should only be added"
"RTN","RCXFMSUR",187,0)
 W !,"after they have been added in FMS."
"RTN","RCXFMSUR",188,0)
 ;
"RTN","RCXFMSUR",189,0)
 I '$D(^XUSEC("PRCASVC",DUZ)) W !!,"You are not an owner of the PRCASVC security key." Q
"RTN","RCXFMSUR",190,0)
 ;
"RTN","RCXFMSUR",191,0)
 N %,%Y,C,D,D0,DA,DI,DIC,DIE,DLAYGO,DQ,DR,RCRJFLAG,X,X1,X2,X3,Y
"RTN","RCXFMSUR",192,0)
 ;
"RTN","RCXFMSUR",193,0)
 F  D  Q:$G(RCRJFLAG)
"RTN","RCXFMSUR",194,0)
 . S (DIC,DIE)="^RC(347.3,",DIC(0)="QEL",DLAYGO=347.3
"RTN","RCXFMSUR",195,0)
 . R !!,"Select REVENUE SOURCE CODE: ",X:DTIME
"RTN","RCXFMSUR",196,0)
 . S X1=X,X=$$UPPER^VALM1(X)
"RTN","RCXFMSUR",197,0)
 . I $E(X)="?",X?."?" D ^DIC Q:Y<1
"RTN","RCXFMSUR",198,0)
 . I X=""!($E(X)=U) S RCRJFLAG=1 Q
"RTN","RCXFMSUR",199,0)
 . I $D(^RC(347.3,"B",X)) S Y=+$O(^(X,0)) W "   ",X,"  ",$P($G(^RC(347.3,Y,0)),U,2) W:$P(^(0),U,3) "  INACTIVE" D UPD Q 
"RTN","RCXFMSUR",200,0)
 . S X2=$L(X1),X3=$C($A($E(X1,X2))-1),X3=$E(X1,1,X2-1)_X3,X3=$O(^RC(347.3,"C",X3)) I $E(X3,1,X2)=X1 S X=X1
"RTN","RCXFMSUR",201,0)
 . S D="C" D IX^DIC Q:Y<1  D UPD Q
"RTN","RCXFMSUR",202,0)
 Q
"RTN","RCXFMSUR",203,0)
UPD S DIE="^RC(347.3,",DA=+Y,DR=".02;.03" D ^DIE
"RTN","RCXFMSUR",204,0)
 Q
"RTN","RCXFMSUR",205,0)
 ;
"RTN","RCXFMSUR",206,0)
 ;
"RTN","RCXFMSUR",207,0)
RSC ;revenue code (#430/255)
"RTN","RCXFMSUR",208,0)
 I $P($G(^RC(347.3,X,0)),"^",3) D EN^DDIOL("THIS REVENUE SOURCE CODE IS INACTIVE.") K X Q
"RTN","RCXFMSUR",209,0)
 S X=$P(^RC(347.3,X,0),"^")
"RTN","RCXFMSUR",210,0)
 Q
"RTN","RCXFMSUR",211,0)
 ;
"RTN","RCXFMSUR",212,0)
SHOW ;  show/calculate revenue source code for a selected bill
"RTN","RCXFMSUR",213,0)
 W !!,"This option will show the calculated Revenue Source Code for a selected"
"RTN","RCXFMSUR",214,0)
 W !,"bill.  The Revenue Source Code is only calculated for accrued bills in"
"RTN","RCXFMSUR",215,0)
 I DT'<$$ADDPTEDT^PRCAACC() W !,"funds 528701,528703,528704,528709/4032,528711,528713,528714"
"RTN","RCXFMSUR",216,0)
 I DT<$$ADDPTEDT^PRCAACC() W !,"funds 5287.1,5287.3,5287.4,4032"
"RTN","RCXFMSUR",217,0)
 ;
"RTN","RCXFMSUR",218,0)
 N %,%Y,BILLDA,C,DIC,FUND,I,RCRJFLAG,RSC,X,Y
"RTN","RCXFMSUR",219,0)
 ;
"RTN","RCXFMSUR",220,0)
 F  D  Q:$G(RCRJFLAG)
"RTN","RCXFMSUR",221,0)
 .   S DIC="^PRCA(430,",DIC(0)="QEAM"
"RTN","RCXFMSUR",222,0)
 .   W ! D ^DIC
"RTN","RCXFMSUR",223,0)
 .   I Y<1 S RCRJFLAG=1 Q
"RTN","RCXFMSUR",224,0)
 .   S BILLDA=+Y
"RTN","RCXFMSUR",225,0)
 .   ;PRCA*4.5*338 - prevent Non-accrued funds from recalculating Fund Number) 
"RTN","RCXFMSUR",226,0)
 .   ; look for an existing fund number
"RTN","RCXFMSUR",227,0)
 .   S FUND=$P($G(^PRCA(430,BILLDA,11)),"^",17)
"RTN","RCXFMSUR",228,0)
 .   ; only recalculate fund number if Accrued fund
"RTN","RCXFMSUR",229,0)
 .   I $$PTACCT^PRCAACC(FUND) S FUND=$$GETFUNDB^RCXFMSUF(BILLDA,1)
"RTN","RCXFMSUR",230,0)
 .   ;end PRCA*4.5*338
"RTN","RCXFMSUR",231,0)
 .   W !!,"        Bill Number: ",$P($G(^PRCA(430,BILLDA,0)),"^")
"RTN","RCXFMSUR",232,0)
 .   W !,"               Fund: ",FUND
"RTN","RCXFMSUR",233,0)
 .   I '$$PTACCT^PRCAACC(FUND),FUND'=4032 D  Q
"RTN","RCXFMSUR",234,0)
 .   .   W !,"  The Revenue Source Code cannot be calculated for non-accrued bills."
"RTN","RCXFMSUR",235,0)
 .   .   W !,"  The Revenue Source Code for non-accrued bills are input by the user."
"RTN","RCXFMSUR",236,0)
 .   .   W !,"  The Revenue Source Code is currently entered as: "
"RTN","RCXFMSUR",237,0)
 .   .   S RSC=$P($G(^PRCA(430,BILLDA,11)),"^",6)
"RTN","RCXFMSUR",238,0)
 .   .   W $S(RSC="":"<not entered>",1:RSC)
"RTN","RCXFMSUR",239,0)
 .   ;
"RTN","RCXFMSUR",240,0)
 .   S RSC=$$CALCRSC(BILLDA)
"RTN","RCXFMSUR",241,0)
 .   W !,"Revenue Source Code: ",RSC
"RTN","RCXFMSUR",242,0)
 Q
"RTN","RCXFMSUR",243,0)
 ;
"RTN","RCXFMSUR",244,0)
 ;PRCA*4.5*338 
"RTN","RCXFMSUR",245,0)
GETCCRSC(CATEGDA,BILLDA) ;Retrieve the RSC for Community Care Categories
"RTN","RCXFMSUR",246,0)
 N RCRSC,IBCNDATA,RCIOPFLG,RX3P
"RTN","RCXFMSUR",247,0)
 S RCRSC=""
"RTN","RCXFMSUR",248,0)
 Q:CATEGDA=52 "84CC"    ;Choice No-Fault Auto AR Category
"RTN","RCXFMSUR",249,0)
 Q:CATEGDA=53 "85CC"    ;Choice TORT Feasor AR Category
"RTN","RCXFMSUR",250,0)
 Q:CATEGDA=60 "86CC"    ;Choice Workers' Comp AR Category
"RTN","RCXFMSUR",251,0)
 Q:CATEGDA=54 "8CNW"    ;CCN Workers' Comp AR Category
"RTN","RCXFMSUR",252,0)
 Q:CATEGDA=56 "8CN9"    ;CCN TORT Feasor AR Category
"RTN","RCXFMSUR",253,0)
 Q:CATEGDA=55 "8CN8"    ;CCN No-Fault Auto AR Category
"RTN","RCXFMSUR",254,0)
 Q:CATEGDA=57 "8C6C"    ;CC Workers' Comp AR Category
"RTN","RCXFMSUR",255,0)
 Q:CATEGDA=59 "8C5C"    ;CC TORT Feasor AR Category
"RTN","RCXFMSUR",256,0)
 Q:CATEGDA=58 "8C4C"    ;CC No-Fault Auto AR Category
"RTN","RCXFMSUR",257,0)
 Q:CATEGDA=61 "8CC5"    ;CHOICE Inpatient Copay
"RTN","RCXFMSUR",258,0)
 Q:CATEGDA=62 "8CC7"    ;CHOICE RX CO-PAYMENT Copay
"RTN","RCXFMSUR",259,0)
 Q:CATEGDA=63 "8CC1"    ;CC Inpatient Copay
"RTN","RCXFMSUR",260,0)
 Q:CATEGDA=64 "8CC3"    ;CC RX CO-PAYMENT
"RTN","RCXFMSUR",261,0)
 Q:CATEGDA=65 "8CN1"    ;CCN Inpatient Copay
"RTN","RCXFMSUR",262,0)
 Q:CATEGDA=66 "8CN3"    ;CCN RX CO-PAYMENT
"RTN","RCXFMSUR",263,0)
 Q:CATEGDA=67 "8CD1"    ;CC MTF C (MEANS TEST)
"RTN","RCXFMSUR",264,0)
 Q:CATEGDA=68 "8CD3"    ;CC MTF RX CO-PAYMENT
"RTN","RCXFMSUR",265,0)
 Q:CATEGDA=69 "8CC4"    ;CC NURSING HOME CARE - LTC
"RTN","RCXFMSUR",266,0)
 Q:CATEGDA=70 "8CC4"    ;CC RESPITE CARE
"RTN","RCXFMSUR",267,0)
 Q:CATEGDA=71 "8CN4"    ;CCN NURSING HOME CARE - LTC
"RTN","RCXFMSUR",268,0)
 Q:CATEGDA=72 "8CN4"    ;CCN RESPITE CARE
"RTN","RCXFMSUR",269,0)
 Q:CATEGDA=73 "8CC8"    ;CHOICE NURSING HOME CARE - LTC
"RTN","RCXFMSUR",270,0)
 Q:CATEGDA=74 "8CC8"    ;CHOICE RESPITE CARE
"RTN","RCXFMSUR",271,0)
 Q:CATEGDA=81 "8CC6"    ;CHOICE OPT
"RTN","RCXFMSUR",272,0)
 Q:CATEGDA=82 "8CC2"    ;CC OPT
"RTN","RCXFMSUR",273,0)
 Q:CATEGDA=83 "8CN2"    ;CCN OPT
"RTN","RCXFMSUR",274,0)
 Q:CATEGDA=84 "8CD2"    ;CC MTF OPT
"RTN","RCXFMSUR",275,0)
 Q:CATEGDA=85 "8CCU"    ;CC URGENT CARE  prca*4.5*360
"RTN","RCXFMSUR",276,0)
 I (CATEGDA>47),(CATEGDA<52) D  Q RCRSC
"RTN","RCXFMSUR",277,0)
 . S RCIOPFLG=""
"RTN","RCXFMSUR",278,0)
 . S RX3P=0
"RTN","RCXFMSUR",279,0)
 . I ("PH"=$$TYP^IBRFN(BILLDA)) D
"RTN","RCXFMSUR",280,0)
 . . S RX3P=$$CHECKRXS^RCXFMSUF(BILLDA)
"RTN","RCXFMSUR",281,0)
 . D DIQ399(BILLDA)
"RTN","RCXFMSUR",282,0)
 . ;  for Community Care, 1 (inpatient) or 2 (outpatient -everything else)
"RTN","RCXFMSUR",283,0)
 . S RCIOPFLG=$S($G(IBCNDATA(399,BILLDA,.05,"I"))=1:1,1:2)
"RTN","RCXFMSUR",284,0)
 . I (CATEGDA=48),RX3P S RCRSC="83CC" Q   ;CHOICE INS RX
"RTN","RCXFMSUR",285,0)
 . I (CATEGDA=48),(RCIOPFLG=1) S RCRSC="81CC" Q   ;CHOICE INS INPATIENT
"RTN","RCXFMSUR",286,0)
 . I (CATEGDA=48),(RCIOPFLG=2) S RCRSC="82CC" Q   ;CHOICE INS OUTPATIENT
"RTN","RCXFMSUR",287,0)
 . I (CATEGDA=49),RX3P S RCRSC="8C3C" Q   ;CC INS RX
"RTN","RCXFMSUR",288,0)
 . I (CATEGDA=49),(RCIOPFLG=1) S RCRSC="8C1C" Q   ;CC INS INPATIENT
"RTN","RCXFMSUR",289,0)
 . I (CATEGDA=49),(RCIOPFLG=2) S RCRSC="8C2C" Q   ;CC INS OUTPATIENT
"RTN","RCXFMSUR",290,0)
 . I (CATEGDA=50),RX3P S RCRSC="8CN7" Q   ;CCN INS RX
"RTN","RCXFMSUR",291,0)
 . I (CATEGDA=50),(RCIOPFLG=1) S RCRSC="8CN5" Q   ;CCN INS INPATIENT
"RTN","RCXFMSUR",292,0)
 . I (CATEGDA=50),(RCIOPFLG=2) S RCRSC="8CN6" Q   ;CCN INS OUTPATIENT
"RTN","RCXFMSUR",293,0)
 . I (CATEGDA=51),RX3P S RCRSC="8CD6" Q   ;CC MTF INS RX
"RTN","RCXFMSUR",294,0)
 . I (CATEGDA=51),(RCIOPFLG=1) S RCRSC="8CD4" Q   ;CC MTF INS INPATIENT
"RTN","RCXFMSUR",295,0)
 . I (CATEGDA=51),(RCIOPFLG=2) S RCRSC="8CD5" Q   ;CC MTF INS OUTPATIENT
"RTN","RCXFMSUR",296,0)
 Q 0
"VER")
8.0^22.2
"BLD",11398,6)
^317
**END**
**END**

