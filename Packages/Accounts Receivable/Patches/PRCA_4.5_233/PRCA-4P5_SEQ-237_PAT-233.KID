Released PRCA*4.5*233 SEQ #237
Extracted from mail message
**KIDS**:PRCA*4.5*233^

**INSTALL NAME**
PRCA*4.5*233
"BLD",6271,0)
PRCA*4.5*233^ACCOUNTS RECEIVABLE^0^3090518^y
"BLD",6271,1,0)
^^5^5^3061127^
"BLD",6271,1,1,0)
This patch addresses two issues. The first is about that site requested to
"BLD",6271,1,2,0)
enter a bill for more than the unit cost limit of 999999 in the NEW BILL
"BLD",6271,1,3,0)
(ENTER) option. The second is about that site asked to remove the veteran
"BLD",6271,1,4,0)
name and a portion of SSN from the message subject line due to the new
"BLD",6271,1,5,0)
security posture of the VA.
"BLD",6271,4,0)
^9.64PA^430^1
"BLD",6271,4,430,0)
430
"BLD",6271,4,430,2,0)
^9.641^430.01^2
"BLD",6271,4,430,2,430.01,0)
FISCAL YEAR  (sub-file)
"BLD",6271,4,430,2,430.01,1,0)
^9.6411^7^1
"BLD",6271,4,430,2,430.01,1,7,0)
FY ORIGINAL AMOUNT
"BLD",6271,4,430,2,430.02,0)
DESCRIPTION  (sub-file)
"BLD",6271,4,430,2,430.02,1,0)
^9.6411^6^2
"BLD",6271,4,430,2,430.02,1,4,0)
UNIT COST
"BLD",6271,4,430,2,430.02,1,6,0)
TOTAL AMOUNT
"BLD",6271,4,430,222)
y^n^p^^^^n^^n
"BLD",6271,4,430,224)

"BLD",6271,4,"APDD",430,430.01)

"BLD",6271,4,"APDD",430,430.01,7)

"BLD",6271,4,"APDD",430,430.02)

"BLD",6271,4,"APDD",430,430.02,4)

"BLD",6271,4,"APDD",430,430.02,6)

"BLD",6271,4,"B",430,430)

"BLD",6271,6.3)
4
"BLD",6271,"KRN",0)
^9.67PA^8989.52^19
"BLD",6271,"KRN",.4,0)
.4
"BLD",6271,"KRN",.4,"NM",0)
^9.68A^2^1
"BLD",6271,"KRN",.4,"NM",2,0)
PRCA VENDOR PROFILE    FILE #430^430^0
"BLD",6271,"KRN",.4,"NM","B","PRCA VENDOR PROFILE    FILE #430",2)

"BLD",6271,"KRN",.401,0)
.401
"BLD",6271,"KRN",.402,0)
.402
"BLD",6271,"KRN",.402,"NM",0)
^9.68A^2^2
"BLD",6271,"KRN",.402,"NM",1,0)
PRCA OLD SET    FILE #430^430^0
"BLD",6271,"KRN",.402,"NM",2,0)
PRCA SET    FILE #430^430^0
"BLD",6271,"KRN",.402,"NM","B","PRCA OLD SET    FILE #430",1)

"BLD",6271,"KRN",.402,"NM","B","PRCA SET    FILE #430",2)

"BLD",6271,"KRN",.403,0)
.403
"BLD",6271,"KRN",.5,0)
.5
"BLD",6271,"KRN",.84,0)
.84
"BLD",6271,"KRN",3.6,0)
3.6
"BLD",6271,"KRN",3.8,0)
3.8
"BLD",6271,"KRN",9.2,0)
9.2
"BLD",6271,"KRN",9.8,0)
9.8
"BLD",6271,"KRN",9.8,"NM",0)
^9.68A^8^8
"BLD",6271,"KRN",9.8,"NM",1,0)
PRCABD^^0^B16869095
"BLD",6271,"KRN",9.8,"NM",2,0)
PRCADR1^^0^B19000138
"BLD",6271,"KRN",9.8,"NM",3,0)
RCBEADJ^^0^B63961627
"BLD",6271,"KRN",9.8,"NM",4,0)
PRCASER1^^0^B15957526
"BLD",6271,"KRN",9.8,"NM",5,0)
RCWROFF1^^0^B33354440
"BLD",6271,"KRN",9.8,"NM",6,0)
PRCADR2^^0^B15530730
"BLD",6271,"KRN",9.8,"NM",7,0)
PRCAHIS^^0^B25570251
"BLD",6271,"KRN",9.8,"NM",8,0)
PRCAATR^^0^B16891827
"BLD",6271,"KRN",9.8,"NM","B","PRCAATR",8)

"BLD",6271,"KRN",9.8,"NM","B","PRCABD",1)

"BLD",6271,"KRN",9.8,"NM","B","PRCADR1",2)

"BLD",6271,"KRN",9.8,"NM","B","PRCADR2",6)

"BLD",6271,"KRN",9.8,"NM","B","PRCAHIS",7)

"BLD",6271,"KRN",9.8,"NM","B","PRCASER1",4)

"BLD",6271,"KRN",9.8,"NM","B","RCBEADJ",3)

"BLD",6271,"KRN",9.8,"NM","B","RCWROFF1",5)

"BLD",6271,"KRN",19,0)
19
"BLD",6271,"KRN",19.1,0)
19.1
"BLD",6271,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6271,"KRN",101,0)
101
"BLD",6271,"KRN",101,"NM",0)
^9.68A^^
"BLD",6271,"KRN",409.61,0)
409.61
"BLD",6271,"KRN",771,0)
771
"BLD",6271,"KRN",870,0)
870
"BLD",6271,"KRN",8989.51,0)
8989.51
"BLD",6271,"KRN",8989.52,0)
8989.52
"BLD",6271,"KRN",8994,0)
8994
"BLD",6271,"KRN","B",.4,.4)

"BLD",6271,"KRN","B",.401,.401)

"BLD",6271,"KRN","B",.402,.402)

"BLD",6271,"KRN","B",.403,.403)

"BLD",6271,"KRN","B",.5,.5)

"BLD",6271,"KRN","B",.84,.84)

"BLD",6271,"KRN","B",3.6,3.6)

"BLD",6271,"KRN","B",3.8,3.8)

"BLD",6271,"KRN","B",9.2,9.2)

"BLD",6271,"KRN","B",9.8,9.8)

"BLD",6271,"KRN","B",19,19)

"BLD",6271,"KRN","B",19.1,19.1)

"BLD",6271,"KRN","B",101,101)

"BLD",6271,"KRN","B",409.61,409.61)

"BLD",6271,"KRN","B",771,771)

"BLD",6271,"KRN","B",870,870)

"BLD",6271,"KRN","B",8989.51,8989.51)

"BLD",6271,"KRN","B",8989.52,8989.52)

"BLD",6271,"KRN","B",8994,8994)

"BLD",6271,"QUES",0)
^9.62^^0
"BLD",6271,"REQB",0)
^9.611^6^6
"BLD",6271,"REQB",1,0)
PRCA*4.5*154^2
"BLD",6271,"REQB",2,0)
PRCA*4.5*138^2
"BLD",6271,"REQB",3,0)
PRCA*4.5*165^2
"BLD",6271,"REQB",4,0)
PRCA*4.5*241^2
"BLD",6271,"REQB",5,0)
PRCA*4.5*198^2
"BLD",6271,"REQB",6,0)
PRCA*4.5*208^2
"BLD",6271,"REQB","B","PRCA*4.5*138",2)

"BLD",6271,"REQB","B","PRCA*4.5*154",1)

"BLD",6271,"REQB","B","PRCA*4.5*165",3)

"BLD",6271,"REQB","B","PRCA*4.5*198",5)

"BLD",6271,"REQB","B","PRCA*4.5*208",6)

"BLD",6271,"REQB","B","PRCA*4.5*241",4)

"FIA",430)
ACCOUNTS RECEIVABLE
"FIA",430,0)
^PRCA(430,
"FIA",430,0,0)
430I
"FIA",430,0,1)
y^n^p^^^^n^^n
"FIA",430,0,10)

"FIA",430,0,11)

"FIA",430,0,"RLRO")

"FIA",430,0,"VR")
4.5^PRCA
"FIA",430,430)
1
"FIA",430,430.01)
1
"FIA",430,430.01,7)

"FIA",430,430.02)
1
"FIA",430,430.02,4)

"FIA",430,430.02,6)

"KRN",.4,415,-1)
0^2
"KRN",.4,415,0)
PRCA VENDOR PROFILE^3040219.1407^^430^^^3081020
"KRN",.4,415,"DXS",1,9)
S X=$P(^PRCA(430,D0,0),U,5) W:X&$D(^PRCA(430.6,+X,0)) ?23,$E($P(^PRCA(430.6,X,0),U,2),1,55)
"KRN",.4,415,"DXS",2,9)
S DIP(1)=$S($D(^PRCA(430,D0,101,D1,0)):^(0),1:"") S X=$$EXTERNAL^DIDU(430.02,3,"",$P(DIP(1),U,3)),DIP(2)=$G(X) S X=0,DIP(3)=$G(X) S X=2,X=$J(DIP(2),DIP(3),X)
"KRN",.4,415,"F",1)
S %=$P($H,",",2),X=DT_(%\60#60/100+(%\3600)+(%#60/10000)/100) S Y=X D DT K DIP;L18;d;Z;"NOW"~" ACCOUNTS RECEIVABLE PROFILE"~
"KRN",.4,415,"F",2)
S X="=",DIP(1)=$G(X) S X=75,X1=DIP(1) S %=X,X="" Q:X1=""  S $P(X,X1,%\$L(X1)+1)=X1,X=$E(X,1,%) W X K DIP;C1;Z;"DUP("=",75)"~"NAME: ";C1~9;X~
"KRN",.4,415,"F",3)
"BILL #: ";C40~.01;X~D EN2^PRCADR1;Z;"D EN2^PRCADR1"~"CURRENT STATUS: ";S1;C1~8;X~"CATEGORY: ";C40~2;X~"CP: ";C1~250;X~"FUND (APPROPRIATION): ";C40~
"KRN",.4,415,"F",4)
203;X~"DATE BILL PREPARED: ";C40~10;X~D EN1^PRCADR1;Z;"D EN1^PRCADR1"~D EN3^PRCADR;Z;"D EN3^PRCADR"~
"KRN",.4,415,"F",5)
D EN5^PRCADR Q:$D(PRCA("HALT"))  W "";Z;"D EN5^PRCADR Q:$D(PRCA("HALT"))  W """~"TRANSACTIONS: ";S1;C1~D EN2^PRCADR;Z;"D EN2^PRCADR"~
"KRN",.4,415,"F",6)
Q:$D(PRCA("HALT"))  W "";Z;"Q:$D(PRCA("HALT"))  W """~"BILL RESULTING FROM: ";S1;C1~
"KRN",.4,415,"F",7)
X DXS(1,9);Z;"S X=$P(^PRCA(430,D0,0),U,5) W:X&$D(^PRCA(430.6,+X,0)) ?23,$E($P(^PRCA(430.6,X,0),U,2),1,55)"~" ";C1~"Date";C1~"Description";C12~
"KRN",.4,415,"F",8)
"Quantity";C35~"Units";C46~"Cost";C54~"Total Cost";C64~"================================================================================";C1~
"KRN",.4,415,"F",9)
106,S DIP(1)=$S($D(^PRCA(430,D0,101,D1,0)):^(0),1:"") S X=$P(DIP(1),U,1) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_(1700+$E(X,1,3)) W X K DIP;C1;Z;"NUMDATE4(DATE OF CHARGES)"~
"KRN",.4,415,"F",10)
106,X DXS(2,9) W X K DIP;C35;Z;"$J(QUANTITY (UNITS),0,2)"~106,5;L5;C46~
"KRN",.4,415,"F",11)
106,S DIP(1)=$S($D(^PRCA(430,D0,101,D1,0)):^(0),1:"") S X=$P(DIP(1),U,4),DIP(2)=$G(X) S X=0,DIP(3)=$G(X) S X=4,X=$J(DIP(2),DIP(3),X) W X K DIP;C54;Z;"$J(UNIT COST,0,4)"~
"KRN",.4,415,"F",12)
106,S DIP(1)=$S($D(^PRCA(430,D0,101,D1,0)):^(0),1:"") S X=$P(DIP(1),U,6),DIP(2)=$G(X) S X=0,DIP(3)=$G(X) S X=2,X=$J(DIP(2),DIP(3),X) W X K DIP;C64;Z;"$J(TOTAL AMOUNT,0,2)"~
"KRN",.4,415,"F",13)
106,2,.01;C12~D EN4^PRCADR1;Z;"D EN4^PRCADR1"~
"KRN",.4,415,"F",14)
Q:'$D(PRCA("WROFF"))  K DXS S D0=PRCA("WROFF") D ^PRCATW1 K DXS;Z;"Q:'$D(PRCA("WROFF"))  K DXS S D0=PRCA("WROFF") D ^PRCATW1 K DXS"~
"KRN",.4,415,"H")
@
"KRN",.4,415,"IOM")
80
"KRN",.4,415,"LAST")

"KRN",.4,415,"ROU")
^PRCATP3
"KRN",.4,415,"ROUOLD")
PRCATP3
"KRN",.4,415,"SUB")
1
"KRN",.402,391,-1)
0^2
"KRN",.402,391,0)
PRCA SET^2970924.162^^430^^^3070824
"KRN",.402,391,"%D",0)
^^3^3^2881006^^
"KRN",.402,391,"%D",1,0)
This template set up new bills.
"KRN",.402,391,"%D",2,0)
COMPILED: ^PRCATE
"KRN",.402,391,"%D",3,0)
OPTION: PRCAA SET/AUDIT NEW BILL
"KRN",.402,391,"DIAB",11,0,430,1)
9:
"KRN",.402,391,"DR",1,430)
I ('$D(PRCAT))!('$D(PRCABN)) S Y="";8///INCOMPLETE;I PRCAT'["C" S Y="@6";15.1;S PRCAQS=+X;20.1///^S X=$P(^PRCA(430.2,PRCAQS,0),U,3);@6;I "T"'[PRCAT S Y="@3";7;@3;9;I PRCAT'["T" S Y="@4";239;S:X="" Y=247;240;242;243;244;247;
"KRN",.402,391,"DR",1,430,1)
S:X="" Y="@4";248;249;19;S:X="" Y="@4";19.1;@4;4.5;S $P(^PRCA(430,D0,7),U,1)=X;10;^340^RCD(340,^^S I(0,0)=D0 S Y(1)=$S($D(^PRCA(430,D0,0)):^(0),1:"") S X=$P(Y(1),U,9),X=X S D(0)=+X S X=$S(D(0)>0:D(0),1:"");1;101;111;
"KRN",.402,391,"DR",1,430,2)
S $P(^PRCA(430,D0,0),U,12)=$S($D(PRCA("SITE")):PRCA("SITE"),1:"");S $P(^PRCA(430,D0,0),U,4)=$S($D(PRCAGLN):PRCAGLN,1:"");K PRCAQS;
"KRN",.402,391,"DR",2,340)
.05;
"KRN",.402,391,"DR",2,430.01)
.01;7;
"KRN",.402,391,"ROU")
^PRCATE
"KRN",.402,391,"ROUOLD")
PRCATE
"KRN",.402,413,-1)
0^1
"KRN",.402,413,0)
PRCA OLD SET^2990726^^430^^^3070905
"KRN",.402,413,"%D",0)
^.4021^3^3^3060427^^^
"KRN",.402,413,"%D",1,0)
This template enters 'old' established bills in the system.
"KRN",.402,413,"%D",2,0)
COMPILED:  ^PRCATA
"KRN",.402,413,"%D",3,0)
OPTION: PRCAA OLD BILL
"KRN",.402,413,"DIAB",4,1,430.01,0)
CURR.PRIN.BAL.;"CURRENT PRIN. BAL. FOR THIS FISCAL YEAR""
"KRN",.402,413,"DIAB",17,0,430,1)
ORIGINAL AMOUNT;"TOTAL ORIGINAL AMOUNT"
"KRN",.402,413,"DR",1,430)
I ('$D(PRCAT))!('$D(PRCABN)) S Y="";8///OLD BILL;S:PRCAT'["C" Y="@6";15.1;S PRCAQS=+X;20.1///^S X="" I $D(PRCAQS),PRCAQS S X=$P(^PRCA(430.2,PRCAQS,0),"^",3);@6;I "T"'[PRCAT S Y="@3";7;@3;9;I PRCAT'["T" S Y="@4";20.1//^S X=297;239;
"KRN",.402,413,"DR",1,430,1)
S:X="" Y=247;240;242;243;244;247;S:X="" Y="@4";248;249;19;S:X="" Y="@4";19.1;@4;4.5;1//^S X=$$FY^RCFN01(DT);D CP^PRCABIL1;3TOTAL ORIGINAL AMOUNT~;71;S:"PC"'[PRCAT Y="@7";72;73;67;@7;61;62;63;10;101;S PRCAOLD="";8;
"KRN",.402,413,"DR",1,430,2)
S $P(^PRCA(430,D0,0),U,12)=$S($D(PRCA("SITE")):PRCA("SITE"),1:"");K PRCAOLD;
"KRN",.402,413,"DR",2,430.01)
.01;3;7;1CURRENT PRIN. BAL. FOR THIS FISCAL YEAR~;
"KRN",.402,413,"ROU")
^PRCATA
"KRN",.402,413,"ROUOLD")
PRCATA
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,20,0)
^9.402P^1^1
"PKG",142,20,1,0)
2^^PRCAMRG
"PKG",142,20,1,1)

"PKG",142,20,"B",2,1)

"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^^2950320
"PKG",142,22,1,"PAH",1,0)
233^3090518
"PKG",142,22,1,"PAH",1,1,0)
^^5^5^3090518
"PKG",142,22,1,"PAH",1,1,1,0)
This patch addresses two issues. The first is about that site requested to
"PKG",142,22,1,"PAH",1,1,2,0)
enter a bill for more than the unit cost limit of 999999 in the NEW BILL
"PKG",142,22,1,"PAH",1,1,3,0)
(ENTER) option. The second is about that site asked to remove the veteran
"PKG",142,22,1,"PAH",1,1,4,0)
name and a portion of SSN from the message subject line due to the new
"PKG",142,22,1,"PAH",1,1,5,0)
security posture of the VA.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
8
"RTN","PRCAATR")
0^8^B16891827^B16843547
"RTN","PRCAATR",1,0)
PRCAATR ;WASH-ISC@ALTOONA,PA/RGY-VIEW TRANSACTION FOR BILLS ;2/14/96  2:46 PM
"RTN","PRCAATR",2,0)
V ;;4.5;Accounts Receivable;**36,104,172,138,233**;Mar 20, 1995;Build 4
"RTN","PRCAATR",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCAATR",4,0)
EN1(BILL) ;ENTRY POINT FROM PRCAAPR
"RTN","PRCAATR",5,0)
 NEW X,COUNT,OUT,TRAN,SEL,PRCAATRX,PRCAIO,PRCAIOS,D0,PRCAQUE,POP,PRCAPRT,Y,ZTSK
"RTN","PRCAATR",6,0)
 I '$D(BILL) G Q
"RTN","PRCAATR",7,0)
 I BILL'?1N.N!'$D(^PRCA(430,+BILL,0)) G Q
"RTN","PRCAATR",8,0)
 S PRCAPRT=1,PRCAIO=IO(0),PRCAIO(0)=IO(0),COUNT=0 K ^TMP("PRCAATR",$J)
"RTN","PRCAATR",9,0)
 D HDR,DIS,^%ZISC
"RTN","PRCAATR",10,0)
Q K ^TMP("PRCAATR",$J),IO("Q") Q
"RTN","PRCAATR",11,0)
HDR ;Header
"RTN","PRCAATR",12,0)
 D HDR^PRCAAPR1
"RTN","PRCAATR",13,0)
 I $P($G(^PRCA(430,BILL,13)),"^") W !,"MEDICARE CONTRACTUAL ADJUSTMENT: ",$J($P($G(^PRCA(430,BILL,13)),"^"),0,2)
"RTN","PRCAATR",14,0)
 I $P($G(^PRCA(430,BILL,13)),"^",2) W !,"UNREIMBURSED MEDICARE EXPENSE: ",$J($P($G(^PRCA(430,BILL,13)),"^",2),0,2)
"RTN","PRCAATR",15,0)
 W !,"Bill #: ",$P(^PRCA(430,BILL,0),"^") D:$P(^(0),"^",9)'=+DEBT DEB W !!,"#",?8,"Tr #",?17,"Type",?52,"Date",?70,"Amount"
"RTN","PRCAATR",16,0)
 S X="",$P(X,"-",IOM)="" W !,X
"RTN","PRCAATR",17,0)
 Q
"RTN","PRCAATR",18,0)
DIS ;Display transactions
"RTN","PRCAATR",19,0)
 W !,?17,"Original Amount",?52,$$SLH^RCFN01($P(^PRCA(430,BILL,0),"^",10)),?65,$J($P(^(0),"^",3),11,2)
"RTN","PRCAATR",20,0)
 I '$O(^PRCA(433,"C",BILL,0)) D
"RTN","PRCAATR",21,0)
 . S X="",$P(X,"*",20)="" W !!,X,"  NO TRANSACTION INFORMATION AVAILABLE  ",X
"RTN","PRCAATR",22,0)
RD . R !!,"Press return to continue: ",X:DTIME S:'$T DTOUT=1 S OUT=1
"RTN","PRCAATR",23,0)
 . I X["?" W !!,"Press the return key to return to menu." G RD
"RTN","PRCAATR",24,0)
 . Q
"RTN","PRCAATR",25,0)
 F TRAN=0:0 S TRAN=$O(^PRCA(433,"C",BILL,TRAN)) Q:'TRAN!$D(OUT)  D TLN
"RTN","PRCAATR",26,0)
 S X=$G(^PRCA(430,BILL,7))
"RTN","PRCAATR",27,0)
 I '$D(OUT) W !?65,"-----------",!,?64,"$",$J($P(X,"^")+$P(X,"^",2)+$P(X,"^",3)+$P(X,"^",4)+$P(X,"^",5),11,2) D READ
"RTN","PRCAATR",28,0)
 Q
"RTN","PRCAATR",29,0)
TLN ;Display a transaction
"RTN","PRCAATR",30,0)
 N YR
"RTN","PRCAATR",31,0)
 I $Y+5>IOSL,COUNT D READ G:$D(DTOUT)!$D(OUT) Q1 D HDR
"RTN","PRCAATR",32,0)
 S COUNT=COUNT+1,X=$G(^PRCA(433,TRAN,1)),^TMP("PRCAATR",$J,COUNT)=TRAN
"RTN","PRCAATR",33,0)
 W !,COUNT,$S($P(^PRCA(433,TRAN,0),"^",4)=1!$P(^(0),"^",10):"(I)",1:""),?8,TRAN,?17
"RTN","PRCAATR",34,0)
 W $S($P($G(^PRCA(430.3,+$P(X,"^",2),0)),"^",3)=17:$P($G(^PRCA(433,TRAN,5)),"^",2),1:$P($G(^(0)),"^"))
"RTN","PRCAATR",35,0)
 ;  show decrease adjustments as negative (patch 4.5*172)
"RTN","PRCAATR",36,0)
 I $P(X,"^",2)=35 S:$P(X,"^",5)>0 $P(X,"^",5)=-$P(X,"^",5)
"RTN","PRCAATR",37,0)
 W ?52,$S(+X:$$SLH^RCFN01(+X),1:""),?65,$J($P(X,"^",5),11,2)
"RTN","PRCAATR",38,0)
Q1 Q
"RTN","PRCAATR",39,0)
READ ;Read a trans number
"RTN","PRCAATR",40,0)
 I IO'=IO(0) G Q2
"RTN","PRCAATR",41,0)
ASK W !!,"Select 1-",COUNT,$S(PRCAPRT:" or 'P' to Print",1:" to print") W:TRAN " or return to continue" R ": ",X:DTIME I X["^"!'$T S:'$T DTOUT=1 S OUT=1 G Q2
"RTN","PRCAATR",42,0)
 I PRCAPRT,X="P" S %ZIS="MQ" D ^%ZIS D  S PRCAPRT=0,PRCAIO=IO,PRCAIO(0)=IO(0) G:'POP ASK K POP S OUT=1 G Q2
"RTN","PRCAATR",43,0)
 . I $D(IO("S")) S PRCAIOS=ION D ^%ZISC
"RTN","PRCAATR",44,0)
 . Q
"RTN","PRCAATR",45,0)
 I X["?" W !!,"To see detailed information for a transaction number, enter the corresponding '#'",!,"next to the transaction.  (Ex: 1 or 1,3)" G ASK
"RTN","PRCAATR",46,0)
 I X="" S:TRAN="" OUT=1 G Q2
"RTN","PRCAATR",47,0)
 S SEL=X
"RTN","PRCAATR",48,0)
 F X=1:1:$L(SEL,",") S Y=$P(SEL,",",X) I Y'?1N.N!'$D(^TMP("PRCAATR",$J,+Y)) W *7," ??" G READ
"RTN","PRCAATR",49,0)
 F PRCAATRX=1:1:$L(SEL,",") S Y=$P(SEL,",",PRCAATRX) D VT Q:$D(OUT)
"RTN","PRCAATR",50,0)
 S OUT=1
"RTN","PRCAATR",51,0)
Q2 Q
"RTN","PRCAATR",52,0)
VT ;View a transaction
"RTN","PRCAATR",53,0)
 N IOP,%ZIS,ZTRTN,ZTDESC,ZTSAVE,ZTDTH
"RTN","PRCAATR",54,0)
 S D0=$G(^TMP("PRCAATR",$J,+Y)) G:'D0 Q3
"RTN","PRCAATR",55,0)
 I $D(IO("Q")) S ZTSAVE("D0")="",ZTSAVE("PRCAIO")=IO,ZTSAVE("PRCAIO(0)")=IO(0),ZTRTN="DQ^PRCAATR",ZTDESC="AR TRANS PROFILE",ZTDTH=$H D ^%ZTLOAD W !,"*** Trans # ",D0," REQUEST QUEUED ***" G Q3
"RTN","PRCAATR",56,0)
 I IO'=IO(0) W !,"OK, Printing Transaction # ",D0," ..."
"RTN","PRCAATR",57,0)
 I $D(PRCAIOS) S IOP=PRCAIOS D ^%ZIS
"RTN","PRCAATR",58,0)
 U IO D DQ U IO(0)
"RTN","PRCAATR",59,0)
Q3 Q
"RTN","PRCAATR",60,0)
DQ ;
"RTN","PRCAATR",61,0)
 W @IOF S X="",$P(X,"=",30)="" W !,X," TRANSACTION PROFILE ",X,!!
"RTN","PRCAATR",62,0)
 K DXS D ^PRCATR3 K DXS S X=D0 D ENF^IBOLK
"RTN","PRCAATR",63,0)
RD1 I $E(IOST)="C" R !!,"PRESS <RETURN> TO CONTINUE: ",X:DTIME S:'$T DTOUT=1,OUT=1 I X["?" W !!,"Press return to view next transaction or to continue" G RD1
"RTN","PRCAATR",64,0)
 Q
"RTN","PRCAATR",65,0)
DEB ;View debtor
"RTN","PRCAATR",66,0)
 NEW PRCA
"RTN","PRCAATR",67,0)
 S PRCA=$P(^PRCA(430,BILL,0),"^",9) I PRCA S PRCA=$P(^RCD(340,PRCA,0),"^") W "   ",$P($G(@("^"_$P(PRCA,";",2)_+PRCA_",0)")),"^")
"RTN","PRCAATR",68,0)
 Q
"RTN","PRCABD")
0^1^B16869095^B16874667
"RTN","PRCABD",1,0)
PRCABD ;SF-ISC/RSD-DISPLAY/PRINT BILL ;12/15/95  10:54
"RTN","PRCABD",2,0)
V ;;4.5;Accounts Receivable;**29,57,104,109,154,233**;Mar 20, 1995;Build 4
"RTN","PRCABD",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCABD",4,0)
DEV Q:'$D(PRCABT)  K ZTSAVE S %ZIS="QM" D ^%ZIS Q:POP  G EN:IO=IO(0)
"RTN","PRCABD",5,0)
 I $D(IO("Q")) S ZTRTN=$S(PRCABT=3:"EN^PRCABD",1:"^PRCABP"_PRCABT),ZTDTH=$H,ZTSAVE("D0")="",ZTSAVE("PRCABT")="",ZTSAVE("PRCADFM")="" D ^%ZTLOAD G Q
"RTN","PRCABD",6,0)
 U IO
"RTN","PRCABD",7,0)
EN Q:'$D(D0)  S PRCAD0=$G(^PRCA(430,D0,0)),PRCAD10=$G(^(100)),PRCAD14=$G(^(104)) G Q:PRCAD0=""!(PRCAD10="")
"RTN","PRCABD",8,0)
 S $P(PRCADUL,"-",80)="-" W @IOF,"BILL #: ",$P(PRCAD0,U,1),?30,"DATE: " S Y=$P(PRCAD0,U,10) D DT W ?60,"TYPE: ",$P("1081^1080^1114","^",PRCABT),!,"DEBTOR: ",?40,"BILLING AGENCY: ",!
"RTN","PRCABD",9,0)
 S Y=+$P(PRCAD0,U,9),X=$S($D(^RCD(340,Y,0)):$P(^(0),U,1),1:""),X(1)="" S:X]"" X(1)=$S($D(@("^"_$P(X,";",2)_+X_",0)")):$P(^(0),U,1),1:"")
"RTN","PRCABD",10,0)
 S PRCADB=$S($D(^RCD(340,+$P(PRCAD0,"^",9),0)):$P(^(0),"^"),1:"") S X=$$DADD^RCAMADD(PRCADB) K PRCADB S J=2 D ADD
"RTN","PRCABD",11,0)
 S Y=+$P(PRCAD10,U,7),X(6)=$P($G(^RC(342.1,+Y,0)),"^"),X=$$SADD^RCFN01(+Y_";RC(342.1,"),J=7 D ADD F I=1:1:5 I $D(X(I))!($D(X(I+5))) W !?1 W:$D(X(I)) X(I) W ?41 W:$D(X(I+5)) X(I+5)
"RTN","PRCABD",12,0)
 ;*****  PROBABLY WANT TO ENTER ACCT LINE INFO HERE   *****
"RTN","PRCABD",13,0)
 W !!,"CONTROL POINT :"
"RTN","PRCABD",14,0)
 W ?17,$P($G(^PRCA(430,D0,11)),U)
"RTN","PRCABD",15,0)
 W ! W:PRCABT=1 !?40,"AGENCY LOCATION CODE: ",$P(PRCAD10,U,3) W !,"APPROVING OFFICIAL: "
"RTN","PRCABD",16,0)
 I $P(PRCAD14,U,2)]"" S X=$P(PRCAD14,U,2),P=+PRCAD14,DA=D0 D DE^PRCASIG(.X,P,DA_+$P(PRCAD0,U,3)) W "/ES/ ",X,"   DATE: " S Y=$P(PRCAD14,U,3) D DT
"RTN","PRCABD",17,0)
 W ! F I=0:0 S I=$O(^PRCA(430,D0,2,I)) Q:'I  I $D(^(I,0)) S X=^(0) W !,"FY: ",$P(X,U,1),?12,"APPR. SYMBOL: ",$P($G(^PRCA(430,D0,11)),U,17),?50,"AMOUNT: ",$J($P(X,U,2),10,2)
"RTN","PRCABD",18,0)
 D DES(D0,PRCABT)
"RTN","PRCABD",19,0)
Q D ^%ZISC K DA,DIWL,DIWR,DIWF,FLN,I,J,P,PRCAD,PRCAD0,PRCAD10,PRCAD14,PRCADFM,PRCADI,PRCADI0,PRCADQ,PRCADUL,X,Y,Z,ZTDTH,ZTRTN,ZTSAVE,%ZIS Q
"RTN","PRCABD",20,0)
DES(D0,PRCABT) ;also entry from letter routine
"RTN","PRCABD",21,0)
 NEW DIWF,DIWL,DIWR,FLN,PRCAD,PRCADI,PRCADI0,PRCADQ
"RTN","PRCABD",22,0)
 W !! D HDR S (PRCADQ,PRCADI)=0
"RTN","PRCABD",23,0)
DESL S PRCADI=$O(^PRCA(430,D0,101,PRCADI)) G:'PRCADI DESQ S PRCADI0=^(PRCADI,0),PRCAD=0,DIWL=1,DIWR=50,DIWF="" K ^UTILITY($J,"W"),FLN
"RTN","PRCABD",24,0)
 F  S PRCAD=$O(^PRCA(430,D0,101,PRCADI,1,PRCAD)) Q:'PRCAD  S X=$S($D(^(PRCAD,0)):^(0),1:"") D ^DIWP
"RTN","PRCABD",25,0)
 I $D(^UTILITY($J,"W",DIWL)) F I=0:0 S I=$O(^UTILITY($J,"W",DIWL,I)) Q:'I  S DIWF=^(I,0) D:'$D(FLN) FLN Q:PRCADQ  I $D(FLN),DIWF'="" W !,?11,DIWF
"RTN","PRCABD",26,0)
 I '$D(FLN) D FLN
"RTN","PRCABD",27,0)
 K ^UTILITY($J,"W") W !! G:'PRCADQ DESL
"RTN","PRCABD",28,0)
DESQ Q
"RTN","PRCABD",29,0)
FLN ;first line of detail after description
"RTN","PRCABD",30,0)
 Q:$D(FLN)  D ASK Q:PRCADQ  S FLN=1
"RTN","PRCABD",31,0)
 W:PRCABT=2 $P(PRCADI0,U,7),?11 S Y=$P(PRCADI0,U,1) D DT
"RTN","PRCABD",32,0)
 W ?11 I $L($G(DIWF))<25 W DIWF S DIWF=""
"RTN","PRCABD",33,0)
 W:$P(PRCADI0,U,3)]"" ?37,$J($S($P(PRCADI0,U,3)?1".".N:"0"_$P(PRCADI0,U,3),1:$P(PRCADI0,U,3)),8)
"RTN","PRCABD",34,0)
 W:$P(PRCADI0,U,4)]"" ?47,$J($P(PRCADI0,U,4),12,4) W ?62,$S($D(^PRCD(420.5,+$P(PRCADI0,U,5),0)):$P(^(0),U,1),1:"")
"RTN","PRCABD",35,0)
 W ?65,$J($P(PRCADI0,U,6),15,2)
"RTN","PRCABD",36,0)
 Q
"RTN","PRCABD",37,0)
ASK I $E(IOST,1,2)="C-",($Y+4)>IOSL W !?8,"ENTER '^' TO HALT: " R X:DTIME S:X["^"!'$T PRCADQ=1 Q:PRCADQ  W @IOF D HDR Q
"RTN","PRCABD",38,0)
 I $E(IOST,1,2)'="C-",($Y+4)>IOSL W @IOF D HDR
"RTN","PRCABD",39,0)
 Q
"RTN","PRCABD",40,0)
HDR I PRCABT=2 W !,"ORDER NO.",?11,"DATE",?37,"QUANTITY",?55,"COST",?61,"PER",?74,"AMOUNT"
"RTN","PRCABD",41,0)
 E  W !," DATE",?11,"DESCRIPTION",?37,"QUANTITY",?55,"COST",?61,"PER",?74,"AMOUNT"
"RTN","PRCABD",42,0)
 I '$D(PRCADUL) S PRCADUL="",$P(PRCADUL,"_",80)="_"
"RTN","PRCABD",43,0)
 W !,PRCADUL,! Q
"RTN","PRCABD",44,0)
ADD F I=1:1:4 S:I<4&($P(X,U,I)]"") X(J)=$P(X,U,I),J=J+1 I I=4 S X(J)=$P(X,U,4) S:$P(X,U,5)'="" X(J)=X(J)_", "_$P(X,U,5)_" "_$P(X,U,6)
"RTN","PRCABD",45,0)
 Q
"RTN","PRCABD",46,0)
DT Q:Y=""  W $$SLH^RCFN01(Y,"/")_" " Q
"RTN","PRCABD",47,0)
EN1 ;PRINT/DISPLAY BILL
"RTN","PRCABD",48,0)
EN10 D SVC^PRCABIL G EN1Q:'$D(PRCAP("S")) S DIC("S")="S Z0=$S($D(^PRCA(430.3,+$P(^(0),U,8),0)):$P(^(0),U,3),1:0) I Z0=205,$D(^PRCA(430,Y,100)),+$P(^(100),U,2)="_PRCAP("S")
"RTN","PRCABD",49,0)
 D BILLN^PRCAUTL G EN1Q:'$D(PRCABN) S PRCABT=+^PRCA(430,PRCABN,100) G EN1Q:'PRCABT S D0=PRCABN,PRCADFM=1 D DEV,EN1Q G EN10
"RTN","PRCABD",50,0)
EN1Q K D0,DIC,PRCA,PRCABN,PRCADFM,PRCAP,PRCABT,PRCATY,Z0,ZTSK Q
"RTN","PRCADR1")
0^2^B19000138^B19001295
"RTN","PRCADR1",1,0)
PRCADR1 ;SF-ISC/YJK-PRINT ADDRESS,APPROPR.CDS ;8/16/96  1:02 PM
"RTN","PRCADR1",2,0)
V ;;4.5;Accounts Receivable;**49,138,233**;Mar 20, 1995;Build 4
"RTN","PRCADR1",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCADR1",4,0)
 ;print debtor's /vendor address,multiple appropriations,list of other bills.
"RTN","PRCADR1",5,0)
EN1 ;print the appropriation,pat ref #. (multiple) and amount.
"RTN","PRCADR1",6,0)
 W !,"ORIGINAL AMOUNT: ",$J($P(^PRCA(430,D0,0),U,3),0,2)
"RTN","PRCADR1",7,0)
 I $P($G(^PRCA(430,D0,13)),"^") W !,"MEDICARE CONTRACTUAL ADJUSTMENT: ",$J($P($G(^PRCA(430,D0,13)),"^"),0,2)
"RTN","PRCADR1",8,0)
 I $P($G(^PRCA(430,D0,13)),"^",2) W !,"UNREIMBURSED MEDICARE EXPENSE: ",$J($P($G(^PRCA(430,D0,13)),"^",2),0,2)
"RTN","PRCADR1",9,0)
 W !!,"FISCAL YEAR",?15,"APPROP. CODE",?38,"PAT REFERENCE #",?66,"AMOUNT"
"RTN","PRCADR1",10,0)
 W !,"-----------",?15,"------------",?38,"---------------",?66,"------"
"RTN","PRCADR1",11,0)
 S PRCAFN=0 F PRCAE1=0:0 S PRCAFN=$O(^PRCA(430,D0,2,PRCAFN)) Q:PRCAFN'>0  D WRPAT
"RTN","PRCADR1",12,0)
END1 K PRCAE1,PRCAFN Q  ;end of EN1
"RTN","PRCADR1",13,0)
WRPAT Q:'$D(^PRCA(430,D0,2,PRCAFN,0))  S PRCAFY=$P(^(0),U,1),PRCAMT=$P(^(0),U,2)
"RTN","PRCADR1",14,0)
 S PRCAPAT="" I $P(^PRCA(430,D0,2,PRCAFN,0),U,3)'="" S PRCAPAT=$S($D(^PRC(442,$P(^(0),U,3),0)):$P(^(0),U,1),1:"")
"RTN","PRCADR1",15,0)
 S PRCAPPR=$P($G(^PRCA(430,D0,11)),U,17)
"RTN","PRCADR1",16,0)
 W !,?5,PRCAFY,?18,$E(PRCAPPR,1,10),?40,PRCAPAT,?60,$J(PRCAMT,12,2)
"RTN","PRCADR1",17,0)
 K PRCAPAT,PRCAPPR,PRCAFY,PRCAMT Q
"RTN","PRCADR1",18,0)
EN2 ;PRINT DEBTOR'S ADDRESS - VENDOR
"RTN","PRCADR1",19,0)
 Q:'$D(D0)  S PRCADBPT=$S($P(^PRCA(430,D0,0),U,9)'="":$P(^(0),U,9),1:"") G:PRCADBPT="" END2 S PRCADB=$P(^RCD(340,PRCADBPT,0),"^") N X S X=$$DADD^RCAMADD(PRCADB) S $P(PRCAGL,"^",1,6)=$P(X,"^",1,6),$P(PRCAGL,"^",9)=$P(X,"^",7) K PRCADB
"RTN","PRCADR1",20,0)
 S PRCASTE=$P(PRCAGL,U,5),PRCALN=$S($D(PRCALN):PRCALN,1:0)
"RTN","PRCADR1",21,0)
WR W:PRCALN<1 ! W !,?PRCALN,$P(PRCAGL,U,1)
"RTN","PRCADR1",22,0)
 F I=2,3,4 W:$P(PRCAGL,U,I)'="" !,?PRCALN,$P(PRCAGL,U,I)
"RTN","PRCADR1",23,0)
 I PRCASTE'="",PRCASTE'[" " W ", ",PRCASTE," ",$P(PRCAGL,U,6)
"RTN","PRCADR1",24,0)
 W "        PHONE NO.:",$P(PRCAGL,U,9)
"RTN","PRCADR1",25,0)
END2 K %,PRCASTE,PRCAGL,PRCADBPT,PRCALN Q
"RTN","PRCADR1",26,0)
 ;
"RTN","PRCADR1",27,0)
EN4 ;Print the debtor's other bills.
"RTN","PRCADR1",28,0)
 D PRCOMM^PRCAUT3 Q:'$D(D0)  S PRCAT1=$P(^PRCA(430,D0,0),U,2) G:PRCAT1="" END4 S PRCAT1=$P(^PRCA(430.2,PRCAT1,0),U,6) G:PRCAT1["T" END4
"RTN","PRCADR1",29,0)
 S PRCADBPT=$S($P(^PRCA(430,D0,0),U,9)'="":$P(^(0),U,9),1:"")
"RTN","PRCADR1",30,0)
 G:PRCADBPT="" END4 S X=$P(^RCD(340,PRCADBPT,0),"^",3)
"RTN","PRCADR1",31,0)
 W !,"Statement date: " N %DT,Y S %DT="F",X=$S($E(DT,6,7)>X:$S($E(DT,4,5)+1>12:1,1:$E(DT,4,5)+1),1:$E(DT,4,5))_"-"_$P(^RCD(340,PRCADBPT,0),"^",3) D ^%DT X ^DD("DD") W $S($L(Y)>4:Y,1:"N/A")
"RTN","PRCADR1",32,0)
 S PRCABNT="",PRCACT=0 W !,"OTHER BILLS:",!?2
"RTN","PRCADR1",33,0)
 F I=0:0 S PRCABNT=$O(^PRCA(430,"C",PRCADBPT,PRCABNT)) Q:PRCABNT=""  I PRCABNT'=D0,$D(^PRCA(430,PRCABNT,0)) S PRCACT=PRCACT+1,X="" D:$Y+5>IOSL&($E(IOST)="C")  Q:X["^"  D EN41
"RTN","PRCADR1",34,0)
 .W *7 R X:DTIME I '$T S X="^" Q
"RTN","PRCADR1",35,0)
 .W @IOF,!?2
"RTN","PRCADR1",36,0)
 .Q
"RTN","PRCADR1",37,0)
END4 K PRCAT1,PRCADBPT,PRCABNT,I,PRCACT Q  ;end of EN4
"RTN","PRCADR1",38,0)
EN41 S PRCAT11=$P(^PRCA(430,PRCABNT,0),U,2) G:PRCAT11="" END41 S PRCAT11=^PRCA(430.2,PRCAT11,0)
"RTN","PRCADR1",39,0)
 S PRCABTY=" ("_$E(PRCAT11,1,4)_"/"_$S($D(^PRCA(430.3,+$P(^PRCA(430,PRCABNT,0),"^",8),0)):$E($P(^(0),"^"),1,4),1:"")_")  " W $P(^PRCA(430,PRCABNT,0),U,1),PRCABTY W:'(PRCACT#3) !?2
"RTN","PRCADR1",40,0)
END41 K PRCABTY,PRCAT11 Q  ;end of EN41
"RTN","PRCADR1",41,0)
EN5 ;Print interest/admin rate date and rate.
"RTN","PRCADR1",42,0)
 Q:'$D(PRCABN)  S (PRCA("INTD"),PRCA("INTR"),PRCA("ADMD"),PRCA("ADMR"))=""
"RTN","PRCADR1",43,0)
 S PRCAIDT=X,X=$$INT^RCMSFN01($P(^PRCA(430,PRCABN,0),"^",10)),PRCA("INTR")=+X
"RTN","PRCADR1",44,0)
 S Y=$P(X,"^",2) X ^DD("DD") S PRCA("INTD")=Y
"RTN","PRCADR1",45,0)
EN51 ;
"RTN","PRCADR1",46,0)
 S X=$$ADM^RCMSFN01($P(^PRCA(430,PRCABN,0),"^",10)),PRCA("ADMR")=+X,Y=$P(X,"^",2) X ^DD("DD") S PRCA("ADMD")=Y
"RTN","PRCADR1",47,0)
W5 W !!,"INTEREST EFFECTIVE RATE DATE:  ",PRCA("INTD"),?45,"ANNUAL INTEREST RATE:  ",PRCA("INTR")
"RTN","PRCADR1",48,0)
 W !,"ADMIN EFFECTIVE RATE DATE:     ",PRCA("ADMD"),?45,"MONTHLY ADMIN RATE: ",PRCA("ADMR")
"RTN","PRCADR1",49,0)
 S X=$S($D(PRCAIDT):PRCAIDT,1:"") K PRCA("INTD"),PRCA("ADMR"),PRCA("ADMD"),PRCA("INTR"),PRCAIDT Q
"RTN","PRCADR1",50,0)
PATNM ;write a patient name for the 3rd party
"RTN","PRCADR1",51,0)
 Q:('$D(PRCAT))!('$D(PRCABN))  Q:PRCAT'["T"
"RTN","PRCADR1",52,0)
 S DFN=$P(^PRCA(430,PRCABN,0),U,7) I DFN D DEM^VADPT
"RTN","PRCADR1",53,0)
 W !,"PATIENT: ",$S($D(VADM):VADM(1),1:""),?45,"SSN: ",$S($D(VADM):$P(VADM(2),U,2),1:""),! K DFN,VADM,VAERR Q  ;end of PATNM
"RTN","PRCADR1",54,0)
EN6 ;Insurance insured's information
"RTN","PRCADR1",55,0)
 Q:('$D(PRCAT))!('$D(PRCABN))  Q:PRCAT'["T"  S Z=$S($D(^PRCA(430,PRCABN,202)):^(202),1:"")
"RTN","PRCADR1",56,0)
 W !!,"INSURED'S NAME",?28,"ID NO.",?45,"GROUP NAME",?62,"GROUP NO."
"RTN","PRCADR1",57,0)
 W !,?2,$P(Z,U,1),?29,$P(Z,U,4),?46,$P(Z,U,5),?63,$P(Z,U,6)
"RTN","PRCADR1",58,0)
 S %=^PRCA(430,PRCABN,0) W:$P(%,U,19)>0 !!,"SECONDARY INSURANCE CARRIER:  ",$S($D(^DIC(36,+$P(%,U,19),0)):$P(^(0),U,1),1:"")
"RTN","PRCADR1",59,0)
 W:$P(%,U,20)>0 !,"TERTIARY INSURANCE CARRIER:  ",$S($D(^DIC(36,+$P(%,U,20),0)):$P(^(0),U,1),1:"") K %,Z Q
"RTN","PRCADR2")
0^6^B15530730^B15487000
"RTN","PRCADR2",1,0)
PRCADR2 ;SF-ISC/YJK-PRINT ADDRESS,TRANS.,BALANCE ;3/19/97  3:19 PM
"RTN","PRCADR2",2,0)
V ;;4.5;Accounts Receivable;**45,104,108,149,141,172,241,233**;Mar 20, 1995;Build 4
"RTN","PRCADR2",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCADR2",4,0)
 ;print debtor's /3rd party address,transaction,balances.
"RTN","PRCADR2",5,0)
 N RCDMC,RCTOP
"RTN","PRCADR2",6,0)
WR1 W !!,$P(PRCAGL,U,1),?39,"SOC.SEC.NO.: ",?55,PRCASSN
"RTN","PRCADR2",7,0)
 W:$P(PRCAGL,U,2)'="" !,$P(PRCAGL,U,2)
"RTN","PRCADR2",8,0)
 W !,$P(PRCAGL,U,4),", ",PRCASTE,"  ",$P(PRCAGL,U,6),?39,"DATE OF BIRTH: ",?55,PRCADOB,!,"PHONE NO.: ",$P(PRCAGL,U,9),?39,"DATE POSTED: " S Y=$P($G(^PRCA(430,D0,6)),"^",21) W:'Y "N/A" I Y D DD^%DT W $P(Y,"@")," ",$P(Y,"@",2)
"RTN","PRCADR2",9,0)
 I $G(RCKAT) W !,"EMERGENCY RESPONSE INDICATOR: HURRICANE KATRINA"
"RTN","PRCADR2",10,0)
 I $G(RCDMC) W !,"****Debtor's Account Forwarded To DMC****"
"RTN","PRCADR2",11,0)
 I $G(RCTOP) W !,"****Debtor's Account Forwarded To TOP****"
"RTN","PRCADR2",12,0)
END1 K %,PRCADOB,PRCASSN,PRCASTE,PRCAGL,Z1,Z2,Z0
"RTN","PRCADR2",13,0)
 Q
"RTN","PRCADR2",14,0)
 ;
"RTN","PRCADR2",15,0)
 ;
"RTN","PRCADR2",16,0)
WR2 ;called by EN2^PRCADR
"RTN","PRCADR2",17,0)
 W ! S PRCAGL0=$S($D(^PRCA(433,PRCAEN,0)):^(0),1:""),PRCAG=$S($D(^PRCA(433,PRCAEN,1)):^(1),1:"") Q:(PRCAG="")!(PRCAGL0="")
"RTN","PRCADR2",18,0)
 S PRCATD=$P(PRCAG,U,1),PRCATY=$P(PRCAG,U,2) Q:'$D(^PRCA(430.3,+PRCATY,0))  S PRCATYPE=$P(^(0),U,3) W ?1,$S($P(PRCAGL0,U,10):"*",1:""),?2,+PRCAGL0
"RTN","PRCADR2",19,0)
 I $P(PRCAG,U,3)="" D
"RTN","PRCADR2",20,0)
 .W:PRCATYPE=17 ?10,$P($G(^PRCA(433,PRCAEN,5)),"^",2)
"RTN","PRCADR2",21,0)
 .W:(PRCATYPE=1)!(PRCATYPE=21) ?10,$P(PRCAG,U,4)
"RTN","PRCADR2",22,0)
 I $P(PRCAG,U,3)'="" W ?10,$P(PRCAG,U,3)
"RTN","PRCADR2",23,0)
 S:(PRCATYPE=8)!((PRCATYPE=9)!(PRCATYPE=10)) PRCA("WROFF")=PRCAEN
"RTN","PRCADR2",24,0)
 W:PRCATY?1N.N&(PRCATYPE'=17) ?20,$P(^PRCA(430.3,PRCATY,0),U,1) I (PRCATYPE=2)!(PRCATYPE=20),$P(^PRCA(433,PRCAEN,0),U,7)]"" W "(",$P(^(0),U,7),")"
"RTN","PRCADR2",25,0)
 S Y=PRCATD D DD^%DT S Y(1)=$P(Y,", ",2)
"RTN","PRCADR2",26,0)
 S PRCATD=$E(PRCATD,4,5)_"/"_$E(PRCATD,6,7)_"/"_Y(1)
"RTN","PRCADR2",27,0)
 ;  if a decrease adjustment, show as negative (patch 4.5*172)
"RTN","PRCADR2",28,0)
 I $P(PRCAG,"^",2)=35,$P(PRCAG,"^",5)>0 S $P(PRCAG,"^",5)=-$P(PRCAG,"^",5)
"RTN","PRCADR2",29,0)
 W ?42,PRCATD,?53,$J($P(PRCAG,U,5),11,2) W:+$P(PRCAGL0,U,4)<2 ?67,"INCOMPLETE"
"RTN","PRCADR2",30,0)
END2 K PRCAG,PRCATD,PRCATY,PRCATYPE,PRCAGL0
"RTN","PRCADR2",31,0)
 Q  ;end of WR2
"RTN","PRCADR2",32,0)
 ;
"RTN","PRCADR2",33,0)
 ;
"RTN","PRCADR2",34,0)
WR3 W !,?18,"BALANCES",?31,"PAID"
"RTN","PRCADR2",35,0)
 W !,?44,"LETTER1/ICD:",?58,PRCAL(1)
"RTN","PRCADR2",36,0)
 W !,"PRINCIPAL:",?16,$J(PRCAK("PB"),10,2),?26,$J(PRCAK("PP"),9,2),?44,"LETTER2:",?58,PRCAL(2)
"RTN","PRCADR2",37,0)
 W !,"INTEREST:",?16,$J(PRCAK("IB"),10,2),?26,$J(PRCAK("IP"),9,2),?44,"LETTER3:",?58,PRCAL(3)
"RTN","PRCADR2",38,0)
 W !,"ADMINISTRATIVE:",?16,$J(PRCAK("AB"),10,2),?26,$J(PRCAK("AP"),9,2),?44,"IRS LETTER:",?58,PRCAL(6)
"RTN","PRCADR2",39,0)
 W ! W:PRCAK("MF")>0 "MARSHAL FEE:",?16,$J(PRCAK("MF"),10,2),?26,$J(0,9,2) W ?44,PRCACODE_" REF.DATE:",?62,PRCAL(4)
"RTN","PRCADR2",40,0)
 W:PRCAK("CC")>0 !,"COURT COST:",?16,$J(PRCAK("CC"),10,2),?26,$J(0,9,2)
"RTN","PRCADR2",41,0)
 W !,"CURRENT:",?16,$J(PRCAK("PB")+PRCAK("IB")+PRCAK("AB")+PRCAK("MF")+PRCAK("CC"),10,2),?26,$J(PRCAK("PP")+PRCAK("AP")+PRCAK("IP"),9,2)
"RTN","PRCADR2",42,0)
 K PRCAL I $D(^PRCA(430,D0,6)) S PRCAL=^(6) I $P(PRCAL,"^",15)]"" W !!,"     Date forwarded to IRS: " S Y=$P(PRCAL,"^",15) D DD^%DT W Y
"RTN","PRCADR2",43,0)
 I $D(PRCAL),$P(PRCAL,"^",16)]"" W !,"Prin/Int/Admin IRS balance: " F X=16:1:18 W +$P(PRCAL,"^",X),"/"
"RTN","PRCADR2",44,0)
 K PRCAL I $G(^PRCA(430,D0,12)) S PRCAL=^(12) I $P(PRCAL,U)]"" W !!,"     Date forwarded to DMC: " S Y=$P(PRCAL,U) D DD^%DT W Y
"RTN","PRCADR2",45,0)
 I $D(PRCAL),$P(PRCAL,U,2)]"" W !,"Prin/Int/Admin DMC balance: " F X=2:1:4 W +$P(PRCAL,U,X),"/"
"RTN","PRCADR2",46,0)
 I $D(PRCAL),$P($G(^RCD(340,(+$P(^PRCA(430,D0,0),"^",9)),3)),"^",9)'="" W !,"Lesser Withhold Amt to DMC: ",$J($P(^(3),"^",9),0,2)
"RTN","PRCADR2",47,0)
 K PRCAL I $G(^PRCA(430,D0,14)) S PRCAL=^(14) I $P(PRCAL,U)]"" W !!,"Date forwarded to TOP: " S Y=$P(PRCAL,U) D DD^%DT W Y
"RTN","PRCADR2",48,0)
 I $D(PRCAL),$P($G(^RCD(340,(+$P(^PRCA(430,D0,0),"^",9)),6)),"^",6)'="" W !,"TOP Hold Date:  " S Y=$P(^(6),"^",6) D DD^%DT W Y
"RTN","PRCADR2",49,0)
END3 K PRCAL,PRCACODE,PRCALT,PRCAK,PRCAGL6,PRCAGL7 Q
"RTN","PRCAHIS")
0^7^B25570251^B25570603
"RTN","PRCAHIS",1,0)
PRCAHIS ;WASH-ISC@ALTOONA,PA/LDB-Transaction History Report ;9/27/93  4:32 PM
"RTN","PRCAHIS",2,0)
V ;;4.5;Accounts Receivable;**110,198,233**;Mar 20, 1995;Build 4
"RTN","PRCAHIS",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCAHIS",4,0)
 ;
"RTN","PRCAHIS",5,0)
EN ;Ask debtor and date range for transaction history
"RTN","PRCAHIS",6,0)
 K DIR S POP=0
"RTN","PRCAHIS",7,0)
 N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","PRCAHIS",8,0)
 S DIR(0)="PO^340:QEAMZ",DIR("A")="Select Patient ",DIR("?")="Enter a Patient name" D ^DIR
"RTN","PRCAHIS",9,0)
 I $D(DIRUT)!(Y="") G EXIT1
"RTN","PRCAHIS",10,0)
 I $P($G(^RCD(340,+Y,0)),U)'["DPT" W *7 G EN
"RTN","PRCAHIS",11,0)
 S DEB=+Y K DIR
"RTN","PRCAHIS",12,0)
 I '$D(^PRCA(433,"ATD",DEB)),'$D(^PRCA(430,"ATD",DEB)),'$D(^RC(341,"AD",DEB)) W !,"This patient has no activity." Q
"RTN","PRCAHIS",13,0)
 S BDATE=$O(^PRCA(433,"ATD",+DEB,0)),DIR(0)="DO" S:'BDATE BDATE=2910101
"RTN","PRCAHIS",14,0)
 S DIR("A")="History beginning",DIR("B")=$$FMTE^XLFDT(BDATE,"1D")
"RTN","PRCAHIS",15,0)
 S DIR("?")="The default date is either the last statement day or T-30, but any date may be entered."
"RTN","PRCAHIS",16,0)
 D ^DIR
"RTN","PRCAHIS",17,0)
 S:Y'="" BDATE=Y I $D(DIRUT)&'Y G EXIT1 Q
"RTN","PRCAHIS",18,0)
 K DIR,X,Y
"RTN","PRCAHIS",19,0)
 S DIR(0)="DO^"_BDATE_":DT"
"RTN","PRCAHIS",20,0)
 S DIR("A")="History ending",DIR("B")=$$FMTE^XLFDT(DT,"1D")
"RTN","PRCAHIS",21,0)
 D ^DIR S:Y="" Y=DT I $D(DIRUT)&'Y G EXIT1 Q
"RTN","PRCAHIS",22,0)
 S EDATE=Y
"RTN","PRCAHIS",23,0)
 K DIR
"RTN","PRCAHIS",24,0)
TYPE S DIC="^PRCA(430.3,",DIC(0)="QEMZ",DIC("S")="I +Y,(+Y<15!(""25^29^34^35^40^41^43^45^47""[(""^""_+Y_""^"")))"
"RTN","PRCAHIS",25,0)
 S Y=0 R !,"TRANSACTION TYPE: ALL//",X:DTIME I '$T!(X="^") Q
"RTN","PRCAHIS",26,0)
 I X]"",X'="ALL" D ^DIC
"RTN","PRCAHIS",27,0)
 I X["?" W !!,"Enter 'ALL' for all types of transactions in the AR TRANSACTION TYPE FILE",!,"including COMMENTS and STATEMENT DATES.",! G TYPE
"RTN","PRCAHIS",28,0)
 G:Y<0 EXIT1  S TYP=$S(+Y:+Y,1:X)
"RTN","PRCAHIS",29,0)
 I $P($G(^PRCA(430.3,+Y,0)),"^",3)>100 W !!,"This is STATUS. Enter a transaction type only." G TYPE
"RTN","PRCAHIS",30,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT1
"RTN","PRCAHIS",31,0)
 I $D(IO("Q")) D  Q
"RTN","PRCAHIS",32,0)
 .S ZTSAVE("DEB")="",ZTSAVE("BDATE")="",ZTSAVE("EDATE")="",ZTSAVE("TYP")="",ZTRTN="DQ^PRCAHIS",ZTDESC="Patient Transaction History Report"
"RTN","PRCAHIS",33,0)
 .D ^%ZTLOAD,^%ZISC,EXIT1 K ZTSAVE,ZTRTN Q
"RTN","PRCAHIS",34,0)
 ;
"RTN","PRCAHIS",35,0)
DQ ;Call to build array of payment transactions
"RTN","PRCAHIS",36,0)
 ;
"RTN","PRCAHIS",37,0)
 U IO
"RTN","PRCAHIS",38,0)
 D TRANS^PRCAHIS1
"RTN","PRCAHIS",39,0)
 I '$D(^TMP("PRCAGT",$J)) W !!,"This patient has no activity during this time period."
"RTN","PRCAHIS",40,0)
 I $D(^TMP("PRCAGT",$J)) D HDR,PRINT
"RTN","PRCAHIS",41,0)
 ;
"RTN","PRCAHIS",42,0)
EXIT1 K AMT,BDATE,BN,BN0,CAT,CATCARE,EDATE,EVNTT,DAT1,DAT2,DATE,DEB,DIC,DIR,DIWL,DIWF,DIWR,DIWT,DUOUT,DX,DY,EVNT,EVNTT,LINE,PG,PNODE,TBAL,TOTPRIN,TOTTRAN,TTYP,TYP,TN,TN0,X,Y,Z,ZTSK,^TMP("PRCAGT",$J),^UTILITY($J)
"RTN","PRCAHIS",43,0)
 I $D(DIRUT)!POP K DIRUT,POP Q
"RTN","PRCAHIS",44,0)
 ;end of routine
"RTN","PRCAHIS",45,0)
EXIT2 I $E(IOST,1,2)'="C-" W @IOF D ^%ZISC Q
"RTN","PRCAHIS",46,0)
 I $E(IOST,1,2)="C-" W ! D ENS^%ZISS S DY=IOM-1,DX=0 X IOXY D KILL^%ZISS K DIR,X,Y,^UTILITY($J) S DIR(0)="E" D ^DIR
"RTN","PRCAHIS",47,0)
 I $D(DIRUT) K DIRUT Q
"RTN","PRCAHIS",48,0)
 D ^%ZISC
"RTN","PRCAHIS",49,0)
 G EN
"RTN","PRCAHIS",50,0)
 ;
"RTN","PRCAHIS",51,0)
 ;
"RTN","PRCAHIS",52,0)
PRINT ;Print transactions
"RTN","PRCAHIS",53,0)
 K DIRUT
"RTN","PRCAHIS",54,0)
 S DATE=0 F  S DATE=$O(^TMP("PRCAGT",$J,DEB,DATE)) Q:'DATE  Q:$D(DIRUT)  D
"RTN","PRCAHIS",55,0)
 .S BN="" F  S BN=$O(^TMP("PRCAGT",$J,DEB,DATE,BN)) Q:BN=""!($D(DIRUT))  D SCRN D
"RTN","PRCAHIS",56,0)
 ..I $D(^TMP("PRCAGT",$J,DEB,DATE,0)) S (BN0,PNODE)=^(0) D
"RTN","PRCAHIS",57,0)
 ...W !,$$FMTE^XLFDT($P(DATE,".")),?16
"RTN","PRCAHIS",58,0)
 ...S TYP=$P(BN0,"^",2) W $S(TYP=1:"COMMENT",1:"PATIENT STATEMENT PRINTED") I TYP=1 S EVNT=$P(BN0,"^",3) D
"RTN","PRCAHIS",59,0)
 ....W:$D(^RC(341,+EVNT,4)) !,?16,$P(^(4),"^")
"RTN","PRCAHIS",60,0)
 ....I $O(^RC(341,+EVNT,2,0)) S EVNTT=0 F  S EVNTT=$O(^RC(341,+EVNT,2,EVNTT)) Q:'EVNTT  I $D(^(EVNTT,0)) S X=^(0) D  Q:$D(DIRUT)  D ^DIWW
"RTN","PRCAHIS",61,0)
 .....S DIWL=17,DIWF="WC63" D ^DIWP
"RTN","PRCAHIS",62,0)
 .....D SCRN
"RTN","PRCAHIS",63,0)
 ..Q:(BN=0)  S TN="" F  S TN=$O(^TMP("PRCAGT",$J,DEB,DATE,BN,TN)) Q:TN=""  Q:$D(DIRUT)  D SCRN D
"RTN","PRCAHIS",64,0)
 ...I 'TN,$D(^TMP("PRCAGT",$J,DEB,DATE,BN,0)) S PNODE=^(0),BN0=$G(^PRCA(430,+BN,0)) W !!,$$FMTE^XLFDT($P(DATE,".")) D
"RTN","PRCAHIS",65,0)
 ....S CAT=$P(BN0,"^",2),CAT=$S(CAT=24&$P(BN0,"^",16):$P(^PRCA(430.2,$P(BN0,"^",16),0),"^"),1:$P($G(^PRCA(430.2,+CAT,0)),"^"))
"RTN","PRCAHIS",66,0)
 ....W ?16,CAT," BILL",?56,$P($G(^PRCA(430,+BN,0)),"^"),?69,$J(+PNODE,10,2)
"RTN","PRCAHIS",67,0)
 ....W !,?16,$P($G(^PRCA(430.3,+$P(BN0,"^",8),0)),"^")
"RTN","PRCAHIS",68,0)
 ...I TN S PNODE=^TMP("PRCAGT",$J,DEB,DATE,BN,TN) W !!,$$FMTE^XLFDT(DATE,"1D"),?16 S TYP=$P($G(^PRCA(433,+TN,1)),"^",2),TTYP=$P($G(^PRCA(430.3,+TYP,0)),U) W TTYP D
"RTN","PRCAHIS",69,0)
 ....S CAT=$P($G(^PRCA(430,+BN,0)),"^",2),CAT=$P($G(^PRCA(430.2,+CAT,0)),"^")
"RTN","PRCAHIS",70,0)
 ....S CATCARE=$P($G(^PRCA(430,+BN,0)),"^",16),CATCARE=$P($G(^PRCA(430.2,+$P(^(0),"^",16),0)),"^")
"RTN","PRCAHIS",71,0)
 ...I TN W ?56,$P($G(^PRCA(430,+BN,0)),"^") W:+TYP'=45 ?69,$J(+PNODE,10,2)
"RTN","PRCAHIS",72,0)
 ...I TN W !?16,CAT W:CATCARE]"" !,?16,CATCARE
"RTN","PRCAHIS",73,0)
 ...I TN,(+TYP=45) D
"RTN","PRCAHIS",74,0)
 ....I $D(^PRCA(433,+TN,5)) W !?16,$P(^(5),"^",2)
"RTN","PRCAHIS",75,0)
 ....I $O(^PRCA(433,+TN,7,0)) S TN0=0 F  S TN0=$O(^PRCA(433,+TN,7,TN0)) Q:'TN0  I $D(^(TN0,0)) S X=^(0) D  Q:$D(DIRUT)  D ^DIWW
"RTN","PRCAHIS",76,0)
 .....S DIWL=17,DIWF="C63W" D ^DIWP
"RTN","PRCAHIS",77,0)
 ...D SCRN
"RTN","PRCAHIS",78,0)
 ..Q
"RTN","PRCAHIS",79,0)
 .Q
"RTN","PRCAHIS",80,0)
 Q
"RTN","PRCAHIS",81,0)
 ;
"RTN","PRCAHIS",82,0)
SCRN ;Check for screen
"RTN","PRCAHIS",83,0)
 N X,Y K DIR I ($Y+5)>IOSL D
"RTN","PRCAHIS",84,0)
 .I $E(IOST,1,2)="C-" S DIR(0)="E" D ^DIR Q:$D(DIRUT)
"RTN","PRCAHIS",85,0)
 .D HDR
"RTN","PRCAHIS",86,0)
 Q
"RTN","PRCAHIS",87,0)
 ;
"RTN","PRCAHIS",88,0)
HDR ;Heading for report
"RTN","PRCAHIS",89,0)
 S PG=PG+1
"RTN","PRCAHIS",90,0)
 W @IOF,!,?20,"Patient Transaction History Report",?70,"Page ",PG
"RTN","PRCAHIS",91,0)
 W !,?20,"-------------------------------------"
"RTN","PRCAHIS",92,0)
 W !!,?18,"For Patient: ",$$NAM^RCFN01(DEB),!,?25,"SSN : ",$$SSN^RCFN01(DEB)
"RTN","PRCAHIS",93,0)
 W !,?20,"For dates: ",$$FMTE^XLFDT(BDATE,"1D"),"-",$$FMTE^XLFDT(EDATE,"1D")
"RTN","PRCAHIS",94,0)
 W !!," DATE",?16,"ACTIVITY",?56,"BILL #",?73,"AMOUNT",!,LINE
"RTN","PRCASER1")
0^4^B15957526^B15539730
"RTN","PRCASER1",1,0)
PRCASER1 ;WASH-ISC@ALTOONA,PA/RGY-Accept transaction from billing engine ;9/8/93  2:21 PM
"RTN","PRCASER1",2,0)
V ;;4.5;Accounts Receivable;**48,104,165,233**;Mar 20, 1995;Build 4
"RTN","PRCASER1",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCASER1",4,0)
 NEW AMT,AMT1,PRCAERR,PRCABN,PRCADJ,X1,XMDUZ,XMSUB,XMTEXT,XMY,DEBT
"RTN","PRCASER1",5,0)
 I '$D(X) S PRCAERR="-1^PRCA020" G Q
"RTN","PRCASER1",6,0)
 I $O(^PRCA(430.3,"AC",+X,0))'?1N.N,$P($G(^PRCA(430.3,+X,0)),"^",3)'=21 S PRCAERR="-1^PRCA021" G Q
"RTN","PRCASER1",7,0)
 I +X'=21,$P($G(^PRCA(430.3,+X,0)),"^",3)'=21 S PRCAERR="-1^PRCA022" G Q
"RTN","PRCASER1",8,0)
 I $P(X,"^",2)'?.N.1".".2N S PRCAERR="-1^PRCA023" G Q
"RTN","PRCASER1",9,0)
 I $P(X,"^",2)'>0 S PRCAERR="-1^PRCA017" G Q
"RTN","PRCASER1",10,0)
 I $P(X,"^",3)="" S PRCAERR="-1^PRCA006" G Q
"RTN","PRCASER1",11,0)
 S PRCABN=$O(^PRCA(430,"B",$P(X,"^",3),0)) I $G(^PRCA(430,+PRCABN,0))="" S PRCAERR="-1^PRCA007" G Q
"RTN","PRCASER1",12,0)
 I '$D(^VA(200,+$P(X,"^",4),0)) S PRCAERR="-1^PRCA013" G Q
"RTN","PRCASER1",13,0)
 I $P(X,"^",5)'?7N S PRCAERR="-1^PRCA024" G Q
"RTN","PRCASER1",14,0)
 S (AMT1,AMT)=$P(X,"^",2)
"RTN","PRCASER1",15,0)
 D DEC(PRCABN,.AMT,$P(X,"^",4),$P(X,U,6),$P(X,U,5))
"RTN","PRCASER1",16,0)
 S XMDUZ="AR Package",XMTEXT="X1(",DEBT=$P($G(^PRCA(430,PRCABN,0)),"^",9),DEBT=$E($$NAM^RCFN01(DEBT),1)_" ("_$E($$SSN^RCFN01(DEBT),6,9)_")"
"RTN","PRCASER1",17,0)
 I AMT'=AMT1 S X1(1)="A decrease adjustment for bill/Pt name (SSN) #"_$P(X,"^",3)_"/"_DEBT_" has been",XMSUB="Automatic Adj: "_$P(X,"^",3)
"RTN","PRCASER1",18,0)
 I AMT=AMT1 S X1(1)="**** NOTICE: A decrease adjustment for bill/Pt name (SSN) #"_$P(X,U,3)_"/"_DEBT,XMSUB="Manual Adj: "_$P(X,U,3),X1(3)=" "
"RTN","PRCASER1",19,0)
 S Y=DT X ^DD("DD") S X1(2)=$S(AMT'=AMT1:"automatically",1:"needs to be manually")_" applied in the amount of $"_$J($S(AMT1=AMT:AMT1,1:AMT1-AMT),0,2)_" on "_Y_"."
"RTN","PRCASER1",20,0)
 I AMT,AMT'=AMT1 S X1(3)="Please review bill for proper application of the unapplied amount of $"_$J(AMT,0,2)_"."
"RTN","PRCASER1",21,0)
 S X1(4)=" ",X1(5)="Data sent from Service"
"RTN","PRCASER1",22,0)
 S X1(6)="        Amount: $"_$J(AMT1,0,2)
"RTN","PRCASER1",23,0)
 S Y=$P(X,U,5) X ^DD("DD") S X1(7)="          Date: "_Y
"RTN","PRCASER1",24,0)
 S X1(8)="        Reason: "_$S($P(X,"^",6)]"":$P(X,"^",6),1:"N/A")
"RTN","PRCASER1",25,0)
 S X1(9)=" Adjustment by: "_$P($G(^VA(200,+$P(X,"^",4),0)),"^")
"RTN","PRCASER1",26,0)
 S AMT=0 F X=1:1:5 S AMT=AMT+$P($G(^PRCA(430,PRCABN,7)),U,X)
"RTN","PRCASER1",27,0)
 S AMT1=AMT-+$G(^PRCA(430,PRCABN,7))
"RTN","PRCASER1",28,0)
 S X=$P(^PRCA(430.3,+$P($G(^PRCA(430,PRCABN,0)),U,8),0),U,1)
"RTN","PRCASER1",29,0)
 S X1(10)=" ",X1(12)=" ",X1(13)="Bill status is "_$S(XMSUB["Auto":"now ",1:"")_X_" with a balance of $"_$J(AMT,0,2)_".",X1(14)=" "
"RTN","PRCASER1",30,0)
 I AMT1>0 S X1(15)=" *WARNING*  There is outstanding administrative charges of $"_$J(AMT1,0,2)_".",X1(16)="            An adjustment of administrative charges MAY need to be done."
"RTN","PRCASER1",31,0)
 S XMY("G.PRCA ADJUSTMENT TRANS")=""
"RTN","PRCASER1",32,0)
 D ^XMD
"RTN","PRCASER1",33,0)
Q S Y=$S($D(PRCAERR):PRCAERR,1:0) Q
"RTN","PRCASER1",34,0)
TEST ;
"RTN","PRCASER1",35,0)
 S X="21^22^503-AA0007^5^2921206^RX RETURNED IN MAIL" D ^PRCASER1 W !,Y,!
"RTN","PRCASER1",36,0)
 Q
"RTN","PRCASER1",37,0)
DEC(PRCABN,AMT,APR,REA,BDT,PRCAEN) ;Auto decrease from service Bill#,Tran amt,person,reason,Tran date
"RTN","PRCASER1",38,0)
 NEW BAL,DA,DIC,DIE,DR,ERR,PRCA,PRCAA2,PRCAMT,PRCASV,X,Y
"RTN","PRCASER1",39,0)
 S PRCAEN="",BAL=+$G(^PRCA(430,PRCABN,7)) I 'BAL Q
"RTN","PRCASER1",40,0)
 I $P(^PRCA(430,PRCABN,0),U,8)'=$O(^PRCA(430.3,"AC",102,"")),$P(^PRCA(430,PRCABN,0),U,8)'=$O(^PRCA(430.3,"AC",112,"")) Q
"RTN","PRCASER1",41,0)
 I $P(^PRCA(430,PRCABN,0),U,2)=$O(^PRCA(430.2,"AC",33,0)) Q
"RTN","PRCASER1",42,0)
 S BAL=$S(AMT>BAL:BAL,1:AMT)
"RTN","PRCASER1",43,0)
 S PRCA("ADJ")=$O(^PRCA(430.3,"AC",21,0)),PRCASV("FY")=$$FY^RCFN01(DT)_U_BAL,PRCASV("APR")=APR,PRCASV("BDT")=$S($G(BDT)>0:BDT,1:DT)
"RTN","PRCASER1",44,0)
 D SETTR^PRCAUTL,PATTR^PRCAUTL S DIE="^PRCA(433,",DR="[PRCA FY ADJ2 BATCH]",DA=PRCAEN D ^DIE S PRCAA2=$P(^PRCA(433,PRCAEN,4,0),U,3) D UPFY^PRCADJ,TRANUP^PRCAUTL
"RTN","PRCASER1",45,0)
 I ("^30^31^")[("^"_$P($G(^PRCA(430,PRCABN,0)),"^",2)_"^") D EN^PRCAFBDM(PRCABN,BAL,PRCA("ADJ"),$G(PRCADJ("BDT")),PRCAEN,.ERR)
"RTN","PRCASER1",46,0)
 D UPPRIN^PRCADJ
"RTN","PRCASER1",47,0)
 I "AutoAUTO"'[$E(REA,1,4) S REA="Auto Dec.: "_REA
"RTN","PRCASER1",48,0)
 S DA=PRCAEN,DIE="^PRCA(433,",DR="41///"_REA D ^DIE
"RTN","PRCASER1",49,0)
 S AMT=AMT-+$P($G(^PRCA(433,PRCAEN,1)),U,5)
"RTN","PRCASER1",50,0)
 Q
"RTN","RCBEADJ")
0^3^B63961627^B63862769
"RTN","RCBEADJ",1,0)
RCBEADJ ;WISC/RFJ-adjustment ;1 Mar 2001
"RTN","RCBEADJ",2,0)
 ;;4.5;Accounts Receivable;**169,172,204,173,208,233**;Mar 20, 1995;Build 4
"RTN","RCBEADJ",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","RCBEADJ",4,0)
 Q
"RTN","RCBEADJ",5,0)
 ;
"RTN","RCBEADJ",6,0)
 ;
"RTN","RCBEADJ",7,0)
DECREASE ;  menu option: create a decrease adjustment
"RTN","RCBEADJ",8,0)
 D ADJUST("DECREASE")
"RTN","RCBEADJ",9,0)
 Q
"RTN","RCBEADJ",10,0)
 ;
"RTN","RCBEADJ",11,0)
 ;
"RTN","RCBEADJ",12,0)
INCREASE ;  menu option: create an increase adjustment
"RTN","RCBEADJ",13,0)
 D ADJUST("INCREASE")
"RTN","RCBEADJ",14,0)
 Q
"RTN","RCBEADJ",15,0)
 ;
"RTN","RCBEADJ",16,0)
ADJUST(RCBETYPE,RCEDI) ;  create an adjustment
"RTN","RCBEADJ",17,0)
 ;  rcbetype = INCREASE for increase or DECREASE for decrease
"RTN","RCBEADJ",18,0)
 ;  rcedi = the ien of the bill selected via the EDI Worklist;ien of 
"RTN","RCBEADJ",19,0)
 ;          the ERA entry or null/undefined if bill should be selected
"RTN","RCBEADJ",20,0)
 N RCBILLDA
"RTN","RCBEADJ",21,0)
 F  D  Q:RCBILLDA<0!$G(RCEDI)
"RTN","RCBEADJ",22,0)
 .   K RCTRANDA,RCLIST
"RTN","RCBEADJ",23,0)
 .   ;
"RTN","RCBEADJ",24,0)
 .   ;  select a bill
"RTN","RCBEADJ",25,0)
 .   S RCBILLDA=$S('$G(RCEDI):$$GETABILL^RCBEUBIL,1:+RCEDI)
"RTN","RCBEADJ",26,0)
 .   I RCBILLDA<1 Q
"RTN","RCBEADJ",27,0)
 .   ;
"RTN","RCBEADJ",28,0)
 .   ;  adjust the bill
"RTN","RCBEADJ",29,0)
 .   D ADJBILL(RCBETYPE,RCBILLDA,$P($G(RCEDI),";",2))
"RTN","RCBEADJ",30,0)
 Q
"RTN","RCBEADJ",31,0)
 ;
"RTN","RCBEADJ",32,0)
ADJBILL(RCBETYPE,RCBILLDA,RCEDIWL) ;  adjust a bill
"RTN","RCBEADJ",33,0)
 ; RCEDIWL = ien of ERA entry if called from worklist
"RTN","RCBEADJ",34,0)
 N RCAMOUNT,RCBALANC,RCDATA7,RCLIST,RCONTADJ,RCTRANDA,TOTALCAL,TOTALSTO,I,X,Y
"RTN","RCBEADJ",35,0)
 ;  lock the bill
"RTN","RCBEADJ",36,0)
 L +^PRCA(430,RCBILLDA):5 I '$T W !,"ANOTHER USER IS CURRENTLY WORKING WITH THIS BILL." Q
"RTN","RCBEADJ",37,0)
 ;
"RTN","RCBEADJ",38,0)
 ;  show data for the bill
"RTN","RCBEADJ",39,0)
 D SHOWBILL^RCWROFF1(RCBILLDA)
"RTN","RCBEADJ",40,0)
 ;
"RTN","RCBEADJ",41,0)
 ;  check the balance of the bill
"RTN","RCBEADJ",42,0)
 W !!,"Checking the bill's balance ..."
"RTN","RCBEADJ",43,0)
 S RCBALANC=$$OUTOFBAL^RCBDBBAL(RCBILLDA)
"RTN","RCBEADJ",44,0)
 I RCBALANC="" W " IN Balance!"
"RTN","RCBEADJ",45,0)
 ;
"RTN","RCBEADJ",46,0)
 ;  out of balance, ask to fix it
"RTN","RCBEADJ",47,0)
 I RCBALANC'="" D  I RCBILLDA<1 D UNLOCK Q
"RTN","RCBEADJ",48,0)
 .   S TOTALCAL=$P(RCBALANC,"^")+$P(RCBALANC,"^",2)+$P(RCBALANC,"^",3)+$P(RCBALANC,"^",4)+$P(RCBALANC,"^",5)
"RTN","RCBEADJ",49,0)
 .   S RCDATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEADJ",50,0)
 .   S TOTALSTO=$P(RCDATA7,"^")+$P(RCDATA7,"^",2)+$P(RCDATA7,"^",3)+$P(RCDATA7,"^",4)+$P(RCDATA7,"^",5)
"RTN","RCBEADJ",51,0)
 .   W " OUT of Balance!"
"RTN","RCBEADJ",52,0)
 .   W !!,"                  BALANCE:",$J("Calculated",12),$J("Stored",12)
"RTN","RCBEADJ",53,0)
 .   W !,"                  ------- ",$J("------------",12),$J("------------",12)
"RTN","RCBEADJ",54,0)
 .   W !,"        Principal Balance:",$J($P(RCBALANC,"^",1),12,2),$J($P(RCDATA7,"^",1),12,2)
"RTN","RCBEADJ",55,0)
 .   I +$P(RCBALANC,"^",1)'=+$P(RCDATA7,"^",1) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",56,0)
 .   W !,"         Interest Balance:",$J($P(RCBALANC,"^",2),12,2),$J($P(RCDATA7,"^",2),12,2)
"RTN","RCBEADJ",57,0)
 .   I +$P(RCBALANC,"^",2)'=+$P(RCDATA7,"^",2) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",58,0)
 .   W !,"            Admin Balance:",$J($P(RCBALANC,"^",3),12,2),$J($P(RCDATA7,"^",3),12,2)
"RTN","RCBEADJ",59,0)
 .   I +$P(RCBALANC,"^",3)'=+$P(RCDATA7,"^",3) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",60,0)
 .   W !,"               MF Balance:",$J($P(RCBALANC,"^",4),12,2),$J($P(RCDATA7,"^",4),12,2)
"RTN","RCBEADJ",61,0)
 .   I +$P(RCBALANC,"^",4)'=+$P(RCDATA7,"^",4) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",62,0)
 .   W !,"               CC Balance:",$J($P(RCBALANC,"^",5),12,2),$J($P(RCDATA7,"^",5),12,2)
"RTN","RCBEADJ",63,0)
 .   I +$P(RCBALANC,"^",5)'=+$P(RCDATA7,"^",5) W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",64,0)
 .   W !,"                  ------- ",$J("-------------",12),$J("-------------",12)
"RTN","RCBEADJ",65,0)
 .   W !,"                    TOTAL:",$J(TOTALCAL,12,2),$J(TOTALSTO,12,2)
"RTN","RCBEADJ",66,0)
 .   I +TOTALCAL'=+TOTALSTO W "  <<-- OUT OF BALANCE"
"RTN","RCBEADJ",67,0)
 .   ;
"RTN","RCBEADJ",68,0)
 .   ;  ask to fix the balances
"RTN","RCBEADJ",69,0)
 .   S Y=$$ASKFIX I Y'=1 W !,"  NOTE: You must fix the Balance Discrepancy before processing an adjustment!" S RCBILLDA=0 Q
"RTN","RCBEADJ",70,0)
 .   ;
"RTN","RCBEADJ",71,0)
 .   ;  fix it
"RTN","RCBEADJ",72,0)
 .   S $P(RCDATA7,"^",1)=+$P(RCBALANC,"^",1) ; principal
"RTN","RCBEADJ",73,0)
 .   S $P(RCDATA7,"^",2)=+$P(RCBALANC,"^",2) ; interest
"RTN","RCBEADJ",74,0)
 .   S $P(RCDATA7,"^",3)=+$P(RCBALANC,"^",3) ; admin
"RTN","RCBEADJ",75,0)
 .   S $P(RCDATA7,"^",4)=+$P(RCBALANC,"^",4) ; marshal fee
"RTN","RCBEADJ",76,0)
 .   S $P(RCDATA7,"^",5)=+$P(RCBALANC,"^",5) ; court cost
"RTN","RCBEADJ",77,0)
 .   S $P(^PRCA(430,RCBILLDA,7),"^",1,5)=$P(RCDATA7,"^",1,5)
"RTN","RCBEADJ",78,0)
 .   ;
"RTN","RCBEADJ",79,0)
 .   W !,"  Balance Discrepancy FIXED!"
"RTN","RCBEADJ",80,0)
 ;
"RTN","RCBEADJ",81,0)
 ;  if the principal balance is zero, do not allow it to be adjusted
"RTN","RCBEADJ",82,0)
 ;  ask to close/cancel it
"RTN","RCBEADJ",83,0)
 I RCBETYPE="DECREASE",'$G(^PRCA(430,RCBILLDA,7)) W !!,"Note: This bill has NO PRINCIPAL BALANCE to decrease !" D INTADMIN(RCBILLDA),UNLOCK Q
"RTN","RCBEADJ",84,0)
 ;
"RTN","RCBEADJ",85,0)
 ; if entry is from EDI Lockbox worklist, display total adjusments in ERA
"RTN","RCBEADJ",86,0)
 I $G(RCEDIWL) D
"RTN","RCBEADJ",87,0)
 . N X,Y,Z,Z0,Z1
"RTN","RCBEADJ",88,0)
 . S Z0=$J(+$P($$BILL^RCJIBFN2(RCBILLDA),U,3),"",2),Y=0
"RTN","RCBEADJ",89,0)
 . S Z=0 F  S Z=$O(^TMP("RC_BILL",$J,RCBILLDA,Z)) Q:'Z  D
"RTN","RCBEADJ",90,0)
 .. S X=+$P($G(^TMP("RCDPE-EOB_WLDX",$J,Z)),U,2)
"RTN","RCBEADJ",91,0)
 .. Q:'X
"RTN","RCBEADJ",92,0)
 .. S Y=Y+$P($G(^RCY(344.49,RCEDIWL,1,X,0)),U,6)
"RTN","RCBEADJ",93,0)
 . Q:'Y
"RTN","RCBEADJ",94,0)
 . W !,"          TOTAL PAYMENT(s) TO POST FROM THIS ERA: ",$J(Y,"",2)
"RTN","RCBEADJ",95,0)
 . W !,"EXPECTED CLAIM ADJUSTMENT IF ALL POST SUCCESSFUL: ",$J($G(^PRCA(430,RCBILLDA,7))-Y,"",2)
"RTN","RCBEADJ",96,0)
 ;
"RTN","RCBEADJ",97,0)
 ;  ask to enter adjustment amount
"RTN","RCBEADJ",98,0)
 S RCAMOUNT=$$AMOUNT(RCBILLDA,RCBETYPE)
"RTN","RCBEADJ",99,0)
 I RCAMOUNT<0 D UNLOCK Q
"RTN","RCBEADJ",100,0)
 ;
"RTN","RCBEADJ",101,0)
 ;  if decrease, make negative
"RTN","RCBEADJ",102,0)
 I RCBETYPE="DECREASE" S RCAMOUNT=-RCAMOUNT
"RTN","RCBEADJ",103,0)
 ;
"RTN","RCBEADJ",104,0)
 ;  ask if it is a contract adjustment
"RTN","RCBEADJ",105,0)
 I RCBETYPE="DECREASE","^9^28^29^30^32^"[("^"_$P($G(^PRCA(430,RCBILLDA,0)),"^",2)_"^") S RCONTADJ=$$ASKCONT I RCONTADJ<0 D UNLOCK Q
"RTN","RCBEADJ",106,0)
 ;
"RTN","RCBEADJ",107,0)
 ;  show what the new transaction will look like
"RTN","RCBEADJ",108,0)
 S RCDATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEADJ",109,0)
 W !!,"If you process the transaction, the bill will look like:"
"RTN","RCBEADJ",110,0)
 W !,"Current Principal Balance: ",$J($P(RCDATA7,"^"),11,2)
"RTN","RCBEADJ",111,0)
 W !,"  NEW ",RCBETYPE," Adjustment: ",$J(RCAMOUNT,11,2)
"RTN","RCBEADJ",112,0)
 W !,"                           -----------"
"RTN","RCBEADJ",113,0)
 W !,"    NEW Principal Balance: ",$J($P(RCDATA7,"^")+RCAMOUNT,11,2)
"RTN","RCBEADJ",114,0)
 ;
"RTN","RCBEADJ",115,0)
 ;  ask to enter transaction
"RTN","RCBEADJ",116,0)
 S Y=$$ASKOK(RCBETYPE) I Y'=1 D UNLOCK Q
"RTN","RCBEADJ",117,0)
 ;
"RTN","RCBEADJ",118,0)
 ;  add adjustment
"RTN","RCBEADJ",119,0)
 S RCTRANDA=$$INCDEC^RCBEUTR1(RCBILLDA,RCAMOUNT,"","","",$G(RCONTADJ))
"RTN","RCBEADJ",120,0)
 I 'RCTRANDA W !,"  *** W A R N I N G: Adjustment NOT Processed! ***" D UNLOCK Q
"RTN","RCBEADJ",121,0)
 I RCTRANDA W !,"  Adjustment Transaction: ",RCTRANDA," has been added."
"RTN","RCBEADJ",122,0)
 I '$G(REFMS)&(DT>$$LDATE^RCRJR(DT)) S Y=$E($$FPS^RCAMFN01(DT,1),1,5)_"01" D DD^%DT W !!,"   * * * * Transmission will be held until "_Y_" * * * *"
"RTN","RCBEADJ",123,0)
 ;
"RTN","RCBEADJ",124,0)
 ;  ask to enter a comment
"RTN","RCBEADJ",125,0)
 W !!,"Enter a comment for the ",RCBETYPE," Adjustment:"
"RTN","RCBEADJ",126,0)
 S Y=$$EDIT433^RCBEUTRA(RCTRANDA,"41;")
"RTN","RCBEADJ",127,0)
 ;
"RTN","RCBEADJ",128,0)
 ;  ask to exempt interest and admin charges
"RTN","RCBEADJ",129,0)
 I RCBETYPE="DECREASE" D INTADMIN(RCBILLDA)
"RTN","RCBEADJ",130,0)
 ;
"RTN","RCBEADJ",131,0)
 ;  notification of subsequent payer bulletin
"RTN","RCBEADJ",132,0)
 S RCDATA7=$G(^PRCA(430,RCBILLDA,7)),X=0
"RTN","RCBEADJ",133,0)
 F I=1:1:5 S X=X+$P(RCDATA7,"^",I)
"RTN","RCBEADJ",134,0)
 I RCDATA7'="",'X D
"RTN","RCBEADJ",135,0)
 .   N PRCABN,PRCAEN,PRCAMT
"RTN","RCBEADJ",136,0)
 .   S PRCABN=RCBILLDA,PRCAEN=RCTRANDA,PRCAMT=+$P($G(^PRCA(433,RCTRANDA,1)),"^",5)
"RTN","RCBEADJ",137,0)
 .   D EOB^PRCADJ
"RTN","RCBEADJ",138,0)
 ;
"RTN","RCBEADJ",139,0)
 ;  unlock and ask the next bill to adjust
"RTN","RCBEADJ",140,0)
 D UNLOCK
"RTN","RCBEADJ",141,0)
 Q
"RTN","RCBEADJ",142,0)
 ;
"RTN","RCBEADJ",143,0)
 ;
"RTN","RCBEADJ",144,0)
UNLOCK ;  unlock bill and transaction
"RTN","RCBEADJ",145,0)
 L -^PRCA(430,RCBILLDA)
"RTN","RCBEADJ",146,0)
 I $G(RCTRANDA) L -^PRCA(433,RCTRANDA)
"RTN","RCBEADJ",147,0)
 Q
"RTN","RCBEADJ",148,0)
 ;
"RTN","RCBEADJ",149,0)
 ;
"RTN","RCBEADJ",150,0)
INTADMIN(RCBILLDA) ;  ask and adjust the interest and admin
"RTN","RCBEADJ",151,0)
 N RCAMOUNT,RCTRANDA,Y
"RTN","RCBEADJ",152,0)
 ;
"RTN","RCBEADJ",153,0)
 ;  check to see if there is interest and admin charges
"RTN","RCBEADJ",154,0)
 S RCAMOUNT=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCBEADJ",155,0)
 I '$P(RCAMOUNT,"^",2),'$P(RCAMOUNT,"^",3),'$P(RCAMOUNT,"^",4),'$P(RCAMOUNT,"^",5) Q
"RTN","RCBEADJ",156,0)
 ;
"RTN","RCBEADJ",157,0)
 ;  only ask if there is no principal
"RTN","RCBEADJ",158,0)
 I RCAMOUNT Q
"RTN","RCBEADJ",159,0)
 ;
"RTN","RCBEADJ",160,0)
 W !!,"You have the option to automatically EXEMPT the interest"
"RTN","RCBEADJ",161,0)
 W !,"and administrative charges.  This will close the bill."
"RTN","RCBEADJ",162,0)
 S Y=$$ASKEXEMP I Y'=1 Q
"RTN","RCBEADJ",163,0)
 ;
"RTN","RCBEADJ",164,0)
 W !!,"Creating an EXEMPT transaction ..."
"RTN","RCBEADJ",165,0)
 S RCTRANDA=$$EXEMPT^RCBEUTR2(RCBILLDA,$P(RCAMOUNT,"^",2)_"^"_$P(RCAMOUNT,"^",3)_"^^"_$P(RCAMOUNT,"^",4)_"^"_$P(RCAMOUNT,"^",5))
"RTN","RCBEADJ",166,0)
 I 'RCTRANDA W !,"  *** W A R N I N G: EXEMPTION NOT Processed! ***" Q
"RTN","RCBEADJ",167,0)
 I RCTRANDA W !,"   Exempt Transaction: ",RCTRANDA," has been added."
"RTN","RCBEADJ",168,0)
 ;
"RTN","RCBEADJ",169,0)
 W !,"  Current Bill Status: ",$P($G(^PRCA(430.3,+$P($G(^PRCA(430,RCBILLDA,0)),"^",8),0)),"^")
"RTN","RCBEADJ",170,0)
 Q
"RTN","RCBEADJ",171,0)
 ;
"RTN","RCBEADJ",172,0)
ASKOK(RCBETYPE) ;  ask record decrease or increase transaction
"RTN","RCBEADJ",173,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",174,0)
 S DIR(0)="YO",DIR("B")="YES"
"RTN","RCBEADJ",175,0)
 S DIR("A")="Are you sure you want to enter this "_RCBETYPE_" adjustment "
"RTN","RCBEADJ",176,0)
 W ! D ^DIR
"RTN","RCBEADJ",177,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCBEADJ",178,0)
 Q Y
"RTN","RCBEADJ",179,0)
 ;
"RTN","RCBEADJ",180,0)
 ;
"RTN","RCBEADJ",181,0)
ASKFIX() ;  ask to fix bill's balance
"RTN","RCBEADJ",182,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",183,0)
 S DIR(0)="YO",DIR("B")="YES"
"RTN","RCBEADJ",184,0)
 S DIR("A")="  Do you want to FIX the balance discrepancy "
"RTN","RCBEADJ",185,0)
 W ! D ^DIR
"RTN","RCBEADJ",186,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCBEADJ",187,0)
 Q Y
"RTN","RCBEADJ",188,0)
 ;
"RTN","RCBEADJ",189,0)
 ;
"RTN","RCBEADJ",190,0)
ASKEXEMP() ;  ask to record an exempt transaction
"RTN","RCBEADJ",191,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",192,0)
 S DIR(0)="YO",DIR("B")="NO"
"RTN","RCBEADJ",193,0)
 S DIR("A")="  Would you like to EXEMPT the interest and admin charges "
"RTN","RCBEADJ",194,0)
 D ^DIR
"RTN","RCBEADJ",195,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCBEADJ",196,0)
 Q Y
"RTN","RCBEADJ",197,0)
 ;
"RTN","RCBEADJ",198,0)
 ;
"RTN","RCBEADJ",199,0)
ASKCONT() ;  ask if contract adjustment
"RTN","RCBEADJ",200,0)
 N DIR,DIQ2,DIRUT,DTOUT,DUOUT,X,Y
"RTN","RCBEADJ",201,0)
 S DIR(0)="YO",DIR("B")="YES"
"RTN","RCBEADJ",202,0)
 S DIR("A")="  Is this a CONTRACT adjustment "
"RTN","RCBEADJ",203,0)
 W ! D ^DIR
"RTN","RCBEADJ",204,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCBEADJ",205,0)
 Q Y
"RTN","RCBEADJ",206,0)
 ;
"RTN","RCBEADJ",207,0)
 ;
"RTN","RCBEADJ",208,0)
ADJNUM(RCBILLDA) ;  get next adjustment number for a bill
"RTN","RCBEADJ",209,0)
 N %,ADJUST,DATA1,RCTRANDA
"RTN","RCBEADJ",210,0)
 S RCTRANDA=0
"RTN","RCBEADJ",211,0)
 F  S RCTRANDA=$O(^PRCA(433,"C",RCBILLDA,RCTRANDA)) Q:'RCTRANDA  S DATA1=$G(^PRCA(433,RCTRANDA,1)) I $P(DATA1,"^",4),$P(DATA1,"^",2)=1!($P(DATA1,"^",2)=35) S ADJUST=$P(DATA1,"^",4)+1
"RTN","RCBEADJ",212,0)
 Q ADJUST
"RTN","RCBEADJ",213,0)
 ;
"RTN","RCBEADJ",214,0)
 ;
"RTN","RCBEADJ",215,0)
AMOUNT(RCBILLDA,RCBETYPE) ;  enter the adjustment amount for a bill
"RTN","RCBEADJ",216,0)
 N DIR,DIRUT,DTOUT,DUOUT,PRINBAL,X,Y
"RTN","RCBEADJ",217,0)
 S PRINBAL=+$P($G(^PRCA(430,RCBILLDA,7)),"^")
"RTN","RCBEADJ",218,0)
 I RCBETYPE="INCREASE" S PRINBAL=9999999.99
"RTN","RCBEADJ",219,0)
 W !!,"Enter the ",RCBETYPE," Adjustment AMOUNT, from .01 to ",$J(PRINBAL,0,2),"."
"RTN","RCBEADJ",220,0)
 S DIR(0)="NAO^.01:"_PRINBAL_":2"
"RTN","RCBEADJ",221,0)
 S DIR("A")="  "_RCBETYPE_" PRINCIPAL BALANCE BY: "
"RTN","RCBEADJ",222,0)
 D ^DIR
"RTN","RCBEADJ",223,0)
 I $G(DTOUT)!($G(DUOUT)) S Y=-1
"RTN","RCBEADJ",224,0)
 Q $S(Y'="":Y,1:-1)
"RTN","RCWROFF1")
0^5^B33354440^B33308622
"RTN","RCWROFF1",1,0)
RCWROFF1 ;WISC/RFJ-partial waiver ;1 Feb 2000
"RTN","RCWROFF1",2,0)
 ;;4.5;Accounts Receivable;**168,204,233**;Mar 20, 1995;Build 4
"RTN","RCWROFF1",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","RCWROFF1",4,0)
 Q
"RTN","RCWROFF1",5,0)
 ;
"RTN","RCWROFF1",6,0)
 ;
"RTN","RCWROFF1",7,0)
PARTIAL ;  enter a partial waived (menu option)
"RTN","RCWROFF1",8,0)
 N DR,RCBILLDA,RCCURPRI,RCFYCNT,RCTOTAL,RCTRANDA,RCWAIVED,Y
"RTN","RCWROFF1",9,0)
 F  D  Q:RCBILLDA<1
"RTN","RCWROFF1",10,0)
 .   K RCTRANDA  ;do not leave around in for loop
"RTN","RCWROFF1",11,0)
 .   ;  select a bill
"RTN","RCWROFF1",12,0)
 .   S RCBILLDA=$$GETABILL^RCBEUBIL I RCBILLDA<1 Q
"RTN","RCWROFF1",13,0)
 .   ;  lock the bill
"RTN","RCWROFF1",14,0)
 .   L +^PRCA(430,RCBILLDA):5 I '$T W !,"ANOTHER USER IS CURRENTLY WORKING WITH THIS BILL." Q
"RTN","RCWROFF1",15,0)
 .   D SHOWBILL(RCBILLDA)
"RTN","RCWROFF1",16,0)
 .   I '$G(^PRCA(430,RCBILLDA,7)) W !,"THIS BILL HAS NO PRINCIPAL BALANCE." D UNLOCK^RCWROFF Q
"RTN","RCWROFF1",17,0)
 .   W !
"RTN","RCWROFF1",18,0)
 .   ;  add a new partial waiver transaction to file 433
"RTN","RCWROFF1",19,0)
 .   S RCTRANDA=$$ADD433^RCBEUTRA(RCBILLDA,11) I 'RCTRANDA W !,$P(RCTRANDA,"^",2) D UNLOCK^RCWROFF Q
"RTN","RCWROFF1",20,0)
 .   W !,"  Transaction number ",RCTRANDA," added ..."
"RTN","RCWROFF1",21,0)
 .   ;  transfer fy multiple from bill
"RTN","RCWROFF1",22,0)
 .   D FY433^RCBEUTRA(RCTRANDA)
"RTN","RCWROFF1",23,0)
 .   ;
"RTN","RCWROFF1",24,0)
 .   ;  build dr string for call to die
"RTN","RCWROFF1",25,0)
 .   S DR="11WAIVED IN PART DATE;"
"RTN","RCWROFF1",26,0)
 .   ;  determine if there is more than one fiscal year for build DR string
"RTN","RCWROFF1",27,0)
 .   S RCFYCNT=$P($G(^PRCA(433,RCTRANDA,4,0)),"^",4)
"RTN","RCWROFF1",28,0)
 .   ;  single fiscal year in multiple
"RTN","RCWROFF1",29,0)
 .   I RCFYCNT'>1 D
"RTN","RCWROFF1",30,0)
 .   .   ;  get the current principal balance
"RTN","RCWROFF1",31,0)
 .   .   S RCCURPRI=+$P($G(^PRCA(433,RCTRANDA,4,+$O(^PRCA(433,RCTRANDA,4,0)),0)),"^",2)
"RTN","RCWROFF1",32,0)
 .   .   S DR=DR_"15WAIVED AMOUNT;"
"RTN","RCWROFF1",33,0)
 .   .   S DR=DR_"S RCWAIVED=+X;"
"RTN","RCWROFF1",34,0)
 .   .   S DR=DR_"I RCWAIVED'>0 W !,""Amount must be greater than ZERO.  Press ^ to exit."" S Y=15;"
"RTN","RCWROFF1",35,0)
 .   .   S DR=DR_"I RCWAIVED>RCCURPRI W !,""Waived amount CAN NOT EXCEED Principal amount ($ "",$J(RCCURPRI,0,2),"")."" S Y=15;"
"RTN","RCWROFF1",36,0)
 .   .   S DR=DR_"I RCWAIVED=RCCURPRI W !,""If you are creating a waiver for the FULL AMOUNT, use the option Full Waiver."" S Y=15;"
"RTN","RCWROFF1",37,0)
 .   .   S DR=DR_"81///^S X=RCWAIVED;"
"RTN","RCWROFF1",38,0)
 .   ;  multiple fiscal years in multiple
"RTN","RCWROFF1",39,0)
 .   I RCFYCNT>1 D
"RTN","RCWROFF1",40,0)
 .   .   S DR=DR_"S RCTOTAL=0;"
"RTN","RCWROFF1",41,0)
 .   .   S DR=DR_".02;"
"RTN","RCWROFF1",42,0)
 .   .   S DR(2,433.01)="4WAIVED AMOUNT;"
"RTN","RCWROFF1",43,0)
 .   .   S DR(2,433.01)=DR(2,433.01)_"S RCWAIVED=+X,RCCURPRI=+$P(^PRCA(433,DA(1),4,DA,0),U,2);"
"RTN","RCWROFF1",44,0)
 .   .   S DR(2,433.01)=DR(2,433.01)_"I RCWAIVED>RCCURPRI W !,""Waived amount CAN NOT EXCEED Principal Amount ($ "",$J(RCCURPRI,0,2),"") for this Fiscal Year."" S Y=4;"
"RTN","RCWROFF1",45,0)
 .   .   S DR(2,433.01,1)="I RCWAIVED=RCCURPRI W !,""If you are creating a waiver for the FULL AMOUNT, use the option Full Waiver."" S Y=4;"
"RTN","RCWROFF1",46,0)
 .   .   S DR(2,433.01,1)=DR(2,433.01,1)_"1///^S X=$P(^PRCA(433,DA(1),4,DA,0),U,2)-RCWAIVED;"
"RTN","RCWROFF1",47,0)
 .   .   S DR(2,433.01,1)=DR(2,433.01,1)_"S RCTOTAL=$G(RCTOTAL)+RCWAIVED;"
"RTN","RCWROFF1",48,0)
 .   .   S DR=DR_"I RCTOTAL'>0 W !,""Amount must be greater than ZERO.  Press ^ to exit."" S Y=.02;"
"RTN","RCWROFF1",49,0)
 .   .   S DR=DR_"15///^S X=RCTOTAL;"
"RTN","RCWROFF1",50,0)
 .   .   S DR=DR_"81///^S X=RCTOTAL;"
"RTN","RCWROFF1",51,0)
 .   ;
"RTN","RCWROFF1",52,0)
 .   ;  allow user to edit key fields
"RTN","RCWROFF1",53,0)
 .   S Y=$$EDIT433^RCBEUTRA(RCTRANDA,.DR)
"RTN","RCWROFF1",54,0)
 .   I 'Y W !,$P(Y,"^",2) D DEL433^RCBEUTRA(RCTRANDA,"",0),UNLOCK^RCWROFF Q
"RTN","RCWROFF1",55,0)
 .   ;
"RTN","RCWROFF1",56,0)
 .   ;  if only one fiscal year, update the multiple since it was not done
"RTN","RCWROFF1",57,0)
 .   ;  by the user in the die call
"RTN","RCWROFF1",58,0)
 .   I RCFYCNT=1 D
"RTN","RCWROFF1",59,0)
 .   .   N DA40,DATA40,RCTOTAL
"RTN","RCWROFF1",60,0)
 .   .   S RCTOTAL=$P($G(^PRCA(433,RCTRANDA,8)),"^")  ;amount waived
"RTN","RCWROFF1",61,0)
 .   .   S DA40=+$O(^PRCA(433,RCTRANDA,4,0)) I 'DA40 Q
"RTN","RCWROFF1",62,0)
 .   .   S DATA40=$G(^PRCA(433,RCTRANDA,4,DA40,0)) I DATA40="" Q
"RTN","RCWROFF1",63,0)
 .   .   S $P(DATA40,"^",2)=$P(DATA40,"^",2)-RCTOTAL  ;principal remaining
"RTN","RCWROFF1",64,0)
 .   .   S $P(DATA40,"^",5)=RCTOTAL                   ;amount waived
"RTN","RCWROFF1",65,0)
 .   .   S ^PRCA(433,RCTRANDA,4,DA40,0)=DATA40
"RTN","RCWROFF1",66,0)
 .   ;
"RTN","RCWROFF1",67,0)
 .   D SHOWTRAN(RCTRANDA)
"RTN","RCWROFF1",68,0)
 .   I $$ASKOK^RCWROFF("Partial Waiver")'=1 D DEL433^RCBEUTRA(RCTRANDA,"",0),UNLOCK^RCWROFF Q
"RTN","RCWROFF1",69,0)
 .   ;
"RTN","RCWROFF1",70,0)
 .   ;  move the fy multiple from 433 to 430
"RTN","RCWROFF1",71,0)
 .   D FYMULT^RCBEUBIL(RCTRANDA)
"RTN","RCWROFF1",72,0)
 .   ;  mark transaction as processed
"RTN","RCWROFF1",73,0)
 .   D PROCESS^RCBEUTRA(RCTRANDA)
"RTN","RCWROFF1",74,0)
 .   ;  update the principal balance on the bill (subtract the waived amount)
"RTN","RCWROFF1",75,0)
 .   D SETBAL^RCBEUBIL(RCTRANDA)
"RTN","RCWROFF1",76,0)
 .   ;  create fms write off document, if not accrued
"RTN","RCWROFF1",77,0)
 .   I '$$ACCK^PRCAACC(RCBILLDA) D FMSDOC^RCWROFF(RCTRANDA)
"RTN","RCWROFF1",78,0)
 .   ;
"RTN","RCWROFF1",79,0)
 .   W !,"  * * * * * Partial Waiver has been PROCESSED! * * * * *"
"RTN","RCWROFF1",80,0)
 .I '$G(REFMS)&(DT>$$LDATE^RCRJR(DT)) S Y=$E($$FPS^RCAMFN01(DT,1),1,5)_"01" D DD^%DT W !!,"   * * * * Transmission will be held until "_Y_" * * * *"
"RTN","RCWROFF1",81,0)
 .   D UNLOCK^RCWROFF
"RTN","RCWROFF1",82,0)
 Q
"RTN","RCWROFF1",83,0)
 ;
"RTN","RCWROFF1",84,0)
 ;
"RTN","RCWROFF1",85,0)
SHOWTRAN(RCTRANDA) ;  show data for transaction
"RTN","RCWROFF1",86,0)
 N %,DATA0,DATA1,DATA40,RCWRLINE,Y
"RTN","RCWROFF1",87,0)
 S DATA0=$G(^PRCA(433,RCTRANDA,0))
"RTN","RCWROFF1",88,0)
 S DATA1=$G(^PRCA(433,RCTRANDA,1))
"RTN","RCWROFF1",89,0)
 S RCWRLINE="",$P(RCWRLINE,"=",79)=""
"RTN","RCWROFF1",90,0)
 W !!,RCWRLINE
"RTN","RCWROFF1",91,0)
 W !,"BILL NUMBER: ",$P($G(^PRCA(430,+$P(DATA0,"^",2),0)),"^")
"RTN","RCWROFF1",92,0)
 W ?40,"WAIVED AMOUNT: ",$J($P(DATA1,"^",5),0,2)
"RTN","RCWROFF1",93,0)
 S Y=$P($P(DATA1,"^"),".") I Y D DD^%DT
"RTN","RCWROFF1",94,0)
 W !?42,"WAIVED DATE: ",Y
"RTN","RCWROFF1",95,0)
 W !!,"FISCAL YEAR",?30,"WAIVED AMOUNT",?50,"NEW PRINCIPAL BALANCE DUE"
"RTN","RCWROFF1",96,0)
 S %=0 F  S %=$O(^PRCA(433,RCTRANDA,4,%)) Q:'%  D
"RTN","RCWROFF1",97,0)
 .   S DATA40=$G(^PRCA(433,RCTRANDA,4,%,0))
"RTN","RCWROFF1",98,0)
 .   W !,$P(DATA40,"^"),?30,$J($P(DATA40,"^",5),13,2),?50,$J($P(DATA40,"^",2),25,2)
"RTN","RCWROFF1",99,0)
 W !!,RCWRLINE
"RTN","RCWROFF1",100,0)
 Q
"RTN","RCWROFF1",101,0)
 ;
"RTN","RCWROFF1",102,0)
 ;
"RTN","RCWROFF1",103,0)
SHOWBILL(RCBILLDA) ;  show data for bill
"RTN","RCWROFF1",104,0)
 N DATA7,DATA20,FYDA
"RTN","RCWROFF1",105,0)
 S DATA7=$G(^PRCA(430,RCBILLDA,7))
"RTN","RCWROFF1",106,0)
 W !?8,"Principal Balance: ",$J($P(DATA7,"^"),11,2)
"RTN","RCWROFF1",107,0)
 ;
"RTN","RCWROFF1",108,0)
 ;  show fy data
"RTN","RCWROFF1",109,0)
 S FYDA=$O(^PRCA(430,RCBILLDA,2,0)),DATA20=$G(^PRCA(430,RCBILLDA,2,FYDA,0))
"RTN","RCWROFF1",110,0)
 W ?40,"FY: ",$P(DATA20,"^"),?48,"Principal Balance: ",$J($P(DATA20,"^",2),0,2)
"RTN","RCWROFF1",111,0)
 ;  if multiple fiscal years, show them here
"RTN","RCWROFF1",112,0)
 F  S FYDA=$O(^PRCA(430,RCBILLDA,2,FYDA)) Q:'FYDA  D
"RTN","RCWROFF1",113,0)
 .   S DATA20=$G(^PRCA(430,RCBILLDA,2,FYDA,0))
"RTN","RCWROFF1",114,0)
 .   W !?40,"FY: ",$P(DATA20,"^"),?48,"Principal Balance: ",$J($P(DATA20,"^",2),0,2)
"RTN","RCWROFF1",115,0)
 ;
"RTN","RCWROFF1",116,0)
 W !?8," Interest Balance: ",$J($P(DATA7,"^",2),11,2)
"RTN","RCWROFF1",117,0)
 W !?8,"    Admin Balance: ",$J($P(DATA7,"^",3)+$P(DATA7,"^",4)+$P(DATA7,"^",5),11,2)
"RTN","RCWROFF1",118,0)
 W !?27,"-----------"
"RTN","RCWROFF1",119,0)
 W !?8,"    TOTAL Balance: ",$J($P(DATA7,"^")+$P(DATA7,"^",2)+$P(DATA7,"^",3)+$P(DATA7,"^",4)+$P(DATA7,"^",5),11,2)
"RTN","RCWROFF1",120,0)
 Q
"UP",430,430.01,-1)
430^2
"UP",430,430.01,0)
430.01
"UP",430,430.02,-1)
430^101
"UP",430,430.02,0)
430.02
"VER")
8.0^22.0
"^DD",430,430.01,7,0)
FY ORIGINAL AMOUNT^RNJ12,2^^0;8^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>999999999.99)!(X<0) X
"^DD",430,430.01,7,1,0)
^.1
"^DD",430,430.01,7,1,1,0)
^^TRIGGER^430.01^1
"^DD",430,430.01,7,1,1,1)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(1)=$S($D(^PRCA(430,D0,2,D1,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=DIU+DIV X ^DD(430.01,7,1,1,1.4)
"^DD",430,430.01,7,1,1,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(1)=$S($D(^PRCA(430,D0,2,D1,0)):^(0),1:"") S X=$P(Y(1),U,2)=""
"^DD",430,430.01,7,1,1,1.4)
S DIH=$S($D(^PRCA(430,DIV(0),2,DIV(1),0)):^(0),1:""),DIV=X S $P(^(0),U,2)=DIV,DIH=430.01,DIG=1 D ^DICR:$O(^DD(DIH,DIG,1,0))
"^DD",430,430.01,7,1,1,2)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(1)=$S($D(^PRCA(430,D0,2,D1,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y X ^DD(430.01,7,1,1,2.1) X ^DD(430.01,7,1,1,2.4)
"^DD",430,430.01,7,1,1,2.1)
S X=DIV S Y(1)=$S($D(^PRCA(430,D0,2,D1,0)):^(0),1:"") S X=$P(Y(1),U,2)-X
"^DD",430,430.01,7,1,1,2.4)
S DIH=$S($D(^PRCA(430,DIV(0),2,DIV(1),0)):^(0),1:""),DIV=X S $P(^(0),U,2)=DIV,DIH=430.01,DIG=1 D ^DICR:$O(^DD(DIH,DIG,1,0))
"^DD",430,430.01,7,1,1,"%D",0)
^^1^1^2920501^
"^DD",430,430.01,7,1,1,"%D",1,0)
This cross reference triggers the Curr.Prin.Bal field #1.
"^DD",430,430.01,7,1,1,"CREATE CONDITION")
CURR.PRIN.BAL.=""
"^DD",430,430.01,7,1,1,"CREATE VALUE")
CURR.PRIN.BAL.+FY ORIGINAL AMOUNT
"^DD",430,430.01,7,1,1,"DELETE VALUE")
CURR.PRIN.BAL-OLD FY ORIGINAL AMOUNT
"^DD",430,430.01,7,1,1,"DT")
2911007
"^DD",430,430.01,7,1,1,"FIELD")
CURR.PRIN.BAL.
"^DD",430,430.01,7,3)
Type a Dollar Amount between 0 and 999999999.99, 2 Decimal Digits
"^DD",430,430.01,7,21,0)
^.001^1^1^3080425^^^^
"^DD",430,430.01,7,21,1,0)
This is the original amount of the charges for this Fiscal Year.
"^DD",430,430.01,7,"DT")
3080425
"^DD",430,430.02,4,0)
UNIT COST^RNJ12,4^^0;4^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."5N.N) X
"^DD",430,430.02,4,1,0)
^.1
"^DD",430,430.02,4,1,1,0)
430.02^AD^MUMPS
"^DD",430,430.02,4,1,1,1)
I $P(^PRCA(430,DA(1),101,DA,0),U,3)]"" S Z0=($P(^(0),U,3)*X*100+.5\1/100),$P(^(0),U,6)=Z0 K Z0
"^DD",430,430.02,4,1,1,2)
Q
"^DD",430,430.02,4,1,1,"%D",0)
^^1^1^2920504^
"^DD",430,430.02,4,1,1,"%D",1,0)
This cross-reference calculates and sets the Total Amount field 6.
"^DD",430,430.02,4,1,1,"DT")
2920504
"^DD",430,430.02,4,3)
Type a Number between 0 and 9999999, 4 Decimal Digits
"^DD",430,430.02,4,21,0)
^.001^1^1^3070209^^^
"^DD",430,430.02,4,21,1,0)
This is the billing cost of a single unit of issue.
"^DD",430,430.02,4,"DT")
3031216
"^DD",430,430.02,6,0)
TOTAL AMOUNT^NJ12,2I^^0;6^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>999999999)!(X<0) X
"^DD",430,430.02,6,1,0)
^.1
"^DD",430,430.02,6,1,1,0)
430.02^AE^MUMPS
"^DD",430,430.02,6,1,1,1)
Q
"^DD",430,430.02,6,1,1,2)
Q
"^DD",430,430.02,6,1,1,"%D",0)
^^1^1^2920504^^
"^DD",430,430.02,6,1,1,"%D",1,0)
Obsolete version 3.7 cross-reference.
"^DD",430,430.02,6,1,1,"DT")
2920501
"^DD",430,430.02,6,3)
Type a Dollar Amount between 0 and 999999999, 2 Decimal Digits
"^DD",430,430.02,6,21,0)
^.001^2^2^3070209^^^^
"^DD",430,430.02,6,21,1,0)
This total is computed by multiplying the number of units by the cost
"^DD",430,430.02,6,21,2,0)
per unit.
"^DD",430,430.02,6,"DT")
3050630
"BLD",6271,6)
^237
**END**
**END**
