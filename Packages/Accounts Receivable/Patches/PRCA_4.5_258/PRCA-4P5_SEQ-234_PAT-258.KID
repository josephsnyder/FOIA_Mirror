Released PRCA*4.5*258 SEQ #234
Extracted from mail message
**KIDS**:PRCA*4.5*258^

**INSTALL NAME**
PRCA*4.5*258
"BLD",7153,0)
PRCA*4.5*258^ACCOUNTS RECEIVABLE^0^3081106^y
"BLD",7153,4,0)
^9.64PA^^
"BLD",7153,6.3)
1
"BLD",7153,"KRN",0)
^9.67PA^779.2^20
"BLD",7153,"KRN",.4,0)
.4
"BLD",7153,"KRN",.401,0)
.401
"BLD",7153,"KRN",.402,0)
.402
"BLD",7153,"KRN",.403,0)
.403
"BLD",7153,"KRN",.5,0)
.5
"BLD",7153,"KRN",.84,0)
.84
"BLD",7153,"KRN",3.6,0)
3.6
"BLD",7153,"KRN",3.8,0)
3.8
"BLD",7153,"KRN",9.2,0)
9.2
"BLD",7153,"KRN",9.8,0)
9.8
"BLD",7153,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7153,"KRN",9.8,"NM",1,0)
RCDPEX3^^0^B75030578
"BLD",7153,"KRN",9.8,"NM","B","RCDPEX3",1)

"BLD",7153,"KRN",19,0)
19
"BLD",7153,"KRN",19.1,0)
19.1
"BLD",7153,"KRN",101,0)
101
"BLD",7153,"KRN",409.61,0)
409.61
"BLD",7153,"KRN",771,0)
771
"BLD",7153,"KRN",779.2,0)
779.2
"BLD",7153,"KRN",870,0)
870
"BLD",7153,"KRN",8989.51,0)
8989.51
"BLD",7153,"KRN",8989.52,0)
8989.52
"BLD",7153,"KRN",8994,0)
8994
"BLD",7153,"KRN","B",.4,.4)

"BLD",7153,"KRN","B",.401,.401)

"BLD",7153,"KRN","B",.402,.402)

"BLD",7153,"KRN","B",.403,.403)

"BLD",7153,"KRN","B",.5,.5)

"BLD",7153,"KRN","B",.84,.84)

"BLD",7153,"KRN","B",3.6,3.6)

"BLD",7153,"KRN","B",3.8,3.8)

"BLD",7153,"KRN","B",9.2,9.2)

"BLD",7153,"KRN","B",9.8,9.8)

"BLD",7153,"KRN","B",19,19)

"BLD",7153,"KRN","B",19.1,19.1)

"BLD",7153,"KRN","B",101,101)

"BLD",7153,"KRN","B",409.61,409.61)

"BLD",7153,"KRN","B",771,771)

"BLD",7153,"KRN","B",779.2,779.2)

"BLD",7153,"KRN","B",870,870)

"BLD",7153,"KRN","B",8989.51,8989.51)

"BLD",7153,"KRN","B",8989.52,8989.52)

"BLD",7153,"KRN","B",8994,8994)

"BLD",7153,"QUES",0)
^9.62^^
"BLD",7153,"REQB",0)
^9.611^2^2
"BLD",7153,"REQB",1,0)
IB*2.0*400^2
"BLD",7153,"REQB",2,0)
PRCA*4.5*208^2
"BLD",7153,"REQB","B","IB*2.0*400",1)

"BLD",7153,"REQB","B","PRCA*4.5*208",2)

"MBREQ")
0
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,20,0)
^9.402P^1^1
"PKG",142,20,1,0)
2^^PRCAMRG
"PKG",142,20,1,1)

"PKG",142,20,"B",2,1)

"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^3040809^3040812^8
"PKG",142,22,1,"PAH",1,0)
258^3081106
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RCDPEX3")
0^1^B75030578^B75090917
"RTN","RCDPEX3",1,0)
RCDPEX3 ;ALB/TMK - ELECTRONIC EOB EXCEPTION PROCESSING - FILE 344.4 ;10-OCT-02
"RTN","RCDPEX3",2,0)
 ;;4.5;Accounts Receivable;**173,208,258**;Mar 20, 1995;Build 1
"RTN","RCDPEX3",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","RCDPEX3",4,0)
 ; IA# 5286 for call to $$PRVPHONE^IBJPS3()
"RTN","RCDPEX3",5,0)
 Q
"RTN","RCDPEX3",6,0)
 ;
"RTN","RCDPEX3",7,0)
VP ; View/Print ERA Msgs - File 344.4
"RTN","RCDPEX3",8,0)
 N X,Y,RCDA,RCTDA,RCALL,DIR,POP
"RTN","RCDPEX3",9,0)
 D FULL^VALM1
"RTN","RCDPEX3",10,0)
 S DIR(0)="SA^A:ALL;S:SELECTED",DIR("A")="PRINT (A)LL or (S)ELECTED RECORDS?: "
"RTN","RCDPEX3",11,0)
 S DIR("B")="ALL"
"RTN","RCDPEX3",12,0)
 D ^DIR K DIR
"RTN","RCDPEX3",13,0)
 G:$D(DUOUT)!$D(DTOUT) VPQ
"RTN","RCDPEX3",14,0)
 S RCALL=(Y="A")
"RTN","RCDPEX3",15,0)
 ;
"RTN","RCDPEX3",16,0)
 I 'RCALL D  G:'$O(RCDA("")) VPQ
"RTN","RCDPEX3",17,0)
 . D SEL(.RCDA)
"RTN","RCDPEX3",18,0)
 ;
"RTN","RCDPEX3",19,0)
 ; device
"RTN","RCDPEX3",20,0)
 N %ZIS,ZTRTN,ZTSAVE,ZTDESC
"RTN","RCDPEX3",21,0)
 S %ZIS="QM" D ^%ZIS G:POP VPQ
"RTN","RCDPEX3",22,0)
 I $D(IO("Q")) D  G VPQ
"RTN","RCDPEX3",23,0)
 . S ZTRTN="VPOUT^RCDPEX3",ZTDESC="AR - Print ERA/EEOB Data With Exceptions"
"RTN","RCDPEX3",24,0)
 . S ZTSAVE("RCDA")="",ZTSAVE("RCALL")="",ZTSAVE("^TMP(""RCDPEX_SUM-EOBDX"",$J,")=""
"RTN","RCDPEX3",25,0)
 . D ^%ZTLOAD
"RTN","RCDPEX3",26,0)
 . W !!,$S($D(ZTSK):"Your task number"_ZTSK_" has been queued.",1:"Unable to queue this job.")
"RTN","RCDPEX3",27,0)
 . K ZTSK,IO("Q") D HOME^%ZIS
"RTN","RCDPEX3",28,0)
 U IO
"RTN","RCDPEX3",29,0)
 ;
"RTN","RCDPEX3",30,0)
VPOUT ; Entrypoint queued job
"RTN","RCDPEX3",31,0)
 ; RCDA, RCALL must be defined
"RTN","RCDPEX3",32,0)
 N Z,RCSTOP,RCZ,RCPG,RCDOT,RCTDA1
"RTN","RCDPEX3",33,0)
 K ^TMP($J,"RC_SUMRAW"),^TMP($J,"RC_SUMOUT")
"RTN","RCDPEX3",34,0)
 S (RCSTOP,RCPG)=0,RCDOT="",$P(RCDOT,".",79)=""
"RTN","RCDPEX3",35,0)
 I RCALL D
"RTN","RCDPEX3",36,0)
 . S RCZ=0 F  S RCZ=$O(^TMP("RCDPEX_SUM-EOBDX",$J,RCZ)) Q:'RCZ  S RCTDA=$G(^(RCZ)),RCTDA1=+$P(RCTDA,U,3),RCTDA=+$P(RCTDA,U,2) D  Q:RCSTOP
"RTN","RCDPEX3",37,0)
 .. D PRT(RCTDA,RCTDA1,.RCPG,.RCSTOP)
"RTN","RCDPEX3",38,0)
 .. I $O(^TMP("RCDPEX_SUM-EOBDX",$J,RCZ)) D WRTSEP(RCDOT,RCPG)
"RTN","RCDPEX3",39,0)
 I 'RCALL D
"RTN","RCDPEX3",40,0)
 . S RCZ=0 F  S RCZ=$O(RCDA(RCZ)) Q:'RCZ  D
"RTN","RCDPEX3",41,0)
 .. S RCTDA1=+$P(RCDA(RCZ),U,2),RCTDA=+RCDA(RCZ) D PRT(RCTDA,RCTDA1,.RCPG,.RCSTOP) I $O(RCDA(RCZ)) D WRTSEP(RCDOT,RCPG)
"RTN","RCDPEX3",42,0)
 ;
"RTN","RCDPEX3",43,0)
 I '$D(ZTQUEUED),'RCSTOP,RCPG D ASK(.RCSTOP)
"RTN","RCDPEX3",44,0)
 ;
"RTN","RCDPEX3",45,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","RCDPEX3",46,0)
 I '$D(ZTQUEUED) D ^%ZISC
"RTN","RCDPEX3",47,0)
 ;
"RTN","RCDPEX3",48,0)
VPQ K ^TMP($J,"RC_SUMRAW"),^TMP($J,"RC_SUMOUT")
"RTN","RCDPEX3",49,0)
 S VALMBCK="R"
"RTN","RCDPEX3",50,0)
 Q
"RTN","RCDPEX3",51,0)
 ;
"RTN","RCDPEX3",52,0)
WRTSEP(RCDOT,RCPG) ; Separating lines if more records to print
"RTN","RCDPEX3",53,0)
 W !,RCDOT,!,RCDOT
"RTN","RCDPEX3",54,0)
 I (($Y+5)>IOSL) D HDR(.RCPG) Q
"RTN","RCDPEX3",55,0)
 W !!
"RTN","RCDPEX3",56,0)
 Q
"RTN","RCDPEX3",57,0)
 ;
"RTN","RCDPEX3",58,0)
PRT(RCTDA,RCTDA1,RCPG,RCSTOP) ; Print data from file 344.4 and 344.41
"RTN","RCDPEX3",59,0)
 ; RCTDA = ien file 344.4
"RTN","RCDPEX3",60,0)
 ; RCTDA1 = ien file 344.41
"RTN","RCDPEX3",61,0)
 ; RCPG = last page extracted
"RTN","RCDPEX3",62,0)
 ; RCSTOP = returned 1 if passed by ref and process stopped
"RTN","RCDPEX3",63,0)
 ;
"RTN","RCDPEX3",64,0)
 N RCDIQ,RCDIQ1,RCDIQ2,RCXM1,RC,Z
"RTN","RCDPEX3",65,0)
 D GETS^DIQ(344.4,RCTDA_",","*","IEN","RCDIQ")
"RTN","RCDPEX3",66,0)
 D TXT0^RCDPEX31(RCTDA,.RCDIQ,.RCXM1,.RC) ; Get top level 0-node captioned fields
"RTN","RCDPEX3",67,0)
 ;
"RTN","RCDPEX3",68,0)
 I $O(^RCY(344.4,RCTDA,2,0)) S RC=RC+1,RCXM1(RC)="  **ERA LEVEL ADJUSTMENTS**"
"RTN","RCDPEX3",69,0)
 S Z=0 F  S Z=$O(^RCY(344.4,RCTDA,2,Z)) Q:'Z  D
"RTN","RCDPEX3",70,0)
 . D GETS^DIQ(344.42,Z_","_RCTDA_",","*","IEN","RCDIQ2")
"RTN","RCDPEX3",71,0)
 . D TXT2^RCDPEX31(RCTDA,Z,.RCDIQ2,.RCXM1,.RC) ; Get top level ERA adjs
"RTN","RCDPEX3",72,0)
 ;
"RTN","RCDPEX3",73,0)
 D GETS^DIQ(344.41,RCTDA1_","_RCTDA_",","*","IEN","RCDIQ1")
"RTN","RCDPEX3",74,0)
 D TXT00^RCDPEX31(RCTDA,RCTDA1,.RCDIQ1,.RCXM1,.RC)
"RTN","RCDPEX3",75,0)
 D DISP^RCDPESR0("^RCY(344.4,"_RCTDA_",1,"_RCTDA1_",1)","^TMP($J,""RC_SUMRAW"")",1,"^TMP($J,""RC_SUMOUT"")",75) ; Get formatted 'raw' data
"RTN","RCDPEX3",76,0)
 ;
"RTN","RCDPEX3",77,0)
 I $D(RCDIQ1(344.41,RCTDA1_","_RCTDA_",",2)) D
"RTN","RCDPEX3",78,0)
 . S RC=RC+1,RCXM1(RC)="  **RESOLUTION LOG DATA**"
"RTN","RCDPEX3",79,0)
 . S Z=0 F  S Z=$O(RCDIQ1(344.41,RCTDA1_","_RCTDA_",",2,Z)) Q:'Z  S RC=RC+1,RCXM1(RC)=RCDIQ1(344.41,RCTDA1_","_RCTDA_",",2,Z)
"RTN","RCDPEX3",80,0)
 . S RC=RC+1,RCXM1(RC)=" "
"RTN","RCDPEX3",81,0)
 S (RCSTOP,Z)=0
"RTN","RCDPEX3",82,0)
 F  S Z=$O(RCXM1(Z)) Q:'Z  S ^TMP($J,"RC_SUMOUT",Z-999)=RCXM1(Z)
"RTN","RCDPEX3",83,0)
 S Z=""
"RTN","RCDPEX3",84,0)
 F  S Z=$O(^TMP($J,"RC_SUMOUT",Z)) Q:'Z  D  Q:RCSTOP
"RTN","RCDPEX3",85,0)
 . I $D(ZTQUEUED),$$S^%ZTLOAD S (RCSTOP,ZTSTOP)=1 K ZTREQ I +$G(RCPG) W !!,"***TASK STOPPED BY USER***" Q
"RTN","RCDPEX3",86,0)
 . I 'RCPG!(($Y+5)>IOSL) D  I RCSTOP Q
"RTN","RCDPEX3",87,0)
 .. D:RCPG ASK(.RCSTOP) I RCSTOP Q
"RTN","RCDPEX3",88,0)
 .. D HDR(.RCPG)
"RTN","RCDPEX3",89,0)
 . W !,$G(^TMP($J,"RC_SUMOUT",Z))
"RTN","RCDPEX3",90,0)
 ;
"RTN","RCDPEX3",91,0)
 Q
"RTN","RCDPEX3",92,0)
 ;
"RTN","RCDPEX3",93,0)
XFR ; Transfer EOB(s) to other site
"RTN","RCDPEX3",94,0)
 N RC,RC0,RCCHG,RCOK,RCDOMAIN,RCDEF,RCDA,RCWHY,RCER,RCECT,RCXTO,RCALL,RCCONT,DIR,X,Y,DA,DIE,DR,POP,RCDA,RCXDA,RCXDA1,RCDUZ,XMBODY,XMTO
"RTN","RCDPEX3",95,0)
 D FULL^VALM1
"RTN","RCDPEX3",96,0)
 D SEL(.RCDA)
"RTN","RCDPEX3",97,0)
 ;
"RTN","RCDPEX3",98,0)
 G:'$O(RCDA(0)) XFRQ
"RTN","RCDPEX3",99,0)
 S DIR("S")="I +$G(^DIC(4,+Y,6))",DIR(0)="PA^4:AME",DIR("A")="TRANSFER TO WHICH SITE?: " D ^DIR K DIR
"RTN","RCDPEX3",100,0)
 I $D(DUOUT)!$D(DTOUT) G XFRQ
"RTN","RCDPEX3",101,0)
 S RCXTO=+Y,RCCHG=0
"RTN","RCDPEX3",102,0)
 ;
"RTN","RCDPEX3",103,0)
 S RCDOMAIN=$$EXTERNAL^DILFD(4,60,,+$G(^DIC(4,+RCXTO,6))),RCECT=0
"RTN","RCDPEX3",104,0)
 I RCDOMAIN="" D  G XFRQ
"RTN","RCDPEX3",105,0)
 . S DIR("A",1)="THERE IS NO VALID DOMAIN SET UP FOR THIS SITE. YOU MUST CHOOSE ANOTHER ONE.",DIR("A")="PRESS RETURN TO CONTINUE",DIR(0)="EA" W ! D ^DIR K DIR
"RTN","RCDPEX3",106,0)
 ;
"RTN","RCDPEX3",107,0)
 S RCDEF=$$PRVPHONE^IBJPS3()                  ; IA 5286
"RTN","RCDPEX3",108,0)
 I RCDEF'="" S RCDEF="AGENT CASHIER-"_RCDEF
"RTN","RCDPEX3",109,0)
 ;
"RTN","RCDPEX3",110,0)
 S DIR("A",1)="ENTER THE CONTACT INFORMATION FOR THE PERSON AT YOUR SITE"
"RTN","RCDPEX3",111,0)
 S DIR("A",2)="   WHO MAY BE CONTACTED BY THE OTHER SITE REGARDING THIS EEOB"
"RTN","RCDPEX3",112,0)
 S DIR("A")="   (1-45 CHARACTERS): "_$S(RCDEF'="":RCDEF_"// ",1:"")
"RTN","RCDPEX3",113,0)
 S DIR(0)="FA"_$S(RCDEF'="":"O",1:"")_"^1:45" W ! D ^DIR K DIR
"RTN","RCDPEX3",114,0)
 I $D(DUOUT)!$D(DTOUT) G XFRQ
"RTN","RCDPEX3",115,0)
 I Y="" S Y=RCDEF
"RTN","RCDPEX3",116,0)
 S RCCONT=Y
"RTN","RCDPEX3",117,0)
 ;
"RTN","RCDPEX3",118,0)
 S DIR(0)="YA",DIR("A")="DO YOU WANT TO PRINT THE EEOB(s)?: ",DIR("B")="Y"
"RTN","RCDPEX3",119,0)
 D ^DIR K DIR
"RTN","RCDPEX3",120,0)
 I $D(DUOUT)!$D(DTOUT) G XFRQ
"RTN","RCDPEX3",121,0)
 I Y=1 S RCER=0 D  I RCER G XFRQ
"RTN","RCDPEX3",122,0)
 . N %ZIS,ZTRTN,ZTSAVE,ZTDESC
"RTN","RCDPEX3",123,0)
 . S %ZIS="QM" D ^%ZIS I POP S RCER=1 Q
"RTN","RCDPEX3",124,0)
 . I $D(IO("Q")) D  Q
"RTN","RCDPEX3",125,0)
 .. S RCALL=0
"RTN","RCDPEX3",126,0)
 .. S ZTRTN="VPOUT^RCDPEX3",ZTDESC="AR - Print EEOB Data Before Transfer"
"RTN","RCDPEX3",127,0)
 .. S ZTSAVE("RCDA")="",ZTSAVE("RCALL")="",ZTSAVE("^TMP(""RCDPEX_SUM-EOBDX"",$J)")=""
"RTN","RCDPEX3",128,0)
 .. D ^%ZTLOAD
"RTN","RCDPEX3",129,0)
 .. I '$D(ZTSK) S RCER=1
"RTN","RCDPEX3",130,0)
 .. K ZTSK,IO("Q") D HOME^%ZIS
"RTN","RCDPEX3",131,0)
 . S RCALL=0
"RTN","RCDPEX3",132,0)
 . D VPOUT^RCDPEX3
"RTN","RCDPEX3",133,0)
 ;
"RTN","RCDPEX3",134,0)
 S RCWHY(1)="Transfer EEOB detail to another site"
"RTN","RCDPEX3",135,0)
 S RC=0 F  S RC=$O(RCDA(RC)) Q:'RC  D  L -^RCY(344.4,RCXDA,1,RCXDA1,0)
"RTN","RCDPEX3",136,0)
 . N RCBODY,RCAMT,RCBILL,RCX,XMZ
"RTN","RCDPEX3",137,0)
 . S RCXDA=+RCDA(RC),RCXDA1=+$P(RCDA(RC),U,2),RCWHY(2)=""
"RTN","RCDPEX3",138,0)
 . I '$$LOCK^RCDPEX31(RCXDA,RCXDA1,1) D  Q
"RTN","RCDPEX3",139,0)
 .. S RCECT=RCECT+1,RCER(RCECT)="**Selection #"_RC_" is being edited by another user - ... please try again later"
"RTN","RCDPEX3",140,0)
 . ;
"RTN","RCDPEX3",141,0)
 . S RC0=$G(^RCY(344.4,RCXDA,1,RCXDA1,0))
"RTN","RCDPEX3",142,0)
 . M RCBODY=^RCY(344.4,RCXDA,1,RCXDA1,1)
"RTN","RCDPEX3",143,0)
 . S RCAMT=$P(RC0,U,3)*100
"RTN","RCDPEX3",144,0)
 . S RCBILL=$P(RC0,U,5)
"RTN","RCDPEX3",145,0)
 . S DIR("A",1)="ONCE THIS EEOB HAS BEEN TRANSFERRED, ITS BILL # CANNOT BE EDITED",DIR("A")="ARE YOU SURE THIS IS NOT A CLAIM FOR YOUR SITE?: ",DIR(0)="YA",DIR("B")="NO" W ! D ^DIR K DIR
"RTN","RCDPEX3",146,0)
 . Q:Y'=1
"RTN","RCDPEX3",147,0)
 . I $P(RC0,U,11) D  Q:'RCOK
"RTN","RCDPEX3",148,0)
 .. S RCOK=1
"RTN","RCDPEX3",149,0)
 .. S DIR("A",1)="WARNING: EEOB FOR #"_RC_" ("_RCBILL_") HAS ALREADY BEEN TRANSFERRED",DIR("A",2)="   TO "_$P($G(^DIC(4,+$P(RC0,U,11),0)),U)_"   ON: "_$$FMTE^XLFDT($P(RC0,U,12),2)
"RTN","RCDPEX3",150,0)
 .. S DIR("A")="ARE YOU SURE YOU WANT TO TRANSFER IT AGAIN?: "
"RTN","RCDPEX3",151,0)
 .. S DIR(0)="YA",DIR("B")="NO" W ! D ^DIR K DIR
"RTN","RCDPEX3",152,0)
 .. I Y=1 Q
"RTN","RCDPEX3",153,0)
 .. S RCOK=0
"RTN","RCDPEX3",154,0)
 .. S RCECT=RCECT+1,RCER(RCECT)="**Selection #"_RC_" already transferred - "_RCBILL_" NOT transferred again"
"RTN","RCDPEX3",155,0)
 . K RCBODY(0)
"RTN","RCDPEX3",156,0)
 . S RCX=$G(RCBODY(1,0))
"RTN","RCDPEX3",157,0)
 . ;
"RTN","RCDPEX3",158,0)
 . I $P($G(^RCY(344.4,RCXDA,1,RCXDA1,0)),U,7)'=1 D  Q
"RTN","RCDPEX3",159,0)
 .. S RCECT=RCECT+1,RCER(RCECT)="**Selection #"_RC_" is not available for transfer - "_RCBILL_" NOT transferred"
"RTN","RCDPEX3",160,0)
 . ;
"RTN","RCDPEX3",161,0)
 . I $P(RCX,U)'["835ERA"!'$O(RCBODY(1)) D  Q
"RTN","RCDPEX3",162,0)
 .. S RCECT=RCECT+1,RCER(RCECT)="**Selection #"_RC_" format is not valid for transfer - "_RCBILL_" NOT transferred"
"RTN","RCDPEX3",163,0)
 . ;
"RTN","RCDPEX3",164,0)
 . S $P(RCX,U)="835XFR",$P(RCX,U,10,16)=(RCAMT_"^^^^^^"_RCCONT)
"RTN","RCDPEX3",165,0)
 . S RCBODY(1,0)=RCX
"RTN","RCDPEX3",166,0)
 . S RCBODY(+$O(RCBODY(""),-1)+1,0)="99^$"
"RTN","RCDPEX3",167,0)
 . S RCBODY(+$O(RCBODY(""),-1)+1,0)="NNNN"
"RTN","RCDPEX3",168,0)
 . S XMTO("S.RCDPE EDI LOCKBOX SERVER@"_RCDOMAIN)=""
"RTN","RCDPEX3",169,0)
 . S XMBODY="RCBODY",RCDUZ=$G(DUZ),DUZ=.5
"RTN","RCDPEX3",170,0)
 . D SENDMSG^XMXAPI(.5,"TRANSFER 3RD PARTY EEOB "_RCBILL_"(REF #"_RCXDA_";"_RCXDA1_"#)",XMBODY,.XMTO,,.XMZ)
"RTN","RCDPEX3",171,0)
 . ;
"RTN","RCDPEX3",172,0)
 . S DUZ=RCDUZ
"RTN","RCDPEX3",173,0)
 . I $G(XMZ) D  ; Report msg #
"RTN","RCDPEX3",174,0)
 .. S RCCHG=1
"RTN","RCDPEX3",175,0)
 .. S RCECT=RCECT+1,RCER(RCECT)="Entry #"_RC_" was successfully transferred - msg # is "_XMZ
"RTN","RCDPEX3",176,0)
 .. S DA(1)=RCXDA,DA=RCXDA1,DIE="^RCY(344.4,"_DA(1)_",1,",DR=".09////"_XMZ_";.11////"_RCXTO_";.12////"_$E($$NOW^XLFDT(),1,12) D ^DIE
"RTN","RCDPEX3",177,0)
 .. S RCWHY(2)=" Transfer to "_$P($G(^DIC(4,+RCXTO,0)),U)_" was successful"
"RTN","RCDPEX3",178,0)
 .. ;
"RTN","RCDPEX3",179,0)
 . E  D  ; error - transfer not done
"RTN","RCDPEX3",180,0)
 .. S RCECT=RCECT+1,RCER(RCECT)="**Entry #"_RC_" was NOT transferred due to a msg build error ("_RCBILL_")"
"RTN","RCDPEX3",181,0)
 .. S RCWHY(2)=" Transfer to "_$P($G(^DIC(4,+RCXTO,0)),U)_" was UNSUCCESSFUL"
"RTN","RCDPEX3",182,0)
 .. ;
"RTN","RCDPEX3",183,0)
 . D STORACT^RCDPEX31(RCXDA,RCXDA1,.RCWHY)
"RTN","RCDPEX3",184,0)
 ;
"RTN","RCDPEX3",185,0)
 I $O(RCER(0)) D
"RTN","RCDPEX3",186,0)
 . ; Write msgs
"RTN","RCDPEX3",187,0)
 . W !!,"TRANSFER OF EEOB TO "_$P($G(^DIC(4,RCXTO,0)),U)_" RESULTS: ",!
"RTN","RCDPEX3",188,0)
 . S RCECT=0 F  S RCECT=$O(RCER(RCECT)) Q:'RCECT  W !,"  ",RCER(RCECT)
"RTN","RCDPEX3",189,0)
 . W !
"RTN","RCDPEX3",190,0)
 ;
"RTN","RCDPEX3",191,0)
 D PAUSE^VALM1
"RTN","RCDPEX3",192,0)
 ;
"RTN","RCDPEX3",193,0)
XFRQ I $G(RCCHG) D BLD^RCDPEX2
"RTN","RCDPEX3",194,0)
 S VALMBCK="R"
"RTN","RCDPEX3",195,0)
 Q
"RTN","RCDPEX3",196,0)
 ;
"RTN","RCDPEX3",197,0)
SEL(RCDA,ONE) ; Select entry(s) from list
"RTN","RCDPEX3",198,0)
 ; RCDA = array returned if selections made
"RTN","RCDPEX3",199,0)
 ;    RCDA(n)=ien of bill selected file 344.4
"RTN","RCDPEX3",200,0)
 ; ONE = if set to 1, only one selection can be made at a time
"RTN","RCDPEX3",201,0)
 N RC
"RTN","RCDPEX3",202,0)
 K RCDA
"RTN","RCDPEX3",203,0)
 D EN^VALM2($G(XQORNOD(0)),$S('$G(ONE):"",1:"S"))
"RTN","RCDPEX3",204,0)
 S RCDA=0 F  S RCDA=$O(VALMY(RCDA)) Q:'RCDA  S RC=$G(^TMP("RCDPEX_SUM-EOBDX",$J,RCDA)),RCDA(RCDA)=+$P(RC,U,2)_U_+$P(RC,U,3)
"RTN","RCDPEX3",205,0)
 Q
"RTN","RCDPEX3",206,0)
 ;
"RTN","RCDPEX3",207,0)
HDR(RCPG) ;Print report hdr
"RTN","RCDPEX3",208,0)
 ; RCPG = last page #
"RTN","RCDPEX3",209,0)
 I RCPG!($E(IOST,1,2)="C-") W @IOF,*13
"RTN","RCDPEX3",210,0)
 S RCPG=$G(RCPG)+1
"RTN","RCDPEX3",211,0)
 W !,?5,"EDI LOCKBOX EEOB DATA EXCEPTIONS - EEOB DETAIL",?55,$$FMTE^XLFDT(DT,2),?70,"Page: ",RCPG,!,$TR($J("",IOM)," ","=")
"RTN","RCDPEX3",212,0)
 Q
"RTN","RCDPEX3",213,0)
 ;
"RTN","RCDPEX3",214,0)
ASK(RCSTOP) ;
"RTN","RCDPEX3",215,0)
 I $E(IOST,1,2)'["C-" Q
"RTN","RCDPEX3",216,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","RCDPEX3",217,0)
 S DIR(0)="E" W ! D ^DIR
"RTN","RCDPEX3",218,0)
 I ($D(DIRUT))!($D(DUOUT)) S RCSTOP=1 Q
"RTN","RCDPEX3",219,0)
 Q
"RTN","RCDPEX3",220,0)
 ; ***
"RTN","RCDPEX3",221,0)
 ; *** Entrypoints TXT* assume these variable definitions ***
"RTN","RCDPEX3",222,0)
 ; ***
"RTN","RCDPEX3",223,0)
 ; FUNCTIONs returns RCXM1 and RC if passed by reference
"RTN","RCDPEX3",224,0)
 ; RCTDA = ien, file 344.4
"RTN","RCDPEX3",225,0)
 ; RCXM1 = array returned with text, captioned
"RTN","RCDPEX3",226,0)
 ; RC = # of lines already in array (optional)
"RTN","RCDPEX3",227,0)
 ; RCDIQ and RCDIQ1 = arrays returned from GETS^DIQ
"RTN","RCDPEX3",228,0)
 ; ***
"RTN","RCDPEX3",229,0)
 ;
"RTN","RCDPEX3",230,0)
UPD ; Try to update the IB EOB file from exception in 344.41
"RTN","RCDPEX3",231,0)
 D UPD^RCDPEX31 ; Moved for space
"RTN","RCDPEX3",232,0)
 Q
"RTN","RCDPEX3",233,0)
 ;
"VER")
8.0^22.0
"BLD",7153,6)
^234
**END**
**END**
