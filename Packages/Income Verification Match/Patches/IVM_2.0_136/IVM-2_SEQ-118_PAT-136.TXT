$TXT Created by KOPP,TERRY at SQAVFF.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 11/24/08 at 16:35
=============================================================================
Run Date: FEB 05, 2010                     Designation: IVM*2*136
Package : IVM - INCOME VERIFICATION MATCH     Priority: Mandatory
Version : 2       SEQ #118                      Status: Released
                  Compliance Date: MAR 08, 2010
=============================================================================

Associated patches: (v)IVM*2*115   <<= must be installed BEFORE `IVM*2*136'

Subject: MEANS TEST ADD GIVES HARD ERROR

Category: 
  - Routine

Description:
============

 This patch fixes a system error that occurs when an inbound HL7 message
 attempts to upload a means test to replace an earlier, same-income-year
 means test in which previously entered comments had been deleted.  Record
 corruption occurs when the word processing COMMENT Sub-field (#.01) of the
 COMMENT Sub-file (#408.311), which is in the COMMENT Field (#50) of the
 ANNUAL MEANS TEST File (#408.31), at one time contained data but is now
 blank.  When the upload process attempts to read the comments in the
 corrupted earlier means test record, a <SUBSCRIPT>PUTWP+6^DIEFW error
 occurs.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 HD0000000277428 - PUTWP+6^DIEFW
  
  
 Overview of Remedy Ticket(s):
 -----------------------------
 HD0000000277428 - PUTWP+6^DIEFW
  
   Problem:
   --------
   If a means test exists for a patient for an income year and someone
   has edited the comments field, then deleted it, when the new test is
   filed for a date later that same income year, a hard error occurs
   because there is a top-level node for the field, but no actual data.
   
   Resolution:
   -----------
   Instead of checking for the existence of the top level node, check to 
   be sure there is at least one line for data before trying to copy the 
   comments over to the new means test.
  
   
 Test Sites:
 -----------
 Dayton VAMC (Large)
 Bronx VAMC (Large)
 VA Montana HCS (Integrated)
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the HL7 
 filers be stopped to prevent possible conflicts while running the KIDS
 Install. Other VISTA users will not be affected.
  
 Install Time - less than 5 minutes
       
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter IVM*2.0*136):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         YES//' answer NO.
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? YES//' answer NO.
   
 5.  Post-Installation:
  
     Be sure to turn the HL7 filers back on after the patch has completed 
     installation.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;2.0;INCOME VERIFICATION MATCH;**[Patch List]**;21-OCT-94;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: IVMCM6
    Before: B76408345   After: B76427016  **17,25,39,44,50,53,49,58,62,
                                           67,84,115,136**
 Description of Changes:
  Change: EN+88
    From: . I $D(^DGMT(408.31,IVMMTIEN,"C")) S  DATA(50)="^DGMT(408.31,"_IVM
          MTIEN_",""C"")"
      To: . I $O(^DGMT(408.31,IVMMTIEN,"C",0)) S DATA(50)="^DGMT(408.31,"_IV
  MMTIEN_",""C"")"

 
Routine list of preceding patches: 115

=============================================================================
User Information:
Entered By  : KOPP,TERRY M                  Date Entered  : NOV 24, 2008
Completed By: RUDINGER,NANCY L.             Date Completed: FEB 01, 2010
Released By : DANE,SIDNEY                   Date Released : FEB 05, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
