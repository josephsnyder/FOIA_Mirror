$TXT Created by                   VISTA-LOAD-AITC-6.AAC.DOMAIN.EXT  (KIDS) on Wednesday, 12/04/19 at 15:23
=============================================================================
Run Date: JAN 28, 2020                     Designation: GMRC*3*146
Package : GMRC - CONSULT/REQUEST TRACKING     Priority: EMERGENCY
Version : 3       SEQ #129                      Status: Released
                  Compliance Date: FEB 04, 2020
=============================================================================

Associated patches: (v)GMRC*3*134  <<= must be installed BEFORE `GMRC*3*146'

Subject: GMRC MODIFICATION FOR PROV DX CODE

Category: 
  - Routine

Description:
============

  
  This patch is created to fix potential issues in the Health Level 7
  (HL7) electronic data exchange/messaging protocol for the Community Care
  Referrals and Authorizations (CCRA) project.  First, there are cases in 
  image order entry for consults created outside of Computerized Patient
  Record System (CPRS) that have a default diagnosis code (DX) that is not
  being managed properly when Vista builds the HL7 message. This patch
  holds onto and sends this image order DX code.
  
  Secondly, there are cases where an element of the provider address
  contains all spaces, and HealthShare Referral Management (HSRM) cannot
  process that address correctly. This patch removes all leading spaces
  from any field of the provider address.  If a field is all spaces it will
  be sent as completely blank.
  
  Thirdly the patch has been updated to include Administration Complete TIU
  Progress notes/comments to be sent from VistA to HSRM.  This will allow
  the user to view these notes in the HSRM referral record.
  
  Finally, this patch removes the INSTITUTION designation from the
  GMRCCCRA logical link.  The INSTITUTION is only supposed to be included
  in one logical link at the facility, and including it in GMRCCCRA has
  upon occasion led sites to send non-CCRA messages to HSRM, when they
  shouldn't do so.  This change, executed in the patch pre-install, 
  removes this concern.
  
  
 Patch Components:
  -----------------
  
   Routines:
   ---------
   GMRCCCR1
   GMRCCCRA
   GMRCP146
  
   
  Bulletins:
  ---------
  N/A 
   
   
  Files & Fields Associated:
   
  File Name (Number)      Field Name (Number)  New/Modified/Deleted
  ------------------      -------------------  --------------------
  
  N/A 
   
  Forms Associated:
   
  Form Name       File #  New/Modified/Deleted
  ---------       ------  --------------------
  N/A 
   
  Mail Groups Associated:
   
  Mail Group Name New/Modified/Deleted
  --------------- --------------------
  N/A 
  
   
  Options Associated:
   
  Option Name     Type    New/Modified/Deleted
  -----------     ----    -------------------- 
  N/A
   
  Protocols Associated:
   
  Protocol Name                   New/Modified/Deleted
  -------------                   -------------------- 
  N/A
   
  HL7 Logical Links               New/Modified/Deleted
  -----------------               --------------------
  GMRCCCRA                          Modified
   
  Security Keys Associated:
   
  Security Key Name
  -----------------
  N/A 
   
  Templates Associated:
   
  Template Name   Type    File Name (Number)  New/Modified/Deleted
  -------------   ----    ------------------  --------------------
  N/A
  
   
  Additional Information:
  N/A
   
   
  New Service Requests (NSRs):
  ----------------------------
  N/A 
   
  Patient Safety Issues (PSIs):
  -----------------------------
  N/A
   
   
  Defect Tracking System Ticket(s) & Overview:
  --------------------------------------------
  N/A 
   
  Problem:
  --------
  N/A 
   
  Resolution:
  -----------
  N/A 
   
  Test Sites:
  ----------
    Lebanon, PA
    Ft. Harrison, MT
    Togus, ME
   
   
  Documentation Retrieval Instructions:
  ------------------------------------ 
  No new updates to GMRC documents were required for this patch. Previous
  documents for GMRC updates as part of the CCRA project are available.
   
  The preferred method is to retrieve files from download.vista.domain.ext.
  This transmits the files from the first available server. Sites may also
  elect to retrieve files directly from a specific server.
   
  Sites may retrieve the documentation directly using Secure File Transfer
  Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory at the following OI
  Field Offices:
   
     Hines:                        domain.ext   
     Salt Lake City:               domain.ext
   
  
  Documentation can also be found on the VA Software Documentation Library 
  at: 
   
  http://www.domain.ext/vdl/
  
  Title                         File Name                        FTP Mode
  -----------------------------------------------------------------------
  CCRA GMRC Patch Technical     ccra_gmrc_patch_technical_manual.pdf
  Manual      
  
   
  Software and Documentation Retrieval Instructions:
  ---------------------------------------------------- 
  Software is distributed by PackMan.
   
  Backout and rollback Procedure:
  -------------------------------
  IN ORDER TO BACK OUT THIS PATCH, SITES MUST USE THE
  KIDS OPTION TO BACKUP UP A TRANSPORT GLOBAL AFTER LOADING
  THE PATCH. IF THIS OPTION IS NOT USED, THEN BACKING OUT
  THE PATCH IS NOT POSSIBLE.
  
  In the event of a catastrophic failure, the Facility CIO may
  make the decision to back-out the patch.
   
  It is imperative that you have performed a backup of the routines
  included in this patch prior to installation.
   
  The back-out plan is to restore the routines from the backup created.
   
  No data was modified by this patch installation and, therefore, no 
  rollback strategy is required.
  
  To verify the back-out completed successfully, ensure the checksum 
  matches the pre-patch checksum from the patch description.
  
   
  Setup/Configuration Instructions:
  ---------------------------------
   
  These steps can be completed with users on the system. This should take 
  less than 15 minutes to configure. This patch should take less than
  15 minutes to install.
   
   
  1.  Choose the PackMan message containing this patch.
     
  2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
     
  3.  From the KIDS Menu, select the Installation Menu.  From this menu, 
      you may elect to use the following options. When prompted for the
      INSTALL NAME, enter GMRC*3.0*146.
      a.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as Data Dictionaries (DDs) or
           templates. IN ORDER TO BACKOUT THIS PATCH, THIS OPTION MUST BE
           USED. 
      b.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed.  It compares all components of this patch
           (routines, DDs, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
  
  4.  From the Installation Menu, select the Install Package(s) option and
       when prompted for the INSTALL NAME, enter GMRC*3.0*146.
   
  5.  If prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
       Install? NO//' respond NO.
     
  6.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
       NO//" respond NO.
     
  7.  If prompted "Want to DISABLE Scheduled Options, Menu Options, 
        and Protocols? NO//" respond NO. 
     
  8.  If prompted "Delay Install (Minutes):  (0 - 60): 0//" respond 0.
  
  
 Sample Installation:
 ====================
  
 Select INSTALL NAME:    GMRC*3.0*146    11/06/19@16:02:10
      => GMRC*3*146 TEST v4
  
 This Distribution was loaded on Nov 06, 2019@16:02:10 with header of 
    GMRC*3*146 TEST v1
    It consisted of the following Install(s):
    GMRC*3.0*146
 Checking Install for Package GMRC*3.0*146
  
 Install Questions for GMRC*3.0*146
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   HOME  (CRT)
  
  
                                   
 GMRC*3.0*146                                  
 --------------------------------------------------------------------------
 ------
  Install Started for GMRC*3.0*146 : 
                Nov 06, 2019@16:03:08
  
 Build Distribution Date: Nov 06, 2019
  
  Installing Routines:
                Nov 06, 2019@16:03:08
  
  Updating Routine file...
  
  Updating KIDS files...
  
  GMRC*3.0*146 Installed. 
                Nov 06, 2019@16:03:08
  
  Not a production UCI
  
  NO Install Message sent 
 --------------------------------------------------------------------------
 ------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
  
 Install Completed
  
  Post-Installation Instructions:
  -------------------------------
  
  After the patch has been installed, use VA FileMan to confirm the 
  GMRCCCRA HL Logical Link is configured correctly. When doing a FileMan 
  inquire, the INSTITUTION field should not show in the inquiry or if it
  is shown, it should be null. Note that the TCP/IP ADDRESS and the TCP/IP 
  PORT will be different than what is shown in the example below. 
   
  Select HL LOGICAL LINK NODE:    GMRCCCRA
  Another one: 
  Standard Captioned Output? Yes//   (Yes)
  Include COMPUTED fields:  (N/Y/R/B): NO//  - No record number (IEN), no 
  Computed Fields
   
 NODE: GMRCCCRA                          LLP TYPE: TCP
   DEVICE TYPE: Non-Persistent Client    STATE: Open
   AUTOSTART: Enabled                    DNS DOMAIN: 127.0.0.1
   TIME STARTED: NOV 15, 2019@06:11:44   TASK NUMBER: 220520
   SHUTDOWN LLP ?: NO                    QUEUE SIZE: 10
   DESCRIPTION:   Sends CCRA Referrals /Community Care Consults to HSRM.  
   RE-TRANSMISSION ATTEMPTS: 1           READ TIMEOUT: 5
   ACK TIMEOUT: 5                        EXCEED RE-TRANSMIT ACTION: restart
   TCP/IP ADDRESS: 127.0.0.1         TCP/IP PORT: 9999
   TCP/IP SERVICE TYPE: CLIENT (SENDER)  PERSISTENT: NO
   RETENTION: 30                         TCP/IP PORT (OPTIMIZED): 9999
   IN QUEUE BACK POINTER: 81             IN QUEUE FRONT POINTER: 81
   OUT QUEUE BACK POINTER: 85            OUT QUEUE FRONT POINTER: 81

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0;CONSULT/REQUEST TRACKING;**[Patch List]**;JUN 1, 2018;Build 12

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: GMRCCCR1
    Before: B34012090   After: B63593566  **99,106,112,123,134,146**
Routine Name: GMRCCCRA
    Before:B200111825   After:B173047091  **99,106,112,123,134,146**
Routine Name: GMRCP146
    Before:       n/a   After:  B3124817  **146**
 
Routine list of preceding patches: 134

=============================================================================
User Information:
Entered By  :                               Date Entered  : SEP 16, 2019
Completed By:                               Date Completed: JAN 24, 2020
Released By :                               Date Released : JAN 28, 2020
=============================================================================


Packman Mail Message:
=====================

$END TXT
