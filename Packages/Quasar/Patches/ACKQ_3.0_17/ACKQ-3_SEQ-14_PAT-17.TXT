
=============================================================================
Run Date: OCT 27, 2010                     Designation: ACKQ*3*17
Package : ACKQ - QUASAR                       Priority: Mandatory
Version : 3        SEQ #14                      Status: Released
                  Compliance Date: NOV 27, 2010
=============================================================================

Associated patches: (v)ACKQ*3*7    <<= must be installed BEFORE `ACKQ*3*17'
                    (v)ACKQ*3*14   <<= must be installed BEFORE `ACKQ*3*17'

Subject: BROKEN POINTERS FROM STAFF ENTER EDIT

Category: 
  - Routine
  - Data Dictionary

Description:
============

 This patch will stop the generation of broken pointers in the A&SP STAFF
 File (#509850.3) when an A&SP STAFF member's USR CLASS is deleted.
  
 ***This is a combined patch with patch ECX*3*124.  Both patches will be 
 loaded into your system when the combined host file ACKQ_17_ECX_124.KID 
 is loaded. The patches are combined due to the fact that the ECX 
 application retrieves data from the ACKQ application. The change that is 
 being made in the ACKQ patch will affect the ECX application.  It is 
 imperative that both patches are installed at the same time to prevent 
 error. Combining these patches will ensure both patches are installed 
 together.***
  
 Associated Remedy Ticket(s):
 ============================
 HD0000000147036 - Quasar Patch ACKQ*3*9 - Amendments for Scheduling     
                                           Replacement
 Associated NSR(s):
 ==================
 N/A
  
 Participating Test Sites:
 =========================
 VA New York Harbor HCS
 James A Haley Veterans Hospital - Tampa
 Wilmington VA Medical Center
  
 Remedy Overview:
 ================
 HD0000000147036 - Quasar Patch ACKQ*3*9 - Amendments for Scheduling     
                                           Replacement
  
 PROBLEM: 
 --------
  
 The A&SP STAFF File (#509850.3) was pointing to the USR CLASS MEMBERSHIP
 File (#8930.3) which is itself a pointer to the NEW PERSON File (#200).
 This would cause problems when an A&SP STAFF MEMBER's USR CLASS was
 deleted. When this happened the entries in the A&SP STAFF File (#509850.3)
 would be stuck with hanging pointers and erroneous data.
  
 Resolution:
 -----------
  
 To correct this problem, the NAME field (#.01) in the A&SP STAFF File
 (#509850.5) has been changed to a free text version of the staff member's
 name. The STAFF MEMBER field (#.07) has been added and points to the A&SP
 STAFF member's entry in the NEW PERSON File (#200). Because of these Data
 Dictionary changes, the ACKQ CLINICIAN ENTER/EDIT menu had to be edited to
 handle the new and edited fields.
  
  
 MENU OPTION INFORMATION:
 ========================
 The new version of Staff (Enter/Edit) [ACKQAS CLINICIAN ENTRY] retains 
 the functionality of the old menu with a few small changes. Now, to add 
 a new staff member, "^A" must be used, this is because the pointer to 
 the NEW PERSON file (#200) has moved. Also note that if an A&SP STAFF 
 member under goes a name change in the NEW PERSON file (#200), entering 
 this option will synchronize the A&SP STAFF File (#509850.3) names with 
 the NEW PERSON file (#200) names. If a staff member has no valid PERSON 
 CLASS assigned, the system will automatically enter a status of STUDENT 
 in the STATUS (#.02) field in the A&SP Staff (#509850.3) File.
  
  
 DATA DICTIONARY CHANGES: 
 ========================
 Before Changes to A&SP Staff File
  
 The A&SP STAFF file (#509850.3) contains the names of all A&SP clinicians 
 and students.  Information in this file includes the staff person's name, 
 activation and inactivation dates, status (i.e., clinician, fee basis, 
 other provider, or student), and an ID number for sites that may wish to 
 enter provider by code number.  
   
 Entries in this file point to the USR CLASS MEMBERSHIP file (#8930.3) and 
 staff members must be present in File #8930.3 before they can be added to 
 this file.  
   
 Entries in this file are pointed to by fields in the A&SP CLINIC VISIT 
 file (#509850.6) in order to identify staff members who took part in a 
 given visit. Therefore, staff names should NEVER be deleted. Data in 
 this file SHOULD NOT be altered through the use of VA FileMan; input 
 should take place ONLY through the QUASAR menu options.  
   
 Per VHA Directive 10-93-142, this file definition SHOULD NOT be modified. 
  
 509850.3,.01  NAME                   0;1 POINTER TO USR CLASS MEMBERSHIP 
 FILE (#8930.3) (Required)
  
               Name                      
               LAST EDITED:      AUG 13, 2007 
               HELP-PROMPT:      Enter the name of the staff member. 
               DESCRIPTION:      The NAME field contains the name of the
                                 clinician, fee basis clinician, other 
                                 provider (e.g., health technician), or 
                                 student providing direct care in the 
                                 clinic.  New names can be added to the 
                                 A&SP STAFF file at any time. 
                                 However, staff names should NEVER be 
                                 deleted.  
  
               LAYGO TEST:       1,0)= W:'$D(ACKLAYGO) !!?5,"Input should 
                                take place ONLY through the QUASAR menu 
                                 options.",!! I $D(ACKLAYGO)
  
                                 UNEDITABLE
               NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY 
                                 PROGRAMMER
  
               CROSS-REFERENCE:  509850.3^B 
                                 1)= S ^ACK(509850.3,"B",$E(X,1,30),DA)=""
                                 2)= K ^ACK(509850.3,"B",$E(X,1,30),DA)
  
               CROSS-REFERENCE:  509850.3^D^MUMPS 
                                 1)= D STAFFREF^ACKQUTL6(X,DA)
                                 2)= Q
                                 3)= Do not Delete
                                 Creates a Cross reference using the user 
                                 actual name.  This reference is used for 
                                 partial name lookups during Provider Name 
                                 input.  
  
 After Changes
  
 The A&SP STAFF file (#509850.3) contains the names of all A&SP clinicians 
 and students.  Information in this file includes the staff person's name, 
 activation and inactivation dates, status (i.e., clinician, fee basis, 
 other provider, or student), and an ID number for sites that may wish to 
 enter provider by code number.  
  
 Entries in this file are pointed to by fields in the A&SP CLINIC VISIT 
 file (#509850.6) in order to identify staff members who took part in a 
 given visit. Therefore, staff names should NEVER be deleted.  
   
 Data in this file SHOULD NOT be altered through the use of VA FileMan; 
 input should take place ONLY through the QUASAR menu options.
   
 Per VHA Directive 10-93-142, this file definition SHOULD NOT be 
 modified.  
  
 509850.3,.01  NAME                   0;1 FREE TEXT (Required)
  
               Name                      
               INPUT TRANSFORM:  K:$L(X)>30!($L(X)<1) X
               LAST EDITED:      DEC 13, 2007 
               HELP-PROMPT:      Answer must be 1-30 characters in length 
               DESCRIPTION:      The NAME field contains the name of the
                                 clinician, fee basis clinician, other 
                                 provider (e.g., health technician), or 
                                 student providing direct care in the 
                                 clinic.  New names can be added to the 
                                 A&SP STAFF file at any time. However, 
                                 staff names should NEVER be deleted.  
  
               LAYGO TEST:       1,0)= D:'$D(ACKLAYGO) EN^DDIOL("Input 
                                 should take place ONLY through the QUASAR 
                                 menu options." ,"","!!?5") I $D(ACKLAYGO)
  
               CROSS-REFERENCE:  509850.3^B 
                                 1)= S ^ACK(509850.3,"B",$E(X,1,30),DA)=""
                                 2)= K ^ACK(509850.3,"B",$E(X,1,30),DA)
  
 509850.3,.07  STAFF MEMBER           1;1 POINTER TO NEW PERSON FILE (#200)
                                  (Required)
  
               Staff Member              
               LAST EDITED:      DEC 13, 2007 
               HELP-PROMPT:      THIS SHOULD NOT BE SET BY USERS 
               DESCRIPTION:      This field contains a pointer to the NEW 
                                 PERSON file (#200) to ensure that the 
                                 NAME field (#.01) in the A&SP STAFF file 
                                 (#509850.3) correctly corresponds to the 
                                 NAME field (#.01) in the NEW PERSON file 
                                 (#200).  
  
  
 Software Retrieval:
 ===================
 Patches for this installation are combined in host file 
 ACKQ_17_ECX_124.KID.
  
 Installation of this host file should be coordinated among the packages 
 affected since only one installation is necessary.
  
 The patches are:
  
      ACKQ*3.0*17
      ECX*3.0*124
  
 Sites may retrieve the KIDS build in one of the following ways:
  
 (1) The preferred method is to FTP the files from 
 download.vista.med.va.gov
 which will transmit the files from the first available FTP server.
  
 (2) Sites may also elect to retrieve the patch directly from a specific
 server as follows:
  
   OIFO               FTP ADDRESS                  DIRECTORY
   --------------     ------------------------     ------------------
   Albany             ftp.fo-albany.med.va.gov     anonymous.software
   Hines              ftp.fo-hines.med.va.gov      anonymous.software
   Salt Lake City     ftp.fo-slc.med.va.gov        anonymous.software
   
  
 DOCUMENTATION RETRIEVAL:
 ======================== 
 Sites may retrieve documentation in one of the following ways:
  
 (1) The preferred method is to FTP the files from
     download.vista.med.va.gov, which will transmit the files from the
     first available FTP server.
  
 (2) Sites may also elect to retrieve documentation directly from the 
     ANONYMOUS SOFTWARE DIRECTORY from a specific server as follows:
  
     Albany          ftp.fo-albany.med.va.gov
     Hines           ftp.fo-hines.med.va.gov
     Salt Lake City  ftp.fo-slc.med.va.gov
  
     The documentation distribution includes: 
  
     File Name               Description              Retrieval Format
     =========               ===========              ================
     ACKQ3_0UM.PDF           User Manual              BINARY
     ACKQ3_0TM.PDF           Techincal Manual         BINARY
  
 (3) Once released, documentation may be retrieved from VISTA Documentation
     Library (VDL) on the Internet at the following address:
     http://www.va.gov/vdl
  
  
  
  
 **************************************************************************
 *              NOTE BEFORE INSTALLATION OF ACKQ*3*17                     *
 * BEFORE INSTALLING THIS PATCH THE DATA IN THE A&SP STAFF FILE           *
 * (#509850.3) MUST BE ENSURED TO BE CORRECT. UPON LOADING THIS PATCH A   *
 * MAILMAN MESSAGE WILL BE SENT WITH THE CONTENTS OF THE A&SP STAFF FILE  *
 * (#509850.3) TO QUASAR SUPERVISORS. IF ANY DATA IN THE MAILMAN MESSAGE  *
 * IS INCORRECT DO NOT INSTALL THIS PATCH UNTIL IT HAS BEEN CORRECTED.    *
 **************************************************************************
  
  
 Installation Instructions:
 ==========================
   1. Users must be off the system before loading this patch. 
      Suggested time to install: non-peak requirement hours.
      This patch should take from 2 to 10 minutes to install
      depending on the system.
      
             Create a backup     1 to 5  minutes
             Kids Install        1 to 5  minutes
  
   2. Create a backup of the following global files before continuing:
  
             A&SP Staff         #509850.3         ^ACK(509850.3
  
   3. Obtain the file ACKQ_17_ECX_124.KID.
     
   4. From the Kernel Installation & Distribution System menu, select
      the Installation menu.
   
   5. Use Load a Distribution using ACKQ_17_ECX_124.KID when
      prompted to Enter a Host File name.  You may need to append a
      directory name.
   
   6. Once the load has been completed this is when the QUASAR supervisor 
      should look at the Mailman message to determine if there is any
      incorrect data in the A&SP Staff File (#5095850.3).
  
   7. If the Mailman message indicates there is no incorrect data, you can 
      go to step 8 and continue with installing the patch.  Now if the
      message indicates there is incorrect data, you will need to contact
      your local support specialist to ensure that the data has been
      corrected before installing the patch.
  
   8. From this menu, you may select to use the following options
      (when prompted for INSTALL NAME, enter ACKQ*3.0*17):
          a.  Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
          b.  Print Transport Global - This option will allow you to view
              the components of the KIDS build.
          c.  Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this 
              patch is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
          d.  Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
    
   9. When prompted "Want KIDS to INHIBIT LOGONs during the install? NO//"
      respond NO.
    
  10. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? NO//" respond NO. 
  
   
  
 **Routines ACKQEN17 & ACKQP17 both will be automatically deleted once the 
 patch is installed.**

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0;QUASAR;**[Patch List]**;Feb 11, 2000;Build 20

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ACKQASU4
    Before: B45662899   After: B44737991  **17**
Routine Name: ACKQCLED
    Before:       n/a   After: B17815400  **17**
Routine Name: ACKQEN17
    Before:       n/a   After:  B9822057  **17**
Routine Name: ACKQP17
    Before:       n/a   After:  B8121623  **17**
Routine Name: ACKQRU
    Before: B16951909   After: B18240668  **17**
Routine Name: ACKQUTL4
    Before: B85095923   After: B81469112  **1,8,14,17**
Routine Name: ACKQUTL6
    Before: B69249054   After: B72728308  **1,7,17**

=============================================================================
User Information:
Entered By  : DEHGHANIAN,JAMSHID            Date Entered  : JUL 24, 2007
Completed By: HEFFERNAN,COREY               Date Completed: OCT 07, 2010
Released By : MILLIGAN,KERRY                Date Released : OCT 27, 2010
=============================================================================


Packman Mail Message:
=====================

No routines included
