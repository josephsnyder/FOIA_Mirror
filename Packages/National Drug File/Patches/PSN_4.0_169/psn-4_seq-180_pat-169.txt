$TXT Created by PROGRAMMER,EIGHTEEN at REHU.FO-BIRM.MED.VA.GOV  (KIDS) on Saturday, 12/13/08 at 15:23
=============================================================================
Run Date: FEB 04, 2009                     Designation: PSN*4*169
Package : PSN - NATIONAL DRUG FILE            Priority: Mandatory
Version : 4       SEQ #180                      Status: Released
                  Compliance Date: MAR 07, 2009
=============================================================================

Associated patches: (v)PSN*4*160   <<= must be installed BEFORE `PSN*4*169'
                    (v)PSN*4*188   <<= must be installed BEFORE `PSN*4*169'

Subject: PHARMACY RE-ENGINEERING ORDER CHECKS SUPPORT

Category: 
  - Data Dictionary
  - Routine
  - Enhancement (Mandatory)

Description:
============

 This patch is being released in conjunction with Pharmacy Data Management
 patch PSS*1.0*129. Together, these patches provide the functionality
 needed to prepare for the release of Pharmacy Re-Engineering (PRE) V. 0.5,
 which will change the current Pharmacy Order Checking system from using
 the data stored in VistA to using data from the First DataBank (FDB)
 commercial database system. All of the new functionality needed to do the 
 set-up work is included in patch PSS*1.0*129. The PSS*1.0*129 patch also 
 references the documentation needed for the set-up work.
  
 This patch makes some changes to the National Drug File package that must 
 be in place prior to the install of patch PSS*1.0*129. The National Drug
 File changes included in this patch are:
  
 1) Exports the Data Dictionary for the new OVERRIDE DF DOSE CHK EXCLUSION
    (#31) Field of the VA PRODUCT (#50.68) File.
 2) Populates the new OVERRIDE DF DOSE CHK EXCLUSION (#31) Field of the
    VA PRODUCT (#50.68) File with data.
 3) Modifies the PSNAPIS Application Programmer Interface (API) to return
    data from the new OVERRIDE DF DOSE CHK EXCLUSION (#31) Field of the
    VA PRODUCT (#50.68) File. A new OVRIDE Line Tag has been added to
    return this information. See Database Integration Agreement (DBIA) 2531
    for more information.
 4) Modifies the INQUIRE TO VA PRODUCT INFO FOR LOCAL DRUG [PSNLOOK] option
    and the INQUIRE TO NATIONAL FILES [PSNACT] option to display the data
    in the new OVERRIDE DF DOSE CHK EXCLUSION (#31) Field of the VA PRODUCT
    (#50.68) File. If the value of the new field is "YES", a message will
    be displayed to inform the user of the override significance. This
    field works in conjunction with the new EXCLUDE FROM DOSAGE CHECKS
    (#11) Field of the DOSAGE FORM (#50.606) File, which is being released
    in patch PSS*1.0*129.
 5) This patch makes these corrections to the INQUIRE TO VA PRODUCT
    INFO FOR LOCAL DRUG [PSNLOOK] option:
      a) Sometimes the Active Ingredients would not display.
      b) When the Active Ingredients did display, the Strength
         that displayed next to the Active Ingredient was not the
         Strength of the Active Ingredient, it was the Strength
         of the VA Product.
      c) The Drug Unit was not always displaying.
      d) Only the CS FEDERAL SCHEDULE code was displaying, and not
         the text.
      e) When displaying the Active Ingredients, the text (Primary)
         will no longer display next to an Active Ingredient that is a
         Primary Ingredient, and the Primary Ingredient will now display
         if the Ingredient of the VA Product has a Primary Ingredient.
 6) This patch makes these corrections to the Inquire to National Files 
    [PSNACT] option:
      a) Only the CS FEDERAL SCHEDULE code was displaying, and not
         the text.
      b) The National Formulary Restriction display was being truncated
         after one line if it was two or more lines in length.
                              
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch. 
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 There are no Remedy tickets associated with this patch.
  
  
 Overview of Remedy Ticket(s):
 -----------------------------
 There are no Remedy tickets associated with this patch. 
  
  
 Components Exported With Patch: 
 -------------------------------
  
  
 The following is a list of fields included in this patch:
  
 Field Name                 (Number)     File Name             (Number)
 -----------------------------------     ------------------------------
 OVERRIDE DF DOSE CHK EXCLUSION   31     VA PRODUCT               50.68
                                                      
                                  
 Documentation Retrieval:
 ------------------------
 Updated documentation describing the new functionality introduced by this 
 patch is available.
  
 The preferred method is to FTP the files from download.vista.med.va.gov.
 This transmits the files from the first available FTP server. Sites may
 also elect to retrieve documentation directly from a specific server as 
 follows:
  
 Albany          ftp.fo-albany.med.va.gov  <ftp://ftp.fo-albany.med.va.gov>
 Hines           ftp.fo-hines.med.va.gov   <ftp://ftp.fo-hines.med.va.gov>
 Salt Lake City  ftp.fo-slc.med.va.gov     <ftp://ftp.fo-slc.med.va.gov>
  
 The documentation will be in the form of Adobe Acrobat files.
  
 Documentation can also be found on the VHA Software Document Library
 page at:  http://www.va.gov/vdl/ 
  
 Below is a list of the files related to this patch that will be needed and
 available via the FTP sites listed above.
  
 File Description                             File Name            FTP Mode
 --------------------------------------------------------------------------
 NDF Technical Manual (Revised February 2009) PSN_4_TM_R0209.PDF   (binary)
 NDF Technical Manual Change Pages            PSN_4_P169_TM_CP.PDF (binary)
 NDF User Manual (Revised February 2009)      PSN_4_UM_R0209.PDF   (binary)
 NDF User Manual Change Pages                 PSN_4_P169_UM_CP.PDF (binary)
 Pharmacy Re-Engineering (PRE) API Manual     PHAR_1_API_R0209.PDF (binary)
                                                                          
  
 Test Sites:
 -----------
 CENTRAL PLAINS HCS
 LOUISVILLE, KY
 NEW JERSEY HCS
 NORTH CHICAGO, IL
 NORTH FLORIDA/SOUTH GEORGIA
 RICHMOND, VA
 TUSCALOOSA, AL 
                
  
 Pre/Post Installation Overview:
 -------------------------------
 Upon installation of the patch, the ENVIRONMENT CHECK routine PSNEN169 
 will prompt the patch installer to enter at least one person, (other than 
 the installer), to receive the VistA mail message when the POST-INIT 
 routine has completed. This person should be the Pharmacy ADPAC or a 
 designee.
  
 The POST-INIT routine PSNPO169 will populate the OVERRIDE DF DOSE CHK 
 EXCLUSION (#31) Field of the VA PRODUCT (#50.68) File, and will also 
 generate the mail message indicating the POST-INIT routine has run to 
 completion.
  
  
        ================INSTALLATION INSTRUCTIONS =================
 The PSN*4.0*169 patch includes a routine (PSNAPIS) that contains Supported
 References that all packages can call. These packages are not just limited
 to Pharmacy packages (i.e. Outpatient Pharmacy, Inpatient Medications,
 Consolidated Mail Outpatient Pharmacy (CMOP)), but also include
 Computerized Patient Record System (CPRS), Adverse Reaction Tracking,
 Clinical Reminders, to name a few. For that reason, to avoid any "EDIT"
 errors, we are asking you to install this patch during Non-Peak hours for
 all Clinical applications. This also includes avoiding installation during
 tasked background jobs that you have queued to run, such as messages to
 and from CMOP, PSO AUTOCANCEL, PSO EXPIRE PRESCRIPTIONS, ORTIME RUN, etc.
 In summary, any processes from any Clinical Applications. Also, this patch
 should be installed when nobody is using the INQUIRE TO VA PRODUCT INFO
 FOR LOCAL DRUG [PSNLOOK] option and the INQUIRE TO NATIONAL FILES [PSNACT]
 option.
  
 Install Time - less than 10 minutes
  
 ************ PRE-INSTALLATION INSTRUCTIONS **************
  
 Make sure you have the name of the Pharmacy ADPAC or a designee, 
 that should know when the POST INIT of this patch is complete. That 
 name(s) should be entered when the ENVIRONMENT CHECK routine prompts for 
 the recipient(s) of the mail message that will indicate that 
 the installation is complete.
 *********************************************************
  
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
  
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
  
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter PSN*4.0*169):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
  
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install and enter "PSN*4.0*169" at the INSTALL NAME prompt.
         The message below will display followed by the PHARMACY USER
         prompt. You must enter at least one Pharmacy user in order to
         proceed with the installation of this patch. See the message
         below for instructions on which user(s) to enter. Then after all 
         users have been entered, a "Continue with install" prompt will
         be issued.
   
                  -------------------------------------
    
      Will first run the Environment Check Routine, PSNEN169
  
      Upon completion of the Post Install, a mail message will be sent
      to the patch installer, and at least one pharmacy user. Please
      enter one or more Pharmacy users (e.g., Pharmacy ADPAC or designee)
      who should receive this message.
  
  
      Enter Pharmacy User:
  
      Continue with install? Y//
  
  
                 -------------------------------------
  
    b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
        NO//'  answer NO
    c.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
        and Protocols? NO//'  answer NO
  
 ************ POST-INSTALLATION INSTRUCTIONS **************
 Please verify that the VistA mail message indicating the POST-INIT has run
 to completion has been received. If this message is not received, please
 log a Remedy Ticket. The message subject will be:
 ---------------------------------
 PSN*4.0*169 Installation Complete
 --------------------------------- 
  
 And the message text will be:
 --------------------------------------------------
 The Installation of patch PSN*4.0*169 is complete.
 --------------------------------------------------
               
 The receipt of this VistA mail message will verify the POST-INIT has run 
 to completion.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;4.0; NATIONAL DRUG FILE;**[Patch List]**; 30 Oct 98;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSNACT
    Before: B76091993   After:B101592484  **22,35,47,62,65,70,160,169**
Routine Name: PSNAPIS
    Before: B44635288   After: B45654348  **2,3,47,70,169**
Routine Name: PSNEN169
    Before:       n/a   After:  B5072308  **169**
Routine Name: PSNLOOK
    Before: B27535737   After: B48278618  **2,3,5,11,22,27,62,70,169**
Routine Name: PSNPO169
    Before:       n/a   After:  B3132500  **169**
 
Routine list of preceding patches: 160

=============================================================================
User Information:
Entered By  : RUZBACKI,RON T                Date Entered  : MAR 04, 2008
Completed By: IYER,ARTI                     Date Completed: FEB 03, 2009
Released By : CAMPBELL,THOMAS               Date Released : FEB 04, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
