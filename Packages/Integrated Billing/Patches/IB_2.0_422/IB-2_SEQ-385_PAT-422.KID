Released IB*2*422 SEQ #385
Extracted from mail message
**KIDS**:IB*2.0*422^

**INSTALL NAME**
IB*2.0*422
"BLD",8190,0)
IB*2.0*422^INTEGRATED BILLING^0^3090824^y
"BLD",8190,1,0)
^^6^6^3090824^
"BLD",8190,1,1,0)
IB*2.0*422 is being released to support the Treating Specialty changes 
"BLD",8190,1,2,0)
released in patch: DG*5.3*813.
"BLD",8190,1,3,0)
   
"BLD",8190,1,4,0)
Treating Specialties in the SPECIALTY (#42.4) file are being updated by 
"BLD",8190,1,5,0)
patch DG*5.3*813.  This patch (IB*2.0*422) updates Integrated Billing to 
"BLD",8190,1,6,0)
properly handle the billing of the new Treating Specialties.
"BLD",8190,4,0)
^9.64PA^^
"BLD",8190,6.3)
2
"BLD",8190,"KRN",0)
^9.67PA^779.2^20
"BLD",8190,"KRN",.4,0)
.4
"BLD",8190,"KRN",.401,0)
.401
"BLD",8190,"KRN",.402,0)
.402
"BLD",8190,"KRN",.403,0)
.403
"BLD",8190,"KRN",.5,0)
.5
"BLD",8190,"KRN",.84,0)
.84
"BLD",8190,"KRN",3.6,0)
3.6
"BLD",8190,"KRN",3.8,0)
3.8
"BLD",8190,"KRN",9.2,0)
9.2
"BLD",8190,"KRN",9.8,0)
9.8
"BLD",8190,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",8190,"KRN",9.8,"NM",1,0)
IBCRBG2^^0^B7843001
"BLD",8190,"KRN",9.8,"NM","B","IBCRBG2",1)

"BLD",8190,"KRN",19,0)
19
"BLD",8190,"KRN",19.1,0)
19.1
"BLD",8190,"KRN",101,0)
101
"BLD",8190,"KRN",409.61,0)
409.61
"BLD",8190,"KRN",771,0)
771
"BLD",8190,"KRN",779.2,0)
779.2
"BLD",8190,"KRN",870,0)
870
"BLD",8190,"KRN",8989.51,0)
8989.51
"BLD",8190,"KRN",8989.52,0)
8989.52
"BLD",8190,"KRN",8994,0)
8994
"BLD",8190,"KRN","B",.4,.4)

"BLD",8190,"KRN","B",.401,.401)

"BLD",8190,"KRN","B",.402,.402)

"BLD",8190,"KRN","B",.403,.403)

"BLD",8190,"KRN","B",.5,.5)

"BLD",8190,"KRN","B",.84,.84)

"BLD",8190,"KRN","B",3.6,3.6)

"BLD",8190,"KRN","B",3.8,3.8)

"BLD",8190,"KRN","B",9.2,9.2)

"BLD",8190,"KRN","B",9.8,9.8)

"BLD",8190,"KRN","B",19,19)

"BLD",8190,"KRN","B",19.1,19.1)

"BLD",8190,"KRN","B",101,101)

"BLD",8190,"KRN","B",409.61,409.61)

"BLD",8190,"KRN","B",771,771)

"BLD",8190,"KRN","B",779.2,779.2)

"BLD",8190,"KRN","B",870,870)

"BLD",8190,"KRN","B",8989.51,8989.51)

"BLD",8190,"KRN","B",8989.52,8989.52)

"BLD",8190,"KRN","B",8994,8994)

"BLD",8190,"QDEF")
^^^^NO^^^^^^YES
"BLD",8190,"QUES",0)
^9.62^^
"BLD",8190,"REQB",0)
^9.611^1^1
"BLD",8190,"REQB",1,0)
IB*2.0*399^1
"BLD",8190,"REQB","B","IB*2.0*399",1)

"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
422^3090824
"PKG",200,22,1,"PAH",1,1,0)
^^6^6^3090824
"PKG",200,22,1,"PAH",1,1,1,0)
IB*2.0*422 is being released to support the Treating Specialty changes 
"PKG",200,22,1,"PAH",1,1,2,0)
released in patch: DG*5.3*813.
"PKG",200,22,1,"PAH",1,1,3,0)
   
"PKG",200,22,1,"PAH",1,1,4,0)
Treating Specialties in the SPECIALTY (#42.4) file are being updated by 
"PKG",200,22,1,"PAH",1,1,5,0)
patch DG*5.3*813.  This patch (IB*2.0*422) updates Integrated Billing to 
"PKG",200,22,1,"PAH",1,1,6,0)
properly handle the billing of the new Treating Specialties.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IBCRBG2")
0^1^B7843001^B7812503
"RTN","IBCRBG2",1,0)
IBCRBG2 ;ALB/ARH - RATES: BILL SOURCE EVENTS (INPT CONT) ; 01-OCT-03
"RTN","IBCRBG2",2,0)
 ;;2.0;INTEGRATED BILLING;**245,175,332,364,399,422**;21-MAR-94;Build 2
"RTN","IBCRBG2",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","IBCRBG2",4,0)
 ;
"RTN","IBCRBG2",5,0)
INPTRSET(IBIFN,CS) ; reset Inpatient data due to bedsection Tort 03 and Other Type of Care RC v2.0
"RTN","IBCRBG2",6,0)
 ; (based on INPTPTF since that deals with timeframe and end of bill)
"RTN","IBCRBG2",7,0)
 N IBRC S IBRC=1 I +$G(CS),$E($G(^IBE(363.1,+CS,0)),1,2)'="RC" S IBRC=0
"RTN","IBCRBG2",8,0)
 ;
"RTN","IBCRBG2",9,0)
 D INPTBS(IBIFN,IBRC)
"RTN","IBCRBG2",10,0)
 D INPTOTH(IBIFN,IBRC)
"RTN","IBCRBG2",11,0)
 Q
"RTN","IBCRBG2",12,0)
 ;
"RTN","IBCRBG2",13,0)
INPTBS(IBIFN,RC) ; with output from INPTPTF^IBCRBG, reset bedsections due to changes with Tort 03 and RC
"RTN","IBCRBG2",14,0)
 ; - Some Specialties are changed to PRRTP bedsection (beginning with Tort 03)
"RTN","IBCRBG2",15,0)
 ; - Some Specialties are changed to ICU bedsection for RC only (beginning with RC v2.0)
"RTN","IBCRBG2",16,0)
 ; - Nursing Home Care and Observation bedsections are not billable with RC DRG (per diem) so remove DRG
"RTN","IBCRBG2",17,0)
 ; (based on INPTPTF since that deals with timeframe and end of bill)
"RTN","IBCRBG2",18,0)
 ;
"RTN","IBCRBG2",19,0)
 N IBDT,IBLN,IBSPCLTY,IBNLN,IBNBS,IBNDRG,IBCGTY
"RTN","IBCRBG2",20,0)
 ;
"RTN","IBCRBG2",21,0)
 S IBDT=0 F  S IBDT=$O(^TMP($J,"IBCRC-INDT",IBDT)) Q:'IBDT  D
"RTN","IBCRBG2",22,0)
 . S IBLN=$G(^TMP($J,"IBCRC-INDT",IBDT)) Q:'IBLN
"RTN","IBCRBG2",23,0)
 . S IBSPCLTY=$P(IBLN,U,6) Q:'IBSPCLTY
"RTN","IBCRBG2",24,0)
 . ;
"RTN","IBCRBG2",25,0)
 . S IBNLN=IBLN
"RTN","IBCRBG2",26,0)
 . S IBNBS=$$BSUPD(IBSPCLTY,IBDT,+$G(RC)) I +IBNBS S $P(IBNLN,U,2)=+IBNBS
"RTN","IBCRBG2",27,0)
 . S IBNDRG=$$NODRG(IBSPCLTY) I +IBNDRG S $P(IBNLN,U,4)=""
"RTN","IBCRBG2",28,0)
 . I 'IBNBS,'IBNDRG Q
"RTN","IBCRBG2",29,0)
 . S ^TMP($J,"IBCRC-INDT",IBDT)=IBNLN
"RTN","IBCRBG2",30,0)
 Q
"RTN","IBCRBG2",31,0)
 ; 
"RTN","IBCRBG2",32,0)
INPTOTH(IBIFN,RC) ; with output from INPTPTF^IBCRBG, reset Other type of care and Tort 03 changes
"RTN","IBCRBG2",33,0)
 ; - If type of care is Other then bedsection is replaced and DRG deleted (began with RC v2.0)
"RTN","IBCRBG2",34,0)
 ; (based on INPTPTF since that deals with timeframe and end of bill)
"RTN","IBCRBG2",35,0)
 ;
"RTN","IBCRBG2",36,0)
 N IBOT,IBOTLN,IBBS,IBDT1,IBDT2,IBDT,IBLN,IBNLN Q:'$G(RC)
"RTN","IBCRBG2",37,0)
 I +$G(IBIFN) S IBOT=0 F  S IBOT=$O(^DGCR(399,IBIFN,"OT",IBOT)) Q:'IBOT  D
"RTN","IBCRBG2",38,0)
 . S IBOTLN=$G(^DGCR(399,IBIFN,"OT",IBOT,0)) Q:'IBOTLN
"RTN","IBCRBG2",39,0)
 . S IBDT1=+$P(IBOTLN,U,2) Q:'IBDT1  S IBDT2=+$P(IBOTLN,U,3) Q:'IBDT2
"RTN","IBCRBG2",40,0)
 . I (IBDT1\1)=(IBDT2\1) S IBDT2=IBDT2+.3 ; allow for 1 day SNF stay
"RTN","IBCRBG2",41,0)
 . S IBBS=+IBOTLN Q:'IBOTLN
"RTN","IBCRBG2",42,0)
 . ;
"RTN","IBCRBG2",43,0)
 . S IBDT=IBDT1-.1 F  S IBDT=$O(^TMP($J,"IBCRC-INDT",IBDT)) Q:('IBDT)!(IBDT'<IBDT2)  D
"RTN","IBCRBG2",44,0)
 .. S IBLN=$G(^TMP($J,"IBCRC-INDT",IBDT)) Q:'IBLN
"RTN","IBCRBG2",45,0)
 .. I IBDT<$$RC20 Q
"RTN","IBCRBG2",46,0)
 .. ;
"RTN","IBCRBG2",47,0)
 .. S IBNLN=IBLN
"RTN","IBCRBG2",48,0)
 .. S $P(IBNLN,U,2)=+IBBS,$P(IBNLN,U,4)=""
"RTN","IBCRBG2",49,0)
 .. S ^TMP($J,"IBCRC-INDT",IBDT)=IBNLN
"RTN","IBCRBG2",50,0)
 Q
"RTN","IBCRBG2",51,0)
 ;
"RTN","IBCRBG2",52,0)
 ;
"RTN","IBCRBG2",53,0)
BSUPD(SPCLTY,DATE,RC) ; return updated bedsection name for specialty passed in (42.4 ifn)
"RTN","IBCRBG2",54,0)
 ; beginning with TORT 2003 some specialties were moved to new PRRTP bedsection
"RTN","IBCRBG2",55,0)
 ; beginning with RC v2.0 some specialties were moved to a new ICU bedsection, only applies to RC charges
"RTN","IBCRBG2",56,0)
 N IBX,IBY,IBZ S (IBZ,IBX)="",SPCLTY=","_+$G(SPCLTY)_",",DATE=$S(+$G(DATE):(DATE\1),1:DT)
"RTN","IBCRBG2",57,0)
 I DATE'<$$TORT03,",25,26,27,28,29,38,39,"[SPCLTY S IBX="PRRTP"
"RTN","IBCRBG2",58,0)
 I +$G(RC),DATE'<$$RC20,",12,13,16,17,63,"[SPCLTY S IBX="ICU"
"RTN","IBCRBG2",59,0)
 I IBX'="" S IBY=$O(^DGCR(399.1,"B",IBX,0)) I +IBY S IBZ=IBY_U_IBX
"RTN","IBCRBG2",60,0)
 Q IBZ
"RTN","IBCRBG2",61,0)
 ;
"RTN","IBCRBG2",62,0)
TORT03() ; return effective date of TORT 2003, date when PRRTP bedsection specialties changed
"RTN","IBCRBG2",63,0)
 Q 3040107
"RTN","IBCRBG2",64,0)
 ;
"RTN","IBCRBG2",65,0)
RC20() ; return effective date of RC v2.0, date when ICU bedsection specialties changed
"RTN","IBCRBG2",66,0)
 Q 3031219
"RTN","IBCRBG2",67,0)
 ;
"RTN","IBCRBG2",68,0)
NODRG(SPCLTY) ; return specialty ifn followed by bedsection name if the specialty should not be charged a DRG charge
"RTN","IBCRBG2",69,0)
 N IBX,IBS S IBX=0,IBS=","_+$G(SPCLTY)_","
"RTN","IBCRBG2",70,0)
 I ",80,81,96,42,43,44,45,46,64,66,67,68,69,95,100,101,102,"[IBS S IBX=+SPCLTY_"^Nursing Home Care"
"RTN","IBCRBG2",71,0)
 I ",18,23,24,36,41,65,94,108,"[IBS S IBX=+SPCLTY_"^Observation"
"RTN","IBCRBG2",72,0)
 Q IBX
"VER")
8.0^22.0
"BLD",8190,6)
^385
**END**
**END**
