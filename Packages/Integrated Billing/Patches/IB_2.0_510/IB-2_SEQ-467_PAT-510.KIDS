Released IB*2*510 SEQ #467
Extracted from mail message
**KIDS**:IB*2.0*510^

**INSTALL NAME**
IB*2.0*510
"BLD",9489,0)
IB*2.0*510^INTEGRATED BILLING^0^3131127^y
"BLD",9489,1,0)
^^5^5^3131016^
"BLD",9489,1,1,0)
This patch addresses two issues. The first issue is about the update of 
"BLD",9489,1,2,0)
the administrative charge based on a new dispensing fee $13.18 for rate 
"BLD",9489,1,3,0)
types: Humanitarian and Ineligible on third party pharmacy prescription 
"BLD",9489,1,4,0)
claims. The second issue is to inactivate the non-billable reason code:
"BLD",9489,1,5,0)
CV25 HDHP PLAN NOT BILLED for the Claims Tracking module.
"BLD",9489,4,0)
^9.64PA^^
"BLD",9489,6)
^440
"BLD",9489,6.3)
26
"BLD",9489,"ABPKG")
n
"BLD",9489,"INIT")
POST^IB20P510
"BLD",9489,"KRN",0)
^9.67PA^779.2^20
"BLD",9489,"KRN",.4,0)
.4
"BLD",9489,"KRN",.401,0)
.401
"BLD",9489,"KRN",.402,0)
.402
"BLD",9489,"KRN",.403,0)
.403
"BLD",9489,"KRN",.5,0)
.5
"BLD",9489,"KRN",.84,0)
.84
"BLD",9489,"KRN",3.6,0)
3.6
"BLD",9489,"KRN",3.8,0)
3.8
"BLD",9489,"KRN",9.2,0)
9.2
"BLD",9489,"KRN",9.8,0)
9.8
"BLD",9489,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9489,"KRN",9.8,"NM",1,0)
IB3PSOU^^0^B21192131
"BLD",9489,"KRN",9.8,"NM","B","IB3PSOU",1)

"BLD",9489,"KRN",19,0)
19
"BLD",9489,"KRN",19,"NM",0)
^9.68A^^
"BLD",9489,"KRN",19.1,0)
19.1
"BLD",9489,"KRN",101,0)
101
"BLD",9489,"KRN",409.61,0)
409.61
"BLD",9489,"KRN",771,0)
771
"BLD",9489,"KRN",779.2,0)
779.2
"BLD",9489,"KRN",870,0)
870
"BLD",9489,"KRN",8989.51,0)
8989.51
"BLD",9489,"KRN",8989.52,0)
8989.52
"BLD",9489,"KRN",8994,0)
8994
"BLD",9489,"KRN","B",.4,.4)

"BLD",9489,"KRN","B",.401,.401)

"BLD",9489,"KRN","B",.402,.402)

"BLD",9489,"KRN","B",.403,.403)

"BLD",9489,"KRN","B",.5,.5)

"BLD",9489,"KRN","B",.84,.84)

"BLD",9489,"KRN","B",3.6,3.6)

"BLD",9489,"KRN","B",3.8,3.8)

"BLD",9489,"KRN","B",9.2,9.2)

"BLD",9489,"KRN","B",9.8,9.8)

"BLD",9489,"KRN","B",19,19)

"BLD",9489,"KRN","B",19.1,19.1)

"BLD",9489,"KRN","B",101,101)

"BLD",9489,"KRN","B",409.61,409.61)

"BLD",9489,"KRN","B",771,771)

"BLD",9489,"KRN","B",779.2,779.2)

"BLD",9489,"KRN","B",870,870)

"BLD",9489,"KRN","B",8989.51,8989.51)

"BLD",9489,"KRN","B",8989.52,8989.52)

"BLD",9489,"KRN","B",8994,8994)

"BLD",9489,"QDEF")
^^^^^^^^^^NO
"BLD",9489,"QUES",0)
^9.62^^
"BLD",9489,"REQB",0)
^9.611^1^1
"BLD",9489,"REQB",1,0)
IB*2.0*437^2
"BLD",9489,"REQB","B","IB*2.0*437",1)

"INIT")
POST^IB20P510
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
510^3131127
"PKG",200,22,1,"PAH",1,1,0)
^^5^5^3131127
"PKG",200,22,1,"PAH",1,1,1,0)
This patch addresses two issues. The first issue is about the update of 
"PKG",200,22,1,"PAH",1,1,2,0)
the administrative charge based on a new dispensing fee $13.18 for rate 
"PKG",200,22,1,"PAH",1,1,3,0)
types: Humanitarian and Ineligible on third party pharmacy prescription 
"PKG",200,22,1,"PAH",1,1,4,0)
claims. The second issue is to inactivate the non-billable reason code:
"PKG",200,22,1,"PAH",1,1,5,0)
CV25 HDHP PLAN NOT BILLED for the Claims Tracking module.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IB20P510")
0^^B11251231^n/a
"RTN","IB20P510",1,0)
IB20P510 ;ALB/CXW - IB*2.0*510 RATE SCHEDULE & NON-BILLABLE REASON ; 09/25/2013 
"RTN","IB20P510",2,0)
 ;;2.0;INTEGRATED BILLING;**510**;21-MAR-94;Build 26
"RTN","IB20P510",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","IB20P510",4,0)
 Q
"RTN","IB20P510",5,0)
 ;
"RTN","IB20P510",6,0)
POST ; Post-install of patch installation 
"RTN","IB20P510",7,0)
 D MES^XPDUTL("IB*2.0*510 Post-Install starts...")
"RTN","IB20P510",8,0)
 D ADM,RNB
"RTN","IB20P510",9,0)
 D MES^XPDUTL("IB*2.0*510 Post-Install is complete.")
"RTN","IB20P510",10,0)
 Q
"RTN","IB20P510",11,0)
 ;
"RTN","IB20P510",12,0)
ADM ; Update national rate schedules to file (#363)
"RTN","IB20P510",13,0)
 N IBADFE,IBADJUST,IBCT,IBDISP,IBEFFDT,IBNM,IBRATY,IBRTN,IBT,IBX,IBY
"RTN","IB20P510",14,0)
 S IBADFE="",IBCT=0
"RTN","IB20P510",15,0)
 D MES^XPDUTL("  Updating national rate Schedules with administrative fee:")
"RTN","IB20P510",16,0)
 F IBX=1:1 S IBT=$P($T(RSF+IBX),";",3) Q:'$L(IBT)  D
"RTN","IB20P510",17,0)
 . S IBNM=$P(IBT,U)
"RTN","IB20P510",18,0)
 . S IBRATY=$P(IBT,U,2)
"RTN","IB20P510",19,0)
 . S IBRTN=$O(^DGCR(399.3,"B",IBRATY,0))
"RTN","IB20P510",20,0)
 . S IBDISP=$P(IBT,U,3)
"RTN","IB20P510",21,0)
 . S IBADJUST=$P(IBT,U,4)
"RTN","IB20P510",22,0)
 . S IBEFFDT=$P(IBT,U,5)
"RTN","IB20P510",23,0)
 . I $$RSEXIST(IBEFFDT,IBNM) D MES^XPDUTL("    >>>"_IBNM_" for "_IBRATY_" already exists") Q
"RTN","IB20P510",24,0)
 . I 'IBRTN D MES^XPDUTL("    >>>"_IBRATY_" rate type not defined, "_IBNM_" rate schedule not created") Q
"RTN","IB20P510",25,0)
 . ; latest ien if rate type has multiple
"RTN","IB20P510",26,0)
 . I $P($G(^DGCR(399.3,+IBRTN,0)),U,3) S IBRTN=$O(^DGCR(399.3,"B",IBRATY,99999),-1)
"RTN","IB20P510",27,0)
 . I $P($G(^DGCR(399.3,+IBRTN,0)),U,3) D MES^XPDUTL("    >>>"_IBRATY_" rate type not active, "_IBNM_" not created") Q
"RTN","IB20P510",28,0)
 . ;
"RTN","IB20P510",29,0)
 . D ENT^IB3PSOU(IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST)
"RTN","IB20P510",30,0)
 . ;
"RTN","IB20P510",31,0)
 . I $$RSEXIST(IBEFFDT,IBNM) S IBCT=IBCT+1 D MES^XPDUTL("    >>>"_IBNM_" for "_IBRATY_" rate schedule added")
"RTN","IB20P510",32,0)
 D MES^XPDUTL("  Total "_IBCT_$S(IBCT=1:" entry",1:" entries")_" updated in the file (#363)")
"RTN","IB20P510",33,0)
 D MES^XPDUTL(" ")
"RTN","IB20P510",34,0)
ADMQ Q
"RTN","IB20P510",35,0)
 ;
"RTN","IB20P510",36,0)
RSEXIST(IBEFFDT,IBNM) ; return RS IFN if Rate Schedule exists for Effective Date
"RTN","IB20P510",37,0)
 N IBX,IBRSFN,IBRS0 S IBX=0
"RTN","IB20P510",38,0)
 S IBRSFN=0 F  S IBRSFN=$O(^IBE(363,IBRSFN))  Q:'IBRSFN  D  I IBX Q
"RTN","IB20P510",39,0)
 . S IBRS0=$G(^IBE(363,IBRSFN,0))
"RTN","IB20P510",40,0)
 . I $P(IBRS0,U,1)=IBNM,$P(IBRS0,U,5)=IBEFFDT S IBX=IBRSFN
"RTN","IB20P510",41,0)
 Q IBX
"RTN","IB20P510",42,0)
 ;
"RTN","IB20P510",43,0)
RNB ; Inactivate existing standard RNB in file (#356.8)
"RTN","IB20P510",44,0)
 N X,Y,DA,DIE,DR,IBCONM,IBCT,IBNM,IBRNB,IBRNB0,IBT,IBX S IBCT=0
"RTN","IB20P510",45,0)
 D MES^XPDUTL("  Inactivating entries of Claims Tracking non-billable reasons:")
"RTN","IB20P510",46,0)
 F IBX=1:1 S IBT=$P($T(OCODE+IBX),";",3) Q:'$L(IBT)  D
"RTN","IB20P510",47,0)
 . S IBCONM=$P(IBT,U,1)_" for "_$P(IBT,U,2)
"RTN","IB20P510",48,0)
 . S IBNM=$P(IBT,U,2)
"RTN","IB20P510",49,0)
 . S IBRNB=$O(^IBE(356.8,"B",IBNM,0))
"RTN","IB20P510",50,0)
 . S IBRNB0=$G(^IBE(356.8,+IBRNB,0))
"RTN","IB20P510",51,0)
 . I 'IBRNB D MES^XPDUTL("    >>>"_IBCONM_" not found") Q
"RTN","IB20P510",52,0)
 . I +$P(IBRNB0,U,5) D MES^XPDUTL("    >>>"_IBCONM_" is already inactive") Q 
"RTN","IB20P510",53,0)
 . ; inactivate code and clean up ecme flags
"RTN","IB20P510",54,0)
 . S DIE="^IBE(356.8,",DA=+IBRNB,DR=".02///@;.03///@;.05///1" D ^DIE
"RTN","IB20P510",55,0)
 . S IBCT=IBCT+1 D MES^XPDUTL("    >>>"_IBCONM_" inactivated")
"RTN","IB20P510",56,0)
 D MES^XPDUTL("  Total "_IBCT_$S(IBCT=1:" entry",1:" entries")_" updated in the file (#356.8)")
"RTN","IB20P510",57,0)
RNBQ Q
"RTN","IB20P510",58,0)
 ;
"RTN","IB20P510",59,0)
RSF ; name^rate type^dispensing fee^adjustment^effective date
"RTN","IB20P510",60,0)
 ;;INELIG-RX^INELIGIBLE^13.18^S X=X+13.18^3130813
"RTN","IB20P510",61,0)
 ;;HMN-RX^HUMANITARIAN^13.18^S X=X+13.18^3130813
"RTN","IB20P510",62,0)
 ;
"RTN","IB20P510",63,0)
OCODE ; code^name^ecme flag^ecme paper flag
"RTN","IB20P510",64,0)
 ;;CV25^HDHP PLAN NOT BILLED^1^0
"RTN","IB20P510",65,0)
 ; 
"RTN","IB3PSOU")
0^1^B21192131^B19316373
"RTN","IB3PSOU",1,0)
IB3PSOU ;WOIFO/PLT-Outpatient Pharmacy Administrative Fee Change Update ;8/17/10  10:24
"RTN","IB3PSOU",2,0)
 ;;2.0;INTEGRATED BILLING;**437,510**;21-MAR-94;Build 26
"RTN","IB3PSOU",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","IB3PSOU",4,0)
 QUIT  ;invalid entry
"RTN","IB3PSOU",5,0)
 ; Procedure updates rate schedules for default rate types or types
"RTN","IB3PSOU",6,0)
 ; specified in IBRATY by inactivating currently active rate
"RTN","IB3PSOU",7,0)
 ; schedules with date (IBDFFDT-1 ) that contain either RX Cost or
"RTN","IB3PSOU",8,0)
 ; TL Fill charge sets.  Procedure adds new rate schedules for the
"RTN","IB3PSOU",9,0)
 ; rate types defined, setting the activation date to IBDFFDT and
"RTN","IB3PSOU",10,0)
 ; updating any defined Fees or adjustment.  When rate schedules
"RTN","IB3PSOU",11,0)
 ; updated by this procedure also contain additional charge sets
"RTN","IB3PSOU",12,0)
 ; other than RX Cost or TL Fill then a separate rate schedule is
"RTN","IB3PSOU",13,0)
 ; created with those additional charge sets and the original fees
"RTN","IB3PSOU",14,0)
 ; and adjustments are maintained.
"RTN","IB3PSOU",15,0)
 ;
"RTN","IB3PSOU",16,0)
 ; Default Rate Types:  REIMBURSABLE INS., NO FAULT INS., TORT 
"RTN","IB3PSOU",17,0)
 ; FEASOR, WORKERS' COMP.
"RTN","IB3PSOU",18,0)
 ;
"RTN","IB3PSOU",19,0)
 ;Input parameters:
"RTN","IB3PSOU",20,0)
 ;
"RTN","IB3PSOU",21,0)
 ;  IBRATY:  (optional) rate type names separated by ^.  If defined
"RTN","IB3PSOU",22,0)
 ;           use these rate types instead of default types.
"RTN","IB3PSOU",23,0)
 ;  IBDFFDT: (required)  Effective date in form mm/dd/yyyy for new rate 
"RTN","IB3PSOU",24,0)
 ;           schedules.
"RTN","IB3PSOU",25,0)
 ;  IBADFE:  (optional)    not currently in use.
"RTN","IB3PSOU",26,0)
 ;  IBDISP:  (required) Dispense Fee: to contain the new annual 
"RTN","IB3PSOU",27,0)
 ;           administrative fee for rate schedules.
"RTN","IB3PSOU",28,0)
 ;  IBADJUST: (optional) if defined must be MUMPS code to define a
"RTN","IB3PSOU",29,0)
 ; unique adjustment to the rate schedule.  If not defined default
"RTN","IB3PSOU",30,0)
 ; adjustment is S X = X + $G(IBADFE) + $G(IBDISP)
"RTN","IB3PSOU",31,0)
 ;
"RTN","IB3PSOU",32,0)
 ;ibraty=rate type name of file #399.3^rate type name^rate type name...
"RTN","IB3PSOU",33,0)
 ;   =""for all-reimbursable ins., no fault ins., tort feasor, works' comp.
"RTN","IB3PSOU",34,0)
 ;ibeffdt=effective external date (mm/dd/yyyy)
"RTN","IB3PSOU",35,0)
 ;ibadfe=administrative fee (ddd.cc)
"RTN","IB3PSOU",36,0)
 ;ibdisp=dispensing fee (ddd.cc)
"RTN","IB3PSOU",37,0)
 ;ibadjust=adjustment mumps code
"RTN","IB3PSOU",38,0)
ENT(IBRATY,IBEFFDT,IBADFE,IBDISP,IBADJUST) ;update admin/disp fee and adjustment of file #363
"RTN","IB3PSOU",39,0)
 N A,B,X,Y,IBA,IBB,IBC,IBINADT,IBRFRC,IBRCOST
"RTN","IB3PSOU",40,0)
 S:IBRATY="" IBRATY="REIMBURSABLE INS.^NO FAULT INS.^WORKERS' COMP.^TORT FEASOR"
"RTN","IB3PSOU",41,0)
 S IBRATY="^"_IBRATY_"^"
"RTN","IB3PSOU",42,0)
 S X=IBEFFDT D ^%DT S IBEFFDT=Y,IBINADT=$$FMADD^XLFDT(IBEFFDT,-1)
"RTN","IB3PSOU",43,0)
 ;get iens of 'tl-rx fill' and 'rx cost' of charge set file #363.1
"RTN","IB3PSOU",44,0)
 S (IBRFRC,IBRCOST)="^" F A="TL-RX FILL","RX COST" S B=0 F B=$O(^IBE(363.1,"B",A,B)) QUIT:'B  S IBRFRC=IBRFRC_B_"^" S:A="RX COST" IBRCOST=IBRCOST_B_"^"
"RTN","IB3PSOU",45,0)
 ;loop through charge set iens of 'ti-rx til' and'rx cost' in ibrfrc
"RTN","IB3PSOU",46,0)
 F IBA=2:1 S IBB=$P(IBRFRC,U,IBA) QUIT:'IBB  D
"RTN","IB3PSOU",47,0)
 . N IBIEN,IBRTNM
"RTN","IB3PSOU",48,0)
 . ;find rate schedule with no inactive date, effective date<ibeffdt, rate type contained in ibraty
"RTN","IB3PSOU",49,0)
 . S IBIEN=0 F  S IBIEN=$O(^IBE(363,"C",IBB,IBIEN)) QUIT:'IBIEN  S A=^IBE(363,IBIEN,0),IBRTNM=$P(^DGCR(399.3,$P(A,U,2),0),U) I '$P(A,U,6),$P(A,U,5)<IBEFFDT,$P(A,U,2),IBRATY[("^"_IBRTNM_"^") D
"RTN","IB3PSOU",50,0)
 .. ;copy-to new entry, and copy-to new entry again if the copy-from entry has charge set other than 'tr-rf fill' and 'rx cost'
"RTN","IB3PSOU",51,0)
 .. S IBC=$$COPY(IBIEN,"") S:IBC IBC=$$COPY(IBIEN,1)
"RTN","IB3PSOU",52,0)
 .. ;inactivate the copy-from entry.
"RTN","IB3PSOU",53,0)
 .. D INACT(IBIEN)
"RTN","IB3PSOU",54,0)
 .. QUIT
"RTN","IB3PSOU",55,0)
 . QUIT
"RTN","IB3PSOU",56,0)
 QUIT
"RTN","IB3PSOU",57,0)
 ;
"RTN","IB3PSOU",58,0)
 ;
"RTN","IB3PSOU",59,0)
 ;ibien=the ien of the copy-from rate schedule file #363
"RTN","IB3PSOU",60,0)
 ;ibc="" copy and update adm, disp, adj including only charge sets for 'tr-rf fill' and 'rx cost'
"RTN","IB3PSOU",61,0)
 ;   =1 copy and no update including all other charge set only
"RTN","IB3PSOU",62,0)
COPY(IBIEN,IBC) ;extrinsic function ="" or 1
"RTN","IB3PSOU",63,0)
 N IBD,IBE,IBNIEN,IBRS0,IBRS1,IBRS10,IBRS11,IBRSCS
"RTN","IB3PSOU",64,0)
 ;copy-to a new entry from ibien containing charge set iba
"RTN","IB3PSOU",65,0)
 N IBNRX S IBNRX=""
"RTN","IB3PSOU",66,0)
 S IBRS0=$G(^IBE(363,IBIEN,0)),IBRS1=$G(^(1)),IBRS10=$G(^(10)),IBRS11=$G(^(11)) D  QUIT:'$G(IBNIEN)
"RTN","IB3PSOU",67,0)
 . ;add new charge set hmn/inelig-rx *510
"RTN","IB3PSOU",68,0)
 . I 'IBC,'$O(^IBE(363,"B",$P($P(IBRS0,U),"-")_"-RX",0)) S IBNRX=$P($P(IBRS0,U),"-")_"-RX"
"RTN","IB3PSOU",69,0)
 . ;add new entry of file #363
"RTN","IB3PSOU",70,0)
 . N DO,DIC,DA,X,DINUM,Y,DTOUT,DUOUT
"RTN","IB3PSOU",71,0)
 . N DIE,DA,DR
"RTN","IB3PSOU",72,0)
 . S DIC="^IBE(363,",DIC(0)="F",X=$S(IBNRX="":$P(IBRS0,U),1:IBNRX)
"RTN","IB3PSOU",73,0)
 . ;copy data fields with new administration fee
"RTN","IB3PSOU",74,0)
 . S DIC("DR")=".02////"_$P(IBRS0,U,2)_";.03////"_$P(IBRS0,U,3)_";.04////"_$P(IBRS0,U,4)_";.05////"_IBEFFDT
"RTN","IB3PSOU",75,0)
 . ;reserve adm, disp values
"RTN","IB3PSOU",76,0)
 . I IBC S DIC("DR")=DIC("DR")_";1.01////"_$P(IBRS1,U)_";1.02////"_$P(IBRS1,U,2)
"RTN","IB3PSOU",77,0)
 . ;update adm, disp values
"RTN","IB3PSOU",78,0)
 . I 'IBC S DIC("DR")=DIC("DR")_";1.01////"_$G(IBDISP)_";1.02////"_$G(IBADFE)
"RTN","IB3PSOU",79,0)
 . D FILE^DICN I Y<0 D MES^XPDUTL("The Rate Schedule "_X_" update failed") QUIT
"RTN","IB3PSOU",80,0)
 . S IBNIEN=+Y
"RTN","IB3PSOU",81,0)
 . ;set adjustment value
"RTN","IB3PSOU",82,0)
 . S DIE="^IBE(363,",DA=IBNIEN,DR="10////"_$S('IBC:$G(IBADJUST),1:IBRS10)
"RTN","IB3PSOU",83,0)
 . D ^DIE
"RTN","IB3PSOU",84,0)
 . QUIT
"RTN","IB3PSOU",85,0)
 ;copy/edit charge set multiple.
"RTN","IB3PSOU",86,0)
 S IBRSCS=0 F  S IBRSCS=$O(^IBE(363,IBIEN,11,IBRSCS)) QUIT:'IBRSCS  S IBD=^(IBRSCS,0) D
"RTN","IB3PSOU",87,0)
 . N DO,DIC,DA,X,DINUM,Y,DTOUT,DUOUT
"RTN","IB3PSOU",88,0)
 . I IBC,IBRFRC[("^"_$P(IBD,U)_"^") QUIT
"RTN","IB3PSOU",89,0)
 . I 'IBC,IBRFRC'[("^"_$P(IBD,U)_"^") S IBE=1 QUIT
"RTN","IB3PSOU",90,0)
 . ;change charge set 'tr-rf fill' to 'rx cost'
"RTN","IB3PSOU",91,0)
 . I 'IBC,IBRCOST'[("^"_$P(IBD,U)_"^") S $P(IBD,U)=$P(IBRCOST,U,2),$P(IBD,U,2)=1
"RTN","IB3PSOU",92,0)
 . ;not 'rx cost' the auto add is null - comment out *510
"RTN","IB3PSOU",93,0)
 . ;S:IBC $P(IBD,U,2)=""
"RTN","IB3PSOU",94,0)
 . S DIC="^IBE(363,"_IBNIEN_",11,",DIC(0)="F",DA(1)=IBNIEN,X=$P(IBD,U),DINUM=$S(IBNRX="":IBRSCS,1:1),DIC("DR")=".02////"_$P(IBD,U,2)
"RTN","IB3PSOU",95,0)
 . D FILE^DICN I Y<0 D MES^XPDUTL("The Rate Schedule "_$P(IBRS0,U)_"'s Charge Set "_X_" update failed")
"RTN","IB3PSOU",96,0)
 . QUIT
"RTN","IB3PSOU",97,0)
 QUIT $G(IBE)
"RTN","IB3PSOU",98,0)
 ;
"RTN","IB3PSOU",99,0)
 ;ibien=the ien of the file #363
"RTN","IB3PSOU",100,0)
INACT(IBIEN) ;inactivate the copy-from rate schedule
"RTN","IB3PSOU",101,0)
 N D,D0,DI,DIC,DQ,DIE,DA,DR,DTOUT
"RTN","IB3PSOU",102,0)
 S DIE="^IBE(363,",DA=IBIEN,DR=".06////"_IBINADT D ^DIE
"RTN","IB3PSOU",103,0)
 QUIT
"RTN","IB3PSOU",104,0)
 ;
"VER")
8.0^22.0
"BLD",9489,6)
^467
**END**
**END**
