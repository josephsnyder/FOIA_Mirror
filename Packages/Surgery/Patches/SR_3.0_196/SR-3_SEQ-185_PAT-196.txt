$TXT Created by                     at MNTVBB.DOMAIN.EXT  (KIDS) on Monday, 07/01/19 at 06:59
=============================================================================
Run Date: JAN 15, 2020                     Designation: SR*3*196
Package : SR - SURGERY                        Priority: Mandatory
Version : 3       SEQ #185                      Status: Released
                  Compliance Date: FEB 14, 2020
=============================================================================

Associated patches: (v)SR*3*184    <<= must be installed BEFORE `SR*3*196'

Subject: PREVENT DELETION OF SIGNED CONCURRENT CASE

Category: 
  - Routine

Description:
============

 The patch addresses the following issue:
  
 When the Make Operation Requests option [SROOPREQ] is used to delete an
 outstanding surgery request with a concurrent case request, the user is
 asked if they want to delete the concurrent case and defaults to "yes". If
 the user accepts the default, the outstanding request AND concurrent case
 are deleted regardless of whether the concurrent case is a completed case.
  
  
 Defect Tracking System Ticket(s) & Overview:
 ============================================
 1. INC5351479 - Missing Patient Surgical Case File
  
 Problem:
 --------
 When the Make Operation Requests option [SROOPREQ] is used to delete an 
 outstanding surgery request with a concurrent case request, there is no 
 check to determine whether the concurrent case is complete and should be 
 retained in the file.
  
 Resolution:
 -----------
 Routine ^SRSUPRQ has been modified to check the TIME PAT OUT OR field
 (#.232) of the SURGERY file (#130) in the same manner as the Operation 
 Menu option [SROPER] when deleting a case. If the field is not null, the
 case cannot be deleted and this message is displayed to the user: "The
 concurrent procedure associated with this case: <CASE #> has been
 completed and must remain in the file for your records."
  
  
 Test Sites:
 ===========
 White River Junction VAMC
 Memphis VAMC
  
  
 Patch Installation: 
  
 Pre-Installation Instructions:
 ------------------------------
 This patch can be installed when Surgery users are on the system. This 
 patch will take less than 2 minutes to install.
  
 NOTE: Kernel patches must be current on the target system to avoid 
 problems loading and/or installing this patch.
  
 1. Choose the PackMan message containing this patch.
  
 2. Choose the INSTALL/CHECK MESSAGE PackMan option to load the KIDS patch
    into a Transport Global on your system.
  
 3. From the Kernel Installation & Distribution System Menu (KIDS), select
    the Installation Menu.
  
 4. From the Installation Menu, select the Backup a Transport Global
    option and when prompted for the INSTALL NAME enter the patch
    SR*3.0*196. This option will create a backup message of any routines
    exported with this patch. It will not backup any other changes such as
    DDs or templates.
     
 5. From the Installation Menu, you may elect to use the following options.
    When prompted for the INSTALL NAME enter the patch SR*3.0*196.
  
     a. Verify Checksums in Transport Global - This option will allow you 
        to ensure the integrity of the routines that are in the transport
        global.
     
     b. Print Transport Global - This option will allow you to print only 
        a summary of the patch, to print a summary of the patch and the
        routines in the transport global, or to print only the routines in
        the transport global.
  
     c. Compare Transport Global to Current System - This option will 
        allow you to view all changes that will be made when this patch is
        installed. (It compares all components of this patch's routines,
        DDs, templates, etc.).
  
 6. From the Installation Menu, select the Install Package(s) option and
    enter the patch SR*3.0*196.
  
 7. When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//', 
    respond 'NO'.
  
 8. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and 
    Protocols? NO//', respond 'NO'.
  
 Back-out/Rollback Strategy:
 ---------------------------
 Back-out will be done only with the concurrence and participation of the 
 development team and appropriate VA site/region personnel. The decision to
 back-out or rollback software will be a joint decision between development
 team, VA site/region personnel and other appropriate VA personnel.
  
 Prior to installing an updated KIDS package, the site/region should have
 saved a backup of the routines in a mail message using the Backup a 
 Transport Global [XPD Backup] menu option (this is done at time of
 install). The message containing the backed up routines can be loaded with
 the "Xtract PackMan" function at the Message Action prompt. The Packman 
 function "INSTALL/CHECK MESSAGE" is then used to install the backed up
 routines onto the VistA System.
  
 No data was modified by this patch installation and, therefore, no 
 rollback strategy is required.
  
 To verify the back-out completed successfully, ensure the checksum matches
 the pre-patch checksum from this patch description.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0;Surgery;**[Patch List]**;24 Jun 93;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SRSUPRQ
    Before: B28802484   After: B31551680  **7,47,58,67,107,114,100,154,
                                           177,184,196**
 
Routine list of preceding patches: 184

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUN 18, 2019
Completed By:                               Date Completed: JAN 14, 2020
Released By :                               Date Released : JAN 15, 2020
=============================================================================


Packman Mail Message:
=====================

$END TXT
