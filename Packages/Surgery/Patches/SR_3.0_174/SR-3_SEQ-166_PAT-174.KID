Released SR*3*174 SEQ #166
Extracted from mail message
**KIDS**:SR*3.0*174^

**INSTALL NAME**
SR*3.0*174
"BLD",7180,0)
SR*3.0*174^SURGERY^0^3101005^y
"BLD",7180,1,0)
^^119^119^3100726^
"BLD",7180,1,1,0)
This patch provides the annual updates to the Veterans Health Information 
"BLD",7180,1,2,0)
Systems and Technology Architecture (VistA) Surgery package in support of
"BLD",7180,1,3,0)
the VA Surgery Quality Improvement Program (VASQIP). The updates include
"BLD",7180,1,4,0)
the addition of new data fields, changes to existing fields, changes to 
"BLD",7180,1,5,0)
data entry screens, changes to reports, and changes to the Surgery Risk 
"BLD",7180,1,6,0)
Assessment transmissions.
"BLD",7180,1,7,0)
 
"BLD",7180,1,8,0)
Non-Cardiac Assessment Modifications:
"BLD",7180,1,9,0)
-------------------------------------
"BLD",7180,1,10,0)
- The frequency of transmission of 1-liner cases is changed from the 45th 
"BLD",7180,1,11,0)
  day past the end of the quarter to the 45th day past the end of the
"BLD",7180,1,12,0)
  month.
"BLD",7180,1,13,0)
 
"BLD",7180,1,14,0)
- Patient gender is added to the information transmitted on 1-liner cases.
"BLD",7180,1,15,0)
 
"BLD",7180,1,16,0)
- New fields added to SURGERY file (#130):
"BLD",7180,1,17,0)
  o ASSESSMENT COMPLETED BY field (#272.1)
"BLD",7180,1,18,0)
    When a non-cardiac assessment is completed, the user who completed the
"BLD",7180,1,19,0)
    assessment will be identified in this field and the name of the user 
"BLD",7180,1,20,0)
    will be transmitted with the assessment.
"BLD",7180,1,21,0)
  o PREOPERATIVE SLEEP APNEA field (#237.1)
"BLD",7180,1,22,0)
    This field is added to the Preoperative Information (Enter/Edit) [SROA
"BLD",7180,1,23,0)
    PREOP DATA] option, the assessment printout, assessment transmission
"BLD",7180,1,24,0)
    and the list of missing items functionality.
"BLD",7180,1,25,0)
 
"BLD",7180,1,26,0)
- The SURGERY CONSULT DATE field (#513) and the SURGERY CONSULT REQUESTED 
"BLD",7180,1,27,0)
  field (#516) are eliminated as non-cardiac assessment variables.
"BLD",7180,1,28,0)
 
"BLD",7180,1,29,0)
- This patch updates the CPT EXCLUSIONS file (#137) with data for fiscal 
"BLD",7180,1,30,0)
  year 2010.
"BLD",7180,1,31,0)
 
"BLD",7180,1,32,0)
- Field descriptions are modified in the following fields in SURGERY file 
"BLD",7180,1,33,0)
  (#130):
"BLD",7180,1,34,0)
  o HEIGHT field (#236)
"BLD",7180,1,35,0)
    The description and the input transform are modified.
"BLD",7180,1,36,0)
  o WEIGHT field (#237)
"BLD",7180,1,37,0)
    The description and the input transform are modified.
"BLD",7180,1,38,0)
  o HISTORY OF COPD field (#203)
"BLD",7180,1,39,0)
  o ASCITES field (#212)
"BLD",7180,1,40,0)
  o DISSEMINATED CANCER (Y/N) field (#338)
"BLD",7180,1,41,0)
  o INTRAOP DISSEMINATED CANCER field (#443)
"BLD",7180,1,42,0)
  o BLEEDING DISORDERS field (#216)
"BLD",7180,1,43,0)
  o OTHER PROCEDURE field (#.01 of OTHER PROCEDURES multiple field #.42)
"BLD",7180,1,44,0)
  o INTRAOPERATIVE ASCITES field (#446)
"BLD",7180,1,45,0)
  o DVT/THROMBOPHLEBITIS field (#263)
"BLD",7180,1,46,0)
    Note: The description of DVT/THROMBOPHLEBITIS in the PERIOPERATIVE 
"BLD",7180,1,47,0)
    OCCURRENCE CATEGORY file (#136.5) is updated as well.
"BLD",7180,1,48,0)
 
"BLD",7180,1,49,0)
- On the Operation Information (Enter/Edit) [SROA OPERATION DATA] option:
"BLD",7180,1,50,0)
  o When selecting item #3, CPT Codes (view only), the following note is 
"BLD",7180,1,51,0)
    added to the screen:
"BLD",7180,1,52,0)
       CPT Codes should be verified. If need be, report discrepancies to
"BLD",7180,1,53,0)
       the official CPT coder for surgery.
"BLD",7180,1,54,0)
  o When selecting item #5, Concurrent Procedure, the following note is 
"BLD",7180,1,55,0)
    added to the screen:
"BLD",7180,1,56,0)
       Concurrent Procedure: An additional operative procedure performed
"BLD",7180,1,57,0)
       by different surgical team (i.e., a different specialty/service)
"BLD",7180,1,58,0)
       under the same anesthetic which has a CPT code different from that
"BLD",7180,1,59,0)
       of the Principal Operative Procedure (e.g., fixation of a femur
"BLD",7180,1,60,0)
       fracture in a patient undergoing a laparotomy for trauma). This
"BLD",7180,1,61,0)
       field should be verified and, if need be, report discrepancies to
"BLD",7180,1,62,0)
       the official CPT coder for surgery.
"BLD",7180,1,63,0)
       
"BLD",7180,1,64,0)
- A new entry, N - NONE ASSIGNED, is added to the ASA CLASS file (#132.8).
"BLD",7180,1,65,0)
  The output transform on ASA CLASS field (#1.13) in SURGERY file (#130)
"BLD",7180,1,66,0)
  is modified to allow the display of the new entry.
"BLD",7180,1,67,0)
 
"BLD",7180,1,68,0)
- The list of missing items functionality is updated to remove deleted 
"BLD",7180,1,69,0)
  variables and to include the new variables.
"BLD",7180,1,70,0)
 
"BLD",7180,1,71,0)
Cardiac Assessment Modifications:
"BLD",7180,1,72,0)
---------------------------------
"BLD",7180,1,73,0)
- The SURGERY CONSULT DATE field (#513) and the PRIMARY CAUSE FOR DELAY 
"BLD",7180,1,74,0)
  field (#515) are eliminated as cardiac assessment variables.
"BLD",7180,1,75,0)
 
"BLD",7180,1,76,0)
- New fields added to SURGERY file (#130) as new cardiac variables:
"BLD",7180,1,77,0)
  o PREOP ATRIAL FIBRILLATION field (#509)
"BLD",7180,1,78,0)
    This field is added to the Clinical Information (Enter/Edit) [SROA 
"BLD",7180,1,79,0)
    CLINICAL INFORMATION] option.
"BLD",7180,1,80,0)
  o PULMONARY VALVE PROCEDURE field (#493)
"BLD",7180,1,81,0)
    This field is added to the Cardiac Procedures Operative Data 
"BLD",7180,1,82,0)
    (Enter/Edit) [SROA CARDIAC PROCEDURES] option.
"BLD",7180,1,83,0)
  o BNP field (#507)
"BLD",7180,1,84,0)
    This field is added to the Laboratory Test Results (Enter/Edit) [SROA 
"BLD",7180,1,85,0)
    LAB-CARDIAC] option.
"BLD",7180,1,86,0)
  o BNP DATE field (#507.1)
"BLD",7180,1,87,0)
    This field is added to the Laboratory Test Results (Enter/Edit) [SROA 
"BLD",7180,1,88,0)
    LAB-CARDIAC] option.
"BLD",7180,1,89,0)
  o POSTOP ATRIAL FIBRILLATION field (#448)
"BLD",7180,1,90,0)
    This field is added to the Outcome Information (Enter/Edit) [SROA 
"BLD",7180,1,91,0)
    CARDIAC-OUTCOMES] option. Associated with this yes/no field is a new 
"BLD",7180,1,92,0)
    entry, POSTOPERATIVE ATRIAL FIBRILLATION, in the PERIOPERATIVE 
"BLD",7180,1,93,0)
    OCCURRENCE CATEGORY file (#136.5).
"BLD",7180,1,94,0)
 
"BLD",7180,1,95,0)
- The following fields in SURGERY file (#130) are modified:
"BLD",7180,1,96,0)
  o AORTIC VALVE PROCEDURE field (#367)
"BLD",7180,1,97,0)
  o MITRAL VALVE PROCEDURE field (#368)
"BLD",7180,1,98,0)
  o TRICUSPID VALVE PROCEDURE field (#369)
"BLD",7180,1,99,0)
  o FUNCTIONAL HEALTH STATUS field (#240)
"BLD",7180,1,100,0)
  o PREOP CIRCULATORY DEVICE field (#474)
"BLD",7180,1,101,0)
  o ENDOVASCULAR REPAIR field (#505)
"BLD",7180,1,102,0)
  o D/T PATIENT DISCH FROM ICU field (#471)
"BLD",7180,1,103,0)
 
"BLD",7180,1,104,0)
- Corrections are made to the list of missing items functionality for the
"BLD",7180,1,105,0)
  following fields in the SURGERY file (#130):
"BLD",7180,1,106,0)
  o ANGINA field (#267)
"BLD",7180,1,107,0)
  o CONVERT FROM OFF PUMP TO CPB field (#469)
"BLD",7180,1,108,0)
 
"BLD",7180,1,109,0)
- TIME OPERATION BEGAN field (#.22) and TIME OPERATION ENDS field (#.23) 
"BLD",7180,1,110,0)
  are moved from the Operative Risk Summary Data (Enter/Edit) [SROA 
"BLD",7180,1,111,0)
  CARDIAC OPERATIVE RISK] option to the Resource Data [SROA CARDIAC
"BLD",7180,1,112,0)
  RESOURCE] option.
"BLD",7180,1,113,0)
 
"BLD",7180,1,114,0)
- The list of missing items functionality is updated to remove deleted 
"BLD",7180,1,115,0)
  variables and to include the new variables.
"BLD",7180,1,116,0)
 
"BLD",7180,1,117,0)
- The SURGERY CONSULT DATE field (#513) and the PRIMARY CAUSE FOR
"BLD",7180,1,118,0)
  DELAY field (#515) are removed from the Resource Data [SROA CARDIAC 
"BLD",7180,1,119,0)
  RESOURCE] option.
"BLD",7180,4,0)
^9.64PA^136.5^2
"BLD",7180,4,130,0)
130
"BLD",7180,4,130,2,0)
^9.641^130.16^2
"BLD",7180,4,130,2,130,0)
SURGERY  (File-top level)
"BLD",7180,4,130,2,130,1,0)
^9.6411^267^25
"BLD",7180,4,130,2,130,1,1.13,0)
ASA CLASS
"BLD",7180,4,130,2,130,1,203,0)
HISTORY OF COPD
"BLD",7180,4,130,2,130,1,212,0)
ASCITES
"BLD",7180,4,130,2,130,1,216,0)
BLEEDING DISORDERS
"BLD",7180,4,130,2,130,1,236,0)
HEIGHT
"BLD",7180,4,130,2,130,1,237,0)
WEIGHT
"BLD",7180,4,130,2,130,1,237.1,0)
PREOPERATIVE SLEEP APNEA
"BLD",7180,4,130,2,130,1,240,0)
FUNCTIONAL HEALTH STATUS
"BLD",7180,4,130,2,130,1,263,0)
DVT/THROMBOPHLEBITIS
"BLD",7180,4,130,2,130,1,267,0)
ANGINA
"BLD",7180,4,130,2,130,1,272.1,0)
ASSESSMENT COMPLETED BY
"BLD",7180,4,130,2,130,1,338,0)
DISSEMINATED CANCER (Y/N)
"BLD",7180,4,130,2,130,1,367,0)
AORTIC VALVE PROCEDURE
"BLD",7180,4,130,2,130,1,368,0)
MITRAL VALVE PROCEDURE
"BLD",7180,4,130,2,130,1,369,0)
TRICUSPID VALVE PROCEDURE
"BLD",7180,4,130,2,130,1,443,0)
INTRAOP DISSEMINATED CANCER
"BLD",7180,4,130,2,130,1,446,0)
INTRAOPERATIVE ASCITES
"BLD",7180,4,130,2,130,1,448,0)
POSTOP ATRIAL FIBRILLATION
"BLD",7180,4,130,2,130,1,471,0)
D/T PATIENT DISCH FROM ICU
"BLD",7180,4,130,2,130,1,474,0)
PREOP CIRCULATORY DEVICE
"BLD",7180,4,130,2,130,1,493,0)
PULMONARY VALVE PROCEDURE
"BLD",7180,4,130,2,130,1,505,0)
ENDOVASCULAR REPAIR
"BLD",7180,4,130,2,130,1,507,0)
BNP
"BLD",7180,4,130,2,130,1,507.1,0)
BNP DATE
"BLD",7180,4,130,2,130,1,509,0)
PREOP ATRIAL FIBRILLATION
"BLD",7180,4,130,2,130.16,0)
OTHER PROCEDURES  (sub-file)
"BLD",7180,4,130,2,130.16,1,0)
^9.6411^.01^1
"BLD",7180,4,130,2,130.16,1,.01,0)
OTHER PROCEDURE
"BLD",7180,4,130,222)
y^y^p^^^^n^^n
"BLD",7180,4,130,224)

"BLD",7180,4,136.5,0)
136.5
"BLD",7180,4,136.5,222)
y^y^f^^n^^y^o^n
"BLD",7180,4,"APDD",130,130)

"BLD",7180,4,"APDD",130,130,1.13)

"BLD",7180,4,"APDD",130,130,203)

"BLD",7180,4,"APDD",130,130,212)

"BLD",7180,4,"APDD",130,130,216)

"BLD",7180,4,"APDD",130,130,236)

"BLD",7180,4,"APDD",130,130,237)

"BLD",7180,4,"APDD",130,130,237.1)

"BLD",7180,4,"APDD",130,130,240)

"BLD",7180,4,"APDD",130,130,263)

"BLD",7180,4,"APDD",130,130,267)

"BLD",7180,4,"APDD",130,130,272.1)

"BLD",7180,4,"APDD",130,130,338)

"BLD",7180,4,"APDD",130,130,367)

"BLD",7180,4,"APDD",130,130,368)

"BLD",7180,4,"APDD",130,130,369)

"BLD",7180,4,"APDD",130,130,443)

"BLD",7180,4,"APDD",130,130,446)

"BLD",7180,4,"APDD",130,130,448)

"BLD",7180,4,"APDD",130,130,471)

"BLD",7180,4,"APDD",130,130,474)

"BLD",7180,4,"APDD",130,130,493)

"BLD",7180,4,"APDD",130,130,505)

"BLD",7180,4,"APDD",130,130,507)

"BLD",7180,4,"APDD",130,130,507.1)

"BLD",7180,4,"APDD",130,130,509)

"BLD",7180,4,"APDD",130,130.16)

"BLD",7180,4,"APDD",130,130.16,.01)

"BLD",7180,4,"B",130,130)

"BLD",7180,4,"B",136.5,136.5)

"BLD",7180,6.3)
8
"BLD",7180,"ABPKG")
n
"BLD",7180,"INI")
PRE^SR174UT1
"BLD",7180,"INID")
^y
"BLD",7180,"INIT")
PEX^SR174UTL
"BLD",7180,"KRN",0)
^9.67PA^779.2^20
"BLD",7180,"KRN",.4,0)
.4
"BLD",7180,"KRN",.401,0)
.401
"BLD",7180,"KRN",.402,0)
.402
"BLD",7180,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",7180,"KRN",.402,"NM",1,0)
SRO-NOCOMP    FILE #130^130^0
"BLD",7180,"KRN",.402,"NM","B","SRO-NOCOMP    FILE #130",1)

"BLD",7180,"KRN",.403,0)
.403
"BLD",7180,"KRN",.5,0)
.5
"BLD",7180,"KRN",.84,0)
.84
"BLD",7180,"KRN",3.6,0)
3.6
"BLD",7180,"KRN",3.8,0)
3.8
"BLD",7180,"KRN",9.2,0)
9.2
"BLD",7180,"KRN",9.8,0)
9.8
"BLD",7180,"KRN",9.8,"NM",0)
^9.68A^59^53
"BLD",7180,"KRN",9.8,"NM",1,0)
SROACPM^^0^B53758075
"BLD",7180,"KRN",9.8,"NM",4,0)
SROAUTLC^^0^B27833831
"BLD",7180,"KRN",9.8,"NM",5,0)
SROAUTL4^^0^B50279210
"BLD",7180,"KRN",9.8,"NM",6,0)
SROLABS^^0^B8361411
"BLD",7180,"KRN",9.8,"NM",7,0)
SROACPM2^^0^B6724131
"BLD",7180,"KRN",9.8,"NM",8,0)
SROCL1^^0^B11537820
"BLD",7180,"KRN",9.8,"NM",9,0)
SROACPM1^^0^B18824569
"BLD",7180,"KRN",9.8,"NM",10,0)
SROAL11^^0^B20255252
"BLD",7180,"KRN",9.8,"NM",12,0)
SROXR4^^0^B8346858
"BLD",7180,"KRN",9.8,"NM",13,0)
SROATMNO^^0^B28540920
"BLD",7180,"KRN",9.8,"NM",14,0)
SROACOM^^0^B15413481
"BLD",7180,"KRN",9.8,"NM",15,0)
SROACOM1^^0^B19771311
"BLD",7180,"KRN",9.8,"NM",16,0)
SROAERR^^0^B5443025
"BLD",7180,"KRN",9.8,"NM",17,0)
SROADEL^^0^B8483911
"BLD",7180,"KRN",9.8,"NM",18,0)
SRONASS^^0^B17653883
"BLD",7180,"KRN",9.8,"NM",19,0)
SROACL1^^0^B27741852
"BLD",7180,"KRN",9.8,"NM",20,0)
SROACLN^^0^B10164001
"BLD",7180,"KRN",9.8,"NM",21,0)
SROACOP^^0^B23026307
"BLD",7180,"KRN",9.8,"NM",22,0)
SROAOUT^^0^B12427409
"BLD",7180,"KRN",9.8,"NM",24,0)
SROUTC^^0^B17156517
"BLD",7180,"KRN",9.8,"NM",26,0)
SROAPCA^^0^B26334620
"BLD",7180,"KRN",9.8,"NM",27,0)
SROAPCA1^^0^B29601369
"BLD",7180,"KRN",9.8,"NM",28,0)
SROAPCA3^^0^B22852862
"BLD",7180,"KRN",9.8,"NM",29,0)
SROAPCA4^^0^B15348981
"BLD",7180,"KRN",9.8,"NM",30,0)
SROATM3^^0^B22124588
"BLD",7180,"KRN",9.8,"NM",31,0)
SROATM1^^0^B25037601
"BLD",7180,"KRN",9.8,"NM",32,0)
SROATCM^^0^B25541535
"BLD",7180,"KRN",9.8,"NM",33,0)
SROATCM1^^0^B52450846
"BLD",7180,"KRN",9.8,"NM",34,0)
SROATCM3^^0^B12876503
"BLD",7180,"KRN",9.8,"NM",35,0)
SROCCAT^^0^B17047332
"BLD",7180,"KRN",9.8,"NM",36,0)
SROAUTL0^^0^B19393426
"BLD",7180,"KRN",9.8,"NM",37,0)
SROATM2^^0^B33885599
"BLD",7180,"KRN",9.8,"NM",38,0)
SROQ2^^0^B33212600
"BLD",7180,"KRN",9.8,"NM",39,0)
SROQT^^0^B35140873
"BLD",7180,"KRN",9.8,"NM",40,0)
SROQ1A^^0^B31612444
"BLD",7180,"KRN",9.8,"NM",41,0)
SROQM1^^0^B26795235
"BLD",7180,"KRN",9.8,"NM",43,0)
SROACAR^^0^B13317261
"BLD",7180,"KRN",9.8,"NM",44,0)
SROAPCA2^^0^B18386426
"BLD",7180,"KRN",9.8,"NM",45,0)
SR174UT0^^0^B35597559
"BLD",7180,"KRN",9.8,"NM",46,0)
SROQ0^^0^B16293917
"BLD",7180,"KRN",9.8,"NM",47,0)
SROAPS1^^0^B23960917
"BLD",7180,"KRN",9.8,"NM",48,0)
SROAPRE1^^0^B10006731
"BLD",7180,"KRN",9.8,"NM",49,0)
SROAPRT1^^0^B14081364
"BLD",7180,"KRN",9.8,"NM",50,0)
SROAUTL1^^0^B17300696
"BLD",7180,"KRN",9.8,"NM",51,0)
SROAUTL^^0^B41192631
"BLD",7180,"KRN",9.8,"NM",52,0)
SROAPM^^0^B44670342
"BLD",7180,"KRN",9.8,"NM",53,0)
SROAPAS^^0^B27566457
"BLD",7180,"KRN",9.8,"NM",54,0)
SROAOP^^0^B22239437
"BLD",7180,"KRN",9.8,"NM",55,0)
SROAMEAS^^0^B450182
"BLD",7180,"KRN",9.8,"NM",56,0)
SROCON^^0^B9128806
"BLD",7180,"KRN",9.8,"NM",57,0)
SROPROC^^0^B20860366
"BLD",7180,"KRN",9.8,"NM",58,0)
SROACR1^^0^B22164276
"BLD",7180,"KRN",9.8,"NM",59,0)
SROAPRE^^0^B16062002
"BLD",7180,"KRN",9.8,"NM","B","SR174UT0",45)

"BLD",7180,"KRN",9.8,"NM","B","SROACAR",43)

"BLD",7180,"KRN",9.8,"NM","B","SROACL1",19)

"BLD",7180,"KRN",9.8,"NM","B","SROACLN",20)

"BLD",7180,"KRN",9.8,"NM","B","SROACOM",14)

"BLD",7180,"KRN",9.8,"NM","B","SROACOM1",15)

"BLD",7180,"KRN",9.8,"NM","B","SROACOP",21)

"BLD",7180,"KRN",9.8,"NM","B","SROACPM",1)

"BLD",7180,"KRN",9.8,"NM","B","SROACPM1",9)

"BLD",7180,"KRN",9.8,"NM","B","SROACPM2",7)

"BLD",7180,"KRN",9.8,"NM","B","SROACR1",58)

"BLD",7180,"KRN",9.8,"NM","B","SROADEL",17)

"BLD",7180,"KRN",9.8,"NM","B","SROAERR",16)

"BLD",7180,"KRN",9.8,"NM","B","SROAL11",10)

"BLD",7180,"KRN",9.8,"NM","B","SROAMEAS",55)

"BLD",7180,"KRN",9.8,"NM","B","SROAOP",54)

"BLD",7180,"KRN",9.8,"NM","B","SROAOUT",22)

"BLD",7180,"KRN",9.8,"NM","B","SROAPAS",53)

"BLD",7180,"KRN",9.8,"NM","B","SROAPCA",26)

"BLD",7180,"KRN",9.8,"NM","B","SROAPCA1",27)

"BLD",7180,"KRN",9.8,"NM","B","SROAPCA2",44)

"BLD",7180,"KRN",9.8,"NM","B","SROAPCA3",28)

"BLD",7180,"KRN",9.8,"NM","B","SROAPCA4",29)

"BLD",7180,"KRN",9.8,"NM","B","SROAPM",52)

"BLD",7180,"KRN",9.8,"NM","B","SROAPRE",59)

"BLD",7180,"KRN",9.8,"NM","B","SROAPRE1",48)

"BLD",7180,"KRN",9.8,"NM","B","SROAPRT1",49)

"BLD",7180,"KRN",9.8,"NM","B","SROAPS1",47)

"BLD",7180,"KRN",9.8,"NM","B","SROATCM",32)

"BLD",7180,"KRN",9.8,"NM","B","SROATCM1",33)

"BLD",7180,"KRN",9.8,"NM","B","SROATCM3",34)

"BLD",7180,"KRN",9.8,"NM","B","SROATM1",31)

"BLD",7180,"KRN",9.8,"NM","B","SROATM2",37)

"BLD",7180,"KRN",9.8,"NM","B","SROATM3",30)

"BLD",7180,"KRN",9.8,"NM","B","SROATMNO",13)

"BLD",7180,"KRN",9.8,"NM","B","SROAUTL",51)

"BLD",7180,"KRN",9.8,"NM","B","SROAUTL0",36)

"BLD",7180,"KRN",9.8,"NM","B","SROAUTL1",50)

"BLD",7180,"KRN",9.8,"NM","B","SROAUTL4",5)

"BLD",7180,"KRN",9.8,"NM","B","SROAUTLC",4)

"BLD",7180,"KRN",9.8,"NM","B","SROCCAT",35)

"BLD",7180,"KRN",9.8,"NM","B","SROCL1",8)

"BLD",7180,"KRN",9.8,"NM","B","SROCON",56)

"BLD",7180,"KRN",9.8,"NM","B","SROLABS",6)

"BLD",7180,"KRN",9.8,"NM","B","SRONASS",18)

"BLD",7180,"KRN",9.8,"NM","B","SROPROC",57)

"BLD",7180,"KRN",9.8,"NM","B","SROQ0",46)

"BLD",7180,"KRN",9.8,"NM","B","SROQ1A",40)

"BLD",7180,"KRN",9.8,"NM","B","SROQ2",38)

"BLD",7180,"KRN",9.8,"NM","B","SROQM1",41)

"BLD",7180,"KRN",9.8,"NM","B","SROQT",39)

"BLD",7180,"KRN",9.8,"NM","B","SROUTC",24)

"BLD",7180,"KRN",9.8,"NM","B","SROXR4",12)

"BLD",7180,"KRN",19,0)
19
"BLD",7180,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",7180,"KRN",19,"NM",1,0)
SROA ASSESSMENT LIST^^0
"BLD",7180,"KRN",19,"NM","B","SROA ASSESSMENT LIST",1)

"BLD",7180,"KRN",19.1,0)
19.1
"BLD",7180,"KRN",101,0)
101
"BLD",7180,"KRN",409.61,0)
409.61
"BLD",7180,"KRN",771,0)
771
"BLD",7180,"KRN",779.2,0)
779.2
"BLD",7180,"KRN",870,0)
870
"BLD",7180,"KRN",8989.51,0)
8989.51
"BLD",7180,"KRN",8989.52,0)
8989.52
"BLD",7180,"KRN",8994,0)
8994
"BLD",7180,"KRN","B",.4,.4)

"BLD",7180,"KRN","B",.401,.401)

"BLD",7180,"KRN","B",.402,.402)

"BLD",7180,"KRN","B",.403,.403)

"BLD",7180,"KRN","B",.5,.5)

"BLD",7180,"KRN","B",.84,.84)

"BLD",7180,"KRN","B",3.6,3.6)

"BLD",7180,"KRN","B",3.8,3.8)

"BLD",7180,"KRN","B",9.2,9.2)

"BLD",7180,"KRN","B",9.8,9.8)

"BLD",7180,"KRN","B",19,19)

"BLD",7180,"KRN","B",19.1,19.1)

"BLD",7180,"KRN","B",101,101)

"BLD",7180,"KRN","B",409.61,409.61)

"BLD",7180,"KRN","B",771,771)

"BLD",7180,"KRN","B",779.2,779.2)

"BLD",7180,"KRN","B",870,870)

"BLD",7180,"KRN","B",8989.51,8989.51)

"BLD",7180,"KRN","B",8989.52,8989.52)

"BLD",7180,"KRN","B",8994,8994)

"BLD",7180,"PRET")

"BLD",7180,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",7180,"QUES",0)
^9.62^^
"BLD",7180,"REQB",0)
^9.611^2^2
"BLD",7180,"REQB",1,0)
SR*3.0*170^2
"BLD",7180,"REQB",2,0)
SR*3.0*171^2
"BLD",7180,"REQB","B","SR*3.0*170",1)

"BLD",7180,"REQB","B","SR*3.0*171",2)

"DATA",136.5,1,0)
SUPERFICIAL INCISIONAL SSI
"DATA",136.5,1,1,0)
^^22^22^3040318^
"DATA",136.5,1,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,1,1,2,0)
Superficial incisional SSI is an infection that occurs within 30 days 
"DATA",136.5,1,1,3,0)
after the operation and infection involves only skin or subcutaneous 
"DATA",136.5,1,1,4,0)
tissue of the incision and at least one of the following:
"DATA",136.5,1,1,5,0)
 
"DATA",136.5,1,1,6,0)
 - Purulent drainage, with or without laboratory confirmation, from the
"DATA",136.5,1,1,7,0)
   superficial incision.
"DATA",136.5,1,1,8,0)
 - Organisms isolated from an aseptically obtained culture of fluid or
"DATA",136.5,1,1,9,0)
   tissue from the superficial incision. 
"DATA",136.5,1,1,10,0)
 - At least one of the following signs or symptoms of infection: pain
"DATA",136.5,1,1,11,0)
   or tenderness, localized swelling, redness, or heat and superficial
"DATA",136.5,1,1,12,0)
   incision is deliberately opened by the surgeon, unless incision is
"DATA",136.5,1,1,13,0)
   culture-negative.  
"DATA",136.5,1,1,14,0)
 - Diagnosis of superficial incisional SSI by the surgeon or attending
"DATA",136.5,1,1,15,0)
   physician.  
"DATA",136.5,1,1,16,0)
 
"DATA",136.5,1,1,17,0)
Do not report the following conditions as SSI:
"DATA",136.5,1,1,18,0)
 - Stitch abscess (minimal inflammation and discharge confined to the
"DATA",136.5,1,1,19,0)
   points of suture penetration).
"DATA",136.5,1,1,20,0)
 - Infected burn wound.
"DATA",136.5,1,1,21,0)
 - Incisional SSI that extends into the fascial and muscle layers (see
"DATA",136.5,1,1,22,0)
   deep incisional SSI).
"DATA",136.5,2,0)
DEEP INCISIONAL SSI
"DATA",136.5,2,1,0)
^^23^23^3040318^
"DATA",136.5,2,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,2,1,2,0)
Deep Incision SSI is an infection that occurs within 30 days after the 
"DATA",136.5,2,1,3,0)
operation and the infection appears to be related to the operation and 
"DATA",136.5,2,1,4,0)
infection involved deep soft tissues (e.g., fascial and muscle layers) 
"DATA",136.5,2,1,5,0)
of the incision and at least one of the following: 
"DATA",136.5,2,1,6,0)
 
"DATA",136.5,2,1,7,0)
 - Purulent drainage from the deep incision but not from the 
"DATA",136.5,2,1,8,0)
   organ/space component of the surgical site.
"DATA",136.5,2,1,9,0)
 - A deep incision spontaneously dehisces or is deliberately opened by
"DATA",136.5,2,1,10,0)
   a surgeon when the patient has at least one of the following signs
"DATA",136.5,2,1,11,0)
   or symptoms: fever (>38 C), localized pain, or tenderness, unless
"DATA",136.5,2,1,12,0)
   site is culture-negative.
"DATA",136.5,2,1,13,0)
 - An abscess or other evidence of infection involving the deep 
"DATA",136.5,2,1,14,0)
   incision is found on direct examination, during reoperation, or by 
"DATA",136.5,2,1,15,0)
   histopathologic or radiologic examination.
"DATA",136.5,2,1,16,0)
 - Diagnosis of a deep incision SSI by a surgeon or attending 
"DATA",136.5,2,1,17,0)
   physician. 
"DATA",136.5,2,1,18,0)
 
"DATA",136.5,2,1,19,0)
Note:  
"DATA",136.5,2,1,20,0)
 - Report infection that involves both superficial and deep incision
"DATA",136.5,2,1,21,0)
   sites as deep incisional SSI.
"DATA",136.5,2,1,22,0)
 - Report an organ/space SSI that drains through the incision as a deep
"DATA",136.5,2,1,23,0)
   incisional SSI.
"DATA",136.5,3,0)
SYSTEMIC SEPSIS
"DATA",136.5,3,1,0)
^^65^65^3070221^
"DATA",136.5,3,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,3,1,2,0)
Sepsis is a vast clinical entity that takes a variety of forms. The 
"DATA",136.5,3,1,3,0)
spectrum of disorders spans from relatively mild physiologic 
"DATA",136.5,3,1,4,0)
abnormalities to septic shock. Please report the most significant level
"DATA",136.5,3,1,5,0)
using the criteria below:
"DATA",136.5,3,1,6,0)
 
"DATA",136.5,3,1,7,0)
1. Sepsis: Sepsis is the systemic response to infection. Report this 
"DATA",136.5,3,1,8,0)
variable if the patient has clinical signs and symptoms of SIRS. SIRS 
"DATA",136.5,3,1,9,0)
is a widespread inflammatory response to a variety of severe clinical
"DATA",136.5,3,1,10,0)
insults. This syndrome is clinically recognized by the presence of two 
"DATA",136.5,3,1,11,0)
or more of the following:
"DATA",136.5,3,1,12,0)
   - Temp >38 degrees C or <36 degrees C
"DATA",136.5,3,1,13,0)
   - HR >90 bpm
"DATA",136.5,3,1,14,0)
   - RR >20 breaths/min or PaCO2 <32 mmHg(<4.3 kPa)
"DATA",136.5,3,1,15,0)
   - WBC >12,000 cell/mm3, <4000 cells/mm3, or >10% immature (band) 
"DATA",136.5,3,1,16,0)
     forms
"DATA",136.5,3,1,17,0)
   - Anion gap acidosis: this is defined by either:
"DATA",136.5,3,1,18,0)
      [Na + K] - [Cl + HCO3 (or serum CO2)]. If this number is 
"DATA",136.5,3,1,19,0)
      greater than 16, then an anion gap acidosis is present.
"DATA",136.5,3,1,20,0)
     or
"DATA",136.5,3,1,21,0)
      Na - [Cl + HCO3 (or serum CO2)]. If this number is greater
"DATA",136.5,3,1,22,0)
      than 12, then an anion gap acidosis is present.
"DATA",136.5,3,1,23,0)
 
"DATA",136.5,3,1,24,0)
 and one of the following:
"DATA",136.5,3,1,25,0)
   - positive blood culture
"DATA",136.5,3,1,26,0)
   - clinical documentation of purulence or positive culture from any 
"DATA",136.5,3,1,27,0)
     site thought to be causative
"DATA",136.5,3,1,28,0)
 
"DATA",136.5,3,1,29,0)
2. Severe Sepsis/Septic Shock: Sepsis is considered severe when it is 
"DATA",136.5,3,1,30,0)
associated with organ and/or circulatory dysfunction. Report this 
"DATA",136.5,3,1,31,0)
variable if the patient has the clinical signs and symptoms of SIRS or 
"DATA",136.5,3,1,32,0)
sepsis AND documented organ and/or circulatory dysfunction. Examples of
"DATA",136.5,3,1,33,0)
organ dysfunction include: oliguria, acute alteration in mental status,
"DATA",136.5,3,1,34,0)
acute respiratory distress. Examples of circulatory dysfunction 
"DATA",136.5,3,1,35,0)
include: hypotension, requirement of inotropic or vasopressor agents.
"DATA",136.5,3,1,36,0)
 
"DATA",136.5,3,1,37,0)
* For the patient that had sepsis preoperatively, worsening of any of 
"DATA",136.5,3,1,38,0)
the above signs postoperatively would be reported as a postoperative 
"DATA",136.5,3,1,39,0)
sepsis.
"DATA",136.5,3,1,40,0)
 
"DATA",136.5,3,1,41,0)
Examples:
"DATA",136.5,3,1,42,0)
 
"DATA",136.5,3,1,43,0)
A patient comes into the emergency room with signs of sepsis - WBC 31, 
"DATA",136.5,3,1,44,0)
Temperature 104. CT shows an abdominal abscess. He is given antibiotics
"DATA",136.5,3,1,45,0)
and is then taken emergently to the OR to drain the abscess. He 
"DATA",136.5,3,1,46,0)
receives antibiotics intraoperatively. Postoperatively his WBC and
"DATA",136.5,3,1,47,0)
Temperature are trending down.
"DATA",136.5,3,1,48,0)
  POD#1 WBC 24, Temp 102 
"DATA",136.5,3,1,49,0)
  POD#2 WBC 14, Temp 100 
"DATA",136.5,3,1,50,0)
  POD#3 WBC 10, Temp 99 
"DATA",136.5,3,1,51,0)
This patient does not have postoperative sepsis as his WBC and 
"DATA",136.5,3,1,52,0)
Temperature are improving each postoperative day. 
"DATA",136.5,3,1,53,0)
 
"DATA",136.5,3,1,54,0)
Patient comes into the ER with s/s of sepsis - WBC 31, Temp 104. CT 
"DATA",136.5,3,1,55,0)
shows an abdominal abscess. He is given antibiotics and is taken 
"DATA",136.5,3,1,56,0)
emergently to the OR to drain the abscess. He receives antibiotics 
"DATA",136.5,3,1,57,0)
intraoperatively. Postoperatively his WBC and Temp are as follows:  
"DATA",136.5,3,1,58,0)
  POD#1 WBC 28, Temp 103
"DATA",136.5,3,1,59,0)
  POD#2 WBC 24, Temp 102.6
"DATA",136.5,3,1,60,0)
  POD#3 WBC 22, Temp 102 
"DATA",136.5,3,1,61,0)
  POD#4 WBC 21, Temp 101.6
"DATA",136.5,3,1,62,0)
  POD#5 WBC 30, Temp 104  
"DATA",136.5,3,1,63,0)
This patient does have postoperative sepsis because on postoperative 
"DATA",136.5,3,1,64,0)
day #5, his WBC and Temperature increase. The patient is having
"DATA",136.5,3,1,65,0)
worsening of the defined signs of sepsis.
"DATA",136.5,4,0)
PNEUMONIA
"DATA",136.5,4,1,0)
^^42^42^3070214^
"DATA",136.5,4,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,4,1,2,0)
Inflammation of the lungs caused primarily by bacteria, viruses, and/or
"DATA",136.5,4,1,3,0)
chemical irritants, usually manifested by chills, fever, pain in the
"DATA",136.5,4,1,4,0)
chest, cough, purulent, bloody sputum. Report as an occurrence if the
"DATA",136.5,4,1,5,0)
patient has pneumonia meeting the definition of pneumonia below AND
"DATA",136.5,4,1,6,0)
pneumonia not present preoperatively.
"DATA",136.5,4,1,7,0)
 
"DATA",136.5,4,1,8,0)
Pneumonia must meet one of the following TWO criteria:
"DATA",136.5,4,1,9,0)
Criterion 1.
"DATA",136.5,4,1,10,0)
  Rales or dullness to percussion on physical examination of chest AND
"DATA",136.5,4,1,11,0)
  any of the following:
"DATA",136.5,4,1,12,0)
  a. New onset of purulent sputum or change in character of sputum
"DATA",136.5,4,1,13,0)
  b. Organism isolate from blood culture
"DATA",136.5,4,1,14,0)
  c. Isolation of pathogen from specimen obtained by transtracheal
"DATA",136.5,4,1,15,0)
     aspirate, bronchial brushing, or biopsy
"DATA",136.5,4,1,16,0)
 
"DATA",136.5,4,1,17,0)
 OR
"DATA",136.5,4,1,18,0)
 
"DATA",136.5,4,1,19,0)
Criterion 2.
"DATA",136.5,4,1,20,0)
  Chest radiographic examination shows new or progressive infiltrate, 
"DATA",136.5,4,1,21,0)
  consolidation, cavitation, or pleural effusion AND any of the 
"DATA",136.5,4,1,22,0)
  following:
"DATA",136.5,4,1,23,0)
  a. New onset of purulent sputum or change in character of sputum
"DATA",136.5,4,1,24,0)
  b. Organism isolated from blood culture
"DATA",136.5,4,1,25,0)
  c. Isolation of pathogen from specimen obtained by transtracheal    
"DATA",136.5,4,1,26,0)
     aspirate, bronchial brushing, or biopsy
"DATA",136.5,4,1,27,0)
  d. Isolation of virus or detection of viral antigen in respiratory
"DATA",136.5,4,1,28,0)
     secretions
"DATA",136.5,4,1,29,0)
  e. Diagnostic single antibody titer (IgM) or fourfold increase in
"DATA",136.5,4,1,30,0)
     paired serum samples (IgG) for pathogen
"DATA",136.5,4,1,31,0)
  f. Histopathologic evidence of pneumonia
"DATA",136.5,4,1,32,0)
 
"DATA",136.5,4,1,33,0)
*If pneumonia was present preoperatively and resolved postoperatively 
"DATA",136.5,4,1,34,0)
and a new pneumonia is identified within 30 days after surgery, the
"DATA",136.5,4,1,35,0)
following criteria must be met in order to report as a postoperative
"DATA",136.5,4,1,36,0)
pneumonia occurrence:
"DATA",136.5,4,1,37,0)
   - Patient must have completed the antibiotic course for the 
"DATA",136.5,4,1,38,0)
     previous pneumonia.
"DATA",136.5,4,1,39,0)
   - Patient must have evidence of a clear chest x-ray after the 
"DATA",136.5,4,1,40,0)
     previous pneumonia and prior to the new pneumonia.
"DATA",136.5,4,1,41,0)
   - There must be evidence of a new isolate of micro-organism on 
"DATA",136.5,4,1,42,0)
     culture.
"DATA",136.5,5,0)
PULMONARY EMBOLISM
"DATA",136.5,5,1,0)
^^12^12^3070305^
"DATA",136.5,5,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,5,1,2,0)
Lodging of a blood clot in a pulmonary artery with subsequent 
"DATA",136.5,5,1,3,0)
obstruction of blood supply to the lung parenchyma. The blood clots 
"DATA",136.5,5,1,4,0)
usually originate from the deep leg veins or the pelvic venous system.
"DATA",136.5,5,1,5,0)
Enter "YES" if the patient has a V-Q scan interpreted as high 
"DATA",136.5,5,1,6,0)
probability of pulmonary embolism or a positive pulmonary arteriogram 
"DATA",136.5,5,1,7,0)
or positive CT angiogram or positive Spiral CT exam. Treatment usually
"DATA",136.5,5,1,8,0)
consists of:
"DATA",136.5,5,1,9,0)
 - Initiation of anticoagulation therapy
"DATA",136.5,5,1,10,0)
 - Placement of mechanical interruption (e.g. Greenfield Filter), for
"DATA",136.5,5,1,11,0)
   patients in whom anticoagulation is contraindicated or already 
"DATA",136.5,5,1,12,0)
   instituted.
"DATA",136.5,6,0)
ON VENTILATOR > 48 HOURS
"DATA",136.5,6,1,0)
^^10^10^3070223^
"DATA",136.5,6,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,6,1,2,0)
Total duration of ventilator-assisted respirations during postoperative
"DATA",136.5,6,1,3,0)
hospitalization was >48 hours. This can occur at any time during the
"DATA",136.5,6,1,4,0)
30-day period postoperatively. This time assessment is CUMULATIVE, not
"DATA",136.5,6,1,5,0)
necessarily consecutive. Ventilator-assisted respirations can be via
"DATA",136.5,6,1,6,0)
endotracheal tube, nasotracheal tube, or tracheostomy tube.
"DATA",136.5,6,1,7,0)
 
"DATA",136.5,6,1,8,0)
CICSP Definition (2007):
"DATA",136.5,6,1,9,0)
Indicate if the total duration of ventilator-assisted respiration
"DATA",136.5,6,1,10,0)
within 30 days post-operatively was greater than or equal to 48 hours.
"DATA",136.5,7,0)
UNPLANNED INTUBATION^^1
"DATA",136.5,7,1,0)
^^9^9^3060313^
"DATA",136.5,7,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,7,1,2,0)
Patient required placement of an endotracheal tube and mechanical or 
"DATA",136.5,7,1,3,0)
assisted ventilation because of the onset of respiratory or cardiac 
"DATA",136.5,7,1,4,0)
failure manifested by severe respiratory distress, hypoxia, 
"DATA",136.5,7,1,5,0)
hypercarbia, or respiratory acidosis. In patients who were intubated 
"DATA",136.5,7,1,6,0)
for their surgery, unplanned intubation occurs after they have been 
"DATA",136.5,7,1,7,0)
extubated after surgery. In patients who were not intubated during 
"DATA",136.5,7,1,8,0)
surgery, intubation at any time after their surgery is considered 
"DATA",136.5,7,1,9,0)
unplanned. 
"DATA",136.5,8,0)
RENAL INSUFFICIENCY
"DATA",136.5,8,1,0)
^^4^4^3040318^
"DATA",136.5,8,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,8,1,2,0)
The reduced capacity of the kidney to perform its function as evidenced
"DATA",136.5,8,1,3,0)
by a rise in creatinine of >2 mg/dl from preoperative value, but with
"DATA",136.5,8,1,4,0)
no requirement for dialysis.
"DATA",136.5,8,2,0)
^136.53^1^1
"DATA",136.5,8,2,1,0)
PROGRESSIVE RENAL INSUFFICIENCY
"DATA",136.5,9,0)
ACUTE RENAL FAILURE
"DATA",136.5,9,1,0)
^^13^13^3070305^
"DATA",136.5,9,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,9,1,2,0)
In a patient who did not require dialysis preoperatively, worsening of 
"DATA",136.5,9,1,3,0)
renal dysfunction postoperatively requiring hemodialysis, peritoneal 
"DATA",136.5,9,1,4,0)
dialysis, hemofiltration, hemodiafiltration or ultrafiltration.
"DATA",136.5,9,1,5,0)
 
"DATA",136.5,9,1,6,0)
TIP: If the patient refuses dialysis the answer is Yes to this 
"DATA",136.5,9,1,7,0)
variable, because he/she did require dialysis.
"DATA",136.5,9,1,8,0)
 
"DATA",136.5,9,1,9,0)
CICSP Definition (2004):
"DATA",136.5,9,1,10,0)
Indicate if the patient developed new renal failure requiring dialysis 
"DATA",136.5,9,1,11,0)
or experienced an exacerbation of preoperative renal failure requiring 
"DATA",136.5,9,1,12,0)
initiation of dialysis (not on dialysis preoperatively) within 30 days 
"DATA",136.5,9,1,13,0)
postoperatively.
"DATA",136.5,9,2,0)
^136.53^1^1
"DATA",136.5,9,2,1,0)
RENAL FAILURE
"DATA",136.5,10,0)
URINARY TRACT INFECTION
"DATA",136.5,10,1,0)
^^22^22^3040318^
"DATA",136.5,10,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,10,1,2,0)
Postoperative symptomatic urinary tract infection must meet one of the 
"DATA",136.5,10,1,3,0)
following TWO criteria:
"DATA",136.5,10,1,4,0)
 
"DATA",136.5,10,1,5,0)
1. One of the following: fever (>38 degrees C), urgency, frequency,
"DATA",136.5,10,1,6,0)
   dysuria, or suprapubic tenderness AND a urine culture of >100,000
"DATA",136.5,10,1,7,0)
   colonies/ml urine with no more than two species of organisms
"DATA",136.5,10,1,8,0)
 
"DATA",136.5,10,1,9,0)
OR
"DATA",136.5,10,1,10,0)
 
"DATA",136.5,10,1,11,0)
2. Two of the following: fever (>38 degrees C), urgency, frequency,
"DATA",136.5,10,1,12,0)
   dysuria, or suprapubic tenderness AND any of the following:
"DATA",136.5,10,1,13,0)
   - Dipstick test positive for leukocyte esterase and/or nitrate
"DATA",136.5,10,1,14,0)
   - Pyuria (>10 WBCs/cc or >3 WBC/hpf of unspun urine)
"DATA",136.5,10,1,15,0)
   - Organisms seen on Gram stain of unspun urine
"DATA",136.5,10,1,16,0)
   - Two urine cultures with repeated isolation of the same uropathogen
"DATA",136.5,10,1,17,0)
     with >100 colonies/ml urine in non-voided specimen
"DATA",136.5,10,1,18,0)
   - Urine culture with <100,000 colonies/ml urine of single
"DATA",136.5,10,1,19,0)
     uropathogen in patient being treated with appropriate
"DATA",136.5,10,1,20,0)
     antimicrobial therapy
"DATA",136.5,10,1,21,0)
   - Physician's diagnosis
"DATA",136.5,10,1,22,0)
   - Physician institutes appropriate antimicrobial therapy
"DATA",136.5,10,2,0)
^136.53^1^1
"DATA",136.5,10,2,1,0)
UTI
"DATA",136.5,11,0)
PULMONARY EDEMA^1
"DATA",136.5,11,1,0)
^136.52^2^2^3040318^^^^
"DATA",136.5,11,1,1,0)
Postoperative distress requiring treatment and diagnosis of CHF or
"DATA",136.5,11,1,2,0)
pulmonary edema or Adult Respiratory Distress Syndrome.
"DATA",136.5,12,0)
STROKE/CVA
"DATA",136.5,12,1,0)
^^10^10^3040617^
"DATA",136.5,12,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,12,1,2,0)
Patient develops an embolic, thrombotic, or hemorrhagic vascular 
"DATA",136.5,12,1,3,0)
accident or stroke with motor, sensory, or cognitive dysfunction (e.g.,
"DATA",136.5,12,1,4,0)
hemiplegia, hemiparesis, aphasia, sensory deficit, impaired memory) 
"DATA",136.5,12,1,5,0)
that persist for 24 or more hours.
"DATA",136.5,12,1,6,0)
 
"DATA",136.5,12,1,7,0)
CICSP Definition (2004):
"DATA",136.5,12,1,8,0)
Indicate if there was any new objective neurologic deficit lasting >72
"DATA",136.5,12,1,9,0)
hours with onset immediately post-operatively or occurring within the
"DATA",136.5,12,1,10,0)
30 days after surgery.
"DATA",136.5,12,2,0)
^136.53^2^2
"DATA",136.5,12,2,1,0)
CEREBRAL VASCULAR ACCIDENT
"DATA",136.5,12,2,2,0)
CVA
"DATA",136.5,13,0)
COMA > 24 HOURS
"DATA",136.5,13,1,0)
^^12^12^3060321^
"DATA",136.5,13,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,13,1,2,0)
Patient is unconscious, postures to painful stimuli, or is 
"DATA",136.5,13,1,3,0)
unresponsive to all stimuli (exclude transient disorientation or
"DATA",136.5,13,1,4,0)
psychosis) for greater than 24 hours during postoperative
"DATA",136.5,13,1,5,0)
hospitalization. Do not include drug-induced coma (e.g. Propofol
"DATA",136.5,13,1,6,0)
drips, etc.)
"DATA",136.5,13,1,7,0)
 
"DATA",136.5,13,1,8,0)
CICSP Definition (2006):
"DATA",136.5,13,1,9,0)
Indicate if postoperatively within 30 days of surgery there was a 
"DATA",136.5,13,1,10,0)
significantly decreased level of consciousness (exclude transient 
"DATA",136.5,13,1,11,0)
disorientation or psychosis) for greater than or equal to 24 hours
"DATA",136.5,13,1,12,0)
as evidenced by lack of response to deep, painful stimuli.
"DATA",136.5,14,0)
PERIPHERAL NERVE INJURY
"DATA",136.5,14,1,0)
^136.52^6^6^3070214^^
"DATA",136.5,14,1,1,0)
NSQIP Definition (2007):
"DATA",136.5,14,1,2,0)
Peripheral nerve damage may result from damage to the nerve fibers, 
"DATA",136.5,14,1,3,0)
cell body, or myelin sheath during surgery. Peripheral nerve injuries
"DATA",136.5,14,1,4,0)
which result in motor deficits only to the cervical plexus, brachial
"DATA",136.5,14,1,5,0)
plexus, ulnar plexus, lumbar-sacral plexus (sciatic nerve), peroneal
"DATA",136.5,14,1,6,0)
nerve, and/or the femoral nerve should be included.
"DATA",136.5,15,0)
BLEEDING/TRANSFUSIONS
"DATA",136.5,15,1,0)
^^9^9^3040318^
"DATA",136.5,15,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,15,1,2,0)
Any transfusion (including autologous) of packed red blood cells or 
"DATA",136.5,15,1,3,0)
whole blood given from the time the patient leaves the operating room 
"DATA",136.5,15,1,4,0)
up to and including 72 hours postoperatively. Report as an occurrence
"DATA",136.5,15,1,5,0)
for five or more units of packed red blood cell in the postoperative
"DATA",136.5,15,1,6,0)
period including hanging blood from the OR that is finished outside
"DATA",136.5,15,1,7,0)
of the OR. If the patient receives shed blood, autologous blood, cell
"DATA",136.5,15,1,8,0)
saver blood or pleurovac postoperatively, this is counted if greater
"DATA",136.5,15,1,9,0)
than four units. The blood may be given for any reason.
"DATA",136.5,16,0)
CARDIAC ARREST REQUIRING CPR^^1
"DATA",136.5,16,1,0)
^^12^12^3060119^
"DATA",136.5,16,1,1,0)
NSQIP Definition (2006):
"DATA",136.5,16,1,2,0)
The absence of cardiac rhythm or presence of chaotic cardiac rhythm 
"DATA",136.5,16,1,3,0)
that results in loss of consciousness requiring the initiation of any 
"DATA",136.5,16,1,4,0)
component of basic and/or advanced cardiac life support. Patients with 
"DATA",136.5,16,1,5,0)
AICDs that fire but the patient does not lose consciousness should be 
"DATA",136.5,16,1,6,0)
excluded.
"DATA",136.5,16,1,7,0)
 
"DATA",136.5,16,1,8,0)
CICSP Definition (2004):
"DATA",136.5,16,1,9,0)
Indicate if there was any cardiac arrest requiring external or open 
"DATA",136.5,16,1,10,0)
cardiopulmonary resuscitation (CPR) occurring in the operating room, 
"DATA",136.5,16,1,11,0)
ICU, ward, or out-of-hospital after the chest had been completely 
"DATA",136.5,16,1,12,0)
closed and within 30 days of surgery.
"DATA",136.5,17,0)
MYOCARDIAL INFARCTION^^1
"DATA",136.5,17,1,0)
^^12^12^3070223^
"DATA",136.5,17,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,17,1,2,0)
A new transmural acute myocardial infarction occurring during surgery 
"DATA",136.5,17,1,3,0)
or within 30 days following surgery as manifested by new Q-waves on 
"DATA",136.5,17,1,4,0)
ECG. Non-Q-wave infarctions should be entered under "OTHER".
"DATA",136.5,17,1,5,0)
 
"DATA",136.5,17,1,6,0)
CICSP Definition (2007):
"DATA",136.5,17,1,7,0)
Indicate the presence of a peri-operative MI if at least one of the 
"DATA",136.5,17,1,8,0)
following criteria occurs either intraoperatively or postoperatively 
"DATA",136.5,17,1,9,0)
within 30 days:
"DATA",136.5,17,1,10,0)
 1. Evolutionary ST-segment elevations
"DATA",136.5,17,1,11,0)
 2. Development of new Q-waves in two or more contiguous ECG leads
"DATA",136.5,17,1,12,0)
 3. New or presumably new LBBB pattern on the ECG
"DATA",136.5,18,0)
ILEUS/BOWEL OBSTRUCTION^1
"DATA",136.5,18,1,0)
^136.52^6^6^3040318^^^^
"DATA",136.5,18,1,1,0)
This category includes prolonged ileus or bowel obstruction.  Ileus is
"DATA",136.5,18,1,2,0)
obstruction of the intestines from a variety of causes including
"DATA",136.5,18,1,3,0)
mechanical obstruction, peritonitis, adhesions, or post-surgically as a
"DATA",136.5,18,1,4,0)
result of functional dysmotility by the bowel.  Bowel obstruction is any
"DATA",136.5,18,1,5,0)
hindrance to the passage of the intestinal contents.  Prolonged ileus or
"DATA",136.5,18,1,6,0)
obstruction is defined as longer than 5 days postoperatively.
"DATA",136.5,19,0)
GRAFT/PROSTHESIS/FLAP FAILURE
"DATA",136.5,19,1,0)
^^4^4^3040318^
"DATA",136.5,19,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,19,1,2,0)
Mechanical failure of an extracardiac graft/or prosthesis including 
"DATA",136.5,19,1,3,0)
myocutaneous flaps and skin grafts requiring return to the operating 
"DATA",136.5,19,1,4,0)
room, interventional radiology, or a balloon angioplasty.
"DATA",136.5,20,0)
DVT/THROMBOPHLEBITIS
"DATA",136.5,20,1,0)
^^7^7^3100430^
"DATA",136.5,20,1,1,0)
VASQIP Definition (2010):
"DATA",136.5,20,1,2,0)
The identification of a new blood clot or thrombus within the deep 
"DATA",136.5,20,1,3,0)
venous system, which may be coupled with inflammation. This diagnosis 
"DATA",136.5,20,1,4,0)
is confirmed by a duplex, venogram, CT scan or other imaging modality.
"DATA",136.5,20,1,5,0)
The patient must be treated with therapeutic anticoagulation therapy,
"DATA",136.5,20,1,6,0)
and/or placement of a vena cava filter or clipping of the vena cava or
"DATA",136.5,20,1,7,0)
recommended for such.
"DATA",136.5,20,2,0)
^136.53^2^2
"DATA",136.5,20,2,1,0)
DEEP VEIN THROMBOSIS/THROMBOPHLEBITIS
"DATA",136.5,20,2,2,0)
THROMBOPHLEBITIS
"DATA",136.5,21,0)
OTHER OCCURRENCE^^1
"DATA",136.5,21,1,0)
^^4^4^3040318^
"DATA",136.5,21,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,21,1,2,0)
Enter any other surgical occurrences which you feel to be significant
"DATA",136.5,21,1,3,0)
and that are not covered by the predefined occurrence categories. This 
"DATA",136.5,21,1,4,0)
occurrence category should have an accompanying ICD Diagnosis code.
"DATA",136.5,22,0)
WOUND DISRUPTION
"DATA",136.5,22,1,0)
^^3^3^3040318^
"DATA",136.5,22,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,22,1,2,0)
Separation of the layers of a surgical wound, which may be partial or 
"DATA",136.5,22,1,3,0)
complete, with disruption of the fascia. 
"DATA",136.5,23,0)
ENDOCARDITIS
"DATA",136.5,23,1,0)
^136.52^9^9^3040721^^^
"DATA",136.5,23,1,1,0)
CICSP Definition (2004):
"DATA",136.5,23,1,2,0)
Indicate if the chart documents that active endocarditis was present 
"DATA",136.5,23,1,3,0)
within 30 days postoperatively. Endocarditis is defined as any 
"DATA",136.5,23,1,4,0)
postoperative intracardiac infection (usually on a valve) documented 
"DATA",136.5,23,1,5,0)
by two or more positive blood cultures with the same organism, and/or 
"DATA",136.5,23,1,6,0)
development of vegetations and valve destruction seen by echo or 
"DATA",136.5,23,1,7,0)
repeat surgery, and/or histologic evidence of infection at repeat 
"DATA",136.5,23,1,8,0)
surgery or autopsy. Patients with preoperative endocarditis who have 
"DATA",136.5,23,1,9,0)
the above evidence of persistent infection should be included.
"DATA",136.5,24,0)
LOW CARDIAC OUTPUT > 6 HOURS
"DATA",136.5,24,1,0)
^136.52^4^4^3040318^^^^
"DATA",136.5,24,1,1,0)
This includes patient's that have had a postoperative cardiac index of
"DATA",136.5,24,1,2,0)
less than 2.0 L/min/M2 and/or peripheral manifestations (e.g. oliguria) of
"DATA",136.5,24,1,3,0)
low cardiac output present for 6 or more hours following surgery requiring
"DATA",136.5,24,1,4,0)
inotropic and/or intra-aortic ballon pump support.
"DATA",136.5,25,0)
MEDIASTINITIS
"DATA",136.5,25,1,0)
^^4^4^3040809^
"DATA",136.5,25,1,1,0)
CICSP Definition (2004):
"DATA",136.5,25,1,2,0)
Indicate if the patient developed a bacterial infection involving the 
"DATA",136.5,25,1,3,0)
sternum or deep to the sternum requiring drainage and anti-microbial 
"DATA",136.5,25,1,4,0)
therapy diagnosed within 30 days after surgery.
"DATA",136.5,26,0)
REOPERATION FOR BLEEDING
"DATA",136.5,26,1,0)
^^3^3^3040809^
"DATA",136.5,26,1,1,0)
CICSP Definition (2004):
"DATA",136.5,26,1,2,0)
Indicate if there was any re-exploration of the thorax for suspected 
"DATA",136.5,26,1,3,0)
bleeding within 30 days of surgery.
"DATA",136.5,27,0)
REPEAT CARDIAC SURGICAL PROCEDURE
"DATA",136.5,27,1,0)
^136.52^17^17^3060302^^^
"DATA",136.5,27,1,1,0)
CICSP Definition (2006):
"DATA",136.5,27,1,2,0)
Indicate the CPB status if the patient underwent a repeat operation on 
"DATA",136.5,27,1,3,0)
the heart after the patient had left the operating room from the 
"DATA",136.5,27,1,4,0)
initial operation and within current hospitalization or within 30 days
"DATA",136.5,27,1,5,0)
of the initial operation. Use the same criteria to define a cardiac
"DATA",136.5,27,1,6,0)
surgery as listed on page 1 of the CICSP Instructions/Definitions. 
"DATA",136.5,27,1,7,0)
(Do NOT submit a separate second form for this second cardiac 
"DATA",136.5,27,1,8,0)
procedure if it occurs within 30 days post-operatively.) Indicate 
"DATA",136.5,27,1,9,0)
the one appropriate response:
"DATA",136.5,27,1,10,0)
 
"DATA",136.5,27,1,11,0)
None       - no repeat cardiac surgical procedure post-operatively 
"DATA",136.5,27,1,12,0)
             during index hospitalization or within 30 days of initial
"DATA",136.5,27,1,13,0)
             operation.
"DATA",136.5,27,1,14,0)
On-bypass  - patient underwent a repeat cardiac surgical procedure 
"DATA",136.5,27,1,15,0)
             utilizing CPB.
"DATA",136.5,27,1,16,0)
Off-bypass - patient underwent a repeat cardiac surgical procedure not 
"DATA",136.5,27,1,17,0)
             utilizing CPB.
"DATA",136.5,28,0)
STROKE^1
"DATA",136.5,28,1,0)
^136.52^3^3^3040202^^^^
"DATA",136.5,28,1,1,0)
This includes any new objective neurologic deficit lasting 30 minutes or
"DATA",136.5,28,1,2,0)
more with onset intraoperatively or occurring within 30 days following
"DATA",136.5,28,1,3,0)
surgery.
"DATA",136.5,29,0)
OTHER RESPIRATORY OCCURRENCE
"DATA",136.5,29,1,0)
^^5^5^3040318^
"DATA",136.5,29,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,29,1,2,0)
Enter any other respiratory occurrences that you feel to be significant
"DATA",136.5,29,1,3,0)
and that are not covered by the predefined respiratory occurrence
"DATA",136.5,29,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,29,1,5,0)
Diagnosis code.
"DATA",136.5,30,0)
OTHER CNS OCCURRENCE
"DATA",136.5,30,1,0)
^^5^5^3040318^
"DATA",136.5,30,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,30,1,2,0)
Enter any other neurologic related occurrences, which you feel to be 
"DATA",136.5,30,1,3,0)
significant and that are not covered by the predefined CNS occurrence
"DATA",136.5,30,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,30,1,5,0)
Diagnosis code.
"DATA",136.5,31,0)
OTHER URINARY TRACT OCCURRENCE
"DATA",136.5,31,1,0)
^^5^5^3040318^
"DATA",136.5,31,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,31,1,2,0)
Enter any other urinary occurrences which you feel to be significant 
"DATA",136.5,31,1,3,0)
and that are not covered by the predefined urinary tract occurrence
"DATA",136.5,31,1,4,0)
categories. This occurrence category should have an accompanying ICD 
"DATA",136.5,31,1,5,0)
Diagnosis code.
"DATA",136.5,32,0)
OTHER CARDIAC OCCURRENCE
"DATA",136.5,32,1,0)
^^5^5^3040318^
"DATA",136.5,32,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,32,1,2,0)
Enter any other cardiac related surgical occurrences which you feel to 
"DATA",136.5,32,1,3,0)
be significant and that are not covered by the predefined cardiac
"DATA",136.5,32,1,4,0)
occurrence categories. This occurrence category should have an 
"DATA",136.5,32,1,5,0)
accompanying ICD Diagnosis code.
"DATA",136.5,33,0)
TRACHEOSTOMY^^^Y
"DATA",136.5,33,1,0)
^^4^4^3040809^
"DATA",136.5,33,1,1,0)
CICSP Definition (2004):
"DATA",136.5,33,1,2,0)
Indicate if a procedure to cut into the trachea and insert a tube to 
"DATA",136.5,33,1,3,0)
overcome tracheal obstruction or to facilitate extended mechanical 
"DATA",136.5,33,1,4,0)
ventilation was performed within 30 days of surgery.
"DATA",136.5,34,0)
NEW MECHANICAL CIRCULATORY SUPPORT^^1^Y
"DATA",136.5,34,1,0)
^^20^20^3040721^
"DATA",136.5,34,1,1,0)
CICSP Definition (2004):
"DATA",136.5,34,1,2,0)
Indicate if the patient left the operating room suite with or required
"DATA",136.5,34,1,3,0)
post-op placement of a new IABP, ECMO, or VAD for circulatory support
"DATA",136.5,34,1,4,0)
within 30 days perioperatively. A "yes" response is appropriate even if
"DATA",136.5,34,1,5,0)
the pump is only used for a short time perioperatively. A "yes"
"DATA",136.5,34,1,6,0)
response, however, is only correct if the patient did not enter the
"DATA",136.5,34,1,7,0)
operating room with this same mechanical circulatory support, and the
"DATA",136.5,34,1,8,0)
device insertion occurred AFTER the induction of anesthesia.
"DATA",136.5,34,1,9,0)
 
"DATA",136.5,34,1,10,0)
If patient had/required new mechanical circulatory support, indicate 
"DATA",136.5,34,1,11,0)
whether the placement occurred intraoperatively or postoperatively.  
"DATA",136.5,34,1,12,0)
Indicate the one appropriate response:
"DATA",136.5,34,1,13,0)
 - intraoperatively: occurring while patient was in the operating room.
"DATA",136.5,34,1,14,0)
 - postoperatively:  occurring after patient left the operating room.
"DATA",136.5,34,1,15,0)
 
"DATA",136.5,34,1,16,0)
A "no" response is appropriate if the circulatory support device was 
"DATA",136.5,34,1,17,0)
placed as a prophylaxis before the induction of anesthesia; however, if
"DATA",136.5,34,1,18,0)
it was placed for any reason after the induction of anesthesia, then a
"DATA",136.5,34,1,19,0)
"yes" response is appropriate. A "no" response is also appropriate if
"DATA",136.5,34,1,20,0)
the primary operation is to insert a ventricular assist device.
"DATA",136.5,35,0)
ORGAN/SPACE SSI
"DATA",136.5,35,1,0)
^^32^32^3040318^
"DATA",136.5,35,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,35,1,2,0)
Organ/Space SSI is an infection that occurs within 30 days after the 
"DATA",136.5,35,1,3,0)
operation and the infection appears to be related to the operation and 
"DATA",136.5,35,1,4,0)
the infection involves any part of the anatomy (e.g., organs or spaces), 
"DATA",136.5,35,1,5,0)
other than the incision, which was opened or manipulated during an 
"DATA",136.5,35,1,6,0)
operation and at least one of the following:
"DATA",136.5,35,1,7,0)
 
"DATA",136.5,35,1,8,0)
  - Purulent drainage from a drain that is placed through a stab wound 
"DATA",136.5,35,1,9,0)
    into the organ/space.  
"DATA",136.5,35,1,10,0)
  - Organisms isolated from an aseptically obtained culture of fluid or 
"DATA",136.5,35,1,11,0)
    tissue in the organ/space.  
"DATA",136.5,35,1,12,0)
  - An abscess or other evidence of infection involving the organ/space 
"DATA",136.5,35,1,13,0)
    that is found on direct examination, during reoperation, or by 
"DATA",136.5,35,1,14,0)
    histopathologic or radiologic examination.  
"DATA",136.5,35,1,15,0)
  - Diagnosis of an organ/space SSI by a surgeon or attending physician.  
"DATA",136.5,35,1,16,0)
   
"DATA",136.5,35,1,17,0)
  Site-Specific Classifications of Organ/Space Surgical Site Infection
"DATA",136.5,35,1,18,0)
  --------------------------------------------------------------------
"DATA",136.5,35,1,19,0)
  Arterial or venous infection        Meningitis or ventriculitis
"DATA",136.5,35,1,20,0)
  Breast abscess or mastitis          Myocarditis or pericarditis
"DATA",136.5,35,1,21,0)
  Disc space                          Oral cavity (mouth, tongue, or
"DATA",136.5,35,1,22,0)
  Ear, mastoid                         gums)
"DATA",136.5,35,1,23,0)
  Endocarditis                        Osteomyelitis
"DATA",136.5,35,1,24,0)
  Endometritis                        Other infections of the lower
"DATA",136.5,35,1,25,0)
  Eye, other than conjunctivitis       respiratory tract (e.g. abscess
"DATA",136.5,35,1,26,0)
  Gastrointestinal tract               or empyema)
"DATA",136.5,35,1,27,0)
  Intra-abdominal, not specified      Other male or female reproductive
"DATA",136.5,35,1,28,0)
   elsewhere                           tract
"DATA",136.5,35,1,29,0)
  Intracranial, brain abscess or      Sinusitis
"DATA",136.5,35,1,30,0)
   dura                               Spinal abscess without meningitis
"DATA",136.5,35,1,31,0)
  Joint or bursa                      Upper respiratory tract
"DATA",136.5,35,1,32,0)
  Mediastinitis                       Vaginal cuff
"DATA",136.5,36,0)
OTHER WOUND OCCURRENCE
"DATA",136.5,36,1,0)
^^5^5^3040318^
"DATA",136.5,36,1,1,0)
NSQIP Definition (2004):
"DATA",136.5,36,1,2,0)
Enter any other wound occurrences that you feel to be significant and 
"DATA",136.5,36,1,3,0)
that are not covered by the predefined wound occurrence categories. 
"DATA",136.5,36,1,4,0)
This occurrence category should have an accompanying ICD Diagnosis 
"DATA",136.5,36,1,5,0)
code.
"DATA",136.5,37,0)
REPEAT VENTILATOR SUPPORT W/IN 30 DAYS^^0^Y
"DATA",136.5,37,1,0)
^^10^10^3071102^
"DATA",136.5,37,1,1,0)
CICSP Definition (2008)
"DATA",136.5,37,1,2,0)
Indicate if the patient was placed on ventilator support 
"DATA",136.5,37,1,3,0)
postoperatively within 30 days and this repeat ventilator support
"DATA",136.5,37,1,4,0)
is related to the index operation (For example, the patient is on
"DATA",136.5,37,1,5,0)
the ventilator intra-op and immediately post-op.  Then patient is
"DATA",136.5,37,1,6,0)
weaned and the ventilator is discontinued.  Later, the patient gets
"DATA",136.5,37,1,7,0)
into trouble and mechanical ventilation has to be reinstated.) 
"DATA",136.5,37,1,8,0)
However, if the patient returns to the OR within 30 days and gets
"DATA",136.5,37,1,9,0)
extubated immediately after, it is not considered repeat ventilator
"DATA",136.5,37,1,10,0)
support.
"DATA",136.5,38,0)
CLOSTRIDIUM DIFFICILE COLITIS (C-DIFFICILE)^^0
"DATA",136.5,38,1,0)
^^7^7^3071102^
"DATA",136.5,38,1,1,0)
NSQIP Definition (2008):
"DATA",136.5,38,1,2,0)
C. difficile-associated disease occurs when the normal intestinal
"DATA",136.5,38,1,3,0)
flora is altered, allowing C. difficile to flourish in the intestinal
"DATA",136.5,38,1,4,0)
tract and produce a toxin that causes a watery diarrhea.  C. difficile
"DATA",136.5,38,1,5,0)
diarrhea is confirmed by the presence of a toxin in a stool specimen.  
"DATA",136.5,38,1,6,0)
Answer yes only if you have a positive culture for C. difficile and/or
"DATA",136.5,38,1,7,0)
a toxin assay and diagnosis of C. difficile documented in the chart.
"DATA",136.5,38,2,0)
^136.53^1^1
"DATA",136.5,38,2,1,0)
C. DIFFICILE
"DATA",136.5,39,0)
POSTOPERATIVE ATRIAL FIBRILLATION^^0^Y
"DATA",136.5,39,1,0)
^136.52^4^4^3100430^^
"DATA",136.5,39,1,1,0)
VASQIP Definition (2010):
"DATA",136.5,39,1,2,0)
Indicate whether the patient had a new onset of atrial 
"DATA",136.5,39,1,3,0)
fibrillation/flutter (AF) requiring treatment. Does not include 
"DATA",136.5,39,1,4,0)
recurrence of AF which had been present preoperatively.
"DATA",136.5,39,2,0)
^136.53
"FIA",130)
SURGERY
"FIA",130,0)
^SRF(
"FIA",130,0,0)
130IP
"FIA",130,0,1)
y^y^p^^^^n^^n
"FIA",130,0,10)

"FIA",130,0,11)

"FIA",130,0,"RLRO")

"FIA",130,0,"VR")
3.0^SR
"FIA",130,130)
1
"FIA",130,130,.42)

"FIA",130,130,1.13)

"FIA",130,130,203)

"FIA",130,130,212)

"FIA",130,130,216)

"FIA",130,130,236)

"FIA",130,130,237)

"FIA",130,130,237.1)

"FIA",130,130,240)

"FIA",130,130,263)

"FIA",130,130,267)

"FIA",130,130,272.1)

"FIA",130,130,338)

"FIA",130,130,367)

"FIA",130,130,368)

"FIA",130,130,369)

"FIA",130,130,443)

"FIA",130,130,446)

"FIA",130,130,448)

"FIA",130,130,471)

"FIA",130,130,474)

"FIA",130,130,493)

"FIA",130,130,505)

"FIA",130,130,507)

"FIA",130,130,507.1)

"FIA",130,130,509)

"FIA",130,130.16)
1
"FIA",130,130.16,.01)

"FIA",136.5)
PERIOPERATIVE OCCURRENCE CATEGORY
"FIA",136.5,0)
^SRO(136.5,
"FIA",136.5,0,0)
136.5I
"FIA",136.5,0,1)
y^y^f^^n^^y^o^n
"FIA",136.5,0,10)

"FIA",136.5,0,11)

"FIA",136.5,0,"RLRO")

"FIA",136.5,0,"VR")
3.0^SR
"FIA",136.5,136.5)
0
"FIA",136.5,136.52)
0
"FIA",136.5,136.53)
0
"INI")
PRE^SR174UT1
"INIT")
PEX^SR174UTL
"IX",130,130.16,"AC",0)
130.16^AC^CoreFLS fields monitor flag.^MU^^R^IR^I^130.16^^^^^A
"IX",130,130.16,"AC",.1,0)
^^2^2^3100816^^
"IX",130,130.16,"AC",.1,1,0)
This cross-reference will be checked before sending a notification to
"IX",130,130.16,"AC",.1,2,0)
the CoreFLS software after editing any of these fields.
"IX",130,130.16,"AC",1)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130.16,"AC",1.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130.16,"AC",2)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130.16,"AC",2.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130.16,"AC",2.5)
Q
"IX",130,130.16,"AC",11.1,0)
^.114IA^2^2
"IX",130,130.16,"AC",11.1,1,0)
1^F^130.16^.01^^^F
"IX",130,130.16,"AC",11.1,1,3)

"IX",130,130.16,"AC",11.1,2,0)
2^F^130.16^3^^^F
"IX",130,130.16,"AC",11.1,2,3)

"KRN",.402,1409,-1)
0^1
"KRN",.402,1409,0)
SRO-NOCOMP^3100511.0752^^130^^^3100917
"KRN",.402,1409,"DR",1,130)
403////N;248////N;249////N;404////N;488////N;318////N;251////N;412////N;490////N;252////N;285////N;319////N;409////N;254////N;255////N;320////N;256////N;410////N;287////N;321////N;411////N;258////N;322////N;257////N;261////N;
"KRN",.402,1409,"DR",1,130,1)
263////N;250////N;385////N;386////N;387////N;388////N;389////N;391////N;466////N;467////N;447////N;448////N;
"KRN",19,7303,-1)
0^1
"KRN",19,7303,0)
SROA ASSESSMENT LIST^List of Surgery Risk Assessments^^R^^^^^^^^^^1^1
"KRN",19,7303,1,0)
^^1^1^3100624^
"KRN",19,7303,1,1,0)
This option is used to print the List of Surgery Risk Assessments reports.
"KRN",19,7303,15)
D EXIT^SROVAR
"KRN",19,7303,20)
D ^SROVAR
"KRN",19,7303,22)
Q
"KRN",19,7303,25)
SROALOG
"KRN",19,7303,99)
55675,30041
"KRN",19,7303,"U")
LIST OF SURGERY RISK ASSESSMEN
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^2930624^2930811
"PKG",167,22,1,"PAH",1,0)
174^3101005
"PKG",167,22,1,"PAH",1,1,0)
^^119^119^3101005
"PKG",167,22,1,"PAH",1,1,1,0)
This patch provides the annual updates to the Veterans Health Information 
"PKG",167,22,1,"PAH",1,1,2,0)
Systems and Technology Architecture (VistA) Surgery package in support of
"PKG",167,22,1,"PAH",1,1,3,0)
the VA Surgery Quality Improvement Program (VASQIP). The updates include
"PKG",167,22,1,"PAH",1,1,4,0)
the addition of new data fields, changes to existing fields, changes to 
"PKG",167,22,1,"PAH",1,1,5,0)
data entry screens, changes to reports, and changes to the Surgery Risk 
"PKG",167,22,1,"PAH",1,1,6,0)
Assessment transmissions.
"PKG",167,22,1,"PAH",1,1,7,0)
 
"PKG",167,22,1,"PAH",1,1,8,0)
Non-Cardiac Assessment Modifications:
"PKG",167,22,1,"PAH",1,1,9,0)
-------------------------------------
"PKG",167,22,1,"PAH",1,1,10,0)
- The frequency of transmission of 1-liner cases is changed from the 45th 
"PKG",167,22,1,"PAH",1,1,11,0)
  day past the end of the quarter to the 45th day past the end of the
"PKG",167,22,1,"PAH",1,1,12,0)
  month.
"PKG",167,22,1,"PAH",1,1,13,0)
 
"PKG",167,22,1,"PAH",1,1,14,0)
- Patient gender is added to the information transmitted on 1-liner cases.
"PKG",167,22,1,"PAH",1,1,15,0)
 
"PKG",167,22,1,"PAH",1,1,16,0)
- New fields added to SURGERY file (#130):
"PKG",167,22,1,"PAH",1,1,17,0)
  o ASSESSMENT COMPLETED BY field (#272.1)
"PKG",167,22,1,"PAH",1,1,18,0)
    When a non-cardiac assessment is completed, the user who completed the
"PKG",167,22,1,"PAH",1,1,19,0)
    assessment will be identified in this field and the name of the user 
"PKG",167,22,1,"PAH",1,1,20,0)
    will be transmitted with the assessment.
"PKG",167,22,1,"PAH",1,1,21,0)
  o PREOPERATIVE SLEEP APNEA field (#237.1)
"PKG",167,22,1,"PAH",1,1,22,0)
    This field is added to the Preoperative Information (Enter/Edit) [SROA
"PKG",167,22,1,"PAH",1,1,23,0)
    PREOP DATA] option, the assessment printout, assessment transmission
"PKG",167,22,1,"PAH",1,1,24,0)
    and the list of missing items functionality.
"PKG",167,22,1,"PAH",1,1,25,0)
 
"PKG",167,22,1,"PAH",1,1,26,0)
- The SURGERY CONSULT DATE field (#513) and the SURGERY CONSULT REQUESTED 
"PKG",167,22,1,"PAH",1,1,27,0)
  field (#516) are eliminated as non-cardiac assessment variables.
"PKG",167,22,1,"PAH",1,1,28,0)
 
"PKG",167,22,1,"PAH",1,1,29,0)
- This patch updates the CPT EXCLUSIONS file (#137) with data for fiscal 
"PKG",167,22,1,"PAH",1,1,30,0)
  year 2010.
"PKG",167,22,1,"PAH",1,1,31,0)
 
"PKG",167,22,1,"PAH",1,1,32,0)
- Field descriptions are modified in the following fields in SURGERY file 
"PKG",167,22,1,"PAH",1,1,33,0)
  (#130):
"PKG",167,22,1,"PAH",1,1,34,0)
  o HEIGHT field (#236)
"PKG",167,22,1,"PAH",1,1,35,0)
    The description and the input transform are modified.
"PKG",167,22,1,"PAH",1,1,36,0)
  o WEIGHT field (#237)
"PKG",167,22,1,"PAH",1,1,37,0)
    The description and the input transform are modified.
"PKG",167,22,1,"PAH",1,1,38,0)
  o HISTORY OF COPD field (#203)
"PKG",167,22,1,"PAH",1,1,39,0)
  o ASCITES field (#212)
"PKG",167,22,1,"PAH",1,1,40,0)
  o DISSEMINATED CANCER (Y/N) field (#338)
"PKG",167,22,1,"PAH",1,1,41,0)
  o INTRAOP DISSEMINATED CANCER field (#443)
"PKG",167,22,1,"PAH",1,1,42,0)
  o BLEEDING DISORDERS field (#216)
"PKG",167,22,1,"PAH",1,1,43,0)
  o OTHER PROCEDURE field (#.01 of OTHER PROCEDURES multiple field #.42)
"PKG",167,22,1,"PAH",1,1,44,0)
  o INTRAOPERATIVE ASCITES field (#446)
"PKG",167,22,1,"PAH",1,1,45,0)
  o DVT/THROMBOPHLEBITIS field (#263)
"PKG",167,22,1,"PAH",1,1,46,0)
    Note: The description of DVT/THROMBOPHLEBITIS in the PERIOPERATIVE 
"PKG",167,22,1,"PAH",1,1,47,0)
    OCCURRENCE CATEGORY file (#136.5) is updated as well.
"PKG",167,22,1,"PAH",1,1,48,0)
 
"PKG",167,22,1,"PAH",1,1,49,0)
- On the Operation Information (Enter/Edit) [SROA OPERATION DATA] option:
"PKG",167,22,1,"PAH",1,1,50,0)
  o When selecting item #3, CPT Codes (view only), the following note is 
"PKG",167,22,1,"PAH",1,1,51,0)
    added to the screen:
"PKG",167,22,1,"PAH",1,1,52,0)
       CPT Codes should be verified. If need be, report discrepancies to
"PKG",167,22,1,"PAH",1,1,53,0)
       the official CPT coder for surgery.
"PKG",167,22,1,"PAH",1,1,54,0)
  o When selecting item #5, Concurrent Procedure, the following note is 
"PKG",167,22,1,"PAH",1,1,55,0)
    added to the screen:
"PKG",167,22,1,"PAH",1,1,56,0)
       Concurrent Procedure: An additional operative procedure performed
"PKG",167,22,1,"PAH",1,1,57,0)
       by different surgical team (i.e., a different specialty/service)
"PKG",167,22,1,"PAH",1,1,58,0)
       under the same anesthetic which has a CPT code different from that
"PKG",167,22,1,"PAH",1,1,59,0)
       of the Principal Operative Procedure (e.g., fixation of a femur
"PKG",167,22,1,"PAH",1,1,60,0)
       fracture in a patient undergoing a laparotomy for trauma). This
"PKG",167,22,1,"PAH",1,1,61,0)
       field should be verified and, if need be, report discrepancies to
"PKG",167,22,1,"PAH",1,1,62,0)
       the official CPT coder for surgery.
"PKG",167,22,1,"PAH",1,1,63,0)
       
"PKG",167,22,1,"PAH",1,1,64,0)
- A new entry, N - NONE ASSIGNED, is added to the ASA CLASS file (#132.8).
"PKG",167,22,1,"PAH",1,1,65,0)
  The output transform on ASA CLASS field (#1.13) in SURGERY file (#130)
"PKG",167,22,1,"PAH",1,1,66,0)
  is modified to allow the display of the new entry.
"PKG",167,22,1,"PAH",1,1,67,0)
 
"PKG",167,22,1,"PAH",1,1,68,0)
- The list of missing items functionality is updated to remove deleted 
"PKG",167,22,1,"PAH",1,1,69,0)
  variables and to include the new variables.
"PKG",167,22,1,"PAH",1,1,70,0)
 
"PKG",167,22,1,"PAH",1,1,71,0)
Cardiac Assessment Modifications:
"PKG",167,22,1,"PAH",1,1,72,0)
---------------------------------
"PKG",167,22,1,"PAH",1,1,73,0)
- The SURGERY CONSULT DATE field (#513) and the PRIMARY CAUSE FOR DELAY 
"PKG",167,22,1,"PAH",1,1,74,0)
  field (#515) are eliminated as cardiac assessment variables.
"PKG",167,22,1,"PAH",1,1,75,0)
 
"PKG",167,22,1,"PAH",1,1,76,0)
- New fields added to SURGERY file (#130) as new cardiac variables:
"PKG",167,22,1,"PAH",1,1,77,0)
  o PREOP ATRIAL FIBRILLATION field (#509)
"PKG",167,22,1,"PAH",1,1,78,0)
    This field is added to the Clinical Information (Enter/Edit) [SROA 
"PKG",167,22,1,"PAH",1,1,79,0)
    CLINICAL INFORMATION] option.
"PKG",167,22,1,"PAH",1,1,80,0)
  o PULMONARY VALVE PROCEDURE field (#493)
"PKG",167,22,1,"PAH",1,1,81,0)
    This field is added to the Cardiac Procedures Operative Data 
"PKG",167,22,1,"PAH",1,1,82,0)
    (Enter/Edit) [SROA CARDIAC PROCEDURES] option.
"PKG",167,22,1,"PAH",1,1,83,0)
  o BNP field (#507)
"PKG",167,22,1,"PAH",1,1,84,0)
    This field is added to the Laboratory Test Results (Enter/Edit) [SROA 
"PKG",167,22,1,"PAH",1,1,85,0)
    LAB-CARDIAC] option.
"PKG",167,22,1,"PAH",1,1,86,0)
  o BNP DATE field (#507.1)
"PKG",167,22,1,"PAH",1,1,87,0)
    This field is added to the Laboratory Test Results (Enter/Edit) [SROA 
"PKG",167,22,1,"PAH",1,1,88,0)
    LAB-CARDIAC] option.
"PKG",167,22,1,"PAH",1,1,89,0)
  o POSTOP ATRIAL FIBRILLATION field (#448)
"PKG",167,22,1,"PAH",1,1,90,0)
    This field is added to the Outcome Information (Enter/Edit) [SROA 
"PKG",167,22,1,"PAH",1,1,91,0)
    CARDIAC-OUTCOMES] option. Associated with this yes/no field is a new 
"PKG",167,22,1,"PAH",1,1,92,0)
    entry, POSTOPERATIVE ATRIAL FIBRILLATION, in the PERIOPERATIVE 
"PKG",167,22,1,"PAH",1,1,93,0)
    OCCURRENCE CATEGORY file (#136.5).
"PKG",167,22,1,"PAH",1,1,94,0)
 
"PKG",167,22,1,"PAH",1,1,95,0)
- The following fields in SURGERY file (#130) are modified:
"PKG",167,22,1,"PAH",1,1,96,0)
  o AORTIC VALVE PROCEDURE field (#367)
"PKG",167,22,1,"PAH",1,1,97,0)
  o MITRAL VALVE PROCEDURE field (#368)
"PKG",167,22,1,"PAH",1,1,98,0)
  o TRICUSPID VALVE PROCEDURE field (#369)
"PKG",167,22,1,"PAH",1,1,99,0)
  o FUNCTIONAL HEALTH STATUS field (#240)
"PKG",167,22,1,"PAH",1,1,100,0)
  o PREOP CIRCULATORY DEVICE field (#474)
"PKG",167,22,1,"PAH",1,1,101,0)
  o ENDOVASCULAR REPAIR field (#505)
"PKG",167,22,1,"PAH",1,1,102,0)
  o D/T PATIENT DISCH FROM ICU field (#471)
"PKG",167,22,1,"PAH",1,1,103,0)
 
"PKG",167,22,1,"PAH",1,1,104,0)
- Corrections are made to the list of missing items functionality for the
"PKG",167,22,1,"PAH",1,1,105,0)
  following fields in the SURGERY file (#130):
"PKG",167,22,1,"PAH",1,1,106,0)
  o ANGINA field (#267)
"PKG",167,22,1,"PAH",1,1,107,0)
  o CONVERT FROM OFF PUMP TO CPB field (#469)
"PKG",167,22,1,"PAH",1,1,108,0)
 
"PKG",167,22,1,"PAH",1,1,109,0)
- TIME OPERATION BEGAN field (#.22) and TIME OPERATION ENDS field (#.23) 
"PKG",167,22,1,"PAH",1,1,110,0)
  are moved from the Operative Risk Summary Data (Enter/Edit) [SROA 
"PKG",167,22,1,"PAH",1,1,111,0)
  CARDIAC OPERATIVE RISK] option to the Resource Data [SROA CARDIAC
"PKG",167,22,1,"PAH",1,1,112,0)
  RESOURCE] option.
"PKG",167,22,1,"PAH",1,1,113,0)
 
"PKG",167,22,1,"PAH",1,1,114,0)
- The list of missing items functionality is updated to remove deleted 
"PKG",167,22,1,"PAH",1,1,115,0)
  variables and to include the new variables.
"PKG",167,22,1,"PAH",1,1,116,0)
 
"PKG",167,22,1,"PAH",1,1,117,0)
- The SURGERY CONSULT DATE field (#513) and the PRIMARY CAUSE FOR
"PKG",167,22,1,"PAH",1,1,118,0)
  DELAY field (#515) are removed from the Resource Data [SROA CARDIAC 
"PKG",167,22,1,"PAH",1,1,119,0)
  RESOURCE] option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
55
"RTN","SR174UT0")
0^45^B35597559^n/a
"RTN","SR174UT0",1,0)
SR174UT0 ;BIR/ADM - FY10 CPT EXCLUSION UTILITY, CONTINUED ;04/30/10
"RTN","SR174UT0",2,0)
 ;;3.0; Surgery ;**174**;24 Jun 93;Build 8
"RTN","SR174UT0",3,0)
 Q
"RTN","SR174UT0",4,0)
PEX ; populate file 137
"RTN","SR174UT0",5,0)
 F SRJ=0:1 S SRLIST=$P($T(LIST+SRJ)," ;;",2) Q:SRLIST=""  F SRI=1:1 S SRX=$P(SRLIST,",",SRI) Q:SRX=""  I $D(^ICPT("B",SRX)) D INT
"RTN","SR174UT0",6,0)
 Q
"RTN","SR174UT0",7,0)
INT S SRY=0,SRY=$O(^ICPT("B",SRX,SRY)) Q:SRY=""
"RTN","SR174UT0",8,0)
 K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRY,DIC="^SRO(137,",DIC(0)="L" D FILE^DICN
"RTN","SR174UT0",9,0)
 Q
"RTN","SR174UT0",10,0)
LIST ;;38510,38520,38525,38530,38790,38792,38794,40490,40799,40806,40808,40831,41010,41015,41019,41100,41105,41108,41115,41250
"RTN","SR174UT0",11,0)
 ;;41251,41252,41510,41512,41520,41530,41800,41805,41870,41872,41874,41899,42000,42100,42180,42182,42280,42281,42310,42400
"RTN","SR174UT0",12,0)
 ;;42405,42600,42650,42660,42800,42802,42804,42806,42820,42821,42825,42826,42830,42831,42835,42836,42860,42970,42971,43200
"RTN","SR174UT0",13,0)
 ;;43201,43202,43204,43205,43215,43216,43217,43219,43220,43226,43227,43228,43231,43232,43234,43235,43236,43237,43238,43239
"RTN","SR174UT0",14,0)
 ;;43240,43241,43242,43243,43244,43245,43246,43247,43248,43249,43250,43251,43255,43256,43257,43258,43259,43260,43261,43262
"RTN","SR174UT0",15,0)
 ;;43263,43264,43265,43267,43268,43269,43271,43272,43273,43450,43453,43456,43458,43460,43499,43600,43653,43750,43752,43760
"RTN","SR174UT0",16,0)
 ;;43761,43830,44015,44100,44132,44300,44360,44361,44363,44364,44365,44366,44369,44370,44372,44373,44376,44377,44378,44379
"RTN","SR174UT0",17,0)
 ;;44380,44382,44383,44385,44386,44388,44389,44390,44391,44392,44393,44394,44397,44500,44715,44720,44721,44901,45100,45300
"RTN","SR174UT0",18,0)
 ;;45303,45305,45307,45308,45309,45315,45317,45320,45321,45327,45330,45331,45332,45333,45334,45335,45337,45338,45339,45340
"RTN","SR174UT0",19,0)
 ;;45341,45342,45345,45355,45378,45379,45380,45381,45382,45383,45384,45385,45386,45387,45391,45392,45520,45900,45915,45990
"RTN","SR174UT0",20,0)
 ;;46050,46070,46080,46083,46200,46210,46211,46220,46221,46230,46250,46255,46257,46258,46260,46261,46262,46270,46275,46280
"RTN","SR174UT0",21,0)
 ;;46285,46288,46320,46500,46505,46600,46604,46606,46608,46610,46611,46612,46614,46615,46700,46705,46706,46707,46754,46900
"RTN","SR174UT0",22,0)
 ;;46910,46916,46917,46922,46924,46930,46934,46935,46936,46937,46938,46945,46946,47000,47011,47100,47133,47143,47144,47145
"RTN","SR174UT0",23,0)
 ;;47146,47147,47490,47500,47505,47510,47511,47525,47530,47552,47553,47554,47555,47556,47801,48102,48400,48551,48552,49041
"RTN","SR174UT0",24,0)
 ;;49180,49320,49400,49411,49419,49420,49421,49422,49423,49424,49427,49428,49429,49440,49441,49442,49446,49450,49451,49452
"RTN","SR174UT0",25,0)
 ;;49460,49465,49491,49492,49495,49496,49500,49501,50040,50080,50081,50200,50300,50323,50325,50327,50328,50329,50385,50386
"RTN","SR174UT0",26,0)
 ;;50390,50392,50393,50394,50398,50551,50553,50555,50557,50561,50562,50570,50572,50574,50575,50576,50580,50590,50592,50600
"RTN","SR174UT0",27,0)
 ;;50605,50684,50686,50688,50690,50951,50953,50955,50957,50961,50970,50972,50974,50976,50980,51000,51005,51010,51100,51101
"RTN","SR174UT0",28,0)
 ;;51102,51600,51605,51610,51700,51701,51702,51703,51705,51710,51715,51720,51725,51726,51727,51728,51729,51736,51741,51772
"RTN","SR174UT0",29,0)
 ;;51784,51785,51792,51795,51797,51798,52000,52001,52005,52007,52010,52204,52214,52224,52250,52260,52265,52270,52275,52276
"RTN","SR174UT0",30,0)
 ;;52277,52281,52282,52283,52285,52290,52300,52301,52305,52310,52315,52317,52318,52320,52325,52327,52332,52334,52343,52351
"RTN","SR174UT0",31,0)
 ;;52352,52353,52354,52355,53020,53025,53060,53200,53270,53275,53600,53601,53620,53621,53660,53661,53850,53855,54000,54001
"RTN","SR174UT0",32,0)
 ;;54055,54056,54060,54100,54105,54150,54160,54161,54162,54200,54230,54231,54235,54240,54250,54400,54401,54405,54406,54408
"RTN","SR174UT0",33,0)
 ;;54410,54415,54416,54450,54500,54505,54512,54520,54530,54535,54700,54800,54830,55000,55250,55300,55400,55450,55500,55520
"RTN","SR174UT0",34,0)
 ;;55559,55700,55705,55706,55870,55920,56605,56606,56700,56820,57020,57022,57023,57100,57105,57150,57155,57160,57170,57180
"RTN","SR174UT0",35,0)
 ;;57287,57400,57410,57420,57421,57452,57454,57456,57500,57510,57511,57513,57520,57700,58100,58300,58301,58321,58322,58323
"RTN","SR174UT0",36,0)
 ;;58340,58345,58346,58353,58555,58558,58559,58560,58561,58562,58563,58660,58661,58662,58670,58671,58672,58673,58679,58823
"RTN","SR174UT0",37,0)
 ;;58900,58970,58974,58976,59000,59001,59012,59015,59020,59025,59030,59050,59051,59070,59072,59074,59076,59100,59160,59200
"RTN","SR174UT0",38,0)
 ;;59300,59320,59325,59400,59409,59410,59412,59414,59425,59426,59430,59510,59514,59515,59525,59610,59612,59614,59618,59840
"RTN","SR174UT0",39,0)
 ;;59841,59850,59851,59852,59855,59856,59857,59866,59870,59871,59897,59899,60001,60100,60300,61001,61026,61050,61055,61070
"RTN","SR174UT0",40,0)
 ;;61623,61790,61791,61793,61796,61797,61798,61799,61800,62140,62141,62142,62143,62146,62147,62163,62252,62263,62264,62267
"RTN","SR174UT0",41,0)
 ;;62268,62269,62270,62272,62273,62280,62281,62282,62284,62287,62290,62291,62292,62294,62310,62311,62318,62319,62355,62367
"RTN","SR174UT0",42,0)
 ;;63600,63610,63615,63620,63621,63650,64400,64402,64405,64408,64410,64412,64413,64415,64416,64417,64418,64420,64421,64425
"RTN","SR174UT0",43,0)
 ;;64430,64435,64445,64446,64447,64448,64449,64450,64455,64470,64472,64475,64476,64479,64480,64483,64484,64490,64491,64492
"RTN","SR174UT0",44,0)
 ;;64493,64494,64495,64505,64508,64510,64517,64520,64530,64550,64553,64555,64560,64561,64565,64573,64575,64577,64580,64581
"RTN","SR174UT0",45,0)
 ;;64585,64590,64595,64600,64605,64610,64612,64613,64614,64620,64622,64623,64626,64627,64630,64632,64640,64650,64653,64680
"RTN","SR174UT0",46,0)
 ;;64681,64716,64718,64719,64721,64732,64734,64736,64738,64740,64742,64744,64761,64763,64766,64771,64772,64774,64776,64778
"RTN","SR174UT0",47,0)
 ;;64782,64783,64784,64786,64787,64788,64790,64792,64795,64820,64822,64823,64999,65091,65093,65101,65103,65105,65110,65112
"RTN","SR174UT0",48,0)
 ;;65114,65125,65130,65135,65140,65150,65155,65175,65205,65210,65220,65222,65235,65260,65265,65270,65272,65273,65275,65280
"RTN","SR174UT0",49,0)
 ;;65285,65286,65290,65400,65410,65420,65426,65430,65435,65436,65450,65600,65710,65730,65750,65755,65756,65757,65760,65765
"RTN","SR174UT0",50,0)
 ;;65767,65770,65771,65772,65775,65780,65781,65782,65800,65805,65810,65815,65820,65850,65855,65860,65865,65870,65875,65880
"RTN","SR174UT0",51,0)
 ;;65900,65920,65930,66020,66030,66130,66150,66155,66160,66165,66170,66172,66180,66185,66220,66225,66250,66500,66505,66600
"RTN","SR174UT0",52,0)
 ;;66605,66625,66630,66635,66680,66682,66700,66710,66711,66720,66740,66761,66762,66770,66820,66821,66825,66830,66840,66850
"RTN","SR174UT0",53,0)
 ;;66852,66920,66930,66940,66982,66983,66984,66985,66986,66990,66999,67005,67010,67015,67025,67027,67028,67030,67031,67036
"RTN","SR174UT0",54,0)
 ;;67038,67039,67040,67041,67042,67043,67101,67105,67107,67108,67110,67112,67113,67115,67120,67121,67141,67145,67208,67210
"RTN","SR174UT0",55,0)
 ;;67218,67220,67221,67225,67227,67228,67229,67250,67255,67299,67311,67312,67314,67316,67318,67320,67331,67332,67334,67335
"RTN","SR174UT0",56,0)
 ;;67340,67343,67345,67346,67399,67400,67405,67412,67413,67414,67415,67420,67430,67440,67445,67450,67500,67505,67515,67550
"RTN","SR174UT0",57,0)
 ;;67560,67570,67599,67700,67710,67715,67800,67801,67805,67808,67810,67820,67825,67830,67835,67840,67850,67875,67880,67882
"RTN","SR174UT0",58,0)
 ;;67900,67901,67902,67903,67904,67906,67908,67909,67911,67912,67914,67915,67916,67917,67921,67922,67923,67924,67930,67935
"RTN","SR174UT0",59,0)
 ;;67938,67950,67961,67966,67971,67973,67974,67975,67999,68020,68040,68100,68110,68115,68130,68135,68200,68320,68325,68326
"RTN","SR174UT0",60,0)
 ;;68328,68330,68335,68340,68360,68362,68371,68399,68400,68420,68440,68500,68505,68510,68520,68525,68530,68540,68550,68700
"RTN","SR174UT0",61,0)
 ;;68705,68720,68745,68750,68760,68761,68770,68801,68810,68811,68815,68816,68840,68850,68899,69000,69005,69020,69090,69100
"RTN","SR174UT0",62,0)
 ;;69105,69110,69120,69140,69145,69150,69155,69200,69205,69210,69220,69222,69300,69310,69320,69399,69400,69401,69405,69420
"RTN","SR174UT0",63,0)
 ;;69421,69424,69433,69436,69440,69450,69501,69502,69505,69511,69530,69535,69540,69550,69552,69554,69601,69602,69603,69604
"RTN","SR174UT0",64,0)
 ;;69605,69610,69620,69631,69632,69633,69635,69636,69637,69641,69642,69643,69644,69645,69646,69650,69660,69661,69662,69666
"RTN","SR174UT0",65,0)
 ;;69667,69670,69676,69700,69710,69711,69720,69725,69740,69745,69799,69801,69802,69805,69806,69820,69840,69905,69910,69915
"RTN","SR174UT0",66,0)
 ;;69930,69949,69950,69955,69960,69970,69979,69990
"RTN","SR174UT1")
0^^B2740713^n/a
"RTN","SR174UT1",1,0)
SR174UT1 ;BIR/SJA - SR*3*174 UTILITY ROUTINE ;06/29/10
"RTN","SR174UT1",2,0)
 ;;3.0; Surgery ;**174**;24 Jun 93;Build 8
"RTN","SR174UT1",3,0)
 Q
"RTN","SR174UT1",4,0)
PRE ; pre-install process for SR*3*174
"RTN","SR174UT1",5,0)
 ; delete data from file 136.5 and re-initialize file
"RTN","SR174UT1",6,0)
 K ^SRO(136.5) S ^SRO(136.5,0)="PERIOPERATIVE OCCURRENCE CATEGORY^136.5I^^"
"RTN","SR174UT1",7,0)
 ; delete DD for field 236
"RTN","SR174UT1",8,0)
 K DA,DIK S DA=236,DIK="^DD(130,",DA(1)=130 D ^DIK
"RTN","SR174UT1",9,0)
 ; delete DD for for .01 field of sub-file 130.16
"RTN","SR174UT1",10,0)
 K DA,DIK S DA=.01,DA(1)=130.16,DIK="^DD(130.16," D ^DIK
"RTN","SR174UT1",11,0)
 Q
"RTN","SR174UT1",12,0)
POST ; Add B-type Natriuretic Peptide (BNP) to file 139.2
"RTN","SR174UT1",13,0)
 I $G(^SRO(139.2,28,0))'="B-TYPE NATRIURETIC PEPTIDE (BNP)" D
"RTN","SR174UT1",14,0)
 .S DA=28,DIK="^SRO(139.2," D ^DIK
"RTN","SR174UT1",15,0)
 .S ^SRO(139.2,28,0)="B-TYPE NATRIURETIC PEPTIDE (BNP)",^SRO(139.2,28,2)="72^0^100"
"RTN","SR174UT1",16,0)
 .S DIK="^SRO(139.2,",DIK(1)=".01" D ENALL^DIK K DA,DIK
"RTN","SR174UT1",17,0)
 ;
"RTN","SR174UT1",18,0)
 S ^SRO(132.8,0)="ASA CLASS^132.8I^13^13"
"RTN","SR174UT1",19,0)
 S ^SRO(132.8,13,0)="N^N-None Assigned^This is a patient with no ASA Class assigned."
"RTN","SR174UT1",20,0)
AQ ; convert AQ x-ref to monthly format 
"RTN","SR174UT1",21,0)
 N DA,SRDT,SRTN K ^TMP("SRAQ",$J)
"RTN","SR174UT1",22,0)
 ; save list of cases in existing AQ list to ^TMP and remove existing AQ list
"RTN","SR174UT1",23,0)
 S SRDT="" F  S SRDT=$O(^SRF("AQ",SRDT)) Q:'SRDT  S SRTN="" F  S SRTN=$O(^SRF("AQ",SRDT,SRTN)) Q:'SRTN  D
"RTN","SR174UT1",24,0)
 .S ^TMP("SRAQ",$J,SRTN)="" K ^SRF("AQ",SRDT,SRTN)
"RTN","SR174UT1",25,0)
 ; set AQ in new monthly format
"RTN","SR174UT1",26,0)
 S SRTN="" F  S SRTN=$O(^TMP("SRAQ",$J,SRTN)) Q:'SRTN  S DA=SRTN D AQ^SROXR4
"RTN","SR174UT1",27,0)
 K ^TMP("SRAQ",$J)
"RTN","SR174UT1",28,0)
 Q
"RTN","SR174UTL")
0^^B52585002^n/a
"RTN","SR174UTL",1,0)
SR174UTL ;BIR/ADM - FY10 CPT EXCLUSION UTILITY ;04/30/10
"RTN","SR174UTL",2,0)
 ;;3.0; Surgery ;**174**;24 Jun 93;Build 8
"RTN","SR174UTL",3,0)
 Q
"RTN","SR174UTL",4,0)
PEX ; populate file 137
"RTN","SR174UTL",5,0)
 D POST^SR174UT1
"RTN","SR174UTL",6,0)
 N SRI,SRJ,SRL,SRLIST,SRX,SRY,X
"RTN","SR174UTL",7,0)
 D MES^XPDUTL("  Populating CPT EXCLUSIONS file...")
"RTN","SR174UTL",8,0)
 K ^SRO(137) S ^SRO(137,0)="CPT EXCLUSIONS^137P^^"
"RTN","SR174UTL",9,0)
 F SRJ=0:1 S SRLIST=$P($T(LIST+SRJ)," ;;",2) Q:SRLIST=""  F SRI=1:1 S SRX=$P(SRLIST,",",SRI) Q:SRX=""  I $D(^ICPT("B",SRX)) D INT
"RTN","SR174UTL",10,0)
 D PEX^SR174UT0
"RTN","SR174UTL",11,0)
 S SRX="00000" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=$O(^ICPT("B","01999"))  D INT
"RTN","SR174UTL",12,0)
 S SRX="69999" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=$O(^ICPT("B","79999"))  D INT
"RTN","SR174UTL",13,0)
 S SRX="79999" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=$O(^ICPT("B","89999"))  D INT
"RTN","SR174UTL",14,0)
 S SRX="89999" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=$O(^ICPT("B","99999"))  D INT
"RTN","SR174UTL",15,0)
 S SRX="A" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=""  D INT
"RTN","SR174UTL",16,0)
 S SRX="" F  S SRX=$O(^ICPT("B",SRX)) Q:SRX=""  I "0123456789"'[$E(SRX,5) D INT
"RTN","SR174UTL",17,0)
DEL ; delete routines SR174UT1 and SR174UT0
"RTN","SR174UTL",18,0)
 F X="SR174UT1","SR174UT0" X ^%ZOSF("TEST") I $T D
"RTN","SR174UTL",19,0)
 .D MES^XPDUTL(" Deleting routine "_X_"...")
"RTN","SR174UTL",20,0)
 .X ^%ZOSF("DEL")
"RTN","SR174UTL",21,0)
 K DA,DIC,DD,DO,DINUM,X
"RTN","SR174UTL",22,0)
 Q
"RTN","SR174UTL",23,0)
INT S SRY=0,SRY=$O(^ICPT("B",SRX,SRY)) Q:SRY=""
"RTN","SR174UTL",24,0)
 K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRY,DIC="^SRO(137,",DIC(0)="L" D FILE^DICN
"RTN","SR174UTL",25,0)
 Q
"RTN","SR174UTL",26,0)
LIST ;;0199T,0200T,0201T,0202T,0203T,0204T,0205T,0206T,0207T,10021,10022,10040,10060,10061,10080,10081,10120,11000,11010,11011
"RTN","SR174UTL",27,0)
 ;;11012,11040,11041,11042,11043,11044,11055,11056,11057,11100,11101,11200,11201,11300,11301,11302,11303,11305,11306,11307
"RTN","SR174UTL",28,0)
 ;;11308,11310,11311,11312,11313,11400,11401,11402,11403,11404,11406,11420,11421,11422,11423,11424,11426,11440,11441,11442
"RTN","SR174UTL",29,0)
 ;;11443,11444,11446,11450,11451,11462,11463,11470,11471,11600,11601,11602,11603,11604,11606,11620,11621,11622,11623,11624
"RTN","SR174UTL",30,0)
 ;;11626,11640,11641,11642,11643,11644,11646,11719,11720,11721,11730,11732,11740,11750,11752,11755,11760,11762,11765,11770
"RTN","SR174UTL",31,0)
 ;;11771,11772,11900,11901,11920,11921,11922,11950,11951,11952,11954,11970,11971,11975,11976,11977,11980,11981,11982,11983
"RTN","SR174UTL",32,0)
 ;;12001,12002,12004,12005,12006,12007,12011,12013,12014,12015,12016,12017,12018,12020,12021,12031,12032,12034,12035,12036
"RTN","SR174UTL",33,0)
 ;;12037,12041,12042,12044,12045,12046,12047,12051,12052,12053,12054,12055,12056,12057,13100,13101,13102,13120,13121,13122
"RTN","SR174UTL",34,0)
 ;;13131,13132,13133,13150,13151,13152,13153,13160,14000,14001,14020,14021,14040,14041,14060,14061,14300,14301,14302,14350
"RTN","SR174UTL",35,0)
 ;;15050,15100,15101,15110,15111,15115,15116,15120,15121,15130,15131,15135,15136,15150,15151,15152,15155,15156,15157,15170
"RTN","SR174UTL",36,0)
 ;;15171,15175,15176,15200,15201,15220,15221,15240,15241,15260,15261,15300,15301,15320,15321,15330,15331,15335,15336,15340
"RTN","SR174UTL",37,0)
 ;;15341,15360,15361,15365,15366,15400,15401,15420,15421,15430,15431,15775,15776,15780,15781,15782,15783,15786,15787,15788
"RTN","SR174UTL",38,0)
 ;;15789,15792,15793,15819,15820,15821,15822,15823,15824,15825,15826,15828,15829,15832,15833,15834,15835,15836,15837,15838
"RTN","SR174UTL",39,0)
 ;;15839,15850,15851,15852,15860,16000,16020,16025,16030,16035,16036,17000,17003,17106,17110,17250,17260,17261,17262,17263
"RTN","SR174UTL",40,0)
 ;;17264,17266,17270,17271,17272,17273,17274,17276,17280,17281,17282,17283,17284,17286,17340,17360,17380,17999,19000,19001
"RTN","SR174UTL",41,0)
 ;;19030,19100,19101,19102,19103,19112,19290,19291,19295,20200,20205,20206,20220,20225,20240,20245,20250,20251,20500,20501
"RTN","SR174UTL",42,0)
 ;;20520,20525,20526,20550,20551,20552,20553,20555,20600,20605,20610,20612,20615,20650,20660,20661,20662,20663,20664,20665
"RTN","SR174UTL",43,0)
 ;;20670,20680,20690,20692,20693,20694,20696,20697,20912,20924,20950,20974,20979,20982,20985,20986,20987,21011,21012,21013
"RTN","SR174UTL",44,0)
 ;;21014,21016,21030,21031,21032,21073,21076,21077,21079,21080,21081,21082,21083,21084,21085,21086,21087,21088,21089,21116
"RTN","SR174UTL",45,0)
 ;;21210,21310,21315,21320,21325,21330,21335,21336,21337,21338,21339,21340,21345,21400,21401,21421,21431,21440,21450,21451
"RTN","SR174UTL",46,0)
 ;;21452,21453,21480,21485,21497,21550,21552,21554,21555,21556,21800,21820,21920,21925,21930,21931,21932,21933,22305,22310
"RTN","SR174UTL",47,0)
 ;;22315,22505,22520,22521,22522,22900,22901,22902,22903,23065,23066,23071,23073,23075,23076,23100,23330,23331,23350,23500
"RTN","SR174UTL",48,0)
 ;;23505,23520,23525,23540,23545,23570,23575,23600,23605,23620,23625,23650,23655,23665,23675,23700,23930,23931,24065,24066
"RTN","SR174UTL",49,0)
 ;;24071,24073,24075,24076,24100,24101,24147,24160,24164,24200,24220,24300,24343,24470,24500,24505,24530,24535,24560,24565
"RTN","SR174UTL",50,0)
 ;;24576,24577,24600,24605,24620,24640,24650,24655,24670,24675,25028,25031,25065,25066,25071,25073,25075,25076,25100,25246
"RTN","SR174UTL",51,0)
 ;;25250,25251,25259,25500,25505,25520,25530,25535,25560,25565,25600,25605,25622,25624,25630,25635,25650,25651,25660,25671
"RTN","SR174UTL",52,0)
 ;;25675,25680,25690,25800,25805,25810,25820,25825,25830,26010,26011,26020,26025,26030,26034,26035,26037,26040,26045,26055
"RTN","SR174UTL",53,0)
 ;;26060,26070,26075,26080,26100,26105,26110,26111,26113,26115,26116,26140,26160,26200,26210,26262,26320,26340,26416,26432
"RTN","SR174UTL",54,0)
 ;;26508,26516,26517,26518,26600,26605,26607,26608,26641,26645,26670,26675,26700,26705,26720,26725,26740,26742,26750,26755
"RTN","SR174UTL",55,0)
 ;;26756,26770,26775,26820,26841,26842,26843,26844,26850,26852,26860,26861,26862,26863,26910,26951,27003,27040,27041,27043
"RTN","SR174UTL",56,0)
 ;;27045,27047,27048,27050,27052,27065,27090,27091,27093,27095,27096,27175,27178,27193,27194,27200,27216,27220,27222,27230
"RTN","SR174UTL",57,0)
 ;;27232,27238,27240,27246,27250,27252,27256,27257,27265,27266,27267,27268,27275,27306,27323,27324,27330,27337,27339,27370
"RTN","SR174UTL",58,0)
 ;;27500,27501,27502,27503,27508,27510,27516,27517,27520,27530,27532,27538,27550,27552,27560,27562,27570,27613,27614,27618
"RTN","SR174UTL",59,0)
 ;;27619,27632,27634,27648,27690,27691,27750,27752,27760,27762,27767,27768,27780,27781,27786,27788,27808,27810,27816,27818
"RTN","SR174UTL",60,0)
 ;;27824,27825,27830,27831,27840,27842,27860,27870,27871,28001,28005,28008,28010,28011,28020,28022,28024,28035,28039,28041
"RTN","SR174UTL",61,0)
 ;;28043,28045,28046,28050,28052,28054,28055,28060,28062,28070,28072,28080,28086,28088,28090,28092,28100,28102,28103,28104
"RTN","SR174UTL",62,0)
 ;;28106,28107,28108,28110,28111,28112,28113,28114,28116,28118,28119,28120,28122,28124,28126,28130,28140,28150,28153,28160
"RTN","SR174UTL",63,0)
 ;;28171,28173,28175,28190,28192,28193,28200,28202,28208,28210,28220,28222,28225,28226,28230,28232,28234,28238,28240,28250
"RTN","SR174UTL",64,0)
 ;;28260,28261,28262,28264,28270,28272,28280,28285,28286,28288,28289,28290,28292,28293,28294,28296,28297,28298,28299,28300
"RTN","SR174UTL",65,0)
 ;;28302,28304,28305,28306,28307,28308,28309,28310,28312,28313,28315,28320,28322,28340,28341,28344,28345,28360,28400,28405
"RTN","SR174UTL",66,0)
 ;;28406,28415,28430,28435,28436,28450,28455,28456,28465,28470,28475,28476,28485,28490,28495,28496,28505,28510,28515,28525
"RTN","SR174UTL",67,0)
 ;;28530,28531,28540,28545,28546,28555,28570,28575,28576,28585,28600,28605,28606,28615,28630,28635,28636,28645,28660,28665
"RTN","SR174UTL",68,0)
 ;;28666,28675,28705,28715,28725,28730,28735,28737,28740,28750,28755,28760,28810,28820,28825,28890,28899,29000,29010,29015
"RTN","SR174UTL",69,0)
 ;;29020,29025,29035,29040,29044,29046,29049,29055,29058,29065,29075,29085,29086,29105,29125,29126,29130,29131,29200,29220
"RTN","SR174UTL",70,0)
 ;;29240,29260,29280,29305,29325,29345,29355,29358,29365,29405,29425,29435,29440,29445,29450,29505,29515,29520,29530,29540
"RTN","SR174UTL",71,0)
 ;;29550,29580,29581,29590,29700,29705,29710,29715,29720,29730,29740,29750,29799,29800,29804,29805,29830,29836,29840,29843
"RTN","SR174UTL",72,0)
 ;;29845,29848,29856,29860,29863,29870,29900,29901,29902,30000,30020,30100,30110,30115,30117,30118,30120,30124,30125,30130
"RTN","SR174UTL",73,0)
 ;;30140,30150,30160,30200,30210,30220,30300,30310,30320,30400,30410,30420,30430,30435,30450,30460,30462,30465,30520,30540
"RTN","SR174UTL",74,0)
 ;;30545,30560,30580,30600,30620,30630,30801,30802,30901,30903,30905,30906,30915,30920,30930,30999,31000,31002,31020,31030
"RTN","SR174UTL",75,0)
 ;;31032,31040,31050,31051,31070,31075,31080,31081,31084,31085,31086,31087,31090,31200,31201,31205,31225,31230,31231,31233
"RTN","SR174UTL",76,0)
 ;;31235,31237,31238,31239,31240,31254,31255,31256,31267,31276,31287,31288,31290,31291,31292,31293,31294,31299,31500,31502
"RTN","SR174UTL",77,0)
 ;;31505,31510,31511,31512,31513,31515,31520,31525,31526,31527,31528,31529,31530,31531,31535,31536,31540,31541,31545,31546
"RTN","SR174UTL",78,0)
 ;;31560,31561,31570,31571,31575,31576,31577,31578,31579,31582,31584,31588,31600,31601,31603,31605,31610,31612,31613,31615
"RTN","SR174UTL",79,0)
 ;;31620,31622,31623,31624,31625,31626,31627,31628,31629,31630,31631,31632,31633,31635,31636,31637,31638,31640,31641,31643
"RTN","SR174UTL",80,0)
 ;;31645,31646,31656,31715,31717,31720,31725,31730,31830,32000,32002,32005,32019,32020,32400,32405,32420,32421,32422,32550
"RTN","SR174UTL",81,0)
 ;;32551,32552,32553,32560,32561,32562,32601,32602,32603,32604,32605,32606,32850,32855,32856,32960,33206,33207,33208,33210
"RTN","SR174UTL",82,0)
 ;;33211,33212,33213,33214,33215,33216,33217,33218,33220,33222,33223,33224,33225,33226,33233,33234,33235,33236,33237,33238
"RTN","SR174UTL",83,0)
 ;;33240,33241,33243,33244,33249,33282,33284,33420,33470,33471,33930,33933,33940,33944,33960,33961,33967,33968,33970,33971
"RTN","SR174UTL",84,0)
 ;;33973,33974,33975,33976,33977,33978,33979,33980,33981,33982,33983,35400,35450,35452,35454,35456,35458,35459,35460,35470
"RTN","SR174UTL",85,0)
 ;;35471,35472,35473,35474,35475,35476,35480,35481,35482,35483,35484,35485,35490,35491,35492,35493,35494,35495,36000,36002
"RTN","SR174UTL",86,0)
 ;;36005,36010,36011,36012,36013,36014,36015,36100,36120,36140,36145,36147,36148,36160,36200,36215,36216,36217,36218,36245
"RTN","SR174UTL",87,0)
 ;;36246,36247,36248,36260,36261,36262,36299,36400,36405,36406,36410,36415,36416,36420,36425,36430,36440,36450,36455,36460
"RTN","SR174UTL",88,0)
 ;;36468,36469,36470,36471,36481,36500,36510,36511,36512,36513,36514,36515,36516,36522,36540,36550,36555,36556,36557,36558
"RTN","SR174UTL",89,0)
 ;;36560,36561,36563,36565,36566,36568,36569,36570,36571,36575,36576,36578,36580,36581,36582,36583,36584,36585,36589,36590
"RTN","SR174UTL",90,0)
 ;;36591,36592,36593,36595,36596,36597,36600,36620,36625,36640,36660,36680,36800,36810,36815,36818,36819,36820,36821,36822
"RTN","SR174UTL",91,0)
 ;;36823,36825,36830,36831,36832,36833,36835,36870,37183,37195,37200,37209,37250,37251,37501,37607,37609,37620,37785,38200
"RTN","SR174UTL",92,0)
 ;;38204,38205,38206,38207,38208,38209,38210,38211,38212,38213,38214,38215,38220,38221,38230,38240,38241,38242,38500,38505
"RTN","SROACAR")
0^43^B13317261^B13335693
"RTN","SROACAR",1,0)
SROACAR ;BIR/MAM - OPEATIVE DATA ;12/03/07
"RTN","SROACAR",2,0)
 ;;3.0; Surgery ;**38,71,93,95,100,125,142,153,166,174**;24 Jun 93;Build 8
"RTN","SROACAR",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACAR",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACAR",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROACR1
"RTN","SROACAR",6,0)
ASK W !,"Select Cardiac Procedures Operative Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACAR",7,0)
 S X=$S(X="a":"A",X="n":"N",1:X) I '$D(SRAO(X)),(X'?.N1":".N),(X'="A"),(X'="N") D HELP G:SRSOUT END G START
"RTN","SROACAR",8,0)
 I X="A" S X="1:22"
"RTN","SROACAR",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>22)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACAR",10,0)
 I X="N" D  G:SRSOUT END G START
"RTN","SROACAR",11,0)
 .W ! K DIR S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set all fields on this page to NO"
"RTN","SROACAR",12,0)
 .D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROACAR",13,0)
 .I Y D NO2ALL
"RTN","SROACAR",14,0)
 D HDR^SROAUTL
"RTN","SROACAR",15,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACAR",16,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROACAR",17,0)
 .I $$LOCK^SROUTL(SRTN) W ! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",18,0)
 I $D(SRAO(X)) W ! S EMILY=X D  G START
"RTN","SROACAR",19,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",20,0)
END I 'SRSOUT D ^SROACR2
"RTN","SROACAR",21,0)
 W @IOF D ^SRSKILL
"RTN","SROACAR",22,0)
 Q
"RTN","SROACAR",23,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACAR",24,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter 'N' to set all fields on this page to NO."
"RTN","SROACAR",25,0)
 W !!,"3. Enter a number (1-22) to update the information in that field.  (For",!,"   example, enter '9' to update Aortic Valve Procedure.)"
"RTN","SROACAR",26,0)
 W !!,"4. Enter a range of numbers (1-22) separated by a ':' to enter a range of",!,"   information.  (For example, enter '9:11' to enter Aortic Valve",!,"   Procedure, Mitral Valve Procedure, and Tricuspid Valve Procedure.)"
"RTN","SROACAR",27,0)
 D RET
"RTN","SROACAR",28,0)
 Q
"RTN","SROACAR",29,0)
RANGE ; range of numbers
"RTN","SROACAR",30,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",31,0)
 .W ! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACAR",32,0)
 Q
"RTN","SROACAR",33,0)
ONE ; edit one item
"RTN","SROACAR",34,0)
 ;I EMILY=16 D MIS^SROACR1 Q
"RTN","SROACAR",35,0)
 I EMILY=22 D OPS Q
"RTN","SROACAR",36,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACAR",37,0)
 I 'SRSOUT,EMILY=8!(EMILY=13) D OK
"RTN","SROACAR",38,0)
 Q
"RTN","SROACAR",39,0)
NO2ALL ; set all fields to NO
"RTN","SROACAR",40,0)
 N II K DR,DIE S DA=SRTN,DIE=130
"RTN","SROACAR",41,0)
 F II=367,368,369,493,371,481,483,376,380,378,377,379,373,372,505,502 S DR=$S($D(DR):DR_";",1:"")_II_"////N"
"RTN","SROACAR",42,0)
 F II=365,366,464,465,416 S DR=DR_";"_II_"////0"
"RTN","SROACAR",43,0)
 S DR=DR_";"_512_"////N"
"RTN","SROACAR",44,0)
 D ^DIE K DR
"RTN","SROACAR",45,0)
 Q
"RTN","SROACAR",46,0)
OK N SRISCH,SRCPB S X=$G(^SRF(SRTN,206)),SRISCH=$P(X,"^",36),SRCPB=$P(X,"^",37)
"RTN","SROACAR",47,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !!,"  ***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***",! D RET W !
"RTN","SROACAR",48,0)
 Q
"RTN","SROACAR",49,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACAR",50,0)
 Q
"RTN","SROACAR",51,0)
OPS ; enter other cardiac procedures, specify
"RTN","SROACAR",52,0)
 S DIE=130,DA=SRTN,DR="502T" D ^DIE K DR Q:$D(Y)
"RTN","SROACAR",53,0)
 I X'="Y" K ^SRF(SRTN,209.1) Q
"RTN","SROACAR",54,0)
 S DIE=130,DA=SRTN,DR="484T" D ^DIE K DR
"RTN","SROACAR",55,0)
 Q
"RTN","SROACL1")
0^19^B27741852^B27042913
"RTN","SROACL1",1,0)
SROACL1 ;BIR/MAM - CARDIAC PREOP CLINICAL DATA ;06/13/06
"RTN","SROACL1",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153,160,174**;24 Jun 93;Build 8
"RTN","SROACL1",3,0)
 ;
"RTN","SROACL1",4,0)
 ; Reference to EN1^GMRVUT0 supported by DBIA #1446
"RTN","SROACL1",5,0)
 ;
"RTN","SROACL1",6,0)
 F I=0,200,202,205,206,206.1,208,209,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACL1",7,0)
HT N SRSD,SRED S SRED=$P(SRA(0),"^",9)
"RTN","SROACL1",8,0)
 I $P(SRA(206),"^")="" S SRSD=$$FMADD^XLFDT(SRED,-365),NYUK=$$HW(SRSD,SRED,"HT") D
"RTN","SROACL1",9,0)
 .I NYUK'="" S NYUK=NYUK+.5\1,$P(^SRF(SRTN,206),"^")=NYUK,SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACL1",10,0)
 S NYUK=$P(SRA(206),"^") S:NYUK'="" NYUK=$S(NYUK["C"!(NYUK["c"):+NYUK_" cm",+NYUK=NYUK:+NYUK_" in",NYUK="NS":" NS",1:NYUK) S SRAO(1)=NYUK_"^236"
"RTN","SROACL1",11,0)
WT I $P(SRA(206),"^",2)="" S SRSD=$$FMADD^XLFDT(SRED,-30),NYUK=$$HW(SRSD,SRED,"WT") D
"RTN","SROACL1",12,0)
 .I NYUK'="" S NYUK=NYUK+.5\1,$P(^SRF(SRTN,206),"^",2)=NYUK,SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACL1",13,0)
 S NYUK=$P(SRA(206),"^",2) S:NYUK'="" NYUK=$S(NYUK["K"!(NYUK["k"):+NYUK_" kg",+NYUK=NYUK:+NYUK_" lb",NYUK="NS":" NS",1:NYUK) S SRAO(2)=NYUK_"^237"
"RTN","SROACL1",14,0)
 K SRA(0) S NYUK=$P(SRA(209),"^",3),SRAO(3)=$S(NYUK="N":"   NO",NYUK="D":"  DIET",NYUK="O":"  ORAL",NYUK="I":" INSULIN",1:"")_"^475",NYUK=$P(SRA(200),"^",11) D YN S SRAO(4)=SHEMP_"^203"
"RTN","SROACL1",15,0)
 S SRAO(5)=$P(SRA(206),"^",5)_"^347",NYUK=$P(SRA(206),"^",6) D YN S SRAO(6)=SHEMP_"^209",NYUK=$P(SRA(206),"^",7) D YN S SRAO(7)=SHEMP_"^348"
"RTN","SROACL1",16,0)
 S Y=$P(SRA(200.1),"^",5),C=$P(^DD(130,510,0),"^",2) D Y^DIQ S SRAO(8)=$S(Y["-":$E($P(Y,"-",2),1,19),1:$E(Y,1,19))_"^510"
"RTN","SROACL1",17,0)
 S NYUK=$P(SRA(206),"^",10) D YN S SRAO(9)=SHEMP_"^349"
"RTN","SROACL1",18,0)
 S NYUK=$P(SRA(206),"^",11) D YN S SRAO(10)=SHEMP_"^350",NYUK=$P(SRA(200),"^",8),SRAO(11)=$S(NYUK=1:"INDEPENDENT",NYUK=2:"PARTIAL DEPENDENT",NYUK=3:"TOTALLY DEPENDENT",NYUK="NS":"NO STUDY",1:"")_"^240"
"RTN","SROACL1",19,0)
 S NYUK=$P(SRA(206),"^",13),SRAO(12)=$S(NYUK=0:"NONE    ",NYUK=1:"NONE RECENT",NYUK=2:"12-72 HRS",NYUK=3:"<12 hrs  ",NYUK=12:"12 - 72 hrs",NYUK=72:">72 hrs - 7 days",NYUK=7:">7 days  ",NYUK="NS":"NO STUDY",1:"")_"^351"
"RTN","SROACL1",20,0)
 S NYUK=$P(SRA(206),"^",14),SRAO(13)=$S(NYUK=0:"NONE",NYUK=1:"< OR = 7 DAYS",NYUK=2:"> 7 DAYS",1:"")_"^205"
"RTN","SROACL1",21,0)
 S NYUK=$P(SRA(206),"^",15) S SRAO(14)=$S(NYUK=0:"NONE",NYUK=">":">3",NYUK="Y":"YES",NYUK="N":"NO",1:NYUK)_"^352"
"RTN","SROACL1",22,0)
 S SRAO(15)=$P(SRA(206),"^",42)_"^485"
"RTN","SROACL1",23,0)
 S NYUK=$P(SRA(206),"^",16) D YN S SRAO(16)=SHEMP_"^265",NYUK=$P(SRA(206),"^",17) D YN S SRAO(17)=SHEMP_"^264"
"RTN","SROACL1",24,0)
 S SRAO(18)=$P(SRA(206),"^",18)_"^267",SRAO(19)=$P(SRA(206),"^",19)_"^207",NYUK=$P(SRA(206),"^",20) D YN S SRAO(20)=SHEMP_"^353",NYUK=$P(SRA(206),"^",21) D YN S SRAO(21)=SHEMP_"^354"
"RTN","SROACL1",25,0)
 S NYUK=$P(SRA(206),"^",22) D YN S SRAO(22)=SHEMP_"^355"
"RTN","SROACL1",26,0)
 S NYUK=$P(SRA(209),"^",2),SRAO(23)=$S(NYUK="N":"NONE",NYUK="I":"IABP",NYUK="V":"VAD",NYUK="A":"ARTI",NYUK="O":"OTHER",1:"")_"^474"
"RTN","SROACL1",27,0)
 S NYUK=$P(SRA(206),"^",38) D YN S SRAO(24)=SHEMP_"^463"
"RTN","SROACL1",28,0)
 S NYUK=$P(SRA(208),"^",19) D YN S SRAO(25)=SHEMP_"^509"
"RTN","SROACL1",29,0)
DISP ; display fields
"RTN","SROACL1",30,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL
"RTN","SROACL1",31,0)
 W !," 1. Height:",?29,$P(SRAO(1),"^"),?41,"14. Number prior heart surgeries: ",?70,$P(SRAO(14),"^")
"RTN","SROACL1",32,0)
 W !," 2. Weight:",?29,$P(SRAO(2),"^"),?41,"15. Prior heart surgeries:" D H485
"RTN","SROACL1",33,0)
 W !," 3. Diabetes:",?27,$P(SRAO(3),"^"),?41,"16. Peripheral Vascular Disease:",?75,$P(SRAO(16),"^")
"RTN","SROACL1",34,0)
 W !," 4. COPD:",?30,$P(SRAO(4),"^"),?41,"17. Cerebral Vascular Disease:",?75,$P(SRAO(17),"^")
"RTN","SROACL1",35,0)
 W !," 5. FEV1:",?($S($P(SRAO(5),"^")="NS":30,1:27)),$P(SRAO(5),"^")_$S($P(SRAO(5),"^")="":"",$P(SRAO(5),"^")="NS":"",1:" liters"),?41,"18. Angina (use CCS Class):",?75,$P(SRAO(18),"^")
"RTN","SROACL1",36,0)
 W !," 6. Cardiomegaly (X-ray):",?30,$P(SRAO(6),"^"),?41,"19. CHF (use NYHA Class):",?75,$P(SRAO(19),"^")
"RTN","SROACL1",37,0)
 W !," 7. Pulmonary Rales:",?30,$P(SRAO(7),"^"),?41,"20. Current Diuretic Use:",?75,$P(SRAO(20),"^")
"RTN","SROACL1",38,0)
 W !," 8. Current Smoker: ",$J($P(SRAO(8),"^"),19),?41,"21. Current Digoxin Use:",?75,$P(SRAO(21),"^")
"RTN","SROACL1",39,0)
 W !," 9. Active Endocarditis:",?30,$P(SRAO(9),"^"),?41,"22. IV NTG within 48 Hours:",?75,$P(SRAO(22),"^")
"RTN","SROACL1",40,0)
 W !,"10. Resting ST Depression:",?30,$P(SRAO(10),"^"),?41,"23. Preop Circulatory Device:",?75,$P(SRAO(23),"^")
"RTN","SROACL1",41,0)
 W !,"11. Functional Status: ",$J($P(SRAO(11),"^"),17),?41,"24. Hypertension (Y/N):",?75,$P(SRAO(24),"^")
"RTN","SROACL1",42,0)
 W !,"12. PCI: ",$J($P(SRAO(12),"^"),29),?41,"25. Preop Atrial Fibrillation:",?75,$P(SRAO(25),"^")
"RTN","SROACL1",43,0)
 W !,"13. Prior MI: ",$J($P(SRAO(13),"^"),24)
"RTN","SROACL1",44,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACL1",45,0)
 Q
"RTN","SROACL1",46,0)
YN ; store answer
"RTN","SROACL1",47,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACL1",48,0)
 Q
"RTN","SROACL1",49,0)
H485 S SHEMP="",X=$P(SRAO(15),"^") F I=1:1:$L(X,",") D
"RTN","SROACL1",50,0)
 .S C=$P(X,",",I) S:I>1 SHEMP=SHEMP_", " S SHEMP=SHEMP_$S(C=0:"NONE",C=1:"CABG-ONLY",C=2:"VALVE-ONLY",C=3:"CABG/VALVE",C=4:"OTHER",C=5:"CABG/OTHER",1:"")
"RTN","SROACL1",51,0)
 ;
"RTN","SROACL1",52,0)
 S X=SHEMP I $L(X)<12 W ?68,$J(X,11) Q
"RTN","SROACL1",53,0)
 W ?68,$J($P(X,",")_",",11) I $L($P(X,", ",2,9))<36 W !,?44,$P(X,", ",2,9) Q
"RTN","SROACL1",54,0)
 W !,?44,$P(X,", ",2,4)_",",!,?44,$P(X,", ",5,9)
"RTN","SROACL1",55,0)
 Q
"RTN","SROACL1",56,0)
HW(SRSD,SRED,SVTYPE) ; get weight & height from Vitals
"RTN","SROACL1",57,0)
 N GMRVSTR,SRTYPE,SRBCNT,SRBRDT,SRBIEN,SRBDATA,RESULTS
"RTN","SROACL1",58,0)
 K ^UTILITY($J,"GMRVD"),RESULTS S GMRVSTR=SVTYPE,GMRVSTR(0)=SRSD_"^"_SRED_"^^"
"RTN","SROACL1",59,0)
 D EN1^GMRVUT0 Q:'$D(^UTILITY($J,"GMRVD")) ""
"RTN","SROACL1",60,0)
 S SRTYPE="",SRBCNT=1 F  S SRTYPE=$O(^UTILITY($J,"GMRVD",SRTYPE)) Q:SRTYPE=""  D
"RTN","SROACL1",61,0)
 .S SRBRDT=0 F  S SRBRDT=$O(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT)) Q:'SRBRDT  D
"RTN","SROACL1",62,0)
 ..S SRBIEN=0 F  S SRBIEN=$O(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT,SRBIEN)) Q:'SRBIEN  D
"RTN","SROACL1",63,0)
 ...S SRBDATA=$G(^UTILITY($J,"GMRVD",SRTYPE,SRBRDT,SRBIEN))
"RTN","SROACL1",64,0)
 ...S RESULTS(SRTYPE,SRBRDT)=$P(SRBDATA,"^",1,2)_"^"_$P(SRBDATA,"^",8),SRBCNT=SRBCNT+1
"RTN","SROACL1",65,0)
 I $D(RESULTS(SVTYPE)) S SRI=$O(RESULTS(SVTYPE,0)) Q $P(RESULTS(SVTYPE,SRI),"^",3)
"RTN","SROACL1",66,0)
 Q ""
"RTN","SROACLN")
0^20^B10164001^B10163917
"RTN","SROACLN",1,0)
SROACLN ;BIR/MAM - CLINICAL DATA ;07/25/04  1:32 PM
"RTN","SROACLN",2,0)
 ;;3.0; Surgery ;**38,47,71,95,100,125,142,174**;24 Jun 93;Build 8
"RTN","SROACLN",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACLN",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACLN",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROACL1
"RTN","SROACLN",6,0)
ASK W !!,"Select Clinical Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACLN",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACLN",8,0)
 I X="A" S X="1:25"
"RTN","SROACLN",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>25)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACLN",10,0)
 D HDR^SROAUTL
"RTN","SROACLN",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACLN",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROACLN",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACLN",14,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACLN",15,0)
 Q
"RTN","SROACLN",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACLN",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a specific number to update the information in that field.  (For",!,"   example, enter '8' to update Current Smoker)"
"RTN","SROACLN",18,0)
 W !!,"3. Enter a range of numbers separated by a ':' to enter a range of",!,"   information.  (For example, enter '7:9' to enter Pulmonary Rales,",!,"   Current Smoker, and Active Endocarditis.)"
"RTN","SROACLN",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACLN",20,0)
 Q
"RTN","SROACLN",21,0)
RANGE ; range of numbers
"RTN","SROACLN",22,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACLN",23,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACLN",24,0)
 Q
"RTN","SROACLN",25,0)
ONE ; edit one item
"RTN","SROACLN",26,0)
 I EMILY=11 D FUNCT Q
"RTN","SROACLN",27,0)
 I EMILY=15 D ^SROACL2 K DR,DIE S DA=SRTN,DR="485///"_$P(SRAO(15),"^"),DIE=130 D ^DIE K DR S:$D(Y) SRSOUT=1 Q
"RTN","SROACLN",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACLN",29,0)
 I EMILY=14,$P($G(^SRF(SRTN,206)),"^",15)=0 S $P(^SRF(SRTN,206),"^",42)=0
"RTN","SROACLN",30,0)
 Q
"RTN","SROACLN",31,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACLN",32,0)
 Q
"RTN","SROACLN",33,0)
FUNCT K DA,DIR S DA=SRTN,DIR(0)="130,240",DIR("A")="Functional Status" D ^DIR K DIR D  Q
"RTN","SROACLN",34,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROACLN",35,0)
 .I X="@" K DIE,DR S DIE=130,DR="240///@" D ^DIE K DA,DIE,DR Q
"RTN","SROACLN",36,0)
 .K DIE,DR S DIE=130,DR="240////"_Y D ^DIE K DA,DIE,DR
"RTN","SROACLN",37,0)
 Q
"RTN","SROACOM")
0^14^B15413481^B15296750
"RTN","SROACOM",1,0)
SROACOM ;BIR/MAM - COMPLETE ASSESSMENT ;05/05/10
"RTN","SROACOM",2,0)
 ;;3.0; Surgery ;**38,55,63,65,88,93,95,102,100,125,134,142,160,166,174**;24 Jun 93;Build 8
"RTN","SROACOM",3,0)
 I '$D(SRTN) Q
"RTN","SROACOM",4,0)
 I $P($G(^SRF(SRTN,"RA")),"^",2)="C" G ^SROACOM1
"RTN","SROACOM",5,0)
 S (SRSFLG,SRSOUT,SROVER)=0,SRA=$G(^SRF(SRTN,"RA")),Y=$P(SRA,"^") I Y'="I" W !!,"This assessment has a "_$S(Y="C":"'COMPLETE'",1:"'TRANSMITTED'")_" status.",!!,"No action taken." G END
"RTN","SROACOM",6,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" D CHK^SROAUTL
"RTN","SROACOM",7,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" D CHK^SROAUTL3
"RTN","SROACOM",8,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" D LIST
"RTN","SROACOM",9,0)
YEP I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !!,?6,"The coding for Procedure and Diagnosis is not complete."
"RTN","SROACOM",10,0)
 W ! S SRFLD="" K DIR S DIR("A")="Are you sure you want to complete this assessment ? ",DIR("B")=$S($O(SRX(SRFLD)):"NO",1:"YES"),DIR(0)="YA"
"RTN","SROACOM",11,0)
 S DIR("?",1)="Enter YES to complete this assessment, or enter NO to leave the status",DIR("?")="unchanged." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROACOM",12,0)
 I 'Y W !!,"No action taken." G END
"RTN","SROACOM",13,0)
 I $$LOCK^SROUTL(SRTN) D COMPLT Q
"RTN","SROACOM",14,0)
 E  W !!,"No action taken." G END
"RTN","SROACOM",15,0)
 Q
"RTN","SROACOM",16,0)
COMPLT W !!,"Updating the current status to 'COMPLETE'..." K DR,DIE S DA=SRTN,DIE=130,DR="235///C;272.1////"_DUZ D ^DIE K STATUS
"RTN","SROACOM",17,0)
 I $P(SRA,"^",5)="" K DR,DIE S DA=SRTN,DIE=130,DR="272///"_DT D ^DIE K STATUS
"RTN","SROACOM",18,0)
 I $P(SRA,"^",2)="C" K DA,DIE,DIK,DR S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROACOM",19,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROACOM",20,0)
PRINT W !!,"Do you want to print the completed assessment ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROACOM",21,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y" I "Nn"[SRYN S SRSOUT=1 Q
"RTN","SROACOM",22,0)
 I "Yy"'[SRYN W !!,"Enter <RET> to print the completed assessment, or 'NO' to return to the menu." G PRINT
"RTN","SROACOM",23,0)
 W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print the Completed Assessment on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 Q
"RTN","SROACOM",24,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Completed Surgery Risk Assessment",(ZTSAVE("SRSITE*"),ZTSAVE("SRTN"))="",ZTRTN="EN^SROACOM" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROACOM",25,0)
 D EN,END
"RTN","SROACOM",26,0)
 Q
"RTN","SROACOM",27,0)
EN U IO S SRABATCH=1 D ^SROAPAS Q
"RTN","SROACOM",28,0)
END I 'SRSOUT,$E(IOST)'="P" D RET
"RTN","SROACOM",29,0)
 W @IOF I $E(IOST)="P" D ^%ZISC W @IOF
"RTN","SROACOM",30,0)
 D ^SRSKILL K SRMD,SRMD1,SRSFLG
"RTN","SROACOM",31,0)
 Q
"RTN","SROACOM",32,0)
LIST W @IOF,!,"This assessment is missing the following items:",! S SRZ="",SRCNT=1
"RTN","SROACOM",33,0)
 F  S SRZ=$O(SRX(SRZ)) Q:SRZ=""  D:$Y+5>IOSL RET Q:SRSOUT  W !,?5,$J(SRCNT,2)_". "_$P(SRX(SRZ),"^") S SRCNT=SRCNT+1
"RTN","SROACOM",34,0)
 S SRSOUT=0 W ! K DIR S DIR(0)="Y",DIR("A")="Do you want to enter the missing items at this time",DIR("B")="NO" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROACOM",35,0)
 Q:'Y  I $$LOCK^SROUTL(SRTN) D PRT,UNLOCK^SROUTL(SRTN)
"RTN","SROACOM",36,0)
 Q
"RTN","SROACOM",37,0)
PRT S SRSOUT=0,(SRMD,SRMD1)="",SRCNT=0 F  S SRMD=$O(SRX(SRMD)) Q:SRMD=""  S SRMD1=$P(SRX(SRMD),"^",2) D  Q:$G(SRSFLG)
"RTN","SROACOM",38,0)
 .I $E(SRMD,1,10)="ANESTHESIA" D ANES Q
"RTN","SROACOM",39,0)
 .I $E(SRMD,1,6)="POSTOP"!($E(SRMD,1,6)="SEPSIS") D POST^SROCMPS Q
"RTN","SROACOM",40,0)
 .K DR,DIE S DA=SRTN,DIE=130,DR=$S($G(SRMD1):SRMD1,1:SRMD)_"T" D ^DIE K DR I $D(Y) S SRSFLG=1
"RTN","SROACOM",41,0)
 S:'$G(SRSOUT) SRSOUT=0
"RTN","SROACOM",42,0)
 Q
"RTN","SROACOM",43,0)
ANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE S:$D(Y) SRSFLG=1 K DR
"RTN","SROACOM",44,0)
 Q
"RTN","SROACOM",45,0)
RET W !! K DIR S DIR(0)="E" D ^DIR K DIR W @IOF I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACOM",46,0)
 Q
"RTN","SROACOM",47,0)
PAGE I $E(IOST)'="P" D RET Q
"RTN","SROACOM",48,0)
 W @IOF,!!!
"RTN","SROACOM",49,0)
 Q
"RTN","SROACOM1")
0^15^B19771311^B19655415
"RTN","SROACOM1",1,0)
SROACOM1 ;BIR/MAM - COMPLETE ASSESSMENT ;05/05/10
"RTN","SROACOM1",2,0)
 ;;3.0; Surgery ;**166,174**;24 Jun 93;Build 8
"RTN","SROACOM1",3,0)
 I '$D(SRTN) Q
"RTN","SROACOM1",4,0)
 S (SRSFLG,SRSOUT,SROVER)=0,SRA=$G(^SRF(SRTN,"RA")),Y=$P(SRA,"^") I Y'="I" W !!,"This assessment has a "_$S(Y="C":"'COMPLETE'",1:"'TRANSMITTED'")_" status.",!!,"No action taken." G END
"RTN","SROACOM1",5,0)
 I $P(SRA,"^",2)="C" D CHK^SROAUTLC
"RTN","SROACOM1",6,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" D LIST
"RTN","SROACOM1",7,0)
 I $P(SRA,"^",2)="C" D CHCK G:SRSOUT END
"RTN","SROACOM1",8,0)
YEP I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !!,?6,"The coding for Procedure and Diagnosis is not complete."
"RTN","SROACOM1",9,0)
 W ! S SRFLD="" K DIR S DIR("A")="Are you sure you want to complete this assessment ? ",DIR("B")=$S($O(SRX(SRFLD)):"NO",1:"YES"),DIR(0)="YA"
"RTN","SROACOM1",10,0)
 S DIR("?",1)="Enter YES to complete this assessment, or enter NO to leave the status",DIR("?")="unchanged." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROACOM1",11,0)
 I 'Y W !!,"No action taken." G END
"RTN","SROACOM1",12,0)
 I $$LOCK^SROUTL(SRTN) D COMPLT Q
"RTN","SROACOM1",13,0)
 E  W !!,"No action taken." G END
"RTN","SROACOM1",14,0)
 Q
"RTN","SROACOM1",15,0)
COMPLT W !!,"Updating the current status to 'COMPLETE'..." K DR,DIE S DA=SRTN,DIE=130,DR="235///C;272.1////"_DUZ D ^DIE K STATUS
"RTN","SROACOM1",16,0)
 I $P(SRA,"^",5)="" K DR,DIE S DA=SRTN,DIE=130,DR="272///"_DT D ^DIE K STATUS
"RTN","SROACOM1",17,0)
 I $P(SRA,"^",2)="C" K DA,DIE,DIK,DR S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROACOM1",18,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROACOM1",19,0)
PRINT W !!,"Do you want to print the completed assessment ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROACOM1",20,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y" I "Nn"[SRYN S SRSOUT=1 Q
"RTN","SROACOM1",21,0)
 I "Yy"'[SRYN W !!,"Enter <RET> to print the completed assessment, or 'NO' to return to the menu." G PRINT
"RTN","SROACOM1",22,0)
 W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print the Completed Assessment on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 Q
"RTN","SROACOM1",23,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Completed Surgery Risk Assessment",(ZTSAVE("SRSITE*"),ZTSAVE("SRTN"))="",ZTRTN="EN^SROACOM1" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROACOM1",24,0)
 D EN,END
"RTN","SROACOM1",25,0)
 Q
"RTN","SROACOM1",26,0)
EN U IO S SRABATCH=1 D ^SROAPAS Q
"RTN","SROACOM1",27,0)
END I 'SRSOUT,$E(IOST)'="P" D RET
"RTN","SROACOM1",28,0)
 W @IOF I $E(IOST)="P" D ^%ZISC W @IOF
"RTN","SROACOM1",29,0)
 D ^SRSKILL K SRMD,SRMD1,SRMDD,SRSFLG
"RTN","SROACOM1",30,0)
 Q
"RTN","SROACOM1",31,0)
LIST W @IOF,!,"This assessment is missing the following items:",! S SRZ="",SRCNT=1
"RTN","SROACOM1",32,0)
 F  S SRZ=$O(SRX(SRZ)) Q:SRZ=""  D:$Y+5>IOSL RET Q:SRSOUT  W !,?5,$J(SRCNT,2)_". "_$P($P(SRX(SRZ),":"),"^") S SRCNT=SRCNT+1
"RTN","SROACOM1",33,0)
 S SRSOUT=0 W ! K DIR S DIR(0)="Y",DIR("A")="Do you want to enter the missing items at this time",DIR("B")="NO" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROACOM1",34,0)
 Q:'Y  I $$LOCK^SROUTL(SRTN) D PRT,UNLOCK^SROUTL(SRTN)
"RTN","SROACOM1",35,0)
 Q
"RTN","SROACOM1",36,0)
PRT S SRSOUT=0,(SRMD,SRMDD,SRMD1)="",SRCNT=0 F  S SRMDD=$O(SRX(SRMDD)) Q:SRMDD=""  S SRMD=$P($G(SRX(SRMDD)),":",2),SRMD1=$P($G(SRX(SRMDD)),"^",2) D  Q:$G(SRSFLG)
"RTN","SROACOM1",37,0)
 .I SRMD=485 W @IOF,! D PRIOR^SROACL2 K DR,DIE S DA=SRTN,DR="485///"_$S(X="@":"@",1:$P(Y,"^")),DIE=130 D ^DIE K DR S:$D(Y) SRSFLG=1 Q
"RTN","SROACOM1",38,0)
 .K DR,DIE S DA=SRTN,DIE=130,DR=$S($G(SRMD1):SRMD1,1:SRMD)_"T" D ^DIE K DR I $D(Y) S SRSFLG=1
"RTN","SROACOM1",39,0)
 S:'$G(SRSOUT) SRSOUT=0
"RTN","SROACOM1",40,0)
 Q
"RTN","SROACOM1",41,0)
CHCK ; cardiac checks added by SR*3*93
"RTN","SROACOM1",42,0)
 N SRADM,SRDIS,SRISCH,SRCPB,SRRET S SRRET=0,X=$G(^SRF(SRTN,208)),SRADM=$P(X,"^",14),SRDIS=$P(X,"^",15),X=$G(^SRF(SRTN,206)),SRISCH=$P(X,"^",36),SRCPB=$P(X,"^",37)
"RTN","SROACOM1",43,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***" S SRRET=1,SRZZ(418)="",SRX($P(SRZZ(418),"^",2))=""
"RTN","SROACOM1",44,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !!,"  ***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***",! S SRRET=1,SRZZ(450)="",SRX($P(SRZZ(450),"^",2))=""
"RTN","SROACOM1",45,0)
 I SRRET W ! K DIR S DIR(0)="E" D ^DIR K DIR S:$D(DTOUT)!$D(DUOUT) SRSOUT=1 W !
"RTN","SROACOM1",46,0)
 Q
"RTN","SROACOM1",47,0)
RET W !! K DIR S DIR(0)="E" D ^DIR K DIR W @IOF I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACOM1",48,0)
 Q
"RTN","SROACOM1",49,0)
PAGE I $E(IOST)'="P" D RET Q
"RTN","SROACOM1",50,0)
 W @IOF,!!!
"RTN","SROACOM1",51,0)
 Q
"RTN","SROACOP")
0^21^B23026307^B24468418
"RTN","SROACOP",1,0)
SROACOP ;BIR/MAM - CARDIAC OPERATIVE RISK SUMMARY ;05/05/10
"RTN","SROACOP",2,0)
 ;;3.0; Surgery ;**38,47,71,88,95,107,100,125,142,153,160,166,174**;24 Jun 93;Build 8
"RTN","SROACOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACOP",4,0)
 N SRCSTAT S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACOP",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO
"RTN","SROACOP",6,0)
 F I=206,206.1,208 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACOP",7,0)
 I $P(SRA(206),"^",41)="" K DA,DIE,DR S DA=SRTN,DIE=130,DR="472////N" D ^DIE K DA,DIE,DR S SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACOP",8,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(2)=Y_"^1.13"
"RTN","SROACOP",9,0)
 S SRAO(1)=$P(SRA(206),"^",31)_"^364",SRAO(3)=$P(SRA(208),"^",12)_"^414"
"RTN","SROACOP",10,0)
 S (X,Y)=$P(SRA(206),"^",32) D:Y DT S SRAO("1A")=X_"^364.1"
"RTN","SROACOP",11,0)
 S Y=$P(SRAO(3),"^") I Y'="" S C=$P(^DD(130,414,0),"^",2) D Y^DIQ S $P(SRAO(3),"^")=Y
"RTN","SROACOP",12,0)
 S Y=$P(SRA(208),"^",13) D DT S SRAO("3A")=X_"^414.1"
"RTN","SROACOP",13,0)
 S SRAO(4)=SRA(206.1)_"^430"
"RTN","SROACOP",14,0)
 S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROACOP",15,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL S SRAO(5)=""
"RTN","SROACOP",16,0)
 S (X,X1)=$P(SRAO(1),"^"),X=$S(X?1.3N:X_"%",1:X) W !," 1. Physician's Preoperative Estimate of Operative Mortality: "_X
"RTN","SROACOP",17,0)
 S X=$P(SRAO("1A"),"^") I X1'=""!(X'="") W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",18,0)
 W !," 2. ASA Classification:",?31,$P(SRAO(2),"^"),!," 3. Surgical Priority:",?31,$P(SRAO(3),"^")
"RTN","SROACOP",19,0)
 S X=$P(SRAO("3A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",20,0)
 W !," 4. Preoperative Risk Factors: "
"RTN","SROACOP",21,0)
 I $P(SRAO(4),"^")'="" S SRQ=0 S X=$P(SRAO(4),"^") W:$L(X)<46 X,! I $L(X)>45 S Z=$L(X) D
"RTN","SROACOP",22,0)
 .I X'[" " W ?25,X Q
"RTN","SROACOP",23,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:45,1:75) D  Q:SRQ
"RTN","SROACOP",24,0)
 ..I $E(X,1,SRL)'[" "!(Z<SRL) W X,! S SRQ=1 Q
"RTN","SROACOP",25,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),!,?4 S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X,! S SRQ=1 Q
"RTN","SROACOP",26,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAUTL0 W !," 5. CPT Codes (view only):"
"RTN","SROACOP",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROACOP",28,0)
 W ! D CHCK
"RTN","SROACOP",29,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACOP",30,0)
ASK W !,"Select Operative Risk Summary Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACOP",31,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACOP",32,0)
 I X="A" S X="1:5"
"RTN","SROACOP",33,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>5)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACOP",34,0)
 I X'=5 D HDR^SROAUTL
"RTN","SROACOP",35,0)
 I X?.N1":".N D RANGE S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",36,0)
 I $D(SRAO(X))!(X=4) S EMILY=X D  S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",37,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",38,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACOP",39,0)
 Q
"RTN","SROACOP",40,0)
DT I 'Y S X="" Q
"RTN","SROACOP",41,0)
 X ^DD("DD") S X=$P(Y,"@")_" "_$P(Y,"@",2)
"RTN","SROACOP",42,0)
 Q
"RTN","SROACOP",43,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACOP",44,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter the corresponding number to update the information in a particular",!,"   field.  (For example, enter '3' to update Surgical Priority)"
"RTN","SROACOP",45,0)
 W !!,"3. Enter two numbers separated by a ':' to enter a range of information.",!,"   (For example, enter '1:2' to update Physician's Preoperative Estimate of",!,"   Mortality and ASA Classification.)"
"RTN","SROACOP",46,0)
 W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACOP",47,0)
 Q
"RTN","SROACOP",48,0)
RANGE ; range of numbers
"RTN","SROACOP",49,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",50,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACOP",51,0)
 Q
"RTN","SROACOP",52,0)
ONE ; edit one item
"RTN","SROACOP",53,0)
 I EMILY=5 D DISP^SROAUTL0 Q
"RTN","SROACOP",54,0)
 K DR,DIE S DA=SRTN,DIE=130,DR=$P(SRAO(EMILY),"^",2)
"RTN","SROACOP",55,0)
 S DR=DR_"T",DIE=130 S DR=DR_$S(EMILY=3:";414.1T",1:"") D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACOP",56,0)
 I EMILY=1 D
"RTN","SROACOP",57,0)
 .I $P(^SRF(SRTN,206),"^",31)="NS" S $P(^SRF(SRTN,206),"^",32)="NS" Q
"RTN","SROACOP",58,0)
 .S DR="364.1T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACOP",59,0)
 Q
"RTN","SROACOP",60,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACOP",61,0)
 Q
"RTN","SROACOP",62,0)
NOW ; update date/time of estimate of mortality
"RTN","SROACOP",63,0)
 N X D NOW^%DTC S $P(^SRF(DA,206),"^",32)=$E(%,1,12)
"RTN","SROACOP",64,0)
 Q
"RTN","SROACOP",65,0)
KNOW ; delete date/time of estimate of mortality
"RTN","SROACOP",66,0)
 S $P(^SRF(DA,206),"^",32)=""
"RTN","SROACOP",67,0)
 Q
"RTN","SROACOP",68,0)
YN ; store answer
"RTN","SROACOP",69,0)
 S SHEMP=$S(NYUK="NS":"Unknown",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACOP",70,0)
 Q
"RTN","SROACOP",71,0)
CHCK ;compare dates
"RTN","SROACOP",72,0)
 N SRINO,SRSP,SREM
"RTN","SROACOP",73,0)
 S SRSP=$P($G(^SRF(SRTN,208)),"^",13),SRINO=$P($G(^SRF(SRTN,.2)),"^",10),SREM=$P($G(^SRF(SRTN,206)),"^",32)
"RTN","SROACOP",74,0)
 I SRSP'="",SRINO'="",SRSP'<SRINO W !!,"*** NOTE: D/Time of Surgical Priority should be < the D/Time Patient in OR.***"
"RTN","SROACOP",75,0)
 I SREM'="",SRINO'="",SREM'<SRINO W !!,"*** NOTE: D/Time of Estimate of Mortality should be < the D/Time PT in OR. ***"
"RTN","SROACOP",76,0)
 Q
"RTN","SROACPM")
0^1^B53758075^B57221658
"RTN","SROACPM",1,0)
SROACPM ;BIR/ADM - CARDIAC RESOURCE INFO ;12/04/07
"RTN","SROACPM",2,0)
 ;;3.0; Surgery ;**71,93,95,99,100,125,142,160,164,166,174**;24 Jun 93;Build 8
"RTN","SROACPM",3,0)
 ;
"RTN","SROACPM",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROACPM",5,0)
 ;
"RTN","SROACPM",6,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACPM",7,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACPM",8,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROACPM",9,0)
 S DIR("A",1)="Enter/Edit Patient Resource Data",DIR("A",2)=" ",DIR("A",3)="1. Capture Information from PIMS Records",DIR("A",4)="2. Enter, Edit, or Review Information",DIR("A",5)=" "
"RTN","SROACPM",10,0)
 S DIR("?",1)="Enter '1' if you want to capture patient information from PIMS",DIR("?",2)="records.  Enter '2' if you want to enter, edit, or review patient",DIR("?")="other information on this screen."
"RTN","SROACPM",11,0)
 S DIR("A")="Select Number",DIR(0)="NO^1:2" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROACPM",12,0)
 I Y=1 D PIMS G START
"RTN","SROACPM",13,0)
EDIT N DAYS,HOURS,MINS
"RTN","SROACPM",14,0)
 S:$P(^SRF(SRTN,206),"^",41)="" $P(^SRF(SRTN,206),"^",41)="N"
"RTN","SROACPM",15,0)
 S SRR=0 S SRPAGE="PAGE: 1" D HDR^SROAUTL K DR S SRQ=0,(DR,SRDR)="418;419;440;.205;.22;.23;.232;470;471;473;472;431;442"
"RTN","SROACPM",16,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="IE",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROACPM",17,0)
 K SRZ S SRZ=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROACPM",18,0)
 .D TR,GET
"RTN","SROACPM",19,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROACPM",20,0)
 .W:M>1 ! W $J(SRZ,2)_". "_$P(Z,"^")_": " D EXT
"RTN","SROACPM",21,0)
 D CHCK W ! F K=1:1:80 W "-"
"RTN","SROACPM",22,0)
 D SEL G:SRR=1 EDIT
"RTN","SROACPM",23,0)
 G START
"RTN","SROACPM",24,0)
 Q
"RTN","SROACPM",25,0)
CHCK ; compare admission and discharge dates to each other
"RTN","SROACPM",26,0)
 N SRADM,SRDIS,SROUT,SRDICU,SREXT
"RTN","SROACPM",27,0)
 S SROUT=SRY(130,SRTN,.232,"I"),SRDICU=SRY(130,SRTN,471,"I"),SREXT=SRY(130,SRTN,470,"I")
"RTN","SROACPM",28,0)
 S SRADM=SRY(130,SRTN,418,"I"),SRDIS=SRY(130,SRTN,419,"I") W !
"RTN","SROACPM",29,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !,"*** NOTE: Discharge Date precedes Admission Date!!  Please check. ***"
"RTN","SROACPM",30,0)
 I SREXT,SROUT,SREXT'>SROUT W !,"*** NOTE: D/Time Pt Extubated should be later than the D/Time Pt Out of OR. ***"
"RTN","SROACPM",31,0)
 I SREXT,SRDICU,SREXT'<SRDICU W !,"*** NOTE: D/Time Pt Extubated should be < the ICU Discharge D/Time. ***"
"RTN","SROACPM",32,0)
 I SRDICU,SREXT,SRDICU'>SREXT W !,"*** NOTE: D/Time Discharged from ICU should be > the Extubation D/Time. ***"
"RTN","SROACPM",33,0)
 I SRDICU,SRDIS,SRDICU>SRDIS W !,"*** NOTE: D/Time Discharged from ICU should be <= the Hospital Discharge D/Time*"
"RTN","SROACPM",34,0)
 Q
"RTN","SROACPM",35,0)
EXT I SRFLD=440&(SREXT="NS") S SREXT=SREXT_"-"_$S(SREXT="NS":"No Study",1:SREXT)
"RTN","SROACPM",36,0)
 I SRFLD=470,(SREXT="NS"!(SREXT="RI")) S SREXT=SREXT_"-"_$S(SREXT="NS":"Unable to determine",SREXT="RI":"Remains intubated at 30 days",1:SREXT)
"RTN","SROACPM",37,0)
 I SRFLD=470,$G(SRY(130,SRTN,470,"I")) D  Q
"RTN","SROACPM",38,0)
 .S X=$$FMDIFF^XLFDT(SRY(130,SRTN,470,"I"),SRY(130,SRTN,.232,"I"),2) W ?39,SREXT,!,?10,"Postop Intubation Hrs: "_$FN((X/3600),"+",1)
"RTN","SROACPM",39,0)
 I SRFLD=471,(SREXT="NS"!(SREXT="RI")) S SREXT=SREXT_"-"_$S(SREXT="NS":"Unable to determine",SREXT="RI":"Remains in ICU at 30 days",1:SREXT)
"RTN","SROACPM",40,0)
 I $L(SREXT)<41 W ?39,SREXT W:SRFLD=247 $S(SREXT="":"",SREXT=1:" Day",SREXT=0:" Days",SREXT>1:" Days",1:"") Q
"RTN","SROACPM",41,0)
 I SRFLD=431 D
"RTN","SROACPM",42,0)
 .I $L(SREXT)<52 W ?28,SREXT Q 
"RTN","SROACPM",43,0)
 .N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<52!($L(X)>51&(X'[" ")) W ?28,X Q
"RTN","SROACPM",44,0)
 ..F I=0:1:50 S J=51-I,Y=$E(X,J) I Y=" " W ?28,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROACPM",45,0)
 Q
"RTN","SROACPM",46,0)
SEL S SRSOUT=0 W !!,"Select Resource Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACPM",47,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRZ(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROACPM",48,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRZ)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROACPM",49,0)
 I X="A" S X="1:"_SRZ
"RTN","SROACPM",50,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SROACPM",51,0)
 I $D(SRZ(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROACPM",52,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACPM",53,0)
 Q
"RTN","SROACPM",54,0)
PIMS ; get update from PIMS records
"RTN","SROACPM",55,0)
 W ! K DIR S DIR("A")="Are you sure you want to retrieve information from PIMS records ? ",DIR("B")="YES",DIR(0)="YOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROACPM",56,0)
 W ! D WAIT^DICD D ^SROAPIMS
"RTN","SROACPM",57,0)
 Q
"RTN","SROACPM",58,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACPM",59,0)
 W !!,"1. Enter 'A' to update all items.",!!,"2. Enter a number (1-"_SRZ_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRZ(1),"^")_".)"
"RTN","SROACPM",60,0)
 W !!,"3. Enter a range of numbers (1-"_SRZ_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SROACPM",61,0)
 I $D(SRFLG) W !,"4. Enter 'N' or 'NO' to enter negative response for all items.",!!,"5. Enter '@' to delete information from all items.",!
"RTN","SROACPM",62,0)
PRESS W ! K DIR S DIR("A")="Press the return key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACPM",63,0)
 Q
"RTN","SROACPM",64,0)
RANGE ; range of numbers
"RTN","SROACPM",65,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACPM",66,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACPM",67,0)
 Q
"RTN","SROACPM",68,0)
ONE ; edit one item
"RTN","SROACPM",69,0)
 I EMILY=9 D LIST
"RTN","SROACPM",70,0)
 I EMILY'=9 K DR,DA,DIE S DR=$P(SRZ(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRZ(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROACPM",71,0)
 I 'SRSOUT,EMILY=1!(EMILY=2) D OK
"RTN","SROACPM",72,0)
 Q
"RTN","SROACPM",73,0)
OK ; compare admission date to discharge date
"RTN","SROACPM",74,0)
 N SRADM,SRDIS S X=$G(^SRF(SRTN,208)),SRADM=$P(X,"^",14),SRDIS=$P(X,"^",15)
"RTN","SROACPM",75,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***",! D PRESS W !
"RTN","SROACPM",76,0)
 Q
"RTN","SROACPM",77,0)
LIST ; display list of patient movements
"RTN","SROACPM",78,0)
 N CNT,SRADM,SRLOC,SRMOVE,SRMVMT,SRN,SRT,SRTYPE,SRZ,SRY
"RTN","SROACPM",79,0)
 S DFN=$P(^SRF(SRTN,0),"^"),SRZ=$P($G(^SRF(SRTN,.2)),"^",12)
"RTN","SROACPM",80,0)
 S SRADM=0 D ADM
"RTN","SROACPM",81,0)
 S CNT=0 F  Q:'SRZ  D:SRZ MVMT
"RTN","SROACPM",82,0)
 ;Q:CNT=0
"RTN","SROACPM",83,0)
 W !!,?5,"To identify the date and time the patient was discharged from intensive",!,?5,"care following surgery, see the following list of patient movements"
"RTN","SROACPM",84,0)
 W !,?5,"that occurred during the inpatient stay associated with this surgery.",!
"RTN","SROACPM",85,0)
 S (CNT,SRN)=0 F  S CNT=$O(SRMVMT(CNT)) Q:'CNT  S X=SRMVMT(CNT),SRT=$P(X,"^",2),SRN=SRN+1 W !,$J(SRN,3)_".",?5,$P($P(X,"^"),":",1,2),?25,$P(X,"^",3),?37,$S(SRT=3:"From",1:"To")_": "_$P(X,"^",4)
"RTN","SROACPM",86,0)
 I '$O(SRMVMT(0)) W !,?5,">> No postoperative patient movements were found for this patient."
"RTN","SROACPM",87,0)
 W ! E  K DIR S DIR("A")="Select patient movement from list",DIR(0)="NO^1:"_SRN_":0" D ^DIR K DIR I Y D  Q
"RTN","SROACPM",88,0)
 .S SRT=$P($P(SRMVMT(Y),"^"),":",1,2) K DA,DIE,DR S DA=SRTN,DIE=130,DR="471///"_SRT D ^DIE K DA,DIE,DR
"RTN","SROACPM",89,0)
 K DA,DIE,DR S DA=SRTN,DIE=130,DR="471T" D ^DIE K DA,DIE,DR
"RTN","SROACPM",90,0)
 Q
"RTN","SROACPM",91,0)
MVMT S VAIP("D")=SRZ D IN5^VADPT S SRY=$P(VAIP(3),"^")
"RTN","SROACPM",92,0)
 I SRY S CNT=CNT+1 D
"RTN","SROACPM",93,0)
 .S SRMOVE=$P(VAIP(3),"^",2),SRTYPE=$P(VAIP(2),"^",1,2),SRLOC=$P(VAIP(5),"^",2)
"RTN","SROACPM",94,0)
 .S SRMVMT(CNT)=SRMOVE_"^"_SRTYPE_"^"_SRLOC
"RTN","SROACPM",95,0)
 I 'SRY S SRZ="" Q
"RTN","SROACPM",96,0)
 I VAIP(1)=VAIP(17) S SRZ="" Q
"RTN","SROACPM",97,0)
 I VAIP(16),VAIP(16)=VAIP(17) S CNT=CNT+1,SRMOVE=$P(VAIP(16,1),"^",2),SRTYPE=$P(VAIP(16,2),"^",1,2),SRLOC=$P(VAIP(16,4),"^",2),SRMVMT(CNT)=SRMOVE_"^"_SRTYPE_"^"_SRLOC,SRZ="" Q
"RTN","SROACPM",98,0)
 S SRZ=$P(VAIP(16,1),"^")
"RTN","SROACPM",99,0)
 Q
"RTN","SROACPM",100,0)
ADM N SR24 S VAIP("D")=SRZ D IN5^VADPT
"RTN","SROACPM",101,0)
 I 'VAIP(13) S X1=SRZ,X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRZ)) Q:'SRDT!(SRDT>SR24)  S VAIP("D")=SRDT D IN5^VADPT I 'VAIP(13) S SRZ="" Q
"RTN","SROACPM",102,0)
 I VAIP(13) S SRZ=$P(VAIP(13,1),"^")+.000001
"RTN","SROACPM",103,0)
 Q
"RTN","SROACPM",104,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROACPM",105,0)
 Q
"RTN","SROACPM",106,0)
GET S X=$T(@J)
"RTN","SROACPM",107,0)
 Q
"RTN","SROACPM",108,0)
END W @IOF D ^SRSKILL
"RTN","SROACPM",109,0)
 Q
"RTN","SROACPM",110,0)
DAH ;;418^Hospital Admission Date
"RTN","SROACPM",111,0)
DAI ;;419^Hospital Discharge Date
"RTN","SROACPM",112,0)
DDJ ;;440^Cardiac Catheterization Date
"RTN","SROACPM",113,0)
PBJE ;;.205^Time Patient In OR
"RTN","SROACPM",114,0)
PBB ;;.22^Date/Time Operation Began
"RTN","SROACPM",115,0)
PBC ;;.23^Date/Time Operation Ended
"RTN","SROACPM",116,0)
PBCB ;;.232^Time Patient Out OR
"RTN","SROACPM",117,0)
DGJ ;;470^Date/Time Patient Extubated
"RTN","SROACPM",118,0)
DGA ;;471^Date/Time Discharged from ICU
"RTN","SROACPM",119,0)
DDB ;;442^Employment Status Preoperatively
"RTN","SROACPM",120,0)
DCA ;;431^Resource Data Comments
"RTN","SROACPM",121,0)
DGC ;;473^Homeless
"RTN","SROACPM",122,0)
DGB ;;472^Surg Performed at Non-VA Facility
"RTN","SROACPM1")
0^9^B18824569^B18300862
"RTN","SROACPM1",1,0)
SROACPM1 ;BIR/SJA - LAB INFO ;05/05/10
"RTN","SROACPM1",2,0)
 ;;3.0; Surgery ;**125,153,166,174**;24 Jun 93;Build 8
"RTN","SROACPM1",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACPM1",4,0)
 S SRSOUT=0 D ^SROAUTL
"RTN","SROACPM1",5,0)
START G:SRSOUT END K SRA,SRAO D ^SROACPM2,DISP
"RTN","SROACPM1",6,0)
ASK W !!,"Select Laboratory Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 D CONCC G END
"RTN","SROACPM1",7,0)
 I X="" D CONCC G END
"RTN","SROACPM1",8,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACPM1",9,0)
 I X="A" S X="1:11"
"RTN","SROACPM1",10,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>11)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACPM1",11,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROACPM1",12,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACPM1",13,0)
 I $D(SRAO(X)) S EMILY=X D ONE G START
"RTN","SROACPM1",14,0)
END W @IOF
"RTN","SROACPM1",15,0)
 Q
"RTN","SROACPM1",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACPM1",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-11) to update the information in that field.  (For",!,"   example, enter '7' to update Serum Creatinine)"
"RTN","SROACPM1",18,0)
 W !!,"3. Enter a range of numbers (1-11) separated by a ':' to enter a range of",!,"   information.  (For example, enter '5:7' to update Serum Potassium,",!,"   Serum Bilirubin, and Serum Creatinine)"
"RTN","SROACPM1",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACPM1",20,0)
 Q
"RTN","SROACPM1",21,0)
RANGE ; range of numbers
"RTN","SROACPM1",22,0)
 S SRNOMORE=0,SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRNOMORE  D ONE
"RTN","SROACPM1",23,0)
 Q
"RTN","SROACPM1",24,0)
ONE ; edit one item
"RTN","SROACPM1",25,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",3)_"T;"_$P(SRAO(EMILY),"^",4)_"T",DIE=130 D ^DIE S:$D(Y) SRNOMORE=1 K DR
"RTN","SROACPM1",26,0)
 Q
"RTN","SROACPM1",27,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACPM1",28,0)
 Q
"RTN","SROACPM1",29,0)
DISP N SRX S SRPAGE="PAGE: 1",SRHDR(.5)="PREOPERATIVE LABORATORY RESULTS" D HDR^SROAUTL
"RTN","SROACPM1",30,0)
 S SRX=$P(SRAO(1),"^") W !," 1. HDL:",?25,$J(SRX,6),?35,$$NORCHK(21,SRX),?38,$P(SRAO(1),"^",2)
"RTN","SROACPM1",31,0)
 S SRX=$P(SRAO(2),"^") W !," 2. LDL:",?25,$J(SRX,6),?35,$$NORCHK(23,SRX),?38,$P(SRAO(2),"^",2)
"RTN","SROACPM1",32,0)
 S SRX=$P(SRAO(3),"^") W !," 3. Total Cholesterol:",?25,$J(SRX,6),?35,$$NORCHK(24,SRX),?38,$P(SRAO(3),"^",2)
"RTN","SROACPM1",33,0)
 S SRX=$P(SRAO(4),"^") W !," 4. Serum Triglyceride:",?25,$J(SRX,6),?35,$$NORCHK(22,SRX),?38,$P(SRAO(4),"^",2)
"RTN","SROACPM1",34,0)
 S SRX=$P(SRAO(5),"^") W !," 5. Serum Potassium:",?25,$J(SRX,6),?35,$$NORCHK(5,SRX),?38,$P(SRAO(5),"^",2)
"RTN","SROACPM1",35,0)
 S SRX=$P(SRAO(6),"^") W !," 6. Serum Bilirubin:",?25,$J(SRX,6),?35,$$NORCHK(14,SRX),?38,$P(SRAO(6),"^",2)
"RTN","SROACPM1",36,0)
 S SRX=$P(SRAO(7),"^") W !," 7. Serum Creatinine:",?25,$J(SRX,6),?35,$$NORCHK(7,SRX),?38,$P(SRAO(7),"^",2)
"RTN","SROACPM1",37,0)
 S SRX=$P(SRAO(8),"^") W !," 8. Serum Albumin:",?25,$J(SRX,6),?35,$$NORCHK(11,SRX),?38,$P(SRAO(8),"^",2)
"RTN","SROACPM1",38,0)
 S SRX=$P(SRAO(9),"^") W !," 9. Hemoglobin:",?25,$J(SRX,6),?35,$$NORCHK(1,SRX),?38,$P(SRAO(9),"^",2)
"RTN","SROACPM1",39,0)
 S SRX=$P(SRAO(10),"^") W !,"10. Hemoglobin A1c:",?25,$J(SRX,6),?35,$$NORCHK(27,SRX),?38,$P(SRAO(10),"^",2)
"RTN","SROACPM1",40,0)
 S SRX=$P(SRAO(11),"^") W !,"11. BNP:",?25,$J(SRX,6),?35,$$NORCHK(28,SRX),?38,$P(SRAO(11),"^",2)
"RTN","SROACPM1",41,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACPM1",42,0)
 Q
"RTN","SROACPM1",43,0)
CONCC ; check for concurrent case and update if one exists
"RTN","SROACPM1",44,0)
 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") Q:'SRCON
"RTN","SROACPM1",45,0)
 S SRI="" F  S SRI=$O(SRAO(SRI)) Q:SRI=""  S S1=$P(SRAO(SRI),"^",3),S2=$P(SRAO(SRI),"^",4) K DA,DIC,DIQ,DR,SRY D
"RTN","SROACPM1",46,0)
 .S DA=SRTN,DR=S1_";"_S2,DIC="^SRF(",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S P1=SRY(130,SRTN,S1,"I") S:P1="" P1="@" S P2=SRY(130,SRTN,S2,"I") S:P2="" P2="@"
"RTN","SROACPM1",47,0)
 .K DA,DIE,DR S DA=SRCON,DIE=130,DR=S1_"////"_P1_";"_S2_"////"_P2 D ^DIE K DR
"RTN","SROACPM1",48,0)
 Q
"RTN","SROACPM1",49,0)
NORCHK(SRAT,RESULT) ;
"RTN","SROACPM1",50,0)
 I RESULT']""!(RESULT="NS") Q ""
"RTN","SROACPM1",51,0)
 N NODE,LOW,HIGH,SRY
"RTN","SROACPM1",52,0)
 S SRY="" S:"<>"[$E(RESULT) SRY=$E(RESULT),RESULT=$E(RESULT,2,99)
"RTN","SROACPM1",53,0)
 S NODE=$G(^SRO(139.2,SRAT,2)),LOW=$P(NODE,"^",2),HIGH=$P(NODE,"^",3) Q:LOW']""!(HIGH']"")
"RTN","SROACPM1",54,0)
 I SRY'="" Q $S(RESULT<(LOW+.01):"L",((RESULT>(HIGH-.01))&(SRY=">")):"H",1:"")
"RTN","SROACPM1",55,0)
 Q $S(RESULT<LOW:"L",RESULT>HIGH:"H",1:"")
"RTN","SROACPM2")
0^7^B6724131^B6018806
"RTN","SROACPM2",1,0)
SROACPM2 ;BIR/MAM - LAB INFO ;03/29/04
"RTN","SROACPM2",2,0)
 ;;3.0; Surgery ;**125,153,174**;24 Jun 93;Build 8
"RTN","SROACPM2",3,0)
 F SHEMP=201,202,202.1 S SRA(SHEMP)=$G(^SRF(SRTN,SHEMP))
"RTN","SROACPM2",4,0)
 S SHEMP=$P(SRA(201),"^",21),SRAO(1)=SHEMP_"^^457^457.1" S X=$P(SRA(202),"^",21) I X="NS" S $P(SRAO(1),"^",2)="NS"
"RTN","SROACPM2",5,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(1),"^",2)=SHEMP
"RTN","SROACPM2",6,0)
 S SHEMP=$P(SRA(201),"^",25),SRAO(2)=SHEMP_"^^461^461.1" S X=$P(SRA(202),"^",25) I X="NS" S $P(SRAO(2),"^",2)="NS"
"RTN","SROACPM2",7,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(2),"^",2)=SHEMP
"RTN","SROACPM2",8,0)
 S SHEMP=$P(SRA(201),"^",26),SRAO(3)=SHEMP_"^^462^462.1" S X=$P(SRA(202),"^",26) I X="NS" S $P(SRAO(3),"^",2)="NS"
"RTN","SROACPM2",9,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(3),"^",2)=SHEMP
"RTN","SROACPM2",10,0)
 S SHEMP=$P(SRA(201),"^",22),SRAO(4)=SHEMP_"^^458^458.1" S X=$P(SRA(202),"^",22) I X="NS" S $P(SRAO(4),"^",2)="NS"
"RTN","SROACPM2",11,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(4),"^",2)=SHEMP
"RTN","SROACPM2",12,0)
 S SHEMP=$P(SRA(201),"^",23),SRAO(5)=SHEMP_"^^459^459.1" S X=$P(SRA(202),"^",23) I X="NS" S $P(SRAO(5),"^",2)="NS"
"RTN","SROACPM2",13,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(5),"^",2)=SHEMP
"RTN","SROACPM2",14,0)
 S SHEMP=$P(SRA(201),"^",24),SRAO(6)=SHEMP_"^^460^460.1" S X=$P(SRA(202),"^",24) I X="NS" S $P(SRAO(6),"^",2)="NS"
"RTN","SROACPM2",15,0)
 I X D DATE S SHEMP="("_Y_")",$P(SRAO(6),"^",2)=SHEMP
"RTN","SROACPM2",16,0)
 S SHEMP=$P(SRA(201),"^",4),SRAO(7)=SHEMP_"^^223^290" S X=$P(SRA(202),"^",4) I X D DATE S SHEMP="("_Y_")",$P(SRAO(7),"^",2)=SHEMP
"RTN","SROACPM2",17,0)
 S SHEMP=$P(SRA(201),"^",8),SRAO(8)=SHEMP_"^^225^292" S X=$P(SRA(202),"^",8) I X D DATE S SHEMP="("_Y_")",$P(SRAO(8),"^",2)=SHEMP
"RTN","SROACPM2",18,0)
 S SHEMP=$P(SRA(201),"^",20),SRAO(9)=SHEMP_"^^219^239" S X=$P(SRA(202),"^",20) I X D DATE S SHEMP="("_Y_")",$P(SRAO(9),"^",2)=SHEMP
"RTN","SROACPM2",19,0)
 S SHEMP=$P(SRA(201),"^",28),SRAO(10)=SHEMP_"^^504^504.1" S X=$P(SRA(202.1),"^") I X D DATE S SHEMP="("_Y_")",$P(SRAO(10),"^",2)=SHEMP
"RTN","SROACPM2",20,0)
 S SHEMP=$P(SRA(201),"^",29),SRAO(11)=SHEMP_"^^507^507.1" S X=$P(SRA(202.1),"^",2) I X D DATE S SHEMP="("_Y_")",$P(SRAO(11),"^",2)=SHEMP
"RTN","SROACPM2",21,0)
 K SRA
"RTN","SROACPM2",22,0)
 Q
"RTN","SROACPM2",23,0)
DATE S Y=X X ^DD("DD")
"RTN","SROACPM2",24,0)
 Q
"RTN","SROACR1")
0^58^B22164276^B19934044
"RTN","SROACR1",1,0)
SROACR1 ;BIR/MAM - OPERATIVE DATA, PAGE 1 ;06/28/06
"RTN","SROACR1",2,0)
 ;;3.0; Surgery ;**38,71,93,95,99,125,153,174**;24 Jun 93;Build 8
"RTN","SROACR1",3,0)
 ;
"RTN","SROACR1",4,0)
 S SRA(206)=$G(^SRF(SRTN,206)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROACR1",5,0)
 S SRA(207)=$G(^SRF(SRTN,207)),SRA(207.1)=$G(^SRF(SRTN,207.1)) I $P(SRA(207),"^",27)="" K DA,DIE,DR S DA=SRTN,DIE=130,DR="469////5" D ^DIE K DA,DIE,DR S SRA(207)=$G(^SRF(SRTN,207))
"RTN","SROACR1",6,0)
 S SRAO(1)=$P(SRA(207),"^")_"^365",SRAO(2)=$P(SRA(207),"^",2)_"^366"
"RTN","SROACR1",7,0)
 S SRAO(3)=$P(SRA(207),"^",24)_"^464"
"RTN","SROACR1",8,0)
 S SRAO(4)=$P(SRA(207),"^",25)_"^465",SRAO(5)=$P(SRA(207),"^",20)_"^416"
"RTN","SROACR1",9,0)
 S NYUK=$P(SRA(207),"^",7) D YN S SRAO(6)=SHEMP_"^371"
"RTN","SROACR1",10,0)
 S NYUK=$P(SRA(209),"^",9) D YN S SRAO(7)=SHEMP_"^481"
"RTN","SROACR1",11,0)
 S NYUK=$P(SRA(209),"^",11) D YN S SRAO(8)=SHEMP_"^483"
"RTN","SROACR1",12,0)
 S NYUK=$P(SRA(207),"^",3) D VL S SRAO(9)=SHEMP_"^367"
"RTN","SROACR1",13,0)
 S NYUK=$P(SRA(207),"^",4) D VL S SRAO(10)=SHEMP_"^368"
"RTN","SROACR1",14,0)
 S NYUK=$P(SRA(207),"^",5) D VL S SRAO(11)=SHEMP_"^369"
"RTN","SROACR1",15,0)
 S NYUK=$P(SRA(207),"^",28) D VL S SRAO(12)=SHEMP_"^493"
"RTN","SROACR1",16,0)
 S NYUK=$P(SRA(209),"^",14) S SHEMP=$S(NYUK="F":"FULL MAZE",NYUK="N":"NO MAZE PERFORMED",NYUK="M":"MINI MAZE",1:"") S SRAO(13)=SHEMP_"^512"
"RTN","SROACR1",17,0)
 S NYUK=$P(SRA(207),"^",12) D YN S SRAO(14)=SHEMP_"^376"
"RTN","SROACR1",18,0)
 S NYUK=$P(SRA(207),"^",13) D YN S SRAO(15)=SHEMP_"^380"
"RTN","SROACR1",19,0)
 S NYUK=$P(SRA(207),"^",16) D YN S SRAO(16)=SHEMP_"^378"
"RTN","SROACR1",20,0)
 S NYUK=$P(SRA(207),"^",14) D YN S SRAO(17)=SHEMP_"^377"
"RTN","SROACR1",21,0)
 S NYUK=$P(SRA(207),"^",18) D YN S SRAO(18)=SHEMP_"^379"
"RTN","SROACR1",22,0)
 S NYUK=$P(SRA(207),"^",9) D YN S SRAO(19)=SHEMP_"^373"
"RTN","SROACR1",23,0)
 S NYUK=$P(SRA(207),"^",8) D YN S SRAO(20)=SHEMP_"^372"
"RTN","SROACR1",24,0)
 S NYUK=$P(SRA(207.1),"^",2) D YN S SRAO(21)=SHEMP_"^505"
"RTN","SROACR1",25,0)
 S SRAO(22)=$P($G(^SRF(SRTN,209)),"^",13)_"^502"
"RTN","SROACR1",26,0)
 ;
"RTN","SROACR1",27,0)
DISP S SRPAGE="PAGE: 1 OF 2" D HDR^SROAUTL
"RTN","SROACR1",28,0)
 W "Cardiac surgical procedures with or without cardiopulmonary bypass "
"RTN","SROACR1",29,0)
 ;W ! F MOE=1:1:80 W "-"
"RTN","SROACR1",30,0)
 W !,"CABG distal anastomoses:",?40,"13. Maze procedure:",?61,$J($P(SRAO(13),"^"),17)
"RTN","SROACR1",31,0)
 W !," 1. Number with vein:",?33,$P(SRAO(1),"^"),?40,"14. ASD repair:",?70,$P(SRAO(14),"^")
"RTN","SROACR1",32,0)
 W !," 2. Number with IMA:",?33,$P(SRAO(2),"^"),?40,"15. VSD repair:",?70,$P(SRAO(15),"^")
"RTN","SROACR1",33,0)
 W !," 3. Number with Radial Artery:",?33,$P(SRAO(3),"^"),?40,"16. Myectomy for IHSS:",?70,$P(SRAO(16),"^")
"RTN","SROACR1",34,0)
 W !," 4. Number with Other Artery:",?33,$P(SRAO(4),"^"),?40,"17. Myxoma resection:",?70,$P(SRAO(17),"^")
"RTN","SROACR1",35,0)
 W !," 5. Number with Other Conduit:",?33,$P(SRAO(5),"^"),?40,"18. Other tumor resection:",?70,$P(SRAO(18),"^")
"RTN","SROACR1",36,0)
 W !,?40,"19. Cardiac transplant:",?70,$P(SRAO(19),"^")
"RTN","SROACR1",37,0)
 W !," 6. LV Aneurysmectomy:",?33,$P(SRAO(6),"^"),?40,"20. Great Vessel Repair:",?70,$P(SRAO(20),"^")
"RTN","SROACR1",38,0)
 W !," 7. Bridge to transplant/Device:",?33,$P(SRAO(7),"^"),?40,"21. Endovascular Repair:",?70,$P(SRAO(21),"^")
"RTN","SROACR1",39,0)
 W !," 8. TMR:",?33,$P(SRAO(8),"^"),?40,"22. Other cardiac procedures:" S X=$P(SRAO(22),"^") W ?70,$S(X="N":"NO",X="Y":"YES",1:"")
"RTN","SROACR1",40,0)
 W !!," 9. Aortic Valve Procedure:",?33,$P(SRAO(9),"^")
"RTN","SROACR1",41,0)
 W !,"10. Mitral Valve Procedure:",?33,$P(SRAO(10),"^")
"RTN","SROACR1",42,0)
 W !,"11. Tricuspid Valve Procedure:",?33,$P(SRAO(11),"^")
"RTN","SROACR1",43,0)
 W !,"12. Pulmonary Valve Procedure:",?33,$P(SRAO(12),"^"),!
"RTN","SROACR1",44,0)
 S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","SROACR1",45,0)
 S X=$P($G(^SRF(SRTN,209.1)),"^") I X'="",X'="NS" S SRQ=0 W !,IORVON_"* Other cardiac procedures (specify): " W:$L(X)<56 X,! I $L(X)>55 S Z=$L(X) D
"RTN","SROACR1",46,0)
 .I X'[" " W ?27,X Q
"RTN","SROACR1",47,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:39,1:80) D  Q:SRQ
"RTN","SROACR1",48,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROACR1",49,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X,! S SRQ=1 Q
"RTN","SROACR1",50,0)
 W IORVOFF
"RTN","SROACR1",51,0)
 F MOE=1:1:80 W "-"
"RTN","SROACR1",52,0)
 Q
"RTN","SROACR1",53,0)
CHCK ; compare ischemic time to CPB time
"RTN","SROACR1",54,0)
 I '$D(IORVON) S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","SROACR1",55,0)
 N SRISCH,SRCPB S SRISCH=$P(SRA(206),"^",36),SRCPB=$P(SRA(206),"^",37)
"RTN","SROACR1",56,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !,IORVON_"***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***"_IORVOFF,!
"RTN","SROACR1",57,0)
 F MOE=1:1:80 W "-"
"RTN","SROACR1",58,0)
 Q
"RTN","SROACR1",59,0)
YN ; store answer
"RTN","SROACR1",60,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACR1",61,0)
 Q
"RTN","SROACR1",62,0)
VL ; valve values translation
"RTN","SROACR1",63,0)
 S SHEMP=$S(NYUK="Y":"YES",NYUK="N":"NONE",NYUK="M":"MECHANICAL",NYUK="S":"STENTED BIOPROSTHETIC",NYUK="B":"STENTLESS BIOPROSTHETIC",NYUK="H":"HOMOGRAFT",1:NYUK)
"RTN","SROACR1",64,0)
 S:SHEMP=NYUK SHEMP=$S(NYUK="PR":"PRIMARY REPAIR",NYUK="PA":"PRIMARY REPAIR & ANNULOPLASTY DEVICE",NYUK="AN":"ANNULOPLASTY DEVICE ALONE",NYUK="AU":"AUTOGRAFT (ROSS)",NYUK="O":"OTHER",1:"")
"RTN","SROACR1",65,0)
 Q
"RTN","SROACR1",66,0)
SURE W ! K DIR S DIR("A")="   Sure you want to delete all Misc. Cardiac Procedures information ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR W ! K DIR S SRYN=Y I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACR1",67,0)
 Q
"RTN","SROADEL")
0^17^B8483911^B8400705
"RTN","SROADEL",1,0)
SROADEL ;BIR/MAM - DELETE ASSESSMENT ;05/05/10
"RTN","SROADEL",2,0)
 ;;3.0; Surgery ;**38,83,100,174**;24 Jun 93;Build 8
"RTN","SROADEL",3,0)
 S SRASTAT=$P($G(^SRF(SRTN,"RA")),"^")
"RTN","SROADEL",4,0)
 I SRASTAT="T" W !!,"This assessment has already been verified and transmitted.  It cannot be",!,"deleted.  If the assessment was transmitted in error, use the option 'Update",!,"an Assessment Transmitted in Error'." D RET Q
"RTN","SROADEL",5,0)
 I SRASTAT="V" W !!,"This assessment has already been verified.  It cannot be deleted.  If the",!,"assessment was verified in error, use the option 'Update an Assessment Verified",!,"in Error'." D RET Q
"RTN","SROADEL",6,0)
DEL W !!,"This assessment has a current status of "_$S(SRASTAT="I":"'Incomplete'",1:"'Complete/Unverified'"),!!,"Are you sure that you want to delete this assessment ? NO//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROADEL",7,0)
 S SRYN=$E(SRYN) I "Nn"[SRYN S SRSOUT=1 Q
"RTN","SROADEL",8,0)
 I "Yy"'[SRYN W !!,"Enter <RET> if this assessment was selected in error and should not be deleted.",!,"If you want to delete this assessment, enter 'YES'." G DEL
"RTN","SROADEL",9,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROADEL",10,0)
 .K DR,DIE,DA S DA=SRTN,DIE=130,DR="235///@;284///@;393///@;260///@;272///@;272.1///@;323///@;102///@" D ^DIE W !!,"Deleting Assessment..."
"RTN","SROADEL",11,0)
 .K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK
"RTN","SROADEL",12,0)
 Q
"RTN","SROADEL",13,0)
RET W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROADEL",14,0)
 K SRTN
"RTN","SROADEL",15,0)
 Q
"RTN","SROAERR")
0^16^B5443025^B5386275
"RTN","SROAERR",1,0)
SROAERR ;BIR/MAM - UPDATE ASSESSMENTS ENTERED IN ERROR ;05/05/10
"RTN","SROAERR",2,0)
 ;;3.0; Surgery ;**38,65,100,174**;24 Jun 93;Build 8
"RTN","SROAERR",3,0)
TRANS ; update assessments transmitted in error
"RTN","SROAERR",4,0)
 I '$D(SRSTAT) S SRSTAT="T"
"RTN","SROAERR",5,0)
 S SRSOUT=0 K SRNEW D ^SROASS I '$D(SRTN) S SRSOUT=1 G END
"RTN","SROAERR",6,0)
 S SRASTAT=$P($G(^SRF(SRTN,"RA")),"^") I SRSTAT'=SRASTAT D GOOF I GOOF G END
"RTN","SROAERR",7,0)
ASK W !!,"Are you sure that you want to change the status of this assessment"
"RTN","SROAERR",8,0)
 W !,"from "_$S(SRASTAT="C":"'COMPLETE'",1:"'TRANSMITTED'")_" to 'INCOMPLETE' ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 G END
"RTN","SROAERR",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN D HELP G ASK
"RTN","SROAERR",10,0)
 S:SRYN="" SRYN="Y" I "Nn"[SRYN G END
"RTN","SROAERR",11,0)
 I $$LOCK^SROUTL(SRTN) D STAT Q
"RTN","SROAERR",12,0)
 E  W !!,"No action taken." G END
"RTN","SROAERR",13,0)
 Q
"RTN","SROAERR",14,0)
STAT K DR S DIE=130,DA=SRTN,DR="235////I;393////"_$S(SRASTAT="T":1,1:"") D ^DIE K DR
"RTN","SROAERR",15,0)
 I SRASTAT="C"&($P($G(^SRF(SRTN,"RA")),"^",3)'="1") K DR S DIE=130,DA=SRTN,DR="272///@;272.1///@" D ^DIE K DR
"RTN","SROAERR",16,0)
 W !!,"The Assessment Status has been changed to 'INCOMPLETE'."
"RTN","SROAERR",17,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROAERR",18,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAERR",19,0)
 D ^SRSKILL K SRTN W @IOF
"RTN","SROAERR",20,0)
 Q
"RTN","SROAERR",21,0)
GOOF S GOOF=0 I SRASTAT="I" W !!,"This assessment already has the status, 'INCOMPLETE'." S GOOF=1 Q
"RTN","SROAERR",22,0)
 Q
"RTN","SROAERR",23,0)
HELP W !!,"Enter RETURN if the assessment was "_$S(SRASTAT="C":"completed",1:"transmitted")_" in error and the status",!,"should be changed to 'INCOMPLETE' to allow editing.  Otherwise, enter 'NO'."
"RTN","SROAERR",24,0)
 Q
"RTN","SROAL11")
0^10^B20255252^B19052112
"RTN","SROAL11",1,0)
SROAL11 ;BIR/ADM - LOAD PREOP LAB DATA (CONTINUED) ;06/27/06
"RTN","SROAL11",2,0)
 ;;3.0; Surgery ;**38,47,65,95,125,153,160,174**;24 Jun 93;Build 8
"RTN","SROAL11",3,0)
STUFF ; Transfer test data from array to file 130
"RTN","SROAL11",4,0)
 W !!,"..Moving preoperative lab test data to Surgery Risk Assessment file...."
"RTN","SROAL11",5,0)
N4 I $D(SRAT(4)) S X=SRAT(4),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^")=X S $P(^(202),"^")=$S(X'="":SRAD(4),1:"") ; Sodium
"RTN","SROAL11",6,0)
N7 I $D(SRAT(7)) S X=SRAT(7),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",4)=X,$P(^(202),"^",4)=$S(X'="":SRAD(7),1:"") ; Creatinine
"RTN","SROAL11",7,0)
N8 I $D(SRAT(8)) S X=SRAT(8),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",5)=X,$P(^(202),"^",5)=$S(X'="":SRAD(8),1:"") ; BUN
"RTN","SROAL11",8,0)
N11 I $D(SRAT(11)) S X=SRAT(11),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",8)=X,$P(^(202),"^",8)=$S(X'="":SRAD(11),1:"") ; Albumin
"RTN","SROAL11",9,0)
N13 I $D(SRAT(13)) S X=SRAT(13),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",11)=X,$P(^(202),"^",11)=$S(X'="":SRAD(13),1:"") ; SGOT
"RTN","SROAL11",10,0)
N14 I $D(SRAT(14)) S X=SRAT(14),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",9)=X,$P(^(202),"^",9)=$S(X'="":SRAD(14),1:"") ; Total Bilirubin
"RTN","SROAL11",11,0)
N15 I $D(SRAT(15)) S X=SRAT(15),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",12)=X,$P(^(202),"^",12)=$S(X'="":SRAD(15),1:"") ; Alkaline Phosphatase
"RTN","SROAL11",12,0)
N16 I $D(SRAT(16)) S X=SRAT(16),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",13)=X,$P(^(202),"^",13)=$S(X'="":SRAD(16),1:"") ; White Blood Count
"RTN","SROAL11",13,0)
N17 I $D(SRAT(17)) S X=SRAT(17),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",14)=X,$P(^(202),"^",14)=$S(X'="":SRAD(17),1:"") ; Hematocrit
"RTN","SROAL11",14,0)
N18 I $D(SRAT(18)) S X=SRAT(18),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",15)=X,$P(^(202),"^",15)=$S(X'="":SRAD(18),1:"") ; Platelet Count
"RTN","SROAL11",15,0)
N19 I $D(SRAT(19)) S X=SRAT(19),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",17)=X,$P(^(202),"^",17)=$S(X'="":SRAD(19),1:"") ; PT
"RTN","SROAL11",16,0)
N20 I $D(SRAT(20)) S X=SRAT(20),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",16)=X,$P(^(202),"^",16)=$S(X'="":SRAD(20),1:"") ; PTT
"RTN","SROAL11",17,0)
N25 I $D(SRAT(25)) S X=SRAT(25),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,201),"^",27)=X,$P(^(202),"^",27)=$S(X'="":SRAD(25),1:"") ; INR
"RTN","SROAL11",18,0)
N26 I $D(SRAT(26)) S X=SRAT(26),SRL=1,SRH=5 D INPUT S $P(^SRF(SRTN,203),"^",15)=X,$P(^(204),"^",15)=$S(X'="":SRAD(26),1:"") ; ANION GAP
"RTN","SROAL11",19,0)
N27 I $D(SRAT(27)) S X=SRAT(27),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",28)=X,$P(^(202.1),"^")=$S(X'="":SRAD(27),1:"") ; HEMOGLOBIN A1C
"RTN","SROAL11",20,0)
 Q
"RTN","SROAL11",21,0)
CARDIAC ; LOAD CARDIAC LAB DATA (CONTINUED)
"RTN","SROAL11",22,0)
 N SRCRD
"RTN","SROAL11",23,0)
C1 I $D(SRAT(1)) S X=SRAT(1),SRL=1,SRH=7,SRCRD=1 D INPUT S $P(^SRF(SRTN,201),"^",20)=X,$P(^(202),"^",20)=$S(X'="":SRAD(1),1:"") ; Hemoglobin
"RTN","SROAL11",24,0)
C5 I $D(SRAT(5)) S X=SRAT(5),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",23)=X,$P(^(202),"^",23)=$S(X'="":SRAD(5),1:"") ; Potassium (Cardiac)
"RTN","SROAL11",25,0)
C7 I $D(SRAT(7)) S X=SRAT(7),SRL=1,SRH=4,SRCRD=1 D INPUT S $P(^SRF(SRTN,201),"^",4)=X,$P(^(202),"^",4)=$S(X'="":SRAD(7),1:"") ; Creatinine
"RTN","SROAL11",26,0)
C11 I $D(SRAT(11)) S X=SRAT(11),SRL=1,SRH=4 D INPUT S $P(^SRF(SRTN,201),"^",8)=X,$P(^(202),"^",8)=$S(X'="":SRAD(11),1:"") ; Albumin
"RTN","SROAL11",27,0)
C14 I $D(SRAT(14)) S X=SRAT(14),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",24)=X,$P(^(202),"^",24)=$S(X'="":SRAD(14),1:"") ; Total Bilirubin (Cardiac)
"RTN","SROAL11",28,0)
C21 I $D(SRAT(21)) S X=SRAT(21),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",21)=X,$P(^(202),"^",21)=$S(X'="":SRAD(21),1:"") ; HDL
"RTN","SROAL11",29,0)
C22 I $D(SRAT(22)) S X=SRAT(22),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",22)=X,$P(^(202),"^",22)=$S(X'="":SRAD(22),1:"") ; Triglyceride
"RTN","SROAL11",30,0)
C23 I $D(SRAT(23)) S X=SRAT(23),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",25)=X,$P(^(202),"^",25)=$S(X'="":SRAD(23),1:"") ; LDL
"RTN","SROAL11",31,0)
C24 I $D(SRAT(24)) S X=SRAT(24),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",26)=X,$P(^(202),"^",26)=$S(X'="":SRAD(24),1:"") ; Cholesterol
"RTN","SROAL11",32,0)
C27 I $D(SRAT(27)) S X=SRAT(27),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",28)=X,$P(^(202.1),"^")=$S(X'="":SRAD(27),1:"") ; HEMOGLOBIN A1C
"RTN","SROAL11",33,0)
C28 I $D(SRAT(28)) S X=SRAT(28),SRL=1,SRH=6 D INPUT S $P(^SRF(SRTN,201),"^",29)=X,$P(^(202.1),"^",2)=$S(X'="":SRAD(28),1:"") ; B-type Natriuretic Peptide (BNP)
"RTN","SROAL11",34,0)
 Q
"RTN","SROAL11",35,0)
INPUT ; input checking
"RTN","SROAL11",36,0)
 N SRX,SRY I $D(SRCRD),X="NS" S X=""
"RTN","SROAL11",37,0)
 K SRCRD I X="NS"!(X="") Q
"RTN","SROAL11",38,0)
 I $L(X)<SRL S X="" Q
"RTN","SROAL11",39,0)
 S SRX=X,SRY="" S:" <>"[$E(X) SRY=$E(X),SRX=$E(X,2,99)
"RTN","SROAL11",40,0)
 I +SRX'=SRX S X="" Q
"RTN","SROAL11",41,0)
 I $L(X)>SRH D
"RTN","SROAL11",42,0)
 .I SRX["." S SRX=SRX+.05\.1*.1,X=SRY_SRX I $L(X)>SRH S SRX=SRX+.5\1,X=SRY_SRX
"RTN","SROAL11",43,0)
 .I $L(X)>SRH S X=""
"RTN","SROAL11",44,0)
 Q
"RTN","SROAMEAS")
0^55^B450182^B681156
"RTN","SROAMEAS",1,0)
SROAMEAS ;BIR/MAM - INPUT TRANSFORMS, HEIGHT & WEIGHT ;06/28/10
"RTN","SROAMEAS",2,0)
 ;;3.0; Surgery ;**38,125,153,166,170,174**;24 Jun 93;Build 8
"RTN","SROAMEAS",3,0)
H Q:'$D(X)  I X'?.N1"C"&(X'?.N1"c"),(+X'=X) K X Q
"RTN","SROAMEAS",4,0)
 I +X=X S X=X+.5\1 I X'>24.9!(X'<86.1) K X Q
"RTN","SROAMEAS",5,0)
 S:X["c" X=+X_"C"
"RTN","SROAMEAS",6,0)
 I X?.N1"C",(X'>62.9!(X'<218.1)) K X
"RTN","SROAMEAS",7,0)
 Q
"RTN","SROAMEAS",8,0)
W Q:'$D(X)  I +X'=X,(X'?.N1"K")&(X'?.N1"k") K X Q
"RTN","SROAMEAS",9,0)
 I +X=X S X=X+.5\1 I X'>49.9!(X'<999.1) K X Q
"RTN","SROAMEAS",10,0)
 S:X["k" X=+X_"K"
"RTN","SROAMEAS",11,0)
 I X?.N1"K",(X'>22.9!(X'<453.1)) K X
"RTN","SROAMEAS",12,0)
 Q
"RTN","SROAOP")
0^54^B22239437^B19808146
"RTN","SROAOP",1,0)
SROAOP ;BIR/MAM - ENTER OPERATION INFO ;06/25/10
"RTN","SROAOP",2,0)
 ;;3.0; Surgery ;**19,38,47,63,67,81,86,97,100,125,142,153,160,166,171,174**;24 Jun 93;Build 8
"RTN","SROAOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOP",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOP",5,0)
START G:SRSOUT END K SRAOTH,SRACON D ^SROAOP1
"RTN","SROAOP",6,0)
ASK W !!,"Select Operative Information to Edit: " R SRASEL:DTIME I '$T!(SRASEL["^") S SRSOUT=1 G END
"RTN","SROAOP",7,0)
 I SRASEL="" G END
"RTN","SROAOP",8,0)
 S SRN=13 S:SRASEL="a" SRASEL="A" I '$D(SRAO(SRASEL)),(SRASEL'?.N1":".N),(SRASEL'="A") D HELP G:SRSOUT END G START
"RTN","SROAOP",9,0)
 I SRASEL="A" S SRASEL="1:"_SRN
"RTN","SROAOP",10,0)
 I SRASEL?.N1":".N S Y=$E(SRASEL),Z=$P(SRASEL,":",2) I Y<1!(Z>SRN)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOP",11,0)
 S MM=$E(SRASEL) I MM'=3,(MM'=4),(MM'=5) S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",12,0)
 I SRASEL?.N1":".N D RANGE G START
"RTN","SROAOP",13,0)
 Q:'$D(SRAO(SRASEL))
"RTN","SROAOP",14,0)
 S EMILY=SRASEL D  G START
"RTN","SROAOP",15,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",16,0)
END I $D(SRSOUT),'SRSOUT D ^SROAOP2
"RTN","SROAOP",17,0)
 I $D(SRTN) S SROERR=SRTN D ^SROERR0
"RTN","SROAOP",18,0)
 W @IOF D ^SRSKILL
"RTN","SROAOP",19,0)
 Q
"RTN","SROAOP",20,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper"
"RTN","SROAOP",21,0)
 W !,"responses are listed below.",!!,"1. Enter 'A' to update all information."
"RTN","SROAOP",22,0)
 W !!,"2. Enter a number (1-"_SRN_") to update the information in that field. (For"
"RTN","SROAOP",23,0)
 W !,"   example, enter '2' to update Principal Operation.)"
"RTN","SROAOP",24,0)
 W !!,"3. Enter a range of numbers (1-"_SRN_") separated by a ':' to enter a range of"
"RTN","SROAOP",25,0)
 W !,"   information. (For example, enter '6:8' to update PGY of Primary Surgeon,"
"RTN","SROAOP",26,0)
 W !,"   Surgical Priority and Wound Classification.)",!
"RTN","SROAOP",27,0)
PRESS K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAOP",28,0)
 Q
"RTN","SROAOP",29,0)
RANGE ; range of numbers
"RTN","SROAOP",30,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",31,0)
 .S SHEMP=$P(SRASEL,":"),CURLEY=$P(SRASEL,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOP",32,0)
 Q
"RTN","SROAOP",33,0)
ONE ; edit one item
"RTN","SROAOP",34,0)
 I EMILY=3 D DISP^SROAUTL0 Q
"RTN","SROAOP",35,0)
 I EMILY=10 D ANES Q
"RTN","SROAOP",36,0)
 I EMILY=4 D ^SROTHER Q
"RTN","SROAOP",37,0)
 I EMILY=5 D CONCUR Q
"RTN","SROAOP",38,0)
 I EMILY=6,SRASEL[":",($P(SRASEL,":")'=6) S SRPAGE="" S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",39,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAOP",40,0)
 I EMILY=2 D ^SROAUTL
"RTN","SROAOP",41,0)
 Q
"RTN","SROAOP",42,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOP",43,0)
 Q
"RTN","SROAOP",44,0)
CONCUR ; concurrent case information
"RTN","SROAOP",45,0)
 N SRPROC,SRCSTAT S SRLINE="" F I=1:1:80 S SRLINE=SRLINE_"-"
"RTN","SROAOP",46,0)
 S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) S CON=""
"RTN","SROAOP",47,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAOP",48,0)
 W !,"Concurrent Procedure: An additional operative procedure performed by a"
"RTN","SROAOP",49,0)
 W !,"different surgical team (i.e., a different specialty/service) under the"
"RTN","SROAOP",50,0)
 W !,"same anesthetic which has a CPT code different from that of the Principal"
"RTN","SROAOP",51,0)
 W !,"Operative Procedure (e.g., fixation of a femur fracture in a patient"
"RTN","SROAOP",52,0)
 W !,"undergoing a laparotomy for trauma). This field should be verified and,"
"RTN","SROAOP",53,0)
 W !,"if need be, report discrepancies to the official CPT coder for surgery."
"RTN","SROAOP",54,0)
 I CON D CC W !!,"Concurrent Procedure: ",?22,SROPS(1) I $D(SROPS(2)) W !,?22,SROPS(2) I $D(SROPS(3)) W !,?22,SROPS(3) I $D(SROPS(4)) W !,?22,SROPS(4)
"RTN","SROAOP",55,0)
 I $D(SRCSTAT) W !!,?22,SRCSTAT
"RTN","SROAOP",56,0)
 W !!,"Press ENTER to continue " R X:DTIME
"RTN","SROAOP",57,0)
 Q
"RTN","SROAOP",58,0)
CC ; list concurrent procedure
"RTN","SROAOP",59,0)
 N SRTN,SRL,SRZ S SRCSTAT=">> Coding "_$S($P($G(^SRO(136,CON,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROAOP",60,0)
 S SRL=55,SRTN=CON D CPTS^SROAUTL0
"RTN","SROAOP",61,0)
 I SRPROC(1)="NOT ENTERED"!'$D(SRPROC(1)) S SRPROC(1)="CPT NOT ENTERED" K SRCSTAT
"RTN","SROAOP",62,0)
 S SROPER=$P(^SRF(CON,"OP"),"^")_" (" F I=1:1 Q:'$D(SRPROC(I))  S SROPER=SROPER_SRPROC(I)
"RTN","SROAOP",63,0)
 S SROPER=SROPER_")"
"RTN","SROAOP",64,0)
 K SROPS,MM,MMM S:$L(SROPER)<57 SROPS(1)=SROPER
"RTN","SROAOP",65,0)
 I $L(SROPER)>56 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP",66,0)
 Q
"RTN","SROAOP",67,0)
LOOP ; break procedures
"RTN","SROAOP",68,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<57  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP",69,0)
 Q
"RTN","SROAOP",70,0)
ANES N SRANE,SRNEW
"RTN","SROAOP",71,0)
 I $P(SRAO(10),"^")="NOT ENTERED",'$O(^SRF(SRTN,6,0)) D  Q
"RTN","SROAOP",72,0)
 .K DIR S DIR("A")="Select ANESTHESIA TECHNIQUE: ",DIR(0)="130.06,.01OA" D ^DIR K DIR S SRANE=Y I $D(DTOUT)!$D(DUOUT)!(Y="") Q
"RTN","SROAOP",73,0)
 .K DD,DO S DIC="^SRF(SRTN,6,",X=SRANE,DA(1)=SRTN,DIC(0)="L" D FILE^DICN K DIC,DD,DO I '+Y Q
"RTN","SROAOP",74,0)
 .S SRNEW=+Y
"RTN","SROAOP",75,0)
 .K DA,DIE,DR S DA=SRNEW,DA(1)=SRTN,DIE="^SRF(SRTN,6,",DR=".05T;42T" D ^DIE
"RTN","SROAOP",76,0)
 K DR,DIE,DA S DA=SRTN,DR=".37T",DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SROAOP",77,0)
 Q
"RTN","SROAOUT")
0^22^B12427409^B12427233
"RTN","SROAOUT",1,0)
SROAOUT ;BIR/SJA - OUTCOMES DATA ;04/03/07
"RTN","SROAOUT",2,0)
 ;;3.0; Surgery ;**125,135,142,160,174**;24 Jun 93;Build 8
"RTN","SROAOUT",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOUT",4,0)
 D SRA^SROES S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOUT",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROUTC
"RTN","SROAOUT",6,0)
ASK W !!,"Select Outcomes Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROAOUT",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROAOUT",8,0)
 I X="A" S X="0:14"
"RTN","SROAOUT",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<0!(Z>14)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOUT",10,0)
 D HDR^SROAUTL
"RTN","SROAOUT",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROAOUT",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROAOUT",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOUT",14,0)
END D:$D(SRTN) EXIT^SROES W @IOF D ^SRSKILL
"RTN","SROAOUT",15,0)
 Q
"RTN","SROAOUT",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROAOUT",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (0-14) to update the information in that field.  (For",!,"   example, enter '4' to update Mediastinitis)"
"RTN","SROAOUT",18,0)
 W !!,"3. Enter a range of numbers separated by a ':' to enter a range of",!,"   information.  (For example, enter '11:13' to enter Stroke,",!,"   Coma >= 24 hr, and New Mech Circ Support)"
"RTN","SROAOUT",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAOUT",20,0)
 Q
"RTN","SROAOUT",21,0)
RANGE ; range of numbers
"RTN","SROAOUT",22,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOUT",23,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOUT",24,0)
 Q
"RTN","SROAOUT",25,0)
ONE ; edit one item
"RTN","SROAOUT",26,0)
 N SRBEF
"RTN","SROAOUT",27,0)
 S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I",DR=$P(SRAO(EMILY),"^",2) D EN^DIQ1 K DA,DIC,DIQ,DR S SRBEF=SRY(130,SRTN,$P(SRAO(EMILY),"^",2),"I")
"RTN","SROAOUT",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DA,DIE,DR I $D(Y)!$D(DTOUT) S SRSOUT=1
"RTN","SROAOUT",29,0)
 Q:'EMILY
"RTN","SROAOUT",30,0)
 I 'SRSOUT,SRBEF'="Y",X="Y" D UPDATE^SROUTC Q
"RTN","SROAOUT",31,0)
 I 'SRSOUT,SRBEF="Y",X="Y",EMILY=8 D  K DA,DR,DIE Q
"RTN","SROAOUT",32,0)
 .N SROCC,SRSTAT S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S SRSTAT=$P(^SRF(SRTN,16,SROCC,0),"^",5) Q
"RTN","SROAOUT",33,0)
 .K DIR S DIR(0)="130.22,8",DIR("A")="Cardiopulmonary Bypass Status",DA(1)=SRTN,DA=SROCC D ^DIR K DA,DR,DIE,DIR
"RTN","SROAOUT",34,0)
 .I ($G(SRSTAT)=""&((X="")!(X="@")!(X["^")))!(Y=0) D DEL^SROUTC S DA=SRTN,DIE=130,DR="391////N" D ^DIE Q
"RTN","SROAOUT",35,0)
 .I $G(SRSTAT)'="",X["^" Q
"RTN","SROAOUT",36,0)
 .I $G(SRSTAT)'=Y,Y'="" S DA=SROCC,DA(1)=SRTN,DIE="^SRF(SRTN,16,",DR="8////"_Y D ^DIE Q
"RTN","SROAOUT",37,0)
 I 'SRSOUT,SRBEF="Y",(X=""!(X="N")) D DEL^SROUTC
"RTN","SROAOUT",38,0)
 Q
"RTN","SROAOUT",39,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOUT",40,0)
 Q
"RTN","SROAPAS")
0^53^B27566457^B28963323
"RTN","SROAPAS",1,0)
SROAPAS ;BIR/MAM - PRINT A COMPLETE ASSESSMENT ;05/28/10
"RTN","SROAPAS",2,0)
 ;;3.0; Surgery ;**38,47,81,88,111,112,100,125,153,166,174**;24 Jun 93;Build 8
"RTN","SROAPAS",3,0)
 S SRSOUT=0,SRPG=0,SR("RA")=$G(^SRF(SRTN,"RA")),SRATYPE=$P(SR("RA"),"^",2) F I=200:1:208,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPAS",4,0)
 S SRA("OP")=^SRF(SRTN,"OP"),SRA("CON")=$G(^SRF(SRTN,"CON"))
"RTN","SROAPAS",5,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^"),SRSDATE=$P(SR(0),"^",9) D DEM^VADPT S SRANM=VADM(1)_"  "_VA("PID"),Z=$P(VADM(3),"^"),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROAPAS",6,0)
 I $P(SR("RA"),"^",2)="C" D ^SROAPCA G END
"RTN","SROAPAS",7,0)
 W:$E(IOST)'="P" @IOF D HDR G:SRSOUT END
"RTN","SROAPAS",8,0)
 W !,"Medical Center: "_SRSITE("SITE")
"RTN","SROAPAS",9,0)
 W !,"Age: ",?16,AGE S Y=SRSDATE D D^DIQ W ?40,"Operation Date: ",?59,$P(Y,"@")
"RTN","SROAPAS",10,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",10),C=$P(^DD(130,417,0),"^",2) D Y^DIQ S X=$S(Y'="":Y,1:"NOT ENTERED")
"RTN","SROAPAS",11,0)
 ;
"RTN","SROAPAS",12,0)
 D DEM^VADPT
"RTN","SROAPAS",13,0)
 ;Find patient's ethnicity
"RTN","SROAPAS",14,0)
 S SROETH=""
"RTN","SROAPAS",15,0)
 I $G(VADM(11)) S SROETH=$P(VADM(11,1),U,2)
"RTN","SROAPAS",16,0)
 I '$G(VADM(11)) S SROETH="UNANSWERED"
"RTN","SROAPAS",17,0)
 ;
"RTN","SROAPAS",18,0)
 ;Find all race entries and place into a string with commas inbetween
"RTN","SROAPAS",19,0)
 S SRORC=0,C=1,SRORACE="",SROLINE="",N=1,SROL=""
"RTN","SROAPAS",20,0)
 F  S SRORC=$O(VADM(12,SRORC)) Q:SRORC=""  Q:C=11  D
"RTN","SROAPAS",21,0)
 .I $G(VADM(12,SRORC)) S SRORACE(C)=$P(VADM(12,SRORC),U,2)
"RTN","SROAPAS",22,0)
 .I SROLINE'="" S SROLINE=SROLINE_", "_SRORACE(C)
"RTN","SROAPAS",23,0)
 .I SROLINE="" S SROLINE=SRORACE(C)
"RTN","SROAPAS",24,0)
 .S C=C+1
"RTN","SROAPAS",25,0)
 ;
"RTN","SROAPAS",26,0)
 ;Find total length of 'race' string and wrap the text if necessary
"RTN","SROAPAS",27,0)
 I $L(SROLINE)=29!$L(SROLINE)<29 S SROL(N)=SROLINE,SRNUM1=2
"RTN","SROAPAS",28,0)
 I $L(SROLINE)>29 D WRAP
"RTN","SROAPAS",29,0)
 ;
"RTN","SROAPAS",30,0)
 W !,"Sex: ",?16,$P(VADM(5),"^",2),?40,"Ethnicity:",?51,SROETH
"RTN","SROAPAS",31,0)
 W !,?40,"Race:"
"RTN","SROAPAS",32,0)
 I $G(VADM(12)) F D=1:1:SRNUM1-1 D
"RTN","SROAPAS",33,0)
 .W:D=1 ?51,SROL(D)
"RTN","SROAPAS",34,0)
 .W:D'=1 !,?51,SROL(D)
"RTN","SROAPAS",35,0)
 I '$G(VADM(12)) W ?51,"UNANSWERED"
"RTN","SROAPAS",36,0)
 ;
"RTN","SROAPAS",37,0)
 K SROL,SROLINE,SRORC,SRORACE,SROLN,SROLN1,SROWRAP,SRNUM1
"RTN","SROAPAS",38,0)
 ;
"RTN","SROAPAS",39,0)
 S Y=$P($G(^SRF(SRTN,208)),"^",11),C=$P(^DD(130,413,0),"^",2) D Y^DIQ S X=$S(Y'="":Y,1:"NOT ENTERED") W !,"Transfer Status: ",X
"RTN","SROAPAS",40,0)
 F J=1,2,3 S Y=$P($G(^SRF(SRTN,208.1)),"^",J) D
"RTN","SROAPAS",41,0)
 .I J'=3 X:Y ^DD("DD") S Z=$P(Y,"@")_"  "_$E($P(Y,"@",2),1,5)
"RTN","SROAPAS",42,0)
 .I J=3 S C=$P(^DD(130,454,0),"^",2) D Y^DIQ S Z=Y
"RTN","SROAPAS",43,0)
 .W !,"Observation "_$S(J=1:"Admission Date:",J=2:"Discharge Date:",1:"Treating Specialty:"),?47,Z
"RTN","SROAPAS",44,0)
 F J=14:1:17 S Y=$P($G(^SRF(SRTN,208)),"^",J) X ^DD("DD") S SRPTMODT(J)=Y
"RTN","SROAPAS",45,0)
 S (X,Z)=SRPTMODT(14) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Hospital Admission Date:",?47,Z
"RTN","SROAPAS",46,0)
 S (X,Z)=SRPTMODT(15) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Hospital Discharge Date:",?47,Z
"RTN","SROAPAS",47,0)
 S (X,Z)=SRPTMODT(16) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Admitted/Transferred to Surgical Service:",?47,Z
"RTN","SROAPAS",48,0)
 S (X,Z)=SRPTMODT(17) S:X'="" Z=$P(X,"@")_"  "_$E($P(X,"@",2),1,5) W !,"Discharged/Transferred to Chronic Care:",?47,Z
"RTN","SROAPAS",49,0)
 W !,"In/Out-Patient Status:",?47,$S($P($G(^SRF(SRTN,0)),"^",12)="I":"INPATIENT",$P($G(^SRF(SRTN,0)),"^",12)="O":"OUTPATIENT",1:"")
"RTN","SROAPAS",50,0)
 I $E(IOST)="P" W ! F MOE=1:1:80 W "-"
"RTN","SROAPAS",51,0)
 I $E(IOST)'="P" D PAGE I SRSOUT G END
"RTN","SROAPAS",52,0)
 D ^SROAPRT1 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",53,0)
 D ^SROAPRT2 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",54,0)
 D OPTIMES^SROAPRT3 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",55,0)
 D ^SROAPRT3 G:SRSOUT END I $Y+24>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",56,0)
 D ^SROAPRT4 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",57,0)
 D ^SROAPRT5 G:SRSOUT END I $Y+20>IOSL D PAGE I SRSOUT G END
"RTN","SROAPAS",58,0)
 D ^SROAPRT6
"RTN","SROAPAS",59,0)
END Q:$D(SRABATCH)  I 'SRSOUT,$E(IOST)'="P" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROAPAS",60,0)
 W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROAPAS",61,0)
 D ^%ZISC K SROETH,SRTN W @IOF D ^SRSKILL
"RTN","SROAPAS",62,0)
 Q
"RTN","SROAPAS",63,0)
 ;
"RTN","SROAPAS",64,0)
WRAP ;Wrap multiple race entries so that wrapped line
"RTN","SROAPAS",65,0)
 ;does not break in the middle of a word
"RTN","SROAPAS",66,0)
 ;
"RTN","SROAPAS",67,0)
 S SROLNGTH=$L(SROLINE),E=29,SROWRAP="",SROLN="",SROLN1="",SROL=""
"RTN","SROAPAS",68,0)
 F I=1:29:SROLNGTH S SROLN(I)=SROWRAP_$E(SROLINE,I,E) D
"RTN","SROAPAS",69,0)
 .F K=29:-1:1 I $E(SROLN(I),K)[" " D  Q    ;Break lines at space
"RTN","SROAPAS",70,0)
 ..S SROLN1(I)=$E(SROLN(I),1,K-1)
"RTN","SROAPAS",71,0)
 ..S SROWRAP=$E(SROLN(I),K+1,E)
"RTN","SROAPAS",72,0)
 .S E=E+29
"RTN","SROAPAS",73,0)
 ;
"RTN","SROAPAS",74,0)
 S:'$D(SROLN1(I)) SROLN1(I)=SROLN(I),SROWRAP=""
"RTN","SROAPAS",75,0)
 I $L(SROLN1(I))+$L(SROWRAP)>28 S SROLN1(I+1)=SROWRAP   ;Last line
"RTN","SROAPAS",76,0)
 I $L(SROLN1(I))+$L(SROWRAP)'>28 S SROLN1(I)=SROLN1(I)_" "_SROWRAP
"RTN","SROAPAS",77,0)
 ;
"RTN","SROAPAS",78,0)
 ;Renumber the SROLN1 array to be in numeric order
"RTN","SROAPAS",79,0)
 S SRNUM=0,SRNUM1=1
"RTN","SROAPAS",80,0)
 F  S SRNUM=$O(SROLN1(SRNUM)) Q:SRNUM=""  D
"RTN","SROAPAS",81,0)
 .S SROL(SRNUM1)=SROLN1(SRNUM)
"RTN","SROAPAS",82,0)
 .S SRNUM1=SRNUM1+1
"RTN","SROAPAS",83,0)
 Q
"RTN","SROAPAS",84,0)
 ;
"RTN","SROAPAS",85,0)
LOOP ; break procedures
"RTN","SROAPAS",86,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<55  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAPAS",87,0)
 Q
"RTN","SROAPAS",88,0)
PAGE I $E(IOST)'="P" W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPAS",89,0)
 I X["?" W !!,"Enter <RET> to continue printing the remaining pages of this assessment, or",!,"'^' to exit this option." G PAGE
"RTN","SROAPAS",90,0)
 W @IOF
"RTN","SROAPAS",91,0)
HDR ; print heading
"RTN","SROAPAS",92,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROAPAS",93,0)
 S SRPG=SRPG+1
"RTN","SROAPAS",94,0)
 I $Y'=0 W @IOF
"RTN","SROAPAS",95,0)
 I SRATYPE="C" W !,"VA CARDIAC RISK ASSESSMENT",?70,"PAGE "_SRPG
"RTN","SROAPAS",96,0)
 I SRATYPE="N" W !,"VA NON-CARDIAC RISK ASSESSMENT             Assessment: "_SRTN,?69,"PAGE "_SRPG
"RTN","SROAPAS",97,0)
 W !,"FOR "_SRANM S X=$P(SR("RA"),"^") W " ("_$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT") I X="T" S Y=$P(SR("RA"),"^",4) W " "_$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)
"RTN","SROAPAS",98,0)
 W ")",! F LINE=1:1:80 W "="
"RTN","SROAPAS",99,0)
 W !
"RTN","SROAPAS",100,0)
 Q
"RTN","SROAPAS",101,0)
CODE ; print CPT Code
"RTN","SROAPAS",102,0)
 S X=$P(^SRF(SRTN,13,SR,0),"^",2) I X W "  ("_$P($$CPT^ICPTCOD(X),"^",2)_")"
"RTN","SROAPAS",103,0)
 Q
"RTN","SROAPCA")
0^26^B26334620^B25536856
"RTN","SROAPCA",1,0)
SROAPCA ;BIR/MAM - PRINT CLINICAL DATA ;09/27/04
"RTN","SROAPCA",2,0)
 ;;3.0; Surgery ;**38,47,71,95,125,134,153,160,174**;24 Jun 93;Build 8
"RTN","SROAPCA",3,0)
 F I=0,206,207,208,200.1 S SRA(I)=$G(^SRF(SRTN,I)),$P(LN,"-",79)=""
"RTN","SROAPCA",4,0)
 S X=$P(SRA(0),"^",9),SRADATE=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROAPCA",5,0)
 W:$Y @IOF W !,?5,"VA CONTINUOUS IMPROVEMENT IN CARDIAC SURGERY PROGRAM (CICSP/CICSP-X)",!
"RTN","SROAPCA",6,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA",7,0)
 W !,"I. IDENTIFYING DATA",?60,"Case #: "_SRTN
"RTN","SROAPCA",8,0)
 N SRSPH1,SRZIP S (SRSPH1,SRZIP)=""
"RTN","SROAPCA",9,0)
 S STATNUM=+$P($$SITE^SROVAR,"^",3) D ADD^VADPT
"RTN","SROAPCA",10,0)
 W !,"Patient: "_SRANM,?60,"Fac./Div. #: "_STATNUM
"RTN","SROAPCA",11,0)
 W !,"Surgery Date: "_SRADATE,?25,"Address: "_VAPA(1)
"RTN","SROAPCA",12,0)
 S SRSPH1=VAPA(8) S:SRSPH1="" SRSPH1="NS/Unknown" S SRZIP=$S(VAPA(11)'="":$P(VAPA(11),"^",2),1:VAPA(6)) S:SRZIP="" SRZIP="NS/Unknown"
"RTN","SROAPCA",13,0)
 W !,"Phone: "_SRSPH1,?25,"Zip Code: "_SRZIP
"RTN","SROAPCA",14,0)
 S X=VADM(3) W ?53,"Date of Birth: ",$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROAPCA",15,0)
 S SRAO(1)=SRADATE,NYUK=$P(SRA(0),"^",4),SRAO(2)=$P(VADM(5),"^",2)
"RTN","SROAPCA",16,0)
 S SRAO(3)=AGE,NYUK=$P(SRA(206),"^") S:NYUK'="" NYUK=$S(NYUK["C"!(NYUK["c"):+NYUK_" cm",1:+NYUK_" in") S SRAO(4)=NYUK_"^236"
"RTN","SROAPCA",17,0)
 S NYUK=$P(SRA(206),"^",2) S:NYUK'="" NYUK=$S(NYUK["K"!(NYUK["k"):+NYUK_" kg",1:+NYUK_" lb") S SRAO(5)=NYUK_"^237"
"RTN","SROAPCA",18,0)
 S SRA(200)=$G(^SRF(SRTN,200)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROAPCA",19,0)
 S NYUK=$P(SRA(209),"^",3),SRAO(6)=$S(NYUK="N":"NO",NYUK="O":"ORAL",NYUK="D":"DIET",NYUK="I":"INSULIN",1:"")_"^475",NYUK=$P(SRA(200),"^",11) D YN S SRAO(7)=SHEMP_"^203"
"RTN","SROAPCA",20,0)
 S SRAO(8)=$P(SRA(206),"^",5)_"^347",NYUK=$P(SRA(206),"^",6) D YN S SRAO(9)=SHEMP_"^209",NYUK=$P(SRA(206),"^",7) D YN S SRAO(10)=SHEMP_"^348"
"RTN","SROAPCA",21,0)
 S Y=$P(SRA(200.1),"^",5),C=$P(^DD(130,510,0),"^",2) D Y^DIQ S SRAO(11)=$S(Y["-":$E($P(Y,"-",2),1,22),1:$E(Y,1,22))_"^510"
"RTN","SROAPCA",22,0)
 S NYUK=$P(SRA(206),"^",11) D YN S SRAO(14)=SHEMP_"^350",NYUK=$P(SRA(200),"^",8),SRAO(15)=$S(NYUK=1:"INDEPENDENT",NYUK=2:"PARTIAL DEPENDENT",NYUK=3:"TOTALLY DEPENDENT",NYUK="NS":"NS",1:"")_"^240"
"RTN","SROAPCA",23,0)
 S NYUK=$P(SRA(206),"^",13),SRAO(16)=$S(NYUK=0:"None",NYUK=1:"NONE RECENT",NYUK=2:"12-72 HRS",NYUK=3:"<12 hrs",NYUK=12:"12 - 72 hrs",NYUK=72:">72 hrs - 7 days",NYUK=7:">7 days",NYUK="NS":"NO STUDY",1:"")_"^351"
"RTN","SROAPCA",24,0)
 S NYUK=$P(SRA(206),"^",14),SRAO(17)=$S(NYUK=0:"NONE",NYUK=1:"< OR = 7 DAYS OF SURG",NYUK=2:"> 7 DAYS OF SURG",NYUK="NS":"NS",1:"")_"^205"
"RTN","SROAPCA",25,0)
 S NYUK=$P(SRA(206),"^",15) S SHEMP=$S(NYUK=0:"NONE",NYUK=">":">3",NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:NYUK) S SRAO(18)=SHEMP_"^352"
"RTN","SROAPCA",26,0)
 S NYUK=$P(SRA(206),"^",42)
"RTN","SROAPCA",27,0)
 S NYUK=$P(SRA(206),"^",16) D YN S SRAO(19)=SHEMP_"^265",NYUK=$P(SRA(206),"^",17) D YN S SRAO(20)=SHEMP_"^264"
"RTN","SROAPCA",28,0)
 S SRAO(21)=$P(SRA(206),"^",18)_"^267",SRAO(22)=$P(SRA(206),"^",19)_"^207",NYUK=$P(SRA(206),"^",20) D YN S SRAO(23)=SHEMP_"^353",NYUK=$P(SRA(206),"^",21) D YN S SRAO(24)=SHEMP_"^354"
"RTN","SROAPCA",29,0)
 S NYUK=$P(SRA(206),"^",22) D YN S SRAO(25)=SHEMP_"^355"
"RTN","SROAPCA",30,0)
 S NYUK=$P(SRA(209),"^",2),SRAO(26)=$S(NYUK="N":"NONE",NYUK="I":"IABP",NYUK="V":"VAD",NYUK="A":"ARTI",NYUK="O":"OTHER",1:NYUK)_"^474"
"RTN","SROAPCA",31,0)
 S NYUK=$P(SRA(206),"^",38) D YN S SRAO(27)=SHEMP_"^463"
"RTN","SROAPCA",32,0)
 S NYUK=$P(SRA(206),"^",10) D YN S SRAO(29)=SHEMP_"^349"
"RTN","SROAPCA",33,0)
 S NYUK=$P(SRA(208),"^",19) D YN S SRAO(30)=SHEMP_"^509"
"RTN","SROAPCA",34,0)
DISP ; display fields
"RTN","SROAPCA",35,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA",36,0)
 W !,"II. CLINICAL DATA"
"RTN","SROAPCA",37,0)
 W !,"Gender:",?26,$P(SRAO(2),"^"),?40,"Prior MI:",$J($P(SRAO(17),"^"),30)
"RTN","SROAPCA",38,0)
 W !,"Age:",?26,SRAO(3),?40,"# of prior heart surgeries:",?75,$P(SRAO(18),"^")
"RTN","SROAPCA",39,0)
 W !,"Height:",?26,$P(SRAO(4),"^"),?40,"Prior heart surgeries: " D H485
"RTN","SROAPCA",40,0)
 W !,"Weight:",?26,$P(SRAO(5),"^"),?40,"Peripheral Vascular Disease:",?75,$P(SRAO(19),"^")
"RTN","SROAPCA",41,0)
 W !,"Diabetes:",?26,$P(SRAO(6),"^"),?40,"Cerebral Vascular Disease:",?75,$P(SRAO(20),"^")
"RTN","SROAPCA",42,0)
 W !,"COPD:",?26,$P(SRAO(7),"^"),?40,"Angina (use CCS Class):",?75,$P(SRAO(21),"^")
"RTN","SROAPCA",43,0)
 W !,"FEV1:",?26,$P(SRAO(8),"^")_$S($P(SRAO(8),"^")="":"",$P(SRAO(8),"^")="NS":"",1:" liters"),?40,"CHF (use NYHA Class):",?75,$P(SRAO(22),"^")
"RTN","SROAPCA",44,0)
 W !,"Cardiomegaly (X-ray): ",?26,$P(SRAO(9),"^"),?40,"Current Diuretic Use:",?75,$P(SRAO(23),"^")
"RTN","SROAPCA",45,0)
 W !,"Pulmonary Rales:",?26,$P(SRAO(10),"^"),?40,"Current Digoxin Use:",?75,$P(SRAO(24),"^")
"RTN","SROAPCA",46,0)
 W !,"Current Smoker: ",$J($P(SRAO(11),"^"),22),?40,"IV NTG 48 Hours Preceding Surgery:",?75,$P(SRAO(25),"^")
"RTN","SROAPCA",47,0)
 W !,"Active Endocarditis:",?26,$P(SRAO(29),"^"),?40,"Preop Circulatory Device:",?74,$P(SRAO(26),"^")
"RTN","SROAPCA",48,0)
 W !,"Resting ST Depression:",?26,$P(SRAO(14),"^"),?40,"Hypertension:",?75,$P(SRAO(27),"^")
"RTN","SROAPCA",49,0)
 W !,"Functional Status: ",$J($P(SRAO(15),"^"),18),?40,"Preoperative Atrial Fibrillation:",?75,$P(SRAO(30),"^")
"RTN","SROAPCA",50,0)
 W !,"PCI: ",$J($P(SRAO(16),"^"),34)
"RTN","SROAPCA",51,0)
 K SRA,SRAO D ^SROAPCA1
"RTN","SROAPCA",52,0)
 Q
"RTN","SROAPCA",53,0)
YN ; store answer
"RTN","SROAPCA",54,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA",55,0)
 Q
"RTN","SROAPCA",56,0)
PAGE I $E(IOST)'="P" W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPCA",57,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROAPCA",58,0)
 W @IOF,!,SRANM,! F MOE=1:1:80 W "="
"RTN","SROAPCA",59,0)
 Q
"RTN","SROAPCA",60,0)
H485 S SHEMP="",X=$P(SRA(206),"^",42) F I=1:1:$L(X,",") D
"RTN","SROAPCA",61,0)
 .S C=$P(X,",",I) S:I>1 SHEMP=SHEMP_", " S SHEMP=SHEMP_$S(C=0:"None",C=1:"CABG-only",C=2:"Valve-only",C=3:"CABG/valve",C=4:"Other",C=5:"CABG/Other",1:"")
"RTN","SROAPCA",62,0)
 S X=SHEMP I $L(X)<17 W $J(X,16) Q
"RTN","SROAPCA",63,0)
 W $J($P(X,",")_",",16) I $L($P(X,", ",2,9))<40 W !,?41,$P(X,", ",2,9) Q
"RTN","SROAPCA",64,0)
 W !,?41,$P(X,", ",2,4)_",",!,?41,$P(X,", ",5,9)
"RTN","SROAPCA",65,0)
 Q
"RTN","SROAPCA1")
0^27^B29601369^B30576973
"RTN","SROAPCA1",1,0)
SROAPCA1 ;BIR/MAM - PRINT CARDIAC CATH INFO ;02/05/08
"RTN","SROAPCA1",2,0)
 ;;3.0; Surgery ;**38,63,71,88,95,125,142,153,166,174**;24 Jun 93;Build 8
"RTN","SROAPCA1",3,0)
 N SRX F I=200:1:202,206,208,209,202.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPCA1",4,0)
 I $Y+14>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",5,0)
 D LAB^SROAPCA4
"RTN","SROAPCA1",6,0)
 I $Y+16>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",7,0)
 S Y=$P(SRA(209),"^",4),SRAO(1)=$S(Y="C":"CATH",Y="I":"IVUS",Y="B":"BOTH",Y="NS":" NS",1:"")_"^476"
"RTN","SROAPCA1",8,0)
 S Y=$P(SRA(206),"^",24),SRX=357,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",9,0)
 S Y=$P(SRA(206),"^",25),SRX=358,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",10,0)
 S Y=$P(SRA(206),"^",26),SRX=359,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",11,0)
 S Y=$P(SRA(206),"^",27),SRX=360,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",12,0)
 S NYUK=$P(SRA(206),"^",30) D LV S SRAO(6)=SHEMP_"^363"
"RTN","SROAPCA1",13,0)
 S Y=$P(SRA(206),"^",9),SRX=415,SRAO(7)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",14,0)
 S Y=$P(SRA(209),"^",5),SRX=477,SRAO(8)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",15,0)
 S Y=$P(SRA(206),"^",28),SRX=361,SRAO(9)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",16,0)
 S Y=$P(SRA(206),"^",33),SRX=362.1,SRAO(10)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",17,0)
 S Y=$P(SRA(206),"^",34),SRX=362.2,SRAO(11)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",18,0)
 S Y=$P(SRA(206),"^",35),SRX=362.3,SRAO(12)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",19,0)
 S Y=$P(SRA(209),"^",6),SRX=478,SRAO(13)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",20,0)
 S Y=$P(SRA(209),"^",7),SRX=479,SRAO(14)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",21,0)
 S Y=$P(SRA(209),"^",8),SRX=480,SRAO(15)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",22,0)
 W !!,"IV. CARDIAC CATHETERIZATION AND ANGIOGRAPHIC DATA"
"RTN","SROAPCA1",23,0)
 S Y=$P($G(^SRF(SRTN,207)),"^",21) I Y>1 D DT S Y=X
"RTN","SROAPCA1",24,0)
 D NS W !,"Cardiac Catheterization Date: ",$E(Y,1,8)
"RTN","SROAPCA1",25,0)
 W !,"Procedure:",?26,$P(SRAO(1),"^"),?41,"Native Coronaries:"
"RTN","SROAPCA1",26,0)
 S SRX=$P(SRAO(2),"^") W !,"LVEDP:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",27,0)
 S SRX=$P(SRAO(9),"^") W ?41,"Left Main Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",28,0)
 S SRX=$P(SRAO(3),"^") W !,"Aortic Systolic Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",29,0)
 S SRX=$P(SRAO(10),"^") W ?41,"LAD Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",30,0)
 S SRX=$P(SRAO(11),"^") W !,?41,"Right Coronary Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",31,0)
 W !,"For patients having right heart cath:" S SRX=$P(SRAO(12),"^") W ?41,"Circumflex Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",32,0)
 ;
"RTN","SROAPCA1",33,0)
 S SRX=$P(SRAO(4),"^") W !,"PA Systolic Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",34,0)
 S SRX=$P(SRAO(5),"^") W !,"PAW Mean Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",35,0)
 W ?41,"If a Re-do, indicate stenosis",!,?44," in graft to:"
"RTN","SROAPCA1",36,0)
 S SRX=$P(SRAO(13),"^") W !,?41,"LAD:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",37,0)
 S SRX=$P(SRAO(14),"^") W !,?41,"Right coronary (include PDA): ",$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",38,0)
 S SRX=$P(SRAO(15),"^") W !,?41,"Circumflex:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",39,0)
 W !,LN
"RTN","SROAPCA1",40,0)
 W !,"LV Contraction Grade (from contrast or radionuclide angiogram or 2D Echo):",!,?7,"Grade",?17,"Ejection Fraction Range",?51,"Definition"
"RTN","SROAPCA1",41,0)
 W !,?8,$P(SRAO(6),"^")
"RTN","SROAPCA1",42,0)
 W !,LN,!,"Mitral Regurgitation:",?26,$P(SRAO(7),"^")
"RTN","SROAPCA1",43,0)
 W !,"Aortic stenosis:",?26,$P(SRAO(8),"^")
"RTN","SROAPCA1",44,0)
 I $Y+14>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",45,0)
 K SRAO S Y=$P(SRA(206),"^",31),SRX=364,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",46,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),SRX=1.13,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",47,0)
 S Y=$P(SRA(208),"^",12),SRX=414,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",48,0)
 S Y=$P(SRA(206),"^",32),SRX=364.1 D DT S SRAO("1A")=X_"^"_SRX
"RTN","SROAPCA1",49,0)
 S Y=$P(SRA(208),"^",13),SRX=414.1 D DT S SRAO("3A")=X_"^"_SRX
"RTN","SROAPCA1",50,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",2),SRX=.22 D DT S SRAO(0)=X_"^"_SRX
"RTN","SROAPCA1",51,0)
 W !!,"V. OPERATIVE RISK SUMMARY DATA"
"RTN","SROAPCA1",52,0)
 W !,?5,"Physician's Preoperative"
"RTN","SROAPCA1",53,0)
 W !,?7,"Estimate of Operative Mortality: "_$P(SRAO(1),"^") I $P(SRAO(1),"^")'=""&($P(SRAO(1),"^")'="NS") W "%"
"RTN","SROAPCA1",54,0)
 S X=$P(SRAO("1A"),"^") I X'="" W ?57,"("_X_")"
"RTN","SROAPCA1",55,0)
 W !,?5,"ASA Classification:",?35,$P(SRAO(2),"^")
"RTN","SROAPCA1",56,0)
 S X=$P(SRAO(3),"^") W !,?5,"Surgical Priority:",?($S($L(X)>10:24,1:35)),X S X=$P(SRAO("3A"),"^") I X'="" W ?57,"("_X_")"
"RTN","SROAPCA1",57,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT0 S X=Y
"RTN","SROAPCA1",58,0)
 S X=$S(X'="":X,1:"CPT Code Missing")
"RTN","SROAPCA1",59,0)
 W !,?5,"Principal CPT Code:",?35,X,!,?5,"Other Procedures CPT Codes: "
"RTN","SROAPCA1",60,0)
 S CNT=32,OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  S CPT=$P($G(^SRO(136,SRTN,3,OTH,0)),"^") D
"RTN","SROAPCA1",61,0)
 .I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2) S SRDA=OTH D SSOTH^SROCPT0 S CPT=Y
"RTN","SROAPCA1",62,0)
 .S:CPT="" CPT="NONE" S CNT=CNT+3
"RTN","SROAPCA1",63,0)
 .I CNT+$L(CPT)'>80 W:CNT>35 ";" W ?(CNT),CPT S CNT=CNT+$L(CPT) Q
"RTN","SROAPCA1",64,0)
 .W !,?35,CPT S CNT=35+$L(CPT)
"RTN","SROAPCA1",65,0)
 W !,?5,"Preoperative Risk Factors: "
"RTN","SROAPCA1",66,0)
 I $G(^SRF(SRTN,206.1))'="" S SRQ=0 S X=$G(^SRF(SRTN,206.1)) W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA1",67,0)
 .I X'[" " W ?25,X Q
"RTN","SROAPCA1",68,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:74) D  Q:SRQ
"RTN","SROAPCA1",69,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA1",70,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),!,?5 S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA1",71,0)
 I $Y+20>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",72,0)
 K SRA,SRAO D ^SROAPCA2
"RTN","SROAPCA1",73,0)
 Q
"RTN","SROAPCA1",74,0)
YN ; store answer
"RTN","SROAPCA1",75,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA1",76,0)
 Q
"RTN","SROAPCA1",77,0)
DT I 'Y S X="" Q
"RTN","SROAPCA1",78,0)
 S Z=$E($P(Y,".",2),1,4),Z=Z_"0000",Z=$E(Z,1,4),X=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)_" "_$E(Z,1,2)_":"_$E(Z,3,4)
"RTN","SROAPCA1",79,0)
 Q
"RTN","SROAPCA1",80,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPCA1",81,0)
 N C,Y
"RTN","SROAPCA1",82,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPCA1",83,0)
 I Y="NO STUDY" S Y="NS" Q Y
"RTN","SROAPCA1",84,0)
 Q Y
"RTN","SROAPCA1",85,0)
MMHG I SRX="NO STUDY"!(SRX="NS") Q
"RTN","SROAPCA1",86,0)
 W " mm Hg"
"RTN","SROAPCA1",87,0)
 Q
"RTN","SROAPCA1",88,0)
NS S Y=$S(Y="NS":"NO STUDY",1:Y)
"RTN","SROAPCA1",89,0)
 Q
"RTN","SROAPCA1",90,0)
LV K SHEMP S SHEMP=$S(NYUK="I":" I          > or = 0.55                    NORMAL",NYUK="II":"II             0.45-0.54                   MILD DYSFUNCTION",1:NYUK)
"RTN","SROAPCA1",91,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="III":"III           0.35-0.44                    MODERATE DYSFUNCTION",1:NYUK)
"RTN","SROAPCA1",92,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IIIa":"IIIa          0.40-0.44                    MODERATE DYSFUNCTION A",1:NYUK)
"RTN","SROAPCA1",93,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IIIb":"IIIb          0.35-0.39                    MODERATE DYSFUNCTION B",1:NYUK)
"RTN","SROAPCA1",94,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IV":"IV            0.25-0.34                    SEVERE DYSFUNCTION",NYUK="V":" V             <0.25                       VERY SEVERE DYSFUNCTION",NYUK="NS":"NO LV STUDY",1:"")
"RTN","SROAPCA1",95,0)
 Q
"RTN","SROAPCA2")
0^44^B18386426^B19366840
"RTN","SROAPCA2",1,0)
SROAPCA2 ;BIR/MAM - PRINT OPERATIVE DATA ;06/28/06
"RTN","SROAPCA2",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153,174**;24 Jun 93;Build 8
"RTN","SROAPCA2",3,0)
 S SRA(206)=$G(^SRF(SRTN,206)),SRA(207)=$G(^SRF(SRTN,207)),SRA(209)=$G(^SRF(SRTN,209)),SRA(207.1)=$G(^SRF(SRTN,207.1))
"RTN","SROAPCA2",4,0)
 S SRAO(1)=$P(SRA(207),"^")_"^365"
"RTN","SROAPCA2",5,0)
 S SRAO(2)=$P(SRA(207),"^",2)_"^366"
"RTN","SROAPCA2",6,0)
 S SRAO(3)=$P(SRA(207),"^",24)_"^464"
"RTN","SROAPCA2",7,0)
 S SRAO(4)=$P(SRA(207),"^",25)_"^465"
"RTN","SROAPCA2",8,0)
 S SRAO(5)=$P(SRA(207),"^",20)_"^416"
"RTN","SROAPCA2",9,0)
 S NYUK=$P(SRA(207),"^",3) D VL^SROACR1 S SRAO(6)=SHEMP_"^367"
"RTN","SROAPCA2",10,0)
 S NYUK=$P(SRA(207),"^",4) D VL^SROACR1 S SRAO(7)=SHEMP_"^368"
"RTN","SROAPCA2",11,0)
 S NYUK=$P(SRA(207),"^",5) D VL^SROACR1 S SRAO(8)=SHEMP_"^369"
"RTN","SROAPCA2",12,0)
 S NYUK=$P(SRA(207),"^",28) D VL^SROACR1 S SRAO(9)=SHEMP_"^493"
"RTN","SROAPCA2",13,0)
 S NYUK=$P(SRA(207),"^",7) D YN S SRAO(10)=SHEMP_"^371"
"RTN","SROAPCA2",14,0)
 S NYUK=$P(SRA(209),"^",9) D YN S SRAO(11)=SHEMP_"^481"
"RTN","SROAPCA2",15,0)
 S NYUK=$P(SRA(209),"^",11) D YN S SRAO(12)=SHEMP_"^483"
"RTN","SROAPCA2",16,0)
 S NYUK=$P(SRA(209),"^",14) S SHEMP=$S(NYUK="F":"FULL MAZE",NYUK="N":"NO MAZE PERFORMED",NYUK="M":"MINI MAZE",1:"") S SRAO(13)=SHEMP_"^512"
"RTN","SROAPCA2",17,0)
 S NYUK=$P(SRA(207),"^",12) D YN S SRAO(14)=SHEMP_"^376"
"RTN","SROAPCA2",18,0)
 S NYUK=$P(SRA(207),"^",13) D YN S SRAO(15)=SHEMP_"^380"
"RTN","SROAPCA2",19,0)
 S NYUK=$P(SRA(207),"^",16) D YN S SRAO(16)=SHEMP_"^378"
"RTN","SROAPCA2",20,0)
 S NYUK=$P(SRA(207),"^",14) D YN S SRAO(17)=SHEMP_"^377"
"RTN","SROAPCA2",21,0)
 S NYUK=$P(SRA(207),"^",18) D YN S SRAO(18)=SHEMP_"^379"
"RTN","SROAPCA2",22,0)
 S NYUK=$P(SRA(207),"^",9) D YN S SRAO(19)=SHEMP_"^373"
"RTN","SROAPCA2",23,0)
 S NYUK=$P($G(^SRF(SRTN,209.1)),"^") S SRAO(20)=$S(NYUK="NS":"NS",1:NYUK)_"^484"
"RTN","SROAPCA2",24,0)
 S NYUK=$P(SRA(207),"^",8) D YN S SRAO(21)=SHEMP_"^372"
"RTN","SROAPCA2",25,0)
 S NYUK=$P(SRA(207.1),"^",2) D YN S SRAO("21H")=SHEMP_"^505"
"RTN","SROAPCA2",26,0)
 S NYUK=$P(SRA(207),"^",15) D YN S SRAO(22)=SHEMP_"^381"
"RTN","SROAPCA2",27,0)
 S NYUK=$P(SRA(207),"^",17) D YN S SRAO(23)=SHEMP_"^382"
"RTN","SROAPCA2",28,0)
 S SRAO(24)=$P(SRA(206),"^",37)_"^451"
"RTN","SROAPCA2",29,0)
 S SRAO(25)=$P(SRA(206),"^",36)_"^450"
"RTN","SROAPCA2",30,0)
 S Y=$P(SRA(207),"^",26),C=$P(^DD(130,468,0),"^",2) D:Y'="" Y^DIQ S SRAO(26)=Y_"^468"
"RTN","SROAPCA2",31,0)
 S Y=$P(SRA(207),"^",27),C=$P(^DD(130,469,0),"^",2) D:Y'="" Y^DIQ S SRAO(27)=Y_"^469"
"RTN","SROAPCA2",32,0)
 S NYUK=$P(SRA(209),"^",13) D YN S SRAO(29)=SHEMP_"^502"
"RTN","SROAPCA2",33,0)
 W !!,"VI. OPERATIVE DATA"
"RTN","SROAPCA2",34,0)
 W !,"Cardiac surgical procedures with or without cardiopulmonary bypass",!,"CABG distal anastomoses:",?40,"Maze procedure:",?61,$J($P(SRAO(13),"^"),17)
"RTN","SROAPCA2",35,0)
 W !,?2,"Number with Vein:",?33,$P(SRAO(1),"^"),?40,"ASD repair:",?75,$P(SRAO(14),"^")
"RTN","SROAPCA2",36,0)
 W !,?2,"Number with IMA:",?33,$P(SRAO(2),"^"),?40,"VSD repair:",?75,$P(SRAO(15),"^")
"RTN","SROAPCA2",37,0)
 W !,?2,"Number with Radial Artery:",?33,$P(SRAO(3),"^"),?40,"Myectomy for IHSS:",?75,$P(SRAO(16),"^")
"RTN","SROAPCA2",38,0)
 W !,?2,"Number with Other Artery:",?33,$P(SRAO(4),"^"),?40,"Myxoma resection:",?75,$P(SRAO(17),"^")
"RTN","SROAPCA2",39,0)
 W !,?2,"Number with Other Conduit:",?33,$P(SRAO(5),"^"),?40,"Other tumor resection:",?75,$P(SRAO(18),"^")
"RTN","SROAPCA2",40,0)
 W !,"LV Aneurysmectomy:",?33,$P(SRAO(10),"^"),?40,"Cardiac transplant:",?75,$P(SRAO(19),"^")
"RTN","SROAPCA2",41,0)
 W !,"Bridge to transplant/Device:",?33,$P(SRAO(11),"^"),?40,"Great Vessel Repair:",?75,$P(SRAO(21),"^")
"RTN","SROAPCA2",42,0)
 W !,"TMR:",?33,$P(SRAO(12),"^"),?40,"Endovascular Repair:",?75,$P(SRAO("21H"),"^")
"RTN","SROAPCA2",43,0)
 W !,?40,"Other Cardiac procedure(s):",?75,$P(SRAO(29),"^")
"RTN","SROAPCA2",44,0)
 W !,"Aortic Valve Procedure:",?33,$P(SRAO(6),"^")
"RTN","SROAPCA2",45,0)
 W !,"Mitral Valve Procedure:",?33,$P(SRAO(7),"^")
"RTN","SROAPCA2",46,0)
 W !,"Tricuspid Valve Procedure:",?33,$P(SRAO(8),"^")
"RTN","SROAPCA2",47,0)
 W !,"Pulmonary Valve Procedure:",?33,$P(SRAO(9),"^")
"RTN","SROAPCA2",48,0)
 W !,"* Other Cardiac procedures (Specify): " I $P(SRAO(20),"^")'="" S SRQ=0 S X=$P(SRAO(20),"^") W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA2",49,0)
 .I X'[" " W ?29,X Q
"RTN","SROAPCA2",50,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROAPCA2",51,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA2",52,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA2",53,0)
 W !!,"Indicate other cardiac procedures only if done with cardiopulmonary bypass"
"RTN","SROAPCA2",54,0)
 W !,"Foreign body removal:",?33,$P(SRAO(22),"^")
"RTN","SROAPCA2",55,0)
 W !,"Pericardiectomy:",?33,$P(SRAO(23),"^")
"RTN","SROAPCA2",56,0)
 W !!,"Other Operative Data details"
"RTN","SROAPCA2",57,0)
 W !,"Total CPB Time: ",?20,$P(SRAO(24),"^")_" min",?42,"Total Ischemic Time: ",$P(SRAO(25),"^")_" min"
"RTN","SROAPCA2",58,0)
 W !,"Incision Type: ",?25,$P(SRAO(26),"^")
"RTN","SROAPCA2",59,0)
 W !,"Conversion Off Pump to CPB: ",$P(SRAO(27),"^")
"RTN","SROAPCA2",60,0)
 I $Y+6>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA2",61,0)
 K SRA,SRAO D ^SROAPCA3
"RTN","SROAPCA2",62,0)
 Q
"RTN","SROAPCA2",63,0)
YN ; store answer
"RTN","SROAPCA2",64,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA2",65,0)
 Q
"RTN","SROAPCA3")
0^28^B22852862^B22548966
"RTN","SROAPCA3",1,0)
SROAPCA3 ;BIR/MAM - CARDIAC OCCURRENCE DATA ;02/05/08
"RTN","SROAPCA3",2,0)
 ;;3.0; Surgery ;**38,71,95,101,125,160,164,166,174**;24 Jun 93;Build 8
"RTN","SROAPCA3",3,0)
 D EN^SROCCAT K SRA S SRA(205)=$G(^SRF(SRTN,205)),SRA(208)=$G(^SRF(SRTN,208)),SRA(206)=$G(^SRF(SRTN,206)),SRA(209)=$G(^SRF(SRTN,209))
"RTN","SROAPCA3",4,0)
 S NYUK=$P(SRA(208),"^") D YN S SRAO(1)=SHEMP_"^384"
"RTN","SROAPCA3",5,0)
 S Y=$P($G(^DPT(DFN,.35)),"^") D DT^SROAPCA1 S SRAO(2)=X
"RTN","SROAPCA3",6,0)
 S NYUK=$P(SRA(208),"^",2) D YN S SRAO(3)=SHEMP_"^385",NYUK=$P(SRA(208),"^",3) D YN S SRAO(4)=SHEMP_"^386",NYUK=$P(SRA(205),"^",17) D YN S SRAO(5)=SHEMP_"^254",NYUK=$P(SRA(209),"^",12) D YN S SRAO(6)=SHEMP_"^490"
"RTN","SROAPCA3",7,0)
 S NYUK=$P(SRA(208),"^",5) D YN S SRAO(7)=SHEMP_"^388",NYUK=$P(SRA(208),"^",6) D YN S SRAO(8)=SHEMP_"^389",NYUK=$P(SRA(205),"^",13) D YN S SRAO(9)=SHEMP_"^285"
"RTN","SROAPCA3",8,0)
 S NYUK=$P(SRA(208),"^",7) D YN S SRAO(10)=SHEMP_"^391",NYUK=$P(SRA(205),"^",22) D YN S SRAO(11)=SHEMP_"^410"
"RTN","SROAPCA3",9,0)
 S NYUK=$P(SRA(205),"^",21) D YN S SRAO(12)=SHEMP_"^256",NYUK=$P(SRA(205),"^",26) D YN S SRAO(13)=SHEMP_"^411"
"RTN","SROAPCA3",10,0)
 S NYUK=$P(SRA(206),"^",39) D YN S SRAO(14)=SHEMP_"^466"
"RTN","SROAPCA3",11,0)
 S NYUK=$P(SRA(206),"^",40) D YN S SRAO(15)=SHEMP_"^467"
"RTN","SROAPCA3",12,0)
 S NYUK=$P(SRA(205),"^",40) D YN S SRAO(16)=SHEMP_"^448"
"RTN","SROAPCA3",13,0)
  I $Y+5>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",14,0)
 W !!,"VII. OUTCOMES"
"RTN","SROAPCA3",15,0)
 W !,"Operative Death:",?18,$P(SRAO(1),"^"),?43,"Date of Death:",?58,$P(SRAO(2),"^")
"RTN","SROAPCA3",16,0)
 ;I $Y+10>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",17,0)
 W !!,"Perioperative (30 day) Occurrences:"
"RTN","SROAPCA3",18,0)
 W !,?2,"Perioperative MI:",?36,$P(SRAO(3),"^"),?42,"Repeat cardiac Surg procedure:",?74,$P(SRAO(10),"^")
"RTN","SROAPCA3",19,0)
 W !,?2,"Endocarditis:",?36,$P(SRAO(4),"^"),?42,"Tracheostomy:",?74,$P(SRAO(14),"^")
"RTN","SROAPCA3",20,0)
 W !,?2,"Renal Failure Requiring Dialysis:",?36,$P(SRAO(5),"^"),?42,"Ventilator supp within 30 days:",?74,$P(SRAO(6),"^")
"RTN","SROAPCA3",21,0)
 W !,?2,"Mediastinitis:",?36,$P(SRAO(7),"^"),?42,"Stroke/CVA:",?74,$P(SRAO(12),"^")
"RTN","SROAPCA3",22,0)
 W !,?2,"Cardiac Arrest Requiring CPR:",?36,$P(SRAO(13),"^"),?42,"Coma > or = 24 Hours:",?74,$P(SRAO(11),"^")
"RTN","SROAPCA3",23,0)
 W !,?2,"Reoperation for Bleeding:",?36,$P(SRAO(8),"^"),?42,"New Mech Circulatory Support:",?74,$P(SRAO(15),"^")
"RTN","SROAPCA3",24,0)
 W !,?2,"On ventilator > or = 48 hr:",?36,$P(SRAO(9),"^"),?42,"Postop Atrial Fibrillation:",?74,$P(SRAO(16),"^")
"RTN","SROAPCA3",25,0)
 D RES
"RTN","SROAPCA3",26,0)
 Q
"RTN","SROAPCA3",27,0)
YN ; store answer
"RTN","SROAPCA3",28,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA3",29,0)
 Q
"RTN","SROAPCA3",30,0)
 ;
"RTN","SROAPCA3",31,0)
RES I $Y+12>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",32,0)
 S SRA(208)=$G(^SRF(SRTN,208))
"RTN","SROAPCA3",33,0)
 S SRA(.2)=$G(^SRF(SRTN,.2))
"RTN","SROAPCA3",34,0)
 W !!,"VIII. RESOURCE DATA"
"RTN","SROAPCA3",35,0)
 S Y=$P(SRA(208),"^",14) D DT^SROAPCA1 W !,"Hospital Admission Date:",?25,X
"RTN","SROAPCA3",36,0)
 S Y=$P(SRA(208),"^",15) D DT^SROAPCA1 W !,"Hospital Discharge Date:",?25,X
"RTN","SROAPCA3",37,0)
 S Y=$P(SRA(.2),"^",10) D DT^SROAPCA1 W !,"Time Patient In  OR: ",?25,X
"RTN","SROAPCA3",38,0)
 S Y=$P(SRA(.2),"^",2) D DT^SROAPCA1 W ?45,"Operation Began: "_X
"RTN","SROAPCA3",39,0)
 S Y=$P(SRA(.2),"^",3) D DT^SROAPCA1 W !,"Operation Ended: ",?25,X
"RTN","SROAPCA3",40,0)
 S Y=$P(SRA(.2),"^",12) D DT^SROAPCA1 W ?45,"Time Patient Out OR: ",X
"RTN","SROAPCA3",41,0)
 S Y=$P(SRA(208),"^",22) I Y>1 D DT^SROAPCA1 S Y=X
"RTN","SROAPCA3",42,0)
 S Y=$S(Y="NS":"Unable to determine",Y="RI":"Remains intubated at 30 days",1:Y) W !,"Date and Time Patient Extubated: ",?47,Y
"RTN","SROAPCA3",43,0)
 I $P(SRA(208),"^",22)>1,$P(SRA(.2),"^",12) D
"RTN","SROAPCA3",44,0)
 .S X=$$FMDIFF^XLFDT($P(SRA(208),"^",22),$P(SRA(.2),"^",12),2) W !,?5,"Postop Intubation Hrs: "_$FN((X/3600),"+",1)
"RTN","SROAPCA3",45,0)
 S Y=$P(SRA(208),"^",23) I Y>1 D DT^SROAPCA1 S Y=X
"RTN","SROAPCA3",46,0)
 S Y=$S(Y="NS":"Unable to determine",Y="RI":"Remains in ICU at 30 days",1:Y) W !,"Date and Time Patient Discharged from ICU: ",?47,Y
"RTN","SROAPCA3",47,0)
 S Y=$P(SRA(209),"^") W !,"Patient is Homeless: ",?47,$S(Y="Y":"YES",Y="N":"NO",Y="NS":"NS",1:"")
"RTN","SROAPCA3",48,0)
 S Y=$P(SRA(206),"^",41) W !,"Cardiac Surg Performed at Non-VA Facility: ",?47,$S(Y="Y":"YES",Y="N":"NO",Y="NS":"UNKNOWN",1:"")
"RTN","SROAPCA3",49,0)
 W !,"Resource Data Comments: "
"RTN","SROAPCA3",50,0)
 I $G(^SRF(SRTN,206.2))'="" S SRQ=0 S X=$G(^SRF(SRTN,206.2)) W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA3",51,0)
 .I X'[" " W ?25,X Q
"RTN","SROAPCA3",52,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:74) D  Q:SRQ
"RTN","SROAPCA3",53,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA3",54,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),!,?5 S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA3",55,0)
 I $Y+7>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",56,0)
 W ! F MOE=1:1:80 W "="
"RTN","SROAPCA3",57,0)
 W !,"IX. SOCIOECONOMIC, ETHNICITY, AND RACE"
"RTN","SROAPCA3",58,0)
 N SREMP S SREMP=$P(SRA(208),"^",18) S SREMP=$S(SREMP=1:"EMPLOYED FULL TIME",SREMP=2:"EMPLOYED PART TIME",SREMP=3:"NOT EMPLOYED",SREMP=4:"SELF EMPLOYED",SREMP=5:"RETIRED",SREMP=6:"ACTIVE MILITARY DUTY",SREMP=9:"UNKNOWN",1:" ")
"RTN","SROAPCA3",59,0)
 W !,?1,"Employment Status Preoperatively: ",?40,SREMP
"RTN","SROAPCA3",60,0)
 K SRA,SRAO
"RTN","SROAPCA3",61,0)
 ; Race/Ethnic
"RTN","SROAPCA3",62,0)
 D ENTH^SRORACE
"RTN","SROAPCA3",63,0)
 I $Y+7>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA3",64,0)
 D ^SROAPCA4
"RTN","SROAPCA3",65,0)
 W !!," *** End of report for "_SRANM_" assessment #"_SRTN_" ***"
"RTN","SROAPCA3",66,0)
 I $E(IOST)'="P" W ! K DIR S DIR(0)="E" D ^DIR K DIR
"RTN","SROAPCA3",67,0)
 Q
"RTN","SROAPCA4")
0^29^B15348981^B14863488
"RTN","SROAPCA4",1,0)
SROAPCA4 ;BIR/SJA - CARDIAC COMPLIANCE DATA ;07/05/06
"RTN","SROAPCA4",2,0)
 ;;3.0; Surgery ;**95,125,153,174**;24 Jun 93;Build 8
"RTN","SROAPCA4",3,0)
 ;
"RTN","SROAPCA4",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROAPCA4",5,0)
 ; Reference to File #405 supported by DBIA #3029
"RTN","SROAPCA4",6,0)
 ; Reference to Field #27.02 in File #2 supported by DBIA #1850
"RTN","SROAPCA4",7,0)
 ;
"RTN","SROAPCA4",8,0)
 S SRA(201)=$G(^SRF(SRTN,201)),SRA(202)=$G(^SRF(SRTN,202)),SRA(208)=$G(^SRF(SRTN,208)),SRA(0)=$G(^SRF(SRTN,0)),SRA(202.1)=$G(^SRF(SRTN,202.1))
"RTN","SROAPCA4",9,0)
 N SRPREF,SRREF,SRREFP,SRFOL,SRFOLP,SRSOUT,SRY S (SRPREF,SRREF,SRREFP,SRFOL,SRFOLP)="",SRSOUT=0,(VAIP("D"),SRSDATE)=$P(SRA(0),"^",9) D IN5^VADPT
"RTN","SROAPCA4",10,0)
 I 'VAIP(13) S X1=$P($G(^SRF(SRTN,.2)),"^",12),X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRSDATE)) G:'SRDT!(SRDT>SR24) TS S VAIP("D")=SRDT D IN5^VADPT
"RTN","SROAPCA4",11,0)
TS I VAIP(13) K DA,DIC,DIQ,DR S DIC=405,DR=.05,DA=VAIP(13),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRREF=SRY(405,VAIP(13),.05,"E"),SRREFP=SRY(405,VAIP(13),.05,"I") I SRREFP S SRREFP=$$GET1^DIQ(4,SRREFP,99)
"RTN","SROAPCA4",12,0)
 I VAIP(17) K DA,DIC,DIQ,DR,SRY S DIC=405,DR=.05,DA=VAIP(17),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRFOL=SRY(405,VAIP(17),.05,"E"),SRFOLP=SRY(405,VAIP(17),.05,"I") I SRFOLP S SRFOLP=$$GET1^DIQ(4,SRFOLP,99)
"RTN","SROAPCA4",13,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^DPT(",DIQ="SRY",DIQ(0)="I",DA=DFN,DR=27.02 D EN^DIQ1 S X=$G(SRY(2,DFN,27.02,"I")) I X S SRPREF=$$GET1^DIQ(4,X,99)
"RTN","SROAPCA4",14,0)
 I $Y+7>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA4",15,0)
 D DD
"RTN","SROAPCA4",16,0)
 Q
"RTN","SROAPCA4",17,0)
LAB ;D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA4",18,0)
 W !!,"III. DETAILED LABORATORY INFO - PREOPERATIVE VALUES"
"RTN","SROAPCA4",19,0)
 N SROUN S SROUN=" mg/dl"
"RTN","SROAPCA4",20,0)
 W !,"Creatinine:",?14,$J($P(SRA(201),U,4),4),SROUN S Y=$P(SRA(202),"^",4) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",21,0)
 W ?41,"T. Cholesterol:",?57,$J($P(SRA(201),U,26),4),SROUN S Y=$P(SRA(202),"^",26) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",22,0)
 W !,"Hemoglobin:",?14,$J($P(SRA(201),U,20),4),SROUN S Y=$P(SRA(202),"^",20) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",23,0)
 W ?41,"HDL:",?57,$J($P(SRA(201),U,21),4),SROUN S Y=$P(SRA(202),"^",22) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",24,0)
 W !,"Albumin:",?14,$J($P(SRA(201),U,8),4)," g/dl" S Y=$P(SRA(202),"^",8) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",25,0)
 W ?41,"LDL:",?57,$J($P(SRA(201),U,25),4),SROUN S Y=$P(SRA(202),"^",25) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",26,0)
 W !,"Triglyceride:",?14,$J($P(SRA(201),U,22),4),SROUN S Y=$P(SRA(202),"^",22) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",27,0)
 W ?41,"Hemoglobin A1c:",?57,$J($P(SRA(201),U,28),4)," %" S Y=$P(SRA(202.1),"^") D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",28,0)
 W !,"Potassium:",?14,$J($P(SRA(201),U,23),4)," mg/L" S Y=$P(SRA(202),"^",23) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",29,0)
 W ?41,"BNP:",?57,$J($P(SRA(201),U,29),4),SROUN S Y=$P(SRA(202.1),"^",2) D DT W ?68,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",30,0)
 W !,"T. Bilirubin:",?14,$J($P(SRA(201),U,24),4),SROUN S Y=$P(SRA(202),"^",24) D DT W ?25,"("_$E(X,1,8)_")"
"RTN","SROAPCA4",31,0)
 Q
"RTN","SROAPCA4",32,0)
DD ;Detailed Discharge Information
"RTN","SROAPCA4",33,0)
 N VAINDT,SRPTF,SRRES
"RTN","SROAPCA4",34,0)
 S X=$P(SRA(208),"^",15) I X S X=X-.0001
"RTN","SROAPCA4",35,0)
 S VAINDT=X D INP^VADPT S SRPTF=VAIN(10)
"RTN","SROAPCA4",36,0)
 S SRRES="" D RPC^DGPTFAPI(.SRRES,SRPTF)
"RTN","SROAPCA4",37,0)
 I $Y+9>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA4",38,0)
 W !!,"X. DETAILED DISCHARGE INFORMATION",!,"   Discharge ICD-9 Codes: " I $G(SRRES(0))>0 S SRRES="" D
"RTN","SROAPCA4",39,0)
 .S SRRES=$P(SRRES(1),U,3)_"  " I $D(SRRES(2)) F I=1:1:9 S:$P(SRRES(2),"^",I)'="" SRRES=SRRES_$P(SRRES(2),"^",I)_"  " I $L(SRRES)>45 W SRRES S SRRES=""
"RTN","SROAPCA4",40,0)
 .W:$D(SRRES) !,?26,SRRES
"RTN","SROAPCA4",41,0)
 W !!,"Type of Disposition: ",$P($G(SRRES(1)),U,1)
"RTN","SROAPCA4",42,0)
 W !,"Place of Disposition: ",$P($G(SRRES(1)),U,2)
"RTN","SROAPCA4",43,0)
 W !,"Preferred VAMC identification code: ",SRPREF
"RTN","SROAPCA4",44,0)
 W !,"Primary care or referral VAMC identification code: ",SRREFP
"RTN","SROAPCA4",45,0)
 W !,"Follow-up VAMC identification code: ",SRFOLP
"RTN","SROAPCA4",46,0)
 Q
"RTN","SROAPCA4",47,0)
YN ; store answer
"RTN","SROAPCA4",48,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA4",49,0)
 Q
"RTN","SROAPCA4",50,0)
DT S X="NS" I Y>1 D DT^SROAPCA1
"RTN","SROAPCA4",51,0)
 Q
"RTN","SROAPM")
0^52^B44670342^B46797280
"RTN","SROAPM",1,0)
SROAPM ;BIR/ADM - PATIENT DEMOGRAPHIC INFO ;05/28/10
"RTN","SROAPM",2,0)
 ;;3.0; Surgery ;**47,81,111,107,100,125,142,160,166,174**;24 Jun 93;Build 8
"RTN","SROAPM",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAPM",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAPM",5,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROAPM",6,0)
 S DIR("A",1)="Enter/Edit Patient Demographic Information",DIR("A",2)=" ",DIR("A",3)="1. Capture Information from PIMS Records",DIR("A",4)="2. Enter, Edit, or Review Information",DIR("A",5)=" "
"RTN","SROAPM",7,0)
 S DIR("?",1)="Enter '1' if you want to capture patient movement information from PIMS",DIR("?",2)="records.  Enter '2' if you want to enter, edit, or review patient",DIR("?")="movement and other information on this screen."
"RTN","SROAPM",8,0)
 S DIR("A")="Select Number",DIR(0)="NO^1:2" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAPM",9,0)
 I Y=1 D PIMS G START
"RTN","SROAPM",10,0)
EDIT S SRR=0 D HDR^SROAUTL K DR S SRQ=0,(DR,SRDR)="413;452;453;454;418;419;420;421;247;.011"
"RTN","SROAPM",11,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAPM",12,0)
 K SRZ S SRZ=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROAPM",13,0)
 .D TR,GET
"RTN","SROAPM",14,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROAPM",15,0)
 .W !,$S($L(SRZ)<2:" "_SRZ,1:SRZ)_". "_$P(Z,"^")_":" D EXT
"RTN","SROAPM",16,0)
 ;
"RTN","SROAPM",17,0)
 D DEM^VADPT
"RTN","SROAPM",18,0)
 ;Find patient's ethnicity and list it on the display
"RTN","SROAPM",19,0)
 W !,"11. Patient's Ethnicity:" S SRZ(11)="" D
"RTN","SROAPM",20,0)
 .I $G(VADM(11)) W ?40,$P(VADM(11,1),U,2)
"RTN","SROAPM",21,0)
 .I '$G(VADM(11)) W ?40,"UNANSWERED"
"RTN","SROAPM",22,0)
 ;
"RTN","SROAPM",23,0)
 ;Find all race entries and place into a string with commas inbetween
"RTN","SROAPM",24,0)
 S SRORC=0,C=1,SRORACE="",SROLINE="",N=1,SROL=""
"RTN","SROAPM",25,0)
 F  S SRORC=$O(VADM(12,SRORC)) Q:SRORC=""  Q:C=11  D
"RTN","SROAPM",26,0)
 .I $G(VADM(12,SRORC)) S SRORACE(C)=$P(VADM(12,SRORC),U,2)
"RTN","SROAPM",27,0)
 .I SROLINE'="" S SROLINE=SROLINE_", "_SRORACE(C)
"RTN","SROAPM",28,0)
 .I SROLINE="" S SROLINE=SRORACE(C)
"RTN","SROAPM",29,0)
 .S C=C+1
"RTN","SROAPM",30,0)
 ;
"RTN","SROAPM",31,0)
 ;Find total length of 'race' string and wrap the text if necessary
"RTN","SROAPM",32,0)
 I $L(SROLINE)=40!$L(SROLINE)<40 S SROL(N)=SROLINE,SRNUM1=2
"RTN","SROAPM",33,0)
 I $L(SROLINE)>40 D WRAP
"RTN","SROAPM",34,0)
 ;
"RTN","SROAPM",35,0)
 W !,"12. Patient's Race:" S SRZ(12)=""
"RTN","SROAPM",36,0)
 I $G(VADM(12)) F D=1:1:SRNUM1-1 D
"RTN","SROAPM",37,0)
 .W:D=1 ?40,SROL(D)
"RTN","SROAPM",38,0)
 .W:D'=1 !,?40,SROL(D)
"RTN","SROAPM",39,0)
 ;
"RTN","SROAPM",40,0)
 I '$G(VADM(12)) W ?40,"UNANSWERED"
"RTN","SROAPM",41,0)
 ;
"RTN","SROAPM",42,0)
 K DA,DIC,DIQ,DR,SRY S (DR,SRDR)=342,DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAPM",43,0)
 S SRZ=12 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROAPM",44,0)
 .D TR,GET
"RTN","SROAPM",45,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROAPM",46,0)
 .W !,$S($L(SRZ)<2:" "_SRZ,1:SRZ)_". "_$P(Z,"^")_":" D EXT
"RTN","SROAPM",47,0)
 K SROL,SROLINE,SRORC,SRORACE,SROLN,SROLN1,SROWRAP,SRNUM1
"RTN","SROAPM",48,0)
 ;
"RTN","SROAPM",49,0)
 W !! F K=1:1:80 W "-"
"RTN","SROAPM",50,0)
 D SEL G:SRR=1 EDIT
"RTN","SROAPM",51,0)
 S SROERR=SRTN D ^SROERR0
"RTN","SROAPM",52,0)
 G START
"RTN","SROAPM",53,0)
 Q
"RTN","SROAPM",54,0)
 ;
"RTN","SROAPM",55,0)
WRAP ;Wrap multiple race entries so that wrapped line
"RTN","SROAPM",56,0)
 ;does not break in the middle of a word
"RTN","SROAPM",57,0)
 ;
"RTN","SROAPM",58,0)
 N SROLNGTH S SROLNGTH=$L(SROLINE),E=40,SROWRAP="",SROLN="",SROLN1="",SROL=""
"RTN","SROAPM",59,0)
 F I=1:40:SROLNGTH S SROLN(I)=SROWRAP_$E(SROLINE,I,E) D
"RTN","SROAPM",60,0)
 .F K=40:-1:1 I $E(SROLN(I),K)[" " D  Q    ;Break lines at space
"RTN","SROAPM",61,0)
 ..S SROLN1(I)=$E(SROLN(I),1,K-1)
"RTN","SROAPM",62,0)
 ..S SROWRAP=$E(SROLN(I),K+1,E)
"RTN","SROAPM",63,0)
 .S E=E+40
"RTN","SROAPM",64,0)
 ;
"RTN","SROAPM",65,0)
 S:'$D(SROLN1(I)) SROLN1(I)=SROLN(I),SROWRAP=""
"RTN","SROAPM",66,0)
 I $L(SROLN1(I))+$L(SROWRAP)>39 S SROLN1(I+1)=SROWRAP   ;Last line 
"RTN","SROAPM",67,0)
 I $L(SROLN1(I))+$L(SROWRAP)'>39 S SROLN1(I)=SROLN1(I)_" "_SROWRAP
"RTN","SROAPM",68,0)
 ;
"RTN","SROAPM",69,0)
 ;Renumber the SROLN1 array to be in numeric order
"RTN","SROAPM",70,0)
 S SRNUM=0,SRNUM1=1
"RTN","SROAPM",71,0)
 F  S SRNUM=$O(SROLN1(SRNUM)) Q:SRNUM=""  D
"RTN","SROAPM",72,0)
 .S SROL(SRNUM1)=SROLN1(SRNUM)
"RTN","SROAPM",73,0)
 .S SRNUM1=SRNUM1+1
"RTN","SROAPM",74,0)
 Q
"RTN","SROAPM",75,0)
 ;
"RTN","SROAPM",76,0)
EXT I $L(SREXT)<40 W ?40,SREXT W:SRFLD=247 $S(SREXT="":"",SREXT=1:" Day",SREXT=0:" Days",SREXT>1:" Days",1:"") Q
"RTN","SROAPM",77,0)
 N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<40!(X'[" ") W ?40,X Q
"RTN","SROAPM",78,0)
 .F I=0:1:38 S J=39-I,Y=$E(X,J) I Y=" " W ?40,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROAPM",79,0)
 Q
"RTN","SROAPM",80,0)
SEL W !!,"Select Patient Demographics Information to Edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPM",81,0)
 I (X=11)!(X=12) S SRR=1 W !!,"The Patient's Race and Ethnicity information cannot be updated through the" D  Q
"RTN","SROAPM",82,0)
 .W !,"Surgery package options."
"RTN","SROAPM",83,0)
 .W !!,"Press RETURN to continue " R X:DTIME
"RTN","SROAPM",84,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRZ(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROAPM",85,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRZ)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROAPM",86,0)
 I X="A" S X="1:"_SRZ
"RTN","SROAPM",87,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SROAPM",88,0)
 I $D(SRZ(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROAPM",89,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",90,0)
 Q
"RTN","SROAPM",91,0)
PIMS ; get update from PIMS records
"RTN","SROAPM",92,0)
 W ! K DIR S DIR("A")="Are you sure you want to retrieve information from PIMS records ? ",DIR("B")="YES",DIR(0)="YOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROAPM",93,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",94,0)
 .W ! D WAIT^DICD D ^SROAPIMS
"RTN","SROAPM",95,0)
 Q
"RTN","SROAPM",96,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below.",!!,"NOTE: Items 11 and 12 cannot be updated through the surgery package options."
"RTN","SROAPM",97,0)
 W !!,"1. Enter 'A' to update items 1 through 10 and item 13.",!!,"2. Enter a number (1-"_SRZ_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRZ(1),"^")_")"
"RTN","SROAPM",98,0)
 W !!,"3. Enter a range of numbers (1-"_SRZ_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SROAPM",99,0)
 I $D(SRFLG) W !,"4. Enter 'N' or 'NO' to enter negative response for all items.",!!,"5. Enter '@' to delete information from all items.",!
"RTN","SROAPM",100,0)
PRESS W ! K DIR S DIR("A")="Press the return key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPM",101,0)
 Q
"RTN","SROAPM",102,0)
RANGE ; range of numbers
"RTN","SROAPM",103,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",104,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) D
"RTN","SROAPM",105,0)
 ..I SHEMP<13 F EMILY=SHEMP:1:10,13 Q:SRSOUT  D ONE
"RTN","SROAPM",106,0)
 ..I SHEMP=13 S EMILY=SHEMP Q:SRSOUT  D ONE
"RTN","SROAPM",107,0)
 Q
"RTN","SROAPM",108,0)
ONE ; edit one item
"RTN","SROAPM",109,0)
 K DR,DA,DIE S DR=$P(SRZ(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRZ(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROAPM",110,0)
 Q
"RTN","SROAPM",111,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROAPM",112,0)
 Q
"RTN","SROAPM",113,0)
GET S X=$T(@J)
"RTN","SROAPM",114,0)
 Q
"RTN","SROAPM",115,0)
END W @IOF D ^SRSKILL
"RTN","SROAPM",116,0)
 Q
"RTN","SROAPM",117,0)
PJAA ;;.011^In/Out-Patient Status
"RTN","SROAPM",118,0)
BDG ;;247^Length of Postop Hospital Stay
"RTN","SROAPM",119,0)
CDB ;;342^Date of Death
"RTN","SROAPM",120,0)
DAC ;;413^Transfer Status
"RTN","SROAPM",121,0)
DAG ;;417^Patient's Race
"RTN","SROAPM",122,0)
DAH ;;418^Hospital Admission Date/Time
"RTN","SROAPM",123,0)
DAI ;;419^Hospital Discharge Date/Time
"RTN","SROAPM",124,0)
DBJ ;;420^Admit/Transfer to Surgical Svc.
"RTN","SROAPM",125,0)
DBA ;;421^Discharge/Transfer to Chronic Care
"RTN","SROAPM",126,0)
DEB ;;452^Observation Admission Date/Time
"RTN","SROAPM",127,0)
DEC ;;453^Observation Discharge Date/Time
"RTN","SROAPM",128,0)
DED ;;454^Observation Treating Specialty
"RTN","SROAPRE")
0^59^B16062002^B18131652
"RTN","SROAPRE",1,0)
SROAPRE ;BIR/MAM - PREOPERATIVE INFO ;10/04/10
"RTN","SROAPRE",2,0)
 ;;3.0; Surgery ;**38,47,55,88,100,125,142,166,174**;24 Jun 93;Build 8
"RTN","SROAPRE",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAPRE",4,0)
 S (SRSOUT,SRACLR)=0,SRSUPCPT=1 D ^SROAUTL,DUP^SROAUTL G:SRSOUT END
"RTN","SROAPRE",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROAPS1
"RTN","SROAPRE",6,0)
ASK W !,"Select Preoperative Information to Edit: " R X:DTIME I '$T!(X["^") D CONCC G END
"RTN","SROAPRE",7,0)
 S:X="" X="+1" S:X="a" X="A" S:X="n" X="N"
"RTN","SROAPRE",8,0)
 I $L(X)=2,'$D(SRAO(X)),X?1N1A S Z=$E(X,2),Z=$TR(Z,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ") I $D(SRAO($E(X)_Z)) S X=$E(X)_Z
"RTN","SROAPRE",9,0)
 I '$D(SRAO(X)),(X'?.N1":".N),(X'="A"),(X'="N"),(X'="+1") D HELP G:SRSOUT END G START
"RTN","SROAPRE",10,0)
 I X="+1" D CONCC,^SROAPR2 G START
"RTN","SROAPRE",11,0)
 I X="A" S X="1:6"
"RTN","SROAPRE",12,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>6)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAPRE",13,0)
 I X="N" D  G:SRSOUT END G START
"RTN","SROAPRE",14,0)
 .W ! K DIR S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set all fields on this page to NO"
"RTN","SROAPRE",15,0)
 .D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE",16,0)
 .I Y D NO2ALL^SROAPRE1
"RTN","SROAPRE",17,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAPRE",18,0)
 I X?.N1":".N D RANGE G START
"RTN","SROAPRE",19,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROAPRE",20,0)
 .I $$LOCK^SROUTL(SRTN) W ! D:EMILY<4 ^SROAPRE1 D:EMILY>3 ^SROAPR1A D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",21,0)
 I $D(SRAO(X)),$$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",22,0)
 .S SRX=X W ! K DR,DIE S DA=SRTN,DR=$P(SRAO(X),"^",2)_"T",DIE=130 D ^DIE K DR
"RTN","SROAPRE",23,0)
 G START
"RTN","SROAPRE",24,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROAPRE",25,0)
 Q
"RTN","SROAPRE",26,0)
HELP W @IOF,!!!!,"Enter the number, number/letter combination, or range of numbers you want to",!,"edit.  Examples of proper responses are listed below."
"RTN","SROAPRE",27,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter 'N' to set all fields on this page to NO."
"RTN","SROAPRE",28,0)
 W !!,"3. Enter a number (1-6) to update the information in that group.  (For",!,"   example, enter '5' to update all cardiac information)"
"RTN","SROAPRE",29,0)
 W !!,"4. Enter a number/letter combination to update a specific occurrence. (To ",!,"   update Current Pneumonia, enter '2C'.)"
"RTN","SROAPRE",30,0)
 W !!,"5. Enter a range of numbers (1-6) separated by a ':' to enter a range of",!,"   occurrences.  (For example, enter '2:4' to enter all pulmonary,",!,"   hepatobiliary, and gastrointestinal information)"
"RTN","SROAPRE",31,0)
 W !!,"6. Press <RET> to continue to page 2 of this option."
"RTN","SROAPRE",32,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAPRE",33,0)
 Q
"RTN","SROAPRE",34,0)
RANGE ; range of numbers
"RTN","SROAPRE",35,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",36,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) W:SHEMP<9 ! F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D:EMILY<4 ^SROAPRE1 D:EMILY>3 ^SROAPR1A
"RTN","SROAPRE",37,0)
 Q
"RTN","SROAPRE",38,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPRE",39,0)
 Q
"RTN","SROAPRE",40,0)
CONCC ; check for concurrent case and update if one exists
"RTN","SROAPRE",41,0)
 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") Q:'SRCON
"RTN","SROAPRE",42,0)
 Q:$P($G(^SRF(SRCON,"RA")),"^",2)="C"
"RTN","SROAPRE",43,0)
 S SRI="" F  S SRI=$O(SRAO(SRI)) Q:SRI=""  S SRZ=$P(SRAO(SRI),"^",2) K DA,DIC,DIQ,DR,SRY D
"RTN","SROAPRE",44,0)
 .S DA=SRTN,DR=SRZ,DIC="^SRF(",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S SRX=SRY(130,SRTN,SRZ,"I") S:SRX="" SRX="@"
"RTN","SROAPRE",45,0)
 .I $$LOCK^SROUTL(SRTN) K DA,DIE,DR S DA=SRCON,DIE=130,DR=SRZ_"////"_SRX D ^DIE K DR D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",46,0)
 Q
"RTN","SROAPRE1")
0^48^B10006731^B9700130
"RTN","SROAPRE1",1,0)
SROAPRE1 ;BIR/MAM - EDIT PAGE 1 PREOP ;05/28/10
"RTN","SROAPRE1",2,0)
 ;;3.0; Surgery ;**38,47,125,135,141,166,174**;24 Jun 93;Build 8
"RTN","SROAPRE1",3,0)
 K DA D @EMILY Q
"RTN","SROAPRE1",4,0)
1 ; edit general information
"RTN","SROAPRE1",5,0)
 W ! K DIR S X=$P(SRAO(1),"^") I X'="" S DIR("B")=X
"RTN","SROAPRE1",6,0)
 S DIR(0)="130,402",DIR("A")="GENERAL" D ^DIR K DIR I $D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE1",7,0)
 I X="@" S SRCAT="General" D SURE Q:SRSOUT  G:'SRYN 1 S (SRAX,X)="",$P(^SRF(SRTN,200),"^")="" D NOGEN Q
"RTN","SROAPRE1",8,0)
 S SRAX=Y,$P(^SRF(SRTN,200),"^")=SRAX I Y["N" D NOGEN Q
"RTN","SROAPRE1",9,0)
 I Y["Y" D GEN
"RTN","SROAPRE1",10,0)
 Q
"RTN","SROAPRE1",11,0)
2 ; edit pulmonary information
"RTN","SROAPRE1",12,0)
 W ! K DIR S X=$P(SRAO(2),"^") I X'="" S DIR("B")=X
"RTN","SROAPRE1",13,0)
 S DIR(0)="130,241",DIR("A")="PULMONARY" D ^DIR K DIR I $D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE1",14,0)
 I X="@" S SRCAT="Pulmonary" D SURE Q:SRSOUT  G:'SRYN 2 S (SRAX,X)="",$P(^SRF(SRTN,200),"^",9)="" D NOPULM Q
"RTN","SROAPRE1",15,0)
 S SRAX=Y,$P(^SRF(SRTN,200),"^",9)=SRAX I Y["N" D NOPULM Q
"RTN","SROAPRE1",16,0)
 I Y["Y" D PULM
"RTN","SROAPRE1",17,0)
 Q
"RTN","SROAPRE1",18,0)
3 ; edit hepatobiliary information
"RTN","SROAPRE1",19,0)
 W ! K DIR S X=$P(SRAO(3),"^") I X'="" S DIR("B")=X
"RTN","SROAPRE1",20,0)
 S DIR(0)="130,244",DIR("A")="HEPATOBILIARY" D ^DIR K DIR I $D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE1",21,0)
 I X="@" S SRCAT="Hepatobiliary" D SURE Q:SRSOUT  G:'SRYN 3 S (SRAX,X)="",$P(^SRF(SRTN,200),"^",13)="" D NOHEP Q
"RTN","SROAPRE1",22,0)
 S SRAX=Y,$P(^SRF(SRTN,200),"^",13)=SRAX I Y["N" D NOHEP Q
"RTN","SROAPRE1",23,0)
 I Y["Y" D HEP
"RTN","SROAPRE1",24,0)
 Q
"RTN","SROAPRE1",25,0)
GEN ; general
"RTN","SROAPRE1",26,0)
 N SRUP S SRUP=""
"RTN","SROAPRE1",27,0)
 W ! K DR,DIE S DA=SRTN,DIE=130,DR="236T;237T;346T;202T;246T;325T;237.1T;238T" D ^DIE K DIE,DR I $D(Y) Q
"RTN","SROAPRE1",28,0)
 K DIR S DA=SRTN,DIR(0)="130,492",DIR("A")="Functional Health Status at Evaluation for Surgery" D ^DIR K DIR D
"RTN","SROAPRE1",29,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROAPRE1",30,0)
 .I X="@" K DIE,DR S DIE=130,DR="492///@" D ^DIE K DA,DIE,DR Q
"RTN","SROAPRE1",31,0)
 .K DIE,DR S DIE=130,DR="492////"_Y D ^DIE K DA,DIE,DR
"RTN","SROAPRE1",32,0)
 S SRACLR=0
"RTN","SROAPRE1",33,0)
 Q
"RTN","SROAPRE1",34,0)
NOGEN ; no general problems
"RTN","SROAPRE1",35,0)
 S $P(^SRF(SRTN,200),"^",6)=$S(X="":"",1:1) F I=2,3,4,7 S $P(^SRF(SRTN,200),"^",I)=SRAX
"RTN","SROAPRE1",36,0)
 S $P(^SRF(SRTN,200.1),"^",2)=$S(X="":"",X="NS":"NS",1:1)
"RTN","SROAPRE1",37,0)
 S $P(^SRF(SRTN,200.1),"^",8)=$S(X="":"",X="NS":"NS",1:1)
"RTN","SROAPRE1",38,0)
 Q
"RTN","SROAPRE1",39,0)
PULM ; pulmonary
"RTN","SROAPRE1",40,0)
 W ! K DR,DIE S DA=SRTN,DIE=130,DR="204T;203T;326T" D ^DIE K DR
"RTN","SROAPRE1",41,0)
 S SRACLR=0
"RTN","SROAPRE1",42,0)
 Q
"RTN","SROAPRE1",43,0)
NOPULM ; no pulmonary problems
"RTN","SROAPRE1",44,0)
 F I=10:1:12 S $P(^SRF(SRTN,200),"^",I)=SRAX
"RTN","SROAPRE1",45,0)
 Q
"RTN","SROAPRE1",46,0)
HEP ; hepatobiliary
"RTN","SROAPRE1",47,0)
 K DR,DIE S DIE=130,DA=SRTN,DR="212////Y" D ^DIE K DR
"RTN","SROAPRE1",48,0)
 S SRACLR=0
"RTN","SROAPRE1",49,0)
 Q
"RTN","SROAPRE1",50,0)
NOHEP ; no hepatobiliary problems
"RTN","SROAPRE1",51,0)
 S $P(^SRF(SRTN,200),"^",15)=SRAX
"RTN","SROAPRE1",52,0)
 Q
"RTN","SROAPRE1",53,0)
RET W !! K DIR S DIR(0)="E" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPRE1",54,0)
 Q
"RTN","SROAPRE1",55,0)
SURE W ! K DIR S DIR("A")="   Sure you want to delete all "_SRCAT_" information ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR S SRYN=Y I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPRE1",56,0)
 Q
"RTN","SROAPRE1",57,0)
NO2ALL ; set all fields to NO
"RTN","SROAPRE1",58,0)
 S SRAX="N",$P(^SRF(SRTN,200),"^")=SRAX D NOGEN
"RTN","SROAPRE1",59,0)
 S $P(^SRF(SRTN,200),"^",9)=SRAX D NOPULM
"RTN","SROAPRE1",60,0)
 S $P(^SRF(SRTN,200),"^",13)=SRAX D NOHEP
"RTN","SROAPRE1",61,0)
 S $P(^SRF(SRTN,200.1),"^")=SRAX D NOGAST^SROAPR1A
"RTN","SROAPRE1",62,0)
 S $P(^SRF(SRTN,200),"^",30)=SRAX D NOCARD^SROAPR1A
"RTN","SROAPRE1",63,0)
 S $P(^SRF(SRTN,200),"^",40)=SRAX D NOVAS^SROAPR1A
"RTN","SROAPRE1",64,0)
 Q
"RTN","SROAPRT1")
0^49^B14081364^B13596603
"RTN","SROAPRT1",1,0)
SROAPRT1 ;BIR/MAM - PREOP INFO (PAGE 1) ;05/28/10
"RTN","SROAPRT1",2,0)
 ;;3.0; Surgery ;**38,47,125,153,166,174**;24 Jun 93;Build 8
"RTN","SROAPRT1",3,0)
 N SRX,Y F I=200,200.1,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPRT1",4,0)
 S Y=$P(SRA(200),"^"),SRX=402,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",5,0)
 S Y=$P(SRA(206),"^"),SRX=236,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",6,0)
 S Y=$P(SRA(206),"^",2),SRX=237,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",7,0)
 S Y=$P(SRA(200),"^",2),SRX=346,SRAO("1C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",8,0)
 S Y=$P(SRA(200),"^",3),SRX=202,SRAO("1D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",9,0)
 S Y=$P(SRA(200),"^",4),SRX=246,SRAO("1E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",10,0)
 S Y=$P(SRA(200),"^",6),SRX=325,SRAO("1F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",11,0)
 S Y=$P(SRA(200.1),"^",8),SRX=237.1,SRAO("1G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",12,0)
 S Y=$P(SRA(200),"^",7),SRX=238,SRAO("1H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",13,0)
 S Y=$P(SRA(200.1),"^",2),SRX=492,SRAO("1I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",14,0)
 S Y=$P(SRA(200),"^",9),SRX=241,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",15,0)
 S Y=$P(SRA(200),"^",10),SRX=204,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",16,0)
 S Y=$P(SRA(200),"^",11),SRX=203,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",17,0)
 S Y=$P(SRA(200),"^",12),SRX=326,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",18,0)
 S Y=$P(SRA(200),"^",13),SRX=244,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",19,0)
 S Y=$P(SRA(200),"^",15),SRX=212,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",20,0)
 S Y=$P(SRA(200.1),"^"),SRX=486,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",21,0)
 S Y=$P(SRA(200),"^",16),SRX=213,SRAO("4A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",22,0)
 S Y=$P(SRA(200),"^",30),SRX=242,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",23,0)
 S Y=$P(SRA(200),"^",35),SRX=396,SRAO("5A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",24,0)
 S Y=$P(SRA(200),"^",31),SRX=394,SRAO("5B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",25,0)
 S Y=$P(SRA(200),"^",32),SRX=220,SRAO("5C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",26,0)
 S Y=$P(SRA(200),"^",33),SRX=266,SRAO("5D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",27,0)
 S Y=$P(SRA(200),"^",34),SRX=395,SRAO("5E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",28,0)
 S Y=$P(SRA(200),"^",36),SRX=208,SRAO("5F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",29,0)
 S Y=$P(SRA(200),"^",40),SRX=206,SRAO(6)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",30,0)
 S Y=$P(SRA(200),"^",41),SRX=329,SRAO("6A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",31,0)
 S Y=$P(SRA(200),"^",42),SRX=330,SRAO("6B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPRT1",32,0)
 W:$E(IOST)="P" ! W !,?28,"PREOPERATIVE INFORMATION",!!
"RTN","SROAPRT1",33,0)
 W "GENERAL:",?31,$P(SRAO(1),"^"),?40,"HEPATOBILIARY:",?72,$P(SRAO(3),"^")
"RTN","SROAPRT1",34,0)
 W !,"Height: ",?22,$J($P(SRAO("1A"),"^"),15),?40,"Ascites:",?72,$P(SRAO("3A"),"^")
"RTN","SROAPRT1",35,0)
 W !,"Weight:",?22,$J($P(SRAO("1B"),"^"),15)
"RTN","SROAPRT1",36,0)
 W !,"Diabetes Mellitus:",?31,$P(SRAO("1C"),"^"),?40,"GASTROINTESTINAL:",?72,$P(SRAO(4),"^")
"RTN","SROAPRT1",37,0)
 W !,"Current Smoker W/I 1 Year:",?31,$P(SRAO("1D"),"^"),?40,"Esophageal Varices:",?72,$P(SRAO("4A"),"^")
"RTN","SROAPRT1",38,0)
 W !,"ETOH > 2 Drinks/Day:",?31,$P(SRAO("1E"),"^")
"RTN","SROAPRT1",39,0)
 W !,"Dyspnea: ",?13,$J($P(SRAO("1F"),"^"),25),?40,"CARDIAC:",?72,$P(SRAO(5),"^")
"RTN","SROAPRT1",40,0)
 W !,"Preop Sleep Apnea:",?30,$P(SRAO("1G"),"^"),?40,"CHF Within 1 Month:",?72,$P(SRAO("5A"),"^")
"RTN","SROAPRT1",41,0)
 W !,"DNR Status: ",?31,$P(SRAO("1H"),"^"),?40,"MI Within 6 Months:",?72,$P(SRAO("5B"),"^")
"RTN","SROAPRT1",42,0)
 W !,"Preop Funct Status: ",$J($P(SRAO("1I"),"^"),17),?40,"Previous PCI:",?72,$P(SRAO("5C"),"^")
"RTN","SROAPRT1",43,0)
 W !,?40,"Previous Cardiac Surgery:",?72,$P(SRAO("5D"),"^")
"RTN","SROAPRT1",44,0)
 W !,"PULMONARY:",?31,$P(SRAO(2),"^"),?40,"Angina Within 1 Month:",?72,$P(SRAO("5E"),"^")
"RTN","SROAPRT1",45,0)
 W !,"Ventilator Dependent:",?31,$P(SRAO("2A"),"^"),?40,"Hypertension Requiring Meds:",?72,$P(SRAO("5F"),"^")
"RTN","SROAPRT1",46,0)
 W !,"History of Severe COPD:",?31,$P(SRAO("2B"),"^")
"RTN","SROAPRT1",47,0)
 W !,"Current Pneumonia:",?31,$P(SRAO("2C"),"^"),?40,"VASCULAR:",?72,$P(SRAO(6),"^")
"RTN","SROAPRT1",48,0)
 W !,?40,"Revascularization/Amputation:",?72,$P(SRAO("6A"),"^")
"RTN","SROAPRT1",49,0)
 W !,?40,"Rest Pain/Gangrene:",?72,$P(SRAO("6B"),"^")
"RTN","SROAPRT1",50,0)
 Q
"RTN","SROAPRT1",51,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPRT1",52,0)
 N C,Y
"RTN","SROAPRT1",53,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPRT1",54,0)
 I Y="NO STUDY" S Y="NS"
"RTN","SROAPRT1",55,0)
 I SRFLD=237.1 S Y=$E(Y,1,7)
"RTN","SROAPRT1",56,0)
 I SRFLD=236!(SRFLD=237)!(SRFLD=346) S Y=$E(Y,1,15)
"RTN","SROAPRT1",57,0)
 I SRFLD=240!(SRFLD=492) D
"RTN","SROAPRT1",58,0)
 .I SRY=2 S Y="PARTIAL DEPENDENT" Q
"RTN","SROAPRT1",59,0)
 .I SRY=4 S Y=Y_"  "
"RTN","SROAPRT1",60,0)
 I SRFLD=325,$L(Y)=2 S Y=Y_"     "
"RTN","SROAPRT1",61,0)
 Q Y
"RTN","SROAPS1")
0^47^B23960917^B23125324
"RTN","SROAPS1",1,0)
SROAPS1 ;BIR/MAM - PREOP INFO (PAGE 1) ;05/28/10
"RTN","SROAPS1",2,0)
 ;;3.0; Surgery ;**38,47,125,153,166,174**;24 Jun 93;Build 8
"RTN","SROAPS1",3,0)
 ;
"RTN","SROAPS1",4,0)
 ; Reference to EN1^GMRVUT0 supported by DBIA #1446
"RTN","SROAPS1",5,0)
 ;
"RTN","SROAPS1",6,0)
 N I S SRPAGE="PAGE: 1 OF 2" D HDR^SROAUTL,PRE1
"RTN","SROAPS1",7,0)
 W ! F I=1:1:80 W "-"
"RTN","SROAPS1",8,0)
 Q
"RTN","SROAPS1",9,0)
PRE1 N SRX,Y D HW F I=200,200.1,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPS1",10,0)
 S Y=$P(SRA(200),"^"),SRX=402,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",11,0)
 S Y=$P(SRA(206),"^"),SRX=236,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",12,0)
 S Y=$P(SRA(206),"^",2),SRX=237,SRAO("1B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",13,0)
 S Y=$P(SRA(200),"^",2),SRX=346,SRAO("1C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",14,0)
 S Y=$P(SRA(200),"^",3),SRX=202,SRAO("1D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",15,0)
 S Y=$P(SRA(200),"^",4),SRX=246,SRAO("1E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",16,0)
 S Y=$P(SRA(200),"^",6),SRX=325,SRAO("1F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",17,0)
 S Y=$P(SRA(200.1),"^",8),SRX=237.1,SRAO("1G")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",18,0)
 S Y=$P(SRA(200),"^",7),SRX=238,SRAO("1H")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",19,0)
 S Y=$P(SRA(200.1),"^",2),SRX=492,SRAO("1I")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",20,0)
 S Y=$P(SRA(200),"^",9),SRX=241,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",21,0)
 S Y=$P(SRA(200),"^",10),SRX=204,SRAO("2A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",22,0)
 S Y=$P(SRA(200),"^",11),SRX=203,SRAO("2B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",23,0)
 S Y=$P(SRA(200),"^",12),SRX=326,SRAO("2C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",24,0)
 S Y=$P(SRA(200),"^",13),SRX=244,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",25,0)
 S Y=$P(SRA(200),"^",15),SRX=212,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",26,0)
 S Y=$P(SRA(200.1),"^"),SRX=486,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",27,0)
 S Y=$P(SRA(200),"^",16),SRX=213,SRAO("4A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",28,0)
 S Y=$P(SRA(200),"^",30),SRX=242,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",29,0)
 S Y=$P(SRA(200),"^",35),SRX=396,SRAO("5A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",30,0)
 S Y=$P(SRA(200),"^",31),SRX=394,SRAO("5B")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",31,0)
 S Y=$P(SRA(200),"^",32),SRX=220,SRAO("5C")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",32,0)
 S Y=$P(SRA(200),"^",33),SRX=266,SRAO("5D")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",33,0)
 S Y=$P(SRA(200),"^",34),SRX=395,SRAO("5E")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",34,0)
 S Y=$P(SRA(200),"^",36),SRX=208,SRAO("5F")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",35,0)
 S Y=$P(SRA(200),"^",40),SRX=206,SRAO(6)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",36,0)
 S Y=$P(SRA(200),"^",41),SRX=329,SRAO("6A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPS1",37,0)
 S Y=$P(SRA(200),"^",42),SRX=330,SRAO("6B")=$$OUT(SRX,Y)_"^"_SRX K SRA
"RTN","SROAPS1",38,0)
 W "1. GENERAL:",?32,$P(SRAO(1),"^"),?41,"3. HEPATOBILIARY:",?76,$P(SRAO(3),"^")
"RTN","SROAPS1",39,0)
 W !,"  A. Height:" S Y=$P(SRAO("1A"),"^") W:Y'="NS" ?14,$J($P(Y,"^"),25) W:Y="NS" ?32,Y
"RTN","SROAPS1",40,0)
 W ?43,"A. Ascites:",?76,$P(SRAO("3A"),"^")
"RTN","SROAPS1",41,0)
 W !,"  B. Weight:" S Y=$P(SRAO("1B"),"^") W ?($S(Y="NS":19,1:24)),$J(Y,15)
"RTN","SROAPS1",42,0)
 W !,"  C. Diabetes Mellitus:",?32,$P(SRAO("1C"),"^"),?41,"4. GASTROINTESTINAL:",?76,$P(SRAO(4),"^")
"RTN","SROAPS1",43,0)
 W !,"  D. Current Smoker W/I 1 Year:",?32,$P(SRAO("1D"),"^"),?43,"A. Esophageal Varices:",?76,$P(SRAO("4A"),"^")
"RTN","SROAPS1",44,0)
 W !,"  E. ETOH > 2 Drinks/Day:",?32,$P(SRAO("1E"),"^")
"RTN","SROAPS1",45,0)
 W !,"  F. Dyspnea: ",?14,$J($P(SRAO("1F"),"^"),25),?41,"5. CARDIAC:",?76,$P(SRAO(5),"^")
"RTN","SROAPS1",46,0)
 W !,"  G. Preop Sleep Apnea:",?31,$P(SRAO("1G"),"^"),?43,"A. CHF Within 1 Month:",?76,$P(SRAO("5A"),"^")
"RTN","SROAPS1",47,0)
 W !,"  H. DNR Status: ",?32,$P(SRAO("1H"),"^"),?43,"B. MI Within 6 Months:",?76,$P(SRAO("5B"),"^")
"RTN","SROAPS1",48,0)
 W !,"  I. Preop Funct Status: ",$J($P(SRAO("1I"),"^"),17),?43,"C. Previous PCI:",?76,$P(SRAO("5C"),"^")
"RTN","SROAPS1",49,0)
 W !,?43,"D. Previous Cardiac Surgery:",?76,$P(SRAO("5D"),"^")
"RTN","SROAPS1",50,0)
 W !,"2. PULMONARY:",?32,$P(SRAO(2),"^"),?43,"E. Angina Within 1 Month:",?76,$P(SRAO("5E"),"^")
"RTN","SROAPS1",51,0)
 W !,"  A. Ventilator Dependent:",?32,$P(SRAO("2A"),"^"),?43,"F. Hypertension Requiring Meds:",?76,$P(SRAO("5F"),"^")
"RTN","SROAPS1",52,0)
 W !,"  B. History of Severe COPD:",?32,$P(SRAO("2B"),"^")
"RTN","SROAPS1",53,0)
 W !,"  C. Current Pneumonia:",?32,$P(SRAO("2C"),"^"),?41,"6. VASCULAR:",?76,$P(SRAO(6),"^")
"RTN","SROAPS1",54,0)
 W !,?43,"A. Revascularization/Amputation:",?76,$P(SRAO("6A"),"^")
"RTN","SROAPS1",55,0)
 W !,?43,"B. Rest Pain/Gangrene:",?76,$P(SRAO("6B"),"^")
"RTN","SROAPS1",56,0)
 Q
"RTN","SROAPS1",57,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPS1",58,0)
 N C,Y,Z
"RTN","SROAPS1",59,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPS1",60,0)
 I Y="NO STUDY" S Y="NS"
"RTN","SROAPS1",61,0)
 I SRFLD=237.1 S Y=$E(Y,1,7)
"RTN","SROAPS1",62,0)
 I SRFLD=237!(SRFLD=346) S Y=$E(Y,1,15)
"RTN","SROAPS1",63,0)
 I SRFLD=236 S Z=$P($G(^SRF(SRTN,200.1)),"^",7) I Z'="" S Y="("_$E(Z,4,5)_"/"_$E(Z,6,7)_"/"_$E(Z,2,3)_")  "_Y
"RTN","SROAPS1",64,0)
 I SRFLD=492 D
"RTN","SROAPS1",65,0)
 .I SRY=2 S Y="PARTIAL DEPENDENT" Q
"RTN","SROAPS1",66,0)
 .I SRY=1 S Y=Y_"    " Q
"RTN","SROAPS1",67,0)
 .I SRY=4 S Y=Y_"      "
"RTN","SROAPS1",68,0)
 I SRFLD=325,$L(Y)=2 S Y=Y_"     "
"RTN","SROAPS1",69,0)
 Q Y
"RTN","SROAPS1",70,0)
HW ; get weight & height from Vitals
"RTN","SROAPS1",71,0)
 N SREND,SREQ,SREX,SREY,SRSTRT
"RTN","SROAPS1",72,0)
WT I $P($G(^SRF(SRTN,206)),"^",2)="" D
"RTN","SROAPS1",73,0)
 .S SREND=$P($G(^SRF(SRTN,0)),"^",9),SRSTRT=$$FMADD^XLFDT(SREND,-30),SREX=$$HW^SROACL1(SRSTRT,SREND,"WT")
"RTN","SROAPS1",74,0)
 .I SREX'="" S SREX=SREX+.5\1 D CHK^DIE(130,237,"E",SREX,.SREY) I SREY'="^" S $P(^SRF(SRTN,206),"^",2)=SREY
"RTN","SROAPS1",75,0)
HT I $P($G(^SRF(SRTN,206)),"^")'="" Q
"RTN","SROAPS1",76,0)
 N GMRVSTR,SRBRDT,SRBIEN,SRBDATA,SRHTDT
"RTN","SROAPS1",77,0)
 K ^UTILITY($J,"GMRVD"),RESULTS S SREND=$P($G(^SRF(SRTN,0)),"^",9),GMRVSTR="HT",GMRVSTR(0)="^"_SREND_"^^0"
"RTN","SROAPS1",78,0)
 D EN1^GMRVUT0 Q:'$D(^UTILITY($J,"GMRVD"))
"RTN","SROAPS1",79,0)
 S SRBRDT="",SRBRDT=$O(^UTILITY($J,"GMRVD","HT",SRBRDT)) Q:'SRBRDT  D
"RTN","SROAPS1",80,0)
 .S SRBIEN=0 F  S SRBIEN=$O(^UTILITY($J,"GMRVD","HT",SRBRDT,SRBIEN)) Q:'SRBIEN  D
"RTN","SROAPS1",81,0)
 ..S SRBDATA=$G(^UTILITY($J,"GMRVD","HT",SRBRDT,SRBIEN)),SREX=$P(SRBDATA,"^",8)
"RTN","SROAPS1",82,0)
 ..I SREX'="" S SREX=SREX+.5\1 D CHK^DIE(130,236,"E",SREX,.SREY) I SREY'="^" D
"RTN","SROAPS1",83,0)
 ...S $P(^SRF(SRTN,206),"^")=SREY
"RTN","SROAPS1",84,0)
 ...S SRHTDT=$P(SRBDATA,"^") I SRHTDT'="" S $P(^SRF(SRTN,200.1),"^",7)=SRHTDT
"RTN","SROAPS1",85,0)
 Q
"RTN","SROATCM")
0^32^B25541535^B25329729
"RTN","SROATCM",1,0)
SROATCM ;BIR/MAM - TRANSMIT CARDIAC ASSESSMENTS ;03/02/06
"RTN","SROATCM",2,0)
 ;;3.0; Surgery ;**38,55,68,90,93,95,99,125,153,174**;24 Jun 93;Build 8
"RTN","SROATCM",3,0)
 ;
"RTN","SROATCM",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROATCM",5,0)
 ; Reference to File #405 supported by DBIA #3029
"RTN","SROATCM",6,0)
 ; Reference to Field #27.02 in File #2 supported by DBIA #1850
"RTN","SROATCM",7,0)
 ;
"RTN","SROATCM",8,0)
 K ^TMP("SRA",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATCM",9,0)
 S SRADFN=0 F  S SRADFN=$O(^SRF("ARS","C","C",SRADFN)) Q:'SRADFN  S SRTN=0 F  S SRTN=$O(^SRF("ARS","C","C",SRADFN,SRTN)) Q:'SRTN  D STUFF
"RTN","SROATCM",10,0)
 S SRATOTM=SRAMNUM D ^SROATCM2
"RTN","SROATCM",11,0)
 Q
"RTN","SROATCM",12,0)
STUFF ; stuff entries into ^TMP("SRA",$J
"RTN","SROATCM",13,0)
 ; check for fouled up ARS x ref
"RTN","SROATCM",14,0)
 I $P(^SRF(SRTN,"RA"),"^",2)="N" K ^SRF("ARS","C","C",SRADFN,SRTN) K DR S DIE=130,DR="235///C",DA=SRTN D ^DIE K DR Q
"RTN","SROATCM",15,0)
 ; the next line is commented out to allow re-transmissions
"RTN","SROATCM",16,0)
 ;S SRART=$P(^SRF(SRTN,"RA"),"^",3) I SRART S DIE=130,DR="235///T",DA=SRTN D ^DIE K DR,DA,DIE Q
"RTN","SROATCM",17,0)
 I $P(^SRF(SRTN,"RA"),"^",2)'="C" Q
"RTN","SROATCM",18,0)
 I SRACNT>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATCM",19,0)
 S SRATOT=SRATOT+1 K SRA,VADM
"RTN","SROATCM",20,0)
 F I=0,200,205:1:208 S SRA(I)=$G(SRF(SRTN,I))
"RTN","SROATCM",21,0)
 D ^SROATCM1,P93
"RTN","SROATCM",22,0)
 K SHEMP,SRA,VADM,VAPA
"RTN","SROATCM",23,0)
 S X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATCM",24,0)
 Q
"RTN","SROATCM",25,0)
P93 ; referring & follow-up sites, patient address & phone number
"RTN","SROATCM",26,0)
 N SRPREF,SRREF,SRREFP,SRFOL,SRFOLP,SRSOUT,SRY S (SRPREF,SRREF,SRREFP,SRFOL,SRFOLP)="",SRSOUT=0,(VAIP("D"),SRSDATE)=$P(SRA(0),"^",9) D IN5^VADPT
"RTN","SROATCM",27,0)
 ; if not admitted before surgery, look for admission within 24 hours of leaving OR
"RTN","SROATCM",28,0)
 I 'VAIP(13) S X1=$P($G(^SRF(SRTN,.2)),"^",12),X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRSDATE)) G:'SRDT!(SRDT>SR24) TS S VAIP("D")=SRDT D IN5^VADPT
"RTN","SROATCM",29,0)
TS I VAIP(13) K DA,DIC,DIQ,DR S DIC=405,DR=.05,DA=VAIP(13),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRREF=SRY(405,VAIP(13),.05,"E"),SRREFP=SRY(405,VAIP(13),.05,"I") I SRREFP S SRREFP=$$GET1^DIQ(4,SRREFP,99)
"RTN","SROATCM",30,0)
 I VAIP(17) K DA,DIC,DIQ,DR,SRY S DIC=405,DR=.05,DA=VAIP(17),DIQ="SRY",DIQ(0)="IE" D EN^DIQ1 S SRFOL=SRY(405,VAIP(17),.05,"E"),SRFOLP=SRY(405,VAIP(17),.05,"I") I SRFOLP S SRFOLP=$$GET1^DIQ(4,SRFOLP,99)
"RTN","SROATCM",31,0)
 S SHEMP=$E(SHEMP,1,11)_" 18"_$J(VAPA(1),35)_$J(VAPA(2),30),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",32,0)
 S SHEMP=$E(SHEMP,1,11)_" 19"_$J(VAPA(3),30)_$J(VAPA(4),15)
"RTN","SROATCM",33,0)
 K DA,DIC,DIQ,DR,SRY S X=$P(VAPA(5),"^") I X S DIC=5,DA=X,DR=1,DIQ="SRY",DIQ(0)="E" D EN^DIQ1 S X=SRY(5,$P(VAPA(5),"^"),1,"E")
"RTN","SROATCM",34,0)
 S SHEMP=SHEMP_$J(X,5),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 20"_$J(VAPA(8),20)_$J($TR(SRREF,","," "),30)_$J(SRREFP,6)
"RTN","SROATCM",35,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^DPT(",DIQ="SRY",DIQ(0)="I",DA=DFN,DR=27.02 D EN^DIQ1 S X=$G(SRY(2,DFN,27.02,"I")) I X S SRPREF=$$GET1^DIQ(4,X,99)
"RTN","SROATCM",36,0)
 S SHEMP=SHEMP_$J(SRPREF,6)
"RTN","SROATCM",37,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 21"_$J($TR(SRFOL,","," "),30)_$J(SRFOLP,6)
"RTN","SROATCM",38,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",39,0)
 S SHEMP=$E(SHEMP,1,11)_" 22"_$J($P(SRA(201),"^",21),6)_$J($P(SRA(202),"^",21),7)_$J($P(SRA(201),"^",22),6)_$J($P(SRA(202),"^",22),7)
"RTN","SROATCM",40,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",23),6)_$J($P(SRA(202),"^",23),7)_$J($P(SRA(201),"^",24),6)_$J($P(SRA(202),"^",24),7)
"RTN","SROATCM",41,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",42,0)
 ;
"RTN","SROATCM",43,0)
 S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SHEMP=$E(SHEMP,1,11)_" 23"_$J($P(SRA(201),"^",25),6)_$J($P(SRA(202),"^",25),7)_$J($P(SRA(201),"^",26),6)_$J($P(SRA(202),"^",26),7)_$J($P(VADM(3),"^"),7) K VADM
"RTN","SROATCM",44,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",45,0)
 S SHEMP=$E(SHEMP,1,11)_" 24"_$J($P(SRA(208),"^",10),2)_$J($P(SRA(206),"^",38),2)_$J($P(SRA(207),"^",24),2)_$J($P(SRA(207),"^",25),2)_$J($P(SRA(206),"^",39),2)
"RTN","SROATCM",46,0)
 N SR22,SR23 S SR22=$P(SRA(208),"^",22),SR23=$P(SRA(208),"^",23)
"RTN","SROATCM",47,0)
 D NMCS S SHEMP=SHEMP_$J(SRIP,2)_$J(" ",2)_$S(SR22:$J(SR22,12,4),1:$J(SR22,12))_$S(SR23:$J(SR23,12,4),1:$J(SR23,12))_$J($P(SRA(206),"^",41),2)
"RTN","SROATCM",48,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",26),3)
"RTN","SROATCM",49,0)
 ;
"RTN","SROATCM",50,0)
 N VAINDT,SRPTF,SRRES,SRDISTYP
"RTN","SROATCM",51,0)
 S VAINDT=$P(SRA(208),"^",15)-.0001 D INP^VADPT S SRPTF=VAIN(10)
"RTN","SROATCM",52,0)
 S SRRES="" D RPC^DGPTFAPI(.SRRES,SRPTF)
"RTN","SROATCM",53,0)
 S SRRES(0)=$G(SRRES(0)),SRRES(1)=$G(SRRES(1)),SRRES(2)=$G(SRRES(2))
"RTN","SROATCM",54,0)
 S SRDISTYP=$P(SRRES(1),U)
"RTN","SROATCM",55,0)
 I SRDISTYP]"" S SRDISTYP=$S(SRDISTYP="REGULAR":1,SRDISTYP="NBC OR WHILE ASIH":2,SRDISTYP="EXPIRATION 6 MONTH LIMIT":3,SRDISTYP="IRREGULAR":4,SRDISTYP="TRANSFER":5,SRDISTYP="DEATH WITH AUTOPSY":6,SRDISTYP="DEATH WITHOUT AUTOPSY":7,1:"")
"RTN","SROATCM",56,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_$J($P(SRRES(1),U,3),7)_$J($P(SRA(205),"^",40),2),SRACNT=SRACNT+1
"RTN","SROATCM",57,0)
 S SHEMP=$E(SHEMP,1,11)_" 25"_$J(SRDISTYP,2) I $D(SRRES(2)) F I=1:1:9 S SHEMP=SHEMP_$J($P(SRRES(2),"^",I),7)
"RTN","SROATCM",58,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM",59,0)
 D ^SROATCM3
"RTN","SROATCM",60,0)
 Q
"RTN","SROATCM",61,0)
NMCS S SRIP=$P(SRA(206),"^",40) I SRIP'="Y" Q
"RTN","SROATCM",62,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,10,SROCC,0),"^",2)=34 S SRIP="I" Q
"RTN","SROATCM",63,0)
 I SRIP="Y" S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=34 S SRIP="P" Q
"RTN","SROATCM",64,0)
 Q
"RTN","SROATCM1")
0^33^B52450846^B51948425
"RTN","SROATCM1",1,0)
SROATCM1 ;BIR/MAM - STUFF TRANMISSION IN ^TMP ;05/10/07
"RTN","SROATCM1",2,0)
 ;;3.0; Surgery ;**38,71,79,90,88,93,95,111,125,135,134,142,153,160,174**;24 Jun 93;Build 8
"RTN","SROATCM1",3,0)
 K SRA F I=0,.2,200,201,202,205:1:208,207.1,209,202.1,200.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATCM1",4,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$P(SRA(0),"^",9),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATCM1",5,0)
 N SRPID S SRPID=VA("PID"),SRPID=$TR(SRPID,"-","") ; remove hyphens from PID
"RTN","SROATCM1",6,0)
 S SHEMP="~"_$J(SRASITE,3)_$J(SRTN,7)_" 1 "_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12,4)_SRPID
"RTN","SROATCM1",7,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 2 ",SRACNT=SRACNT+1
"RTN","SROATCM1",8,0)
 S SRHD=$P(SRA(206),"^")
"RTN","SROATCM1",9,0)
 I SRHD["C" S SRH="C",SRHD=$E(SRHD,1,$L(SRHD)-1)
"RTN","SROATCM1",10,0)
 E  S SRH=" "
"RTN","SROATCM1",11,0)
 S SRWD=$P(SRA(206),"^",2)
"RTN","SROATCM1",12,0)
 I SRWD["K" S SRW="K",SRWD=$E(SRWD,1,$L(SRWD)-1)
"RTN","SROATCM1",13,0)
 E  S SRW=" "
"RTN","SROATCM1",14,0)
 S SHEMP=SHEMP_$J(SRHD,3)_SRH_$J(SRWD,3)_SRW_$J($P(SRA(200),"^",2),2)_$J($P(SRA(200),"^",11),2)_$J($P(SRA(206),"^",5),3)_$J($P(SRA(206),"^",6),2)_$J($P(SRA(206),"^",7),2)
"RTN","SROATCM1",15,0)
 S SRCT=$P($G(^SRF(SRTN,201)),"^",4) S:SRCT["NS" SRCT=""
"RTN","SROATCM1",16,0)
 S SHEMP=SHEMP_$J($P(SRA(200.1),"^",5),2)_$J(SRCT,4)_$J($P(SRA(206),"^",10),2)_$J($P(SRA(206),"^",11),2)_$J($P(SRA(200),"^",8),2)_$J(" ",2)_$J($P(SRA(206),"^",14),2)_$J(" ",2)
"RTN","SROATCM1",17,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",16),2)_$J($P(SRA(206),"^",17),2)_$J($P(SRA(206),"^",18),3)_$J($P(SRA(206),"^",19),3)_$J($P(SRA(206),"^",20),2)_$J($P(SRA(206),"^",21),2)_$J($P(SRA(206),"^",22),2)_$J($P(SRA(206),"^",23),2)
"RTN","SROATCM1",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_$J($P(SRA(208),"^",19),2)
"RTN","SROATCM1",19,0)
 S SHEMP=$E(SHEMP,1,11)_" 3 ",SRACNT=SRACNT+1
"RTN","SROATCM1",20,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",24),2)_$J($P(SRA(206),"^",25),3)_$J($P(SRA(206),"^",26),3)_$J($P(SRA(206),"^",27),3)
"RTN","SROATCM1",21,0)
 ; Left Main (node 3 pos 26-28), LAD (node 3 pos 29-31), Right Coronary (node 3 pos 32-34) & Circumflex Stenosis (node 3 pos 35-37)
"RTN","SROATCM1",22,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",28),3)_$J($P($G(SRA(206)),"^",33),3)_$J($P($G(SRA(206)),"^",34),3)_$J($P($G(SRA(206)),"^",35),3)
"RTN","SROATCM1",23,0)
 ; LV Cont Grade (node 3 pos 39-40) & Mitral Regurgitation(node 3 pos 41-42)
"RTN","SROATCM1",24,0)
 N SROLV S SROLV=$P(SRA(206),"^",30)
"RTN","SROATCM1",25,0)
 S SHEMP=SHEMP_$J($S(SROLV="IIIa":"3A",SROLV="IIIb":"3B",1:SROLV),3)_$J($P($G(SRA(206)),"^",9),2)
"RTN","SROATCM1",26,0)
 ; Estimate of Mortality and ASA Class are changed to not transmit "NS"
"RTN","SROATCM1",27,0)
 S SREMDATE=$P($G(SRA(206)),"^",32)
"RTN","SROATCM1",28,0)
 S SREMO=$P($G(^SRF(SRTN,206)),"^",31) S:SREMO["NS" SREMDATE=""
"RTN","SROATCM1",29,0)
 ; Estimate of Mortality (node 3 pos 43-45) & date (node 3 pos 46-57)
"RTN","SROATCM1",30,0)
 S SHEMP=SHEMP_$J(SREMO,3)
"RTN","SROATCM1",31,0)
 S SHEMP=SHEMP_$S(SREMDATE="":$J(SREMDATE,12),1:$J(SREMDATE,12,4))
"RTN","SROATCM1",32,0)
 S X="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-") S X=$E(X) S:X["N" X=""
"RTN","SROATCM1",33,0)
 S SHEMP=SHEMP_$J(X,1)
"RTN","SROATCM1",34,0)
 ; Cardiac Est. of Surg. Priority(node 3 pos 59) & date(node 3 pos 60-71)
"RTN","SROATCM1",35,0)
 S SHEMP=SHEMP_$J($P($G(SRA(208)),"^",12),1)
"RTN","SROATCM1",36,0)
 N SREMSPDT S SREMSPDT=$P($G(SRA(208)),"^",13)
"RTN","SROATCM1",37,0)
 S SHEMP=SHEMP_$S(SREMSPDT="":$J(SREMSPDT,12),1:$J(SREMSPDT,12,4))
"RTN","SROATCM1",38,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 4 ",SRACNT=SRACNT+1
"RTN","SROATCM1",39,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^"),2)_$J($P(SRA(207),"^",2),2)_$J($P(SRA(207),"^",3),2)_$J($P(SRA(207),"^",4),2)_$J($P(SRA(207),"^",5),2)_$J(" ",2)_$J($P(SRA(207),"^",7),2)
"RTN","SROATCM1",40,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",8),2)_$J($P(SRA(207),"^",9),2)_$J($P(SRA(207),"^",10),2)_$J($P(SRA(207),"^",12),2)_$J($P(SRA(207),"^",13),2)_$J($P(SRA(207),"^",14),2)_$J($P(SRA(207),"^",15),2)
"RTN","SROATCM1",41,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",16),2)_$J($P(SRA(207),"^",17),2)_$J($P(SRA(207),"^",18),2)_"  "
"RTN","SROATCM1",42,0)
 S SRDEATH=$P($G(SRA(208)),"^"),SRDDATE=$E($P($G(^DPT(DFN,.35)),"^"),1,12) I SRDDATE'="" S SRDDATE=$$LJ^XLFSTR(SRDDATE,12,0)
"RTN","SROATCM1",43,0)
 S SHEMP=SHEMP_$J(SRDEATH,2)_$J(SRDDATE,12)
"RTN","SROATCM1",44,0)
 S SHEMP=SHEMP_$P(SRA(207),"^",20)_$J($P(SRA(207),"^",28),2)
"RTN","SROATCM1",45,0)
 ; transmit no data in node 5
"RTN","SROATCM1",46,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 5 ",SRACNT=SRACNT+1
"RTN","SROATCM1",47,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 6 ",SRACNT=SRACNT+1
"RTN","SROATCM1",48,0)
 S SHEMP=SHEMP_$J($P(SRA(208),"^",2),2)_$J($P(SRA(208),"^",3),2)_$J($P(SRA(205),"^",17),2)_$J($P(SRA(208),"^",4),2)_$J($P(SRA(208),"^",5),2)_$J($P(SRA(205),"^",28),2)_$J($P(SRA(208),"^",6),2)
"RTN","SROATCM1",49,0)
 N SRRCS D RCSP S SHEMP=SHEMP_$J($P(SRA(205),"^",13),2)_$J(SRRCS,2)_$J($P(SRA(205),"^",22),2)_$J($P(SRA(205),"^",21),2)
"RTN","SROATCM1",50,0)
 N SRIP D CPR S SHEMP=SHEMP_$J(SRIP,2)
"RTN","SROATCM1",51,0)
 ;
"RTN","SROATCM1",52,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATCM1",53,0)
 N SROETCD,SROPTF S SROETCD="",SROPTF=""
"RTN","SROATCM1",54,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATCM1",55,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATCM1",56,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATCM1",57,0)
 ;
"RTN","SROATCM1",58,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATCM1",59,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATCM1",60,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATCM1",61,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)        ;Race code
"RTN","SROATCM1",62,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATCM1",63,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATCM1",64,0)
 ;
"RTN","SROATCM1",65,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRORACE  ;Eth, race added
"RTN","SROATCM1",66,0)
 ;
"RTN","SROATCM1",67,0)
 S SHEMP=$E(SHEMP,1,11)_" 7 ",SRACNT=SRACNT+1
"RTN","SROATCM1",68,0)
 S SHEMP=SHEMP_$TR(SRANAME,","," ")
"RTN","SROATCM1",69,0)
 I $P($G(^SRF(SRTN,"RA")),"^",3)=1 S SHEMP=SHEMP_$J("***RE-TRANSMISSION",38)
"RTN","SROATCM1",70,0)
 ; zip code, employ status, hemoglobin, hemo date, serum albumin, albumin date, creatitine date, total ischemic time, min invasive, total cpb time, total pre,post ICU & step down unit LOS,
"RTN","SROATCM1",71,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 8 ",SRACNT=SRACNT+1
"RTN","SROATCM1",72,0)
 K VADM D ADD^VADPT S X=$S($P(VAPA(11),"^",2)'="":$P(VAPA(11),"^",2),1:VAPA(6))
"RTN","SROATCM1",73,0)
 S SHEMP=SHEMP_$J(X,10)_$J($P(SRA(208),"^",18),1)_$J($P(SRA(201),"^",20),7)_$J($P(SRA(202),"^",20),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(202),"^",4),7)_$J($P(SRA(206),"^",36),4)
"RTN","SROATCM1",74,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",22),1)_$J($P(SRA(206),"^",37),4)_$J($P(SRA(207),"^",23),2)
"RTN","SROATCM1",75,0)
 ; cpt codes
"RTN","SROATCM1",76,0)
NODE9 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 9 ",SRACNT=SRACNT+1
"RTN","SROATCM1",77,0)
 S SRPMOD="",SR10SP="          ",CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATCM1",78,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD^SROATM3 S SRPMOD=SRM
"RTN","SROATCM1",79,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATCM1",80,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATCM1",81,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH^SROATM3
"RTN","SROATCM1",82,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATCM1",83,0)
 ; card cath date, admission date/time, hospital discharge date/time, anesthesia start & end date/times
"RTN","SROATCM1",84,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATCM1",85,0)
 I $P(SRA(207),"^",21)'="" D
"RTN","SROATCM1",86,0)
 .I $E($P(SRA(207),"^",21),8)="." Q
"RTN","SROATCM1",87,0)
 .E  S $P(SRA(207),"^",21)=$P(SRA(207),"^",21)_"."
"RTN","SROATCM1",88,0)
 S $P(SRA(207),"^",21)=$$LJ^XLFSTR($P(SRA(207),"^",21),12,0)
"RTN","SROATCM1",89,0)
 S SHEMP=SHEMP_$J($E($P(SRA(207),"^",21),1,12),12)
"RTN","SROATCM1",90,0)
 S (SRDATE,SRI)="" F SRI=14,15 S SRDATE=$E($P($G(SRA(208)),"^",SRI),1,12) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",91,0)
 S (SRDATE,SRI)="" F SRI=1,4 S SRDATE=$P(SRA(.2),"^",SRI) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",92,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATCM1",93,0)
 S (SRDATE,SRI)="" F SRI=10,12,2,3 S SRDATE=$P(SRA(.2),"^",SRI),SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",94,0)
 ; preop risk factors comments
"RTN","SROATCM1",95,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),1,65),",","^")
"RTN","SROATCM1",96,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 13",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),66,130),",","^")
"RTN","SROATCM1",97,0)
 ; resource data comments
"RTN","SROATCM1",98,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 14",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),1,65),",","^")
"RTN","SROATCM1",99,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 15",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),66,130),",","^")
"RTN","SROATCM1",100,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 16"_$E(SRPMOD,1,10) F I=1:1:5 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",101,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 17" F I=6:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",102,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE),SHEMP=SHEMP_$J(SRDIV,6)
"RTN","SROATCM1",103,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM1",104,0)
 Q
"RTN","SROATCM1",105,0)
RCSP S SRRCS=0,X=$P(SRA(208),"^",7) I X="N" Q
"RTN","SROATCM1",106,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S X=$P(^SRF(SRTN,16,SROCC,0),"^",5) S:X'="" SRRCS=X Q
"RTN","SROATCM1",107,0)
 Q
"RTN","SROATCM1",108,0)
CPR S SRIP=$P(SRA(205),"^",26) I SRIP'="Y" Q
"RTN","SROATCM1",109,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,10,SROCC,0),"^",2)=16 S SRIP="I" Q
"RTN","SROATCM1",110,0)
 I SRIP="Y" S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=16 S SRIP="P" Q
"RTN","SROATCM1",111,0)
 Q
"RTN","SROATCM3")
0^34^B12876503^B12747087
"RTN","SROATCM3",1,0)
SROATCM3 ;BIR/SJA - STUFF TRANMISSION IN ^TMP ;05/11/10
"RTN","SROATCM3",2,0)
 ;;3.0; Surgery ;**125,135,153,164,166,174**;24 Jun 93;Build 8
"RTN","SROATCM3",3,0)
 N SRDISP,NYUK S SRDISP="",NYUK=$P(SRRES(1),U,2),SRA(209.1)=$G(^SRF(SRTN,209.1)),SRA(207.1)=$G(^SRF(SRTN,207.1)),SRA(205)=$G(^SRF(SRTN,205)),SRA(208)=$G(^SRF(SRTN,208))
"RTN","SROATCM3",4,0)
 I NYUK'="" D
"RTN","SROATCM3",5,0)
 .S SRDISP=$S(NYUK="BOARDING HOUSE":16,NYUK="COMMUNITY HOSPITAL":6,NYUK="COMMUNITY NURSING HOME":8,NYUK="FOSTER HOME":14,NYUK="HALFWAY HOUSE":15,NYUK="HOME-BASED PRIMARY CARE (HBPC)":20,1:NYUK)
"RTN","SROATCM3",6,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="HOSPICE CARE":22,NYUK="MILITARY HOSPITAL":3,NYUK="NURSE CARE CONTD ANOTHER COMM ":10,NYUK="NURSING CARE CONT AT SAME NURS":9,NYUK="OTHER FEDERAL HOSPITAL":4,1:NYUK)
"RTN","SROATCM3",7,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="OTHER GOVERNMENT HOSPITAL":5,NYUK="OTHER PLACEMENT/UNKNOWN (NOT S":19,NYUK="PENAL INSTITUTION":17,NYUK="REFER MEDICARE HOME HEALTH CAR":25,NYUK="REFER OTHER AGENCY-PD HOME HEA":26,1:NYUK)
"RTN","SROATCM3",8,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="REFER VA-PD HOME/COMMUNITY HEA":24,NYUK="RESIDENTIAL HOTEL/RESIDENT (IE":18,NYUK="RESPITE CARE":23,NYUK="RETURN TO COMMUNITY-INDEPENDEN":1,NYUK="SPINAL CORD INJURY-VACO APPROV":21,1:NYUK)
"RTN","SROATCM3",9,0)
 .Q:SRDISP'=NYUK  S SRDISP=$S(NYUK="STATE HOME":11,NYUK="STATE HOME":13,NYUK="VA DOMICILLARY":12,NYUK="VA MEDICAL CENTER":2,NYUK="VA NURSING HOME CARE UNIT (NHC":7,1:"")
"RTN","SROATCM3",10,0)
 ;
"RTN","SROATCM3",11,0)
LN26 S SHEMP=$E(SHEMP,1,11)_" 26"_$J(SRDISP,2)_$J($P(SRA(206),"^",13),2)_$J($P(SRA(206),"^",15),2)_$J("",2)_$J($P(SRA(207),"^",27),2)_$J($P(SRA(209),"^"),2)_$J($P(SRA(209),"^",2),2)
"RTN","SROATCM3",12,0)
 S SHEMP=SHEMP_$J($P(SRA(209),"^",3),2)_$J($P(SRA(209),"^",4),2)_$J($P(SRA(209),"^",5),2)_$J($P(SRA(209),"^",6),3)_$J($P(SRA(209),"^",7),3)_$J($P(SRA(209),"^",8),3)_$J($P(SRA(209),"^",9),2)_$J($P(SRA(209),"^",10),2)
"RTN","SROATCM3",13,0)
 S X=$P(SRA(206),"^",42),Y="" F I=1:1:5 S Y=Y_$P(X,",",I)
"RTN","SROATCM3",14,0)
 S SHEMP=SHEMP_$J($P(SRA(209),"^",11),2)_$J(Y,5)
"RTN","SROATCM3",15,0)
 S X=$P(SRA(209),"^",12) S:X="" X="N" S SHEMP=SHEMP_$J(X,2)
"RTN","SROATCM3",16,0)
 ; CT Surgery Consult Date and cause for delay & Primary Cause for Delay
"RTN","SROATCM3",17,0)
 S SHEMP=SHEMP_$J("",9)
"RTN","SROATCM3",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM3",19,0)
LN27 ;Line #27 - Other Cardiac Procedures
"RTN","SROATCM3",20,0)
 S SHEMP=$E(SHEMP,1,11)_" 27"_$TR($E($G(SRA(209.1)),1,65),",","^")
"RTN","SROATCM3",21,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM3",22,0)
LN28 ;Lines 28 - New fields added in 2006 update
"RTN","SROATCM3",23,0)
 S SHEMP=$E(SHEMP,1,11)_" 28"_$J($P(SRA(209),"^",13),2)_$J($P(SRA(209),"^",14),2)_$J($P(SRA(207.1),"^",2),2)_$J($P(SRA(201),"^",28),6)_$J($P(SRA(202.1),"^"),7)
"RTN","SROATCM3",24,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",29),5)_$J($P(SRA(202.1),"^",2),7)
"RTN","SROATCM3",25,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM3",26,0)
 Q
"RTN","SROATM1")
0^31^B25037601^B24970386
"RTN","SROATM1",1,0)
SROATM1 ;BIR/MAM - NON CARDIAC TRANSMISSION ;05/28/10
"RTN","SROATM1",2,0)
 ;;3.0; Surgery ;**27,38,47,60,62,81,88,93,95,125,153,160,166,174**;24 Jun 93;Build 8
"RTN","SROATM1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM1",5,0)
 ;**         are prohibited.
"RTN","SROATM1",6,0)
 ;
"RTN","SROATM1",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATM1",8,0)
 ;
"RTN","SROATM1",9,0)
 N SRINTUB,SRDTH,SRPID,SRCDT,SRCREQ F I=0,200,200.1,206 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM1",10,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$E($P(SRA(0),"^",9),1,12),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATM1",11,0)
 S SRPID=VA("PID"),SRPID=$TR(SRPID,"-","") ; remove hyphens from PID
"RTN","SROATM1",12,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATM1",13,0)
 S X=$P($G(^SRF(SRTN,205)),"^",3),SRDTH=$S(X:X,1:$P(VADM(6),"^"))
"RTN","SROATM1",14,0)
 S SRCDT=$P($G(^SRF(SRTN,209)),"^",15),SRCREQ=$P($G(^SRF(SRTN,209)),"^",17)
"RTN","SROATM1",15,0)
 S SHEMP=">"_$J(SRASITE,3)_$J(SRTN,7)_"  1"_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12)_$J(SRPID,20)_$J(SRDIV,6)_$J(SRDTH,12)_$J(SRCDT,7)_$J(SRCREQ,7)
"RTN","SROATM1",16,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  2",SRACNT=SRACNT+1
"RTN","SROATM1",17,0)
 S NYUK=$P(SRA(200),"^",2) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",3) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",4) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",2) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",18,0)
 S NYUK=$P(SRA(200),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",19,0)
 S NYUK=$P(SRA(200),"^",11) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",15) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",20,0)
 S NYUK=$P(SRA(200),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",32) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",21,0)
 S NYUK=$P(SRA(200),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",34) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",36) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",22,0)
 S NYUK=$P(SRA(200),"^",38) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",39) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",41) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",42) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",23,0)
 S NYUK=$P(SRA(200),"^",43) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",19) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",20) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",21) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",24,0)
 S NYUK=$P(SRA(200),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",24) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",25) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",25,0)
 S NYUK=$P(SRA(200),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",27) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",28) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",29) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",26,0)
 S NYUK=$P(SRA(200),"^",45) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",46) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",47) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",48) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",27,0)
 S NYUK=$P(SRA(200),"^",49) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200),"^",50) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(200.1),"^",3),SHEMP=SHEMP_$J(NYUK,2)
"RTN","SROATM1",28,0)
 S NYUK=$P(SRA(0),"^",4) S:NYUK NYUK=$E($P(^DIC(45.3,$P(^SRO(137.45,NYUK,0),"^",2),0),"^"),1,3) S SHEMP=SHEMP_$J(NYUK,3)
"RTN","SROATM1",29,0)
 S NYUK=$P(SRA(200),"^",52),SHEMP=SHEMP_$J(NYUK,2),X=$P(SRA(0),"^",10),NYUK=$S(X="EM":"Y",1:"N") D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",30,0)
 S NYUK=$P($G(^SRF(SRTN,"1.0")),"^",8),SHEMP=SHEMP_$J(NYUK,2),NYUK=$P(SRA(200),"^",53) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",31,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($G(^SRO(132.8,Y,0)),"^"),SRASA=X S NYUK=$E(SRASA,1,1) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM1",32,0)
 K SRTECH,SRZ,SRTRAUMA S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATM1",33,0)
 I $D(SRTECH) S SRTRAUMA=$P(^SRF(SRTN,6,SRT,0),"^",14),SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATM1",34,0)
 I '$D(SRTECH) S (SRTECH,SRTRAUMA,SRINTUB)=""
"RTN","SROATM1",35,0)
 S SHEMP=SHEMP_$J(SRTECH,1)_$J($E(SRASA,2),1)_$J(SRINTUB,1)_$J($P(SRA(200.1),"^",8),1)
"RTN","SROATM1",36,0)
 S NYUK=$P(SRA(206),"^"),SHEMP=SHEMP_$J(NYUK,4),NYUK=$P(SRA(206),"^",2),SHEMP=SHEMP_$J(NYUK,4)
"RTN","SROATM1",37,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  3",SRACNT=SRACNT+1
"RTN","SROATM1",38,0)
 D ^SROATM2
"RTN","SROATM1",39,0)
 Q
"RTN","SROATM1",40,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM1",41,0)
 Q
"RTN","SROATM2")
0^37^B33885599^B33815043
"RTN","SROATM2",1,0)
SROATM2 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;05/11/10
"RTN","SROATM2",2,0)
 ;;3.0; Surgery ;**38,39,45,47,57,60,62,68,81,88,97,129,125,142,153,160,174**;24 Jun 93;Build 8
"RTN","SROATM2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM2",5,0)
 ;**         are prohibited.
"RTN","SROATM2",6,0)
 ;
"RTN","SROATM2",7,0)
 K SRA F I=.2,.3,1.1,200.1,201:1:208,208.1,202.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM2",8,0)
 S SRA("CON")=$P($G(^SRF(SRTN,"CON")),"^") I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM2",9,0)
 D RS
"RTN","SROATM2",10,0)
 S SHEMP=SHEMP_$J($E($P(SRA(.2),"^",2),1,12),12)_$J($E($P(SRA(.2),"^",3),1,12),12)_$J(SRATT,2)_$J($P(SRA(200.1),"^",4),2)_$J($P($G(^SRF(SRTN,200)),"^",54),2)
"RTN","SROATM2",11,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^") S SHEMP=SHEMP_$J(SRICD,6)_$J($P(SRA(205),"^"),4)_"        "
"RTN","SROATM2",12,0)
 S NYUK="N",SRET=0 F  S SRET=$O(^SRF(SRTN,29,SRET)) Q:'SRET  S CASE=$P(^SRF(SRTN,29,SRET,0),"^") I $P($G(^SRF(CASE,.2)),"^",10) S NYUK="Y" Q
"RTN","SROATM2",13,0)
 S SHEMP=SHEMP_NYUK_$J($P($G(^SRF(SRTN,.4)),"^",7),1)_$J($E($P($G(^SRF(SRTN,0)),"^",12)),1)_$J($P($G(^SRF(SRTN,0)),"^",3),1)
"RTN","SROATM2",14,0)
 S (SRADMIT,SRADMT)=0 I $P($G(^SRF(SRTN,0)),"^",12)="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATM2",15,0)
 S SHEMP=SHEMP_" "_SRADMIT D OCC^SROATMNO S SHEMP=SHEMP_SRTMP_$J(SROCTYPE,1)_$J(SROC(35),2)_$J(SROC(36),2)
"RTN","SROATM2",16,0)
 S NYUK=$E($P(VADM(3),"^"),1,7),SHEMP=SHEMP_$J(NYUK,7) ; date of birth
"RTN","SROATM2",17,0)
 S SHEMP=SHEMP_$J(SROC(38),2)_$J(SROC(39),2) K SROC,SROCTYPE,SRTMP
"RTN","SROATM2",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  4",SRACNT=SRACNT+1
"RTN","SROATM2",19,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",20,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",21,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",22,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",23,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",24,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)'="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",25,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",26,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",27,0)
 S SRSDATE=$P(^SRF(SRTN,0),"^",9) K SRSEP D OCC^SROAUTL0 S:'$D(SRO) SRO="",$P(SRO," ",198)="" S SHEMP=SHEMP_$E(SRO,1,112)
"RTN","SROATM2",28,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  5",SRACNT=SRACNT+1
"RTN","SROATM2",29,0)
 S NYUK=$P(SRA(205),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",30,0)
 S NYUK="N" I $P(SRA(205),"^",11)="Y"!($P(SRA(205),"^",28)="Y") S NYUK="Y"
"RTN","SROATM2",31,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",13) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(29)),U)
"RTN","SROATM2",32,0)
 D IFELSE
"RTN","SROATM2",33,0)
 S NYUK=$P(SRA(205),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",18) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(31)),U)
"RTN","SROATM2",34,0)
 D IFELSE
"RTN","SROATM2",35,0)
 S NYUK="N",SRCVA=$P(SRA(205),"^",21),SRST=$P(SRA(208),"^",8) I SRCVA="Y"!(SRST="Y") S NYUK="Y"
"RTN","SROATM2",36,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(30)),U)
"RTN","SROATM2",37,0)
 D IFELSE
"RTN","SROATM2",38,0)
 S NYUK=$P(SRA(205),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",27) D ONE S SHEMP=SHEMP_MOE_" " S NYUK=$P($G(SROOC(32)),U)
"RTN","SROATM2",39,0)
 D IFELSE
"RTN","SROATM2",40,0)
 S NYUK=$P(SRA(205),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",32) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",34) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",41,0)
 S NYUK=$P(SRA(205),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(21)),U) D IFELSE
"RTN","SROATM2",42,0)
 S SHEMP=SHEMP_$E(SRO,113,196),NYUK=$P(SRA(205),"^",37) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(36)),U) D IFELSE
"RTN","SROATM2",43,0)
 S SHEMP=SHEMP_$J($E(SRO,204),1)
"RTN","SROATM2",44,0)
 S NYUK=$P(SRA(205),"^",39) D ONE S SHEMP=SHEMP_MOE_$E(SRO,197,203)
"RTN","SROATM2",45,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  6",SRACNT=SRACNT+1
"RTN","SROATM2",46,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^"),5)_$J($P(SRA(202),"^"),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(201),"^",9),5)_$J($P(SRA(202),"^",9),7)_$J($P(SRA(201),"^",5),5)_$J($P(SRA(202),"^",5),7)
"RTN","SROATM2",47,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",4),4)_$J($P(SRA(202),"^",4),7)
"RTN","SROATM2",48,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",27),5)_$J($P(SRA(202),"^",27),7)
"RTN","SROATM2",49,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",15),5)_$J($P(SRA(204),"^",15),7)
"RTN","SROATM2",50,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  7",SRACNT=SRACNT+1
"RTN","SROATM2",51,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",14),1,12),12)_"  "_$J($P($G(SRA(208)),"^",11),2)_$J($P($G(SRA(208)),"^",10),2)_$J($E($P($G(SRA(208)),"^",9),1,4),4)
"RTN","SROATM2",52,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",15),1,12),12)_"    "_$J($P($G(SRA(206)),"^",3),2)_$J($P($G(SRA(206)),"^",4),2)_$J($P($G(SRA(206)),"^",8),2)_"  "
"RTN","SROATM2",53,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",16),1,12),12)_$J($E($P(SRA(208),"^",17),1,12),12)_$J($E($P(SRA(.2),"^",12),1,12),12)_$J($E($P(SRA(.2),"^"),1,12),12)
"RTN","SROATM2",54,0)
 S SHEMP=SHEMP_$J($E($P(SRA(1.1),"^",8),1,12),12)_$J($E($P(SRA(208.1),"^"),1,12),12)_$J($E($P(SRA(208.1),"^",2),1,12),12)_$J($E($P(SRA(208.1),"^",3),1,3),3)_$J(SRA("CON"),10)_$J($E($P(SRA(.2),"^",4),1,12),12)
"RTN","SROATM2",55,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  8",SRACNT=SRACNT+1
"RTN","SROATM2",56,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",11),5)_$J($P(SRA(202),"^",11),7)_$J($P(SRA(201),"^",12),5)_$J($P(SRA(202),"^",12),7)_$J($P(SRA(201),"^",13),4)_$J($P(SRA(202),"^",13),7)_$J($P(SRA(201),"^",14),4)_$J($P(SRA(202),"^",14),7)
"RTN","SROATM2",57,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",15),5)_$J($P(SRA(202),"^",15),7)
"RTN","SROATM2",58,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",28),6)_$J($P(SRA(202.1),"^"),7)
"RTN","SROATM2",59,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  9",SRACNT=SRACNT+1
"RTN","SROATM2",60,0)
 D ^SROATM3
"RTN","SROATM2",61,0)
 Q
"RTN","SROATM2",62,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM2",63,0)
 Q
"RTN","SROATM2",64,0)
IFELSE I NYUK["NO ICD9" S SHEMP=SHEMP_$J(" ",6)
"RTN","SROATM2",65,0)
 E  S SHEMP=SHEMP_$J(NYUK,6)
"RTN","SROATM2",66,0)
 Q
"RTN","SROATM2",67,0)
RS ; resident supervision (attending code)
"RTN","SROATM2",68,0)
 N SRSR,SRX S (SRATT,SRSR)="",SRX=$G(^SRF(SRTN,.1)) D SRES
"RTN","SROATM2",69,0)
 S SRATT=$P(SRX,"^",10) I SRATT="" D
"RTN","SROATM2",70,0)
 .I SRSR=0 S SRATT=$S($P(^SRF(SRTN,0),"^",9)<3040401:1,1:9) Q
"RTN","SROATM2",71,0)
 .S SRATT=99
"RTN","SROATM2",72,0)
 Q
"RTN","SROATM2",73,0)
SRES ; does site have residents?
"RTN","SROATM2",74,0)
 N SRDIV,SRSITE,Y S SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),SRSR=$P(^SRO(133,SRSITE,0),"^",19)
"RTN","SROATM2",75,0)
 Q
"RTN","SROATM2",76,0)
RETURN ; CPT of Returns
"RTN","SROATM2",77,0)
 S Y=$P($G(^SRO(136,NYUK,0)),"^",2) I Y S CNT=CNT+1,CPT(CNT)=$P($$CPT^ICPTCOD(Y),"^",2)
"RTN","SROATM2",78,0)
 Q
"RTN","SROATM3")
0^30^B22124588^B20814871
"RTN","SROATM3",1,0)
SROATM3 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;06/21/10
"RTN","SROATM3",2,0)
 ;;3.0; Surgery ;**27,38,62,88,97,111,142,153,174**;24 Jun 93;Build 8
"RTN","SROATM3",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM3",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM3",5,0)
 ;**         are prohibited.
"RTN","SROATM3",6,0)
 ;;
"RTN","SROATM3",7,0)
 N SRCONMOD,SRMOD,SRPMOD,SR10SP
"RTN","SROATM3",8,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",16),5)_$J($P(SRA(202),"^",16),7)_$J($P(SRA(201),"^",17),4)_$J($P(SRA(202),"^",17),7)_$J($P(SRA(203),"^"),5)_$J($P(SRA(204),"^"),7)_$J($P(SRA(203),"^",2),5)_$J($P(SRA(204),"^",2),7)
"RTN","SROATM3",9,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",16),5)_$J($P(SRA(204),"^",16),7)
"RTN","SROATM3",10,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATM3",11,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",3),3)_$J($P(SRA(204),"^",3),7)_$J($P(SRA(203),"^",4),3)_$J($P(SRA(204),"^",4),7)_$J($P(SRA(203),"^",6),4)_$J($P(SRA(204),"^",6),7)
"RTN","SROATM3",12,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",7),6)_$J($P(SRA(204),"^",7),7)
"RTN","SROATM3",13,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATM3",14,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",8),4)_$J($P(SRA(204),"^",8),7)_$J($P(SRA(203),"^",9),5)_$J($P(SRA(204),"^",9),7)_$J($P(SRA(203),"^",10),4)_$J($P(SRA(204),"^",10),7)
"RTN","SROATM3",15,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",12),4)_$J($P(SRA(204),"^",12),7)_$J($P(SRA(203),"^",13),5)_$J($P(SRA(204),"^",13),7)_$J($P(SRA(203),"^",14),5)_$J($P(SRA(204),"^",14),7)
"RTN","SROATM3",16,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1
"RTN","SROATM3",17,0)
 S (SRPMOD,SRCONMOD)="",SR10SP="          " F I="OP","CON" S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM3",18,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATM3",19,0)
 .I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM3",20,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD S SRPMOD=SRM
"RTN","SROATM3",21,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATM3",22,0)
 S CPT="",CON=$P(SRA("CON"),"^") S:CON CPT=$P($G(^SRO(136,CON,0)),"^",2) D
"RTN","SROATM3",23,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=CON D MOD S SRCONMOD=SRM
"RTN","SROATM3",24,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRCONMOD=SRCONMOD_SR10SP
"RTN","SROATM3",25,0)
 S CPT="",SHEMP=SHEMP_$J(CPT,5)
"RTN","SROATM3",26,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATM3",27,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH
"RTN","SROATM3",28,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATM3",29,0)
 S SHEMP=SHEMP_$E(SRPMOD,1,10)_$E(SRCONMOD,1,10) F I=1:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATM3",30,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATM3",31,0)
 ;
"RTN","SROATM3",32,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATM3",33,0)
 N SROETCD,SROPTF S SHEMP=$E(SHEMP,1,11)_" 13"
"RTN","SROATM3",34,0)
 S SROETCD="",SROPTF=""
"RTN","SROATM3",35,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATM3",36,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATM3",37,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATM3",38,0)
 ;
"RTN","SROATM3",39,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATM3",40,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATM3",41,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATM3",42,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)       ;Race code
"RTN","SROATM3",43,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATM3",44,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATM3",45,0)
 S SRORACE=SRORACE_"          "
"RTN","SROATM3",46,0)
 S SHEMP=SHEMP_$E(SRORACE,1,10)
"RTN","SROATM3",47,0)
 ;get name of person who completed assessment
"RTN","SROATM3",48,0)
 N SRP S SRP=$P($G(^SRF(SRTN,"RA")),"^",9) I SRP S Y=SRP,C=$P(^DD(130,272.1,0),"^",2) D Y^DIQ S SRP=Y
"RTN","SROATM3",49,0)
 S X=$L(SRP)+1 F I=X:1:35 S SRP=SRP_" "
"RTN","SROATM3",50,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRP   ;Line 13
"RTN","SROATM3",51,0)
 S SRACNT=SRACNT+1
"RTN","SROATM3",52,0)
 ;
"RTN","SROATM3",53,0)
 S SHEMP=$E(SHEMP,1,11)_" A1"
"RTN","SROATM3",54,0)
 S SHEMP=SHEMP_SRANAME,^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A2",SRACNT=SRACNT+1
"RTN","SROATM3",55,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") K SRA,VADM D ADD^VADPT
"RTN","SROATM3",56,0)
 S SHEMP=SHEMP_VAPA(1),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A3",SRACNT=SRACNT+1
"RTN","SROATM3",57,0)
 S SHEMP=SHEMP_VAPA(2),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A4",SRACNT=SRACNT+1
"RTN","SROATM3",58,0)
 S SHEMP=SHEMP_VAPA(3),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A5",SRACNT=SRACNT+1
"RTN","SROATM3",59,0)
 S SHEMP=SHEMP_VAPA(4),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A6",SRACNT=SRACNT+1
"RTN","SROATM3",60,0)
 S SHEMP=SHEMP_$P(VAPA(5),"^",2),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A7",SRACNT=SRACNT+1
"RTN","SROATM3",61,0)
 S SHEMP=SHEMP_VAPA(6),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A8",SRACNT=SRACNT+1
"RTN","SROATM3",62,0)
 S SHEMP=SHEMP_VAPA(8),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATM3",63,0)
 Q
"RTN","SROATM3",64,0)
MOD ; get principal CPT modifiers
"RTN","SROATM3",65,0)
 S SRI=0,SRCNT=1,SRM="" F  S SRI=$O(^SRO(136,SRCASE,1,SRI)) Q:'SRI  D  Q:SRCNT>5
"RTN","SROATM3",66,0)
 .S X=$P(^SRO(136,SRCASE,1,SRI,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATM3",67,0)
 .I Y'="" S SRM=SRM_Y,SRCNT=SRCNT+1
"RTN","SROATM3",68,0)
 Q
"RTN","SROATM3",69,0)
OTH ; get other procedure CPT modifiers
"RTN","SROATM3",70,0)
 S SRI=0,SRCNT=1 F  S SRI=$O(^SRO(136,SRTN,3,OPS,1,SRI)) Q:'SRI  D  Q:SRCNT>5
"RTN","SROATM3",71,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRI,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATM3",72,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATM3",73,0)
 Q
"RTN","SROATMNO")
0^13^B28540920^B28046675
"RTN","SROATMNO",1,0)
SROATMNO ;BIR/MAM - TRANSMIT NO ASSESSMENT ;05/11/10
"RTN","SROATMNO",2,0)
 ;;3.0; Surgery ;**27,38,47,62,68,79,83,81,88,93,95,97,129,125,142,153,160,166,174**;24 Jun 93;Build 8
"RTN","SROATMNO",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATMNO",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATMNO",5,0)
 ;**         are prohibited.
"RTN","SROATMNO",6,0)
 ;
"RTN","SROATMNO",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATMNO",8,0)
 ;
"RTN","SROATMNO",9,0)
 N SR10SP,SRINTUB,SR95PO,SRLO,SRPID,TDATE K ^TMP("SRA",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATMNO",10,0)
 S Z=$E(DT,1,3)-2,SRLO=Z_"1215"
"RTN","SROATMNO",11,0)
 S TDATE=0 F  S TDATE=$O(^SRF("AQ",TDATE)) Q:TDATE=""  I DT'<TDATE S SRTN=0 F  S SRTN=$O(^SRF("AQ",TDATE,SRTN)) Q:'SRTN  D SET
"RTN","SROATMNO",12,0)
 S SRATOTM=SRAMNUM D ^SROATM4
"RTN","SROATMNO",13,0)
 Q
"RTN","SROATMNO",14,0)
SET I $P($G(^SRF(SRTN,.4)),"^",2)="T"!(TDATE<SRLO) K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",15,0)
 I $P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8)!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y") K ^SRF("AQ",TDATE,SRTN) S $P(^SRF(SRTN,.4),"^",2)="" Q
"RTN","SROATMNO",16,0)
 I $P($G(^SRF(SRTN,"RA")),"^",6)="Y",$P($G(^SRF(SRTN,"RA")),"^",2)="N" K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",17,0)
 I $P($G(^SRF(SRTN,0)),"^",9)="" K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",18,0)
 S SR10SP="          " K DA,DIE,DR S DA=SRTN,DIE=130,DR="905///R" D ^DIE K DR,DA,DIE
"RTN","SROATMNO",19,0)
 S SRA(0)=^SRF(SRTN,0),DATE=$E($P(SRA(0),"^",9),1,7),SPEC=$P(SRA(0),"^",4) S:SPEC SPEC=$P(^DIC(45.3,$P(^SRO(137.45,SPEC,0),"^",2),0),"^")
"RTN","SROATMNO",20,0)
 S EMERG=$P(SRA(0),"^",10),EMERG=$S(EMERG="EM":"Y",1:"N")
"RTN","SROATMNO",21,0)
 K SRTECH,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATMNO",22,0)
 I $D(SRTECH) S SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATMNO",23,0)
 I '$D(SRTECH) S (SRTECH,SRINTUB)=""
"RTN","SROATMNO",24,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2),SRPMOD="" I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2) D
"RTN","SROATMNO",25,0)
 .S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",26,0)
 ..S X=$P(^SRO(136,SRTN,1,SRM,0),"^") I X S Y=$P($$MOD^ICPTMOD(X,"I"),"^",2),SRPMOD=SRPMOD_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",27,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRDOB=$E($P(VADM(3),"^"),1,7),SRDEATH=$P(VADM(6),U),SRSEX=$P(VADM(5),"^")
"RTN","SROATMNO",28,0)
 S SRPID=VA("PID"),SRPID=$TR(SRPID,"-","") ; remove hyphens from PID
"RTN","SROATMNO",29,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATMNO",30,0)
 D RS^SROATM2
"RTN","SROATMNO",31,0)
 S SRMAJMIN=$E($P($G(^SRF(SRTN,0)),U,3),1)
"RTN","SROATMNO",32,0)
 S SRDTHUR=$E($P($G(^SRF(SRTN,.4)),U,7),1)
"RTN","SROATMNO",33,0)
 S SRSTATUS=$E($P($G(^SRF(SRTN,0)),U,12),1) I SRSTATUS'="I"&(SRSTATUS'="O") S VAIP("D")=$P(SRA(0),"^",9) D IN5^VADPT S SRSTATUS=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROATMNO",34,0)
 S SRAGE="" I $P(VADM(3),"^") S SRAGE=$E(DATE,1,3)-$E($P(VADM(3),"^"),1,3)-($E(DATE,4,7)<$E($P(VADM(3),"^"),4,7))
"RTN","SROATMNO",35,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($G(^SRO(132.8,Y,0)),"^"),SRASA=$E(X,1,2)
"RTN","SROATMNO",36,0)
 ; Admission wi 14 days following outpatient surgery due to an Occurrence 
"RTN","SROATMNO",37,0)
 S (SRADMIT,SRADMT)=0 I SRSTATUS="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATMNO",38,0)
 S EXC=$P($G(^SRF(SRTN,"RA")),"^",7),SRWOUND=$P($G(^SRF(SRTN,"1.0")),"^",8)
"RTN","SROATMNO",39,0)
 D OCC
"RTN","SROATMNO",40,0)
 S SRNODE="  X" S:$P($G(^SRF(SRTN,"RA")),U,6)="N" SRNODE="  *" S:$P($G(^SRF(SRTN,"RA")),U,2)="C" SRNODE="  C"
"RTN","SROATMNO",41,0)
 S SRTEMP="/"_$J(SRASITE,3)_$J(SRTN,7)_SRNODE_$J(DATE,7)_$J(SRTECH,3)_$J(EMERG,1)_$J(SPEC,3)_$J(CPT,5)_$J(EXC,1)_$J(SRPID,20)_$J(SRDIV,6)_$J(SRSEX,1)
"RTN","SROATMNO",42,0)
 S SRTEMP=SRTEMP_$J(SRMAJMIN,1)_$J($E(SRDEATH,1,7),7)_$J(SRDTHUR,1)_$J(SRSTATUS,1)_$J(SRAGE,3)_$J(SRASA,2)_$J(SRADMIT,1)_SRTMP
"RTN","SROATMNO",43,0)
 K CPT,SRMOD F SRZ=1:1:10 S (CPT(SRZ),SRMOD(SRZ))=""
"RTN","SROATMNO",44,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D MOD
"RTN","SROATMNO",45,0)
 S SRCC=$P($G(^SRF(SRTN,"CON")),"^"),SRBLANK="          "
"RTN","SROATMNO",46,0)
 I SRCC,$P($G(^SRF(SRCC,30)),"^")!($P($G(^SRF(SRCC,31)),"^",8)) S SRCC=""
"RTN","SROATMNO",47,0)
 S SRTEMP=SRTEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)_$J(SRWOUND,2)_$J(SROCTYPE,1)_SRBLANK_$J(SRCC,10)_$J(SRDEATH,12)
"RTN","SROATMNO",48,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP,SRACNT=SRACNT+1
"RTN","SROATMNO",49,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^")
"RTN","SROATMNO",50,0)
 S SRA(.2)=$G(^SRF(SRTN,.2))
"RTN","SROATMNO",51,0)
 S SRTEMP="/"_$J(SRASITE,3)_$J(SRTN,7)_"  B"_$J($E($P(SRA(.2),"^"),1,12),12)_$J($E($P(SRA(.2),"^",4),1,12),12)_$E(SRPMOD_SR10SP,1,10)
"RTN","SROATMNO",52,0)
 F I=1:1:10 S SRTEMP=SRTEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATMNO",53,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP_$J(SRINTUB,1)_SR95PO_$J(SRATT,2)_$J(SRDOB,7)_$J(SRICD,6)_$J(SROC(38),2)_$J(SROC(39),2),SRACNT=SRACNT+1
"RTN","SROATMNO",54,0)
 I SRACNT>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATMNO",55,0)
 S SRATOT=SRATOT+1
"RTN","SROATMNO",56,0)
 S X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATMNO",57,0)
 K DATE,ANES,EMERG,EXC,SPEC,SRADMIT,SRADMT,SRATT,SRBLANK,SRCC,SRDIV,SRDOB,SRDTHUR,SRICD,SRIO,SRMAJMIN,SROCTYPE,SRSEX,SRTEMP,SRTMP,SRWOUND,SRZ,SR14,CPT
"RTN","SROATMNO",58,0)
 Q
"RTN","SROATMNO",59,0)
OCC ; total of each occurrence by category
"RTN","SROATMNO",60,0)
 N SRIOFLAG,SRPOFLAG
"RTN","SROATMNO",61,0)
 F SRK=1:1:39 S SROC(SRK)=""
"RTN","SROATMNO",62,0)
 S (SRPO,SRIOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,10,SRPO,0),U,2) I SRSUB'="" D
"RTN","SROATMNO",63,0)
 .S SROC(SRSUB)=SROC(SRSUB)+1,SRIOFLAG=1
"RTN","SROATMNO",64,0)
 S (SRPO,SRPOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,16,SRPO,0),U,2) I SRSUB'="" D
"RTN","SROATMNO",65,0)
 .S SROC(SRSUB)=SROC(SRSUB)+1,SRPOFLAG=1
"RTN","SROATMNO",66,0)
 S (SROCTYPE,SRTMP)="" F SRK=1:1:10 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",67,0)
 S SRTMP=SRTMP_$J(SROC(37),2) F SRK=12:1:32 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",68,0)
 S SR95PO=$J(SROC(33),2)_$J(SROC(34),2)_$J(SROC(35),2)_$J(SROC(36),2)
"RTN","SROATMNO",69,0)
 I SRIOFLAG=1,(SRPOFLAG=0) S SROCTYPE="I"
"RTN","SROATMNO",70,0)
 I SRIOFLAG=0,(SRPOFLAG=1) S SROCTYPE="P"
"RTN","SROATMNO",71,0)
 I SRIOFLAG=1,(SRPOFLAG=1) S SROCTYPE="B"
"RTN","SROATMNO",72,0)
 I SRIOFLAG=0,(SRPOFLAG=0) S SROCTYPE=""
"RTN","SROATMNO",73,0)
 Q
"RTN","SROATMNO",74,0)
MOD N SRM S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,3,OPS,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",75,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRM,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATMNO",76,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",77,0)
 Q
"RTN","SROAUTL")
0^51^B41192631^B41172793
"RTN","SROAUTL",1,0)
SROAUTL ;BIR/ADM - RISK ASSESSMENT UTILITY ;05/28/10
"RTN","SROAUTL",2,0)
 ;;3.0; Surgery ;**38,46,47,63,81,88,95,112,100,125,134,142,153,160,166,174**;24 Jun 93;Build 8
"RTN","SROAUTL",3,0)
 I $G(SRSUPCPT)=2 G NCODE
"RTN","SROAUTL",4,0)
 N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")      Case #"_SRTN
"RTN","SROAUTL",5,0)
 S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",6,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P(X,"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRF(SRTN,"OPMOD",0)) D
"RTN","SROAUTL",7,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRF(SRTN,"OPMOD",SRI)) Q:'SRI  D
"RTN","SROAUTL",8,0)
 ..S SRM=$P(^SRF(SRTN,"OPMOD",SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",9,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",10,0)
 S SRCPT=$S($G(SRSUPCPT)=1:"",1:"("_SRCPT_")")
"RTN","SROAUTL",11,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",12,0)
 Q
"RTN","SROAUTL",13,0)
NCODE N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")        Case #"_SRTN
"RTN","SROAUTL",14,0)
 S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",15,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRO(136,SRTN,1,0)) D
"RTN","SROAUTL",16,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROAUTL",17,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",18,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",19,0)
 S SRCPT="(CPT Code: "_SRCPT_")"
"RTN","SROAUTL",20,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",21,0)
 Q
"RTN","SROAUTL",22,0)
LOOP I $L(SROPER)<68 S SRHDR(1)=SROPER Q
"RTN","SROAUTL",23,0)
 I $L(SROPER)>67 S X=SROPER,K=1 F  D  I $L(X)<68 S SRHDR(K)=X Q
"RTN","SROAUTL",24,0)
 .F I=0:1:66 S J=67-I,Y=$E(X,J) I Y=" " S SRHDR(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROAUTL",25,0)
 Q
"RTN","SROAUTL",26,0)
HDR ; print screen header
"RTN","SROAUTL",27,0)
 W @IOF,!,SRHDR W:$G(SRPAGE)'="" ?(79-$L(SRPAGE)),SRPAGE
"RTN","SROAUTL",28,0)
 S I=0 F  S I=$O(SRHDR(I)) Q:'I  W !,SRHDR(I) I I=.5,$L($G(SRCSTAT)) W ?(79-$L(SRCSTAT)),SRCSTAT
"RTN","SROAUTL",29,0)
 W:$D(SRCSTAT)&'$D(SRHDR(.5)) !,SRCSTAT
"RTN","SROAUTL",30,0)
 K SRHDR(.5),SRCSTAT,SRPAGE W ! F I=1:1:80 W "-"
"RTN","SROAUTL",31,0)
 W !
"RTN","SROAUTL",32,0)
 Q
"RTN","SROAUTL",33,0)
FUNCT() ; called by screen on functional health status field (#240)
"RTN","SROAUTL",34,0)
 N SRSCR S SRSCR="I 1"
"RTN","SROAUTL",35,0)
 I $$CARD S SRSCR="I Y'=4"
"RTN","SROAUTL",36,0)
 Q SRSCR
"RTN","SROAUTL",37,0)
CARD() ; is this a cardiac assessed case?
"RTN","SROAUTL",38,0)
 N SRX S SRX=$S($D(SRTN):SRTN,$D(DA):DA,1:"") I 'SRX Q 0
"RTN","SROAUTL",39,0)
 I $P($G(^SRF(SRX,"RA")),"^",2)="C" Q 1
"RTN","SROAUTL",40,0)
 Q 0
"RTN","SROAUTL",41,0)
NC ; called from input transform to kill X if case is cardiac assessed
"RTN","SROAUTL",42,0)
 I $$CARD,X="NA"!(X="NS") K X
"RTN","SROAUTL",43,0)
 Q
"RTN","SROAUTL",44,0)
DATE ; called by output transform on several date fields
"RTN","SROAUTL",45,0)
 I $D(Y),Y="NA"!(Y="NS") Q
"RTN","SROAUTL",46,0)
 N SRY S SRY=Y D DD^%DT
"RTN","SROAUTL",47,0)
 Q
"RTN","SROAUTL",48,0)
INDX ; set airway index
"RTN","SROAUTL",49,0)
 S SRY=$S(SRI>4:5,SRI>3:4,SRI>2:3,SRI>0:2,1:1),$P(^SRF(DA,.3),"^",9)=SRY
"RTN","SROAUTL",50,0)
 K SRI,SRMS,SROP,SRY
"RTN","SROAUTL",51,0)
 Q
"RTN","SROAUTL",52,0)
OP ; set logic for AOP cross reference on Oral-Pharyngeal field (901.1)
"RTN","SROAUTL",53,0)
 N SRI,SRMS,SRY S SRMS=$P(^SRF(DA,.3),"^",12) I SRMS'="" S SRMS=SRMS*.1,SRI=2.5*X-SRMS D INDX
"RTN","SROAUTL",54,0)
 Q
"RTN","SROAUTL",55,0)
MS ; set logic for AMS cross reference on Mandibular Space field (901.2)
"RTN","SROAUTL",56,0)
 N SRI,SRY,SRMS,SROP S SROP=$P(^SRF(DA,.3),"^",11) I SROP'="" S SRMS=X*.1,SRI=2.5*SROP-SRMS D INDX
"RTN","SROAUTL",57,0)
 Q
"RTN","SROAUTL",58,0)
K901 ; kill logic for AOP and AMS cross references
"RTN","SROAUTL",59,0)
 S $P(^SRF(DA,.3),"^",9)=""
"RTN","SROAUTL",60,0)
 Q
"RTN","SROAUTL",61,0)
DUP ; duplicate preop information from prior operation within 60 days
"RTN","SROAUTL",62,0)
 S SR200=$G(^SRF(SRTN,200)) S NOGO="" F I=1,9,13,18,30,37,44 S X=$P(SR200,"^",I) I X'="" S NOGO=1 K SR200 Q
"RTN","SROAUTL",63,0)
 S X=$P($G(^SRF(SRTN,200.1)),"^") I X'="" S NOGO=1
"RTN","SROAUTL",64,0)
 I NOGO K NOGO Q
"RTN","SROAUTL",65,0)
 K SRCASE S SR=^SRF(SRTN,0),DFN=$P(SR,"^"),(SRSDATE,X1)=$P(SR,"^",9),X2=-60 D C^%DTC S SRENDT=X,SRCASE=0 F  S SRCASE=$O(^SRF("B",DFN,SRCASE)) Q:'SRCASE  I SRCASE,SRCASE'=SRTN D
"RTN","SROAUTL",66,0)
 .S SRX=$P(^SRF(SRCASE,0),"^",9) I SRX>SRSDATE!(SRX<SRENDT) Q
"RTN","SROAUTL",67,0)
 .Q:$P($G(^SRF(SRCASE,"NON")),"^")="Y"!$P($G(^SRF(SRCASE,30)),"^")!$P($G(^SRF(SRCASE,31)),"^",8)!($P($G(^SRF(SRCASE,"CON")),"^")=SRTN)!'$P($G(^SRF(SRCASE,.2)),"^",12)
"RTN","SROAUTL",68,0)
 .S SRX=9999999-SRX,SRCASE(SRX,SRCASE)=""
"RTN","SROAUTL",69,0)
 K SRDT S (SRX,Y)=0 F  S SRX=$O(SRCASE(SRX)) Q:'SRX!$D(SRDT)  S SRCASE="" F  S SRCASE=$O(SRCASE(SRX,SRCASE)) Q:'SRCASE  S SR=$G(^SRF(SRCASE,"RA")) I $P(SR,"^",2)="N",$P(SR,"^",6)="Y" D  Q
"RTN","SROAUTL",70,0)
 .S Y=$P(^SRF(SRCASE,0),"^",9) X ^DD("DD") S SRDT=Y K DIR
"RTN","SROAUTL",71,0)
 .W !! S DIR("A",1)="This patient had a previous non-cardiac operation on "_SRDT_".",DIR("A",2)="",DIR("A",3)="Case #"_SRCASE_"  "_$P(^SRF(SRCASE,"OP"),"^")
"RTN","SROAUTL",72,0)
 .S DIR("A",4)="",DIR("A",5)="Do you want to duplicate the preoperative information from the earlier",DIR("A")="assessment in this assessment? "
"RTN","SROAUTL",73,0)
 .S DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAUTL",74,0)
 .D:Y STUFF
"RTN","SROAUTL",75,0)
 Q
"RTN","SROAUTL",76,0)
STUFF ; stuff preop information from previous case
"RTN","SROAUTL",77,0)
 I $$LOCK^SROUTL(SRCASE) D  D UNLOCK^SROUTL(SRCASE)
"RTN","SROAUTL",78,0)
 .K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRCASE,DIQ="SRY",DIQ(0)="I" D PREHD D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAUTL",79,0)
 .S SRZ=0 F  S SRZ=$O(SRY(130,SRCASE,SRZ)) Q:'SRZ  S DIE=130,DA=SRTN,DR=SRZ_"////"_SRY(130,SRCASE,SRZ,"I") D ^DIE K DA,DIE,DR
"RTN","SROAUTL",80,0)
 Q
"RTN","SROAUTL",81,0)
CHK ; check for missing non-cardiac assessment data items
"RTN","SROAUTL",82,0)
 N SRSEP K SRX
"RTN","SROAUTL",83,0)
 F SRC="PREOP","DEM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL1
"RTN","SROAUTL",84,0)
 F SRC="LAB","REM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL2
"RTN","SROAUTL",85,0)
OTH K DA,DIC,DIQ,DR,SRY,SRZ D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROAUTL",86,0)
 ;D RELATE^SROAUTL2
"RTN","SROAUTL",87,0)
OCC D EN^SROCCAT S SRSDATE=$E($P(^SRF(SRTN,0),"^",9),1,7) K ^TMP("SROCC",$J),SRO
"RTN","SROAUTL",88,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S ^TMP("SROCC",$J,$P(^SRF(SRTN,10,SRPO,0),"^",2),SRSDATE)=""
"RTN","SROAUTL",89,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),"^",7),1,7) D
"RTN","SROAUTL",90,0)
 .S SRSEP=$P(^SRF(SRTN,16,SRPO,0),"^",4)
"RTN","SROAUTL",91,0)
 .I '$G(SRDATE) S SRDATE="NO DATE"
"RTN","SROAUTL",92,0)
 .S ^TMP("SROCC",$J,$P(^SRF(SRTN,16,SRPO,0),"^",2),SRDATE)=SRSEP
"RTN","SROAUTL",93,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL",94,0)
 S SRPO=0 F  S SRPO=$O(^TMP("SROCC",$J,SRPO)) Q:'SRPO  S SRDATE="" F  S SRDATE=$O(^TMP("SROCC",$J,SRPO,SRDATE)) Q:SRDATE  S SRX("POSTOP OCCURRENCE DATE"_SRPO)="Date Noted on "_$P(^SRO(136.5,SRPO,0),"^")_" (Postop Occurrence)" Q
"RTN","SROAUTL",95,0)
 S SRDATE="",SRDATE=$O(^TMP("SROCC",$J,3,SRDATE)) Q:SRDATE=""  I ^TMP("SROCC",$J,3,SRDATE)="" S SRX("SEPSIS CATEGORY")="SEPSIS CATEGORY on SYSTEMIC SEPSIS (Postop Occurrence)"
"RTN","SROAUTL",96,0)
OCCEND K ^TMP("SROCC",$J)
"RTN","SROAUTL",97,0)
 Q
"RTN","SROAUTL",98,0)
PREOP S DR="236;237;346;202;246;325;237.1;238;492;204;203;326;212;213;396;394;220;266;395;208;329;330;328;211;332;333;400;334;335;336;401;338;218;339;215;216;217;338.1;338.2;218.1;269"
"RTN","SROAUTL",99,0)
 Q
"RTN","SROAUTL",100,0)
DEM S DR="413;.011;247;418;419;420;421;452;453;454;342"
"RTN","SROAUTL",101,0)
 Q
"RTN","SROAUTL",102,0)
LAB S DR="270;304;224;291;223;290;225;292;228;295;227;294;229;296;230;297;234;301;231;298;233;300;232;299;487;487.1;274;305;405;407;275;306;406;408;277;308;278;309;279;310;280;311;281;312;283;314;455;455.1;456;456.1;444;444.1;445;445.1"
"RTN","SROAUTL",103,0)
 Q
"RTN","SROAUTL",104,0)
REM S DR="214;.035;1.09;1.13;.22;.23;340;443;446;504;504.1"
"RTN","SROAUTL",105,0)
 Q
"RTN","SROAUTL",106,0)
PREHD D PREOP S DR=DR_";402;241;244;242;243;210;245"
"RTN","SROAUTL",107,0)
 Q
"RTN","SROAUTL0")
0^36^B19393426^B18207174
"RTN","SROAUTL0",1,0)
SROAUTL0 ;BIR/ADM,SLM - RISK ASSESSMENT UTILITY ;06/02/10
"RTN","SROAUTL0",2,0)
 ;;3.0; Surgery ;**38,47,57,60,61,63,81,125,153,160,174**;24 Jun 93;Build 8
"RTN","SROAUTL0",3,0)
PREOP K DR S SRQ=1,DR="325;238;240;204;203;396;332;333;338;339;215;217"
"RTN","SROAUTL0",4,0)
 Q
"RTN","SROAUTL0",5,0)
PREMD K DR S SRQ=1,DR=".011;247;413;417;418;419;420;421;452;453;454"
"RTN","SROAUTL0",6,0)
 Q
"RTN","SROAUTL0",7,0)
OPER K DR S SRQ=0,DR=".03;.04;26;27;214;.42;.035;1.09;1.13;.37;.22;.23;340;66"
"RTN","SROAUTL0",8,0)
 Q
"RTN","SROAUTL0",9,0)
LR K DR S SRQ=0,DR="225;292;228;295;224;291;234;301;230;297;227;294"
"RTN","SROAUTL0",10,0)
 Q
"RTN","SROAUTL0",11,0)
OUT1 ; man preop edit scr
"RTN","SROAUTL0",12,0)
 Q
"RTN","SROAUTL0",13,0)
LAB ; man lab edit scrn
"RTN","SROAUTL0",14,0)
 Q
"RTN","SROAUTL0",15,0)
CPTS ; put CPT codes in array for display
"RTN","SROAUTL0",16,0)
 N SRDA,K,X,XX,Y K SRPROC S K=1,Y=$P($G(^SRO(136,SRTN,0)),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAUTL0",17,0)
 I $L(Y) D SSPRIN^SROCPT0
"RTN","SROAUTL0",18,0)
 S SRPROC(K)=$S($L(Y):Y,1:"NO PRIN CODE")
"RTN","SROAUTL0",19,0)
 S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,SRDA)) Q:'SRDA  D
"RTN","SROAUTL0",20,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SRDA,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAUTL0",21,0)
 .I $L(Y) D SSOTH^SROCPT0
"RTN","SROAUTL0",22,0)
 .I $L(Y)+$L(SRPROC(K))'>SRL S SRPROC(K)=SRPROC(K)_", "_Y Q
"RTN","SROAUTL0",23,0)
 .S K=K+1,SRPROC(K)=Y
"RTN","SROAUTL0",24,0)
 I SRPROC(1)=""!(SRPROC(1)="NO PRIN CODE") S SRPROC(1)="NOT ENTERED"
"RTN","SROAUTL0",25,0)
 Q
"RTN","SROAUTL0",26,0)
DISP ; display CPT code info
"RTN","SROAUTL0",27,0)
 N SRFIRST,SRMO,SRMOD,SRCSTAT S SRPAGE="",SRCSTAT=">> Coding "_$S($P($G(^SRO(136,SRTN,10)),"^"):"",1:"Not ")_"Complete <<"
"RTN","SROAUTL0",28,0)
 D HDR^SROAUTL S SRFIRST=0,SRW="NOT ENTERED"
"RTN","SROAUTL0",29,0)
 S Y=$P($G(^SRO(136,SRTN,0)),"^",2) I Y S Y=$P($$CPT^ICPTCOD(Y),"^",2) D DES^SROCPT0
"RTN","SROAUTL0",30,0)
 W "Principal CPT Code: "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAUTL0",31,0)
 I $O(^SRO(136,SRTN,1,0)) W !,?3,"Modifier: " D
"RTN","SROAUTL0",32,0)
 .S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAUTL0",33,0)
 ..S SRMO=$P(^SRO(136,SRTN,1,SRMOD,0),"^")
"RTN","SROAUTL0",34,0)
 ..W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAUTL0",35,0)
 ..S SRFIRST=1
"RTN","SROAUTL0",36,0)
 K SRDES W !
"RTN","SROAUTL0",37,0)
OTH S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  D  K SRDES W !
"RTN","SROAUTL0",38,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SROTH,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"") D DES^SROCPT0
"RTN","SROAUTL0",39,0)
 .W !,"Other CPT Code:     "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAUTL0",40,0)
 .I $O(^SRO(136,SRTN,3,SROTH,1,0)) S SRFIRST=0 W !,?3,"Modifier: " D
"RTN","SROAUTL0",41,0)
 ..S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,3,SROTH,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAUTL0",42,0)
 ...S SRMO=$P(^SRO(136,SRTN,3,SROTH,1,SRMOD,0),"^")
"RTN","SROAUTL0",43,0)
 ...W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAUTL0",44,0)
 ...S SRFIRST=1
"RTN","SROAUTL0",45,0)
PRESS K DIR S DIR(0)="FOA",DIR("A")="Press ENTER to continue."
"RTN","SROAUTL0",46,0)
 S DIR("A",1)="CPT Codes should be verified. If need be, report discrepancies to the"
"RTN","SROAUTL0",47,0)
 S DIR("A",2)="official CPT coder for surgery.",DIR("A",3)="" D ^DIR K DIR
"RTN","SROAUTL0",48,0)
 Q
"RTN","SROAUTL0",49,0)
OCC ; occur data
"RTN","SROAUTL0",50,0)
 D EN^SROCCAT K ^TMP("SROCC",$J),SRO,SROC,SROOC
"RTN","SROAUTL0",51,0)
 F SRK=1:1:39 S SROC(SRK)="       "
"RTN","SROAUTL0",52,0)
 S (SRFLG,SRIO,SRPO)=0 F  S SRIO=$O(^SRF(SRTN,10,SRIO)) Q:'SRIO  D
"RTN","SROAUTL0",53,0)
 .S SROCC=$P(^SRF(SRTN,10,SRIO,0),U,2) Q:'SROCC
"RTN","SROAUTL0",54,0)
 .S ^TMP("SROCC",$J,SROCC,$E($P(^SRF(SRTN,0),U,9),1,7),10)=SRIO
"RTN","SROAUTL0",55,0)
 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  D
"RTN","SROAUTL0",56,0)
 .S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),U,7),1,7)
"RTN","SROAUTL0",57,0)
 .S X1=$E(SRSDATE,1,7),X2=30 D C^%DTC
"RTN","SROAUTL0",58,0)
 .I SRDATE>X Q
"RTN","SROAUTL0",59,0)
 .I '$G(SRDATE) S SRDATE="       "
"RTN","SROAUTL0",60,0)
 .S SROCC=$P(^SRF(SRTN,16,SRPO,0),U,2) Q:'SROCC
"RTN","SROAUTL0",61,0)
 .S ^TMP("SROCC",$J,SROCC,SRDATE,16)=SRPO
"RTN","SROAUTL0",62,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL0",63,0)
 ;remove multiples
"RTN","SROAUTL0",64,0)
 S SROCC=0 F  S SROCC=$O(^TMP("SROCC",$J,SROCC)) Q:'SROCC  S SROCCDT=$O(^TMP("SROCC",$J,SROCC,0)),SRTYPE=$O(^TMP("SROCC",$J,SROCC,SROCCDT,0)) D
"RTN","SROAUTL0",65,0)
 .I SROCC=21!(SROCC>28&(SROCC<33))!(SROCC=36) D
"RTN","SROAUTL0",66,0)
 ..S SRDA=^TMP("SROCC",$J,SROCC,SROCCDT,SRTYPE),SRICD=$P(^SRF(SRTN,SRTYPE,SRDA,0),U,3)
"RTN","SROAUTL0",67,0)
 ..I SRICD S SROOC(SROCC)=$P(^ICD9(SRICD,0),U)_"^"_$P(^SRF(SRTN,SRTYPE,SRDA,0),U)
"RTN","SROAUTL0",68,0)
 ..E  S SROOC(SROCC)="NO ICD9 CODE ENTERED"
"RTN","SROAUTL0",69,0)
 .S ^TMP("SROCC",$J,"SR",SROCC,SROCCDT)=""
"RTN","SROAUTL0",70,0)
 S SRK=1,SRO="",SROCC=0 F  S SROCC=$O(^TMP("SROCC",$J,"SR",SROCC)) Q:'SROCC  S SROCCDT="" F  S SROCCDT=$O(^TMP("SROCC",$J,"SR",SROCC,SROCCDT)) Q:SROCCDT=""  D
"RTN","SROAUTL0",71,0)
 .I SROCC=3 S SRPO=^TMP("SROCC",$J,SROCC,SROCCDT,16) I SRPO S X=$P(^SRF(SRTN,16,SRPO,0),"^",4) S:X SRSEP=X
"RTN","SROAUTL0",72,0)
 .S SROC(SROCC)=SROCCDT
"RTN","SROAUTL0",73,0)
 F I=1:1:22,29:1:32,35,36,38 S SRO=SRO_$J(SROC(I),7)
"RTN","SROAUTL0",74,0)
 S X=$G(SRSEP),SRO=SRO_X I X S SRSEP=$S(X=2:"SEPSIS",X=3:"SEPTIC SHOCK",1:"SIRS")
"RTN","SROAUTL0",75,0)
OCCEND K ^TMP("SROCC",$J),SRPOCC,SRPOCCD,SRSDATE,SRTYPE,SRDATE,SRDA,SRFLG,SRICD,SRJ,SRK,SROCC,SROCCDT,SRPO,X1,X2
"RTN","SROAUTL0",76,0)
 Q
"RTN","SROAUTL1")
0^50^B17300696^B17536014
"RTN","SROAUTL1",1,0)
SROAUTL1 ;BIR/ADM - RISK ASSESSMENT UTILITY ;05/28/10
"RTN","SROAUTL1",2,0)
 ;;3.0; Surgery ;**38,47,81,125,153,160,166,174**;24 Jun 93;Build 8
"RTN","SROAUTL1",3,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROAUTL1",4,0)
 Q
"RTN","SROAUTL1",5,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL1",6,0)
 Q
"RTN","SROAUTL1",7,0)
GET S X=$T(@J)
"RTN","SROAUTL1",8,0)
 Q
"RTN","SROAUTL1",9,0)
BJH ;;208^History of Hypertension Requiring Medication (Y/N)^Hypertension Requiring Meds^
"RTN","SROAUTL1",10,0)
BAC ;;213^Esophageal Varices (Y/N)^Esophogeal Varices^
"RTN","SROAUTL1",11,0)
BBJ ;;220^Previous PCI (Y/N)^Previous PCI^
"RTN","SROAUTL1",12,0)
BFF ;;266^Previous Cardiac Surgery (Y/N)^Previous Cardiac Surgery^
"RTN","SROAUTL1",13,0)
CBI ;;329^History of Revascularization/Amputation for PVD (Y/N)^Revascularization/Amputation^
"RTN","SROAUTL1",14,0)
CCJ ;;330^Rest Pain/Gangrene (Y/N)^Rest Pain/Gangrene^
"RTN","SROAUTL1",15,0)
CID ;;394^History of MI Within Past 6 Months (Y/N)^MI Within 6 Months^
"RTN","SROAUTL1",16,0)
CIE ;;395^Angina within One Month Preceding Surgery (Y/N)^Angina Within 1 Month^
"RTN","SROAUTL1",17,0)
BCF ;;236^Patient's Height^Height^
"RTN","SROAUTL1",18,0)
BCG ;;237^Patient's Weight^Weight^
"RTN","SROAUTL1",19,0)
CDF ;;346^Diabetes^Diabetes Mellitus^
"RTN","SROAUTL1",20,0)
BJB ;;202^Current Smoker within 1 Year prior to Surgery (Y/N)^Current SmokerW/I 1 Year^
"RTN","SROAUTL1",21,0)
BDF ;;246^ETOH Greater than 2 Drinks/Day (Y/N)^ETOH > 2 Drinks/Day^
"RTN","SROAUTL1",22,0)
CBE ;;325^Dyspnea^Dyspnea^
"RTN","SROAUTL1",23,0)
BCH ;;238^DNR Status (Y/N)^DNR Status^
"RTN","SROAUTL1",24,0)
DIB ;;492^Functional Health Status at Evaluation for Surgery^Preop Functional Status
"RTN","SROAUTL1",25,0)
BJD ;;204^Ventilator Dependent Greater than 48 Hrs (Y/N)^Ventilator Dependent^
"RTN","SROAUTL1",26,0)
BJC ;;203^History of COPD (Y/N)^History of Severe COPD^
"RTN","SROAUTL1",27,0)
CBF ;;326^Current Pneumonia (Y/N)^Current Pneumonia^
"RTN","SROAUTL1",28,0)
BAB ;;212^Ascites (Y/N)^Ascites^
"RTN","SROAUTL1",29,0)
CIF ;;396^CHF within One Month Preceding Surgery (Y/N)^CHF Within 1 Month^
"RTN","SROAUTL1",30,0)
CBH ;;328^Acute Renal Failure (Y/N)^Acute Renal Failure^
"RTN","SROAUTL1",31,0)
BAA ;;211^Currently on Dialysis (Y/N)^Currently on Dialysis^
"RTN","SROAUTL1",32,0)
CCB ;;332^Impaired Sensorium (Y/N)^Impaired Sensorium^
"RTN","SROAUTL1",33,0)
CCC ;;333^Coma (Y/N)^Coma^
"RTN","SROAUTL1",34,0)
DJJ ;;400^Hemiplegia (Y/N)^Hemiplegia^
"RTN","SROAUTL1",35,0)
CCD ;;334^History of TIAs (Y/N)^History of TIAs^
"RTN","SROAUTL1",36,0)
CCE ;;335^CVA/Residual Neurologic Deficit (Y/N)^CVA/Residual Neuro Deficit^
"RTN","SROAUTL1",37,0)
CCF ;;336^CVA/No Neurologic Deficit (Y/N)^CVA/No Neuro Deficit^
"RTN","SROAUTL1",38,0)
DJA ;;401^Tumor Involving CNS (Y/N)^Tumor Involving CNS^
"RTN","SROAUTL1",39,0)
CCH ;;338^Disseminated Cancer (Y/N)^Disseminated Cancer^
"RTN","SROAUTL1",40,0)
BAH ;;218^Open Wound or Skin Infection (Y/N)^Open Wound or Infection^
"RTN","SROAUTL1",41,0)
CCI ;;339^Steroid Use for Chronic Condition (Y/N)^Steroid Use for Chronic Cond.^
"RTN","SROAUTL1",42,0)
BAE ;;215^Weight Loss > 10% of Usual Body Weight (Y/N)^Weight Loss > 10%^
"RTN","SROAUTL1",43,0)
BAF ;;216^History of Bleeding Disorders (Y/N)^Bleeding Disorders^
"RTN","SROAUTL1",44,0)
BAG ;;217^Transfusion Greater than 4 RBC Units this Admission (Y/N)^Transfusion > 4 RBC Units^
"RTN","SROAUTL1",45,0)
CCHPA ;;338.1^Chemotherapy Within Last 30 Days (Y/N)^Chemotherapy W/I 30 Days^
"RTN","SROAUTL1",46,0)
CCHPB ;;338.2^Radiotherapy Within Last 90 Days (Y/N)^Radiotherapy W/I 90 Days^
"RTN","SROAUTL1",47,0)
BAHPA ;;218.1^Preoperative Sepsis (Y/N)^Preoperative Sepsis^
"RTN","SROAUTL1",48,0)
BFI ;;269^Pregnancy Status^Pregnancy Status^
"RTN","SROAUTL1",49,0)
DAC ;;413^Transfer Status^Transfer Status^
"RTN","SROAUTL1",50,0)
PJAA ;;.011^In/Out-Patient Status
"RTN","SROAUTL1",51,0)
BDG ;;247^Length of Postoperative Hospital Stay
"RTN","SROAUTL1",52,0)
CDB ;;342^Date/Time of Death^Date/Time of Death
"RTN","SROAUTL1",53,0)
DAG ;;417^Patient's Race
"RTN","SROAUTL1",54,0)
DAH ;;418^Hospital Admission Date
"RTN","SROAUTL1",55,0)
DAI ;;419^Hospital Discharge Date
"RTN","SROAUTL1",56,0)
DBJ ;;420^Admitted/Transferred to Surgical Service
"RTN","SROAUTL1",57,0)
DBA ;;421^Discharged/Transferred to Chronic Care
"RTN","SROAUTL1",58,0)
DEB ;;452^Observation Admission Date/Time
"RTN","SROAUTL1",59,0)
DEC ;;453^Observation Discharge Date/Time
"RTN","SROAUTL1",60,0)
DED ;;454^Observation Treating Specialty
"RTN","SROAUTL1",61,0)
BCGPA ;;237.1^Preoperative Sleep Apnea
"RTN","SROAUTL4")
0^5^B50279210^B50847568
"RTN","SROAUTL4",1,0)
SROAUTL4 ;BIR/ADM - RISK ASSESSMENT UTILITY ;01/10/08
"RTN","SROAUTL4",2,0)
 ;;3.0; Surgery ;**38,71,95,125,153,160,164,166,174**;24 Jun 93;Build 8
"RTN","SROAUTL4",3,0)
 N SRZZ,SRXX,SRX1
"RTN","SROAUTL4",4,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  D
"RTN","SROAUTL4",5,0)
 .I SRY(130,SRTN,SRZ,"I")="" D TR S (SRX1,X)=$T(@SRP),SRFLD=$P(X,";;",2) D
"RTN","SROAUTL4",6,0)
 ..I SRZ=484,$P($G(^SRF(SRTN,209)),"^",13)'="Y" Q
"RTN","SROAUTL4",7,0)
 ..S X=SRX1,SRX(SRZ)=$P(SRFLD,"^",2)_"^"_$P(X,";;",3)
"RTN","SROAUTL4",8,0)
 .I SRY(130,SRTN,SRZ,"I")="NS" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRDT=$P(SRFLD,"^",4) S:SRDT'="" SRLR(SRDT)=""
"RTN","SROAUTL4",9,0)
 S SRDT=0 F  S SRDT=$O(SRLR(SRDT)) Q:'SRDT  K SRX(SRDT)
"RTN","SROAUTL4",10,0)
 Q
"RTN","SROAUTL4",11,0)
RED M SRZZ=SRX S SRZ=0 F  S SRZ=$O(SRX(SRZ)) Q:'SRZ  S SRZZ=$P($G(SRX(SRZ)),"^",2),SRXX(SRZZ)=$P($G(SRX(SRZ)),"^")_":"_SRZ
"RTN","SROAUTL4",12,0)
 K SRX M SRX=SRXX K SRXX
"RTN","SROAUTL4",13,0)
 Q
"RTN","SROAUTL4",14,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL4",15,0)
 Q
"RTN","SROAUTL4",16,0)
GET S X=$T(@J)
"RTN","SROAUTL4",17,0)
 Q
"RTN","SROAUTL4",18,0)
BCF ;;236^Patient's Height^Height^;;1-01
"RTN","SROAUTL4",19,0)
BCG ;;237^Patient's Weight^Weight^;;1-02
"RTN","SROAUTL4",20,0)
DGE ;;475^Diabetes (Cardiac);;1-03
"RTN","SROAUTL4",21,0)
BJC ;;203^History of COPD (Y/N)^COPD^;;1-04
"RTN","SROAUTL4",22,0)
CDG ;;347^FEV1^FEV1^;;1-05
"RTN","SROAUTL4",23,0)
BJI ;;209^Cardiomegaly on Chest X-Ray (Y/N)^Cardiomegaly (X-ray)^;;1-06
"RTN","SROAUTL4",24,0)
CDH ;;348^Pulmonary Rales (Y/N)^Pulmonary Rales^;;1-07
"RTN","SROAUTL4",25,0)
EAJ ;;510^Current Smoker^Current Smoker^;;1-08
"RTN","SROAUTL4",26,0)
CDI ;;349^Active Endocarditis (Y/N)^Active Endocarditis^;;1-09
"RTN","SROAUTL4",27,0)
CEJ ;;350^Resting ST Depression (Y/N)^Resting ST Depression^;;1-10
"RTN","SROAUTL4",28,0)
BDJ ;;240^Functional Health Status^Functional Status^;;1-11
"RTN","SROAUTL4",29,0)
CEA ;;351^PCI Status^PCI^;;1-12
"RTN","SROAUTL4",30,0)
BJE ;;205^Prior Myocardial Infarction^Prior MI^;;1-13
"RTN","SROAUTL4",31,0)
CEB ;;352^Number of Prior Heart Surgeries^Number of Prior Heart Surgeries^;;1-14
"RTN","SROAUTL4",32,0)
DHE ;;485^Prior Heart Surgeries;;1-15
"RTN","SROAUTL4",33,0)
BFE ;;265^Peripheral Vascular Disease (Y/N)^Peripheral Vascular Disease^;;1-16
"RTN","SROAUTL4",34,0)
BFD ;;264^Cerebral Vascular Disease (Y/N)^Cerebral Vascular Disease^;;1-17
"RTN","SROAUTL4",35,0)
BFG ;;267^Angina (use CCS Functional Class)^Angina (use CCS Functional Class)^;;1-18
"RTN","SROAUTL4",36,0)
BJG ;;207^Congestive Heart Failure (use NYHA Functional Class)^CHF (use NYHA Class)^;;1-19
"RTN","SROAUTL4",37,0)
CEC ;;353^Current Diuretic Use (Y/N)^Current Diuretic Use^;;1-20
"RTN","SROAUTL4",38,0)
CED ;;354^Current Digoxin Use (Y/N)^Current Digoxin Use^;;1-21
"RTN","SROAUTL4",39,0)
CEE ;;355^IV NTG within 48 Hours Preceding Surgery (Y/N)^IV NTG within 48 Hours^;;1-22
"RTN","SROAUTL4",40,0)
DGD ;;474^Preop use of Circulatory Device;;1-23
"RTN","SROAUTL4",41,0)
DFC ;;463^Hypertension^;;1-24
"RTN","SROAUTL4",42,0)
EJI ;;509^Preoperative Atrial Fibrillation^;;1-25
"RTN","SROAUTL4",43,0)
DEG ;;457^HDL^^457.1;;2-01
"RTN","SROAUTL4",44,0)
DEGPA ;;457.1^HDL, Date;;2-02
"RTN","SROAUTL4",45,0)
DFA ;;461^LDL^^461.1;;2-03
"RTN","SROAUTL4",46,0)
DFAPA ;;461.1^LDL, Date;;2-04
"RTN","SROAUTL4",47,0)
DFB ;;462^Total Cholesterol^^462.1;;2-05
"RTN","SROAUTL4",48,0)
DFBPA ;;462.1^Total Cholesterol, Date;;2-06
"RTN","SROAUTL4",49,0)
DEH ;;458^Serum Triglyceride^^458.1;;2-07
"RTN","SROAUTL4",50,0)
DEHPA ;;458.1^Serum Triglyceride, Date;;2-08
"RTN","SROAUTL4",51,0)
DEI ;;459^Serum Potassium^^459.1;;2-09
"RTN","SROAUTL4",52,0)
DEIPA ;;459.1^Serum Potassium, Date;;2-10
"RTN","SROAUTL4",53,0)
DFJ ;;460^Serum Total Bilirubin^^460.1;;2-11
"RTN","SROAUTL4",54,0)
DFJPA ;;460.1^Serum Total Bilirubin, Date;;2-12
"RTN","SROAUTL4",55,0)
BBC ;;223^Preoperative Serum Creatinine^Creatinine^290;;2-13
"RTN","SROAUTL4",56,0)
BIJ ;;290^Creatinine Date;;2-14
"RTN","SROAUTL4",57,0)
BBE ;;225^Preoperative Serum Albumin^^292;;2-15
"RTN","SROAUTL4",58,0)
BIB ;;292^Preoperative Serum Albumin Date;;2-16
"RTN","SROAUTL4",59,0)
BAI ;;219^Preoperative Hemoglobin^^239;;2-17
"RTN","SROAUTL4",60,0)
BCI ;;239^Preoperative Hemoglobin Date;;2-18
"RTN","SROAUTL4",61,0)
EJD ;;504^Hemoglobin A1c^^504.1;;2-19
"RTN","SROAUTL4",62,0)
EJDPA ;;504.1^Hemoglobin A1c, Date;;2-20
"RTN","SROAUTL4",63,0)
EJG ;;507^B-type Natriuretic Peptide (BNP)^^507.1;;2-21
"RTN","SROAUTL4",64,0)
EJGPA ;;507.1^B-type Natriuretic Peptide (BNP), Date;;2-22
"RTN","SROAUTL4",65,0)
DGF ;;476^Procedure Type;;3-01
"RTN","SROAUTL4",66,0)
CEG ;;357^Left Ventricular End-Diastolic Pressure^LVEDP^;;3-02
"RTN","SROAUTL4",67,0)
CEH ;;358^Aortic Systolic Pressure^Aortic Systolic Pressure^;;3-03
"RTN","SROAUTL4",68,0)
CEI ;;359^PA Systolic Pressure^*PA Systolic Pressure^;;3-04
"RTN","SROAUTL4",69,0)
CFJ ;;360^PAW Mean Pressure^*PAW Mean Pressure^;;3-05
"RTN","SROAUTL4",70,0)
CFC ;;363^LV Contraction Grade^LV Contraction Grade  (from contrast or radionuclide angiogram or 2D echo^;;3-06
"RTN","SROAUTL4",71,0)
DAE ;;415^Mitral Regurgitation^Mitral Regurgitation^;;3-07
"RTN","SROAUTL4",72,0)
DGG ;;477^Aortic Stenosis;;3-08
"RTN","SROAUTL4",73,0)
CFA ;;361^Left Main Stenosis^Left Main Stenosis^;;3-09
"RTN","SROAUTL4",74,0)
CFBPA ;;362.1^Left Anterior Descending (LAD) Stenosis^LAD Stenosis^;;3-10
"RTN","SROAUTL4",75,0)
CFBPB ;;362.2^Right Coronary Artery Stenosis^Right Coronary Stenosis^;;3-11
"RTN","SROAUTL4",76,0)
CFBPC ;;362.3^Circumflex Coronary Artery Stenosis^Circumflex Stenosis^;;3-12
"RTN","SROAUTL4",77,0)
DGH ;;478^Re-Do Lad Stenosis;;3-13
"RTN","SROAUTL4",78,0)
DGI ;;479^Re-Do Right Coronary Stenosis;;3-14
"RTN","SROAUTL4",79,0)
DHJ ;;480^Re-Do Circumflex Stenosis;;3-15
"RTN","SROAUTL4",80,0)
CFD ;;364^Physician's Preoperative Estimate of Operative Mortality^Physician's Preoperative Estimate of Operative Mortality^;;4-01
"RTN","SROAUTL4",81,0)
CFDPA ;;364.1^Date/Time of Estimate of Operative Mortality^Date/Time of Estimate of Operative Mortality^;;4-02
"RTN","SROAUTL4",82,0)
APAC ;;1.13^ASA Class^ASA Classification^;;4-03
"RTN","SROAUTL4",83,0)
DAD ;;414^Cardiac Surgical Priority^Surgical Priority^;;4-04
"RTN","SROAUTL4",84,0)
DADPA ;;414.1^Date/Time of Cardiac Surgical Priority^Date/Time of Cardiac Surgical Priority^;;4-05
"RTN","SROAUTL4",85,0)
CFE ;;365^CABG Distal Anastomoses with Vein^^;;5-01
"RTN","SROAUTL4",86,0)
CFF ;;366^CABG Distal Anastomoses with IMA^^;;5-02
"RTN","SROAUTL4",87,0)
DFD ;;464^Number with Radial Artery^;;5-03
"RTN","SROAUTL4",88,0)
DFE ;;465^Number with Other Artery^;;5-04
"RTN","SROAUTL4",89,0)
DAF ;;416^CABG Distal Anastomoses with Other Conduit^^;;5-05
"RTN","SROAUTL4",90,0)
CFG ;;367^Aortic Valve Procedure^Aortic Valve Procedure^;;5-09
"RTN","SROAUTL4",91,0)
CFH ;;368^Mitral Valve Procedure^Mitral Valve Procedure^;;5-10
"RTN","SROAUTL4",92,0)
CFI ;;369^Tricuspid Valve Procedure^Tricuspid Valve Procedure^;;5-11
"RTN","SROAUTL4",93,0)
DIC ;;493^Pulmonary Valve Procedure^Pulmonary Valve Procedure^;;5-12
"RTN","SROAUTL4",94,0)
CGA ;;371^LV Aneurysmectomy (Y/N)^LV Aneurysmectomy^;;5-06
"RTN","SROAUTL4",95,0)
DHA ;;481^Bridge to transplant/Device;;5-07
"RTN","SROAUTL4",96,0)
DHC ;;483^Transmyocardial Laser Revascularization;;5-08
"RTN","SROAUTL4",97,0)
EAB ;;512^Maze Procedure;;5-13
"RTN","SROAUTL4",98,0)
CGF ;;376^ASD Repair (Y/N)^ASD Repair^;;5-14
"RTN","SROAUTL4",99,0)
CHJ ;;380^VSD Repair (Y/N)^VSD Repair^;;5-15
"RTN","SROAUTL4",100,0)
CGH ;;378^Myectomy for IHSS (Y/N)^Myectomy for IHSS^;;5-16
"RTN","SROAUTL4",101,0)
CGG ;;377^Myxoma Resection (Y/N)^Myxoma Resection^;;5-17
"RTN","SROAUTL4",102,0)
CGI ;;379^Other Tumor Resection (Y/N)^Other Tumor Resection^;;5-18
"RTN","SROAUTL4",103,0)
CGC ;;373^Cardiac Transplant (Y/N)^Cardiac Transplant^;;5-19
"RTN","SROAUTL4",104,0)
CGB ;;372^Great Vessel Repair(Y/N)^Great Vessel Repair^;;5-20
"RTN","SROAUTL4",105,0)
EJE ;;505^Endovascular Repair of Aorta (Y/N)^Endovascular Repair;;5-21
"RTN","SROAUTL4",106,0)
EJB ;;502^Other Cardiac Procedures (Y/N);;5-22
"RTN","SROAUTL4",107,0)
DHD ;;484^Other cardiac procedures (specify);;5-23
"RTN","SROAUTL4",108,0)
CHA ;;381^Foreign Body Removal (Y/N)^Foreign Body Removal^;;5-24
"RTN","SROAUTL4",109,0)
CHB ;;382^Pericardiectomy (Y/N)^Pericardiectomy^;;5-25
"RTN","SROAUTL4",110,0)
DEA ;;451^Total CPB Time;;5-26
"RTN","SROAUTL4",111,0)
DEJ ;;450^Total Ischemic Time;;5-27
"RTN","SROAUTL4",112,0)
DFH ;;468^Incision Type^;;5-28
"RTN","SROAUTL4",113,0)
DFI ;;469^Convert From Off Pump to CPB;;5-29
"RTN","SROAUTL4",114,0)
CHD ;;384^Operative Death (Y/N)^Operative Death^;;6-01
"RTN","SROAUTL4",115,0)
DAH ;;418^Hospital Admission Date And Time;;7-01
"RTN","SROAUTL4",116,0)
DAI ;;419^Hospital Discharge Date And Time;;7-02
"RTN","SROAUTL4",117,0)
DDJ ;;440^Cardiac Catheterization Date;;7-03
"RTN","SROAUTL4",118,0)
PBJE ;;.205^Time Patient In OR;;7-04
"RTN","SROAUTL4",119,0)
PBB ;;.22^Time the Operation Began^Date/Time Operation Began^;;7-05
"RTN","SROAUTL4",120,0)
PBC ;;.23^Time the Operation Ended^Date/Time Operation Ended^;;7-06
"RTN","SROAUTL4",121,0)
PBCB ;;.232^Time Patient Out OR;;7-07
"RTN","SROAUTL4",122,0)
DGJ ;;470^Date and Time Patient Extubated;;7-08
"RTN","SROAUTL4",123,0)
DGA ;;471^Date and Time Patient Discharged from ICU;;7-09
"RTN","SROAUTL4",124,0)
DGC ;;473^Homeless(Y/N);;7-10
"RTN","SROAUTL4",125,0)
DGB ;;472^Cardiac Surgery to NON-VA Facility;;7-11
"RTN","SROAUTL4",126,0)
DDB ;;442^Employment Status;;7-12
"RTN","SROAUTLC")
0^4^B27833831^B27748931
"RTN","SROAUTLC",1,0)
SROAUTLC ;BIR/ADM - CARDIAC RISK ASSESSMENT UTILITY ;08/23/07
"RTN","SROAUTLC",2,0)
 ;;3.0; Surgery ;**38,71,90,88,95,97,102,96,125,153,163,164,166,174**;24 Jun 93;Build 8
"RTN","SROAUTLC",3,0)
 ;
"RTN","SROAUTLC",4,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROAUTLC",5,0)
 ;
"RTN","SROAUTLC",6,0)
SITE ; determine if site is a cardiac facility
"RTN","SROAUTLC",7,0)
 I $$CARD Q
"RTN","SROAUTLC",8,0)
 W @IOF,!,"The SURGERY SITE PARAMETERS file indicates this site/division does not use ",!,"the Cardiac Risk Assessment module. Therefore, this option is not available",!,"for use.",!
"RTN","SROAUTLC",9,0)
 S XQUIT="" W !!,"Press RETURN to continue  " R X:DTIME W @IOF
"RTN","SROAUTLC",10,0)
 Q
"RTN","SROAUTLC",11,0)
CARD() ; extrinsic call to determine if site is cardiac facility
"RTN","SROAUTLC",12,0)
 N CARD S CARD=0 Q:'$G(SRSITE) CARD
"RTN","SROAUTLC",13,0)
 I $P($G(^SRO(133,SRSITE,0)),"^",5)="Y" S CARD=1
"RTN","SROAUTLC",14,0)
 Q CARD
"RTN","SROAUTLC",15,0)
NOW ; update date/time of surgical priority entry
"RTN","SROAUTLC",16,0)
 N X I $$CARD,$P($G(^SRF(DA,208)),"^",12)'="" D NOW^%DTC S $P(^SRF(DA,208),"^",13)=$E(%,1,12)
"RTN","SROAUTLC",17,0)
 Q
"RTN","SROAUTLC",18,0)
KNOW ; delete date/time of surgical priority entry
"RTN","SROAUTLC",19,0)
 I $D(^SRF(DA,208)) S $P(^SRF(DA,208),"^",13)=""
"RTN","SROAUTLC",20,0)
 Q
"RTN","SROAUTLC",21,0)
EM ; input transform logic on Case Schedule Type field (.035)
"RTN","SROAUTLC",22,0)
 Q:'$$CARD  N DIR,SREM,SRNOT,SRQ,SRSP
"RTN","SROAUTLC",23,0)
 I X'="EM" S:X="U" $P(^SRF(DA,208),"^",12)=2 S:X'="U" $P(^SRF(DA,208),"^",12)=1 D NOW Q
"RTN","SROAUTLC",24,0)
 S SRQ=0,SRSP=$P(^DIC(45.3,$P(^SRO(137.45,$P(^SRF(DA,0),"^",4),0),"^",2),0),"^") Q:SRSP'=48&(SRSP'=58)  D:SRSP=58 YN Q:SRQ
"RTN","SROAUTLC",25,0)
 D CAT
"RTN","SROAUTLC",26,0)
 Q
"RTN","SROAUTLC",27,0)
CAT N X K DIR S DIR("A",1)="",DIR("A",2)="     Enter category of emergency.",DIR("A",3)="     1. Emergent (ongoing ischemia)",DIR("A",4)="     2. Emergent (hemodynamic compromise)",DIR("A",5)="     3. Emergent (arrest with CPR)"
"RTN","SROAUTLC",28,0)
 S DIR("A",6)="",DIR("A")="     Enter number (1, 2 or 3): ",DIR(0)="NA^1:3",DIR("?")="^D HELP^SROAUTLC" D ^DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROAUTLC",29,0)
 S SREM=Y,$P(^SRF(DA,208),"^",12)=SREM+2 D NOW
"RTN","SROAUTLC",30,0)
 Q
"RTN","SROAUTLC",31,0)
YN N X K DIR S DIR("A",1)="",DIR("A",2)="     Is this emergency case a cardiac procedure requiring cardiopulmonary",DIR("A")="     bypass (Y/N)? ",DIR(0)="YA" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROAUTLC",32,0)
 I 'Y S SRQ=1
"RTN","SROAUTLC",33,0)
 Q
"RTN","SROAUTLC",34,0)
HELP K SRHLP S SRHLP(1)="This is the category of emergency reflecting the patient's cardiovascular",SRHLP(2)="condition at the time of transport to the operating room:",SRHLP(3)=""
"RTN","SROAUTLC",35,0)
 S SRHLP(4)="1. Emergent (ongoing ischemia) - Clinical condition mandates immediate",SRHLP(5)="surgery usually on day of catheterization because of ischemia despite"
"RTN","SROAUTLC",36,0)
 S SRHLP(6)="medical therapy, such as intravenous nitroglycerine.  Ischemia should",SRHLP(7)="be manifested as chest pain and/or ST-segment depression."
"RTN","SROAUTLC",37,0)
 S SRHLP(8)="",SRHLP(9)="2. Emergent (hemodynamic compromise) - Persistent hypotension (arterial",SRHLP(10)="systolic pressure < 80 mm Hg) and/or low cardiac output (cardiac index"
"RTN","SROAUTLC",38,0)
 S SRHLP(11)="< 2.0 L/min/MxM) despite iontropic and/or mechanical circulatory",SRHLP(12)="support mandates immediates surgery within hours of the cardiac",SRHLP(13)="catheterization."
"RTN","SROAUTLC",39,0)
 S SRHLP(14)="",SRHLP(15)="3. Emergent (arrest with CPR) - Patient is taken to the operating room in",SRHLP(16)="full cardiac arrest with the circulation supported by cardiopulmonary"
"RTN","SROAUTLC",40,0)
 S SRHLP(17)="resuscitation (excludes patients being adequately perfused by a",SRHLP(18)="cardiopulmonary support system).",SRHLP(19)=""
"RTN","SROAUTLC",41,0)
 S SRHLP(20)="Enter the appropriate number to designate the category of emergency.",SRHLP(21)="",SRHLP(22)="" D EN^DDIOL(.SRHLP) K SRHLP
"RTN","SROAUTLC",42,0)
 N DIR S DIR(0)="FOA",DIR("A")="Enter RETURN to continue: " D ^DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROAUTLC",43,0)
 Q
"RTN","SROAUTLC",44,0)
CHK ; check for missing cardiac assessment information
"RTN","SROAUTLC",45,0)
 K SRX,SRZZ F SRC="CLIN","LAB","CATH","OP","CAR","OUT","R" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL4
"RTN","SROAUTLC",46,0)
 D RED^SROAUTL4
"RTN","SROAUTLC",47,0)
 Q
"RTN","SROAUTLC",48,0)
CLIN S DR="236;237;475;203;347;209;348;510;349;350;240;351;205;352;485;265;264;267;207;353;354;355;474;463;509"
"RTN","SROAUTLC",49,0)
 Q
"RTN","SROAUTLC",50,0)
CATH S DR="476;357;358;359;360;363;415;477;361;362.1;362.2;362.3;478;479;480"
"RTN","SROAUTLC",51,0)
 Q
"RTN","SROAUTLC",52,0)
R S DR="418;419;440;.205;.22;.23;.232;470;471;473;472;442"
"RTN","SROAUTLC",53,0)
 Q
"RTN","SROAUTLC",54,0)
OP S DR="364;364.1;1.13;414;414.1"
"RTN","SROAUTLC",55,0)
 Q
"RTN","SROAUTLC",56,0)
OUT S DR="384"
"RTN","SROAUTLC",57,0)
 Q
"RTN","SROAUTLC",58,0)
CAR S DR="365;366;464;465;416;367;368;369;493;371;481;483;512;376;380;378;377;379;373;372;505;502;381;382;451;450;468;469"
"RTN","SROAUTLC",59,0)
 I $P($G(^SRF(SRTN,209)),"^",13)="Y"!($P($G(^SRF(SRTN,209)),"^",13)="") S DR=DR_";484"
"RTN","SROAUTLC",60,0)
 Q
"RTN","SROAUTLC",61,0)
LAB S DR="457;457.1;461;461.1;462;462.1;458;458.1;459;459.1;460;460.1;223;290;225;292;219;239;504;504.1;507;507.1"
"RTN","SROAUTLC",62,0)
 Q
"RTN","SROCCAT")
0^35^B17047332^B16630754
"RTN","SROCCAT",1,0)
SROCCAT ;BIR/MAM - PERIOPERATIVE OCCURRENCE UPDATE (Y/N) FIELDS ;05/11/10
"RTN","SROCCAT",2,0)
 ;;3.0; Surgery ;**38,47,95,138,153,160,174**;24 Jun 93;Build 8
"RTN","SROCCAT",3,0)
 S ZTDTH=$H,ZTIO="",ZTRTN="EN^SROCCAT",ZTSAVE("SRTN")="",ZTDESC="Update Perioperative Occurrences for Individual Patient" D ^%ZTLOAD
"RTN","SROCCAT",4,0)
 Q
"RTN","SROCCAT",5,0)
EN ; entry when queued
"RTN","SROCCAT",6,0)
 K SRCOMPS S (CNT,CMP)=0 F  S CMP=$O(^SRF(SRTN,10,CMP)) Q:'CMP  S COMP=$P(^SRF(SRTN,10,CMP,0),"^",2) I COMP S CNT=CNT+1,SRCOMPS(CNT)=COMP_"^"_$P(^(0),"^",3)
"RTN","SROCCAT",7,0)
 S CMP=0 F  S CMP=$O(^SRF(SRTN,16,CMP)) Q:'CMP  S COMP=$P(^SRF(SRTN,16,CMP,0),"^",2) I COMP S SRDATE="" D
"RTN","SROCCAT",8,0)
 .S SRDATE=$E($P(^SRF(SRTN,16,CMP,0),"^",7),1,7) I SRDATE S X1=$E($P(^SRF(SRTN,0),"^",9),1,7),X2=30 D C^%DTC I SRDATE>X Q
"RTN","SROCCAT",9,0)
 .S CNT=CNT+1,SRCOMPS(CNT)=COMP_"^"_$P(^SRF(SRTN,16,CMP,0),"^",3)
"RTN","SROCCAT",10,0)
 K DR,DIE,DA S DA=SRTN,DIE=130,DR="[SRO-NOCOMP]" D ^DIE K DR,DA
"RTN","SROCCAT",11,0)
 I '$D(SRCOMPS(1)) S ZTREQ="@" Q
"RTN","SROCCAT",12,0)
 S CNT=0 F  S CNT=$O(SRCOMPS(CNT)) Q:'CNT  S COMPL=$P(SRCOMPS(CNT),"^") D UPDATE
"RTN","SROCCAT",13,0)
 S ZTREQ="@"
"RTN","SROCCAT",14,0)
 Q
"RTN","SROCCAT",15,0)
UPDATE ; update Y/N questions
"RTN","SROCCAT",16,0)
 I COMPL=1 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;248////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",17,0)
 I COMPL=2 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;249////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",18,0)
 I COMPL=3 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;250////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",19,0)
 I COMPL=4 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;251////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",20,0)
 I COMPL=5 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;252///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",21,0)
 I COMPL=6 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;285///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",22,0)
 I COMPL=7 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;412///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",23,0)
 I COMPL=8 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;409///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",24,0)
 I COMPL=9 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;254///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",25,0)
 I COMPL=10 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y;255///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",26,0)
 I COMPL=11 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y;259///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",27,0)
 I COMPL=12!(COMPL=28) K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;256///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",28,0)
 I COMPL=13 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;410///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",29,0)
 I COMPL=14 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y;287///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",30,0)
 I COMPL=15 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;257///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",31,0)
 I COMPL=16 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y;411///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",32,0)
 I COMPL=17 K DA,DR,DIE S DA=SRTN,DIE=130,DR="385///Y;321////Y;258///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",33,0)
 I COMPL=18 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;345///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",34,0)
 I COMPL=19 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;261///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",35,0)
 I COMPL=20 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;263///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",36,0)
 I COMPL=21 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",37,0)
 I COMPL=22 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y;404///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",38,0)
 I COMPL=23 K DA,DR,DIE S DA=SRTN,DIE=130,DR="386////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",39,0)
 I COMPL=24 K DA,DR,DIE S DA=SRTN,DIE=130,DR="387////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",40,0)
 I COMPL=25 K DA,DR,DIE S DA=SRTN,DIE=130,DR="388////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",41,0)
 I COMPL=26 K DA,DR,DIE S DA=SRTN,DIE=130,DR="389////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",42,0)
 I COMPL=27 K DA,DR,DIE S DA=SRTN,DIE=130,DR="391////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",43,0)
 I COMPL=29 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",44,0)
 I COMPL=30 K DA,DR,DIE S DA=SRTN,DIE=130,DR="320////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",45,0)
 I COMPL=31 K DA,DR,DIE S DA=SRTN,DIE=130,DR="319////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",46,0)
 I COMPL=32 K DA,DR,DIE S DA=SRTN,DIE=130,DR="321////Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",47,0)
 I COMPL=33 K DA,DR,DIE S DA=SRTN,DIE=130,DR="466////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",48,0)
 I COMPL=34 K DA,DR,DIE S DA=SRTN,DIE=130,DR="467////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",49,0)
 I COMPL=35 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;488////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",50,0)
 I COMPL=36 K DA,DR,DIE S DA=SRTN,DIE=130,DR="403////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",51,0)
 I COMPL=37 K DA,DR,DIE S DA=SRTN,DIE=130,DR="318////Y;490///Y" D ^DIE K DR,DA,DIE Q
"RTN","SROCCAT",52,0)
 I COMPL=38 K DA,DR,DIE S DA=SRTN,DIE=130,DR="322////Y;447////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",53,0)
 I COMPL=39 K DA,DR,DIE S DA=SRTN,DIE=130,DR="448////Y" D ^DIE K DR,DIE,DA Q
"RTN","SROCCAT",54,0)
 Q
"RTN","SROCL1")
0^8^B11537820^B11126286
"RTN","SROCL1",1,0)
SROCL1 ;BIR/SJA - LOAD CARDIAC LAB DATA ;07/15/10
"RTN","SROCL1",2,0)
 ;;3.0; Surgery ;**95,125,153,160,174**;24 Jun 93;Build 8
"RTN","SROCL1",3,0)
 ;
"RTN","SROCL1",4,0)
 ; Reference to ^LR( supported by DBIA #194
"RTN","SROCL1",5,0)
 ;
"RTN","SROCL1",6,0)
 Q:'$D(SRTN)  N SRBLUD K SRAD,SRAT S SRSOUT=0
"RTN","SROCL1",7,0)
 W !!,"This selection loads the most recent cardiac lab data for tests performed",!,"preoperatively."
"RTN","SROCL1",8,0)
YEP W !!,"Do you want to automatically load cardiac lab data ?  YES//" R SRYN:DTIME G:'$T!(SRYN["^") END
"RTN","SROCL1",9,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter <RET> to automatically load cardiac lab data from the patient's lab",!,"record, or 'NO' to return to the menu." G YEP
"RTN","SROCL1",10,0)
 I "Yy"'[SRYN W !!,"Lab data NOT loaded." G END
"RTN","SROCL1",11,0)
START S SRALR=$S($D(^DPT($P(^SRF(SRTN,0),"^"),"LR")):$P(^("LR"),"^"),1:"")
"RTN","SROCL1",12,0)
 S SRAOP=$P($G(^SRF(SRTN,.2)),U,2) I 'SRAOP S SRAOP=$P($G(^(0)),U,9) I 'SRAOP S SRSOUT=1 W !!,"No Date of Operation found !" G END
"RTN","SROCL1",13,0)
 N SREND0,SREND1,SREND2,SREND3 S SRST=9999999-SRAOP,X1=SRAOP,X2=-90 D C^%DTC S SREND0=9999999-X
"RTN","SROCL1",14,0)
 S X1=SRAOP,X2=-30 D C^%DTC S SREND1=9999999-X
"RTN","SROCL1",15,0)
 S X1=SRAOP,X2=-1000 D C^%DTC S SREND2=9999999-X
"RTN","SROCL1",16,0)
 S X1=SRAOP,X2=-180 D C^%DTC S SREND3=9999999-X
"RTN","SROCL1",17,0)
SRAT ; Get test and data name(s) for test from file 139.2.
"RTN","SROCL1",18,0)
 W !!,"..Searching lab record for latest test data...."
"RTN","SROCL1",19,0)
 K DIC S DIC=61,DIC(0)="",X="SERUM" D ^DIC S SRSER=+Y K DIC S DIC=61,DIC(0)="",X="PLASMA" D ^DIC K DIC S SRP=+Y
"RTN","SROCL1",20,0)
 K DIC S DIC=61,DIC(0)="",X="BLOOD" D ^DIC S SRBLUD=+Y
"RTN","SROCL1",21,0)
 F SRAT=1,5,7,11,14,21:1:24,27,28 S SREND=$S("117"[SRAT:SREND1,SRAT=28:SREND3,SRAT>20:SREND2,1:SREND0) D SP^SROAL1
"RTN","SROCL1",22,0)
 D CARDIAC^SROAL11 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") I SRCON D CONCC
"RTN","SROCL1",23,0)
END I 'SRSOUT W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROCL1",24,0)
 W @IOF
"RTN","SROCL1",25,0)
 Q
"RTN","SROCL1",26,0)
CONCC ; update concurrent case
"RTN","SROCL1",27,0)
 S SRTN1=SRTN,SRTN=SRCON D CARDIAC^SROAL11 S SRTN=SRTN1
"RTN","SROCL1",28,0)
 Q
"RTN","SROCL1",29,0)
SP S SRASP=$P(^SRO(139.2,II,2),"^") K SRADT F SRADN=0:0 S SRADN=$O(^SRO(139.2,II,1,SRADN)) Q:SRADN'>0  S SRATN=$P(^(SRADN,0),"^") D LABCHK
"RTN","SROCL1",30,0)
 Q
"RTN","SROCL1",31,0)
LABCHK ; Get latest test values from patient's lab record.
"RTN","SROCL1",32,0)
 I SRALR F SRAIDT=SRST:0 S SRAIDT=$O(^LR(SRALR,"CH",SRAIDT)) Q:SRAIDT'>0!(SRAIDT>SREND)  I $D(^(SRAIDT,SRATN)) S SRSP=$P(^(0),"^",5) D
"RTN","SROCL1",33,0)
 .I SRSP=SRSER!(SRSP=SRP) D COMP Q
"RTN","SROCL1",34,0)
 I '$D(SRAT(SRAT)) S SRAT(SRAT)="NS",SRAD(SRAT)=""
"RTN","SROCL1",35,0)
 Q
"RTN","SROCL1",36,0)
COMP S SRX=$P(^LR(SRALR,"CH",SRAIDT,SRATN),"^") I $P(^LR(SRALR,"CH",SRAIDT,0),"^",3)'="","canccommentpending"'[SRX,SRX'["CANC" D DATA
"RTN","SROCL1",37,0)
 Q
"RTN","SROCL1",38,0)
DATA I $D(SRADT),SRAIDT>SRADT Q
"RTN","SROCL1",39,0)
 I +SRX'=SRX D
"RTN","SROCL1",40,0)
 .N X1,X2 S SRZ="" I "<>"[$E(SRX) S SRZ=$E(SRX),SRX=$E(SRX,2,99)
"RTN","SROCL1",41,0)
 .I SRX?.N0.1".".N D  Q
"RTN","SROCL1",42,0)
 ..S X1=$P(SRX,"."),X1=+X1 S:X1=0 X1=""
"RTN","SROCL1",43,0)
 ..S X2="."_$P(SRX,".",2),X2=+X2 S:X2=0 X2=""
"RTN","SROCL1",44,0)
 ..S SRX=X1_X2,SRX=+SRX,SRX=SRZ_SRX
"RTN","SROCL1",45,0)
 .S SRX="*"
"RTN","SROCL1",46,0)
 S SRAT(SRAT)=SRX D:SRAT(SRAT)["." DEC S SRAD(SRAT)=$E($P(^LR(SRALR,"CH",SRAIDT,0),"^"),1,7),SRADT=SRAIDT
"RTN","SROCL1",47,0)
 Q
"RTN","SROCL1",48,0)
DEC ; convert to proper decimal place
"RTN","SROCL1",49,0)
 I +SRAT(SRAT)=SRAT(SRAT)  S SRAT(SRAT)=SRAT(SRAT)+.05\.1*.1 Q
"RTN","SROCL1",50,0)
 S SR1=$E(SRAT(SRAT)),SR2=$E(SRAT(SRAT),2,99),SR2=SR2+.05\.1*.1,SRAT(SRAT)=SR1_SR2
"RTN","SROCL1",51,0)
 Q
"RTN","SROCON")
0^56^B9128806^B9881406
"RTN","SROCON",1,0)
SROCON ;BIR/MAM - STUFF ENTRY IN CONCURRENT CASE ;06/28/10
"RTN","SROCON",2,0)
 ;;3.0;Surgery;**78,119,161,174**;24 Jun 93;Build 8
"RTN","SROCON",3,0)
 I $D(SRNOCON),SRNOCON=1 Q
"RTN","SROCON",4,0)
 I $D(SRFLAG) S SRCON=$P(^SRF(DA(1),"CON"),"^")
"RTN","SROCON",5,0)
 I '$D(SRFLAG) S SRCON=$P(^SRF(DA,"CON"),"^")
"RTN","SROCON",6,0)
 N SRX S SRX=X
"RTN","SROCON",7,0)
ASK N DIR,X,Y S DIR("A",1)="",DIR("A")="Do you want to store this information in the concurrent case ",DIR(0)="YO",DIR("B")="YES"
"RTN","SROCON",8,0)
 S DIR("?")="^D HELP^SROCON" D ^DIR I Y=0 Q
"RTN","SROCON",9,0)
STUFF ; concatonate field to SRODR
"RTN","SROCON",10,0)
 D EN^DDIOL(" ","","!")
"RTN","SROCON",11,0)
 I $G(SRFLAG)=1 S SRODR(130.213,DA(2)_","_SRCON_",",SRFLD)=SRX K SRFLAG Q
"RTN","SROCON",12,0)
 S SRODR(130,SRCON_",",SRFLD)=SRX
"RTN","SROCON",13,0)
 Q
"RTN","SROCON",14,0)
HELP ;
"RTN","SROCON",15,0)
 N SRMX S SRMX=X W @IOF S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S X=SRMX  ;; < RJS *161 >
"RTN","SROCON",16,0)
 D EN^DDIOL("There is a concurrent surgical case associated with this procedure. A brief","","!!")
"RTN","SROCON",17,0)
 D EN^DDIOL("description of that case is listed below.","","!")
"RTN","SROCON",18,0)
 S SROPER=$P(^SRF(SRCON,"OP"),"^") I $O(^SRF(SRCON,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRCON,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROCON",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROCON",20,0)
 S SRSUR=$S($D(^SRF(SRCON,.1)):$P(^(.1),"^",4),1:"") S:'SRSUR SRSUR="NOT ENTERED" S:SRSUR SRSUR=$P(^VA(200,SRSUR,0),"^")
"RTN","SROCON",21,0)
 S SRSS=$P(^SRF(SRCON,0),"^",4) S:'SRSS SRSS="NOT ENTERED" S:SRSS SRSS=$P(^SRO(137.45,SRSS,0),"^")
"RTN","SROCON",22,0)
 D EN^DDIOL("Surgeon: "_SRSUR,"","!!") D EN^DDIOL("Surgical Specialty: "_SRSS,"","!")
"RTN","SROCON",23,0)
 D EN^DDIOL("Procedure: "_SROPS(1),"","!!")
"RTN","SROCON",24,0)
 I $D(SROPS(2)) D EN^DDIOL(SROPS(2),"","!,?11")
"RTN","SROCON",25,0)
 I $D(SROPS(3)) D EN^DDIOL(SROPS(3),"","!,?11")
"RTN","SROCON",26,0)
 I $D(SROPS(4)) D EN^DDIOL(SROPS(4),"","!,?11")
"RTN","SROCON",27,0)
 N SRW S SRW(1)="",SRW(2)="If you answer 'YES', the information you entered for this field will also"
"RTN","SROCON",28,0)
 S SRW(3)="be stored for the concurrent case. If this information is not pertinent for"
"RTN","SROCON",29,0)
 S SRW(4)="the concurrent case, enter 'NO'.",SRW(5)=""
"RTN","SROCON",30,0)
 D EN^DDIOL(.SRW)
"RTN","SROCON",31,0)
 Q
"RTN","SROCON",32,0)
OTHER ; other operations
"RTN","SROCON",33,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRCON,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROCON",34,0)
 I SRLONG S SROPERS=$P(^SRF(SRCON,13,SROTHER,0),"^")
"RTN","SROCON",35,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SROCON",36,0)
 Q
"RTN","SROCON",37,0)
LOOP ; break procedure
"RTN","SROCON",38,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROCON",39,0)
 Q
"RTN","SROLABS")
0^6^B8361411^B8161872
"RTN","SROLABS",1,0)
SROLABS ;BIR/SJA - ENTER/EDIT RISK MODEL LAB TEST ;05/03/10
"RTN","SROLABS",2,0)
 ;;3.0; Surgery ;**166,174**;24 Jun 93;Build 8
"RTN","SROLABS",3,0)
EN N SRIEN,SRSP,SRTNM,SRTP,SRX,Y
"RTN","SROLABS",4,0)
 S SRSOUT=0 D LIST G:SRSOUT END
"RTN","SROLABS",5,0)
 D DSPLY G:SRSOUT END
"RTN","SROLABS",6,0)
 I SREDIT D EDIT
"RTN","SROLABS",7,0)
 G EN
"RTN","SROLABS",8,0)
END D ^SRSKILL K SREDIT,SRFIRST,SRLABNM,SRSPNM
"RTN","SROLABS",9,0)
 Q
"RTN","SROLABS",10,0)
LIST ; display test list
"RTN","SROLABS",11,0)
 W @IOF,!,?11,"Risk Model Lab Test (Enter/Edit)",!!," Select item to edit from list below:",!
"RTN","SROLABS",12,0)
 W !," 1. ALBUMIN",?32,"14. INR"
"RTN","SROLABS",13,0)
 W !," 2. ALKALINE PHOSPHATASE",?32,"15. LDL"
"RTN","SROLABS",14,0)
 W !," 3. ANION GAP",?32,"16. PLATELET COUNT"
"RTN","SROLABS",15,0)
 W !," 4. B-TYPE NATRIURETIC PEPTIDE",?32,"17. POTASSIUM"
"RTN","SROLABS",16,0)
 W !," 5. BUN",?32,"18. PT"
"RTN","SROLABS",17,0)
 W !," 6. CHOLESTEROL",?32,"19. PTT"
"RTN","SROLABS",18,0)
 W !," 7. CPK",?32,"20. SGOT"
"RTN","SROLABS",19,0)
 W !," 8. CPK-MB",?32,"21. SODIUM"
"RTN","SROLABS",20,0)
 W !," 9. CREATININE",?32,"22. TOTAL BILIRUBIN"
"RTN","SROLABS",21,0)
 W !,"10. HDL",?32,"23. TRIGLYCERIDE"
"RTN","SROLABS",22,0)
 W !,"11. HEMATOCRIT",?32,"24. TROPONIN I"
"RTN","SROLABS",23,0)
 W !,"12. HEMOGLOBIN",?32,"25. TROPONIN T"
"RTN","SROLABS",24,0)
 W !,"13. HEMOGLOBIN A1C",?32,"26. WHITE BLOOD COUNT",!
"RTN","SROLABS",25,0)
 K DIR S DIR("?")="Select the number from the list for the lab test you want to edit."
"RTN","SROLABS",26,0)
 S DIR(0)="NAO^1:26",DIR("A")="Enter number (1-26): " D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 Q
"RTN","SROLABS",27,0)
 D TEST
"RTN","SROLABS",28,0)
 Q
"RTN","SROLABS",29,0)
EDIT ; update selected field
"RTN","SROLABS",30,0)
 W ! K DR,DIE,DA S DA=SRIEN,DIE=139.2,DR="[SROALAB]" D ^DIE K DA,DIE,DR
"RTN","SROLABS",31,0)
 Q
"RTN","SROLABS",32,0)
DSPLY ; display test information from file 139.2
"RTN","SROLABS",33,0)
 W @IOF,!,?11,"Risk Model Lab Test (Enter/Edit)",!!!,?16,"Test Name: "_SRLABNM,!!,"  Laboratory Data Name(s): "
"RTN","SROLABS",34,0)
 I '$O(^SRO(139.2,SRIEN,1,0)) W "NONE ENTERED"
"RTN","SROLABS",35,0)
 S SRX=0,SRFIRST=1 F  S SRX=$O(^SRO(139.2,SRIEN,1,SRX)) Q:'SRX  D
"RTN","SROLABS",36,0)
 .S SRTP=$P($G(^SRO(139.2,SRIEN,1,SRX,0)),"^"),Y=SRTP,C=$P(^DD(139.21,.01,0),"^",2) D Y^DIQ S SRTNM=Y
"RTN","SROLABS",37,0)
 .W:'SRFIRST ! W ?27,SRTNM S SRFIRST=0
"RTN","SROLABS",38,0)
 S SRSPNM="NONE ENTERED",SRSP=$P($G(^SRO(139.2,SRIEN,2)),"^") I SRSP S Y=SRSP,C=$P(^DD(139.2,2,0),"^",2) D Y^DIQ S SRSPNM=Y
"RTN","SROLABS",39,0)
 W !!,?17,"Specimen: ",SRSPNM,!!
"RTN","SROLABS",40,0)
 K DIR S DIR(0)="YA",DIR("A")="Do you want to edit this test ? ",DIR("B")="NO" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROLABS",41,0)
 S SREDIT=Y
"RTN","SROLABS",42,0)
 Q
"RTN","SROLABS",43,0)
TEST ; match with entry in file 139.2
"RTN","SROLABS",44,0)
 I Y<14 S SRIEN=$S(Y=2:15,Y=3:26,Y=4:28,Y=5:8,Y=6:24,Y=7:9,Y=8:10,Y=9:7,Y=10:21,Y=11:17,Y=12:1,Y=13:27,1:11)
"RTN","SROLABS",45,0)
 I Y>13 S SRIEN=$S(Y=14:25,Y=15:23,Y=16:18,Y=17:5,Y=18:19,Y=19:20,Y=20:13,Y=21:4,Y=22:14,Y=23:22,Y=24:2,Y=25:3,1:16)
"RTN","SROLABS",46,0)
 S SRLABNM=$P(^SRO(139.2,SRIEN,0),"^")
"RTN","SROLABS",47,0)
 Q
"RTN","SRONASS")
0^18^B17653883^B17561537
"RTN","SRONASS",1,0)
SRONASS ;BIR/MAM - NO ASSESSMENT REASON ;05/05/10
"RTN","SRONASS",2,0)
 ;;3.0; Surgery ;**38,47,83,107,121,100,125,174**;24 Jun 93;Build 8
"RTN","SRONASS",3,0)
 K SRTN S SRSOUT=0 N SRSEL D ^SROPSEL I '$D(DFN) S SRSOUT=1 G END
"RTN","SRONASS",4,0)
 D @$S(SRSEL=2:"^SROPSN",1:"STL^SROPS") I '$D(SRTN) S SRSOUT=1 G END
"RTN","SRONASS",5,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",6) I X="Y" D ASS I 'OK G END
"RTN","SRONASS",6,0)
 N SRLCK S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK G END
"RTN","SRONASS",7,0)
 D SRA^SROES
"RTN","SRONASS",8,0)
 W ! K DIR S X=$P($G(^SRF(SRTN,"RA")),"^",7) I X'="" D SET S DIR("B")=X
"RTN","SRONASS",9,0)
 S DIR(0)="130,102",DIR("A")="Reason an Assessment was not Created" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!(Y=""&(X'="@")) S SRSOUT=1 G END
"RTN","SRONASS",10,0)
 I X="@" D DELETE G END1
"RTN","SRONASS",11,0)
 I X'="" K DR,DA,DIE S DIE=130,DR="102///"_X_";323////N;284////N;Q;235////C",DA=SRTN D ^DIE K DR,DIE,DA
"RTN","SRONASS",12,0)
 D ^SROAEX S SROERR=SRTN D ^SROERR0
"RTN","SRONASS",13,0)
END1 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK
"RTN","SRONASS",14,0)
 D EXIT^SROES
"RTN","SRONASS",15,0)
END I $G(SRLCK) D UNLOCK^SROUTL(SRTN)
"RTN","SRONASS",16,0)
 K SRTN D ^SRSKILL W @IOF
"RTN","SRONASS",17,0)
 Q
"RTN","SRONASS",18,0)
LOOP ; break procedure
"RTN","SRONASS",19,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<60  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRONASS",20,0)
 Q
"RTN","SRONASS",21,0)
OTHER ; other operations
"RTN","SRONASS",22,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SRONASS",23,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SRONASS",24,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SRONASS",25,0)
 Q
"RTN","SRONASS",26,0)
SET ; expand reason for no assessment code
"RTN","SRONASS",27,0)
 S Y=X,C=$P(^DD(130,102,0),"^",2) D Y^DIQ S X=Y
"RTN","SRONASS",28,0)
 Q
"RTN","SRONASS",29,0)
ASS ; assessment already exists
"RTN","SRONASS",30,0)
 S OK=0 W !!,"According to your records, an assessment should be created for this surgical",!,"case."
"RTN","SRONASS",31,0)
ASK W !!,"Do you want to update this information and not create a surgery risk ",!,"assessment for this case ?  NO// " R SRYN:DTIME I '$T!(SRYN["^") S OK="" Q
"RTN","SRONASS",32,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="N" I "YyNn"'[SRYN S SRYN="?"
"RTN","SRONASS",33,0)
 I SRYN="?" W !!,"If this case will not be used for the risk assessment study, Enter 'YES' to ",!,"change the status.  You will then be prompted for the reason that no assessment",!,"was done.  Enter 'NO' to leave this case unchanged."
"RTN","SRONASS",34,0)
 I SRYN="?" G ASK
"RTN","SRONASS",35,0)
 I "Yy"[SRYN S OK=1
"RTN","SRONASS",36,0)
 I "Nn"[SRYN W !!,"No action taken.",!!,"Press RETURN to continue  " R X:DTIME
"RTN","SRONASS",37,0)
 Q
"RTN","SRONASS",38,0)
DELETE ; delete no assessment reason
"RTN","SRONASS",39,0)
 W !!,"If you delete the reason why no assessment was created for this case, the",!,"computer will automatically update your records to make this a non-assessed",!,"case."
"RTN","SRONASS",40,0)
 W !!,"Are you sure that you want to delete the reason ?  NO// " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SRONASS",41,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="N" I "YyNn"'[SRYN S SRYN="?"
"RTN","SRONASS",42,0)
 I SRYN="?" W !!,"By entering an '@', you have told the computer that you want to remove the ",!,"reason why no assessment was created for this case.  If this reason should be",!,"deleted, enter 'YES'." G DELETE
"RTN","SRONASS",43,0)
 I "Nn"[SRYN S SRSOUT=1 W !!,"No action taken.",!!,"Press RETURN to continue  " R X:DTIME Q
"RTN","SRONASS",44,0)
 W !!,"Updating to non-assessed status..." D DRDEL W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SRONASS",45,0)
 Q
"RTN","SRONASS",46,0)
DRDEL K DR,DIE,DA S DIE=130,DA=SRTN,DR="235///@;284///@;393///@;260///@;272///@;272.1///@;323///@;102///@;260.1///@" D ^DIE K DR,DIE,DA
"RTN","SRONASS",47,0)
 Q
"RTN","SROPROC")
0^57^B20860366^B18785433
"RTN","SROPROC",1,0)
SROPROC ;BIR/MAM - ENTER PRINCIPAL OPERATIVE PROCEDURE ;06/28/10
"RTN","SROPROC",2,0)
 ;;3.0; Surgery ;**1,38,86,174**;24 Jun 93;Build 8
"RTN","SROPROC",3,0)
OP Q:SRSOUT  W !!,"Enter the Principal Operative Procedure: " R SRSOP:DTIME S:'$T SRSOP="^" I SRSOP["^" S SRSOUT=1 Q
"RTN","SROPROC",4,0)
 I SRSOP="" W !!,"A principal operative procedure must be entered when creating a new case.",!!,"Press RETURN to enter a procedure, or '^' to quit.  " R X:DTIME S:'$T X="^" S:X["^" SRSOUT=1 G OP
"RTN","SROPROC",5,0)
 I SRSOP["@" W !!,"The principal operative procedure that you have entered contains a '@'.  This",!,"character cannot be contained in your answer." G OP
"RTN","SROPROC",6,0)
 I SRSOP[";" W !!,"The principal operative procedure cannot contain a semicolon (;).  Please",!,"re-enter the procedure, using commas in place of the semicolons." G OP
"RTN","SROPROC",7,0)
 I SRSOP?.E1C.E W !!,"Your answer contains a control character.  Please re-type the procedure name." G OP
"RTN","SROPROC",8,0)
 I SRSOP["?" W !!,"Enter the name of the principal operative procedure for this surgical case.",!,"If there is more than one procedure being performed by this surgical specialty,",!,"you will be prompted for 'OTHER OPERATIVE"
"RTN","SROPROC",9,0)
 I SRSOP["?" W " PROCEDURES'.  Your answer must be",!,"3 to 135 characters in length." G OP
"RTN","SROPROC",10,0)
 F  Q:$E(SRSOP)'=" "  S SRSOP=$E(SRSOP,2,200)
"RTN","SROPROC",11,0)
 I $L(SRSOP)>135 W !!,"The name of the principal operative procedure can be up to 135 characters in",!,"length.  Please re-enter the procedure name in an abbreviated form." G OP
"RTN","SROPROC",12,0)
 I $L(SRSOP)<3 W !!,"Your answer must be at least 3 characters in length.  Please enter more",!,"information in the procedure name." G OP
"RTN","SROPROC",13,0)
 I $L(SRSOP)>30 S X=SRSOP D PROC I '$D(X) G OP
"RTN","SROPROC",14,0)
 Q
"RTN","SROPROC",15,0)
PROC ; check for spaces
"RTN","SROPROC",16,0)
 I $E(X)=" " D EN^DDIOL("The first character must not be a space.","","!!,?5") K X Q
"RTN","SROPROC",17,0)
 I X["@" D EN^DDIOL("The procedure that you have entered contains a '@'. This character","","!!,?5"),EN^DDIOL("cannot be contained in your answer.","","!,?5") K X Q
"RTN","SROPROC",18,0)
 I X[";" D EN^DDIOL("The procedure cannot contain a semicolon (;). Please re-enter the","","!!,?5"),EN^DDIOL("procedure, using commas in place of the semicolons.","","!,?5") K X Q
"RTN","SROPROC",19,0)
 I X["^" D EN^DDIOL("The procedure that you have entered contains an up-arrow (^).","","!!,?5"),EN^DDIOL("This character cannot be contained in your answer.","","!,?5") K X Q
"RTN","SROPROC",20,0)
 I X?.E1C.E D EN^DDIOL("Your answer contains a control character. Please re-type the procedure","","!!,?5"),EN^DDIOL("name.","","!,?5") K X Q
"RTN","SROPROC",21,0)
 Q:$L(X)<30
"RTN","SROPROC",22,0)
 S SROP=X,SRFLG=0 F  D CHECK Q:SRFLG!($L(SROP)'>30)
"RTN","SROPROC",23,0)
 I '$D(X) D EN^DDIOL("Answer must contain at least one space in every 31 characters of length.","","!!,?5")
"RTN","SROPROC",24,0)
 I '$D(X) D EN^DDIOL("If you are using a comma (,) to separate information, leave a space after","","!,?5"),EN^DDIOL("it. Please re-enter the procedure name.","","!,?5")
"RTN","SROPROC",25,0)
 K SRBL,SROP,SRFLG
"RTN","SROPROC",26,0)
 Q
"RTN","SROPROC",27,0)
CHECK S SRBL=$F(SROP," ") I SRBL>32!('SRBL) S SRFLG=1 K X Q
"RTN","SROPROC",28,0)
 S SROP=$E(SROP,SRBL,$L(SROP))
"RTN","SROPROC",29,0)
 Q
"RTN","SROPROC",30,0)
WL ; input transform for waiting list procedure
"RTN","SROPROC",31,0)
 I X["?"!($L(X)<3)!($L(X)>75) D EN^DDIOL("Enter the name of the principal operative procedure for this surgical","","!!,?5"),EN^DDIOL("case. The procedure name must be 3 to 75 characters in length.","","!,?5") K X Q
"RTN","SROPROC",32,0)
 D PROC D:$D(X) EN^DDIOL("","","!")
"RTN","SROPROC",33,0)
 Q
"RTN","SROQ0")
0^46^B16293917^B16257215
"RTN","SROQ0",1,0)
SROQ0 ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;05/25/10
"RTN","SROQ0",2,0)
 ;;3.0; Surgery ;**62,70,77,50,95,123,129,153,174**;24 Jun 93;Build 8
"RTN","SROQ0",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ0",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ0",5,0)
 ;**         are prohibited.
"RTN","SROQ0",6,0)
 ;
"RTN","SROQ0",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROQ0",8,0)
 ;
"RTN","SROQ0",9,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^") I '$D(^TMP("SRDPT",$J,DFN)) S ^TMP("SRDPT",$J,DFN)="",SRDPT=SRDPT+1
"RTN","SROQ0",10,0)
 D DEM^VADPT S X1=SRSD,X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7)) I SRAGE>60 S SR60=SR60+1
"RTN","SROQ0",11,0)
 S SRDEATH=0,SRREL="" I $P(VADM(6),"^"),SRSD<$P(VADM(6),"^") S X1=SRSD,X2=30 D C^%DTC I $P(VADM(6),"^")'>X S SRDEATH=1
"RTN","SROQ0",12,0)
 I SRDEATH S ^TMP("SRDTH",$J,DFN)=""
"RTN","SROQ0",13,0)
 S SRMM=$P(SR(0),"^",3) I SRMM="J" S SRMAJOR=SRMAJOR+1
"RTN","SROQ0",14,0)
 S SRIOSTAT=$P(SR(0),"^",12) I SRIOSTAT'="I"&(SRIOSTAT'="O") S VAIP("D")=SRSD D IN5^VADPT S SRIOSTAT=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQ0",15,0)
 I SRIOSTAT="I" S SRINPAT=SRINPAT+1
"RTN","SROQ0",16,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRASA=$P(Y,"-")
"RTN","SROQ0",17,0)
 S SREM=$P(SR(0),"^",10) I SREM="EM"!(SRASA["E") S SREMERG=SREMERG+1
"RTN","SROQ0",18,0)
COMP ; check for post-op complications
"RTN","SROQ0",19,0)
 S SRPOC=0 I $O(^SRF(SRTN,16,0)) S SRPOC=1,SRCOMP=SRCOMP+1
"RTN","SROQ0",20,0)
ASA ; find ASA class for major procedures
"RTN","SROQ0",21,0)
 I SRMM="J" S Z=$E(SRASA) S:Z=""!(Z="N") Z=7 S SRASA(Z)=SRASA(Z)+1
"RTN","SROQ0",22,0)
SP ; find specialty data
"RTN","SROQ0",23,0)
 S X=$P(SR(0),"^",4),Y=$S(X:$P(^SRO(137.45,X,0),"^",2),1:"ZZ") S SRSS=$S(Y:$P(^DIC(45.3,Y,0),"^"),1:Y) I '$D(SRSPEC(SRSS)) S SRSS="ZZ"
"RTN","SROQ0",24,0)
 F I=1:1:4 S SRP(I)=$P(^TMP("SRSS",$J,SRSS),"^",I)
"RTN","SROQ0",25,0)
 I '$D(^TMP("SRDPT",$J,DFN,SRSS)) S ^TMP("SRDPT",$J,DFN,SRSS)="",SRP(1)=SRP(1)+1
"RTN","SROQ0",26,0)
 S SRP(2)=SRP(2)+1 S:SRMM="J" SRP(3)=SRP(3)+1 S:SRMM'="J" SRP(4)=SRP(4)+1
"RTN","SROQ0",27,0)
 S ^TMP("SRSS",$J,SRSS)=SRP(1)_"^"_SRP(2)_"^"_SRP(3)_"^"_SRP(4) K SRP
"RTN","SROQ0",28,0)
 D ^SROQ0A
"RTN","SROQ0",29,0)
WC ; clean wound ?
"RTN","SROQ0",30,0)
 S SRCLEAN=0 I $P($G(^SRF(SRTN,"1.0")),"^",8)="C" S SRWC=SRWC+1,SRCLEAN=1
"RTN","SROQ0",31,0)
CAT ; complication categories
"RTN","SROQ0",32,0)
 S SRW=0
"RTN","SROQ0",33,0)
 I SRPOC S SRC=0 F  S SRC=$O(^SRF(SRTN,16,SRC)) Q:'SRC  S SRCAT=$P(^SRF(SRTN,16,SRC,0),"^",2) I SRCAT D
"RTN","SROQ0",34,0)
 .S SRC(SRCAT)=SRC(SRCAT)+1 I SRCLEAN,(SRCAT=1!(SRCAT=2)) S SRW=1
"RTN","SROQ0",35,0)
 I $O(^SRF(SRTN,10,0)) S SRC=0 F  S SRC=$O(^SRF(SRTN,10,SRC)) Q:'SRC  S SRCAT=$P(^SRF(SRTN,10,SRC,0),"^",2) I SRCAT D
"RTN","SROQ0",36,0)
 .S SRC(SRCAT)=SRC(SRCAT)+1 I SRCLEAN,(SRCAT=1!(SRCAT=2)) S SRW=1
"RTN","SROQ0",37,0)
 I SRW S SRIN=SRIN+1
"RTN","SROQ0",38,0)
ENSURE ; check ensuring correct surgery compliance
"RTN","SROQ0",39,0)
 S SRVER=$G(^SRF(SRTN,"VER"))
"RTN","SROQ0",40,0)
TOV ; process time out verified field
"RTN","SROQ0",41,0)
 S SR71=$P(SRVER,"^",3) D
"RTN","SROQ0",42,0)
 .I SR71="Y" S SRTOV=SRTOV+1 Q
"RTN","SROQ0",43,0)
 .I SR71="N" S SRTONO=SRTONO+1 Q
"RTN","SROQ0",44,0)
 .S SRTONE=SRTONE+1
"RTN","SROQ0",45,0)
IC ; process imaging confirmed field
"RTN","SROQ0",46,0)
 S SR72=$P(SRVER,"^",4) D
"RTN","SROQ0",47,0)
 .I SR72="Y" S SRICY=SRICY+1 Q
"RTN","SROQ0",48,0)
 .I SR72="I" S SRICNR=SRICNR+1 Q
"RTN","SROQ0",49,0)
 .I SR72="N" S SRICNO=SRICNO+1 Q
"RTN","SROQ0",50,0)
 .S SRICNE=SRICNE+1
"RTN","SROQ0",51,0)
MRK ; process mark on surgical site confirmed field
"RTN","SROQ0",52,0)
 S SR73=$P(SRVER,"^",5) D
"RTN","SROQ0",53,0)
 .I SR73="Y" S SRSCY=SRSCY+1 Q
"RTN","SROQ0",54,0)
 .I SR73="M" S SRSCNR=SRSCNR+1 Q
"RTN","SROQ0",55,0)
 .I SR73="N" S SRSCNO=SRSCNO+1 Q
"RTN","SROQ0",56,0)
 .S SRSCNE=SRSCNE+1
"RTN","SROQ0",57,0)
HAIR ; process hair removal method
"RTN","SROQ0",58,0)
 S X=$P(SRVER,"^",6) I X="" S X="ZZ"
"RTN","SROQ0",59,0)
 I $D(SRHAIR(X)) S SRHAIR(X)=SRHAIR(X)+1 Q
"RTN","SROQ0",60,0)
 S SRHAIR("ZZ")=SRHAIR("ZZ")+1
"RTN","SROQ0",61,0)
 Q
"RTN","SROQ0",62,0)
HDR ; print page header
"RTN","SROQ0",63,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQ0",64,0)
 I SRHDR,$E(IOST,1,2)="C-" W !!,"Press RETURN to continue, or '^' to quit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROQ0",65,0)
 S SRHDR=1 I $E(IOST)'="P" W @IOF Q
"RTN","SROQ0",66,0)
 S SRPAGE=SRPAGE+1 I 'SRFLG D HDR1 Q
"RTN","SROQ0",67,0)
 W:$Y @IOF W !,?23,"QUARTERLY REPORT - SURGICAL SERVICE",?76,"PAGE",!,?35,"VERSION 3.0",?78,SRPAGE
"RTN","SROQ0",68,0)
 I SRINST["ALL DIV" W !!,?(80-$L("Hospital: "_SRINST)\2),"Hospital: ",SRINST,!,?30,"Station Number: ",SRSTATN
"RTN","SROQ0",69,0)
 I SRINST'["ALL DIV" W !!,?3,"Hospital: ",SRINST,?55,"Station Number: ",SRSTATN
"RTN","SROQ0",70,0)
 W !,?3,"For Dates: ",SRSD,?32,"to: ",SRED,?55,"Fiscal Year: ",SRYR,! F I=1:1:80 W "="
"RTN","SROQ0",71,0)
 Q
"RTN","SROQ0",72,0)
HDR1 ; print header if not quarterly report
"RTN","SROQ0",73,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQ0",74,0)
 W:$Y @IOF W !,?24,"SUMMARY REPORT - SURGICAL SERVICE",?76,"PAGE",!,?35,"VERSION 3.0",?78,SRPAGE
"RTN","SROQ0",75,0)
 W !!,?(80-$L("Hospital: "_SRINST)\2),"Hospital: ",SRINST,!,?30,"Station Number: ",SRSTATN
"RTN","SROQ0",76,0)
 W !,?20,"For Dates: ",SRSD,"  to: ",SRED I $E(IOST)="P" W ! F I=1:1:80 W "="
"RTN","SROQ0",77,0)
 Q
"RTN","SROQ1A")
0^40^B31612444^B31349144
"RTN","SROQ1A",1,0)
SROQ1A ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;05/12/10
"RTN","SROQ1A",2,0)
 ;;3.0; Surgery ;**38,62,50,129,153,160,174**;24 Jun 93;Build 8
"RTN","SROQ1A",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ1A",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ1A",5,0)
 ;**         are prohibited.
"RTN","SROQ1A",6,0)
 ;
"RTN","SROQ1A",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROQ1A",8,0)
 ;
"RTN","SROQ1A",9,0)
CC ; occurrence categories
"RTN","SROQ1A",10,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT
"RTN","SROQ1A",11,0)
 W !!!,?21,"PERIOPERATIVE OCCURRENCE CATEGORIES",!,?21,"-----------------------------------",!
"RTN","SROQ1A",12,0)
WC W !,?2,"Wound Occurrences",?31,"Total",?42,"Urinary Occurrences",?71,"Total"
"RTN","SROQ1A",13,0)
 W !,?2,"A. Superficial Incisional SSI",?31,$J(SRC(1),5),?42,"A. Renal Insufficiency",?71,$J(SRC(8),5)
"RTN","SROQ1A",14,0)
 W !,?2,"B. Deep Incisional SSI",?31,$J(SRC(2),5),?42,"B. Acute Renal Failure",?71,$J(SRC(9),5)
"RTN","SROQ1A",15,0)
 W !,?2,"C. Wound Disruption",?31,$J(SRC(22),5),?42,"C. Urinary Tract Infection",?71,$J(SRC(10),5)
"RTN","SROQ1A",16,0)
 W !,?2,"D. Organ/Space SSI",?31,$J(SRC(35),5),?42,"D. Other",?71,$J(SRC(31),5)
"RTN","SROQ1A",17,0)
 W !,?2,"E. Other",?31,$J(SRC(36),5)
"RTN","SROQ1A",18,0)
 W !,?42,"Respiratory Occurrences",?71,"Total"
"RTN","SROQ1A",19,0)
RC W !,?2,"CNS Occurrences",?31,"Total",?42,"A. Pneumonia",?71,$J(SRC(4),5)
"RTN","SROQ1A",20,0)
 W !,?2,"A. CVA/Stroke",?31,$J((SRC(12)+SRC(28)),5),?42,"B. Unplanned Intubation",?71,$J((SRC(7)+SRC(11)),5)
"RTN","SROQ1A",21,0)
 W !,?2,"B. Coma >24 Hours",?31,$J(SRC(13),5),?42,"C. Pulmonary Embolism",?71,$J(SRC(5),5)
"RTN","SROQ1A",22,0)
 W !,?2,"C. Peripheral Nerve Injury",?31,$J(SRC(14),5),?42,"D. On Ventilator >48 Hours",?71,$J(SRC(6),5)
"RTN","SROQ1A",23,0)
 W !,?2,"D. Other",?31,$J(SRC(30),5),?42,"E. Tracheostomy",?71,$J(SRC(33),5)
"RTN","SROQ1A",24,0)
 W !,?42,"F. Other",?71,$J(SRC(29),5)
"RTN","SROQ1A",25,0)
 I $E(IOST,1,2)="C-" D HDR^SROQ0 Q:SRSOUT  W !,?15,"PERIOPERATIVE OCCURRENCE CATEGORIES (Continued)",!
"RTN","SROQ1A",26,0)
CARD W !,?2,"Cardiac Occurrences",?31,"Total"
"RTN","SROQ1A",27,0)
 W !,?2,"A. Cardiac Arrest Req. CPR",?31,$J(SRC(16),5),?42,"Other Occurrences",?71,"Total"
"RTN","SROQ1A",28,0)
 W !,?2,"B. Myocardial Infarction",?31,$J(SRC(17),5),?42,"A. Bleeding/Transfusions",?71,$J(SRC(15),5)
"RTN","SROQ1A",29,0)
 W !,?2,"C. Endocarditis",?31,$J(SRC(23),5),?42,"B. Graft/Prosthesis/Flap"
"RTN","SROQ1A",30,0)
 W !,?2,"D. Low Cardiac Output >6 Hrs.",?31,$J(SRC(24),5),?62,"Failure",?71,$J(SRC(19),5)
"RTN","SROQ1A",31,0)
 W !,?2,"E. Mediastinitis",?31,$J(SRC(25),5),?42,"C. DVT/Thrombophlebitis",?71,$J(SRC(20),5)
"RTN","SROQ1A",32,0)
 W !,?2,"F. Repeat Card Surg Proc",?31,$J(SRC(27),5),?42,"D. Systemic Sepsis",?71,$J(SRC(3),5)
"RTN","SROQ1A",33,0)
 W !,?2,"G. New Mech Circulatory Sup",?31,$J(SRC(34),5),?42,"E. Reoperation for Bleeding",?71,$J(SRC(26),5)
"RTN","SROQ1A",34,0)
 W !,?2,"H. Postop Atrial Fibrillation",?31,$J(SRC(39),5),?42,"F. C. difficile Colitis",?71,$J(SRC(38),5)
"RTN","SROQ1A",35,0)
 W !,?2,"I. Other",?31,$J(SRC(32),5),?42,"G. Other",?71,$J(SRC(21),5)
"RTN","SROQ1A",36,0)
CLEAN ; clean wounds
"RTN","SROQ1A",37,0)
 S:'SRWC SRWC=1 W !!,?2,"Clean Wound Infection Rate: ",$J((SRIN/SRWC*100),5,1),"%"
"RTN","SROQ1A",38,0)
 Q
"RTN","SROQ1A",39,0)
BORD W !,?14 F I=1:1:51 W "*"
"RTN","SROQ1A",40,0)
 Q
"RTN","SROQ1A",41,0)
ACTION ; alert action
"RTN","SROQ1A",42,0)
 D CURRENT^SROQT W @IOF D BORD W !,?14,"*",?64,"*",!,?14,"*    The Surgical Service Quarterly Report for    *",!,?14,"*    quarter #"_SRQTR_" of fiscal year "_(SRYR+1700)_" is now due.   *",!,?14,"*",?64,"*" D BORD
"RTN","SROQ1A",43,0)
 W !!,"NOTE: The report will be transmitted automatically on "_$S(SRQTR=1:"February 14",SRQTR=2:"May 15",SRQTR=3:"August 14",1:"November 14")_" to the",!,"      national database if not manually transmitted before then."
"RTN","SROQ1A",44,0)
 K DIR S DIR("?",1)="Choose the number matching your choice of action or press the return",DIR("?")="key to continue or '^' to exit."
"RTN","SROQ1A",45,0)
 S DIR(0)="SO^1:Print report only;2:Transmit report only;3:Both print and transmit report" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y D ^SRSKILL Q
"RTN","SROQ1A",46,0)
 I Y=2 S DIR("A")="Do you want to transmit the Quarterly Report now ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR Q:$D(DTOUT)!$D(DUOUT)!'Y  D AUTO^SROQT Q
"RTN","SROQ1A",47,0)
 I Y S SRT=$S(Y=3:1,1:0) D VAR^SROQT,IO^SROQ
"RTN","SROQ1A",48,0)
 Q
"RTN","SROQ1A",49,0)
ALERT ; send alert to SR-QUARTERLY mailgroup
"RTN","SROQ1A",50,0)
 S XQAID="SRQTR-"_SRFQ,XQAKILL=0 D DELETEA^XQALERT
"RTN","SROQ1A",51,0)
 S XQA("G.SR-QUARTERLY")="",XQAMSG="The Quarterly Report to VHA HQ for fiscal quarter #"_SRQTR_" is now due.",XQAROU="ACTION^SROQ1A",XQAID="SRQTR-"_SRFQ D SETUP^XQALERT
"RTN","SROQ1A",52,0)
 Q
"RTN","SROQ1A",53,0)
MORT ; look for operations in next quarter
"RTN","SROQ1A",54,0)
 S X1=SRSTART,X2=-30 D C^%DTC S SRSD1=9999999.999999-(X-.0001),X1=SREND,X2=30 D C^%DTC S SRED1=9999999.999999-(X+.9999)
"RTN","SROQ1A",55,0)
 S DFN=0 F  S DFN=$O(^TMP("SRDTH",$J,DFN)) Q:'DFN  D DEM^VADPT S X1=$P(VADM(6),"^"),SRD=9999999.999999-X1,X2=-30 D C^%DTC S SRD1=(9999999.999999-X) D LATER
"RTN","SROQ1A",56,0)
 Q
"RTN","SROQ1A",57,0)
LATER ; gather cases performed within 30 days of death on death patients
"RTN","SROQ1A",58,0)
 K ^TMP("SRTN",$J) S SRINV=SRED1 F  S SRINV=$O(^SRF("ADT",DFN,SRINV)) Q:'SRINV  I SRINV<SRSD1,SRINV<SRD1,SRINV>SRD S SRTN=0 F  S SRTN=$O(^SRF("ADT",DFN,SRINV,SRTN)) Q:'SRTN  D
"RTN","SROQ1A",59,0)
 .Q:$P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")
"RTN","SROQ1A",60,0)
 .S ^TMP("SRTN",$J,$P(^SRF(SRTN,0),"^",9),SRTN)=""
"RTN","SROQ1A",61,0)
 S SRDT=0 F  S SRDT=$O(^TMP("SRTN",$J,SRDT)) Q:'SRDT  S SRTN=0 F  S SRTN=$O(^TMP("SRTN",$J,SRDT,SRTN)) Q:'SRTN  D CASE
"RTN","SROQ1A",62,0)
 Q
"RTN","SROQ1A",63,0)
CASE ; examine each case on death patients performed within 30 days of death
"RTN","SROQ1A",64,0)
 S SR(0)=^SRF(SRTN,0),SRSS=$P(SR(0),"^",4) S SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^",2),1:"ZZ")
"RTN","SROQ1A",65,0)
 S SR(0)=^SRF(SRTN,0),X=$P(SR(0),"^",4),Y=$S(X:$P(^SRO(137.45,X,0),"^",2),1:"ZZ") S SRSS=$S(Y:$P(^DIC(45.3,Y,0),"^"),1:"ZZ") I '$D(SRSPEC(SRSS)) S SRSS="ZZ"
"RTN","SROQ1A",66,0)
 S SRIOSTAT=$P(SR(0),"^",12) I SRIOSTAT'="I"&(SRIOSTAT'="O") S VAIP("D")=SRDT D IN5^VADPT S SRIOSTAT=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQ1A",67,0)
 S SRREL=$P($G(^SRF(SRTN,.4)),"^",7) I SRREL="R" S ^TMP("SRSP",$J,DFN,(9999999-SRDT))=SRSS,^TMP("SRINOUT",$J,DFN,(9999999-SRDT))=SRIOSTAT
"RTN","SROQ1A",68,0)
 S ^TMP("SREXP",$J,DFN)=SRTN_"^"_SRSS,^TMP("SRIOD",$J,DFN)=SRTN_"^"_SRIOSTAT
"RTN","SROQ1A",69,0)
 S SRFLAG=0 D NDEX^SROQ0A
"RTN","SROQ1A",70,0)
 Q
"RTN","SROQ2")
0^38^B33212600^B33212500
"RTN","SROQ2",1,0)
SROQ2 ;BIR/ADM - SUMMARY REPORT ;05/11/10
"RTN","SROQ2",2,0)
 ;;3.0; Surgery ;**38,62,70,50,95,123,129,134,153,160,163,174**;24 Jun 93;Build 8
"RTN","SROQ2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ2",5,0)
 ;**         are prohibited.
"RTN","SROQ2",6,0)
 ;
"RTN","SROQ2",7,0)
 S SRSOUT=0 W @IOF,!,"SUMMARY REPORT FOR SURGICAL SERVICE"
"RTN","SROQ2",8,0)
 W !!,"Enter date range for data to be included on report."
"RTN","SROQ2",9,0)
SDATE ; enter starting date
"RTN","SROQ2",10,0)
 W !,"Start with date:  " R X:DTIME I '$T!(X["^")!(X="") S SRSOUT=1 G END
"RTN","SROQ2",11,0)
 I X["?" W !,"Enter the EARLIEST date for data to be included in this report." S X="?",%DT="EX" D ^%DT G SDATE
"RTN","SROQ2",12,0)
 S %DT="EXP" D ^%DT G SDATE:Y<1 S SRSTART=Y
"RTN","SROQ2",13,0)
 I SRSTART>DT W !!,"Cannot report on operations for future dates !",! G SDATE
"RTN","SROQ2",14,0)
 S SRAC=$O(^SRF("AC",0)) I SRSTART<SRAC S Y=SRAC D DD^%DT S SRAC1=$E(Y,1,12) W !!,"NOTE: ",$S(SRAC:"No surgical case data exists before "_SRAC1_".",1:"There are no surgical cases on record !")
"RTN","SROQ2",15,0)
EDATE ; enter ending date
"RTN","SROQ2",16,0)
 W !!,"End with date:  " R X:DTIME I '$T!(X["^")!(X="") S SRSOUT=1 G END
"RTN","SROQ2",17,0)
 I X["?" W !,"Enter the LATEST date for data to be included in this report." S X="?",%DT="EX" D ^%DT G EDATE
"RTN","SROQ2",18,0)
 S %DT="EXP" D ^%DT G EDATE:Y<1 S SREND=Y
"RTN","SROQ2",19,0)
 I SRSTART>SREND W !!,"The ENDING date must be later than the BEGINNING date.  Please try again.",! G SDATE
"RTN","SROQ2",20,0)
 I SREND>DT W !!,"Cannot report on operations for future dates !",! G EDATE
"RTN","SROQ2",21,0)
 S SRFLG=0
"RTN","SROQ2",22,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,U),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,U,2))
"RTN","SROQ2",23,0)
IO W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print report on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQ2",24,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Summary Report - Surgical Service",(ZTSAVE("SRSTART"),ZTSAVE("SRINSTP"),ZTSAVE("SREND"),ZTSAVE("SRFLG"))="",ZTRTN="EN^SROQ2" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQ2",25,0)
EN ; entry point when queued
"RTN","SROQ2",26,0)
 D SET,^SROQ1,END
"RTN","SROQ2",27,0)
 Q
"RTN","SROQ2",28,0)
SET ; collect data
"RTN","SROQ2",29,0)
 S SRSD=SRSTART-.0001,SRED=SREND+.9999 D ZERO
"RTN","SROQ2",30,0)
 N SRXX S SRXX=$$SITE^SROVAR
"RTN","SROQ2",31,0)
 I SRFLG=1 D
"RTN","SROQ2",32,0)
 .I SRMULT D  Q
"RTN","SROQ2",33,0)
 ..S:'SRIEN SRINST=$P(SRXX,"^",2),SRSTATN=$P(SRXX,"^",3)
"RTN","SROQ2",34,0)
 ..S:'$D(SRINSTP) SRINSTP="ALL DIVISIONS",SRINST=SRINST_" - ALL DIVISIONS"
"RTN","SROQ2",35,0)
 .S SRINSTP=$P(SRXX,"^"),SRINST=$P(SRXX,"^",2),SRSTATN=+$P(SRXX,"^",3)
"RTN","SROQ2",36,0)
 I 'SRFLG D
"RTN","SROQ2",37,0)
 .I SRINSTP["ALL DIV" S SRINST=$P(SRXX,"^",2)_" - ALL DIVISIONS",SRSTATN=$P(SRXX,"^",3) Q
"RTN","SROQ2",38,0)
 .S SRINST=$$GET1^DIQ(4,SRINSTP,.01),SRSTATN=$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROQ2",39,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:SRSD>SRED!('SRSD)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROQ2",40,0)
 D MORT^SROQ1A,DEATH S Y=SRSTART D DD^%DT S SRSD=$E(Y,1,12) S Y=SREND D DD^%DT S SRED=$E(Y,1,12),SRYR=$E(Y,9,12) I SRFLG,$E(SRSTART,4,5)=10 S SRYR=SRYR+1
"RTN","SROQ2",41,0)
 Q
"RTN","SROQ2",42,0)
END W ! I 'SRSOUT,$E(IOST,1,2)="C-" W !!,"Press <RET> to continue  " R X:DTIME
"RTN","SROQ2",43,0)
 D KTMP W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQ2",44,0)
 D ^SRSKILL
"RTN","SROQ2",45,0)
 K SR14,SR71,SR72,SR73,SRADMT,SRHAIR,SRHOSP,SRICNR,SRICNE,SRICNO,SRICY,SRIDP,SRINSTP,SRINV,SRIOSTAT,SRTN,SRTONE,SRTONO,SRTOV,SRVER,SRSCY,SRSCNR,SRSCNO,SRSCNE
"RTN","SROQ2",46,0)
 D ^%ZISC W @IOF
"RTN","SROQ2",47,0)
 Q
"RTN","SROQ2",48,0)
KTMP F I="SRDEATH","SRDPT","SRDREL","SRDTH","SREXP","SRINOUT","SRIOD","SRP","SRPROC","SRREL","SRSP","SRSS","SRTN" K ^TMP(I,$J)
"RTN","SROQ2",49,0)
 Q
"RTN","SROQ2",50,0)
CASE ;  examine case
"RTN","SROQ2",51,0)
 Q:$P($G(^SRF(SRTN,30)),"^")!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")
"RTN","SROQ2",52,0)
 S SRCASES=SRCASES+1 D ^SROQ0
"RTN","SROQ2",53,0)
 Q
"RTN","SROQ2",54,0)
ZERO ; set counters to 0
"RTN","SROQ2",55,0)
 S (SRTOV,SRTONO,SRTONE,SRICY,SRICNO,SRICNR,SRICNE,SRSCY,SRSCNR,SRSCNO,SRSCNE)=0
"RTN","SROQ2",56,0)
 D KTMP S (SR60,SRADMT,SRCASES,SRCOMP,SRDPT,SREMERG,SRIN,SRINPAT,SRIX,SRMAJOR,SRMORT,SROPD,SRSOUT,SRWC)=0 F I=1:1:7 S SRASA(I)=0
"RTN","SROQ2",57,0)
 S SRSS=0 F I=48:1:62,78 S SRSPEC(I)=I,^TMP("SRSS",$J,I)="0^0^0^0",SREXP(I)=0
"RTN","SROQ2",58,0)
 S ^TMP("SRSS",$J,"ZZ")="0^0^0^0",SREXP("ZZ")=0
"RTN","SROQ2",59,0)
 K SRATT F I=9:1:14,99 S (SRATT(I),SRATT("J",I),SRATT("N",I))=0
"RTN","SROQ2",60,0)
 F SRPROC=1:1:12 S ^TMP("SRPROC",$J,SRPROC)="0^0",SRDEATH(SRPROC)=0
"RTN","SROQ2",61,0)
 S (SRINV("I"),SRINV("O"))=0 F I=1:1:39 S SRC(I)=0
"RTN","SROQ2",62,0)
 F I="C","D","N","P","S","U","O","ZZ" S SRHAIR(I)=0
"RTN","SROQ2",63,0)
 Q
"RTN","SROQ2",64,0)
DEATH ; tabulate deaths
"RTN","SROQ2",65,0)
 S SRED=SREND+.9999,SRSD=SRSTART-.0001,DFN=0 F  S DFN=$O(^TMP("SREXP",$J,DFN)) Q:'DFN  D SPEC
"RTN","SROQ2",66,0)
 S SRSS=0 F  S SRSS=$O(SREXP(SRSS)) Q:SRSS=""  S ^TMP("SRSS",$J,SRSS)=^TMP("SRSS",$J,SRSS)_"^"_SREXP(SRSS)
"RTN","SROQ2",67,0)
 S DFN=0 F  S DFN=$O(^TMP("SRDEATH",$J,DFN)) Q:'DFN  D IP
"RTN","SROQ2",68,0)
 F J=1:1:12 S ^TMP("SRPROC",$J,J)=^TMP("SRPROC",$J,J)_"^"_SRDEATH(J)
"RTN","SROQ2",69,0)
 S DFN=0 F  S DFN=$O(^TMP("SRIOD",$J,DFN)) Q:'DFN  D INOUT
"RTN","SROQ2",70,0)
 Q
"RTN","SROQ2",71,0)
SPEC ; determine related specialty
"RTN","SROQ2",72,0)
 I $O(^TMP("SRSP",$J,DFN,0))="" S Y=^TMP("SREXP",$J,DFN),SRTN=$P(Y,"^"),SRSS=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)  S SREXP(SRSS)=SREXP(SRSS)+1,SRMORT=SRMORT+1 Q
"RTN","SROQ2",73,0)
 S SRDT=$O(^TMP("SRSP",$J,DFN,0)) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD) S SRSS=^TMP("SRSP",$J,DFN,SRDT),SREXP(SRSS)=SREXP(SRSS)+1,SRMORT=SRMORT+1
"RTN","SROQ2",74,0)
 Q
"RTN","SROQ2",75,0)
IP ; determine related index procedure (if any)
"RTN","SROQ2",76,0)
 I $O(^TMP("SRP",$J,DFN,0))="" S Y=^TMP("SRDEATH",$J,DFN),SRTN=$P(Y,"^"),SRPROC=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)  S SRDEATH(SRPROC)=SRDEATH(SRPROC)+1 Q
"RTN","SROQ2",77,0)
 S SRDT=$O(^TMP("SRP",$J,DFN,0)) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD) S SRPROC=^TMP("SRP",$J,DFN,SRDT),SRDEATH(SRPROC)=SRDEATH(SRPROC)+1
"RTN","SROQ2",78,0)
 Q
"RTN","SROQ2",79,0)
INOUT ; decide if death is in or out-pat surgery death
"RTN","SROQ2",80,0)
 S SRIOSTAT="" I $O(^TMP("SRINOUT",$J,DFN,0))="" S Y=^TMP("SRIOD",$J,DFN),SRTN=$P(Y,"^"),SRIOSTAT=$P(Y,"^",2),SRDT=$P(^SRF(SRTN,0),"^",9) Q:SRDT>SRED!(SRDT<SRSD)!(SRIOSTAT'="O")  S SROPD=SROPD+1 Q
"RTN","SROQ2",81,0)
 S SRDT=$O(^TMP("SRINOUT",$J,DFN,0)) S SRIOSTAT=^TMP("SRINOUT",$J,DFN,SRDT) I (9999999-SRDT)'>SRED&((9999999-SRDT)'<SRSD)&(SRIOSTAT="O") S SROPD=SROPD+1
"RTN","SROQ2",82,0)
 Q
"RTN","SROQM1")
0^41^B26795235^B26419975
"RTN","SROQM1",1,0)
SROQM1 ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;05/11/10
"RTN","SROQM1",2,0)
 ;;3.0; Surgery ;**38,62,70,129,153,160,174**;24 Jun 93;Build 8
"RTN","SROQM1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQM1",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQM1",5,0)
 ;**         are prohibited.
"RTN","SROQM1",6,0)
 ;
"RTN","SROQM1",7,0)
NDEX ; index procedures
"RTN","SROQM1",8,0)
 D BLANK S SRBLANK="" F I=1:1:31 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",9,0)
 S SRLINE=SRBLANK_"INDEX PROCEDURES" D LINE S SRLINE=SRBLANK_"----------------" D LINE
"RTN","SROQM1",10,0)
 F I=1:1:22 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",11,0)
 S SRLINE=SRBLANK_"CASES WITH" D LINE S SRBLANK="" F I=1:1:29 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",12,0)
 S SRLINE=SRBLANK_"CASES        DEATHS     OCCURRENCES" D LINE
"RTN","SROQM1",13,0)
 S SRLINE=SRBLANK_"-----        ------     -----------" D LINE
"RTN","SROQM1",14,0)
 F J=1:1:12 D IXUT
"RTN","SROQM1",15,0)
CC ; occurrence categories
"RTN","SROQM1",16,0)
 D BLANK S SRBLANK="" F I=1:1:21 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",17,0)
 S SRLINE=SRBLANK_"PERIOPERATIVE OCCURRENCE CATEGORIES" D LINE S SRLINE=SRBLANK_"-----------------------------------" D LINE
"RTN","SROQM1",18,0)
WC D BLANK S SRLINE=" Wound Occurrences            Total      Urinary Occurrences          Total" D LINE
"RTN","SROQM1",19,0)
 S SRLINE=" A. Superficial Incisional SSI"_$J(SRC(1),5)_"      A. Renal Insufficiency       "_$J(SRC(8),5) D LINE
"RTN","SROQM1",20,0)
 S SRLINE=" B. Deep Incisional SSI       "_$J(SRC(2),5)_"      B. Acute Renal Failure       "_$J(SRC(9),5) D LINE
"RTN","SROQM1",21,0)
 S SRLINE=" C. Wound Disruption          "_$J(SRC(22),5)_"      C. Urinary Tract Infection   "_$J(SRC(10),5) D LINE
"RTN","SROQM1",22,0)
 S SRLINE=" D. Organ/Space SSI           "_$J(SRC(35),5)_"      D. Other                     "_$J(SRC(31),5) D LINE
"RTN","SROQM1",23,0)
 S SRLINE=" E. Other                     "_$J(SRC(36),5) D LINE
"RTN","SROQM1",24,0)
RC S SRLINE="                                         Respiratory Occurrences      Total" D LINE
"RTN","SROQM1",25,0)
   S SRLINE=" CNS Occurrences              Total      A. Pneumonia                 "_$J(SRC(4),5) D LINE
"RTN","SROQM1",26,0)
 S SRLINE=" A. CVA/Stroke                "_$J((SRC(12)+SRC(28)),5)_"      B. Unplanned Intubation      "_$J((SRC(7)+SRC(11)),5) D LINE
"RTN","SROQM1",27,0)
 S SRLINE=" B. Coma >24 Hours            "_$J(SRC(13),5)_"      C. Pulmonary Embolism        "_$J(SRC(5),5) D LINE
"RTN","SROQM1",28,0)
 S SRLINE=" C. Peripheral Nerve Injury   "_$J(SRC(14),5)_"      D. On Ventilator >48 Hours   "_$J(SRC(6),5) D LINE
"RTN","SROQM1",29,0)
 S SRLINE=" D. Other                     "_$J(SRC(30),5)_"      E. Tracheostomy              "_$J(SRC(33),5) D LINE
"RTN","SROQM1",30,0)
 S SRBLANK="" F I=1:1:41 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",31,0)
 S SRLINE=SRBLANK_"F. Other                     "_$J(SRC(29),5) D LINE
"RTN","SROQM1",32,0)
CARD S SRLINE=" Cardiac Occurrences          Total" D LINE
"RTN","SROQM1",33,0)
 S SRLINE=" A. Cardiac Arrest Req. CPR   "_$J(SRC(16),5)_"      Other Occurrences            Total" D LINE
"RTN","SROQM1",34,0)
 S SRLINE=" B. Myocardial Infarction     "_$J(SRC(17),5)_"      A. Bleeding/Transfusions     "_$J(SRC(15),5) D LINE
"RTN","SROQM1",35,0)
 S SRLINE=" C. Endocarditis              "_$J(SRC(23),5)_"      B. Graft/Prosthesis/Flap" D LINE
"RTN","SROQM1",36,0)
 S SRLINE=" D. Low Cardiac Output >6 Hrs."_$J(SRC(24),5)_"                          Failure  "_$J(SRC(19),5) D LINE
"RTN","SROQM1",37,0)
 S SRLINE=" E. Mediastinitis             "_$J(SRC(25),5)_"      C. DVT/Thrombophlebitis      "_$J(SRC(20),5) D LINE
"RTN","SROQM1",38,0)
 S SRLINE=" F. Repeat Card Surg Proc     "_$J(SRC(27),5)_"      D. Systemic Sepsis           "_$J(SRC(3),5) D LINE
"RTN","SROQM1",39,0)
 S SRLINE=" G. New Mech Circulatory Sup  "_$J(SRC(34),5)_"      E. Reoperation for Bleeding  "_$J(SRC(26),5) D LINE
"RTN","SROQM1",40,0)
 S SRLINE=" H. Postop Atrial Fibrillation"_$J(SRC(39),5)_"      F. C. difficile Colitis      "_$J(SRC(38),5) D LINE
"RTN","SROQM1",41,0)
 S SRLINE=" I. Other                     "_$J(SRC(32),5)_"      G. Other                     "_$J(SRC(21),5) D LINE,BLANK
"RTN","SROQM1",42,0)
 S:'SRWC SRWC=1 S SRLINE=" Clean Wound Infection Rate: "_$J((SRIN/SRWC*100),5,1)_"%" D LINE
"RTN","SROQM1",43,0)
 Q
"RTN","SROQM1",44,0)
IXUT ; get index procedure data from ^TMP
"RTN","SROQM1",45,0)
 F K=1:1:3 S SRP(K)=$P(^TMP("SRPROC",$J,J),"^",K)
"RTN","SROQM1",46,0)
 D IXOUT^SROQ0A D
"RTN","SROQM1",47,0)
 .I SROP["," D  S SROP=$P(SROP,",",2)
"RTN","SROQM1",48,0)
 ..I J=7 S SRLINE="    "_$P(SROP,",") D LINE
"RTN","SROQM1",49,0)
 .S SRLINE="    "_SROP S SRBLANK="" F I=1:1:(28-$L(SRLINE)) S SRBLANK=SRBLANK_" "
"RTN","SROQM1",50,0)
 S SRLINE=SRLINE_SRBLANK_$J(SRP(1),6)_"       "_$J(SRP(3),6)_"       "_$J(SRP(2),6) D LINE
"RTN","SROQM1",51,0)
 Q
"RTN","SROQM1",52,0)
BLANK ; blank line
"RTN","SROQM1",53,0)
 S ^TMP("SRMSG",$J,SRCNT)="",SRCNT=SRCNT+1
"RTN","SROQM1",54,0)
 Q
"RTN","SROQM1",55,0)
LINE ; store line in ^TMP
"RTN","SROQM1",56,0)
 S ^TMP("SRMSG",$J,SRCNT)=SRLINE,SRCNT=SRCNT+1
"RTN","SROQM1",57,0)
 Q
"RTN","SROQM1",58,0)
HAIR ; hair removal methods
"RTN","SROQM1",59,0)
 D BLANK,BLANK S SRBLANK="" F I=1:1:19 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",60,0)
 S SRLINE=SRBLANK_"PREOPERATIVE HAIR REMOVAL METHODS SUMMARY" D LINE
"RTN","SROQM1",61,0)
 S SRLINE=SRBLANK_"-----------------------------------------" D LINE
"RTN","SROQM1",62,0)
 D BLANK F I=1:1:23 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",63,0)
 S SRLINE=SRBLANK_"CASES    % OF TOTAL" D LINE
"RTN","SROQM1",64,0)
 S SRLINE=SRBLANK_"-----    ----------" D LINE
"RTN","SROQM1",65,0)
 S SRBLANK="" F I=1:1:15 S SRBLANK=SRBLANK_" "
"RTN","SROQM1",66,0)
 S SRLINE=SRBLANK_"   TOTAL CASES PERFORMED:"_$J(SRCASES,6)_"       "
"RTN","SROQM1",67,0)
 S:SRCASES SRLINE=SRLINE_"100.0" D LINE,BLANK
"RTN","SROQM1",68,0)
 S SRLINE=SRBLANK_SRBLANK_"  CLIPPER:"_$J(SRHAIR("C"),6)_"       "
"RTN","SROQM1",69,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("C")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",70,0)
 S SRLINE=SRBLANK_"              DEPILATORY:"_$J(SRHAIR("D"),6)_"       "
"RTN","SROQM1",71,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("D")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",72,0)
 S SRLINE=SRBLANK_"         NO HAIR REMOVED:"_$J(SRHAIR("N"),6)_"       "
"RTN","SROQM1",73,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("N")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",74,0)
 S SRLINE=SRBLANK_"PATIENT REMOVED OWN HAIR:"_$J(SRHAIR("P"),6)_"       "
"RTN","SROQM1",75,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("P")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",76,0)
 S SRLINE=SRBLANK_SRBLANK_"  SHAVING:"_$J(SRHAIR("S"),6)_"       "
"RTN","SROQM1",77,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("S")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",78,0)
 N SRNDOC S SRNDOC=SRHAIR("U")+SRHAIR("ZZ")
"RTN","SROQM1",79,0)
 S SRLINE=SRBLANK_"          NOT DOCUMENTED:"_$J(SRNDOC,6)_"       "
"RTN","SROQM1",80,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRNDOC/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",81,0)
 S SRLINE=SRBLANK_SRBLANK_"    OTHER:"_$J(SRHAIR("O"),6)_"       "
"RTN","SROQM1",82,0)
 S:SRCASES SRLINE=SRLINE_$J(((SRHAIR("O")/SRCASES)*100),5,1) D LINE
"RTN","SROQM1",83,0)
 Q
"RTN","SROQT")
0^39^B35140873^B35140815
"RTN","SROQT",1,0)
SROQT ;BIR/ADM - QTRLY RPT MESSAGE TO SERVER ;05/11/10
"RTN","SROQT",2,0)
 ;;3.0; Surgery ;**38,43,62,67,70,77,50,95,123,126,129,153,160,163,174**;24 Jun 93;Build 8
"RTN","SROQT",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQT",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQT",5,0)
 ;**         are prohibited.
"RTN","SROQT",6,0)
 ;
"RTN","SROQT",7,0)
 S SRD=^XMB("NETNAME"),ISC=0 I $E(SRD,1,3)="FO-"!(SRD["ISC-")!(SRD["ISC.")!(SRD["FORUM")!(SRD["TST")!(SRD[".FO-") S ISC=1
"RTN","SROQT",8,0)
 K ^TMP("SRQTR",$J),^TMP("SRATT",$J) N SRDIV S SRDIV=$P($$SITE^SROVAR,"^",3)_$S(SRIEN:"-"_SRIEN,1:"")
"RTN","SROQT",9,0)
 S SRSMO=$E(SRSTART,4,5),SRQTR=$S(SRSMO=10:1,SRSMO="01":2,SRSMO="04":3,1:4),SRFYR=$S(SRQTR=1:$E(SRSTART,1,3)+1,1:$E(SRSTART,1,3))+1700,SRFQ=SRFYR_SRQTR
"RTN","SROQT",10,0)
 S SRNODE=SRDIV_"^1^"_SRFQ_"^"_DT_"^"_SRCASES_"^"_SRMAJOR_"^"_SRMORT_"^"_SRCOMP_"^"_SRINPAT_"^"_SREMERG_"^"_SR60 F I=1:1:7 S SRNODE=SRNODE_"^"_SRASA(I)
"RTN","SROQT",11,0)
 S SRNODE=SRNODE_"^"_SROPD_"^"_SRINV("O")_"^"_SRINV("I")_"^"_SRADMT
"RTN","SROQT",12,0)
 I SRIEN S SRNODE=SRNODE_"^"_SRINST_"^"_SRSTATN
"RTN","SROQT",13,0)
 S ^TMP("SRQTR",$J,1)=SRNODE
"RTN","SROQT",14,0)
SP S SRNODE=SRDIV_"^2" F SRSS=50:1:55 S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",15,0)
 S ^TMP("SRQTR",$J,2)=SRNODE
"RTN","SROQT",16,0)
 S SRNODE=SRDIV_"^3" F SRSS=56:1:61 S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",17,0)
 S ^TMP("SRQTR",$J,3)=SRNODE
"RTN","SROQT",18,0)
 S SRNODE=SRDIV_"^4" F SRSS=62,48,49,78,"ZZ" S SRNODE=SRNODE_"^"_^TMP("SRSS",$J,SRSS)
"RTN","SROQT",19,0)
 S ^TMP("SRQTR",$J,4)=SRNODE
"RTN","SROQT",20,0)
IX S SRNODE=SRDIV_"^5" F J=1:1:6 D PROC
"RTN","SROQT",21,0)
 S SRNODE=SRNODE_"^^^" F J=9:1:12 D PROC
"RTN","SROQT",22,0)
 S ^TMP("SRQTR",$J,5)=SRNODE
"RTN","SROQT",23,0)
COMP S SRNODE=SRDIV_"^6" F I=1:1:39 S SRNODE=SRNODE_"^"_SRC(I)
"RTN","SROQT",24,0)
 S ^TMP("SRQTR",$J,6)=SRNODE
"RTN","SROQT",25,0)
RES S X="" F I=1:1:14,99 S X=X_$G(SRATT(I))_"^"
"RTN","SROQT",26,0)
 S ^TMP("SRATT",$J,"TOTAL")=X
"RTN","SROQT",27,0)
 F K="J","N" S X="" D
"RTN","SROQT",28,0)
 .F I=1:1:14,99 S X=X_$G(SRATT(K,I))_"^"
"RTN","SROQT",29,0)
 .S ^TMP("SRATT",$J,K)=X
"RTN","SROQT",30,0)
 S SRNODE=SRDIV_"^7^"_SRWC_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",15)
"RTN","SROQT",31,0)
 S SRNODE=SRNODE_"^"_SRIN_"^"_$P(^TMP("SRATT",$J,"J"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"J"),"^",15)_"^"_$P(^TMP("SRATT",$J,"N"),"^",1,4)_"^"_$P(^TMP("SRATT",$J,"N"),"^",15)
"RTN","SROQT",32,0)
 S SRNODE=SRNODE_"^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",5,8)_"^"_$P(^TMP("SRATT",$J,"J"),"^",5,8)_"^"_$P(^TMP("SRATT",$J,"N"),"^",5,8)
"RTN","SROQT",33,0)
 S ^TMP("SRQTR",$J,7)=SRNODE
"RTN","SROQT",34,0)
HIP S SRNODE=SRDIV_"^8" F J=7,8 D PROC
"RTN","SROQT",35,0)
 S SRNODE=SRNODE_"^"_SRTOV_"^"_SRTONO_"^"_SRTONE_"^"_SRICY_"^"_SRICNO_"^"_SRICNR_"^"_SRICNE_"^"_SRSCY_"^"_SRSCNO_"^"_SRSCNR_"^"_SRSCNE
"RTN","SROQT",36,0)
 F I="C","D","N","P","S","U","O","ZZ" S SRNODE=SRNODE_"^"_SRHAIR(I)
"RTN","SROQT",37,0)
 S ^TMP("SRQTR",$J,8)=SRNODE
"RTN","SROQT",38,0)
 S SRNODE=SRDIV_"^9^"_$P(^TMP("SRATT",$J,"TOTAL"),"^",9,14)_"^"_$P(^TMP("SRATT",$J,"J"),"^",9,14)_"^"_$P(^TMP("SRATT",$J,"N"),"^",9,14)
"RTN","SROQT",39,0)
 S ^TMP("SRQTR",$J,9)=SRNODE
"RTN","SROQT",40,0)
MSG ; create mail message to server
"RTN","SROQT",41,0)
 S X=$$ACTIVE^XUSER(DUZ) I '+X S XMDUZ=.5
"RTN","SROQT",42,0)
 S XMSUB="QUARTERLY REPORT - SURGICAL SERVICE"
"RTN","SROQT",43,0)
 K XMY I 'ISC S (XMY("S.SRCOSERV@FO-HINES.MED.VA.GOV"),XMY("G.SRCOSERV@FO-HINES.MED.VA.GOV"))=""
"RTN","SROQT",44,0)
 I ISC S XMY("G.SR-QUARTERLY@"_SRD)=""
"RTN","SROQT",45,0)
 S XMTEXT="^TMP(""SRQTR"",$J," N I D ^XMD K ^TMP("SRQTR",$J),XMY,XMTEXT
"RTN","SROQT",46,0)
 Q:SRIEN
"RTN","SROQT",47,0)
MSG1 S XMY("G.SR-QUARTERLY@"_SRD)="",XMSUB="QUARTERLY REPORT TRANSMISSION"
"RTN","SROQT",48,0)
 S SRMSG(1)="The Quarterly Report for quarter #"_$E(SRFQ,5)_" of fiscal year "_$E(SRFQ,1,4)_" has been"
"RTN","SROQT",49,0)
 S SRMSG(2)="transmitted to the central database of Surgical Service, VHA Headquarters."
"RTN","SROQT",50,0)
 S XMTEXT="SRMSG(" N I D ^XMD K XMY,XMTEXT
"RTN","SROQT",51,0)
 D ^SROQM,SITE
"RTN","SROQT",52,0)
 Q
"RTN","SROQT",53,0)
PROC S X=^TMP("SRPROC",$J,J),SRNODE=SRNODE_"^"_$P(X,"^")_"^"_$P(X,"^",3)_"^"_$P(X,"^",2)
"RTN","SROQT",54,0)
 Q
"RTN","SROQT",55,0)
QUE ; queue creation of report to central database
"RTN","SROQT",56,0)
 W ! K %DT S %DT("A")="Queue report to run at what date/time ? ",%DT(0)="NOW",%DT("B")="NOW",%DT="AEFXT" D ^%DT I Y=-1 S SRSOUT=1 G END^SROQ
"RTN","SROQT",57,0)
 D TSK G END^SROQ
"RTN","SROQT",58,0)
TSK S ZTDTH=Y,ZTIO="",ZTDESC="Surgery Quarterly Report",(ZTSAVE("SRSTART"),ZTSAVE("SREND"),ZTSAVE("SRFLG"),ZTSAVE("SRT"))="",ZTRTN="EN^SROQT" D ^%ZTLOAD
"RTN","SROQT",59,0)
 Q
"RTN","SROQT",60,0)
EN ; entry point when queued to generate mail report only
"RTN","SROQT",61,0)
 K SRINSTP N SRDVSN,SRIEN,SRMULT S SRDVSN="",(SRCOUNT,SRIEN,SRMULT,X)=0 D
"RTN","SROQT",62,0)
 .F  S X=$O(^SRO(133,X)) Q:'X  I '$P($G(^SRO(133,X,0)),"^",21) S SRCOUNT=SRCOUNT+1,SRDVSN(X)=$P(^SRO(133,X,0),"^")
"RTN","SROQT",63,0)
 .I SRCOUNT>1 S SRMULT=1
"RTN","SROQT",64,0)
 D SET^SROQ2,SROQT I SRMULT D
"RTN","SROQT",65,0)
 .S SRIEN=0 F  S SRIEN=$O(SRDVSN(SRIEN)) Q:'SRIEN  D
"RTN","SROQT",66,0)
 ..S SRINSTP=SRDVSN(SRIEN),SRINST=$$GET1^DIQ(4,SRINSTP,.01),SRSTATN=$$GET1^DIQ(4,SRINSTP,99)
"RTN","SROQT",67,0)
 ..D SET^SROQ2,SROQT
"RTN","SROQT",68,0)
 F I="SRATT","SRDEATH","SRDPT","SRDREL","SRDTH","SREXP","SRINOUT","SRIOD","SRP","SRPROC","SRREL","SRSP","SRSS","SRTN" K ^TMP(I,$J)
"RTN","SROQT",69,0)
 S ZTREQ="@"
"RTN","SROQT",70,0)
 I SRQTR=2 D Q1 Q
"RTN","SROQT",71,0)
 I SRQTR=3 D Q2 Q
"RTN","SROQT",72,0)
 I SRQTR=4 D Q3
"RTN","SROQT",73,0)
 Q
"RTN","SROQT",74,0)
SITE ; update site parameters file
"RTN","SROQT",75,0)
 S X=$E(SRSTART,4,7),Y=$S(X="1001":1,X="0101":2,X="0401":3,1:4),SRLATE=SRYR_Y
"RTN","SROQT",76,0)
 S SRE=0 F  S SRE=$O(^SRO(133,SRE)) Q:'SRE  I $P(^SRO(133,SRE,0),"^",18)<SRLATE S $P(^(0),"^",18)=SRLATE
"RTN","SROQT",77,0)
DALERT ; delete alert
"RTN","SROQT",78,0)
 S XQAID="SRQTR-"_SRLATE,XQAKILL=0 D DELETEA^XQALERT
"RTN","SROQT",79,0)
 Q
"RTN","SROQT",80,0)
NIGHT ; determine if current quarterly report has been transmitted
"RTN","SROQT",81,0)
 D CURRENT S SRYR=SRYR+1700,SRFQ=SRYR_SRQTR,SRE=0 S SRE=$O(^SRO(133,SRE)) I $P(^SRO(133,SRE,0),"^",18)'<SRFQ Q
"RTN","SROQT",82,0)
 S SRALERT=0 I SRDAY>206&(SRDAY<214)!(SRDAY>507&(SRDAY<515))!(SRDAY>806&(SRDAY<814))!(SRDAY>1106&(SRDAY<1114)) S SRALERT=1
"RTN","SROQT",83,0)
 D:SRALERT ALERT^SROQ1A D:'SRALERT AUTO
"RTN","SROQT",84,0)
 Q
"RTN","SROQT",85,0)
CURRENT ; get current reporting quarter
"RTN","SROQT",86,0)
 S SRYR=$E(DT,1,3),SRDAY=$E(DT,4,7),SRQTR=4 I SRDAY>206 S SRQTR=$S(SRDAY<508:1,SRDAY<807:2,SRDAY<1107:3,1:4)
"RTN","SROQT",87,0)
 I SRQTR=4,SRDAY<207 S SRYR=SRYR-1
"RTN","SROQT",88,0)
 Q
"RTN","SROQT",89,0)
DATES ; get start and end dates
"RTN","SROQT",90,0)
 S SRSMO=$S(SRQTR=1:"1001",SRQTR=2:"0101",SRQTR=3:"0401",1:"0701"),SREMO=$S(SRQTR=1:"1231",SRQTR=2:"0331",SRQTR=3:"0630",1:"0930"),SRSTART=$S(SRQTR=1:SRYR-1,1:SRYR)_SRSMO,SREND=$S(SRQTR=1:SRYR-1,1:SRYR)_SREMO
"RTN","SROQT",91,0)
 Q
"RTN","SROQT",92,0)
VAR ; set report variables for non-interactive calls     
"RTN","SROQT",93,0)
 D CURRENT,DATES S SRFLG=1
"RTN","SROQT",94,0)
 Q
"RTN","SROQT",95,0)
AUTO ; automatic transmission of report
"RTN","SROQT",96,0)
 D VAR S (SRT,SRSOUT)=1 D NOW^%DTC S Y=$E(%,1,12) D TSK
"RTN","SROQT",97,0)
 Q
"RTN","SROQT",98,0)
Q1 ; transmit report for 1st quarter
"RTN","SROQT",99,0)
 S (SRFLG,SRT)=1 D NOW^%DTC S SRNOW=+$E(%,1,12)
"RTN","SROQT",100,0)
 S SRYR=$E(SRSTART,1,3),SRYR=SRYR-1,SRSTART=SRYR_"1001",SREND=SRYR_"1231" D TSK1
"RTN","SROQT",101,0)
 Q
"RTN","SROQT",102,0)
Q2 ; transmit report for 2nd quarter
"RTN","SROQT",103,0)
 S (SRFLG,SRT)=1 D NOW^%DTC S SRNOW=+$E(%,1,12)
"RTN","SROQT",104,0)
 S SRYR=$E(SRSTART,1,3),SRSTART=SRYR_"0101",SREND=SRYR_"0331" D TSK1
"RTN","SROQT",105,0)
 Q
"RTN","SROQT",106,0)
Q3 ; transmit report for 3rd quarter
"RTN","SROQT",107,0)
 S (SRFLG,SRT)=1 D NOW^%DTC S SRNOW=+$E(%,1,12)
"RTN","SROQT",108,0)
 S SRYR=$E(SRSTART,1,3),SRSTART=SRYR_"0401",SREND=SRYR_"0630" D TSK1
"RTN","SROQT",109,0)
 Q
"RTN","SROQT",110,0)
TSK1 S ZTDTH=SRNOW,ZTIO="",ZTDESC="Surgery Quarterly Report",(ZTSAVE("SRSTART"),ZTSAVE("SREND"),ZTSAVE("SRFLG"),ZTSAVE("SRT"))="",ZTRTN="EN^SROQT" D ^%ZTLOAD
"RTN","SROQT",111,0)
 Q
"RTN","SROUTC")
0^24^B17156517^B16240379
"RTN","SROUTC",1,0)
SROUTC ;BIR/SJA - OUTCOMES DATA ;03/13/06
"RTN","SROUTC",2,0)
 ;;3.0; Surgery ;**125,135,153,174**;24 Jun 93;Build 8
"RTN","SROUTC",3,0)
 D UPDT490,EN^SROCCAT
"RTN","SROUTC",4,0)
 F I=205,206,208,209 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROUTC",5,0)
 S NYUK=$P(SRA(208),"^",2) D YN S SRAO(1)=SHEMP_"^385",NYUK=$P(SRA(208),"^",7) D YN S SRAO(8)=SHEMP_"^391"
"RTN","SROUTC",6,0)
 S NYUK=$P(SRA(208),"^",3) D YN S SRAO(2)=SHEMP_"^386",NYUK=$P(SRA(206),"^",39) D YN S SRAO(9)=SHEMP_"^466"
"RTN","SROUTC",7,0)
 S NYUK=$P(SRA(205),"^",17) D YN S SRAO(3)=SHEMP_"^254",NYUK=$P(SRA(209),"^",12) D YN S SRAO(10)=SHEMP_"^490"
"RTN","SROUTC",8,0)
 S NYUK=$P(SRA(208),"^",5) D YN S SRAO(4)=SHEMP_"^388",NYUK=$P(SRA(205),"^",21) D YN S SRAO(11)=SHEMP_"^256"
"RTN","SROUTC",9,0)
 S NYUK=$P(SRA(205),"^",26) D YN S SRAO(5)=SHEMP_"^411",NYUK=$P(SRA(205),"^",22) D YN S SRAO(12)=SHEMP_"^410"
"RTN","SROUTC",10,0)
 S NYUK=$P(SRA(208),"^",6) D YN S SRAO(6)=SHEMP_"^389",NYUK=$P(SRA(206),"^",40) D YN S SRAO(13)=SHEMP_"^467"
"RTN","SROUTC",11,0)
 S NYUK=$P(SRA(205),"^",13) D YN S SRAO(7)=SHEMP_"^285",NYUK=$P(SRA(208),"^") D YN S SRAO(0)=SHEMP_"^384"
"RTN","SROUTC",12,0)
 S NYUK=$P(SRA(205),"^",40) D YN S SRAO(14)=SHEMP_"^448"
"RTN","SROUTC",13,0)
 ;
"RTN","SROUTC",14,0)
DISP S SRPAGE="PAGE: 1",SRHDR(.5)="OUTCOMES INFORMATION" D HDR^SROAUTL
"RTN","SROUTC",15,0)
 W !,"0. Operative Death: ",?35,$P(SRAO(0),"^")
"RTN","SROUTC",16,0)
 W !!,"Perioperative (30 day) Occurrences:",!,"-----------------------------------"
"RTN","SROUTC",17,0)
 W !,"1. Perioperative MI: ",?35,$P(SRAO(1),"^"),?40," 8. Repeat cardiac surg procedure: ",?76,$P(SRAO(8),"^")
"RTN","SROUTC",18,0)
 W !,"2. Endocarditis: ",?35,$P(SRAO(2),"^"),?40," 9. Tracheostomy: ",?76,$P(SRAO(9),"^")
"RTN","SROUTC",19,0)
 W !,"3. Renal failure require dialysis: ",$P(SRAO(3),"^"),?40,"10. Repeat ventilator w/in 30 days: ",?76,$P(SRAO(10),"^")
"RTN","SROUTC",20,0)
 W !,"4. Mediastinitis: ",?35,$P(SRAO(4),"^"),?40,"11. Stroke: ",?76,$P(SRAO(11),"^")
"RTN","SROUTC",21,0)
 W !,"5. Cardiac arrest requiring CPR: ",?35,$P(SRAO(5),"^"),?40,"12. Coma >= 24 hr: ",?76,$P(SRAO(12),"^")
"RTN","SROUTC",22,0)
 W !,"6. Reoperation for bleeding: ",?35,$P(SRAO(6),"^"),?40,"13. New Mech Circ Support: ",?76,$P(SRAO(13),"^")
"RTN","SROUTC",23,0)
 W !,"7. On ventilator >= 48 hr: ",?35,$P(SRAO(7),"^"),?40,"14. Postop Atrial Fibrillation: ",?76,$P(SRAO(14),"^")
"RTN","SROUTC",24,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROUTC",25,0)
 Q
"RTN","SROUTC",26,0)
YN ; store answer
"RTN","SROUTC",27,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROUTC",28,0)
 Q
"RTN","SROUTC",29,0)
UPDT490 ; update field 490
"RTN","SROUTC",30,0)
 N SRX S SRX=$P($G(^SRF(SRTN,209)),"^",12) S:SRX="" SRX="N"
"RTN","SROUTC",31,0)
 K DA,DIE,DR S DIE=130,DA=SRTN,DR="490////"_SRX D ^DIE K DA,DIE,DR
"RTN","SROUTC",32,0)
 Q
"RTN","SROUTC",33,0)
UPDATE N SRCMP,SROC,SRI,SRIF,SRQ,SRY D MAP
"RTN","SROUTC",34,0)
 I EMILY=5!(EMILY=13) D IP Q
"RTN","SROUTC",35,0)
 S X=$P(^SRO(136.5,SROC,0),"^"),DIC(0)="L",DLAYGO="130.22",DA(1)=SRTN,DIC="^SRF("_SRTN_",16," D FILE^DICN
"RTN","SROUTC",36,0)
 S $P(^SRF(SRTN,16,+Y,0),"^",2)=SROC,SRY=+Y
"RTN","SROUTC",37,0)
EM8 I EMILY=8 K DIR S DIR(0)="130.22,8",DIR("A")="Cardiopulmonary Bypass Status" D ^DIR G:X="" EM8 D  K DR,DA,DIE
"RTN","SROUTC",38,0)
 .K DA,DR,DIE,DIR I X["^"!(X="@")!(Y=0) D DEL S DA=SRTN,DIE=130,DR="391////N" D ^DIE Q
"RTN","SROUTC",39,0)
 .S DA=SRY,DR="8///"_Y,DA(1)=SRTN,DIE="^SRF(SRTN,16," D ^DIE
"RTN","SROUTC",40,0)
 Q
"RTN","SROUTC",41,0)
IP K DIR S DIR("A")="Is this an Intraoperative occurrence? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR Q:$D(DTOUT)!$D(DUOUT)
"RTN","SROUTC",42,0)
 S SRIF=Y
"RTN","SROUTC",43,0)
 I SRIF=1 S X=$P(^SRO(136.5,SROC,0),"^"),DIC(0)="L",DLAYGO="130.14",DA(1)=SRTN,DIC="^SRF("_SRTN_",10," D FILE^DICN S $P(^SRF(SRTN,10,+Y,0),"^",2)=SROC Q
"RTN","SROUTC",44,0)
 ;
"RTN","SROUTC",45,0)
 I SRIF=0 S X=$P(^SRO(136.5,SROC,0),"^"),DIC(0)="L",DLAYGO="130.22",DA(1)=SRTN,DIC="^SRF("_SRTN_",16," D FILE^DICN S $P(^SRF(SRTN,16,+Y,0),"^",2)=SROC
"RTN","SROUTC",46,0)
 Q
"RTN","SROUTC",47,0)
DEL ; delete existing Post/Intraoperative occurrences.
"RTN","SROUTC",48,0)
 N II,SRII,SROC D MAP
"RTN","SROUTC",49,0)
 S II=0 F  S II=$O(^SRF(SRTN,16,II)) Q:'II  S SRII=$G(^(II,0)) I $P(SRII,"^",2)=SROC D  Q
"RTN","SROUTC",50,0)
 .S DA(1)=SRTN,DA=II,DIK="^SRF("_SRTN_",16," D ^DIK I '$O(^SRF(SRTN,16,0)) K ^SRF(SRTN,16,0)
"RTN","SROUTC",51,0)
 ;
"RTN","SROUTC",52,0)
 S II=0 F  S II=$O(^SRF(SRTN,10,II)) Q:'II  S SRII=$G(^(II,0)) I $P(SRII,"^",2)=SROC D  Q
"RTN","SROUTC",53,0)
 .S DA(1)=SRTN,DA=II,DIK="^SRF("_SRTN_",10," D ^DIK I '$O(^SRF(SRTN,10,0)) K ^SRF(SRTN,10,0)
"RTN","SROUTC",54,0)
 Q
"RTN","SROUTC",55,0)
MAP S SROC=$S(EMILY=1:17,EMILY=2:23,EMILY=3:9,EMILY=4:25,EMILY=5:16,EMILY=6:26,EMILY=7:6,EMILY=8:27,EMILY=9:33,EMILY=10:37,EMILY=11:12,EMILY=12:13,EMILY=14:39,1:34)
"RTN","SROUTC",56,0)
 Q
"RTN","SROXR4")
0^12^B8346858^B8185921
"RTN","SROXR4",1,0)
SROXR4 ;BIR/MAM - CROSS REFERENCES ;05/05/10
"RTN","SROXR4",2,0)
 ;;3.0; Surgery ;**62,83,100,153,166,174**;24 Jun 93;Build 8
"RTN","SROXR4",3,0)
 Q
"RTN","SROXR4",4,0)
PRO ; stuff default prosthesis info
"RTN","SROXR4",5,0)
 I '$D(SRTN) Q
"RTN","SROXR4",6,0)
 S ^SRF(SRTN,1,DA,0)=^SRF(SRTN,1,DA,0)_"^"_$P(^SRO(131.9,X,0),"^",2,99)
"RTN","SROXR4",7,0)
 I $D(^SRO(131.9,X,1)) S ^SRF(SRTN,1,DA,1)=^(1)
"RTN","SROXR4",8,0)
 Q
"RTN","SROXR4",9,0)
CAN ; 'SET' logic of the 'ACAN' x-ref on the 'CANCEL REASON'
"RTN","SROXR4",10,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",11,0)
 S $P(^SRF(DA,30),"^",2)=$P(^SRO(135,X,0),"^",3) I $P(^SRO(135,X,0),"^",3)="" S $P(^SRF(DA,30),"^",2)="Y"
"RTN","SROXR4",12,0)
 I $P(^SRF(DA,30),"^",3)="" S $P(^SRF(DA,30),"^",3)=DUZ
"RTN","SROXR4",13,0)
 S SHEMP=$P($G(^SRF(DA,.2)),"^",10) I SHEMP,$D(^SRF(DA,"RA")) S ZTDESC="Clean up Risk Assessment Information, Canceled Case",ZTRTN="RISK^SROXR4",ZTDTH=$H,ZTSAVE("DA")="" D ^%ZTLOAD
"RTN","SROXR4",14,0)
 Q
"RTN","SROXR4",15,0)
KCAN ; 'KILL' logic of the 'ACAN' x-ref on the 'CANCEL REASON'
"RTN","SROXR4",16,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",17,0)
 S $P(^SRF(DA,30),"^",2)="" I '$P($G(^SRF(DA,30)),"^") S $P(^SRF(DA,30),"^",3)=""
"RTN","SROXR4",18,0)
 Q
"RTN","SROXR4",19,0)
AS ; 'SET' logic of the 'AS' x-ref on the SCHEDULED START TIME
"RTN","SROXR4",20,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",21,0)
 S OR=$P(^SRF(DA,0),"^",2) I 'OR Q
"RTN","SROXR4",22,0)
 S ^SRF("AS",OR,X,DA)=""
"RTN","SROXR4",23,0)
 Q
"RTN","SROXR4",24,0)
KAS ; 'KILL' logic of the 'AS' x-ref on the SCHEDULED FINISH TIME
"RTN","SROXR4",25,0)
 ; field in the SURGERY file (130)
"RTN","SROXR4",26,0)
 S OR=$P(^SRF(DA,0),"^",2) I 'OR Q
"RTN","SROXR4",27,0)
 K ^SRF("AS",OR,X,DA)
"RTN","SROXR4",28,0)
 Q
"RTN","SROXR4",29,0)
SCH ; 'SET' logic of the 'AC' x-ref of the REQUIRED FIELDS FOR SCHEDULING
"RTN","SROXR4",30,0)
 ; field in the SURGERY SITE PARAMETERS file (133)
"RTN","SROXR4",31,0)
 S MM=$O(^DD(130,"B",X,0)),$P(^SRO(133,DA(1),4,DA,0),"^",2)=MM K MM
"RTN","SROXR4",32,0)
 Q
"RTN","SROXR4",33,0)
KSCH ; 'KILL' logic of the 'AC' x-ref of the REQUIRED FIELDS FOR SCHEDULING
"RTN","SROXR4",34,0)
 ; field in the SURGERY SITE PARAMETERS file (133)
"RTN","SROXR4",35,0)
 S $P(^SRO(133,DA(1),4,DA,0),"^",2)=""
"RTN","SROXR4",36,0)
 Q
"RTN","SROXR4",37,0)
RISK ; clean up risk data for canceled cases
"RTN","SROXR4",38,0)
 S DIE=130,DR="102///@;235///@;284///@;323///@" D ^DIE K DR,DA S ZTREQ="@"
"RTN","SROXR4",39,0)
 Q
"RTN","SROXR4",40,0)
AQ ; set logic for AQ x-ref
"RTN","SROXR4",41,0)
 N SRTD,SRLO D AQDT I SRTD'<SRLO S $P(^SRF(DA,.4),"^",2)="R",^SRF("AQ",SRTD,DA)=""
"RTN","SROXR4",42,0)
 Q
"RTN","SROXR4",43,0)
KAQ ; kill logic for AQ x-ref
"RTN","SROXR4",44,0)
 N SRTD,SRLO D AQDT S $P(^SRF(DA,.4),"^",2)="" K ^SRF("AQ",SRTD,DA)
"RTN","SROXR4",45,0)
 Q
"RTN","SROXR4",46,0)
AQDT ; get monthly transmission date 45 days after end of the month of the operation
"RTN","SROXR4",47,0)
 N SRD,SRSDATE,SRX,SRYR,M S SRSDATE=$E($P(^SRF(DA,0),"^",9),1,7),SRYR=$E(SRSDATE,1,3),M=+$E(SRSDATE,4,5)
"RTN","SROXR4",48,0)
 S SRD=$S(M=1:"0316",M=2:"0414",M=3:"0515",M=4:"0614",M=5:"0715",M=6:"0814",M=7:"0914",M=8:"1015",M=9:"1114",M=10:"1215",M=11:"0114",1:"0214")
"RTN","SROXR4",49,0)
 S:M=11!(M=12) SRYR=SRYR+1 S SRTD=SRYR_SRD
"RTN","SROXR4",50,0)
 S SRX=$E(DT,1,3),SRLO=SRX-2_"1215"
"RTN","SROXR4",51,0)
 Q
"RTN","SROXR4",52,0)
AQ1 ; set logic for AQ1 x-ref
"RTN","SROXR4",53,0)
 I X="R" N SRTD,SRLO D AQDT I SRTD'<SRLO S ^SRF("AQ",SRTD,DA)=""
"RTN","SROXR4",54,0)
 Q
"RTN","SROXR4",55,0)
KAQ1 ; kill logic for AQ1 x-ref
"RTN","SROXR4",56,0)
 N SRTD,SRLO D AQDT K ^SRF("AQ",SRTD,DA)
"RTN","SROXR4",57,0)
 Q
"RTN","SROXR4",58,0)
AT ; set logic for AT x-ref on DATE OF LAST TRANSMISSION
"RTN","SROXR4",59,0)
 N SRX S ^SRF("AT",X,DA)=""
"RTN","SROXR4",60,0)
 S SRX=$P($G(^SRF(DA,"RA")),"^",4) I SRX,SRX'=X K ^SRF("AT",SRX,DA)
"RTN","SROXR4",61,0)
 Q
"RTN","SROXR4",62,0)
KAT ; kill logic for AT x-ref on DATE OF LAST TRANSMISSION
"RTN","SROXR4",63,0)
 N SRX K ^SRF("AT",X,DA)
"RTN","SROXR4",64,0)
 S SRX=$P($G(^SRF(DA,"RA")),"^",4) I SRX,SRX'=X K ^SRF("AT",SRX,DA)
"RTN","SROXR4",65,0)
 Q
"RTN","SROXR4",66,0)
AT1 ; set logic for AT x-ref on DATE TRANSMITTED
"RTN","SROXR4",67,0)
 N SRX S SRX=$P($G(^SRF(DA,"RA")),"^",8) I SRX Q
"RTN","SROXR4",68,0)
 S ^SRF("AT",X,DA)=""
"RTN","SROXR4",69,0)
 Q
"RTN","SROXR4",70,0)
KAT1 ; kill logic for AT x-ref on DATE TRANSMITTED
"RTN","SROXR4",71,0)
 N SRX S SRX=$P($G(^SRF(DA,"RA")),"^",8)
"RTN","SROXR4",72,0)
 I SRX'=X K ^SRF("AT",X,DA)
"RTN","SROXR4",73,0)
 Q
"UP",130,130.16,-1)
130^13
"UP",130,130.16,0)
130.16
"VER")
8.0^22.0
"^DD",130,130,.42,0)
OTHER PROCEDURES^130.16A^^13;0
"^DD",130,130,.42,.1)
Other Operative Procedures (Same Specialty)
"^DD",130,130,.42,12)
QUICK LOOK-UP OF OPERATIONS IS BUILT FROM OPERATIONS PERFORMED AT THE HOSPITAL
"^DD",130,130,.42,12.1)
S DIC("S")="I $D(^SRS(""AOP"",""AC"",Y))"
"^DD",130,130,.42,21,0)
^.001^3^3^3100602^^^^
"^DD",130,130,.42,21,1,0)
This is information related to procedures performed in addition
"^DD",130,130,.42,21,2,0)
to the principal procedure.
"^DD",130,130,.42,21,3,0)
 
"^DD",130,130,.42,"DT")
2911206
"^DD",130,130,1.13,0)
ASA CLASS^P132.8'XO^SRO(132.8,^1.1;3^I $D(X),$D(^SRF(DA,"CON")),$P(^("CON"),"^") N SRFLD S SRFLD=1.13 D ^SROCON Q
"^DD",130,130,1.13,.1)
ASA Class
"^DD",130,130,1.13,2)
S Y(0)=Y S Y=$S(Y["E":$P(^SRO(132.8,$E(Y)+6,0),"^",2),Y:$P(^SRO(132.8,Y,0),"^",2),Y="N":$P(^SRO(132.8,13,0),"^",2),1:Y)
"^DD",130,130,1.13,2.1)
S Y=$S(Y["E":$P(^SRO(132.8,$E(Y)+6,0),"^",2),Y:$P(^SRO(132.8,Y,0),"^",2),Y="N":$P(^SRO(132.8,13,0),"^",2),1:Y)
"^DD",130,130,1.13,3)
Select ASA code: Number followed by 'E' if Emergency.
"^DD",130,130,1.13,21,0)
^^22^22^3100628^
"^DD",130,130,1.13,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,1.13,21,2,0)
Record the American Society of Anesthesiology (ASA) Physical Status 
"^DD",130,130,1.13,21,3,0)
Classification of the patient's present physical condition on a scale 
"^DD",130,130,1.13,21,4,0)
from 1-6 as it appears on the anesthesia record. Most likely there will
"^DD",130,130,1.13,21,5,0)
be a 2nd assessment of the ASA class prior to anesthesia induction. If
"^DD",130,130,1.13,21,6,0)
this is available, report this most recent assessment. The definitions
"^DD",130,130,1.13,21,7,0)
are:
"^DD",130,130,1.13,21,8,0)
     ASA 1 - A normal healthy patient
"^DD",130,130,1.13,21,9,0)
     ASA 2 - A patient with mild systemic disease
"^DD",130,130,1.13,21,10,0)
     ASA 3 - A patient with severe systemic disease
"^DD",130,130,1.13,21,11,0)
     ASA 4 - A patient with severe systemic disease that is a constant
"^DD",130,130,1.13,21,12,0)
             threat to life
"^DD",130,130,1.13,21,13,0)
     ASA 5 - A moribund patient who is not expected to survive without
"^DD",130,130,1.13,21,14,0)
             the operation
"^DD",130,130,1.13,21,15,0)
     ASA 6 - A declared brain-dead patient whose organs are being
"^DD",130,130,1.13,21,16,0)
             removed for donor purposes
"^DD",130,130,1.13,21,17,0)
 
"^DD",130,130,1.13,21,18,0)
ASA 6 cases should be excluded.
"^DD",130,130,1.13,21,19,0)
 
"^DD",130,130,1.13,21,20,0)
Classification numbers followed by an 'E' indicate an emergency.
"^DD",130,130,1.13,21,21,0)
 
"^DD",130,130,1.13,21,22,0)
Select N for NONE ASSIGNED if no ASA Class is assigned for this patient.
"^DD",130,130,1.13,"DT")
3100628
"^DD",130,130,203,0)
HISTORY OF COPD^S^Y:YES;N:NO;^200;11^Q
"^DD",130,130,203,.1)
History of Severe COPD (Y/N)
"^DD",130,130,203,3)
Enter 'YES' if the patient has a defined condition of COPD.
"^DD",130,130,203,21,0)
^^20^20^3100826^
"^DD",130,130,203,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,203,21,2,0)
History of severe COPD: Chronic obstructive pulmonary disease (such as
"^DD",130,130,203,21,3,0)
emphysema and/or chronic bronchitis) requires a diagnosis of COPD and
"^DD",130,130,203,21,4,0)
one or more of the following:
"^DD",130,130,203,21,5,0)
 - Functional disability from COPD (e.g., dyspnea, inability to perform
"^DD",130,130,203,21,6,0)
   ADLs)
"^DD",130,130,203,21,7,0)
 - Hospitalization in the past for treatment of COPD
"^DD",130,130,203,21,8,0)
 - Requires chronic bronchodilator therapy with oral or inhaled agents 
"^DD",130,130,203,21,9,0)
 - An FEV1 of <75% of predicted on pulmonary function testing
"^DD",130,130,203,21,10,0)
 
"^DD",130,130,203,21,11,0)
Do not include patients whose only pulmonary disease is acute asthma, 
"^DD",130,130,203,21,12,0)
an acute and chronic inflammatory disease of the airways resulting in 
"^DD",130,130,203,21,13,0)
bronchospasm. Do not include patients with diffuse interstitial 
"^DD",130,130,203,21,14,0)
fibrosis or sarcoidosis.
"^DD",130,130,203,21,15,0)
 
"^DD",130,130,203,21,16,0)
CICSP Definition (2004):
"^DD",130,130,203,21,17,0)
Indicate if the patient has chronic obstructive pulmonary disease 
"^DD",130,130,203,21,18,0)
(COPD) resulting in functional disability, and/or hospitalization, 
"^DD",130,130,203,21,19,0)
and/or requiring chronic bronchodilator therapy, and/or an FEV1 of 
"^DD",130,130,203,21,20,0)
less than 75% of predicted.
"^DD",130,130,203,"DT")
3100528
"^DD",130,130,212,0)
ASCITES^S^Y:YES;N:NO;NS:NO STUDY;^200;15^Q
"^DD",130,130,212,.1)
Ascites Within 30 Days Prior to Surgery (Y/N)
"^DD",130,130,212,3)
Enter 'YES' if the patient has the presence of fluid accumulation in the peritoneal cavity.
"^DD",130,130,212,21,0)
^^7^7^3100615^
"^DD",130,130,212,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,212,21,2,0)
Ascites within 30 days prior to surgery: The presence of fluid in the
"^DD",130,130,212,21,3,0)
peritoneal cavity noted on physical examination, abdominal ultrasound,
"^DD",130,130,212,21,4,0)
or abdominal CT/MRI within 30 days prior to the operation.
"^DD",130,130,212,21,5,0)
Documentation should state a history of or active liver disease (e.g.
"^DD",130,130,212,21,6,0)
jaundice, encephalopathy, hepatomegaly, portal hypertension, liver
"^DD",130,130,212,21,7,0)
failure, or spider telangiectasia).
"^DD",130,130,212,"DT")
3040316
"^DD",130,130,216,0)
BLEEDING DISORDERS^S^Y:YES;N:NO;NS:NO STUDY;^200;49^Q
"^DD",130,130,216,.1)
History of Bleeding Disorders (Y/N)
"^DD",130,130,216,3)
Enter YES if the patient has a history of a bleeding disorder.
"^DD",130,130,216,21,0)
^^16^16^3100602^
"^DD",130,130,216,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,216,21,2,0)
Any condition that places the patient at risk for excessive bleeding 
"^DD",130,130,216,21,3,0)
due to a deficiency of blood clotting elements (e.g., vitamin K
"^DD",130,130,216,21,4,0)
deficiency, hemophilias, thrombocytopenia, chronic anticoagulation
"^DD",130,130,216,21,5,0)
therapy that has not been discontinued prior to surgery). Do not
"^DD",130,130,216,21,6,0)
include the patient on chronic aspirin therapy. Lab values should not
"^DD",130,130,216,21,7,0)
be used to determine this variable except in the case of platelet
"^DD",130,130,216,21,8,0)
counts for determining thrombocytopenia. Use whatever the low range
"^DD",130,130,216,21,9,0)
number is for your facility to make this determination. Anything less
"^DD",130,130,216,21,10,0)
than your local low range should be considered thrombocytopenia. Please
"^DD",130,130,216,21,11,0)
refer to the VASQIP Definitions for a table of medications that impact
"^DD",130,130,216,21,12,0)
the patient's risk for bleeding. Please utilize the associated time
"^DD",130,130,216,21,13,0)
frames for discontinuation of medication not lab values to determine
"^DD",130,130,216,21,14,0)
your answer to this variable. The time frames are up to and including
"^DD",130,130,216,21,15,0)
the day or hour listed. If there is no documentation of discontinuation
"^DD",130,130,216,21,16,0)
of medication, answer 'yes' for bleeding disorder.
"^DD",130,130,216,"DT")
3040317
"^DD",130,130,236,0)
HEIGHT^FXO^^206;1^K:+X>300!(+X<0) X D H^SROAMEAS
"^DD",130,130,236,.1)
Patient's Height
"^DD",130,130,236,1,0)
^.1
"^DD",130,130,236,1,1,0)
^^TRIGGER^130^236.1
"^DD",130,130,236,1,1,1)
Q
"^DD",130,130,236,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^SRF(D0,200.1)):^(200.1),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X="" S DIH=$G(^SRF(DIV(0),200.1)),DIV=X S $P(^(200.1),U,7)=DIV,DIH=130,DIG=236.1 D ^DICR
"^DD",130,130,236,1,1,"CREATE VALUE")
NO EFFECT
"^DD",130,130,236,1,1,"DELETE VALUE")
@
"^DD",130,130,236,1,1,"FIELD")
HEIGHT MEASUREMENT DATE
"^DD",130,130,236,2)
S Y(0)=Y S Y=$S(Y["C":+Y_" CENTIMETERS",+Y:Y_" INCHES",1:Y)
"^DD",130,130,236,2.1)
S Y=$S(Y["C":+Y_" CENTIMETERS",+Y:Y_" INCHES",1:Y)
"^DD",130,130,236,3)
Enter the patient's height.
"^DD",130,130,236,21,0)
^^13^13^3100602^
"^DD",130,130,236,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,236,21,2,0)
Height: Report the patient's most recent height before surgery
"^DD",130,130,236,21,3,0)
documented in the medical record in either inches (25 to 86 in) or
"^DD",130,130,236,21,4,0)
centimeters (63 to 218 cm). If you are entering the patient's height in
"^DD",130,130,236,21,5,0)
centimeters, enter 'C' after the number of centimeters.
"^DD",130,130,236,21,6,0)
 
"^DD",130,130,236,21,7,0)
Your answer should be in one of the following two formats. 
"^DD",130,130,236,21,8,0)
  68    (representing inches)
"^DD",130,130,236,21,9,0)
  173C  (representing centimeters)
"^DD",130,130,236,21,10,0)
 
"^DD",130,130,236,21,11,0)
The software pulls the most recent height measurement, regardless of 
"^DD",130,130,236,21,12,0)
when it was taken. The date of the measurement returned by the capture 
"^DD",130,130,236,21,13,0)
process is displayed on the data input screen.
"^DD",130,130,236,"DT")
3100629
"^DD",130,130,237,0)
WEIGHT^FXO^^206;2^K:+X>999!(+X<0) X D W^SROAMEAS
"^DD",130,130,237,.1)
Patient's Weight
"^DD",130,130,237,2)
S Y(0)=Y S Y=$S(Y["K":+Y_" KILOGRAMS",+Y:Y_" LBS.",1:Y)
"^DD",130,130,237,2.1)
S Y=$S(Y["K":+Y_" KILOGRAMS",+Y:Y_" LBS.",1:Y)
"^DD",130,130,237,3)
Enter the patient's weight most closely preceding surgery.
"^DD",130,130,237,21,0)
^^12^12^3100610^
"^DD",130,130,237,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,237,21,2,0)
Weight: Report the patient's most recent weight before surgery
"^DD",130,130,237,21,3,0)
documented in the medical record in either pounds (50 to 999 lbs) or
"^DD",130,130,237,21,4,0)
kilograms (23 to 453 kg). If you are entering the patient's weight in
"^DD",130,130,237,21,5,0)
kilograms, enter 'K' after the number of kilograms. The software pulls
"^DD",130,130,237,21,6,0)
the latest value up to 30 days prior to surgery. If no value is found
"^DD",130,130,237,21,7,0)
in the Vitals software, the nurse reviewer must enter the value
"^DD",130,130,237,21,8,0)
manually.
"^DD",130,130,237,21,9,0)
 
"^DD",130,130,237,21,10,0)
Your answer should be in one of the following formats.
"^DD",130,130,237,21,11,0)
  178     (weight in pounds)
"^DD",130,130,237,21,12,0)
  80K     (weight in Kilograms)
"^DD",130,130,237,"DT")
3100709
"^DD",130,130,237.1,0)
PREOPERATIVE SLEEP APNEA^S^1:LEVEL 1 - NONE;2:LEVEL 2 - SUSPICION OF SLEEP APNEA;3:LEVEL 3 - SLEEP APNEA;^200.1;8^Q
"^DD",130,130,237.1,.1)
Preoperative Sleep Apnea
"^DD",130,130,237.1,3)
Identify whether the Patient has sleep apnea preoperatively.
"^DD",130,130,237.1,21,0)
^^21^21^3100615^
"^DD",130,130,237.1,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,237.1,21,2,0)
Sleep Apnea is a disorder of respiration whereby the individual has 
"^DD",130,130,237.1,21,3,0)
hypoxic and/or apneic periods during sleep due to prolapse or 
"^DD",130,130,237.1,21,4,0)
flaccidity of oropharyngeal structures, which improves with positive
"^DD",130,130,237.1,21,5,0)
airway pressure (i.e., CPAP or BIPAP). Select one of the following
"^DD",130,130,237.1,21,6,0)
categories that best indicates the patient's level of sleep apnea.
"^DD",130,130,237.1,21,7,0)
 - Level 1 = None: No diagnosis or suspicion of Sleep Apnea
"^DD",130,130,237.1,21,8,0)
 - Level 2 = Suspicion of Sleep Apnea: No sleep study has been done,
"^DD",130,130,237.1,21,9,0)
   however the patient has TWO or MORE of the following risk factors 
"^DD",130,130,237.1,21,10,0)
   for Sleep Apnea (Anesthesiology 2006; 104: 1081-1093):
"^DD",130,130,237.1,21,11,0)
     a) Obesity (BMI > 35) 
"^DD",130,130,237.1,21,12,0)
     b) Thick neck (men > 17 inches, women > 16 inches)  
"^DD",130,130,237.1,21,13,0)
     c) Snoring, loud or frequent
"^DD",130,130,237.1,21,14,0)
     d) Observed apneas (partner/roommate reported observing 
"^DD",130,130,237.1,21,15,0)
        obstruction episodes during sleep)
"^DD",130,130,237.1,21,16,0)
     e) Frequent arousals from sleep or choking during sleep
"^DD",130,130,237.1,21,17,0)
     f) Daytime somnolence 
"^DD",130,130,237.1,21,18,0)
     g) Patient reports diagnosis of sleep apnea even if sleep study
"^DD",130,130,237.1,21,19,0)
        results are not in the medical record
"^DD",130,130,237.1,21,20,0)
 - Level 3 = Sleep Apnea: Sleep apnea confirmed by Sleep Study OR
"^DD",130,130,237.1,21,21,0)
   patient currently uses/was prescribed CPAP/BIPAP at home 
"^DD",130,130,237.1,"DT")
3100527
"^DD",130,130,240,0)
FUNCTIONAL HEALTH STATUS^*S^1:INDEPENDENT;2:PARTIALLY DEPENDENT;3:TOTALLY DEPENDENT;4:UNKNOWN;^200;8^Q
"^DD",130,130,240,.1)
Functional Status
"^DD",130,130,240,3)
Enter the level of self care that summarizes the patient's status prior to surgery.
"^DD",130,130,240,12)
Screen limits selection based on type of risk assessment.
"^DD",130,130,240,12.1)
S DIC("S")=$$FUNCT^SROAUTL
"^DD",130,130,240,21,0)
^^27^27^3100610^
"^DD",130,130,240,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,240,21,2,0)
Indicate the appropriate term that describes the level of self-care 
"^DD",130,130,240,21,3,0)
demonstrated by the patient that summarizes his/her status during the
"^DD",130,130,240,21,4,0)
two weeks before surgery:
"^DD",130,130,240,21,5,0)
 
"^DD",130,130,240,21,6,0)
Independent - The patient is independent in activities of daily living
"^DD",130,130,240,21,7,0)
    (bathing, toilet, eating, dressing, transfer and continence);
"^DD",130,130,240,21,8,0)
    he/she does not require the assistance of nursing care, equipment,
"^DD",130,130,240,21,9,0)
    or devices. This would include a patient who is able to function
"^DD",130,130,240,21,10,0)
    independently with a limb prosthesis.
"^DD",130,130,240,21,11,0)
Partially dependent - The patient is partially dependent. He/she
"^DD",130,130,240,21,12,0)
    requires the use of equipment or devices coupled with assistance
"^DD",130,130,240,21,13,0)
    from another person for some activities of daily living. Any 
"^DD",130,130,240,21,14,0)
    patient coming from a nursing home setting who is not totally
"^DD",130,130,240,21,15,0)
    dependent is described by this category. Any patient who requires
"^DD",130,130,240,21,16,0)
    dialysis for kidney failure or requires chronic oxygen therapy yet
"^DD",130,130,240,21,17,0)
    maintains independent functions, is considered partially dependent.
"^DD",130,130,240,21,18,0)
Totally dependent - The patient is totally dependent and cannot perform
"^DD",130,130,240,21,19,0)
    ANY activities of daily living on his/her own. For example, this
"^DD",130,130,240,21,20,0)
    may include a patient in an ICU/floor, who is totally dependent on
"^DD",130,130,240,21,21,0)
    nursing care, or a dependent nursing home patient.
"^DD",130,130,240,21,22,0)
 
"^DD",130,130,240,21,23,0)
All patients with psychiatric illnesses should be evaluated for their 
"^DD",130,130,240,21,24,0)
ability to function with or without assistance with ADLs in the same 
"^DD",130,130,240,21,25,0)
manner as the non-psychiatric patient. For instance, if a patient with 
"^DD",130,130,240,21,26,0)
schizophrenia is able to care for himself without the assistance of 
"^DD",130,130,240,21,27,0)
nursing care, he/she is considered independent.
"^DD",130,130,240,"DT")
3100610
"^DD",130,130,263,0)
DVT/THROMBOPHLEBITIS^S^Y:YES;N:NO;NS:NO STUDY;^205;34^Q
"^DD",130,130,263,.1)
Deep Vein Thrombosis (DVT)/Thrombophlebitis (Y/N)
"^DD",130,130,263,3)
Enter YES if the patient has postoperative DVT/Thrombophlebitis.
"^DD",130,130,263,21,0)
^.001^7^7^3100726^^
"^DD",130,130,263,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,263,21,2,0)
The identification of a new blood clot or thrombus within the deep    
"^DD",130,130,263,21,3,0)
venous system, which may be coupled with inflammation. This diagnosis 
"^DD",130,130,263,21,4,0)
is confirmed by a duplex, venogram, CT scan or other imaging modality.
"^DD",130,130,263,21,5,0)
The patient must be treated with therapeutic anticoagulation therapy,
"^DD",130,130,263,21,6,0)
and/or placement of a vena cava filter or clipping of the vena cava or
"^DD",130,130,263,21,7,0)
recommended for such.
"^DD",130,130,263,"DT")
3040318
"^DD",130,130,267,0)
ANGINA^S^I:CLASS I;II:CLASS II;III:CLASS III;IV:CLASS IV;^206;18^Q
"^DD",130,130,267,.1)
Angina (use CCS Functional Class)
"^DD",130,130,267,1,0)
^.1^^0
"^DD",130,130,267,3)
Enter the CCS classification associated with the severity of angina in the 14 days preceding surgery.
"^DD",130,130,267,21,0)
^^22^22^3100528^
"^DD",130,130,267,21,1,0)
This determines whether the patient has angina.  Angina is defined
"^DD",130,130,267,21,2,0)
as pain or discomfort between the diaphragm and the mandible resulting
"^DD",130,130,267,21,3,0)
from myocardial ischemia usually precipitated by exertion or emotion
"^DD",130,130,267,21,4,0)
and relieved by rest or nitroglycerine.  The Canadian Cardiovascular
"^DD",130,130,267,21,5,0)
Society (CCS) classification is now the most commonly used method to
"^DD",130,130,267,21,6,0)
record severity of angina.  Record according to the most severe angina
"^DD",130,130,267,21,7,0)
in the 14 days before surgery:
"^DD",130,130,267,21,8,0)
   I - Ordinary physical activity, such as walking or climbing stairs
"^DD",130,130,267,21,9,0)
       does not cause angina.  Angina may occur with strenuous or rapid
"^DD",130,130,267,21,10,0)
       or prolonged exertion at work or recreation.
"^DD",130,130,267,21,11,0)
  II - There is slight limitation of ordinary activity.  Angina may 
"^DD",130,130,267,21,12,0)
       occur with walking or climbing stairs rapidly, walking uphill,
"^DD",130,130,267,21,13,0)
       walking or stair climbing after meals or in the cold, in the 
"^DD",130,130,267,21,14,0)
       wind, or under emotional stress, or walking more than two blocks
"^DD",130,130,267,21,15,0)
       on the level, or climbing more than one flight of stairs under
"^DD",130,130,267,21,16,0)
       normal conditions at a normal pace.
"^DD",130,130,267,21,17,0)
 III - There is marked limitation of ordinary physical activity.  Angina
"^DD",130,130,267,21,18,0)
       may occur after walking one or two blocks on the level or 
"^DD",130,130,267,21,19,0)
       climbing one flight of stairs under normal conditions at a normal
"^DD",130,130,267,21,20,0)
       pace.
"^DD",130,130,267,21,21,0)
  IV - There is inability to carry on any physical activity without
"^DD",130,130,267,21,22,0)
       discomfort.  Angina may be present at rest.
"^DD",130,130,267,"DT")
3100528
"^DD",130,130,272.1,0)
ASSESSMENT COMPLETED BY^P200'^VA(200,^RA;9^Q
"^DD",130,130,272.1,.1)
Assessment Completed By
"^DD",130,130,272.1,3)
Enter the name of the person who completed the assessment.
"^DD",130,130,272.1,21,0)
^^2^2^3100505^
"^DD",130,130,272.1,21,1,0)
This is the name of the person who completed this surgery risk 
"^DD",130,130,272.1,21,2,0)
assessment.
"^DD",130,130,272.1,"DT")
3100505
"^DD",130,130,338,0)
DISSEMINATED CANCER (Y/N)^S^Y:YES;N:NO;NS:NO STUDY;^200;45^Q
"^DD",130,130,338,.1)
Disseminated Cancer (Y/N)
"^DD",130,130,338,3)
Enter YES if the patient has disseminated cancer.
"^DD",130,130,338,21,0)
^^44^44^3100602^
"^DD",130,130,338,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,338,21,2,0)
Disseminated cancer: Patients who have cancer known to be present prior
"^DD",130,130,338,21,3,0)
to the start of surgery that:
"^DD",130,130,338,21,4,0)
 (1) Has spread to one site or more sites in addition to the primary 
"^DD",130,130,338,21,5,0)
     site
"^DD",130,130,338,21,6,0)
 AND
"^DD",130,130,338,21,7,0)
 (2) In whom the presence of multiple metastases indicates the cancer 
"^DD",130,130,338,21,8,0)
     is widespread, fulminant, or near terminal. Other terms describing
"^DD",130,130,338,21,9,0)
     disseminated cancer include "diffuse," "widely metastatic," 
"^DD",130,130,338,21,10,0)
     "widespread," or "carcinomatosis", or AJCC "Stage IV" cancer.  
"^DD",130,130,338,21,11,0)
     Common sites of metastases include major organs (e.g., brain,
"^DD",130,130,338,21,12,0)
     lung, liver, meninges, abdomen, peritoneum, pleura, and bone).  
"^DD",130,130,338,21,13,0)
     You may use the National Cancer Institute as a reference in
"^DD",130,130,338,21,14,0)
     determining whether a patient has AJCC Stage IV cancer, when the
"^DD",130,130,338,21,15,0)
     TNM information is the only information documented. Refer to the
"^DD",130,130,338,21,16,0)
     following website for assistance with translating TNM values with
"^DD",130,130,338,21,17,0)
     AJCC staging:
"^DD",130,130,338,21,18,0)
     http://www.cancer.gov/cancertopics/pdq/adulttreatment
"^DD",130,130,338,21,19,0)
 
"^DD",130,130,338,21,20,0)
 Examples:
"^DD",130,130,338,21,21,0)
 - A patient with a primary breast cancer with positive nodes in the 
"^DD",130,130,338,21,22,0)
   axilla does NOT qualify for this definition. The tumor has spread to
"^DD",130,130,338,21,23,0)
   a site other than the primary site, but does not have widespread
"^DD",130,130,338,21,24,0)
   metastases. A patient with primary breast cancer with positive nodes
"^DD",130,130,338,21,25,0)
   in the axilla AND liver metastases does qualify, because the tumor
"^DD",130,130,338,21,26,0)
   has spread to the axilla and other major organs.
"^DD",130,130,338,21,27,0)
 
"^DD",130,130,338,21,28,0)
 - A patient with colon cancer and no positive nodes or distant 
"^DD",130,130,338,21,29,0)
   metastases does NOT qualify. A patient with colon cancer and several
"^DD",130,130,338,21,30,0)
   local lymph nodes positive for tumor, but no other evidence of
"^DD",130,130,338,21,31,0)
   metastatic disease does NOT qualify. A patient with colon cancer 
"^DD",130,130,338,21,32,0)
   with liver metastases and/or peritoneal seeding with tumor does
"^DD",130,130,338,21,33,0)
   qualify.
"^DD",130,130,338,21,34,0)
 
"^DD",130,130,338,21,35,0)
 - A patient with adenocarcinoma of the prostate confined to the 
"^DD",130,130,338,21,36,0)
   capsule does NOT qualify. A patient with prostate cancer that
"^DD",130,130,338,21,37,0)
   extends through the capsule of the prostate only does NOT qualify.  
"^DD",130,130,338,21,38,0)
   A patient with prostate cancer with bony metastases DOES qualify.
"^DD",130,130,338,21,39,0)
 
"^DD",130,130,338,21,40,0)
Report Acute Lymphocytic Leukemia (ALL), Acute Myelogenous Leukemia 
"^DD",130,130,338,21,41,0)
(AML) and Stage IV Lymphoma under this variable. Do not report Chronic
"^DD",130,130,338,21,42,0)
Lymphocytic Leukemia (CLL), Chronic Myelogenous Leukemia (CML), 
"^DD",130,130,338,21,43,0)
Multiple Myeloma or Lymphomas that are Stage I-III as disseminated
"^DD",130,130,338,21,44,0)
cancer.
"^DD",130,130,338,"DT")
3040316
"^DD",130,130,367,0)
AORTIC VALVE PROCEDURE^*S^Y:YES;N:NONE;M:MECHANICAL;S:STENTED BIOPROSTHETIC;B:STENTLESS BIOPROSTHETIC;H:HOMOGRAFT;PR:PRIMARY REPAIR;PA:PRIMARY REPAIR & ANNULOPLASTY DEVICE;AN:ANNULOPLASTY DEVICE ALONE;AU:AUTOGRAFT (ROSS);O:OTHER;^207;3^Q
"^DD",130,130,367,.1)
Aortic Valve Procedure
"^DD",130,130,367,3)
Enter the appropriate aortic valve procedure performed on this patient.
"^DD",130,130,367,12)
Screen prevents selection of inactive code.
"^DD",130,130,367,12.1)
S DIC("S")="I ""Y""'[Y"
"^DD",130,130,367,21,0)
^^19^19^3100614^
"^DD",130,130,367,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,367,21,2,0)
Indicate if the patient had an aortic valve replacement (either the 
"^DD",130,130,367,21,3,0)
native or a prosthetic valve) or a repair (on the native valve to 
"^DD",130,130,367,21,4,0)
relieve stenosis and/or correct regurgitation -annuloplasty,
"^DD",130,130,367,21,5,0)
commissurotomy, etc.); performed with or without additional
"^DD",130,130,367,21,6,0)
procedure(s); either with or without placing the patient on
"^DD",130,130,367,21,7,0)
cardiopulmonary bypass. (If a repair was attempted, but a replacement
"^DD",130,130,367,21,8,0)
occurred, indicate the details of the replacement valve.) Indicate 
"^DD",130,130,367,21,9,0)
the one most appropriate procedure:
"^DD",130,130,367,21,10,0)
  * None
"^DD",130,130,367,21,11,0)
  * Mechanical Valve            
"^DD",130,130,367,21,12,0)
  * Stented Bioprosthetic Valve   
"^DD",130,130,367,21,13,0)
  * Stentless Bioprosthetic Valve   
"^DD",130,130,367,21,14,0)
  * Homograft
"^DD",130,130,367,21,15,0)
  * Primary Valve Repair
"^DD",130,130,367,21,16,0)
  * Primary Valve Repair and Annuloplasty Device
"^DD",130,130,367,21,17,0)
  * Annuloplasty Device alone
"^DD",130,130,367,21,18,0)
  * Autograft Procedure (Ross Procedure)  
"^DD",130,130,367,21,19,0)
  * Other
"^DD",130,130,367,"DT")
3100614
"^DD",130,130,368,0)
MITRAL VALVE PROCEDURE^*S^Y:YES;N:NONE;M:MECHANICAL;S:STENTED BIOPROSTHETIC;B:STENTLESS BIOPROSTHETIC;H:HOMOGRAFT;PR:PRIMARY REPAIR;PA:PRIMARY REPAIR & ANNULOPLASTY DEVICE;AN:ANNULOPLASTY DEVICE ALONE;AU:AUTOGRAFT (ROSS);O:OTHER;^207;4^Q
"^DD",130,130,368,.1)
Mitral Valve Procedure
"^DD",130,130,368,3)
Enter the appropriate mitral valve procedure performed on this patient.
"^DD",130,130,368,12)
Screen prevents selection of inactive code.
"^DD",130,130,368,12.1)
S DIC("S")="I ""Y""'[Y"
"^DD",130,130,368,21,0)
^^19^19^3100614^
"^DD",130,130,368,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,368,21,2,0)
Indicate if the patient had a mitral valve replacement (either the 
"^DD",130,130,368,21,3,0)
native or a prosthetic valve) or a repair (on the native valve to 
"^DD",130,130,368,21,4,0)
relieve stenosis and/or correct regurgitation -annuloplasty, 
"^DD",130,130,368,21,5,0)
commissurotomy, etc.); performed with or without additional 
"^DD",130,130,368,21,6,0)
procedure(s); either with or without placing the patient on 
"^DD",130,130,368,21,7,0)
cardiopulmonary bypass. (If a repair was attempted, but a replacement 
"^DD",130,130,368,21,8,0)
occurred, indicate the details of the replacement valve.) Indicate 
"^DD",130,130,368,21,9,0)
the one most appropriate procedure:
"^DD",130,130,368,21,10,0)
  * None
"^DD",130,130,368,21,11,0)
  * Mechanical Valve            
"^DD",130,130,368,21,12,0)
  * Stented Bioprosthetic Valve   
"^DD",130,130,368,21,13,0)
  * Stentless Bioprosthetic Valve   
"^DD",130,130,368,21,14,0)
  * Homograft
"^DD",130,130,368,21,15,0)
  * Primary Valve Repair
"^DD",130,130,368,21,16,0)
  * Primary Valve Repair and Annuloplasty Device
"^DD",130,130,368,21,17,0)
  * Annuloplasty Device alone
"^DD",130,130,368,21,18,0)
  * Autograft Procedure (Ross Procedure)  
"^DD",130,130,368,21,19,0)
  * Other
"^DD",130,130,368,"DT")
3100614
"^DD",130,130,369,0)
TRICUSPID VALVE PROCEDURE^*S^Y:YES;N:NONE;M:MECHANICAL;S:STENTED BIOPROSTHETIC;B:STENTLESS BIOPROSTHETIC;H:HOMOGRAFT;PR:PRIMARY REPAIR;PA:PRIMARY REPAIR & ANNULOPLASTY DEVICE;AN:ANNULOPLASTY DEVICE ALONE;AU:AUTOGRAFT (ROSS);O:OTHER;^207;5^Q
"^DD",130,130,369,.1)
Tricuspid Valve Procedure
"^DD",130,130,369,3)
Enter the appropriate tricuspid valve procedure performed on this patient.
"^DD",130,130,369,12)
Screen prevents selection of inactive code.
"^DD",130,130,369,12.1)
S DIC("S")="I ""Y""'[Y"
"^DD",130,130,369,21,0)
^^19^19^3100614^
"^DD",130,130,369,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,369,21,2,0)
Indicate if the patient had a tricuspid valve replacement (either the 
"^DD",130,130,369,21,3,0)
native or a prosthetic valve) or a repair (on the native valve to 
"^DD",130,130,369,21,4,0)
relieve stenosis and/or correct regurgitation -annuloplasty, 
"^DD",130,130,369,21,5,0)
commissurotomy, etc.); performed with or without additional 
"^DD",130,130,369,21,6,0)
procedure(s); either with or without placing the patient on 
"^DD",130,130,369,21,7,0)
cardiopulmonary bypass. (If a repair was attempted, but a replacement 
"^DD",130,130,369,21,8,0)
occurred, indicate the details of the replacement valve.) Indicate 
"^DD",130,130,369,21,9,0)
the one most appropriate procedure:
"^DD",130,130,369,21,10,0)
  * None
"^DD",130,130,369,21,11,0)
  * Mechanical Valve            
"^DD",130,130,369,21,12,0)
  * Stented Bioprosthetic Valve   
"^DD",130,130,369,21,13,0)
  * Stentless Bioprosthetic Valve   
"^DD",130,130,369,21,14,0)
  * Homograft
"^DD",130,130,369,21,15,0)
  * Primary Valve Repair
"^DD",130,130,369,21,16,0)
  * Primary Valve Repair and Annuloplasty Device
"^DD",130,130,369,21,17,0)
  * Annuloplasty Device alone
"^DD",130,130,369,21,18,0)
  * Autograft Procedure (Ross Procedure)  
"^DD",130,130,369,21,19,0)
  * Other
"^DD",130,130,369,"DT")
3100614
"^DD",130,130,443,0)
INTRAOP DISSEMINATED CANCER^*S^Y:YES;N:NO;NS:NO STUDY;^200.1;4^Q
"^DD",130,130,443,.1)
Intraoperative Disseminated Cancer (Y/N)
"^DD",130,130,443,3)
Enter YES if cancer was found during the operative procedure.
"^DD",130,130,443,12)
Screen prevents selection of inactive code.
"^DD",130,130,443,12.1)
S DIC("S")="I ""NS""'=Y"
"^DD",130,130,443,21,0)
^^44^44^3100611^
"^DD",130,130,443,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,443,21,2,0)
Intraoperative Disseminated Cancer: Patients who have cancer that was
"^DD",130,130,443,21,3,0)
found during the operative procedure that:
"^DD",130,130,443,21,4,0)
 (1) Has spread to one site or more sites in addition to the primary 
"^DD",130,130,443,21,5,0)
     site      
"^DD",130,130,443,21,6,0)
 AND
"^DD",130,130,443,21,7,0)
 (2) In whom the presence of multiple metastases indicates the cancer 
"^DD",130,130,443,21,8,0)
     is widespread, fulminant, or near terminal. Other terms describing
"^DD",130,130,443,21,9,0)
     disseminated cancer include "diffuse," "widely metastatic," 
"^DD",130,130,443,21,10,0)
     "widespread," or "carcinomatosis" or AJCC "Stage IV" cancer.  
"^DD",130,130,443,21,11,0)
     Common sites of metastases include major organs (e.g., brain, 
"^DD",130,130,443,21,12,0)
     lung, liver, meninges, abdomen, peritoneum, pleura, and bone). You
"^DD",130,130,443,21,13,0)
     may use the National Cancer Institute as a reference in
"^DD",130,130,443,21,14,0)
     determining whether a patient has AJCC Stage IV cancer, when the
"^DD",130,130,443,21,15,0)
     TNM information is the only information documented. Refer to the
"^DD",130,130,443,21,16,0)
     following website for assistance with translating TNM values with
"^DD",130,130,443,21,17,0)
     AJCC staging:  
"^DD",130,130,443,21,18,0)
     http://www.cancer.gov/cancertopics/pdq/adulttreatment
"^DD",130,130,443,21,19,0)
 
"^DD",130,130,443,21,20,0)
 Examples:
"^DD",130,130,443,21,21,0)
 - A patient with a primary breast cancer with positive nodes in the 
"^DD",130,130,443,21,22,0)
   axilla does NOT qualify for this definition. The tumor has spread 
"^DD",130,130,443,21,23,0)
   to a site other than the primary site, but does not have widespread
"^DD",130,130,443,21,24,0)
   metastases. A patient with primary breast cancer with positive 
"^DD",130,130,443,21,25,0)
   nodes in the axilla AND liver metastases does qualify, because the
"^DD",130,130,443,21,26,0)
   tumor has spread to the axilla and other major organs.
"^DD",130,130,443,21,27,0)
  
"^DD",130,130,443,21,28,0)
 - A patient with colon cancer and no positive nodes or distant 
"^DD",130,130,443,21,29,0)
   metastases does NOT qualify. A patient with colon cancer and 
"^DD",130,130,443,21,30,0)
   several local lymph nodes positive for tumor, but no other evidence
"^DD",130,130,443,21,31,0)
   of metastatic disease does NOT qualify. A patient with colon cancer
"^DD",130,130,443,21,32,0)
   with liver metastases and/or peritoneal seeding with tumor does
"^DD",130,130,443,21,33,0)
   qualify.
"^DD",130,130,443,21,34,0)
 
"^DD",130,130,443,21,35,0)
 - A patient with adenocarcinoma of the prostate confined to the 
"^DD",130,130,443,21,36,0)
   capsule does NOT qualify. A patient with prostate cancer that
"^DD",130,130,443,21,37,0)
   extends through the capsule of the prostate only does NOT qualify. A
"^DD",130,130,443,21,38,0)
   patient with prostate cancer with bony metastases DOES qualify.
"^DD",130,130,443,21,39,0)
  
"^DD",130,130,443,21,40,0)
* Report Acute Lymphocytic Leukemia (ALL), Acute Myelogenous Leukemia 
"^DD",130,130,443,21,41,0)
(AML) and Stage IV Lymphoma under this variable. Do not report Chronic
"^DD",130,130,443,21,42,0)
Lymphocytic Leukemia (CLL), Chronic Myelogenous Leukemia (CML), 
"^DD",130,130,443,21,43,0)
Multiple Myeloma or Lymphomas that are Stage I-III as disseminated
"^DD",130,130,443,21,44,0)
cancer.
"^DD",130,130,443,"DT")
3070213
"^DD",130,130,446,0)
INTRAOPERATIVE ASCITES^S^Y:YES;N:NO;^200.1;6^Q
"^DD",130,130,446,.1)
Intraoperative Ascites
"^DD",130,130,446,3)
Enter Yes or No. NS is not allowed.
"^DD",130,130,446,21,0)
^.001^6^6^3100615^^
"^DD",130,130,446,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,446,21,2,0)
Intraoperative Ascites: The presence of fluid accumulation in the 
"^DD",130,130,446,21,3,0)
peritoneal cavity noted during the operative procedure. Documentation 
"^DD",130,130,446,21,4,0)
should state a history of or active liver disease (e.g. jaundice, 
"^DD",130,130,446,21,5,0)
encephalopathy, hepatomegaly, portal hypertension, liver failure, or 
"^DD",130,130,446,21,6,0)
spider telangiectasia).
"^DD",130,130,446,"DT")
3070122
"^DD",130,130,448,0)
POSTOP ATRIAL FIBRILLATION^S^Y:YES;N:NO;^205;40^Q
"^DD",130,130,448,.1)
Postoperative Atrial Fibrillation
"^DD",130,130,448,3)
Enter YES if the patient had a new onset postoperatively of atrial fibrillation/flutter (AF).
"^DD",130,130,448,21,0)
^^4^4^3100614^
"^DD",130,130,448,21,1,0)
VASQIP Definition (2010)
"^DD",130,130,448,21,2,0)
Indicate whether the patient had a new onset of atrial 
"^DD",130,130,448,21,3,0)
fibrillation/flutter (AF) requiring treatment. Does not include
"^DD",130,130,448,21,4,0)
recurrence of AF which had been present preoperatively.
"^DD",130,130,448,"DT")
3100614
"^DD",130,130,471,0)
D/T PATIENT DISCH FROM ICU^FXO^^208;23^N SRX S SRX=X,%DT="ERTXP" D ^%DT S X=Y K:Y<1 X S:SRX="RI"!(SRX="ri") X="RI"
"^DD",130,130,471,.1)
Date and Time Patient Discharged from ICU
"^DD",130,130,471,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,471,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,471,3)
Enter the first date and time of the discharge from the intensive care unit (ICU). 
"^DD",130,130,471,21,0)
^^12^12^3100610^
"^DD",130,130,471,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,471,21,2,0)
This is the first date and time of the discharge from the intensive 
"^DD",130,130,471,21,3,0)
care unit (ICU). ICU is usually a surgical unit (SICU), although it 
"^DD",130,130,471,21,4,0)
may also include a post-anesthesia recovery unit off the operating room.
"^DD",130,130,471,21,5,0)
It may also be a general ICU in which medical patients are also managed
"^DD",130,130,471,21,6,0)
(MICU, CCU). This will always be the unit into which the patient goes
"^DD",130,130,471,21,7,0)
immediately after surgery and is stabilized, ventilated and ultimately
"^DD",130,130,471,21,8,0)
extubated. Do not include lower acuity units where the patient goes
"^DD",130,130,471,21,9,0)
subsequently (i.e. stepdown, transitional care, telemetry, etc.). Do 
"^DD",130,130,471,21,10,0)
not include subsequent readmissions to the ICU.
"^DD",130,130,471,21,11,0)
 
"^DD",130,130,471,21,12,0)
RI - The patient remains in ICU at 30 days after surgery.
"^DD",130,130,471,"DT")
3100610
"^DD",130,130,474,0)
PREOP CIRCULATORY DEVICE^S^N:NONE;I:IABP;V:VAD (includes BIVAD);A:ARTIFICIAL HEART;O:OTHER;^209;2^Q
"^DD",130,130,474,.1)
Preop use of circulatory Device
"^DD",130,130,474,3)
Enter the Preoperative use of new mechanical circulatory device within 2 wks of surgery.
"^DD",130,130,474,21,0)
^^13^13^3100629^
"^DD",130,130,474,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,474,21,2,0)
Indicate whether there was any use of any device to assist ventricular 
"^DD",130,130,474,21,3,0)
function at the time the patient presents for surgery (or placed in the 
"^DD",130,130,474,21,4,0)
OR before anesthesia induction). Indicate the one appropriate response:
"^DD",130,130,474,21,5,0)
 
"^DD",130,130,474,21,6,0)
 None - No New Mechanical Circulatory Device was placed.
"^DD",130,130,474,21,7,0)
 IABP - An intra-aortic balloon pump was placed to assist ventricular
"^DD",130,130,474,21,8,0)
        function.
"^DD",130,130,474,21,9,0)
 VAD -  A ventricular assist device (e.g., LVAD, BIVAD) was placed to 
"^DD",130,130,474,21,10,0)
        assist ventricular function.
"^DD",130,130,474,21,11,0)
 Artificial Heart - An artificial heart was placed to assist ventricular 
"^DD",130,130,474,21,12,0)
        function.
"^DD",130,130,474,21,13,0)
 Other - An other type of Mechanical Circulatory Device was placed. 
"^DD",130,130,474,"DT")
3100629
"^DD",130,130,493,0)
PULMONARY VALVE PROCEDURE^S^N:NONE;M:MECHANICAL;S:STENTED BIOPROSTHETIC;B:STENTLESS BIOPROSTHETIC;H:HOMOGRAFT;PR:PRIMARY REPAIR;PA:PRIMARY REPAIR & ANNULOPLASTY DEVICE;AN:ANNULOPLASTY DEVICE ALONE;AU:AUTOGRAFT (ROSS);O:OTHER;^207;28^Q
"^DD",130,130,493,.1)
Pulmonary Valve Procedure
"^DD",130,130,493,3)
Enter the appropriate pulmonary valve procedure performed on this patient.
"^DD",130,130,493,21,0)
^^19^19^3100614^
"^DD",130,130,493,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,493,21,2,0)
Indicate if the patient had a pulmonary valve replacement (either the 
"^DD",130,130,493,21,3,0)
native or a prosthetic valve) or a repair (on the native valve to 
"^DD",130,130,493,21,4,0)
relieve stenosis and/or correct regurgitation -annuloplasty,
"^DD",130,130,493,21,5,0)
commissurotomy, etc.); performed with or without additional
"^DD",130,130,493,21,6,0)
procedure(s); either with or without placing the patient on
"^DD",130,130,493,21,7,0)
cardiopulmonary bypass. (If a repair was attempted, but a replacement
"^DD",130,130,493,21,8,0)
occurred, indicate the details of the replacement valve.) Indicate 
"^DD",130,130,493,21,9,0)
the one most appropriate procedure:
"^DD",130,130,493,21,10,0)
  * None
"^DD",130,130,493,21,11,0)
  * Mechanical Valve            
"^DD",130,130,493,21,12,0)
  * Stented Bioprosthetic Valve   
"^DD",130,130,493,21,13,0)
  * Stentless Bioprosthetic Valve   
"^DD",130,130,493,21,14,0)
  * Homograft
"^DD",130,130,493,21,15,0)
  * Primary Valve Repair
"^DD",130,130,493,21,16,0)
  * Primary Valve Repair and Annuloplasty Device
"^DD",130,130,493,21,17,0)
  * Annuloplasty Device alone
"^DD",130,130,493,21,18,0)
  * Autograft Procedure (Ross Procedure)  
"^DD",130,130,493,21,19,0)
  * Other
"^DD",130,130,493,"DT")
3100614
"^DD",130,130,505,0)
ENDOVASCULAR REPAIR^S^Y:YES;N:NO;^207.1;2^Q
"^DD",130,130,505,.1)
Endovascular Repair of Aorta
"^DD",130,130,505,3)
Enter Yes if an endovascular repair of the aorta was done with a cardiothoracic surgeon attending.
"^DD",130,130,505,21,0)
^^12^12^3100610^
"^DD",130,130,505,21,1,0)
VASQIP Definition (2010): 
"^DD",130,130,505,21,2,0)
Indicate if the patient had an endovascular repair of the descending
"^DD",130,130,505,21,3,0)
thoracic aorta, ascending aorta, and/or aortic arch (e.g., aneurysm,
"^DD",130,130,505,21,4,0)
pseudoaneurysm, dissection, penetrating ulcer, intramural hematoma, 
"^DD",130,130,505,21,5,0)
or traumatic disruption) with or without involving coverage of left
"^DD",130,130,505,21,6,0)
subclavian artery origin, initial endoprosthesis plus descending 
"^DD",130,130,505,21,7,0)
thoracic aortic extension(s), if required, to level of celiac artery
"^DD",130,130,505,21,8,0)
origin, with or without cardiopulmonary bypass. To include in CICSP, 
"^DD",130,130,505,21,9,0)
an attending cardiothoracic surgeon must have been present and involved 
"^DD",130,130,505,21,10,0)
in the procedure. It is typically done under general anesthesia and 
"^DD",130,130,505,21,11,0)
may be performed in the operating room or interventional radiology
"^DD",130,130,505,21,12,0)
operating area.
"^DD",130,130,505,"DT")
3100610
"^DD",130,130,507,0)
BNP^FX^^201;29^K:$L(X)>5!($L(X)<1) X I $D(X) D NUM^SROAL21
"^DD",130,130,507,.1)
B-type Natriuretic Peptide (BNP) 
"^DD",130,130,507,3)
Answer must be 1-5 characters in length.
"^DD",130,130,507,21,0)
^^4^4^3100602^
"^DD",130,130,507,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,507,21,2,0)
Indicate the BNP result (pg/mL) preoperatively evaluated closest to 
"^DD",130,130,507,21,3,0)
surgery but not greater than 180 days before surgery. Entering "NS" 
"^DD",130,130,507,21,4,0)
for "No Study" is allowed.
"^DD",130,130,507,"DT")
3100803
"^DD",130,130,507.1,0)
BNP DATE^FXO^^202.1;2^N SRX S SRX=X,%DT="EXP" D ^%DT S X=Y K:Y<1 X S:SRX="NS"!(SRX="ns") X="NS"
"^DD",130,130,507.1,.1)
B-type Natriuretic Peptide (BNP) Date
"^DD",130,130,507.1,2)
S Y(0)=Y S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,507.1,2.1)
S Y(0)=Y D DATE^SROAUTL
"^DD",130,130,507.1,3)
This is the date that the BNP was performed.
"^DD",130,130,507.1,21,0)
^^3^3^3100602^
"^DD",130,130,507.1,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,507.1,21,2,0)
Indicate the date that the preoperative BNP value was assessed. Enter
"^DD",130,130,507.1,21,3,0)
"NS" for No Study if the BNP test was not performed.
"^DD",130,130,507.1,"DT")
3100430
"^DD",130,130,509,0)
PREOP ATRIAL FIBRILLATION^S^Y:YES;N:NO;^208;19^Q
"^DD",130,130,509,.1)
Preoperative Atrial Fibrillation
"^DD",130,130,509,3)
Indicate whether atrial fibrillation or flutter is present within two weeks of the procedure. (Yes/No) 
"^DD",130,130,509,21,0)
^.001^4^4^3100602^^
"^DD",130,130,509,21,1,0)
VASQIP Definition (2010):
"^DD",130,130,509,21,2,0)
This field indicates whether atrial fibrillation or flutter is present 
"^DD",130,130,509,21,3,0)
within two weeks of the procedure. Enter YES or NO. Note: NS is not 
"^DD",130,130,509,21,4,0)
allowed.
"^DD",130,130,509,"DT")
3100602
"^DD",130,130.16,0)
OTHER PROCEDURES SUB-FIELD^NL^5^6
"^DD",130,130.16,0,"NM","OTHER PROCEDURES")

"^DD",130,130.16,.01,0)
OTHER PROCEDURE^MFX^^0;1^K:$L(X)>50!($L(X)<1) X D:$D(X) PROC^SROPROC,OCPTASO^SROADX2(0) K:$G(X)="" X
"^DD",130,130.16,.01,.1)
Other Procedure (Same Specialty)
"^DD",130,130.16,.01,1,0)
^.1^^0
"^DD",130,130.16,.01,3)
Your answer must be 1 to 50 characters in length.
"^DD",130,130.16,.01,21,0)
^^7^7^3100602^
"^DD",130,130.16,.01,21,1,0)
VASQIP Definition (2010):
"^DD",130,130.16,.01,21,2,0)
An additional operative procedure performed by the same surgical team
"^DD",130,130.16,.01,21,3,0)
(i.e., the same specialty/service) under the same anesthetic which has 
"^DD",130,130.16,.01,21,4,0)
a CPT code different from that of the Principal Operative Procedure
"^DD",130,130.16,.01,21,5,0)
(e.g., a splenectomy performed in the course of a cholecystectomy).
"^DD",130,130.16,.01,21,6,0)
This field should be verified. If need be, report discrepancies to the
"^DD",130,130.16,.01,21,7,0)
official CPT coder for surgery.
"^DD",130,130.16,.01,"DT")
3041101
"^DD",136.5,136.5,0)
FIELD^^5^6
"^DD",136.5,136.5,0,"DDA")
N
"^DD",136.5,136.5,0,"DT")
2950309
"^DD",136.5,136.5,0,"ID",2)
D DESC^SROCMPS
"^DD",136.5,136.5,0,"IX","B",136.5,.01)

"^DD",136.5,136.5,0,"IX","C",136.53,.01)

"^DD",136.5,136.5,0,"NM","PERIOPERATIVE OCCURRENCE CATEGORY")

"^DD",136.5,136.5,0,"PT",130.0126,5)

"^DD",136.5,136.5,0,"PT",130.053,5)

"^DD",136.5,136.5,0,"PT",130.13,3)

"^DD",136.5,136.5,0,"PT",130.22,5)

"^DD",136.5,136.5,0,"PT",139.046,.01)

"^DD",136.5,136.5,0,"VRPK")
SR
"^DD",136.5,136.5,.01,0)
OCCURRENCE CATEGORY^RFI^^0;1^K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X
"^DD",136.5,136.5,.01,.1)
Occurrence Category
"^DD",136.5,136.5,.01,1,0)
^.1
"^DD",136.5,136.5,.01,1,1,0)
136.5^B
"^DD",136.5,136.5,.01,1,1,1)
S ^SRO(136.5,"B",$E(X,1,30),DA)=""
"^DD",136.5,136.5,.01,1,1,2)
K ^SRO(136.5,"B",$E(X,1,30),DA)
"^DD",136.5,136.5,.01,3)
Your answer must be 3-60 characters in length.
"^DD",136.5,136.5,.01,9)
^
"^DD",136.5,136.5,.01,21,0)
^^3^3^2950427^
"^DD",136.5,136.5,.01,21,1,0)
This field contains the name of the perioperative occurrence category to
"^DD",136.5,136.5,.01,21,2,0)
be used when categorizing surgical and anesthesia perioperative
"^DD",136.5,136.5,.01,21,3,0)
occurrences.
"^DD",136.5,136.5,.01,"DT")
2950427
"^DD",136.5,136.5,.01,"LAYGO",1,0)
W !,"Adding to the Perioperative Occurrence Category file is not allowed !!",*7 I 0
"^DD",136.5,136.5,1,0)
INACTIVE?^SI^1:YES;0:NO;^0;2^Q
"^DD",136.5,136.5,1,.1)
Inactive? (Y/N)
"^DD",136.5,136.5,1,3)
Enter YES to inactivate this perioperative occurrence category.
"^DD",136.5,136.5,1,9)
^
"^DD",136.5,136.5,1,21,0)
^^2^2^2950224^
"^DD",136.5,136.5,1,21,1,0)
If this perioperative occurrence category is no longer used, enter YES to
"^DD",136.5,136.5,1,21,2,0)
flag this category as INACTIVE.
"^DD",136.5,136.5,1,"DT")
2950224
"^DD",136.5,136.5,2,0)
DESCRIPTION^136.52^^1;0
"^DD",136.5,136.5,2,9)
^
"^DD",136.5,136.5,2,20,0)
^.3LA^^0
"^DD",136.5,136.5,2,21,0)
^^2^2^2950224^
"^DD",136.5,136.5,2,21,1,0)
This is a description used to further define the perioperative occurrence
"^DD",136.5,136.5,2,21,2,0)
type.
"^DD",136.5,136.5,3,0)
SYNONYM^136.53^^2;0
"^DD",136.5,136.5,3,21,0)
^^1^1^2950315^
"^DD",136.5,136.5,3,21,1,0)
This is another name for this perioperative occurrence category.
"^DD",136.5,136.5,4,0)
INTRAOPERATIVE ALLOWED^SI^1:YES;0:NO;^0;3^Q
"^DD",136.5,136.5,4,.1)
Intraoperative Occurrence Allowed ?
"^DD",136.5,136.5,4,3)
Enter YES if this may be an intraoperative occurrence.
"^DD",136.5,136.5,4,9)
^
"^DD",136.5,136.5,4,21,0)
^^2^2^2951113^^
"^DD",136.5,136.5,4,21,1,0)
If this occurrence category may be associated with an intraoperative
"^DD",136.5,136.5,4,21,2,0)
occurrence, enter YES.
"^DD",136.5,136.5,4,"DT")
2951113
"^DD",136.5,136.5,5,0)
CARDIAC ONLY^S^Y:YES;N:NO;^0;4^Q
"^DD",136.5,136.5,5,.1)
Cardiac Only
"^DD",136.5,136.5,5,3)
Enter YES if the occurrence category is for a cardiac assessment case.
"^DD",136.5,136.5,5,9)
^
"^DD",136.5,136.5,5,21,0)
^^2^2^3000822^
"^DD",136.5,136.5,5,21,1,0)
If this occurrence category may be associated with a cardiac assessed case
"^DD",136.5,136.5,5,21,2,0)
only, enter YES.
"^DD",136.5,136.5,5,"DT")
3000713
"^DD",136.5,136.52,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",136.5,136.52,0,"NM","DESCRIPTION")

"^DD",136.5,136.52,0,"UP")
136.5
"^DD",136.5,136.52,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",136.5,136.52,.01,.1)
Perioperative Occurrence Category Decsription
"^DD",136.5,136.52,.01,3)
Enter a brief description further defining this perioperative occurrence type.
"^DD",136.5,136.52,.01,21,0)
^^2^2^2950224^
"^DD",136.5,136.52,.01,21,1,0)
This is a description used to further define and clarify each
"^DD",136.5,136.52,.01,21,2,0)
perioperative occurrence category.
"^DD",136.5,136.52,.01,21,3,0)
 
"^DD",136.5,136.52,.01,"DT")
2950224
"^DD",136.5,136.53,0)
SYNONYM SUB-FIELD^^.01^1
"^DD",136.5,136.53,0,"DT")
2950309
"^DD",136.5,136.53,0,"IX","B",136.53,.01)

"^DD",136.5,136.53,0,"NM","SYNONYM")

"^DD",136.5,136.53,0,"UP")
136.5
"^DD",136.5,136.53,.01,0)
SYNONYM^MF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>60!($L(X)<3) X
"^DD",136.5,136.53,.01,.1)
Synonym
"^DD",136.5,136.53,.01,1,0)
^.1
"^DD",136.5,136.53,.01,1,1,0)
136.53^B
"^DD",136.5,136.53,.01,1,1,1)
S ^SRO(136.5,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",136.5,136.53,.01,1,1,2)
K ^SRO(136.5,DA(1),2,"B",$E(X,1,30),DA)
"^DD",136.5,136.53,.01,1,2,0)
136.5^C
"^DD",136.5,136.53,.01,1,2,1)
S ^SRO(136.5,"C",$E(X,1,30),DA(1),DA)=""
"^DD",136.5,136.53,.01,1,2,2)
K ^SRO(136.5,"C",$E(X,1,30),DA(1),DA)
"^DD",136.5,136.53,.01,1,2,"DT")
2950309
"^DD",136.5,136.53,.01,3)
Answer must be 3-60 characters in length.
"^DD",136.5,136.53,.01,21,0)
^^1^1^2950315^
"^DD",136.5,136.53,.01,21,1,0)
This is another name for this perioperative occurrence category.
"^DD",136.5,136.53,.01,"DT")
2950309
"^DIC",136.5,136.5,0)
PERIOPERATIVE OCCURRENCE CATEGORY^136.5I
"^DIC",136.5,136.5,0,"GL")
^SRO(136.5,
"^DIC",136.5,136.5,"%D",0)
^1.001^4^4^3060301^^^
"^DIC",136.5,136.5,"%D",1,0)
This file contains perioperative occurrence categories used within the
"^DIC",136.5,136.5,"%D",2,0)
DHCP Surgery package.  All perioperative occurrences entered must be
"^DIC",136.5,136.5,"%D",3,0)
grouped into one of the categories contained in this file.  The fields in
"^DIC",136.5,136.5,"%D",4,0)
this file are restricted so that entries cannot be altered.
"^DIC",136.5,136.5,"%D",5,0)
 
"^DIC",136.5,"B","PERIOPERATIVE OCCURRENCE CATEGORY",136.5)

"BLD",7180,6)
^166
**END**
**END**
