Released RT*2*45 SEQ #42
Extracted from mail message
**KIDS**:RT*2.0*45^

**INSTALL NAME**
RT*2.0*45
"BLD",7265,0)
RT*2.0*45^RECORD TRACKING^0^3070912^y
"BLD",7265,1,0)
^^2^2^3070912^
"BLD",7265,1,1,0)
Delete Record Tracking menu option and correct an undefined error when 
"BLD",7265,1,2,0)
using the [RT SM-CLINIC REQUESTS] option.
"BLD",7265,4,0)
^9.64PA^^
"BLD",7265,6.3)
7
"BLD",7265,"ABPKG")
n
"BLD",7265,"KRN",0)
^9.67PA^8989.52^19
"BLD",7265,"KRN",.4,0)
.4
"BLD",7265,"KRN",.401,0)
.401
"BLD",7265,"KRN",.402,0)
.402
"BLD",7265,"KRN",.403,0)
.403
"BLD",7265,"KRN",.5,0)
.5
"BLD",7265,"KRN",.84,0)
.84
"BLD",7265,"KRN",3.6,0)
3.6
"BLD",7265,"KRN",3.8,0)
3.8
"BLD",7265,"KRN",9.2,0)
9.2
"BLD",7265,"KRN",9.8,0)
9.8
"BLD",7265,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7265,"KRN",9.8,"NM",1,0)
RTQ2^^0^B24915590
"BLD",7265,"KRN",9.8,"NM","B","RTQ2",1)

"BLD",7265,"KRN",19,0)
19
"BLD",7265,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",7265,"KRN",19,"NM",1,0)
RT TRANS-PATIENT^^1^
"BLD",7265,"KRN",19,"NM","B","RT TRANS-PATIENT",1)

"BLD",7265,"KRN",19.1,0)
19.1
"BLD",7265,"KRN",101,0)
101
"BLD",7265,"KRN",101,"NM",0)
^9.68A^^
"BLD",7265,"KRN",409.61,0)
409.61
"BLD",7265,"KRN",771,0)
771
"BLD",7265,"KRN",870,0)
870
"BLD",7265,"KRN",8989.51,0)
8989.51
"BLD",7265,"KRN",8989.52,0)
8989.52
"BLD",7265,"KRN",8994,0)
8994
"BLD",7265,"KRN","B",.4,.4)

"BLD",7265,"KRN","B",.401,.401)

"BLD",7265,"KRN","B",.402,.402)

"BLD",7265,"KRN","B",.403,.403)

"BLD",7265,"KRN","B",.5,.5)

"BLD",7265,"KRN","B",.84,.84)

"BLD",7265,"KRN","B",3.6,3.6)

"BLD",7265,"KRN","B",3.8,3.8)

"BLD",7265,"KRN","B",9.2,9.2)

"BLD",7265,"KRN","B",9.8,9.8)

"BLD",7265,"KRN","B",19,19)

"BLD",7265,"KRN","B",19.1,19.1)

"BLD",7265,"KRN","B",101,101)

"BLD",7265,"KRN","B",409.61,409.61)

"BLD",7265,"KRN","B",771,771)

"BLD",7265,"KRN","B",870,870)

"BLD",7265,"KRN","B",8989.51,8989.51)

"BLD",7265,"KRN","B",8989.52,8989.52)

"BLD",7265,"KRN","B",8994,8994)

"BLD",7265,"QUES",0)
^9.62^^
"BLD",7265,"REQB",0)
^9.611^^
"KRN",19,13047,-1)
1^1
"KRN",19,13047,0)
RT TRANS-PATIENT
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",72,-1)
1^1
"PKG",72,0)
RECORD TRACKING^RT^Medical Records and Film Jacket Tracking
"PKG",72,20,0)
^9.402P^^
"PKG",72,22,0)
^9.49I^1^1
"PKG",72,22,1,0)
2.0^2911022
"PKG",72,22,1,"PAH",1,0)
45^3070912
"PKG",72,22,1,"PAH",1,1,0)
^^2^2^3070912
"PKG",72,22,1,"PAH",1,1,1,0)
Delete Record Tracking menu option and correct an undefined error when 
"PKG",72,22,1,"PAH",1,1,2,0)
using the [RT SM-CLINIC REQUESTS] option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RTQ2")
0^1^B24915590^B24903572
"RTN","RTQ2",1,0)
RTQ2 ;MJK,JSM/TROY ISC;Scheduling Link; ; 5/21/87  3:09 PM ;
"RTN","RTQ2",2,0)
 ;;2.0;Record Tracking;**13,15,21,45**;10/22/91;Build 7
"RTN","RTQ2",3,0)
BLD I $D(SDPL) S RTINP=+$P(^RTV(195.9,RTB,0),"^",3)
"RTN","RTQ2",4,0)
 E  S RTINP=0
"RTN","RTQ2",5,0)
 F RTBLD=0:0 S RTBLD=$O(^RTV(195.9,RTB,"RECS",RTBLD)) Q:'RTBLD  S X=$G(^(RTBLD,0)) I X]"" D
"RTN","RTQ2",6,0)
 . I $D(RTINP(RTINP)) Q  ; don't create for inpts
"RTN","RTQ2",7,0)
 . I $P($G(^DIC(195.1,+RTINP,4)),"^",3)="n",'$D(^RT("AT",+X,DFN_";DPT(")) Q  ; don't create record, no record exists
"RTN","RTQ2",8,0)
 . D BLD1 S RTSD=""
"RTN","RTQ2",9,0)
 Q
"RTN","RTQ2",10,0)
 ;
"RTN","RTQ2",11,0)
BLD1 Q:$S('$D(^DIC(195.2,+X,0)):1,$P(X,"^",2)']"":1,$P(X,"^",2)="n":1,1:0)
"RTN","RTQ2",12,0)
 S RTTY=+X,RTTYR(+X)="",RTAPL=+$P(X,"^",3),RTSEL=$C($A($P(X,"^",2))-32)
"RTN","RTQ2",13,0)
BLD2 S (L,L1)=0 F I=0:0 S I=$O(^RT("AT",RTTY,RTE,I)) Q:'I  I $D(^RT(I,0)) S:RTSEL["A" RTSD(I)=+RTAPL S:$P(^(0),"^",7)>L L=$P(^(0),"^",7),L1=I
"RTN","RTQ2",14,0)
 I 'L1 K RTSHOW D TYPE1^RTDPA1 S RTTY=+RTTY G BLD2
"RTN","RTQ2",15,0)
 S:RTSEL["L" RTSD(L1)=+RTAPL
"RTN","RTQ2",16,0)
 Q
"RTN","RTQ2",17,0)
 ;ent from SD
"RTN","RTQ2",18,0)
CREATE Q:'$D(^SC(SDSC,0))  S Y=^(0),RTB=SDSC_";SC(",RTA=+^DIC(195.4,1,$S(SDPL:"MAS",$P(Y,"^",3)="I":"RAD",1:"MAS")) D CHK S Y=+$P(^RTV(195.9,Y,0),"^",12)
"RTN","RTQ2",19,0)
 S RTAPPIEN("MAS")=+^DIC(195.4,1,"MAS"),RTAPP("MAS")=$G(^DIC(195.1,RTAPPIEN("MAS"),4))
"RTN","RTQ2",20,0)
 S RTAPPIEN("RAD")=+^DIC(195.4,1,"RAD"),RTAPP("RAD")=$G(^DIC(195.1,RTAPPIEN("RAD"),4))
"RTN","RTQ2",21,0)
 ;exclude inpatients by app
"RTN","RTQ2",22,0)
 K RTINP I SDPL,$D(^DPT(DFN,.1)),^(.1)]"" DO
"RTN","RTQ2",23,0)
 .I +RTAPP("MAS") S RTINP(RTAPPIEN("MAS"))=""
"RTN","RTQ2",24,0)
 .I +RTAPP("RAD") S RTINP(RTAPPIEN("RAD"))=""
"RTN","RTQ2",25,0)
 I $D(RTINP(RTAPPIEN("MAS"))),$D(RTINP(RTAPPIEN("RAD"))) K RTINP Q
"RTN","RTQ2",26,0)
 ;
"RTN","RTQ2",27,0)
 I '$D(RTCLEX),$D(RTEXCLUD)>9,$D(^DPT(DFN,"S",SDTTM,0)),RTEXCLUD(RTA)[(U_$P(^(0),"^",16)_U) Q
"RTN","RTQ2",28,0)
 I $D(^RTV(195.9,Y,0)),$P(^(0),"^")[";SC(",$D(^SC(+^(0),0)) S SDSC=+^RTV(195.9,Y,0),RTB=Y
"RTN","RTQ2",29,0)
 I '$D(^SC("ARAD",SDSC,SDTTM,DFN)),$P(^RTV(195.9,RTB,0),"^",14)="n" Q
"RTN","RTQ2",30,0)
 S Y=^SC(SDSC,0),RTE=DFN_";DPT(",RTPLTY=1,(RTQDT,X)=SDTTM,RTPN=$P(Y,"^")_" ["_$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)_"]"
"RTN","RTQ2",31,0)
 S X=RTB,A=+RTA K RTA,RTSD,RTDIV D INST1^RTUTL G Q:'$D(RTINST) S RTDIV=RTINST
"RTN","RTQ2",32,0)
 G Q:$S('SDPL:0,'$D(^SC(SDSC,"S",SDTTM,1,SDPL,0)):1,DFN'=+^(0):1,$P(^(0),"^",9)["C":1,$D(^("RTR")):1,1:0) D BLD
"RTN","RTQ2",33,0)
 I SDPL,'$D(RTSD) F RTBLD=0:0 S RTBLD=$O(^DIC(195.1,RTAPPIEN("MAS"),"MAS",RTBLD)) Q:'RTBLD  I $D(^(RTBLD,0)) S X=^(0) D
"RTN","RTQ2",34,0)
 . I $D(RTINP(RTAPPIEN("MAS"))) Q  ; don't create for inpatients
"RTN","RTQ2",35,0)
 . I $P(RTAPP("MAS"),"^",3)="n",'$D(^RT("AT",+X,DFN_";DPT(")) Q  ; don't create record, no record exists
"RTN","RTQ2",36,0)
 . D BLD1
"RTN","RTQ2",37,0)
 I SDPL,$D(^SC("ARAD",SDSC,SDTTM,DFN)),$P(^(DFN),"^")'["N" F RTBLD=0:0 S RTBLD=$O(^DIC(195.1,RTAPPIEN("MAS"),"RAD",RTBLD)) Q:'RTBLD  I $D(^(RTBLD,0)) S X=^(0) D  ; only stored under MAS application
"RTN","RTQ2",38,0)
 . I $D(RTINP(RTAPPIEN("RAD"))) Q  ; don't create for inpatients
"RTN","RTQ2",39,0)
 . I $P(RTAPP("RAD"),"^",3)="n",'$D(^RT("AT",+X,DFN_";DPT(")) Q  ; don't create record, no record exists
"RTN","RTQ2",40,0)
 . D BLD1:'$D(RTTYR(+X))
"RTN","RTQ2",41,0)
 D RTSD I $D(RTPAR),SDPL D RTSET^SDUTL
"RTN","RTQ2",42,0)
Q K RTINP,RTAPP,RTAPPIEN,RTBLD,RTTYR,RTBKGRD,RTPAR,RTSD,RT,RTSEL
"RTN","RTQ2",43,0)
 K A,Z,L,L1,I,RTINST,RTDIV,RTPULL,RTPN,RTTY,RTTYP,RTAPL,RTQ,RTY,RTS,RTQDT,RTB,RTPLTY,RTE D CLOSE^RTUTL Q
"RTN","RTQ2",44,0)
 ;
"RTN","RTQ2",45,0)
PULL F I=0:0 S I=$O(^RTV(194.2,"B",RTPN,I)) Q:'I  I $D(^RTV(194.2,I,0)),$P(^(0),"^",15)=+RTAPL,$P(^(0),"^",2)=$P(RTQDT,".") Q
"RTN","RTQ2",46,0)
 I I S RTPULL=I Q
"RTN","RTQ2",47,0)
 S I=$P(^RTV(194.2,0),"^",3)
"RTN","RTQ2",48,0)
LOCK S I=I+1 L +^RTV(194.2,I):1 I '$T!$D(^RTV(194.2,I)) L -^RTV(194.2,I) G LOCK
"RTN","RTQ2",49,0)
 S ^RTV(194.2,I,0)=RTPN_"^^^^^^^^^^^^^^"_+RTAPL,^RTV(194.2,"B",RTPN,I)="",^RTV(194.2,"AC",+RTAPL,I)="",^(0)=$P(^RTV(194.2,0),"^",1,2)_"^"_I_"^"_($P(^(0),"^",4)+1),^DISV($S($D(DUZ)'[0:DUZ,1:0),"^RTV(194.2,")=I L -^RTV(194.2,I)
"RTN","RTQ2",50,0)
 S (DA,RTPULL)=I,DR="[RT PULL LIST]",DIE="^RTV(194.2," D ^DIE K DQ,DE Q
"RTN","RTQ2",51,0)
 ;
"RTN","RTQ2",52,0)
CANCEL Q:'$D(^RTV(190.1,+RTPAR,0))  S (RTQ,RTPAR)=+RTPAR,RTCAN="I $P(^(0),""^"",6)'=""x"" S DA=RTQ,DIE=""^RTV(190.1,"",DR=""[RT CHANGE REQUEST STATUS]"",RTSTAT=""x"" D ^DIE K DQ,DE" X RTCAN
"RTN","RTQ2",53,0)
 F RTQ=0:0 S RTQ=$O(^RTV(190.1,"APAR",RTPAR,RTQ)) Q:'RTQ  I $D(^RTV(190.1,RTQ,0)) X RTCAN
"RTN","RTQ2",54,0)
 K RTCAN,RTQ,RTSTAT Q
"RTN","RTQ2",55,0)
 ;
"RTN","RTQ2",56,0)
RTSD K RTPAR F RT=0:0 S RT=$O(RTSD(RT)) Q:'RT  S RTB=SDSC_";SC(",(RTA,RTAPL)=+RTSD(RT) D CHK K RTA,RTQ D PULL:SDPL,SET^RTQ K:'$D(RTQ) RTSD(RT) I '$D(RTPAR),$D(RTQ) S RTPAR=RTQ
"RTN","RTQ2",57,0)
 Q
"RTN","RTQ2",58,0)
 ;
"RTN","RTQ2",59,0)
CHK S Y=+$O(^RTV(195.9,"ABOR",RTB,RTA,0)) D SET^RTDPA3:'Y S RTB=Y Q
"RTN","RTQ2",60,0)
 ;
"RTN","RTQ2",61,0)
QUE I SDPL,$P(SDTTM,".")=DT S X="I",RTCLEX="" D SAVE^RTQ3,ASK^RTQ3 K RTESC S:$E(X)'="Y" RTESC="" S X="I" D RESTORE^RTQ3 S X=SDTTM I $D(RTESC) K RTESC,RTCLEX Q
"RTN","RTQ2",62,0)
 ;
"RTN","RTQ2",63,0)
 I $P(SDTTM,".")'=DT,SDPL,SDRT="A",$P(^DIC(195.4,1,0),"^",5) Q
"RTN","RTQ2",64,0)
 ;S SAVX=X
"RTN","RTQ2",65,0)
 X ^%ZOSF("UCI") S ZTUCI=Y,ZTRTN="DQ^RTQ2",ZTDTH=$H
"RTN","RTQ2",66,0)
 F V="DUZ(0)","SDSC","SDTTM","SDPL","DFN","RTCOM","RTCLEX" I $D(@V) S ZTSAVE(V)=""
"RTN","RTQ2",67,0)
 S ZTDESC="MAS/X-RAY Record Request Link",ZTIO=$P(^DIC(195.4,1,0),"^",3) K H,V,ZTSK N X D ^%ZTLOAD Q
"RTN","RTQ2",68,0)
 ;
"RTN","RTQ2",69,0)
DQ S RTBKGRD="",U="^" K V S X="T",%DT="" D ^%DT S DT=Y
"RTN","RTQ2",70,0)
 ;I $P(^DIC(195.4,1,0),"^",5) S SDPL=0
"RTN","RTQ2",71,0)
 G CREATE
"RTN","RTQ2",72,0)
 ;
"RTN","RTQ2",73,0)
 ;
"RTN","RTQ2",74,0)
DOC ;
"RTN","RTQ2",75,0)
 ;
"RTN","RTQ2",76,0)
 ;
"RTN","RTQ2",77,0)
 ;
"RTN","RTQ2",78,0)
 ;    in: SDSC=clinic#, SDTTM=appt d/t, DFN=patient#
"RTN","RTQ2",79,0)
 ;    out: RTPAR=parent request#, RTSD(n)=volumes selected
"VER")
8.0^22.0
"BLD",7265,6)
^42
**END**
**END**
