$TXT Created by BOWEN,MARY JANE at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 11/10/08 at 12:53
=============================================================================
Run Date: MAR 04, 2009                     Designation: DG*5.3*796
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #701                    Status: Released
                  Compliance Date: APR 04, 2009
=============================================================================

Associated patches: (v)DG*5.3*447  <<= must be installed BEFORE `DG*5.3*796'
                    (v)DG*5.3*769  <<= must be installed BEFORE `DG*5.3*796'

Subject: PSEUDO DISCHARGE CLEANUP, MISSING ROUTINE FIX, PDX MAIL FIX

Category: 
  - Routine

Description:
============

 This patch contains a cleanup for pseudo discharge dates, changes to
 Mental Health patient lookups and PDX mail message errors.
  
  ASSOCIATED REMEDY TICKETS:
  ==========================
  1) HD0000000276838 - PTF showing 2 discharges
  2) HD0000000276267 - 2 NO ROUTINE error IN DGWPT MISSING OR3CONV
  3) HD0000000283078 - PDX Transmission 
     DUPLICATES:
     ===========
     HD0000000281102 - UNABLE TO PROPERLY RECEIVE TRANSMISSION
     HD0000000283670 - Unable to recieve PDX 
     HD0000000283663 - PDX ERRORS 
     HD0000000283646 - Logging this as a duplicate of #281252 
     HD0000000282671 - VistA Mail message w/Subj: UNABLE TO PROPERLY 
                       RECEIVE TRANSMISSION
     HD0000000282332 - PDX TRANSMISSION ERRORS 
     HD0000000282327 - Unable to send results received bulletin 
     HD0000000281252 - UNABLE TO PROPERLY RECEIVE TRANSMISSION  
     HD0000000292569 - PDX TRANSMISSION ERROR
     HD0000000298352 - MAILMAN ERRORS FOR PDX ERRORS
     HD0000000298483 - PDX Error Messages/Bulletins
  
  ASSOCIATED NSRs:
  =================
  N/A
    
  PARTICIPATING TEST SITES:
  =========================
  Montana HCS
  Tampa, FL
  Salisbury, NC
  Iron Mountain, MI
  Dayton, OH
  Houston, TX
  Oklahoma City, OK
  Tuscaloosa, AL
  
  REMEDY OVERVIEW:
  ================
   1) HD0000000276838 - PTF showing 2 discharges
  
   Problem:
   ========
   There are some patients who are not discharged, however they have a 
   psuedo discharge date in their PTF record from a previous ASIH movement.
   
   Solution:
   =========
   DG*5.3*784 was previously issued to keep this from occurring.  There was
   not, however, a cleanup for current PTF's with this problem.
   Routine, DG53P796, included in this patch will clean-up any left over
   discharge dates.  A message will be sent to the patch installer listing
   any corrected records. Additionally, the same details are preserved in
   the ^XTMP global. The location in the ^XTMP global is 
   ^XTMP("DG53P796-"_$J.  This data is set to be retained for 30 days, but
   it may be purged earlier than that.  NO ACTION is required from site.
  
   
   2) HD0000000276267- 2 NO ROUTINE error IN DGWPT MISSING OR3CONV
  
   Problem:
   =======
   When CPRS v27 was released, two routines were deleted that Mental Health
   was using, causing an error.
   
   Solution:
   ========
   DGQPT AND DGWPT were changed to not place a call to the OR3CONV routine.
  
  
   3) HD0000000283078 - PDX Transmission
   
   Problem:
   =======
   Sensitive patient mail messages erroring. 
  
   Solution:
   ========
   Routine DGSEC was changed to have a variable set up and checked after 
   calling API $$GET1^DIQ.
  
  INSTALLATION INSTRUCTIONS:
  ===========================
  This patch may be run with users on the system. Installation could take
  15 minutes, depending on the number of PTF records on the system.  
  Installation should be done during off-peak hours, when Registration 
  users aren't on the system.
  Post-Install routine DG53P796 can be deleted after installation.  
    
  1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
      the KIDS distribution included with this message.
    
  2.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
    
  3.  From this menu, you may elect to use the following options
      (when prompted for INSTALL NAME, enter DG*5.3*796):
      a.  Compare Transport Global to Current System  - this option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch (routines,
          DDs, templates, etc.).
      b.  Verify Checksums in Transport Global - this option will
          allow you to ensure the integrity of the routines that are in
          the transport global.
      c.  Print Transport Global - this option will allow you to view the
          components of the KIDS build.
      d.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
    
  4.  Use the Install Package(s) option and select the package DG*5.3*796.
    
  5.  When prompted, 'Want KIDS to INHIBIT LOGONs during the install?
      NO//', respond NO.
    
  6.  When prompted, 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? NO//', respond NO.
  
 PLEASE NOTE:
 ============
   Routine DGSEC, distributed in this patch, references routines
   A7RDPACT, MPRCHK and GMRPNCW.  These routines are no longer part of the
   national Class I routine set, but may still be in use at some sites.
  
   If  DG*5.3*796  is installed in an account where those routines are not 
   present, XINDEX may display this message:  "Reference to routine (one of
   the above). That isn't in this UCI."  This alert message can be ignored.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13, 1993;Build 6

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DG53P796
    Before:       n/a   After: B12926435  **796**
Routine Name: DGQPT
    Before: B72843346   After: B71263703  **447,796**
Routine Name: DGSEC
    Before: B42705118   After: B42431719  **32,46,197,214,249,281,352,
                                           391,425,582,769,796**
Routine Name: DGWPT
    Before: B10008432   After:  B9892752  **447,796**
 
Routine list of preceding patches: 447, 769

=============================================================================
User Information:
Entered By  : CHANDARANA,RISHAN             Date Entered  : OCT 09, 2008
Completed By: SESSLER,APRIL                 Date Completed: MAR 03, 2009
Released By : CANNEDY,JOELLEN               Date Released : MAR 04, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
