$TXT Created by GUTHRIE,MARY at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 11/27/07 at 13:55
=============================================================================
Run Date: MAR 17, 2008                     Designation: DG*5.3*762
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #685                    Status: Released
                  Compliance Date: APR 17, 2008
=============================================================================


Subject: RAI/MDS INTERFACE UPDATES

Category: 
  - Routine

Description:
============

 Fix the UNDEF error that occurs in DGRUDYN.  The actual routine that is 
 edited by this patch is not DGRUDYN.  Instead it is DGRUGBJ, the 
 background job that should run every 5 or 10 minutes.  This process looks 
 for edits that should be transmitted to RAI/MDS.  If the patient is moved 
 to a non-NHCU location after the edit but before the job processes, an 
 error will occur.
  
 Modify the HL7 messages from VistA to RAI/MDS so that the transferred-to 
 location is transmitted rather than the current admit location when a 
 resident is transferred to a different ward and then changes to an ASIH 
 status. 
  
 Modify the HL7 messages from VistA to RAI/MDS so that the attending 
 physician is transmitted rather than the admitting physician. 
  
 Modify the HL7 messages from VistA to RAI/MDS so that "N" is transmitted 
 for the Medicaid number rather than nothing if the resident does not have 
 a Medicaid number in VistA.
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 134845 - Error (Undefined)EN37^DGRUDYN
 188375 - DGRURAI Batch Update error
 187847 - DGRU RAI BATCH UPDATE background task erroring
 163196 - Patient Not Crossing to Accumed
 180915 - Problem with ASIH
 184812 - Accumed HL 7 Integration Logfile Errors
 194532 - Accu-Care Bed Corruption In The Admissions Module
 196458 - ASIH Transmission Failures
 191689 - Accumed Admission Rejections
  
 Overview of Remedy Ticket(s):
 -----------------------------
 Problem:
 Fix the UNDEF error that occurs in DGRUDYN.  The actual routine that is 
 edited by this patch is not DGRUDYN.  Instead it is DGRUGBJ, the 
 background job that should run every 5 or 10 minutes.  
  
 Resolution:  
 This process looks for edits that should be transmitted to RAI/MDS.  If
 the patient is moved to a non-NHCU location after the edit but before the
 job processes, an error will occur. The routine is modified to check the 
 resident's current location.  If the location is not an RAI/MDS ward, the 
 record is marked as sent and then skipped.
  
 Problem:
 Some A22 HL7 messages are rejected if the message contains an 
 incorrect patient location.  A resident who had been transferred between 
 two NHCU wards and then sent ASIH would have an incorrect location when 
 the patient was returned from ASIH.
  
 Resolution:
 Modify the HL7 messages from VistA to RAI/MDS so that the transferred-to
 location is transmitted rather than the current admit location when a 
 resident is transferred to a different ward and then changes to an ASIH 
 status. Please note that this does not address errors with A21 messages.
  
 Problem:
 The resident's current attending physician is not included in the HL7 
 messages. Instead, the admitting physician is sent. Users have requested 
 that, for the purposes of RAI/MDS, the attending physician be sent 
 instead of the admitting physician.
  
 Resolution:
 Modify the HL7 messages from VistA to RAI/MDS so that the attending 
 physician is transmitted rather than the admitting physician. 
  
 Problem:
 MDS assessment transmissions are rejected in the Austin database because 
 of blank Medicaid numbers.  The request is to automatically fill a blank 
 Medicaid number with 'N' in HL7 messages.
  
 Resolution:
 Modify the HL7 messages from VistA to RAI/MDS so that  "N" is transmitted 
 for the Medicaid number rather than nothing if the resident does not have 
 a Medicaid number in VistA.
  
  
 Components Sent With Patch: 
 --------------------------
  
 Only routines sent with patch.
  
 Test Sites (relevant Nursing Home Care Units):
 ----------------------------------------------
  
 Upstate New York Healthcare System (Buffalo/Batavia)
 Tennessee Valley Healthcare System (Murfreesboro)
 Pittsburgh VAMC
 New York Harbor Healthcare System (Queens/St. Albans)
  
 ************** PRE-INSTALLATION INSTRUCTIONS **************
  
 The HL7 logical link with the name DGRU<station number> should be 
 stopped. 
  
 In addition, it is recommended that the Integration Gateway on the 
 RAI/MDS database server be stopped.
  
 **************INSTALLATION INSTRUCTIONS **********************
  
 This patch takes less than 5 minutes to install.  This patch should be 
 loaded during non-peak hours to minimize disruption to the users.  No 
 menu options need to be disabled.
  
 Install Time - less than 5 minutes.
  
 ***********************************************************
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter DG*5.3*762):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         YES//' answer NO (unless otherwise indicated)
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? NO//' answer NO
  
  
 ************** POST-INSTALLATION INSTRUCTIONS **************
  
 Restart the HL7 logical link DGRU<station number>. Restart RAI/MDS 
 Integration Gateway as suggested in the Pre-Install Instructions.
  
 ***********************************************************

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13, 1993;Build 3

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGRUGA01
    Before: B25569417   After: B26907764  **190,303,762**
Routine Name: DGRUGA08
    Before: B22077652   After: B22672639  **190,312,328,721,762**
Routine Name: DGRUGA22
    Before:  B8011843   After:  B8781272  **190,762**
Routine Name: DGRUGBJ
    Before: B13568617   After: B14132349  **190,312,357,762**
Routine Name: DGRUUTL
    Before: B10634228   After: B12832905  **190,444,762**
 
Routine list of preceding patches: 303, 357, 444, 721

=============================================================================
User Information:
Entered By  : GUTHRIE,MARY H                Date Entered  : JUN 27, 2007
Completed By: SIRCO,LUCIA                   Date Completed: MAR 11, 2008
Released By : ALEXANDER,DIANNE              Date Released : MAR 17, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
