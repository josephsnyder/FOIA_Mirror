$TXT Created by HUA,PATRICK at MNTVLL.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 04/28/09 at 13:13
=============================================================================
Run Date: MAY 27, 2009                     Designation: DG*5.3*793
Package : DG - REGISTRATION                   Priority: EMERGENCY
Version : 5.3       SEQ #707                    Status: Released
                  Compliance Date: MAY 29, 2009
=============================================================================

Associated patches: (v)DG*5.3*688  <<= must be installed BEFORE `DG*5.3*793'

Subject: FIX OEF/OIF DATA BEING INCORRECTLY DELETED

Category: 
  - Routine

Description:
============

 This patch corrects a problem in VistA where the DATA LOCKED field #.04
 in the SERVICE [OEF OR OIF] sub-file #.3215 of the PATIENT file #2 is not
 being correctly set.  Additionally, the code will be updated to handle
 Eligibility/Enrollment (Z11) data transmissions from the Enrollment System
 Redesign (ESR) database where the VA-Specific Military History (ZMH)
 segments contain OEF/OIF data that are in a format that is not acceptable
 to VistA.
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 HD0000000211907 - OEF/OIF period not locked 
 HD0000000318999 - ZMH containing OEF/OIF data deleting site data
  
 Overview of Remedy Ticket(s):
 -----------------------------
 HD0000000211907
 Problem:
 --------
 When the initial OEF/OIF episode is entered via the Registration options, 
 the DATA LOCKED field #.04 in the SERVICE [OEF OR OIF] sub-file #.3215 
 of the PATIENT file #2 is set to NO.  When a Z07 for this veteran is
 sent to HEC, the OEF/OIF episode is uploaded at the HEC.  When HEC sends 
 back a Z11 to this site, the DATA LOCKED field should be updated to YES 
 at the site.  However, this is not happening due to a bug in the Z11 
 processing routine at VistA.
  
 Resolution:
 -----------
 The code will be updated to correctly lock individual OEF/OIF episodes 
 upon receipt of a Z11 message from HEC.
  
 HD0000000318999
 Problem:
 --------
 When VistA receives OEF/OIF data from HEC, the existing OEF/OIF data at 
 the site is deleted in anticipation of filing the new data from HEC.  
 However, after the deletion, VistA is expecting the incoming OEF/OIF data 
 to be in uppercase format.  If it gets anything other than OEF, OIF, or 
 UNK (all in uppercase) while parsing the data from the ZMH segments in an 
 incoming Z11 message, VistA will not file the data.  Under certain 
 circumstances, transmissions from ESR are being sent in mixed cases so 
 they are not being filed.  Also, "Conflict Unspecified" is incorrectly 
 being transmitted.  
  
 Resolution:
 -----------
 The code will be updated to handle transmissions from ESR that are not in 
 the uppercase format.  "Conflict Unspecified" will be ignored.
  
 Test Sites:
 -----------
 Madison, WI (Medium)
 Oklahoma City, OK (Large)
 Battle Creek, MI (Medium)
  
 NOTE:  None of the integrated sites asked were available to test this
        patch.  However, the software is expected to behave the same 
        at non-integrated and integrated sites.  There is no difference 
        in functionality, based on division settings.
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 following selections in the OPTION (#19) file be disabled to prevent 
 possible conflicts while running the KIDS Install. Other VISTA users will 
 not be affected.
  
    REGISTER A PATIENT             [DG REGISTER PATIENT]
    LOAD/EDIT PATIENT DATA         [DG LOAD PATIENT DATA]
  
 Install Time - less than 5 minutes
       
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter DG*5.3*793):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         NO//' press <Enter>.
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? NO//' answer YES.
     d.  When prompted 'Enter options you wish to mark as 'Out Of
         Order':'  enter the following options:
   
           REGISTER A PATIENT       [DG REGISTER PATIENT]
           LOAD/EDIT PATIENT DATA   [DG LOAD PATIENT DATA]
  
     e.  When prompted 'Enter protocols you wish to mark as 'Out Of
         Order':' enter the following protocols:
  
           EAS ESR xxx ORU-Z11 CLIENT
           EAS ESR xxx ORU-Z11 SERVER
           EAS ESR xxx ORF-Z11 CLIENT
           EAS ESR xxx ORF-Z11 SERVER
  
         ** Note:  xxx represents the facility station number.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;REGISTRATION;**[Patch List]**;Aug 13,1993;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGENUPL3
    Before: B56076045   After: B60017954  **147,230,232,377,404,451,653,
                                           688,793**
 
Routine list of preceding patches: 688

=============================================================================
User Information:
Entered By  : KOPP,TERRY M                  Date Entered  : AUG 25, 2008
Completed By: RUDINGER,NANCY L.             Date Completed: MAY 27, 2009
Released By : GROOMS,ANTHONY E              Date Released : MAY 27, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
