$TXT Created by DESMOND,LINDA at DEVVOO.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 04/02/09 at 16:55
=============================================================================
Run Date: APR 08, 2009                     Designation: DG*5.3*807
Package : DG - REGISTRATION                   Priority: EMERGENCY
Version : 5.3       SEQ #705                    Status: Released
                  Compliance Date: APR 09, 2009
=============================================================================

Associated patches: (v)DG*5.3*688  <<= must be installed BEFORE `DG*5.3*807'

Subject: UPDATE ADDRESSES WITH UNITED STATES

Category: 
  - Routine

Description:
============

 The release of patch DG*5.3*688 on March 28, 2009, part of the Enrollment 
 VistA Changes Release 2 project, introduced a new field, Country, for the 
 patient's Permanent, Temporary and Confidential addresses.  These 
 addresses are now required to have a Country entered and, if missing, a 
 data inconsistency message is displayed at the end of Registration.  This 
 patch provides a process to update old addresses in the PATIENT file (#2) 
 and add the value of UNITED STATES to the Permanent, Temporary and 
 Confidential addresses with valid U.S. zip codes.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 HD0000000312628 - ALL Addresses are inconsistent (ESR2)
  
  
 Problem:
 ========
 After the installation of patch DG*5.3*688, users began receiving 
 inconsistent data messages at the end of Registration for existing 
 Permanent, Temporary and Confidential addresses.  This is because the new 
 field of Country is now required for the address to be valid and the old 
 addresses in the PATIENT file (#2) were not updated to add the Country.
  
 Solution:
 =========
 A post-install routine with this patch will run a job that will go 
 through the entire PATIENT file (#2).  It will check the patient's 
 Permanent, Temporary and Confidential addresses.  If the Country field is 
 blank and the zip code is for a valid U.S. state or possession, the value 
 of UNITED STATES will automatically be set into the corresponding 
 Country field, for Permanent address: COUNTRY field (#.1173), for 
 Temporary address: TEMPORARY ADDRESS COUNTRY field (#.1223), and for
 Confidential address: CONFIDENTIAL ADDR COUNTRY field (#.14116).  These
 updates will not generate Z07 HL7 messages to the Health Eligibility
 Center (HEC).
  
 The progress of the update job can be viewed in the global 
 ^XTMP("DG53807P").  When the job completes, the following Mailman message,
 with the job statistics will be sent to the person who installed the
 patch:
  
  
 Subj: DG*5.3*807 JOB TO UPDT OLD PAT ADDRS  [#218978] 04/02/09@11:56  15 
 lines
 From: POSTMASTER  In 'IN' basket.   Page 1  *New*
 --------------------------------------------------------------------------
 The DG*5.3*807 post-install process has completed.
  
 This process ran through the Patient file #2 and checked
 the patient's Permanent, Temporary, and Confidential
 addresses.  If the address was a valid US address, but
 the Country field was blank, the Country was updated with
 UNITED STATES.
  
 The process statistics:
  
 Job Start Date/Time: Apr 02, 2009@11:56:20
   Job End Date/Time: Apr 02, 2009@11:56:35
  
 Total Patient Records Searched: 63364
  Total Patient Records Updated: 61461
   Total Patient Records Failed: 1
  
 Enter message action (in IN basket): Ignore//
  
 If a patient's record is in use by another process and is not able to be 
 locked by the post-install job, it will be reported in the Mailman 
 message in Total Patient Records Failed.  The DFNs of the failed records 
 are stored in ^XTMP("DG53807P","LOCKFAIL", and can be displayed using the 
 global utility ^%G.  The DFNs can be used to look up the failed patient 
 records and update the Country manually.
  
 If necessary, the job can be re-run from the programmer's prompt with 
 the following command:
  
 >D EN^DG53807P
  
 If the job is run more than once, the total reported in the Total 
 Patient Records Updated will be cumulative, that is, the count of 
 records updated will be added to the total records updated in the 
 previous run.  The job statistics will be stored in ^XTMP("DG53807P", 
 for 180 days.
  
 The run-time of the post-install job will vary depending on the number of
 patient records and system resources. Test sites have reported the
 following results:
  
  78,765 patient records took 3 minutes
 155,023 patient records took 30 minutes
 368,484 patient records took 25 minutes
  
  
 Test Sites:
 -----------
 Cheyenne, WY
 Madison, WI
 Puget Sound HCS, WA 
  
  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 This patch may be installed during normal working hours.
 Users can be on the system during the installation.
  
 Install Time - less than 5 minutes
  
       
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
  
 2.  START UP KIDS  
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
  
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
  
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            --- 
          Load a Distribution  
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
  
  
 3.  Select Installation Option:  
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter DG*5.3*807):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
  
 4.  Select Installation Option: Install Package(s)
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
   
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         YES//' answer NO
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? YES//' answer NO

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13, 1993;Build 2

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DG53807P
    Before:       n/a   After: B20053102  **807**

=============================================================================
User Information:
Entered By  : DESMOND,LINDA                 Date Entered  : APR 01, 2009
Completed By: MOORE,TERRY D                 Date Completed: APR 08, 2009
Released By : FRANCE,KATHI                  Date Released : APR 08, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
