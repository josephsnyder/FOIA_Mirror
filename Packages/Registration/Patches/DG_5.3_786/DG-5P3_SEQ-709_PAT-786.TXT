$TXT Created by CHANDARANA,RISHAN at CHEY129.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 01/22/09 at 14:18
=============================================================================
Run Date: JUN 08, 2009                     Designation: DG*5.3*786
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #709                    Status: Released
                  Compliance Date: JUL 09, 2009
=============================================================================

Associated patches: (v)DG*5.3*538  <<= must be installed BEFORE `DG*5.3*786'
                    (v)DG*5.3*644  <<= must be installed BEFORE `DG*5.3*786'
                    (v)DG*5.3*653  <<= must be installed BEFORE `DG*5.3*786'

Subject: FIXES FOR FILES 38.5, 46, 405, HOME TELEHEALTH, AND AN API ERROR

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 This patch does the following:
 - modifies the data dictionary for the CPT MODIFIER field (#.03) in the
   INPATIENT CPT CODE file (#46). 
 - corrects routine DGRPCF to increment the file descriptor node's 
   record count for the INCONSISTENT DATA file (#38.5) only when a record
   is added.
 - modifies routines DGRRLUA and DGRRLU6 to account for providers whose names 
   contain apostrophes.  
 - modifies the ADGRU09 cross reference in the PATIENT MOVEMENT file (#405) to 
   fix a problem when using ^DIK to delete certain records.  
 - modifies the ROUTING LOGIC in the DG HOME TELEHEALTH ADT-A03 CLIENT
   protocol.
 - modifies the DNS DOMAIN for the HL7 LOGICAL LINKS for HOME
   TELEHEALTH.
 - recompiles the input template for the PTF 501 screen.
      
  ASSOCIATED REMEDY TICKETS:
  ==========================
  1) HD0000000229434 - Check/Fix DD Structure and file 46
     Duplicate(s):
     HD0000000235321 - Check/Fix DD Structure won't complete on file 46
  
  2) HD0000000233595 - Inconsistent Data
     Duplicate(s):
     HD0000000235602 - DG CONSISTENCY PURGE process not resetting file 
                       record counters.
  
  3) HD0000000217574 - Error When Registering a Patient
     Duplicate(s):
     HD0000000186067 - Receiving error in Blind Rehab package 
     HD0000000205594 - Unable To Access Patient File (PSL Problem)
     HD0000000207054 - Issue with PSL in Blind Rehab
     HD0000000272108 - Unable to Register a Patient
     HD0000000247659 - Patient not listed in Patient Inquiry
     HD0000000241973 - Unable to Register one specific patient
     HD0000000225066 - Error Message When Attempting To Search at 
                       "Patient Lookup" Menu
      
  4) HD0000000218411 - Need to delete movement
  
  5) HD0000000274367 - Home Telehealth HL7 issue
     Duplicate(s):
     HD0000000281700 - Unable To Inactivate Patient
     HD0000000283102 - HL7 REJECT MESSAGE/UNKNOWN STATUS
     HD0000000283129 - VistA integration for CCHT
     HD0000000283467 - HL7 MESSAGE DOES NOT EXIST 
     HD0000000304360 - Home Telehealth Patient Inactivation Reject
  
  6) HD0000000273684 - Errors being generated by DG HT VN
     Duplicate(s):
     HD0000000305819 - HL7 Transmission String    
  
  7) HD0000000294314 - Error 576 and 506
     Duplicate(s):
     HD0000000295074 - MPCR codes coming through as zeroes in PTF 
                       transmission 
     HD0000000302980 - PTF errors on data transmission
  
  ASSOCIATED NSRs:
  =================
  N/A
    
  PARTICIPATING TEST SITES:
  =========================
  Martinsburg, WV
  Richmond, VA
  Boston, MA
  Miami, FL
   
  REMEDY OVERVIEW:
  ================
   1) HD0000000229434 - Check/Fix DD Structure and file 46
      
   Problem:
   ========
   The CHECK/FIX DD STRUCTURE option fails to complete for INPATIENT 
   CPT CODE file (#46). 
  
   Solution:
   =========
   This patch corrects the error which causes the CHECK/FIX DD STRUCTURE 
   option to fail.
  
   Technical:
   ==========
   The DD check fails when it encounters a space in the node, 
   ^DD(46,"GL",0,"3 ",.03)=, which in turn is caused by the space in the
   fourth piece of ^DD(46,.03,0)=CPT MODIFIER 2^*P81.3'^DIC(81.3,^0;3 ^,
   the fourth piece of the node ^DD(46,.03,0) will be corrected to
   remove the space.  The space will also be removed from the 
   cross-reference.
  
  
   2) HD0000000233595 - Inconsistent Data
   
   Problem:
   ========
   The record count in the file descriptor node for the INCONSISTENT DATA
   file (#38.5) is incorrect.
   The file descriptor has a number larger than the actual number of records 
   in the file.  This is being caused by a bug in routine DGRPCF where the 
   file descriptor node is being incremented each time an inconsistent record 
   is accessed.
      
   Solution:
   =========
   The routine DGRPCF will be modified to increment the total only when
   a record is added to file.  The file will also be re-indexed to correct
   the information in the descriptor node.
  
  
   3) HD0000000217574 - Error When Registering a Patient
  
   Problem:
   ========
   While attempting to register a patient using Veterans Personal 
   Finance System (VPFS), a site received an error and was unable to
   register the patient.  It was determined that this was being caused by
   an apostrophe in the Primary Care Provider's name.  While the reported
   problem was associated with VPFS, this problem will occur with any
   application that uses the Person Service Lookup (PSL).    
      
   Solution:
   =========
   Routines DGRLLUA and DGRRLU6 have been modified to call $$CHARCHK^DGRRUTL
   which returns a properly formatted XML string, in this case replacing
   the apostrophe with "&apos;".  
  
   4) HD0000000218411 - Need to delete movement
  
   Problem:
   ========
   When attempting to delete an incomplete specialty transfer using DIK, 
   this error is generated:
  
   <UNDEFINED>DGPMXX1+36^DGPMXX1
  
   The error occurs because the variable DFN doesn't have a value in 
   a cross-reference.
  
   Solution:
   =========
   The cross reference has been modified to retrieve the DFN from the 
   current patient movement.
   
   Technical:
   ==========
   Before patch:
  
   CROSS-REFERENCE:  405^ADGRU09^MUMPS 
                     1)= D:($T(ADGRU^DGRUDD01)'="") ADGRU^DGRUDD01(D
                     FN)
  
                     2)= D:($T(ADGRU^DGRUDD01)'="") ADGRU^DGRUDD01(D
                     FN)
   After patch:
  
   CROSS-REFERENCE:  405^ADGRU09^MUMPS 
                     1)= D:($T(ADGRU^DGRUDD01)'="") ADGRU^DGRUDD01($
                     $GET1^DIQ(405,DA,.03,"I"))
  
                     2)= D:($T(ADGRU^DGRUDD01)'="") ADGRU^DGRUDD01($
                     $GET1^DIQ(405,DA,.03,"I"))
  
  
   5) HD0000000274367 - Home Telehealth HL7 issue  
   
   Problem:
   ========
   When attempting to unenroll a patient from the Home Telehealth program,
   sites are receiving a status of "unknown inactivation" in the status 
   column of the transmission report.  The problem is caused by a "Q" missing 
   from the ROUTING LOGIC field (#774) in the DG HOME TELEHEALTH ADT-A03 
   CLIENT entry of the Protocol file (#101).
  
   Solution:
   =========
   The "Q" has been added to the ROUTING LOGIC field (#774) in the protocol.  
  
   If there are any alerts that are being received in error, and the message
   is related to activating the patient, re-activating the patient should
   clear the alert.  Similarly, if the message is in regards to inactivating
   the patient, re-inactivating the patient should clear the alert.  
  
 
   6) HD0000000273684 - Errors being generated by DG HT VN
  
   Problem:
   ========
   The following HL LOGICAL LINKs are missing values in the DNS DOMAIN field
   (#.08).    
   
   HL LOGICAL LINK NODE:           DNS DOMAIN:                          
   ---------------------           -----------
   DG HT AMD
   DG HT ATI
   DG HT HH
   DG HT VIT
   DG HT VN
    
   Solution:
   =========
   The DNS DOMAIN field (#.08) has been filled in with the correct values.  
   For these links this patch also corrects the TCP/IP ADDRESS field
   (#400.01) value to null and the PERSISTENT field (#400.04) to "NO."
   
   HL LOGICAL LINK NODE:           DNS DOMAIN:                          
   ---------------------           -----------
   DG HT AMD                       VAWW.HL7.AMDTELEMED.CC.MED.VA.GOV
   DG HT ATI                       VAWW.HL7.ATI.CC.MED.VA.GOV 
   DG HT HH                        VAWW.HL7.HEALTHHERO.CC.MED.VA.GOV
   DG HT VIT                       VAWW.HL7.VITERION.CC.MED.VA.GOV
   DG HT VN                        VAWW.HL7.VITELNET.CC.MED.VA.GOV
  
   If there are any alerts that are being received in error, and the message
   is related to activating the patient, re-activating the patient should
   clear the alert.  Similarly, if the message is in regards to inactivating
   the patient, re-inactivating the patient should clear the alert.    
  
   7) HD0000000294314 - Error 576 and 506
   
   Problem:
   ========
   The MPCR code is zero in PTF transmission.  
  
   Solution:
   =========
   Input templates for the 501 screen have been recompiled to set the MPCR
   codes.
  
  
  DATA DICTIONARY:
  ================
  The following Data Dictionary changes are being exported with this patch.  
  
                                            UP    SEND  DATA                USER
                                            DATE  SEC.  COMES   SITE  RSLV  OVER
 FILE #      FILE NAME                      DD    CODE  W/FILE  DATA  PTRS  RIDE
 -------------------------------------------------------------------------------
  
 46                                         YES   NO    NO                  NO
 Partial DD: subDD: 46         fld: .03
  
 405                                        YES   NO    NO                  NO
 Partial DD: subDD: 405        fld: .09
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
  This patch may be run with users on the system. As several options are 
  going to be out of order, it is recommended that this patch be installed 
  during off-peak hours.  
  Both pre and post-install routines, DGPRE786 and DGPST786, may be deleted 
  after patch installation.  
  Installation will take less than 15 minutes.
   
    
  1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
      the KIDS distribution included with this message.
    
  2.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
    
  3.  From this menu, you may elect to use the following options
      (when prompted for INSTALL NAME, enter DG*5.3*786):
      a.  Compare Transport Global to Current System  - this option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch (routines,
          DDs, templates, etc.).
      b.  Verify Checksums in Transport Global - this option will
          allow you to ensure the integrity of the routines that are in
          the transport global.
      c.  Print Transport Global - this option will allow you to view the
          components of the KIDS build.
      d.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
    
  4.  Use the Install Package(s) option and select the package DG*5.3*786.
    
  5.  When prompted, 'Want KIDS to INHIBIT LOGONs during the install?
      NO//', respond NO.
    
  6.  When prompted, 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//', respond YES.
  
      When prompted, 'Enter options you wish to mark as 'Out Of Order':',
      enter:
      Register a Patient             [DG REGISTER PATIENT]
      Load/Edit Patient Data         [DG LOAD PATIENT DATA]
      TREATING SPECIALTY TRANSFER    [DG TREATING TRANSFER]
      Bed Control Menu               [DG BED CONTROL]
      Extended Bed Control           [DG BED CONTROL EXTENDED]
      GUI Patient Lookup RPC access  [DGRR GUI PATIENT LOOKUP]
  
      When prompted, 'Enter protocols you wish to mark as 'Out of Order':',
      enter:
      DG OERR TREATING TRANSFER
      DG HOME TELEHEALTH ADT-A03 CLIENT
 
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13, 1993;Build 21

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGPRE786
    Before:       n/a   After:   B342086  **786**
Routine Name: DGPST786
    Before:       n/a   After:  B2436033  **786**
Routine Name: DGRPCF
    Before: B21529174   After: B22746154  **250,653,786**
Routine Name: DGRRLU6
    Before: B34442401   After: B34663434  **538,786**
Routine Name: DGRRLUA
    Before: B14717059   After: B14859777  **538,786**
 
Routine list of preceding patches: 538, 653

=============================================================================
User Information:
Entered By  : CHANDARANA,RISHAN             Date Entered  : JUL 10, 2008
Completed By: SESSLER,APRIL                 Date Completed: MAY 05, 2009
Released By : HEUER,CINDY                   Date Released : JUN 08, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
