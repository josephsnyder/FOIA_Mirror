$TXT Created by YORTY,M ROBERT at DEVVCC.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 06/12/08 at 13:54
=============================================================================
Run Date: JUL 01, 2008                     Designation: DG*5.3*779
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #691                    Status: Released
                  Compliance Date: AUG 01, 2008
=============================================================================

Associated patches: (v)DG*5.3*491  <<= must be installed BEFORE `DG*5.3*779'

Subject: NEW ENROLLEE APPOINTMENT REQUEST CALL LIST

Category: 
  - Routine
  - Data Dictionary
  - Input Template
  - Enhancement (Mandatory)

Description:
============

 New Enrollee Appointment Request Call List project shall provide a 
 solution for electronic tracking the status of new enrollee appointment 
 requests. The Enrollment and Scheduling applications will work in an 
 integrated fashion to facilitate the scheduling of appointments for 
 veterans who have requested an appointment during enrollment process.
  
 The intent is for a veteran that applies for care during enrollment can
 ask for an appointment and that sites need to track and insure that one is
 established.  The New Enrollee Appointment Call List is designed to help
 track this process and the timeliness of providing that first appointment.
  
 During enrollment, the question regarding an appointment is only asked
 when the veteran initially applies for care.  The understanding is all
 initial appointments are with a Primary Care Physician and follow-up
 appointments are then scheduled as needed based on the referral of the
 Primary Care Physician.
  
 The VAMC can designate whom ever they desire to have the menu option to
 manage the call list.
  
  
  
 The following features are implemented in this patch, DG*5.3*779:
 ----------------------------------------------------------------------
  
 1. Eliminating the waits and delays of creating an appointment when 
    veteran has indicated a desire for one. 
  
 2. New Enrollee Appointment Request 'Call List' Report to accurately
    monitor new enrollee's appointment requests.
  
 3. New Enrollee Appointment Request 'Tracking Report' to track the status
    of new enrollee's appointment requests within a date range.
  
 4. New Enrollee Appointment Request 'Edit' option to update the status and
    add comment to the appointment request. Force a comment entry when a 
    'cancelled' status is entered.
  
 5. Automatic Collection of Appointment Request Date and Appointment 
    Requested response.  
  
    This component addresses capturing the Appointment Request Data for
    those patients that move out of any of the 'Rejected' enrollment
    statuses. As appropriate for the received patient updates, ESR will
    apply its Enrollment Determination business rules and assign a new
    enrollment status, which is then shared back to VistA.  If the patient
    elects to receive care from a VA facility, the patient will usually
    contact the facility to make an appointment.  The patient is processed
    through Appointment Management, not Patient Enrollment.  Therefore, it
    is requested that the Appointment Request Response and Appointment
    Request Date be captured in the Appointment Management Package.
  
  
 The following technical features are implemented in this patch,
 DG*5.3*779:
 ----------------------------------------------------------------------
  
 1. Four fields have been added to the Patient (#2) file.
    These four fields are: APPOINTMENT REQUEST STATUS (#1010.161); 
    DATE STATUS LAST EDITED (#1010.162); APPOINTMENT REQUEST COMMENT
    (#1010.163); and DATE COMMENT LAST EDITED (#1010.164)
  
 2. Two cross references have been added.  The APPOINTMENT REQUEST ON
    1010EZ (#1010.159) field now has a cross reference for all 'yes'
    entered requests.  The APPOINTMENT REQUEST DATE (#1010.1511) field 
    has a cross reference by date of the 'yes' request for an appointment.
  
 3. A new menu, 'New Enrollee Appointment Request Management Menu' [DGEN 
    NEACL REQUEST MGT MENU], has been added to the 'Appointment Menu'
    [SDAPP].   This new menu contains the options; 'Edit', 'Call List', 
    and 'Tracking Report' in running the new enrollee call list.
  
 4. The protocol 'Auto-Enroll Patient' [DGEN SD ENROLL PATIENT], running 
    off the 'Appointment Event Driver' [SDAM APPOINTMENT EVENTS] driver,
    has been edited. When an appointment is being made for a patient, VistA
    shall automatically collect/assign the Appointment Request Response and
    Appointment Request Date according to the following business rule:
  
         o When the Enrollment Application Date >= 8/1/2005, THEN
              o If the Appointment Request Date is NULL
                  o Set the Appointment Request Response = 'YES' AND
                  o Set the Application Request Date = Current Date
  
              o If the Appointment Request status is not 'filled', THEN
                  o Set the Appointment Request Status = 'FILLED'
                  o Append the Appointment Request Comment.
  
    Also, patients newly enrolled via this scheduling appointment 
    options will have their Appointment Request, Appontment Request 
    Date, Appointment Request Status, and Appointment Request Comment
    updated.
  
 5. A report option, 'Call List (background job)' [DGEN NEACL MGT 
    RPT1BK], should be queued by your IRM and scheduled to run daily to 
    the printer of the Enrollment Specialist or designated person(s)
    responsible for the call list.
  
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 NSR 20060706-Linking appointment request with scheduling/waitlist
 VistA Appointment Management/Scheduling requirement from NSR 20070619 
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 There are no Remedy Tickets associated with this patch.
  
  
 Test Sites:
 -----------
 Chillicothe VAMC
 Lexington VAMC
 Maryland HCS
 Memphis VAMC 
  
 The following is a list of files included in this patch:
  
                                      UP    SEND  DATA                
                                      DATE  SEC.  COMES  SITE   RSLV  
 FILE #  NAME                         DD    CODE  W/FILE DATA   PTS 
 --------------------------------------------------------------------
 2           PATIENT                  YES   NO    NO                  
  
  
  
 The following is a list of fields included in this patch:
  
 Field Name (Number)                          File Name (Number)
 -------------------                          ------------------
 APPOINTMENT REQUEST ON 1010EZ (#1010.159)    PATIENT     (#2) 
 APPOINTMENT REQUEST DATE      (#1010.1511)   PATIENT     (#2)
 APPOINTMENT REQUEST STATUS    (#1010.161)    PATIENT     (#2)
 DATE STATUS LAST EDITED       (#1010.162)    PATIENT     (#2)
 APPOINTMENT REQUEST COMMENT   (#1010.163)    PATIENT     (#2)
 DATE COMMENT LAST EDITED      (#1010.164)    PATIENT     (#2)
  
 The following is a list of templates included in this patch:
  
 Template Name     Type        File Name (Number)
 -------------     ----        ------------------
 DGEN NEACL        INPUT       PATIENT    (#2)        
  
  
 The following is a list of options included in this patch:
  
 Option Name                   Type               New/Modified
 -----------                   ----               ------------ 
 DGEN NEACL MGT RPT1           opt                New  
 DGEN NEACL MGT RPT1BK         opt                New           
 DGEN NEACL MGT RPT2           opt                New
 DGEN NEACL REQUEST MGT EDIT   opt                New
 DGEN NEACL REQUEST MGT MENU   menu               New
 SDAPP                         menu               Modified
  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 following selection(s) in the OPTION (#19) file, and all of their 
 descendants be disabled to prevent possible conflicts while running the 
 KIDS Install. Other VISTA users will not be affected.
  
          Appointment Management     [SDAM APPT MGT]
  
  
 Install Time - less than 5 minutes
  
  
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter DG*5.3*779):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
         Install? NO//' answer NO
     c.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         YES//' answer NO
     d.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? YES//' answer YES
     e.  When prompted 'Enter options you wish to mark as 'Out Of
         Order':'  Enter the following options:
   
          Appointment Management     [SDAM APPT MGT]
  
     f.  When prompted 'Enter protocols you wish to mark as 'Out Of
         Order':'  Enter the following protocols:
  
          Appointment Event Driver   [SDAM APPOINTMENT EVENTS]
  
  
        ============= POST-INSTALLATION INSTRUCTIONS =================
  
 Schedule/queue the 'Call List (background job)' [DGEN NEACL MGT RPT1BK] to
 run daily to the printer of the Enrollment Specialist or designated
 person(s) responsible for the call list.
  
                           Edit Option Schedule
     Option Name: DGEN NEACL MGT RPT1BK         
     Menu Text: Call List (background job)                TASK ID: 11464  
   
 __________________________________________________________________________
  
   QUEUED TO RUN AT WHAT TIME: APR 1,2008@05:00              
  
 DEVICE FOR QUEUED JOB OUTPUT: LEB$PRT 10/6/UP;P-REMOTE TCP 1
  
  QUEUED TO RUN ON VOLUME SET:
  
       RESCHEDULING FREQUENCY: 1D                            
  
              TASK PARAMETERS:
  
             SPECIAL QUEUEING:
  
 __________________________________________________________________________
  
  
  
  
  
  
  
  
 ----------------------- ROUTINE MODIFICATIONS ----------------------------
  
 DGENACL   - new routine.
  
 DGENACL1  - new routine. 
  
  
 DGENA2.INT.1                  |"BEFORE"|DGENA2.INT.1  
 **************************************************************************
 DGENA2.INT.1
  +2         ;;5.3;Registration;**121,122,147,232,327,469,491,779**;Aug 
 13,1993; Build 4
 ...................
 |"BEFORE"|DGENA2.INT.1
  +2         ;;5.3;Registration;**121,122,147,232,327,469,491**;Aug 13,1993
 ---------------------------------------
 DGENA2.INT.1
  +108       ;appointment made, check if enrollment appointment request 
 needs reset.
  +109       I $G(SDAMEVT)=1 D REQUST(SDAMEVT,SDATA)
 ...................
 |"BEFORE"|DGENA2.INT.1
 ---------------------------------------
 DGENA2.INT.1
  +116       I $$FINDCUR^DGENA(DFN) D REQUST(SDAMEVT,SDATA) Q
 ...................
 |"BEFORE"|DGENA2.INT.1
  +114       Q:$$FINDCUR^DGENA(DFN)
  
           
 ---------------------------------------
 DGENA2.INT.1
  +133       . . D REQUST(SDAMEVT,SDATA)
 ...................
 |"BEFORE"|DGENA2.INT.1
 ---------------------------------------
 DGENA2.INT.1
  +138       ;
  +139 REQUST(SDAMEVT,SDATA) ;
  +140       ;Automatic collection of Appointment Request Date and 
 Appointment
  +141       ;Request Response
  +142       ;- Set when Enrollment Application Date >= 8/1/20905 AND
  +143       ;-     Appointment Request Date in null. 
  +144       ;
  +145       ; Input  -- SDATA and SDAMEVT defined by scheduling event 
 driver
  +146       ; Output -- none
  +147       ;
  +148       N DGENRIEN,DGENR,DPTERR,DGCOM
  +149       ;apointment made or checked out?
  +150       Q:(($G(SDAMEVT)'=1)&($G(SDAMEVT)'=5))
  +151       ;
  +152       S DFN=$P($G(SDATA),"^",2)
  +153       ;get enrollment ien
  +154       S DGENRIEN=$$FINDCUR^DGENA(DFN)
  +155       I DGENRIEN,$$GET^DGENA(DGENRIEN,.DGENR) ;set-up enrollment 
 array
  +156       I $G(DGENR("APP"))>3050731 D
  +157       . ;and, no appointment request date. Set request="yes", 
 request date
  +158       . I '$$GET1^DIQ(2,DFN,1010.1511,"I") D
  +159       . . ;set fields
  +160       . . N FDATA
  +161       . . S FDATA(2,DFN_",",1010.159)=1
  +162       . . S FDATA(2,DFN_",",1010.1511)=DT
  +163       . . D FILE^DIE("","FDATA","DPTERR")
  +164       . ;if appointment made (or checkout), appt. request="yes",
 request status'="filled"
  +165       . ;- set request status='filled' w comment
  +166       . I ($$GET1^DIQ(2,DFN,1010.159,"I")),($$GET1^DIQ(2,DFN,10
 10.161,"I")'="F") D
  +167       . . ;set fields
  +168       . . N FDATA
  +169       . . S FDATA(2,DFN_",",1010.161)="F"
  +170       . . S DGCOM=$$GET1^DIQ(2,DFN,1010.163)
  +171       . . S 
 DGCOM=DGCOM_$S(DGCOM'="":"<>",1:"")_"AutoComm:"_$S($$GET1^DIQ
 (2,DFN,1010.161,"I")="":"null",1:$S($$GET1^DIQ(2,DFN,1010.161,"I")="I":"I
 N PROGRESS",1:$$GET1^DIQ(2,DFN,1010.161)))_"|FILLED by Scheduling"
  +172       . . S FDATA(2,DFN_",",1010.163)=DGCOM
  +173       . . D FILE^DIE("","FDATA","DPTERR")
  +174       Q
 ...................
 |"BEFORE"|DGENA2.INT.1
 **************************************************************************

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13,1993;Build 11

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DGENA2
    Before: B15510967   After: B30778847  **121,122,147,232,327,469,491,779**
Routine Name: DGENACL
    Before:       n/a   After: B29975193  **779**
Routine Name: DGENACL1
    Before:       n/a   After: B36626109  **779**
 
Routine list of preceding patches: 491

=============================================================================
User Information:
Entered By  : YORTY,M ROBERT                Date Entered  : FEB 14, 2008
Completed By: BARBER,HAROLDINE              Date Completed: JUL 01, 2008
Released By : FITCH,DONNA                   Date Released : JUL 01, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
