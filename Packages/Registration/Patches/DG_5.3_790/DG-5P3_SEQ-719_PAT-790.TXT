$TXT Created by BOWEN,MARY JANE at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 07/24/09 at 15:50
=============================================================================
Run Date: SEP 23, 2009                     Designation: DG*5.3*790
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #719                    Status: Released
                  Compliance Date: OCT 24, 2009
=============================================================================

Associated patches: (v)DG*5.3*688  <<= must be installed BEFORE `DG*5.3*790'
                    (v)DG*5.3*712  <<= must be installed BEFORE `DG*5.3*790'

Subject: FIX RADIATION METHOD,PATIENT FILE UNDEFINED ERRORS,PATIENT TYPE UPDATE

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 This patch makes the following corrections:
  
 1. Updates the Record Index of 3 fields in the PATIENT file (#2) 
    to use the variable DA instead of DFN.  
 2. Updates the routine VADPT4, to return the correct external value for 
    the Radiation Exposure Method field in the PATIENT File (#2).
    Used by the SVC^VADPT  API.
 3. Changes the Patient Type Update Option [DG PATIENT TYPE PARAMETER 
    EDIT] to prevent users from adding a new patient type.
  
 ASSOCIATED REMEDY TICKETS:
 ========================== 
 1. HD0000000265214 - <UNDEFINED>XECUTE+10^DIKC
 2. HD0000000266436 - Problems with data in Patient file and SVC^VADPT.
 3. HD0000000315267 - Patient type question
  
 ASSOCIATED NSR'S:
 =================
 N/A 
   
 PARTICIPATING TEST SITES:
 =========================
 Louisville, KY
 Montana HCS
 Northport, NY
  
   
 REMEDY OVERVIEW:
 ================
  
 1. HD0000000265214 - <UNDEFINED>XECUTE+10^DIKC
  
 Problem:
 ========
 When editing via FileMan an error occurs on the following three fields
 located in the PATIENT file (#2):
  
         EMAIL ADDRESS           field (#.133)
         PHONE NUMBER [CELLULAR] field (#.134)
         PAGER NUMBER            field (#.135)
  
 The DFN variable, when set, is equal to the Internal Entry Number (IEN) 
 of the record in the Patient File (#2), also known as the local/facility
 patient record number.
  
 The error occurs because the DFN variable is not set to be equal to the 
 IEN of the Patient File (#2) before the edit is executed.  The DA variable
 will always be equal to the IEN of the record being edited.
  
 Solution:
 =========
 Change Record index in the Data dictionary for these fields in 
 PATIENT File (#2):
  
 FROM:
 RECORD INDEX:     AXENR13 (#753)    MUMPS    R    ACTION
                 Short Descr:  TRIGGER A MESSAGE FOR ANY CHANGE TO THESE
                               FIELDS
                 Description:  This cross-reference will trigger a message
                               to the HEC anytime one of the related
                               fields is changed.
                   Set Logic:  D EVENT^IVMPLOG(DFN)
                  Kill Logic:  D EVENT^IVMPLOG(DFN)
                        X(1):  EMAIL ADDRESS  (2,.133)  (forwards)
                        X(2):  PHONE NUMBER [CELLULAR]  (2,.134) (forwards)
                        X(3):  PAGER NUMBER  (2,.135)  (forwards)
  
 TO:
 RECORD INDEX:     AXENR13 (#753)    MUMPS    R    ACTION
                 Short Descr:  TRIGGER A MESSAGE FOR ANY CHANGE TO THESE
                               FIELDS
                 Description:  This cross-reference will trigger a message
                               to the HEC anytime one of the related
                               fields is changed.
                   Set Logic:  D EVENT^IVMPLOG(DA)
                  Kill Logic:  D EVENT^IVMPLOG(DA)
                        X(1):  EMAIL ADDRESS  (2,.133)  (forwards)
                        X(2):  PHONE NUMBER [CELLULAR]  (2,.134) (forwards)
                        X(3):  PAGER NUMBER  (2,.135)  (forwards)
  
  
 2. HD0000000266436 - Problems with data in Patient file and SVC^VADPT
  
 Problem:
 ========
 The external value being returned for the RADIATION EXPOSURE METHOD 
 field (#.321) of the PATIENT file (#2), does not correspond to what is in
 the data dictionary for this field.
  
 Solution:
 =========
 When DG*5.3*689 added more codes to the PATIENT file (#2), routine VADPT4
 still looked for the only the old codes. VADPT4 will be updated to
 capture the new codes.
  
 3. HD0000000315267 - Patient type question
  
 Problem:
 ========
 Patient Type Update [DG PATIENT TYPE PARAMETER EDIT] option allows users
 to add new patient types. This should only be updated with a patch.
   
 Solution:
 =========
 The option has been changed so that users are not able to add a new 
 patient type.
  
  
   INSTALLATION INSTRUCTIONS:
   ===========================
   This patch may be run with users on the system, HOWEVER because the
   Registration options need to be placed out of order, we suggest it be
   installed after business hours.
    
   Installation will take less than 2 minutes.
   
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
    
       NOTE:  If the required patches are not installed, the transport 
              global will be removed.  If the transport global is removed
              you will need to repeat this step.
    
   2.  From the Kernel Installation and Distribution System Menu, select
       the Installation menu.
    
   3.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter DG*5.3*790):
       a.  Compare Transport Global to Current System  - this option will
           allow you to view all changes that will be made when the patch
           is installed.  It compares all components of the patch
           (routines, DDs, templates, etc.).
       b.  Verify Checksums in Transport Global - this option will
           allow you to ensure the integrity of the routines that are in
           the transport global.
       c.  Print Transport Global - this option will allow you to view the
           components of the KIDS build.
       d.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
    
   4.  Use the Install Package(s) option and select the package DG*5.3*790.
  
   5.  When prompted, "Want KIDS to Rebuild Menu Trees Upon Completion of 
       Install? NO//", respond NO.
   
   6.  When prompted, "Want KIDS to INHIBIT LOGONs during the install?
       NO//", respond NO.
    
   7.  When prompted, "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//", respond Yes.
       
       When prompted, "Enter options you wish to mark as 'Out Of Order':",
       enter:
              Register a Patient [DG REGISTER PATIENT]
              Load/Edit Patient Data [DG LOAD PATIENT DATA]
              Preregister a Patient [DGPRE PRE-REGISTER OPTION]
              Collateral Patient Register [DG COLLATERAL PATIENT]  
              Patient Type Update[DG PATIENT TYPE PARAMETER EDIT]
  
       When prompted, "Enter protocols you wish to mark as 'Out Of
       Order':", hit enter.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Registration;**[Patch List]**;Aug 13, 1993;Build 6

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: VADPT4
    Before: B35665898   After: B37063377  **343,342,528,689,688,790**
 
Routine list of preceding patches: 688

=============================================================================
User Information:
Entered By  : BOWEN,MARY JANE               Date Entered  : AUG 14, 2008
Completed By: SESSLER,APRIL                 Date Completed: SEP 17, 2009
Released By : FRANCE,KATHI                  Date Released : SEP 23, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
