$TXT Created by PANNELL,BRIAN at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 07/30/10 at 13:26
=============================================================================
Run Date: NOV 17, 2010                     Designation: ECX*3*128
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3       SEQ #116                      Status: Released
                  Compliance Date: DEC 18, 2010
=============================================================================

Associated patches: (v)ECX*3*111   <<= must be installed BEFORE `ECX*3*128'
                    (v)ECX*3*112   <<= must be installed BEFORE `ECX*3*128'

Subject: CORRECTIONS TO SURGERY REPORT, SURGERY EXTRACT, AND MOVEMENT EXTRACT

Category: 
  - Routine

Description:
============

 This patch fixes three (3) issues:
 1. An error occurring on the Transfer and Discharge Extract [ECXMOV] 
 option.
 2. A problem that is occurring on the SUR Volume Report [ECX SUR VOL 
 REPORT] option.
 3. A problem on the Surgery Extract [ECXSURG] option.
   
 The first problem is to fix an issue with a discharge movement that does
 not have an associated admission movement.  The second problem is in a 
 report that is placing the value of the patient's Procedure Time for
 a NON-OR procedure incorrectly into the place that is usually 
 held for HOLDING ROOM TIME. The third problem is with how the extract 
 handles a null value in the OR CLEAN START TIME (#.234) from the 
 SURGERY (#130) file.
  
  
 Associated Remedy ticket(s):
 ============================
 HD0000000373910     Receiving error on extract:
 HD0000000361974     extract mgr rpt showing holding room time for 
                        outpatients
 HD0000000346511     Inflated DSS Room Clean Feeder Key from local VistA
                        SURGERY file
  
 Test Sites:
 ===========
 Milwaukee VAMC
 VA Hudson Valley HCS
 Portland VAMC
  
   
 Remedy Overview:
 ================
 1)  HD0000000373910     Receiving error on extract:
  
   
 Problem: 
 --------
 The extract is causing an error due to a discharge movement not having an
 associated admission movement.
     
 Resolution:
 -----------
 The fix is for the extract to check if there is an associated admission to 
 the discharge, if not, then the program will send two emails to the group
 DSS-MOVS for review and correction to the problem discharge and then 
 instruct to re-run the extract.  This way if it is a valid movement 
 it will be included into the workload and the necessary people will be 
 aware of the specific problem. Routine ECXMOV was modified for this fix.  
 The emails that will be sent will look like the following:
  
   EMAIL #1
  
 Subj: Movement Record Error - Please Fix  [#239515] 04/08/10@08:20  6 lines
 From: PANNELL,BRIAN  In 'IN' basket.   Page 1
 ------------------------------------------------------------------------------
 The DSS-Movement Extract did not complete due to the error below
  
 Discharge movement record 162555 does not have an admission movement associated
  with it.
  
 This record needs to be fixed and the extract needs to be run again.
  
  
 Enter message action (in IN basket): Ignore//
  
  
   EMAIL #2
 Subj: 442 - Movement EXTRACT FOR DSS  [#239516] 04/08/10@08:20  7 lines
 From: DSS SYSTEM  In 'IN' basket.   Page 1
 ------------------------------------------------------------------------------
 The DSS-Movement extract (#2447) for Oct 01, 2009
 through Oct 31, 2009 was begun on Apr 08, 2010 at 08:20.
   
 A user stop request was received by Taskmanager which caused processing
 to terminate before completion.  Any records which may have been created
 in file #727.808 for this extract have been deleted.
  
  
 Enter message action (in IN basket): Ignore// 
  
  
 2)  HD0000000361974     extract mgr rpt showing holding room time for
                         outpatients
  
   
 Problem: 
 --------
 The Surgery Pre-Extract Report is showing time in the holding room area 
 time slot when a patient has a NON-OR procedure done.  The time showing
 in this slot is not the holding area time used, but actually the 
 procedure time for the patient.
  
 Resolution:
 -----------
 The fix for this problem is to take the procedure time for this patient 
 and place it in the field for Operation Time.  This way the Hold Area 
 Time will represent the correct value and the time for the non-or 
 procedure will be placed in the operation time column of the report 
 which is consistent with what is done on the extract itself.  Routine 
 ECXUSUR1 was modified for the fix.
   
  
 3)  HD0000000346511     Inflated DSS Room Clean Feeder Key from 
                         local VistA SURGERY file
  
   
 Problem: 
 --------
 During the Surgery Extract, if the OR CLEAN START TIME is not populated,
 but the OR CLEAN END TIME is populated, then the value for OR CLEAN TIME
 will evaluate to a very large number.  The problem could cause reporting
 errors on workload for Operating Rooms, as the OR CLEAN TIME would be 
 very large and not reflect the correct workload.
  
 Resolution:
 -----------
 The fix for this problem is to check both the OR CLEAN START TIME (.234)
 and the OR CLEAN END TIME (.236) fields of the SURGERY file (#130).  If
 both are populated then continue with calculating the difference.  If 
 OR CLEAN END TIME is populated, but the OR CLEAN START TIME is not
 populated, use the TIME PAT OUT OR field (.232) from the same 
 SURGERY file.  If both checks fail, then use the default value for the
 time (in this case the value will be set to 2).  Routine ECXSURG was 
 modified for the fix to this problem.
  
  
         ================ Installation Instructions =================
  
 It is not necessary to disable any options.  You may install 
 these routines at any time without interruption to users.  It should
 take less than 2 minutes to install this patch.
  
    1. Choose the PackMan message containing this patch and invoke the
       INSTALL/CHECK MESSAGE PackMan option.  
   
    2. From the Kernel Installation & Distribution System menu, select 
       the Installation menu.  
   
    3. From this menu, you may select to use the following options: 
       (when prompted for INSTALL NAME, enter ECX*3.0*128)
   
         a.  Verify Checksums in Transport Global - This option will allow
             you to ensure the integrity of the routines that are in the
             transport global.
         b.  Print Transport Global - This option will allow you to view
             the components of the KIDS build.
         c.  Compare Transport Global to Current System - This option will
             allow you to view all changes that will be made when this patch
             is installed.  It compares all components of this patch
             (routines, DD's, templates, etc.).
         d.  Backup a Transport Global - This option will create a backup
             message of any routines exported with this patch. It will not
             backup any other changes such as DD's or templates.
   
    4. Use the Install Package(s) option and select the package ECX*3.0*128.
  
  
    5. When Prompted "Want KIDS to INHIBIT LOGONs during the install? 
       NO//" respond NO.  
   
    6. When Prompted "Want to DISABLE Scheduled Options, Menu Options, and 
       Protocols? YES//" YES.
  
                    Extract Manager's Options [ECXMGR]
                    Transfer and Discharge Extract [ECXMOV]
                    SUR Volume Report [ECX SUR VOL REPORT]
                    Surgery Extract [ECXSURG]

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0;DSS EXTRACTS;**[Patch List]**;Dec 22, 1997;Build 19

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ECXMOV
    Before: B19849006   After: B28935067  **8,24,33,39,41,42,46,65,84,
                                           107,105,128**
Routine Name: ECXSURG
    Before: B53305760   After: B57957343  **1,11,8,13,25,24,33,39,41,42,
                                           46,50,71,84,92,99,105,112,128**
Routine Name: ECXUSUR1
    Before: B13707004   After: B13707274  **49,71,105,111,128**
 
Routine list of preceding patches: 111, 112

=============================================================================
User Information:
Entered By  : PANNELL,BRIAN                 Date Entered  : FEB 01, 2010
Completed By: LANG,MICKEY                   Date Completed: NOV 09, 2010
Released By : STRICKLAND,JOAN C             Date Released : NOV 17, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
