$TXT Created by YORTY,M ROBERT at DEVVCC.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 11/03/09 at 11:40
=============================================================================
Run Date: NOV 13, 2009                     Designation: ECX*3*120
Package : ECX - DSS EXTRACTS                  Priority: EMERGENCY
Version : 3       SEQ #110                      Status: Released
                  Compliance Date: NOV 18, 2009
=============================================================================

Associated patches: (v)ECX*3*112   <<= must be installed BEFORE `ECX*3*120'
                    (v)SD*5.3*557  <<= must be installed BEFORE `ECX*3*120'
                    (v)DG*5.3*813  <<= must be installed BEFORE `ECX*3*120'

Subject: DSS FY 2010 ENHANCEMENTS

Category: 
  - Routine
  - Data Dictionary
  - Enhancement ()

Description:
============

 This patch is an EMERGENCY PATCH.
  
 As part of the DSS EXTRACT CHANGES FOR FY10, patch ECX*3.0*120 has a 3-day
 compliance date for installation.  Since the DSS Extracts are monthly,
 ECX*3.0*120 should be installed by the respective 3-day compliance dates
 so as not to miss the next extract.
  
  
 The DSS FY10 Extract Enhancements shall provide the means of exporting 
 data from selected VistA software modules and transmitting it to a DSS 
 database residing at the AITC (Austin Information Technology Center). This
 transfer is accomplished through a set of extract routines, intermediate
 files, and transmission routines. Data from VistA packages is stored by
 the extract routines in the intermediate files, where it is temporarily
 available for local use and auditing. The data is then transmitted to the
 AITC, where it is formatted and uploaded into commercial software.
  
 Included in the DSS FY10 scope are: 
      o       DSS Extract field additions and modifications
      o       DSS menu additions, modifications and deletions
      o       New DSS reports and report modifications
      o       Implementation of the new or modified APIs
  
 Not included are the modifications to the AITC DSS software, the AITC 
 legacy extracts, and Vendor software.
  
  
 The following is a list of product features for this release:
 =============================================================
 1.   Add Admit Outpatient Treatment Flag.
  
 2.   Identify Invalid Stop and Credit Stop Codes.
  
 3.   Add a new report,  LBB Comparative Report.
  
 4.   Identify Clinics That Have a Count/NonCount or Active/Inactive Clinic
      Status Change.
  
 5.   Foreign Addresses - Add Country Code to extract files.
  
 6.   Enhance Lab Results LOINC Code Report.
  
 7.   Enhance LAR Extract Audit.
  
 8.   Observation Patient Indicator logic for PRE.
  
 9.   New ECS Report:  Unusual Volume Report.
  
 10.  Pharmacy Volume Edit (IVP option).
  
 11.  Add security key DSS ECX TEST to prevent prematurely listing a FY for
      a DSS extract.
  
 12.  Non-Conforming Report Correction.
  
 13.  Edit Check on DSS Stop Code Entry.
  
 14.  Update EC (Environmental Contaminates) field to SWAC in VistA Data
      Dictionary for ten extracts.
  
 15.  Add new Observation Treating Specialty  (ED OBSERVATION (1J)) to the
      DSS TREATING SPECIALTY TRANSLATION File (#727.831).
  
      TREATING SPECIALTY: ED OBSERVATION   OBSERVATION PAT INDICATOR: YES
      INPAT/OUTPAT CODE: OUTPATIENT        OBSERVATION STOP CODE: 297
  
 16.  Add new Observation Treating Specialty (ED OBSERVATION (1J)) to
      ORDERING STOP CODE to IVP and UDP extracts for observation treating
      specialties.
  
      The ORDERING STOP CODE (#38) field is populated in the Pharmacy IV
      Detail (IVP) Extract file (#727.819) to track Outpatient IVP orders.
      The value for the field is obtained by locating the CLINIC field
      (#136) on the Pharmacy Patient file (#55) IV multiple (#55.01), which
      points to the Hospital Location file (#44) field (#8) STOP CODE
      NUMBER. If the Treating Specialty field is 18, 23, 24, 36, 41, 65, 94
      or 1J then the ORDERING STOP CODE field is populated with the
      corresponding Observation Stop Code using the following table.
  
      Treating Specialty      Observation Stop Code
           18                       293
           23                       295
           24                       290
           36                       294
           41                       296
           65                       291
           94                       292
           1J                       297
  
      ORDERING STOP CODE field (#58) is populated in the Unit Dose
      Prescription (UDP) Extract file (#727.809) to track Outpatient UDP
      orders. The value for the field is obtained by locating the CLINIC
      field (#130) on the Pharmacy Patient file (#55), UNIT DOSE multiple
      (#55.06), which points to the Hospital Location file (#44) field (#8)
      STOP CODE NUMBER. If the Treating Specialty field is 18, 23, 24, 36,
      41, 65, 94 or 1J then the ORDERING STOP CODE field is populated with
      the corresponding Observation Stop Code using the following table.
  
      Treating Specialty      Observation Stop Code
           18                       293
           23                       295
           24                       290
           36                       294
           41                       296
           65                       291
           94                       292
           1J                       297
  
 17.  Integration Agreement #2248 ($$TSDATA^DGACT) is added to the code of
      extracts; ECS, ECQ, RAD, and SUR.  This was added to handle treating
      specialties with alpha-numeric PTF Codes.
  
      The TREATING SPECIALTY (#18) of the RADIOLOGY EXTRACT (#727.814) has 
      been changed from a pointer field to the SPECIALTY File (#42.4) to a 
      free text field.  This field holds the Treating Specialty's PTF Code,
      which has been changed to be alpha-numeric.
  
      The Description and Technical Description of TREATING SPECIALTY
      fields in extract files: #727.802 (field 28), #727.805 (field 15),
      #727.808 (field 15), #727.809 (field 15), #727.81  (field 20),
      #727.811 (field 26), #727.813 (field 13), #727.814 (field 18),
      #727.815 (field 24), #727.819 (field 15), #727.824 (field 18),
      #727.825 (field 24), and #727.832 (field 10) have been updated to
      refer to the PTF Code (field #7 of file 42.4) being obtained and
      stored instead of the IEN of the specialty.
  
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 There is no Remedy Ticket(s) associated with this patch.
  
  
  
 Components Sent With Patch
 --------------------------
  
 The following is a list of files included in this patch:
  
                                           UP    SEND  DATA                
                                           DATE  SEC.  COMES  SITE   RSLV  
 FILE #       NAME                         DD    CODE  W/FILE DATA   PTS 
 --------------------------------------------------------------------
 727.802     ADMISSION EXTRACT             YES   NO    NO
 727.805     NURSING EXTRACT               YES   NO    NO
 727.808     PHYSICAL MOVEMENT EXTRACT     YES   NO    NO
 727.809     UNIT DOSE LOCAL EXTRACT       YES   NO    NO
 727.81      PRESCRIPTION EXTRACT          YES   NO    NO
 727.811     SURGERY EXTRACT               YES   NO    NO
 727.813     LABORATORY EXTRACT            YES   NO    NO
 727.814     RADIOLOGY EXTRACT             YES   NO    NO
 727.815     EVENT CAPTURE LOCAL EXTRACT   YES   NO    NO
 727.819     IV DETAIL EXTRACT             YES   NO    NO
 727.824     LAB RESULTS EXTRACT           YES   NO    NO
 727.825     QUASAR EXTRACT                YES   NO    NO
 727.826     PROSTHETICS EXTRACT           YES   NO    NO
 727.827     CLINIC EXTRACT                YES   NO    NO
 727.832     NUTRITION EXTRACT             YES   NO    NO
 728         DSS EXTRACTS                  YES   NO    NO
 728.44      CLINICS AND STOP CODES        YES   NO    NO
                                                       
  
 The following is a list of fields included in this patch:
  
 Field Name (Number)            File Name (Number)
 -------------------            ------------------
 TREATING SPECIALTY  (#28)      ADMISSION EXTRACT FILE (#727.802)
 SW ASIA CONDITIONS  (#75)      ADMISSION EXTRACT FILE (#727.802)
 ENCOUNTER SWAC  (#78)          ADMISSION EXTRACT FILE (#727.802)
 ADMIT OUTPATIENT TX FLAG (#88) ADMISSION EXTRACT FILE (#727.802)
 COUNTRY CODE (#89)             ADMISSION EXTRACT FILE (#727.802)
 SW ASIA CONDITIONS (#84)       CLINIC EXTRACT FILE (#727.827)
 ENCOUNTER SWAC (#85)           CLINIC EXTRACT FILE (#727.827)
 COUNTRY CODE (#93)             CLINIC EXTRACT FILE (#727.827)
 TREATING SPECIALTY (#15)       IV DETAIL EXTRACT FILE (#727.819) 
 TOTAL DOSES PER DAY (#20)      IV DETAIL EXTRACT FILE (#727.819) 
 ORDERING STOP CODE (#38)       IV DETAIL EXTRACT FILE (#727.819) 
 SW ASIA CONDITIONS (#81)       IV DETAIL EXTRACT FILE (#727.819)
 COUNTRY CODE (#87)             IV DETAIL EXTRACT FILE (#727.819)
 TREATING SPECIALTY (#13)       LABORATORY EXTRACT (#727.813)
 TREATING SPECIALTY (#18)       LAB RESULTS EXTRACT (#727.824)
 TREATING SPECIALTY (#15)       PHYSICAL MOVEMENT EXTRACT FILE (#727.808)
 TREATING SPECIALTY (#20)       PRESCRIPTION EXTRACT FILE (#727.81)
 ENCOUNTER SWAC (#86)           PRESCRIPTION EXTRACT FILE (#727.81)
 SW ASIA CONDITIONS (#89)       PRESCRIPTION EXTRACT FILE (#727.81)
 COUNTRY CODE (#97)             PRESCRIPTION EXTRACT FILE (#727.81)
 TREATING SPECIALTY (#15)       UNIT DOSE LOCAL EXTRACT FILE (#727.809)
 ORDERING STOP CODE (#58)       UNIT DOSE LOCAL EXTRACT FILE (#727.809)  
 SW ASIA CONDITIONS (#76)       UNIT DOSE LOCAL EXTRACT FILE (#727.809)
 COUNTRY CODE (#82)             UNIT DOSE LOCAL EXTRACT FILE (#727.809)
 TREATING SPECIALTY (#15)       NURSING EXTRACT FILE (#727.805)
 TREATING SPECIALTY (#10)       NUTRITION EXTRACT FILE (#727.832)
 SW ASIA CONDITIONS (#31)       NUTRITION EXTRACT FILE (#727.832)
 COUNTRY CODE (#64)             NUTRITION EXTRACT FILE (#727.832)
 SW ASIA CONDITIONS (#22)       PROSTHETICS EXTRACT FILE (#727.826)
 ENCOUNTER SWAC (#77)           PROSTHETICS EXTRACT FILE (#727.826)
 COUNTRY CODE (#87)             PROSTHETICS EXTRACT FILE (#727.826)
 TREATING SPECIALTY (#24)       QUASAR EXTRACT FILE (#727.825)
 SW ASIA CONDITIONS (#36)       QUASAR EXTRACT FILE (#727.825)
 ENCOUNTER SWAC (#85)           QUASAR EXTRACT FILE (#727.825)
 TREATING SPECIALTY (#24)       EVENT CAPTURE LOCAL EXTRACT FILE (#727.815)
 SW ASIA CONDITIONS (#36)       EVENT CAPTURE LOCAL EXTRACT FILE (#727.815)
 ENCOUNTER SWAC (#85)           EVENT CAPTURE LOCAL EXTRACT FILE (#727.815)
 TREATING SPECIALTY (#26)       SURGERY EXTRACT FILE (#727.811)
 ENCOUNTER SWAC (#97)           SURGERY EXTRACT FILE (#727.811)
 SW ASIA CONDITIONS (#102)      SURGERY EXTRACT FILE (#727.811)
 TREATING SPECIALTY (#15)       PHYSICAL MOVEMENT EXTRACT (#727.808)
 TREATING SPECIALTY (#18)       RADIOLOGY EXTRACT (#727.814)
  
 The following is a list of options included in this patch:
  
 Option Name                     Type               New/Modified
 ------------------              ----               ------------ 
 ECX CLN STOP REP                Run routine        Modified
 ECX ECS VOL                     Run routine        New
 ECX FISCAL YEAR EXTRACT         Run routine        Modified
 ECX LBB SOURCE AUDIT            Run routine        Modified
 ECX LBB SOURCE AUDIT COMPAR     Run routine        New
 ECX LBB SOURCE AUDIT REPORTS    Menu               New
 ECX MAINTENANCE                 Menu               Modified
 ECX NATIONAL CLINIC             Print              Modified
 ECX PHA EDIT                    Menu               Modified
 ECX PHA VOL EDIT                Run routine        Modified
 ECX PHA VOL EDIT LOG            Run routine        Modified
 ECX SETUP CLINIC                Menu               Modified
 ECX SOURCE AUDITS               Menu               Modified
 ECX STOP CODE VALIDITY          Run routine        New
 ECXSCAPPROV                     Run routine        Modified
 ECXSCEDIT                       Run routine        Modified
 ECXSCLIST                       Run routine        Modified 
 ECXSCLOAD                       Run routine        Modified
  
  
 The following is a list of security keys included in this patch:
  
 Security Key
 ------------
 ECX DSS TEST                                       SEND TO SITE
 The purpose of this key is to allow future fiscal year extracts to be run 
 by test sites only.
  
  
 Documentation Retrieval:
 ------------------------ 
 Updated documentation describing the new functionality introduced by this 
 patch is available.
  
 The preferred method is to FTP the files from download.vista.med.va.gov.
 This transmits the files from the first available FTP server. Sites may 
 also elect to retrieve documentation directly from a specific server as 
 follows:
  
  Albany         ftp.fo-albany.med.va.gov  <ftp://ftp.fo-albany.med.va.gov>
  Hines          ftp.fo-hines.med.va.gov   <ftp://ftp.fo-hines.med.va.gov>
  Salt Lake City ftp.fo-slc.med.va.gov     <ftp://ftp.fo-slc.med.va.gov>
   
  
 The documentation will be in the form of Adobe Acrobat files.
   
 Documentation can also be found on the System Design and Development Web 
 page at: http://www4.va.gov/vdl/application.asp?appid=35
  
 Below is a list of the files related to this patch that will be needed and
 available via the FTP sites listed above.
  
 File Description                    File Name                FTP Mode
 -----------------------------------------------------------------------
 User Manual in PDF Format           DSS_3_FY2010_UM.PDF      (binary)
 Extract Format Guide in PDF Format  DSS_3_FY2010_EF.PDF      (binary)
  
  
 Test Sites:
 -----------
 Little Rock
 Palo Alto
 Providence
 Big Springs/W Texas
  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 following selection(s) in the OPTION (#19) file, and all of their 
 descendants be disabled to prevent possible conflicts while running the 
 KIDS Install. Other VISTA users will not be affected.
  
                 Extract Manager's Options [ECXMGR]
  
  
 Install Time - less than 5 minutes (unless otherwise indicated)
  
 ***********************************************************  
  
    1.   LOAD TRANSPORT GLOBAL 
         ---------------------
         Choose the PackMan message containing this patch and invoke the 
         INSTALL/CHECK MESSAGE PackMan option.  
  
    2.   START UP KIDS 
         -------------
         Start up the Kernel Installation and Distribution System Menu 
         [XPD MAIN]: 
  
              Edits and Distribution ...  
              Utilities ...
              Installation ...  
     
    Select Kernel Installation & Distribution System Option: INStallation 
                                                             ---
              Load a Distribution 
              Print Transport Global 
              Compare Transport Global to Current System 
              Verify Checksums in Transport Global 
              Install Package(s) 
              Restart Install of Package(s) 
              Unload a Distribution 
              Backup a Transport Global 
     
    Select Installation Option:
  
    3.   Select Installation Option: 
         --------------------------
         NOTE: The following are OPTIONAL (When prompted for the INSTALL
                NAME, enter ECX*3.0*120):
        
         a.  Backup a Transport Global - This option will create a backup
             message of any routines exported with this patch. It will
             not backup any other changes such as DD's or templates.
         b.  Compare Transport Global to Current System - This option 
             will allow you to view all changes that will be made when 
             this patch is installed.  It compares all components of this 
             patch (routines, DD's, templates, etc.).
         c.  Verify Checksums in Transport Global - This option will
             allow you to ensure the integrity of the routines that are 
             in the transport global.
       
    4.   Select Installation Option: Install Package(s) 
                                     ----------------
         **This is the step to start the installation of this KIDS patch: 
     
        a.  Choose the Install Package(s) option to start the patch
            install.  Enter ECX*3.0*112 when prompted for a build name.
        b.  When prompted  Want KIDS to Rebuild Menu Trees Upon Completion
            of the Install?  YES//  answer NO
        c.  When prompted 'Want KIDS to INHIBIT LOGONs during the
            install?  YES//' answer NO (unless otherwise indicated).
        d.  When prompted 'Want to DISABLE Scheduled Options, Menu
            Options, and Protocols? YES//' hit '<return>'. YES (unless
               otherwise indicated).
  
        e.  When prompted 'Enter options you wish to mark as 'Out Of
            Order':'  Enter the following options:
   
                    Extract Manager's Options [ECXMGR]
  
        f.  When prompted 'Enter protocols you wish to mark as 'Out Of
            Order':' press <return>.
  
        g. If prompted 'Delay Install (Minutes):  (0-60):  0//'
           answer "0" (unless otherwise indicated).

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0;DSS EXTRACTS;**[Patch List]**;Dec 22, 1997;Build 43

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ECX3P120
    Before:       n/a   After: B10071964  **120**
Routine Name: ECXADM
    Before: B41911607   After: B44017084  **1,4,11,8,13,24,33,39,46,71,
                                           84,92,107,105,120**
Routine Name: ECXEC
    Before: B42363608   After: B49835024  **11,8,13,24,27,33,39,46,49,
                                           71,89,92,105,120**
Routine Name: ECXKILL1
    Before:  B6954712   After:  B7082343  **39,46,89,120**
Routine Name: ECXLARA
    Before: B27412499   After: B29666776  **105,112,120**
Routine Name: ECXLARPT
    Before: B20353284   After: B22212471  **112,120**
Routine Name: ECXLBB
    Before: B45677580   After: B50013852  **78,84,90,92,104,105,102,120**
Routine Name: ECXLBB1
    Before: B23103895   After: B26138435  **105,102,120**
Routine Name: ECXLBBC
    Before:       n/a   After: B41726117  **120**
Routine Name: ECXMTL
    Before: B38000130   After: B38030219  **24,30,33,39,46,49,71,82,84,
                                           92,105,120**
Routine Name: ECXNUT
    Before: B31564547   After: B32372950  **92,107,105,112,120**
Routine Name: ECXOPRX
    Before: B51901081   After: B53251147  **10,11,8,13,24,30,33,38,39,
                                           46,49,71,81,84,92,105,112,120**
Routine Name: ECXOPRX1
    Before:  B8259189   After:  B8589426  **92,107,105,120**
Routine Name: ECXPHVE
    Before:  B4185725   After:  B4219296  **92,120**
Routine Name: ECXPIVD2
    Before:  B8379900   After:  B8697954  **105,120**
Routine Name: ECXPIVDN
    Before: B49199497   After: B49936544  **10,11,8,13,24,33,39,46,49,
                                           71,84,96,92,107,105,112,120**
Routine Name: ECXPRO
    Before: B34644187   After: B35257665  **9,13,15,21,24,33,39,46,71,
                                           92,105,120**
Routine Name: ECXQSR
    Before: B40606655   After: B40640052  **11,8,13,26,24,34,33,35,39,
                                           43,46,49,64,71,84,92,106,105,
                                           120**
Routine Name: ECXQSR1
    Before:  B9419721   After: B10373755  **105,120**
Routine Name: ECXRAD
    Before: B33912770   After: B34986358  **11,8,13,16,24,33,39,46,71,
                                           84,92,105,120**
Routine Name: ECXSCLD
    Before: B41231868   After:B162480116  **2,8,24,30,71,80,105,112,120**
Routine Name: ECXSCRP
    Before: B20108565   After: B19429166  **57,58,120**
Routine Name: ECXSCX2
    Before:  B8581538   After:  B8788223  **39,46,49,71,84,92,105,120**
Routine Name: ECXSCX3
    Before:       n/a   After: B12749405  **120**
Routine Name: ECXSCXN
    Before: B57423281   After: B57854664  **24,27,29,30,31,32,33,39,46,
                                           49,52,71,84,92,107,105,120**
Routine Name: ECXSTOP
    Before:       n/a   After: B10000186  **120**
Routine Name: ECXSURG1
    Before: B14336843   After: B15348265  **105,112,120**
Routine Name: ECXTREX
    Before: B11510953   After: B28561003  **49,71,84,92,105,112,120**
Routine Name: ECXUD
    Before: B52727032   After: B54326285  **10,8,24,33,39,46,49,71,84,
                                           92,107,105,120**
Routine Name: ECXUEC
    Before:       n/a   After: B38987244  **120**
Routine Name: ECXUTL2
    Before: B70560984   After: B71058121  **8,13,23,24,33,35,39,46,71,
                                           84,92,105,112,120**
Routine Name: ECXUTL3
    Before: B62713398   After: B63750846  **11,24,32,33,35,37,39,42,46,
                                           92,105,120**
Routine Name: ECXUTL4
    Before: B51787444   After: B51958350  **39,41,46,49,78,92,105,112,120**
Routine Name: ECXUTL5
    Before: B34282148   After: B34433820  **71,84,92,103,105,120**
 
Routine list of preceding patches: 58, 102, 112

=============================================================================
User Information:
Entered By  : YORTY,M ROBERT                Date Entered  : FEB 09, 2009
Completed By: MULLER,RICHARD                Date Completed: NOV 13, 2009
Released By : STRICKLAND,JOAN C             Date Released : NOV 13, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
