Released MHV*1*5 SEQ #3
Extracted from mail message
**KIDS**:MHV*1.0*5^

**INSTALL NAME**
MHV*1.0*5
"BLD",7024,0)
MHV*1.0*5^My HealtheVet^0^3080925^y
"BLD",7024,1,0)
^^9^9^3080814^
"BLD",7024,1,1,0)
MHV*1*5 Secure Messaging
"BLD",7024,1,2,0)
 
"BLD",7024,1,3,0)
Summary
"BLD",7024,1,4,0)
-------
"BLD",7024,1,5,0)
MHV*1*5 delivers HL7 interfaces needed to support Secure Messaging.  
"BLD",7024,1,6,0)
Secure Messaging leverages the existing TIUHL7 interface to save message 
"BLD",7024,1,7,0)
threads as progress notes.  MHV*1*5 installs the components necessary to 
"BLD",7024,1,8,0)
use the TIUHL7 interface.  MHV*1*5 also installs a new demographics query 
"BLD",7024,1,9,0)
used to support secure messaging.
"BLD",7024,4,0)
^9.64PA^^
"BLD",7024,6)
6^
"BLD",7024,6.3)
24
"BLD",7024,"INI")
PRE^MHV1P5
"BLD",7024,"INIT")
POST^MHV1P5
"BLD",7024,"KRN",0)
^9.67PA^8989.52^19
"BLD",7024,"KRN",.4,0)
.4
"BLD",7024,"KRN",.401,0)
.401
"BLD",7024,"KRN",.402,0)
.402
"BLD",7024,"KRN",.403,0)
.403
"BLD",7024,"KRN",.5,0)
.5
"BLD",7024,"KRN",.84,0)
.84
"BLD",7024,"KRN",3.6,0)
3.6
"BLD",7024,"KRN",3.8,0)
3.8
"BLD",7024,"KRN",9.2,0)
9.2
"BLD",7024,"KRN",9.8,0)
9.8
"BLD",7024,"KRN",9.8,"NM",0)
^9.68A^5^5
"BLD",7024,"KRN",9.8,"NM",1,0)
MHV1P5^^0^B27636156
"BLD",7024,"KRN",9.8,"NM",2,0)
MHV7R4^^0^B33959355
"BLD",7024,"KRN",9.8,"NM",3,0)
MHV7B8^^0^B15804304
"BLD",7024,"KRN",9.8,"NM",4,0)
MHVXDEMS^^0^B6081300
"BLD",7024,"KRN",9.8,"NM",5,0)
MHVU2^^0^B16546858
"BLD",7024,"KRN",9.8,"NM","B","MHV1P5",1)
 
"BLD",7024,"KRN",9.8,"NM","B","MHV7B8",3)
 
"BLD",7024,"KRN",9.8,"NM","B","MHV7R4",2)
 
"BLD",7024,"KRN",9.8,"NM","B","MHVU2",5)
 
"BLD",7024,"KRN",9.8,"NM","B","MHVXDEMS",4)
 
"BLD",7024,"KRN",19,0)
19
"BLD",7024,"KRN",19.1,0)
19.1
"BLD",7024,"KRN",101,0)
101
"BLD",7024,"KRN",101,"NM",0)
^9.68A^7^6
"BLD",7024,"KRN",101,"NM",1,0)
MHVSM MDM-T02 Event Driver^^0
"BLD",7024,"KRN",101,"NM",2,0)
MHVSM MDM-T02 Subscriber^^0
"BLD",7024,"KRN",101,"NM",4,0)
MHVSM ADR-A19 Subscriber^^0
"BLD",7024,"KRN",101,"NM",5,0)
MHVSM QRY-A19 Event Driver^^0
"BLD",7024,"KRN",101,"NM",6,0)
MHVSM QRY-A19 Subscriber^^0
"BLD",7024,"KRN",101,"NM",7,0)
MHVSM ADR-A19 Event Driver ^^0
"BLD",7024,"KRN",101,"NM","B","MHVSM ADR-A19 Event Driver ",7)
 
"BLD",7024,"KRN",101,"NM","B","MHVSM ADR-A19 Subscriber",4)
 
"BLD",7024,"KRN",101,"NM","B","MHVSM MDM-T02 Event Driver",1)
 
"BLD",7024,"KRN",101,"NM","B","MHVSM MDM-T02 Subscriber",2)
 
"BLD",7024,"KRN",101,"NM","B","MHVSM QRY-A19 Event Driver",5)
 
"BLD",7024,"KRN",101,"NM","B","MHVSM QRY-A19 Subscriber",6)
 
"BLD",7024,"KRN",409.61,0)
409.61
"BLD",7024,"KRN",771,0)
771
"BLD",7024,"KRN",771,"NM",0)
^9.68A^2^2
"BLD",7024,"KRN",771,"NM",1,0)
MHV SM^^0
"BLD",7024,"KRN",771,"NM",2,0)
MHV TIU^^0
"BLD",7024,"KRN",771,"NM","B","MHV SM",1)
 
"BLD",7024,"KRN",771,"NM","B","MHV TIU",2)
 
"BLD",7024,"KRN",870,0)
870
"BLD",7024,"KRN",870,"NM",0)
^9.68A^^0
"BLD",7024,"KRN",8989.51,0)
8989.51
"BLD",7024,"KRN",8989.52,0)
8989.52
"BLD",7024,"KRN",8994,0)
8994
"BLD",7024,"KRN","B",.4,.4)
 
"BLD",7024,"KRN","B",.401,.401)
 
"BLD",7024,"KRN","B",.402,.402)
 
"BLD",7024,"KRN","B",.403,.403)
 
"BLD",7024,"KRN","B",.5,.5)
 
"BLD",7024,"KRN","B",.84,.84)
 
"BLD",7024,"KRN","B",3.6,3.6)
 
"BLD",7024,"KRN","B",3.8,3.8)
 
"BLD",7024,"KRN","B",9.2,9.2)
 
"BLD",7024,"KRN","B",9.8,9.8)
 
"BLD",7024,"KRN","B",19,19)
 
"BLD",7024,"KRN","B",19.1,19.1)
 
"BLD",7024,"KRN","B",101,101)
 
"BLD",7024,"KRN","B",409.61,409.61)
 
"BLD",7024,"KRN","B",771,771)
 
"BLD",7024,"KRN","B",870,870)
 
"BLD",7024,"KRN","B",8989.51,8989.51)
 
"BLD",7024,"KRN","B",8989.52,8989.52)
 
"BLD",7024,"KRN","B",8994,8994)
 
"BLD",7024,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",7024,"QUES",0)
^9.62^^
"BLD",7024,"REQB",0)
^9.611^1^1
"BLD",7024,"REQB",1,0)
MHV*1.0*2^2
"BLD",7024,"REQB","B","MHV*1.0*2",1)
 
"INI")
PRE^MHV1P5
"INIT")
POST^MHV1P5
"KRN",101,7113,-1)
0^5
"KRN",101,7113,0)
MHVSM QRY-A19 Event Driver^^^E^^^^^^^^
"KRN",101,7113,99)
61234,46458
"KRN",101,7113,770)
MHV SM^^QRY^A19^68^^^^^2.4^
"KRN",101,7113,775,0)
^101.0775PA^1^1
"KRN",101,7113,775,1,0)
7114
"KRN",101,7113,775,1,"^")
MHVSM QRY-A19 Subscriber
"KRN",101,7114,-1)
0^6
"KRN",101,7114,0)
MHVSM QRY-A19 Subscriber^^^S^^^^^^^^
"KRN",101,7114,770)
^MHV VISTA^^A19^^^^^^^ADR
"KRN",101,7114,771)
D QRYA19^MHV7R4
"KRN",101,7114,773)
1^1^0
"KRN",101,7117,-1)
0^2
"KRN",101,7117,0)
MHVSM MDM-T02 Subscriber^MHVSM MDM-T02 Subscriber^^S^^^^^^^^
"KRN",101,7117,99)
61264,56241
"KRN",101,7117,770)
^MHV TIU^^T02^^^^^^^ACK
"KRN",101,7117,771)
D PROCMSG^TIUHL7P1
"KRN",101,7117,773)
1^1^0
"KRN",101,7118,-1)
0^1
"KRN",101,7118,0)
MHVSM MDM-T02 Event Driver^MHVSM MDM-T02 Event Driver^^E^^^^^^^^
"KRN",101,7118,99)
61264,56241
"KRN",101,7118,770)
MHV SM^^MDM^T02^34^^^AL^NE^2.4^
"KRN",101,7118,775,0)
^101.0775PA^1^1
"KRN",101,7118,775,1,0)
7117
"KRN",101,7118,775,1,"^")
MHVSM MDM-T02 Subscriber
"KRN",101,7119,-1)
0^4
"KRN",101,7119,0)
MHVSM ADR-A19 Subscriber^^^S^^^^^^^^
"KRN",101,7119,770)
^MHV VISTA^^A19^^^MHVVA^^^^QRY
"KRN",101,7119,773)
1^1^0
"KRN",101,7120,-1)
0^7
"KRN",101,7120,0)
MHVSM ADR-A19 Event Driver ^MHVSM ADR-A19 Event Driver^^E^^^^^^^^
"KRN",101,7120,99)
61264,56241
"KRN",101,7120,770)
MHV VISTA^^ADR^A19^123^^^AL^NE^2.4^
"KRN",101,7120,775,0)
^101.0775PA^1^1
"KRN",101,7120,775,1,0)
7119
"KRN",101,7120,775,1,"^")
MHVSM ADR-A19 Subscriber
"KRN",771,198,-1)
0^1
"KRN",771,198,0)
MHV SM^a^^^^^
"KRN",771,198,"EC")
^~\&
"KRN",771,198,"FS")
|
"KRN",771,199,-1)
0^2
"KRN",771,199,0)
MHV TIU^a^^^^^
"KRN",771,199,"EC")
^~\&
"KRN",771,199,"FS")
|
"MBREQ")
0
"ORD",14,771)
771;14;;;HLAP^XPDTA1;HLAPF1^XPDIA1;HLAPE1^XPDIA1;HLAPF2^XPDIA1;;HLAPDEL^XPDIA1(%)
"ORD",14,771,0)
HL7 APPLICATION PARAMETER
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"PKG",594,-1)
1^1
"PKG",594,0)
My HealtheVet^MHV^Support for My HealtheVet web site.
"PKG",594,20,0)
^9.402P^^
"PKG",594,22,0)
^9.49I^1^1
"PKG",594,22,1,0)
1.0^3050823^3050829^30
"PKG",594,22,1,"PAH",1,0)
5^3080925^50205
"PKG",594,22,1,"PAH",1,1,0)
^^9^9^3080925
"PKG",594,22,1,"PAH",1,1,1,0)
MHV*1*5 Secure Messaging
"PKG",594,22,1,"PAH",1,1,2,0)
 
"PKG",594,22,1,"PAH",1,1,3,0)
Summary
"PKG",594,22,1,"PAH",1,1,4,0)
-------
"PKG",594,22,1,"PAH",1,1,5,0)
MHV*1*5 delivers HL7 interfaces needed to support Secure Messaging.  
"PKG",594,22,1,"PAH",1,1,6,0)
Secure Messaging leverages the existing TIUHL7 interface to save message 
"PKG",594,22,1,"PAH",1,1,7,0)
threads as progress notes.  MHV*1*5 installs the components necessary to 
"PKG",594,22,1,"PAH",1,1,8,0)
use the TIUHL7 interface.  MHV*1*5 also installs a new demographics query 
"PKG",594,22,1,"PAH",1,1,9,0)
used to support secure messaging.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
5
"RTN","MHV1P5")
0^1^B27636156^n/a
"RTN","MHV1P5",1,0)
MHV1P5 ;WAS/GPM - My HealtheVet Install Utility Routine ; [4/29/08 11:49pm]
"RTN","MHV1P5",2,0)
 ;;1.0;My HealtheVet;**5**;Aug 23, 2005;Build 24
"RTN","MHV1P5",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","MHV1P5",4,0)
 ;
"RTN","MHV1P5",5,0)
 ;  Integration Agreements:
"RTN","MHV1P5",6,0)
 ;        10141 : BMES^XPDUTL
"RTN","MHV1P5",7,0)
 ;              : MES^XPDUTL
"RTN","MHV1P5",8,0)
 ;
"RTN","MHV1P5",9,0)
ENV ;
"RTN","MHV1P5",10,0)
 Q
"RTN","MHV1P5",11,0)
 ;
"RTN","MHV1P5",12,0)
PRE ; Pre-init routine
"RTN","MHV1P5",13,0)
 ; Turn on MHV Application Logging, add a log entry for the start
"RTN","MHV1P5",14,0)
 ; of the patch install.
"RTN","MHV1P5",15,0)
 D LOGON
"RTN","MHV1P5",16,0)
 D LOG^MHVUL2(XPDNM,"PRE-INIT","S","TRACE")
"RTN","MHV1P5",17,0)
 Q
"RTN","MHV1P5",18,0)
 ;
"RTN","MHV1P5",19,0)
POST ; Post-init routine
"RTN","MHV1P5",20,0)
 N ERR
"RTN","MHV1P5",21,0)
 D LOG^MHVUL2(XPDNM,"POST-INIT BEGIN","S","TRACE")
"RTN","MHV1P5",22,0)
 ;
"RTN","MHV1P5",23,0)
 D BMES^XPDUTL("    Creating SECURE MESSAGING clinic")
"RTN","MHV1P5",24,0)
 I '$$CLINIC(.ERR) D
"RTN","MHV1P5",25,0)
 . I ERR="ENTRY EXISTS" D  Q
"RTN","MHV1P5",26,0)
 . . D BMES^XPDUTL("    *** SECURE MESSAGING clinic exists")
"RTN","MHV1P5",27,0)
 . . D MES^XPDUTL("     This may be because this patch has already been installed.")
"RTN","MHV1P5",28,0)
 . . D MES^XPDUTL("     If this is the first installation of this patch,")
"RTN","MHV1P5",29,0)
 . . D MES^XPDUTL("     Please log a remedy ticket.")
"RTN","MHV1P5",30,0)
 . . Q
"RTN","MHV1P5",31,0)
 . D BMES^XPDUTL("    *** Error creating SECURE MESSAGING clinic")
"RTN","MHV1P5",32,0)
 . D MES^XPDUTL("     Please log a remedy ticket.")
"RTN","MHV1P5",33,0)
 . Q
"RTN","MHV1P5",34,0)
 ;
"RTN","MHV1P5",35,0)
 D QRYSETUP
"RTN","MHV1P5",36,0)
 ;
"RTN","MHV1P5",37,0)
 D LOG^MHVUL2(XPDNM,"POST-INIT END","S","TRACE")
"RTN","MHV1P5",38,0)
 D LOGOFF
"RTN","MHV1P5",39,0)
 D RESET^MHVUL2
"RTN","MHV1P5",40,0)
 Q
"RTN","MHV1P5",41,0)
 ;
"RTN","MHV1P5",42,0)
LOGON ; Turn on MHV application logging
"RTN","MHV1P5",43,0)
 N UPDATE,SUCCESS
"RTN","MHV1P5",44,0)
 D BMES^XPDUTL("     Turning on MHV Application Logging")
"RTN","MHV1P5",45,0)
 S UPDATE("STATE")=1
"RTN","MHV1P5",46,0)
 S UPDATE("DELETE")=$$HTFM^XLFDT($H+60)
"RTN","MHV1P5",47,0)
 S UPDATE("LEVEL")="DEBUG"
"RTN","MHV1P5",48,0)
 D LOGSET^MHVUL1(.SUCCESS,.UPDATE)
"RTN","MHV1P5",49,0)
 Q
"RTN","MHV1P5",50,0)
 ;
"RTN","MHV1P5",51,0)
LOGOFF ; Turn off MHV application logging
"RTN","MHV1P5",52,0)
 N SUCCESS
"RTN","MHV1P5",53,0)
 D BMES^XPDUTL("     Turning off MHV Application Logging")
"RTN","MHV1P5",54,0)
 D LOGOFF^MHVUL1(.SUCCESS)
"RTN","MHV1P5",55,0)
 Q
"RTN","MHV1P5",56,0)
 ;
"RTN","MHV1P5",57,0)
CLINIC(ERR) ; Set up HOSPITAL LOCATION entry (file #44)
"RTN","MHV1P5",58,0)
 N CIEN,TIEN,IENS,FDA
"RTN","MHV1P5",59,0)
 D LOG^MHVUL2("CREATE SM CLINIC","BEGIN","S","TRACE")
"RTN","MHV1P5",60,0)
 K ERR
"RTN","MHV1P5",61,0)
 S ERR=""
"RTN","MHV1P5",62,0)
 ;
"RTN","MHV1P5",63,0)
 S CIEN=$$FIND1^DIC(44,"","X","SECURE MESSAGING","B","","ERR")
"RTN","MHV1P5",64,0)
 I CIEN D  Q 0
"RTN","MHV1P5",65,0)
 . S ERR="ENTRY EXISTS"
"RTN","MHV1P5",66,0)
 . D LOG^MHVUL2("CREATE SM CLINIC FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",67,0)
 . Q
"RTN","MHV1P5",68,0)
 I $G(ERR("DIERR")) D  Q 0
"RTN","MHV1P5",69,0)
 . S ERR=$G(ERR("DIERR",1))_"^"_$G(ERR("DIERR",1,"TEXT",1))
"RTN","MHV1P5",70,0)
 . D LOG^MHVUL2("CREATE SM CLINIC FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",71,0)
 . Q
"RTN","MHV1P5",72,0)
 ;
"RTN","MHV1P5",73,0)
 S TIEN=$$FIND1^DIC(40.9,"","X","OTHER LOCATION","B","","ERR")
"RTN","MHV1P5",74,0)
 I 'TIEN D  Q 0
"RTN","MHV1P5",75,0)
 . I '$G(ERR("DIERR")) S ERR("DIERR",1,"TEXT",1)="NOT FOUND"
"RTN","MHV1P5",76,0)
 . S ERR=$G(ERR("DIERR",1))_"^"_$G(ERR("DIERR",1,"TEXT",1))
"RTN","MHV1P5",77,0)
 . D LOG^MHVUL2("CREATE SM CLINIC FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",78,0)
 . Q
"RTN","MHV1P5",79,0)
 ;
"RTN","MHV1P5",80,0)
 S IENS="+1,"
"RTN","MHV1P5",81,0)
 S FDA(44,IENS,.01)="SECURE MESSAGING"
"RTN","MHV1P5",82,0)
 S FDA(44,IENS,1)="SM"                    ;ABBREVIATION
"RTN","MHV1P5",83,0)
 S FDA(44,IENS,2)="Z"                     ;TYPE - other location
"RTN","MHV1P5",84,0)
 S FDA(44,IENS,2.1)=TIEN                  ;TYPE EXTENSION
"RTN","MHV1P5",85,0)
 S FDA(44,IENS,3)=+$$SITE^VASITE          ;INSTITUTION
"RTN","MHV1P5",86,0)
 S FDA(44,IENS,10)="Secure Messaging System" ; PHYSICAL LOCATION
"RTN","MHV1P5",87,0)
 S FDA(44,IENS,2502)="Y"                  ;NON-COUNT CLINIC?
"RTN","MHV1P5",88,0)
 S FDA(44,IENS,2504)="N"                  ;CLINIC MEETS AT FACILITY?
"RTN","MHV1P5",89,0)
 D UPDATE^DIE("","FDA","","ERR")
"RTN","MHV1P5",90,0)
 I $G(ERR("DIERR")) D  Q 0
"RTN","MHV1P5",91,0)
 . S ERR=$G(ERR("DIERR",1))_"^"_$G(ERR("DIERR",1,"TEXT",1))
"RTN","MHV1P5",92,0)
 . D LOG^MHVUL2("CREATE SM CLINIC FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",93,0)
 . Q
"RTN","MHV1P5",94,0)
 ;
"RTN","MHV1P5",95,0)
 D LOG^MHVUL2("CREATE SM CLINIC","SUCCESS","S","TRACE")
"RTN","MHV1P5",96,0)
 Q 1
"RTN","MHV1P5",97,0)
 ;
"RTN","MHV1P5",98,0)
QRYSETUP ; Setup for demographics query
"RTN","MHV1P5",99,0)
 ; Setup MHV REQUEST TYPE and MHV RESPONSE MAP
"RTN","MHV1P5",100,0)
 ;
"RTN","MHV1P5",101,0)
 N FIELDS,ERR
"RTN","MHV1P5",102,0)
 S ERR=""
"RTN","MHV1P5",103,0)
 S FIELDS("REQUEST TYPE")="SM-DEMOGRAPHICS"
"RTN","MHV1P5",104,0)
 S FIELDS("NUMBER")=25
"RTN","MHV1P5",105,0)
 S FIELDS("BLOCK")=1
"RTN","MHV1P5",106,0)
 S FIELDS("REALTIME")=1
"RTN","MHV1P5",107,0)
 S FIELDS("DATATYPE")="SMDemographics"
"RTN","MHV1P5",108,0)
 S FIELDS("EXECUTE")="EXTRACT~MHVXDEMS"
"RTN","MHV1P5",109,0)
 S FIELDS("DESCRIPTION",1)="QRY^A19 query for patient demographics."
"RTN","MHV1P5",110,0)
 S FIELDS("DESCRIPTION",2)="Specify patient by ICN, DFN, or SSN."
"RTN","MHV1P5",111,0)
 S FIELDS("DESCRIPTION",3)="Developed for Secure Messaging."
"RTN","MHV1P5",112,0)
 D LOG^MHVUL2("UPDATE REQUEST TYPE",.FIELDS,"M","DEBUG")
"RTN","MHV1P5",113,0)
 D UPDREQ^MHVU2(.FIELDS,1,.ERR)
"RTN","MHV1P5",114,0)
 I ERR'="" D
"RTN","MHV1P5",115,0)
 . D LOG^MHVUL2("UPDATE FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",116,0)
 . D BMES^XPDUTL("     *** An Error occurred during installation.")
"RTN","MHV1P5",117,0)
 . D MES^XPDUTL("     Please log a remedy ticket.")
"RTN","MHV1P5",118,0)
 . Q
"RTN","MHV1P5",119,0)
 ;
"RTN","MHV1P5",120,0)
 K FIELDS
"RTN","MHV1P5",121,0)
 S ERR=""
"RTN","MHV1P5",122,0)
 S FIELDS("SUBSCRIBER")="MHVSM QRY-A19 Subscriber"
"RTN","MHV1P5",123,0)
 S FIELDS("PROTOCOL")="MHVSM ADR-A19 Event Driver"
"RTN","MHV1P5",124,0)
 S FIELDS("BUILDER")="ADRA19~MHV7B8"
"RTN","MHV1P5",125,0)
 S FIELDS("SEGMENT")="PID"
"RTN","MHV1P5",126,0)
 D LOG^MHVUL2("UPDATE RESPONSE MAP",.FIELDS,"M","DEBUG")
"RTN","MHV1P5",127,0)
 D UPDMAP^MHVU2(.FIELDS,1,.ERR)
"RTN","MHV1P5",128,0)
 I ERR'="" D
"RTN","MHV1P5",129,0)
 . D LOG^MHVUL2("UPDATE FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",130,0)
 . D BMES^XPDUTL("     *** An Error occurred during installation.")
"RTN","MHV1P5",131,0)
 . D MES^XPDUTL("     Please log a remedy ticket.")
"RTN","MHV1P5",132,0)
 . Q
"RTN","MHV1P5",133,0)
 ;
"RTN","MHV1P5",134,0)
 S ERR=""
"RTN","MHV1P5",135,0)
 D LOG^MHVUL2("ENABLE","SM-DEMOGRAPHICS","S","TRACE")
"RTN","MHV1P5",136,0)
 D TOGGLE^MHVU2("SM-DEMOGRAPHICS","ENABLE",.ERR)
"RTN","MHV1P5",137,0)
 I ERR'="" D
"RTN","MHV1P5",138,0)
 . D LOG^MHVUL2("ENABLE FAILED",ERR,"S","ERROR")
"RTN","MHV1P5",139,0)
 . D BMES^XPDUTL("     *** An Error occurred during installation.")
"RTN","MHV1P5",140,0)
 . D MES^XPDUTL("     Please log a remedy ticket.")
"RTN","MHV1P5",141,0)
 . Q
"RTN","MHV1P5",142,0)
 ;
"RTN","MHV7B8")
0^3^B15804304^n/a
"RTN","MHV7B8",1,0)
MHV7B8 ;WAS/GPM - HL7 message builder SECURE MESSAGING ADR^A19 ; [3/23/08 8:18pm]
"RTN","MHV7B8",2,0)
 ;;1.0;My HealtheVet;**5**;Aug 23, 2005;Build 24
"RTN","MHV7B8",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","MHV7B8",4,0)
 ;
"RTN","MHV7B8",5,0)
 Q
"RTN","MHV7B8",6,0)
 ;
"RTN","MHV7B8",7,0)
ADRA19(MSGROOT,QRY,ERR,DATAROOT,LEN,HL) ; Build query response
"RTN","MHV7B8",8,0)
 ;
"RTN","MHV7B8",9,0)
 ;  Populates the array pointed to by MSGROOT with an ADR^A19 query
"RTN","MHV7B8",10,0)
 ; response message by calling the appropriate segment builders based
"RTN","MHV7B8",11,0)
 ; on the type of response ACK/Data or NAK.  Extracted data pointed to
"RTN","MHV7B8",12,0)
 ; by DATAROOT, errors, hit counts, and query information are used to
"RTN","MHV7B8",13,0)
 ; build the segments.
"RTN","MHV7B8",14,0)
 ; An error number in ERR^4 indicates a NAK is needed.
"RTN","MHV7B8",15,0)
 ; DATAROOT being null indicates a dataless ACK (testing purposes).
"RTN","MHV7B8",16,0)
 ;
"RTN","MHV7B8",17,0)
 ;  Input:
"RTN","MHV7B8",18,0)
 ;     MSGROOT - Global root of message
"RTN","MHV7B8",19,0)
 ;         QRY - Query parameters
"RTN","MHV7B8",20,0)
 ;             QRY("MID") - original message control ID
"RTN","MHV7B8",21,0)
 ;         ERR - Caret delimited error string
"RTN","MHV7B8",22,0)
 ;               segment^sequence^field^code^ACK type^error text
"RTN","MHV7B8",23,0)
 ;    DATAROOT - Global root of data array
"RTN","MHV7B8",24,0)
 ;          HL - HL7 package array variable
"RTN","MHV7B8",25,0)
 ;
"RTN","MHV7B8",26,0)
 ;  Output: ADR^A19 message in MSGROOT
"RTN","MHV7B8",27,0)
 ;         LEN - Length of formatted message
"RTN","MHV7B8",28,0)
 ;
"RTN","MHV7B8",29,0)
 N CNT,HIT,EXTIME
"RTN","MHV7B8",30,0)
 D LOG^MHVUL2("SM ADR-A19 BUILDER","BEGIN","S","TRACE")
"RTN","MHV7B8",31,0)
 ;
"RTN","MHV7B8",32,0)
 S HIT=0,EXTIME=""
"RTN","MHV7B8",33,0)
 I DATAROOT'="" D
"RTN","MHV7B8",34,0)
 . S HIT=+$P($G(@DATAROOT),"^",1)
"RTN","MHV7B8",35,0)
 . S EXTIME=$P($G(@DATAROOT),"^",2)
"RTN","MHV7B8",36,0)
 . Q
"RTN","MHV7B8",37,0)
 S HIT=HIT_"^"_HIT_"^0"
"RTN","MHV7B8",38,0)
 ;
"RTN","MHV7B8",39,0)
 K @MSGROOT
"RTN","MHV7B8",40,0)
 S CNT=1,@MSGROOT@(CNT)=$$MSA^MHV7BUS($G(QRY("MID")),ERR,.HL),LEN=$L(@MSGROOT@(CNT))
"RTN","MHV7B8",41,0)
 I $P(ERR,"^",4) S CNT=CNT+1,HIT="0^0^0",@MSGROOT@(CNT)=$$ERR^MHV7BUS(ERR,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",42,0)
 S CNT=CNT+1,@MSGROOT@(CNT)=$$QRD^MHV7BUS(.QRY,EXTIME,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",43,0)
 S CNT=CNT+1,@MSGROOT@(CNT)=$$QRF^MHV7BUS(.QRY,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",44,0)
 S CNT=CNT+1,@MSGROOT@(CNT)=$$QAK^MHV7BUS(.QRY,ERR,HIT,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",45,0)
 I $P(ERR,"^",4) S CNT=CNT+1,@MSGROOT@(CNT)=$$PID^MHV7BUS(.QRY,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",46,0)
 ;
"RTN","MHV7B8",47,0)
 I '$P(ERR,"^",4),HIT>0,DATAROOT'="" D
"RTN","MHV7B8",48,0)
 . S CNT=CNT+1,@MSGROOT@(CNT)=$$PID(.QRY,DATAROOT,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",49,0)
 . S CNT=CNT+1,@MSGROOT@(CNT)=$$PD1(DATAROOT,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",50,0)
 . S CNT=CNT+1,@MSGROOT@(CNT)=$$PV1(DATAROOT,.HL),LEN=LEN+$L(@MSGROOT@(CNT))
"RTN","MHV7B8",51,0)
 . Q
"RTN","MHV7B8",52,0)
 ;
"RTN","MHV7B8",53,0)
 D LOG^MHVUL2("SM ADR-A19 BUILDER","END","S","TRACE")
"RTN","MHV7B8",54,0)
 Q
"RTN","MHV7B8",55,0)
 ;
"RTN","MHV7B8",56,0)
PID(QRY,DATAROOT,HL) ;
"RTN","MHV7B8",57,0)
 N PID,T,X,NAME
"RTN","MHV7B8",58,0)
 S PID(0)="PID"
"RTN","MHV7B8",59,0)
 ;
"RTN","MHV7B8",60,0)
 ;Build PID(3)
"RTN","MHV7B8",61,0)
 D PID3^MHV7BU(.PID,QRY("ICN"),QRY("DFN"),QRY("SSN"))
"RTN","MHV7B8",62,0)
 ;
"RTN","MHV7B8",63,0)
 ;Build PID(5)
"RTN","MHV7B8",64,0)
 D FMTNAME2^MHV7BU(QRY("DFN"),2,.NAME,.HL,"XPN")
"RTN","MHV7B8",65,0)
 M PID(5,1)=NAME
"RTN","MHV7B8",66,0)
 ;
"RTN","MHV7B8",67,0)
 S PID(7,1,1)=$$FMTHL7^XLFDT(@DATAROOT@("DOB"))
"RTN","MHV7B8",68,0)
 S PID(8)=$$ESCAPE^MHV7U(@DATAROOT@("SEX"),.HL)
"RTN","MHV7B8",69,0)
 S PID(11,1,1,1)=$$ESCAPE^MHV7U(@DATAROOT@("ADD1"),.HL)
"RTN","MHV7B8",70,0)
 S X=@DATAROOT@("ADD2")
"RTN","MHV7B8",71,0)
 S T=@DATAROOT@("ADD3")
"RTN","MHV7B8",72,0)
 I $L(X)&$L(T) S X=X_" "
"RTN","MHV7B8",73,0)
 S PID(11,1,2)=$$ESCAPE^MHV7U(X_T,.HL)
"RTN","MHV7B8",74,0)
 S PID(11,1,3)=$$ESCAPE^MHV7U(@DATAROOT@("CITY"),.HL)
"RTN","MHV7B8",75,0)
 S PID(11,1,4)=$$ESCAPE^MHV7U(@DATAROOT@("STATE"),.HL)
"RTN","MHV7B8",76,0)
 S PID(11,1,5)=$$ESCAPE^MHV7U(@DATAROOT@("ZIP"),.HL)
"RTN","MHV7B8",77,0)
 S PID(11,1,7)="M"                                 ;address type
"RTN","MHV7B8",78,0)
 S PID(11,1,9)=$$ESCAPE^MHV7U(@DATAROOT@("COUNTY"),.HL)
"RTN","MHV7B8",79,0)
 S PID(13,1,1)=$$HLPHONE^HLFNC(@DATAROOT@("PHONE"))
"RTN","MHV7B8",80,0)
 S PID(13,1,4)=$$ESCAPE^MHV7U(@DATAROOT@("E-MAIL"),.HL)
"RTN","MHV7B8",81,0)
 S PID(14,1,1)=$$HLPHONE^HLFNC(@DATAROOT@("BUS-PHONE"))
"RTN","MHV7B8",82,0)
 S PID(16,1,2)=$$ESCAPE^MHV7U(@DATAROOT@("MARITAL-STATUS"),.HL)
"RTN","MHV7B8",83,0)
 S PID(17,1,2)=$$ESCAPE^MHV7U(@DATAROOT@("RELIGION"),.HL)
"RTN","MHV7B8",84,0)
 S X=@DATAROOT@("BIRTH-CITY")_"^"_@DATAROOT@("BIRTH-STATE")
"RTN","MHV7B8",85,0)
 S PID(23)=$$ESCAPE^MHV7U(X,.HL)                   ;birth place
"RTN","MHV7B8",86,0)
 S PID(29,1,1)=$$FMTHL7^XLFDT(@DATAROOT@("DOD"))
"RTN","MHV7B8",87,0)
 Q $$BLDSEG^MHV7U(.PID,.HL)
"RTN","MHV7B8",88,0)
 ;
"RTN","MHV7B8",89,0)
PV1(DATAROOT,HL) ;
"RTN","MHV7B8",90,0)
 N PV1,NAME,DOC
"RTN","MHV7B8",91,0)
 S PV1(0)="PV1"
"RTN","MHV7B8",92,0)
 S PV1(2)="N"         ;Patient class
"RTN","MHV7B8",93,0)
 S DOC=@DATAROOT@("ATTENDING-PHYSICIAN")
"RTN","MHV7B8",94,0)
 D FMTNAME^MHV7BU(DOC,.NAME,.HL,"XCN")
"RTN","MHV7B8",95,0)
 M PV1(7,1)=NAME
"RTN","MHV7B8",96,0)
 Q $$BLDSEG^MHV7U(.PV1,.HL)
"RTN","MHV7B8",97,0)
 ;
"RTN","MHV7B8",98,0)
PD1(DATAROOT,HL) ;
"RTN","MHV7B8",99,0)
 N PD1,NAME,DOC
"RTN","MHV7B8",100,0)
 S PD1(0)="PD1"
"RTN","MHV7B8",101,0)
 S DOC=@DATAROOT@("PRIMARY-CARE-PHYSICIAN")
"RTN","MHV7B8",102,0)
 D FMTNAME^MHV7BU(DOC,.NAME,.HL,"XCN")
"RTN","MHV7B8",103,0)
 M PD1(4,1)=NAME
"RTN","MHV7B8",104,0)
 Q $$BLDSEG^MHV7U(.PD1,.HL)
"RTN","MHV7B8",105,0)
 ;
"RTN","MHV7R4")
0^2^B33959355^n/a
"RTN","MHV7R4",1,0)
MHV7R4 ;WAS/GPM - HL7 RECEIVER FOR SECURE MESSAGING QRY^A19 ; [3/23/08 9:32pm]
"RTN","MHV7R4",2,0)
 ;;1.0;My HealtheVet;**5**;Aug 23, 2005;Build 24
"RTN","MHV7R4",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","MHV7R4",4,0)
 ;
"RTN","MHV7R4",5,0)
 Q
"RTN","MHV7R4",6,0)
 ;
"RTN","MHV7R4",7,0)
QRYA19 ;Process QRY^A19 messages from the MHVSM QRY-A19 Subscriber protocol
"RTN","MHV7R4",8,0)
 ;
"RTN","MHV7R4",9,0)
 ; This routine and subroutines assume that all VistA HL7 environment
"RTN","MHV7R4",10,0)
 ; variables are properly initialized and will produce a fatal error
"RTN","MHV7R4",11,0)
 ; if they are missing.
"RTN","MHV7R4",12,0)
 ;
"RTN","MHV7R4",13,0)
 ;  The message will be checked to see if it is a valid query.
"RTN","MHV7R4",14,0)
 ; If not a negative acknowledgement will be sent.  If the query is an
"RTN","MHV7R4",15,0)
 ; immediate mode or synchronous query, the realtime request manager
"RTN","MHV7R4",16,0)
 ; is called to handle the query.  This means the query will be
"RTN","MHV7R4",17,0)
 ; processed and a response generated immediately.
"RTN","MHV7R4",18,0)
 ; In the future deferred mode queries may be filed in a database for 
"RTN","MHV7R4",19,0)
 ; later processing, or transmission.
"RTN","MHV7R4",20,0)
 ;
"RTN","MHV7R4",21,0)
 ;  Input:
"RTN","MHV7R4",22,0)
 ;          HL7 environment variables
"RTN","MHV7R4",23,0)
 ;
"RTN","MHV7R4",24,0)
 ; Output:
"RTN","MHV7R4",25,0)
 ;          Processed query or negative acknowledgement
"RTN","MHV7R4",26,0)
 ;          If handled real-time the query response is generated
"RTN","MHV7R4",27,0)
 ;
"RTN","MHV7R4",28,0)
 N MSGROOT,QRY,XMT,ERR,RNAME
"RTN","MHV7R4",29,0)
 S (QRY,XMT,ERR)=""
"RTN","MHV7R4",30,0)
 ; Inbound query messages are small enough to be held in a local.
"RTN","MHV7R4",31,0)
 ; The following lines commented out support use of global and are
"RTN","MHV7R4",32,0)
 ; left in case use a global becomes necessary.
"RTN","MHV7R4",33,0)
 ;S MSGROOT="^TMP(""MHV7"",$J)"
"RTN","MHV7R4",34,0)
 ;K @MSGROOT
"RTN","MHV7R4",35,0)
 S MSGROOT="MHV7MSG"
"RTN","MHV7R4",36,0)
 N MHV7MSG
"RTN","MHV7R4",37,0)
 D LOADXMT^MHV7U(.XMT)         ;Load inbound message information
"RTN","MHV7R4",38,0)
 ;
"RTN","MHV7R4",39,0)
 S RNAME="SM "_XMT("MESSAGE TYPE")_"-"_XMT("EVENT TYPE")_" RECEIVER"
"RTN","MHV7R4",40,0)
 D LOG^MHVUL2(RNAME,"BEGIN","S","TRACE")
"RTN","MHV7R4",41,0)
 ;
"RTN","MHV7R4",42,0)
 D LOADMSG^MHV7U(MSGROOT)
"RTN","MHV7R4",43,0)
 D LOG^MHVUL2("LOAD",MSGROOT,"I","DEBUG")
"RTN","MHV7R4",44,0)
 ;
"RTN","MHV7R4",45,0)
 D PARSEMSG^MHV7U(MSGROOT,.HL)
"RTN","MHV7R4",46,0)
 D LOG^MHVUL2("PARSE",MSGROOT,"I","DEBUG")
"RTN","MHV7R4",47,0)
 ;
"RTN","MHV7R4",48,0)
 I '$$VALIDMSG(MSGROOT,.QRY,.XMT,.ERR) D  Q
"RTN","MHV7R4",49,0)
 . D LOG^MHVUL2("MSG CHECK","INVALID^"_ERR,"S","ERROR")
"RTN","MHV7R4",50,0)
 . D XMIT^MHV7T(.QRY,.XMT,ERR,"",.HL)
"RTN","MHV7R4",51,0)
 D LOG^MHVUL2("MSG CHECK","VALID","S","TRACE")
"RTN","MHV7R4",52,0)
 ;
"RTN","MHV7R4",53,0)
 ; Immediate Mode
"RTN","MHV7R4",54,0)
 ; Deferred mode queries are not supported at this time
"RTN","MHV7R4",55,0)
 D REALTIME^MHVRQI(.QRY,.XMT,.HL)
"RTN","MHV7R4",56,0)
 ;
"RTN","MHV7R4",57,0)
 D LOG^MHVUL2(RNAME,"END","S","TRACE")
"RTN","MHV7R4",58,0)
 D RESET^MHVUL2          ;Clean up TMP used by logging
"RTN","MHV7R4",59,0)
 ;K @MSGROOT
"RTN","MHV7R4",60,0)
 ;
"RTN","MHV7R4",61,0)
 Q
"RTN","MHV7R4",62,0)
 ;
"RTN","MHV7R4",63,0)
VALIDMSG(MSGROOT,QRY,XMT,ERR) ;Validate message
"RTN","MHV7R4",64,0)
 ;
"RTN","MHV7R4",65,0)
 ;  Messages handled: QRY^A19 - Demographics
"RTN","MHV7R4",66,0)
 ;
"RTN","MHV7R4",67,0)
 ;  Old style query messages must contain QRD and QRF segments.
"RTN","MHV7R4",68,0)
 ;  Any additional segments are ignored.
"RTN","MHV7R4",69,0)
 ;
"RTN","MHV7R4",70,0)
 ;  The following sequences are required
"RTN","MHV7R4",71,0)
 ;     QRD(1)* - Query Date/Time
"RTN","MHV7R4",72,0)
 ;     QRD(2)* - Query Format Code
"RTN","MHV7R4",73,0)
 ;     QRD(3)  - Query Priority
"RTN","MHV7R4",74,0)
 ;     QRD(4)  - Query ID
"RTN","MHV7R4",75,0)
 ;     QRD(8)  - Who Subject Filter
"RTN","MHV7R4",76,0)
 ;     QRD(9)* - What Subject Filter
"RTN","MHV7R4",77,0)
 ;     QRD(10) - What Dept. Data Code
"RTN","MHV7R4",78,0)
 ;     QRF(1)* - Where Subject Filter
"RTN","MHV7R4",79,0)
 ;               * required by HL7 standard but not used by MHV
"RTN","MHV7R4",80,0)
 ;                 Name fields in Who Subject Filter also not used
"RTN","MHV7R4",81,0)
 ;
"RTN","MHV7R4",82,0)
 ;  The following sequences are optional
"RTN","MHV7R4",83,0)
 ;     QRD(7) - Quantity Limited Request
"RTN","MHV7R4",84,0)
 ;     QRF(2) - When Data Start Date/Time
"RTN","MHV7R4",85,0)
 ;     QRF(3) - When Data End Date/Time
"RTN","MHV7R4",86,0)
 ;
"RTN","MHV7R4",87,0)
 ;  Input:
"RTN","MHV7R4",88,0)
 ;    MSGROOT - Root of array holding message
"RTN","MHV7R4",89,0)
 ;        XMT - Transmission parameters
"RTN","MHV7R4",90,0)
 ;
"RTN","MHV7R4",91,0)
 ; Output:
"RTN","MHV7R4",92,0)
 ;        QRY - Query Array
"RTN","MHV7R4",93,0)
 ;        XMT - Transmission parameters
"RTN","MHV7R4",94,0)
 ;        ERR - segment^sequence^field^code^ACK type^error text
"RTN","MHV7R4",95,0)
 ;
"RTN","MHV7R4",96,0)
 N MSH,QRD,QRF,ICN,DFN,SSN,I,ID,REQTYPE,PRI,REQID,TYPE,FROMDT,TODT,SEGTYPE,CNT,FAMILY,GIVEN,MIDDLE,SUFFIX,FORMAT,WHAT,WHERE,OCNT,QTY,QDATE,UNIT
"RTN","MHV7R4",97,0)
 K QRY,ERR
"RTN","MHV7R4",98,0)
 S ERR=""
"RTN","MHV7R4",99,0)
 ;
"RTN","MHV7R4",100,0)
 ; Set up basics for responding to message.
"RTN","MHV7R4",101,0)
 ;-----------------------------------------
"RTN","MHV7R4",102,0)
 S QRY("MID")=XMT("MID")        ;Message ID
"RTN","MHV7R4",103,0)
 S QRY("QRD")=""
"RTN","MHV7R4",104,0)
 S QRY("QRF")=""
"RTN","MHV7R4",105,0)
 ;
"RTN","MHV7R4",106,0)
 ; Validate message is a well-formed old style query message.
"RTN","MHV7R4",107,0)
 ;-----------------------------------------------------------
"RTN","MHV7R4",108,0)
 ; Must have MSH first followed by QRD, and QRF in any order.
"RTN","MHV7R4",109,0)
 ; Any other segments are ignored.
"RTN","MHV7R4",110,0)
 ;
"RTN","MHV7R4",111,0)
 I $G(@MSGROOT@(1,0))="MSH" M MSH=@MSGROOT@(1)
"RTN","MHV7R4",112,0)
 E  S ERR="MSH^1^^100^AE^Missing MSH segment" Q 0
"RTN","MHV7R4",113,0)
 ;
"RTN","MHV7R4",114,0)
 S CNT=2,OCNT=0
"RTN","MHV7R4",115,0)
 F  Q:'$D(@MSGROOT@(CNT))  D  S CNT=CNT+1
"RTN","MHV7R4",116,0)
 . S SEGTYPE=$G(@MSGROOT@(CNT,0))
"RTN","MHV7R4",117,0)
 . I SEGTYPE="QRD" M QRD=@MSGROOT@(CNT),QRY("QRD")=QRD Q
"RTN","MHV7R4",118,0)
 . I SEGTYPE="QRF" M QRF=@MSGROOT@(CNT),QRY("QRF")=QRF Q
"RTN","MHV7R4",119,0)
 . Q
"RTN","MHV7R4",120,0)
 ;
"RTN","MHV7R4",121,0)
 I '$D(QRD) S ERR="QRD^1^^100^AE^Missing QRD segment" Q 0
"RTN","MHV7R4",122,0)
 I '$D(QRF) S ERR="QRF^1^^100^AE^Missing QRF segment" Q 0
"RTN","MHV7R4",123,0)
 ;
"RTN","MHV7R4",124,0)
 ; Validate required fields and query parameters
"RTN","MHV7R4",125,0)
 ;------------------------------------------------------
"RTN","MHV7R4",126,0)
 S QDATE=$G(QRD(1))             ;Query Date/Time
"RTN","MHV7R4",127,0)
 S FORMAT=$G(QRD(2))            ;Query Format Code
"RTN","MHV7R4",128,0)
 S PRI=$G(QRD(3))               ;Query Priority
"RTN","MHV7R4",129,0)
 S REQID=$G(QRD(4))             ;Query ID - Request ID
"RTN","MHV7R4",130,0)
 S QTY=$G(QRD(7,1,1))           ;Quantity Limited Request
"RTN","MHV7R4",131,0)
 S UNIT=$G(QRD(7,1,2))          ;Quantity Units
"RTN","MHV7R4",132,0)
 S WHAT=$G(QRD(9,1,1))          ;What Subject Filter
"RTN","MHV7R4",133,0)
 S REQTYPE=$G(QRD(10))          ;What Dept. Data Code - Request Type
"RTN","MHV7R4",134,0)
 S WHERE=$G(QRF(1))             ;Where Subject Filter
"RTN","MHV7R4",135,0)
 S FROMDT=$G(QRF(2))            ;When Data Start Date/Time - From Date
"RTN","MHV7R4",136,0)
 S TODT=$G(QRF(3))              ;When Data End Date/Time - To Date
"RTN","MHV7R4",137,0)
 ;
"RTN","MHV7R4",138,0)
 I QDATE="" S ERR="QRD^1^1^101^AE^Missing Query Date/Time" Q 0
"RTN","MHV7R4",139,0)
 I '$$VALIDDT^MHV7RU(.QDATE) S ERR="QRD^1^1^102^AE^Invalid Query Date/Time" Q 0
"RTN","MHV7R4",140,0)
 ;
"RTN","MHV7R4",141,0)
 I FORMAT="" S ERR="QRD^1^2^101^AE^Missing Query Format Code" Q 0
"RTN","MHV7R4",142,0)
 I FORMAT'="R" S ERR="QRD^1^2^102^AE^Invalid Query Format Code" Q 0
"RTN","MHV7R4",143,0)
 ;
"RTN","MHV7R4",144,0)
 I PRI="" S ERR="QRD^1^3^101^AE^Missing Query Priority" Q 0
"RTN","MHV7R4",145,0)
 I ",D,I,"'[(","_PRI_",") S ERR="QRD^1^3^102^AE^Invalid Query Priority" Q 0
"RTN","MHV7R4",146,0)
 S QRY("PRI")=PRI
"RTN","MHV7R4",147,0)
 ;
"RTN","MHV7R4",148,0)
 I REQID="" S ERR="QRD^1^4^101^AE^Missing Request ID" Q 0
"RTN","MHV7R4",149,0)
 S QRY("REQID")=REQID
"RTN","MHV7R4",150,0)
 ;
"RTN","MHV7R4",151,0)
 I QTY'?0.N S ERR="QRD^1^7^102^AE^Invalid Quantity" Q 0
"RTN","MHV7R4",152,0)
 S QRY("QTY")=+QTY
"RTN","MHV7R4",153,0)
 S XMT("MAX SIZE")=+QTY
"RTN","MHV7R4",154,0)
 ;
"RTN","MHV7R4",155,0)
 I QTY,UNIT'="CH" S ERR="QRD^1^7^102^AE^Invalid Units" Q 0
"RTN","MHV7R4",156,0)
 ;
"RTN","MHV7R4",157,0)
 I WHAT="" S ERR="QRD^1^9^101^AE^Missing What Subject Filter" Q 0
"RTN","MHV7R4",158,0)
 ;
"RTN","MHV7R4",159,0)
 I REQTYPE="" S ERR="QRD^1^10^101^AE^Missing Request Type" Q 0
"RTN","MHV7R4",160,0)
 I '$$VALRTYPE^MHV7RU(REQTYPE,.QRY,.ERR) S ERR="QRD^1^10^"_ERR Q 0
"RTN","MHV7R4",161,0)
 ;
"RTN","MHV7R4",162,0)
 I '$$VALIDWHO^MHV7RUS(.QRD,.QRY,.ERR) Q 0
"RTN","MHV7R4",163,0)
 ;
"RTN","MHV7R4",164,0)
 I WHERE="" S ERR="QRF^1^1^101^AE^Missing Where Subject Filter" Q 0
"RTN","MHV7R4",165,0)
 ;
"RTN","MHV7R4",166,0)
 I '$$VALIDDT^MHV7RU(.FROMDT) S ERR="QRF^1^2^102^AE^Invalid From Date" Q 0
"RTN","MHV7R4",167,0)
 S QRY("FROM")=FROMDT
"RTN","MHV7R4",168,0)
 I '$$VALIDDT^MHV7RU(.TODT) S ERR="QRF^1^3^102^AE^Invalid To Date" Q 0
"RTN","MHV7R4",169,0)
 I TODT'="",TODT<FROMDT S ERR="QRF^1^3^102^AE^To Date precedes From Date" Q 0
"RTN","MHV7R4",170,0)
 S QRY("TO")=TODT
"RTN","MHV7R4",171,0)
 ;
"RTN","MHV7R4",172,0)
 ; Get HL7 delimiters to be used in the response message
"RTN","MHV7R4",173,0)
 ; Some extractors call APIs that require delimiters to be passed
"RTN","MHV7R4",174,0)
 S QRY("DELIM")=XMT("DELIM")
"RTN","MHV7R4",175,0)
 I XMT("MODE")="A" S QRY("DELIM")=$$DELIM^MHV7U(XMT("PROTOCOL"))
"RTN","MHV7R4",176,0)
 ;
"RTN","MHV7R4",177,0)
 Q 1
"RTN","MHV7R4",178,0)
 ;
"RTN","MHVU2")
0^5^B16546858^B17646805
"RTN","MHVU2",1,0)
MHVU2 ;WAS/GPM - UTILITIES  ; 7/25/05 3:48pm [4/30/08 6:29pm]
"RTN","MHVU2",2,0)
 ;;1.0;My HealtheVet;**2,5**;Aug 23, 2005;Build 24
"RTN","MHVU2",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","MHVU2",4,0)
 ;
"RTN","MHVU2",5,0)
 Q
"RTN","MHVU2",6,0)
 ;
"RTN","MHVU2",7,0)
TOGGLE(EXTRACT,VAL,ERR) ; Enable or disable the EXTRACT passed by setting the
"RTN","MHVU2",8,0)
 ; value of the BLOCKED field (.03) in MHV REQUEST TYPE file (2275.3)
"RTN","MHVU2",9,0)
 ; to NO or YES respectively.
"RTN","MHVU2",10,0)
 ;
"RTN","MHVU2",11,0)
 ;  Input: EXTRACT - String name of the extract
"RTN","MHVU2",12,0)
 ;                   Example: "CHEMISTRY"
"RTN","MHVU2",13,0)
 ;             VAL - "ENABLE" or "DISABLE"
"RTN","MHVU2",14,0)
 ;
"RTN","MHVU2",15,0)
 ;  Output:   ERR - Error Text
"RTN","MHVU2",16,0)
 ;
"RTN","MHVU2",17,0)
 N IEN,IENS,FDA
"RTN","MHVU2",18,0)
 K ERR
"RTN","MHVU2",19,0)
 S ERR=""
"RTN","MHVU2",20,0)
 I EXTRACT="" S ERR="EXTRACT PARAMETER NULL" Q 0
"RTN","MHVU2",21,0)
 S VAL=$S(VAL="ENABLE":0,VAL="DISABLE":1,1:"")
"RTN","MHVU2",22,0)
 I VAL="" S ERR="VALUE PARAMETER INVALID"_VAL Q 0
"RTN","MHVU2",23,0)
 ;
"RTN","MHVU2",24,0)
 S IEN=$$FIND1^DIC(2275.3,"","KX",EXTRACT,"B","","ERR")
"RTN","MHVU2",25,0)
 I 'IEN D  Q 0
"RTN","MHVU2",26,0)
 . I '$G(ERR("DIERR")) S ERR("DIERR",1,"TEXT",1)="NOT FOUND"
"RTN","MHVU2",27,0)
 . S ERR=$G(ERR("DIERR",1))_"^"_$G(ERR("DIERR",1,"TEXT",1))
"RTN","MHVU2",28,0)
 . Q
"RTN","MHVU2",29,0)
 ;
"RTN","MHVU2",30,0)
 K ERR
"RTN","MHVU2",31,0)
 S ERR=""
"RTN","MHVU2",32,0)
 S IENS=IEN_","
"RTN","MHVU2",33,0)
 S FDA(2275.3,IENS,.03)=VAL
"RTN","MHVU2",34,0)
 D UPDATE^DIE("","FDA","","ERR")
"RTN","MHVU2",35,0)
 I $G(ERR("DIERR")) S ERR=$G(ERR("DIERR",1))_"^"_$G(ERR("DIERR",1,"TEXT",1)) Q 0
"RTN","MHVU2",36,0)
 ;
"RTN","MHVU2",37,0)
 Q 1
"RTN","MHVU2",38,0)
 ;
"RTN","MHVU2",39,0)
UPDMAP(FIELDS,NEW,ERR) ; Update entries in the MHV RESPONSE MAP file (2275.4)
"RTN","MHVU2",40,0)
 ;
"RTN","MHVU2",41,0)
 ;  Input: FIELDS - Array of Field Values
"RTN","MHVU2",42,0)
 ;              FIELDS("SUBSCRIBER") - Name of subscriber protocol
"RTN","MHVU2",43,0)
 ;              FIELDS("PROTOCOL") - Name of event driver protocol
"RTN","MHVU2",44,0)
 ;              FIELDS("BUILDER") - Name of response builder routine
"RTN","MHVU2",45,0)
 ;              FIELDS("SEGMENT") - Name of boundary segment
"RTN","MHVU2",46,0)
 ;            NEW - 0 to edit, 1 to create new entry
"RTN","MHVU2",47,0)
 ;
"RTN","MHVU2",48,0)
 ;  Output:   ERR - Error Text
"RTN","MHVU2",49,0)
 ;
"RTN","MHVU2",50,0)
 N IEN,NAME,PROTOCOL,BUILDER,SEGMENT,FDA
"RTN","MHVU2",51,0)
 K ERR
"RTN","MHVU2",52,0)
 S ERR=""
"RTN","MHVU2",53,0)
 S NAME=$G(FIELDS("SUBSCRIBER"))
"RTN","MHVU2",54,0)
 S PROTOCOL=$G(FIELDS("PROTOCOL"))
"RTN","MHVU2",55,0)
 S BUILDER=$G(FIELDS("BUILDER"))
"RTN","MHVU2",56,0)
 S SEGMENT=$G(FIELDS("SEGMENT"))
"RTN","MHVU2",57,0)
 I NAME="" S ERR="Missing Subscriber Protocol" Q 0
"RTN","MHVU2",58,0)
 I PROTOCOL="" S ERR="Missing Response Protocol" Q 0
"RTN","MHVU2",59,0)
 I BUILDER="" S ERR="Missing Builder Routine" Q 0
"RTN","MHVU2",60,0)
 ;
"RTN","MHVU2",61,0)
 ; Check if entry exists, use it if it does
"RTN","MHVU2",62,0)
 S IEN=$O(^MHV(2275.4,"B",NAME,0))
"RTN","MHVU2",63,0)
 I NEW,'IEN S IEN="+1"
"RTN","MHVU2",64,0)
 I 'NEW,'IEN S ERR="Subscriber Not Defined" Q 0
"RTN","MHVU2",65,0)
 S IEN=IEN_","
"RTN","MHVU2",66,0)
 ;
"RTN","MHVU2",67,0)
 S FDA(2275.4,IEN,.01)=NAME
"RTN","MHVU2",68,0)
 S FDA(2275.4,IEN,.02)=PROTOCOL
"RTN","MHVU2",69,0)
 S FDA(2275.4,IEN,.03)=BUILDER
"RTN","MHVU2",70,0)
 S FDA(2275.4,IEN,.04)=SEGMENT
"RTN","MHVU2",71,0)
 D UPDATE^DIE("E","FDA","","ERR")
"RTN","MHVU2",72,0)
 I $D(ERR("DIERR")) S ERR=$G(ERR("DIERR",1,"TEXT",1)) Q 0
"RTN","MHVU2",73,0)
 Q 1
"RTN","MHVU2",74,0)
 ;
"RTN","MHVU2",75,0)
UPDREQ(FIELDS,NEW,ERR) ; Update entries in the MHV REQUEST TYPE file (2275.3)
"RTN","MHVU2",76,0)
 ;
"RTN","MHVU2",77,0)
 ;  Input: FIELDS - Array of Field Values
"RTN","MHVU2",78,0)
 ;              FIELDS("REQUEST TYPE") - Request Type
"RTN","MHVU2",79,0)
 ;              FIELDS("NUMBER") - Internal Request Number
"RTN","MHVU2",80,0)
 ;              FIELDS("BLOCK") - 0,1 Disable Request
"RTN","MHVU2",81,0)
 ;              FIELDS("REALTIME") - Enable Synchronous Response
"RTN","MHVU2",82,0)
 ;              FIELDS("EXECUTE") - Name of execute\extract routine
"RTN","MHVU2",83,0)
 ;              FIELDS("BUILDER") - Name of response builder routine
"RTN","MHVU2",84,0)
 ;              FIELDS("DATATYPE") - External Name for Request Type
"RTN","MHVU2",85,0)
 ;              FIELDS("DESCRIPTION") - WP formatted array
"RTN","MHVU2",86,0)
 ;            NEW - 0 to edit, 1 to create new entry
"RTN","MHVU2",87,0)
 ;
"RTN","MHVU2",88,0)
 ;  Output:   ERR - Error Text
"RTN","MHVU2",89,0)
 ;
"RTN","MHVU2",90,0)
 N IEN,NAME,NUMBER,BLOCK,REALTIME,EXECUTE,BUILDER,DATATYPE,DESC,FDA
"RTN","MHVU2",91,0)
 K ERR
"RTN","MHVU2",92,0)
 S ERR=""
"RTN","MHVU2",93,0)
 S NAME=$G(FIELDS("REQUEST TYPE"))
"RTN","MHVU2",94,0)
 S NUMBER=$G(FIELDS("NUMBER"))
"RTN","MHVU2",95,0)
 S BLOCK=$G(FIELDS("BLOCK"))
"RTN","MHVU2",96,0)
 S REALTIME=$G(FIELDS("REALTIME"))
"RTN","MHVU2",97,0)
 S EXECUTE=$G(FIELDS("EXECUTE"))
"RTN","MHVU2",98,0)
 S BUILDER=$G(FIELDS("BUILDER"))
"RTN","MHVU2",99,0)
 S DATATYPE=$G(FIELDS("DATATYPE"))
"RTN","MHVU2",100,0)
 M DESC=FIELDS("DESCRIPTION")
"RTN","MHVU2",101,0)
 I NAME="" S ERR="Missing Request Type" Q 0
"RTN","MHVU2",102,0)
 I NEW D  Q:ERR'="" 0
"RTN","MHVU2",103,0)
 . I NUMBER="" S ERR="Missing Type Number" Q
"RTN","MHVU2",104,0)
 . I BLOCK="" S ERR="Missing Blocked Setting" Q
"RTN","MHVU2",105,0)
 . I REALTIME="" S ERR="Missing RealTime Setting" Q
"RTN","MHVU2",106,0)
 . I EXECUTE="" S ERR="Missing Execute Routine" Q
"RTN","MHVU2",107,0)
 . I DATATYPE="" S ERR="Missing Data Type" Q
"RTN","MHVU2",108,0)
 . I '$D(DESC) S ERR="Missing Description" Q
"RTN","MHVU2",109,0)
 . Q
"RTN","MHVU2",110,0)
 ;
"RTN","MHVU2",111,0)
 ; Check if entry exists, use it if it does
"RTN","MHVU2",112,0)
 S IEN=$O(^MHV(2275.3,"B",NAME,0))
"RTN","MHVU2",113,0)
 I NEW,'IEN S IEN="+1"
"RTN","MHVU2",114,0)
 I 'NEW,'IEN S ERR="Request Type Not Defined" Q 0
"RTN","MHVU2",115,0)
 I DATATYPE'="",$D(^MHV(2275.3,IEN,1,"B",DATATYPE)) S DATATYPE=""
"RTN","MHVU2",116,0)
 S IEN=IEN_","
"RTN","MHVU2",117,0)
 ;
"RTN","MHVU2",118,0)
 S FDA(2275.3,IEN,.01)=NAME
"RTN","MHVU2",119,0)
 S:NUMBER'="" FDA(2275.3,IEN,.02)=NUMBER
"RTN","MHVU2",120,0)
 S:BLOCK'="" FDA(2275.3,IEN,.03)=BLOCK
"RTN","MHVU2",121,0)
 S:REALTIME'="" FDA(2275.3,IEN,.04)=REALTIME
"RTN","MHVU2",122,0)
 S:EXECUTE'="" FDA(2275.3,IEN,.05)=EXECUTE
"RTN","MHVU2",123,0)
 S:BUILDER'="" FDA(2275.3,IEN,.06)=BUILDER
"RTN","MHVU2",124,0)
 S:DATATYPE'="" FDA(2275.31,"+2,"_IEN,.01)=DATATYPE
"RTN","MHVU2",125,0)
 S:$D(DESC) FDA(2275.3,IEN,2)="DESC"
"RTN","MHVU2",126,0)
 D UPDATE^DIE("E","FDA","","ERR")
"RTN","MHVU2",127,0)
 I $D(ERR("DIERR")) S ERR=$G(ERR("DIERR",1,"TEXT",1)) Q 0
"RTN","MHVU2",128,0)
 Q 1
"RTN","MHVU2",129,0)
 ;
"RTN","MHVXDEMS")
0^4^B6081300^n/a
"RTN","MHVXDEMS",1,0)
MHVXDEMS ;WAS/GPM - Secure Messaging Demographics extract ; 12/1/05 6:58pm [3/23/08 8:17pm]
"RTN","MHVXDEMS",2,0)
 ;;1.0;My HealtheVet;**5**;Aug 23, 2005;Build 24
"RTN","MHVXDEMS",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","MHVXDEMS",4,0)
 ;
"RTN","MHVXDEMS",5,0)
 Q
"RTN","MHVXDEMS",6,0)
 ;
"RTN","MHVXDEMS",7,0)
EXTRACT(QRY,ERR,DATAROOT) ; Entry point to extract demographics data
"RTN","MHVXDEMS",8,0)
 ; Retrieves requested demographics data and returns it in DATAROOT
"RTN","MHVXDEMS",9,0)
 ;
"RTN","MHVXDEMS",10,0)
 ;  Integration Agreements:
"RTN","MHVXDEMS",11,0)
 ;                       10061 : DEM^VADPT
"RTN","MHVXDEMS",12,0)
 ;                             : ADD^VADPT
"RTN","MHVXDEMS",13,0)
 ;                             : ELIG^VADPT
"RTN","MHVXDEMS",14,0)
 ;                             : OPD^VADPT
"RTN","MHVXDEMS",15,0)
 ;                             : OAD^VADPT
"RTN","MHVXDEMS",16,0)
 ;                             : KVAR^VADPT
"RTN","MHVXDEMS",17,0)
 ;                        1916 : PRPT^SCAPMC
"RTN","MHVXDEMS",18,0)
 ;                       10035 : 2,.1041
"RTN","MHVXDEMS",19,0)
 ;                        4459 : 2,.133
"RTN","MHVXDEMS",20,0)
 ;
"RTN","MHVXDEMS",21,0)
 ;  Input:
"RTN","MHVXDEMS",22,0)
 ;       QRY - Query array
"RTN","MHVXDEMS",23,0)
 ;          QRY(DFN) - (required) Pointer to PATIENT (#2) file
"RTN","MHVXDEMS",24,0)
 ;  DATAROOT - Root of array to hold extract data
"RTN","MHVXDEMS",25,0)
 ;
"RTN","MHVXDEMS",26,0)
 ;  Output:
"RTN","MHVXDEMS",27,0)
 ;  DATAROOT - Populated data array
"RTN","MHVXDEMS",28,0)
 ;       ERR - Errors during extraction
"RTN","MHVXDEMS",29,0)
 ;
"RTN","MHVXDEMS",30,0)
 N DFN,U,X,MHVPCP,MHVERR,EXTIME,VADM,VAPA,VAPD,VAOA
"RTN","MHVXDEMS",31,0)
 D LOG^MHVUL2("MHVXDEMS","BEGIN","S","TRACE")
"RTN","MHVXDEMS",32,0)
 S U="^"
"RTN","MHVXDEMS",33,0)
 S ERR=0
"RTN","MHVXDEMS",34,0)
 S EXTIME=$$NOW^XLFDT
"RTN","MHVXDEMS",35,0)
 K @DATAROOT
"RTN","MHVXDEMS",36,0)
 S DFN=$G(QRY("DFN"))
"RTN","MHVXDEMS",37,0)
 ;
"RTN","MHVXDEMS",38,0)
 K VADM
"RTN","MHVXDEMS",39,0)
 D DEM^VADPT
"RTN","MHVXDEMS",40,0)
 S @DATAROOT@("DOB")=$P($G(VADM(3)),U)
"RTN","MHVXDEMS",41,0)
 S @DATAROOT@("SEX")=$P($G(VADM(5)),U)
"RTN","MHVXDEMS",42,0)
 S @DATAROOT@("MARITAL-STATUS")=$P($G(VADM(10)),U,2)
"RTN","MHVXDEMS",43,0)
 S @DATAROOT@("RELIGION")=$P($G(VADM(9)),U,2)
"RTN","MHVXDEMS",44,0)
 S @DATAROOT@("DOD")=$P($G(VADM(6)),U)
"RTN","MHVXDEMS",45,0)
 ;
"RTN","MHVXDEMS",46,0)
 K VAPA
"RTN","MHVXDEMS",47,0)
 D ADD^VADPT
"RTN","MHVXDEMS",48,0)
 S @DATAROOT@("ADD1")=$G(VAPA(1))
"RTN","MHVXDEMS",49,0)
 S @DATAROOT@("ADD2")=$G(VAPA(2))
"RTN","MHVXDEMS",50,0)
 S @DATAROOT@("ADD3")=$G(VAPA(3))
"RTN","MHVXDEMS",51,0)
 S @DATAROOT@("CITY")=$G(VAPA(4))
"RTN","MHVXDEMS",52,0)
 S @DATAROOT@("STATE")=$P($G(VAPA(5)),U,2)
"RTN","MHVXDEMS",53,0)
 S @DATAROOT@("ZIP")=$P($G(VAPA(11)),U)
"RTN","MHVXDEMS",54,0)
 S @DATAROOT@("COUNTY")=$P($G(VAPA(7)),U,2)
"RTN","MHVXDEMS",55,0)
 S @DATAROOT@("PHONE")=$G(VAPA(8))
"RTN","MHVXDEMS",56,0)
 ;
"RTN","MHVXDEMS",57,0)
 K VAPD
"RTN","MHVXDEMS",58,0)
 D OPD^VADPT
"RTN","MHVXDEMS",59,0)
 S @DATAROOT@("BIRTH-CITY")=$G(VAPD(1))
"RTN","MHVXDEMS",60,0)
 S @DATAROOT@("BIRTH-STATE")=$P($G(VAPD(2)),U,2)
"RTN","MHVXDEMS",61,0)
 ;
"RTN","MHVXDEMS",62,0)
 K VAOA
"RTN","MHVXDEMS",63,0)
 S VAOA("A")=5
"RTN","MHVXDEMS",64,0)
 D OAD^VADPT
"RTN","MHVXDEMS",65,0)
 S @DATAROOT@("BUS-PHONE")=$G(VAOA(8))
"RTN","MHVXDEMS",66,0)
 ;
"RTN","MHVXDEMS",67,0)
 S @DATAROOT@("E-MAIL")=$$GET1^DIQ(2,DFN_",",.133)
"RTN","MHVXDEMS",68,0)
 S @DATAROOT@("ATTENDING-PHYSICIAN")=$$GET1^DIQ(2,DFN_",",.1041)
"RTN","MHVXDEMS",69,0)
 ;
"RTN","MHVXDEMS",70,0)
 S X=""
"RTN","MHVXDEMS",71,0)
 I $$PRPT^SCAPMC(DFN,,,,,,.MHVPCP,.MHVERR) I MHVPCP'="" S X=$P($G(@MHVPCP@(1)),U,2) K @MHVPCP
"RTN","MHVXDEMS",72,0)
 I $G(MHVERR)'="" K @MHVERR
"RTN","MHVXDEMS",73,0)
 S @DATAROOT@("PRIMARY-CARE-PHYSICIAN")=X
"RTN","MHVXDEMS",74,0)
 ;
"RTN","MHVXDEMS",75,0)
 D KVAR^VADPT
"RTN","MHVXDEMS",76,0)
 S @DATAROOT=1_"^"_EXTIME
"RTN","MHVXDEMS",77,0)
 D LOG^MHVUL2("MHVXDEMS","END","S","TRACE")
"RTN","MHVXDEMS",78,0)
 Q
"RTN","MHVXDEMS",79,0)
 ;
"VER")
8.0^22.0
"BLD",7024,6)
^3
**END**
**END**
