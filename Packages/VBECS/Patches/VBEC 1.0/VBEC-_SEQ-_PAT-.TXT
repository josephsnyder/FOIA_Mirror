
=============================================================================
Run Date: JUN 08, 2009                     Designation: VBEC 1
Package : VBEC - VBECS                        Priority: Mandatory
Version : 1                                     Status: Released
                  Compliance Date: DEC 04, 2009
=============================================================================


Subject: VBECS PACKAGE RELEASE

Category: 
  - Routine
  - Data Dictionary
  - Enhancement (Mandatory)

Description:
============

 VBEC*1*0 is being exported as part of the VBECS_BUNDLE_1.KID package 
 release. The installation of this bundle will be controlled by phase 
 release.  An Implementation Manager will be assigned to your site and 
 will contact your POC for VBECS and will provide your site with the 
 location of the KIDS Host Files prior to your scheduled installation date 
 Installation Sequence.  The VBECS BUNDLE is a host file that consists of 
 both VBEC*1*0 and LR*5.2*325.  Installation of the VBECS BUNDLE will 
 automatically install both VBEC*1*0 and LR*5.2*325
 =====================
  
 I. OVERVIEW
 The VistA Blood Establishment Computer Software (VBECS) shall facilitate 
 ongoing compliance with Food and Drug Administration (FDA) standards for 
 medical devices and enhance the Department of Veterans Affairs (VA) 
 Veterans Health Administration's (VHA) ability to deliver quality 
 services to meet the needs of the user community. VBECS is considered an 
 encapsulated medical device and therefore does not communicate directly 
 with other VistA applications.
  
 Two new namespaces are being introduced into the VistA enterprise with 
 the release of VBECS. The first, gov.va.med.vbecs, represents the Blood 
 Bank medical device software. The second, VBEC, represents the VBECS 
 Application Interfacing Support software. The VBEC namespace, created in 
 the VBEC 1.0 KIDS build, will be added to the Package file in VistA and 
 is used to identify the M software and files that support interfacing 
 other VistA applications with the Blood Bank medical device. This 
 software is not released as part of the Blood Bank medical device.
  
 II. FUNCTIONAL OVERVIEW
 The reengineered Blood Bank system uses VistALink and Health Level Seven 
 (HL7) messaging for data exchange with a client-server mode application 
 interfacing architecture through M Application Programmer Interfaces 
 (APIs), VistA Remote Procedure Calls (RPCs), and HL7 interfaces released 
 in the VBEC 1.0 KIDS build.
  
 This software will provide a transparent database transition through the 
 use of M APIs, RPCs, and HL7 interfaces. The APIs released in this build 
 will allow other VistA applications to continue the retrieval of Blood 
 Bank data stored in the Blood Bank system. The RPCs will allow the Blood 
 Bank system to continue to retrieve data from other VistA applications. 
 The HL7 interfaces will allow the exchange of data between the Blood Bank 
 system and other VistA applications.
  
 III. TECHNICAL COMPONENTS
 This section lists the components of the VBECS, and LAB SERVICES 
 installed in VistA by the VBEC BUNDLE 1.0 Multi Package KIDS build that 
 supports VBECS.
  
  
 MAIL GROUP:
 ===========
  VBECS INTERFACE ADMIN - Receives alert mail messages when problems  
 arise with VBECS Application Interfacing. The users added to this  group 
 would be Lab/Blood Bank supervisors and/or IRM responsible for  managing 
 the VBECS package and interfaces.
  
 ROUTINES:
 =========
 VBECA1
 VBECA1A
 VBECA1B
 VBECA1B1
 VBECA3
 VBECA3A
 VBECA3B
 VBECA3C
 VBECA4
 VBECA5A
 VBECA5B
 VBECA6
 VBECA7
 VBECA7A
 VBECA7A1
 VBECA7B
 VBECENV
 VBECHLRT
 VBECLU
 VBECLU0
 VBECLU3
 VBECPOST
 VBECRL
 VBECRPC
 VBECRPC1
 VBECRPCA
 VBECRPCB
 VBECRPCC
 VBECRPCD
 VBECRPCE
 VBECRPCH
 VBECRPCM
 VBECRPCP
 VBECRPCW
 VBECVLC
  
  
 OPTION:
 =======
  VBECS VISTALINK CONTEXT - (B)roker type option used by VistALink to
  authenticate users. All Blood Bank users must have this option
  assigned as a Secondary Menu Option.
  
  
 PROTOCOL:
 =========
  VBECS ADT-AO8 CLIENT - This protocol is used to deliver HL7 messages
  from VistA to VBECS via the VBECSPTU logical link.
  
  VBECS ADT-A08 ROUTER - This protocol is used to receive an HL7 message
  from the VAFC ADT-A08 SERVER protocol and executes routing logic to
  determine whether the message is to be forwarded to VBECS. VBECS
  receives only messages that contain changes to various patient
  demographic data.
  
  VBECS ADT-AO8 SERVER - This event driver protocol is triggered by the
  
  VBECS ADT-A40 CLIENT - This protocol is used to deliver the HL7
  message from VistA to VBECS via the VBECSPTM logical link.
  
  VBECS ADT-A40 SERVER - This event driver protocol is triggered by the
  
  
  VBECS OMG CLIENT - This is the subscriber protocol to the VBECS OMG
  SERVER protocol that receives the HL7 message from VBECS providing
  order updates to the original order message.
  
  VBECS OMG SERVER - This protocol is triggered when an HL7 message from
  VBECS is received by the HL7 package.
  
 HL7 APPLICATION PARAMETER:
 ==========================
  VBECS - This HL7 Application represents the VBECS side of the VBECS/CPRS 
 interface.
  
  VBECS ADT - This HL7 Application represents the receiving application
  of the Patient Update and Patient Merge router protocols.
  
  VBECS TRIGGER - This HL7 Application represents the VBECS side of the
  Patient Update and Patient Merge interfaces.
  
 HL LOGICAL LINK:
 ================
  VBECS-OERR - Used to transmit HL7 messages from VBECS to CPRS.
  
  VBECSPTM - Used to transmit HL7 messages from VistA to VBECS when a
  patient merge event occurs.
  
  VBECSPTU - Used to transmit HL7 messages from VistA to VBECS when a
  patient update event occurs.
  
 PARAMETER DEFINITION:
 =====================
  VBECS VISTALINK - Parameter definition used to identify all VBECS 
 Parameters.
  
 PARAMETERS:
 ===========
  LISTENER IP ADDRESS - Stores the value of the Blood Bank medical
  device server where the VistALink listener is installed.
  
  LISTENER PORT NUMBER - Stores the value of the port number where Blood
  Bank medical device VistALink listener is listening.
  
  These Parameters are used by M APIs to build the XML messages used by 
 VistALink.
  VBECS Blood Products
  VBECS DSS Extract
  VBECS Order Entry
  VBECS Patient ABID
  VBECS Patient ABO_RH
  VBECS Patient Available Units
  VBECS Patient Report
  VBECS Patient TRRX
  VBECS Patient Transfusion History
  VBECS Update Workload Event
  VBECS Workload
  
 REMOTE PROCEDURE:
 =================
  VBECS ACCESSION AREA LOOKUP
  VBECS BLOOD BANK USER LOOKUP
  VBECS DIVISION LOOKUP
  VBECS DSS EXTRACT
  VBECS HCPCS CODES LOOKUP
  VBECS HOSPITAL LOCATION LOOKUP
  VBECS LAB ACCESSION UID LOOKUP
  VBECS LAB ORDER LOOKUP BY UID
  VBECS LAB TEST RESULTS LOOKUP
  VBECS LABORATORY TEST LOOKUP
  VBECS MED PROFILE LOOKUP
  VBECS PATIENT LOOKUP
  VBECS PROVIDER LOOKUP
  VBECS WORKLOAD CODES LOOKUP
  
 GLOBALS - FILES:
 ===============
  ^VBEC(6002.01, - VBECS WORKLOAD CAPTURE File (#6002.01)
  
  ICRs:
  =====
  The following ICRs were created to allow data transfer between the Blood 
 Bank medical device and the VBECS Application Interfacing Support 
 software.
  4607, 4608, 4609, 4610, 4611, 4612, 4613, 4614, 4615, 4616, 4617,
  4618, 4619, 4620, 4621, 4622, 4623, 4624, 4625, 4626, 4627, 4628, 4633
  
  The following ICRs were created, or modified, to allow data transfer 
 between the VBECS Application Interfacing Support software and other 
 VistA applications.
  1587, 1963, 2400, 2503, 2817, 3176, 3177, 3181, 3631, 3879, 4629,
  4636, 4766, 4767, 4773, 4774, 4776, 4779,
  
 ASSOCIATED REMEDY TICKETS
 =========================
  N/A
  
 TEST SITES:
 ===========
  HEARTLAND-EAST HCS
  PHILADELPHIA, PA
  SAN DIEGO, CA
  
 SACC Exemptions:
 ================
 XINDEX displays the following warning. The Standards And Conventions 
 Committee granted an exemption to allow the use of a star read on May 4th 
 2006.
  
 VBECRL   * *  114 Lines,  4099 Bytes, Checksum: B10917646
          FOR  READ VBECX#VBECREAD:VBECTO SET TOFLAG=$T DO:VBECFRST CHK 
 DO:'VBECS
           TOP  QUIT:DONE
    READ+6       I - Star or pound READ used.
  
 Installation Sequence 
 ======================
 The files listed below represent the patches that will be part of the 
 controlled phased release.  Follow the sequence listed below when your 
 phased installation occurs.
  
   1. LR*5.2*335
   2. LR*5.2*367
   3. VBECS Bundle (consisting of VBEC*1*0 and LR*5.2*325)
   4. VBEC*1.0*1
   5. OR*3.0*212
  
 Documentation Retrieval:
 ========================
 Although this is a controlled, phased released, the user & technical 
 documentation will be available to all sites when the patch is officially 
 released and the phased implementations start.  This will allow sites the 
 opportunity to retrieve the documents before their phased installation 
 date
  
  
 Documentation is available for the VBECS package on the 
 ANONYMOUS.SOFTWARE directory at one of the following Office of 
 Information (OI) Field Offices. Sites will be able to utilize
 Documentation in either the ".PDF" or "DOC" format after they extract the
 ZIP file.
  
 The preferred method is to FTP the files from:
 Download.vista.med.va.gov
  
 This transmits files from the first available FTP server.  Sites may also 
 elect to retrieve documentation directly from a 
 specific server as follows:
        Albany                  ftp.fo-albany.med.va.gov
        Hines                   ftp.fo-hines.med.va.gov
        Salt Lake City          ftp.fo-slc.med.va.gov
  
 NOTE:  The ZIP file listed below will be listed in each of the 
 VBECS and LR patches that are part of the VBECS package and associate 
 patches, it only needs to be downloaded once.
  
 File Name                                   Retrieval format:  
 ===========                                 =================
 VBECS_1_4_DOCS_BUNDLE.ZIP                   BINARY
  
  
  
 The following files are contained in the VBECS_1_4_DOCS_BUNDLE.ZIP file 
 and will not be individually located on the OI Field Office Anonymous 
 Directories.
  
 The VBECS_1_4_DOCS_BUNDLE.ZIP file will need to be extracted on your 
 system to be used.
  
 =======================================================================
 Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
 ADPAC Guide.doc
 Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
 ADPAC Guide.pdf
 Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
 Installation and User Guide.doc
 Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
 Installation and User Guide.pdf
 Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
 Technical Manual.doc
 Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
 Technical Manual.pdf
 VBECS Data Conversion Recommended Validation Method.xls
 VBECS Application Interfacing Support Software Installation and User 
 Configuration Guide.doc
 VBECS Application Interfacing Support Software Installation and User 
 Configuration Guide.pdf
 VBECS Implementation Process.xls
 VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Installation 
 Guide.doc
 VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Installation 
 Guide.pdf
 VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Technical 
 Manual-Security Guide.doc
 VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Technical 
 Manual-Security Guide.pdf
 VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 User Guide.doc
 VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 User Guide.pdf
 VBECS Known Defects and Anomalies.doc
 VBECS Known Defects and Anomalies.pdf
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
  Pre-Installation Items:
  =======================
  
   Environment Check:
   ------------------
 Programmer access is required to install this patch. Prior to 
 installation, the installer must ensure the DUZ(0) node of the DUZ array 
 is set to the "@" symbol.
  
   Users on the System:
   --------------------
    This patch may be installed with users on the system.
  
   Software Installation Time:
   ---------------------------
    The estimated installation time for this patch is less than 
    5 minutes during non-peak hours.
  
   Queuing:
   ---------
    Note: Patch installation requires responses from the installer and
    must not be queued.
  
   Pre-requisites:
   ---------------
    Patch installer must enter the collection sample types for new Lab
    tests created during installation. Obtain sample types from the
    Laboratory Information Manager
  
   Namespace:
   ----------
    The namespace for the VBECS Application Interfacing Support package is:
     Name: VBECS - Prefix: VBEC
  
   Required Patches:
   -----------------
    Application                          Patch/Build
    -----------------------------        -----------
    Laboratory Services                  LR*5.2*187
                                         LR*5.2*288
                                         LR*5.2*294
    Toolkit                              XT*7.3*58
  
   New File and Global Information:
   --------------------------------
    There is one new global, ^VBEC.  The ^VBEC global contains the
    following new file.
                                                         Journaling
    File #   File Name                   Global Root     Recommended
    ------   ------------------------    ------------    -----------
    6002.01  VBECS WORKLOAD CAPTURE      ^VBEC(6002.01,  YES
  
   VBECS Configuration Checklists:
   -------------------------------
    a. Complete Appendix D: Configuration Checklist of the VistA Blood
       Establishment Computer Software (VBECS) Installation Guide.
    b. Complete Appendix B: Configuration Worksheet of the VBECS 
       Application Interfacing Support Software Installation and User
       Configuration Guide.
  
   Installation Steps:
   ===================
  
 The installation of VBECS and its related patches are being handled as a 
 controlled release. The implementation manager will contact you with the 
 location of the KIDS Host Files prior to your scheduled installation 
 date. The documentation files will be available for download in advance 
 of installation through the anonymous download site.
  
    1. Use the 'LOAD A DISTRIBUTION' option (#1) on the 'KIDS INSTALLATION'
       menu, and enter: VBECS_BUNDLE_1.KID 
  
    2. From the 'Kernel Installation & Distribution System' menu, select
       the Installation menu.
  
    3. From this menu, you may now elect to use the following options (when
       prompted for INSTALL NAME, enter  VBECS BUNDLE 1.0)
  
       a. Backup a Transport Global - This option will create a backup
          message of any routines exported with the patch.  It will NOT
          backup any changes such as DDs or templates.
  
       b. Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch
          (routines, DDs, templates, etc.).
  
       c. Verify Checksums in Transport Global - This option will allow you
          to ensure the integrity of the routines that are in the
          transport global.
  
       d. Print Transport Global - this option will allow you to view the
          components of the KIDS build.
  
    4. Use the Install Package(s) option and select package
       VBECS_BUNDLE_1.KID.  This will automatically install VBEC*1*0
       and LR*5.2*325
  
    5. When prompted "Enter the Coordinator for Mail Group 'VBECS INTERFACE
       ADMIN':", please enter the name of the individual that will be
       responsible for maintaining the new mail group. This mail group
       receives notifications when an HL7 transmission, or a query through
       the VBECS VistALink client, to the Blood Bank medical device has
       failed. The users added to this group would be Lab/Blood Bank
       supervisors and/or IRM staff responsible for managing the VBECS
       package and interfaces.
  
    6. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
       Install? NO//', respond Yes.
  
    7. When prompted 'VBECS Server IP Address:', enter the Cluster
       IP address from Appendix B: Configuration Worksheet, Hardware
       Information, row 1.
  
    8. When prompted 'VBECS VistALink Listener Service Port Number:',
       enter the VistALink Listener Service port number from
       Appendix B: Configuration Worksheet, Hardware Information, row 2
       for installing in the TEST account, row 3 for installing in the
       PRODUCTION account.
  
    9. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
       No//', it is recommended you answer NO.
  
    8. When prompted 'Want to DISABLE Scheduled Options, Menu Options,
       and Protocols? No//', respond NO
  
   11. When prompted by "Select COLLECTION SAMPLE for Lab Test
       ABO/RH - LAB:," select the collection sample appropriate for the
       ABO/Rh test.
  
   12. When prompted by "Select COLLECTION SAMPLE for Lab Test ANTIBODY
       SCREEN - LAB:," select the collection sample appropriate for the
       Antibody Screen test.
  
   13. When prompted by "Select COLLECTION SAMPLE for Lab Test DIRECT
       ANTIGLOBULIN TEST - LAB:," select the collection sample appropriate
       for the Direct Antiglobulin Test test.
  
   14. When prompted by "Select COLLECTION SAMPLE for Lab Test TRANSFUSION
       REACTION WORKUP - LAB:," select the collection sample appropriate
       for the Transfusion Reaction Workup test.
  
   15. When prompted by "Select COLLECTION SAMPLE for Lab Test 
       TYPE & SCREEN - LAB:," select the collection sample appropriate for
       the Type & Screen test.
  
   16. The POST Installation routine VBECPOST will be deleted from
       your system automatically after successful installation.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: VBECA1
    Before: B42809195   After: B15238106  
Routine Name: VBECA1A
    Before:  B3879109   After:  B4232079  
Routine Name: VBECA1B
    Before:       n/a   After: B61255311  
Routine Name: VBECA1B1
    Before:       n/a   After: B35331122  
Routine Name: VBECA3
    Before:       n/a   After: B13958816  
Routine Name: VBECA3A
    Before:  B9998377   After:   B116577  
Routine Name: VBECA3B
    Before: B10238360   After: B10836564  
Routine Name: VBECA3C
    Before:       n/a   After: B16841971  
Routine Name: VBECA4
    Before:  B9746447   After: B15334551  
Routine Name: VBECA5A
    Before:  B1674894   After:  B2902941  
Routine Name: VBECA5B
    Before:       n/a   After:  B8762794  
Routine Name: VBECA6
    Before:       n/a   After: B10870720  
Routine Name: VBECA7
    Before:       n/a   After: B28140649  
Routine Name: VBECA7A
    Before:       n/a   After: B37404950  
Routine Name: VBECA7A1
    Before:       n/a   After: B69945388  
Routine Name: VBECA7B
    Before:       n/a   After: B64114607  
Routine Name: VBECENV
    Before:       n/a   After: B11886954  
Routine Name: VBECHLRT
    Before:       n/a   After:  B3440546  
Routine Name: VBECLU
    Before:       n/a   After: B62085514  
Routine Name: VBECLU0
    Before:       n/a   After: B22984698  
Routine Name: VBECLU3
    Before:       n/a   After: B17629716  
Routine Name: VBECPOST
    Before:       n/a   After: B81343398  
Routine Name: VBECRL
    Before:       n/a   After: B10917646  
Routine Name: VBECRPC
    Before:       n/a   After: B37044839  
Routine Name: VBECRPC1
    Before:       n/a   After:  B5917800  
Routine Name: VBECRPCA
    Before:       n/a   After: B73291905  
Routine Name: VBECRPCB
    Before:       n/a   After: B37262884  
Routine Name: VBECRPCC
    Before:       n/a   After: B23397469  
Routine Name: VBECRPCD
    Before:       n/a   After:  B4946296  
Routine Name: VBECRPCE
    Before:       n/a   After:  B8061175  
Routine Name: VBECRPCH
    Before:       n/a   After:  B4049349  
Routine Name: VBECRPCM
    Before:       n/a   After: B41078175  
Routine Name: VBECRPCP
    Before:       n/a   After: B17844001  
Routine Name: VBECRPCW
    Before:       n/a   After:  B4711802  
Routine Name: VBECVLC
    Before:       n/a   After: B21445006  

=============================================================================
User Information:
Entered By  : MORTON,RANDY                  Date Entered  : OCT 07, 2008
Completed By: KANIA,KEVIN                   Date Completed: JUN 05, 2009
Released By : MURCH,CLAUDETTE               Date Released : JUN 08, 2009
=============================================================================


Packman Mail Message:
=====================

No routines included
