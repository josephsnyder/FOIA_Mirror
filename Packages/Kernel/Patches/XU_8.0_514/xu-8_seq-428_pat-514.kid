KIDS Distribution saved on Nov 03, 2010@09:43:47
XU 514
**KIDS**:XU*8.0*514^

**INSTALL NAME**
XU*8.0*514
"BLD",1173,0)
XU*8.0*514^KERNEL^0^3091005^y
"BLD",1173,1,0)
^^2^2^3090608^^^
"BLD",1173,1,1,0)
Please refer to the Description in the FORUM Patch Module for details.
"BLD",1173,1,2,0)
XU*8*514  XUSTZ error fix.
"BLD",1173,4,0)
^9.64PA^200^2
"BLD",1173,4,200,0)
200
"BLD",1173,4,200,2,0)
^9.641^200^1
"BLD",1173,4,200,2,200,0)
NEW PERSON  (File-top level)
"BLD",1173,4,200,2,200,1,0)
^9.6411^747.113^4
"BLD",1173,4,200,2,200,1,501.1,0)
NETWORK USERNAME
"BLD",1173,4,200,2,200,1,747.11,0)
APPOINTMENT STATUS
"BLD",1173,4,200,2,200,1,747.113,0)
RENEW DATE
"BLD",1173,4,200,2,200,1,747.44,0)
DEA EXPIRATION DATE
"BLD",1173,4,200,222)
y^n^p^^^^n^^n
"BLD",1173,4,200,224)

"BLD",1173,4,8989.3,0)
8989.3
"BLD",1173,4,8989.3,2,0)
^9.641^8989.3^1
"BLD",1173,4,8989.3,2,8989.3,0)
KERNEL SYSTEM PARAMETERS  (File-top level)
"BLD",1173,4,8989.3,2,8989.3,1,0)
^9.6411^13^1
"BLD",1173,4,8989.3,2,8989.3,1,13,0)
ACADEMIC AFFILIATION WAIVER
"BLD",1173,4,8989.3,222)
y^y^p^^^^n^^n
"BLD",1173,4,8989.3,224)

"BLD",1173,4,"APDD",200,200)

"BLD",1173,4,"APDD",200,200,501.1)

"BLD",1173,4,"APDD",200,200,747.11)

"BLD",1173,4,"APDD",200,200,747.113)

"BLD",1173,4,"APDD",200,200,747.44)

"BLD",1173,4,"APDD",8989.3,8989.3)

"BLD",1173,4,"APDD",8989.3,8989.3,13)

"BLD",1173,4,"B",200,200)

"BLD",1173,4,"B",8989.3,8989.3)

"BLD",1173,6)
^428
"BLD",1173,6.3)
8
"BLD",1173,"INID")
^y
"BLD",1173,"INIT")
POST^XU8P514
"BLD",1173,"KRN",0)
^9.67PA^9002226^21
"BLD",1173,"KRN",.4,0)
.4
"BLD",1173,"KRN",.401,0)
.401
"BLD",1173,"KRN",.402,0)
.402
"BLD",1173,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",1173,"KRN",.402,"NM",1,0)
XUEDIT CHARACTERISTICS    FILE #200^200^0
"BLD",1173,"KRN",.402,"NM","B","XUEDIT CHARACTERISTICS    FILE #200",1)

"BLD",1173,"KRN",.403,0)
.403
"BLD",1173,"KRN",.403,"NM",0)
^9.68A^1^1
"BLD",1173,"KRN",.403,"NM",1,0)
XUEDIT CHARACTERISTICS    FILE #200^200^0
"BLD",1173,"KRN",.403,"NM","B","XUEDIT CHARACTERISTICS    FILE #200",1)

"BLD",1173,"KRN",.5,0)
.5
"BLD",1173,"KRN",.84,0)
.84
"BLD",1173,"KRN",3.6,0)
3.6
"BLD",1173,"KRN",3.8,0)
3.8
"BLD",1173,"KRN",9.2,0)
9.2
"BLD",1173,"KRN",9.8,0)
9.8
"BLD",1173,"KRN",9.8,"NM",0)
^9.68A^6^5
"BLD",1173,"KRN",9.8,"NM",1,0)
XUSTZ^^0^B8373786
"BLD",1173,"KRN",9.8,"NM",2,0)
XGKB1^^0^B7627724
"BLD",1173,"KRN",9.8,"NM",3,0)
XUSTERM1^^0^B25005360
"BLD",1173,"KRN",9.8,"NM",5,0)
XQHLP^^0^B16208032
"BLD",1173,"KRN",9.8,"NM",6,0)
XUSER1^^0^B10316909
"BLD",1173,"KRN",9.8,"NM","B","XGKB1",2)

"BLD",1173,"KRN",9.8,"NM","B","XQHLP",5)

"BLD",1173,"KRN",9.8,"NM","B","XUSER1",6)

"BLD",1173,"KRN",9.8,"NM","B","XUSTERM1",3)

"BLD",1173,"KRN",9.8,"NM","B","XUSTZ",1)

"BLD",1173,"KRN",19,0)
19
"BLD",1173,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",1173,"KRN",19,"NM",1,0)
XUAUTODEACTIVATE^^0
"BLD",1173,"KRN",19,"NM","B","XUAUTODEACTIVATE",1)

"BLD",1173,"KRN",19.1,0)
19.1
"BLD",1173,"KRN",101,0)
101
"BLD",1173,"KRN",409.61,0)
409.61
"BLD",1173,"KRN",771,0)
771
"BLD",1173,"KRN",779.2,0)
779.2
"BLD",1173,"KRN",870,0)
870
"BLD",1173,"KRN",8989.51,0)
8989.51
"BLD",1173,"KRN",8989.52,0)
8989.52
"BLD",1173,"KRN",8994,0)
8994
"BLD",1173,"KRN",9002226,0)
9002226
"BLD",1173,"KRN","B",.4,.4)

"BLD",1173,"KRN","B",.401,.401)

"BLD",1173,"KRN","B",.402,.402)

"BLD",1173,"KRN","B",.403,.403)

"BLD",1173,"KRN","B",.5,.5)

"BLD",1173,"KRN","B",.84,.84)

"BLD",1173,"KRN","B",3.6,3.6)

"BLD",1173,"KRN","B",3.8,3.8)

"BLD",1173,"KRN","B",9.2,9.2)

"BLD",1173,"KRN","B",9.8,9.8)

"BLD",1173,"KRN","B",19,19)

"BLD",1173,"KRN","B",19.1,19.1)

"BLD",1173,"KRN","B",101,101)

"BLD",1173,"KRN","B",409.61,409.61)

"BLD",1173,"KRN","B",771,771)

"BLD",1173,"KRN","B",779.2,779.2)

"BLD",1173,"KRN","B",870,870)

"BLD",1173,"KRN","B",8989.51,8989.51)

"BLD",1173,"KRN","B",8989.52,8989.52)

"BLD",1173,"KRN","B",8994,8994)

"BLD",1173,"KRN","B",9002226,9002226)

"BLD",1173,"QDEF")
^^^^YES
"BLD",1173,"QUES",0)
^9.62^^
"BLD",1173,"REQB",0)
^9.611^4^4
"BLD",1173,"REQB",1,0)
XU*8.0*243^2
"BLD",1173,"REQB",2,0)
XU*8.0*244^2
"BLD",1173,"REQB",3,0)
XU*8.0*265^2
"BLD",1173,"REQB",4,0)
XU*8.0*436^2
"BLD",1173,"REQB","B","XU*8.0*243",1)

"BLD",1173,"REQB","B","XU*8.0*244",2)

"BLD",1173,"REQB","B","XU*8.0*265",3)

"BLD",1173,"REQB","B","XU*8.0*436",4)

"FIA",200)
NEW PERSON
"FIA",200,0)
^VA(200,
"FIA",200,0,0)
200I
"FIA",200,0,1)
y^n^p^^^^n^^n
"FIA",200,0,10)

"FIA",200,0,11)

"FIA",200,0,"RLRO")

"FIA",200,0,"VR")
8.0^XU
"FIA",200,200)
1
"FIA",200,200,501.1)

"FIA",200,200,747.11)

"FIA",200,200,747.113)

"FIA",200,200,747.44)

"FIA",8989.3)
KERNEL SYSTEM PARAMETERS
"FIA",8989.3,0)
^XTV(8989.3,
"FIA",8989.3,0,0)
8989.3P
"FIA",8989.3,0,1)
y^y^p^^^^n^^n
"FIA",8989.3,0,10)

"FIA",8989.3,0,11)

"FIA",8989.3,0,"RLRO")

"FIA",8989.3,0,"VR")
8.0^XU
"FIA",8989.3,8989.3)
1
"FIA",8989.3,8989.3,13)

"INIT")
POST^XU8P514
"KRN",.402,9,-1)
0^1
"KRN",.402,9,0)
XUEDIT CHARACTERISTICS^3090707.1717^^200^^#^3090729
"KRN",.402,9,"DR",1,200)
11.1;1;13;200.05;200.06;200.09;31.2;31.3;.131;.132;501.1;
"KRN",.403,2,-1)
0^1
"KRN",.403,2,0)
XUEDIT CHARACTERISTICS^^^^2901206^^^200^0^0^1
"KRN",.403,2,40,0)
^.4031I^1^1
"KRN",.403,2,40,1,0)
1^XUEDIT CHARACTERISTICS HDR^1,1^^^^^^
"KRN",.403,2,40,1,1)
Page 1 of 1
"KRN",.403,2,40,1,40,0)
^.4032PI^27^1
"KRN",.403,2,40,1,40,27,0)
XUEDIT CHARACTERISTICS^1^5,1^e
"KRN",.404,26,0)
XUEDIT CHARACTERISTICS HDR^200^0^^
"KRN",.404,26,40,0)
^.4044I^4^4
"KRN",.404,26,40,1,0)
1^EDIT USER CHARACTERISTICS^1^
"KRN",.404,26,40,1,2)
^^1,28^
"KRN",.404,26,40,2,0)
2^NAME^3^
"KRN",.404,26,40,2,1)
.01
"KRN",.404,26,40,2,2)
2,7^30^2,1
"KRN",.404,26,40,3,0)
3^PAGE 1 OF 1^1^
"KRN",.404,26,40,3,2)
^^2,69^
"KRN",.404,26,40,4,0)
4^_______________________________________________________________________________^1^
"KRN",.404,26,40,4,2)
^^3,1^
"KRN",.404,27,0)
XUEDIT CHARACTERISTICS^200^^^
"KRN",.404,27,15,0)
1^^1^1^2930813^^^^
"KRN",.404,27,15,1,0)
Part of KERNEL.
"KRN",.404,27,40,0)
^.4044I^13^13
"KRN",.404,27,40,1,0)
1^INITIAL^3
"KRN",.404,27,40,1,1)
1
"KRN",.404,27,40,1,2)
1,29^5^1,20
"KRN",.404,27,40,1,11)
N T S T(1)="To Exit form and save changes, enter: <PF1>E",T(2)="To Quit form without saving changes, enter: <PF1>Q" D HLP^DDSUTL(.T)
"KRN",.404,27,40,2,0)
3^NICK NAME^3
"KRN",.404,27,40,2,1)
13
"KRN",.404,27,40,2,2)
2,29^10^2,18
"KRN",.404,27,40,3,0)
2^PHONE^3
"KRN",.404,27,40,3,1)
.131
"KRN",.404,27,40,3,2)
1,62^15^1,55
"KRN",.404,27,40,4,0)
4^OFFICE PHONE^3
"KRN",.404,27,40,4,1)
.132
"KRN",.404,27,40,4,2)
2,62^15^2,48
"KRN",.404,27,40,5,0)
7^ASK DEVICE TYPE AT SIGN-ON^3
"KRN",.404,27,40,5,1)
200.05
"KRN",.404,27,40,5,2)
5,33^9^5,5
"KRN",.404,27,40,6,0)
8^AUTO MENU^3
"KRN",.404,27,40,6,1)
200.06
"KRN",.404,27,40,6,2)
6,33^20^6,22
"KRN",.404,27,40,7,0)
9^TYPE-AHEAD^3
"KRN",.404,27,40,7,1)
200.09
"KRN",.404,27,40,7,2)
7,33^11^7,21
"KRN",.404,27,40,8,0)
10^TEXT TERMINATOR^3
"KRN",.404,27,40,8,1)
31.2
"KRN",.404,27,40,8,2)
8,33^5^8,16
"KRN",.404,27,40,9,0)
11^PREFERRED EDITOR^3
"KRN",.404,27,40,9,1)
31.3
"KRN",.404,27,40,9,2)
9,33^30^9,15
"KRN",.404,27,40,10,0)
13^Want to edit VERIFY CODE (Y/N)^3
"KRN",.404,27,40,10,1)
11.1
"KRN",.404,27,40,10,2)
13,33^3^13,1
"KRN",.404,27,40,11,0)
5^VOICE PAGER^3
"KRN",.404,27,40,11,1)
.137
"KRN",.404,27,40,11,2)
3,62^15^3,49
"KRN",.404,27,40,12,0)
6^DIGITAL PAGER^3
"KRN",.404,27,40,12,1)
.138
"KRN",.404,27,40,12,2)
4,62^15^4,47
"KRN",.404,27,40,13,0)
12^NETWORK USERNAME^3
"KRN",.404,27,40,13,1)
501.1
"KRN",.404,27,40,13,2)
10,33^15^10,15
"KRN",19,64,-1)
0^1
"KRN",19,64,0)
XUAUTODEACTIVATE^Automatic Deactivation of Users^^R^^^^^^^^^n^^
"KRN",19,64,1,0)
^^17^17^3090727^
"KRN",19,64,1,1,0)
This option will go thru the New Person file, and search for users with 
"KRN",19,64,1,2,0)
a termination date in the past who still have an access code.  It will 
"KRN",19,64,1,3,0)
delete there access code and Keys. It calls the XU USER TERMINATE 
"KRN",19,64,1,4,0)
protocol in the OPTION FILE so other applications can take any action they
"KRN",19,64,1,5,0)
need. If the DELETE ALL MAIL ACCESS field is set then the user will be
"KRN",19,64,1,6,0)
removed them from the mail system, this will delete their mail boxes and
"KRN",19,64,1,7,0)
delete them from any mail groups. 
"KRN",19,64,1,8,0)
 
"KRN",19,64,1,9,0)
Patch XU*8*514 implements the Logical Access Controls section of VA 
"KRN",19,64,1,10,0)
Handbook 6500. Item 'd' states that accounts are automatically disabled
"KRN",19,64,1,11,0)
if inactive for 30 days.
"KRN",19,64,1,12,0)
 
"KRN",19,64,1,13,0)
The routine checks for users that have an access code and a Last Signon 
"KRN",19,64,1,14,0)
Date (#202) where the Last Signon Date is more than 30 days old and sets 
"KRN",19,64,1,15,0)
the DISUSER (#7) flag for the user. If the site has set the ACADEMIC
"KRN",19,64,1,16,0)
AFFILIATION WAIVER (#13) field to YES in the KERNEL SYSTEM PARAMETERS file
"KRN",19,64,1,17,0)
(#8989.3) then a 90 day limit is used in place of 30 days.
"KRN",19,64,2)
n
"KRN",19,64,25)
CHECK^XUSTERM1
"KRN",19,64,200.9)
y
"KRN",19,64,"U")
AUTOMATIC DEACTIVATION OF USER
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^3090706^3090706^6
"PKG",3,22,1,"PAH",1,0)
514^3091005
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3091005
"PKG",3,22,1,"PAH",1,1,1,0)
Please refer to the Description in the FORUM Patch Module for details.
"PKG",3,22,1,"PAH",1,1,2,0)
XU*8*514  XUSTZ error fix.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","XGKB1")
0^2^B7627724^B7636164
"RTN","XGKB1",1,0)
XGKB1 ;SFISC/VYD - Read with Escape Processing cont. ;11/06/08  15:08
"RTN","XGKB1",2,0)
 ;;8.0;KERNEL;**244,514**;Jul 10, 1995;Build 8
"RTN","XGKB1",3,0)
 ;;Special thanks to MELDRUM.KEVIN@ISC-SLC.VA.GOV
"RTN","XGKB1",4,0)
 ;
"RTN","XGKB1",5,0)
VAXDSM ; $ZB ($KEY) values for VAX DSM
"RTN","XGKB1",6,0)
MSM ; $ZB ($KEY) values for MSM
"RTN","XGKB1",7,0)
 F I=2:1:31 D
"RTN","XGKB1",8,0)
 . S X=$TR($T(KBD+I)," ","")
"RTN","XGKB1",9,0)
 . S ^XUTL("XGKB",$P(X,";",4))=$P(X,";",3)
"RTN","XGKB1",10,0)
 F I=29:1 S X=$TR($T(KBD+I)," ","") Q:$P(X,";",3)="ZZZ"  D
"RTN","XGKB1",11,0)
 . S ^XUTL("XGKB",$P(X,";",4)*256+27)=$P(X,";",3)
"RTN","XGKB1",12,0)
 Q
"RTN","XGKB1",13,0)
 ;
"RTN","XGKB1",14,0)
 ;
"RTN","XGKB1",15,0)
GTM ; $ZB ($KEY) values for GT.M
"RTN","XGKB1",16,0)
DTM ; $ZB ($KEY) values for DTM
"RTN","XGKB1",17,0)
 F I=2:1 S X=$TR($T(KBD+I)," ","") Q:$P(X,";",3)="ZZZ"  D
"RTN","XGKB1",18,0)
 . S @("^XUTL(""XGKB"",$C("_$P(X,";",5)_"))=$P(X,"";"",3)")
"RTN","XGKB1",19,0)
 Q
"RTN","XGKB1",20,0)
 ;
"RTN","XGKB1",21,0)
 ;
"RTN","XGKB1",22,0)
KBD ; $KEY values for DSM, MSM, and DTM when using escape processing
"RTN","XGKB1",23,0)
 ; Key      ;DSM ;DTM       (MSM is the same as DSM)
"RTN","XGKB1",24,0)
 ;;^A       ;1   ;1
"RTN","XGKB1",25,0)
 ;;^B       ;2   ;2
"RTN","XGKB1",26,0)
 ;;^C       ;3   ;3
"RTN","XGKB1",27,0)
 ;;^D       ;4   ;4
"RTN","XGKB1",28,0)
 ;;^E       ;5   ;5
"RTN","XGKB1",29,0)
 ;;^F       ;6   ;6
"RTN","XGKB1",30,0)
 ;;^G       ;7   ;7
"RTN","XGKB1",31,0)
 ;;^H       ;8   ;8
"RTN","XGKB1",32,0)
 ;;TAB      ;9   ;9
"RTN","XGKB1",33,0)
 ;;^J       ;10  ;10
"RTN","XGKB1",34,0)
 ;;^K       ;11  ;11
"RTN","XGKB1",35,0)
 ;;^L       ;12  ;12
"RTN","XGKB1",36,0)
 ;;CR       ;13  ;13
"RTN","XGKB1",37,0)
 ;;^N       ;14  ;14
"RTN","XGKB1",38,0)
 ;;^O       ;15  ;15
"RTN","XGKB1",39,0)
 ;;^P       ;16  ;16
"RTN","XGKB1",40,0)
 ;;^Q       ;17  ;17
"RTN","XGKB1",41,0)
 ;;^R       ;18  ;18
"RTN","XGKB1",42,0)
 ;;^S       ;19  ;19
"RTN","XGKB1",43,0)
 ;;^T       ;20  ;20
"RTN","XGKB1",44,0)
 ;;^U       ;21  ;21
"RTN","XGKB1",45,0)
 ;;^V       ;22  ;22
"RTN","XGKB1",46,0)
 ;;^W       ;23  ;23
"RTN","XGKB1",47,0)
 ;;^X       ;24  ;24
"RTN","XGKB1",48,0)
 ;;^Y       ;25  ;25
"RTN","XGKB1",49,0)
 ;;^Z       ;26  ;26
"RTN","XGKB1",50,0)
 ;;^\       ;28  ;28
"RTN","XGKB1",51,0)
 ;;^]       ;29  ;29
"RTN","XGKB1",52,0)
 ;;^6       ;30  ;30
"RTN","XGKB1",53,0)
 ;;^_       ;31  ;31
"RTN","XGKB1",54,0)
 ;;KP0      ;0   ;27,79,112
"RTN","XGKB1",55,0)
 ;;KP1      ;1   ;27,79,113
"RTN","XGKB1",56,0)
 ;;KP2      ;2   ;27,79,114
"RTN","XGKB1",57,0)
 ;;KP3      ;3   ;27,79,115
"RTN","XGKB1",58,0)
 ;;KP4      ;4   ;27,79,116
"RTN","XGKB1",59,0)
 ;;KP5      ;5   ;27,79,117
"RTN","XGKB1",60,0)
 ;;KP6      ;6   ;27,79,118
"RTN","XGKB1",61,0)
 ;;KP7      ;7   ;27,79,119
"RTN","XGKB1",62,0)
 ;;KP8      ;8   ;27,79,120
"RTN","XGKB1",63,0)
 ;;KP9      ;9   ;27,79,121
"RTN","XGKB1",64,0)
 ;;UP       ;17  ;27,91,65
"RTN","XGKB1",65,0)
 ;;DOWN     ;18  ;27,91,66
"RTN","XGKB1",66,0)
 ;;RIGHT    ;19  ;27,91,67
"RTN","XGKB1",67,0)
 ;;LEFT     ;20  ;27,91,68
"RTN","XGKB1",68,0)
 ;;FIND     ;21  ;27,91,49,126
"RTN","XGKB1",69,0)
 ;;INSERT   ;22  ;27,91,50,126
"RTN","XGKB1",70,0)
 ;;REMOVE   ;23  ;27,91,51,126
"RTN","XGKB1",71,0)
 ;;SELECT   ;24  ;27,91,52,126
"RTN","XGKB1",72,0)
 ;;PREV     ;25  ;27,91,53,126
"RTN","XGKB1",73,0)
 ;;NEXT     ;26  ;27,91,54,126
"RTN","XGKB1",74,0)
 ;;KPENTER  ;29  ;27,79,77
"RTN","XGKB1",75,0)
 ;;PF1      ;32  ;27,79,80
"RTN","XGKB1",76,0)
 ;;PF2      ;33  ;27,79,81
"RTN","XGKB1",77,0)
 ;;PF3      ;34  ;27,79,82
"RTN","XGKB1",78,0)
 ;;PF4      ;35  ;27,79,83
"RTN","XGKB1",79,0)
 ;;F6       ;37  ;27,91,49,55,126
"RTN","XGKB1",80,0)
 ;;F7       ;38  ;27,91,49,56,126
"RTN","XGKB1",81,0)
 ;;F8       ;39  ;27,91,49,57,126
"RTN","XGKB1",82,0)
 ;;F9       ;40  ;27,91,50,48,126
"RTN","XGKB1",83,0)
 ;;F10      ;41  ;27,91,50,49,126
"RTN","XGKB1",84,0)
 ;;F11      ;43  ;27,91,50,51,126
"RTN","XGKB1",85,0)
 ;;F12      ;44  ;27,91,50,52,126
"RTN","XGKB1",86,0)
 ;;F13      ;45  ;27,91,50,53,126
"RTN","XGKB1",87,0)
 ;;F14      ;46  ;27,91,50,54,126
"RTN","XGKB1",88,0)
 ;;HELP     ;48  ;27,91,50,56,126
"RTN","XGKB1",89,0)
 ;;DO       ;49  ;27,91,50,57,126
"RTN","XGKB1",90,0)
 ;;F17      ;51  ;27,91,51,49,126
"RTN","XGKB1",91,0)
 ;;F18      ;52  ;27,91,51,50,126
"RTN","XGKB1",92,0)
 ;;F19      ;53  ;27,91,51,51,126
"RTN","XGKB1",93,0)
 ;;F20      ;54  ;27,91,51,52,126
"RTN","XGKB1",94,0)
 ;;KP-      ;60  ;27,79,109
"RTN","XGKB1",95,0)
 ;;KP+      ;61  ;27,79,108
"RTN","XGKB1",96,0)
 ;;KP.      ;62  ;27,79,110
"RTN","XGKB1",97,0)
 ;;ZZZ
"RTN","XQHLP")
0^5^B16208032^B16266682
"RTN","XQHLP",1,0)
XQHLP ;SEA/MJM - Menu Helper  ;07/21/09  11:37
"RTN","XQHLP",2,0)
 ;;8.0;KERNEL;**46,514**;Jul 10, 1995;Build 8
"RTN","XQHLP",3,0)
 ;
"RTN","XQHLP",4,0)
PAUSE R !!,"  **> Press 'RETURN' to continue, '^' to stop, or '?[option text]' for more",!?25,"help: ",XQL:DTIME D:XQL?1"?"1AN.ANP HELP S XQL=$S(XQL[U:-1,1:XQLN) W @IOF Q
"RTN","XQHLP",5,0)
 ;
"RTN","XQHLP",6,0)
PAUSE1 R !!,"  **> Press 'RETURN' to continue, '^' to stop: ",XQL:DTIME S XQL=$S(XQL[U:-1,1:XQLN) W @IOF Q
"RTN","XQHLP",7,0)
 ;
"RTN","XQHLP",8,0)
SHOW  F  S XQX=$O(^XUTL("XQO",XQDIC,XQX)) Q:XQX=U!(XQL<0)!(XQX="")  I $P(^(XQX),U,2) D
"RTN","XQHLP",9,0)
 .S XQHY=^(XQX)
"RTN","XQHLP",10,0)
 .D PRNT
"RTN","XQHLP",11,0)
 .Q  ;G SHOW
"RTN","XQHLP",12,0)
 Q
"RTN","XQHLP",13,0)
 ;
"RTN","XQHLP",14,0)
PRNT ;Print out the description of the option XQHY
"RTN","XQHLP",15,0)
 I '$L($P(XQHY,U,2))!'$D(^DIC(19,+XQHY,0)) Q
"RTN","XQHLP",16,0)
 I XQL<5 D PAUSE Q:XQL<0
"RTN","XQHLP",17,0)
 S XQHY0=^XUTL("XQO",XQDIC,"^",+XQHY) W !!,"'"_$P(XQHY0,U,3)_"'     Option name: ",$P(XQHY0,U,2) S XQL=XQL-2 S %=$P(XQHY0,U) I %]"" W "     Synonym: ",%
"RTN","XQHLP",18,0)
 I '$D(XQHLP),$P(XQHY0,U,8)'="" S %=$P($P(XQHY0,U,3)," "),%=$S($L(%)>3:%,1:$P($P(XQHY0,U,3)," ",1,2)) W !,"  **> Extended help available.  Type ","""","?"_%,""""," to see it." S XQL=XQL-1
"RTN","XQHLP",19,0)
 F XQNXTOP=0:0 S XQNXTOP=$O(^DIC(19,+XQHY,1,XQNXTOP)) Q:XQNXTOP=""  S XQA=^(XQNXTOP,0) W !?5,XQA S XQL=XQL-1 D PAUSE:'XQL
"RTN","XQHLP",20,0)
 Q
"RTN","XQHLP",21,0)
 ;
"RTN","XQHLP",22,0)
HELP ;Display a help screen
"RTN","XQHLP",23,0)
 N XQHY,XQX S XQHSV=XQY_U_XQDIC_U_XQY0,XQUR=$P(XQL,"?",2) D DIC^XQ71
"RTN","XQHLP",24,0)
 I XQY<0 W " ??",*7 S XQY=+XQHSV,XQDIC=$P(XQHSV,U,2),XQY0=$P(XQHSV,U,3,99) Q
"RTN","XQHLP",25,0)
 S XQH=$P(XQY0,U,7) I '$L(XQH) W !!,"**> Sorry, no help text available for this option." S XQY=+XQHSV,XQDIC=$P(XQHSV,U,2),XQY0=$P(XQHSV,U,3,99) Q
"RTN","XQHLP",26,0)
 D EN^XQH S XQY=+XQHSV,XQDIC=$P(XQHSV,U,2),XQY0=$P(XQHSV,U,3,99),XQL=0
"RTN","XQHLP",27,0)
 Q
"RTN","XQHLP",28,0)
 ;
"RTN","XQHLP",29,0)
EN ;Show descriptions from Option File Entry point from EN^XQ2
"RTN","XQHLP",30,0)
 ;S XQHSV=XQY_U_XQDIC_U_XQY0
"RTN","XQHLP",31,0)
 S XQX=0,(XQL,XQLN)=$S($D(IOSL):IOSL-2,1:22),XQSAV=XQDIC D:$S('($D(^XUTL("XQO",XQDIC,0))#2):1,'$D(^DIC(19,XQDIC,99)):1,1:^DIC(19,XQDIC,99)'=$P(^XUTL("XQO",XQDIC,0),U,2)) ^XQSET D SHOW W !! G:XQL<0 OUT
"RTN","XQHLP",32,0)
 S DIR(0)="Y",DIR("A")="  Shall I show you your secondary menus too",DIR("B")="No" D ^DIR G:$D(DUOUT) OUT
"RTN","XQHLP",33,0)
 I Y W @IOF S XQDIC="U"_DUZ D:$S('($D(^XUTL("XQO",XQDIC,0))#2):1,'$D(^VA(200,DUZ,203.1)):1,1:^VA(200,DUZ,203.1)'=$P(^XUTL("XQO",XQDIC,0),U,2)) ^XQSET S XQL=XQLN,XQX=0 W ?25,"**> Your secondary options <**",!! D SHOW W !!
"RTN","XQHLP",34,0)
 G:XQL<0 OUT
"RTN","XQHLP",35,0)
 S DIR(0)="Y",DIR("A")="  Would you like to see the Common Options",DIR("B")="No" D ^DIR G:$D(DUOUT) OUT
"RTN","XQHLP",36,0)
 I Y W @IOF S XQL=XQLN,XQX=0,XQDIC=$O(^DIC(19,"B","XUCOMMAND",0))
"RTN","XQHLP",37,0)
 I Y D:$S('($D(^XUTL("XQO",XQDIC,0))#2):1,'$D(^DIC(19,XQDIC,99)):1,1:^DIC(19,XQDIC,99)'=$P(^XUTL("XQO",XQDIC,0),U,2)) ^XQSET W ?17,"**> The Common Options, options available to everyone <**",!! D SHOW
"RTN","XQHLP",38,0)
 ;
"RTN","XQHLP",39,0)
OUT ;Exit here
"RTN","XQHLP",40,0)
 W !!
"RTN","XQHLP",41,0)
 ;S:$D(XQSAV) XQDIC=XQSAV
"RTN","XQHLP",42,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,XQA,XQHSV,XQHY,XQHY0,XQNXTOP,XQL,XQLN,XQN,XQSAV,XQX,Y
"RTN","XQHLP",43,0)
 I $D(XQHLP) K XQHLP Q
"RTN","XQHLP",44,0)
 G M2^XQ
"RTN","XQHLP",45,0)
 ;
"RTN","XQHLP",46,0)
OPT ;Respond to a user entering "?Option_text"
"RTN","XQHLP",47,0)
 ;Enter with XQUR from XQ.  Find option, show help, return to XQ
"RTN","XQHLP",48,0)
 S XQHSV=XQY_U_XQDIC_U_XQY0
"RTN","XQHLP",49,0)
 S (XQL,XQLN)=$S($D(IOSL):IOSL-2,1:22)
"RTN","XQHLP",50,0)
 I XQUR["?" F  S XQUR=$P(XQUR,"?",2) Q:XQUR'["?"
"RTN","XQHLP",51,0)
 S XQHLP="" ;Set a flag so we know it isn't a jump
"RTN","XQHLP",52,0)
 D S^XQ75
"RTN","XQHLP",53,0)
 I XQY>0 D
"RTN","XQHLP",54,0)
 .W @IOF W !!!
"RTN","XQHLP",55,0)
 .S XQHY=XQY_U_XQY0
"RTN","XQHLP",56,0)
 .D PRNT,PAUSE1
"RTN","XQHLP",57,0)
 .I $P(XQY0,U,7)'="" D
"RTN","XQHLP",58,0)
 ..S XQH=$P(XQY0,U,7) D EN^XQH
"RTN","XQHLP",59,0)
 ..Q
"RTN","XQHLP",60,0)
 .Q
"RTN","XQHLP",61,0)
 S (XQY,XQDIC)=$P(XQHSV,U),XQY0=$P(XQHSV,U,3,99)
"RTN","XQHLP",62,0)
 G OUT
"RTN","XQHLP",63,0)
 Q
"RTN","XU8P514")
0^^B174474^n/a
"RTN","XU8P514",1,0)
XU8P514 ;ISF/RWF - Patch XU*8*514 post-init ;07/29/09  14:54
"RTN","XU8P514",2,0)
 ;;8.0;KERNEL;**514**;;Build 8
"RTN","XU8P514",3,0)
 Q
"RTN","XU8P514",4,0)
 ;
"RTN","XU8P514",5,0)
POST ;See that node 3 just has 3 values to match the DD.
"RTN","XU8P514",6,0)
 N X
"RTN","XU8P514",7,0)
 S X=$G(^XTV(8989.3,1,3))
"RTN","XU8P514",8,0)
 I $L($P(X,U,4)),"01"'[$P(X,U,4) S $P(^XTV(8989.3,1,3),U,4,6)=""
"RTN","XU8P514",9,0)
 Q
"RTN","XUSER1")
0^6^B10316909^B7947642
"RTN","XUSER1",1,0)
XUSER1 ;ISF/RWF - User file Utilities ;09/30/09  16:38
"RTN","XUSER1",2,0)
 ;;8.0;KERNEL;**169,210,222,514**;Jul 10, 1995;Build 8
"RTN","XUSER1",3,0)
 Q
"RTN","XUSER1",4,0)
 ;
"RTN","XUSER1",5,0)
PAGE() ;Do a page break; Return 0 if ok to continue, 1 if to abort
"RTN","XUSER1",6,0)
 N DIR
"RTN","XUSER1",7,0)
 S DIR(0)="E" D ^DIR:($E(IOST,1,2)["C-")
"RTN","XUSER1",8,0)
 Q:$D(DIRUT) 1 W @IOF S ($X,$Y)=0
"RTN","XUSER1",9,0)
 Q 0
"RTN","XUSER1",10,0)
 ;
"RTN","XUSER1",11,0)
GKEYS(IE,XUA) ;Get the keys held. IE=user
"RTN","XUSER1",12,0)
 N %,V,XUB
"RTN","XUSER1",13,0)
 S %=0 ;Sort list alphabetical
"RTN","XUSER1",14,0)
 F  S %=$O(^VA(200,IE,51,%)) Q:(%'>0)  S V=$P($G(^DIC(19.1,%,0)),U,1) I $L(V) S XUB(V)=""
"RTN","XUSER1",15,0)
 S V="" ;return to user
"RTN","XUSER1",16,0)
 F %=1:1 S V=$O(XUB(V)) Q:'$L(V)  S XUA(%)=V
"RTN","XUSER1",17,0)
 Q
"RTN","XUSER1",18,0)
 ;
"RTN","XUSER1",19,0)
SHLIST(ARRAY,LM,SP) ; Show a list, Array=list, LM=Left Margin, SP=spacing
"RTN","XUSER1",20,0)
 ;Set DN=0 to get FM22 to stop the print
"RTN","XUSER1",21,0)
 N %,Y2,Y4,Y5,Y6,DIR
"RTN","XUSER1",22,0)
 I $Y+4>IOSL,$$PAGE S DN=0 Q
"RTN","XUSER1",23,0)
 S Y4=-1,%=0,Y2=IOM-LM\SP,Y5=0
"RTN","XUSER1",24,0)
 F  S %=$O(ARRAY(%)),Y4=Y4+1 Q:(%'>0)!$D(DIRUT)  S Y6=$G(ARRAY(%)) D:$L(Y6)
"RTN","XUSER1",25,0)
 . S:Y4'<SP Y4=0 S Y5=(Y4*Y2+LM)
"RTN","XUSER1",26,0)
 . I $X>0,Y5+$L(Y6)'<IOM S Y4=0,Y5=(Y4*Y2+LM)
"RTN","XUSER1",27,0)
 . I 'Y4 W ! I $Y+3>IOSL S Y4=0,Y5=(Y4*Y2+LM) I $$PAGE S DN=0 Q
"RTN","XUSER1",28,0)
 . W ?Y5,Y6 S:(($X+1)>(Y5+Y2)) Y4=Y4+1
"RTN","XUSER1",29,0)
 . Q
"RTN","XUSER1",30,0)
 Q
"RTN","XUSER1",31,0)
 ;
"RTN","XUSER1",32,0)
SHPC(IE) ;Show the Person Class
"RTN","XUSER1",33,0)
 N %,Y S:'$D(DT) DT=$$DT^XLFDT
"RTN","XUSER1",34,0)
 S %=$X,Y=$$GET^XUA4A72(IE,DT)
"RTN","XUSER1",35,0)
 I $L(Y) W $P(Y,U,2) I $L($P(Y,U,3)) W !,?(%+2),$P(Y,U,3) I $L($P(Y,U,4)) W !,?(%+4),$P(Y,U,4)
"RTN","XUSER1",36,0)
 Q
"RTN","XUSER1",37,0)
GMG(IE,XUA) ;Get mail groups
"RTN","XUSER1",38,0)
 N %,Y,XUI,Y4,Y2,XUK
"RTN","XUSER1",39,0)
 S %=0
"RTN","XUSER1",40,0)
 F  S %=$O(^XMB(3.8,"AB",IE,%)) Q:%'>0  S XUA(%)=$P($G(^XMB(3.8,%,0)),U,1)
"RTN","XUSER1",41,0)
 Q
"RTN","XUSER1",42,0)
GPARAM(IE,PRAM,XUA) ;Get an entry from the Parameter tool
"RTN","XUSER1",43,0)
 ;IE is the user to get the list for. PARAM what parameter, XUA return array.
"RTN","XUSER1",44,0)
 N XUENT,XUX,XUERR,XU1
"RTN","XUSER1",45,0)
 S XUENT=IE_";VA(200,"_$S($G(^VA(200,IE,5)):"^SRV.`"_+$G(^(5)),1:""),XUA=""
"RTN","XUSER1",46,0)
 D GETLST^XPAR(.XUX,XUENT,PRAM,"E",.XUERR)
"RTN","XUSER1",47,0)
 Q:XUX'>0
"RTN","XUSER1",48,0)
 S XUA(.5)=PRAM_":"
"RTN","XUSER1",49,0)
 F %=1:1:XUX S XUA(%)=$P(XUX(%),U,2)
"RTN","XUSER1",50,0)
 Q
"RTN","XUSER1",51,0)
 ;
"RTN","XUSER1",52,0)
DIVCHG ;Allow user to change Division [DUZ(2)] value
"RTN","XUSER1",53,0)
 ;Called from option: XUSER DIV CHG
"RTN","XUSER1",54,0)
 N Y,X,DIC,I,CD
"RTN","XUSER1",55,0)
 I '$D(^VA(200,+$G(DUZ),0))#2 W !,"You are not a valid user.",!!,$C(7) Q
"RTN","XUSER1",56,0)
 I $G(DUZ(2))="" D  ;Should not happen
"RTN","XUSER1",57,0)
 . N XOPT D XOPT^XUS1A S DUZ(2)=$P(XOPT,U,17)
"RTN","XUSER1",58,0)
 S CD=$$NS^XUAF4(DUZ(2))
"RTN","XUSER1",59,0)
 W !,"Your current Division is ",$P(CD,U)_"  "_$P(CD,U,2)
"RTN","XUSER1",60,0)
 S X=+$O(^VA(200,DUZ,2,0)),Y=+$O(^(X))
"RTN","XUSER1",61,0)
 I 'Y W !,"You do not have any choices. ",!," Change is not possible.",!! Q
"RTN","XUSER1",62,0)
 K DIC S DIC="^VA(200,DUZ,2,",DIC(0)="AEMNQ"
"RTN","XUSER1",63,0)
 S DIC("S")="I $G(^DIC(4,+Y,99))"
"RTN","XUSER1",64,0)
 ;Check if user has a default
"RTN","XUSER1",65,0)
 S X=$O(^VA(200,DUZ,2,"AX1",1,0)) S:X>0 DIC("B")=$P($$NS^XUAF4(X),U)
"RTN","XUSER1",66,0)
 D ^DIC K DIC
"RTN","XUSER1",67,0)
 I Y'>0 D  Q
"RTN","XUSER1",68,0)
 .W !,$C(7),"Division Unchanged - Currently you are assigned to "
"RTN","XUSER1",69,0)
 .W $P(CD,U)_"  "_$P(CD,U,2),!
"RTN","XUSER1",70,0)
 S DUZ(2)=+Y,CD=$$NS^XUAF4(DUZ(2))
"RTN","XUSER1",71,0)
 W !?5,"Division is now set to [ ",$P(CD,U)_"  "_$P(CD,U,2)," ]",!
"RTN","XUSER1",72,0)
 Q
"RTN","XUSER1",73,0)
 ;
"RTN","XUSER1",74,0)
NETNM(NM,IEN) ;Check NetName, Called from input transform for field 501.1 NPF.
"RTN","XUSER1",75,0)
 ;Return 1 to abort, 0 to allow
"RTN","XUSER1",76,0)
 N NPF,OV
"RTN","XUSER1",77,0)
 S NPF(0)=$P($G(^VA(200,IEN,0)),U,1),OV=0
"RTN","XUSER1",78,0)
 I $E(NM,1,3)'="VHA" D EN^DDIOL("WARNING: Prefix not VHA.","") S OV=1
"RTN","XUSER1",79,0)
 S NPF(1)=$E($P(NPF(0),","),1,5)_$E($P(NPF(0),",",2),1)
"RTN","XUSER1",80,0)
 I $E(NM,7,6+$L(NPF(1)))'=NPF(1) D EN^DDIOL("WARNING: Missing "_NPF(1)_" from username.","") S OV=1
"RTN","XUSER1",81,0)
 I OV S OV='((DUZ(0)["@")!$D(^XUSEC("XUMGR",DUZ)))
"RTN","XUSER1",82,0)
 Q OV
"RTN","XUSER1",83,0)
 ;
"RTN","XUSTERM1")
0^3^B25005360^B24052516
"RTN","XUSTERM1",1,0)
XUSTERM1 ;SEA/WDE - DEACTIVATE USER ;06/08/09  15:06
"RTN","XUSTERM1",2,0)
 ;;8.0;KERNEL;**102,180,208,222,274,313,332,360,384,436,514**;Jul 10, 1995;Build 8
"RTN","XUSTERM1",3,0)
ENALL ;Interactive scan all
"RTN","XUSTERM1",4,0)
 S U="^",DTIME=$G(DTIME,60)
"RTN","XUSTERM1",5,0)
 W !!,"This option can purge all access & verify codes, mail baskets, messages,",!,"authorized senders access, keys, and electronic signature codes of users who have been terminated."
"RTN","XUSTERM1",6,0)
RD1 W !!,"Do you wish to proceed "
"RTN","XUSTERM1",7,0)
 S %=2 D YN^DICN G:%=2!(%=-1) END I %=0 S XQH="XUUSER-PURGEATT" D EN^XQH G RD1
"RTN","XUSTERM1",8,0)
RD2 W !,"Do you wish to verify each user "
"RTN","XUSTERM1",9,0)
 S %=2,XUVE=0 D YN^DICN S:%=1 XUVE=1 G:%=1 CHECK G:%=-1 END I %=0 S XQH="XUUSER-PURGEATT-VER" D EN^XQH G RD2
"RTN","XUSTERM1",10,0)
QUE W !,"Do you wish to have this queued for a later time "
"RTN","XUSTERM1",11,0)
 S %=1 D YN^DICN I %=1 D  Q
"RTN","XUSTERM1",12,0)
 . S ZTDESC="USER DEACTIVATION",ZTRTN="CHECK^XUSTERM1",ZTIO="",ZTSAVE("DUZ*")=""
"RTN","XUSTERM1",13,0)
 . D ^%ZTLOAD
"RTN","XUSTERM1",14,0)
 . Q
"RTN","XUSTERM1",15,0)
 I %=0 K X,XUVE Q
"RTN","XUSTERM1",16,0)
 ;Fall thru if user doesn't queue
"RTN","XUSTERM1",17,0)
CHECK ;Entry point for taskman.
"RTN","XUSTERM1",18,0)
 N XUDT540,XUDT90,XUDT30,FDA,XUDT,XUAAW
"RTN","XUSTERM1",19,0)
 S U="^",DT=$$DT^XLFDT(),XUDT90=$$HTFM^XLFDT($H-90,1),XUDT30=$$HTFM^XLFDT($H-30,1)
"RTN","XUSTERM1",20,0)
 S XUAAW=+$P($G(^XTV(8989.3,1,3)),U,4) ;Academic Waiver
"RTN","XUSTERM1",21,0)
 S XUDT540=$$HTFM^XLFDT($H-540,1) ;*p332
"RTN","XUSTERM1",22,0)
 S XUDA=.6,XUVE=$G(XUVE,0)
"RTN","XUSTERM1",23,0)
 F  S XUDA=$O(^VA(200,XUDA)) Q:XUDA'>0  S XUJ=$G(^(XUDA,0)) D
"RTN","XUSTERM1",24,0)
 . S XUDT=$P(XUJ,U,11)
"RTN","XUSTERM1",25,0)
 . I $P(XUJ,U,3)]"",$L(XUDT),(XUDT'>DT) D
"RTN","XUSTERM1",26,0)
 . . D GET
"RTN","XUSTERM1",27,0)
 . . I 'XUEMP K Y D:XUVE DISP Q:$D(Y)  D ACT ;XUEMP=any data to remove
"RTN","XUSTERM1",28,0)
 . . Q
"RTN","XUSTERM1",29,0)
 . I $P(XUJ,U,3)]"",'$P(XUJ,U,8),$$NOSIGNON D DISUSER(XUDA)
"RTN","XUSTERM1",30,0)
 . I $P(XUJ,U,7) D AUSER(XUDA) ;*p332
"RTN","XUSTERM1",31,0)
 . Q
"RTN","XUSTERM1",32,0)
 ;
"RTN","XUSTERM1",33,0)
END K XUEMP,XUDA,XUI,XUJ,XUK,XUACT,XUKEY,XUGRP,XUSUR,XUNAM,XUF,XUDT,XUIN,XUVE,X,DIC,XUDB,XUDC,XUDP
"RTN","XUSTERM1",34,0)
 Q
"RTN","XUSTERM1",35,0)
 ;
"RTN","XUSTERM1",36,0)
DISUSER(XUDA) ;Set DISUSER flag and reason, Remove last menu option
"RTN","XUSTERM1",37,0)
 Q:$P(XUJ,U,7)  ;DISUSER already set *p332
"RTN","XUSTERM1",38,0)
 N %,FDA S %=XUDA_","
"RTN","XUSTERM1",39,0)
 S FDA(200,%,7)=1,FDA(200,%,9.4)="User Inactive for too long"
"RTN","XUSTERM1",40,0)
 D FILE^DIE("","FDA"),CONTCL(XUDA) ;Set Disuser
"RTN","XUSTERM1",41,0)
 Q
"RTN","XUSTERM1",42,0)
 ;
"RTN","XUSTERM1",43,0)
AUSER(XUDA) ;If DISUSERed and Last Sign > 540[18Mo.*30] days, then remove"AUSER" xref
"RTN","XUSTERM1",44,0)
 I $D(^XUSEC("XUORES",XUDA)) Q  ;Owner of XUORES key ;p*436
"RTN","XUSTERM1",45,0)
 N Q S Q=$P($G(^VA(200,XUDA,1.1)),U) ;Get last sign-on
"RTN","XUSTERM1",46,0)
 I $L(Q),Q<XUDT540 K ^VA(200,"AUSER",$P(XUJ,U),XUDA) ;*p360;*p384
"RTN","XUSTERM1",47,0)
 Q
"RTN","XUSTERM1",48,0)
 ;
"RTN","XUSTERM1",49,0)
 ;If site has an Academic Affiliation Waiver the last sign-on moves to 90 days from 30.
"RTN","XUSTERM1",50,0)
NOSIGNON() ;Check last signon. Return 1 if should disable account
"RTN","XUSTERM1",51,0)
 N Q S Q=$P($G(^VA(200,XUDA,1.1)),U) ;Get last sign-on
"RTN","XUSTERM1",52,0)
 I $L(Q),Q>$S('XUAAW:XUDT30,1:XUDT90) Q 0 ;Last sign-on within 30/90 days VA Handbook 6500 ;p514
"RTN","XUSTERM1",53,0)
 S Q=$P($G(^VA(200,XUDA,1.1)),U,4) ;Get last Edit date
"RTN","XUSTERM1",54,0)
 I $L(Q),Q>XUDT30 Q 0 ;User edited in last 30 days
"RTN","XUSTERM1",55,0)
 S Q=$P($G(^VA(200,XUDA,1)),U,7) ;Create Date
"RTN","XUSTERM1",56,0)
 I $L(Q),Q>XUDT30 Q 0 ;User set up in last 30 days
"RTN","XUSTERM1",57,0)
 S Q=$P($G(^VA(200,XUDA,.1)),U) ;Get verify code change date
"RTN","XUSTERM1",58,0)
 I $L(Q),(Q+30)>$H Q 0 ;Verify code changed in last 30 days
"RTN","XUSTERM1",59,0)
 Q 1
"RTN","XUSTERM1",60,0)
 ;
"RTN","XUSTERM1",61,0)
CONTCL(XUDA) ;Clear the fields for Menu "Continue"
"RTN","XUSTERM1",62,0)
 N FDA
"RTN","XUSTERM1",63,0)
 S FDA(200,XUDA_",",202.1)="@",FDA(200,XUDA_",",202.2)="@"
"RTN","XUSTERM1",64,0)
 D FILE^DIE("","FDA") ;Clear 202.1 and 202.2
"RTN","XUSTERM1",65,0)
 Q
"RTN","XUSTERM1",66,0)
 ;
"RTN","XUSTERM1",67,0)
ACT ;
"RTN","XUSTERM1",68,0)
 D ACT^XUSTERM
"RTN","XUSTERM1",69,0)
 S XUJ=^VA(200,XUDA,0) ;Get new copy of zero node
"RTN","XUSTERM1",70,0)
 Q
"RTN","XUSTERM1",71,0)
 ;
"RTN","XUSTERM1",72,0)
GET ;Kill ^DISV entries each time, should get all CPUs at some point
"RTN","XUSTERM1",73,0)
 N XUJ
"RTN","XUSTERM1",74,0)
 D GET^XUSTERM K ^DISV(XUDA),Y
"RTN","XUSTERM1",75,0)
 Q
"RTN","XUSTERM1",76,0)
DISP ;Display info and get responses.
"RTN","XUSTERM1",77,0)
 N DA,DIE,DR,XUJ
"RTN","XUSTERM1",78,0)
 S DA=XUDA
"RTN","XUSTERM1",79,0)
 L +^VA(200,DA,0):6 D DISP2 L -^VA(200,DA,0)
"RTN","XUSTERM1",80,0)
 Q
"RTN","XUSTERM1",81,0)
DISP2 ;Do the work.
"RTN","XUSTERM1",82,0)
 W !!,$S(XUTX1(1)["User":XUNAM_$P(XUTX1(1),"User",2),1:XUTX1(1)) ;*p360
"RTN","XUSTERM1",83,0)
 S DR="9.21//YES",DIE=200 D ^DIE Q:$D(Y)  G:'$D(XUSUR) KEYS
"RTN","XUSTERM1",84,0)
 W !!,XUNAM," acts as surrogate for the following users:"
"RTN","XUSTERM1",85,0)
 S XUJ=0,XUI=3 F XUK=0:1 S XUJ=$O(XUSUR(XUJ)) Q:XUJ'>0  W:'(XUK#XUI) ! W ?(XUK#XUI*26),$P(^VA(200,XUJ,0),U,1) W !,"These surrogate privileges will be deleted on deactivation."
"RTN","XUSTERM1",86,0)
KEYS ;This section checks for authorized senders of mail groups and security keys.
"RTN","XUSTERM1",87,0)
 W !,"User will no longer be an authorized sender to any mail groups."
"RTN","XUSTERM1",88,0)
 I '$D(XUKEY) W !!,XUNAM," currently holds no keys." G KEYS1
"RTN","XUSTERM1",89,0)
 W !!,XUNAM," holds the following keys: "
"RTN","XUSTERM1",90,0)
 S XUJ=0,XUI=5 F XUK=0:1 S XUJ=$O(XUKEY(XUJ)) Q:XUJ'>0  W:'(XUK#XUI) ! W ?(XUK#XUI*15),$P($G(^DIC(19.1,XUJ,0)),U,1)
"RTN","XUSTERM1",91,0)
KEYS1 W ! S DR="9.22//YES" D ^DIE Q:$D(Y)
"RTN","XUSTERM1",92,0)
GROUP I '$D(XUGRP) W !!,XUNAM," currently is not a member of any MAIL GROUP." G GROUP1
"RTN","XUSTERM1",93,0)
 W !!,XUNAM," is a member of the following Mail Groups:"
"RTN","XUSTERM1",94,0)
 S XUI="" F XUI=0:0 S XUI=$O(XUGRP(XUI)) Q:XUI'>0  D
"RTN","XUSTERM1",95,0)
 . S XUJ=XUGRP(XUI)
"RTN","XUSTERM1",96,0)
 . I $P(XUJ,U,2)="PU"!$D(^XMB(3.8,"AB",XUDA,XUI)) W !?2,$P(XUJ,U,1) W:$P(XUJ,U,3) " (Organizer)" W ?40,$S(($P(XUJ,U,2)="PR"):"(Private)",1:"(Public)")
"RTN","XUSTERM1",97,0)
 . Q
"RTN","XUSTERM1",98,0)
GROUP1 W ! S DR="9.23//YES" D ^DIE Q:$D(Y)
"RTN","XUSTERM1",99,0)
 Q
"RTN","XUSTERM1",100,0)
 ;
"RTN","XUSTERM1",101,0)
DQ1 ;Terminate one person.
"RTN","XUSTERM1",102,0)
 N XUJ,XUDT,XUVE
"RTN","XUSTERM1",103,0)
 S XUJ=$G(^VA(200,XUDA,0)),XUDT=$P(XUJ,U,11) I XUDT,(XUDT'>DT) D
"RTN","XUSTERM1",104,0)
 . S XUVE=0 D GET I 'XUEMP D ACT
"RTN","XUSTERM1",105,0)
 . Q
"RTN","XUSTERM1",106,0)
 Q
"RTN","XUSTERM1",107,0)
 ;
"RTN","XUSTERM1",108,0)
SEND ; send deactivated message to assigned mail group
"RTN","XUSTERM1",109,0)
 K XMB,XMY
"RTN","XUSTERM1",110,0)
 S XMB(1)=$P(XUJ,"^",1)
"RTN","XUSTERM1",111,0)
 S XMB(2)=$$GET1^DIQ(200,XUDA,8)
"RTN","XUSTERM1",112,0)
 S XMB(3)=$$GET1^DIQ(200,XUDA,29)
"RTN","XUSTERM1",113,0)
 S XMB(4)=$$FMTE^XLFDT(XUDT)
"RTN","XUSTERM1",114,0)
 S XMB="XUSERDEAC" D ^XMB:$D(^XMB(3.6,"B",XMB))
"RTN","XUSTERM1",115,0)
 K XMB
"RTN","XUSTERM1",116,0)
 Q
"RTN","XUSTZ")
0^1^B8373786^B8122743
"RTN","XUSTZ",1,0)
XUSTZ ;SF/RWF - Security Twilight Zone ;11/25/08  15:21
"RTN","XUSTZ",2,0)
 ;;8.0;KERNEL;**36,180,265,514**;Jul 10, 1995;Build 8
"RTN","XUSTZ",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified
"RTN","XUSTZ",4,0)
 ;Called from XUS3 for R/S
"RTN","XUSTZ",5,0)
 N XUSTZ,DUOUT,SETLK,TMOUT
"RTN","XUSTZ",6,0)
 ;Only send the bulletin once.
"RTN","XUSTZ",7,0)
 I '$D(XUSTZ) S XUSTZ=1 D SB
"RTN","XUSTZ",8,0)
 ;Set the lockout time
"RTN","XUSTZ",9,0)
 S TMOUT=$$LKTME
"RTN","XUSTZ",10,0)
 ;Check and Lock
"RTN","XUSTZ",11,0)
 W !!,?10,$$RA
"RTN","XUSTZ",12,0)
 ;If because device is locked only lock till "Lock till time"
"RTN","XUSTZ",13,0)
 I $$LKCHECK^XUSTZIP() S TMOUT=$$LKWAIT^XUSTZIP(TMOUT)
"RTN","XUSTZ",14,0)
 ;
"RTN","XUSTZ",15,0)
 ;Make user wait for timeout.
"RTN","XUSTZ",16,0)
 F  D ASK Q:$D(DUOUT)
"RTN","XUSTZ",17,0)
 D CLEAN^XUSTZIP
"RTN","XUSTZ",18,0)
 I XUF D FILE
"RTN","XUSTZ",19,0)
 W !!,$$EZBLD^DIALOG(30810.41)
"RTN","XUSTZ",20,0)
 K ^DISV("XU",IOS)
"RTN","XUSTZ",21,0)
 Q  ;Back to XUS3
"RTN","XUSTZ",22,0)
 ;
"RTN","XUSTZ",23,0)
RA(IP) ;EF. Entry point for Remote Access (Broker/Vistalink) and R/S
"RTN","XUSTZ",24,0)
 ;This is used to Lock the User or IP.  Returns Text.
"RTN","XUSTZ",25,0)
 N TXT,TMOUT
"RTN","XUSTZ",26,0)
 S TXT="",TMOUT=$$LKTME,IP=$$IP^XUSTZIP,XUFAC=+$G(XUFAC)
"RTN","XUSTZ",27,0)
 D FILE ;File in FAA, Do now before user can disconnect
"RTN","XUSTZ",28,0)
 D CLEAN^XUSTZIP
"RTN","XUSTZ",29,0)
 ;Check if Lock the user
"RTN","XUSTZ",30,0)
 I $G(XUF(.3))>0,$$LKUSER(XUF(.3)) S TXT=$$EZBLD^DIALOG(30810.43,TMOUT)
"RTN","XUSTZ",31,0)
 ;Check and LOCK the IP.
"RTN","XUSTZ",32,0)
 I '$T,$$IPCHECK^XUSTZIP(IP) D
"RTN","XUSTZ",33,0)
 . S SETLK=$$LKSET^XUSTZIP(IP)
"RTN","XUSTZ",34,0)
 . I SETLK>0 S TXT=$$EZBLD^DIALOG(30810.44)
"RTN","XUSTZ",35,0)
 . Q
"RTN","XUSTZ",36,0)
 Q TXT
"RTN","XUSTZ",37,0)
 ;
"RTN","XUSTZ",38,0)
ASK N XUM
"RTN","XUSTZ",39,0)
 W !!!,$$EZBLD^DIALOG(30810.42)
"RTN","XUSTZ",40,0)
 X XUEOFF S %="",XUM=4,XUEXIT=0,XUC="",TMOUT=$S(TMOUT>10:TMOUT,1:10)
"RTN","XUSTZ",41,0)
A1 ;Let user keep trying
"RTN","XUSTZ",42,0)
 W !,XUSTMP(51) S X=$$ACCEPT^XUS(TMOUT) ;Access
"RTN","XUSTZ",43,0)
 Q:$D(DUOUT)  G A1:X="" ;,OK:'$D(^DISV("XU",IOS)),A1:X=""
"RTN","XUSTZ",44,0)
 I X[U W "  '^' not allowed in Access Code, Use EDIT USER option." Q
"RTN","XUSTZ",45,0)
 S:X[";" %=$P(X,";",2),X=$P(X,";") I XUF S %1="Access: "_X D FAC
"RTN","XUSTZ",46,0)
 HANG 2
"RTN","XUSTZ",47,0)
 ;
"RTN","XUSTZ",48,0)
 S %1="" I %="" W !,XUSTMP(52) S X=$$ACCEPT^XUS(60),%="" ;Verify
"RTN","XUSTZ",49,0)
 I XUF S %1="Verify: "_X D FAC
"RTN","XUSTZ",50,0)
 HANG 2
"RTN","XUSTZ",51,0)
 I XUF,XUF(.2)>50 D FILE S XUF(.2)=0,XUFAC=0
"RTN","XUSTZ",52,0)
 ;I XUF,XUF(.2)>2 D FILE S XUF(.2)=0,XUFAC=0 ;used for testing
"RTN","XUSTZ",53,0)
 S XUFAC=XUFAC+1,%=$$NO^XUS3
"RTN","XUSTZ",54,0)
 Q
"RTN","XUSTZ",55,0)
 ;
"RTN","XUSTZ",56,0)
FAC G FAC^XUS
"RTN","XUSTZ",57,0)
 ;
"RTN","XUSTZ",58,0)
FILE ;File data into Access Atempt Log
"RTN","XUSTZ",59,0)
 ;Call needs, IOS,XUVOL,XUF(.1),(.2),(.3),XUT,XUCI,IO("ZIO"),XUNOW
"RTN","XUSTZ",60,0)
 ;Want to use IO("IP") in place of IO("ZIO") if we have it.
"RTN","XUSTZ",61,0)
 Q:'$G(XUF)
"RTN","XUSTZ",62,0)
 N XUT,ZIO S ZIO=$G(IO("ZIO")) S:$D(IO("IP")) IO("ZIO")=IO("IP")
"RTN","XUSTZ",63,0)
 S X1=IOS,X2=DT F I=1:1:XUF(.2) S X=XUF(I) D EN^XUSHSHP S XUF(I)=X
"RTN","XUSTZ",64,0)
 S XUT=XUFAC
"RTN","XUSTZ",65,0)
 ;S XUSLNT=1,XQZ="FAAL^ZUA[MGR]" D DO^%XUCI
"RTN","XUSTZ",66,0)
 D FAAL^ZUA
"RTN","XUSTZ",67,0)
 F I=1:1:XUF(.2) K XUF(I)
"RTN","XUSTZ",68,0)
 S XUF(.2)=0,XUFAC=0 S:$L(ZIO) IO("ZIO")=ZIO
"RTN","XUSTZ",69,0)
 Q
"RTN","XUSTZ",70,0)
 ;
"RTN","XUSTZ",71,0)
SB ;Send the XUSLOCK bulletin
"RTN","XUSTZ",72,0)
 S XMB="XUSLOCK",XMB(1)=$S($D(IO("IP")):IO("IP"),$D(IO("ZIO")):IO("ZIO"),1:$I),XMB(2)=+XUFAC,XMB(3)=ION
"RTN","XUSTZ",73,0)
 D ^XMB
"RTN","XUSTZ",74,0)
 Q
"RTN","XUSTZ",75,0)
LKTME() ;Get Lock-out time
"RTN","XUSTZ",76,0)
 I $D(XOPT) Q $P(XOPT,U,3)
"RTN","XUSTZ",77,0)
 Q $P(^XTV(8989.3,1,"XUS"),U,3)
"RTN","XUSTZ",78,0)
 ;
"RTN","XUSTZ",79,0)
LKUSER(IEN) ;Lock user, Return: 0 not locked, 1 locked
"RTN","XUSTZ",80,0)
 Q:$P($G(^XTV(8989.3,1,405)),U,4)'="y" 0
"RTN","XUSTZ",81,0)
 N FDA
"RTN","XUSTZ",82,0)
 ;If already locked don't change time
"RTN","XUSTZ",83,0)
 S FDA=$$GET1^DIQ(200,IEN_",",202.05,"I")
"RTN","XUSTZ",84,0)
 I FDA>XUNOW Q 0 ;Still Locked.
"RTN","XUSTZ",85,0)
 ;If locking user clear XUFAC.
"RTN","XUSTZ",86,0)
 D CLRFAC^XUS3($G(IO("IP")))
"RTN","XUSTZ",87,0)
 K FDA ;Add d,h,m,s
"RTN","XUSTZ",88,0)
 S FDA(200,IEN_",",202.05)=$$HTFM^XLFDT($$HADD^XLFDT($H,0,0,0,TMOUT))
"RTN","XUSTZ",89,0)
 D UPDATE^DIE("","FDA")
"RTN","XUSTZ",90,0)
 Q 1
"VER")
8.0^22.0
"^DD",200,200,501.1,0)
NETWORK USERNAME^FX^^501;1^K:$L(X)>15!($L(X)<9) X I $D(X) S X=$$UP^XLFSTR(X) K:$$NETNM^XUSER1(X,DA) X
"^DD",200,200,501.1,3)
Enter the Active Directory Username (9-15 characters).
"^DD",200,200,501.1,21,0)
^^4^4^3090707^
"^DD",200,200,501.1,21,1,0)
This is the username that is used by the Windows Active Directory.
"^DD",200,200,501.1,21,2,0)
It should be 'VHA' + 3 char station ID + first 5 of last name + first
"^DD",200,200,501.1,21,3,0)
character of first name.
"^DD",200,200,501.1,21,4,0)
Holders of the XUMGR key can override this.
"^DD",200,200,501.1,23,0)
^^2^2^3090707^
"^DD",200,200,501.1,23,1,0)
Holders of the XUMGR key can override the syntax check.
"^DD",200,200,501.1,23,2,0)
Users with DUZ(0)="@" can override the syntax check.
"^DD",200,200,501.1,"DT")
3090707
"^DD",200,200,747.11,0)
APPOINTMENT STATUS^S^1:FULL-TIME;2:PART-TIME;3:CONSULTING;4:CONTRACT;5:RESIDENT;6:FEE BASIS, ON STATION;7:SPECIALTY FELLOW;8:WOC;9:OTHER;^QAR12;1^Q
"^DD",200,200,747.11,3)
Enter the appropriate Appointment Status.
"^DD",200,200,747.11,21,0)
^^1^1^2910403^^
"^DD",200,200,747.11,21,1,0)
Contains the Appointment Status for this person.
"^DD",200,200,747.11,"DT")
2900817
"^DD",200,200,747.113,0)
RENEW DATE^D^^QAR8;2^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",200,200,747.113,3)
Enter the Renewal Date for our General Privilege.
"^DD",200,200,747.113,21,0)
^^1^1^2910403^
"^DD",200,200,747.113,21,1,0)
Contains the Renewal Date for our General Privilege.
"^DD",200,200,747.113,"DT")
2900821
"^DD",200,200,747.44,0)
DEA EXPIRATION DATE^D^^QAR;9^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",200,200,747.44,3)
Enter DEA # Expiration Date
"^DD",200,200,747.44,21,0)
^^1^1^2920731^
"^DD",200,200,747.44,21,1,0)
This field contains the expiration date for DEA #.
"^DD",200,200,747.44,"DT")
2910723
"^DD",8989.3,8989.3,13,0)
ACADEMIC AFFILIATION WAIVER^S^0:No;1:Yes;^3;4^Q
"^DD",8989.3,8989.3,13,3)
Does your site have an Academic Affiliation Waiver.
"^DD",8989.3,8989.3,13,21,0)
^^13^13^3090609^
"^DD",8989.3,8989.3,13,21,1,0)
The VA Handbook 6500 page 60 requires:
"^DD",8989.3,8989.3,13,21,2,0)
6. POLICY AND PROCEDURES, c. Technical Controls,
"^DD",8989.3,8989.3,13,21,3,0)
 (2) Logical Access Controls.
"^DD",8989.3,8989.3,13,21,4,0)
   d. Accounts are automatically disabled if inactive for 30 days.
"^DD",8989.3,8989.3,13,21,5,0)
 
"^DD",8989.3,8989.3,13,21,6,0)
The Office of Academic Affiliation requested a waiver to the 30 day
"^DD",8989.3,8989.3,13,21,7,0)
disabling of inactive accounts asking it be 90 days and this waiver was 
"^DD",8989.3,8989.3,13,21,8,0)
approved.
"^DD",8989.3,8989.3,13,21,9,0)
 
"^DD",8989.3,8989.3,13,21,10,0)
This field controls if the VA Handbook 6500 30 day limit is used or the
"^DD",8989.3,8989.3,13,21,11,0)
site has an Academic Affiliation and the 90 day limit is to be used.
"^DD",8989.3,8989.3,13,21,12,0)
 
"^DD",8989.3,8989.3,13,21,13,0)
There is a copy of the waiver attached to Remedy Ticket 283028.
"^DD",8989.3,8989.3,13,"DT")
3090609
**END**
**END**
