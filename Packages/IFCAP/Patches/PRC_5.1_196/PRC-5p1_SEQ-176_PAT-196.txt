=============================================================================
Run Date: JAN 17, 2018                     Designation: PRC*5.1*196
Package : PRC - IFCAP                         Priority: Mandatory
Version : 5.1       SEQ #176                    Status: Released
                  Compliance Date: FEB 17, 2018
=============================================================================

Associated patches: (v)PRC*5.1*79  <<= must be installed BEFORE `PRC*5.1*196'
                    (v)PRC*5.1*130 <<= must be installed BEFORE `PRC*5.1*196'
                    (v)PRC*5.1*139 <<= must be installed BEFORE `PRC*5.1*196'
                    (v)PRC*5.1*184 <<= must be installed BEFORE `PRC*5.1*196'

Subject: CEILING TX LOOP;DELIVERY ORDER OVERCOMMIT;NEXT FY ORDERS REJECTED BY F
MS

Category: 
  - Routine
  - Input Template

Description:
============

 This patch will address three issues:
  
 1. Add new Transaction (Ceiling) may have endless loop at times
  
 2. Auto obligation of Delivery Orders ignores Overcommit (off).
  
 3. Next FY 1358s, 2237s and orders rejected by FMS in that FY.
  
  
 ASSOCIATED NSR(s):
 =================
 N/A
  
  

 ASSOCIATED TICKET(S):
 ====================
 1. I7644018FY16 - Option Add new Transaction (Ceiling) may have endless
                   loop at times
      Duplicate:   I7642633FY16
 2. I9532231FY16 - Overcommit issue with Delivery Orders
  
 3. I6923314FY16 - 1358's and 2237s for next/last fiscal year are 
                   rejecting in that year by Financial Management 
                   System (FMS)
  
  
  
 PARTICIPATING TEST SITES:
 ========================
 St. Cloud VAMC 
  
  
 CA SDM TICKET OVERVIEW:
 ======================= 

  
 1. I7642633FY16 - Option Add new Transaction (Ceiling) may have endless
                   loop at times
  
    Problem:
    -------
    When using option PRCB ADD NEW TRANSACTION the processing 
    will enter an endless loop when File FUND DISTRIBUTION [#421]
    has no existing 'AD' cross-reference.
  
  
    Resolution:
    ----------
    Modify the entry point for option PRCB ADD NEW TRANSACTION
    to check for a non-existing 'AD' cross-reference and create a 
    "dummy" file entry to insure processing will continue unabated.
  
 Routines: PRCBE
  
  

  
 2. I9532231FY16 - Overcommit issue with Delivery Orders
  
    Problem:
    -------
    When creating Delivery Orders that are auto obligated, the obligation
    process does NOT take into consideration the Overcommit switch which
    should prevent orders from exceeding the budgeted amount when set
    NO.
  
    Resolution:
    ----------
    Modify the Delivery order processing auto obligation to check the 
    Overcommit switch (as it does for Purchase Card orders) and when set to
    NO prevent the completion of the order when the order amount exceeds 
    the remaining budgeted amount for Fund Control Point.
  
 Routines: PRCHNPO4
  
  

 3. I6923314FY16 - 1358's and 2237s for next/last fiscal year are 
                   rejecting in that fiscal year by FMS
  
    Problem:
    -------
    When creating a requisition or any type of order for the next fiscal
    year, FMS is rejecting the Generic Code Sheet for MO or SO 
    documents for orders/1358s in the new fiscal year due to not
    having the correct fiscal date matching the next/last fiscal year order
    dates.
  
    Resolution:
    ----------
    Modify all requisition and all order processing to insure the correct
    fiscal date is passed to the Generic Code Sheet creation of MO/SO 
    documents sent to FMS. Insure all date entry is aligned with the 
    fiscal year the requisition or order is designated for.
  
 Routines: PRCEN, PRCEOB1, PRCSEA, PRCSEB, PRCSEB0, PRCFFU, PRCFFU8
  

 Input Templates: PRCE NEW 1358, PRCE NEW 1358S, PRCSEN2237B
                  PRCSEN2237S, PRCSENPR, PRCSENR&NR, PRCSENPRS,
                  PRCSENR&NRS
  
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 You may install this patch at any time without interruption to users. 
 It should take less than 5 minutes to install this patch.
  
   
   
  1.  OBTAIN PATCHES
      ==============
   
      Obtain the host file PRC_51_196.KID, which contains the following
      patch install:
   
         PRC*5.1*196

         GEC*2.0*40
         
   
      Sites can retrieve VistA software from the following SFTP addresses.
      The preferred method is to SFTP the files from:
   
         download.vista.domain.ext
   
      This will transmit the files from the first available SFTP server.
      Sites may also elect to retrieve software directly from a specific
      server as follows:
   
         Hines                   sftp.fo-hines.domain.ext
         Salt Lake City          sftp.fo-slc.domain.ext
   
      The PRC_51_196.KID host file is located in the anonymous.software
      directory.  Use ASCII Mode when downloading the file.
   
  2.  From the Installation menu, select the LOAD A DISTRIBUTION option.
   

      When prompted for "Enter a Host File:", enter the full directory path
      where you saved the host file PRC_51_196.KID (e.g.,
      SYS$SYSDEVICE:[ANONYMOUS]PRC_51_196.KID).
   
      When prompted for "OK to continue with Load? NO//", enter "YES."
   
      The following will display:
   
         Loading Distribution...
   
         PRC*5.1*196
         GEC*2.0*40
   
   
  Use INSTALL NAME: PRC*5.1*196 to install this distribution.
   
  3.  RUN OPTIONAL INSTALLATION OPTIONS FOR BUILD:
      ==================================================
      From the Installation menu, you may select to use the following
      options (when prompted for the INSTALL NAME, enter

      PRC*5.1*196):
   
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch.  It will not
          backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
   
  4.  INSTALL BUILD:
      ====================
      This is the step to start the installation of this KIDS build.  This
      will need to be run for PRC*5.1*196 build.
   
      a.  Choose the Install Package(s) option to start the install.
      b.  When prompted for the "Select INSTALL NAME.
      c.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion
            of Install?" YES//  enter YES.
      d.  When prompted "Want KIDS to INHIBIT LOGONs during the
          install? NO//"  enter NO.
      e.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
          and Protocols? YES//"  enter YES.
      f.  When prompted "Enter options you wish to mark as 'Out Of
          Order':"  enter the following options:
   
        Purchase Card Menu                    [PRCH PURCHASE CARD MENU]
        Combined A&MM Menus                   [PRCHUSER MASTER]
        Control Point Official's Menu         [PRCSCP OFFICIAL]
        Delivery Orders Menu                  [PRCH DELIVERY ORDER MENU]
        Funds Distribution & Accounting Menu  [PRCF MASTER]
        Control Point Clerk's Menu            [PRCSCP CLERK]
        Requestor's Menu                      [PRCSREQUESTOR]
        Amendment to Purchase Order           [PRCHPC AMEND]
  
      g.  When prompted "Enter protocols you wish to mark as 'Out Of
          Order':"  enter <return>.

      h.  When prompted "Delay Install (Minutes):  (0-60): 0//"  enter an
          appropriate number of minutes to delay the installation in 
          order to give users enough time to exit the disabled options
          before the installation starts.
      i.  When prompted "Device: Home//"  respond with the correct device.

Routine Information:
====================
The second line of each of these routines now looks like:
;;5.1;IFCAP;**[Patch List]**;Oct 20, 2000;Build 15

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PRCBE
    Before: B19043867   After: B21566382  **139,196**
Routine Name: PRCEN
    Before: B49903338   After: B57712163  **23,148,150,196**
Routine Name: PRCEOB1
    Before:  B5824737   After:  B6964382  **148,196**

Routine Name: PRCFFU
    Before: B38123616   After: B39785146  **196**
Routine Name: PRCFFU8
    Before: B12574203   After: B14240820  **130,196**
Routine Name: PRCHNPO4
    Before: B65934358   After: B67972862  **51,56,81,79,196**
Routine Name: PRCSEA
    Before: B77709239   After: B87690038  **81,147,150,174,196**
Routine Name: PRCSEB
    Before: B21871782   After: B29593062  **81,174,184,196**
Routine Name: PRCSEB0
    Before: B23160815   After: B25973826  **81,174,196**
 
Routine list of preceding patches: 79, 130, 139, 184

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUL 13, 2016
Completed By:                               Date Completed: JAN 16, 2018
Released By :                               Date Released : JAN 17, 2018



Packman Mail Message:
=====================

No routines included

