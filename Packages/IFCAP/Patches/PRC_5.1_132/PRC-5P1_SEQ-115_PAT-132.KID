Released PRC*5.1*132 SEQ #115
Extracted from mail message
**KIDS**:PRC*5.1*132^

**INSTALL NAME**
PRC*5.1*132
"BLD",5923,0)
PRC*5.1*132^IFCAP^0^3090312^y
"BLD",5923,1,0)
^^5^5^3090122^^
"BLD",5923,1,1,0)
1. Jumping to History of Item Display/Print
"BLD",5923,1,2,0)
 
"BLD",5923,1,3,0)
2. Order Form [PRCP CATALOG/ORDER FORM PRINT] problem
"BLD",5923,1,4,0)
 
"BLD",5923,1,5,0)
3. Report Issue 
"BLD",5923,4,0)
^9.64PA^^
"BLD",5923,6.3)
3
"BLD",5923,"KRN",0)
^9.67PA^779.2^20
"BLD",5923,"KRN",.4,0)
.4
"BLD",5923,"KRN",.401,0)
.401
"BLD",5923,"KRN",.402,0)
.402
"BLD",5923,"KRN",.403,0)
.403
"BLD",5923,"KRN",.5,0)
.5
"BLD",5923,"KRN",.84,0)
.84
"BLD",5923,"KRN",3.6,0)
3.6
"BLD",5923,"KRN",3.8,0)
3.8
"BLD",5923,"KRN",9.2,0)
9.2
"BLD",5923,"KRN",9.8,0)
9.8
"BLD",5923,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",5923,"KRN",9.8,"NM",1,0)
PRCHRPT1^^0^B45660011
"BLD",5923,"KRN",9.8,"NM",2,0)
PRCPRCAT^^0^B29532373
"BLD",5923,"KRN",9.8,"NM",3,0)
PRCHPAM^^0^B24960601
"BLD",5923,"KRN",9.8,"NM",4,0)
PRCHPAM1^^0^B24974135
"BLD",5923,"KRN",9.8,"NM","B","PRCHPAM",3)

"BLD",5923,"KRN",9.8,"NM","B","PRCHPAM1",4)

"BLD",5923,"KRN",9.8,"NM","B","PRCHRPT1",1)

"BLD",5923,"KRN",9.8,"NM","B","PRCPRCAT",2)

"BLD",5923,"KRN",19,0)
19
"BLD",5923,"KRN",19.1,0)
19.1
"BLD",5923,"KRN",101,0)
101
"BLD",5923,"KRN",409.61,0)
409.61
"BLD",5923,"KRN",771,0)
771
"BLD",5923,"KRN",779.2,0)
779.2
"BLD",5923,"KRN",870,0)
870
"BLD",5923,"KRN",8989.51,0)
8989.51
"BLD",5923,"KRN",8989.52,0)
8989.52
"BLD",5923,"KRN",8994,0)
8994
"BLD",5923,"KRN","B",.4,.4)

"BLD",5923,"KRN","B",.401,.401)

"BLD",5923,"KRN","B",.402,.402)

"BLD",5923,"KRN","B",.403,.403)

"BLD",5923,"KRN","B",.5,.5)

"BLD",5923,"KRN","B",.84,.84)

"BLD",5923,"KRN","B",3.6,3.6)

"BLD",5923,"KRN","B",3.8,3.8)

"BLD",5923,"KRN","B",9.2,9.2)

"BLD",5923,"KRN","B",9.8,9.8)

"BLD",5923,"KRN","B",19,19)

"BLD",5923,"KRN","B",19.1,19.1)

"BLD",5923,"KRN","B",101,101)

"BLD",5923,"KRN","B",409.61,409.61)

"BLD",5923,"KRN","B",771,771)

"BLD",5923,"KRN","B",779.2,779.2)

"BLD",5923,"KRN","B",870,870)

"BLD",5923,"KRN","B",8989.51,8989.51)

"BLD",5923,"KRN","B",8989.52,8989.52)

"BLD",5923,"KRN","B",8994,8994)

"BLD",5923,"QUES",0)
^9.62^^
"BLD",5923,"REQB",0)
^9.611^2^2
"BLD",5923,"REQB",1,0)
PRC*5.1*1^2
"BLD",5923,"REQB",2,0)
PRC*5.1*106^2
"BLD",5923,"REQB","B","PRC*5.1*1",1)

"BLD",5923,"REQB","B","PRC*5.1*106",2)

"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1^3001012^3001019^68
"PKG",455,22,1,"PAH",1,0)
132^3090312
"PKG",455,22,1,"PAH",1,1,0)
^^5^5^3090312
"PKG",455,22,1,"PAH",1,1,1,0)
1. Jumping to History of Item Display/Print
"PKG",455,22,1,"PAH",1,1,2,0)
 
"PKG",455,22,1,"PAH",1,1,3,0)
2. Order Form [PRCP CATALOG/ORDER FORM PRINT] problem
"PKG",455,22,1,"PAH",1,1,4,0)
 
"PKG",455,22,1,"PAH",1,1,5,0)
3. Report Issue 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","PRCHPAM")
0^3^B24960601^B24976923
"RTN","PRCHPAM",1,0)
PRCHPAM ;WISC/AKS,ID/TKW/RSD/RHD-PRINT AMENDMENT ;4/22/99  15:39
"RTN","PRCHPAM",2,0)
V ;;5.1;IFCAP;**132**;Oct 20, 2000;Build 3
"RTN","PRCHPAM",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCHPAM",4,0)
 ;
"RTN","PRCHPAM",5,0)
 N SITE
"RTN","PRCHPAM",6,0)
 S D0=$S($D(PRCHPO):PRCHPO,1:D0),D1=$S($D(PRCHAM):PRCHAM,1:D1)
"RTN","PRCHPAM",7,0)
 S U="^" Q:'$D(^PRC(442,D0,6,D1))  S PRCH0=$G(^(D1,0)) Q:PRCH0=""
"RTN","PRCHPAM",8,0)
 S PRCH1=$G(^(1)) Q:PRCH1=""
"RTN","PRCHPAM",9,0)
 S PRCHAV=$S($P(PRCH0,U,8)="Y":1,1:0),PRCHP0=$G(^PRC(442,D0,0)) Q:PRCHP0=""
"RTN","PRCHPAM",10,0)
 S PRCHP1=$G(^(1)) Q:PRCHP1=""
"RTN","PRCHPAM",11,0)
 S PRC("SITE")=$P(+PRCHP0,"-",1),PRCHUL="",$P(PRCHUL,"_",96)=""
"RTN","PRCHPAM",12,0)
 S SITE=$P($G(^PRC(442,D0,23)),U,7),SITE=$S($G(SITE)]"":SITE,1:PRC("SITE"))
"RTN","PRCHPAM",13,0)
 S PRCHPG=1,PRCHPGT=2
"RTN","PRCHPAM",14,0)
 K ^UTILITY($J,"W"),^TMP($J,"AMD") S DIWL=1,DIWR=91,DIWF="",P=0 I PRCHAV'>0,$P($G(^PRC(442,D0,6,D1,2,0)),U,4)'>0 D START^PRCHDSP4(D0,D1) G CONT
"RTN","PRCHPAM",15,0)
 F PRCHJJ=0:0 S P=$O(^PRC(442,D0,6,D1,2,P)) Q:P=""!(P'>0)  S X=^(P,0) D DIWP^PRCUTL($G(DA))
"RTN","PRCHPAM",16,0)
 K PRCHJJ S %X="^UTILITY($J,""W"",DIWL,",%Y="^TMP($J,""AMD"",DIWL," D %XY^%RCR S PRCHPG=1,PRCHPGT=2
"RTN","PRCHPAM",17,0)
 S X=+^UTILITY($J,"W",DIWL) I X>37 S X=X-52 F I=0:0 Q:X'>41  S X=X-56,PRCHPGT=PRCHPGT+1
"RTN","PRCHPAM",18,0)
 S:+^UTILITY($J,"W",DIWL)>37 PRCHPGT=PRCHPGT+1
"RTN","PRCHPAM",19,0)
CONT G:PRCHAV EN2^PRCHPAM1
"RTN","PRCHPAM",20,0)
 D HDR^PRCHPAM1 W "2.AMENDMENT/MODIFICATION NO. ",?29,"|3.EFFECTIVE DATE",?46,"|4.REQUISITION/PURCHASE REQ.NO.",?77,"|5.PROJECT NO."
"RTN","PRCHPAM",21,0)
 W !?7,$P(PRCH0,U,1),?29,"|    " S Y=$P(PRCH0,U,2) D DT S Y=0 I $P(PRCHP0,U,12),$D(^PRCS(410,+$P(PRCHP0,U,12),0)) S Y=$P(^(0),U,1)
"RTN","PRCHPAM",22,0)
 W ?46,"|  ",$S(Y:Y_"/",1:"        "),$P($P(PRCHP0,U,1),"-",2),?77,"|  (If applicable)",!,?29,"|",?46,"|",?77,"|"
"RTN","PRCHPAM",23,0)
 W !,$E(PRCHUL,1,29),"|",$E(PRCHUL,1,16),"|",$E(PRCHUL,1,30),"|",$E(PRCHUL,1,18)
"RTN","PRCHPAM",24,0)
 W !,"6.ISSUED BY ",?26,"CODE|________| 7.ADMINISTERED BY (If other than item 6)   CODE|_______" S Y=$G(^PRC(411,SITE,3))
"RTN","PRCHPAM",25,0)
 W !?3,"A&MM SERVICE",?39,"|",!?3,"VA MEDICAL CENTER",?39,"|",! F I=1:1:2 W:$P(Y,U,I)]"" ?3,$P(Y,U,I),?39,"|",!?3
"RTN","PRCHPAM",26,0)
 W $P(Y,U,3),", ",$P($G(^DIC(5,+$P(Y,U,4),0)),U,2),"  ",$P(Y,U,5),?39,"|" F I=1:1:2-I W !?39,"|"
"RTN","PRCHPAM",27,0)
 S X=$G(^PRC(440,+PRCHP1,0)) W !,$E(PRCHUL,1,39),"|",$E(PRCHUL,1,56),!,"8.NAME & ADDRESS OF CONTRACTOR (No.,street,county,",?52,"|   | 9A.AMENDMENT OF SOLICITATION NO.",!
"RTN","PRCHPAM",28,0)
 W ?31,"State and ZIP Code)",?52,"|   |",!,?13,$P(X,U,1),?52,"|   |",$E(PRCHUL,1,39),! S J=1 D AL
"RTN","PRCHPAM",29,0)
 W ?52,"|   | 9B.DATED (See Item 11)",! D:J'>5 AL W ?52,"|   |",! D:J'>5 AL W ?52,"|___|",$E(PRCHUL,1,39),!
"RTN","PRCHPAM",30,0)
 D:J'>5 AL W ?52,"|   | 10A.MODIFICATION OF CONTRACT/ORDER NO.",! D:J'>5 AL W ?52,"| X |",?61,$P(PRCHP0,U,1),!
"RTN","PRCHPAM",31,0)
 S PRCVFAX=$P($G(^PRC(440,+PRCHP1,10)),U,6) W:PRCVFAX'="" ?13,"FAX: ",PRCVFAX K PRCVFAX
"RTN","PRCHPAM",32,0)
 W ?52,"|   |",$E(PRCHUL,1,39),!,$E(PRCHUL,1,52),?52,"|   | 10B.DATED (See Item 13)",!,"CODE",?30,"|FACILITY CODE",?52,"|   |",?61 S Y=$P(PRCHP1,U,15) D DT
"RTN","PRCHPAM",33,0)
 W !,$E(PRCHUL,1,30),"|",$E(PRCHUL,1,21),"|___|",$E(PRCHUL,1,38),!,?16,"11.THIS ITEM ONLY APPLIES TO AMENDMENTS OF SOLICITATIONS",!,PRCHUL,!
"RTN","PRCHPAM",34,0)
 W !,"____ The above numbered solicitation is amended as set forth in Item 14. The hour and date ",!,"specified for receipt of offers  ____is extended  ____is not extended.",!
"RTN","PRCHPAM",35,0)
 W "Offers must acknowledge receipt of this amendment prior to the hour and date specified in the",!,"solicitation or as amended by one of the following methods:",!!
"RTN","PRCHPAM",36,0)
 W "(a) By completing Items 8 and 15 and returning ______ copies of the amendment:",!,"(b) By acknowledging receipt of this amendment on each copy of the offer submitted: or",!
"RTN","PRCHPAM",37,0)
 W "(c) By separate letter or telegram which includes a reference to the solicitation and amendment",!,"numbers.  FAILURE OF YOUR ACKNOWLEDGEMENT TO BE RECEIVED AT THE PLACE DESIGNATED FOR THE RECEIPT",!
"RTN","PRCHPAM",38,0)
 W "OF OFFERS PRIOR TO THE HOUR AND DATE SPECIFIED MAY RESULT IN REJECTION OF YOUR OFFER. If by vir-",!,"tue of this amendment you desire to change an offer already submitted, such change may be made",!
"RTN","PRCHPAM",39,0)
 W "by telegram or letter, provided each telegram or letter makes reference to the solicitation and",!,"this amendment, and is received prior to the opening hour and date specified.",!
"RTN","PRCHPAM",40,0)
 G ^PRCHPAM1
"RTN","PRCHPAM",41,0)
 ;
"RTN","PRCHPAM",42,0)
DT Q:'Y  W Y\100#100,"/",Y#100\1,"/",Y\10000+1700
"RTN","PRCHPAM",43,0)
 Q
"RTN","PRCHPAM",44,0)
 ;
"RTN","PRCHPAM",45,0)
AL F I=J:1 S J=J+1 Q:J>6  I $P(X,U,J)]"" G:J=6 AL1 W ?13,$P(X,U,J) Q
"RTN","PRCHPAM",46,0)
 Q
"RTN","PRCHPAM",47,0)
 ;
"RTN","PRCHPAM",48,0)
AL1 W ?13,$P(X,U,6),", ",$P($G(^DIC(5,+$P(X,U,7),0)),U,2),"  ",$P(X,U,8)
"RTN","PRCHPAM",49,0)
 Q
"RTN","PRCHPAM1")
0^4^B24974135^B24981155
"RTN","PRCHPAM1",1,0)
PRCHPAM1 ;WISC/AKS,ID/TKW/RSD-PRINT AMENDMENT ;4/22/99  18:40
"RTN","PRCHPAM1",2,0)
V ;;5.1;IFCAP;**132**;Oct 20, 2000;Build 3
"RTN","PRCHPAM1",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCHPAM1",4,0)
 ;
"RTN","PRCHPAM1",5,0)
ACC W PRCHUL,!,"12.ACCOUNTING AND APPROPRIATION DATA (If required)" S X=$P(PRCH0,U,3) W ?56,"TOTAL AMOUNT: $",$J($P(PRCHP0,U,15),10,2)
"RTN","PRCHPAM1",6,0)
 W !?5,$S('X:"",X<0:"Decrease ",1:"Increase "),$P(PRCHP0,U,4),"-",$P($P(PRCHP0,U,3)," ",1),"-",$P(PRCHP0,U,5),$S($P(PRCHP0,U,6)>0:"-"_$P(PRCHP0,U,6),1:""),$S($P(PRCHP0,U,8)>0:"-"_$P(PRCHP0,U,8),1:"")
"RTN","PRCHPAM1",7,0)
 I X W "  $",$J($S(X<0:-X,1:X),10,2)
"RTN","PRCHPAM1",8,0)
 S X=$P(PRCH1,U,6) I X]"" S X=$$DECODE^PRCHES7(D0,D1) W ?56,"/ES/"_X
"RTN","PRCHPAM1",9,0)
 W !,PRCHUL,!?16,"13.THIS ITEM APPLIES ONLY TO MODIFICATIONS OF CONTRACTS/ORDERS.",!?19,"IT MODIFIES THE CONTRACT/ORDER NO. AS DESCRIBED IN ITEM 14.",!,PRCHUL,!
"RTN","PRCHPAM1",10,0)
 S Y=$G(^PRCD(442.2,+$P(PRCH0,U,4),0)),PRCHX=$P(Y,U,1),DIWL=1,DIWR=92,DIWF=""
"RTN","PRCHPAM1",11,0)
 S PRCHI=$S($P(PRCHP0,U,2)=8:10,1:0)
"RTN","PRCHPAM1",12,0)
 F  S PRCHI=$O(^PRCD(442.2,PRCHI)) Q:PRCHI>$S($P(PRCHP0,U,2)=8:19,1:10)  S Y=^(PRCHI,0),PRCHTYP=$P(Y,U,1) I PRCHTYP="A"!(PRCHTYP="B")!(PRCHTYP="C")!(PRCHTYP="D") D A
"RTN","PRCHPAM1",13,0)
 S X="_",Y="_" S:$P(PRCH0,U,5)="Y" X="X" S:$P(PRCH0,U,5)'="Y" Y="X"
"RTN","PRCHPAM1",14,0)
 W "IMPORTANT: Contractor __"_Y_"__ is not,  __"_X_"__ is required to sign this document and return",!?14
"RTN","PRCHPAM1",15,0)
 S Y=$S($P(PRCH0,U,6):$P(PRCH0,U,6),1:"_") W "__"_Y_"__ copies to the issuing office.",!,PRCHUL
"RTN","PRCHPAM1",16,0)
 D HDR
"RTN","PRCHPAM1",17,0)
 W !!,"14.DESCRIPTION OF AMENDMENT/MODIFICATION (Organized by UCF section headings, including solicita-",!?42,"tion/contract subject matter where feasible.)",!! S PRCHDY=PRCHDY+5
"RTN","PRCHPAM1",18,0)
 ;
"RTN","PRCHPAM1",19,0)
ITEM F I=0:0 S I=$O(^TMP($J,"AMD",1,I)) Q:'I  D:PRCHDY>60 H W ?3,^(I,0),! S PRCHDY=PRCHDY+1
"RTN","PRCHPAM1",20,0)
 D:PRCHDY>57 HDR W !,"Except as provided herein, all terms and conditions of the document referenced in Item 9A or ,",!,"10A as heretofore changed, remains unchanged and in full force and effect.",!,PRCHUL,! S PRCHDY=PRCHDY+4
"RTN","PRCHPAM1",21,0)
 D:PRCHDY>47 HDR W "15A.NAME AND TITLE OF SIGNER (Type or print)",?46,"|16A.NAME AND TITLE OF CONTRACTING OFFICER (Type",!?46,"|    or print)",!
"RTN","PRCHPAM1",22,0)
 S X=$P(PRCH1,U,2) I X]"" S DA=D0,P=+PRCH1
"RTN","PRCHPAM1",23,0)
 W ?46,"| ",$$DECODE^PRCHES6(D0,D1),"  Contracting Officer"
"RTN","PRCHPAM1",24,0)
 D FAXEMAIL^PRCHFPT3(+PRCH1,.PRCFAX,.PRCEMAIL)
"RTN","PRCHPAM1",25,0)
 W:PRCFAX'="" !?46,"|FAX: ",PRCFAX
"RTN","PRCHPAM1",26,0)
 W:PRCEMAIL'="" !?46,"|E-MAIL",!?46,"|",PRCEMAIL K PRCFAX,PRCEMAIL
"RTN","PRCHPAM1",27,0)
 W !,$E(PRCHUL,1,46),"|",$E(PRCHUL,1,49),!
"RTN","PRCHPAM1",28,0)
 W "15B.CONTRACTOR/OFFEROR",?34,"|15C.DATE",?46,"|16B.UNITED STATES OF AMERICA",?82,"|16C.DATE",!,?34,"|    SIGNED",?46,"|",?82,"|    SIGNED",!
"RTN","PRCHPAM1",29,0)
 W ?2,$E(PRCHUL,1,28),?34,"|",?46,"| BY ",$E(PRCHUL,1,29),?82,"|",!
"RTN","PRCHPAM1",30,0)
 W ?1,"(Signature of person authorized",?34,"|",?46,"|(Signature of Contracting Officer)",?82,"|",!
"RTN","PRCHPAM1",31,0)
 W ?2,"to sign)",?34,"|",?46,"|",?82,"|",!,$E(PRCHUL,1,34),"|",$E(PRCHUL,1,11),"|",$E(PRCHUL,1,35),"|",$E(PRCHUL,1,13),!
"RTN","PRCHPAM1",32,0)
 W "Exception to SF-30",?75,"SF-30 ADP (Rev 10-83)",!,"Approved by OIRM ____",!
"RTN","PRCHPAM1",33,0)
 ;
"RTN","PRCHPAM1",34,0)
EXIT K D0,D1,DA,P,I,J,X,Y,DIWF,DIWL,DIWR,PRCH0,PRCH1,PRCHAV,PRCHP0,PRCHP1,PRCHI,PRCHTYP,PRCHUL,PRCHX,PRCHDY,PRCHPG,PRCHPGT,PRCHREPR,PRCHTPG,^UTILITY($J),^TMP($J) D:$D(ZTSK) KILL^%ZTLOAD K ZTSK
"RTN","PRCHPAM1",35,0)
 Q
"RTN","PRCHPAM1",36,0)
 ;
"RTN","PRCHPAM1",37,0)
A K ^UTILITY($J,"W") S X=$P(Y,U,2) D DIWP^PRCUTL($G(DA)) S X="" S:PRCHX=PRCHTYP X=$P(PRCH0,U,7) D:X]"" DIWP^PRCUTL($G(DA))
"RTN","PRCHPAM1",38,0)
 W:PRCHX=PRCHTYP ?1,"X" S J=0 F I=0:0 S I=$O(^UTILITY($J,"W",1,I)) Q:'I  S J=J+1 W ?3,"|" W:J=1 PRCHTYP,"." W ?6,^(I,0),!
"RTN","PRCHPAM1",39,0)
 W "___|",$E(PRCHUL,1,92),!
"RTN","PRCHPAM1",40,0)
 Q
"RTN","PRCHPAM1",41,0)
 ;
"RTN","PRCHPAM1",42,0)
H D HDR W ! S PRCHDY=PRCHDY+1
"RTN","PRCHPAM1",43,0)
 Q
"RTN","PRCHPAM1",44,0)
 ;
"RTN","PRCHPAM1",45,0)
HDR W:$Y>0 @IOF W !,$S($D(PRCHREPR):$E(PRCHUL,1,35)_" **REPRINT** "_$E(PRCHUL,49,96),1:PRCHUL)
"RTN","PRCHPAM1",46,0)
 W !,"AMENDMENT OF SOLICITATION/MODIFICATION OF CONTRACT",?55,"|1.CONTRACT ID CODE",?76,"|PAGE   OF   PAGES",!
"RTN","PRCHPAM1",47,0)
 W $E(PRCHUL,1,55),"|",$E(PRCHUL,1,20),"|"
"RTN","PRCHPAM1",48,0)
 S X=(8-$L(PRCHPG))/2,Y=$P(X,".",1),Z=$P(X,".",2) W $E(PRCHUL,1,Y) W:Z "_" W PRCHPG,$E(PRCHUL,1,Y),"|_" S X=7-$L(PRCHPGT) W PRCHPGT W:X>0 $E(PRCHUL,1,X) W !
"RTN","PRCHPAM1",49,0)
 S PRCHPG=PRCHPG+1,PRCHDY=4
"RTN","PRCHPAM1",50,0)
 Q
"RTN","PRCHPAM1",51,0)
 ;
"RTN","PRCHPAM1",52,0)
EN2 ;ADJUSTMENT VOUCHER
"RTN","PRCHPAM1",53,0)
 D EN2H F I=0:0 S I=$O(^TMP($J,"AMD",1,I)) Q:'I  D:PRCHDY>50 EN2H W ?3,^(I,0),! S PRCHDY=PRCHDY+1
"RTN","PRCHPAM1",54,0)
 F I=PRCHDY:1:50 W !
"RTN","PRCHPAM1",55,0)
 W !,PRCHUL,!,"Approve subject to final action on R/S on items indicated.",?65,"|   DATE    |    P.O. NO.",!,$E(PRCHUL,1,65),"|",?77,"|",!
"RTN","PRCHPAM1",56,0)
 W "SIGNATURE OF CONTRACTING OFFICER",?65,"|",?77,"|",!,?65,"|",?77,"|",! S X=$$DECODE^PRCHES6(D0,D1) W "/ES/"_X_"     " S Y=$P(PRCH1,U,3) D DT^PRCHPAM
"RTN","PRCHPAM1",57,0)
 W ?65,"| " S Y=$P(PRCH0,U,2) D DT^PRCHPAM W ?77,"|",!,$E(PRCHUL,1,65),"|",$E(PRCHUL,1,11),"|",$E(PRCHUL,1,19),!
"RTN","PRCHPAM1",58,0)
 G EXIT
"RTN","PRCHPAM1",59,0)
 ;
"RTN","PRCHPAM1",60,0)
EN2H W:$Y>0 @IOF W ?5,"SUBJECT: ADJUSTMENT VOUCHER" W:$D(PRCHREPR) "   **REPRINT**" W !!!! S PRCHDY=0
"RTN","PRCHPAM1",61,0)
 Q
"RTN","PRCHRPT1")
0^1^B45660011^B44428291
"RTN","PRCHRPT1",1,0)
PRCHRPT1 ;ID/RSD,SF-ISC/TKW-PRINT OPTIONS ; [1/13/99 1:27pm]
"RTN","PRCHRPT1",2,0)
V ;;5.1;IFCAP;**15,70,106,132**;Oct 20, 2000;Build 3
"RTN","PRCHRPT1",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCHRPT1",4,0)
 ;
"RTN","PRCHRPT1",5,0)
EN ;DISPLAY ITEM HISTORY
"RTN","PRCHRPT1",6,0)
 S PRCF("X")="SP",AGN=1,LLCT=0,LNCT=0 D ^PRCFSITE
"RTN","PRCHRPT1",7,0)
EN0 Q:'$D(PRC("SITE"))  W !! S DIC="^PRC(441,",DIC(0)="QEAMNZ" D ^DIC G Q:Y<0 S D0=+Y I '$D(^(4,0)) W !,"History for this item does not yet exist.   Press <RETURN>" R X:DTIME G EN0
"RTN","PRCHRPT1",8,0)
 S PRCHQ="ITEM^PRCHRPT1",ITMY=Y(0) D RDTXS G:'$D(PRC("SITE")) Q D ^PRCHQUE K DIC,ZTSK,D0
"RTN","PRCHRPT1",9,0)
 G EN0
"RTN","PRCHRPT1",10,0)
 ;
"RTN","PRCHRPT1",11,0)
EN1 ;PRINT ITEM CATALOG
"RTN","PRCHRPT1",12,0)
 S PRCF("X")="SP" D ^PRCFSITE
"RTN","PRCHRPT1",13,0)
EN10 Q:'$D(PRC("SITE"))  K PRCHD S M="FUND CONTROL POINT",DIS(0)="I PRC(""SITE"")=$E($O(^PRC(441,D0,4,""B"",PRC(""SITE""))),1,3)" D RNG G Q:FR["^"!(TO["^") I FR["?"!(TO["?") D DSP^PRCHRPT2 G EN10
"RTN","PRCHRPT1",14,0)
 I FR S X=+FR D FX S FR=X
"RTN","PRCHRPT1",15,0)
 I TO S X=+TO D FX S TO=X
"RTN","PRCHRPT1",16,0)
 S FR=FR_",!",TO=TO_",z",DIC="^PRC(441,",FLDS="[PRCHITCAT]",BY="#@FCP,FCP,FCP,LONG NAME;"""",@$E(SHORT DESCRIPTION,1,50)" S L=0 D EN1^DIP
"RTN","PRCHRPT1",17,0)
 ;
"RTN","PRCHRPT1",18,0)
Q K FR,TO,FLDS,BY,DIC,I,J,K,L,PRC,PRCHFCP,D0,DA,M,DIS,ZTSK
"RTN","PRCHRPT1",19,0)
 K %,ABORT,DIR,FCPNO,FCPTCNT,FCPTPGS,FR1,FR2,FR3,FR4,ITMNO,ITMY,LCNT,LLIM,NXD,PRCHQ,PRCRI,PRCI,RTX,^TEMP("FCPCNT"),^TEMP("FCPDT"),^TEMP("FCPNAME"),^TEMP("FCPPGS"),TO1,TO2,TO3,TO4,TXCNT,TXFCP,TXIEN,TXR,TXS,TXSTN,X,Y
"RTN","PRCHRPT1",20,0)
 K AGN,C,DDH,SCTL,STN,ITMDESC,^TMP("PRCHRPT1",$J)
"RTN","PRCHRPT1",21,0)
 K COUNT,DIRUT,FLG,LLCT,LNCT,NX,PRCF("X"),PRCHPDAT,ZTRTN
"RTN","PRCHRPT1",22,0)
 QUIT
"RTN","PRCHRPT1",23,0)
 ;
"RTN","PRCHRPT1",24,0)
FX I $D(^PRC(420,+PRC("SITE"),1,X,0)) S X=PRC("SITE")_$P($P(^(0),U,1)," ",1)
"RTN","PRCHRPT1",25,0)
 Q
"RTN","PRCHRPT1",26,0)
 ;
"RTN","PRCHRPT1",27,0)
ITEM S TXR=$G(^TMP("PRCHITMH",0)) S:'TXR TXR=10
"RTN","PRCHRPT1",28,0)
 S U="^" Q:'$D(^PRC(441,D0,0))  S W=$P(^(0),U,2),ASK=0,(W1,W(3),W(4))=0,W(2)="",PRC("SITE")=$S($D(PRC("SITE")):PRC("SITE"),1:0),W(1)=PRC("SITE")_0 K ^TMP("PRCHRPT1",$J)
"RTN","PRCHRPT1",29,0)
 F W(1)=W(1):0 Q:'$O(^PRC(441,D0,4,"B",W(1)))  S W(1)=$O(^PRC(441,D0,4,"B",W(1))) S PRCHFCP=$S($D(^PRC(420,PRC("SITE"),1,+$E(W(1),4,9),0)):$P(^(0),U,1),1:$E(W(1),4,9)) K ^TMP("PRCHRPT1",$J) D ITEM0 Q:ASK
"RTN","PRCHRPT1",30,0)
 K ASK,W,W1,DIC,COUNT,DIRUT,FLG,LLCT,LNCT,NX,PRCF("X"),PRCHPDAT
"RTN","PRCHRPT1",31,0)
 D:$D(ZTSK) KILL^%ZTLOAD K ZTSK
"RTN","PRCHRPT1",32,0)
 Q
"RTN","PRCHRPT1",33,0)
 ;
"RTN","PRCHRPT1",34,0)
ITEM0 I $D(^PRC(441,D0,4,W(1),1,"AC")) D
"RTN","PRCHRPT1",35,0)
 . S W(2)=""
"RTN","PRCHRPT1",36,0)
 . S W(3)=""
"RTN","PRCHRPT1",37,0)
 . S FLG=""
"RTN","PRCHRPT1",38,0)
 . S COUNT=""
"RTN","PRCHRPT1",39,0)
 . F  S W(3)=$O(^PRC(441,D0,4,W(1),1,"AC",W(3))) Q:W(3)'>0  Q:FLG=1  D
"RTN","PRCHRPT1",40,0)
 . . S W(4)=""
"RTN","PRCHRPT1",41,0)
 . . F  S W(4)=$O(^PRC(441,D0,4,W(1),1,"AC",W(3),W(4))) Q:W(4)'>0  D
"RTN","PRCHRPT1",42,0)
 . . . S ^TMP("PRCHRPT1",$J,(W(4)))=W(4)
"RTN","PRCHRPT1",43,0)
 . . . S COUNT=COUNT+1
"RTN","PRCHRPT1",44,0)
 . . . I COUNT=TXR S FLG=1 Q
"RTN","PRCHRPT1",45,0)
 . . . Q
"RTN","PRCHRPT1",46,0)
 . . Q
"RTN","PRCHRPT1",47,0)
 . Q
"RTN","PRCHRPT1",48,0)
 I '$D(^PRC(441,D0,4,W(1),1,"AC")) D  Q
"RTN","PRCHRPT1",49,0)
 . D HDR Q:ASK=1
"RTN","PRCHRPT1",50,0)
 . I $D(PRCHFCP) W !!,"FCP: "_PRCHFCP_" has no history for this item."
"RTN","PRCHRPT1",51,0)
 . Q
"RTN","PRCHRPT1",52,0)
 G:ASK=1 Q
"RTN","PRCHRPT1",53,0)
NONE I $O(^TMP("PRCHRPT1",$J,0))="" W !,"A history for this item does not yet exist." D  Q
"RTN","PRCHRPT1",54,0)
 . I $G(ZTSK)'>0 W !,"Press RETURN to continue." R X:DTIME Q
"RTN","PRCHRPT1",55,0)
 I $G(LNCT)="" S LNCT=0
"RTN","PRCHRPT1",56,0)
 I LNCT=0 D HDR
"RTN","PRCHRPT1",57,0)
 I LNCT'=0,$E(IOST)="P" S LNCT=0  D HDR
"RTN","PRCHRPT1",58,0)
 I LNCT'=0,$E(IOST)'="P" D ASK Q:ASK  S LNCT=0 D HDR
"RTN","PRCHRPT1",59,0)
 ;
"RTN","PRCHRPT1",60,0)
SKPTXS S NX=0 I $G(LNCT)="" S LNCT=0
"RTN","PRCHRPT1",61,0)
 F K=1:1:TXR Q:'$O(^TMP("PRCHRPT1",$J,NX))  S NX=$O(^TMP("PRCHRPT1",$J,NX)),W(6)=^TMP("PRCHRPT1",$J,NX) Q:W(6)=""  S LNCT=LNCT+1,W(5)=0,W(5)=$O(^PRC(442,W(6),2,"AE",D0,W(5))) I W(5)'="" S W1=W1+1 D ITEM1 D CKLCT Q:ASK
"RTN","PRCHRPT1",62,0)
 I 'W1 K ^TMP("PRCHRPT1",$J) G NONE
"RTN","PRCHRPT1",63,0)
 Q
"RTN","PRCHRPT1",64,0)
 ;
"RTN","PRCHRPT1",65,0)
CKLCT I $E(IOST)'="P"&(LNCT=5) S LNCT=0 D ASK Q:ASK  D HDR:$O(^TMP("PRCHRPT1",$J,NX))
"RTN","PRCHRPT1",66,0)
 I $E(IOST)="P"&(LNCT=50) S LNCT=0 D ASK Q:ASK  D HDR:$O(^TMP("PRCHRPT1",$J,NX))
"RTN","PRCHRPT1",67,0)
 Q
"RTN","PRCHRPT1",68,0)
 ;
"RTN","PRCHRPT1",69,0)
ITEM1 W ! I $D(^PRC(442,W(6),1)),$P(^(1),U,15)'="" S Y=$P(^(1),U,15) D DD^%DT W Y
"RTN","PRCHRPT1",70,0)
 W ?15,$P(^PRC(442,W(6),0),U,1)
"RTN","PRCHRPT1",71,0)
 I $D(^PRC(442,W(6),2,W(5),2)) S W(7)=^(2) W ?26,$J($P(^(2),U,8),10)
"RTN","PRCHRPT1",72,0)
 I $D(^PRC(442,W(6),2,W(5),0)) S W(8)=^(0) W:+$P(W(8),U,3) ?38,$P($G(^PRCD(420.5,+$P(W(8),U,3),0)),U,1)
"RTN","PRCHRPT1",73,0)
 W:$D(W(8)) ?48,$J($P(W(8),U,9),9,2) W:$D(W(7)) ?59,$J($P(W(7),U,1),10,2) W:$D(W(8)) ?71,$J($P(W(8),U,2),8)
"RTN","PRCHRPT1",74,0)
 I $P($G(^PRC(442,W(6),1)),U,1)>0 S W(8)=$P(^(1),U,1),W(8)=$P($G(^PRC(440,W(8),0)),U,1) I W(8)'="" W !,"Vendor: ",W(8)
"RTN","PRCHRPT1",75,0)
 K W(7),W(8)
"RTN","PRCHRPT1",76,0)
 Q
"RTN","PRCHRPT1",77,0)
 ;
"RTN","PRCHRPT1",78,0)
ASK Q:$E(IOST)="P"  W !!,"Press RETURN to continue, '^' to Quit" R X:DTIME I X["^" S ASK=1
"RTN","PRCHRPT1",79,0)
 Q
"RTN","PRCHRPT1",80,0)
 ;
"RTN","PRCHRPT1",81,0)
RNG ; ALLOW ENTRY OF BEGINNING AND ENDING RANGE
"RTN","PRCHRPT1",82,0)
 S FR="",TO="z" W !!!,"START WITH "_M_": FIRST//" R FR:DTIME S:$T=0 FR="^" I (FR["?")!(FR["^")!(FR="") Q
"RTN","PRCHRPT1",83,0)
 I FR'="@",$D(PRCHD),PRCHD="DATE" K %DT S X=FR D ^%DT S FR=Y W:Y=-1 $C(7),!,"INVALID DATE" G:Y=-1 RNG D DD^%DT W "   ",Y
"RTN","PRCHRPT1",84,0)
 W !!,"GO TO "_M_": LAST//" R TO:DTIME S:$T=0 TO="^" Q:(TO["^")!(TO["?")  S:TO="" TO="z" Q:TO="z"
"RTN","PRCHRPT1",85,0)
 I $D(PRCHD),PRCHD="DATE" S X=TO D ^%DT S TO=Y W:Y=-1 $C(7),!,"INVALID DATE" G:Y=-1 RNG D DD^%DT W "   ",Y
"RTN","PRCHRPT1",86,0)
 I (+FR=FR)&(+TO=TO) I FR>TO W $C(7),!,"INVALID RANGE" G RNG
"RTN","PRCHRPT1",87,0)
 I FR'="@" I (+FR'=FR)!(+TO'=TO) I FR]TO W $C(7),!,"INVALID RANGE" G RNG
"RTN","PRCHRPT1",88,0)
 Q
"RTN","PRCHRPT1",89,0)
 ;
"RTN","PRCHRPT1",90,0)
PDT ; ROUTINE ALLOWING ENTRY OF A DATE FOR PRINTING, ETC. (DEFAULTS TO NOW)
"RTN","PRCHRPT1",91,0)
 W !!,"Enter date (and time, if not NOW) to "_M S %DT="AET",%DT("A")="DATE: NOW//" D ^%DT K %DT
"RTN","PRCHRPT1",92,0)
 S:X="" X="NOW",Y=$H S PRCHPDAT=Y Q:X="NOW"!(X["^")  G:Y=-1 PDT
"RTN","PRCHRPT1",93,0)
 I +$P(Y,".",2)'>0 W $C(7),!,"You must enter the time as well as the date to print the report" G PDT
"RTN","PRCHRPT1",94,0)
 S PRCHPDAT=Y
"RTN","PRCHRPT1",95,0)
 Q
"RTN","PRCHRPT1",96,0)
 ;
"RTN","PRCHRPT1",97,0)
SDEV ; SELECT DEVICE FOR QUEUED PRINTING
"RTN","PRCHRPT1",98,0)
 W ! K %ZIS,IOP S %ZIS="Q",IOP="Q",%ZIS("B")="" D ^%ZIS
"RTN","PRCHRPT1",99,0)
 S IOP=ION_";"_IOST_";"_IOM_";"_IOSL I IO=IO(0) D ^%ZIS U IO D @ZTRTN D ^%ZISC
"RTN","PRCHRPT1",100,0)
 Q
"RTN","PRCHRPT1",101,0)
HDR ;
"RTN","PRCHRPT1",102,0)
 ;
"RTN","PRCHRPT1",103,0)
 I $G(LNCT)>0&($E(IOST)'="P") D ASK Q:ASK
"RTN","PRCHRPT1",104,0)
 W @IOF,!!,"Item Number: ",D0,?25,"Description: ",W,!?8,"FCP: ",PRCHFCP,!!,?26,"Quantity",!,?26,"Previously",?38,"Unit of",?71,"Quantity"
"RTN","PRCHRPT1",105,0)
 W !,"Date Ordered",?15,"PO Number",?26,"Received",?38,"Purchase",?48,"Unit Cost",?59,"Total Cost",?71,"Ordered",! F I=1:1:80 W "_"
"RTN","PRCHRPT1",106,0)
 Q
"RTN","PRCHRPT1",107,0)
RDTXS ; Prompt for # back TX's to list for an FCP(default=10,max=9999)
"RTN","PRCHRPT1",108,0)
 W !
"RTN","PRCHRPT1",109,0)
RDTXS1 K DIR
"RTN","PRCHRPT1",110,0)
 S DIR(0)="F^1:4"
"RTN","PRCHRPT1",111,0)
 S DIR("A")="Enter # BACK TRANSACTIONS to list, 'S' to sort or '^' to EXIT"
"RTN","PRCHRPT1",112,0)
 S DIR("B")=10
"RTN","PRCHRPT1",113,0)
 S DIR("?")="Enter 1-9999 or 'S' to sort by PO Date, FCP, etc."
"RTN","PRCHRPT1",114,0)
 S DIR("??")="^D WARN^PRCHRPT1"
"RTN","PRCHRPT1",115,0)
 D ^DIR
"RTN","PRCHRPT1",116,0)
 S TXS=X
"RTN","PRCHRPT1",117,0)
 I $D(DIRUT) S ABORT=1 G Q
"RTN","PRCHRPT1",118,0)
 I TXS?.N&((TXS<1)!(TXS>9999)) D QUESTION G RDTXS1
"RTN","PRCHRPT1",119,0)
 I TXS?.N S TXR=TXS,^TMP("PRCHITMH",0)=TXR*1,TXR=^TMP("PRCHITMH",0),RTX="A" Q
"RTN","PRCHRPT1",120,0)
 I TXS'="s"&(TXS'="S") W ! D QUESTION G RDTXS1
"RTN","PRCHRPT1",121,0)
 S ITMNO=$P(ITMY,U,1) G EN^PRCHRPTX
"RTN","PRCHRPT1",122,0)
 Q
"RTN","PRCHRPT1",123,0)
 ;
"RTN","PRCHRPT1",124,0)
QUESTION ;
"RTN","PRCHRPT1",125,0)
 W !!,"Enter 1-9999 or 'S' to sort by PO Date, FCP, etc."
"RTN","PRCHRPT1",126,0)
 Q
"RTN","PRCHRPT1",127,0)
 ;
"RTN","PRCHRPT1",128,0)
WARN ;
"RTN","PRCHRPT1",129,0)
 W @IOF,!?10,"List Transaction History for Specified Item",!!
"RTN","PRCHRPT1",130,0)
 W !,"You may obtain either a listing of a specified number of back transactions",!,"for the item or all transactions (by FCP) within a specified date range."
"RTN","PRCHRPT1",131,0)
 W !!,"Please be aware that the latter involves complex sorting and may",!,"take awhile to complete.  Therefore, it is suggested that it be queued to",!,"a printer to immediately free your workstation.",!
"RTN","PRCHRPT1",132,0)
 Q
"RTN","PRCPRCAT")
0^2^B29532373^B29522253
"RTN","PRCPRCAT",1,0)
PRCPRCAT ;WISC/RFJ/DL-order form ;  1/28/98  1000
"RTN","PRCPRCAT",2,0)
V ;;5.1;IFCAP;**1,132**;Oct 20, 2000;Build 3
"RTN","PRCPRCAT",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCPRCAT",4,0)
 D ^PRCPUSEL Q:'$G(PRCP("I"))
"RTN","PRCPRCAT",5,0)
 N PRCPBLNK,PRCPDATE,PRCPEND,PRCPINFR,PRCPINPT,PRCPFLAG,PRCPFONE,PRCPFNON,PRCPSSIT,X,Y,Z
"RTN","PRCPRCAT",6,0)
 K X S X(1)="The Order Form prints the current or selected inventory point's items sorted by main storage location and description.  Blanks for daily ordering may be included."
"RTN","PRCPRCAT",7,0)
 D DISPLAY^PRCPUX2(40,79,.X)
"RTN","PRCPRCAT",8,0)
 ;
"RTN","PRCPRCAT",9,0)
 I PRCP("DPTYPE")="S" S PRCPINPT=PRCP("I") G MONTHYR
"RTN","PRCPRCAT",10,0)
 ;
"RTN","PRCPRCAT",11,0)
 K X S X(1)="Select a Distribution Point or press the <return> key to select the current inventory point."
"RTN","PRCPRCAT",12,0)
 D DISPLAY^PRCPUX2(2,40,.X)
"RTN","PRCPRCAT",13,0)
 S PRCPINPT=$$TO^PRCPUDPT(PRCP("I")) Q:PRCPINPT["^"
"RTN","PRCPRCAT",14,0)
 I 'PRCPINPT S PRCPINPT=PRCP("I")
"RTN","PRCPRCAT",15,0)
 ;
"RTN","PRCPRCAT",16,0)
 ;  jump to here if a secondary
"RTN","PRCPRCAT",17,0)
MONTHYR W ! K X S X(1)="Select the month-year of the order form for "_$$INVNAME^PRCPUX1(PRCPINPT)_"."
"RTN","PRCPRCAT",18,0)
 D DISPLAY^PRCPUX2(2,40,.X)
"RTN","PRCPRCAT",19,0)
 S %DT("A")="Print Catalog/Order Form for DATE: "
"RTN","PRCPRCAT",20,0)
 S %DT("B")="TODAY",%DT="AEX" D ^%DT K %DT Q:Y<0
"RTN","PRCPRCAT",21,0)
 S PRCPEND=$P("31^28^31^30^31^30^31^31^30^31^30^31","^",+$E(Y,4,5))
"RTN","PRCPRCAT",22,0)
 I PRCPEND=28 S Z=$E(Y,1,3)+1700,PRCPEND=$S(Z#400=0:29,(Z#4=0&(Z#100'=0)):29,1:28)
"RTN","PRCPRCAT",23,0)
 S Y=$E(Y,1,5)_"00" D DD^%DT S PRCPDATE=Y
"RTN","PRCPRCAT",24,0)
 ;
"RTN","PRCPRCAT",25,0)
 D  Q:$G(PRCPFLAG)  G BLANKS:$P($G(^PRCP(445,PRCPINPT,0)),"^",3)="S"
"RTN","PRCPRCAT",26,0)
 .   S PRCPSSIT=1
"RTN","PRCPRCAT",27,0)
 .   S XP="Print only items with a non-zero normal level"
"RTN","PRCPRCAT",28,0)
 .   S XH="Enter YES to print only items whose normal level is not zero in "_$$INVNAME^PRCPUX1(PRCPINPT)_"."
"RTN","PRCPRCAT",29,0)
 .   S XH(1)="Enter NO to print all items in "_$$INVNAME^PRCPUX1(PRCPINPT)_"."
"RTN","PRCPRCAT",30,0)
 .   S XH(2)="Enter ^ to exit."
"RTN","PRCPRCAT",31,0)
 .   W ! S %=$$YN^PRCPUYN(1) I %<1 S PRCPFLAG=1 Q
"RTN","PRCPRCAT",32,0)
 .   I %=2 K PRCPSSIT
"RTN","PRCPRCAT",33,0)
 ;
"RTN","PRCPRCAT",34,0)
 S PRCPINFR=$$FROMCHEK^PRCPUDPT(PRCPINPT,0)
"RTN","PRCPRCAT",35,0)
 I PRCPINFR D  Q:$G(PRCPFLAG)
"RTN","PRCPRCAT",36,0)
 .   S XP="Print only the items stocked by "_$$INVNAME^PRCPUX1(PRCPINFR)
"RTN","PRCPRCAT",37,0)
 .   S XH="Enter YES to only print the items stocked by "_$$INVNAME^PRCPUX1(PRCPINFR)_"."
"RTN","PRCPRCAT",38,0)
 .   S XH(1)="Enter NO to print all items in "_$$INVNAME^PRCPUX1(PRCPINPT)_"."
"RTN","PRCPRCAT",39,0)
 .   S XH(2)="Enter ^ to exit."
"RTN","PRCPRCAT",40,0)
 .   W ! S %=$$YN^PRCPUYN(1) I %<1 S PRCPFLAG=1 Q
"RTN","PRCPRCAT",41,0)
 .   I %=2 K PRCPINFR
"RTN","PRCPRCAT",42,0)
 ;
"RTN","PRCPRCAT",43,0)
BLANKS S PRCPBLNK=1
"RTN","PRCPRCAT",44,0)
 I "SP"[(PRCP("DPTYPE")) D
"RTN","PRCPRCAT",45,0)
 .   S XP="Include blanks on printout"
"RTN","PRCPRCAT",46,0)
 .   S XH="Enter YES to print blanks on the order form."
"RTN","PRCPRCAT",47,0)
 .   S XH(1)="Enter NO to print just the items and related information."
"RTN","PRCPRCAT",48,0)
 .   S XH(2)="Enter ^ to exit."
"RTN","PRCPRCAT",49,0)
 .   W ! S %=$$YN^PRCPUYN(1) I %<1 S PRCPFLAG=1 Q
"RTN","PRCPRCAT",50,0)
 .   I %=2 K PRCPBLNK
"RTN","PRCPRCAT",51,0)
 ;
"RTN","PRCPRCAT",52,0)
 S %ZIS="Q" D ^%ZIS Q:POP  I $D(IO("Q")) D  D ^%ZTLOAD K IO("Q"),ZTSK Q
"RTN","PRCPRCAT",53,0)
 .   S ZTDESC="Order Form",ZTRTN="DQ^PRCPRCAT"
"RTN","PRCPRCAT",54,0)
 .   S ZTSAVE("PRCP*")="",ZTSAVE("ZTREQ")="@"
"RTN","PRCPRCAT",55,0)
 W !!,"<*> please wait <*>"
"RTN","PRCPRCAT",56,0)
 ;
"RTN","PRCPRCAT",57,0)
 ;  queue comes here
"RTN","PRCPRCAT",58,0)
DQ N %I,DAY,DAY1,DESCR,ITEMCOST,ITEMDA,ITEMDATA,MAINLOC,NOW,PAGE,PRCPFLAG,PRCPINNM,SCREEN,WHSESRCE,X,Y
"RTN","PRCPRCAT",59,0)
 K ^TMP($J,"PRCPRCAT")
"RTN","PRCPRCAT",60,0)
 S ITEMDA=0 F  S ITEMDA=$O(^PRCP(445,PRCPINPT,1,ITEMDA)) Q:'ITEMDA  D
"RTN","PRCPRCAT",61,0)
 .   I $G(PRCPINFR),'$D(^PRCP(445,PRCPINFR,1,ITEMDA,0)) Q
"RTN","PRCPRCAT",62,0)
 .   I '$D(^PRCP(445,PRCPINPT,1,ITEMDA,0)) Q
"RTN","PRCPRCAT",63,0)
 .   I $G(PRCPSSIT),$P(^PRCP(445,PRCPINPT,1,ITEMDA,0),"^",9)'>0 Q
"RTN","PRCPRCAT",64,0)
 .   S MAINLOC=$$STORAGE^PRCPESTO(PRCPINPT,ITEMDA)
"RTN","PRCPRCAT",65,0)
 .   S DESCR=$$DESCR^PRCPUX1(PRCPINPT,ITEMDA) S:DESCR="" DESCR=" "
"RTN","PRCPRCAT",66,0)
 .   S ^TMP($J,"PRCPRCAT",MAINLOC,$E(DESCR,1,20),ITEMDA)=""
"RTN","PRCPRCAT",67,0)
 ;
"RTN","PRCPRCAT",68,0)
 ;  setup order form format
"RTN","PRCPRCAT",69,0)
 S DAY="" F %=1:1:PRCPEND S DAY=DAY_"| "_$J(%,2)
"RTN","PRCPRCAT",70,0)
 I IOM<81 S DAY1="|"_$P(DAY,"15|",2),DAY=$P(DAY,"15|")_"15"
"RTN","PRCPRCAT",71,0)
 ;
"RTN","PRCPRCAT",72,0)
 S WHSESRCE=+$O(^PRC(440,"AC","W",0))
"RTN","PRCPRCAT",73,0)
 S PRCPINNM=$$INVNAME^PRCPUX1(PRCPINPT)
"RTN","PRCPRCAT",74,0)
 D NOW^%DTC S Y=% D DD^%DT S NOW=Y,SCREEN=$$SCRPAUSE^PRCPUREP,PAGE=1 U IO D H
"RTN","PRCPRCAT",75,0)
 S MAINLOC="" F  S MAINLOC=$O(^TMP($J,"PRCPRCAT",MAINLOC)) Q:MAINLOC=""!($G(PRCPFLAG))  D
"RTN","PRCPRCAT",76,0)
 .   I $G(ZTQUEUED),$$S^%ZTLOAD S PRCPFLAG=1 W !?10,"<<< TASKMANAGER JOB TERMINATED BY USER >>>" Q
"RTN","PRCPRCAT",77,0)
 .   I $Y>(IOSL-7) D:SCREEN P^PRCPUREP Q:$G(PRCPFLAG)  D H
"RTN","PRCPRCAT",78,0)
 .   W !!?5,"MAIN STORAGE LOCATION: ",$S(MAINLOC=" ":"<< NONE >>",1:MAINLOC)
"RTN","PRCPRCAT",79,0)
 .   I '$G(PRCPBLNK) W !
"RTN","PRCPRCAT",80,0)
 .   S DESCR="" F  S DESCR=$O(^TMP($J,"PRCPRCAT",MAINLOC,DESCR)) Q:DESCR=""!($G(PRCPFLAG))  S ITEMDA=0 F  S ITEMDA=$O(^TMP($J,"PRCPRCAT",MAINLOC,DESCR,ITEMDA)) Q:'ITEMDA!($G(PRCPFLAG))  D
"RTN","PRCPRCAT",81,0)
 .   .   I $Y>(IOSL-8) D:SCREEN P^PRCPUREP Q:$G(PRCPFLAG)  D H
"RTN","PRCPRCAT",82,0)
 .   .   S ITEMDATA=$G(^PRCP(445,PRCPINPT,1,ITEMDA,0))
"RTN","PRCPRCAT",83,0)
 .   .   S ITEMCOST=$P(ITEMDATA,"^",22) I $P(ITEMDATA,"^",15)>ITEMCOST S ITEMCOST=$P(ITEMDATA,"^",15)
"RTN","PRCPRCAT",84,0)
 .   .   I $G(PRCPBLNK) W !!
"RTN","PRCPRCAT",85,0)
 .   .   W $E($$DESCR^PRCPUX1(PRCPINPT,ITEMDA),1,28),?29,ITEMDA,?35,$TR($$NSN^PRCPUX1(ITEMDA),"-"),?50,$J($$UNIT^PRCPUX1(PRCPINPT,ITEMDA,"/"),8),$J($P(ITEMDATA,"^",10),6),$J($P(ITEMDATA,"^",9),6),$J(ITEMCOST,9,2),!
"RTN","PRCPRCAT",86,0)
 .   .   I $$MANDSRCE^PRCPU441(ITEMDA)=WHSESRCE W "*"
"RTN","PRCPRCAT",87,0)
 .   .   I $G(PRCPBLNK) D
"RTN","PRCPRCAT",88,0)
 .   .   .   W ?2,"DAY: ",DAY,"|",!?2,"QTY: ",$TR(DAY,"1234567890","          "),"|"
"RTN","PRCPRCAT",89,0)
 .   .   .   I $D(DAY1) W !?2,"DAY: ",DAY1,"|",!?2,"QTY: ",$TR(DAY1,"1234567890","          "),"|"
"RTN","PRCPRCAT",90,0)
 I '$G(PRCPFLAG) D END^PRCPUREP
"RTN","PRCPRCAT",91,0)
 K ^TMP($J,"PRCPRCAT") D ^%ZISC Q
"RTN","PRCPRCAT",92,0)
 ;
"RTN","PRCPRCAT",93,0)
 ;
"RTN","PRCPRCAT",94,0)
H S %=NOW_"  PAGE "_PAGE,PAGE=PAGE+1 I PAGE'=2!(SCREEN) W @IOF
"RTN","PRCPRCAT",95,0)
 W $C(13),"ORDER FORM FOR: ",PRCPINNM,?(IOM-$L(%)),%
"RTN","PRCPRCAT",96,0)
 W !?5,"FOR THE MONTH-YEAR: ",PRCPDATE
"RTN","PRCPRCAT",97,0)
 W ?58,$J("STAND",6),$J("NORM",6),$J("UNIT",10),!,"DESCRIPTION",?29,"MI#",?35,"NSN",?50,$J("UNIT/IS",8),$J("REOPT",6),$J("STLVL",6),$J("COST",10)
"RTN","PRCPRCAT",98,0)
 S %="",$P(%,"-",IOM+1)="" W !,%,!
"RTN","PRCPRCAT",99,0)
 Q
"VER")
8.0^22.0
"BLD",5923,6)
^115
**END**
**END**
