$TXT Created by BECKWITH,RALPH at MNTVBB.FO-WASH.MED.VA.GOV  (KIDS) on Monday, 03/08/10 at 13:32
=============================================================================
Run Date: NOV 30, 2010                     Designation: PRC*5.1*140
Package : PRC - IFCAP                         Priority: Mandatory
Version : 5.1       SEQ #119                    Status: Released
                  Compliance Date: DEC 31, 2010
=============================================================================

Associated patches: (v)PRC*5.1*130 <<= must be installed BEFORE `PRC*5.1*140'

Subject: NO CLRS DATA FEED;1358 ADJUSTMENTS;OPTION PRCSR1358 HAS MISSING ENTRY POINT

Category: 
  - Routine
  - Other

Description:
============

  This patch will address the following issues:
   
  1. There is a problem with the CLRS (Clinical Logistics Report Server)
     data transmission to FMS (Financial Management System - Austin, TX)
     when there is a large amount of text in some of the fields on a
     requisition.
   
  2. The contract number is displayed on an original 1358 but is dropped
     on Adjustments. 
   
  3. The option '1358 Request (Enter)' [PRCSR1358] references a line label
     that no longer exists in routine ^PRCSED.
   
   
  ASSOCIATED NSR(s):
  ==================
  N/A
   
   
  Associated Remedy Tickets:
  ======================
  1. HD0000000353850 No CLRS data feed
       Duplicate: HD0000000353936 No CLRS data feed 
                  HD0000000391629 No CLRS data feed
   
  2. HD0000000350506 Contract Number on original 1358 but dropped on 
                     Adjustments
       Duplicate: HD0000000359812 1358 Issue
                  HD0000000360234 1358 Issue
                  HD0000000371153 Problem processing increase on 1358
   
  3. HD0000000373619 Option PRCSR1358 has wrong line label in routine
   
   
  Test Sites:
  ===========
 VA Puget Sound HCS
 VA Palo Alto HCS
 CMOP-National VistA
   
   
  Remedy Overview:
  ================ 
  1. HD0000000353850 No CLRS data feed
   
  Problem:
  --------
  The CLRS data was not being properly transmitted from a number of stations.
  The problem was determined to be caused by a <MAXSTRING> error which started
  occurring after installation of PRC*5.1*130.  When running the tasked
  option 'CLO Procurement Reports (CLRS)' [PRCHLO CLO PROCUREMENT], the
  data extract step encounters the <MAXSTRING> error when it tries to
  process a large piece of text in the JUSTIFICATION, COMMENTS, or
  SPECIAL REMARKS fields on a requisition.  There is a system limitation of
  32,767 characters for transmitted records and some sites were cutting and
  pasting large documents into the above named fields that exceeded that limit.
   
  Field reference:
    File:  CONTROL POINT ACTIVITY [#410]
      Field:  JUSTIFICATION [#45]
      Field:  COMMENTS [#60]
      Field:  SPECIAL REMARKS [#9]
  
  Resolution:
  -----------
  Routine PRCHLO6 is modified to truncate the data extraction at 200
  characters when getting text from the three Word Processing type fields
  listed above.  This will ensure that the SAC* maximum allowable string length
  of 256 characters is not exceeded and is considerably less than the system
  imposed MAXSTRING limit of 32,767 characters.
     
  * SAC = VHA programming Standards And Conventions
  
  Routines: PRCHLO6
   
    
  2. HD0000000350506 Contract Number on original 1358 but dropped on 
                     Adjustments
   
  Problem:
  -------
  When running the option 'Increase/Decrease Adjustment' [PRCEC ADJUST] for
  a 1358 entry where a contract number was assigned originally, the contract
  number is not brought forward on the new adjustment 1358 entry. Also, the
  vendor address and the internal pointer to the VENDOR file [#440] are not
  carried over to the new adjustment 1358 entry.
    
   
  Resolution:
  ----------                    
  The IFCAP routine PRCEADJ is modified to ensure that all vendor and
  contract information from the original 1358 entry is copied to the new
  1358 adjustment entry.
   
   
  Routines: PRCEADJ 
   
   
  3. HD0000000373619 Option PRCSR1358 has wrong line label in routine
   
  Problem:
  -------
  Users receive the error <NOLINE>R+2^XQ1 when selecting the option
  '1358 Request (Enter)' [PRCSR1358].  The error is caused because that
  option in the OPTION file [#19] was set to call the entry point R1358
  in routine PRCSED.  This was a valid option prior to July 1999 but the
  functionality it provided was replaced and the code in routine PRCSED
  was removed in patch PRC*5.0*182.  Unfortunately, the option itself was
  not deleted and it fails with the <NOLINE> error if someone tries to use
  it.
  
   
  Resolution:
  ----------                    
  The obsolete option '1358 Request (Enter)' [PRCSR1358] will be deleted. 
  The same functionality can still be found using options:
    'New 1358 request' [PRCEC NEW]
  and
    'New 1358 Request (Section)' [PRCS1358]
   
   
  Routines: none
    
   
   
   
         ================INSTALLATION INSTRUCTIONS =================
   
  You may install this patch at any time without interruption to users. 
  It should take less than 2 minutes to install this patch.
   
     1. Choose the PackMan message containing this patch and invoke the
        INSTALL/CHECK MESSAGE PackMan option.  
    
     2. From the Kernel Installation & Distribution System menu, select 
        the Installation menu.  
    
     3. From this menu, you may select to use the following options: 
        (when prompted for INSTALL NAME, enter PRC*5.1*140)
    
          a.  Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
          b.  Print Transport Global - This option will allow you to view
              the components of the KIDS build.
          c.  Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this 
              patch is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
          d.  Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
    
     4. Use the Install Package(s) option and select the package 
         PRC*5.1*140.
    
     5. When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
        Install? NO//", respond NO.
   
     6. When Prompted "Want KIDS to INHIBIT LOGONs during the install? 
        NO//" respond NO.  
   
     7. When prompted 'Want to DISABLE Schedule Options, Menu Options and
        Protocols? NO//', respond YES.  When prompted to select the options
        you would like to place out of order, enter the following:
   
        'CLO Procurement Reports (CLRS)'   [PRCHLO CLO PROCUREMENT]
        'Increase/Decrease Adjustment'     [PRCEC ADJUST]

Routine Information:
====================
The second line of each of these routines now looks like:
V ;;5.1;IFCAP;**[Patch List]**;Oct 20, 2000;Build 4

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PRCEADJ
    Before: B23324366   After: B31997445  **140**
Routine Name: PRCHLO6
    Before:B122486114   After:B125729852  **130,140**
 
Routine list of preceding patches: 130

=============================================================================
User Information:
Entered By  : BECKWITH,RALPH                Date Entered  : OCT 02, 2009
Completed By: HOLLOWAY,THOMAS J             Date Completed: NOV 15, 2010
Released By : NELSON,VICKI M                Date Released : NOV 30, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
