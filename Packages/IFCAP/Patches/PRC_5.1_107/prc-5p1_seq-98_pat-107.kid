Released PRC*5.1*107 SEQ #98
Extracted from mail message
**KIDS**:PRC*5.1*107^

**INSTALL NAME**
PRC*5.1*107
"BLD",5026,0)
PRC*5.1*107^IFCAP^0^3080219^y
"BLD",5026,1,0)
^^19^19^3071207^
"BLD",5026,1,1,0)
1. Involves the phone number extension in ELECTRONIC SIGNATURE 
"BLD",5026,1,2,0)
   BLOCKS.  IFCAP software is set up to display a 4 digit extension,
"BLD",5026,1,3,0)
   but some sites now have a 5 digit extension.  The new 5 digit 
"BLD",5026,1,4,0)
   extension causes the number to not be displayed.
"BLD",5026,1,5,0)
 
"BLD",5026,1,6,0)
2. Problem with adding a Generic Inventory point through the Manager
"BLD",5026,1,7,0)
   For Supply Warehouse Inventory Point Menu [MANAGER FOR SUPPLY
"BLD",5026,1,8,0)
   WAREHOUSE I] option.
"BLD",5026,1,9,0)
 
"BLD",5026,1,10,0)
3. Problem updating the Prompt Pay Type (#4) field in the INVOICE 
"BLD",5026,1,11,0)
   TRACKING (#421.5) file.  This Prompt Pay Type needs to match the
"BLD",5026,1,12,0)
   Financial Management System (FMS) PPAY Table.  Currently it 
"BLD",5026,1,13,0)
   does not.
"BLD",5026,1,14,0)
 
"BLD",5026,1,15,0)
4. Involves the inability to delete partial orders in a given state.  The 
"BLD",5026,1,16,0)
   problem is not with the functionality, but with the error message that
"BLD",5026,1,17,0)
   is displayed.  Currently when the user tries to delete they get a beep
"BLD",5026,1,18,0)
   and "??".  The user should see a valid error message properly
"BLD",5026,1,19,0)
   explaining the issue.
"BLD",5026,4,0)
^9.64PA^421.5^2
"BLD",5026,4,421.5,0)
421.5
"BLD",5026,4,421.5,2,0)
^9.641^421.5^1
"BLD",5026,4,421.5,2,421.5,0)
INVOICE TRACKING  (File-top level)
"BLD",5026,4,421.5,2,421.5,1,0)
^9.6411^4^1
"BLD",5026,4,421.5,2,421.5,1,4,0)
PROMPT PAY TYPE
"BLD",5026,4,421.5,222)
y^n^p^^^^n^^n
"BLD",5026,4,421.5,224)

"BLD",5026,4,445,0)
445
"BLD",5026,4,445,2,0)
^9.641^445^1
"BLD",5026,4,445,2,445,0)
GENERIC INVENTORY  (File-top level)
"BLD",5026,4,445,2,445,1,0)
^9.6411^.01^1
"BLD",5026,4,445,2,445,1,.01,0)
INVENTORY POINT
"BLD",5026,4,445,222)
y^n^p^^^^n^^n
"BLD",5026,4,445,224)

"BLD",5026,4,"APDD",421.5,421.5)

"BLD",5026,4,"APDD",421.5,421.5,4)

"BLD",5026,4,"APDD",445,445)

"BLD",5026,4,"APDD",445,445,.01)

"BLD",5026,4,"B",421.5,421.5)

"BLD",5026,4,"B",445,445)

"BLD",5026,6.3)
13
"BLD",5026,"INI")

"BLD",5026,"INID")
^n^n
"BLD",5026,"INIT")

"BLD",5026,"KRN",0)
^9.67PA^8989.52^19
"BLD",5026,"KRN",.4,0)
.4
"BLD",5026,"KRN",.401,0)
.401
"BLD",5026,"KRN",.402,0)
.402
"BLD",5026,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",5026,"KRN",.403,0)
.403
"BLD",5026,"KRN",.5,0)
.5
"BLD",5026,"KRN",.84,0)
.84
"BLD",5026,"KRN",3.6,0)
3.6
"BLD",5026,"KRN",3.8,0)
3.8
"BLD",5026,"KRN",9.2,0)
9.2
"BLD",5026,"KRN",9.8,0)
9.8
"BLD",5026,"KRN",9.8,"NM",0)
^9.68A^14^4
"BLD",5026,"KRN",9.8,"NM",1,0)
PRCSP122^^0^B10606621
"BLD",5026,"KRN",9.8,"NM",10,0)
PRCHEF^^0^B8847630
"BLD",5026,"KRN",9.8,"NM",13,0)
PRCSD122^^0^B6877628
"BLD",5026,"KRN",9.8,"NM",14,0)
PRCIREC1^^0^B1010091
"BLD",5026,"KRN",9.8,"NM","B","PRCHEF",10)

"BLD",5026,"KRN",9.8,"NM","B","PRCIREC1",14)

"BLD",5026,"KRN",9.8,"NM","B","PRCSD122",13)

"BLD",5026,"KRN",9.8,"NM","B","PRCSP122",1)

"BLD",5026,"KRN",19,0)
19
"BLD",5026,"KRN",19,"NM",0)
^9.68A^^0
"BLD",5026,"KRN",19.1,0)
19.1
"BLD",5026,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",5026,"KRN",101,0)
101
"BLD",5026,"KRN",409.61,0)
409.61
"BLD",5026,"KRN",771,0)
771
"BLD",5026,"KRN",870,0)
870
"BLD",5026,"KRN",8989.51,0)
8989.51
"BLD",5026,"KRN",8989.52,0)
8989.52
"BLD",5026,"KRN",8994,0)
8994
"BLD",5026,"KRN","B",.4,.4)

"BLD",5026,"KRN","B",.401,.401)

"BLD",5026,"KRN","B",.402,.402)

"BLD",5026,"KRN","B",.403,.403)

"BLD",5026,"KRN","B",.5,.5)

"BLD",5026,"KRN","B",.84,.84)

"BLD",5026,"KRN","B",3.6,3.6)

"BLD",5026,"KRN","B",3.8,3.8)

"BLD",5026,"KRN","B",9.2,9.2)

"BLD",5026,"KRN","B",9.8,9.8)

"BLD",5026,"KRN","B",19,19)

"BLD",5026,"KRN","B",19.1,19.1)

"BLD",5026,"KRN","B",101,101)

"BLD",5026,"KRN","B",409.61,409.61)

"BLD",5026,"KRN","B",771,771)

"BLD",5026,"KRN","B",870,870)

"BLD",5026,"KRN","B",8989.51,8989.51)

"BLD",5026,"KRN","B",8989.52,8989.52)

"BLD",5026,"KRN","B",8994,8994)

"BLD",5026,"QUES",0)
^9.62^^
"BLD",5026,"REQB",0)
^9.611^2^1
"BLD",5026,"REQB",2,0)
PRC*5.1*95^2
"BLD",5026,"REQB","B","PRC*5.1*95",2)

"FIA",421.5)
INVOICE TRACKING
"FIA",421.5,0)
^PRCF(421.5,
"FIA",421.5,0,0)
421.5I
"FIA",421.5,0,1)
y^n^p^^^^n^^n
"FIA",421.5,0,10)

"FIA",421.5,0,11)

"FIA",421.5,0,"RLRO")

"FIA",421.5,0,"VR")
5.1^PRC
"FIA",421.5,421.5)
1
"FIA",421.5,421.5,4)

"FIA",445)
GENERIC INVENTORY
"FIA",445,0)
^PRCP(445,
"FIA",445,0,0)
445Is
"FIA",445,0,1)
y^n^p^^^^n^^n
"FIA",445,0,10)

"FIA",445,0,11)

"FIA",445,0,"RLRO")

"FIA",445,0,"VR")
5.1^PRC
"FIA",445,445)
1
"FIA",445,445,.01)

"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1^3001012^3001019^68
"PKG",455,22,1,"PAH",1,0)
107^3080219
"PKG",455,22,1,"PAH",1,1,0)
^^19^19^3080219
"PKG",455,22,1,"PAH",1,1,1,0)
1. Involves the phone number extension in ELECTRONIC SIGNATURE 
"PKG",455,22,1,"PAH",1,1,2,0)
   BLOCKS.  IFCAP software is set up to display a 4 digit extension,
"PKG",455,22,1,"PAH",1,1,3,0)
   but some sites now have a 5 digit extension.  The new 5 digit 
"PKG",455,22,1,"PAH",1,1,4,0)
   extension causes the number to not be displayed.
"PKG",455,22,1,"PAH",1,1,5,0)
 
"PKG",455,22,1,"PAH",1,1,6,0)
2. Problem with adding a Generic Inventory point through the Manager
"PKG",455,22,1,"PAH",1,1,7,0)
   For Supply Warehouse Inventory Point Menu [MANAGER FOR SUPPLY
"PKG",455,22,1,"PAH",1,1,8,0)
   WAREHOUSE I] option.
"PKG",455,22,1,"PAH",1,1,9,0)
 
"PKG",455,22,1,"PAH",1,1,10,0)
3. Problem updating the Prompt Pay Type (#4) field in the INVOICE 
"PKG",455,22,1,"PAH",1,1,11,0)
   TRACKING (#421.5) file.  This Prompt Pay Type needs to match the
"PKG",455,22,1,"PAH",1,1,12,0)
   Financial Management System (FMS) PPAY Table.  Currently it 
"PKG",455,22,1,"PAH",1,1,13,0)
   does not.
"PKG",455,22,1,"PAH",1,1,14,0)
 
"PKG",455,22,1,"PAH",1,1,15,0)
4. Involves the inability to delete partial orders in a given state.  The 
"PKG",455,22,1,"PAH",1,1,16,0)
   problem is not with the functionality, but with the error message that
"PKG",455,22,1,"PAH",1,1,17,0)
   is displayed.  Currently when the user tries to delete they get a beep
"PKG",455,22,1,"PAH",1,1,18,0)
   and "??".  The user should see a valid error message properly
"PKG",455,22,1,"PAH",1,1,19,0)
   explaining the issue.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","PRCHEF")
0^10^B8847630^B8340557
"RTN","PRCHEF",1,0)
PRCHEF ;ID/RSD,SF-ISC/TKW-EDIT ROUTINES FOR SUPPLY SYSTEM ;6/10/97 9:34
"RTN","PRCHEF",2,0)
V ;;5.1;IFCAP;**107**;Oct 20, 2000;Build 13
"RTN","PRCHEF",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCHEF",4,0)
 ;
"RTN","PRCHEF",5,0)
EN80 ;DELETE A RECEIVING REPORT (CONT.FROM PRCHE)
"RTN","PRCHEF",6,0)
 K PRCHNRQ D PO^PRCHE G:'$D(PRCHPO) Q^PRCHE
"RTN","PRCHEF",7,0)
 I $P($G(^PRC(442,PRCHPO,23)),U,11)="S"!($P($G(^(23)),U,11)="P") W !!,?5,"Please create an adjustment voucher to delete",!,?5,"receiving reports for purchase card orders.",! G EN80
"RTN","PRCHEF",8,0)
 I $P($G(^PRC(442,PRCHPO,23)),U,11)="D" W !!,?5,"Please create an adjustment voucher to delete",!,?5,"receiving reports for delivery orders.",! G EN80
"RTN","PRCHEF",9,0)
 I X<25!(X>33) W $C(7)," Receiving Report cannot be deleted, please create an adjustment voucher." G EN80
"RTN","PRCHEF",10,0)
 I '$O(^PRC(442,PRCHPO,11,0)) W !?3,"Order has no Receiving Reports !",$C(7) G EN80
"RTN","PRCHEF",11,0)
 D LCK1^PRCHE G:'$D(DA) EN80 S:$P(^PRC(442,PRCHPO,0),U,2)=8 PRCHNRQ=1
"RTN","PRCHEF",12,0)
 S DIC="^PRC(442,PRCHPO,11,",DIC(0)="QEANZ" D ^DIC I Y<0 L  G EN80
"RTN","PRCHEF",13,0)
 I $P(Y(0),U,6)="Y" W !?3,"Receiving Report has already been processed by Fiscal.",!?3,"You must create an Adjustment Voucher to edit this Receiving Report.",! L  G EN80
"RTN","PRCHEF",14,0)
 S (PRCHRPT,PRCHDPT)=+Y,(PRCHRD,PRCHDRD)=$P(Y(0),U,1),(PRCHRDEL,PRCHDTP)=1,PRCHEX=$P(Y(0),U,3)+$P(Y(0),U,5)
"RTN","PRCHEF",15,0)
 D ^PRCHDP3,DEL^PRCHREC2 K PRCHRDEL I $D(PRCHRD) L  D Q^PRCHE G EN80
"RTN","PRCHEF",16,0)
 ;S PRCHREC=$S($O(^PRC(442,PRCHPO,11,0)):1,1:0),X=$S($D(^PRC(442,PRCHPO,7)):$P(^(7),U,2),1:"")
"RTN","PRCHEF",17,0)
 S PRCHREC=$S($O(^PRC(442,PRCHPO,11,0)):1,1:0),X=$P($G(^PRC(442,PRCHPO,7)),U,2)
"RTN","PRCHEF",18,0)
 I PRCHREC S Y=$S(X=30:"25,30",X=31:"26,31",X=33:"28,33",1:X)
"RTN","PRCHEF",19,0)
 I 'PRCHREC S Y=$S(X=25:"22,20",X=27:22,X=30:"20,22",X=26:"23,21",X=31:"23,21",X=28:10,X=33:10,1:X)
"RTN","PRCHEF",20,0)
 W !!
"RTN","PRCHEF",21,0)
 K DIC S DIC("S")="I "_""""_Y_""""_"[($P(^(0),U,2)),$L($P(^(0),U,2))=""2"""
"RTN","PRCHEF",22,0)
 ;S DIC="^PRCD(442.3,",DIC(0)="AEQMZ",DIC("B")=$S($D(^PRC(442,PRCHPO,7)):$P(^(7),U,1),1:""),DIC("A")="Update SUPPLY STATUS: " D ^DIC K DIC S PRCHX=+Y I PRCHX'>0 S PRCHX=$S($D(^PRC(442,PRCHPO,7)):$P(^(7),U,1),1:"")
"RTN","PRCHEF",23,0)
 S DIC="^PRCD(442.3,",DIC(0)="AEQMZ",DIC("B")=$P($G(^PRC(442,PRCHPO,7)),U,1),DIC("A")="Update SUPPLY STATUS: " D ^DIC K DIC S PRCHX=+Y I PRCHX'>0 S PRCHX=$P($G(^PRC(442,PRCHPO,7)),U,1)
"RTN","PRCHEF",24,0)
 S X=$P(^PRC(442,PRCHPO,0),U,17),X=X-PRCHEX,$P(^(0),U,17)=X,DR=".5////"_PRCHX,DIE="^PRC(442,",DA=PRCHPO K PRCHX D ^DIE,Q^PRCHE
"RTN","PRCHEF",25,0)
 G EN80
"RTN","PRCIREC1")
0^14^B1010091^n/a
"RTN","PRCIREC1",1,0)
PRCIREC1 ;WISC/SWS-Filed transform code ;9/7/06  14:22
"RTN","PRCIREC1",2,0)
V ;;5.1;IFCAP;**107**;Oct 20, 2000;Build 13
"RTN","PRCIREC1",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCIREC1",4,0)
 ;This routine serves as the input transform for the field Inventory Point in File ^PRCP(445)
"RTN","PRCIREC1",5,0)
 Q
"RTN","PRCIREC1",6,0)
START S:X'["-" X=$G(PRC("SITE"))_"-"_X
"RTN","PRCIREC1",7,0)
 I 'X!($L(X)>30)!(X'?3N1"-"1ANP.ANP)!('$G(PRCPPRIV)) K X Q
"RTN","PRCIREC1",8,0)
 I +X'=PRC("SITE") D
"RTN","PRCIREC1",9,0)
 . K MSG
"RTN","PRCIREC1",10,0)
 .S MSG(1)="  "_+X_" not current station number."
"RTN","PRCIREC1",11,0)
 .D EN^DDIOL(.MSG)
"RTN","PRCIREC1",12,0)
 .K MSG,X
"RTN","PRCIREC1",13,0)
 I $D(X),$O(^PRCP(445,"B",X,0)) D
"RTN","PRCIREC1",14,0)
 . S MSG(1)="  DUPLICATE NAME"
"RTN","PRCIREC1",15,0)
 . D EN^DDIOL(.MSG)
"RTN","PRCIREC1",16,0)
 . K MSG,X
"RTN","PRCIREC1",17,0)
 Q
"RTN","PRCIREC1",18,0)
DELETE I $P($G(^PRCP(445,D0,0)),U,3)="W" D
"RTN","PRCIREC1",19,0)
 . K MSG
"RTN","PRCIREC1",20,0)
 . S MSG(1)="YOU CANNOT DELETE WAREHOUSE TYPE INVENTORY POINTS.",MSG(1,"F")="!?2"
"RTN","PRCIREC1",21,0)
 . D EN^DDIOL(.MSG)
"RTN","PRCIREC1",22,0)
 . K MSG
"RTN","PRCIREC1",23,0)
 Q
"RTN","PRCSD122")
0^13^B6877628^B6877538
"RTN","PRCSD122",1,0)
PRCSD122 ;WISC/SAW-CONTROL POINT ACT. 2237 TERM. DISP. CON'T ;4/21/93  08:46
"RTN","PRCSD122",2,0)
V ;;5.1;IFCAP;**107**;Oct 20, 2000;Build 13
"RTN","PRCSD122",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCSD122",4,0)
 I IOSL-$Y<5 D NEWP^PRCSD121 Q:Z1=U
"RTN","PRCSD122",5,0)
 W !,"JUSTIFICATION OF NEED OR TURN-IN"
"RTN","PRCSD122",6,0)
 I '$D(^PRCS(410,DA,8,0)) G SIG
"RTN","PRCSD122",7,0)
 S DIWL=1,DIWR=80,DIWF="" K ^UTILITY($J,"W") S X1=0 F I=1:1 S X1=$O(^PRCS(410,DA,8,X1)) Q:X1=""  S X=^(X1,0) D DIWP^PRCUTL($G(DA))
"RTN","PRCSD122",8,0)
 S Z=^UTILITY($J,"W",DIWL) F K=1:1:Z D:IOSL-$Y<2 NEWP^PRCSD121 Q:Z1=U  W !,^UTILITY($J,"W",DIWL,K,0)
"RTN","PRCSD122",9,0)
SIG ;PRINT SIGNATURE BLOCKS
"RTN","PRCSD122",10,0)
 I IOSL-$Y<5 D NEWP^PRCSD121 Q:Z1=U
"RTN","PRCSD122",11,0)
 W !,L
"RTN","PRCSD122",12,0)
 W !,"Originator of Request: " S XNAME=$P($G(^PRCS(410,DA,14)),"^") I XNAME'="" W $P($G(^VA(200,XNAME,0)),"^")
"RTN","PRCSD122",13,0)
 W !,"Signature of Initiator",?37,"Signature of Approving Official Date"
"RTN","PRCSD122",14,0)
 I '$D(^PRCS(410,DA,7)) W ! G SIG1
"RTN","PRCSD122",15,0)
 W !,?37 K P1 S:$P(^PRCS(410,DA,7),U,3)'="" (P,P1)=$P(^(7),U,3) I $D(P1),$P(^(7),U,6)'="" W "/ES/",$$DECODE^PRCSC1(DA)
"RTN","PRCSD122",16,0)
 N PRSHLB S PRSHLB=^DD(410,40,0) W ?69,! I $P(^PRCS(410,DA,7),U)'="" S (P,P2)=$P(^(7),U) I $P(PRSHLB,"^",2)[200,$D(^VA(200,P,20)),$P(^(20),U,2)]"" W $E($P(^(20),U,2),1,28)
"RTN","PRCSD122",17,0)
 I $D(P2),$P(PRSHLB,"^",2)[200,$D(^VA(200,+P2,.13)),$L($P(^(.13),U,2))'>5 W " (",$P(^(.13),U,2),")"
"RTN","PRCSD122",18,0)
 N PRSHLC S PRSHLC=^DD(410,42,0) K P2 W ?37 I $D(P1),$P(PRSHLC,"^",2)[200,$D(^VA(200,P1,20)),$P(^(20),U,2)]"" W $E($P(^(20),U,2),1,30)
"RTN","PRCSD122",19,0)
 W ?69,! W:$P(^PRCS(410,DA,7),U,2)'="" $P(^(7),U,2) W ?37 W:$P(^(7),U,4)'="" $P(^(7),U,4) W ?69 I $P(^(7),U,5)'="" S Y=$P(^(7),U,5) D DD^%DT W Y
"RTN","PRCSD122",20,0)
SIG1 W !,$E(L,1,36)
"RTN","PRCSD122",21,0)
 W " ",$E(L,38,68)
"RTN","PRCSD122",22,0)
 W "------------" I IOSL-$Y<5 D NEWP^PRCSD121 Q:Z1=U
"RTN","PRCSD122",23,0)
 W !,"Appropriation and Accounting Symbols"
"RTN","PRCSD122",24,0)
 S P=$P(^PRCS(410,DA,0),U,5) I $D(^(3)) S X=^(3) S:$P(X,U,2)'="" P=P_"-"_$P(X,U,2) S:$P(X,U)'="" P=P_"-"_$P($P(X,U)," ") S:$P(X,U,3)'="" P=P_"-"_$P($P(X,U,3)," ")
"RTN","PRCSD122",25,0)
 S:$D(PRCS("SUB")) P=P_"-"_PRCS("SUB")
"RTN","PRCSD122",26,0)
 I $D(^PRCS(410,DA,4)),$P(^(4),U,5)'="" S P=P_"-"_$P(^(4),U,5)
"RTN","PRCSD122",27,0)
 S FPROJ=$P($G(^PRCS(410,DA,3)),"^",12) S P=P_" "_FPROJ
"RTN","PRCSD122",28,0)
 W !,P,!,L
"RTN","PRCSD122",29,0)
 Q
"RTN","PRCSP122")
0^1^B10606621^B10606515
"RTN","PRCSP122",1,0)
PRCSP122 ;WISC/SAW-CONTROL POINT ACTIVITY 2237 PRINTOUT CON'T ;4/21/93  08:53
"RTN","PRCSP122",2,0)
V ;;5.1;IFCAP;**95,107**;Oct 20, 2000;Build 13
"RTN","PRCSP122",3,0)
 ;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","PRCSP122",4,0)
 I '$D(^PRCS(410,DA,"RM",0)) G DEL
"RTN","PRCSP122",5,0)
 I $D(^PRCS(410,DA,"RM",0)) W ! S P(1)=0,DIWL=6,DIWR=96,DIWF="" K ^UTILITY($J,"W") S X="SPECIAL REMARKS:" D DIWP^PRCUTL($G(DA)) F J=1:1 S P(1)=$O(^PRCS(410,DA,"RM",P(1))) Q:P(1)=""  S X=^(P(1),0) D DIWP^PRCUTL($G(DA))
"RTN","PRCSP122",6,0)
 S Z=^UTILITY($J,"W",DIWL) F K=1:1:Z D:$Y>62 NEWP^PRCSP121 W !,^UTILITY($J,"W",DIWL,K,0)
"RTN","PRCSP122",7,0)
DEL I $D(^PRCS(410,DA,9)),$P(^(9),U)'="" W !,"DELIVER TO: ",$P(^(9),U)
"RTN","PRCSP122",8,0)
 W !,L,!,"FOB",?24,"|TERMS",?48,"|DELIVERY DATE",?63,"|QUOTE DATE",?77,"|BY(Initials)",!,?24,"|",?48,"|",?63,"|",?77,"|"
"RTN","PRCSP122",9,0)
 W !,$E(L,1,24),"|",$E(L,1,23),"|",$E(L,1,14),"|",$E(L,1,13),"|",$E(L,1,12)
"RTN","PRCSP122",10,0)
 I $Y>58 D NEWP^PRCSP121
"RTN","PRCSP122",11,0)
 W !,"JUSTIFICATION OF NEED OR TURN-IN (If recurring need, indicate 30-day estimate. If turn-in,",!,"do not use this form if circumstances require use of VA Form 90-1217, Report of Survey)"
"RTN","PRCSP122",12,0)
 I '$D(^PRCS(410,DA,8,0)) G SIG
"RTN","PRCSP122",13,0)
 S (MYTEMP,BFLAG)=0
"RTN","PRCSP122",14,0)
 F I=1:1 S MYTEMP=$O(^PRCS(410,DA,8,MYTEMP)) Q:MYTEMP=""  S BFLAG=1
"RTN","PRCSP122",15,0)
 I BFLAG=0  G SIG
"RTN","PRCSP122",16,0)
 S DIWL=6,DIWR=96,DIWF="" K ^UTILITY($J,"W") S X1=0 F I=1:1 S X1=$O(^PRCS(410,DA,8,X1)) Q:X1=""  S X=^(X1,0) D DIWP^PRCUTL($G(DA))
"RTN","PRCSP122",17,0)
 S Z=^UTILITY($J,"W",DIWL) F K=1:1:Z D:$Y>62 NEWP^PRCSP121 W !,^UTILITY($J,"W",DIWL,K,0)
"RTN","PRCSP122",18,0)
SIG ;PRINT SIGNATURE BLOCKS
"RTN","PRCSP122",19,0)
 I $Y>58 D NEWP^PRCSP121
"RTN","PRCSP122",20,0)
 W !,L
"RTN","PRCSP122",21,0)
 W !,"Originator of Request: " S XNAME=$P($G(^PRCS(410,DA,14)),"^") I XNAME'="" W $P($G(^VA(200,XNAME,0)),"^")
"RTN","PRCSP122",22,0)
 W !,"Signature of Initiator",?39,"|Signature of Approving Official |Date"
"RTN","PRCSP122",23,0)
 I '$D(^PRCS(410,DA,7)) W !,?39,"|",?72,"|",!,?39,"|",?72,"|" G SIG1
"RTN","PRCSP122",24,0)
 K P1 W !,?39,"|" S:$P(^PRCS(410,DA,7),U,3)'="" (P,P1)=$P(^(7),U,3) I $D(P1) W "/ES/",$$DECODE^PRCSC1(DA)
"RTN","PRCSP122",25,0)
 N PRSHLE S PRSHLE=^DD(410,40,0) W ?72,"|",! I $P(^PRCS(410,DA,7),U)'="" S (P,P2)=$P(^(7),U) I $P(PRSHLE,"^",2)[200,$D(^VA(200,P,20)),$P(^(20),U,2)]"" W $E($P(^(20),U,2),1,31)
"RTN","PRCSP122",26,0)
 I $D(P2),$P(^DD(410,40,0),"^",2)[200,$D(^VA(200,+P2,.13)),$L($P(^(.13),U,2))'>5 W " (",$P(^(.13),U,2),")"
"RTN","PRCSP122",27,0)
 K P2 W ?39,"|" I $D(P1),$P(^DD(410,42,0),"^",2)[200,$D(^VA(200,P1,20)),$P(^(20),U,2)]"" W $E($P(^(20),U,2),1,33)
"RTN","PRCSP122",28,0)
 W ?72,"|",! W:$P(^PRCS(410,DA,7),U,2)'="" $P(^(7),U,2) W ?39,"|" W:$P(^(7),U,4)'="" $P(^(7),U,4) W ?72,"|" S Y=$S($P(^(7),U,7):$P(^(7),U,7),1:$P(^(7),U,5)) I Y D DD^%DT W Y
"RTN","PRCSP122",29,0)
SIG1 W !,$E(L,1,39)
"RTN","PRCSP122",30,0)
 W "|",$E(L,1,32)
"RTN","PRCSP122",31,0)
 W "|",$E(L,1,17) Q:PRNTALL=0  I $Y>41 D NEWP^PRCSP121
"RTN","PRCSP122",32,0)
 Q
"VER")
8.0^22.0
"^DD",421.5,421.5,4,0)
PROMPT PAY TYPE^RS^A:NORMAL;C:CONTRACT;D:DAIRY;E:EXEMPT;I:FEE WITH INTEREST;M:MEAT;N:FEE WITH NO INTEREST;O:OLDER PAYMENT;P:PRODUCE;R:RECURRING PAYMENTS;V:PRIME VENDORS;X:PAY IMMEDIATE IFCAP;Z:PRE PROMPT PAY ORDERS;^0;6^Q
"^DD",421.5,421.5,4,21,0)
^.001^1^1^3071106^^^^
"^DD",421.5,421.5,4,21,1,0)
This field indicates the prompt pay type of the invoice.
"^DD",421.5,421.5,4,"DT")
3071106
"^DD",445,445,.01,0)
INVENTORY POINT^RFX^^0;1^D START^PRCIREC1
"^DD",445,445,.01,1,0)
^.1^^-1
"^DD",445,445,.01,1,1,0)
445^B
"^DD",445,445,.01,1,1,1)
S ^PRCP(445,"B",$E(X,1,30),DA)=""
"^DD",445,445,.01,1,1,2)
K ^PRCP(445,"B",$E(X,1,30),DA)
"^DD",445,445,.01,1,2,0)
445^C^MUMPS
"^DD",445,445,.01,1,2,1)
S ^PRCP(445,"C",$P(X,"-",2,99),DA)=""
"^DD",445,445,.01,1,2,2)
K ^PRCP(445,"C",$P(X,"-",2,99),DA)
"^DD",445,445,.01,1,2,"%D",0)
^^2^2^2940715^^
"^DD",445,445,.01,1,2,"%D",1,0)
This cross reference is used to store the name of the inventory point
"^DD",445,445,.01,1,2,"%D",2,0)
without including the station number (from the first piece of "-").
"^DD",445,445,.01,1,2,"DT")
2920107
"^DD",445,445,.01,3)
Name of any Inventory/Distribution Point (30 char.max.) Can be the Warehouse, a Primary (can order from supply), or a Secondary (stocked by a Primary). (Preceded by Site No. and a dash [-] internally)
"^DD",445,445,.01,21,0)
^.001^3^3^3080214^^^
"^DD",445,445,.01,21,1,0)
This is the name of a warehouse, primary, or secondary inventory point.
"^DD",445,445,.01,21,2,0)
The name of the inventory point must be preceded with the station number
"^DD",445,445,.01,21,3,0)
and must be an unique name not already used.
"^DD",445,445,.01,"DEL",1,0)
D DELETE^PRCIREC1
"^DD",445,445,.01,"DEL",2,0)
D KILL^PRCPUINV(DA) I 1
"^DD",445,445,.01,"DT")
3080214
"BLD",5026,6)
^98
**END**
**END**
