Released EAS*1*81 SEQ #77
Extracted from mail message
**KIDS**:EAS*1.0*81^

**INSTALL NAME**
EAS*1.0*81
"BLD",6810,0)
EAS*1.0*81^ENROLLMENT APPLICATION SYSTEM^0^3090812^y
"BLD",6810,1,0)
^^8^8^3090812^^^^
"BLD",6810,1,1,0)
This patch fixes a subscript error that is encountered when printing the
"BLD",6810,1,2,0)
1010EZ.  It also fixes a prompt to look for a Y instead of a YES.
"BLD",6810,1,3,0)
This patch adds code to ask the user if the patient is the correct patient 
"BLD",6810,1,4,0)
when processing the 1010EZ from the web. If not,  the code
"BLD",6810,1,5,0)
will allow the patient with the same name to be added if entered in
"BLD",6810,1,6,0)
double quotation marks.
"BLD",6810,1,7,0)
This patch also removes the word "Enclosure" from the 0 and 30 day
"BLD",6810,1,8,0)
Means Test letters.
"BLD",6810,4,0)
^9.64PA^^
"BLD",6810,6.3)
11
"BLD",6810,"ABNS",0)
^9.66A^1^1
"BLD",6810,"ABNS",1,0)
EAS
"BLD",6810,"ABNS",1,1,0)
^9.661A^^
"BLD",6810,"ABNS","B","EAS",1)

"BLD",6810,"ABPKG")
n^n
"BLD",6810,"KRN",0)
^9.67PA^8989.52^19
"BLD",6810,"KRN",.4,0)
.4
"BLD",6810,"KRN",.4,"NM",0)
^9.68A^^
"BLD",6810,"KRN",.401,0)
.401
"BLD",6810,"KRN",.402,0)
.402
"BLD",6810,"KRN",.403,0)
.403
"BLD",6810,"KRN",.5,0)
.5
"BLD",6810,"KRN",.84,0)
.84
"BLD",6810,"KRN",3.6,0)
3.6
"BLD",6810,"KRN",3.8,0)
3.8
"BLD",6810,"KRN",9.2,0)
9.2
"BLD",6810,"KRN",9.8,0)
9.8
"BLD",6810,"KRN",9.8,"NM",0)
^9.68A^5^4
"BLD",6810,"KRN",9.8,"NM",1,0)
EASEZI^^0^B43721741
"BLD",6810,"KRN",9.8,"NM",3,0)
EASEZPVD^^0^B22024581
"BLD",6810,"KRN",9.8,"NM",4,0)
EASEZW2^^0^B29528851
"BLD",6810,"KRN",9.8,"NM",5,0)
EASMTL6A^^0^B29010921
"BLD",6810,"KRN",9.8,"NM","B","EASEZI",1)

"BLD",6810,"KRN",9.8,"NM","B","EASEZPVD",3)

"BLD",6810,"KRN",9.8,"NM","B","EASEZW2",4)

"BLD",6810,"KRN",9.8,"NM","B","EASMTL6A",5)

"BLD",6810,"KRN",19,0)
19
"BLD",6810,"KRN",19.1,0)
19.1
"BLD",6810,"KRN",101,0)
101
"BLD",6810,"KRN",409.61,0)
409.61
"BLD",6810,"KRN",771,0)
771
"BLD",6810,"KRN",870,0)
870
"BLD",6810,"KRN",8989.51,0)
8989.51
"BLD",6810,"KRN",8989.52,0)
8989.52
"BLD",6810,"KRN",8994,0)
8994
"BLD",6810,"KRN","B",.4,.4)

"BLD",6810,"KRN","B",.401,.401)

"BLD",6810,"KRN","B",.402,.402)

"BLD",6810,"KRN","B",.403,.403)

"BLD",6810,"KRN","B",.5,.5)

"BLD",6810,"KRN","B",.84,.84)

"BLD",6810,"KRN","B",3.6,3.6)

"BLD",6810,"KRN","B",3.8,3.8)

"BLD",6810,"KRN","B",9.2,9.2)

"BLD",6810,"KRN","B",9.8,9.8)

"BLD",6810,"KRN","B",19,19)

"BLD",6810,"KRN","B",19.1,19.1)

"BLD",6810,"KRN","B",101,101)

"BLD",6810,"KRN","B",409.61,409.61)

"BLD",6810,"KRN","B",771,771)

"BLD",6810,"KRN","B",870,870)

"BLD",6810,"KRN","B",8989.51,8989.51)

"BLD",6810,"KRN","B",8989.52,8989.52)

"BLD",6810,"KRN","B",8994,8994)

"BLD",6810,"QUES",0)
^9.62^^
"BLD",6810,"REQB",0)
^9.611^1^1
"BLD",6810,"REQB",1,0)
EAS*1.0*70^2
"BLD",6810,"REQB","B","EAS*1.0*70",1)

"MBREQ")
0
"PKG",552,-1)
1^1
"PKG",552,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",552,20,0)
^9.402P^1^1
"PKG",552,20,1,0)
2^^EASXDR
"PKG",552,20,1,1)
 
"PKG",552,20,"B",2,1)

"PKG",552,22,0)
^9.49I^1^1
"PKG",552,22,1,0)
1.0^3010315^3010410^66481
"PKG",552,22,1,"PAH",1,0)
81^3090812
"PKG",552,22,1,"PAH",1,1,0)
^^8^8^3090812
"PKG",552,22,1,"PAH",1,1,1,0)
This patch fixes a subscript error that is encountered when printing the
"PKG",552,22,1,"PAH",1,1,2,0)
1010EZ.  It also fixes a prompt to look for a Y instead of a YES.
"PKG",552,22,1,"PAH",1,1,3,0)
This patch adds code to ask the user if the patient is the correct patient 
"PKG",552,22,1,"PAH",1,1,4,0)
when processing the 1010EZ from the web. If not,  the code
"PKG",552,22,1,"PAH",1,1,5,0)
will allow the patient with the same name to be added if entered in
"PKG",552,22,1,"PAH",1,1,6,0)
double quotation marks.
"PKG",552,22,1,"PAH",1,1,7,0)
This patch also removes the word "Enclosure" from the 0 and 30 day
"PKG",552,22,1,"PAH",1,1,8,0)
Means Test letters.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","EASEZI")
0^1^B43721741^B24333225
"RTN","EASEZI",1,0)
EASEZI ;ALB/jap - Database Inquiry & Record Finder for 1010EZ Processing ;10/12/00  13:08
"RTN","EASEZI",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,9,44,51,57,70,81**;Mar 15, 2001;Build 11
"RTN","EASEZI",3,0)
 ;
"RTN","EASEZI",4,0)
DFN(EASAPP,EASDFN) ;match or add 1010EZ applicant to Patient file #2
"RTN","EASEZI",5,0)
 ;
"RTN","EASEZI",6,0)
 ;input  
"RTN","EASEZI",7,0)
 ;  EASAPP = application ien in file #712
"RTN","EASEZI",8,0)
 ;output 
"RTN","EASEZI",9,0)
 ;  EASDFN = valid ien in file #2; passed by reference
"RTN","EASEZI",10,0)
 ;           OR -1 if no patient match made;
"RTN","EASEZI",11,0)
 ;           note: this may be an existing patient or one newly created by user action
"RTN","EASEZI",12,0)
 ;
"RTN","EASEZI",13,0)
 ;This entry point it used only for initial match of Applicant with Patient database.
"RTN","EASEZI",14,0)
 ;
"RTN","EASEZI",15,0)
 N DFN,DGNEWPF,DGRPTOUT,EZDATA,KEY,NAME,SSN,DOB,SEX,KEYIEN,ACCEPT,ARRAY,RECD
"RTN","EASEZI",16,0)
 N VETTYPE,NEW,TSSN,REM,N,X,DA,DR,DIE,DIC,DIQ,ALREADY,OUT,FILE,SUBFILE,FLD,ELIGVER,SVCVER,APPTVER
"RTN","EASEZI",17,0)
 Q:'EASAPP
"RTN","EASEZI",18,0)
 ;do not proceed if link to file #2 already established
"RTN","EASEZI",19,0)
 S EASDFN=$P($G(^EAS(712,EASAPP,0)),U,10) Q:EASDFN
"RTN","EASEZI",20,0)
 D FULL^VALM1 W @IOF
"RTN","EASEZI",21,0)
 S EASEZNEW="",ELIGVER=0,SVCVER=0,APPTVER=0
"RTN","EASEZI",22,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT SEX")
"RTN","EASEZI",23,0)
 S SEX=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1),SEX=$S(SEX="M":"Male",SEX="F":"Female",1:"")
"RTN","EASEZI",24,0)
 S DIQ="ARRAY",DIQ(0)="E",DA=EASAPP,DR="1;2;3;3.3",DIC=712 D EN^DIQ1
"RTN","EASEZI",25,0)
 S NAME=$G(ARRAY(712,EASAPP,1,"E"))
"RTN","EASEZI",26,0)
 S SSN=$P($G(ARRAY(712,EASAPP,2,"E")),"&",1)
"RTN","EASEZI",27,0)
 S DOB=$P($G(ARRAY(712,EASAPP,2,"E")),"&",2)
"RTN","EASEZI",28,0)
 S RECD=$G(ARRAY(712,EASAPP,3,"E"))
"RTN","EASEZI",29,0)
 S VETTYPE=$G(ARRAY(712,EASAPP,3.3,"E"))
"RTN","EASEZI",30,0)
 W !,"Applicant Data",?24,"Application #: ",EASAPP,?48,"Received: ",RECD,!
"RTN","EASEZI",31,0)
 W !,"Name: ",NAME
"RTN","EASEZI",32,0)
 W !,"SSN: ",SSN,?24,"DOB: ",DOB,?48,"Sex: ",SEX
"RTN","EASEZI",33,0)
 W !,"Veteran Type: ",VETTYPE
"RTN","EASEZI",34,0)
 W !!,"Enter Applicant data as prompted --"
"RTN","EASEZI",35,0)
 ;
"RTN","EASEZI",36,0)
 ;Get Patient file (#2) IEN - DFN
"RTN","EASEZI",37,0)
 ;EAS*1*81 - changes made to allow adding new patient with same name
"RTN","EASEZI",38,0)
 ;as an existing patient
"RTN","EASEZI",39,0)
 N EASANS,Y S EASANS=0
"RTN","EASEZI",40,0)
 N DIR,DIRUT
"RTN","EASEZI",41,0)
 S DIR(0)="YAO"
"RTN","EASEZI",42,0)
 S DIR("?")="Enter 'Yes' if this patient is the one you want to select."
"RTN","EASEZI",43,0)
 S DIR("A")="IS THIS THE CORRECT PATIENT? "
"RTN","EASEZI",44,0)
 S DIR("B")="YES"
"RTN","EASEZI",45,0)
 F  Q:EASANS  D  K DIR
"RTN","EASEZI",46,0)
 . D GETPAT^DGRPTU("",1,.DFN,.DGNEWPF)
"RTN","EASEZI",47,0)
 . I DFN'>0 S EASANS=1 Q
"RTN","EASEZI",48,0)
 . I DFN>0,($G(DGNEWPF)'=1) D
"RTN","EASEZI",49,0)
 . . D ^DIR
"RTN","EASEZI",50,0)
 . . I $D(DIRUT) Q
"RTN","EASEZI",51,0)
 . . I Y(0)["Y" S EASANS=1 Q
"RTN","EASEZI",52,0)
 . . I Y(0)["N" K DFN
"RTN","EASEZI",53,0)
 . . I $G(DFN)'>0 D
"RTN","EASEZI",54,0)
 . . W !!?5,"If there are already one or more patients with the same name,",!?5,"re-enter the name in double quotes, for example, ""DOE,JOHN""."
"RTN","EASEZI",55,0)
 Q:($G(DFN)'>0)
"RTN","EASEZI",56,0)
 ;if DGNEWPF=1 then applicant has just been added to file #2 as new patient
"RTN","EASEZI",57,0)
 S NEW=""
"RTN","EASEZI",58,0)
 I DGNEWPF D
"RTN","EASEZI",59,0)
 . S NEW=1
"RTN","EASEZI",60,0)
 . ;add a remark to file #2 record to help keep track of new patients added by 1010EZ
"RTN","EASEZI",61,0)
 . S REM="NEW PT. FROM ELECTRONIC 10-10EZ -- IN PROCESS"
"RTN","EASEZI",62,0)
 . S DA=DFN,DIE="^DPT(",DR=".091///^S X=REM"
"RTN","EASEZI",63,0)
 . D ^DIE
"RTN","EASEZI",64,0)
 ;if seems to be not new, check remark field just to make sure
"RTN","EASEZI",65,0)
 I NEW="" D
"RTN","EASEZI",66,0)
 . S REM="NEW PT. FROM ELECTRONIC 10-10EZ -- IN PROCESS"
"RTN","EASEZI",67,0)
 . I $P(^DPT(DFN,0),U,10)=REM S NEW=1
"RTN","EASEZI",68,0)
 ;MPI Query
"RTN","EASEZI",69,0)
 S X="MPIFAPI" X ^%ZOSF("TEST")  D
"RTN","EASEZI",70,0)
 . Q:'$T
"RTN","EASEZI",71,0)
 . K MPIFRTN
"RTN","EASEZI",72,0)
 . D MPIQ^MPIFAPI(DFN)
"RTN","EASEZI",73,0)
 . K MPIFRTN,MPIQRYNM
"RTN","EASEZI",74,0)
 ;check for an in-process application already linked to this DFN
"RTN","EASEZI",75,0)
 S OUT=0,ALREADY=0 F  S ALREADY=$O(^EAS(712,"AC",DFN,ALREADY)) Q:'ALREADY  D  Q:OUT
"RTN","EASEZI",76,0)
 . S FILDATE=$P($G(^EAS(712,ALREADY,2)),U,5)
"RTN","EASEZI",77,0)
 . S CLSDATE=$P($G(^EAS(712,ALREADY,2)),U,9)
"RTN","EASEZI",78,0)
 . I 'FILDATE,'CLSDATE S OUT=1 D
"RTN","EASEZI",79,0)
 . . W !!?3,"Sorry... cannot link to selected Patient."
"RTN","EASEZI",80,0)
 . . W !?3,"Application #"_ALREADY_" is already linked to this Patient,"
"RTN","EASEZI",81,0)
 . . W !?3,"and is still in-process."
"RTN","EASEZI",82,0)
 . . D PAUSE^VALM1 K FILDATE,CLSDATE
"RTN","EASEZI",83,0)
 Q:OUT
"RTN","EASEZI",84,0)
 D RESET^EASEZI1
"RTN","EASEZI",85,0)
 Q
"RTN","EASEZI",86,0)
 ;
"RTN","EASEZI",87,0)
I201(EASDFN,EASARRAY) ;retrieve ien(s) in subfile #2.01
"RTN","EASEZI",88,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",89,0)
 ;output EASARRAY = ien(s) to #2.01
"RTN","EASEZI",90,0)
 ;                  each array element = EASDFN;subfile_ien
"RTN","EASEZI",91,0)
 ;
"RTN","EASEZI",92,0)
 N N,IEN
"RTN","EASEZI",93,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,.01,IEN)) Q:'IEN  S N=N+1,EASARRAY(N)=EASDFN_";"_IEN
"RTN","EASEZI",94,0)
 Q
"RTN","EASEZI",95,0)
 ;
"RTN","EASEZI",96,0)
I202(EASDFN,EASARRAY) ;retrieve ien(s) in subfile #2.02
"RTN","EASEZI",97,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",98,0)
 ;output EASARRAY = ien(s) to #2.01
"RTN","EASEZI",99,0)
 ;                  each array element = EASDFN;subfile_ien
"RTN","EASEZI",100,0)
 ;
"RTN","EASEZI",101,0)
 N N,IEN
"RTN","EASEZI",102,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,.02,IEN)) Q:'IEN  S N=N+1,EASARRAY(N)=EASDFN_";"_IEN
"RTN","EASEZI",103,0)
 Q
"RTN","EASEZI",104,0)
 ;
"RTN","EASEZI",105,0)
I206(EASDFN,EASARRAY) ;retrieve ien(s) in subfile #2.06
"RTN","EASEZI",106,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",107,0)
 ;output EASARRAY = ien(s) to #2.01
"RTN","EASEZI",108,0)
 ;                  each array element = EASDFN;subfile_ien
"RTN","EASEZI",109,0)
 ;
"RTN","EASEZI",110,0)
 N N,IEN
"RTN","EASEZI",111,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,.06,IEN)) Q:'IEN  S N=N+1,EASARRAY(N)=EASDFN_";"_IEN
"RTN","EASEZI",112,0)
 Q
"RTN","EASEZI",113,0)
 ;
"RTN","EASEZI",114,0)
I2101(EASDFN,EASARRAY) ;retrieve ien to subfile #2.101
"RTN","EASEZI",115,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",116,0)
 ;output EASARRAY = most recent ien in #2.101;
"RTN","EASEZI",117,0)
 ;                  array element = EASDFN;subfile_ien
"RTN","EASEZI",118,0)
 ;
"RTN","EASEZI",119,0)
 N N,IEN,ARR,LAST,EASQUIT,EASICN
"RTN","EASEZI",120,0)
 S EASQUIT=0
"RTN","EASEZI",121,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,"DIS",IEN)) Q:'IEN!EASQUIT  D
"RTN","EASEZI",122,0)
 . ;S RDATE=$P(^DPT(EASDFN,"DIS",IEN,0),U,1),ARR(RDATE)=IEN
"RTN","EASEZI",123,0)
 . S RDATE=$P($G(^DPT(EASDFN,"DIS",IEN,0)),U,1) I RDATE]"" S ARR(RDATE)=IEN
"RTN","EASEZI",124,0)
 . I RDATE']"" D
"RTN","EASEZI",125,0)
 .. K XQA,XQAID,XQAMSG
"RTN","EASEZI",126,0)
 .. S EASICN=$$GETICN^MPIF001(EASDFN) I EASICN]"" S EASICN=$P(EASICN,"V",1)
"RTN","EASEZI",127,0)
 .. S XQA(DUZ)=""
"RTN","EASEZI",128,0)
 .. S XQAID="EAS"
"RTN","EASEZI",129,0)
 .. S XQAMSG="No disposition for "_$P(^DPT(EASDFN,0),"^",1)_" ICN: "_EASICN_" Re-register patient."
"RTN","EASEZI",130,0)
 .. ;S $P(XQADATA,"^",1)="NAME : "_$P(^DPT(EASDFN,0),"^",1) ;PATIENT NAME
"RTN","EASEZI",131,0)
 .. D SETUP^XQALERT
"RTN","EASEZI",132,0)
 ..; S EASQUIT=1 K ^DPT(EASDFN,"DIS",IEN),^DPT("ADA",1,EASDFN),ARR
"RTN","EASEZI",133,0)
 .. S EASQUIT=1 D
"RTN","EASEZI",134,0)
 ... K ARR,DA,DA(1),DIK,EASNODE,EASDT
"RTN","EASEZI",135,0)
 ... S DA=IEN,DA(1)=EASDFN,DIK="^DPT("_EASDFN_",""DIS""," D ^DIK K DIK,DA
"RTN","EASEZI",136,0)
 ... I $D(^DPT("ADA",1,EASDFN)) S EASDT=$O(^DPT("ADA",1,EASDFN,0)),EASNODE="^DPT(""ADA"""_",1,"_EASDFN_","_EASDT_")" K @EASNODE
"RTN","EASEZI",137,0)
 ... Q
"RTN","EASEZI",138,0)
 .. I '$D(IO("Q")) D 
"RTN","EASEZI",139,0)
 ... W !!,"No disposition for "_$P(^DPT(EASDFN,0),"^",1)_" ICN: "_EASICN
"RTN","EASEZI",140,0)
 ... W !,"A blank 1010EZ may print. Please re-register the patient and reprint the 1010EZ."
"RTN","EASEZI",141,0)
 ... H 6
"RTN","EASEZI",142,0)
 ..; D ENQUIT^EASEZPF ; KILLS ALL OF THE ^TMP("EZ" VARIABLES FOR PRINTING1010EZ.
"RTN","EASEZI",143,0)
 ..S EASARRAY(1)="NO DISPOSITION" Q
"RTN","EASEZI",144,0)
 I $D(ARR) D
"RTN","EASEZI",145,0)
 . S LAST=$O(ARR(999999999),-1),IEN=ARR(LAST)
"RTN","EASEZI",146,0)
 . S EASARRAY(1)=EASDFN_";"_IEN
"RTN","EASEZI",147,0)
 Q
"RTN","EASEZI",148,0)
 ;
"RTN","EASEZI",149,0)
I2711(EASDFN,EASARRAY) ;retrieve ien to file #27.11
"RTN","EASEZI",150,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",151,0)
 ;output EASARRAY = current enrollment ien in #27.11;
"RTN","EASEZI",152,0)
 ;                  array element = ien
"RTN","EASEZI",153,0)
 N CUR
"RTN","EASEZI",154,0)
 S CUR=$$FINDCUR^DGENA(+EASDFN)
"RTN","EASEZI",155,0)
 S EASARRAY(1)=CUR
"RTN","EASEZI",156,0)
 Q
"RTN","EASEZI",157,0)
 ;
"RTN","EASEZI",158,0)
I408(EASDFN,EASAPP,EASARRAY) ;retrieve ien(s) to files #408.12,#408.13,#408.21,#408.22
"RTN","EASEZI",159,0)
 ;
"RTN","EASEZI",160,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",161,0)
 ;      EASAPP    = ien to #712
"RTN","EASEZI",162,0)
 ;output EASARRAY = ien(s) to files; passed by reference
"RTN","EASEZI",163,0)
 ;       array(408,"V",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;veteran data
"RTN","EASEZI",164,0)
 ;       array(408,"S",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;spouse data
"RTN","EASEZI",165,0)
 ;       array(408,"C",multiple) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;child data
"RTN","EASEZI",166,0)
 ;   where ien_#408.13 = ien;global_root
"RTN","EASEZI",167,0)
 ;
"RTN","EASEZI",168,0)
 N CURINCYR,X,Y,DIC,DA,DR,DIQ,EAS,DEP,REL,IX,JX,KX,I13,SUB1,SUB2,INCYR,PT
"RTN","EASEZI",169,0)
 ;
"RTN","EASEZI",170,0)
 Q:'EASDFN
"RTN","EASEZI",171,0)
 S Y=$P($G(^EAS(712,EASAPP,0)),U,6) I Y="" S Y=DT
"RTN","EASEZI",172,0)
 S %F=5,X=$$FMTE^XLFDT(Y,%F),X=+$P(X,"/",3)-1,%DT="P" D ^%DT S CURINCYR=Y
"RTN","EASEZI",173,0)
 ;find all associated 408 records, even if no actual income test
"RTN","EASEZI",174,0)
 ; get #408.12, #408.13, #408.21, #408.22 iens
"RTN","EASEZI",175,0)
 K EAS S DEP=0
"RTN","EASEZI",176,0)
 S IX=0 F  S IX=$O(^DGPR(408.12,"B",EASDFN,IX)) Q:'IX  D
"RTN","EASEZI",177,0)
 . S DIC=408.12,DA=IX,DIQ="EAS",DIQ(0)="I",DR=".02;.03" D EN^DIQ1
"RTN","EASEZI",178,0)
 . S REL=$G(EAS(408.12,IX,.02,"I")),I13=$G(EAS(408.12,IX,.03,"I"))
"RTN","EASEZI",179,0)
 . S (SUB1,SUB2)="" S:REL=1 SUB1="V",SUB2=1 S:REL=2 SUB1="S",SUB2=1 S:REL>2 SUB1="C",DEP=DEP+1,SUB2=DEP
"RTN","EASEZI",180,0)
 . I SUB1]"" S EASARRAY(408,SUB1,SUB2)=IX_U_I13 D
"RTN","EASEZI",181,0)
 . . S JX=$O(^DGMT(408.21,"C",IX,""),-1)
"RTN","EASEZI",182,0)
 . . I JX D
"RTN","EASEZI",183,0)
 . . . S DIC=408.21,DA=JX,DIQ="EAS",DIQ(0)="I",DR=".01;.02" D EN^DIQ1
"RTN","EASEZI",184,0)
 . . . S INCYR=$G(EAS(408.21,JX,.01,"I")),PT=$G(EAS(408.21,JX,.02,"I"))
"RTN","EASEZI",185,0)
 . . . Q:PT'=IX
"RTN","EASEZI",186,0)
 . . . Q:(INCYR<CURINCYR)
"RTN","EASEZI",187,0)
 . . . S KX=$O(^DGMT(408.22,"AIND",JX,0))
"RTN","EASEZI",188,0)
 . . . S EASARRAY(408,SUB1,SUB2)=EASARRAY(408,SUB1,SUB2)_U_JX_U_KX
"RTN","EASEZI",189,0)
 Q
"RTN","EASEZI",190,0)
 ;
"RTN","EASEZI",191,0)
I1275(IEN) ;get the active subrecord from subfile #408.1275
"RTN","EASEZI",192,0)
 ;input     IEN = internal record number to file #408.12
"RTN","EASEZI",193,0)
 ;output SUBIEN = internal record number for active subrecord,
"RTN","EASEZI",194,0)
 ;                or -1 if invalid
"RTN","EASEZI",195,0)
 N B,ACT,SUBIEN
"RTN","EASEZI",196,0)
 I 'IEN Q -1
"RTN","EASEZI",197,0)
 S SUBIEN=-1
"RTN","EASEZI",198,0)
 S B=0 F  S B=$O(^DGPR(408.12,IEN,"E",B)) Q:'B  D
"RTN","EASEZI",199,0)
 . S ACT=$P(^DGPR(408.12,IEN,"E",B,0),U,2)
"RTN","EASEZI",200,0)
 . I ACT S SUBIEN=B
"RTN","EASEZI",201,0)
 Q SUBIEN
"RTN","EASEZPVD")
0^3^B22024581^B21610185
"RTN","EASEZPVD",1,0)
EASEZPVD ;ALB/AMA/CMF - GATHER VISTA DATA TO PRINT FROM DG OPTIONS ; 8/1/08 1:28pm
"RTN","EASEZPVD",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,66,70,81**;Mar 15, 2001;Build 11
"RTN","EASEZPVD",3,0)
 ;
"RTN","EASEZPVD",4,0)
VISTA(EASDFN,EASMTIEN) ;GATHER VISTA DATA -- CALLED FROM EN^EASEZPDG
"RTN","EASEZPVD",5,0)
 ;   INPUT:
"RTN","EASEZPVD",6,0)
 ;      EASDFN - POINTER TO PATIENT FILE (#2)
"RTN","EASEZPVD",7,0)
 ;      EASMTIEN - MeansTestIEN (408.31)
"RTN","EASEZPVD",8,0)
 ;
"RTN","EASEZPVD",9,0)
 N X,KEY,VDATA,DISPOS,DGNT,ENROLL,RACE,ETHNC
"RTN","EASEZPVD",10,0)
 ;
"RTN","EASEZPVD",11,0)
 ;GET LAST ALIAS NAME
"RTN","EASEZPVD",12,0)
 S X=$O(^DPT(EASDFN,.01,""),-1)
"RTN","EASEZPVD",13,0)
 I +X D
"RTN","EASEZPVD",14,0)
 . S KEY=+$$KEY711^EASEZU1("APPLICANT OTHER NAME")
"RTN","EASEZPVD",15,0)
 . S VDATA=$$GET^EASEZC1(EASDFN_";"_+X,"2^2.01^.01")
"RTN","EASEZPVD",16,0)
 . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",17,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",18,0)
 ;
"RTN","EASEZPVD",19,0)
 ;GATHER MOST RECENT DISPOSITION DATA, IF IT EXISTS
"RTN","EASEZPVD",20,0)
 ;OTHERWISE, PRINT "UNKNOWN" FOR THE FOLLOWING FIELDS
"RTN","EASEZPVD",21,0)
 D I2101^EASEZI(EASDFN,.DISPOS)
"RTN","EASEZPVD",22,0)
 I $D(DISPOS),$D(DISPOS(1)) I DISPOS(1)="NO DISPOSITION" Q
"RTN","EASEZPVD",23,0)
 I $D(DISPOS)>1 D  I 1
"RTN","EASEZPVD",24,0)
 . ;GET TYPE OF BENEFIT
"RTN","EASEZPVD",25,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^2")
"RTN","EASEZPVD",26,0)
 . I (VDATA'=-1),(VDATA'="") D
"RTN","EASEZPVD",27,0)
 . . I (VDATA="HOSPITAL")!(VDATA="OUTPATIENT MEDICAL") S VDATA="HEALTH SERVICES"
"RTN","EASEZPVD",28,0)
 . . I VDATA["DENTAL" S VDATA="DENTAL"
"RTN","EASEZPVD",29,0)
 . . I VDATA["NURSING" S VDATA="NURSING HOME"
"RTN","EASEZPVD",30,0)
 . . S KEY=+$$KEY711^EASEZU1("TYPE OF BENEFIT-"_VDATA)
"RTN","EASEZPVD",31,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)="YES"
"RTN","EASEZPVD",32,0)
 . ;GET FACILITY APPLYING TO
"RTN","EASEZPVD",33,0)
 . S KEY=+$$KEY711^EASEZU1("FACILITY TO RECEIVE 1010EZ")
"RTN","EASEZPVD",34,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^3")
"RTN","EASEZPVD",35,0)
 . I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",36,0)
 . ;
"RTN","EASEZPVD",37,0)
 . ;GET NEED RELATED TO JOB INJURY OR ACCIDENT
"RTN","EASEZPVD",38,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO JOB INJURY")
"RTN","EASEZPVD",39,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^20")
"RTN","EASEZPVD",40,0)
 . I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",41,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO ACCIDENT")
"RTN","EASEZPVD",42,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^23")
"RTN","EASEZPVD",43,0)
 . I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",44,0)
 E  D
"RTN","EASEZPVD",45,0)
 . ;IF NO DISPOSITION DATA, PRINT "UNKNOWN" FOR ABOVE FIELDS
"RTN","EASEZPVD",46,0)
 . S KEY=+$$KEY711^EASEZU1("TYPE OF BENEFIT-HEALTH SERVICES")
"RTN","EASEZPVD",47,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",48,0)
 . S KEY=+$$KEY711^EASEZU1("FACILITY TO RECEIVE 1010EZ")
"RTN","EASEZPVD",49,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",50,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO JOB INJURY")
"RTN","EASEZPVD",51,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",52,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO ACCIDENT")
"RTN","EASEZPVD",53,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",54,0)
 ;
"RTN","EASEZPVD",55,0)
 ;GET DATA FROM FILE #2
"RTN","EASEZPVD",56,0)
 S KEY=0 F  S KEY=$O(^TMP("EZDATA",$J,KEY)) Q:'KEY  D
"RTN","EASEZPVD",57,0)
 . S X=^TMP("EZDATA",$J,KEY)
"RTN","EASEZPVD",58,0)
 . I $P(X,U,1,2)="2^2" D
"RTN","EASEZPVD",59,0)
 . . S VDATA=$$GET^EASEZC1(EASDFN,X)
"RTN","EASEZPVD",60,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",61,0)
 . . I $P(X,U,3)=.09 S VDATA=$$SSNOUT^EASEZT1(VDATA)
"RTN","EASEZPVD",62,0)
 . . I $P(X,U,3)=.117 D
"RTN","EASEZPVD",63,0)
 . . . N ST,CNTY,CNAME
"RTN","EASEZPVD",64,0)
 . . . S ST=$$GET1^DIQ(2,EASDFN,.115,"I")
"RTN","EASEZPVD",65,0)
 . . . S CNTY=$$GET1^DIQ(2,EASDFN,.117,"I")
"RTN","EASEZPVD",66,0)
 . . . S CNAME=$$GET1^DIQ(5.01,CNTY_","_ST,.01)
"RTN","EASEZPVD",67,0)
 . . . S VDATA=CNAME_" ("_VDATA_")"
"RTN","EASEZPVD",68,0)
 . . ;EAS*1.0*70
"RTN","EASEZPVD",69,0)
 . . I $P(X,U,3)=.1173 S VDATA=$$COUNTRY^EASEZT1(VDATA) Q:VDATA=-1
"RTN","EASEZPVD",70,0)
 . . I $P(X,U,3)=.3405 D
"RTN","EASEZPVD",71,0)
 . . . I VDATA="N" S VDATA="EMERGENCY CONTACT"
"RTN","EASEZPVD",72,0)
 . . . E  S VDATA="NEXT OF KIN"
"RTN","EASEZPVD",73,0)
 . . I $P(X,U,3)=.362 D
"RTN","EASEZPVD",74,0)
 . . . I VDATA'["IN LIEU OF" S VDATA="NO"
"RTN","EASEZPVD",75,0)
 . . . E  S VDATA="YES"
"RTN","EASEZPVD",76,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",77,0)
 ;CONVERT ANSWERS FOR SPINAL CORD INJURY
"RTN","EASEZPVD",78,0)
 S KEY=+$$KEY711^EASEZU1("SPINAL CORD INJURY")
"RTN","EASEZPVD",79,0)
 S VDATA=$$GET^EASEZC1(EASDFN,"2^2^57.4") D
"RTN","EASEZPVD",80,0)
 . I (VDATA=-1)!(VDATA="") S VDATA="UNKNOWN" Q
"RTN","EASEZPVD",81,0)
 . I VDATA="NOT APPLICABLE" S VDATA="NO" Q
"RTN","EASEZPVD",82,0)
 . S VDATA="YES"
"RTN","EASEZPVD",83,0)
 S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",84,0)
 ;IF PURPLE HEART OR NOSE/THROAT RADIUM UNANSWERED, SET TO "UNKNOWN"
"RTN","EASEZPVD",85,0)
 S KEY=+$$KEY711^EASEZU1("PURPLE HEART")
"RTN","EASEZPVD",86,0)
 S VDATA=$G(^TMP("EZDATA",$J,KEY,1,2))
"RTN","EASEZPVD",87,0)
 I (VDATA=-1)!(VDATA="") S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",88,0)
 S KEY=+$$KEY711^EASEZU1("NOSE/THROAT RADIUM")
"RTN","EASEZPVD",89,0)
 S X=$$GETCUR^DGNTAPI(EASDFN,"DGNT")
"RTN","EASEZPVD",90,0)
 S VDATA=$E($G(DGNT("INTRP")))
"RTN","EASEZPVD",91,0)
 I (VDATA=-1)!(VDATA="") S VDATA="UNKNOWN"
"RTN","EASEZPVD",92,0)
 I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",93,0)
 ;
"RTN","EASEZPVD",94,0)
 ;GET ENROLLMENT DATA
"RTN","EASEZPVD",95,0)
 D I2711^EASEZI(EASDFN,.ENROLL)
"RTN","EASEZPVD",96,0)
 I $D(ENROLL)>1 D
"RTN","EASEZPVD",97,0)
 . S VDATA="" D ENR^EASEZC1(ENROLL(1),.VDATA)
"RTN","EASEZPVD",98,0)
 . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",99,0)
 . S ^TMP("EZDATA",$J,C2711,1,2)=VDATA
"RTN","EASEZPVD",100,0)
 ;
"RTN","EASEZPVD",101,0)
 ;GET DATA FROM FILES 408.12, 408.13, 408.21, AND 408.22
"RTN","EASEZPVD",102,0)
 D V408^EASEZPV2(EASDFN,EASMTIEN)
"RTN","EASEZPVD",103,0)
 ;
"RTN","EASEZPVD",104,0)
 ;GET RACE DATA
"RTN","EASEZPVD",105,0)
 D I202^EASEZI(EASDFN,.RACE)
"RTN","EASEZPVD",106,0)
 I $D(RACE)>1 D
"RTN","EASEZPVD",107,0)
 . N SBIEN
"RTN","EASEZPVD",108,0)
 . S X=0 F  S X=$O(RACE(X)) Q:'X  D
"RTN","EASEZPVD",109,0)
 . . S SBIEN=$P(RACE(X),";",2)
"RTN","EASEZPVD",110,0)
 . . S VDATA=$$GET1^DIQ(2.02,SBIEN_","_EASDFN,.01)
"RTN","EASEZPVD",111,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",112,0)
 . . S KEY=+$$KEY711^EASEZU1("APPLICANT RACE - "_VDATA)
"RTN","EASEZPVD",113,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)="YES"
"RTN","EASEZPVD",114,0)
 ;
"RTN","EASEZPVD",115,0)
 ;GET ETHNICITY DATA
"RTN","EASEZPVD",116,0)
 D I206^EASEZI(EASDFN,.ETHNC)
"RTN","EASEZPVD",117,0)
 I $D(ETHNC)>1 D
"RTN","EASEZPVD",118,0)
 . N SBIEN
"RTN","EASEZPVD",119,0)
 . S X=0 F  S X=$O(ETHNC(X)) Q:'X  D
"RTN","EASEZPVD",120,0)
 . . S SBIEN=$P(ETHNC(X),";",2)
"RTN","EASEZPVD",121,0)
 . . S VDATA=$$GET1^DIQ(2.06,SBIEN_","_EASDFN,.01)
"RTN","EASEZPVD",122,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",123,0)
 . . Q:$E(VDATA,1,8)="DECLINED"
"RTN","EASEZPVD",124,0)
 . . I VDATA="HISPANIC OR LATINO" S VDATA="YES"
"RTN","EASEZPVD",125,0)
 . . I $E(VDATA,1,3)="NOT" S VDATA="NO"
"RTN","EASEZPVD",126,0)
 . . I $E(VDATA,1,3)="UNK" S VDATA="UNKNOWN"
"RTN","EASEZPVD",127,0)
 . . S KEY=+$$KEY711^EASEZU1("APPLICANT SPANISH, HISPANIC, OR LATIN")
"RTN","EASEZPVD",128,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",129,0)
 ;
"RTN","EASEZPVD",130,0)
 ;GET INSURANCE DATA
"RTN","EASEZPVD",131,0)
 D INSUR^EASEZPVI(EASDFN)
"RTN","EASEZPVD",132,0)
 Q
"RTN","EASEZW2")
0^4^B29528851^B28975388
"RTN","EASEZW2",1,0)
EASEZW2 ;ALB/AMA - Auto-process 1010EZ from Web-based Application, part 2 ; 7/31/08 2:17pm
"RTN","EASEZW2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**70,81**;Mar 15, 2001;Build 11
"RTN","EASEZW2",3,0)
 ;
"RTN","EASEZW2",4,0)
 ;This is just a continuation of EASEZW, which got too large
"RTN","EASEZW2",5,0)
 ;
"RTN","EASEZW2",6,0)
SEC3 ;special parsing for Section III
"RTN","EASEZW2",7,0)
 N OUT,DA,DIE,DR,X,C,LINE,EMAIL,EVERS,EXPECT,EDETL,ESERV,EAPREQ,ECOMM,ERR
"RTN","EASEZW2",8,0)
 ;find the Submission ID
"RTN","EASEZW2",9,0)
 S EASWEBID="",EMAIL="",EVERS="",EXPECT="",EDETL="",ESERV="",EAPREQ="" S OUT=0
"RTN","EASEZW2",10,0)
 F  X XMREC Q:XMER=-1  D  Q:OUT
"RTN","EASEZW2",11,0)
 . S LINE=XMRG
"RTN","EASEZW2",12,0)
 . I LINE["EOF",LINE["III" S OUT=1 Q
"RTN","EASEZW2",13,0)
 . I LINE["Comment" S NOCOMM=0,JJ=1 F  D  Q:NOCOMM  Q:OUT
"RTN","EASEZW2",14,0)
 . . I JJ=1 S C=$P(LINE,U,2) S ECOMM(JJ)=C
"RTN","EASEZW2",15,0)
 . . I JJ>1,$L(LINE)>1 S ECOMM(JJ)=LINE
"RTN","EASEZW2",16,0)
 . . S JJ=JJ+1
"RTN","EASEZW2",17,0)
 . . X XMREC
"RTN","EASEZW2",18,0)
 . . I XMER=-1 S NOCOMM=1,OUT=1
"RTN","EASEZW2",19,0)
 . . S LINE=XMRG
"RTN","EASEZW2",20,0)
 . . I $E(LINE,1,30)["Services Request" S NOCOMM=1
"RTN","EASEZW2",21,0)
 . I LINE["Submit ID" S EASWEBID=$P(LINE,U,2)
"RTN","EASEZW2",22,0)
 . I LINE["Email Address" S EMAIL=$P(LINE,U,2)
"RTN","EASEZW2",23,0)
 . I LINE["Version #" S EVERS=$P(LINE,U,2)
"RTN","EASEZW2",24,0)
 . I LINE["Veteran To Mail" S X=$P(LINE,U,2),EXPECT=$S(X["Vet":1,1:"")
"RTN","EASEZW2",25,0)
 . I LINE["Provide",LINE["Details" S EDETL=$P(LINE,U,2)
"RTN","EASEZW2",26,0)
 . ;I LINE["Appointment Request" S X=$P(LINE,U,2),EAPREQ=$S(X="YES":1,1:0)
"RTN","EASEZW2",27,0)
 . I LINE["Appointment Request" S X=$P(LINE,U,2),EAPREQ=$S(X["Y":1,1:0)
"RTN","EASEZW2",28,0)
 . I LINE["Services Request" S ESERV=$P(LINE,U,2)
"RTN","EASEZW2",29,0)
 ;file the Submission ID into #712 record
"RTN","EASEZW2",30,0)
 S DA=EASAPP
"RTN","EASEZW2",31,0)
 S DIE="^EAS(712,"
"RTN","EASEZW2",32,0)
 S DR=".1///^S X=EASWEBID;3.6///^S X=EVERS;3.7///^S X=EXPECT;3.8///^S X=EDETL;4.3///^S X=EMAIL;"
"RTN","EASEZW2",33,0)
 S DR=DR_"4.4///^S X=EAPREQ;12///^S X=ESERV"
"RTN","EASEZW2",34,0)
 D ^DIE
"RTN","EASEZW2",35,0)
 K DA,DIE,DR,X,Y
"RTN","EASEZW2",36,0)
 I $D(ECOMM) D WP^DIE(712,EASAPP_",",13,,"ECOMM","ERR")
"RTN","EASEZW2",37,0)
 Q
"RTN","EASEZW2",38,0)
 ;
"RTN","EASEZW2",39,0)
NMSSNDOB ;find applicant's name,ssn,dob in data subrecords & file in main record
"RTN","EASEZW2",40,0)
 ;get applicant name
"RTN","EASEZW2",41,0)
 N KEY,MDL,SUFF,N,X,Y,ZX,DA,DR,DIE
"RTN","EASEZW2",42,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT LAST NAME"),EASNAME=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",43,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT FIRST NAME"),EASNAME=EASNAME_","_$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",44,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT MIDDLE NAME"),MDL=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",45,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT SUFFIX NAME"),SUFF=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",46,0)
 I $L(EASNAME)+$L(MDL)>45 S MDL=$E(MDL,1)
"RTN","EASEZW2",47,0)
 I MDL'="" S EASNAME=EASNAME_" "_MDL
"RTN","EASEZW2",48,0)
 I SUFF'="" S EASNAME=EASNAME_" "_SUFF
"RTN","EASEZW2",49,0)
 S EASNAME=$$UC^EASEZT1($E(EASNAME,1,45))
"RTN","EASEZW2",50,0)
 ;get applicant ssn & dob
"RTN","EASEZW2",51,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT SOCIAL SECURITY NUMBER")
"RTN","EASEZW2",52,0)
 S EASSSN=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1),EASSSN=$$SSNOUT^EASEZT1(EASSSN)
"RTN","EASEZW2",53,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT DATE OF BIRTH")
"RTN","EASEZW2",54,0)
 S EASDOB=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",55,0)
 S VETTYPE=$$VETTYPE(EASAPP)
"RTN","EASEZW2",56,0)
 S N(1)=$O(^EAS(711,"AB","APPLICANT FIRST NAME",0)),KEY(1)=$P($G(^EAS(711,N(1),0)),U,2)
"RTN","EASEZW2",57,0)
 K DA,DR S DA=EASAPP,DIE="^EAS(712,"
"RTN","EASEZW2",58,0)
 S ZX=EASSSN_"&"_EASDOB
"RTN","EASEZW2",59,0)
 S DR="1///^S X=EASNAME;2///^S X=ZX;3.3///^S X=VETTYPE"
"RTN","EASEZW2",60,0)
 D ^DIE
"RTN","EASEZW2",61,0)
 Q
"RTN","EASEZW2",62,0)
 ;
"RTN","EASEZW2",63,0)
VETTYPE(EASAPP) ;derive a veteran type categorization for this Applicant
"RTN","EASEZW2",64,0)
 ;input  EASAPP = ien in file #712 for Application
"RTN","EASEZW2",65,0)
 ;output TYPE   = veteran type
"RTN","EASEZW2",66,0)
 ;
"RTN","EASEZW2",67,0)
 N KEY,PH,POW,SC,SCPC,MRET,VETTYPE
"RTN","EASEZW2",68,0)
 ;get application data needed to determine veteran type
"RTN","EASEZW2",69,0)
 S KEY=$$KEY711^EASEZU1("PURPLE HEART"),PH=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",70,0)
 S KEY=$$KEY711^EASEZU1("PRISONER OF WAR"),POW=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",71,0)
 S KEY=$$KEY711^EASEZU1("SERVICE-CONNECTED"),SC=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",72,0)
 S KEY=$$KEY711^EASEZU1("RATED PERCENTAGE"),SCPC=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",73,0)
 S KEY=$$KEY711^EASEZU1("RETIRED FROM MILITARY"),MRET=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1)
"RTN","EASEZW2",74,0)
 ;set veteran type
"RTN","EASEZW2",75,0)
 I PH="Y" Q 5
"RTN","EASEZW2",76,0)
 I POW="Y" Q 4
"RTN","EASEZW2",77,0)
 I SC="Y" S TYPE=$S(+SCPC>49:1,+SCPC=0:3,1:2) Q TYPE
"RTN","EASEZW2",78,0)
 I MRET="Y" Q 6
"RTN","EASEZW2",79,0)
 Q 7
"RTN","EASEZW2",80,0)
 ;
"RTN","EASEZW2",81,0)
DESIGNEE ;set either NOK or E-CONTACT data into DESIGNEE
"RTN","EASEZW2",82,0)
 N DIC,DIE,DA,DR,X,Y,EASDATA,TYPE,MULTIPLE,XPART,KEY,EASIEN
"RTN","EASEZW2",83,0)
 S KEY=$$KEY711^EASEZU1("DESIGNEE")
"RTN","EASEZW2",84,0)
 S EZDATA=$P($$DATA712^EASEZU1(EASAPP,KEY,1),U,1)
"RTN","EASEZW2",85,0)
 I (EZDATA["EMERGENCY")!(EZDATA["CONTACT") S TYPE="E-CONTACT"
"RTN","EASEZW2",86,0)
 E  S TYPE="NEXT-OF-KIN"
"RTN","EASEZW2",87,0)
 ;place all NOK or E-CONTACT data in DESIGNEE data elements
"RTN","EASEZW2",88,0)
 F I=1:1 S X=$P($T(DSGDAT+I),";;",2) Q:X="QUIT"  D
"RTN","EASEZW2",89,0)
 . S XPART=$P(X,";",1)
"RTN","EASEZW2",90,0)
 . S KEY=$$KEY711^EASEZU1(TYPE_" "_XPART)
"RTN","EASEZW2",91,0)
 . Q:KEY=.1
"RTN","EASEZW2",92,0)
 . S KEYIEN=+$P(KEY,U,1),DATAKEY=$P(KEY,U,3)
"RTN","EASEZW2",93,0)
 . ;in file #2, multiple is always 1
"RTN","EASEZW2",94,0)
 . S MULTIPLE=1
"RTN","EASEZW2",95,0)
 . ;get the data element for the NOK or E-CONT
"RTN","EASEZW2",96,0)
 . S X=$$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),EASDATA=$P(X,U,1)
"RTN","EASEZW2",97,0)
 . Q:EASDATA=""
"RTN","EASEZW2",98,0)
 . ;and file it as DESIGNEE
"RTN","EASEZW2",99,0)
 . ;create subrecord
"RTN","EASEZW2",100,0)
 . S X=$$KEY711^EASEZU1("DESIGNEE"_" "_XPART),KEYIEN=+X
"RTN","EASEZW2",101,0)
 . S EASIEN=$O(^EAS(712,EASAPP,10,999),-1)+1
"RTN","EASEZW2",102,0)
 . S DIC="^EAS(712,EASAPP,10,",DIC(0)="L",DLAYGO="",X=KEYIEN,DINUM=EASIEN
"RTN","EASEZW2",103,0)
 . S DA(1)=EASAPP,DIC("P")=$P(^DD(712,10,0),U,2)
"RTN","EASEZW2",104,0)
 . K DD,DO D FILE^DICN
"RTN","EASEZW2",105,0)
 . ;file data element
"RTN","EASEZW2",106,0)
 . S DIE="^EAS(712,EASAPP,10,",DA=EASIEN,DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZW2",107,0)
 . S DR=".1///^S X=1;1///^S X=EASDATA;"
"RTN","EASEZW2",108,0)
 . D ^DIE
"RTN","EASEZW2",109,0)
 Q
"RTN","EASEZW2",110,0)
 ;
"RTN","EASEZW2",111,0)
DSGDAT ;
"RTN","EASEZW2",112,0)
 ;;LAST NAME;
"RTN","EASEZW2",113,0)
 ;;FIRST NAME;
"RTN","EASEZW2",114,0)
 ;;STREET ADDRESS;
"RTN","EASEZW2",115,0)
 ;;CITY;
"RTN","EASEZW2",116,0)
 ;;STATE;
"RTN","EASEZW2",117,0)
 ;;ZIP;;
"RTN","EASEZW2",118,0)
 ;;HOME PHONE AREA CODE;
"RTN","EASEZW2",119,0)
 ;;HOME PHONE NUMBER;
"RTN","EASEZW2",120,0)
 ;;WORK PHONE AREA CODE;
"RTN","EASEZW2",121,0)
 ;;WORK PHONE NUMBER;
"RTN","EASEZW2",122,0)
 ;;WORK PHONE EXTENSION;
"RTN","EASEZW2",123,0)
 ;;RELATIONSHIP;
"RTN","EASEZW2",124,0)
 ;;QUIT
"RTN","EASEZW2",125,0)
 ;
"RTN","EASEZW2",126,0)
CONFIRM(EASWEBID,EASAPP,EASXMZ) ;confirm receipt of web submission message to Forum
"RTN","EASEZW2",127,0)
 ;input EASAPP   = ien in file #712
"RTN","EASEZW2",128,0)
 ;      EASWEBID = web submission id
"RTN","EASEZW2",129,0)
 ;      EASXMZ   = ien in file #3.9 for msg being processed
"RTN","EASEZW2",130,0)
 N ARRAY,DIC,DIQ,DA,DR,STN,XMSUB,XMDUZ,XMTEXT,XMY,XMZ
"RTN","EASEZW2",131,0)
 Q:$G(EASAPP)=""  Q:$G(EASWEBID)=""
"RTN","EASEZW2",132,0)
 S DA=EASAPP,DIC="^EAS(712,",DIQ="ARRAY",DIQ(0)="I",DR=".2;4.5"
"RTN","EASEZW2",133,0)
 D EN^DIQ1
"RTN","EASEZW2",134,0)
 S STN=$G(ARRAY(712,EASAPP,4.5,"I")),STN=$TR(STN," ",""),STN=STN_U_"G.VA1010EZ@"_^XMB("NETNAME")
"RTN","EASEZW2",135,0)
 S ^TMP("1010EZRC",$J,1)="Receipt Confirmation for: "_EASWEBID
"RTN","EASEZW2",136,0)
 S ^TMP("1010EZRC",$J,2)="Sent from: "_STN
"RTN","EASEZW2",137,0)
 ;send msg # from holding file record just in case current msg is a duplicate
"RTN","EASEZW2",138,0)
 S ^TMP("1010EZRC",$J,3)="Site msg #: "_$G(ARRAY(712,EASAPP,.2,"I"))
"RTN","EASEZW2",139,0)
 S XMSUB="1010EZ CONFIRMATION for SID "_EASWEBID,XMDUZ=.5
"RTN","EASEZW2",140,0)
 S XMY("1010EZ.1010EZ@FORUM.VA.GOV")=""
"RTN","EASEZW2",141,0)
 S XMTEXT="^TMP(""1010EZRC"",$J,"
"RTN","EASEZW2",142,0)
 D ^XMD
"RTN","EASEZW2",143,0)
 K ^TMP("1010EZRC",$J)
"RTN","EASEZW2",144,0)
 Q
"RTN","EASMTL6A")
0^5^B29010921^B28863409
"RTN","EASMTL6A",1,0)
EASMTL6A ; MIN/TCM ALB/SCK/PHH,ERC - AUTOMATED MEANS TEST LETTER-PRINT LETTERS CONT ; 10/23/07 4:45pm
"RTN","EASMTL6A",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**3,14,15,29,28,54,70,81**;MAR 15,2001;Build 11
"RTN","EASMTL6A",3,0)
 ;
"RTN","EASMTL6A",4,0)
LETTER(EASN,TYPE) ;Print letter
"RTN","EASMTL6A",5,0)
 ; Input
"RTN","EASMTL6A",6,0)
 ;     EASN    - File #713.2 IEN
"RTN","EASMTL6A",7,0)
 ;     TYPE    - Letter type
"RTN","EASMTL6A",8,0)
 ;
"RTN","EASMTL6A",9,0)
 N DFN,EASADD,EASIN,EASNME,EALNE,EASFAC,MSG,TAB,EAFIEN,EAX,LINE,EASANV,EASX,VADM,VAROOT,OFFSET,EASPTR,EASLIEN,EASITE,EASRTE,EASDEM,POP
"RTN","EASMTL6A",10,0)
 ;
"RTN","EASMTL6A",11,0)
 S TAB=3 ; Tab spacing for letters
"RTN","EASMTL6A",12,0)
 S OFFSET=+$$GET1^DIQ(713,1,10) ; Get print offset for address
"RTN","EASMTL6A",13,0)
 ;
"RTN","EASMTL6A",14,0)
 ;  Get patient data for letter
"RTN","EASMTL6A",15,0)
 S EASPTR=$$GET1^DIQ(713.2,EASN,2,"I")
"RTN","EASMTL6A",16,0)
 I EASPTR]"" S DFN=$$GET1^DIQ(713.1,EASPTR,.01,"I")
"RTN","EASMTL6A",17,0)
 E  S DFN=-1
"RTN","EASMTL6A",18,0)
 ; Get patient mailing information
"RTN","EASMTL6A",19,0)
 D GETPAT(DFN,.EASDEM,.EASADD)
"RTN","EASMTL6A",20,0)
 ;  Get return address info
"RTN","EASMTL6A",21,0)
 D GETFAC^EASMTL6(DFN,.EASFAC)
"RTN","EASMTL6A",22,0)
 ;
"RTN","EASMTL6A",23,0)
 W @IOF
"RTN","EASMTL6A",24,0)
 I EASFAC(100)]"" D
"RTN","EASMTL6A",25,0)
 . W !!?TAB+OFFSET,EASFAC(100)
"RTN","EASMTL6A",26,0)
 E  D
"RTN","EASMTL6A",27,0)
 . W !!?TAB+OFFSET,"VA MEDICAL CENTER"
"RTN","EASMTL6A",28,0)
 W ?(IOM-10),$E(EASDEM(1),1,1),EASDEM(2)
"RTN","EASMTL6A",29,0)
 ;
"RTN","EASMTL6A",30,0)
 W !?TAB+OFFSET,EASFAC(1.01)
"RTN","EASMTL6A",31,0)
 I EASFAC(1.02)]"" W !?TAB+OFFSET,EASFAC(1.02)
"RTN","EASMTL6A",32,0)
 W !?TAB+OFFSET,EASFAC(1.03)_" "_$P(EASFAC(.02),U,2)_" "_EASFAC(1.04)
"RTN","EASMTL6A",33,0)
 W !!!?TAB+OFFSET,$$FMTE^XLFDT(DT,1)
"RTN","EASMTL6A",34,0)
 ;
"RTN","EASMTL6A",35,0)
 ;; generic test letter setup
"RTN","EASMTL6A",36,0)
 I DFN>0 D
"RTN","EASMTL6A",37,0)
 . S EASNME("FILE")=2,EASNME("IENS")=DFN,EASNME("FIELD")=.01
"RTN","EASMTL6A",38,0)
 . W !!!!?TAB+OFFSET,$$NAMEFMT^XLFNAME(.EASNME,"G")
"RTN","EASMTL6A",39,0)
 E  D
"RTN","EASMTL6A",40,0)
 . W !!!!?TAB+OFFSET,EASDEM(1)
"RTN","EASMTL6A",41,0)
 ;;
"RTN","EASMTL6A",42,0)
 ;;adding foreign address changes for DG*5.3*688 - ERC
"RTN","EASMTL6A",43,0)
 N DGFOR
"RTN","EASMTL6A",44,0)
 S DGFOR=0
"RTN","EASMTL6A",45,0)
 I EASADD(25)]"",($P(EASADD(25),U,2)'["UNITED STATES") S DGFOR=1
"RTN","EASMTL6A",46,0)
 W !?TAB+OFFSET,EASADD(1)
"RTN","EASMTL6A",47,0)
 ;
"RTN","EASMTL6A",48,0)
 I EASADD(2)]"" W !?TAB+OFFSET,EASADD(2)
"RTN","EASMTL6A",49,0)
 ;for domestic address display city/zip
"RTN","EASMTL6A",50,0)
 I 'DGFOR D
"RTN","EASMTL6A",51,0)
 . W !?TAB+OFFSET,EASADD(4)
"RTN","EASMTL6A",52,0)
 . I +EASADD(5) W $S(EASADD(4)]"":",",1:"")_$$GET1^DIQ(5,$P(EASADD(5),U),1)
"RTN","EASMTL6A",53,0)
 . W " ",$P(EASADD(11),U,2)
"RTN","EASMTL6A",54,0)
 ;for foreign address display province/postal
"RTN","EASMTL6A",55,0)
 I DGFOR D
"RTN","EASMTL6A",56,0)
 . W !
"RTN","EASMTL6A",57,0)
 . I EASADD(24)]"" W ?TAB+OFFSET,EASADD(24)_" "_EASADD(4)_" "_EASADD(23)
"RTN","EASMTL6A",58,0)
 . I EASADD(24)']"" W ?TAB+OFFSET,EASADD(4)_$S(EASADD(4):" "_EASADD(23),1:EASADD(23))
"RTN","EASMTL6A",59,0)
 . ;display country for foreign address only
"RTN","EASMTL6A",60,0)
 . I EASADD(25)]"" D
"RTN","EASMTL6A",61,0)
 . . S EASCNTRY=$P(EASADD(25),U,2)
"RTN","EASMTL6A",62,0)
 . . I EASCNTRY=-1 S EASCNTRY="UNKNOWN COUNTRY"
"RTN","EASMTL6A",63,0)
 . . W !?TAB+OFFSET,EASCNTRY
"RTN","EASMTL6A",64,0)
 ;
"RTN","EASMTL6A",65,0)
 S EASANV=$$GET1^DIQ(713.2,EASN,3,"I")
"RTN","EASMTL6A",66,0)
 W !!!!,?TAB,"MEANS TEST ANNIVERSARY DATE: ",$$FMTE^XLFDT($$ADDLEAP^EASMTUTL(EASANV))
"RTN","EASMTL6A",67,0)
 ;
"RTN","EASMTL6A",68,0)
 S EASX=$P(EASDEM(5),U)
"RTN","EASMTL6A",69,0)
 ;; Patch 15
"RTN","EASMTL6A",70,0)
 W !!,?TAB,"Dear ",$S(EASX="M":"Mr. ",EASX="F":"Ms. ",1:"Mr./Ms. ")
"RTN","EASMTL6A",71,0)
 W $S(DFN>0:$$NAMEFMT^XLFNAME(.EASNME,"O","M"),1:"TEST"),":"
"RTN","EASMTL6A",72,0)
 ;;
"RTN","EASMTL6A",73,0)
 ;  Print letter body
"RTN","EASMTL6A",74,0)
 S EASLIEN=$O(^EAS(713.3,"C",TYPE,0))
"RTN","EASMTL6A",75,0)
 Q:'EASLIEN
"RTN","EASMTL6A",76,0)
 S EALNE=0
"RTN","EASMTL6A",77,0)
 ;
"RTN","EASMTL6A",78,0)
 W !
"RTN","EASMTL6A",79,0)
 F  S EALNE=$O(^EAS(713.3,EASLIEN,1,EALNE)) Q:'EALNE  D
"RTN","EASMTL6A",80,0)
 . S LINE=^EAS(713.3,EASLIEN,1,EALNE,0)
"RTN","EASMTL6A",81,0)
 . I LINE["|ANNVDT|" W !?TAB,$P(LINE,"|ANNVDT|",1),$$FMTE^XLFDT($$ADDLEAP^EASMTUTL(EASANV)),$P(LINE,"|ANNVDT|",2) Q
"RTN","EASMTL6A",82,0)
 . W !?TAB,LINE
"RTN","EASMTL6A",83,0)
 ;
"RTN","EASMTL6A",84,0)
 ; Retrieve division section of letter
"RTN","EASMTL6A",85,0)
 S EAFIEN=$O(^EAS(713.3,EASLIEN,2,"B",+EASFAC("FACNUM"),0))
"RTN","EASMTL6A",86,0)
 ;
"RTN","EASMTL6A",87,0)
 I 'EAFIEN D  ; Print default signature block
"RTN","EASMTL6A",88,0)
 . N EAX,LINE
"RTN","EASMTL6A",89,0)
 . F EAX=1:1:9  D
"RTN","EASMTL6A",90,0)
 . . S LINE=$P($T(DEFSIG+EAX),";;",2)
"RTN","EASMTL6A",91,0)
 . . I LINE["|FAC|" W !?TAB,$P(LINE,"|FAC|",1),$S(EASFAC(100)]"":EASFAC(100),1:"VA Medical Center"),$P(LINE,"|FAC|",2) Q
"RTN","EASMTL6A",92,0)
 . . W !?TAB,LINE
"RTN","EASMTL6A",93,0)
 ;
"RTN","EASMTL6A",94,0)
 I EAFIEN D  ; Print division/facility signature block
"RTN","EASMTL6A",95,0)
 . S EALNE=0
"RTN","EASMTL6A",96,0)
 . F  S EALNE=$O(^EAS(713.3,EASLIEN,2,EAFIEN,1,EALNE)) Q:'EALNE  D
"RTN","EASMTL6A",97,0)
 . . W !?TAB,^EAS(713.3,EASLIEN,2,EAFIEN,1,EALNE,0)
"RTN","EASMTL6A",98,0)
 ;
"RTN","EASMTL6A",99,0)
 W !!?TAB,$S($G(TYPE)=1:"Enclosure",1:"")
"RTN","EASMTL6A",100,0)
 Q
"RTN","EASMTL6A",101,0)
 ;
"RTN","EASMTL6A",102,0)
GETPAT(DFN,EASDEM,EASADD) ; Get patient information
"RTN","EASMTL6A",103,0)
 N VAROOT,VA
"RTN","EASMTL6A",104,0)
 ;
"RTN","EASMTL6A",105,0)
 ;; Patch 15, Generic test letter
"RTN","EASMTL6A",106,0)
 I DFN<0 D  Q
"RTN","EASMTL6A",107,0)
 . S EASDEM(1)="TEST LETTER (DO NOT MAIL!)"
"RTN","EASMTL6A",108,0)
 . S EASDEM(2)="6789"
"RTN","EASMTL6A",109,0)
 . S EASDEM(5)="M"
"RTN","EASMTL6A",110,0)
 . S EASADD(1)="THIS IS A TEST LETTER STREET ADDRESS"
"RTN","EASMTL6A",111,0)
 . S EASADD(2)=""
"RTN","EASMTL6A",112,0)
 . S EASADD(4)="ANYTOWN"
"RTN","EASMTL6A",113,0)
 . S EASADD(5)="36^NEW YORK"
"RTN","EASMTL6A",114,0)
 . S EASADD(11)="111110000^11111-0000"
"RTN","EASMTL6A",115,0)
 . S EASADD(25)="1^UNITED STATES"
"RTN","EASMTL6A",116,0)
 ;; End patch 15
"RTN","EASMTL6A",117,0)
 ;
"RTN","EASMTL6A",118,0)
 S VAROOT="EASADD"
"RTN","EASMTL6A",119,0)
 D ADD^VADPT
"RTN","EASMTL6A",120,0)
 ;
"RTN","EASMTL6A",121,0)
 S VAROOT="EASDEM"
"RTN","EASMTL6A",122,0)
 D DEM^VADPT
"RTN","EASMTL6A",123,0)
 ;
"RTN","EASMTL6A",124,0)
 D PID^VADPT6
"RTN","EASMTL6A",125,0)
 S EASDEM(2)=VA("BID")
"RTN","EASMTL6A",126,0)
 Q
"RTN","EASMTL6A",127,0)
 ;
"RTN","EASMTL6A",128,0)
CHKADR(EASPTR) ; Check for valid address
"RTN","EASMTL6A",129,0)
 N EASADD,RSLT,DFN,VAROOT
"RTN","EASMTL6A",130,0)
 ;
"RTN","EASMTL6A",131,0)
 S DFN=$$GET1^DIQ(713.1,EASPTR,.01,"I")
"RTN","EASMTL6A",132,0)
 S RSLT=1
"RTN","EASMTL6A",133,0)
 S VAROOT="EASADD"
"RTN","EASMTL6A",134,0)
 D ADD^VADPT
"RTN","EASMTL6A",135,0)
 ;; Check for valid mailing address
"RTN","EASMTL6A",136,0)
 I $P(EASADD(25),U,2)']""!($P(EASADD(25),U,2)["UNITED STATES") D
"RTN","EASMTL6A",137,0)
 . I EASADD(1)]"",EASADD(4)]"",EASADD(5)]"",EASADD(11)]"" S RSLT=0
"RTN","EASMTL6A",138,0)
 I $P(EASADD(25),U,2)]""!($P(EASADD(25),U,2)'["UNITED STATES") D
"RTN","EASMTL6A",139,0)
 . I EASADD(1)]"",EASADD(4)]"" S RSLT=0
"RTN","EASMTL6A",140,0)
 ;; Check for Bad Address Indicator
"RTN","EASMTL6A",141,0)
 S EASADD("BAI")=$$BADADR^DGUTL3(DFN),$P(EASADD("BAI"),U,2)=$$EXTERNAL^DILFD(2,.121,"",+EASADD("BAI"))
"RTN","EASMTL6A",142,0)
 S:'RSLT&(EASADD("BAI")) RSLT=1
"RTN","EASMTL6A",143,0)
 D:RSLT ADRERR^EASMTUTL(.EASADD,DFN)
"RTN","EASMTL6A",144,0)
 Q $G(RSLT)
"RTN","EASMTL6A",145,0)
 ;
"RTN","EASMTL6A",146,0)
DEFSIG ; Default closing and signature block
"RTN","EASMTL6A",147,0)
 ;;Thank you for your assistance and cooperation.  If you have any
"RTN","EASMTL6A",148,0)
 ;;questions or need assistance in the completion of the information
"RTN","EASMTL6A",149,0)
 ;;requested, please contact the |FAC| Business 
"RTN","EASMTL6A",150,0)
 ;;Office between 8:00am and 4:00pm Monday through Friday.
"RTN","EASMTL6A",151,0)
 ;;
"RTN","EASMTL6A",152,0)
 ;;Sincerely,
"RTN","EASMTL6A",153,0)
 ;;
"RTN","EASMTL6A",154,0)
 ;;
"RTN","EASMTL6A",155,0)
 ;;
"VER")
8.0^22.0
"BLD",6810,6)
^77
**END**
**END**
