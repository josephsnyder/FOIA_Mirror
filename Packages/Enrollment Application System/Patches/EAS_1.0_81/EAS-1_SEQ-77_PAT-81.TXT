$TXT Created by FERRARESE,MARY ANNE at MNTVLL.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 08/12/09 at 12:03
=============================================================================
Run Date: OCT 15, 2009                     Designation: EAS*1*81
Package : EAS - ENROLLMENT APPLICATION SYSTEM Priority: Mandatory
Version : 1        SEQ #77                      Status: Released
                  Compliance Date: NOV 15, 2009
=============================================================================

Associated patches: (v)EAS*1*70    <<= must be installed BEFORE `EAS*1*81'

Subject: 1010EZ MISC, PT SELECTION, LTR ENCLOSURES

Category: 
  - Routine

Description:
============

 This patch addresses three Remedy tickets that pertain to the 1010EZ 
 functionality, and three Remedy tickets that pertain to the removal
 of the Enclosure statement of the Means Test renewal letters.
  
 Issue 1 - A subscript error occurs when printing a 1010EZ using the
 options 10-10 Print [DG REGISTRATION 10/10 REPRINT] and Register a 
 Patient [DG REGISTER PATIENT]. This error occurs infrequently but needs to
 be addressed. When registering a patient, the disposition node 'DIS' in
 the PATIENT file (#2) may not get set up correctly and critical
 disposition date/time data is not filed for the patient. If the user then
 tries to print the 1010EZ, a subscript error occurs. Routine EASEZI has
 been modified to correct it. If a corrupt node is encountered, the user
 will now receive a message on the screen that states:
  
 No disposition for Doe,John ICN: 0000000000 
 A blank 1010EZ may print. Please re-register the patient and reprint the
 1010EZ. 
  
 Additionally, the user will receive a VA Alert with the instruction to
 re-register the patient. The Alert will read:
  
 No disposition for Doe,John ICN: 0000000000. Re-register patient.
  
 The corrupt node will then be deleted. (Remedy #HD0000000256906)
  
 Issue 2 - When processing a 1010EZ application from the Web by means of 
 the sequence Electronic 10-10EZ Processing [EAS EZ 1010EZ PROCESSING],
 view 'New' applications, (EZ) 1010EZ Processing, and then (LZ) Link to 
 Patient File, the user is asked to enter the name of the patient from 
 the 1010EZ form. If the name the user enters matches that of a patient 
 already in the site's  database, the code 'assumes' that the matched 
 patient from the database is the same individual as the one whose name 
 the user entered. If they are in fact different patients, the user 
 is unable to easily add the 1010EZ patient to the database as a new 
 patient.  
  
 Functionality has been added:  (1) to prompt the user to indicate whether
 the matched patient is the correct one. If the user replies 'NO', (2) a
 display will appear instructing the user to enter the name of the 1010EZ
 patient in double quotation marks, e.g. "DOE, JOHN". Once the user
 complies, pre-existing software will prompt the user for further patient
 information, thus invoking the creation of a new record in the PATIENT 
 file (#2) and adding the 1010EZ patient to the site's database. (Remedy
 #HD000000064358)
  
 Issue 3 - When parsing the incoming FORUM MailMan message from the
 web-based 1010EZ entry form by means of option Electronic 10-10EZ
 Processing [EAS EZ 1010EZ PROCESSING], the 'Appointment Requested' field 
 (#4.4) of the 1010EZ HOLDING file (#712) is not displaying correctly.  
 The parsing code is looking for a value of 'YES' but the message contains
 a value of 'Y'. The code has been changed to seek a value that contains
 'Y'. (Remedy #HD0000000132174)
  
 Issue 4 - There is an 'Enclosure' statement at the end of each of three 
 types of Means Test renewal letters:  60, 30 and 0 day letters. Only the
 60-day letters actually have an enclosure. However, the word 'Enclosure'
 prints on all three letter types.
  
 This patch removes the 'Enclosure' statement from the 0 and 30 day Means 
 Test renewal letters. (Remedy tickets #HD0000000120647, HD0000000133206,
 and HD0000000120919)
  
 This patch addresses the following Remedy Tickets:
  --------------------------------------------------
  HD0000000256906     mal-formed node
  HD0000000064358     ISD-1004-72228  UNABLE TO EXIT LINK TO PATIENT 
  HD0000000132174     1010EZ mail message vs. 1010ez menu
  HD0000000120647     EAS*1*63:  30 Means Test Renewal Letters
  HD0000000133206     ENCLOSURES
  HD0000000120919     patch EAS*1*63
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
   
   
 Documentation Retrieval: 
 ------------------------
 Updated user documentation describing the new functionality introduced by 
 this patch (Issue 2) is available in the revised Enrollment Application 
 System 1.0 User Manual, in section "Processing a VA Form 10-10EZ
 Application", sub-section "Linking Applicant to PATIENT File (#2)".
  
 Sites may retrieve the user documentation directly using FTP from the 
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
    
  Albany   :    ftp.fo-albany.med.va.gov  <ftp://ftp.fo-albany.med.va.gov>
  Hines    :    ftp.fo-hines.med.va.gov   <ftp://ftp.fo-hines.med.va.gov>
  Salt Lake:    ftp.fo-slc.med.va.gov     <ftp://ftp.fo-slc.med.va.gov>
  First Available Server (preferred method): 
              download.vista.med.va.gov  <ftp://download.vista.med.va.gov>
                                                   
  The following file will be available:
    
   File Name          Description
   ---------          -----------
   EAS_1_P81_UM.PDF   Revised Enrollment Application System 1.0 User Manual
  
 The documentation will be in the form of an Adobe Acrobat file.  Note:  
 Use Binary mode when transferring the .PDF file.
   
 The VistA Documentation Library [VDL] web site contains all end-user 
 manuals. The web address is http://www.va.gov/vdl/. The Enrollment 
 Application System User Manual may be found on the Enrollment Application 
 System Web page at:  
  
 http://www.va.gov/vdl/application.asp?appid=121  
  
  
 Test Sites:
 -----------
 Fresno (Medium)
 Salisbury (Large)
 Puget Sound (Integrated)
  
  
          ================INSTALLATION INSTRUCTIONS =================
  
 This patch can be loaded with users on the system. The patch should be 
 installed during non-peak hours.  
  
 * Installation will take approximately 5 minutes.
    
   1.  LOAD TRANSPORT GLOBAL
       ---------------------
       Choose the PackMan message containing this patch and invoke the 
       INSTALL/CHECK MESSAGE PackMan option.
    
    
   2  START UP KIDS
        -------------
        Start up the Kernel Installation and Distribution System Menu
        [XPD MAIN]:
     
             Edits and Distribution ...
             Utilities ...
             Installation ...
     
   Select Kernel Installation & Distribution System Option: INStallation
                                                            ---
             Load a Distribution
             Print Transport Global
             Compare Transport Global to Current System
             Verify Checksums in Transport Global
             Install Package(s)
             Restart Install of Package(s)
             Unload a Distribution
             Backup a Transport Global
     
   Select Installation Option:
    
   3.   Select Installation Option:
        --------------------------
     
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter EAS*1.0*81):
     
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed. It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
    
   4.   Select Installation Option: Install Package(s)
                                    ----------------
        **This is the step to start the installation of this KIDS patch:
     
       a.  Choose the Install Package(s) option to start the patch install.
       b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
           YES//' answer NO.
       c.  When prompted 'Want to DISABLE Scheduled Options, Menu
           Options, and Protocols? YES//' answer YES.
       d.  When prompted 'Enter options you wish to mark as 'Out Of
           Order':' enter the following options:
             Electronic 10-10EZ Processing  [EAS EZ 1010EZ PROCESSING]
             10-10 Print                    [DG REGISTRATION 10/10 REPRINT]
             Register a Patient             [DG REGISTER PATIENT]
             Zero Day Letters Print         [EAS MT 0 DAY LETTER PRINT]
             Thirty Day Letters Print       [EAS MT 30 DAY LETTER PRINT]
             Background print job for       [EAS MT LETTERS BG PRINT]
                       EAS MT Letters
             Reprint Letters by Pro-        [EAS MT REPRINT LETTERS]
                       cessing Date
             Reprint Single Letter          [EAS MT REPRINT SINGLE LETTER]
             Print a Test Letter            [EAS MT TEST LETTER]
  
       e.  When prompted 'Enter protocols you wish to mark as 'Out of
           Order':' press <Enter>.
       g.  If prompted for 'Delay Install (Minutes):  (0-60): 0//' 
           press   <Enter>.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**[Patch List]**;Mar 15, 2001;Build 11

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: EASEZI
    Before: B24333225   After: B43721741  **1,9,44,51,57,70,81**
 Description of Changes:
  EASEZI.INT.1                  |"PATVEE"|EASEZI.INT.1  
  ****************************************************************************
  EASEZI.INT.1   +2         
  ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,9,44,51,57,70,81**;Mar 15, 2001;Build 26
  ...................
  |"PATVEE"|EASEZI.INT.1  +2         
  ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,9,44,51,57,70**;Mar 15,2001;Build 26
  ---------------------------------------
   
   
  EASEZI.INT.1  +37        
  ;EAS*1*81 - changes made to allow adding new patient with same name
   +38        ;as an existing patient
   +39        N EASANS,Y S EASANS=0
   +40        N DIR,DIRUT
   +41        S DIR(0)="YAO"
   +42        S DIR("?")="Enter 'Yes' if this patient is the one you want to s
  elect."
   +43        S DIR("A")="IS THIS THE CORRECT PATIENT? "
   +44        S DIR("B")="YES"
   +45        F  Q:EASANS  D  K DIR        
   +46        . D GETPAT^DGRPTU("",1,.DFN,.DGNEWPF)
   +47        . I DFN'>0 S EASANS=1 Q
   +48        . I DFN>0,($G(DGNEWPF)'=1) D
   +49        . . D ^DIR
   +50        . . I $D(DIRUT) Q
   +51        . . I Y(0)["Y" S EASANS=1 Q
   +52        . . I Y(0)["N" K DFN
   +53        . . I $G(DFN)'>0 D
   +54        . . W !!?5,"If there are already one or more patients with the sa
  me name,",!?5,"re-enter the name in double quotes.  for example ""DOE,JOHN""."
  ...................
  |"PATVEE"|EASEZI.INT.1   +37        
  D GETPAT^DGRPTU("",1,.DFN,.DGNEWPF)
  ---------------------------------------
   
   38>EASEZI.INT.1  +119       N N,IEN,ARR,LAST,EASQUIT,EASICN
   +120       S EASQUIT=0
   +121       S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,"DIS",IEN)) Q:'IEN!EASQUIT  D
   +122       . ;S RDATE=$P(^DPT(EASDFN,"DIS",IEN,0),U,1),ARR(RDATE)=IEN
   +123       . S RDATE=$P($G(^DPT(EASDFN,"DIS",IEN,0)),U,1) I RDATE]"" S ARR(
  RDATE)=IEN         
   +124       . I RDATE']"" D
   +125       .. K XQA,XQAID,XQAMSG
   +126       .. S EASICN=$$GETICN^MPIF001(EASDFN) I EASICN]"" S EASICN=$P(EAS
  ICN,"V",1)
   +127       .. S XQA(DUZ)=""
   +128       .. S XQAID="EAS"
   +129       .. S XQAMSG="No disposition for "_$P(^DPT(EASDFN,0),"^",1)_" ICN
  : "_EASICN_" Re-register patient."
   +130       .. ;S $P(XQADATA,"^",1)="NAME : "_$P(^DPT(EASDFN,0),"^",1) ;PATI
  ENT NAME
   +131       .. D SETUP^XQALERT
   +132       ..;S EASQUIT=1 K ^DPT(EASDFN,"DIS",IEN),^DPT("ADA",1,EASDFN),ARR
   +133       .. S EASQUIT=1 D
   +134       ... K ARR,DA,DA(1),DIK,EASNODE,EASDT
   +135       ... S DA=IEN,DA(1)=EASDFN,DIK="^DPT("_EASDFN_",""DIS""," D ^DIK K DIK,DA
   +136       ... I $D(^DPT("ADA",1,EASDFN)) S EASDT=$O(^DPT("ADA",1,EASDFN,0)),EASNODE="^DPT(""ADA"""_",1,"_EASDFN_","_EASDT_")" K @EASNODE
   +137       ... Q
   +138       .. I '$D(IO("Q")) D
   +139       ... W !!,"No disposition for "_$P(^DPT(EASDFN,0),"^",1)_" ICN: "_EASICN
   
            
   +140       ... W !,"A blank 1010EZ/R may print. Please re-register the patient and reprint the 1010EZ/R."
   +141       ... H 6
   +142       ..; D ENQUIT^EASEZPF ; KILLS ALL OF THE ^TMP("EZ" VARIABLES FOR PRINTING1010EZ.
   +143       ..S EASARRAY(1)="NO DISPOSITION" Q
  ...................
  |"PATVEE"|EASEZI.INT.1
   +102       N N,IEN,ARR,LAST
   +103       S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,"DIS",IEN)) Q:'IEN  D
   +104       . S RDATE=$P(^DPT(EASDFN,"DIS",IEN,0),U,1),ARR(RDATE)=IEN
  ****************************************************************************

Routine Name: EASEZPVD
    Before: B21610185   After: B22024581  **57,66,70,81**
 Description of Changes:
  EASEZPVD.INT.1                |"PATVEE"|EASEZPVD.INT.1  
    **************************************************************************
    EASEZPVD.INT.1 +2         
    ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,66,70,81**;Mar 15, 2001;Build 26
    ...................
    |"PATVEE"|EASEZPVD.INT.1 +2         
    ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57,66,70**;Mar 15, 2001;Build 26
    ---------------------------------------
   
    EASEZPVD.INT.1 +22        
    I $D(DISPOS),$D(DISPOS(1)) I DISPOS(1)="NO DISPOSITION" Q
    ...................
    |"PATVEE"|EASEZPVD.INT.1
    **************************************************************************
   

Routine Name: EASEZW2
    Before: B28975388   After: B29528851  **70,81**
 Description of Changes:
  EASEZW2.INT.1                 |"PATVEE"|EASEZW2.INT.1  
  ****************************************************************************
  EASEZW2.INT.1  +2
  ;;1.0;ENROLLMENT APPLICATION SYSTEM;**70,81**;Mar 15, 2001;Build 26
  ...................
  |"PATVEE"|EASEZW2.INT.1  +2         
  ;;1.0;ENROLLMENT APPLICATION SYSTEM;**70**;Mar 15, 2001;Build 26
  ---------------------------------------
   
   
  EASEZW2.INT.1  +26        
  . ;I LINE["Appointment Request" S X=$P(LINE,U,2),EAPREQ=$S(X="YES":
  1,1:0)
  +27        . I LINE["Appointment Request" S X=$P(LINE,U,2),EAPREQ=$S(X["Y":
  1,1:0)
  ...................
  |"PATVEE"|EASEZW2.INT.1  +26        
  . I LINE["Appointment Request" S X=$P(LINE,U,2),EAPREQ=$S(X="YES":1,1:0)
  ****************************************************************************

Routine Name: EASMTL6A
    Before: B28863409   After: B29010921  **3,14,15,29,28,54,70,81**
 Description of Changes:
  EASMTL6A
   +2   ;;1.0;ENROLLMENT APPLICATION SYSTEM;**3,14,15,29,28,54,70,81**;MAR 
  15,2001;Build 26
  ...................
  |"PATVEE"|EASMTL6A.INT.1
   +2   ;;1.0;ENROLLMENT APPLICATION SYSTEM;**3,14,15,29,28,54,70**;MAR 15,
  2001;Build 26
  ---------------------------------------
  EASMTL6A.INT.1
   +99        W !!?TAB,$S($G(TYPE)=1:"Enclosure",1:"")
  ...................
  |"PATVEE"|EASMTL6A.INT.1
   +99        W !!?TAB,"Enclosure"
   

 
Routine list of preceding patches: 70

=============================================================================
User Information:
Entered By  : CURTIN,EDNA                   Date Entered  : JUN 20, 2007
Completed By: RUDINGER,NANCY L.             Date Completed: OCT 15, 2009
Released By : FITCH,DONNA                   Date Released : OCT 15, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
