Released RMPR*3*144 SEQ #126
Extracted from mail message
**KIDS**:RMPR*3.0*144^

**INSTALL NAME**
RMPR*3.0*144
"BLD",6877,0)
RMPR*3.0*144^PROSTHETICS^0^3080909^y
"BLD",6877,1,0)
^^7^7^3080804^
"BLD",6877,1,1,0)
1. OWL attaches wrong DD23 - roll/scroll item detail display of 2319
"BLD",6877,1,2,0)
 
"BLD",6877,1,3,0)
2. OWL ERROR: <UNDEFINED>F+2^DIED
"BLD",6877,1,4,0)
 
"BLD",6877,1,5,0)
3. Prosthetics software - Add/Change NPPD Lines FY08
"BLD",6877,1,6,0)
 
"BLD",6877,1,7,0)
4. Prosthetics closed OWL/LAB Consult date discrepancy reported
"BLD",6877,4,0)
^9.64PA^^
"BLD",6877,6.3)
17
"BLD",6877,"ABPKG")
n
"BLD",6877,"INID")
^n
"BLD",6877,"INIT")
FIX660^RMPR144P
"BLD",6877,"KRN",0)
^9.67PA^8989.52^19
"BLD",6877,"KRN",.4,0)
.4
"BLD",6877,"KRN",.401,0)
.401
"BLD",6877,"KRN",.402,0)
.402
"BLD",6877,"KRN",.403,0)
.403
"BLD",6877,"KRN",.5,0)
.5
"BLD",6877,"KRN",.84,0)
.84
"BLD",6877,"KRN",3.6,0)
3.6
"BLD",6877,"KRN",3.8,0)
3.8
"BLD",6877,"KRN",9.2,0)
9.2
"BLD",6877,"KRN",9.8,0)
9.8
"BLD",6877,"KRN",9.8,"NM",0)
^9.68A^12^12
"BLD",6877,"KRN",9.8,"NM",1,0)
RMPR121C^^0^B15034199
"BLD",6877,"KRN",9.8,"NM",2,0)
RMPR144P^^0^B2438202
"BLD",6877,"KRN",9.8,"NM",3,0)
RMPR29CA^^0^B70610125
"BLD",6877,"KRN",9.8,"NM",4,0)
RMPR29GU^^0^B8838092
"BLD",6877,"KRN",9.8,"NM",5,0)
RMPRN6^^0^B85232517
"BLD",6877,"KRN",9.8,"NM",6,0)
RMPRN7^^0^B75175196
"BLD",6877,"KRN",9.8,"NM",7,0)
RMPRN62^^0^B23510504
"BLD",6877,"KRN",9.8,"NM",8,0)
RMPRN72^^0^B23656164
"BLD",6877,"KRN",9.8,"NM",9,0)
RMPRN6UT^^0^B7282554
"BLD",6877,"KRN",9.8,"NM",10,0)
RMPRN7UT^^0^B7513955
"BLD",6877,"KRN",9.8,"NM",11,0)
RMPRN6PT^^0^B35875416
"BLD",6877,"KRN",9.8,"NM",12,0)
RMPRN7PT^^0^B37525265
"BLD",6877,"KRN",9.8,"NM","B","RMPR121C",1)

"BLD",6877,"KRN",9.8,"NM","B","RMPR144P",2)

"BLD",6877,"KRN",9.8,"NM","B","RMPR29CA",3)

"BLD",6877,"KRN",9.8,"NM","B","RMPR29GU",4)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN6",5)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN62",7)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN6PT",11)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN6UT",9)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN7",6)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN72",8)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN7PT",12)

"BLD",6877,"KRN",9.8,"NM","B","RMPRN7UT",10)

"BLD",6877,"KRN",19,0)
19
"BLD",6877,"KRN",19.1,0)
19.1
"BLD",6877,"KRN",101,0)
101
"BLD",6877,"KRN",409.61,0)
409.61
"BLD",6877,"KRN",771,0)
771
"BLD",6877,"KRN",870,0)
870
"BLD",6877,"KRN",8989.51,0)
8989.51
"BLD",6877,"KRN",8989.52,0)
8989.52
"BLD",6877,"KRN",8994,0)
8994
"BLD",6877,"KRN","B",.4,.4)

"BLD",6877,"KRN","B",.401,.401)

"BLD",6877,"KRN","B",.402,.402)

"BLD",6877,"KRN","B",.403,.403)

"BLD",6877,"KRN","B",.5,.5)

"BLD",6877,"KRN","B",.84,.84)

"BLD",6877,"KRN","B",3.6,3.6)

"BLD",6877,"KRN","B",3.8,3.8)

"BLD",6877,"KRN","B",9.2,9.2)

"BLD",6877,"KRN","B",9.8,9.8)

"BLD",6877,"KRN","B",19,19)

"BLD",6877,"KRN","B",19.1,19.1)

"BLD",6877,"KRN","B",101,101)

"BLD",6877,"KRN","B",409.61,409.61)

"BLD",6877,"KRN","B",771,771)

"BLD",6877,"KRN","B",870,870)

"BLD",6877,"KRN","B",8989.51,8989.51)

"BLD",6877,"KRN","B",8989.52,8989.52)

"BLD",6877,"KRN","B",8994,8994)

"BLD",6877,"QUES",0)
^9.62^^
"BLD",6877,"REQB",0)
^9.611^3^3
"BLD",6877,"REQB",1,0)
RMPR*3.0*60^2
"BLD",6877,"REQB",2,0)
RMPR*3.0*142^2
"BLD",6877,"REQB",3,0)
RMPR*3.0*134^2
"BLD",6877,"REQB","B","RMPR*3.0*134",3)

"BLD",6877,"REQB","B","RMPR*3.0*142",2)

"BLD",6877,"REQB","B","RMPR*3.0*60",1)

"INIT")
FIX660^RMPR144P
"MBREQ")
0
"PKG",101,-1)
1^1
"PKG",101,0)
PROSTHETICS^RMPR^PROSTHETICS VERSION 3.0 ALPHA
"PKG",101,20,0)
^9.402P^^0
"PKG",101,22,0)
^9.49I^1^1
"PKG",101,22,1,0)
3.0^2960209^2960214
"PKG",101,22,1,"PAH",1,0)
144^3080909
"PKG",101,22,1,"PAH",1,1,0)
^^7^7^3080909
"PKG",101,22,1,"PAH",1,1,1,0)
1. OWL attaches wrong DD23 - roll/scroll item detail display of 2319
"PKG",101,22,1,"PAH",1,1,2,0)
 
"PKG",101,22,1,"PAH",1,1,3,0)
2. OWL ERROR: <UNDEFINED>F+2^DIED
"PKG",101,22,1,"PAH",1,1,4,0)
 
"PKG",101,22,1,"PAH",1,1,5,0)
3. Prosthetics software - Add/Change NPPD Lines FY08
"PKG",101,22,1,"PAH",1,1,6,0)
 
"PKG",101,22,1,"PAH",1,1,7,0)
4. Prosthetics closed OWL/LAB Consult date discrepancy reported
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
12
"RTN","RMPR121C")
0^1^B15034199^B13650442
"RTN","RMPR121C",1,0)
RMPR121C ;HINES-OI/HNC/SPS - IFCAP GUI TO 2319 ;3/1/2003
"RTN","RMPR121C",2,0)
 ;;3.0;PROSTHETICS;**90,75,60,144**;Feb 09, 1996;Build 17
"RTN","RMPR121C",3,0)
 ;
"RTN","RMPR121C",4,0)
R19 ;PASS RMPRA AS IEN OF 644, AND B2 AS ITEM MULTIPLE
"RTN","RMPR121C",5,0)
 ;S:$D(RMPRCONT) $P(^RMPR(664,RMPRA,1,B2,0),U,14)=RMPRCONT
"RTN","RMPR121C",6,0)
 S RMPRI=$P(^RMPR(664,RMPRA,1,B2,0),U,1),RMPRCT=$P(^(0),U,3)
"RTN","RMPR121C",7,0)
 S RMPRQT=$P(^RMPR(664,RMPRA,1,B2,0),U,4),RMPRDES=$P(^(0),U,2)
"RTN","RMPR121C",8,0)
 S RMPRPER=$P(^RMPR(664,RMPRA,2),U,6)/100
"RTN","RMPR121C",9,0)
 ;contract data
"RTN","RMPR121C",10,0)
 S RMPRCONT=""
"RTN","RMPR121C",11,0)
 S RMPRCONT=$P(^RMPR(664,RMPRA,1,B2,0),U,14)
"RTN","RMPR121C",12,0)
 ;TEMPORARY FIX FOR TRANSACTION TYPE AND PATIENT CATAGORY
"RTN","RMPR121C",13,0)
 S RMPRT=$P(^RMPR(664,RMPRA,1,B2,0),U,9),RMPRR=$P(^(0),U,8),RMPRDIS=$P(^(0),U,10),RMPRS=$P(^(0),U,12),UOI=$P(^(0),U,5),RMPRSLN=$P(^(0),U,15)
"RTN","RMPR121C",14,0)
 ;
"RTN","RMPR121C",15,0)
 I RMPRT="R" S $P(^RMPR(664,RMPRA,1,B2,0),U,9)="X",RMPRT="X"
"RTN","RMPR121C",16,0)
 I RMPRDIS=2 S $P(^RMPR(664,RMPRA,1,B2,0),U,10)=1,RMPRDIS=1
"RTN","RMPR121C",17,0)
 I RMPRDIS=3 S $P(^RMPR(664,RMPRA,1,B2,0),U,10)=4,RMPRDIS=4
"RTN","RMPR121C",18,0)
 S RMPRSC=$P(^RMPR(664,RMPRA,1,B2,0),U,11) ;Special catagory
"RTN","RMPR121C",19,0)
 S RMPRNOB=$P(^RMPR(664,RMPRA,1,B2,0),U,17) ;NUMBER OF BIDS
"RTN","RMPR121C",20,0)
 S RMPRHCPC=$P(^RMPR(664,RMPRA,1,B2,0),U,16) ;PSAS HCPCS
"RTN","RMPR121C",21,0)
 S RMPRMK=$P(^RMPR(664,RMPRA,1,B2,2),U,1),RMPRMD=$P(^(2),U,2),RMPRLTN=$P(^(2),U,3),RMPREW=$P(^(2),U,4) ;MAKE,MODEL,LOT,EXCLUDE/WAVER
"RTN","RMPR121C",22,0)
 S RMCPT=$P($G(^RMPR(664,RMPRA,1,B2,4)),U,2) ;CPT MODIFIER
"RTN","RMPR121C",23,0)
 K DD,DO S DIC="^RMPR(660,",DIC(0)="QL",X=DT,DLAYGO=660
"RTN","RMPR121C",24,0)
 D FILE^DICN K DLAYGO,DIC,D0 S RMPR660=+Y K Y
"RTN","RMPR121C",25,0)
 S $P(^RMPR(664,RMPRA,1,B2,0),U,13)=RMPR660
"RTN","RMPR121C",26,0)
 S DA=RMPRA,DIK="^RMPR(664," D IX1^DIK K DA,DIK
"RTN","RMPR121C",27,0)
 S RMPRAMT=(RMPRQT*RMPRCT)
"RTN","RMPR121C",28,0)
 S RMPRDCT=RMPRAMT*RMPRPER
"RTN","RMPR121C",29,0)
 S RMPRTOTL=RMPRAMT-RMPRDCT
"RTN","RMPR121C",30,0)
 ;ctd is unit cost with percent discount applied.
"RTN","RMPR121C",31,0)
 S RMPRCTD=RMPRAMT-RMPRDCT/RMPRQT
"RTN","RMPR121C",32,0)
 ;
"RTN","RMPR121C",33,0)
 S ^RMPR(660,RMPR660,0)=DT_U_RMPRDFN_U_DT_U_RMPRT_U_U_U_RMPRQT_U_UOI_U_RMPRV_U_RMPR("STA")_U_U_U_"14"_U_RMPRS_U_U_$J(RMPRTOTL,0,2)_"^^^^^^"
"RTN","RMPR121C",34,0)
 ;SERIAL#,MAKE,MODEL,LOT#,EXCLUDE/WAVER
"RTN","RMPR121C",35,0)
 S $P(^RMPR(660,RMPR660,0),U,11)=RMPRSLN,$P(^(0),U,24)=RMPRLTN
"RTN","RMPR121C",36,0)
 S $P(^RMPR(660,RMPR660,9),U)=RMPRMK,$P(^(9),U,2)=RMPRMD
"RTN","RMPR121C",37,0)
 S $P(^RMPR(660,RMPR660,2),U,3)=RMPREW
"RTN","RMPR121C",38,0)
 ;OIF/OEF
"RTN","RMPR121C",39,0)
 S DFN=RMPRDFN D SVC^VADPT
"RTN","RMPR121C",40,0)
 S RMPROEOI=$S(VASV(11)>0:"<!>",VASV(12)>0:"<!>",VASV(13)>0:"<!>",1:0)
"RTN","RMPR121C",41,0)
 D KVAR^VADPT
"RTN","RMPR121C",42,0)
 I RMPROEOI="<!>" S $P(^RMPR(660,RMPR660,5),U,1)=1
"RTN","RMPR121C",43,0)
 ;CONTRACT #
"RTN","RMPR121C",44,0)
 S $P(^RMPR(660,RMPR660,2),U,9)=$P(^RMPR(664,RMPRA,1,B2,0),U,14)
"RTN","RMPR121C",45,0)
 ; ITEM
"RTN","RMPR121C",46,0)
 S $P(^RMPR(660,RMPR660,0),U,6)=RMPRI
"RTN","RMPR121C",47,0)
 ;NUMBER OF BIDS
"RTN","RMPR121C",48,0)
 S $P(^RMPR(660,RMPR660,2),U,10)=RMPRNOB
"RTN","RMPR121C",49,0)
 ;HCPCS code
"RTN","RMPR121C",50,0)
 S:RMPRHCPC $P(^RMPR(660,RMPR660,0),U,22)=$P(^RMPR(661.1,RMPRHCPC,0),U,4)
"RTN","RMPR121C",51,0)
 ;
"RTN","RMPR121C",52,0)
 S ^RMPR(660,RMPR660,"AMS")=RMPRG,^RMPR(660,RMPR660,"AM")=U_U_RMPRDIS_U_RMPRSC
"RTN","RMPR121C",53,0)
 ; /SPS removed below from above line for 75 may re-use later
"RTN","RMPR121C",54,0)
 ; I $D(RMPRWO),RMPRWO S $P(^("AM"),U,2)=1,$P(^RMPR(660,RMPR660,"LB"),U,5)=RMPRWO
"RTN","RMPR121C",55,0)
 S:$D(RMPRR) $P(^RMPR(660,RMPR660,0),U,18)=RMPRR
"RTN","RMPR121C",56,0)
 S RMPRTRN=$P(^RMPR(664,RMPRA,4),U,5)
"RTN","RMPR121C",57,0)
 S $P(^RMPR(660,RMPR660,0),U,27)=DUZ,^(1)=RMPRTRN_U_RMPRDES_"^^"_RMPRHCPC_"^^"_RMCPT
"RTN","RMPR121C",58,0)
 ;If work order and no count fields need to be set
"RTN","RMPR121C",59,0)
 I +$P(^RMPR(664,RMPRA,0),U,17)>0 D  K LRQ,IENA,IENB
"RTN","RMPR121C",60,0)
 . S LRQ=$P(^RMPR(664,RMPRA,0),U,17),IENA=$P($G(^RMPR(660,RMPR660,0)),U,2),IENB=$P($G(^RMPR(664.1,LRQ,0)),U,2)
"RTN","RMPR121C",61,0)
 . I IENA'=IENB S $P(^RMPR(664,RMPRA,0),U,17)="",LRQ="" Q
"RTN","RMPR121C",62,0)
 . D NCNT
"RTN","RMPR121C",63,0)
 ;note to supplier
"RTN","RMPR121C",64,0)
 ;
"RTN","RMPR121C",65,0)
 S RMPRNS=""
"RTN","RMPR121C",66,0)
 S (D1,RD)=0
"RTN","RMPR121C",67,0)
 F  S RD=$O(^RMPR(664,RMPRA,1,B2,1,RD)) Q:RD=""  D
"RTN","RMPR121C",68,0)
 .S ^RMPR(660,RMPR660,"DES",RD,0)=^RMPR(664,RMPRA,1,B2,1,RD,0)
"RTN","RMPR121C",69,0)
 .I $L(RMPRNS)>160 Q
"RTN","RMPR121C",70,0)
 .S RMPRNS=RMPRNS_" "_^RMPR(664,RMPRA,1,B2,1,RD,0)
"RTN","RMPR121C",71,0)
 .S D1=RD
"RTN","RMPR121C",72,0)
 S ^RMPR(660,RMPR660,"DES",0)="^660.028^"_D1_U_D1
"RTN","RMPR121C",73,0)
 S:$D(RMPRDELN) ^RMPR(660,RMPR660,3)=RMPRDELN
"RTN","RMPR121C",74,0)
 ;modified by #62
"RTN","RMPR121C",75,0)
 S ^TMP($J,"RMPRPCE",660,RMPR660)=RMPRG_"^"_$G(RMPRDFN)
"RTN","RMPR121C",76,0)
 ;set x-refs
"RTN","RMPR121C",77,0)
 S DIK="^RMPR(660,",DA=RMPR660 D IX1^DIK
"RTN","RMPR121C",78,0)
 K DA,DIK,RMPRTRN
"RTN","RMPR121C",79,0)
 Q
"RTN","RMPR121C",80,0)
NCNT ; ADD NO ADMIN COUNT TO 660 FOR WORK ORDER
"RTN","RMPR121C",81,0)
 ;
"RTN","RMPR121C",82,0)
 S RMIE1=$P(^RMPR(664,RMPRA,0),U,17)
"RTN","RMPR121C",83,0)
 S RMRWO=$P(^RMPR(664.1,RMIE1,0),U,13)
"RTN","RMPR121C",84,0)
 S RMDAT(660,RMPR660_",",72.5)=RMRWO
"RTN","RMPR121C",85,0)
 S RMDAT(660,RMPR660_",",72)=RMIE1
"RTN","RMPR121C",86,0)
 S RMDAT(660,RMPR660_",",81)=1
"RTN","RMPR121C",87,0)
 S RMDAT(660,RMPR660_",",11)=14
"RTN","RMPR121C",88,0)
 S RMDAT(660,RMPR660_",",12)="C"
"RTN","RMPR121C",89,0)
 D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR121C",90,0)
 I $D(RMERROR) S RESULT(0)=1_U_RMERROR G EXIT
"RTN","RMPR121C",91,0)
 Q
"RTN","RMPR121C",92,0)
EXIT ;
"RTN","RMPR121C",93,0)
 K RMIE1,RMRWO,RMPRA,RMPR660
"RTN","RMPR121C",94,0)
 Q
"RTN","RMPR144P")
0^2^B2438202^n/a
"RTN","RMPR144P",1,0)
RMPR144P ;VMP/RB - FIX LAB REQUEST POINTER PROBLEM FOR FILE #660 ;12/20/07
"RTN","RMPR144P",2,0)
 ;;3.0;Prosthetics;**144**;12/20/07;Build 17
"RTN","RMPR144P",3,0)
 ;;
"RTN","RMPR144P",4,0)
 Q
"RTN","RMPR144P",5,0)
FIX660 ;1. Post install to correct lab request pointer problems for Purchase
"RTN","RMPR144P",6,0)
 ;   Card order 660 entries with incorrect Lab Request "LB" pointers. 
"RTN","RMPR144P",7,0)
 ;
"RTN","RMPR144P",8,0)
BUILD K ^XTMP("RMPR144P") D NOW^%DTC S RMSTART=%
"RTN","RMPR144P",9,0)
 S ^XTMP("RMPR144P","START COMPILE")=RMSTART
"RTN","RMPR144P",10,0)
 S ^XTMP("RMPR144P","END COMPILE")="RUNNING"
"RTN","RMPR144P",11,0)
 S ^XTMP("RMPR144P",0)=$$FMADD^XLFDT(RMSTART,90)_"^"_RMSTART
"RTN","RMPR144P",12,0)
0 ;FIND REPETITIVE LAB REQUEST BOGUS LINKS
"RTN","RMPR144P",13,0)
 S IEN=0,U="^"
"RTN","RMPR144P",14,0)
1 S IEN=$O(^RMPR(660,IEN)) G EXIT:IEN=""!(IEN]"@")
"RTN","RMPR144P",15,0)
 S R=$G(^RMPR(660,IEN,0)),R10=$G(^RMPR(660,IEN,10))
"RTN","RMPR144P",16,0)
 I R=""!($P(R,U)<3050101) G 1
"RTN","RMPR144P",17,0)
 S LB=$G(^RMPR(660,IEN,"LB")) G 1:LB=""
"RTN","RMPR144P",18,0)
 S LRQ=$P(LB,U,10) G 1:LRQ=""
"RTN","RMPR144P",19,0)
2 ;check invalid links
"RTN","RMPR144P",20,0)
 K XX,IENA,IENB
"RTN","RMPR144P",21,0)
 S XX=$O(^RMPR(668,"F",IEN,0))
"RTN","RMPR144P",22,0)
 S IENA=$P(R,U,2),RQ=$G(^RMPR(664.1,LRQ,0)),IENB=$P(RQ,U,2)
"RTN","RMPR144P",23,0)
 I IENA=IENB G 1
"RTN","RMPR144P",24,0)
 S ^XTMP("RMPR144P",660,IEN,0)=$G(LRQ)_U_$G(XX)_U_IENA_U_IENB
"RTN","RMPR144P",25,0)
 S ^XTMP("RMPR144P",660,IEN,1)=LB,^XTMP("RMPR144P",660,IEN,3)=$P(R,U,1,9),^XTMP("RMPR144P",660,IEN,4)=$P(RQ,U,1,9)
"RTN","RMPR144P",26,0)
 ;W !!,IEN,?12,IENA,?22,IENB,?40,LRQ,?60,XX,!,$P(R,U,1,9),!,LB,!,$P(RQ,U,1,9)
"RTN","RMPR144P",27,0)
 K ^RMPR(660,IEN,"LB")
"RTN","RMPR144P",28,0)
 G 1
"RTN","RMPR144P",29,0)
EXIT ;
"RTN","RMPR144P",30,0)
 D NOW^%DTC S RMEND=%
"RTN","RMPR144P",31,0)
 S ^XTMP("RMPR144P","END COMPILE")=RMEND
"RTN","RMPR144P",32,0)
 K RMEND,RMSTART,%,IEN,R,R10,LRQ,LB,XX,IENA,IENB
"RTN","RMPR144P",33,0)
 Q
"RTN","RMPR29CA")
0^3^B70610125^B70452524
"RTN","RMPR29CA",1,0)
RMPR29CA ;OI-HINES/HNC,SPS -WORK ORDER SUSPENSE RPC;12/27/2004
"RTN","RMPR29CA",2,0)
 ;;3.0;PROSTHETICS;**75,122,142,144**;Feb 09, 1996;Build 17
"RTN","RMPR29CA",3,0)
A1(RMIE68,RMPRDUZ,RMSUSTAT,RMPR6641,RMPRTXT) ;roll and scroll entry point
"RTN","RMPR29CA",4,0)
 G A2
"RTN","RMPR29CA",5,0)
EN(RESULTS,RMIE68,RMPRDUZ,RMSUSTAT,RMPR6641,RMPRTXT) ;RPC entry point
"RTN","RMPR29CA",6,0)
A2 ;
"RTN","RMPR29CA",7,0)
 S RESULTS(0)="",STP=0
"RTN","RMPR29CA",8,0)
 K ^TMP($J)
"RTN","RMPR29CA",9,0)
 ;
"RTN","RMPR29CA",10,0)
CONT ;RMSUSTAT is status 1=complete or 0=initial note or 2=pending (incomplete)
"RTN","RMPR29CA",11,0)
 ;3=cancel or 4=cancel and clone 
"RTN","RMPR29CA",12,0)
 S RMIE=0
"RTN","RMPR29CA",13,0)
 F  S RMIE=$O(^RMPR(664.1,RMPR6641,2,RMIE)) Q:RMIE'>0  D  Q:STP=1
"RTN","RMPR29CA",14,0)
 .S RMIE60=$P(^RMPR(664.1,RMPR6641,2,RMIE,0),U,5) Q:'RMIE60
"RTN","RMPR29CA",15,0)
 .S ^TMP($J,RMIE60)=""
"RTN","RMPR29CA",16,0)
 .D FD
"RTN","RMPR29CA",17,0)
 .I STP=1 Q
"RTN","RMPR29CA",18,0)
 .D UPD
"RTN","RMPR29CA",19,0)
 I STP=1 G EXIT
"RTN","RMPR29CA",20,0)
 I RMSUSTAT=1 D CNOTE
"RTN","RMPR29CA",21,0)
 I RMSUSTAT=0 D INOTE,FD
"RTN","RMPR29CA",22,0)
 I RMSUSTAT=2 D ONOTE,FD
"RTN","RMPR29CA",23,0)
 I RMSUSTAT=3 D CANOTE^RMPR29CB
"RTN","RMPR29CA",24,0)
 I RMSUSTAT=4 D CANOTE^RMPR29CB
"RTN","RMPR29CA",25,0)
 ;set status
"RTN","RMPR29CA",26,0)
 G EXIT
"RTN","RMPR29CA",27,0)
CNOTE ;(#12) COMPLETION NOTE
"RTN","RMPR29CA",28,0)
 ;set file 668
"RTN","RMPR29CA",29,0)
 ;^RMPR(668,D0,4,0)=^668.012^^
"RTN","RMPR29CA",30,0)
 ;if status is close, or 1
"RTN","RMPR29CA",31,0)
 ;RMPRTXT ;load into field #12
"RTN","RMPR29CA",32,0)
 ;^RMPR(668,D0,4,D1,0)
"RTN","RMPR29CA",33,0)
 ;
"RTN","RMPR29CA",34,0)
 ;Update file 664.1 on Close out
"RTN","RMPR29CA",35,0)
 I +$P(^RMPR(664.1,RMPR6641,0),U,16)'>0 S $P(^(0),U,16)=DUZ,$P(^(7),U,1)=DT,$P(^(7),U,3)=DUZ
"RTN","RMPR29CA",36,0)
 S DIE="^RMPR(664.1,",DA=RMPR6641
"RTN","RMPR29CA",37,0)
 S DR="16////^S X=""C"";22////^S X=DUZ;23///^S X=DT" D ^DIE
"RTN","RMPR29CA",38,0)
 K DR,DA,DIE
"RTN","RMPR29CA",39,0)
 S RMIE=0 D NOW^%DTC S (RMPREODT,GMRCAD)=%
"RTN","RMPR29CA",40,0)
 F  S RMIE=$O(^RMPR(664.1,RMPR6641,2,RMIE)) Q:RMIE'>0  D
"RTN","RMPR29CA",41,0)
 .S DIE="^RMPR(664.2,",DA=$P($G(^RMPR(664.1,RMPR6641,2,RMIE,0)),U,6)
"RTN","RMPR29CA",42,0)
 .Q:DA'>0
"RTN","RMPR29CA",43,0)
 .S DR="8////^S X=DT;9////^S X=DUZ" D ^DIE
"RTN","RMPR29CA",44,0)
 .K DA,DR,DIE
"RTN","RMPR29CA",45,0)
 .S DIE="^RMPR(660,",DA=$P($G(^RMPR(664.1,RMPR6641,2,RMIE,0)),U,5)
"RTN","RMPR29CA",46,0)
 .Q:DA'>0
"RTN","RMPR29CA",47,0)
 .S DR="8.4////^S X=RMPREODT;10////^S X=RMPREODT;50////^S X=DT" D ^DIE
"RTN","RMPR29CA",48,0)
 .K DA,DR,DIE
"RTN","RMPR29CA",49,0)
 S DA=RMIE68
"RTN","RMPR29CA",50,0)
 S DIE="^RMPR(668,"
"RTN","RMPR29CA",51,0)
 S DR="5////^S X=RMPREODT;6////^S X=DUZ;14///^S X=""C""" D ^DIE
"RTN","RMPR29CA",52,0)
 N RMPRC
"RTN","RMPR29CA",53,0)
 S L="",LN=0
"RTN","RMPR29CA",54,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CA",55,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank line
"RTN","RMPR29CA",56,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CA",57,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CA",58,0)
 .. Q
"RTN","RMPR29CA",59,0)
 . S LN=LN+1,^RMPR(668,RMIE68,4,LN,0)=RMPRTXT(L)
"RTN","RMPR29CA",60,0)
 . Q
"RTN","RMPR29CA",61,0)
 S $P(^RMPR(668,RMIE68,4,0),"^",3)=LN
"RTN","RMPR29CA",62,0)
 K L,LN
"RTN","RMPR29CA",63,0)
 ;S DA=RMIE68,DIK="^RMPR(668," D IX1^DIK
"RTN","RMPR29CA",64,0)
 I '$P(^RMPR(668,DA,0),U,9) D
"RTN","RMPR29CA",65,0)
 .S DIE="^RMPR(668,"
"RTN","RMPR29CA",66,0)
 .S DR="7///^S X=""See Completion Note for Initial Action Taken."""
"RTN","RMPR29CA",67,0)
 .D ^DIE
"RTN","RMPR29CA",68,0)
 .S DR="10////^S X=RMPREODT;16////^S X=DUZ" D ^DIE
"RTN","RMPR29CA",69,0)
 K RMPREODT
"RTN","RMPR29CA",70,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CA",71,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has been updated to CLOSED." Q
"RTN","RMPR29CA",72,0)
 S RMPRCOM=0
"RTN","RMPR29CA",73,0)
 F  S RMPRCOM=$O(^RMPR(668,RMIE68,4,RMPRCOM)) Q:RMPRCOM=""  D
"RTN","RMPR29CA",74,0)
 .S GMRCOM(RMPRCOM)=^RMPR(668,RMIE68,4,RMPRCOM,0)
"RTN","RMPR29CA",75,0)
 I $G(GMRCOM)="" S GMRCOM="Not Noted"
"RTN","RMPR29CA",76,0)
 S GMRCSF="U"
"RTN","RMPR29CA",77,0)
 S GMRCA=10
"RTN","RMPR29CA",78,0)
 S GMRCALF="N"
"RTN","RMPR29CA",79,0)
 S GMRCATO=""
"RTN","RMPR29CA",80,0)
 S (GMRCORNP,GMRCDUZ)=DUZ
"RTN","RMPR29CA",81,0)
 S BDC=$$SFILE^GMRCGUIB(.GMRCO,.GMRCA,.GMRCSF,.GMRCORNP,.GMRCDUZ,.GMRCOM,.GMRCALF,.GMRCATO,.GMRCAD)
"RTN","RMPR29CA",82,0)
 I +BDC=1 S RESULTS(0)=1_"^"_$P(BDC,U,2)
"RTN","RMPR29CA",83,0)
 K GMRCO,GMRCA,GMRCSF,GMRCORNP,GMRCDUZ,GMRCOM,GMRCALF,GMRCATO,GMRCAD
"RTN","RMPR29CA",84,0)
 I RESULTS(0)="" S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has been updated to CLOSED."
"RTN","RMPR29CA",85,0)
 Q
"RTN","RMPR29CA",86,0)
ONOTE ;Other note
"RTN","RMPR29CA",87,0)
 ;set file 668
"RTN","RMPR29CA",88,0)
 ;^RMPR(668,D0,4,0)=^668.012^^
"RTN","RMPR29CA",89,0)
 ;if status is pending, and already initial action note or 0
"RTN","RMPR29CA",90,0)
 ;^RMPR(668,D0,1,D1,0)= (#.01) ACTION DATE [1D] 
"RTN","RMPR29CA",91,0)
 ;RMPRTXT ;load into field #11, #1
"RTN","RMPR29CA",92,0)
 ;^RMPR(668,D0,1,D1,1,0)=^668.111^^  
"RTN","RMPR29CA",93,0)
 ;
"RTN","RMPR29CA",94,0)
 S RMPRDA1=RMIE68,DA(1)=RMIE68,DA=RMIE68
"RTN","RMPR29CA",95,0)
 D NOW^%DTC S X=%,GMRCWHN=%
"RTN","RMPR29CA",96,0)
 S DIC="^RMPR(668,"_RMIE68_",1,"
"RTN","RMPR29CA",97,0)
 S DIC(0)="CQL"
"RTN","RMPR29CA",98,0)
 S DIC("P")="668.011DA"
"RTN","RMPR29CA",99,0)
 S DLAYGO=668
"RTN","RMPR29CA",100,0)
 D ^DIC
"RTN","RMPR29CA",101,0)
 I Y=-1 S RESULTS(0)="1^Error Modifying Record!" Q
"RTN","RMPR29CA",102,0)
 S (DA,RMPRDA2)=+Y
"RTN","RMPR29CA",103,0)
 K DIE,DR,Y
"RTN","RMPR29CA",104,0)
 N RMPRC
"RTN","RMPR29CA",105,0)
 S L="",LN=0
"RTN","RMPR29CA",106,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CA",107,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank  line
"RTN","RMPR29CA",108,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CA",109,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CA",110,0)
 .. Q
"RTN","RMPR29CA",111,0)
 . S LN=LN+1,^RMPR(668,RMIE68,1,RMPRDA2,1,LN,0)=RMPRTXT(L)
"RTN","RMPR29CA",112,0)
 . Q
"RTN","RMPR29CA",113,0)
 S $P(^RMPR(668,RMIE68,1,RMPRDA2,1,0),"^",3)=LN
"RTN","RMPR29CA",114,0)
 K L,LN
"RTN","RMPR29CA",115,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CA",116,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has not changed." Q
"RTN","RMPR29CA",117,0)
 S RMPRCOM=0
"RTN","RMPR29CA",118,0)
 F  S RMPRCOM=$O(^RMPR(668,RMIE68,1,RMPRDA2,1,RMPRCOM)) Q:RMPRCOM=""  D
"RTN","RMPR29CA",119,0)
 .S GMRCOM(RMPRCOM)=^RMPR(668,RMIE68,1,RMPRDA2,1,RMPRCOM,0)
"RTN","RMPR29CA",120,0)
 D CMT^GMRCGUIB(.GMRCO,.GMRCOM,"",GMRCWHN,DUZ)
"RTN","RMPR29CA",121,0)
 K DA,RMPRDA1,RMPRDA2,RMPRCOM,GMRCOM,GMRCO,GMRCWHN
"RTN","RMPR29CA",122,0)
 S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has not changed."
"RTN","RMPR29CA",123,0)
 Q
"RTN","RMPR29CA",124,0)
INOTE ;initial action note
"RTN","RMPR29CA",125,0)
 ;set file 668
"RTN","RMPR29CA",126,0)
 ;^RMPR(668,D0,3,0)=^668.07^^
"RTN","RMPR29CA",127,0)
 ;if status is pending, or 0
"RTN","RMPR29CA",128,0)
 ;RMPRTXT ;load into field #7
"RTN","RMPR29CA",129,0)
 ;^RMPR(668,D0,3,0)=^668.07^^
"RTN","RMPR29CA",130,0)
 ;
"RTN","RMPR29CA",131,0)
 I $D(^RMPR(668,RMIE68,3,1,0)) S RESULTS(0)="1^Initial Action Note Already Posted!" Q
"RTN","RMPR29CA",132,0)
 D NOW^%DTC S RMPREODT=%
"RTN","RMPR29CA",133,0)
 N RMPRC
"RTN","RMPR29CA",134,0)
 S ^RMPR(668,RMIE68,3,0)="^^^"_DT_"^"
"RTN","RMPR29CA",135,0)
 S L="",LN=0
"RTN","RMPR29CA",136,0)
 F  S L=$O(RMPRTXT(L)) Q:L=""  D
"RTN","RMPR29CA",137,0)
 . I 'LN D  Q:RMPRC=""  ;strip leading space from 1st line, ignore blank  line
"RTN","RMPR29CA",138,0)
 .. S RMPRC=$E($TR(RMPRTXT(L)," ","")) ;1st non space char
"RTN","RMPR29CA",139,0)
 .. S:RMPRC'="" RMPRTXT(L)=$E(RMPRTXT(L),$F(RMPRTXT(L),RMPRC)-1,$L(RMPRTXT(L))) ;extract from 1st non space char to end of line
"RTN","RMPR29CA",140,0)
 .. Q
"RTN","RMPR29CA",141,0)
 . S LN=LN+1,^RMPR(668,RMIE68,3,LN,0)=RMPRTXT(L)
"RTN","RMPR29CA",142,0)
 . Q
"RTN","RMPR29CA",143,0)
 S $P(^RMPR(668,RMIE68,3,0),"^",3)=LN
"RTN","RMPR29CA",144,0)
 K L,LN
"RTN","RMPR29CA",145,0)
 S DIE="^RMPR(668,"
"RTN","RMPR29CA",146,0)
 S DA=RMIE68
"RTN","RMPR29CA",147,0)
 S DR="10////^S X=RMPREODT;16////^S X=DUZ;14///^S X=""P"""
"RTN","RMPR29CA",148,0)
 D ^DIE
"RTN","RMPR29CA",149,0)
 S GMRCO=$P(^RMPR(668,RMIE68,0),U,15)
"RTN","RMPR29CA",150,0)
 I GMRCO="" S RESULTS(0)="0^Completed Manual Suspense Action.  Suspense status has been updated to PENDING" Q
"RTN","RMPR29CA",151,0)
 S RMPRCMT=0
"RTN","RMPR29CA",152,0)
 F  S RMPRCMT=$O(^RMPR(668,RMIE68,3,RMPRCMT)) Q:RMPRCMT=""  D
"RTN","RMPR29CA",153,0)
 .S GMRCMT(RMPRCMT)=^RMPR(668,RMIE68,3,RMPRCMT,0)
"RTN","RMPR29CA",154,0)
 D CMT^GMRCGUIB(GMRCO,.GMRCMT,DUZ,RMPREODT,DUZ)
"RTN","RMPR29CA",155,0)
 K RMPREODT,GMRCO,RMGMRCO,GMRCMT,RMPRCMT
"RTN","RMPR29CA",156,0)
 S RESULTS(0)="0^Completed Suspense Action, and Posted note to CPRS Consult.  Suspense status has changed to PENDING."
"RTN","RMPR29CA",157,0)
 Q
"RTN","RMPR29CA",158,0)
 ;
"RTN","RMPR29CA",159,0)
FD ;file date
"RTN","RMPR29CA",160,0)
 N DIE,DIC,I,J,Y,RMDFN,RMI,RMDATE,RM680,RM6810,RMERROR,RM60L,RC
"RTN","RMPR29CA",161,0)
 N RMERR,RMCHK,DLAYGO,X,DR,RM668,RM60DAT,RMSTATUS
"RTN","RMPR29CA",162,0)
 N RM68CNT,RM60CNT,RMREQU,RMSI,RMSAMIS,RM68IEN,RM60IEN,RMSUS60,RMSUS68,RMD
"RTN","RMPR29CA",163,0)
 N RM68DATA,RM60TYP,RM68D,RM68TRAN,RMPRPRC,RM60IT,RMENTSUS,RMQUIT
"RTN","RMPR29CA",164,0)
 ;
"RTN","RMPR29CA",165,0)
 S RMERR=0
"RTN","RMPR29CA",166,0)
 S:RMSUSTAT="" RMSUSTAT=0
"RTN","RMPR29CA",167,0)
 L +^RMPR(660,RMIE60):2
"RTN","RMPR29CA",168,0)
 I $T=0 S RESULTS(0)="1^Someone else is Editing this entry! If this problem persists contact your IRM to clear the Lock Table",STP=1 Q
"RTN","RMPR29CA",169,0)
 S RM680=$G(^RMPR(668,RMIE68,0))
"RTN","RMPR29CA",170,0)
 S RM688=$G(^RMPR(668,RMIE68,8))
"RTN","RMPR29CA",171,0)
 S RM6810=$G(^RMPR(668,RMIE68,10))
"RTN","RMPR29CA",172,0)
 S RMAMIS=$P($G(^RMPR(660,RMIE60,"AMS")),U,1)
"RTN","RMPR29CA",173,0)
 ;code here for 668 fields
"RTN","RMPR29CA",174,0)
 S RMDATE=$P(RM680,U,1)
"RTN","RMPR29CA",175,0)
 S RMCODT=$P(RM680,U,5)
"RTN","RMPR29CA",176,0)
 S RMINDT=$P(RM680,U,9)
"RTN","RMPR29CA",177,0)
 S RMPRCO=$P(RM680,U,15)
"RTN","RMPR29CA",178,0)
 S RMDWRT=$P(RM680,U,16)
"RTN","RMPR29CA",179,0)
 S RMSTAT=$P(RM680,U,7)
"RTN","RMPR29CA",180,0)
 S RMTRES=$P(RM680,U,8)
"RTN","RMPR29CA",181,0)
 S RMTYRE=$S(RMTRES=1:"ROUTINE",RMTRES=2:"EYEGLASS",RMTRES=3:"CONTACT LENS",RMTRES=4:"OXYGEN",RMTRES=5:"MANUAL",RMTRES=11:"LAB",1:"")
"RTN","RMPR29CA",182,0)
 S RMREQU=$P(RM680,U,11)
"RTN","RMPR29CA",183,0)
 S RMSERV=""
"RTN","RMPR29CA",184,0)
 I $G(RMREQU) D GETS^DIQ(200,RMREQU,"29","E","RMAA") S RMSERV=RMAA(200,RMREQU_",",29,"E")
"RTN","RMPR29CA",185,0)
 S RMPRDI=$E($P(RM688,U,2),1,16)
"RTN","RMPR29CA",186,0)
 S RMICD9=$P(RM688,U,3)
"RTN","RMPR29CA",187,0)
 ;
"RTN","RMPR29CA",188,0)
 S RMDAT(660,RMIE60_",",8.1)=RMDATE
"RTN","RMPR29CA",189,0)
 S RMDAT(660,RMIE60_",",8.2)=RMDWRT
"RTN","RMPR29CA",190,0)
 S RMDAT(660,RMIE60_",",8.3)=RMINDT
"RTN","RMPR29CA",191,0)
 S RMDAT(660,RMIE60_",",8.4)=RMCODT
"RTN","RMPR29CA",192,0)
 S RMDAT(660,RMIE60_",",8.5)=RMTYRE
"RTN","RMPR29CA",193,0)
 S RMDAT(660,RMIE60_",",8.6)=RMREQU
"RTN","RMPR29CA",194,0)
 S RMDAT(660,RMIE60_",",8.61)=RMSERV
"RTN","RMPR29CA",195,0)
 S RMDAT(660,RMIE60_",",8.7)=RMPRDI
"RTN","RMPR29CA",196,0)
 S RMDAT(660,RMIE60_",",8.8)=RMICD9
"RTN","RMPR29CA",197,0)
 S RMDAT(660,RMIE60_",",8.9)=RMPRCO
"RTN","RMPR29CA",198,0)
 S RMDAT(660,RMIE60_",",8.11)=RMSTAT
"RTN","RMPR29CA",199,0)
 I RMSUSTAT=2 S RMDAT(660,RMIE60_",",8.14)=0
"RTN","RMPR29CA",200,0)
 I RMSUSTAT'=2 S RMDAT(660,RMIE60_",",8.14)=RMSUSTAT
"RTN","RMPR29CA",201,0)
 D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR29CA",202,0)
 L -^RMPR(660,RMIE60)
"RTN","RMPR29CA",203,0)
 I $D(RMERROR) S RMERR=1,STP=1 G ERR
"RTN","RMPR29CA",204,0)
 ;
"RTN","RMPR29CA",205,0)
 Q
"RTN","RMPR29CA",206,0)
UPD ;update file 668 with 2319 records
"RTN","RMPR29CA",207,0)
 K DD,DO,DIC
"RTN","RMPR29CA",208,0)
 S DA(1)=RMIE68
"RTN","RMPR29CA",209,0)
 S DIC="^RMPR(668,"_DA(1)_","_"10,"
"RTN","RMPR29CA",210,0)
 S DIC(0)="L",DLAYGO=668,X=RMIE60
"RTN","RMPR29CA",211,0)
 D FILE^DICN
"RTN","RMPR29CA",212,0)
 K X,DD,DO,DIC
"RTN","RMPR29CA",213,0)
 S DA(1)=RMIE68,DIC(0)="L",DLAYGO=668
"RTN","RMPR29CA",214,0)
 S DIC="^RMPR(668,"_DA(1)_","_"11,"
"RTN","RMPR29CA",215,0)
 S X=RMAMIS
"RTN","RMPR29CA",216,0)
 D FILE^DICN
"RTN","RMPR29CA",217,0)
 K DIC,X,DLAYGO,DO
"RTN","RMPR29CA",218,0)
 Q
"RTN","RMPR29CA",219,0)
A3 G A4
"RTN","RMPR29CA",220,0)
EN1(RESULTS,DA) ;Broker entry to kill WO
"RTN","RMPR29CA",221,0)
 ;DA is passed
"RTN","RMPR29CA",222,0)
 S DIK="^RMPR(664.1," D ^DIK
"RTN","RMPR29CA",223,0)
 K DIK
"RTN","RMPR29CA",224,0)
A4 ;
"RTN","RMPR29CA",225,0)
 Q
"RTN","RMPR29CA",226,0)
ERR ;exit on error
"RTN","RMPR29CA",227,0)
 S RESULTS(0)="1^ERROR WAS "_RMERROR("DIERR",1,"TEXT",1)
"RTN","RMPR29CA",228,0)
 Q
"RTN","RMPR29CA",229,0)
EXIT ;
"RTN","RMPR29CA",230,0)
 K %,BDC,RM688,RMAA,RMAMIS,RMCODT,RMDAT,RMDWRT,RMICD9,RMIE,RMIE60,RMINDT
"RTN","RMPR29CA",231,0)
 K RMPRCO,RMPRDI,RMSERV,RMSTAT,RMTRES,RMTYRE,STP
"RTN","RMPR29CA",232,0)
 Q
"RTN","RMPR29GU")
0^4^B8838092^B8685771
"RTN","RMPR29GU",1,0)
RMPR29GU ;HOIFO/SPS-CREATE 2529-3 GUI [ 10/17/05  8:55 AM ]
"RTN","RMPR29GU",2,0)
 ;;3.0;PROSTHETICS;**75,144**;Feb 09, 1996;Build 17
"RTN","RMPR29GU",3,0)
 ;
"RTN","RMPR29GU",4,0)
A1(RMPRDA,RMPRSITE,RMPR668,RMPRPTR) ;
"RTN","RMPR29GU",5,0)
 D IN
"RTN","RMPR29GU",6,0)
 Q
"RTN","RMPR29GU",7,0)
CR(RESULTS,RMPRDA,RMPRSITE,RMPR668,RMPRPTR) ;CREATE WORK ORDER
"RTN","RMPR29GU",8,0)
IN D INF^RMPRSIT
"RTN","RMPR29GU",9,0)
 S SCR=$P(^RMPR(664.1,RMPRDA,0),U,11),RMERR=0
"RTN","RMPR29GU",10,0)
 K RMPRTMP I $P(^RMPR(664.1,RMPRDA,0),U,15)'=RMPR("STA") S RMPRTMP=1
"RTN","RMPR29GU",11,0)
 N DIC,Y,DIR S RMPRWO=1 D FQ^RMPRDT Q:'$D(RMPRFY)!('$D(RMPRQTR))  S:'$D(RMPRTMP) RMPRWO=$$STAN^RMPR31U(RMPR("STA"))_"-"_RMPRFY_"-"_RMPRQTR I $D(RMPRTMP) D
"RTN","RMPR29GU",12,0)
 .S RMPRWO=$$STAN^RMPR31U($P(^RMPR(664.1,RMPRDA,0),U,15))_"T-"_RMPRFY_"-"_RMPRQTR
"RTN","RMPR29GU",13,0)
 I '$D(^RMPR(669.1,"B",RMPRWO)) K DD,D0 S DIC="^RMPR(669.1,",DLAYGO=669.1,DIC(0)="LZ",X=RMPRWO D FILE^DICN K DLAYGO,D0
"RTN","RMPR29GU",14,0)
 S RDA=$O(^RMPR(669.1,"B",RMPRWO,0)) Q:'RDA
"RTN","RMPR29GU",15,0)
 L +^RMPR(669.1,RDA,0):1 I '$T S RESULTS(0)="1^Someone is editing this record!" G EXIT
"RTN","RMPR29GU",16,0)
 S RN=$P(^RMPR(669.1,RDA,0),U,2)+1 F I=1:1:4-$L(RN) S RN="0"_RN
"RTN","RMPR29GU",17,0)
 S RMPRWO=RMPRWO_"-"_SCR_"-"_RN
"RTN","RMPR29GU",18,0)
 S $P(^RMPR(669.1,RDA,0),U,2)=RN L -^RMPR(669.1,RDA,0)
"RTN","RMPR29GU",19,0)
 S $P(^RMPR(664.1,RMPRDA,0),U,13)=$G(RMPRWO)
"RTN","RMPR29GU",20,0)
 ;set no admin count/no lab count
"RTN","RMPR29GU",21,0)
 I $P(^RMPR(664.1,RMPRDA,0),U,15)=RMPR("STA")&($P(^(0),U,4)'=RMPR("STA")) S $P(^(0),U,23)=1
"RTN","RMPR29GU",22,0)
 I $P(^RMPR(664.1,RMPRDA,0),U,15)'=RMPR("STA") S $P(^(0),U,20)=1 S:$D(RMPR25) $P(^RMPR(664.1,RMPRDA,0),U,23)=1 S DIE="^RMPR(664.1,",DA=RMPRDA,DR="16///^S X=""PC""" D ^DIE
"RTN","RMPR29GU",23,0)
 I '$P(^RMPR(664.1,RMPRDA,0),U,20) S DIE="^RMPR(664.1,",DA=RMPRDA,DR="16///^S X=""P""" D ^DIE
"RTN","RMPR29GU",24,0)
 S RMDAT(664.1,RMPRDA_",",13)=DUZ
"RTN","RMPR29GU",25,0)
 S RMDAT(664.1,RMPRDA_",",17)=DT
"RTN","RMPR29GU",26,0)
 S RMDAT(664.1,RMPRDA_",",.05)=RMPR668
"RTN","RMPR29GU",27,0)
 D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR29GU",28,0)
 I $D(RMERROR) S RMERR=1 D ERR G EXIT
"RTN","RMPR29GU",29,0)
 D IN5^VADPT S VAINDT=$P($G(VAIP(3)),U) D INP^VADPT
"RTN","RMPR29GU",30,0)
 I VAIN(1) S DR="12//^S X=$P(VAIN(4),U,2)" D ^DIE
"RTN","RMPR29GU",31,0)
 S RMSOP=$S($P(^RMPR(664.1,RMPRDA,0),U,11)="O":11,$P(^(0),U,11)="E":11,$P(^(0),U,11)="R":11,$P(^(0),U,11)="W":11,1:"")
"RTN","RMPR29GU",32,0)
 I +RMSOP>0 D  G:RMERR=1 EXIT
"RTN","RMPR29GU",33,0)
 .L +^RMPR(668,RMPR668):2
"RTN","RMPR29GU",34,0)
 .I $T=0 S RESULTS(0)="1^Someone else is Editing this entry!" S RMERR=1 Q
"RTN","RMPR29GU",35,0)
 .S RMDAT(668,RMPR668_",",9)=RMSOP
"RTN","RMPR29GU",36,0)
 .D FILE^DIE("","RMDAT","RMERROR")
"RTN","RMPR29GU",37,0)
 .L -^RMPR(668,RMPR668)
"RTN","RMPR29GU",38,0)
 .I $D(RMERROR) S RMERR=1 D ERR Q
"RTN","RMPR29GU",39,0)
 D ^RMPR29GA
"RTN","RMPR29GU",40,0)
 S RESULTS(0)=0_"^"_"Work Order Created:  "_RMPRWO
"RTN","RMPR29GU",41,0)
 ;ADD PRINT HERE.  
"RTN","RMPR29GU",42,0)
 I RMPRPTR=0 D PRT^RMPR29R
"RTN","RMPR29GU",43,0)
 I +RMPRPTR D EN1^RMPR29R(RMPRPTR)
"RTN","RMPR29GU",44,0)
 Q
"RTN","RMPR29GU",45,0)
ERR ;QUIT ON ERROR
"RTN","RMPR29GU",46,0)
 S RESULTS(0)="1^The following error has occured "_RMERROR
"RTN","RMPR29GU",47,0)
 Q
"RTN","RMPR29GU",48,0)
EXIT ;
"RTN","RMPR29GU",49,0)
 K DA,DIE,DR,I,RDA,RMDAT,RMERR,RMERROR,RMPR,RMPR25,RMPRFY,RMPRQTR,RMPRWO
"RTN","RMPR29GU",50,0)
 K RMSOP,RN,SCR,VAIN,VAINDT,VAIP,X
"RTN","RMPR29GU",51,0)
 Q
"RTN","RMPRN6")
0^5^B85232517^B84903534
"RTN","RMPRN6",1,0)
RMPRN6 ;Hines OIFO/HNC-PRINT NPPD LOCAL DATA ;3/17/03  11:38
"RTN","RMPRN6",2,0)
 ;;3.0;PROSTHETICS;**31,32,34,36,39,48,51,70,77,90,144**;Feb 09, 1996;Build 17
"RTN","RMPRN6",3,0)
 ;RVD 3/17/03 patch #77 - fix undefined and closing device.
"RTN","RMPRN6",4,0)
 ;SPS 5/24/05 Patch #90 - check for type of 5 Rental.
"RTN","RMPRN6",5,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPRN6",6,0)
DATE S %DT="XEA",%DT("A")="Enter Date to Start NPPD Calculations From: " D ^%DT G:X[U!(X="")!($D(DTOUT)) EXIT
"RTN","RMPRN6",7,0)
 S DATE(1)=+Y
"RTN","RMPRN6",8,0)
 S %DT="XEA",%DT("A")="Enter End Date: " D ^%DT G:X[U!(X="")!($D(DTOUT)) EXIT S DATE(2)=+Y
"RTN","RMPRN6",9,0)
 I DATE(1)>DATE(2) W !!,$C(7),"ENDING DATE RANGE IS LESS THAN BEGINNING DATE RANGE",! G DATE
"RTN","RMPRN6",10,0)
 Q:$D(RMPRCDE)
"RTN","RMPRN6",11,0)
DET ;select detail or brief
"RTN","RMPRN6",12,0)
 D DISP^RMPRN6S
"RTN","RMPRN6",13,0)
 K DIR
"RTN","RMPRN6",14,0)
 ;S DIR(0)="S^D:DETAIL;B:BRIEF"
"RTN","RMPRN6",15,0)
 S DIR(0)="S^1:BRIEF NEW SUMMARY;2:BRIEF USED SUMMARY;3:BRIEF BOTH SUMMARY;4:DETAIL & NEW SUMMARY;5:DETAIL & USED SUMMARY;6:DETAIL & BOTH SUMMARY"
"RTN","RMPRN6",16,0)
 S DIR("A")="Type of Report",DIR("B")="DETAIL & NEW SUMMARY" D ^DIR
"RTN","RMPRN6",17,0)
 Q:$D(DIRUT)!($D(DTOUT))
"RTN","RMPRN6",18,0)
 S RMPRDET=Y
"RTN","RMPRN6",19,0)
DEV ;device
"RTN","RMPRN6",20,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT K IOP I $E(IOST,1,2)["C-" G PRT
"RTN","RMPRN6",21,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE("RMPRSITE")="",ZTSAVE("RMPR(")=""
"RTN","RMPRN6",22,0)
 I  S ZTSAVE("DATE(")="",ZTSAVE("RMPRZ")="",ZTSAVE("RMPRDET")=""
"RTN","RMPRN6",23,0)
 I  S ZTRTN="PRT^RMPRN6",ZTDESC="Prosthetic NPPD" D ^%ZTLOAD K ZTDESC,ZTIO,ZTRTN,ZTSAVE G EXIT
"RTN","RMPRN6",24,0)
PRT ;print
"RTN","RMPRN6",25,0)
 I '$D(IO("Q")) U IO
"RTN","RMPRN6",26,0)
 D GNP,GNPC
"RTN","RMPRN6",27,0)
 Q
"RTN","RMPRN6",28,0)
ENL ;entry point for one line
"RTN","RMPRN6",29,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPRN6",30,0)
 S RMPRCDE=1
"RTN","RMPRN6",31,0)
 D DATE
"RTN","RMPRN6",32,0)
 G:'$D(DATE(1))!('$D(DATE(2))) EXIT
"RTN","RMPRN6",33,0)
 ;single line always new and used (BOTH) sort
"RTN","RMPRN6",34,0)
 S RMPRDET=6
"RTN","RMPRN6",35,0)
 D GNPCC,EXIT
"RTN","RMPRN6",36,0)
 Q
"RTN","RMPRN6",37,0)
GNP ;gather nppd data
"RTN","RMPRN6",38,0)
 S $P(LN,"-",IOM)=""
"RTN","RMPRN6",39,0)
 S DATE=DATE(1)-1
"RTN","RMPRN6",40,0)
 K ^TMP($J)
"RTN","RMPRN6",41,0)
 F  S DATE=$O(^RMPR(660,"B",DATE)) Q:(DATE="")!($P(DATE,".",1)>DATE(2))  D
"RTN","RMPRN6",42,0)
 .S RMPRB=0
"RTN","RMPRN6",43,0)
 .F  S RMPRB=$O(^RMPR(660,"B",DATE,RMPRB)) Q:RMPRB'>0  D
"RTN","RMPRN6",44,0)
 ..;define variables for record
"RTN","RMPRN6",45,0)
 ..S REC=$G(^RMPR(660,RMPRB,0)) Q:REC=""
"RTN","RMPRN6",46,0)
 ..Q:$P(REC,U,15)["*"
"RTN","RMPRN6",47,0)
 ..Q:$P(REC,U,10)'=RMPR("STA")
"RTN","RMPRN6",48,0)
 ..;check for used pip
"RTN","RMPRN6",49,0)
 ..;if used pip sort, not pip, not va, quit
"RTN","RMPRN6",50,0)
 ..I $G(RMPRDET)=2&($P($G(^RMPR(660,RMPRB,1)),U,5)'="")&($P(REC,U,14)'="V") Q
"RTN","RMPRN6",51,0)
 ..I $G(RMPRDET)=5&($P($G(^RMPR(660,RMPRB,1)),U,5)'="")&($P(REC,U,14)'="V") Q
"RTN","RMPRN6",52,0)
 ..S TYPE=$P(REC,U,4)
"RTN","RMPRN6",53,0)
 ..S TY=$S(TYPE="X":2,TYPE=5:2,TYPE="I":1,1:3)
"RTN","RMPRN6",54,0)
 ..S MR=$P($G(^RMPR(660,RMPRB,1)),U,4)
"RTN","RMPRN6",55,0)
 ..I $P(^RMPR(660,RMPRB,0),U,17)'=""&($P(^(0),U,26)="") S TY=2,LINE="R99 A",MR=2676
"RTN","RMPRN6",56,0)
 ..;PICKUP AND DELIVERY
"RTN","RMPRN6",57,0)
 ..I $P(^RMPR(660,RMPRB,0),U,26)'="" S TY=2,LINE="R80 D",MR=2951
"RTN","RMPRN6",58,0)
 ..Q:MR=""
"RTN","RMPRN6",59,0)
 ..;        PATCH 70             Auto-fix
"RTN","RMPRN6",60,0)
 ..K LINE
"RTN","RMPRN6",61,0)
 ..I TY'=2 S LINE=$P(^RMPR(661.1,MR,0),U,7)
"RTN","RMPRN6",62,0)
 ..I TY'=2&($G(LINE)="") D
"RTN","RMPRN6",63,0)
 ...; I TYPE=5 Q
"RTN","RMPRN6",64,0)
 ...S ERR=""
"RTN","RMPRN6",65,0)
 ...S LINE=$P(^RMPR(661.1,MR,0),U,6) S:MR=2676 LINE="R99 A"
"RTN","RMPRN6",66,0)
 ...S TYPE="X"
"RTN","RMPRN6",67,0)
 ...S DIE="^RMPR(660,",DA=RMPRB,DR="2///^S X=TYPE"
"RTN","RMPRN6",68,0)
 ...L +^RMPR(660,RMPRB):1 I '$T S ERR=1
"RTN","RMPRN6",69,0)
 ...I ERR="" D ^DIE L -^RMPR(660,RMPRB)
"RTN","RMPRN6",70,0)
 ...K DIE,DA,DR
"RTN","RMPRN6",71,0)
 ...I ERR=1 S ^TMP($J,"RMPRA",RMPRB)="NO UPDATE!"
"RTN","RMPRN6",72,0)
 ...I ERR="" S ^TMP($J,"RMPRA",RMPRB)="NEW TO REPAIR"
"RTN","RMPRN6",73,0)
 ...S B=RMPRB D DATA^RMPRN6XM
"RTN","RMPRN6",74,0)
 ..I TY=2 S LINE=$P(^RMPR(661.1,MR,0),U,6) S:MR=2676 LINE="R99 A"
"RTN","RMPRN6",75,0)
 ..I TY=2&($G(LINE)="") D
"RTN","RMPRN6",76,0)
 ...; I TYPE=5 Q
"RTN","RMPRN6",77,0)
 ...S ERR=""
"RTN","RMPRN6",78,0)
 ...S LINE=$P(^RMPR(661.1,MR,0),U,7)
"RTN","RMPRN6",79,0)
 ...S TYPE="I"
"RTN","RMPRN6",80,0)
 ...S DIE="^RMPR(660,",DA=RMPRB,DR="2///^S X=TYPE"
"RTN","RMPRN6",81,0)
 ...L +^RMPR(660,RMPRB):1 I '$T S ERR=1
"RTN","RMPRN6",82,0)
 ...I ERR="" D ^DIE L -^RMPR(660,RMPRB)
"RTN","RMPRN6",83,0)
 ...K DIE,DA,DR
"RTN","RMPRN6",84,0)
 ...I ERR=1 S ^TMP($J,"RMPRA",RMPRB)="NO UPDATE!"
"RTN","RMPRN6",85,0)
 ...I ERR="" S ^TMP($J,"RMPRA",RMPRB)="REPAIR TO NEW"
"RTN","RMPRN6",86,0)
 ...S B=RMPRB D DATA^RMPRN6XM
"RTN","RMPRN6",87,0)
 ..;
"RTN","RMPRN6",88,0)
 ..I LINE="" W !,"Line is null, something wrong with file 661.1  :",MR
"RTN","RMPRN6",89,0)
 ..;set to 999 group if null
"RTN","RMPRN6",90,0)
 ..S FLAG=$P(^RMPR(661.1,MR,0),U,8)
"RTN","RMPRN6",91,0)
 ..I FLAG="" S FLAG=2
"RTN","RMPRN6",92,0)
 ..S CATEGRY=$P($G(^RMPR(660,RMPRB,"AM")),U,3),SPEC=$P($G(^("AM")),U,4),GN=$P($G(^("AMS")),U,1)
"RTN","RMPRN6",93,0)
 ..Q:GN=""
"RTN","RMPRN6",94,0)
 ..D SET
"RTN","RMPRN6",95,0)
 D FMT^RMPRN6XM,MAIL^RMPRN6XM
"RTN","RMPRN6",96,0)
 Q
"RTN","RMPRN6",97,0)
GNPC ;worksheet/detail
"RTN","RMPRN6",98,0)
 S STN=RMPR("NAME")
"RTN","RMPRN6",99,0)
 D CAL^RMPRN6
"RTN","RMPRN6",100,0)
 S PAGE=0,FL=""
"RTN","RMPRN6",101,0)
 D ^RMPRN6PT
"RTN","RMPRN6",102,0)
 G:FL=1 EXIT
"RTN","RMPRN6",103,0)
 D ^RMPRN6PR
"RTN","RMPRN6",104,0)
 G:FL=1 EXIT
"RTN","RMPRN6",105,0)
 I RMPRDET<4 G EXIT
"RTN","RMPRN6",106,0)
 D DESP^RMPRN63
"RTN","RMPRN6",107,0)
 D DESPR^RMPRN63
"RTN","RMPRN6",108,0)
EXIT ;commom exit point
"RTN","RMPRN6",109,0)
 D ^%ZISC
"RTN","RMPRN6",110,0)
 N RMPR,RMPRSITE
"RTN","RMPRN6",111,0)
 K ^TMP($J) D KILL^XUSCLEAN
"RTN","RMPRN6",112,0)
 Q
"RTN","RMPRN6",113,0)
GNPCC ;one line only
"RTN","RMPRN6",114,0)
 S STN=RMPR("NAME")
"RTN","RMPRN6",115,0)
 D CODE^RMPRN63
"RTN","RMPRN6",116,0)
 D ^RMPRN6UT
"RTN","RMPRN6",117,0)
 G:$D(DIRUT)!($D(DTOUT)) EXIT
"RTN","RMPRN6",118,0)
 I $G(RMPRCDE)="" S RMPRCDE="",RMPRCDE=$O(BRA(Y,RMPRCDE))
"RTN","RMPRN6",119,0)
 S Y=DATE(1) D DD^%DT S DATE(3)=Y,Y=DATE(2) D DD^%DT S DATE(4)=Y
"RTN","RMPRN6",120,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT K IOP I $E(IOST,1,2)["C-" G PRTL
"RTN","RMPRN6",121,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE("RMPRSITE")="",ZTSAVE("RMPR(")=""
"RTN","RMPRN6",122,0)
 I  S ZTSAVE("DATE(")="",ZTSAVE("RMPRZ")="",ZTSAVE("RMPRDET")="",ZTSAVE("RMPRCDE")=""
"RTN","RMPRN6",123,0)
 I  S ZTRTN="PRTL^RMPRN6",ZTDESC="Prosthetic NPPD" D ^%ZTLOAD K ZTDESC,ZTIO,ZTRTN,ZTSAVE G EXIT
"RTN","RMPRN6",124,0)
PRTL ;print one line entry from taskman
"RTN","RMPRN6",125,0)
 I '$D(IO("Q")) U IO
"RTN","RMPRN6",126,0)
 D GNP
"RTN","RMPRN6",127,0)
 D CAL^RMPRN6
"RTN","RMPRN6",128,0)
 S PAGE=0,FL=""
"RTN","RMPRN6",129,0)
 S CODE=RMPRCDE
"RTN","RMPRN6",130,0)
 D DESP^RMPRN6PL
"RTN","RMPRN6",131,0)
 Q
"RTN","RMPRN6",132,0)
SET ;set temp global
"RTN","RMPRN6",133,0)
 S STN=RMPR("NAME")
"RTN","RMPRN6",134,0)
 S ^TMP($J,"RMPRGN",STN,GN,FLAG,LINE,RMPRB)=""
"RTN","RMPRN6",135,0)
 S RMSSN=$P(^RMPR(660,RMPRB,0),U,2) I RMSSN S RMSSN=$P(^DPT(RMSSN,0),U,9)
"RTN","RMPRN6",136,0)
 I RMSSN'="" S ^TMP($J,"A",RMSSN)=""
"RTN","RMPRN6",137,0)
 K RMSSN
"RTN","RMPRN6",138,0)
 Q
"RTN","RMPRN6",139,0)
 ;
"RTN","RMPRN6",140,0)
LOOP ;sort on hcpcs key and grouper is complete
"RTN","RMPRN6",141,0)
 ;store in tmp($j,"N",station) or "R"
"RTN","RMPRN6",142,0)
 S (TAM,T1,RMPRB,COUNT,CODE,RMPRAD,DATE,RMPRFG,RMPRT,RMPRI,RMPRNW,RMPRRPR)=0
"RTN","RMPRN6",143,0)
 S (TQTY,RMPROTH,CC,RMPRC,RMPRN,TT,RMPRPSC,VA,CM,RMPRCT1,SO,SI,DIS,RMPRCT,RMPR21,CODE,RMPRB,FM,LEG,RMPRNI,RMPRNO,RMPRSL,RMPRAA,RMPRPHC)=0
"RTN","RMPRN6",144,0)
 S DATE=DATE(1),RMPRB=0
"RTN","RMPRN6",145,0)
CAL ;loop through grouper key sort
"RTN","RMPRN6",146,0)
 S STN=RMPR("NAME")
"RTN","RMPRN6",147,0)
 D CODE^RMPRN63
"RTN","RMPRN6",148,0)
 S GN=""
"RTN","RMPRN6",149,0)
 F  S GN=$O(^TMP($J,"RMPRGN",STN,GN)) Q:GN=""  D
"RTN","RMPRN6",150,0)
 .S FLG=0
"RTN","RMPRN6",151,0)
 .F  S FLG=$O(^TMP($J,"RMPRGN",STN,GN,FLG)) Q:FLG'>0  D  I FLG=1&(RMPRDET'=2)!(RMPRDET'=5) Q
"RTN","RMPRN6",152,0)
 ..;used items never get grouped
"RTN","RMPRN6",153,0)
 ..I FLG=1&(RMPRDET'=2)&(RMPRDET'=5) D GROUP Q
"RTN","RMPRN6",154,0)
 ..;I FLG=1 D GROUP Q
"RTN","RMPRN6",155,0)
 ..S CODE=0
"RTN","RMPRN6",156,0)
 ..F  S CODE=$O(^TMP($J,"RMPRGN",STN,GN,FLG,CODE)) Q:CODE=""  D
"RTN","RMPRN6",157,0)
 ...S RD=0
"RTN","RMPRN6",158,0)
 ...F  S RD=$O(^TMP($J,"RMPRGN",STN,GN,FLG,CODE,RD)) Q:RD'>0  D
"RTN","RMPRN6",159,0)
 ....I RMPRDET=1!(RMPRDET=4) D SORT Q
"RTN","RMPRN6",160,0)
 ....I RMPRDET=2!(RMPRDET=5) D SORTUSED^RMPRN6S Q
"RTN","RMPRN6",161,0)
 ....I RMPRDET=3!(RMPRDET=6) D SORTBOTH^RMPRN6S Q
"RTN","RMPRN6",162,0)
 ....;D SORT
"RTN","RMPRN6",163,0)
 Q
"RTN","RMPRN6",164,0)
GROUP ;total grouper to main key
"RTN","RMPRN6",165,0)
 M BC=^TMP($J,"RMPRGN",STN,GN)
"RTN","RMPRN6",166,0)
 S BF=0,BTCOST=0,SRD=""
"RTN","RMPRN6",167,0)
 ;bc array is entrie PO 2421
"RTN","RMPRN6",168,0)
 F  S BF=$O(BC(BF)) Q:BF'>0  D
"RTN","RMPRN6",169,0)
 .;b1 is line,or code
"RTN","RMPRN6",170,0)
 .S BL=0
"RTN","RMPRN6",171,0)
 .F  S BL=$O(BC(BF,BL)) Q:BL=""  D
"RTN","RMPRN6",172,0)
 ..S BR=0
"RTN","RMPRN6",173,0)
 ..;BR is record number
"RTN","RMPRN6",174,0)
 ..F  S BR=$O(BC(BF,BL,BR)) Q:BR'>0  D
"RTN","RMPRN6",175,0)
 ...S BCOST=$P(^RMPR(660,BR,0),U,16)
"RTN","RMPRN6",176,0)
 ...S BTCOST=BTCOST+BCOST
"RTN","RMPRN6",177,0)
 ...I (BF=1)&(SRD="") S SRD=BR,CODE="",CODE=$O(BC(1,CODE))
"RTN","RMPRN6",178,0)
 K BC
"RTN","RMPRN6",179,0)
 Q:SRD=""
"RTN","RMPRN6",180,0)
 ;calculate based on primary
"RTN","RMPRN6",181,0)
 S TYPE=$P(^RMPR(660,SRD,0),U,4)
"RTN","RMPRN6",182,0)
 S TY=$S(TYPE="X":2,TYPE=5:2,TYPE="I":1,1:3)
"RTN","RMPRN6",183,0)
 S SOURCE=$P(^RMPR(660,SRD,0),U,14)
"RTN","RMPRN6",184,0)
 S COST=BTCOST
"RTN","RMPRN6",185,0)
 ;stock issue display and calculate zero used cost if VA source
"RTN","RMPRN6",186,0)
 I $P(^RMPR(660,SRD,1),U,5)'=""&(SOURCE["V") S BTCOST=0,COST=0
"RTN","RMPRN6",187,0)
 I $P(^RMPR(660,SRD,0),U,13)["-3" S COST=0,SOURCE="VA",BTCOST=0
"RTN","RMPRN6",188,0)
 S QTY=$P(^RMPR(660,SRD,0),U,7)
"RTN","RMPRN6",189,0)
 S ^TMP($J,CODE,SRD)=COST
"RTN","RMPRN6",190,0)
 S CATEGRY=$P($G(^RMPR(660,SRD,"AM")),U,3),SPEC=$P($G(^("AM")),U,4),GN=$P(^("AMS"),U,1)
"RTN","RMPRN6",191,0)
 ;new or repair code
"RTN","RMPRN6",192,0)
 S B1=SRD
"RTN","RMPRN6",193,0)
 I TY=2 D REP
"RTN","RMPRN6",194,0)
 I TY'=2 D NEW
"RTN","RMPRN6",195,0)
 Q
"RTN","RMPRN6",196,0)
SORT ;main data for worksheets
"RTN","RMPRN6",197,0)
 S TYPE=$P(^RMPR(660,RD,0),U,4)
"RTN","RMPRN6",198,0)
 S TY=$S(TYPE="X":2,TYPE=5:2,TYPE="I":1,1:3)
"RTN","RMPRN6",199,0)
 S SOURCE=$P(^RMPR(660,RD,0),U,14)
"RTN","RMPRN6",200,0)
 I SOURCE="" S SOURCE="C"
"RTN","RMPRN6",201,0)
 S CATEGRY=$P($G(^RMPR(660,RD,"AM")),U,3),SPEC=$P($G(^("AM")),U,4),GN=$P(^("AMS"),U,1)
"RTN","RMPRN6",202,0)
 S COST=$P(^RMPR(660,RD,0),U,16)
"RTN","RMPRN6",203,0)
 ;stock issue source VA, used cost calculation is zero
"RTN","RMPRN6",204,0)
 I $P(^RMPR(660,RD,1),U,5)'=""&(SOURCE["V") S COST=0
"RTN","RMPRN6",205,0)
 ;form
"RTN","RMPRN6",206,0)
 S FORM=$P(^RMPR(660,RD,0),U,13)
"RTN","RMPRN6",207,0)
 I (FORM=4)!(FORM=15) S COST=0,SOURCE="V"
"RTN","RMPRN6",208,0)
 S QTY=$P(^RMPR(660,RD,0),U,7)
"RTN","RMPRN6",209,0)
 S B1=RD
"RTN","RMPRN6",210,0)
 S ^TMP($J,CODE,RD)=COST
"RTN","RMPRN6",211,0)
 I TY=2 D REP
"RTN","RMPRN6",212,0)
 I TY'=2 D NEW
"RTN","RMPRN6",213,0)
 Q
"RTN","RMPRN6",214,0)
REP ;calculate repair cost
"RTN","RMPRN6",215,0)
 ;I $G(RD)'="" D
"RTN","RMPRN6",216,0)
 ;.S SSN=$P(^RMPR(660,RD,0),U,2) I SSN S SSN=$P(^DPT(SSN,0),U,9)
"RTN","RMPRN6",217,0)
 ;.I SSN'="" S ^TMP($J,"A",SSN)=""
"RTN","RMPRN6",218,0)
 ;.K SSN
"RTN","RMPRN6",219,0)
 S LINE=CODE
"RTN","RMPRN6",220,0)
 I LINE="R99 A" S SOURCE="C",QTY=1
"RTN","RMPRN6",221,0)
 I $G(^TMP($J,"R",STN,LINE))="" S ^TMP($J,"R",STN,LINE)=""
"RTN","RMPRN6",222,0)
 I SOURCE["V" S $P(^TMP($J,"R",STN,LINE),U,1)=$P(^TMP($J,"R",STN,LINE),U,1)+QTY
"RTN","RMPRN6",223,0)
 I SOURCE["C" S $P(^TMP($J,"R",STN,LINE),U,2)=$P(^TMP($J,"R",STN,LINE),U,2)+QTY
"RTN","RMPRN6",224,0)
 ;
"RTN","RMPRN6",225,0)
 S $P(^TMP($J,"R",STN,LINE),U,3)=$P(^TMP($J,"R",STN,LINE),U,3)+COST
"RTN","RMPRN6",226,0)
 I CATEGRY=1 S $P(^TMP($J,"R",STN,LINE),U,4)=$P(^TMP($J,"R",STN,LINE),U,4)+1
"RTN","RMPRN6",227,0)
 I CATEGRY=4 S $P(^TMP($J,"R",STN,LINE),U,5)=$P(^TMP($J,"R",STN,LINE),U,5)+1
"RTN","RMPRN6",228,0)
 I CATEGRY=2 S $P(^TMP($J,"R",STN,LINE),U,6)=$P(^TMP($J,"R",STN,LINE),U,6)+1
"RTN","RMPRN6",229,0)
 I CATEGRY=3 S $P(^TMP($J,"R",STN,LINE),U,7)=$P(^TMP($J,"R",STN,LINE),U,7)+1
"RTN","RMPRN6",230,0)
 I SPEC=1 S $P(^TMP($J,"R",STN,LINE),U,8)=$P(^TMP($J,"R",STN,LINE),U,8)+1
"RTN","RMPRN6",231,0)
 I SPEC=2 S $P(^TMP($J,"R",STN,LINE),U,9)=$P(^TMP($J,"R",STN,LINE),U,9)+1
"RTN","RMPRN6",232,0)
 I SPEC=3 S $P(^TMP($J,"R",STN,LINE),U,10)=$P(^TMP($J,"R",STN,LINE),U,10)+1
"RTN","RMPRN6",233,0)
 I SPEC=4 S $P(^TMP($J,"R",STN,LINE),U,11)=$P(^TMP($J,"R",STN,LINE),U,11)+1,$P(^(LINE),U,16)=$P(^(LINE),U,16)+COST
"RTN","RMPRN6",234,0)
 I TYPE="I" S $P(^TMP($J,"R",STN,LINE),U,12)=$P(^TMP($J,"R",STN,LINE),U,12)+1
"RTN","RMPRN6",235,0)
 Q
"RTN","RMPRN6",236,0)
 ;
"RTN","RMPRN6",237,0)
NEW ;calculate new costs
"RTN","RMPRN6",238,0)
 ;I $G(RD)'="" D
"RTN","RMPRN6",239,0)
 ;.S SSN=$P(^RMPR(660,RD,0),U,2) I SSN S SSN=$P(^DPT(SSN,0),U,9)
"RTN","RMPRN6",240,0)
 ;.I SSN'="" S ^TMP($J,"A",SSN)=""
"RTN","RMPRN6",241,0)
 ;.K SSN
"RTN","RMPRN6",242,0)
 S LINE=CODE
"RTN","RMPRN6",243,0)
 I $G(^TMP($J,"N",STN,LINE))="" S ^TMP($J,"N",STN,LINE)=""
"RTN","RMPRN6",244,0)
 I SOURCE["V" S $P(^TMP($J,"N",STN,LINE),U,1)=$P(^TMP($J,"N",STN,LINE),U,1)+QTY
"RTN","RMPRN6",245,0)
 I SOURCE["C" S $P(^TMP($J,"N",STN,LINE),U,2)=$P(^TMP($J,"N",STN,LINE),U,2)+QTY
"RTN","RMPRN6",246,0)
 S $P(^TMP($J,"N",STN,LINE),U,3)=$P(^TMP($J,"N",STN,LINE),U,3)+COST
"RTN","RMPRN6",247,0)
 I CATEGRY=1 S $P(^TMP($J,"N",STN,LINE),U,4)=$P(^TMP($J,"N",STN,LINE),U,4)+1
"RTN","RMPRN6",248,0)
 I CATEGRY=4 S $P(^TMP($J,"N",STN,LINE),U,5)=$P(^TMP($J,"N",STN,LINE),U,5)+1
"RTN","RMPRN6",249,0)
 I CATEGRY=2 S $P(^TMP($J,"N",STN,LINE),U,6)=$P(^TMP($J,"N",STN,LINE),U,6)+1
"RTN","RMPRN6",250,0)
 I CATEGRY=3 S $P(^TMP($J,"N",STN,LINE),U,7)=$P(^TMP($J,"N",STN,LINE),U,7)+1
"RTN","RMPRN6",251,0)
 I SPEC=1 S $P(^TMP($J,"N",STN,LINE),U,8)=$P(^TMP($J,"N",STN,LINE),U,8)+1
"RTN","RMPRN6",252,0)
 I SPEC=2 S $P(^TMP($J,"N",STN,LINE),U,9)=$P(^TMP($J,"N",STN,LINE),U,9)+1
"RTN","RMPRN6",253,0)
 I SPEC=3 S $P(^TMP($J,"N",STN,LINE),U,10)=$P(^TMP($J,"N",STN,LINE),U,10)+1
"RTN","RMPRN6",254,0)
 I SPEC=4 S $P(^TMP($J,"N",STN,LINE),U,11)=$P(^TMP($J,"N",STN,LINE),U,11)+1,$P(^(LINE),U,16)=$P(^(LINE),U,16)+COST
"RTN","RMPRN6",255,0)
 I TYPE="I" S $P(^TMP($J,"N",STN,LINE),U,12)=$P(^TMP($J,"N",STN,LINE),U,12)+1
"RTN","RMPRN6",256,0)
 Q
"RTN","RMPRN62")
0^7^B23510504^B22495461
"RTN","RMPRN62",1,0)
RMPRN62 ;Hines OIFO/HNC -NPPD CALCULATIONS ;02/14/98
"RTN","RMPRN62",2,0)
 ;;3.0;PROSTHETICS;**31,39,48,50,57,70,84,91,103,134,144**;Feb 09, 1996;Build 17
"RTN","RMPRN62",3,0)
 ;
"RTN","RMPRN62",4,0)
 ; ODJ - patch 50 - 7/28/00 - add line label REP to mark start of
"RTN","RMPRN62",5,0)
 ;                            repair lines.
"RTN","RMPRN62",6,0)
 ; HNC - patch 57 - 4/5/01 - add Dental Implant
"RTN","RMPRN62",7,0)
 ;
"RTN","RMPRN62",8,0)
 ; AAC - Patch 84 - 02-25-04; additions, deletions and change descriptions for Groups and lines
"RTN","RMPRN62",9,0)
 ; AAC - patch 84 - add new lines 100 H,100 I,400 H,900 N,910 B,R10 A,R10 B,R10 C,R60 D.
"RTN","RMPRN62",10,0)
 ; AAC - patch 84 - change desc -100 D,100 G,900 I,900 J,R20 B,R20 C,R91 F.
"RTN","RMPRN62",11,0)
 ;
"RTN","RMPRN62",12,0)
 ; AAC - Patch 91 - 06/23/04 -  NPPD line R10, no longer used, but keep in display as historical listing.
"RTN","RMPRN62",13,0)
 ;
"RTN","RMPRN62",14,0)
 ; AAC - Patch 103 - 01/17/05 - NPPD Categories/lines - New and Repair
"RTN","RMPRN62",15,0)
 ;
"RTN","RMPRN62",16,0)
 ; AAC - Patch 134 - 01/25/07 - NPPD Categories/lines - New and Repair
"RTN","RMPRN62",17,0)
 ;
"RTN","RMPRN62",18,0)
 ; AAC - patch 144 - 03/03/08 - NPPD Categories/lines - New and Repair
"RTN","RMPRN62",19,0)
 ;
"RTN","RMPRN62",20,0)
 ;build array or tmp
"RTN","RMPRN62",21,0)
DES ;description of line numbers
"RTN","RMPRN62",22,0)
 ;;100 A;MOTORIZED
"RTN","RMPRN62",23,0)
 ;;100 A1;SCOOTERS
"RTN","RMPRN62",24,0)
 ;;100 B;MANUAL CUSTOM
"RTN","RMPRN62",25,0)
 ;;100 C;STANDARD
"RTN","RMPRN62",26,0)
 ;;100 D;WC ACCESSORIES
"RTN","RMPRN62",27,0)
 ;;100 E;CUSHION FOAM
"RTN","RMPRN62",28,0)
 ;;100 F;CUSHION SPEC
"RTN","RMPRN62",29,0)
 ;;100 G;LIFTS(INCLUDING WC,SCOOTERS)
"RTN","RMPRN62",30,0)
 ;;100 H;NSC VAN MOD
"RTN","RMPRN62",31,0)
 ;;100 I;SCOOTER ACCESSORIES
"RTN","RMPRN62",32,0)
 ;;200 A;LEG IPOP
"RTN","RMPRN62",33,0)
 ;;200 B;LEG TEM
"RTN","RMPRN62",34,0)
 ;;200 C;LEG PART FOOT
"RTN","RMPRN62",35,0)
 ;;200 E;LEG SYMES
"RTN","RMPRN62",36,0)
 ;;200 F;LEG B/K
"RTN","RMPRN62",37,0)
 ;;200 G;LEG A/O
"RTN","RMPRN62",38,0)
 ;;200 H;LEG A/K
"RTN","RMPRN62",39,0)
 ;;200 I;LEG COMPONENT
"RTN","RMPRN62",40,0)
 ;;300 A;ARM B/E
"RTN","RMPRN62",41,0)
 ;;300 B;ARM A/E
"RTN","RMPRN62",42,0)
 ;;300 C;COSMETIC GLOVES
"RTN","RMPRN62",43,0)
 ;;300 D;ARM A/O
"RTN","RMPRN62",44,0)
 ;;300 E;TERMINAL DEVICES
"RTN","RMPRN62",45,0)
 ;;300 F;EXT.POWERED,ARM
"RTN","RMPRN62",46,0)
 ;;400 A;ORTHOSIS ANKLE
"RTN","RMPRN62",47,0)
 ;;400 B;ORTHOSIS LEG AK
"RTN","RMPRN62",48,0)
 ;;400 C;ORTHOSIS, SPINAL
"RTN","RMPRN62",49,0)
 ;;400 D;ORTHOSIS AL/OTH
"RTN","RMPRN62",50,0)
 ;;400 E;ELAS HOSE, EA
"RTN","RMPRN62",51,0)
 ;;400 F;ORTHOSIS, KNEE
"RTN","RMPRN62",52,0)
 ;;400 G;CORSET/BELT
"RTN","RMPRN62",53,0)
 ;;400 H;ORTHOSIS,WHO
"RTN","RMPRN62",54,0)
 ;;400 X;ORTHOSIS UNKNOWN
"RTN","RMPRN62",55,0)
 ;;500 A;ARCH SUPT, EA
"RTN","RMPRN62",56,0)
 ;;500 B;SHOE INLAY, EA
"RTN","RMPRN62",57,0)
 ;;500 C;SHOE MOLDED, EA
"RTN","RMPRN62",58,0)
 ;;500 D;SHOE ORTH OTH
"RTN","RMPRN62",59,0)
 ;;500 E;INSERTS, SHOE
"RTN","RMPRN62",60,0)
 ;;500 F;SHOES A/O, EA
"RTN","RMPRN62",61,0)
 ;;600 1;EYEGLASSES PR
"RTN","RMPRN62",62,0)
 ;;600 A;* NO LONGER USED *
"RTN","RMPRN62",63,0)
 ;;600 B;HEAR AID & ACCESS
"RTN","RMPRN62",64,0)
 ;;600 C;AID FOR BLIND
"RTN","RMPRN62",65,0)
 ;;600 D;CONT LENS, EA.
"RTN","RMPRN62",66,0)
 ;;600 E;EAR INSERT/MOLD
"RTN","RMPRN62",67,0)
 ;;600 F;ASSIST LISTEN DEVICES
"RTN","RMPRN62",68,0)
 ;;600 G;SPEECH DEVICES
"RTN","RMPRN62",69,0)
 ;;700 A;EYE
"RTN","RMPRN62",70,0)
 ;;700 B;FACIAL
"RTN","RMPRN62",71,0)
 ;;700 C;BODY, OTHER
"RTN","RMPRN62",72,0)
 ;;700 D;BREAST PROSTHESIS
"RTN","RMPRN62",73,0)
 ;;800 A;OXYGEN EQP
"RTN","RMPRN62",74,0)
 ;;800 B;OXYGEN CONCEN
"RTN","RMPRN62",75,0)
 ;;800 C;MOVED TO REPAIR
"RTN","RMPRN62",76,0)
 ;;800 D;OXYGEN, SUPPLIES
"RTN","RMPRN62",77,0)
 ;;800 E;MOVED TO REPAIR
"RTN","RMPRN62",78,0)
 ;;800 F;VENTILATOR, A/O
"RTN","RMPRN62",79,0)
 ;;800 G;RESPIRATORY EQUIPMENT
"RTN","RMPRN62",80,0)
 ;;800 H;RESPIRATORY SUPPLIES
"RTN","RMPRN62",81,0)
 ;;900 A;WALKING AIDS
"RTN","RMPRN62",82,0)
 ;;900 B;PATIENT LIFT
"RTN","RMPRN62",83,0)
 ;;900 C;BED HOSP STD
"RTN","RMPRN62",84,0)
 ;;900 D;BED HOSP SPEC
"RTN","RMPRN62",85,0)
 ;;900 E;MATTRESS STAN
"RTN","RMPRN62",86,0)
 ;;900 F;MATTRESS SPEC
"RTN","RMPRN62",87,0)
 ;;900 G;BED, ACCESSORIES
"RTN","RMPRN62",88,0)
 ;;900 H;ENVIRON CONTR
"RTN","RMPRN62",89,0)
 ;;900 I;HOME SAFETY EQUIPMENT
"RTN","RMPRN62",90,0)
 ;;900 J;INSTALLATION/LABOR
"RTN","RMPRN62",91,0)
 ;;900 K;MED EQP AL/OTH
"RTN","RMPRN62",92,0)
 ;;900 L;RECREATIONAL EQUIPMENT
"RTN","RMPRN62",93,0)
 ;;900 M;COMPUTER EQUIP
"RTN","RMPRN62",94,0)
 ;;900 N;TELEHEALTH
"RTN","RMPRN62",95,0)
 ;;910 A;MED SUP AL/OTH
"RTN","RMPRN62",96,0)
 ;;910 B;BATTERIES
"RTN","RMPRN62",97,0)
 ;;920 A;HOME DIAL EQP
"RTN","RMPRN62",98,0)
 ;;920 B;HOME DIAL SUP
"RTN","RMPRN62",99,0)
 ;;930 A;MOD VANS
"RTN","RMPRN62",100,0)
 ;;930 B;ADAPT EQP AL/OTH
"RTN","RMPRN62",101,0)
 ;;940 A;HISA SC
"RTN","RMPRN62",102,0)
 ;;940 B;HISA NSC
"RTN","RMPRN62",103,0)
 ;;960 A; H&N ALL OTHER
"RTN","RMPRN62",104,0)
 ;;960 A1; H&N INTRAOCULAR LENS
"RTN","RMPRN62",105,0)
 ;;960 A2; H&N HEAD
"RTN","RMPRN62",106,0)
 ;;960 A3; H&N NECK
"RTN","RMPRN62",107,0)
 ;;960 A4; H&N EYES A/O
"RTN","RMPRN62",108,0)
 ;;960 B; ABDOMEN ALL OTHER
"RTN","RMPRN62",109,0)
 ;;960 B1; ABDOMEN STENT
"RTN","RMPRN62",110,0)
 ;;960 B2; ABDOMEN MESH
"RTN","RMPRN62",111,0)
 ;;960 B3; ABDOMEN CATHETER
"RTN","RMPRN62",112,0)
 ;;960 C; UE ALL OTHER
"RTN","RMPRN62",113,0)
 ;;960 C1; UE ARM
"RTN","RMPRN62",114,0)
 ;;960 C2; UE SHOULDER
"RTN","RMPRN62",115,0)
 ;;960 C3; UE HAND
"RTN","RMPRN62",116,0)
 ;;960 D; LE ALL OTHER
"RTN","RMPRN62",117,0)
 ;;960 D1; LE HIP
"RTN","RMPRN62",118,0)
 ;;960 D2; LE KNEE
"RTN","RMPRN62",119,0)
 ;;960 D3; LE FOOT
"RTN","RMPRN62",120,0)
 ;;960 E; THORACIC ALL OTHER
"RTN","RMPRN62",121,0)
 ;;960 E1; THOR PACEMAKER/LEADS
"RTN","RMPRN62",122,0)
 ;;960 E2; THOR ICD/LEADS
"RTN","RMPRN62",123,0)
 ;;960 E3; THOR STENTS
"RTN","RMPRN62",124,0)
 ;;960 E4; THOR VALVES
"RTN","RMPRN62",125,0)
 ;;960 F; DENTAL IMPLANTS
"RTN","RMPRN62",126,0)
 ;;960 G; ALL SCRWS,PLTS,ANCRS,ETC.
"RTN","RMPRN62",127,0)
 ;;960 X; SI UNKNOWNS(ALL)
"RTN","RMPRN62",128,0)
 ;;970 A; BIOLOGICAL IMPLANTS 
"RTN","RMPRN62",129,0)
 ;;999 A;AL/OTH ITEMS
"RTN","RMPRN62",130,0)
 ;;999 P1;PEDS DME
"RTN","RMPRN62",131,0)
 ;;999 P2;ALL OTHER PEDS
"RTN","RMPRN62",132,0)
 ;;999 X;HCPCS NOT GRP
"RTN","RMPRN62",133,0)
 ;;999 Z;NO HCPCS
"RTN","RMPRN62",134,0)
REP ;;R10;* NO LONGER USED *
"RTN","RMPRN62",135,0)
 ;;R10 A;WHEELCHAIR
"RTN","RMPRN62",136,0)
 ;;R10 B;LIFTS
"RTN","RMPRN62",137,0)
 ;;R10 C;NSC VAN MOD
"RTN","RMPRN62",138,0)
 ;;R20 A;LEG A/K
"RTN","RMPRN62",139,0)
 ;;R20 B;* NO LONGER USED *
"RTN","RMPRN62",140,0)
 ;;R20 C;LEG B/K
"RTN","RMPRN62",141,0)
 ;;R20 D;LEG ALL OTHER 
"RTN","RMPRN62",142,0)
 ;;R30;ART ARM,TOTAL
"RTN","RMPRN62",143,0)
 ;;R40;ORTHOSIS TOTAL
"RTN","RMPRN62",144,0)
 ;;R50 A;ORTH SHOE ALL
"RTN","RMPRN62",145,0)
 ;;R50 B;SHOE MOD
"RTN","RMPRN62",146,0)
 ;;R50 C;A/O ITEM SERV
"RTN","RMPRN62",147,0)
 ;;R60 A;AID FOR BLIND
"RTN","RMPRN62",148,0)
 ;;R60 B;EYEGLASS RPR
"RTN","RMPRN62",149,0)
 ;;R60 C;HEAR AID & ACCESS
"RTN","RMPRN62",150,0)
 ;;R60 D;ASSISTIVE LISTENING DEVICES
"RTN","RMPRN62",151,0)
 ;;R70;HOME DIAL EQU
"RTN","RMPRN62",152,0)
 ;;R80 A;PATIENT LIFTS
"RTN","RMPRN62",153,0)
 ;;R80 B;REPAIR TO ECU
"RTN","RMPRN62",154,0)
 ;;R80 C;MED EQUIP A/O
"RTN","RMPRN62",155,0)
 ;;R80 D;HME DELIVERY/PU
"RTN","RMPRN62",156,0)
 ;;R80 E;TELEHEALTH
"RTN","RMPRN62",157,0)
 ;;R90;ALL OTHER
"RTN","RMPRN62",158,0)
 ;;R90 A;RECREATIONAL EQUIPMENT
"RTN","RMPRN62",159,0)
 ;;R90 B;TRAINING
"RTN","RMPRN62",160,0)
 ;;R91 A;CONCENTRATOR
"RTN","RMPRN62",161,0)
 ;;R91 B;VENTILATOR
"RTN","RMPRN62",162,0)
 ;;R91 C;EQUIPMENT A/O
"RTN","RMPRN62",163,0)
 ;;R91 D;SERVICE VISIT
"RTN","RMPRN62",164,0)
 ;;R91 E;COMPRESSED O2
"RTN","RMPRN62",165,0)
 ;;R91 F;LIQUID O2(LBS)
"RTN","RMPRN62",166,0)
 ;;R91 G;LIQUID DELIVERY SYSTEM
"RTN","RMPRN62",167,0)
 ;;R91 H;RESPIRATORY EQUIP
"RTN","RMPRN62",168,0)
 ;;R92 A;VAN MODS
"RTN","RMPRN62",169,0)
 ;;R92 B;AUTO ADPT EQUIP
"RTN","RMPRN62",170,0)
 ;;R99 A;SHIPPING
"RTN","RMPRN62",171,0)
 ;;R99 P;MISC PEDS
"RTN","RMPRN62",172,0)
 ;;R99 X;HCPCS NOT GRP
"RTN","RMPRN62",173,0)
 ;;R99 Z;NO HCPCS
"RTN","RMPRN62",174,0)
 ;;END
"RTN","RMPRN6PT")
0^11^B35875416^B34767275
"RTN","RMPRN6PT",1,0)
RMPRN6PT ;HINES/HNC -PRINT NPPD NEW WORKSHEETS ;2/14/98
"RTN","RMPRN6PT",2,0)
 ;;3.0;PROSTHETICS;**31,32,39,51,57,84,103,144**;Feb 09, 1996;Build 17
"RTN","RMPRN6PT",3,0)
 ;
"RTN","RMPRN6PT",4,0)
 ; AAC Patch 84, 02-25-04, additions, deletions and change descriptions for Groups and lines
"RTN","RMPRN6PT",5,0)
 ; AAC Patch 84, 02-25-04, Change Description for 600
"RTN","RMPRN6PT",6,0)
 ; AAC PATCH 103, 01-17-05 NPPD CATEGORIES/LINES -  NEW and REPAIR
"RTN","RMPRN6PT",7,0)
 ;
"RTN","RMPRN6PT",8,0)
 K ^TMP($J,"NS")
"RTN","RMPRN6PT",9,0)
 S STN=1
"RTN","RMPRN6PT",10,0)
 S SSNCT=0,BDC=0
"RTN","RMPRN6PT",11,0)
 F  S BDC=$O(^TMP($J,"A",BDC)) Q:BDC'>0  S SSNCT=SSNCT+1
"RTN","RMPRN6PT",12,0)
 K BDC,^TMP($J,"A")
"RTN","RMPRN6PT",13,0)
 F  S STN=$O(^TMP($J,"N",STN)) Q:STN=""  W:$E(IOST,1,2)="C-" @IOF D HDR,CDATA,SUM
"RTN","RMPRN6PT",14,0)
 Q
"RTN","RMPRN6PT",15,0)
HDR ;
"RTN","RMPRN6PT",16,0)
 ;W @IOF
"RTN","RMPRN6PT",17,0)
 W !,"REPORT OF NEW PROSTHETICS ACTIVITIES"
"RTN","RMPRN6PT",18,0)
 ;header based on sort select
"RTN","RMPRN6PT",19,0)
 W !,$$HDR^RMPRN6S(RMPRDET)
"RTN","RMPRN6PT",20,0)
 S Y=DATE(1) D DD^%DT S DATE(3)=Y W !,DATE(3)," - " S Y=DATE(2) D DD^%DT S DATE(4)=Y W DATE(4)
"RTN","RMPRN6PT",21,0)
 W !,?10,"STATION: ",STN
"RTN","RMPRN6PT",22,0)
 ;RMPRSUM if summary header
"RTN","RMPRN6PT",23,0)
 Q:$G(RMPRSUM)
"RTN","RMPRN6PT",24,0)
 W !!
"RTN","RMPRN6PT",25,0)
 W !,"Line",?6,"Item",?21,"VA",?26,"Com",?31,"Total",?37,"Cost",?46
"RTN","RMPRN6PT",26,0)
 W "Ave Com",?54
"RTN","RMPRN6PT",27,0)
 W "SC/OP",?61,"NSC/OP",?68,"SC/IP",?74,"NSC/IP"
"RTN","RMPRN6PT",28,0)
 I IOM>120 D
"RTN","RMPRN6PT",29,0)
 .W ?83,"SP LEG"
"RTN","RMPRN6PT",30,0)
 .W ?90,"A&A",?97,"PHC",?104,"ELG REF",?112,"NEW",?120,"$ELG REF"
"RTN","RMPRN6PT",31,0)
 Q
"RTN","RMPRN6PT",32,0)
CDATA ;
"RTN","RMPRN6PT",33,0)
 S LINE="",LINEP=""
"RTN","RMPRN6PT",34,0)
 S (CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM)=0
"RTN","RMPRN6PT",35,0)
 F  S LINE=$O(^TMP($J,"N",STN,LINE)) Q:LINE=""  Q:FL=1  D
"RTN","RMPRN6PT",36,0)
 .I $E(LINE,0,3)'=$E(LINEP,0,3) D SUM Q:FL=1  D LBL
"RTN","RMPRN6PT",37,0)
 .W !,LINE,?6,$E($P(^TMP($J,"N",STN,LINE),U,15),1,15)
"RTN","RMPRN6PT",38,0)
 .W ?21,$P(^TMP($J,"N",STN,LINE),U,1) S CA=CA+$P(^(LINE),U,1)
"RTN","RMPRN6PT",39,0)
 .W ?26,$P(^TMP($J,"N",STN,LINE),U,2) S CB=CB+$P(^(LINE),U,2)
"RTN","RMPRN6PT",40,0)
 .W ?31,$P(^TMP($J,"N",STN,LINE),U,1)+($P(^TMP($J,"N",STN,LINE),U,2))
"RTN","RMPRN6PT",41,0)
 .W ?37,$FN($J($P(^TMP($J,"N",STN,LINE),U,3),0,0),",") S CC=CC+$P(^(LINE),U,3)
"RTN","RMPRN6PT",42,0)
 .W:$P(^TMP($J,"N",STN,LINE),U,2)>0 ?46,$FN($J(($P(^(LINE),U,3))/($P(^(LINE),U,2)),0,0),",")
"RTN","RMPRN6PT",43,0)
 .W ?55,$P(^TMP($J,"N",STN,LINE),U,4) S CD=CD+$P(^(LINE),U,4)
"RTN","RMPRN6PT",44,0)
 .W ?62,$P(^TMP($J,"N",STN,LINE),U,5) S CE=CE+$P(^(LINE),U,5)
"RTN","RMPRN6PT",45,0)
 .W ?69,$P(^TMP($J,"N",STN,LINE),U,6) S CF=CF+$P(^(LINE),U,6)
"RTN","RMPRN6PT",46,0)
 .W ?76,$P(^TMP($J,"N",STN,LINE),U,7) S CG=CG+$P(^(LINE),U,7)
"RTN","RMPRN6PT",47,0)
 .S CH=CH+$P(^TMP($J,"N",STN,LINE),U,8)
"RTN","RMPRN6PT",48,0)
 .S CI=CI+$P(^TMP($J,"N",STN,LINE),U,9)
"RTN","RMPRN6PT",49,0)
 .S CJ=CJ+$P(^TMP($J,"N",STN,LINE),U,10)
"RTN","RMPRN6PT",50,0)
 .S CK=CK+$P(^TMP($J,"N",STN,LINE),U,11)
"RTN","RMPRN6PT",51,0)
 .S CL=CL+$P(^TMP($J,"N",STN,LINE),U,12)
"RTN","RMPRN6PT",52,0)
 .S CM=CM+$P(^TMP($J,"N",STN,LINE),U,16)
"RTN","RMPRN6PT",53,0)
 .I IOM>120 D
"RTN","RMPRN6PT",54,0)
 ..W ?83,$P(^TMP($J,"N",STN,LINE),U,8)
"RTN","RMPRN6PT",55,0)
 ..W ?90,$P(^TMP($J,"N",STN,LINE),U,9)
"RTN","RMPRN6PT",56,0)
 ..W ?97,$P(^TMP($J,"N",STN,LINE),U,10)
"RTN","RMPRN6PT",57,0)
 ..W ?104,$P(^TMP($J,"N",STN,LINE),U,11)
"RTN","RMPRN6PT",58,0)
 ..W ?112,$P(^TMP($J,"N",STN,LINE),U,12)
"RTN","RMPRN6PT",59,0)
 ..W ?120,$P(^TMP($J,"N",STN,LINE),U,16)
"RTN","RMPRN6PT",60,0)
 .S LINEP=LINE
"RTN","RMPRN6PT",61,0)
 Q
"RTN","RMPRN6PT",62,0)
SUM ;Print summary for group
"RTN","RMPRN6PT",63,0)
 Q:FL=1
"RTN","RMPRN6PT",64,0)
 I LINEP'="" D  Q:FL=1
"RTN","RMPRN6PT",65,0)
 .I $Y+13>IOSL,IOST["C-" D CHK Q:FL=1
"RTN","RMPRN6PT",66,0)
 .S GROUPT=CA_U_CB_U_(CA+CB)_U_$J(CC,0,0)_U_CD_U_CE_U_CF_U_CG_U_CH_U_CI_U_CJ_U_CK_U_CL_U_CM
"RTN","RMPRN6PT",67,0)
 .W !,LN,!
"RTN","RMPRN6PT",68,0)
 .W ?21,CA,?26,CB,?31,(CA+CB),?37,$FN($J(CC,0,0),","),?55,CD,?62,CE,?69,CF,?76,CG
"RTN","RMPRN6PT",69,0)
 .I IOM>120 W ?83,CH,?90,CI,?97,CJ,?104,CK,?112,CL,?120,CM
"RTN","RMPRN6PT",70,0)
 .W !
"RTN","RMPRN6PT",71,0)
 .D LBLG
"RTN","RMPRN6PT",72,0)
 .S ^TMP($J,"NS",STN,GROUP,STN)=GROUPT
"RTN","RMPRN6PT",73,0)
 .S (CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM)=0
"RTN","RMPRN6PT",74,0)
 Q:$G(LINEP)'="999 Z"
"RTN","RMPRN6PT",75,0)
 D FSUM S RMPRSUM=1 W @IOF D HDR K RMPRSUM
"RTN","RMPRN6PT",76,0)
 W !!,"STATION SUMMARY (NEW ACTIVITIES)"
"RTN","RMPRN6PT",77,0)
 ;W !,$$HDR^RMPRN6S(RMPRDET)
"RTN","RMPRN6PT",78,0)
 W !,?21,"VA",?31,"Com",?41,"Total",?51,"Cost",?61
"RTN","RMPRN6PT",79,0)
 W "Ave Com",?71,"Elg Ref $"
"RTN","RMPRN6PT",80,0)
 W !,LN
"RTN","RMPRN6PT",81,0)
 W !,?21,$FN(CA,","),?31,$FN(CB,","),?41,$FN((CA+CB),","),?51,"$"_$FN($J(CC,0,0),",")
"RTN","RMPRN6PT",82,0)
 I CB>0 W ?61,"$"_$FN($J((CC/CB),0,0),",")
"RTN","RMPRN6PT",83,0)
 I CM>0 W ?71,"$"_$FN($J(CM,0,0),",")
"RTN","RMPRN6PT",84,0)
 W !,LN,!!
"RTN","RMPRN6PT",85,0)
 W ?21,"SC/OP",?31,"NSC/OP",?41,"SC/IP",?51,"NSC/IP"
"RTN","RMPRN6PT",86,0)
 W !,LN,!,?21,CD,?31,CE,?41,CF,?51,CG
"RTN","RMPRN6PT",87,0)
 W !,LN
"RTN","RMPRN6PT",88,0)
 W !,?21,"SPEC LEG",?31,"A&A",?41,"PHC",?51,"ELG REF",?61,"NEW"
"RTN","RMPRN6PT",89,0)
 W !,LN,!,?21,CH,?31,CI,?41,CJ,?51,CK,?61,CL,!,LN
"RTN","RMPRN6PT",90,0)
 W !,?21,"Total Disability: ",$FN((CD+CE+CF+CG),","),?47,"Unique SSN: ",SSNCT,!
"RTN","RMPRN6PT",91,0)
 S (CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM)=0
"RTN","RMPRN6PT",92,0)
 I IOST["C-" D CHK
"RTN","RMPRN6PT",93,0)
 Q
"RTN","RMPRN6PT",94,0)
LBLG ;group description for final summary
"RTN","RMPRN6PT",95,0)
 I $E(LINEP,0,3)=100 S GROUP=$E(LINEP,0,3)_" WHEELCHAIRS AND ACCESSORIES"
"RTN","RMPRN6PT",96,0)
 I $E(LINEP,0,3)=200 S GROUP=$E(LINEP,0,3)_" ARTIFICIAL LEGS"
"RTN","RMPRN6PT",97,0)
 I $E(LINEP,0,3)=300 S GROUP=$E(LINEP,0,3)_" ARTIFICIAL ARMS AND TERMINAL DEVICES"
"RTN","RMPRN6PT",98,0)
 I $E(LINEP,0,3)=400 S GROUP=$E(LINEP,0,3)_" ORTHOSIS/ORTHOTICS"
"RTN","RMPRN6PT",99,0)
 I $E(LINEP,0,3)=500 S GROUP=$E(LINEP,0,3)_" SHOES/ORTHOTICS"
"RTN","RMPRN6PT",100,0)
 I $E(LINEP,0,3)=600 S GROUP=$E(LINEP,0,3)_" SENSORI-NEURO AIDS"
"RTN","RMPRN6PT",101,0)
 I $E(LINEP,0,3)=700 S GROUP=$E(LINEP,0,3)_" RESTORATIONS"
"RTN","RMPRN6PT",102,0)
 I $E(LINEP,0,3)=800 S GROUP=$E(LINEP,0,3)_" OXYGEN AND RESPIRATORY"
"RTN","RMPRN6PT",103,0)
 I $E(LINEP,0,3)=900 S GROUP=$E(LINEP,0,3)_" MEDICAL EQUIPMENT"
"RTN","RMPRN6PT",104,0)
 I $E(LINEP,0,3)=910 S GROUP=$E(LINEP,0,3)_" ALL OTHER SUPPLIES AND EQUIPMENT"
"RTN","RMPRN6PT",105,0)
 I $E(LINEP,0,3)=920 S GROUP=$E(LINEP,0,3)_" HOME DIALYSIS PROGRAM"
"RTN","RMPRN6PT",106,0)
 I $E(LINEP,0,3)=930 S GROUP=$E(LINEP,0,3)_" ADAPTIVE EQUIPMENT"
"RTN","RMPRN6PT",107,0)
 I $E(LINEP,0,3)=940 S GROUP=$E(LINEP,0,3)_" HISA"
"RTN","RMPRN6PT",108,0)
 I $E(LINEP,0,3)=960 S GROUP=$E(LINEP,0,3)_" SURGICAL IMPLANTS"
"RTN","RMPRN6PT",109,0)
 I $E(LINEP,0,3)=970 S GROUP=$E(LINEP,0,3)_" BIOLOGICAL IMPLANTS"
"RTN","RMPRN6PT",110,0)
 I $E(LINEP,0,3)=999 S GROUP=$E(LINEP,0,3)_" MISC"
"RTN","RMPRN6PT",111,0)
 Q
"RTN","RMPRN6PT",112,0)
LBL ;label for group
"RTN","RMPRN6PT",113,0)
 I $E(LINE,0,3)=100 W !,"WHEELCHAIRS AND ACCESSORIES"
"RTN","RMPRN6PT",114,0)
 I $E(LINE,0,3)=200 W !,"ARTIFICIAL LEGS"
"RTN","RMPRN6PT",115,0)
 I $E(LINE,0,3)=300 W !,"ARTIFICIAL ARMS AND TERMINAL DEVICES"
"RTN","RMPRN6PT",116,0)
 I $E(LINE,0,3)=400 W !,"ORTHOSIS/ORTHOTICS"
"RTN","RMPRN6PT",117,0)
 I $E(LINE,0,3)=500,IOST'["C-" W @IOF D HDR W !,"SHOES/ORTHOTICS"
"RTN","RMPRN6PT",118,0)
 I $E(LINE,0,3)=500,IOST["C-" W !,"SHOES/ORTHOTICS"
"RTN","RMPRN6PT",119,0)
 I $E(LINE,0,3)=600 W !,"SENSORI-NEURO AIDS"
"RTN","RMPRN6PT",120,0)
 I $E(LINE,0,3)=700 W !,"RESTORATIONS"
"RTN","RMPRN6PT",121,0)
 I $E(LINE,0,3)=800 W !,"OXYGEN AND RESPIRATORY"
"RTN","RMPRN6PT",122,0)
 I $E(LINE,0,3)=900,IOST'["C-" W @IOF D HDR W !,"MEDICAL EQUIPMENT"
"RTN","RMPRN6PT",123,0)
 I $E(LINE,0,3)=900,IOST["C-" W !,"MEDICAL EQUIPMENT"
"RTN","RMPRN6PT",124,0)
 I $E(LINE,0,3)=910 W !,"ALL OTHER SUPPLIES AND EQUIPMENT"
"RTN","RMPRN6PT",125,0)
 I $E(LINE,0,3)=920 W !,"HOME DIALYSIS PROGRAM"
"RTN","RMPRN6PT",126,0)
 I $E(LINE,0,3)=930 W !,"ADAPTIVE EQUIPMENT"
"RTN","RMPRN6PT",127,0)
 I $E(LINE,0,3)=940 W !,"HISA"
"RTN","RMPRN6PT",128,0)
 I $E(LINE,0,3)=960 W !,"SURGICAL IMPLANTS"
"RTN","RMPRN6PT",129,0)
 I $E(LINE,0,3)=970 W !,"BIOLOGICAL IMPLANTS"
"RTN","RMPRN6PT",130,0)
 I $E(LINE,0,3)=999,IOST'["C-" W @IOF D HDR W !,"MISC"
"RTN","RMPRN6PT",131,0)
 I $E(LINE,0,3)=999,IOST["C-" W !,"MISC"
"RTN","RMPRN6PT",132,0)
 Q
"RTN","RMPRN6PT",133,0)
FSUM ;final summay on New Worksheets STATION
"RTN","RMPRN6PT",134,0)
 S H=0
"RTN","RMPRN6PT",135,0)
 F  S H=$O(^TMP($J,"NS",STN,H)) Q:H=""  D
"RTN","RMPRN6PT",136,0)
 .S H1=0,H2=0
"RTN","RMPRN6PT",137,0)
 .F  S H1=$O(^TMP($J,"NS",STN,H,H1)) Q:H1=""  D
"RTN","RMPRN6PT",138,0)
 ..Q:H1'=STN
"RTN","RMPRN6PT",139,0)
 ..S H2=^TMP($J,"NS",STN,H,H1)
"RTN","RMPRN6PT",140,0)
 ..S CA=CA+$P(H2,U,1)
"RTN","RMPRN6PT",141,0)
 ..S CB=CB+$P(H2,U,2)
"RTN","RMPRN6PT",142,0)
 ..S CC=CC+$P(H2,U,4)
"RTN","RMPRN6PT",143,0)
 ..S CD=CD+$P(H2,U,5)
"RTN","RMPRN6PT",144,0)
 ..S CE=CE+$P(H2,U,6)
"RTN","RMPRN6PT",145,0)
 ..S CF=CF+$P(H2,U,7)
"RTN","RMPRN6PT",146,0)
 ..S CG=CG+$P(H2,U,8)
"RTN","RMPRN6PT",147,0)
 ..S CH=CH+$P(H2,U,9)
"RTN","RMPRN6PT",148,0)
 ..S CI=CI+$P(H2,U,10)
"RTN","RMPRN6PT",149,0)
 ..S CJ=CJ+$P(H2,U,11)
"RTN","RMPRN6PT",150,0)
 ..S CK=CK+$P(H2,U,12)
"RTN","RMPRN6PT",151,0)
 ..S CL=CL+$P(H2,U,13)
"RTN","RMPRN6PT",152,0)
 ..S CM=CM+$P(H2,U,14)
"RTN","RMPRN6PT",153,0)
 Q
"RTN","RMPRN6PT",154,0)
CHK ;
"RTN","RMPRN6PT",155,0)
 K DIR W !! S DIR(0)="E" D ^DIR S:+Y'>0 FL=1
"RTN","RMPRN6PT",156,0)
 W @IOF
"RTN","RMPRN6PT",157,0)
 Q
"RTN","RMPRN6PT",158,0)
 ;END
"RTN","RMPRN6UT")
0^9^B7282554^B6997890
"RTN","RMPRN6UT",1,0)
RMPRN6UT ;HINES-CIOFO/HNC - DISPLAY HEADER GROUPS NPPD;2-14-98
"RTN","RMPRN6UT",2,0)
 ;;3.0;PROSTHETICS;**32,36,39,44,48,50,57,84,103,144**;Feb 09, 1996;Build 17
"RTN","RMPRN6UT",3,0)
 ;
"RTN","RMPRN6UT",4,0)
 ; ODJ - patch 50 - 7/28/00 - amend repair selection so that we don't
"RTN","RMPRN6UT",5,0)
 ;                            need to alter this routine for NPPD line
"RTN","RMPRN6UT",6,0)
 ;                            changes made in RMPRN62
"RTN","RMPRN6UT",7,0)
 ; AAC - PATCH 103 - 01/17/05 - NPPD CATEGORIES/LINES - NEW and REPAIR
"RTN","RMPRN6UT",8,0)
 ;
"RTN","RMPRN6UT",9,0)
 ;;
"RTN","RMPRN6UT",10,0)
DIS W !,?5,"1.   WHEELCHAIRS AND ACCESSORIES"
"RTN","RMPRN6UT",11,0)
 W !,?5,"2.   ARTIFICIAL LEGS"
"RTN","RMPRN6UT",12,0)
 W !,?5,"3.   ARTIFICIAL ARMS AND TERMINAL DEVICES"
"RTN","RMPRN6UT",13,0)
 W !,?5,"4.   ORTHOSIS/ORTHOTICS"
"RTN","RMPRN6UT",14,0)
 W !,?5,"5.   SHOES/ORTHOTICS"
"RTN","RMPRN6UT",15,0)
 W !,?5,"6.   SENSORI-NEURO AIDS"
"RTN","RMPRN6UT",16,0)
 W !,?5,"7.   RESTORATIONS"
"RTN","RMPRN6UT",17,0)
 W !,?5,"8.   OXYGEN AND RESPIRATORY"
"RTN","RMPRN6UT",18,0)
 W !,?5,"9.   MEDICAL EQUIPMENT"
"RTN","RMPRN6UT",19,0)
 W !,?5,"10.  ALL OTHER SUPPLIES AND EQUIPMENT"
"RTN","RMPRN6UT",20,0)
 W !,?5,"11.  HOME DIALYSIS PROGRAM"
"RTN","RMPRN6UT",21,0)
 W !,?5,"12.  ADAPTIVE EQUIPMENT"
"RTN","RMPRN6UT",22,0)
 W !,?5,"13.  HISA"
"RTN","RMPRN6UT",23,0)
 W !,?5,"14.  SURGICAL IMPLANTS"
"RTN","RMPRN6UT",24,0)
 W !,?5,"15.  MISC"
"RTN","RMPRN6UT",25,0)
 W !,?5,"16.  REPAIR"
"RTN","RMPRN6UT",26,0)
 W !,?5,"17.  BIOLOGICAL IMPLANTS"
"RTN","RMPRN6UT",27,0)
ASK ;
"RTN","RMPRN6UT",28,0)
 K DIR,DTOUT,DIRUT
"RTN","RMPRN6UT",29,0)
 S RMPRCDE=""
"RTN","RMPRN6UT",30,0)
 S DIR(0)="N^1:17:0"
"RTN","RMPRN6UT",31,0)
 S DIR("A")="Select NPPD Group "
"RTN","RMPRN6UT",32,0)
 D ^DIR
"RTN","RMPRN6UT",33,0)
 G:$D(DIRUT)!($D(DTOUT)) EXIT
"RTN","RMPRN6UT",34,0)
 S BR=0,BRC=0 K BRA W @IOF
"RTN","RMPRN6UT",35,0)
 I Y=1 S SELY=10
"RTN","RMPRN6UT",36,0)
 I Y=2 S SELY=20
"RTN","RMPRN6UT",37,0)
 I Y=3 S SELY=30
"RTN","RMPRN6UT",38,0)
 I Y=4 S SELY=40
"RTN","RMPRN6UT",39,0)
 I Y=5 S SELY=50
"RTN","RMPRN6UT",40,0)
 I Y=6 S SELY=60
"RTN","RMPRN6UT",41,0)
 I Y=7 S SELY=70
"RTN","RMPRN6UT",42,0)
 I Y=8 S SELY=80
"RTN","RMPRN6UT",43,0)
 I Y=9 S SELY=90
"RTN","RMPRN6UT",44,0)
 I Y=10 S SELY=91
"RTN","RMPRN6UT",45,0)
 I Y=11 S SELY=92
"RTN","RMPRN6UT",46,0)
 I Y=12 S SELY=93
"RTN","RMPRN6UT",47,0)
 I Y=13 S SELY=94
"RTN","RMPRN6UT",48,0)
 I Y=14 S SELY=96
"RTN","RMPRN6UT",49,0)
 I Y=15 S SELY=99
"RTN","RMPRN6UT",50,0)
 I Y=16 S SELY=100
"RTN","RMPRN6UT",51,0)
 I Y=17 S SELY=97
"RTN","RMPRN6UT",52,0)
 F  S BR=$O(^TMP($J,"RMPRCODE",BR)) Q:BR=""  D
"RTN","RMPRN6UT",53,0)
 .I $E(BR,1,2)=SELY S BRC=BRC+1 W !?5,BRC_".",?10,BR,?18,^(BR) S BRA(BRC,BR)=""
"RTN","RMPRN6UT",54,0)
 .Q
"RTN","RMPRN6UT",55,0)
 I SELY=100 D
"RTN","RMPRN6UT",56,0)
 . D RSEL
"RTN","RMPRN6UT",57,0)
 . Q
"RTN","RMPRN6UT",58,0)
 E  D
"RTN","RMPRN6UT",59,0)
 . D NSEL
"RTN","RMPRN6UT",60,0)
 . Q
"RTN","RMPRN6UT",61,0)
 G:$D(DIRUT)!($D(DTOUT)) EXIT
"RTN","RMPRN6UT",62,0)
 Q
"RTN","RMPRN6UT",63,0)
RSEL ;repair selection
"RTN","RMPRN6UT",64,0)
 N CNT,Y,OFFS,TXT,I
"RTN","RMPRN6UT",65,0)
 S CNT=$P(^TMP($J,"RMPRCODE"),U,2) ; num of NPPD repair lines
"RTN","RMPRN6UT",66,0)
 S OFFS=CNT-(CNT\2)-1
"RTN","RMPRN6UT",67,0)
 F I=0:1:OFFS D
"RTN","RMPRN6UT",68,0)
 . S TXT=$P($T(REP+I^RMPRN62),";;",2)
"RTN","RMPRN6UT",69,0)
 . W !,$J(I+1,2)_".",?5,$P(TXT,";",1),?14,$P(TXT,";",2)
"RTN","RMPRN6UT",70,0)
 . S TXT=$P($T(REP+I+OFFS+1^RMPRN62),";;",2)
"RTN","RMPRN6UT",71,0)
 . Q:$E(TXT)'="R"
"RTN","RMPRN6UT",72,0)
 . W ?35,$J(I+2+OFFS,2)_".",?40,$P(TXT,";",1),?51,$P(TXT,";",2)
"RTN","RMPRN6UT",73,0)
 . Q
"RTN","RMPRN6UT",74,0)
 F I=OFFS:1:17 W !
"RTN","RMPRN6UT",75,0)
 S DIR(0)="N^1:"_CNT_":0"
"RTN","RMPRN6UT",76,0)
 S DIR("A")="Select NPPD Line "
"RTN","RMPRN6UT",77,0)
 D ^DIR
"RTN","RMPRN6UT",78,0)
 Q:$D(DIRUT)!($D(DTOUT))
"RTN","RMPRN6UT",79,0)
 S TXT=$P($T(REP+Y-1^RMPRN62),";;",2)
"RTN","RMPRN6UT",80,0)
 S RMPRCDE=$P(TXT,";",1)
"RTN","RMPRN6UT",81,0)
 Q
"RTN","RMPRN6UT",82,0)
NSEL ;new select
"RTN","RMPRN6UT",83,0)
 I BR'="" W "QUIT" Q
"RTN","RMPRN6UT",84,0)
 W !
"RTN","RMPRN6UT",85,0)
 S DIR(0)="N^1:"_BRC_":0"
"RTN","RMPRN6UT",86,0)
 S DIR("A")="Select NPPD Line "
"RTN","RMPRN6UT",87,0)
 D ^DIR
"RTN","RMPRN6UT",88,0)
 Q:$D(DIRUT)!($D(DTOUT))
"RTN","RMPRN6UT",89,0)
 S RMPRCDE=$O(BRA(Y,RMPRCDE))
"RTN","RMPRN6UT",90,0)
 Q
"RTN","RMPRN6UT",91,0)
EXIT ;exit on ^ or timeout
"RTN","RMPRN6UT",92,0)
 K ^TMP($J)
"RTN","RMPRN6UT",93,0)
 Q
"RTN","RMPRN6UT",94,0)
 ;END
"RTN","RMPRN7")
0^6^B75175196^B74857178
"RTN","RMPRN7",1,0)
RMPRN7 ;Hines OIFO/HNC-PRINT NPPD LOCAL DATA ;9/16/02  11:35
"RTN","RMPRN7",2,0)
 ;;3.0;PROSTHETICS;**57,70,90,144**;Feb 09, 1996;Build 17
"RTN","RMPRN7",3,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPRN7",4,0)
DATE S %DT="XEA",%DT("A")="Enter Date to Start NPPD Calculations From: " D ^%DT G:X[U!(X="")!($D(DTOUT)) EXIT
"RTN","RMPRN7",5,0)
 S DATE(1)=+Y
"RTN","RMPRN7",6,0)
 S %DT="XEA",%DT("A")="Enter End Date: " D ^%DT G:X[U!(X="")!($D(DTOUT)) EXIT S DATE(2)=+Y
"RTN","RMPRN7",7,0)
 I DATE(1)>DATE(2) W !!,$C(7),"ENDING DATE RANGE IS LESS THAN BEGINNING DATE RANGE",! G DATE
"RTN","RMPRN7",8,0)
 Q:$D(RMPRCDE)
"RTN","RMPRN7",9,0)
DET ;select detail or brief
"RTN","RMPRN7",10,0)
 D DISP^RMPRN7S
"RTN","RMPRN7",11,0)
 K DIR
"RTN","RMPRN7",12,0)
 S DIR(0)="S^D:DETAIL;B:BRIEF"
"RTN","RMPRN7",13,0)
 S DIR("A")="Type of Report",DIR("B")="DETAIL" D ^DIR
"RTN","RMPRN7",14,0)
 Q:$D(DIRUT)!($D(DTOUT))
"RTN","RMPRN7",15,0)
 S RMPRDET=Y
"RTN","RMPRN7",16,0)
DEV ;device
"RTN","RMPRN7",17,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT K IOP I $E(IOST,1,2)["C-" G PRT
"RTN","RMPRN7",18,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE("RMPRSITE")="",ZTSAVE("RMPR(")=""
"RTN","RMPRN7",19,0)
 I  S ZTSAVE("DATE(")="",ZTSAVE("RMPRZ")="",ZTSAVE("RMPRDET")=""
"RTN","RMPRN7",20,0)
 I  S ZTRTN="PRT^RMPRN7",ZTDESC="Prosthetic 2529-3 NPPD" D ^%ZTLOAD K ZTDESC,ZTIO,ZTRTN,ZTSAVE G EXIT
"RTN","RMPRN7",21,0)
PRT ;print
"RTN","RMPRN7",22,0)
 I '$D(IO("Q")) U IO
"RTN","RMPRN7",23,0)
 D GNP,GNPC
"RTN","RMPRN7",24,0)
 Q
"RTN","RMPRN7",25,0)
ENL ;entry point for one line
"RTN","RMPRN7",26,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPRN7",27,0)
 S RMPRCDE=1
"RTN","RMPRN7",28,0)
 D DATE
"RTN","RMPRN7",29,0)
 G:'$D(DATE(1))!('$D(DATE(2))) EXIT
"RTN","RMPRN7",30,0)
 ;single line always new and used (BOTH) sort
"RTN","RMPRN7",31,0)
 S RMPRDET="D"
"RTN","RMPRN7",32,0)
 D GNPCC,EXIT
"RTN","RMPRN7",33,0)
 Q
"RTN","RMPRN7",34,0)
GNP ;gather nppd data
"RTN","RMPRN7",35,0)
 S $P(LN,"-",IOM)=""
"RTN","RMPRN7",36,0)
 S DATE=DATE(1)-1
"RTN","RMPRN7",37,0)
 K ^TMP($J)
"RTN","RMPRN7",38,0)
 F  S DATE=$O(^RMPR(660,"B",DATE)) Q:(DATE="")!($P(DATE,".",1)>DATE(2))  D
"RTN","RMPRN7",39,0)
 .S RMPRB=0
"RTN","RMPRN7",40,0)
 .F  S RMPRB=$O(^RMPR(660,"B",DATE,RMPRB)) Q:RMPRB'>0  D
"RTN","RMPRN7",41,0)
 ..;define variables for record
"RTN","RMPRN7",42,0)
 ..S REC=$G(^RMPR(660,RMPRB,0)) Q:REC=""
"RTN","RMPRN7",43,0)
 ..Q:$P(REC,U,15)["*"
"RTN","RMPRN7",44,0)
 ..Q:$P(REC,U,10)'=RMPR("STA")
"RTN","RMPRN7",45,0)
 ..;check for used pip
"RTN","RMPRN7",46,0)
 ..;if not LAB, quit
"RTN","RMPRN7",47,0)
 ..I $P(REC,U,13)'=15&($P(REC,U,13)'=4) Q
"RTN","RMPRN7",48,0)
 ..S TYPE=$P(REC,U,4)
"RTN","RMPRN7",49,0)
 ..S TY=$S(TYPE="X":2,TYPE=5:2,TYPE="I":1,1:3)
"RTN","RMPRN7",50,0)
 ..S MR=$P($G(^RMPR(660,RMPRB,1)),U,4)
"RTN","RMPRN7",51,0)
 ..I $P(^RMPR(660,RMPRB,0),U,17)'=""&($P(^(0),U,26)="") S TY=2,LINE="R99 A",MR=2676
"RTN","RMPRN7",52,0)
 ..;PICKUP AND DELIVERY
"RTN","RMPRN7",53,0)
 ..I $P(^RMPR(660,RMPRB,0),U,26)'="" S TY=2,LINE="R80 D",MR=2951
"RTN","RMPRN7",54,0)
 ..Q:MR=""
"RTN","RMPRN7",55,0)
 ..;    PATCH 70         Auto-fix
"RTN","RMPRN7",56,0)
 ..K LINE
"RTN","RMPRN7",57,0)
 ..I TY'=2 S LINE=$P(^RMPR(661.1,MR,0),U,7)
"RTN","RMPRN7",58,0)
 ..I TY'=2&($G(LINE)="") D
"RTN","RMPRN7",59,0)
 ...I TYPE=5 Q
"RTN","RMPRN7",60,0)
 ...S ERR=""
"RTN","RMPRN7",61,0)
 ...S LINE=$P(^RMPR(661.1,MR,0),U,6) S:MR=2676 LINE="R99 A"
"RTN","RMPRN7",62,0)
 ...S TYPE="X"
"RTN","RMPRN7",63,0)
 ...S DIE="^RMPR(660,",DA=RMPRB,DR="2///^S X=TYPE"
"RTN","RMPRN7",64,0)
 ...L +^RMPR(660,RMPRB):1 I '$T S ERR=1
"RTN","RMPRN7",65,0)
 ...I ERR="" D ^DIE L -^RMPR(660,RMPRB)
"RTN","RMPRN7",66,0)
 ...K DIE,DA,DR
"RTN","RMPRN7",67,0)
 ...I ERR=1 S ^TMP($J,RMPRB)="NO UPDATE!"
"RTN","RMPRN7",68,0)
 ...S ^TMP($J,RMPRB)="NEW TO REPAIR"
"RTN","RMPRN7",69,0)
 ...S B=RMPRB D DATA^RMPRN6XM
"RTN","RMPRN7",70,0)
 ..I TY=2 S LINE=$P(^RMPR(661.1,MR,0),U,6) S:MR=2676 LINE="R99 A"
"RTN","RMPRN7",71,0)
 ..I TY=2&($G(LINE)="") D
"RTN","RMPRN7",72,0)
 ...I TYPE=5 Q
"RTN","RMPRN7",73,0)
 ...S ERR=""
"RTN","RMPRN7",74,0)
 ...S LINE=$P(^RMPR(661.1,MR,0),U,7)
"RTN","RMPRN7",75,0)
 ...S TYPE="I"
"RTN","RMPRN7",76,0)
 ...S DIE="^RMPR(660,",DA=RMPRB,DR="2///^S X=TYPE"
"RTN","RMPRN7",77,0)
 ...L +^RMPR(660,RMPRB):1 I '$T S ERR=1
"RTN","RMPRN7",78,0)
 ...I ERR="" D ^DIE L -^RMPR(660,RMPRB)
"RTN","RMPRN7",79,0)
 ...K DIE,DA,DR
"RTN","RMPRN7",80,0)
 ...I ERR=1 S ^TMP($J,RMPRB)="NO UPDATE!"
"RTN","RMPRN7",81,0)
 ...S ^TMP($J,"RMPRA",RMPRB)="REPAIR TO NEW"
"RTN","RMPRN7",82,0)
 ...S B=RMPRB D DATA^RMPRN6XM
"RTN","RMPRN7",83,0)
 ..;
"RTN","RMPRN7",84,0)
 ..;set to 999 group if null
"RTN","RMPRN7",85,0)
 ..S FLAG=$P(^RMPR(661.1,MR,0),U,8)
"RTN","RMPRN7",86,0)
 ..I FLAG="" S FLAG=2
"RTN","RMPRN7",87,0)
 ..S CATEGRY=$P($G(^RMPR(660,RMPRB,"AM")),U,3),SPEC=$P($G(^("AM")),U,4),GN=$P($G(^("AMS")),U,1)
"RTN","RMPRN7",88,0)
 ..Q:GN=""
"RTN","RMPRN7",89,0)
 ..D SET
"RTN","RMPRN7",90,0)
 D FMT^RMPRN6XM,MAIL^RMPRN6XM
"RTN","RMPRN7",91,0)
 Q
"RTN","RMPRN7",92,0)
GNPC ;worksheet/detail
"RTN","RMPRN7",93,0)
 S STN=RMPR("NAME")
"RTN","RMPRN7",94,0)
 D CAL^RMPRN7
"RTN","RMPRN7",95,0)
 S PAGE=0,FL=""
"RTN","RMPRN7",96,0)
 D ^RMPRN7PT
"RTN","RMPRN7",97,0)
 G:FL=1 EXIT
"RTN","RMPRN7",98,0)
 D ^RMPRN7PR
"RTN","RMPRN7",99,0)
 G:FL=1 EXIT
"RTN","RMPRN7",100,0)
 I RMPRDET'="D" G EXIT
"RTN","RMPRN7",101,0)
 D DESP^RMPRN73
"RTN","RMPRN7",102,0)
 D DESPR^RMPRN73
"RTN","RMPRN7",103,0)
EXIT ;commom exit point
"RTN","RMPRN7",104,0)
 K ^TMP($J) D KILL^XUSCLEAN
"RTN","RMPRN7",105,0)
 D ^%ZISC
"RTN","RMPRN7",106,0)
 Q
"RTN","RMPRN7",107,0)
GNPCC ;one line only
"RTN","RMPRN7",108,0)
 S STN=RMPR("NAME")
"RTN","RMPRN7",109,0)
 D CODE^RMPRN73
"RTN","RMPRN7",110,0)
 D ^RMPRN7UT
"RTN","RMPRN7",111,0)
 G:$D(DIRUT)!($D(DTOUT)) EXIT
"RTN","RMPRN7",112,0)
 I $G(RMPRCDE)="" S RMPRCDE="",RMPRCDE=$O(BRA(Y,RMPRCDE))
"RTN","RMPRN7",113,0)
 S Y=DATE(1) D DD^%DT S DATE(3)=Y,Y=DATE(2) D DD^%DT S DATE(4)=Y
"RTN","RMPRN7",114,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT K IOP I $E(IOST,1,2)["C-" G PRTL
"RTN","RMPRN7",115,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE("RMPRSITE")="",ZTSAVE("RMPR(")=""
"RTN","RMPRN7",116,0)
 I  S ZTSAVE("DATE(")="",ZTSAVE("RMPRZ")="",ZTSAVE("RMPRDET")="",ZTSAVE("RMPRCDE")=""
"RTN","RMPRN7",117,0)
 I  S ZTRTN="PRTL^RMPRN7",ZTDESC="Prosthetic 2529-3 NPPD" D ^%ZTLOAD K ZTDESC,ZTIO,ZTRTN,ZTSAVE G EXIT
"RTN","RMPRN7",118,0)
PRTL ;print one line entry from taskman
"RTN","RMPRN7",119,0)
 I '$D(IO("Q")) U IO
"RTN","RMPRN7",120,0)
 D GNP
"RTN","RMPRN7",121,0)
 D CAL^RMPRN7
"RTN","RMPRN7",122,0)
 S PAGE=0,FL=""
"RTN","RMPRN7",123,0)
 S CODE=RMPRCDE
"RTN","RMPRN7",124,0)
 D DESP^RMPRN7PL
"RTN","RMPRN7",125,0)
 Q
"RTN","RMPRN7",126,0)
SET ;set temp global
"RTN","RMPRN7",127,0)
 S STN=RMPR("NAME")
"RTN","RMPRN7",128,0)
 S ^TMP($J,"RMPRGN",STN,GN,FLAG,LINE_"L",RMPRB)=""
"RTN","RMPRN7",129,0)
 S RMSSN=$P(^RMPR(660,RMPRB,0),U,2) I RMSSN S RMSSN=$P(^DPT(RMSSN,0),U,9)
"RTN","RMPRN7",130,0)
 I RMSSN'="" S ^TMP($J,"A",RMSSN)=""
"RTN","RMPRN7",131,0)
 K RMSSN
"RTN","RMPRN7",132,0)
 Q
"RTN","RMPRN7",133,0)
 ;
"RTN","RMPRN7",134,0)
LOOP ;sort on hcpcs key and grouper is complete
"RTN","RMPRN7",135,0)
 ;store in tmp($j,"N",station) or "R"
"RTN","RMPRN7",136,0)
 S (TAM,T1,RMPRB,COUNT,CODE,RMPRAD,DATE,RMPRFG,RMPRT,RMPRI,RMPRNW,RMPRRPR)=0
"RTN","RMPRN7",137,0)
 S (TQTY,RMPROTH,CC,RMPRC,RMPRN,TT,RMPRPSC,VA,CM,RMPRCT1,SO,SI,DIS,RMPRCT,RMPR21,CODE,RMPRB,FM,LEG,RMPRNI,RMPRNO,RMPRSL,RMPRAA,RMPRPHC)=0
"RTN","RMPRN7",138,0)
 S DATE=DATE(1),RMPRB=0
"RTN","RMPRN7",139,0)
CAL ;loop through grouper key sort
"RTN","RMPRN7",140,0)
 S STN=RMPR("NAME")
"RTN","RMPRN7",141,0)
 D CODE^RMPRN73
"RTN","RMPRN7",142,0)
 S GN=""
"RTN","RMPRN7",143,0)
 F  S GN=$O(^TMP($J,"RMPRGN",STN,GN)) Q:GN=""  D
"RTN","RMPRN7",144,0)
 .S FLG=0
"RTN","RMPRN7",145,0)
 .F  S FLG=$O(^TMP($J,"RMPRGN",STN,GN,FLG)) Q:FLG'>0  D  I FLG=1&(RMPRDET'=2)!(RMPRDET'=5) Q
"RTN","RMPRN7",146,0)
 ..;used items never get grouped
"RTN","RMPRN7",147,0)
 ..I FLG=1&(RMPRDET'=2)&(RMPRDET'=5) D GROUP Q
"RTN","RMPRN7",148,0)
 ..;I FLG=1 D GROUP Q
"RTN","RMPRN7",149,0)
 ..S CODE=0
"RTN","RMPRN7",150,0)
 ..F  S CODE=$O(^TMP($J,"RMPRGN",STN,GN,FLG,CODE)) Q:CODE=""  D
"RTN","RMPRN7",151,0)
 ...S RD=0
"RTN","RMPRN7",152,0)
 ...F  S RD=$O(^TMP($J,"RMPRGN",STN,GN,FLG,CODE,RD)) Q:RD'>0  D
"RTN","RMPRN7",153,0)
 ....D SORT Q
"RTN","RMPRN7",154,0)
 Q
"RTN","RMPRN7",155,0)
GROUP ;total grouper to main key
"RTN","RMPRN7",156,0)
 M BC=^TMP($J,"RMPRGN",STN,GN)
"RTN","RMPRN7",157,0)
 S BF=0,BTCOST=0,SRD=""
"RTN","RMPRN7",158,0)
 ;bc array is entrie PO 2421
"RTN","RMPRN7",159,0)
 F  S BF=$O(BC(BF)) Q:BF'>0  D
"RTN","RMPRN7",160,0)
 .;b1 is line,or code
"RTN","RMPRN7",161,0)
 .S BL=0
"RTN","RMPRN7",162,0)
 .F  S BL=$O(BC(BF,BL)) Q:BL=""  D
"RTN","RMPRN7",163,0)
 ..S BR=0
"RTN","RMPRN7",164,0)
 ..;BR is record number
"RTN","RMPRN7",165,0)
 ..F  S BR=$O(BC(BF,BL,BR)) Q:BR'>0  D
"RTN","RMPRN7",166,0)
 ...S BCOST=$P(^RMPR(660,BR,"LB"),U,9)
"RTN","RMPRN7",167,0)
 ...S BTCOST=BTCOST+BCOST
"RTN","RMPRN7",168,0)
 ...I (BF=1)&(SRD="") S SRD=BR,CODE="",CODE=$O(BC(1,CODE))
"RTN","RMPRN7",169,0)
 K BC
"RTN","RMPRN7",170,0)
 Q:SRD=""
"RTN","RMPRN7",171,0)
 ;calculate based on primary
"RTN","RMPRN7",172,0)
 S TYPE=$P(^RMPR(660,SRD,0),U,4)
"RTN","RMPRN7",173,0)
 S TY=$S(TYPE="X":2,TYPE=5:2,TYPE="I":1,1:3)
"RTN","RMPRN7",174,0)
 S SOURCE=$P(^RMPR(660,SRD,0),U,14)
"RTN","RMPRN7",175,0)
 S COST=BTCOST
"RTN","RMPRN7",176,0)
 ;stock issue display and calculate zero used cost if VA source
"RTN","RMPRN7",177,0)
 ;I $P(^RMPR(660,SRD,1),U,5)'=""&(SOURCE["V") S BTCOST=0,COST=0
"RTN","RMPRN7",178,0)
 ;I $P(^RMPR(660,SRD,0),U,13)["-3" S COST=0,SOURCE="VA",BTCOST=0
"RTN","RMPRN7",179,0)
 S QTY=$P(^RMPR(660,SRD,0),U,7)
"RTN","RMPRN7",180,0)
 S ^TMP($J,CODE,SRD)=COST
"RTN","RMPRN7",181,0)
 S CATEGRY=$P($G(^RMPR(660,SRD,"AM")),U,3),SPEC=$P($G(^("AM")),U,4),GN=$P(^("AMS"),U,1)
"RTN","RMPRN7",182,0)
 ;new or repair code
"RTN","RMPRN7",183,0)
 S B1=SRD
"RTN","RMPRN7",184,0)
 I TY=2 D REP
"RTN","RMPRN7",185,0)
 I TY'=2 D NEW
"RTN","RMPRN7",186,0)
 Q
"RTN","RMPRN7",187,0)
SORT ;main data for worksheets
"RTN","RMPRN7",188,0)
 S TYPE=$P(^RMPR(660,RD,0),U,4)
"RTN","RMPRN7",189,0)
 S TY=$S(TYPE="X":2,TYPE=5:2,TYPE="I":1,1:3)
"RTN","RMPRN7",190,0)
 S SOURCE=$P(^RMPR(660,RD,0),U,14)
"RTN","RMPRN7",191,0)
 I SOURCE="" S SOURCE="C"
"RTN","RMPRN7",192,0)
 S CATEGRY=$P($G(^RMPR(660,RD,"AM")),U,3),SPEC=$P($G(^("AM")),U,4),GN=$P(^("AMS"),U,1)
"RTN","RMPRN7",193,0)
 S COST=$P(^RMPR(660,RD,"LB"),U,9)
"RTN","RMPRN7",194,0)
 ;stock issue source VA, used cost calculation is zero
"RTN","RMPRN7",195,0)
 ;I $P(^RMPR(660,RD,1),U,5)'=""&(SOURCE["V") S COST=0
"RTN","RMPRN7",196,0)
 ;form
"RTN","RMPRN7",197,0)
 S FORM=$P(^RMPR(660,RD,0),U,13)
"RTN","RMPRN7",198,0)
 ;I (FORM=4)!(FORM=15) S COST=0,SOURCE="V"
"RTN","RMPRN7",199,0)
 S QTY=$P(^RMPR(660,RD,0),U,7)
"RTN","RMPRN7",200,0)
 S B1=RD
"RTN","RMPRN7",201,0)
 S ^TMP($J,CODE,RD)=COST
"RTN","RMPRN7",202,0)
 I TY=2 D REP
"RTN","RMPRN7",203,0)
 I TY'=2 D NEW
"RTN","RMPRN7",204,0)
 Q
"RTN","RMPRN7",205,0)
REP ;calculate repair cost
"RTN","RMPRN7",206,0)
 ;I $G(RD)'="" D
"RTN","RMPRN7",207,0)
 ;.S SSN=$P(^RMPR(660,RD,0),U,2) I SSN S SSN=$P(^DPT(SSN,0),U,9)
"RTN","RMPRN7",208,0)
 ;.I SSN'="" S ^TMP($J,"A",SSN)=""
"RTN","RMPRN7",209,0)
 ;.K SSN
"RTN","RMPRN7",210,0)
 S LINE=CODE
"RTN","RMPRN7",211,0)
 I LINE="R99 A" S SOURCE="C",QTY=1
"RTN","RMPRN7",212,0)
 I $G(^TMP($J,"R",STN,LINE))="" S ^TMP($J,"R",STN,LINE)=""
"RTN","RMPRN7",213,0)
 I SOURCE["V" S $P(^TMP($J,"R",STN,LINE),U,1)=$P(^TMP($J,"R",STN,LINE),U,1)+QTY
"RTN","RMPRN7",214,0)
 I SOURCE["C" S $P(^TMP($J,"R",STN,LINE),U,2)=$P(^TMP($J,"R",STN,LINE),U,2)+QTY
"RTN","RMPRN7",215,0)
 ;
"RTN","RMPRN7",216,0)
 S $P(^TMP($J,"R",STN,LINE),U,3)=$P(^TMP($J,"R",STN,LINE),U,3)+COST
"RTN","RMPRN7",217,0)
 I CATEGRY=1 S $P(^TMP($J,"R",STN,LINE),U,4)=$P(^TMP($J,"R",STN,LINE),U,4)+1
"RTN","RMPRN7",218,0)
 I CATEGRY=4 S $P(^TMP($J,"R",STN,LINE),U,5)=$P(^TMP($J,"R",STN,LINE),U,5)+1
"RTN","RMPRN7",219,0)
 I CATEGRY=2 S $P(^TMP($J,"R",STN,LINE),U,6)=$P(^TMP($J,"R",STN,LINE),U,6)+1
"RTN","RMPRN7",220,0)
 I CATEGRY=3 S $P(^TMP($J,"R",STN,LINE),U,7)=$P(^TMP($J,"R",STN,LINE),U,7)+1
"RTN","RMPRN7",221,0)
 I SPEC=1 S $P(^TMP($J,"R",STN,LINE),U,8)=$P(^TMP($J,"R",STN,LINE),U,8)+1
"RTN","RMPRN7",222,0)
 I SPEC=2 S $P(^TMP($J,"R",STN,LINE),U,9)=$P(^TMP($J,"R",STN,LINE),U,9)+1
"RTN","RMPRN7",223,0)
 I SPEC=3 S $P(^TMP($J,"R",STN,LINE),U,10)=$P(^TMP($J,"R",STN,LINE),U,10)+1
"RTN","RMPRN7",224,0)
 I SPEC=4 S $P(^TMP($J,"R",STN,LINE),U,11)=$P(^TMP($J,"R",STN,LINE),U,11)+1,$P(^(LINE),U,16)=$P(^(LINE),U,16)+COST
"RTN","RMPRN7",225,0)
 I TYPE="I" S $P(^TMP($J,"R",STN,LINE),U,12)=$P(^TMP($J,"R",STN,LINE),U,12)+1
"RTN","RMPRN7",226,0)
 Q
"RTN","RMPRN7",227,0)
 ;
"RTN","RMPRN7",228,0)
NEW ;calculate new costs
"RTN","RMPRN7",229,0)
 ;I $G(RD)'="" D
"RTN","RMPRN7",230,0)
 ;.S SSN=$P(^RMPR(660,RD,0),U,2) I SSN S SSN=$P(^DPT(SSN,0),U,9)
"RTN","RMPRN7",231,0)
 ;.I SSN'="" S ^TMP($J,"A",SSN)=""
"RTN","RMPRN7",232,0)
 ;.K SSN
"RTN","RMPRN7",233,0)
 S LINE=CODE
"RTN","RMPRN7",234,0)
 I $G(^TMP($J,"N",STN,LINE))="" S ^TMP($J,"N",STN,LINE)=""
"RTN","RMPRN7",235,0)
 I SOURCE["V" S $P(^TMP($J,"N",STN,LINE),U,1)=$P(^TMP($J,"N",STN,LINE),U,1)+QTY
"RTN","RMPRN7",236,0)
 I SOURCE["C" S $P(^TMP($J,"N",STN,LINE),U,2)=$P(^TMP($J,"N",STN,LINE),U,2)+QTY
"RTN","RMPRN7",237,0)
 S $P(^TMP($J,"N",STN,LINE),U,3)=$P(^TMP($J,"N",STN,LINE),U,3)+COST
"RTN","RMPRN7",238,0)
 I CATEGRY=1 S $P(^TMP($J,"N",STN,LINE),U,4)=$P(^TMP($J,"N",STN,LINE),U,4)+1
"RTN","RMPRN7",239,0)
 I CATEGRY=4 S $P(^TMP($J,"N",STN,LINE),U,5)=$P(^TMP($J,"N",STN,LINE),U,5)+1
"RTN","RMPRN7",240,0)
 I CATEGRY=2 S $P(^TMP($J,"N",STN,LINE),U,6)=$P(^TMP($J,"N",STN,LINE),U,6)+1
"RTN","RMPRN7",241,0)
 I CATEGRY=3 S $P(^TMP($J,"N",STN,LINE),U,7)=$P(^TMP($J,"N",STN,LINE),U,7)+1
"RTN","RMPRN7",242,0)
 I SPEC=1 S $P(^TMP($J,"N",STN,LINE),U,8)=$P(^TMP($J,"N",STN,LINE),U,8)+1
"RTN","RMPRN7",243,0)
 I SPEC=2 S $P(^TMP($J,"N",STN,LINE),U,9)=$P(^TMP($J,"N",STN,LINE),U,9)+1
"RTN","RMPRN7",244,0)
 I SPEC=3 S $P(^TMP($J,"N",STN,LINE),U,10)=$P(^TMP($J,"N",STN,LINE),U,10)+1
"RTN","RMPRN7",245,0)
 I SPEC=4 S $P(^TMP($J,"N",STN,LINE),U,11)=$P(^TMP($J,"N",STN,LINE),U,11)+1,$P(^(LINE),U,16)=$P(^(LINE),U,16)+COST
"RTN","RMPRN7",246,0)
 I TYPE="I" S $P(^TMP($J,"N",STN,LINE),U,12)=$P(^TMP($J,"N",STN,LINE),U,12)+1
"RTN","RMPRN7",247,0)
 Q
"RTN","RMPRN72")
0^8^B23656164^B22909080
"RTN","RMPRN72",1,0)
RMPRN72 ;Hines OIFO/HNC -NPPD CALCULATIONS ;9/2/04  12:12
"RTN","RMPRN72",2,0)
 ;;3.0;PROSTHETICS;**57,70,84,91,103,134,144**;Feb 09, 1996;Build 17
"RTN","RMPRN72",3,0)
 ;
"RTN","RMPRN72",4,0)
 ; AAC Patch 84, 2/25/04, additions, deletions and change descriptions for Groups and lines
"RTN","RMPRN72",5,0)
 ; AAC Patch 84, Changes description,100 DL,100 GL,900 IL,900 JL,R10 AL,R20 BL,R20 CL,R91 FL.
"RTN","RMPRN72",6,0)
 ; add new lines,100 HL,100 IL,400 HL,900 NL,910 BL,R10 BL,R10 CL,R60 DL.
"RTN","RMPRN72",7,0)
 ;
"RTN","RMPRN72",8,0)
 ; AAC PATCH 91, ADD HCPCs R10 back into the line descriptions because they were not distributed to R10 A 
"RTN","RMPRN72",9,0)
 ; in Patch 84.
"RTN","RMPRN72",10,0)
 ; AAC PATCH 103 - 01/17/05 NPPD CATEGORIES/LINES - NEW and REPAIR
"RTN","RMPRN72",11,0)
 ;
"RTN","RMPRN72",12,0)
 ; AAC PATCH 134 - 01/25/07 NPPD CATEGORIES/LINES - NEW and REPAIR
"RTN","RMPRN72",13,0)
 ;
"RTN","RMPRN72",14,0)
 ; AAC PATCH 144 - 03/03/08 NPPD CATEGORIES/LINES - NEW and REPAIR
"RTN","RMPRN72",15,0)
 ;build array or tmp
"RTN","RMPRN72",16,0)
DES ;description of line numbers
"RTN","RMPRN72",17,0)
 ;;100 AL;MOTORIZED
"RTN","RMPRN72",18,0)
 ;;100 A1L;SCOOTERS
"RTN","RMPRN72",19,0)
 ;;100 BL;MANUAL CUSTOM
"RTN","RMPRN72",20,0)
 ;;100 CL;STANDARD
"RTN","RMPRN72",21,0)
 ;;100 DL;WC ACCESSORIES
"RTN","RMPRN72",22,0)
 ;;100 EL;CUSHION FOAM
"RTN","RMPRN72",23,0)
 ;;100 FL;CUSHION SPEC
"RTN","RMPRN72",24,0)
 ;;100 GL;LIFTS(INCLUDES WC,SCOOTERS)
"RTN","RMPRN72",25,0)
 ;;100 HL;NSC VAN MOD
"RTN","RMPRN72",26,0)
 ;;100 IL;SCOOTER ACCESSORIES
"RTN","RMPRN72",27,0)
 ;;200 AL;LEG IPOP
"RTN","RMPRN72",28,0)
 ;;200 BL;LEG TEM
"RTN","RMPRN72",29,0)
 ;;200 CL;LEG PART FOOT
"RTN","RMPRN72",30,0)
 ;;200 EL;LEG SYMES
"RTN","RMPRN72",31,0)
 ;;200 FL;LEG B/K
"RTN","RMPRN72",32,0)
 ;;200 GL;LEG A/O
"RTN","RMPRN72",33,0)
 ;;200 HL;LEG A/K
"RTN","RMPRN72",34,0)
 ;;200 IL;LEG COMPONENT
"RTN","RMPRN72",35,0)
 ;;300 AL;ARM B/E
"RTN","RMPRN72",36,0)
 ;;300 BL;ARM A/E
"RTN","RMPRN72",37,0)
 ;;300 CL;COSMETIC GLOVES
"RTN","RMPRN72",38,0)
 ;;300 DL;ARM A/O
"RTN","RMPRN72",39,0)
 ;;300 EL;TERMINAL DEVICES
"RTN","RMPRN72",40,0)
 ;;300 FL;EXT.POWERED,ARM
"RTN","RMPRN72",41,0)
 ;;400 AL;ORTHOSIS ANKLE
"RTN","RMPRN72",42,0)
 ;;400 BL;ORTHOSIS LEG AK
"RTN","RMPRN72",43,0)
 ;;400 CL;ORTHOSIS, SPINAL
"RTN","RMPRN72",44,0)
 ;;400 DL;ORTHOSIS AL/OTH
"RTN","RMPRN72",45,0)
 ;;400 EL;ELAS HOSE, EA
"RTN","RMPRN72",46,0)
 ;;400 FL;ORHTOSIS, KNEE
"RTN","RMPRN72",47,0)
 ;;400 GL;CORSET/BELT
"RTN","RMPRN72",48,0)
 ;;400 HL;ORHTOSIS,WHO
"RTN","RMPRN72",49,0)
 ;;400 XL;ORTHOTICS UNKNOWN
"RTN","RMPRN72",50,0)
 ;;500 AL;ARCH SUPT, EA
"RTN","RMPRN72",51,0)
 ;;500 BL;SHOE INLAY, EA
"RTN","RMPRN72",52,0)
 ;;500 CL;SHOE MOLDED, EA
"RTN","RMPRN72",53,0)
 ;;500 DL;SHOE ORTH OTH
"RTN","RMPRN72",54,0)
 ;;500 EL;INSERTS, SHOE
"RTN","RMPRN72",55,0)
 ;;500 FL;SHOES A/O, EA
"RTN","RMPRN72",56,0)
 ;;600 1L;EYEGLASSES PR
"RTN","RMPRN72",57,0)
 ;;600 AL;* NO LONGER USED *
"RTN","RMPRN72",58,0)
 ;;600 BL;HEAR AID & ACCESS
"RTN","RMPRN72",59,0)
 ;;600 CL;AID FOR BLIND
"RTN","RMPRN72",60,0)
 ;;600 DL;CONT LENS, EA.
"RTN","RMPRN72",61,0)
 ;;600 EL;EAR INSERT/MOLD
"RTN","RMPRN72",62,0)
 ;;600 FL;ASSIST LISTEN DEVICES
"RTN","RMPRN72",63,0)
 ;;600 GL;SPEECH DEVICES
"RTN","RMPRN72",64,0)
 ;;700 AL;EYE
"RTN","RMPRN72",65,0)
 ;;700 BL;FACIAL
"RTN","RMPRN72",66,0)
 ;;700 CL;BODY, OTHER
"RTN","RMPRN72",67,0)
 ;;700 DL;BREAST PROSTHESIS
"RTN","RMPRN72",68,0)
 ;;800 AL;OXYGEN EQP
"RTN","RMPRN72",69,0)
 ;;800 BL;OXYGEN CONCEN
"RTN","RMPRN72",70,0)
 ;;800 CL;MOVED TO REPAIR
"RTN","RMPRN72",71,0)
 ;;800 DL;OXYGEN, SUPPLIES
"RTN","RMPRN72",72,0)
 ;;800 EL;MOVED TO REPAIR
"RTN","RMPRN72",73,0)
 ;;800 FL;VENTILATOR, A/O
"RTN","RMPRN72",74,0)
 ;;800 GL;RESPIRATORY EQUIPMENT
"RTN","RMPRN72",75,0)
 ;;800 HL;RESPIRATORY SUPPLIES
"RTN","RMPRN72",76,0)
 ;;900 AL;WALKING AIDS
"RTN","RMPRN72",77,0)
 ;;900 BL;PATIENT LIFT
"RTN","RMPRN72",78,0)
 ;;900 CL;BED HOSP STD
"RTN","RMPRN72",79,0)
 ;;900 DL;BED HOSP SPEC
"RTN","RMPRN72",80,0)
 ;;900 EL;MATTRESS STAN
"RTN","RMPRN72",81,0)
 ;;900 FL;MATTRESS SPEC
"RTN","RMPRN72",82,0)
 ;;900 GL;BED, ACCESSORIES
"RTN","RMPRN72",83,0)
 ;;900 HL;ENVIRON CONTR
"RTN","RMPRN72",84,0)
 ;;900 IL;HOME SAFETY EQUIPMENT
"RTN","RMPRN72",85,0)
 ;;900 JL;INSTALLATION/LABOR
"RTN","RMPRN72",86,0)
 ;;900 KL;MED EQP AL/OTH
"RTN","RMPRN72",87,0)
 ;;900 LL;RECREATIONAL EQUIPMENT
"RTN","RMPRN72",88,0)
 ;;900 ML;COMPUTER EQUIP
"RTN","RMPRN72",89,0)
 ;;900 NL;TELEHEALTH
"RTN","RMPRN72",90,0)
 ;;910 AL;MED SUP AL/OTH
"RTN","RMPRN72",91,0)
 ;;910 BL;BATTERIES
"RTN","RMPRN72",92,0)
 ;;920 AL;HOME DIAL EQP
"RTN","RMPRN72",93,0)
 ;;920 BL;HOME DIAL SUP
"RTN","RMPRN72",94,0)
 ;;930 AL;MOD VANS
"RTN","RMPRN72",95,0)
 ;;930 BL;ADAPT EQP AL/OTH
"RTN","RMPRN72",96,0)
 ;;940 AL;HISA SC
"RTN","RMPRN72",97,0)
 ;;940 BL;HISA NSC
"RTN","RMPRN72",98,0)
 ;;960 AL;H&N ALL OTHER
"RTN","RMPRN72",99,0)
 ;;960 A1L; H&N INTRAOCULAR LENS
"RTN","RMPRN72",100,0)
 ;;960 A2L; H&N HEAD
"RTN","RMPRN72",101,0)
 ;;960 A3L; H&N NECK
"RTN","RMPRN72",102,0)
 ;;960 A4L; H&N EYES A/O
"RTN","RMPRN72",103,0)
 ;;960 BL;ABDOMEN ALL OTHER
"RTN","RMPRN72",104,0)
 ;;960 B1L;ABDOMEN STENT
"RTN","RMPRN72",105,0)
 ;;960 B2L;ABDOMEN MESH
"RTN","RMPRN72",106,0)
 ;;960 B3L;ABDOMEN CATHETER
"RTN","RMPRN72",107,0)
 ;;960 CL;UE ALL OTHER
"RTN","RMPRN72",108,0)
 ;;960 C1L;UE ARM
"RTN","RMPRN72",109,0)
 ;;960 C2L;UE SHOULDER
"RTN","RMPRN72",110,0)
 ;;960 C3L;UE HAND
"RTN","RMPRN72",111,0)
 ;;960 DL;LE ALL OTHER
"RTN","RMPRN72",112,0)
 ;;960 D1L;LE HIP
"RTN","RMPRN72",113,0)
 ;;960 D2L;LE KNEE
"RTN","RMPRN72",114,0)
 ;;960 D3L;LE FOOT
"RTN","RMPRN72",115,0)
 ;;960 EL;THORACIC ALL OTHER
"RTN","RMPRN72",116,0)
 ;;960 E1L;THOR PACEMAKER/LEADS
"RTN","RMPRN72",117,0)
 ;;960 E2L;THOR ICD/LEADS
"RTN","RMPRN72",118,0)
 ;;960 E3L;THOR STENTS
"RTN","RMPRN72",119,0)
 ;;960 E4L;THOR VALVE
"RTN","RMPRN72",120,0)
 ;;960 FL;DENTAL IMPLANTS
"RTN","RMPRN72",121,0)
 ;;960 GL;ALL SCRWS,PLTS,ANCRS,ETC.
"RTN","RMPRN72",122,0)
 ;;960 XL;SI UNKNOWNS(ALL)
"RTN","RMPRN72",123,0)
 ;;970 AL; BIOLOGICAL IMPLANTS
"RTN","RMPRN72",124,0)
 ;;999 AL;AL/OTH ITEMS
"RTN","RMPRN72",125,0)
 ;;999 P1L;PEDS DME
"RTN","RMPRN72",126,0)
 ;;999 P2L;ALL OTHER PEDS
"RTN","RMPRN72",127,0)
 ;;999 XL;HCPCS NOT GRP
"RTN","RMPRN72",128,0)
 ;;999 ZL;NO HCPCS
"RTN","RMPRN72",129,0)
REP ;;R10L;* NO LONGER USED *
"RTN","RMPRN72",130,0)
 ;;R10 AL;WHEELCHAIR
"RTN","RMPRN72",131,0)
 ;;R10 BL;LIFTS
"RTN","RMPRN72",132,0)
 ;;R10 CL;NSC VAN MOD
"RTN","RMPRN72",133,0)
 ;;R20 AL;LEG A/K
"RTN","RMPRN72",134,0)
 ;;R20 BL;* NO LONGER USED *
"RTN","RMPRN72",135,0)
 ;;R20 CL;LEG B/K
"RTN","RMPRN72",136,0)
 ;;R20 DL;LEG ALL OTHER 
"RTN","RMPRN72",137,0)
 ;;R30L;ART ARM,TOTAL
"RTN","RMPRN72",138,0)
 ;;R40L;ORTHOSIS TOTAL
"RTN","RMPRN72",139,0)
 ;;R50 AL;ORTH SHOE ALL
"RTN","RMPRN72",140,0)
 ;;R50 BL;SHOE MOD
"RTN","RMPRN72",141,0)
 ;;R50 CL;A/O ITEM SERV
"RTN","RMPRN72",142,0)
 ;;R60 AL;AID FOR BLIND
"RTN","RMPRN72",143,0)
 ;;R60 BL;EYEGLASS RPR
"RTN","RMPRN72",144,0)
 ;;R60 CL;HEAR AID & ACCESS
"RTN","RMPRN72",145,0)
 ;;R60 DL;ASSISTIVE LISTENING DEVICES
"RTN","RMPRN72",146,0)
 ;;R70L;HOME DIAL EQU
"RTN","RMPRN72",147,0)
 ;;R80 AL;PATIENT LIFTS
"RTN","RMPRN72",148,0)
 ;;R80 BL;REPAIR TO ECU
"RTN","RMPRN72",149,0)
 ;;R80 CL;MED EQUIP A/O
"RTN","RMPRN72",150,0)
 ;;R80 DL;HME DELIVERY/PU
"RTN","RMPRN72",151,0)
 ;;R80 EL;TELEHEALTH
"RTN","RMPRN72",152,0)
 ;;R90L;ALL OTHER
"RTN","RMPRN72",153,0)
 ;;R90 AL;RECREATIONAL EQUIPMENT
"RTN","RMPRN72",154,0)
 ;;R90 BL;TRAINING
"RTN","RMPRN72",155,0)
 ;;R91 AL;CONCENTRATOR
"RTN","RMPRN72",156,0)
 ;;R91 BL;VENTILATOR
"RTN","RMPRN72",157,0)
 ;;R91 CL;EQUIPMENT A/O
"RTN","RMPRN72",158,0)
 ;;R91 DL;SERVICE VISIT
"RTN","RMPRN72",159,0)
 ;;R91 EL;COMPRESSED O2
"RTN","RMPRN72",160,0)
 ;;R91 FL;LIQUID O2(LBS)
"RTN","RMPRN72",161,0)
 ;;R91 GL;LIQUID DELIVERY SYSTEM
"RTN","RMPRN72",162,0)
 ;;R91 HL;RESPIRATORY EQUIP
"RTN","RMPRN72",163,0)
 ;;R92 AL;VAN MODS
"RTN","RMPRN72",164,0)
 ;;R92 BL;AUTO ADPT EQUIP
"RTN","RMPRN72",165,0)
 ;;R99 AL;SHIPPING
"RTN","RMPRN72",166,0)
 ;;R99 PL;MISC PEDS
"RTN","RMPRN72",167,0)
 ;;R99 XL;HCPCS NOT GRP
"RTN","RMPRN72",168,0)
 ;;R99 ZL;NO HCPCS
"RTN","RMPRN72",169,0)
 ;;END
"RTN","RMPRN7PT")
0^12^B37525265^B36298448
"RTN","RMPRN7PT",1,0)
RMPRN7PT ;HINES/HNC -PRINT NPPD NEW WORKSHEETS ;2/14/01
"RTN","RMPRN7PT",2,0)
 ;;3.0;PROSTHETICS;**57,84,103,144**;Feb 09, 1996;Build 17
"RTN","RMPRN7PT",3,0)
 ;
"RTN","RMPRN7PT",4,0)
 ; AAC Patch 84, 2/25/04 additions, deletions and change descriptions for Groups and lines
"RTN","RMPRN7PT",5,0)
 ; AAC Patch 84, 2/25/04 change description for group 600
"RTN","RMPRN7PT",6,0)
 ; AAC Patch 103, 1/17/05 NPPD CATEGORIES/LINES - NEW and REPAIRS
"RTN","RMPRN7PT",7,0)
 ;
"RTN","RMPRN7PT",8,0)
 K ^TMP($J,"NS")
"RTN","RMPRN7PT",9,0)
 S STN=1
"RTN","RMPRN7PT",10,0)
 S SSNCT=0,BDC=0
"RTN","RMPRN7PT",11,0)
 F  S BDC=$O(^TMP($J,"A",BDC)) Q:BDC'>0  S SSNCT=SSNCT+1
"RTN","RMPRN7PT",12,0)
 K BDC,^TMP($J,"A")
"RTN","RMPRN7PT",13,0)
 F  S STN=$O(^TMP($J,"N",STN)) Q:STN=""  W:$E(IOST,1,2)="C-" @IOF D HDR,CDATA,SUM
"RTN","RMPRN7PT",14,0)
 Q
"RTN","RMPRN7PT",15,0)
HDR ;
"RTN","RMPRN7PT",16,0)
 W !,"REPORT OF 2529-3 NEW PROSTHETICS ACTIVITIES"
"RTN","RMPRN7PT",17,0)
 ;header based on sort select
"RTN","RMPRN7PT",18,0)
 W !,$$HDR^RMPRN7S(RMPRDET)
"RTN","RMPRN7PT",19,0)
 S Y=DATE(1) D DD^%DT S DATE(3)=Y W !,DATE(3)," - " S Y=DATE(2) D DD^%DT S DATE(4)=Y W DATE(4)
"RTN","RMPRN7PT",20,0)
 W !,?10,"STATION: ",STN
"RTN","RMPRN7PT",21,0)
 ;RMPRSUM if summary header
"RTN","RMPRN7PT",22,0)
 Q:$G(RMPRSUM)
"RTN","RMPRN7PT",23,0)
 W !!
"RTN","RMPRN7PT",24,0)
 W !,"Line",?7,"Item",?21,"VA",?26,"Com",?31,"Total",?37,"Cost",?46
"RTN","RMPRN7PT",25,0)
 W "Ave Com",?54
"RTN","RMPRN7PT",26,0)
 W "SC/OP",?61,"NSC/OP",?68,"SC/IP",?74,"NSC/IP"
"RTN","RMPRN7PT",27,0)
 I IOM>120 D
"RTN","RMPRN7PT",28,0)
 .W ?83,"SP LEG"
"RTN","RMPRN7PT",29,0)
 .W ?90,"A&A",?97,"PHC",?104,"ELG REF",?112,"NEW",?120,"$ELG REF"
"RTN","RMPRN7PT",30,0)
 Q
"RTN","RMPRN7PT",31,0)
CDATA ;
"RTN","RMPRN7PT",32,0)
 S LINE="",LINEP=""
"RTN","RMPRN7PT",33,0)
 S (CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM)=0
"RTN","RMPRN7PT",34,0)
 F  S LINE=$O(^TMP($J,"N",STN,LINE)) Q:LINE=""  Q:FL=1  D
"RTN","RMPRN7PT",35,0)
 .I $E(LINE,0,3)'=$E(LINEP,0,3) D SUM Q:FL=1  D LBL
"RTN","RMPRN7PT",36,0)
 .W !,LINE,?7,$E($P(^TMP($J,"N",STN,LINE),U,15),1,14)
"RTN","RMPRN7PT",37,0)
 .W ?21,$P(^TMP($J,"N",STN,LINE),U,1) S CA=CA+$P(^(LINE),U,1)
"RTN","RMPRN7PT",38,0)
 .W ?26,$P(^TMP($J,"N",STN,LINE),U,2) S CB=CB+$P(^(LINE),U,2)
"RTN","RMPRN7PT",39,0)
 .W ?31,$P(^TMP($J,"N",STN,LINE),U,1)+($P(^TMP($J,"N",STN,LINE),U,2))
"RTN","RMPRN7PT",40,0)
 .W ?37,$FN($J($P(^TMP($J,"N",STN,LINE),U,3),0,0),",") S CC=CC+$P(^(LINE),U,3)
"RTN","RMPRN7PT",41,0)
 .W:$P(^TMP($J,"N",STN,LINE),U,2)>0 ?46,$FN($J(($P(^(LINE),U,3))/($P(^(LINE),U,2)),0,0),",")
"RTN","RMPRN7PT",42,0)
 .W ?55,$P(^TMP($J,"N",STN,LINE),U,4) S CD=CD+$P(^(LINE),U,4)
"RTN","RMPRN7PT",43,0)
 .W ?62,$P(^TMP($J,"N",STN,LINE),U,5) S CE=CE+$P(^(LINE),U,5)
"RTN","RMPRN7PT",44,0)
 .W ?69,$P(^TMP($J,"N",STN,LINE),U,6) S CF=CF+$P(^(LINE),U,6)
"RTN","RMPRN7PT",45,0)
 .W ?76,$P(^TMP($J,"N",STN,LINE),U,7) S CG=CG+$P(^(LINE),U,7)
"RTN","RMPRN7PT",46,0)
 .S CH=CH+$P(^TMP($J,"N",STN,LINE),U,8)
"RTN","RMPRN7PT",47,0)
 .S CI=CI+$P(^TMP($J,"N",STN,LINE),U,9)
"RTN","RMPRN7PT",48,0)
 .S CJ=CJ+$P(^TMP($J,"N",STN,LINE),U,10)
"RTN","RMPRN7PT",49,0)
 .S CK=CK+$P(^TMP($J,"N",STN,LINE),U,11)
"RTN","RMPRN7PT",50,0)
 .S CL=CL+$P(^TMP($J,"N",STN,LINE),U,12)
"RTN","RMPRN7PT",51,0)
 .S CM=CM+$P(^TMP($J,"N",STN,LINE),U,16)
"RTN","RMPRN7PT",52,0)
 .I IOM>120 D
"RTN","RMPRN7PT",53,0)
 ..W ?83,$P(^TMP($J,"N",STN,LINE),U,8)
"RTN","RMPRN7PT",54,0)
 ..W ?90,$P(^TMP($J,"N",STN,LINE),U,9)
"RTN","RMPRN7PT",55,0)
 ..W ?97,$P(^TMP($J,"N",STN,LINE),U,10)
"RTN","RMPRN7PT",56,0)
 ..W ?104,$P(^TMP($J,"N",STN,LINE),U,11)
"RTN","RMPRN7PT",57,0)
 ..W ?112,$P(^TMP($J,"N",STN,LINE),U,12)
"RTN","RMPRN7PT",58,0)
 ..W ?120,$P(^TMP($J,"N",STN,LINE),U,16)
"RTN","RMPRN7PT",59,0)
 .S LINEP=LINE
"RTN","RMPRN7PT",60,0)
 Q
"RTN","RMPRN7PT",61,0)
SUM ;Print summary for group
"RTN","RMPRN7PT",62,0)
 Q:FL=1
"RTN","RMPRN7PT",63,0)
 I LINEP'="" D  Q:FL=1
"RTN","RMPRN7PT",64,0)
 .I $Y+13>IOSL,IOST["C-" D CHK Q:FL=1
"RTN","RMPRN7PT",65,0)
 .S GROUPT=CA_U_CB_U_(CA+CB)_U_$J(CC,0,0)_U_CD_U_CE_U_CF_U_CG_U_CH_U_CI_U_CJ_U_CK_U_CL_U_CM
"RTN","RMPRN7PT",66,0)
 .W !,LN,!
"RTN","RMPRN7PT",67,0)
 .W ?21,CA,?26,CB,?31,(CA+CB),?37,$FN($J(CC,0,0),","),?55,CD,?62,CE,?69,CF,?76,CG
"RTN","RMPRN7PT",68,0)
 .I IOM>120 W ?83,CH,?90,CI,?97,CJ,?104,CK,?112,CL,?120,CM
"RTN","RMPRN7PT",69,0)
 .W !
"RTN","RMPRN7PT",70,0)
 .D LBLG
"RTN","RMPRN7PT",71,0)
 .S ^TMP($J,"NS",STN,GROUP,STN)=GROUPT
"RTN","RMPRN7PT",72,0)
 .S (CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM)=0
"RTN","RMPRN7PT",73,0)
 Q:$G(LINEP)'="999 ZL"
"RTN","RMPRN7PT",74,0)
 D FSUM S RMPRSUM=1 D HDR K RMPRSUM
"RTN","RMPRN7PT",75,0)
 W !!,"STATION SUMMARY (2529-3 NEW ACTIVITIES)"
"RTN","RMPRN7PT",76,0)
 W !,?21,"VA",?31,"Com",?41,"Total",?51,"Cost",?61
"RTN","RMPRN7PT",77,0)
 W "Ave Com",?71,"Elg Ref $"
"RTN","RMPRN7PT",78,0)
 W !,LN
"RTN","RMPRN7PT",79,0)
 W !,?21,$FN(CA,","),?31,$FN(CB,","),?41,$FN((CA+CB),","),?51,"$"_$FN($J(CC,0,0),",")
"RTN","RMPRN7PT",80,0)
 I CB>0 W ?61,"$"_$FN($J((CC/CB),0,0),",")
"RTN","RMPRN7PT",81,0)
 I CM>0 W ?71,"$"_$FN($J(CM,0,0),",")
"RTN","RMPRN7PT",82,0)
 W !,LN,!!
"RTN","RMPRN7PT",83,0)
 W ?21,"SC/OP",?31,"NSC/OP",?41,"SC/IP",?51,"NSC/IP"
"RTN","RMPRN7PT",84,0)
 W !,LN,!,?21,CD,?31,CE,?41,CF,?51,CG
"RTN","RMPRN7PT",85,0)
 W !,LN
"RTN","RMPRN7PT",86,0)
 W !,?21,"SPEC LEG",?31,"A&A",?41,"PHC",?51,"ELG REF",?61,"NEW"
"RTN","RMPRN7PT",87,0)
 W !,LN,!,?21,CH,?31,CI,?41,CJ,?51,CK,?61,CL,!,LN
"RTN","RMPRN7PT",88,0)
 W !,?21,"Total Disability: ",$FN((CD+CE+CF+CG),","),?47,"Unique SSN: ",SSNCT,!
"RTN","RMPRN7PT",89,0)
 S (CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM)=0
"RTN","RMPRN7PT",90,0)
 I IOST["C-" D CHK
"RTN","RMPRN7PT",91,0)
 Q
"RTN","RMPRN7PT",92,0)
LBLG ;group description for final summary
"RTN","RMPRN7PT",93,0)
 I $E(LINEP,0,3)=100 S GROUP=$E(LINEP,0,3)_" 2529-3 WHEELCHAIRS AND ACCESSORIES"
"RTN","RMPRN7PT",94,0)
 I $E(LINEP,0,3)=200 S GROUP=$E(LINEP,0,3)_" 2529-3 ARTIFICIAL LEGS"
"RTN","RMPRN7PT",95,0)
 I $E(LINEP,0,3)=300 S GROUP=$E(LINEP,0,3)_" 2529-3 ARTIFICIAL ARMS AND TERMINAL DEVICES"
"RTN","RMPRN7PT",96,0)
 I $E(LINEP,0,3)=400 S GROUP=$E(LINEP,0,3)_" 2529-3 ORTHOSIS/ORTHOTICS"
"RTN","RMPRN7PT",97,0)
 I $E(LINEP,0,3)=500 S GROUP=$E(LINEP,0,3)_" 2529-3 SHOES/ORTHOTICS"
"RTN","RMPRN7PT",98,0)
 I $E(LINEP,0,3)=600 S GROUP=$E(LINEP,0,3)_" 2529-3 SENSORI-NEURO AIDS"
"RTN","RMPRN7PT",99,0)
 I $E(LINEP,0,3)=700 S GROUP=$E(LINEP,0,3)_" 2529-3 RESTORATIONS"
"RTN","RMPRN7PT",100,0)
 I $E(LINEP,0,3)=800 S GROUP=$E(LINEP,0,3)_" 2529-3 OXYGEN AND RESPIRATORY"
"RTN","RMPRN7PT",101,0)
 I $E(LINEP,0,3)=900 S GROUP=$E(LINEP,0,3)_" 2529-3 MEDICAL EQUIPMENT"
"RTN","RMPRN7PT",102,0)
 I $E(LINEP,0,3)=910 S GROUP=$E(LINEP,0,3)_" 2529-3 ALL OTHER SUPPLIES AND EQUIPMENT"
"RTN","RMPRN7PT",103,0)
 I $E(LINEP,0,3)=920 S GROUP=$E(LINEP,0,3)_" 2529-3 HOME DIALYSIS PROGRAM"
"RTN","RMPRN7PT",104,0)
 I $E(LINEP,0,3)=930 S GROUP=$E(LINEP,0,3)_" 2529-3 ADAPTIVE EQUIPMENT"
"RTN","RMPRN7PT",105,0)
 I $E(LINEP,0,3)=940 S GROUP=$E(LINEP,0,3)_" 2529-3 HISA"
"RTN","RMPRN7PT",106,0)
 I $E(LINEP,0,3)=960 S GROUP=$E(LINEP,0,3)_" 2529-3 SURGICAL IMPLANTS"
"RTN","RMPRN7PT",107,0)
 I $E(LINEP,0,3)=970 S GROUP=$E(LINEP,0,3)_" 2529-3 BIOLOGICAL IMPLANTS"
"RTN","RMPRN7PT",108,0)
 I $E(LINEP,0,3)=999 S GROUP=$E(LINEP,0,3)_" 2529-3 MISC"
"RTN","RMPRN7PT",109,0)
 Q
"RTN","RMPRN7PT",110,0)
LBL ;label for group
"RTN","RMPRN7PT",111,0)
 I $E(LINE,0,3)=100 W !,"2529-3 WHEELCHAIRS AND ACCESSORIES"
"RTN","RMPRN7PT",112,0)
 I $E(LINE,0,3)=200 W !,"2529-3 ARTIFICIAL LEGS"
"RTN","RMPRN7PT",113,0)
 I $E(LINE,0,3)=300 W !,"2529-3 ARTIFICIAL ARMS AND TERMINAL DEVICES"
"RTN","RMPRN7PT",114,0)
 I $E(LINE,0,3)=400 W !,"2529-3 ORTHOSIS/ORTHOTICS"
"RTN","RMPRN7PT",115,0)
 I $E(LINE,0,3)=500,IOST'["C-" W @IOF D HDR W !,"2529-3 SHOES/ORTHOTICS"
"RTN","RMPRN7PT",116,0)
 I $E(LINE,0,3)=500,IOST["C-" W !,"2529-3 SHOES/ORTHOTICS"
"RTN","RMPRN7PT",117,0)
 I $E(LINE,0,3)=600 W !,"2529-3 SENSORI-NEURO AIDS"
"RTN","RMPRN7PT",118,0)
 I $E(LINE,0,3)=700 W !,"2529-3 RESTORATIONS"
"RTN","RMPRN7PT",119,0)
 I $E(LINE,0,3)=800 W !,"2529-3 OXYGEN AND RESPIRATORY"
"RTN","RMPRN7PT",120,0)
 I $E(LINE,0,3)=900,IOST'["C-" W @IOF D HDR W !,"2529-3 MEDICAL EQUIPMENT"
"RTN","RMPRN7PT",121,0)
 I $E(LINE,0,3)=900,IOST["C-" W !,"2529-3 MEDICAL EQUIPMENT"
"RTN","RMPRN7PT",122,0)
 I $E(LINE,0,3)=910 W !,"2529-3 ALL OTHER SUPPLIES AND EQUIPMENT"
"RTN","RMPRN7PT",123,0)
 I $E(LINE,0,3)=920 W !,"2529-3 HOME DIALYSIS PROGRAM"
"RTN","RMPRN7PT",124,0)
 I $E(LINE,0,3)=930 W !,"2529-3 ADAPTIVE EQUIPMENT"
"RTN","RMPRN7PT",125,0)
 I $E(LINE,0,3)=940 W !,"2529-3 HISA"
"RTN","RMPRN7PT",126,0)
 I $E(LINE,0,3)=960 W !,"2529-3 SURGICAL IMPLANTS"
"RTN","RMPRN7PT",127,0)
 I $E(LINE,0,3)=970 W !,"2529-3 BIOLOGICAL IMPLANTS"
"RTN","RMPRN7PT",128,0)
 I $E(LINE,0,3)=999,IOST'["C-" W @IOF D HDR W !,"2529-3 MISC"
"RTN","RMPRN7PT",129,0)
 I $E(LINE,0,3)=999,IOST["C-" W !,"2529-3 MISC"
"RTN","RMPRN7PT",130,0)
 Q
"RTN","RMPRN7PT",131,0)
FSUM ;final summay on New Worksheets STATION
"RTN","RMPRN7PT",132,0)
 S H=0
"RTN","RMPRN7PT",133,0)
 F  S H=$O(^TMP($J,"NS",STN,H)) Q:H=""  D
"RTN","RMPRN7PT",134,0)
 .S H1=0,H2=0
"RTN","RMPRN7PT",135,0)
 .F  S H1=$O(^TMP($J,"NS",STN,H,H1)) Q:H1=""  D
"RTN","RMPRN7PT",136,0)
 ..Q:H1'=STN
"RTN","RMPRN7PT",137,0)
 ..S H2=^TMP($J,"NS",STN,H,H1)
"RTN","RMPRN7PT",138,0)
 ..S CA=CA+$P(H2,U,1)
"RTN","RMPRN7PT",139,0)
 ..S CB=CB+$P(H2,U,2)
"RTN","RMPRN7PT",140,0)
 ..S CC=CC+$P(H2,U,4)
"RTN","RMPRN7PT",141,0)
 ..S CD=CD+$P(H2,U,5)
"RTN","RMPRN7PT",142,0)
 ..S CE=CE+$P(H2,U,6)
"RTN","RMPRN7PT",143,0)
 ..S CF=CF+$P(H2,U,7)
"RTN","RMPRN7PT",144,0)
 ..S CG=CG+$P(H2,U,8)
"RTN","RMPRN7PT",145,0)
 ..S CH=CH+$P(H2,U,9)
"RTN","RMPRN7PT",146,0)
 ..S CI=CI+$P(H2,U,10)
"RTN","RMPRN7PT",147,0)
 ..S CJ=CJ+$P(H2,U,11)
"RTN","RMPRN7PT",148,0)
 ..S CK=CK+$P(H2,U,12)
"RTN","RMPRN7PT",149,0)
 ..S CL=CL+$P(H2,U,13)
"RTN","RMPRN7PT",150,0)
 ..S CM=CM+$P(H2,U,14)
"RTN","RMPRN7PT",151,0)
 Q
"RTN","RMPRN7PT",152,0)
CHK ;
"RTN","RMPRN7PT",153,0)
 K DIR W !! S DIR(0)="E" D ^DIR S:+Y'>0 FL=1
"RTN","RMPRN7PT",154,0)
 W @IOF
"RTN","RMPRN7PT",155,0)
 Q
"RTN","RMPRN7PT",156,0)
 ;END
"RTN","RMPRN7UT")
0^10^B7513955^B7209757
"RTN","RMPRN7UT",1,0)
RMPRN7UT ;HINES-CIOFO/HNC - DISPLAY HEADER GROUPS NPPD;2-14-01
"RTN","RMPRN7UT",2,0)
 ;;3.0;PROSTHETICS;**57,84,103,144**;Feb 09, 1996;Build 17
"RTN","RMPRN7UT",3,0)
 ;
"RTN","RMPRN7UT",4,0)
 ; AAC Patch 84, 2/25/04, additions, deletions and change descriptions for Groups and lines
"RTN","RMPRN7UT",5,0)
 ; AAC Patch 84, 2/25/04, change description for line 6
"RTN","RMPRN7UT",6,0)
 ; AAC Patch 103, 1/17/05 - NPPD CATEGORIES/LINES - NEW and REPAIR UPDATES
"RTN","RMPRN7UT",7,0)
 ;
"RTN","RMPRN7UT",8,0)
DIS W !,?5,"1.   2529-3 WHEELCHAIRS AND ACCESSORIES"
"RTN","RMPRN7UT",9,0)
 W !,?5,"2.   2529-3 ARTIFICIAL LEGS"
"RTN","RMPRN7UT",10,0)
 W !,?5,"3.   2529-3 ARTIFICIAL ARMS AND TERMINAL DEVICES"
"RTN","RMPRN7UT",11,0)
 W !,?5,"4.   2529-3 ORTHOSIS/ORTHOTICS"
"RTN","RMPRN7UT",12,0)
 W !,?5,"5.   2529-3 SHOES/ORTHOTICS"
"RTN","RMPRN7UT",13,0)
 W !,?5,"6.   2529-3 SENSORI-NEURO AIDS"
"RTN","RMPRN7UT",14,0)
 W !,?5,"7.   2529-3 RESTORATIONS"
"RTN","RMPRN7UT",15,0)
 W !,?5,"8.   2529-3 OXYGEN AND RESPIRATORY"
"RTN","RMPRN7UT",16,0)
 W !,?5,"9.   2529-3 MEDICAL EQUIPMENT"
"RTN","RMPRN7UT",17,0)
 W !,?5,"10.  2529-3 ALL OTHER SUPPLIES AND EQUIPMENT"
"RTN","RMPRN7UT",18,0)
 W !,?5,"11.  2529-3 HOME DIALYSIS PROGRAM"
"RTN","RMPRN7UT",19,0)
 W !,?5,"12.  2529-3 ADAPTIVE EQUIPMENT"
"RTN","RMPRN7UT",20,0)
 W !,?5,"13.  2529-3 HISA"
"RTN","RMPRN7UT",21,0)
 W !,?5,"14.  2529-3 SURGICAL IMPLANTS"
"RTN","RMPRN7UT",22,0)
 W !,?5,"15.  2529-3 MISC"
"RTN","RMPRN7UT",23,0)
 W !,?5,"16.  2529-3 REPAIR"
"RTN","RMPRN7UT",24,0)
 W !,?5,"17.  2529-3 BIOLOGICAL IMPLANTS"
"RTN","RMPRN7UT",25,0)
ASK ;
"RTN","RMPRN7UT",26,0)
 K DIR,DTOUT,DIRUT
"RTN","RMPRN7UT",27,0)
 S RMPRCDE=""
"RTN","RMPRN7UT",28,0)
 S DIR(0)="N^1:17:0"
"RTN","RMPRN7UT",29,0)
 S DIR("A")="Select 2529-3 NPPD Group "
"RTN","RMPRN7UT",30,0)
 D ^DIR
"RTN","RMPRN7UT",31,0)
 G:$D(DIRUT)!($D(DTOUT)) EXIT
"RTN","RMPRN7UT",32,0)
 S BR=0,BRC=0 K BRA W @IOF
"RTN","RMPRN7UT",33,0)
 I Y=1 S SELY=10
"RTN","RMPRN7UT",34,0)
 I Y=2 S SELY=20
"RTN","RMPRN7UT",35,0)
 I Y=3 S SELY=30
"RTN","RMPRN7UT",36,0)
 I Y=4 S SELY=40
"RTN","RMPRN7UT",37,0)
 I Y=5 S SELY=50
"RTN","RMPRN7UT",38,0)
 I Y=6 S SELY=60
"RTN","RMPRN7UT",39,0)
 I Y=7 S SELY=70
"RTN","RMPRN7UT",40,0)
 I Y=8 S SELY=80
"RTN","RMPRN7UT",41,0)
 I Y=9 S SELY=90
"RTN","RMPRN7UT",42,0)
 I Y=10 S SELY=91
"RTN","RMPRN7UT",43,0)
 I Y=11 S SELY=92
"RTN","RMPRN7UT",44,0)
 I Y=12 S SELY=93
"RTN","RMPRN7UT",45,0)
 I Y=13 S SELY=94
"RTN","RMPRN7UT",46,0)
 I Y=14 S SELY=96
"RTN","RMPRN7UT",47,0)
 I Y=15 S SELY=99
"RTN","RMPRN7UT",48,0)
 I Y=16 S SELY=100
"RTN","RMPRN7UT",49,0)
 I Y=17 S SELY=97
"RTN","RMPRN7UT",50,0)
 F  S BR=$O(^TMP($J,"RMPRCODE",BR)) Q:BR=""  D
"RTN","RMPRN7UT",51,0)
 .I $E(BR,1,2)=SELY S BRC=BRC+1 W !?5,BRC_".",?10,BR,?18,^(BR) S BRA(BRC,BR)=""
"RTN","RMPRN7UT",52,0)
 .Q
"RTN","RMPRN7UT",53,0)
 I SELY=100 D
"RTN","RMPRN7UT",54,0)
 . D RSEL
"RTN","RMPRN7UT",55,0)
 . Q
"RTN","RMPRN7UT",56,0)
 E  D
"RTN","RMPRN7UT",57,0)
 . D NSEL
"RTN","RMPRN7UT",58,0)
 . Q
"RTN","RMPRN7UT",59,0)
 G:$D(DIRUT)!($D(DTOUT)) EXIT
"RTN","RMPRN7UT",60,0)
 Q
"RTN","RMPRN7UT",61,0)
RSEL ;repair selection
"RTN","RMPRN7UT",62,0)
 N CNT,Y,OFFS,TXT,I
"RTN","RMPRN7UT",63,0)
 S CNT=$P(^TMP($J,"RMPRCODE"),U,2) ; num of NPPD repair lines
"RTN","RMPRN7UT",64,0)
 S OFFS=CNT-(CNT\2)-1
"RTN","RMPRN7UT",65,0)
 F I=0:1:OFFS D
"RTN","RMPRN7UT",66,0)
 . S TXT=$P($T(REP+I^RMPRN72),";;",2)
"RTN","RMPRN7UT",67,0)
 . W !,$J(I+1,2)_".",?5,$P(TXT,";",1),?14,$P(TXT,";",2)
"RTN","RMPRN7UT",68,0)
 . S TXT=$P($T(REP+I+OFFS+1^RMPRN72),";;",2)
"RTN","RMPRN7UT",69,0)
 . Q:$E(TXT)'="R"
"RTN","RMPRN7UT",70,0)
 . W ?35,$J(I+2+OFFS,2)_".",?40,$P(TXT,";",1),?51,$P(TXT,";",2)
"RTN","RMPRN7UT",71,0)
 . Q
"RTN","RMPRN7UT",72,0)
 F I=OFFS:1:17 W !
"RTN","RMPRN7UT",73,0)
 S DIR(0)="N^1:"_CNT_":0"
"RTN","RMPRN7UT",74,0)
 S DIR("A")="Select 2529-3 NPPD Line "
"RTN","RMPRN7UT",75,0)
 D ^DIR
"RTN","RMPRN7UT",76,0)
 Q:$D(DIRUT)!($D(DTOUT))
"RTN","RMPRN7UT",77,0)
 S TXT=$P($T(REP+Y-1^RMPRN72),";;",2)
"RTN","RMPRN7UT",78,0)
 S RMPRCDE=$P(TXT,";",1)
"RTN","RMPRN7UT",79,0)
 Q
"RTN","RMPRN7UT",80,0)
NSEL ;new select
"RTN","RMPRN7UT",81,0)
 I BR'="" W "QUIT" Q
"RTN","RMPRN7UT",82,0)
 W !
"RTN","RMPRN7UT",83,0)
 S DIR(0)="N^1:"_BRC_":0"
"RTN","RMPRN7UT",84,0)
 S DIR("A")="Select 2529-3 NPPD Line "
"RTN","RMPRN7UT",85,0)
 D ^DIR
"RTN","RMPRN7UT",86,0)
 Q:$D(DIRUT)!($D(DTOUT))
"RTN","RMPRN7UT",87,0)
 S RMPRCDE=$O(BRA(Y,RMPRCDE))
"RTN","RMPRN7UT",88,0)
 Q
"RTN","RMPRN7UT",89,0)
EXIT ;exit on ^ or timeout
"RTN","RMPRN7UT",90,0)
 K ^TMP($J)
"RTN","RMPRN7UT",91,0)
 Q
"RTN","RMPRN7UT",92,0)
 ;END
"VER")
8.0^22.0
"BLD",6877,6)
^126
**END**
**END**
