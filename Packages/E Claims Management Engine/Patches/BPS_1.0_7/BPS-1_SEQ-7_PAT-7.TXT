
=============================================================================
Run Date: JUL 09, 2009                     Designation: BPS*1*7
Package : BPS - E CLAIMS MGMT ENGINE          Priority: Mandatory
Version : 1         SEQ #7                      Status: Released
                  Compliance Date: AUG 09, 2009
=============================================================================

Associated patches: (c)IB*2*384        install with patch       `BPS*1*7'
                    (c)PSO*7*289       install with patch       `BPS*1*7'
                    (v)BPS*1*6     <<= must be installed BEFORE `BPS*1*7'

Subject: ePHARMACY ENHANCEMENTS

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 This patch has enhancements which extend the capabilities of the Veterans 
 Health Information Systems and Technology Architecture (VistA) electronic 
 pharmacy (ePharmacy) billing system.  Below is a list of all the 
 applications involved in this project along with their patch number:
  
    APPLICATION/VERSION                                  PATCH
    --------------------------------------------------------------
    CONSOLIDATED MAIL OUTPATIENT PHARMACY (CMOP) V. 2.0  PSX*2*65
    PHARMACY DATA MANAGEMENT (PDM) V. 1.0                PSS*1*131
    OUTPATIENT PHARMACY (OP) V. 7.0                      PSO*7*289
    INTEGRATED BILLING (IB) V. 2.0                       IB*2*384
    ELECTRONIC CLAIMS MANAGEMENT ENGINE (ECME) V. 1.0    BPS*1*7
  
 The last three patches (PSO*7*289, IB*2*384 and BPS*1*7) will be released 
 in the Kernel Installation and Distribution System (KIDS) multi-build 
 distribution BPS PSO IB BUNDLE 3.0.  Patches PSX*2*65 and PSS*1*131 will 
 be released as stand-alone patches.  Since there is an implementation 
 dependency between the multi-build distribution and the stand-alone 
 patches, PSX*2*65 and PSS*1*131 must be installed prior to the 
 installation of the multi-build.  For more specific instructions please 
 refer to the installation steps provided in each of the patches.
  
 This patch modifies the Electronic Claims Management Engine v1.0 
 application as described below:
  
 1. ECME User Screen:
    - Reversal Action:
       - Allow a Claims Tracking entry to be closed for a reversal from 
         the ECME User Screen:
         If a released claim is being manually reversed from the ECME user
         screen, ECME will prompt the user whether the claims tracking
         entry should be marked as non-billable.  If the user answers YES,
         the user will be prompted for a Claims Tracking Non-Billable
         Reason and a Comment.  If the reversal is accepted by the payer,
         the ECME claim will be closed and a close event will then be sent
         to IB with the non-billable reason and comment provided by the
         user.  IB will mark the episode as non-billable and release the
         first-party copay.
       - Allow claims with Reversal Other status to be reversed:
         The Reversal action of the ECME User Screen was updated to allow a
         user to select a claim with a status of Reversal Other.  
         Previously, these claims could not be processed via the ECME User
         Screen.
  
    - Close Claim Action:
      The Close Claim action was modified to allow a reversal to be
      selected if the reversal is released and accepted.  Since this action
      will now allow released reversals to be closed, the action name was
      changed from Close Rejected Claim to Close Claim.
  
    - Change View Updates:
       - Eligibility Indicator:
         An eligibility prompt was added to the change view action to
         assist in identifying the eligibility type of the claim.  The
         possible input will be TRICARE, Veteran, or ALL with an initial
         default of Veteran.  User selection will determine which
         eligibility claims show up on the user screen.
       - Open/Close Claims Selection:
         A new prompt was added which allows the user to select Open,
         Closed, or All claims with an initial default of Open.  User
         selection will determine whether open and/or closed claims show up
         on the user screen.
       - Submission Type Selection:
         A submission type prompt was added which will allow the user to
         select billing requests, reversal claims, or all claims with an
         initial default of All.  User selection will determine which type
         of claims show up on the user screen.
       - Multiple Insurance Selection:
         The Insurance Selection prompt was changed to 'Display Specific 
         (I)nsurance Companies or (A)ll'.  If the user selects 'I' for
         Specific Insurance Companies, the user will then be able to select
         one or more specific insurance companies.  The insurances that can
         be selected will be based on the entire list of insurance
         companies and not based on the insurance companies which are
         applicable to the range specified by the user in the Activity
         Timeframe question.
  
    - Closed Claims Indicator:
      Since the user will be able to select closed claim in the change view
      action, the claims that are displayed will need an indicator so that
      the user knows which claims are open and which claims are closed.  
      The display for an open claim will not change.  In other words, if
      there is no indicator on the claim's line, the claim is an open
      claim.  Closed claims will have the string '/Closed' after the status
      display.  For claim lines with multiple statuses, the closed
      indicator will be after the first status.
      In addition, the REV Reverse Payable Claim, RES Resubmit Claim, CLO
      Close Claim, WRK Send to Worklist, and RED Resubmit Claim w/EDITS
      actions in the ECME User Screen have been modified to not allow
      selection of a closed claim. In order to perform these actions a
      closed claim must be reopened.
  
    - Eligibility Display:
      Since the user will have a new eligibility prompt in the ECME User
      Screen Change View action, the display of the user screen will need
      to indicate the eligibility of the patient and insurance.  To
      accommodate this, the '*Done*'/percentage display has been replaced
      with an eligibility indicator ('Vet' for Veterans and 'Tri' for
      TRICARE).
  
    - Add Reopen Closed Claim Action:
      Since users will have the option to display closed claims on the ECME
      user screen, a new hidden action Reopen Closed Claim (ROC) will be
      added that will allow a user to open a closed claim directly from the
      user screen instead of using the Re Open CLOSED Claims option [BPS
      REOPEN CLOSED CLAIM] that is on the Maintenance menu.  The execution
      of this action requires the BPS MANAGER security key, which is the
      same key needed to run the Re Open CLOSED Claim option.
  
    - New Options on the Further Research Menu:
      The Further Research screen was updated to include a new action
      called Group Plan Menu (GRPL).  This will take the user to a sub-menu
      with three selections - Edit PLAN APPLICATION Sub-file (EPLA), Match
      Group Plan to a Pharmacy Plan (MGP), and Match Multiple Group Plans
      to a Pharmacy Plan (MMGP).  Selecting any of these will allow the
      user to jump to these options under the e-Pharmacy submenu (EPH) of 
      the Patient Insurance Menu.
  
  
   - Print Claim Log Action:
     The Print Claim Log action was updated to display the submitting user
     for each transmission where the information is available.
  
  
 2. Status Message for Unstranded Claims:
    A modification was made to ECME routines that changes name of the 
    statuses from "E STRANDED" to "E UNSTRANDED" and from "E REVERSAL 
    STRANDED" to "E REVERSAL UNSTRANDED". Also the status messages for the 
    user on the User Screen were changed accordingly - from "Stranded" to 
    "Unstranded" and from "Stranded reversal" to "Unstranded reversal".
    This modification will eliminate previous confusion for the user when
    their status became "Stranded".
  
 3. Reopen Closed Claims and Deleted Prescriptions:
    A modification was made to the Re Open CLOSED Claims option [BPS REOPEN
    CLOSED CLAIM] that prevents deleted prescriptions from showing up on
    the list of prescriptions allowed to be reopened. Deleted prescriptions
    are also prevented from being reopened using the new hidden protocol
    Reopen Closed Claims from the ECME User Screen.
  
 4. Insurance Selection for the Claim Results and Status Reports:
    A modification was made to seven options listed beneath the Claim
    Results and Status [BPS MENU RPT CLAIM STATUS] menu to allow the user
    to generate these reports for multiple insurances.
    The following options have been modified:
        Payable Claims Report [BPS RPT PAYABLE]
        Rejected Claims Report [BPS RPT REJECTION]
        Reversal Claims Report [BPS RPT REVERSAL]
        Claims Submitted, not yet Released [BPS RPT NOT RELEASED]
        Recent Transactions [BPS RPT RECENT TRANSACTIONS]
        Totals by Date [BPS RPT TOTALS BY DAY]
        Closed Claims Report [BPS RPT CLOSED CLAIMS]
  
 5. Rejected Claims Report:
    The Rejected Claims Report [BPS RPT REJECTION] option has been modified
    to include an Eligibility and Open/Closed prompts. The Eligibility
    prompt will allow the report to display claims with an eligibility of
    Tricare, Veteran, or All with an initial default of Veteran. The
    Open/Closed prompt will allow the report to display claims that are
    Open, Closed, or All with an initial default of Open. The output of the
    Rejected Claims report has been modified to display the Open/Closed
    state and the Eligibility.
  
 6. Reversal Claims Report and Closed Claims:
    The original intention of the Payable Claims, Rejected Claims, Reversal
    Claims, and Closed Claims reports was that a claim was suppose to show
    up on only one report but not more than one at the same time.  Now that
    we can close released, accepted reversals, the Reversal Claims report
    has been updated to no longer include closed claims.  If a reversal is
    closed, it will show up on the Closed Claims report as this was the
    last action performed on the claim.
  
 7. Implement Insurer Asleep Functionality:
    New functionality has been added to allow claims that have been
    rejected with NCPDP Reject Codes 90-98 to be automatically resubmitted
    at specific intervals.  Prior to this modification, claims that were
    rejected with these specific codes were treated as any other reject and
    the claim was reported as E REJECTED.  Now sites have the ability to
    maintain control over how these claims are processed by setting the
    interval time and number of retries that the system will use to
    resubmit claims returned from Emdeon or the third-party payer.  Two new
    fields have been added to the BPS SETUP file (#9002313.99) that are
    editable via the Edit Basic ECME Parameters [BPS SETUP BASIC PARAMS] 
    option.  The INSURER ASLEEP INTERVAL field (#.05) will allow an input 
    between 0 and 29 minutes with a default of 20.  The INSURER ASLEEP
    RETRIES field (#.06) will allow an input between 0 and 99 retries with
    a default of 10.  If either the Insurer Asleep Interval or the Insurer
    Asleep Retries parameter is set to 0, the functionality will be
    disabled.  If the user does disable this functionality, any claims that
    are in an insurer asleep state will automatically be resubmitted to the
    payer.
  
 8. Processing Queue Fix:
    The ECME engine code was redesigned to allow multiple submissions of
    the same prescription and fill to be placed on the request queue at the
    same time.  Two new files BPS REQUESTS file (#9002313.77) and BPS
    INSURER DATA file (#9002313.77) was introduced to support this
    modification.  Now all requests sent to the payers for payment claims
    or reversals submitted by packages are placed in the queue as records
    in the BPS REQUESTS file.  Initially all new records are getting
    "SCHEDULED" process flag value.  Then the record that must be processed
    first changes its process flag to "ACTIVATED" and this makes it
    available for the background job.  This background job monitors
    continuously records in the BPS REQUESTS file and un-queue (starts
    processing) requests as soon as they become "ACTIVATED". When the ECME
    engine receives a response from the payer it checks whether the request
    was successful and if so then ECME engine identifies the request (if
    any) that needs to be activated next for this prescription/refill. Thus
    the newly activated request becomes available for the background job
    and it starts processing the next request for the prescription/refill
    in the right order.
  
    If one of scheduled requests was unsuccessful then all following
    sequential requests will be cancelled.  Also if one of the requests
    becomes stranded then un-stranding the claim via View/Unstrand Claims
    Not Completed option will result in cancelling all following requests.
    This menu option also was modified to handle this situation.
  
    The new BPS INSURER DATA file (#9002313.77) is used to store billing 
    determination data returned by IB package.  Both files are used to 
    populate the transaction record in BPS TRANSACTION file at the time
    the background job un-queues the request.
  
    This modification required changes in STATUS APIs to handle the 
    situation when a request is waiting processing in the queue.
  
    The Developer Log option reflects all significant stages of new request
    processing including un-queuing, determination of the next request and
    other details to provide enough information for trouble shooting.
  
    Most of the changes made for this functionality are transparent to the 
    user.
  
    The new Processing Queue functionality also supports other changes made
    in this patch such as Insurer Asleep Functionality and changes made to 
    Reversal Action of the User Screen (Close after Reversal). 
  
  
 9. Registration Updates:
    - The registration process has been reworked to avoid multiple "Enter 
      RETURN to continue or '^' to exit:" prompts when walking through the 
      various registration prompts.  Users will now just be able to walk 
      directly through the prompts avoiding extra prompting to continue.  
      Additionally if a user enters "^" to exit the registration process
      the software will now respect their wish to exit and exit the option
      Register Pharmacy with Austin Automation Center [BPS SETUP REGISTER
      PHARMACY].
    - Hours of Operation removed.  The hours of operation data and prompts 
      were never utilized for any of the ePharmacy process; therefore the 
      prompts for Hours of Operation have been removed from the
      registration prompts.
    - MailMan message notification.  Prior to this patch if the
      registration process encountered an error a MailMan message
      notification was only sent to the site's primary email address
      contact in the New Person (#200) file.  With this patch the MailMan
      notification will be sent to the Primary Site and Alternate Site
      contact to both their VistA MailMan and their email address in the
      New Person (#200) file.
    - Registration Data Display.  Prior to this patch when completing the 
      registration process, the data to be transmitted was displayed in HL7
      format.  This patch updates the display to show the data in a user 
      readable format.
    - Additional Tracking.  This patch implements additional tracking to 
      determine when a site was last confirmed as registered in Austin.  
      The new field DATE SITE LAST CONFIRMED (#.07) in the BPS SETUP
      (#9002313.99) file will be populated when an application 
      acknowledgment (ACK) message is returned from Austin.
    - Inactive BPS Pharmacies.  Prior to this patch all BPS Pharmacies were
      transmitted to Austin every night regardless of their status.  This 
      caused problems when a site inactived a BPS Pharmacy yet it may have
      the same NPI or NABP number as an active BPS Pharmacy.  With this
      patch, an inactive BPS Pharmacy will only be sent once to indicate to
      Austin the BPS Pharmacy is inactive.  After which it will not be sent
      in any future registration messages unless the status is changed back
      to active (note Remedy Ticket # HD0000000251937).
  
  
 10. Cleanup of Obsolete Components:
    - The following files are being removed from the BPS package.  They
      were never utilized within the VA's implementation of ePharmacy.
        BPS NCPDP FIELD 103 (#9002313.82103) file
        BPS NCPDP FIELD 305 (#9002313.82305) file
        BPS NCPDP FIELD 306 (#9002313.82306) file
        BPS NCPDP FIELD 307 (#9002313.82307) file
        BPS NCPDP FIELD 308 (#9002313.82308) file
        BPS NCPDP FIELD 309 (#9002313.82309) file
        BPS NCPDP FIELD 406 (#9002313.82406) file
        BPS NCPDP FIELD 408 (#9002313.82408) file
        BPS NCPDP FIELD 416 (#9002313.82416) file
        BPS NCPDP FIELD 419 (#9002313.82419) file
        BPS NCPDP FIELD 420 (#9002313.8242) file
        BPS NCPDP FIELD 423 (#9002313.82423) file
        BPS NCPDP FIELD 425 (#9002313.82425) file
        BPS NCPDP FIELD 429 (#9002313.82429) file
        BPS NCPDP FIELD 432 (#9002313.82432) file
        BPS NCPDP FIELD 436 (#9002313.82436) file
        BPS NCPDP FIELD 439 (#9002313.82439) file
        BPS NCPDP FIELD 440 (#9002313.8244) file
        BPS NCPDP FIELD 441 (#9002313.82441) file
        BPS NCPDP FIELD 461 (#9002313.82461) file
        BPS NCPDP FIELD 501 (#9002313.82501) file
        BPS NCPDP FIELD 522 (#9002313.82522) file
        BPS NCPDP FIELD 528 (#9002313.82528) file
        BPS NCPDP FIELD 529 (#9002313.82529) file
        BPS NCPDP FIELD 532 (#9002313.82532) file
        BPS NCPDP FIELD 533 (#9002313.82533) file
        BPS NCPDP FIELD 535 (#9002313.82535) file
  
    - The following files did not adhere to VA programming standards.  
      Because of so many changes in the following files their entire file 
      definition is being deleted and re-installed through the install
      process of this patch.
        BPS NCPDP FIELD DEFS (#9002313.91) file
        BPS NCPDP FORMATS (#9002313.92) file
        BPS NCPDP REJECT CODES (#9002313.93) file
        BPS TRANSACTION (#9002313.59) file
        BPS CLAIMS (#9002313.02) file
        BPS RESPONSES (#9002313.03) file
        BPS PHARMACIES (#9002313.56) file
        BPS LOG OF TRANSACTIONS (#9002313.57) file
        BPS SETUP (#9002313.99) file
  
  
 11. Send Non-Clinical Reject Claims to Outpatient Pharmacy Reject 
     Worklist:
     The new action Send to Worklist was added to the ECME User Screen, it 
     allows ECME users to send rejected claims to Outpatient Pharmacy
     Reject Worklist.  This option is available only to those users that
     hold BPS MANAGER key.
  
     The Pharmacy site parameters can be configured to allow all reject
     claims to be sent to the worklist or to impose restrictions on this
     process by specifying certain reject codes that are only allowed to be
     sent to the worklist.
  
     The new action provides the user with the ability to enter a comment 
     which will be sent to Pharmacy worklist and will be visible for
     Pharmacy users.
  
  
 12. Drugs Non Covered functionality
     The BPSOSQL routine was modified to call IB API to notify Integrated 
     Billing package about rejected claims so IB can update a list of Non 
     Covered Drugs if necessary.  The IB report DRUGS NON COVERED REPORT
     was added to [BPS MENU MAINTENANCE] menu option to provide access to
     this report for ECME users. 
  
  
 13. NCPDP Claims data - Prescriber Phone Number
     A code change was made for the field PRESCRIBER PHONE NUMBER (498-PM)
     to now send the AGENT CASHIER PHONE NUMBER (#2.06) field of the IB
     SITE PARAMETERS (#350.9) file instead of the Prescriber's Home Number.
  
  
 14. To avoid daily MailMan messages indicating nothing, the night job has 
     been updated to only send MailMan messages when it has something to 
     report.  Every night the nightly job re-registers the site's
     pharmacies, auto reverses claims on prescriptions that were never
     released and inpatient claims and purges the BPS Log file.  After
     completion the system sends an MailMan message indicating what claims
     were reversed.  After install of the patch the nightly job will only
     send the MailMan message if there were claims that were actually
     reversed instead of indicating nothing was reversed.
  
  
 15. The format of the "RX not processed" e-mail message has been updated
     to include specific information about the issue in the text of the 
     messages.
  
  
 16. The software has been updated to allow the user to resubmit rejected
     and unstranded Tricare reversals.
  
  
 17. Non-standard && operators were replaced by & operator in BPSSCRRV
     routine.
  
  
 18. A DELAY feature has been added to the testing tool functionality to
     postpone claims and reversals processing for testing purposes.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 HD251937 - ECME Registration Problem
 HD270155 - BPS RPT CLOSED CLAIMS null data fields
  
  
  
 Overview of Remedy Ticket(s):
 -----------------------------
 HD251937 - ECME Registration Problem.
    Issue:  When the NPI became mandatory for BPS Pharmacy registration,
            BPS Pharmacies without a valid NPI were made inactive, but
            continued to attempt to transmit registration messages to
            Austin.  Without a valid NPI for the invalid BPS Pharmacy a
            daily MailMan message was generated to the site contact
            indicating invalid registration data.
    Resolution:  With the install of this patch once a site has been
            accepted by Austin as inactive, the nightly site registration
            process will discontinue attempting to transmit the inactive
            BPS Pharmacy to Austin, thereby stopping daily MailMan
            messages.
  
 HD270155 - BPS RPT CLOSED CLAIMS null data fields
    Issue:  When attempting to close a claim and the user's DUZ could 
            cause FileMan to do a lookup where multiple New Person entries
            are found the filing of the CLOSED BY (#903) field fails.
    Resolution:  With the install of this patch the user's DUZ is now 
            stuffed into the CLOSED BY (#903) field by use of the 4 ////
            stuffing.  Since the internal value is known there is no reason
            to do any lookup or data validation, the user who closes the
            claim will now be stuffed into the field.
  
  
  
 Components Sent With Patch
 --------------------------
 The following is a list of files included in this patch:
  
                                           UP    SEND  DATA
                                           DATE  SEC.  COMES  SITE   RSLV
 FILE #        NAME                        DD    CODE  W/FILE DATA   PTS
 -----------------------------------------------------------------------
 9002313.02  BPS CLAIMS                   YES   YES   NO                  
  
 9002313.03  BPS RESPONSES                YES   YES   NO                  
  
 9002313.15  BPS ASLEEP PAYERS            YES   YES   NO                  
  
 9002313.25  BPS NCPDP CLARIFICATION CODESYES   YES   YES    OVER   NO    NO
  
 9002313.26  BPS NCPDP PRIOR AUTHORIZATION TYPE CODEYESYESYESOVER   NO    NO
  
 9002313.32  BPS PAYER RESPONSE OVERRIDES YES   NO    NO                 NO
 Partial DD: subDD: 9002313.32 fld: .07
  
 9002313.56  BPS PHARMACIES               YES   YES   NO                  
  
 9002313.57  BPS LOG OF TRANSACTIONS      YES   YES   NO                  
  
 9002313.59  BPS TRANSACTION              YES   YES   NO                  NO
   DATA SCREEN: 
  
 9002313.77  BPS REQUESTS                 YES   NO    NO                  
  
 9002313.78  BPS INSURER DATA             YES   YES   NO                  
  
 9002313.91  BPS NCPDP FIELD DEFS         YES   YES   NO                  
  
 9002313.92  BPS NCPDP FORMATS            YES   YES   NO                  
  
 9002313.93  BPS NCPDP REJECT CODES       YES   YES   YES    REPL   NO    NO
  
 9002313.99  BPS SETUP                    YES   YES   NO                  
  
  
 The following is a list of files deleted in this patch:
  
 FILE #              NAME
 -------------------------------------
 9002313.82103       BPS NCPDP FIELD 103
 9002313.82305       BPS NCPDP FIELD 305
 9002313.82306       BPS NCPDP FIELD 306
 9002313.82307       BPS NCPDP FIELD 307
 9002313.82308       BPS NCPDP FIELD 308
 9002313.82309       BPS NCPDP FIELD 309
 9002313.82406       BPS NCPDP FIELD 406
 9002313.82408       BPS NCPDP FIELD 408
 9002313.82416       BPS NCPDP FIELD 416
 9002313.82419       BPS NCPDP FIELD 419
 9002313.8242        BPS NCPDP FIELD 420
 9002313.82423       BPS NCPDP FIELD 423
 9002313.82425       BPS NCPDP FIELD 425
 9002313.82429       BPS NCPDP FIELD 429
 9002313.82432       BPS NCPDP FIELD 432
 9002313.82436       BPS NCPDP FIELD 436
 9002313.82439       BPS NCPDP FIELD 439
 9002313.8244        BPS NCPDP FIELD 440
 9002313.82441       BPS NCPDP FIELD 441
 9002313.82461       BPS NCPDP FIELD 461
 9002313.82501       BPS NCPDP FIELD 501
 9002313.82522       BPS NCPDP FIELD 522
 9002313.82528       BPS NCPDP FIELD 528
 9002313.82529       BPS NCPDP FIELD 529
 9002313.82532       BPS NCPDP FIELD 532
 9002313.82533       BPS NCPDP FIELD 533
 9002313.82535       BPS NCPDP FIELD 535
  
  
 The following is a list of fields included in this patch:
  
 Field Name (Number)                   File Name (Number)
                                       Subfile Name (Number)
 -------------------                   ------------------
 CERTIFICATION IEN (902.23)            BPS TRANSACTIONS (9002313.59)
  
  
 The following is a list of input templates deleted in this patch:
  
 Template Name                  File Name (Number)
 -------------                  ------------------
 BPSJ ALT CONTACT ENTER/EDIT    FILE #9002313.99
 BPSJ CONTACT ENTER/EDIT        FILE #9002313.99
 BPSJ PHARM ALT CONT ENTER/EDIT FILE #9002313.56
 BPSJ PHARM CONTACT ENTER/EDIT  FILE #9002313.56
 BPSJ PHARMACIST ENTER/EDIT     FILE #9002313.56 
 BPSJ PHARMACY SITE ENTER/EDIT  FILE #9002313.56
  
  
 The following is a list of sort templates deleted in this patch:
  
 Template Name                File Name (Number)
 -------------                ------------------
 BPS TECH - FILES             FILE #1          
 BPS TECH - OPTIONS           FILE #19
  
  
 The following is a list of input templates included in this patch:
  
 Template Name                  File Name (Number)
 -------------                  ------------------
 BPSJ PHARMACY ENTER/EDIT       FILE #9002313.56
 BPSJ SITE SETUP                FILE #9002313.99
  
  
 The following is a list of options included in this patch:
  
 Option Name                      Distribution
 -----------                      ------------
 BPS MENU MAINTENANCE             USE AS LINK FOR MENU ITEMS
 BPS SETUP REGISTER PHARMACY      SEND TO SITE
 IB DRUGS NON COVERED REPORT      SEND TO SITE
  
 The following is a list of protocols included in this patch:
  
 Protocol Name             
 -----------
 BPS PRTCL ECME USRSCR
 BPS PRTCL IBCNR EDIT PLAN
 BPS PRTCL IBCNR GROUP PLAN MATCH 
 BPS PRTCL IBCNR PLAN MATCH
 BPS PRTCL RSCH GRPL       
 BPS PRTCL RSCH MENU       
 BPS PRTCL RSCH ON HOLD COPAY
 BPS PRTCL USRSCR CLOSE      
 BPS PRTCL USRSCR EXIT       
 BPS PRTCL USRSCR HIDDEN ACTIONS
 BPS PRTCL USRSCR PHARM WRKLST  
 BPS PRTCL USRSCR REOPEN CLOSED CLAIMS
  
  
 Documentation Retrieval:
 ========================
 Sites may retrieve documentation in one of the following ways:
  
  1.  The preferred method is to FTP the files from 
      download.vista.med.va.gov, which will transmit the files from the
      first available FTP server.  Use the appropriate FTP capability to 
      retrieve the files and use BINARY format.
  
  2.  Sites may also elect to retrieve documentation directly from a 
      specific server as follows:
  
      Albany          ftp.fo-albany.med.va.gov
      Hines           ftp.fo-hines.med.va.gov
      Salt Lake City  ftp.fo-slc.med.va.gov
  
  3.  Documentation can also be retrieved from the VistA Documentation 
      Library (VDL) on the Internet at the following address,
      http://www.va.gov/vdl.
  
 The documentation distribution includes:
  
     FILE NAME                             DESCRIPTION
     ---------------------------------------------------------------------
     bps_1_p7um.pdf                     ECME User Manual
     bps_1_p7tm.pdf                     ECME Technical Manual
  
  
  
  
 Test Sites:
 ===========
 Heartland-West HCS
 Louisville, KY
 Saginaw, MI
  
  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 Install Note:  Because of the clean up in #10 above, during the install 
 you will see several messages regarding files being deleted and for each 
 file being deleted the software will pause to allow your system's 
 hardware to catch up and avoid errors.  During the pause a message will 
 be displayed "- Deleting file #9002313.93, Waiting for hardware 3 
 seconds..."  The number of seconds may vary based on a system setting, 
 but this delay message is expected.
  
 To avoid disruptions, these patches should be installed when users are 
 not on the system and during non-peak hours.  Of particular concern would 
 be the items below.
  
     1.  Do not install the patch when ECME claims are being generated
         by the BPS Nightly Background Job option [BPS NIGHTLY
         BACKGROUND JOB].  Wait for this job to finish or complete the
         installation before this job starts.
     2.  Do not install the patch when prescriptions are being 
         transmitted to CMOP.  Wait for the CMOP transmission to finish 
         or complete the installation before the transmission starts.  
         Check with Pharmacy Service or your pharmacy Automated Data
         Processing Application Coordinator (ADPAC) to find out when
         CMOP transmissions occur.
     3.  In addition, note that you will be prompted to disable the
         following options during the installation:
  
             Billing Clerk's Menu     [IB BILLING CLERK MENU]
             Billing Supervisor Menu ... [IB BILLING SUPERVISOR MENU]
             Patient Insurance Menu ... [IBCN INSURANCE MGMT MENU]
             e-Pharmacy Menu ... [IBCNR E-PHARMACY MENU]
             ECME Billing Events Report option [IB ECME BILLING EVENTS]
             ECME [BPSMENU]
             ECME User Screen [BPS USER SCREEN]
             Rx (Prescriptions) [PSO RX]
             ePharmacy Menu [PSO EPHARMACY MENU]
             Suspense Functions [PSO PND]
  
  
  
 Install Time - Approximately 30 minutes
  
  
  
 1.  OBTAIN PATCHES
     --------------
     Patches PSX*2*65 and PSS*1*131 will be sent to your system upon
     release from the National Patch Module.
  
     Obtain the host file BPS_1_7_PSO_IB.KID, which contains the following
     three patch installs:
  
         BPS*1.0*7
         PSO*7.0*289
         IB*2.0*384
  
      Sites can retrieve VistA software from the following FTP addresses.
      The preferred method is to FTP the files from:
  
                     download.vista.med.va.gov
  
      This will transmit the files from the first available FTP server.
      Sites may also elect to retrieve software directly from a specific
      server as follows:
  
        Albany                  ftp.fo-albany.med.va.gov
        Hines                   ftp.fo-hines.med.va.gov
        Salt Lake City          ftp.fo-slc.med.va.gov
  
      The BPS_1_7_PSO_IB.KID host file is located in the anonymous.software
      directory.  Use ASCII Mode when downloading the file.
  
 2.  LOAD TRANSPORT GLOBAL FOR STAND-ALONE PATCHES
     ---------------------------------------------
     For patches PSX*2*65 and PSS*1*131, choose the PackMan message
     containing each of these patches and invoke the INSTALL/CHECK MESSAGE
     PackMan option.
  
 3.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu option
     [XPD MAIN]:
  
          Edits and Distribution ...
          Utilities ...
          Installation ...
  
     Select Kernel Installation & Distribution System Option: INStallation
                                                              ---
          Load a Distribution
          Print Transport Global
          Compare Transport Global to Current System
          Verify Checksums in Transport Global
          Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
          Backup a Transport Global
  
     Select Installation Option:
  
 4.  RUN OPTIONAL INSTALLATION OPTIONS FOR STAND-ALONE PATCHES
     ---------------------------------------------------------
     From the Installation menu, you may select to use the following
     options (when prompted for the INSTALL NAME, enter each of the
     stand-alone patches (PSX*2.0*65 and PSS*1.0*131)):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch.  It will not
         backup any other changes such as Database Definitions (DD's) or
         templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
  
 5.  INSTALL STAND-ALONE PATCHES
     ---------------------------
     This is the step to start the installation of this KIDS patch.  This
     will need to be run for each of the stand-alone patches (PSX*2*65 and
     PSS*1*131).
  
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted for the "Select INSTALL NAME:", enter the patch
         name.
     c.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
         YES//" answer NO.
     d.  When prompted "Want to DISABLE Scheduled Options, Menu
         Options, and Protocols? YES//" answer NO.
     e.  When prompted, "Device: Home//" respond with the correct device.
  
 6.  LOAD TRANSPORT GLOBAL FOR MULTI-BUILD
     -------------------------------------
     After the installation of the stand-alone patches is complete, return
     to the Installation menu.
  
     From the Installation menu, select the Load a Distribution option.
  
     When prompted for "Enter a Host File:", enter the full directory path
     where you saved the host file BPS_1_7_PSO_IB.KID (e.g.,
     SYS$SYSDEVICE:[ANONYMOUS]BPS_1_7_PSO_IB.KID).
  
     When prompted for "OK to continue with Load? NO//", enter "YES."
  
     The following will display:
  
       Loading Distribution...
  
         BPS PSO IB BUNDLE 3.0
         BPS*1.0*7
         PSO*7.0*289
         IB*2.0*384
       Use INSTALL NAME: BPS PSO IB BUNDLE 3.0 to install this
       Distribution.
  
 7.  RUN OPTIONAL INSTALLATION OPTIONS FOR MULTI-BUILD
     -------------------------------------------------
     From the Installation menu, you may select to use the following
     options (when prompted for the INSTALL NAME, enter
     BPS PSO IB BUNDLE 3.0):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch.  It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
  
 8.  INSTALL MULTI-BUILD
     -------------------
     This is the step to start the installation of this KIDS patch.  This
     will need to be run for the BPS PSO IB BUNDLE 3.0.
     
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted for the "Select INSTALL NAME:", enter BPS PSO IB
         BUNDLE 3.0.
     c.  For the PSO*7*289 patch when prompted "Incoming Mail Groups:  
         Enter the Coordinator for Mail Group 'PSO REJECTS BACKGROUND
         MESSAGE':", enter the User ID of the person who will serve as the
         coordinator for this new mail group.
     d.  For the BPS*1*7 patch, when prompted "Want KIDS to Rebuild Menu
         Trees Upon Completion of Install? YES//"  enter YES unless your
         system does this in a nightly TaskMan process.
     e.  For the PSO*7*289 patch, when prompted "Want KIDS to Rebuild Menu
         Trees Upon Completion of Install? YES//"  enter YES unless your
         system does this in a nightly TaskMan process.
     f.  For the IB*2*384 patch, when prompted "Want KIDS to Rebuild Menu
         Trees Upon Completion of Install? YES//"  enter YES unless your
         system does this in a nightly TaskMan process.
     g.  When prompted "Want KIDS to INHIBIT LOGONs during the
         install? YES//"  enter NO.
     h.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? YES//"  enter YES.
     i.  When prompted "Enter options you wish to mark as 'Out Of
         Order':"  enter the following options:
      
           Billing Clerk's Menu     [IB BILLING CLERK MENU]
           Billing Supervisor Menu ... [IB BILLING SUPERVISOR MENU]
           Patient Insurance Menu ... [IBCN INSURANCE MGMT MENU]
           e-Pharmacy Menu ... [IBCNR E-PHARMACY MENU]
           ECME Billing Events Report option [IB ECME BILLING EVENTS]
           ECME [BPSMENU]
           ECME User Screen [BPS USER SCREEN]
           Rx (Prescriptions) [PSO RX]
           ePharmacy Menu [PSO EPHARMACY MENU]
           Suspense Functions [PSO PND] 
  
     j.  When prompted "Enter protocols you wish to mark as 'Out Of
         Order':"  enter <return>.
     k.  When prompted "Delay Install (Minutes):  (0-60): 0//"  enter an
         appropriate number of minutes to delay the installation in 
         order to give users enough time to exit the disabled options
         before the installation starts.
     l.  When prompted "Device: Home//"  respond with the correct device.
  
  
  
 The BPS post-install routine delivered with BPS*1*7 will do the tasks 
 listed below.  This post-install will be tasked and may take several 
 hours to run.  The post-install routine BPS01P7 is being left on the 
 system after the install.  They will be deleted with a future patch.
 - Since the Hours of Operation are being removed from the registration 
   process, the data currently stored in the BPS PHARMACIES (#9002313.56)
   for hours of operation is being removed.
 - The BPS RESPONSES (#9002313.03) file used to have a field for Sales Tax 
   Paid.  This field no longer exists in the new refreshed file; therefore
   any data in this old field is being removed.
 - The BPS SETUP (#9002313.99) file used to have a field called '*M 
   Vendor'.  This field no longer exists in the new refreshed file; 
   therefore any data that may have been in that field that is not related 
   to the new field's definition is being removed.
 - Prior to this version of the software there were cases where an 
   external date was stored in the date field DATE REOPENED (#906) in the 
   BPS CLAIMS (#9002313.02) file.  The post install will search for
   external date storage and correct it by converting it to an internal
   date format.
 - In the BPS CLAIMS (#9002313.02) file, Medication(s) (#9002313.0201) 
   sub-file, Medication Number (#.03) field there was duplicate data stored
   that was never used.  The post install will remove the duplicate data 
   since the field is no longer being included in the file and the 
   associated, never used, "AC" cross reference removed.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: BPS01P2
Routine Name: BPS01P5
Routine Name: BPS01P5A
Routine Name: BPS01P5B
Routine Name: BPS01P5C
Routine Name: BPS10P7
    Before:       n/a   After: B26269995  **7**
Routine Name: BPSBCKJ
    Before: B46482167   After: B46863482  **1,2,5,7**
Routine Name: BPSBUTL
    Before: B49471092   After: B52438241  **1,3,2,5,7**
Routine Name: BPSECFM
    Before: B10623995   After: B10863158  **1,7**
Routine Name: BPSECMP2
    Before: B65371165   After: B65381768  **1,5,6,7**
Routine Name: BPSECMPS
    Before: B69380294   After: B75418064  **1,2,5,6,7**
Routine Name: BPSGRPL
    Before:       n/a   After:  B2437536  **7**
Routine Name: BPSJACK
    Before: B35592079   After: B36662405  **1,2,5,7**
Routine Name: BPSJAREG
    Before: B13096479   After: B11441916  **1,2,5,7**
Routine Name: BPSJINI1
Routine Name: BPSJINIT
    Before: B36083922   After: B16011071  **1,3,2,5,7**
Routine Name: BPSJPREG
    Before: B18672204   After: B20416052  **1,3,2,5,7**
Routine Name: BPSJUTL
    Before:  B9622844   After:  B9363342  **1,2,5,7**
Routine Name: BPSJVAL1
    Before: B15725764   After: B16799335  **1,5,7**
Routine Name: BPSJVAL2
    Before: B28991650   After: B28993477  **1,2,5,7**
Routine Name: BPSJZQR
    Before:  B2363888   After:  B3046471  **1,3,7**
Routine Name: BPSJZRP
    Before: B23528734   After: B12105763  **1,2,7**
Routine Name: BPSNCPD1
    Before: B70088175   After: B46831868  **1,3,5,6,7**
Routine Name: BPSNCPD2
    Before: B37690318   After: B37810791  **1,5,6,7**
Routine Name: BPSNCPD3
    Before: B16349234   After: B28795294  **1,5,6,7**
Routine Name: BPSNCPD4
    Before:  B4013558   After: B40771134  **6,7**
Routine Name: BPSNCPD5
    Before:       n/a   After: B64980990  **7**
Routine Name: BPSNCPD6
    Before:       n/a   After: B36903046  **7**
Routine Name: BPSNCPDP
    Before: B71265922   After: B54845917  **1,3,4,2,5,6,7**
Routine Name: BPSOSCD
    Before: B38448977   After: B38794587  **1,3,2,5,7**
Routine Name: BPSOSCE
    Before: B14464874   After: B13508896  **1,5,7**
Routine Name: BPSOSIY
    Before: B54076368   After: B55797518  **1,3,5,6,7**
Routine Name: BPSOSIZ
    Before: B12107785   After: B14362353  **1,5,7**
Routine Name: BPSOSO1
    Before:  B2720464   After:  B2986345  **1,7**
Routine Name: BPSOSQ2
    Before: B19065204   After: B18999575  **1,5,7**
Routine Name: BPSOSQ4
    Before: B18119106   After: B46598620  **1,5,7**
Routine Name: BPSOSQA
    Before:  B6788168   After:  B8495270  **1,5,7**
Routine Name: BPSOSQF
    Before:  B8677183   After:  B8536069  **1,5,7**
Routine Name: BPSOSQL
    Before: B17767813   After: B22164075  **1,5,7**
Routine Name: BPSOSRB
    Before: B30030353   After: B38286741  **1,5,7**
Routine Name: BPSOSRX
    Before: B28605769   After: B40176170  **1,5,7**
Routine Name: BPSOSRX2
    Before:       n/a   After: B19493151  **7**
Routine Name: BPSOSRX3
    Before:       n/a   After: B60624911  **7**
Routine Name: BPSOSRX4
    Before:       n/a   After: B38901734  **7**
Routine Name: BPSOSRX5
    Before:       n/a   After: B30558901  **7**
Routine Name: BPSOSRX6
    Before:       n/a   After: B25462490  **7**
Routine Name: BPSOSRX7
    Before:       n/a   After: B26288315  **7**
Routine Name: BPSOSRX8
    Before:       n/a   After: B22051341  **7**
Routine Name: BPSOSS8
    Before:  B1373912   After:  B1703935  **1,5,7**
Routine Name: BPSOSU
    Before: B49057530   After: B40258951  **1,2,5,7**
Routine Name: BPSOSU1
    Before: B17021786   After: B17364253  **1,7**
Routine Name: BPSOSU2
    Before:  B3426741   After:  B3696571  **1,7**
Routine Name: BPSOSU3
    Before:  B2603527   After:  B2862686  **1,7**
Routine Name: BPSOSU4
    Before: B24645469   After: B25067052  **1,7**
Routine Name: BPSOSU5
    Before:  B1961538   After:  B2226067  **1,7**
Routine Name: BPSOSU9
    Before:  B5894878   After:  B6204766  **1,7**
Routine Name: BPSOSUC
    Before:  B6143853   After:  B6202882  **1,5,7**
Routine Name: BPSOSUE
    Before: B23210252   After: B23427846  **1,7**
Routine Name: BPSREOP1
    Before: B27740075   After: B59193506  **3,7**
Routine Name: BPSRES
    Before: B65826768   After: B66886236  **3,5,7**
Routine Name: BPSRPAY
    Before: B35284657   After: B35245645  **1,7**
Routine Name: BPSRPT0
    Before: B20527507   After: B22975830  **1,5,7**
Routine Name: BPSRPT1
    Before: B48512534   After: B52062138  **1,5,7**
Routine Name: BPSRPT3
    Before: B36736728   After: B37506169  **1,3,5,7**
Routine Name: BPSRPT4
    Before: B66657579   After: B67405446  **1,5,7**
Routine Name: BPSRPT5
    Before: B83699658   After: B72711123  **1,3,5,7**
Routine Name: BPSRPT6
    Before: B58276933   After: B59574231  **1,3,5,7**
Routine Name: BPSRPT7
    Before: B69704437   After: B77006502  **1,3,5,7**
Routine Name: BPSRPT8
    Before: B76134264   After: B78632943  **1,3,5,7**
Routine Name: BPSSCR02
    Before: B44572484   After: B42664540  **1,3,7**
Routine Name: BPSSCR03
    Before: B43854425   After: B48894943  **1,5,7**
Routine Name: BPSSCR05
    Before:       n/a   After:  B7623180  **7**
Routine Name: BPSSCRCL
    Before: B76014207   After: B65041094  **1,3,5,7**
Routine Name: BPSSCRCU
    Before:  B3767208   After:  B9528540  **1,5,7**
Routine Name: BPSSCRCV
    Before: B47506376   After: B45399490  **1,5,7**
Routine Name: BPSSCRLG
    Before: B91531978   After: B95335082  **1,5,7**
Routine Name: BPSSCRRS
    Before: B25558353   After: B34449344  **1,3,5,7**
Routine Name: BPSSCRRV
    Before: B16310738   After: B37049932  **1,5,6,7**
Routine Name: BPSSCRSL
    Before: B13407810   After: B14489161  **1,7**
Routine Name: BPSSCRU3
    Before: B34384463   After: B30240821  **1,5,7**
Routine Name: BPSSCRU5
    Before: B59880838   After: B61189921  **1,5,7**
Routine Name: BPSTEST
    Before: B48227959   After: B58349994  **6,7**
Routine Name: BPSUSCR
    Before:  B1083418   After:  B1332566  **1,7**
Routine Name: BPSUSCR1
    Before: B20439548   After: B33759524  **1,5,7**
Routine Name: BPSUSCR2
    Before:       n/a   After:  B9480735  **7**
Routine Name: BPSUSCR4
    Before: B10854593   After: B12367629  **1,3,7**
Routine Name: BPSUTIL2
    Before:       n/a   After: B11085686  **7**
Routine Name: BPSWRKLS
    Before:       n/a   After: B27286584  **7**

=============================================================================
User Information:
Entered By  : ZEIGLER,EDWARD L              Date Entered  : OCT 25, 2007
Completed By: LYNCH,MARY F.                 Date Completed: JUL 06, 2009
Released By : BOTTINI,STEVE                 Date Released : JUL 09, 2009
=============================================================================


Packman Mail Message:
=====================

No routines included
