$TXT Created by CASTLE,JOHN at INOCACHE.FO-BIRM.MED.VA.GOV  (KIDS) on Thursday, 12/11/08 at 14:44
=============================================================================
Run Date: APR 01, 2009                     Designation: PSJ*5*213
Package : PSJ - INPATIENT MEDICATIONS         Priority: Mandatory
Version : 5       SEQ #189                      Status: Released
                  Compliance Date: MAY 02, 2009
=============================================================================

Associated patches: (v)PSJ*5*134   <<= must be installed BEFORE `PSJ*5*213'
                    (v)PSJ*5*203   <<= must be installed BEFORE `PSJ*5*213'

Subject: CPRS GUI V27 FOLLOW UP - INPATIENT MEDICATIONS

Category: 
  - Routine
  - PATCH FOR A PATCH

Description:
============

 This patch contains four Inpatient Medications V. 5.0 fixes that sites
 logged during the compliance date period for the CPRS (Computerized Patient
 Record System) GUI v27 release.
  
 1. The first issue, Remedy Ticket HD280022, pertains to Day of Week
 schedules entered for IV Piggyback orders via the CPRS IV Fluids Dialog.
 If the user creates a schedule using the schedule builder, and uses the
 new format of Day of Week@Schedule (example: MO-WE-FR@BID), and if the
 root schedule (MO-WE-FR) exists in the ADMINISTRATION SCHEDULE File (#51.1),
 when the order is viewed in backdoor pharmacy, the administration time(s)
 for the order will be null.
  
 Problem:
 --------
 Admin times are null if a Day of Week schedule created via the schedule
 builder in CPRS exists in the ADMINISTRATION SCHEDULE File (#51.1).
  
 Resolution:
 -----------
 In PSGS0, do not QUIT before the admin times are set if the schedule
 is a Day of Week schedule, even if it exists in the schedule file.
  
  
 2. The second issue, Remedy Ticket HD246438 and its duplicates, is also 
 logged as Patient Safety Issue PSI-08-068,PSPO #782.  This is an issue
 with an invalid frequency for IV Piggyback orders.  This issue has existed
 prior to the release of CPRS GUI v27, but the sites are reporting an
 increase in the occurrence of the problem after the install of CPRS GUI v27.
 For unknown reasons, the frequency of some IV Piggyback orders is null
 when it should contain a value.  No site or developer has been able to 
 reproduce this issue at-will, and there does not appear to be any
 pattern to the processes or procedures that precede the occurrence of this
 problem. With this patch, if the frequency for an IV Piggyback order is
 null, and it should contain a value, the code will attempt to directly
 set an appropriate frequency into the PHARMACY PATIENT File (#55) upon
 verification of the order, and upon the order becoming active.
  
 Problem:
 --------
 The frequency is being set to null very sporadically for IV Piggyback
 orders.  No root cause is known.
  
 Resolution:
 -----------
 During the verification process, if the IV is intermittent, and the
 frequency is null, attempt to re-set the frequency based on the name
 of the schedule as well as other variables that should
 contain the value of the frequency.  These changes are in routine PSIVORFB.
  
 3. The third issue, Remedy Ticket HD274682 and its duplicates, is an
 undefined variable error in the new Meds Tab sort for CPRS.  The root
 cause of the problem is that a pointer to the PHARMACY ORDERABLE ITEM File
 (#50.7) is missing in either the NON-VERIFIED ORDERS File (#53.1) or the
 PHARMACY PATIENT File (#55).  Because the pointer does not exist, when
 a temporary global is being built to display the orders for the patient, an
 undefined variable error occurs.
  
 Problem:
 --------
 Very old orders exist in the system that do not contain a pointer to
 the orderable item.  When the new Meds Tab sort routines attempt to
 use the pointer value as a subscript in a ^TMP global setting, and the
 pointer's value is null, a null subscript error occurs.  This causes
 a hard error in CPRS and shuts CPRS down.
  
 Resolution:
 -----------
 If the pointer to the orderable item does not exist, the routines will
 use the phrase "Orderable Item Not Found" as the subscript value in place
 of what should be the name of the orderable item.  This allows the Meds
 Tab sort routines to process without error, and the patient's medications
 appear without problems on the CPRS Meds tab.  The updated routines are
 PSJORRO, PSJORRN, and PSJORRN1.
  
 4. The fourth issue addressed by this patch is Remedy Ticket HD280040, which
 deals with an inconsistency between CPRS and backdoor pharmacy with respect
 to continuous IV orders.  If the IV order originates from CPRS, a
 fractional infusion rate of < 1 ml/hr (0.9 ml/hr for example), backdoor
 pharmacy allows the infusion rate, and the order can be finished and
 verified without issue.  However, if the order originates from backdoor
 pharmacy, a fractional infusion rate < 1 ml/hr is not accepted, and the
 user is presented an error message stating, "Your infusion rate is in an
 invalid format."  The user is not allowed to finish and verify the order.
 This patch will make backdoor pharmacy behave consistently with CPRS.
  
 Problem:
 --------
 If an order is entered via backdoor pharmacy for a continuous IV, and the
 order is created with a fractional infusion rate of < 1 ml/hr, the system
 presents the user with the error message, "Your infusion rate is in an
 invalid format", and the order cannot be completed.
  
 Resolution:
 -----------
 If the order has a fractional infusion rate < 1 ml/hr, the order must
 contain a leading zero, and the system will view the infusion rate as
 valid.  (example - infusion rate must be 0.9 ml/hr to be valid)
 The coding will affect routines PSIVSP, PSIVCHK, and PSIVORE.
  
 Associated New Service Request (NSR):
 =====================================
 N/A
  
 Associated PSI's:
 =================
 PSI-08-017
 PSI-08-068, PSPO #782
  
 Associated Remedy Ticket(s):
 ============================
 HD0000000246438 (Original) - Invalid Frequency
 HD0000000276568 (Duplicate)
 HD0000000276777 (Duplicate)
 HD0000000277053 (Duplicate)
 HD0000000277834 (Duplicate)
 HD0000000278157 (Duplicate)
 HD0000000281443 (Duplicate)
 HD0000000281995 (Duplicate)
 HD0000000286640 (Duplicate)
 HD0000000288911 (Duplicate)
 HD0000000274682 (Original) - Meds Tab Sort Error
 HD0000000275268 (Duplicate)
 HD0000000275842 (Duplicate)
 HD0000000276659 (Duplicate)
 HD0000000276670 (Duplicate)
 HD0000000279275 (Duplicate)
 HD0000000280609 (Duplicate)
 HD0000000281898 (Duplicate)
 HD0000000284406 (Duplicate)
 HD0000000284736 (Duplicate)
 HD0000000296817 (Duplicate)
 HD0000000280022 (Original) - Null Admin Times for IVPB
 HD0000000280040 (Original) - Infusion Rate < 1 ml/hr Inconsistency
  
 Associated E3Rs:
 ================
 N/A
  
 Test Sites:
 ===========
 New York Harbor HCS - New York, NY
 Oklahoma City, OK
 Spokane, WA
  
  
 Installation Instructions:
 ==========================
  
 It is recommended that this patch be installed after normal business hours
 while no Inpatient Pharmacy users are processing orders.
  
 Installation will take no longer than 2 minutes.
  
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
    2. From the Kernel Installation & Distribution System (KIDS) menu,
       select the Installation menu.
  
    3. From this menu, you may select to use the following options
       (when prompted for INSTALL NAME, enter PSJ*5.0*213):
      a. Backup a Transport Global - this option will create a backup
         message of any routines exported with the patch. It will NOT
         backup any other changes such as DDs or templates.
      b. Compare Transport Global to Current System - this option will
         allow you to view all changes that will be made when the patch
         is installed. It compares all components of the patch (routines,
         DDs, templates, etc.).
      c. Verify Checksums in Transport Global - this option will ensure
         the integrity of the routines that are in the transport global.
      d. Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
   4. Use the Install Package(s) option and select the package PSJ*5.0*213.
  
   5. When prompted "Want KIDS to INHIBIT LOGONs during the install? NO//"
      respond NO.
  
   6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? NO//" respond NO.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.0; INPATIENT MEDICATIONS ;**[Patch List]**;16 DEC 97;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSGS0
    Before: B51528600   After: B50790637  **12,25,26,50,63,74,83,116,110,
                                           111,133,138,174,134,213**
Routine Name: PSIVCHK
    Before: B15887140   After: B15710201  **54,58,81,111,213**
Routine Name: PSIVORE
    Before: B41482525   After: B41910420  **18,29,50,56,58,81,110,127,
                                           133,157,203,213**
Routine Name: PSIVORFB
    Before: B50190472   After: B55183274  **3,18,28,68,58,85,110,111,120,
                                           134,213**
Routine Name: PSIVSP
    Before: B37490534   After: B38850432  **30,37,41,50,56,74,83,111,133,
                                           138,134,213**
Routine Name: PSJORRN
    Before: B60756345   After: B61459384  **134,213**
Routine Name: PSJORRN1
    Before: B54888629   After: B55578785  **134,213**
Routine Name: PSJORRO
    Before: B61708639   After: B62410106  **134,213**

=============================================================================
User Information:
Entered By  : CASTLE,JOHN                   Date Entered  : OCT 03, 2008
Completed By: FARMER,LINDA                  Date Completed: MAR 31, 2009
Released By : CAMPBELL,THOMAS               Date Released : APR 01, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
