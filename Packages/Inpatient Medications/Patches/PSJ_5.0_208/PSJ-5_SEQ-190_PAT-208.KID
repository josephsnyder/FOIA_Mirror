Released PSJ*5*208 SEQ #190
Extracted from mail message
**KIDS**:PSJ*5.0*208^

**INSTALL NAME**
PSJ*5.0*208
"BLD",7055,0)
PSJ*5.0*208^INPATIENT MEDICATIONS^0^3090409^y
"BLD",7055,1,0)
^^4^4^3090409^
"BLD",7055,1,1,0)
This PSI patch addresses the following problem(s):
"BLD",7055,1,2,0)
 
"BLD",7055,1,3,0)
When a lab order is entered in CPRS with only a date in the Collection 
"BLD",7055,1,4,0)
Date/Time, the midnight draw times do not display.
"BLD",7055,4,0)
^9.64PA^^
"BLD",7055,6.3)
10
"BLD",7055,"ABPKG")
n
"BLD",7055,"KRN",0)
^9.67PA^8989.52^19
"BLD",7055,"KRN",.4,0)
.4
"BLD",7055,"KRN",.4,"NM",0)
^9.68A^^
"BLD",7055,"KRN",.401,0)
.401
"BLD",7055,"KRN",.402,0)
.402
"BLD",7055,"KRN",.403,0)
.403
"BLD",7055,"KRN",.5,0)
.5
"BLD",7055,"KRN",.84,0)
.84
"BLD",7055,"KRN",3.6,0)
3.6
"BLD",7055,"KRN",3.8,0)
3.8
"BLD",7055,"KRN",9.2,0)
9.2
"BLD",7055,"KRN",9.8,0)
9.8
"BLD",7055,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7055,"KRN",9.8,"NM",1,0)
PSJEEU^^0^B11795573
"BLD",7055,"KRN",9.8,"NM","B","PSJEEU",1)

"BLD",7055,"KRN",19,0)
19
"BLD",7055,"KRN",19,"NM",0)
^9.68A^^
"BLD",7055,"KRN",19.1,0)
19.1
"BLD",7055,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",7055,"KRN",101,0)
101
"BLD",7055,"KRN",101,"NM",0)
^9.68A^^
"BLD",7055,"KRN",409.61,0)
409.61
"BLD",7055,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",7055,"KRN",771,0)
771
"BLD",7055,"KRN",771,"NM",0)
^9.68A^^
"BLD",7055,"KRN",870,0)
870
"BLD",7055,"KRN",870,"NM",0)
^9.68A^^
"BLD",7055,"KRN",8989.51,0)
8989.51
"BLD",7055,"KRN",8989.51,"NM",0)
^9.68A^^
"BLD",7055,"KRN",8989.52,0)
8989.52
"BLD",7055,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",7055,"KRN",8994,0)
8994
"BLD",7055,"KRN",8994,"NM",0)
^9.68A^^
"BLD",7055,"KRN","B",.4,.4)

"BLD",7055,"KRN","B",.401,.401)

"BLD",7055,"KRN","B",.402,.402)

"BLD",7055,"KRN","B",.403,.403)

"BLD",7055,"KRN","B",.5,.5)

"BLD",7055,"KRN","B",.84,.84)

"BLD",7055,"KRN","B",3.6,3.6)

"BLD",7055,"KRN","B",3.8,3.8)

"BLD",7055,"KRN","B",9.2,9.2)

"BLD",7055,"KRN","B",9.8,9.8)

"BLD",7055,"KRN","B",19,19)

"BLD",7055,"KRN","B",19.1,19.1)

"BLD",7055,"KRN","B",101,101)

"BLD",7055,"KRN","B",409.61,409.61)

"BLD",7055,"KRN","B",771,771)

"BLD",7055,"KRN","B",870,870)

"BLD",7055,"KRN","B",8989.51,8989.51)

"BLD",7055,"KRN","B",8989.52,8989.52)

"BLD",7055,"KRN","B",8994,8994)

"BLD",7055,"QUES",0)
^9.62^^
"BLD",7055,"REQB",0)
^9.611^1^1
"BLD",7055,"REQB",1,0)
PSJ*5.0*3^2
"BLD",7055,"REQB","B","PSJ*5.0*3",1)

"MBREQ")
0
"PKG",197,-1)
1^1
"PKG",197,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",197,20,0)
^9.402P^^
"PKG",197,22,0)
^9.49I^1^1
"PKG",197,22,1,0)
5.0^2971215^2980917^11712
"PKG",197,22,1,"PAH",1,0)
208^3090409
"PKG",197,22,1,"PAH",1,1,0)
^^4^4^3090409
"PKG",197,22,1,"PAH",1,1,1,0)
This PSI patch addresses the following problem(s):
"PKG",197,22,1,"PAH",1,1,2,0)
 
"PKG",197,22,1,"PAH",1,1,3,0)
When a lab order is entered in CPRS with only a date in the Collection 
"PKG",197,22,1,"PAH",1,1,4,0)
Date/Time, the midnight draw times do not display.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSJEEU")
0^1^B11795573^B8269245
"RTN","PSJEEU",1,0)
PSJEEU ;BIR/CML3-EXTERNAL ENTRIES UTILITY ; 8/7/08 12:27pm
"RTN","PSJEEU",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**3,208**;16 DEC 97;Build 10
"RTN","PSJEEU",3,0)
 ;
"RTN","PSJEEU",4,0)
ENSV ; schedule validation
"RTN","PSJEEU",5,0)
 ;K PSJAT,PSJM I $S('$D(PSJPP):1,PSJPP="":1,PSJPP?.E1C.E:1,1:'$D(^DIC(9.4,"C",PSJPP))) Q
"RTN","PSJEEU",6,0)
 ; changed to remove ref to 9.4,"C"
"RTN","PSJEEU",7,0)
 K PSJAT,PSJM Q:$S('$D(PSJPP):1,PSJPP="":1,PSJPP?.E1C.E:1,1:0)  N DIC S X=PSJPP,DIC(0)="OX",DIC=9.4,D="C" D IX^DIC I +Y'>0 Q
"RTN","PSJEEU",8,0)
 Q:$D(PSJX)[0  I $D(PSJW),$S('PSJW:1,1:'$D(^SC(PSJW,0))) K PSJW
"RTN","PSJEEU",9,0)
 N D,DIC,DIE,Q,QX,SDW,SWD,X,X0,X1,X2,XT,Y,Z D EN^PSJSV Q
"RTN","PSJEEU",10,0)
 ;
"RTN","PSJEEU",11,0)
ENSVI ; standard schedule inquire
"RTN","PSJEEU",12,0)
 Q:$S('$D(PSJPP):1,PSJPP="":1,PSJPP?.E1C.E:1,1:0)  S X=PSJPP,DIC(0)="OX",DIC=9.4,D="C" D IX^DIC I +Y'>0 Q
"RTN","PSJEEU",13,0)
 D ENI^PSJSV0
"RTN","PSJEEU",14,0)
 Q
"RTN","PSJEEU",15,0)
 ;
"RTN","PSJEEU",16,0)
ENSPU ; schedule processor (count)
"RTN","PSJEEU",17,0)
 K PSJC S PSJC=-1 I $S('$D(PSJAT):1,'$D(PSJM):1,'$D(PSJSCH):1,'$D(PSJSD):1,1:'$D(PSJFD)) Q
"RTN","PSJEEU",18,0)
 ;the following line is for lab order with no start time PSJ*5.0*208
"RTN","PSJEEU",19,0)
 I PSJPP="LR",PSJSD'["." D
"RTN","PSJEEU",20,0)
 . N HRS,XPSJSD,I
"RTN","PSJEEU",21,0)
 . S XPSJSD=PSJSD
"RTN","PSJEEU",22,0)
 . F I=1:1 S HRS=(PSJM/60)*I,PSJSD=XPSJSD_"."_$E(0,HRS<10)_HRS Q:PSJSD>$$NOW^XLFDT()
"RTN","PSJEEU",23,0)
 . I ORDUR S PSJFD=$$FMADD^XLFDT(PSJSD,+ORDUR,,-1) ; Calculate the new stopdate/time based on the new start date/time
"RTN","PSJEEU",24,0)
 . I 'ORDUR S X=+$E(ORDUR,2,9) D
"RTN","PSJEEU",25,0)
 .. I PSJM S PSJFD=$$FMADD^XLFDT(PSJSD,,,(PSJM*X)-1) Q  ;X_#times
"RTN","PSJEEU",26,0)
 .. ;no freq in minutes --> day of week
"RTN","PSJEEU",27,0)
 .. N DAYS,LOCMX,SCHMX
"RTN","PSJEEU",28,0)
 .. S LOCMX=$$GET^XPAR("ALL^LOC.`"_+ORL,"LR MAX DAYS CONTINUOUS",1,"Q")
"RTN","PSJEEU",29,0)
 .. S SCHMX=$P(^PS(51.1,PSJY,0),U,7)
"RTN","PSJEEU",30,0)
 .. S DAYS=$S('SCHMX:LOCMX,LOCMX<SCHMX:LOCMX,1:SCHMX)
"RTN","PSJEEU",31,0)
 .. S PSJFD=$$FMADD^XLFDT(PSJSD,DAYS,,-1)
"RTN","PSJEEU",32,0)
 S:'$D(PSJOSD) PSJOSD=PSJSD S:'$D(PSJOFD) PSJOFD=PSJFD N AM,CD,H,HCD,I,J,M,MID,OD,PDL,PLSD,ST,Q,QQ,WD,WDT,WS,WS1,X,X1,X2,XX D EN^PSJSPU Q
"RTN","PSJEEU",33,0)
 ;
"RTN","PSJEEU",34,0)
ENPSJSE ; schedule edit for Inpatient Meds
"RTN","PSJEEU",35,0)
 S PSJPP="PSJ"
"RTN","PSJEEU",36,0)
 ;
"RTN","PSJEEU",37,0)
ENSE ; schedule edit
"RTN","PSJEEU",38,0)
 ;I $S('$D(PSJPP):1,PSJPP="":1,PSJPP?.E1C.E:1,1:'$D(^DIC(9.4,"C",PSJPP))) Q
"RTN","PSJEEU",39,0)
 ; changed to remove ref to 9.4,"C"
"RTN","PSJEEU",40,0)
 Q:$S('$D(PSJPP):1,PSJPP="":1,PSJPP?.E1C.E:1,1:0)  S X=PSJPP,DIC(0)="OX",DIC=9.4,D="C" D IX^DIC I +Y'>0 Q
"RTN","PSJEEU",41,0)
 I $D(PSJW),$S('PSJW:1,1:'$D(^SC(PSJW,0))) K PSJW
"RTN","PSJEEU",42,0)
 F FQ=0:0 K DIC S DIC="^PS(51.1,",DIC(0)="QEASL",DIC("DR")="4////"_PSJPP,DIC("W")="D DICW^PSSJSV0",D="AP"_PSJPP W ! D IX^DIC K DIC Q:Y'>0  S DIE="^PS(51.1,",DA=+Y,DR="[PSSJ "_$S(PSJPP="PSJ":"",1:"EXT ")_"SCHEDULE EDIT]" D ^DIE K DA,DIE,DR,PSJS
"RTN","PSJEEU",43,0)
 K:PSJPP="PSJ" PSJPP K D0,DI,DISYS,DQ,FQ,X,Y
"RTN","PSJEEU",44,0)
 Q
"RTN","PSJEEU",45,0)
 ;
"RTN","PSJEEU",46,0)
ENDSD ; default start date
"RTN","PSJEEU",47,0)
 I $S('$D(PSJSCH):1,'$D(PSJAT):1,1:'$D(PSJTS)) S PSJX="" Q
"RTN","PSJEEU",48,0)
 D ENDSD^PSJSPU0 Q
"RTN","PSJEEU",49,0)
 ;
"RTN","PSJEEU",50,0)
ENPSJSHE ; shift edit for Inpatient Meds
"RTN","PSJEEU",51,0)
 S PSJPP="PSJ"
"RTN","PSJEEU",52,0)
 ;
"RTN","PSJEEU",53,0)
ENSHE ; shift edit
"RTN","PSJEEU",54,0)
 ;I $S('$D(PSJPP):1,PSJPP="":1,PSJPP'?.ANP:1,1:'$D(^DIC(9.4,"C",PSJPP))) Q
"RTN","PSJEEU",55,0)
 ; changed to remove ref to 9.4,"C"
"RTN","PSJEEU",56,0)
 Q:$S('$D(PSJPP):1,PSJPP="":1,PSJPP'?.ANP:1,1:0)  S X=PSJPP,DIC(0)="OX",DIC=9.4,D="C" D IX^DIC I +Y'>0 Q
"RTN","PSJEEU",57,0)
 I $D(PSJW),$S('PSJW:1,1:'$D(^SC(PSJW,0))) K PSJW
"RTN","PSJEEU",58,0)
 F FQ=0:0 K DIC S DIC="^PS(51.15,",DIC(0)="AEQLS",DIC("DR")="4////"_PSJPP,D="AP"_PSJPP W ! D IX^DIC K DIC Q:Y'>0  S DIE="^PS(51.15,",DA=+Y,DR="[PSJ SHIFT EDIT]" D ^DIE K DA,DIE,DR
"RTN","PSJEEU",59,0)
 K FQ,X,Y Q
"RTN","PSJEEU",60,0)
 ;
"RTN","PSJEEU",61,0)
ENATV ; validate admin times
"RTN","PSJEEU",62,0)
 D ENCHK^PSJSV Q
"RTN","PSJEEU",63,0)
 ;
"RTN","PSJEEU",64,0)
ENSHV ;
"RTN","PSJEEU",65,0)
 D ENSHV^PSJSV Q
"VER")
8.0^22.0
"BLD",7055,6)
^190
**END**
**END**
