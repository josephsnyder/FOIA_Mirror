Released XT*7.3*114 SEQ #92
Extracted from mail message
**KIDS**:XT*7.3*114^

**INSTALL NAME**
XT*7.3*114
"BLD",1130,0)
XT*7.3*114^TOOLKIT^0^3080930^y
"BLD",1130,1,0)
^^3^3^3080911^
"BLD",1130,1,1,0)
 
"BLD",1130,1,2,0)
See patch XT*7.3*114 in the National Patch Module for complete 
"BLD",1130,1,3,0)
information on this patch.
"BLD",1130,4,0)
^9.64PA^^
"BLD",1130,6.3)
1
"BLD",1130,"KRN",0)
^9.67PA^9002226^21
"BLD",1130,"KRN",.4,0)
.4
"BLD",1130,"KRN",.401,0)
.401
"BLD",1130,"KRN",.402,0)
.402
"BLD",1130,"KRN",.403,0)
.403
"BLD",1130,"KRN",.5,0)
.5
"BLD",1130,"KRN",.84,0)
.84
"BLD",1130,"KRN",3.6,0)
3.6
"BLD",1130,"KRN",3.8,0)
3.8
"BLD",1130,"KRN",9.2,0)
9.2
"BLD",1130,"KRN",9.8,0)
9.8
"BLD",1130,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",1130,"KRN",9.8,"NM",1,0)
XTPMKPTC^^0^B77159451
"BLD",1130,"KRN",9.8,"NM","B","XTPMKPTC",1)

"BLD",1130,"KRN",19,0)
19
"BLD",1130,"KRN",19.1,0)
19.1
"BLD",1130,"KRN",101,0)
101
"BLD",1130,"KRN",409.61,0)
409.61
"BLD",1130,"KRN",771,0)
771
"BLD",1130,"KRN",779.2,0)
779.2
"BLD",1130,"KRN",870,0)
870
"BLD",1130,"KRN",8989.51,0)
8989.51
"BLD",1130,"KRN",8989.52,0)
8989.52
"BLD",1130,"KRN",8994,0)
8994
"BLD",1130,"KRN",9002226,0)
9002226
"BLD",1130,"KRN","B",.4,.4)

"BLD",1130,"KRN","B",.401,.401)

"BLD",1130,"KRN","B",.402,.402)

"BLD",1130,"KRN","B",.403,.403)

"BLD",1130,"KRN","B",.5,.5)

"BLD",1130,"KRN","B",.84,.84)

"BLD",1130,"KRN","B",3.6,3.6)

"BLD",1130,"KRN","B",3.8,3.8)

"BLD",1130,"KRN","B",9.2,9.2)

"BLD",1130,"KRN","B",9.8,9.8)

"BLD",1130,"KRN","B",19,19)

"BLD",1130,"KRN","B",19.1,19.1)

"BLD",1130,"KRN","B",101,101)

"BLD",1130,"KRN","B",409.61,409.61)

"BLD",1130,"KRN","B",771,771)

"BLD",1130,"KRN","B",779.2,779.2)

"BLD",1130,"KRN","B",870,870)

"BLD",1130,"KRN","B",8989.51,8989.51)

"BLD",1130,"KRN","B",8989.52,8989.52)

"BLD",1130,"KRN","B",8994,8994)

"BLD",1130,"KRN","B",9002226,9002226)

"BLD",1130,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",1130,"QUES",0)
^9.62^^
"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
114^3080930
"PKG",6,22,1,"PAH",1,1,0)
^^3^3^3080930
"PKG",6,22,1,"PAH",1,1,1,0)
 
"PKG",6,22,1,"PAH",1,1,2,0)
See patch XT*7.3*114 in the National Patch Module for complete 
"PKG",6,22,1,"PAH",1,1,3,0)
information on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XTPMKPTC")
0^1^B77159451^B75764182
"RTN","XTPMKPTC",1,0)
XTPMKPTC ;OAK/BP - PATCH MONITOR FUNCTIONS ;09/10/2008
"RTN","XTPMKPTC",2,0)
 ;;7.3;TOOLKIT;**98,100,114**; Apr 25, 1995;Build 1
"RTN","XTPMKPTC",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","XTPMKPTC",4,0)
 ;
"RTN","XTPMKPTC",5,0)
SRVR N XMB X XMREC
"RTN","XTPMKPTC",6,0)
 S XTBMLN1=$G(^XMB(3.9,XMZ,0))
"RTN","XTPMKPTC",7,0)
 I XTBMLN1["COMPLIANCE DATE CHANGE" G CKCMPDT
"RTN","XTPMKPTC",8,0)
 ;
"RTN","XTPMKPTC",9,0)
CHECK I XTBMLN1["TEST" G EXIT
"RTN","XTPMKPTC",10,0)
 I XTBMLN1["COMPLIANCE DATE CHANGE" G CKCMPDT
"RTN","XTPMKPTC",11,0)
 I XTBMLN1["Entered in error patch" DO  I $D(OUT) K OUT G EXIT
"RTN","XTPMKPTC",12,0)
 .F XTBX=1:1:8 S XTBY=$G(^XMB(3.9,XMZ,2,+XTBX,0)) I XTBY["The patch is" DO  Q:$D(OUT)
"RTN","XTPMKPTC",13,0)
 ..K OUT S X=$P(XTBY,"'",2),DIC(0)="QLM",DIC="^XPD(9.9," D ^DIC I Y<0 S OUT=1 Q
"RTN","XTPMKPTC",14,0)
 ..S DIK=DIC,DA=+Y D ^DIK K DIC,DIK,DA,XTBX,XTBY,Y,X S OUT=1 Q
"RTN","XTPMKPTC",15,0)
 I XTBMLN1'["SEQ #"!(XTBMLN1'["National Patch Module") G EXIT
"RTN","XTPMKPTC",16,0)
 ;
"RTN","XTPMKPTC",17,0)
CKCMPDT D CMPDTCG^XTPMKPCF I $D(XTBCMDCG) K XTBCMDCG G EXIT ;compliance date chg check
"RTN","XTPMKPTC",18,0)
 S XTBPTYPE=1 ;assume NON-KIDS until verified
"RTN","XTPMKPTC",19,0)
 F XTBX=0:0 S XTBX=$O(^XMB(3.9,XMZ,2,XTBX)) Q:XTBX=""!(+XTBX=0)  S XTBY=$G(^XMB(3.9,XMZ,2,XTBX,0)) I XTBY["$KID" DO
"RTN","XTPMKPTC",20,0)
 .S XTBZ=$O(^XMB(3.9,XMZ,2,XTBX)) I $G(^XMB(3.9,XMZ,2,XTBZ,0))["**INSTALL NAME**" S XTBPTYPE="",XTBX=9999999 Q
"RTN","XTPMKPTC",21,0)
 ;
"RTN","XTPMKPTC",22,0)
EXTINFO S (XTBDESG,XTBPKG,XTBPRIO,XTBVER,XTBSEQ,XTBSUB)=""
"RTN","XTPMKPTC",23,0)
 F  X XMREC Q:XMER<0!(XMRG["Description")  DO  Q:$D(NOFILE)
"RTN","XTPMKPTC",24,0)
 .K NOFILE
"RTN","XTPMKPTC",25,0)
 .Q:XMRG["====="
"RTN","XTPMKPTC",26,0)
 .I XMRG["Designation" S (XTBDESG,XTBINST)=$P(XMRG,"Designation: ",2) Q:$D(NOFILE)  DO
"RTN","XTPMKPTC",27,0)
 ..Q:XTBINST'["*"  ;*p114*-REM
"RTN","XTPMKPTC",28,0)
 ..S XTBY=$P(XTBDESG,"*",2) I XTBY'?1.2N1".".N S XTBY=XTBY_".0",$P(XTBINST,"*",2)=XTBY
"RTN","XTPMKPTC",29,0)
 .I XTBDESG="" S NOFILE=1 Q
"RTN","XTPMKPTC",30,0)
 .I $D(^XPD(9.9,"B",XTBDESG)) S NOFILE=1 Q  ; already done
"RTN","XTPMKPTC",31,0)
 .I XMRG["Package" DO
"RTN","XTPMKPTC",32,0)
 ..S XTBPKG=$P(XMRG,"Package : ",2),XTBPKG=$P(XTBPKG,"Priority: ",1),XTBPKG=$E(XTBPKG,1,35)
"RTN","XTPMKPTC",33,0)
 ..S XTBX=$L(XTBPKG)
"RTN","XTPMKPTC",34,0)
 ..F XX=XTBX:-1 S XTBY=$E(XTBPKG,XX,XX) Q:($A(XTBY)>64)!(XTBY="")  I $A(XTBY)=32 S $E(XTBPKG,XX,XX)="z"
"RTN","XTPMKPTC",35,0)
 ..I XTBPKG["z" S XTBPKG=$P(XTBPKG,"z",1)
"RTN","XTPMKPTC",36,0)
 .I XMRG["Priority" S XTBPRIO=$P(XMRG,"Priority: ",2) DO
"RTN","XTPMKPTC",37,0)
 ..S XTBPRIO=$P(XTBPRIO," ",1) S X=XTBPRIO X ^%ZOSF("UPPERCASE") S XTBPRIO=X
"RTN","XTPMKPTC",38,0)
 .I XMRG["Version" S XTBVER=$P(XMRG,"Version: ",1) DO
"RTN","XTPMKPTC",39,0)
 ..S XTBSEQ=$P(XTBVER,"#",2),XTBSEQ=$P(XTBSEQ," ",1)
"RTN","XTPMKPTC",40,0)
 ..S XTBVER=$P(XTBVER,"Version : ",2),XTBVER=+XTBVER
"RTN","XTPMKPTC",41,0)
 .I XMRG["Compliance Date:" S XTBCMPDT=$P(XMRG,"Compliance Date: ",2)
"RTN","XTPMKPTC",42,0)
 .I XMRG["Subject" S XTBSUB=$P(XMRG,"Subject: ",2),XTBSUB=$E(XTBSUB,1,50),XTBSUB=$TR(XTBSUB,":;","--")
"RTN","XTPMKPTC",43,0)
 G:$D(NOFILE) EXIT
"RTN","XTPMKPTC",44,0)
 ;
"RTN","XTPMKPTC",45,0)
FILE K DO,DD S (DIC,DIE)="^XPD(9.9,",DIC(0)="M",X=XTBDESG
"RTN","XTPMKPTC",46,0)
 S XTBRCPDT=$G(^XMB(3.9,XMZ,.6)) I XTBRCPDT="" S XTBRCPDT=DT
"RTN","XTPMKPTC",47,0)
 S DIC("DR")="1////"_XTBRCPDT_";2///"_XTBPRIO_";3///"_XTBPKG_";4////"_XTBSEQ_";5////"_XTBVER_";6///"_XTBSUB_";7///"_XTBINST_";8///"_XTBCMPDT_";11////"_XTBPTYPE
"RTN","XTPMKPTC",48,0)
 D FILE^DICN
"RTN","XTPMKPTC",49,0)
 ;
"RTN","XTPMKPTC",50,0)
EXIT G EXITA^XTPMKPCF
"RTN","XTPMKPTC",51,0)
 ;
"RTN","XTPMKPTC",52,0)
NIGHT S XTBPURGI=$P($G(^XPD(9.95,1,0)),U,3) ;purge y/n
"RTN","XTPMKPTC",53,0)
 K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",54,0)
 S NIGHT=1 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",55,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",56,0)
 .K XTBKILLD
"RTN","XTPMKPTC",57,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)) Q:XTBDTA=""
"RTN","XTPMKPTC",58,0)
 .S XTBINST=$P(XTBDTA,U,8) Q:XTBINST=""
"RTN","XTPMKPTC",59,0)
 .S XTBPTYPE=$P(XTBDTA,U,10)
"RTN","XTPMKPTC",60,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",61,0)
 .I $P($G(^XPD(9.7,+XTBXX,0)),U,9)=3!(XTBPTYPE=1&($P(XTBDTA,U,11)]"")),XTBPURGI=1 DO  Q:$D(XTBKILLD)  ; installed, check purge flag
"RTN","XTPMKPTC",62,0)
 ..S DA=XTBDA,DIK="^XPD(9.9," D ^DIK S XTBKILLD=1 K DA,DIK Q
"RTN","XTPMKPTC",63,0)
 .I XTBXX]"",XTBPTYPE=1 S XTBPTYPE="",$P(^XPD(9.9,XTBDA,0),U,10)="" ;found In INSTALL
"RTN","XTPMKPTC",64,0)
 .Q:XTBPTYPE=1&($P(XTBDTA,U,11)]"")  ;non-kids, has install date  
"RTN","XTPMKPTC",65,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",66,0)
 .I (DT>$P(XTBDTA,U,9)) D SET
"RTN","XTPMKPTC",67,0)
 I '$D(^TMP($J,9,0)) K ^TMP($J) S ^TMP($J,3,0)="",^TMP($J,4,0)="    No Delinquent Patches were found."
"RTN","XTPMKPTC",68,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",69,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",70,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",71,0)
 S XMSUB="Patch Monitor Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",72,0)
 N DUZ S XMDUZ=.5,XMTEXT="^TMP($J,",XMY("G.XTPM PATCH MONITOR")="",XMY(.5)="" D ^XMD
"RTN","XTPMKPTC",73,0)
 ; purge old data
"RTN","XTPMKPTC",74,0)
 I +XTBPURGI=0 D ^XTPMKPP
"RTN","XTPMKPTC",75,0)
 G EXIT
"RTN","XTPMKPTC",76,0)
 ;
"RTN","XTPMKPTC",77,0)
SET S XTBPTNM=$P(XTBDTA,U,1),XTBSUBJ=$E($P(XTBDTA,U,7),1,20)
"RTN","XTPMKPTC",78,0)
 S X=$P(XTBDTA,U,3),XTBPRIO=$S(X="m":"Mandatory",X="e":"Emergency",1:"Unknown")
"RTN","XTPMKPTC",79,0)
 S (X1,Y)=$P(XTBDTA,U,2) X ^DD("DD") S XTBRECPT=Y
"RTN","XTPMKPTC",80,0)
 S (Y,YY1)=$P(XTBDTA,U,9) X ^DD("DD") S XTBINSTX=Y ; compliance date
"RTN","XTPMKPTC",81,0)
 I YY1<DT,'$D(NIGHT) S XTBINSTX=Y_" *"
"RTN","XTPMKPTC",82,0)
 S XTBPKG=$P(XTBPTNM,"*",1),XTBPKGPT=$O(^DIC(9.4,"C",XTBPKG,0))
"RTN","XTPMKPTC",83,0)
 S XTBPCTVR=+$P(XTBPTNM,"*",2),XTBPLVER=+$G(^DIC(9.4,+XTBPKGPT,"VERSION"))
"RTN","XTPMKPTC",84,0)
 I XTBPCTVR>XTBPLVER,XTBPLVER>0 S XTBINSTX="Future Version"
"RTN","XTPMKPTC",85,0)
 I XTBPCTVR>XTBPLVER,XTBPLVER=0 S $P(^XPD(9.9,XTBDA,0),U,10)=1,XTBINSTX="CompleteByHand"
"RTN","XTPMKPTC",86,0)
 I XTBPCTVR=999 S XTBINSTX="CompleteByHand" ;mainly new Mailman domains
"RTN","XTPMKPTC",87,0)
 I XTBINSTX="Future Version"&($D(NIGHT)) Q
"RTN","XTPMKPTC",88,0)
 I XTBINSTX="Future Version"&($D(XTBPSTD)) Q
"RTN","XTPMKPTC",89,0)
 S XTBLN=XTBLN+1 ; first line=9
"RTN","XTPMKPTC",90,0)
 S XTBCNT=XTBCNT+1
"RTN","XTPMKPTC",91,0)
 S XTBDTA=""
"RTN","XTPMKPTC",92,0)
 S $E(XTBDTA,1)=XTBPTNM,$E(XTBDTA,15)=XTBSUBJ,$E(XTBDTA,38)=XTBPRIO,$E(XTBDTA,51)=XTBRECPT,$E(XTBDTA,64)=XTBINSTX
"RTN","XTPMKPTC",93,0)
 S ^TMP($J,XTBLN,0)=XTBDTA,XTBLN=XTBLN+1
"RTN","XTPMKPTC",94,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",95,0)
 Q
"RTN","XTPMKPTC",96,0)
 ;
"RTN","XTPMKPTC",97,0)
TEXT S ^TMP($J,1,0)=""
"RTN","XTPMKPTC",98,0)
 S ^TMP($J,2,0)="The following patches are not installed at this site and are past the"
"RTN","XTPMKPTC",99,0)
 S ^TMP($J,3,0)="designated installation time:"
"RTN","XTPMKPTC",100,0)
 S ^TMP($J,4,0)=""
"RTN","XTPMKPTC",101,0)
 S ^TMP($J,5,0)="                                                               Compliance"
"RTN","XTPMKPTC",102,0)
 S ^TMP($J,6,0)="Patch #       Subject                Priority     Recpt Date   Date"
"RTN","XTPMKPTC",103,0)
 S ^TMP($J,7,0)="-------       -------                --------     ----- ----   ----------"
"RTN","XTPMKPTC",104,0)
 S ^TMP($J,8,0)=""
"RTN","XTPMKPTC",105,0)
 Q
"RTN","XTPMKPTC",106,0)
 ;
"RTN","XTPMKPTC",107,0)
REG ; regular notification
"RTN","XTPMKPTC",108,0)
 K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",109,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",110,0)
 S ^TMP($J,2,0)="The following patches are uninstalled at this site:" K ^TMP($J,3,0)
"RTN","XTPMKPTC",111,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",112,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8)
"RTN","XTPMKPTC",113,0)
 .Q:XTBDTA=""!(XTBINST="")  ;no data or no install name
"RTN","XTPMKPTC",114,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",115,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",116,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",117,0)
 .D SET
"RTN","XTPMKPTC",118,0)
 I '$D(^TMP($J,9,0)) G EXIT
"RTN","XTPMKPTC",119,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",120,0)
 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",121,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",122,0)
 S XMSUB="Uninstalled Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",123,0)
 N DUZ K XMY
"RTN","XTPMKPTC",124,0)
 S XMDUZ=.5,XMTEXT="^TMP($J," D MG,^XMD
"RTN","XTPMKPTC",125,0)
 G EXIT
"RTN","XTPMKPTC",126,0)
 ;
"RTN","XTPMKPTC",127,0)
RPT W @IOF,!,"Complete Uninstalled Patch Report for "_^DD("SITE"),!!!
"RTN","XTPMKPTC",128,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMKPTC",129,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE="",ZTRTN="RPT1^XTPMKPTC",ZTDESC="Uninstalled Patch Report" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMKPTC",130,0)
 I $D(ZTSK) W !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMKPTC",131,0)
 ;
"RTN","XTPMKPTC",132,0)
RPT1 U IO K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",133,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",134,0)
 K ^TMP($J,2,0),^TMP($J,3,0)
"RTN","XTPMKPTC",135,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",136,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")  ; no data or no install name
"RTN","XTPMKPTC",137,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",138,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",139,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",140,0)
 .D SET
"RTN","XTPMKPTC",141,0)
 I '$D(^TMP($J,9,0)) S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1,^TMP($J,XTBLN,0)="     Nothing to report",XTBLN=XTBLN+1
"RTN","XTPMKPTC",142,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",143,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",144,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",145,0)
 S PG=1,XTBHDR="Uninstalled Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",146,0)
 W:IOST?1"C-".E @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!
"RTN","XTPMKPTC",147,0)
 F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBLN)) Q:XTBLN=""  W ^TMP($J,XTBLN,0),! I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),"Page: ",PG,!!
"RTN","XTPMKPTC",148,0)
 G EXIT
"RTN","XTPMKPTC",149,0)
 ;
"RTN","XTPMKPTC",150,0)
PASTDUE W @IOF,!,"Past Due Patch Report for "_^DD("SITE"),!!!
"RTN","XTPMKPTC",151,0)
 S %ZIS="AEQ" D ^%ZIS G:POP EXIT
"RTN","XTPMKPTC",152,0)
 I $D(IO("Q")) S ZTIO=ION,ZTSAVE="",ZTRTN="PASTD1^XTPMKPTC",ZTDESC="Past Due Patch Report" D ^%ZTLOAD D HOME^%ZIS
"RTN","XTPMKPTC",153,0)
 I $D(ZTSK) W !,"Queued as task# ",ZTSK,!! H 2 G EXIT
"RTN","XTPMKPTC",154,0)
 ;
"RTN","XTPMKPTC",155,0)
PASTD1 U IO K ^TMP($J) S XTBX="",XTBLN=8,XTBCNT=0
"RTN","XTPMKPTC",156,0)
 S XTBPSTD=1
"RTN","XTPMKPTC",157,0)
 D TEXT S Y=DT X ^DD("DD") S XTBRUNDT=Y
"RTN","XTPMKPTC",158,0)
 K ^TMP($J,2,0),^TMP($J,3,0)
"RTN","XTPMKPTC",159,0)
 F  S XTBX=$O(^XPD(9.9,"B",XTBX)) Q:XTBX=""  F XTBDA=0:0 S XTBDA=$O(^XPD(9.9,"B",XTBX,XTBDA)) Q:XTBDA=""  DO
"RTN","XTPMKPTC",160,0)
 .S XTBDTA=$G(^XPD(9.9,XTBDA,0)),XTBINST=$P(XTBDTA,U,8) Q:XTBDTA=""!(XTBINST="")
"RTN","XTPMKPTC",161,0)
 .S XTBXX=$O(^XPD(9.7,"B",XTBINST,9999999999),-1) I $G(^XPD(9.7,+XTBXX,2))[" TEST v" S XTBXX=""
"RTN","XTPMKPTC",162,0)
 .Q:$P(XTBDTA,U,10)=1&($P(XTBDTA,U,11)]"")  ;non-kids
"RTN","XTPMKPTC",163,0)
 .Q:$P($G(^XPD(9.7,+XTBXX,0)),U,9)=3
"RTN","XTPMKPTC",164,0)
 .S XTBCOMPD=$P(XTBDTA,U,9) Q:XTBCOMPD'<DT
"RTN","XTPMKPTC",165,0)
 .D SET
"RTN","XTPMKPTC",166,0)
 I '$D(^TMP($J,9,0)) S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1,^TMP($J,XTBLN,0)="     Nothing to report",XTBLN=XTBLN+1
"RTN","XTPMKPTC",167,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",168,0)
 I XTBCNT>0 S ^TMP($J,XTBLN,0)="Total: "_XTBCNT,XTBLN=XTBLN+1
"RTN","XTPMKPTC",169,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",170,0)
 S ^TMP($J,XTBLN,0)="",XTBLN=XTBLN+1
"RTN","XTPMKPTC",171,0)
 S PG=1,XTBHDR="Past Due Patch Report for "_^DD("SITE")_" for "_XTBRUNDT
"RTN","XTPMKPTC",172,0)
 W:IOST?1"C-".E @IOF W !,XTBHDR,?(IOM-12),"Page: ",PG,!
"RTN","XTPMKPTC",173,0)
 F XTBLN=0:0 S XTBLN=$O(^TMP($J,XTBLN)) Q:XTBLN=""  W ^TMP($J,XTBLN,0),! I $Y>(IOSL-5) S PG=PG+1 D PAUSE W @IOF,!,XTBHDR,?(IOM-12),"Page: ",PG,!!
"RTN","XTPMKPTC",174,0)
 K XTBPSTD G EXIT
"RTN","XTPMKPTC",175,0)
 ;
"RTN","XTPMKPTC",176,0)
PAUSE W !,"Press RETURN to continue or '^' to exit: " R XTBANS:DTIME
"RTN","XTPMKPTC",177,0)
 I XTBANS["^" S XTBLN=9999
"RTN","XTPMKPTC",178,0)
 Q
"RTN","XTPMKPTC",179,0)
 ;
"RTN","XTPMKPTC",180,0)
MG F XTBMG=0:0 S XTBMG=$O(^XPD(9.95,1,1,"B",XTBMG)) Q:XTBMG=""  DO
"RTN","XTPMKPTC",181,0)
 .S XTBMGN=$P(^XMB(3.8,XTBMG,0),U)
"RTN","XTPMKPTC",182,0)
 .S XMY("G."_XTBMGN)=""
"RTN","XTPMKPTC",183,0)
 S XMY("G.XTPM PATCH MONITOR USER")="",XMY(.5)=""
"RTN","XTPMKPTC",184,0)
 Q
"VER")
8.0^22.0
"BLD",1130,6)
^92
**END**
**END**
