Released XT*7.3*112 SEQ #86
Extracted from mail message
**KIDS**:XT*7.3*112^

**INSTALL NAME**
XT*7.3*112
"BLD",1057,0)
XT*7.3*112^TOOLKIT^0^3080130^y
"BLD",1057,1,0)
^^2^2^3080130^
"BLD",1057,1,1,0)

"BLD",1057,1,2,0)

"BLD",1057,4,0)
^9.64PA^^
"BLD",1057,6.3)
1
"BLD",1057,"KRN",0)
^9.67PA^779.2^20
"BLD",1057,"KRN",.4,0)
.4
"BLD",1057,"KRN",.401,0)
.401
"BLD",1057,"KRN",.402,0)
.402
"BLD",1057,"KRN",.403,0)
.403
"BLD",1057,"KRN",.5,0)
.5
"BLD",1057,"KRN",.84,0)
.84
"BLD",1057,"KRN",3.6,0)
3.6
"BLD",1057,"KRN",3.8,0)
3.8
"BLD",1057,"KRN",9.2,0)
9.2
"BLD",1057,"KRN",9.8,0)
9.8
"BLD",1057,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",1057,"KRN",9.8,"NM",1,0)
XDRDSHOW^^0^B36211701
"BLD",1057,"KRN",9.8,"NM","B","XDRDSHOW",1)

"BLD",1057,"KRN",19,0)
19
"BLD",1057,"KRN",19.1,0)
19.1
"BLD",1057,"KRN",101,0)
101
"BLD",1057,"KRN",409.61,0)
409.61
"BLD",1057,"KRN",771,0)
771
"BLD",1057,"KRN",779.2,0)
779.2
"BLD",1057,"KRN",870,0)
870
"BLD",1057,"KRN",8989.51,0)
8989.51
"BLD",1057,"KRN",8989.52,0)
8989.52
"BLD",1057,"KRN",8994,0)
8994
"BLD",1057,"KRN","B",.4,.4)

"BLD",1057,"KRN","B",.401,.401)

"BLD",1057,"KRN","B",.402,.402)

"BLD",1057,"KRN","B",.403,.403)

"BLD",1057,"KRN","B",.5,.5)

"BLD",1057,"KRN","B",.84,.84)

"BLD",1057,"KRN","B",3.6,3.6)

"BLD",1057,"KRN","B",3.8,3.8)

"BLD",1057,"KRN","B",9.2,9.2)

"BLD",1057,"KRN","B",9.8,9.8)

"BLD",1057,"KRN","B",19,19)

"BLD",1057,"KRN","B",19.1,19.1)

"BLD",1057,"KRN","B",101,101)

"BLD",1057,"KRN","B",409.61,409.61)

"BLD",1057,"KRN","B",771,771)

"BLD",1057,"KRN","B",779.2,779.2)

"BLD",1057,"KRN","B",870,870)

"BLD",1057,"KRN","B",8989.51,8989.51)

"BLD",1057,"KRN","B",8989.52,8989.52)

"BLD",1057,"KRN","B",8994,8994)

"BLD",1057,"QUES",0)
^9.62^^
"BLD",1057,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
112^3080130
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3080130
"PKG",6,22,1,"PAH",1,1,1,0)

"PKG",6,22,1,"PAH",1,1,2,0)

"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XDRDSHOW")
0^1^B36211701^B35317100
"RTN","XDRDSHOW",1,0)
XDRDSHOW ;SF-IRMFO.SEA/JLI - DISPLAY DATA IN FIELDS, GET OVERWRITES ;01/30/2008
"RTN","XDRDSHOW",2,0)
 ;;7.3;TOOLKIT;**23,49,78,112**;Apr 25, 1995;Build 1
"RTN","XDRDSHOW",3,0)
 ;;
"RTN","XDRDSHOW",4,0)
SHOW(FILE,REC1,REC2,FLDS,REVIEW) ;
"RTN","XDRDSHOW",5,0)
 N FILDIC,MULT,DDVAL,NAMIEN1,NAMIEN2,NAMREC1,NAMREC2,FIRSTIME,MPIMB
"RTN","XDRDSHOW",6,0)
 S FILDIC=$G(^DIC(FILE,0,"GL")) Q:FILDIC=""
"RTN","XDRDSHOW",7,0)
 S REVIEW=+$G(REVIEW)
"RTN","XDRDSHOW",8,0)
 S FILREC1=FILDIC_"REC1)"
"RTN","XDRDSHOW",9,0)
 S FILREC2=FILDIC_"REC2)"
"RTN","XDRDSHOW",10,0)
 S NAMREC1=$P($G(@FILREC1@(0)),U) I NAMREC1="" Q
"RTN","XDRDSHOW",11,0)
 S NAMREC2=$P($G(@FILREC2@(0)),U) I NAMREC2="" Q
"RTN","XDRDSHOW",12,0)
 I FILE=63 D
"RTN","XDRDSHOW",13,0)
 . S NAMIEN1=+$P(@FILREC1@(0),U,3),NAMIEN2=+$P(@FILREC2@(0),U,3)
"RTN","XDRDSHOW",14,0)
 . S NAMREC1=$P(^DPT(NAMIEN1,0),U),NAMREC2=$P(^DPT(NAMIEN2,0),U)
"RTN","XDRDSHOW",15,0)
 I $P(^DD(FILE,.01,0),U,2)["P" D
"RTN","XDRDSHOW",16,0)
 . N XFIL
"RTN","XDRDSHOW",17,0)
 . S XFIL=+$P($P($G(^DD(FILE,.01,0)),U,2),"P",2) Q:XFIL'>0
"RTN","XDRDSHOW",18,0)
 . S XFIL=$G(^DIC(XFIL,0,"GL")) Q:XFIL=""
"RTN","XDRDSHOW",19,0)
 . S NAMREC1=$P(@(XFIL_NAMREC1_",0)"),U)
"RTN","XDRDSHOW",20,0)
 . S NAMREC2=$P(@(XFIL_NAMREC2_",0)"),U)
"RTN","XDRDSHOW",21,0)
 ;
"RTN","XDRDSHOW",22,0)
 ;   recalc CMOR scores
"RTN","XDRDSHOW",23,0)
 I FILE=2,$D(^DD(FILE,991.06)) D
"RTN","XDRDSHOW",24,0)
 . N RGDFN S RGDFN=REC1 D CALC^RGVCCMR2
"RTN","XDRDSHOW",25,0)
 . N RGDFN S RGDFN=REC2 D CALC^RGVCCMR2
"RTN","XDRDSHOW",26,0)
 . Q
"RTN","XDRDSHOW",27,0)
 ; 
"RTN","XDRDSHOW",28,0)
 ;   check for multiple birth indicator in MPI
"RTN","XDRDSHOW",29,0)
 S FIRSTIME=1
"RTN","XDRDSHOW",30,0)
 I FILE=2 D
"RTN","XDRDSHOW",31,0)
 . I $G(^DPT(REC1,"MPIMB"))="Y"!($G(^DPT(REC2,"MPIMB"))="Y") S MPIMB=1
"RTN","XDRDSHOW",32,0)
 . E  S MPIMB=0
"RTN","XDRDSHOW",33,0)
 ;
"RTN","XDRDSHOW",34,0)
 D HEADER
"RTN","XDRDSHOW",35,0)
LOOP ;
"RTN","XDRDSHOW",36,0)
 S FLD=0
"RTN","XDRDSHOW",37,0)
 F FLD=0:0 S FLD=$O(^DD(FILE,FLD)) Q:FLD'>0  D  I NLIN<6 D PAGE Q:$D(DIRUT)  D HEADER
"RTN","XDRDSHOW",38,0)
 . I FILE=63,$P($G(^DD(FILE,FLD,0)),U)="NAME" Q  ;scrn patient file data. From Lab
"RTN","XDRDSHOW",39,0)
 . I FILE'=2,$P($G(^DD(FILE,FLD,0)),U,2)["P2" Q  ;From DINUM pointers.
"RTN","XDRDSHOW",40,0)
 . S DDVAL=$G(^DD(FILE,FLD,0))
"RTN","XDRDSHOW",41,0)
 . S NODE=$P($P(DDVAL,U,4),";")
"RTN","XDRDSHOW",42,0)
 . S PIECE=$P($P(DDVAL,U,4),";",2)
"RTN","XDRDSHOW",43,0)
 . I PIECE=0 S MULT(FLD)=""
"RTN","XDRDSHOW",44,0)
 . I PIECE>0 D
"RTN","XDRDSHOW",45,0)
 . . S X1=$P($G(@FILREC1@(NODE)),U,PIECE),X1=$$TYPE(X1,$P(DDVAL,U,2),DDVAL,REC1)
"RTN","XDRDSHOW",46,0)
 . . S X2=$P($G(@FILREC2@(NODE)),U,PIECE),X2=$$TYPE(X2,$P(DDVAL,U,2),DDVAL,REC2)
"RTN","XDRDSHOW",47,0)
 . . I X1'=""!(X2'="") D
"RTN","XDRDSHOW",48,0)
 . . . S X0="    "
"RTN","XDRDSHOW",49,0)
 . . . S XN=$P(DDVAL,U)
"RTN","XDRDSHOW",50,0)
 . . . S XDRA=0
"RTN","XDRDSHOW",51,0)
 . . . I X1'=""&(X2'=""),X1'=X2 D
"RTN","XDRDSHOW",52,0)
 . . . . I FILE=2,((FLD=991.01)!(FLD=991.02)) Q  ;jds restrict ICN overwrites for MPI 
"RTN","XDRDSHOW",53,0)
 . . . . S X0=$S($D(FLDS(FLD)):"||||",1:"****"),NDIFFS=NDIFFS+1,DIFFS(NDIFFS)=FLD,XDRA=1 I REVIEW S NLIN=NLIN-1
"RTN","XDRDSHOW",54,0)
 . . . I 'REVIEW!XDRA D
"RTN","XDRDSHOW",55,0)
 . . . . W ! S NLIN=NLIN-1
"RTN","XDRDSHOW",56,0)
 . . . . F  Q:XN=""&(X1="")&(X2="")  D
"RTN","XDRDSHOW",57,0)
 . . . . . W !,X0,"  ",$E(XN,1,20),?30,$E(X1,1,20),?55,$E(X2,1,20)
"RTN","XDRDSHOW",58,0)
 . . . . . S NLIN=NLIN-1
"RTN","XDRDSHOW",59,0)
 . . . . . S X0="    ",XN=$E(XN,21,$L(XN))
"RTN","XDRDSHOW",60,0)
 . . . . . S X1=$E(X1,21,$L(X1))
"RTN","XDRDSHOW",61,0)
 . . . . . S X2=$E(X2,21,$L(X2))
"RTN","XDRDSHOW",62,0)
MULT I '$D(DIRUT) D
"RTN","XDRDSHOW",63,0)
 . I $G(NDIFFS)>0 D PAGE Q:$D(DIRUT)  D HEADER
"RTN","XDRDSHOW",64,0)
 . I $D(MULT) D
"RTN","XDRDSHOW",65,0)
 . . F FLD=0:0 S FLD=$O(MULT(FLD)) Q:FLD'>0  D  I NLIN<6 D PAGE Q:$D(DIRUT)  D HEADER
"RTN","XDRDSHOW",66,0)
 . . . S DDVAL=^DD(FILE,FLD,0)
"RTN","XDRDSHOW",67,0)
 . . . S NAME=$P(DDVAL,U)
"RTN","XDRDSHOW",68,0)
 . . . S NODE=$P($P(DDVAL,U,4),";")
"RTN","XDRDSHOW",69,0)
 . . . S NOD1=$NA(@FILREC1@(NODE))
"RTN","XDRDSHOW",70,0)
 . . . S NOD2=$NA(@FILREC2@(NODE))
"RTN","XDRDSHOW",71,0)
 . . . S N1=0,N2=0
"RTN","XDRDSHOW",72,0)
 . . . F I=0:0 S I=$O(@NOD1@(I)) Q:I'>0  S N1=N1+1
"RTN","XDRDSHOW",73,0)
 . . . F I=0:0 S I=$O(@NOD2@(I)) Q:I'>0  S N2=N2+1
"RTN","XDRDSHOW",74,0)
 . . . I N1'=0!(N2'=0) D
"RTN","XDRDSHOW",75,0)
 . . . . S N1=$S(N1>1:N1_" entries",N1>0:N1_" entry",1:"---")
"RTN","XDRDSHOW",76,0)
 . . . . S N2=$S(N2>1:N2_" entries",N2>0:N2_" entry",1:"---")
"RTN","XDRDSHOW",77,0)
 . . . . W !!,$E(NAME,1,25),?30,N1,?55,N2
"RTN","XDRDSHOW",78,0)
 . . . . S NLIN=NLIN-2
"RTN","XDRDSHOW",79,0)
 Q
"RTN","XDRDSHOW",80,0)
PAGE ;
"RTN","XDRDSHOW",81,0)
 I IOST'["C-"!$D(ZTQUEUED) Q
"RTN","XDRDSHOW",82,0)
 W !
"RTN","XDRDSHOW",83,0)
 I '$D(DIFFS)!'REVIEW S DIR(0)="E" D ^DIR K DIR
"RTN","XDRDSHOW",84,0)
 I $D(DIFFS)&REVIEW D
"RTN","XDRDSHOW",85,0)
 . S DIR(0)="LO^1:"_NDIFFS,DIR("A")="OVERWRITE data for selected fields"
"RTN","XDRDSHOW",86,0)
 . F I=1:1:NDIFFS W !,I,"  ",$P(^DD(FILE,DIFFS(I),0),U)
"RTN","XDRDSHOW",87,0)
 . W ! D ^DIR K DIR
"RTN","XDRDSHOW",88,0)
 . I X="",$D(DIRUT) K DIRUT
"RTN","XDRDSHOW",89,0)
 . S I="" F  S I=$O(Y(I)) Q:I=""  S Y=Y(I) K Y(I) D
"RTN","XDRDSHOW",90,0)
 . . F  Q:Y=","  Q:Y=""  S X=$D(FLDS(DIFFS(+Y))) K:X=1 FLDS(DIFFS(+Y)) S:X=0 FLDS(DIFFS(+Y))="" S Y=$P(Y,",",2,999)
"RTN","XDRDSHOW",91,0)
 Q
"RTN","XDRDSHOW",92,0)
 ;
"RTN","XDRDSHOW",93,0)
HEADER ;
"RTN","XDRDSHOW",94,0)
 N REC1MB,REC2MB
"RTN","XDRDSHOW",95,0)
 I '$G(FIRSTIME),$D(IOF) W @IOF
"RTN","XDRDSHOW",96,0)
 I $G(FIRSTIME),$G(MPIMB) D WARNING
"RTN","XDRDSHOW",97,0)
 S FIRSTIME=0
"RTN","XDRDSHOW",98,0)
 K DIFFS S NDIFFS=0
"RTN","XDRDSHOW",99,0)
 S NLIN=IOSL-4
"RTN","XDRDSHOW",100,0)
 I $D(MPIMB) S NLIN=NLIN-4,MPIMB=0
"RTN","XDRDSHOW",101,0)
 I '$D(PACKAGE) S PACKAGE="PRIMARY"
"RTN","XDRDSHOW",102,0)
 ;REM - modified next two lines to include IENs in review display
"RTN","XDRDSHOW",103,0)
 W !,?30,$S(PACKAGE="PRIMARY":"RECORD1 [#"_REC1_"]",PACKAGE="LABORATORY":"MERGE FROM [#"_NAMIEN1_"]",1:"MERGE FROM [#"_REC1_"]")
"RTN","XDRDSHOW",104,0)
 W ?55,$S(PACKAGE="PRIMARY":"RECORD2 [#"_REC2_"]",PACKAGE="LABORATORY":"MERGE TO [#"_NAMIEN2_"]",1:"MERGE TO [#"_REC2_"]")
"RTN","XDRDSHOW",105,0)
 ;I FILE=63 W !?38,"[#"_NAMIEN1_"]",?55,"[#"_NAMIEN2_"]"
"RTN","XDRDSHOW",106,0)
 W !,?30,$E(NAMREC1,1,20),?55,$E(NAMREC2,1,20)
"RTN","XDRDSHOW",107,0)
 S NLIN=NLIN-2
"RTN","XDRDSHOW",108,0)
 I $E(NAMREC1,21,40)'=""!($E(NAMREC2,21,40)'="") D
"RTN","XDRDSHOW",109,0)
 . W !,?30,$E(NAMREC1,21,40),?55,$E(NAMREC2,21,40)
"RTN","XDRDSHOW",110,0)
 . S NLIN=NLIN-1
"RTN","XDRDSHOW",111,0)
 ;
"RTN","XDRDSHOW",112,0)
 ;   add CMOR scores to header
"RTN","XDRDSHOW",113,0)
 I $D(^DD(FILE,991.06)) D
"RTN","XDRDSHOW",114,0)
 . W !,?30,"CMOR SCORE = "_$S($P($G(^DPT(REC1,"MPI")),U,6):$P(^DPT(REC1,"MPI"),U,6),1:"NULL"),?55,"CMOR SCORE = "_$S($P($G(^DPT(REC2,"MPI")),U,6):$P(^DPT(REC2,"MPI"),U,6),1:"NULL")
"RTN","XDRDSHOW",115,0)
 . S NLIN=NLIN-1
"RTN","XDRDSHOW",116,0)
 ;
"RTN","XDRDSHOW",117,0)
 ;   add MULTIBLE BIRTH indicator to header
"RTN","XDRDSHOW",118,0)
 S (REC1MB,REC2MB)=0
"RTN","XDRDSHOW",119,0)
 I $G(^DPT(REC1,"MPIMB"))="Y" S REC1MB=1
"RTN","XDRDSHOW",120,0)
 I $G(^DPT(REC2,"MPIMB"))="Y" S REC2MB=1
"RTN","XDRDSHOW",121,0)
 I REC1MB!REC2MB D
"RTN","XDRDSHOW",122,0)
 . W !,?30,$S(REC1MB:"**MULTIPLE BIRTH**",1:""),?55,$S(REC2MB:"**MULTIPLE BIRTH**",1:"")
"RTN","XDRDSHOW",123,0)
 . S NLIN=NLIN-1
"RTN","XDRDSHOW",124,0)
 ;
"RTN","XDRDSHOW",125,0)
 W !,"----------------------------------------------------------------------------"
"RTN","XDRDSHOW",126,0)
 S NLIN=NLIN-1
"RTN","XDRDSHOW",127,0)
 Q
"RTN","XDRDSHOW",128,0)
 ;
"RTN","XDRDSHOW",129,0)
POINT(VAL,FILE) ;
"RTN","XDRDSHOW",130,0)
 N X,Y
"RTN","XDRDSHOW",131,0)
 I +VAL'=VAL Q "BAD POINTER VALUE IN FILE"
"RTN","XDRDSHOW",132,0)
 S Y=$G(^DIC(FILE,0,"GL")) Q:Y="" ""
"RTN","XDRDSHOW",133,0)
 S Y=Y_VAL_",0)"
"RTN","XDRDSHOW",134,0)
 S Y=$P($G(@Y),U) I Y'=""&($P(^DD(FILE,.01,0),U,2)["P") S Y=$$POINT(Y,+$P($P(^DD(FILE,.01,0),U,2),"P",2))
"RTN","XDRDSHOW",135,0)
 S:Y="" Y="** Missing Entry in File "_FILE_"." ;REM - 9/6/96 When a pointer node is missing. 
"RTN","XDRDSHOW",136,0)
 Q Y
"RTN","XDRDSHOW",137,0)
TYPE(VAL,TYPE,DDNODE0,REC) ;
"RTN","XDRDSHOW",138,0)
 I TYPE["O",$D(^DD(FILE,FLD,2)) S Y=VAL,D0=REC X ^DD(FILE,FLD,2) S VAL=Y Q VAL
"RTN","XDRDSHOW",139,0)
 I TYPE["F",VAL'="" S VAL=""""_VAL_"""" Q VAL
"RTN","XDRDSHOW",140,0)
 I TYPE["P",VAL>0 S VAL=$$POINT(VAL,+$P(TYPE,"P",2)) Q VAL
"RTN","XDRDSHOW",141,0)
 I TYPE["D",VAL>0 D  Q VAL
"RTN","XDRDSHOW",142,0)
 . S VAL=$TR($$FMTE^XLFDT(VAL,2),"@"," ")
"RTN","XDRDSHOW",143,0)
 I TYPE["S" D  Q VAL
"RTN","XDRDSHOW",144,0)
 . N X S X=";"_$P(DDNODE0,U,3)
"RTN","XDRDSHOW",145,0)
 . S X=$P($P(X,(";"_VAL_":"),2),";")
"RTN","XDRDSHOW",146,0)
 . I X'="" S VAL=X
"RTN","XDRDSHOW",147,0)
 Q VAL
"RTN","XDRDSHOW",148,0)
 ;
"RTN","XDRDSHOW",149,0)
WARNING ;
"RTN","XDRDSHOW",150,0)
 W !,?2,"*** WARNING!!!  One or both of these records indicated MULTIPLE BIRTH. ***",!,?2,"Use caution to ensure that these records are truly duplicates and not",!,?2,"siblings before proceeding.",!
"RTN","XDRDSHOW",151,0)
 Q
"VER")
8.0^22.0
"BLD",1057,6)
^86
**END**
**END**
