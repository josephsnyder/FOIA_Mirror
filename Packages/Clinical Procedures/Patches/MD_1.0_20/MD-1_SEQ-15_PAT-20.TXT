$TXT Created by ACKERMAN,NIEN-CHIN at DEV.DEV.FO-HINES.MED.VA.GOV  (KIDS) on Tuesday, 09/07/10 at 11:17
=============================================================================
Run Date: NOV 29, 2010                     Designation: MD*1*20
Package : MD - CLINICAL PROCEDURES            Priority: Mandatory
Version : 1        SEQ #15                      Status: Released
                  Compliance Date: DEC 30, 2010
=============================================================================

Associated patches: (v)MD*1*21     <<= must be installed BEFORE `MD*1*20'

Subject: CP GATEWAY AND MISC

Category: 
  - Routine
  - Other

Description:
============

 This patch resolves seven Remedy Ticket issues.
 
 Remedy Tickets
 ==============
 HD0000000419251
 HD0000000419112
 HD0000000418723
 HD0000000412747
 HD0000000411999
 HD0000000300706
 HD0000000289738
                                                                 
 1) Remedy Ticket: HD0000000419251
                                                                         
    North Texas reported that the Current Procedural Terminology (CPT)
    text displayed in the PCE section of the Summary tab of CP-Hemodialysis
    application for CPT Codes A4707, A4708, and S9445 are not correct.
    The following codes:
 
    A4707 BICARBONATE CONC POW PER PAC
    A4708 ACETATE CONC SOL PER GALLON
    S9445 PT EDUCATION NOC INDIVID
 
    The text displayed after the CPT codes are saved is the following for all
    three codes:
 
    0005F Osteoarthritis Assessed, includes: Osteoarthritis Symptoms/Functional
    Status Assessed (1006F) use of Anti-Inflammatory or OTC Analgesic
    Medications Assessed (1007F) Initial Exam of Involved Joint(s)
    (Inspection, Palpation, ROM) (2004F) (CPT-4 0005F)
 
    The program call to retrieve the CPT codes did not bring up the correct
    information when using the internal entry number of the codes.  Routines
    MDRPCW and MDRPCW1 were modified to use the CPT code to lookup the
    description to fix the problem.
                                                                         
 2) Remedy Ticket: HD0000000419112
                                                                   
    Dayton reported an undefined error with the Hemodialysis studies
    when the results are matched to the studies.  An undefined DUZ(2)
    error occured from within routine MDRPCOT2.  Routine MDRPCOT2
    was modified to fix the error.
 
    Routine Modified: MDRPCOT2
                                                                     
 3) Remedy Ticket: HD0000000418723
                                                                      
    Orlando reported two issues with their auto check-in studies:
     a) If the appointment was scheduled with a future date and the
        study checked-in, the MD SCHEDULED STUDIES task updates the
        study with the time of when the task was ran instead of the
        time of the appointment in the SCHEDULED DATE/TIME field (#.14)
        and the VSTRING field (#.07) in the CP TRANSACTION file (#702).
        This causes an encounter to be created with the incorrect time.
     b) If a procedure is setup with a clinic for auto study check-in,
        the program checks-in the study for other clinics that were not
        indicated in the setup.  This was corrected with this patch so
        the program checks the clinic in the setup.
                                                                         
     Routines Modified: MDWOR and MDWORSR
                                                                       
 4) Remedy Ticket: HD0000000412747
                                                                        
    Palo Alto reported that the default number of days to display completed
    studies with cumulative and multiple results is 365 days which are more
    days than they want to keep the studies displayed.  Over time, the number
    of completed studies accumulate and display in CPUser.  This causes the
    CPUser screen to be cluttered with completed studies that makes it hard
    for users to locate the study they want.  A new XPAR Parameter Definition
    called MD DAYS TO RET COM MULT was added to help the sites manage their
    studies that have cumulative and multiple results.  The user can enter
    a number of days smaller than 365 which will screen out older completed
    studies on the display.
 
    Routine Modified: MDRPCOP
 
    NEW PARAMETER DEFINITION:
    This new parameter definition allows the users to define the number of
    days (1-365) to display the studies of cumulative and multiple results
    in the CPUser executable.
                                                                          
    NAME: MD DAYS TO RET COM MULT
    DISPLAY TEXT: Days to Retain Completed Multiple Study
    MULTIPLE VALUED: No                   VALUE TERM: Days
    VALUE DATA TYPE: numeric              VALUE DOMAIN: 1:365
    VALUE HELP: Enter the number of days from 1 to 365
    DESCRIPTION:   
    The number of days after check-in date/time to display the study
    that has been completed in the CPUser application.  This only
    pertains to studies that have procedures with multiple studies.
    PRECEDENCE: 1                           ENTITY FILE: SYSTEM
 
 ----------------------------------------------------------
                                                                 
 5) Remedy Ticket: HD0000000411999
 
    New York reported that the internal entry number of the hospital location
    was sent to the medical device.  It should be the hospital location name.
    Routine MDHL7BH was modified to fix this.
 
    Routine Modified: MDHL7BH
                                                      
 ----------------------------------------------------------
 
 6) Remedy Ticket: HD0000000300706
                                                                           
    Charleston reported that they are receiving an "Out of Memory" error
    generated from the CP Gateway executable.  This is caused by memory
    leakage in the source code.  This problem causes the CP Gateway to
    error and shutdown.  The site will need to re-start the CP Gateway
    about three to four times a week.  Patch 20 will distribute the
    CPGateway executable to resolve this issue.
 
 ----------------------------------------------------------
                                                            
 7) Remedy Ticket: HD0000000289738                                
                                                          
    Sites having a difficult time implementing a new device would like
    feedback from other sites that are running a similar medical device.
    This patch contains a device survey which can tally the active medical
    devices at a site and transmit the tally in a Mailman message to Hines
    Field Office.  This will allow Hines to keep track of the medical devices
    that are actively running at the sites and provide a point of contact for
    sites to get additional assistance.
 
    New Routine: MDDEVCL, MDRPCOTA
 
    This routine collects the data in CP INSTRUMENT file (#702.09) and
    generates a Mailman message to Hines.
 
    Modified Routine: MDNCHK and MDRPCOR
 
    The routine was modified with code changes to collect the device data
    and generate the Mailman message when an instrument is updated in
    CPManager.                                                    
 
    NEW PARAMETER DEFINITION: MD DEVICE SURVEY TRANSMISSION
 
    This parameter is for the sites to use as an indicator on whether they
    want this data to be collected and transmitted.
 
    NAME: MD DEVICE SURVEY TRANSMISSION    DISPLAY TEXT: Device Survey
                                                         Transmission
    MULTIPLE VALUED: No                   VALUE TERM: Yes/No
    PROHIBIT EDITING: No                  VALUE DATA TYPE: yes/no
    VALUE HELP: Enter 'Y' for 'YES' or 'N' for 'NO'.
    DESCRIPTION:   
    Used to determine if the site wants to transmit the device survey to
    Hines.  Enter 'Y' for 'YES' to send the survey or 'N' for 'NO' to 
    suppress the transmission.
    PRECEDENCE: 1                           ENTITY FILE: SYSTEM
  
                                                              
    NEW OPTION: MD DEVICE SURVEY TRANSMISSION
      This is a new option which will run the routine to capture the data
      for transmission.
 
    NAME: MD DEVICE SURVEY TRANSMISSION  MENU TEXT: MD Device Survey Transmission
    TYPE: run routine                     CREATOR: ACKERMAN,NIEN-CHIN
    PACKAGE: CLINICAL PROCEDURES
    DESCRIPTION:   This option will run the device survey collection routine and 
     capture the data for transmission.  
    ROUTINE: COL^MDDEVCL
    UPPERCASE MENU TEXT: MD DEVICE SURVEY TRANSMISSION
                                                                       
 
    POST-INIT ROUTINE: MDPOST20
 
    There is an installation question on whether the site wants to
    turn the device survey transmission on.  If the user takes the
    default of 'YES', the post-init routine will set the MD DEVICE 
    SURVEY TRANSMISSION parameter to 'YES'; otherwise, the parameter
    will be set to 'NO'.  Once the parameter is set to 'YES', an
    initial device data collection will be done and transmitted
    during the post installation.  When the parameter is set to 'YES',
    any new device configured after the patch installation will generate
    a message with an updated device survey transmission.  The device
    survey collection will be sent to Hines Mail Group MDDEVICE for
    processing.
                                                           
    The device data that are being collected are the following:
    Site name
    CP Instrument name
    Processing Code (Medicine, Clinical Procedures, or Clinical Observation)
    Active or Inactive
    Sender Name
 
    The post installation routine also updates the CPGateway client version
    number on the server side.
 
 ----------------------------------------------------------                    
 
 TEST SITES
 ==========
 Charleston
 Dallas
 Detroit
 Loma Linda
 Orlando
                                                                     
 DOCUMENTATION AND SOFTWARE RETRIEVAL:
 ====================================
 The documentation can be retrieved in the following steps:
  
  The following files can be retrieved in 
  BINARY format by File Transfer Protocol (FTP):
  CPGATEWAY.EXE      (CP Gateway executable)
  MD_1_P20_IMPG.PDF  (Implementation Guide - change pages) 
  MD_1_P20_TM.PDF    (Technical Manual - change pages)
  CLINPROC1_IMPG.PDF (Implementation Guide - whole manual)
  CLINPROC1_TM.PDF   (Technical Manual- whole manual)
  MD_1_P20_UM.PDF    (User Manual - change pages)
  MD_1_P6_UM.PDF     (User Manual - whole manual)
                                                                            
  (The KIDS build is included in the patch message from FORUM.  It does
   not need to be downloaded.)
                                                                              
                                                                    
  The preferred method is to FTP the files from
  
     download.vista.med.va.gov    
  
  which will transmit the files from the first available FTP server.
  
  The files may also be downloaded directly from a particular FTP
  location at the following locations.
  
         Albany                  ftp.fo-albany.med.va.gov
         Hines                   ftp.fo-hines.med.va.gov
         Salt Lake City          ftp.fo-slc.med.va.gov
  
  Files are available in the ANONYMOUS.SOFTWARE directory. 
                                                           
 
 INSTALLATION INSTRUCTIONS: 
 =========================
 Users may remain on the system but this patch should be installed at 
 non-peak hours due to the high volume use of the routines included.  
 Installation should take less than 3 minutes.  
  
     1. Use the INSTALL/CHECK MESSAGE option on the PackMan 
        menu.  
     2. From the Kernel Installation and Distribution System Menu, 
        select the Installation menu.  
     3. From this menu, you may elect to use the following options 
         (when prompted for INSTALL NAME, enter MD*1.0*20): 
              a.  Backup a Transport Global 
              b.  Compare Transport Global to Current System 
              c.  Verify Checksums in Transport Global 
     4. Use the Install Package(s) option and select the patch MD*1.0*20.
     5. When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
        Install? NO//", respond NO. 
     6. When prompted "Do you want to run the device survey transmission? YES//",
        Answer YES to run the device survey transmission,
        NO to suppress the device data collection and transmission.
     7. When prompted "Want KIDS to INHIBIT LOGONs during the 
        install? NO//", respond NO.
     8. When prompted "Want to DISABLE Scheduled Options, Menu 
        Options, and Protocols? NO//", respond YES.
          a. When prompted "Enter options you wish to mark as 'Out Of Order': ",
             enter "MD SCHEDULED STUDIES".
          b. When prompted "Enter options you wish to mark as 'Out Of Order': ",
             enter "MD STUDY CHECK-IN".
     9. When prompted "Delay Install (Minutes):  (0-60): 0//", take the default.
     10. When prompted 'DEVICE: HOME //', respond with <ENTER> or a 
         device.  
 
 CPGateway EXECUTABLE INSTALLATION
 =================================
 1) Shutdown the existing CPGateway executable.
      Use the "File" menu option then select Shutdown Gateway.
 2) Remove the old CPGateway executable.
 3) Replace with the updated CPGateway executable.
 
 POST-INSTALLATION STEP
 ======================
 1) Verify the following tasks MD SCHEDULED STUDIES and MD STUDY CHECK-IN
    are re-started.
 2) The site can use the XPAR EDIT PARAMETER option to edit the parameter
    MD DAYS TO RET COM MULT to manage the number of days to display
    studies that have cumulative results.
 
 
 
 
 
 
 
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.0;CLINICAL PROCEDURES;**[Patch List]**;Apr 01, 2004;Build 9

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MDDEVCL
    Before:       n/a   After:  B2354165  **20**
Routine Name: MDHL7BH
    Before: B22756208   After: B22948615  **11,21,20**
Routine Name: MDNCHK
    Before:  B2544252   After:  B4073446  **11,21,20**
Routine Name: MDPOST20
    Before:       n/a   After:  B2097134  **20**
Routine Name: MDRPCOP
    Before: B75016189   After: B79065771  **4,6,11,20**
Routine Name: MDRPCOR
    Before: B87786828   After: B92120786  **17,20**
Routine Name: MDRPCOT2
    Before: B44563560   After: B44429829  **6,21,20**
Routine Name: MDRPCOTA
    Before:       n/a   After:   B925975  **20**
Routine Name: MDRPCW
    Before: B69393853   After: B70357475  **6,21,20**
Routine Name: MDRPCW1
    Before: B57107439   After: B57093327  **6,21,20**
Routine Name: MDWOR
    Before: B40304234   After: B42202068  **14,11,21,20**
Routine Name: MDWORSR
    Before: B57541495   After: B59105822  **14,11,21,20**
 
Routine list of preceding patches: 17, 21

=============================================================================
User Information:
Entered By  : ACKERMAN,NIEN-CHIN            Date Entered  : NOV 25, 2008
Completed By: REZNIK,CHARMAINE              Date Completed: OCT 29, 2010
Released By : MILLIGAN,KERRY                Date Released : NOV 29, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
