$TXT Created by THOMPSON,SETH at VMPDEV20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 12/12/07 at 15:44
=============================================================================
Run Date: FEB 20, 2008                     Designation: PSO*7*274
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #245                      Status: Released
                  Compliance Date: MAR 22, 2008
=============================================================================

Associated patches: (v)PSO*7*148   <<= must be installed BEFORE `PSO*7*274'
                    (v)PSO*7*233   <<= must be installed BEFORE `PSO*7*274'
                    (v)PSO*7*243   <<= must be installed BEFORE `PSO*7*274'
                    (v)PSO*7*249   <<= must be installed BEFORE `PSO*7*274'
                    (v)PSO*7*258   <<= must be installed BEFORE `PSO*7*274'
                    (v)PSO*7*260   <<= must be installed BEFORE `PSO*7*274'

Subject: MED INSTRUCTIONS NOT EXPANDING/ACTIVITY LOG PROBLEMS

Category: 
  - Routine

Description:
============

 This patch will correct the following issues.
  
 1) Problem:  HD94995
 ---------------------
 The Pharmacist field is being populated before a pharmacist 
 releases the prescription.
  
 2) Problem:  HD161861
 ---------------------
 Med instructions not expanding from provider entered comments.
  
 3) Problem:  HD176910
 ---------------------
 The Activity log in Outpatient Pharmacy records the 6th refill as 
 PARTIAL in certain circumstances.
  
  
 ASSOCIATED REMEDY:
 ==================
 HD94995     I have received a complaint from the Pharmacy that the 
             Pharmacist Field in the prescription file is being 
             filled in during the prescription entry process.
 HD161861    Med instructions not expanding from provider entered 
             comments
 HD176910    Outpatient Pharmacy Activity Log problem
  
 
 ASSOCIATED NSR:
 ===============
 N/A
  
  
 PARTICIPATING TEST SITES:
 =========================
 North Chicago, IL
 Oklahoma City, OK
  
 
 REMEDY TICKET OVERVIEW:
 =======================
  
 1) HD94995      I have received a complaint from the Pharmacy that 
                 the Pharmacist Field in the prescription file is 
                 being filled in during the prescription entry 
                 process.
  
 Problem:
 --------
 The PHARMACIST field (#23) on a PRESCRIPTION (file #52) is being 
 populated by the finishing user when there is a drug interaction. 
 This field should not be populated until the prescription is 
 released.
  
 Resolution:
 ----------- 
 Prevent the PHARMACIST field (#23) of the PRESCRIPTION file (#52) 
 from being populated before the prescription is released.
  
 Technical:
 ----------
 The PHARMACIST field (#23) was being populated automatically before 
 being released in routine PSODGDGI. This should not happen as the
 PHARMACIST is only known once a prescription is released. The code has 
 been modified to remove this automatic population of the PHARMACIST field 
 (#23)
  
 2) HD161861 Med instructions not expanding from provider entered 
 comments
  
 Problem:
 --------
 When copying provider comments into patient instructions during the 
 finishing process, the shortcut codes in the comments don't expand. 
 (i.e. FHA should expand to FOR HEADACE)
  
 Resolution:
 -----------
 Add expansion to the comments when they are copied into the patient 
 instruction during finishing.
  
 Technical:
 ----------
 Routine PSOORFI4 has been modified to make a call to SIGONE^PSOHELP to 
 expand provider comments that have been copied into the Patient 
 instructions.
  
 3) HD176910     Outpatient Pharmacy Activity Log problem
  
 Problem:
 --------
 Activity log in certain instances would show PARTIAL, when it should show
 REFILL 6. The current logic uses 6 to indicate a partial and 7 to indicate
 refill 6 the display in some places was not taking this into account.
  
 Resolution:
 -----------
 Correct the logic determining the Activity log display. Clean 
 up bad data where possible. (i.e. if the activity log lists a partial
 and the prescription has never had any partials that entry can be 
 corrected)
  
 Technical:
 ----------
 Routines PSOCMOP, PSOORAL1, PSOORUT1, PSOORUTL, and PSORXL1 have been 
 corrected to account for refill number 6 being a partial and any refill 
 above 6 counts as refill-1. Also cleanup routine PSO7P274 has been added 
 as a post install to this patch. It will search through all prescriptions 
 and change any activity log entry for PARTIAL to REFILL 6 if no partials 
 exist on that prescription. It can be run manually by calling ^PSO7P274 
 from the programmer's prompt.
  
 
 DATA DICTIONARY CHANGES:
 ========================
 N/A
  
 
 TEMPLATES:
 ==========
 N/A
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 ********************************************************************
 * Warning, please do not queue this patch to be installed.  It has *
 * an install question that needs to be answered.                   *
 ********************************************************************
  
 It is recommended that this patch be installed after normal business
 hours. 
 
 Patch installation should take approximately five minutes.  
 
 It is recommended that the activity log cleanup be queued for a 
 time after normal business hours.  The cleanup time is approximately 
 5 min per 2.5 million records in the PRESCRIPTION file (#52). 
   
 1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note:
    TEXT PRINT/DISPLAY option in the PackMan menu will display the
    patch text only].
      
 2. From the Kernel Installation and Distribution System (KIDS)
    menu, select the Installation menu.
  
 3. From this menu, you may elect to use the following options:
    (when prompted for INSTALL NAME, enter PSO*7.0*274)
     
    a.  Backup a Transport Global - this option will create a backup
        message of any routines exported with the patch.  It will
        NOT backup any other changes such as DDs or templates.
    b.  Compare Transport Global to Current System  - this option
        will allow you to view all changes that will be made when
        the patch is installed.  It compares all components of the
        patch (routines, DDs, templates, etc.).
    c.  Verify Checksums in Transport Global - this option will
        allow you to ensure the integrity of the routines that are
        in the transport global.
    d.  Print Transport Global - this option will allow you to view
        the components of the KIDS build.
     
 4. Use the Install Package(s) option and select the package
    PSO*7.0*274
     
 5. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
    NO//', respond NO.
     
 6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
    and Protocols? NO//', respond NO.
  
 7. When prompted "Running Post-Install Routine: ^PSO7P274
    Enter when to Queue the Activity Log Cleanup job to run in date@time   
    format:  NOW//" , press enter to start the process now or enter a
    future time to start this job in date@time format.
  
  
 EXAMPLE INSTALLATION
 ====================
 It consisted of the following Install(s):
     PSO*7.0*274
 Checking Install for Package PSO*7.0*274
  
 Install Questions for PSO*7.0*274
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? NO// n  NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// n  NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TELNET TERMINAL
  
  
  
  
  Install Started for PSO*7.0*274 : 
                Oct 11, 2007@12:36:06
  
 Build Distribution Date: Oct 11, 2007
  
  Installing Routines:
                Oct 11, 2007@12:36:06
  
  Running Post-Install Routine: ^PSO7P274
   Enter when to Queue the Activity Log Cleanup job to run in date@time   
 format 
 :  NOW// NOW
  
 =============================================================
 Queuing background job for Activity Log Cleanup...
 Start time: Oct 11, 2007@12:36
 ==============================================================
                                   
 PSO*7.0*274                                   
 --------------------------------------------------------------------------
 ------
 *** Task #75783 Queued! ***
  
  
  
  
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSO*7.0*274 Installed. 
                Oct 11, 2007@12:36:11
  
  Not a production UCI
  
  Not a production UCI
  
  NO Install Message sent 
 --------------------------------------------------------------------------
 ------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
  
  
 Install Completed
 
 
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;7.0;OUTPATIENT PHARMACY;**[Patch List]**;APR 2007;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSO7P274
    Before:       n/a   After: B18676549  **274**
Routine Name: PSOCMOP
    Before: B37025252   After: B36927520  **2,16,21,27,43,61,126,148,274**
Routine Name: PSODGDGI
    Before: B56649321   After: B56519362  **10,27,48,130,144,132,188,207,
                                           243,274**
Routine Name: PSOORFI4
    Before: B67649120   After: B68531413  **46,74,78,99,117,131,207,258,274**
Routine Name: PSOORUT1
    Before: B66632962   After: B66564679  **1,14,30,46,132,148,233,274**
Routine Name: PSOORUTL
    Before: B42538902   After: B42770378  **14,46,146,132,118,199,223,
                                           148,249,274**
Routine Name: PSORXL1
    Before: B42620106   After: B42826017  **36,46,148,260,274**
 
Routine list of preceding patches: 233, 243, 249, 258, 260

=============================================================================
User Information:
Entered By  : THOMPSON,SETH                 Date Entered  : JUN 26, 2007
Completed By: CHANDARANA,RISHAN             Date Completed: FEB 14, 2008
Released By : CAMPBELL,THOMAS               Date Released : FEB 20, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
