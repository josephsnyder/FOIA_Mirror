$TXT Created by               R at MNTVBB.DOMAIN.EXT  (KIDS) on Wednesday, 08/28/19 at 15:37
=============================================================================
Run Date: DEC 05, 2019                     Designation: PSO*7*572
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #474                      Status: Released
                  Compliance Date: JAN 05, 2020
=============================================================================

Associated patches: (v)PSO*7*457   <<= must be installed BEFORE `PSO*7*572'
                    (v)PSO*7*462   <<= must be installed BEFORE `PSO*7*572'
                    (v)PSO*7*463   <<= must be installed BEFORE `PSO*7*572'

Subject: DIGITAL SIG DISPLAY/PROVIDER DELETION/RESET COPAY SLOW

Category: 
  - Routine

Description:
============

 **************************I M P O R T A N T **************************
 This patch removes the "Digitally Signed Order" message which appears in 
 the List Manager message bar when processing pending prescriptions.  It 
 has been removed since it overwrote other error messages.  The "Digitally 
 Signed Order" message will still appear at the beginning of digitally 
 signed prescription while processing prescriptions.
 **********************************************************************
  
  
 This patch addresses these issues:
 1. When placing an order in Patient Prescription Processing, some error 
 messages are overwritten by "Digitally Signed Order", rendering the 
 messages invisible. 
 2. A provider record may be chosen during backdoor order entry before 
 its record creation is complete.  The entry may later be deleted, 
 causing the prescription to show the provider as "Unknown". 
 3. A correction is being made to the index used by the 
 option PSO COPAY RESET.
  
  
 Defect Tracking System Ticket(s) & Overview:
 --------------------------------------------
  
 1. INC4916475 - When placing an order in Patient Prescription Processing, 
 some error messages are overwritten by "Digitally Signed Order".
  
 Problem:
 -------
 When a controlled substance rx with an inactivated drug is copied in 
 CPRS, then in the Outpatient Pharmacy the warning message "This Drug has 
 been Inactivated " does not appear. Instead, that message is overwritten 
 with the message "Digitally Signed Order ".
  
 Resolution:
 ----------
 The Digitally Signed Order message has been removed, as it hides all 
 errors that may be displayed as the order is processed.
  
 Note: This patch removes the "Digitally Signed Order" message which 
 appears in the List Manager message bar when processing pending 
 prescriptions.  It has been removed since it overwrote other error 
 messages.  The "Digitally Signed Order" message will still appear at the 
 beginning of digitally signed prescription while processing 
 prescriptions. 
  
 2. INC6468982 - Incompletely created providers records are chosen during 
 order entry that are later deleted, causing the prescription to show the
 provider as "Unknown".
  
  
 Problem:
 -------
 Prior to completing the entry of a new provider record via option PSO 
 PROVIDER ADD, that provider record can be selected in the Outpatient 
 Pharmacy package.  If the user entering the provider "^ " out of PSO 
 PROVIDER ADD, then the file 200 entry is deleted and leaves a dangling 
 pointer to it from file 52.
  
 Resolution:
 ----------
 Routine PSODIR was modified to lock the provider during order entry to 
 make certain the provider is not being entered or edited. The lock is 
 dropped immediately. The user will receive an error message and be 
 prompted for a new provider if the provider is locked.
  
 ************NOTE*************
 PSO*7*572 introduced the incorrect name of the holder of the lock when a 
 provider record is being created using Add New Providers [PSO PROVIDER 
 ADD].
  
 Defect 1164606 has been logged to address the issue in patch PSO*7*587.
  
  
 Example of the scenario:
  
 User #1 is creating the new provider record
 User #2 creates a new rx via backdoor. When they select the provider, 
 they see the lock message, but user #2 name appears instead of User #1
  
 3. INC6402712 - The PSO COPAY RESET option is extremely slow.
  
 Problem:
 -------
 The Reset Copay Status List Manager designed for quick Copay Reset 
 functionality is not working as intended, as each Veteran account 
 reviewed in the report requires 8-10 minutes per Veteran to appear in the 
 report.  Intended value of design is undermined, as user cannot quickly 
 access information to review and perform reconciliation action as needed.
  
 Resolution:
 ----------
 The index strategy was changed to provide a more efficient search by 
 patient first, then compare the patient's prescription fill dates of each
 associated fill to the fill date range chosen by the user before 
 including them in the List.
  
  
 Test Sites:
 ----------
 Oklahoma
 West Palm Beach 
  
 There are no documentation updates associated with this patch.
  
 Patch Installation:
  
 Pre/Post Installation Overview:
 -------------------------------
 There are no tasks or routines executed before or after the installation
 of this patch.
  
  
 Pre-Installation Instructions:
 ------------------------------
 This patch may be installed with users on the system although it is
 recommended that it be installed during non-peak hours to minimize
 potential disruption to users.  This patch should take less than 5 minutes
 to install.
  
 Installation Instructions:
 --------------------------
 1. Choose the PackMan message containing this patch.
  
 2. Choose the INSTALL/CHECK MESSAGE PackMan option.
  
 3. From the Kernel Installation and Distribution System Menu, select the
 Installation Menu.  From this menu, you may elect to use the following
 options. When prompted for the INSTALL NAME enter the patch number:
 PSO*7*572
  
 a. Backup a Transport Global - This option will create a backup message
 of any routines exported with this patch. It will not backup any other
 changes such as DDs or templates.
  
 b. Compare Transport Global to Current System - This option will (allow
 you to view all changes that will be made when this patch is installed.  
 It compares all components of this patch routines, DDs, templates, etc.).
  
 c. Verify Checksums in Transport Global - This option will allow you to
 ensure the integrity of the routines that are in the transport global.
  
 4.  From the Installation Menu, select the Install Package(s) option and
 choose the patch to install.
  
 5. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
 Install? NO// '
  
 6. When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO// 
  
 7. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
 Protocols? NO//
  
 8. If prompted 'Delay Install (Minutes):  (0 - 60): 0// respond 0.
  
 Post-Installation Instructions:
 -------------------------------
 N/A
  
 Back-out/Rollback Strategy:
 -------------------------------
 Back-out will be done only with the concurrence and participation of
 development team and appropriate VA site/region personnel. The decision to
 back-out or rollback software will be a joint decision between development
 team, VA site/region personnel and other appropriate VA personnel.
  
 Prior to installing an updated KIDS package, the site/region should have
 saved a backup of the routines in a mail message using the Backup a
 Transport Global [XPD BACKUP] menu option (this is done at time of
 install). The message containing the backed-up routines can be loaded with
 the "Xtract PackMan" function at the Message Action prompt. The Packman
 function "INSTALL/CHECK MESSAGE" is then used to install the backed up
 routines onto the VistA System.
  
 The back-out plan is to restore the routines from the backup created.
  
 No data was modified by this patch installation and, therefore, no 
 rollback strategy is required.
  
 Validation of Roll Back Procedure
 ---------------------------------
 The Back-out Procedure can be verified by printing the first 2 lines of
 the routines contained in this patch using the option First Line Routine 
 Print [XU FIRST LINE PRINT]. Once the routines contained in the 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;7.0;OUTPATIENT PHARMACY;**[Patch List]**;DEC 1997;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSOCPF1
    Before: B49346922   After: B52313288  **463,572**
Routine Name: PSODIR
    Before: B42041292   After: B43273894  **37,46,111,117,146,164,211,
                                           264,275,391,372,416,422,504,
                                           457,572**
Routine Name: PSOPKIV1
    Before:B102421557   After:B103944402  **131,146,223,148,249,391,426,
                                           462,572**
 
Routine list of preceding patches: 457, 462, 463

=============================================================================
User Information:
Entered By  :                               Date Entered  : AUG 16, 2019
Completed By:                               Date Completed: DEC 05, 2019
Released By :                               Date Released : DEC 05, 2019
=============================================================================


Packman Mail Message:
=====================

$END TXT
