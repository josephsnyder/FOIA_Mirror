$TXT Created by NIXON,TONY at VMPDEV20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 05/06/09 at 12:00
=============================================================================
Run Date: JAN 28, 2010                     Designation: PSO*7*327
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #286                      Status: Released
                  Compliance Date: FEB 28, 2010
=============================================================================

Associated patches: (v)PSO*7*261   <<= must be installed BEFORE `PSO*7*327'

Subject: CARRIAGE RETURNS IN HL7 MESSAGES SENT TO HDR

Category: 
  - Routine

Description:
============

 Some of the Outpatient Pharmacy HL7 messages that are sent to the HDR
 (Health Data Repository) have carriage returns in the text.  This is a
 problem because the HL7 message parser is unable to parse the message.
 As a result, an error occurs and the message is not processed.
  
  
 This patch addresses the following:
 -----------------------------
  
 1. Removes the carriage returns so Outpatient Pharmacy HL7 messages
    are properly processed by the HDR.
  
 2. Allows for previously problematic/rejected messages to be resent
    to the HDR.
  
  
  
 Associated Remedy Ticket(s):
 ============================
 HD0000000251264 - HL7 Messages - Outpatient Pharmacy
  
 Duplicate:
 HD0000000291736 - CR in some outpatient pharmacy messages sent to the HDR 
  
  
 Associated NSRs:
 ================
  N/A
   
   
 Participating Test Sites:
 =========================
 N. Florida HCS
 Salisbury, NC
 Minneapolis, MN
   
   
 Remedy Overview:
 ================
  
 HD0000000251264
  
 Some of the outpatient pharmacy HL7 messages that are sent to the HDR
 have carriage returns in the text. The carriage returns are not escaped.
 The messages with carriage returns are not being migrated to HDR II due
 to the carriage return.
  
  
 Problem:
 --------
 Analysis reveals the carriage return <CR> is accompanied by a corresponding
 line feed <LF>. So the task is to remove the pair. Carriage returns and line
 feeds are not part of the HL7 standard, so the message parser can not process
 the message.
  
  
 Resolution:
 -----------
 Routine PSOVDF2 has been modified. The carriage return and line feed
 is replaced with a space. This will allow the HL7 parser to process
 Outpatient Pharmacy messages without any errors.
  
 Post Install routine PSO327PI was created so users can resend messages that
 were not migrated due to the carriage return.  The users can run this from
 a programmer's prompt by calling EN^PSO327PI (D EN^PSO327PI).  This routine
 will prompt the user for a prescription.  It will display to the user the 
 drug name and patient to verify it is the correct prescription.  When the 
 user answers Yes to the 'Is this Correct?' prompt, the prescription is resent 
 to the HDR and the user is prompted for the next prescription.
  
 Example:
 VMPDEV20>D EN^PSO327PI
  
 Select PRESCRIPTION RX #: 100002646       ASPIRIN BUFFERED 325MG TAB  
 Rx IEN: 402918
 Patient: PATNM,ONE   (0001)
  
 Is this Correct? YES  ... SENT
  
 ===================================================================
  
 SPECIAL NOTE
 ------------
 Not all VAMC will need to run the PSO327PI utility but all sites 
 should install the patch. The HDR will contact all sites that need to
 resend any prescription HL7 messages that failed to migrate.  They will
 provide guidance and instruction on how to proceed.  Do not operate the
 utility unless your facility is requested to do so.  Please direct any
 questions or inquiries to the following mail group: VHA OI SDD HDR327
  
  
 =================== INSTALLATION INSTRUCTIONS =====================
   
  Installation will take less than 2 minutes.  Users may be on the system.
   
     1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
   
     2. From the Kernel Installation & Distribution System menu, select
        the Installation menu.
   
     3. From this menu, you may select to use the following options
        (when prompted for INSTALL NAME, enter PSO*7.0*327)
   
        a. Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch. It will NOT
           backup any other changes such as DDs or templates.
   
        b. Compare Transport Global to Current System - this option will
           allow you to view all changes that will be made when the patch
           is installed. It compares all components of the patch (routines,
           DDs, templates, etc.).
   
        c. Verify Checksums in Transport Global - this option will ensure
           the integrity of the routines that are in the transport global.
   
     4. Use the Install Package(s) option and select the package PSO*7.0*327
   
     5. When prompted "Want KIDS to INHIBIT LOGONs during the install?
        NO//" respond NO.
   
     6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? NO//" respond NO.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;7.0;OUTPATIENT PHARMACY;**[Patch List]**;MAR 2009;Build 4

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSO327PI
    Before:       n/a   After:  B1482855  **327**
Routine Name: PSOVDF2
    Before: B86097500   After: B87674319  **190,205,220,235,261,327**
 
Routine list of preceding patches: 261

=============================================================================
User Information:
Entered By  : NIXON,ANTOINE                 Date Entered  : MAR 11, 2009
Completed By: HEFFERNAN,COREY               Date Completed: JAN 14, 2010
Released By : FOX,KIRK                      Date Released : JAN 28, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
