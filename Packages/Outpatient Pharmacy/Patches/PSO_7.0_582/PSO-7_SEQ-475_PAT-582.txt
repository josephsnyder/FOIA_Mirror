$TXT Created by               F at CLN1G1.AAC.DOMAIN.EXT  (KIDS) on Wednesday, 10/09/19 at 15:58
=============================================================================
Run Date: DEC 09, 2019                     Designation: PSO*7*582
Package : PSO - OUTPATIENT PHARMACY           Priority: EMERGENCY
Version : 7       SEQ #475                      Status: Released
                  Compliance Date: DEC 11, 2019
=============================================================================

Associated patches: (v)PSO*7*551   <<= must be installed BEFORE `PSO*7*582'

Subject: ERX <SUBSCRIPT> ERROR ON DRUG VALIDATION

Category: 
  - Routine

Description:
============

 This patch will address the following issue: 
   
 INC7463169 - Ammonium Lactate prescription - Inbound eRx (CORPUS CHRISTI)
                 received an Rx and an error message was generated Detailed
                 Description 
 (d)INC7463016 - Septra SS prescription - Inbound eRx (CORPUS CHRISTI) 
                 received an Rx and an error message was generated
 (d)INC7216102 - Inbound eRx (CORPUS CHRISTI) received an Rx and an error
                 message was generated
 (d)INC7720939 - Inbound eRx 2 prescriptions with fatal errors
 (d)INC7774257 - Inbound eRx - Fatal Errors
 (d)INC7793995 - Inbound eRx fatal error on one prescription in Corpus Christi
                 Outpatient Clinic Pharmacy
  
 Patient Safety Issues (PSIs):
 -----------------------------
 N/A
  
      
 Defect Tracking System Ticket(s) & Overview: 
 --------------------------------------------
 INC7463169 - Ammonium Lactate prescription - Inbound eRx (CORPUS CHRISTI)
                 received an Rx and an error message was generated Detailed
                 Description 
 (d)INC7463016 - Septra SS prescription - Inbound eRx (CORPUS CHRISTI) 
                 received an Rx and an error message was generated
 (d)INC7216102 - Inbound eRx (CORPUS CHRISTI) received an Rx and an error
                 message was generated
 (d)INC7720939 - Inbound eRx 2 prescriptions with fatal errors
 (d)INC7774257 - Inbound eRx - Fatal Errors
 (d)INC7793995 - Inbound eRx fatal error on one prescription in Corpus Christi
                 Outpatient Clinic Pharmacy
  
 Problem: 
 --------
 Corpus Christi VA Specialty Outpatient Clinic reported a fatal error 
 (<SUBSCRIPT> error) when trying to validate the Drug/SIG for an eRx record
 when using the Complete Orders from eRx [PSO ERX FINISH] option. The same
 error was reported by McAllen Outpatient Clinic. The error happens due to a
 missing "B" cross-reference entry in the PHARMACY PATIENT file (#55) for the
 patient being processed. It is unknown the reason why the "B" cross-reference
 entry is missing for certain patients.
    
 Resolution: 
 -----------
 This patch will prevent the error from happening for patients that have the
 "B" cross-reference entry missing by ignoring it. The missing "B" cross-
 reference entry will have no negative impact in the processing of eRx 
 prescriptions for such patient because its use in the code was unnecessary
 for the option to work properly.
        
 Technical Resolution: 
 ---------------------
 Modified the line tag DU+1^PSOERXD1 to instead of using the "B" cross-
 reference to retrieve the patient IEN (Internal Entry Number) and set the 
 PSODFN variable to set the variable PSODFN directly with the PATIEN content.
   
 Test Sites: 
 -----------
 Oklahoma City VAMC
 VA Texas Valley Coastal Bend HCS
   
   
 Software and Documentation Retrieval Instructions: 
 --------------------------------------------------
 N/A 
  
 Installation Instructions: 
 --------------------------
 This patch may be installed with users on the system although it is recommended
 that it be installed during non-peak hours to minimize potential disruption to
 users.  Staff should not be processing prescriptions while patch is being
 installed.  This patch should take less than 5 minutes to install.  
  
    1. Choose the PackMan message containing this patch.  
  
    2. Choose the INSTALL/CHECK MESSAGE PackMan option.  
   
    3. From the Kernel Installation & Distribution System menu, select 
       the Installation menu.  From this menu, you may select to use the 
       following options: 
       when prompted for INSTALL NAME, enter the patch # PSO*7.0*582: 
  
         a. Backup a Transport Global - This option will create a backup 
            message of any routines exported with this patch. It will not 
            backup any other changes such as DD's or templates.  
   
         b. Compare Transport Global to Current System - This option will 
            allow you to view all changes that will be made when this patch 
            is installed.  It compares all components of this patch 
            routines, DDs, templates, etc.  
  
         c. Verify Checksums in Transport Global - This option will allow 
            you to ensure the integrity of the routines that are in the 
            transport global.  
  
    4. From the Installation menu, select the Install Package(s) option and 
       choose the patch to install.  
  
    5. When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
       NO//', respond NO.  
  
    6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and 
       Protocols? NO//', respond NO.  
  
    7. If prompted 'Delay Install (Minutes): (0-60): 0//' respond 0.  
  
 Installation Verification 
 -------------------------
 Successful installation can be verified by reviewing the first 2 lines of the
 routines contained in the patch. The second line will contain the patch number
 in the [PATCH LIST] section.  
  
 ;;7.0;OUTPATIENT PHARMACY;**[PATCH LIST]**;DEC 1997;Build 349 
  
 The option Calculate and Show Checksum Values [XTSUMBLD-CHECK] can be run to
 compare the routine checksums to what is documented in the patch description.  
  
 Back-out Procedures 
 -------------------
 Back-out will be done only with the concurrence and participation of
 development team and appropriate VA site/region personnel. The decision to
 back-out or rollback software will be a joint decision between development
 team, VA site/region personnel and other appropriate VA personnel.  
  
 Prior to installing an updated KIDS package, the site/region should have saved
 a backup of the routines in a mail message using the Backup a Transport Global
 [XPD BACKUP] menu option (this is done at time of install). The message
 containing the backed up routines can be loaded with the "Xtract PackMan"
 function at the Message Action prompt. The Packman function "INSTALL/CHECK
 MESSAGE" is then used to install the backed up routines onto the VistA System. 
  
 The back-out plan is to restore the routines from the backup created.
  
 No data was modified by this patch installation and, therefore, no 
 rollback strategy is required.
  
  
 Validation of Back Out Procedure 
 ---------------------------------
 The Back Out Procedure can be verified by printing the first 2 lines of
 the PSO Routines contained in this patch using the option First Line
 Routine Print [XU FIRST LINE PRINT]. Once the routines contained in the
 PSO*7.0*582 patch have been rolled back, the first two lines of the
 Routines will no longer contain the designation of patch PSO*7.0*582 in
 the patch list section on line 2.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;7.0;OUTPATIENT PHARMACY;**[Patch List]**;DEC 1997;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSOERXD1
    Before:B131924629   After:B131735326  **467,520,551,582**
 
Routine list of preceding patches: 551

=============================================================================
User Information:
Entered By  :                               Date Entered  : OCT 09, 2019
Completed By:                               Date Completed: DEC 06, 2019
Released By :                               Date Released : DEC 09, 2019
=============================================================================


Packman Mail Message:
=====================

$END TXT
