$TXT Created by CREMEANS,TERRY at VMPDEV20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Monday, 02/22/10 at 10:53
=============================================================================
Run Date: MAY 20, 2010                     Designation: PSO*7*345
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #294                      Status: Released
                  Compliance Date: JUN 20, 2010
=============================================================================

Associated patches: (v)PSO*7*225   <<= must be installed BEFORE `PSO*7*345'
                    (v)PSO*7*260   <<= must be installed BEFORE `PSO*7*345'

Subject: PENDING ORDER AND IGNORED REJECTS SORT FIXES

Category: 
  - Routine

Description:
============

  
 This patch addresses the following issues:
  
 1)  There is a problem in the system that is causing pharmacists to be 
     kicked out of the system when they flag a pending order from a list
     of orders.
  
 2)  The Ignored Rejects Report [PSO IGNORED REJECTS REPORT] menu option is
     receiving an error when the user sorts by PATIENT and only one patient
     is selected.
  
  
  
 Associated Remedy ticket(s):
 ============================
 1. HD0000000297805 - <UNDEFINED>NEWSEL+2^PSOORNE2
    Duplicates: HD0000000298160 - <UNDEFINED>NEWSEL+2^PSOORNE2
                HD0000000339525 - receiving undef errors rtn PSOORNE2;
                                  PSOOREDT
                HD0000000354330 - <UNDEFINED>NEWSEL+2^PSOORNE2
                HD0000000354752 - <UNDEFINED>NEWSEL+2^PSOORNEW
                HD0000000368349 - VistA crash when flagging orders in 
                                  Pharmacy OE/RR
                HD0000000377163 - Error with undefined variable in 
                                  NEWSEL+2^PSOORNE2
  
 2) HD0000000340957 - <UNDEFINED>SORT1+15^PSOBPSRP 
  
 Associated NSR(s):
 ==================
 N/A
  
 Test Sites:
 ===========
 Tuscaloosa VA Medical Center
 VA North Florida/South Georgia VA HCS
 Carl Vinson VA Medical Center - Dublin, GA
 VA Gulf Coast Veterans Health Care System - Biloxi, MS
   
 Remedy Overview:
 ================
 1. HD0000000297805 - <UNDEFINED>NEWSEL+2^PSOORNE2
   
 Problem: 
 ========
 A problem has been reported where the pharmacist is kicked out of the 
 system when flagging pending orders from a list of orders.
  
 Resolution:
 ===========
 Need to modify the code so that after flagging or unflagging an order the
 call to BLD^PSOORUT1 is not executed.
  
 Technical Resolution:
 ---------------------
 Modify routine ^PSOORFL:
 Modify FLAG+3^PSOORFL to not call BLD^PSOORUT1
 CURRENT CODE:
 D FULL^VALM1 W ! D EN1^ORCFLAG(ORIFN),BLD^PSOORUT1
 NEW CODE:
 D FULL^VALM1 W ! D EN1^ORCFLAG(ORIFN)
  
 2. HD0000000349057 - <UNDEFINED>SORT1+15^PSOBPSRP
  
 Problem:
 ========
 An error occurs in the Ignored Rejects Report [PSO IGNORED REJECTS 
 REPORT] menu option when the user sorts by PATIENT and only one patient is
 selected.
  
 Resolution:
 ===========
 Need to modify the code to NEW the variable 'PSOIBP' in the three sort 
 routines.
  
 Technical Resolution:
 ---------------------
 Modify routine ^PSOBPSRP:
 Tag SRT1: CURRENT first line - K PSOPT S PSOAPT=0 
           NEW first line     - N PSOIBP K PSOPT S PSOAPT=0
 Tag SRT2: CURRENT first line - K PSODRG S PSODRUG=0
           NEW first line     - N PSOIBP K PSODRG S PSODRUG=0
 Tag SRT3: CURRENT first line - K PSOU S PSOUSER=0
           NEW first line     - N PSOIBP K PSOU S PSOUSER=0
  
  
      ================INSTALLATION INSTRUCTIONS =================
  
 It is not necessary to disable any options. It should take less than 2
 minutes to install this patch.  It is recommended that users do not run 
 the Ignored Rejects Report when the patch is being installed.
  
    1. Choose the PackMan message containing this patch and invoke the
       INSTALL/CHECK MESSAGE PackMan option.  
   
    2. From the Kernel Installation & Distribution System menu, select 
       the Installation menu.  
   
    3. From this menu, you may select to use the following options: 
       (when prompted for INSTALL NAME, enter PSO*7.0*345)
   
         a.  Verify Checksums in Transport Global - This option will allow
             you to ensure the integrity of the routines that are in the
             transport global.
         b.  Print Transport Global - This option will allow you to view
             the components of the KIDS build.
         c.  Compare Transport Global to Current System - This option will
             allow you to view all changes that will be made when this 
             patch is installed.  It compares all components of this patch
             (routines, DD's, templates, etc.).
         d.  Backup a Transport Global - This option will create a backup
             message of any routines exported with this patch. It will not
             backup any other changes such as DD's or templates.
   
    4. Use the Install Package(s) option and select the package 
       PSO*7.0*345.
  
    5. When Prompted "Want KIDS to INHIBIT LOGONs during the install?
       NO//" respond NO.  
   
    6. When Prompted "Want to DISABLE Scheduled Options, Menu Options, and 
       Protocols? NO//" respond NO.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;7.0;OUTPATIENT PHARMACY;**[Patch List]**;13 Feb 97;Build 5

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSOBPSRP
    Before: B12525106   After: B13181433  **260,345**
Routine Name: PSOORFL
    Before:   B917206   After:  B1035905  **225,345**
 
Routine list of preceding patches: 225, 260

=============================================================================
User Information:
Entered By  : CREMEANS,THERESA              Date Entered  : OCT 28, 2009
Completed By: HEFFERNAN,COREY               Date Completed: APR 29, 2010
Released By : CAMPBELL,THOMAS               Date Released : MAY 20, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
