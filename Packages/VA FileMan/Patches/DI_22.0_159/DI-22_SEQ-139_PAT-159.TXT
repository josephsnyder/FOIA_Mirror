$TXT Created by BEUSCHEL,GARY at FM22-PATCH.FO-OAKLAND.MED.VA.GOV  (KIDS) on Tuesday, 06/10/08 at 14:19
=============================================================================
Run Date: AUG 26, 2008                     Designation: DI*22*159
Package : DI - VA FILEMAN                     Priority: Mandatory
Version : 22       SEQ #139                     Status: Released
                  Compliance Date: SEP 26, 2008
=============================================================================

Associated patches: (v)DI*22*60    <<= must be installed BEFORE `DI*22*159'
                    (v)DI*22*70    <<= must be installed BEFORE `DI*22*159'
                    (v)DI*22*95    <<= must be installed BEFORE `DI*22*159'
                    (v)DI*22*111   <<= must be installed BEFORE `DI*22*159'
                    (v)DI*22*149   <<= must be installed BEFORE `DI*22*159'

Subject: BUG STOMP JAMBOREE

Category: 
  - Routine

Description:
============

                           ** Notice: **
 ** See "Installation Instructions" section for Installation Warning **
  
 This patch corrects the following issues:
  
 Remedy Ticket: 64126
 When creating an input template to edit a field in file A, then jump to file
 B to edit field X, then back to A to edit another field, and back to B again
 to edit field Y, FileMan incorrectly creates a template which edits fields
 X and Y on the first jump to B, and then edits X and Y again on the second
 jump to B. This corrects that.
  
 Remedy Ticket: 184355
 Two issues, both of which involve an input template which has a multiple
 with a qualifier. (A qualifier is a text string which is used in place of
 the field name for user prompts. For example, in 'VEHICLE;"MAKE"', VEHICLE
 is the multiple name, and "MAKE" is the qualifier.)
 1) The qualifier is ignored by FileMan. FileMan uses the field name to
 prompt the user (Select VEHICLE:).
 2) When you try to edit the input template later, using the screen-mode
 editor, the fields under the multiple are not brought in to the template
 editor, and you are unable to file any changes you make to the template.
 Both of these issues are fixed.
  
 Remedy Ticket: 191289
 This bug occurs when a file has a multiple, and one of the fields in the
 multiple is an identifier, and a new-style whole-file regular cross
 reference includes the identifier field. If you edit the file to add a
 record to the multiple and change the identifier field in an existing
 record, the whole-file cross reference for the existing record is not
 updated. This patch fixes that. 
  
 Remedy Ticket: 198175
 When a call is made to EN^DIWE, FileMan Word Processing Line Editor, the
 variable DWLW can be set to limit the number of characters on a global node.
 This works during Insert mode, but is ignored during Edit mode.  This patch
 corrects the problem. During line edit mode, user sees the 'Replace ...With'
 prompts, and if the edited line exceeds the DWLW  variable, the line will be
 broken and treated as inserted lines.
  
 Remedy Tickets: 199255, 244157
 When attempting to add a record with a .01 field greater than 30
 characters, FileMan can, under certain circumstances, blow up with an
 undefined at S+14^DIC3. This patch fixes that.
  
 Remedy Ticket: 233895
 A ^DIC lookup aborts at SEARCH+6^DIC3 with an undefined variable D if all
 of the following are true:
 - the file has a .001 NUMBER field defined.
 - X is an IEN in the file, and DIC(0) contains "N".
 - the file has an ACT node (POST-SELECTION ACTION) defined, and it sets Y=-1.
 This patch fixes that.
  
 Documentation Changes
 =====================
  -None-
  
 Blood Bank Clearance
 ====================
 Clearance - June 11, 2008
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch DI*22*159 contains
 changes to a package referenced in VHA OI SEPG SOP 192-023 Review of
 VISTA Patches for Effects on VISTA Blood Bank Software. This patch does
 not alter or modify any VistA Blood Bank software design safeguards or
 safety critical elements functions.
  
 RISK ANALYSIS: Changes made by patch DI*22*159 have no effect on Blood
 Bank software functionality, therefore RISK is none.
  
 Remedy Tickets
 ==============
 64126
 184355
 191289
 198175
 199255
 233895
 244157
  
 Thanks to Test Sites 
 ====================
 Albany OIFO
 West Palm Beach
 Iron Mountain
 Upstate New York HCS
  
 Routine Summary: 
 ================
 Please see the "Routine Information" section. 
 *Note: Routine: DI159ENV issues a warning during the installation of 
 this patch if it appears that TaskMan is still running and/or logons have
 not been inhibited.
  
 Installation Instructions:
 =========================
 ** Although queuing of this patch is allowed, it is HIGHLY recommended 
 that ALL Users be off the system and VISTA Background jobs be STOPPED 
 before this patch is installed. Failure to do so may result in 'source 
 routine edited' errors during a database update. Edits may be lost and 
 records may be left in an inconsistent state. An error that occurs before 
 a cross-reference is executed, for example, may lead to corrupted data or 
 hard errors in the future. **
  
 The following installation instructions are based upon the premise that 
 the installer has heeded the above warning.
  
 Installation should take less than a minute.
  
      1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
 option will load the KIDS package onto your system.
  
      2.  The patch has now been loaded into a transport global on your 
 system. You now need to use KIDS to install the transport global.
  
      3.  On the KIDS menu, under the 'Installation' menu, use the 
 following options:
  
            Print Transport Global
            Compare Transport Global to Current System
            Verify Checksums in Transport Global
            Backup a Transport Global
  
      4.  In accordance with the warning at the beginning of the 
 installation instructions, make sure ALL interactive processes, and ALL 
 non-interactive background jobs are stopped following your site specific 
 procedures.  NOT performing this step could result in 'source routine
 edited' errors during database updates, and records may be left in an
 inconsistent state.
  
      5.  On the KIDS menu, under the 'Installation' menu, use the 
 following option:
  
            Select Installation Option: Install Package(s)
            Select INSTALL NAME: DI*22.0*159
                                 ===========
  
 The Environment Check Routine DI159ENV runs automatically during this
 step. DI159ENV issues a warning if it appears that TaskMan is still 
 running or logons have not been inhibited.
  
            Answer 'YES' to 'Want KIDS to INHIBIT LOGONs during the 
 install?'
            Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu 
 Options, and Protocols?
  
      6.  Re-enable all processes stopped in step 4 above.
  
 Post Installation
 =================
 Upon successful installation of this patch, routine DI159ENV may be 
 deleted.
   Example
   =======
 >D ^ZTRDEL
  
  
 ROUTINE DELETE
  
 All Routines? No => No
  
 Routine: DI159ENV
 Routine: 
 1 routine
  
 1 routines to DELETE, OK: NO// Y
 DI159ENV  
 Done.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;22.0;VA FileMan;**[Patch List]**;Mar 30, 1999;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DI159ENV
    Before:       n/a   After:  B3745010  **159**
Routine Name: DIA
    Before: B13427002   After: B17168950  **159**
Routine Name: DIA1
    Before: B11942166   After: B10599883  **159**
Routine Name: DIA3
    Before: B16115618   After: B16113145  **159**
Routine Name: DIC3
    Before: B31344317   After: B31837904  **1,16,4,17,20,28,40,86,70,159**
Routine Name: DIC5
    Before:  B8130256   After:  B8363930  **4,20,31,70,159**
Routine Name: DICM
    Before: B29790678   After: B32299770  **4,20,31,40,149,159**
Routine Name: DIE
    Before: B20904318   After: B26226750  **1,4,8,11,59,95,159**
Routine Name: DIE0
    Before:  B9856102   After:  B9621443  **60,159**
Routine Name: DIE1
    Before: B31515558   After: B32974046  **1,4,11,159**
Routine Name: DIETED
    Before: B36461042   After: B42722493  **111,159**
Routine Name: DIEZ
    Before: B18519324   After: B18556993  **1,11,159**
Routine Name: DIEZ0
    Before: B16897031   After: B17398012  **159**
Routine Name: DIEZ2
    Before: B47298614   After: B48725159  **11,95,159**
Routine Name: DIWE1
    Before: B12156201   After: B15137861  **159**
 
Routine list of preceding patches: 60, 70, 95, 111, 149

=============================================================================
User Information:
Entered By  : BEUSCHEL,GARY                 Date Entered  : MAY 28, 2008
Completed By: SINGH,GURBIR                  Date Completed: AUG 21, 2008
Released By : HARROD,PAUL                   Date Released : AUG 26, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
