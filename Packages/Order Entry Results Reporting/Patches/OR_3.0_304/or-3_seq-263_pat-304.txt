
=============================================================================
Run Date: NOV 20, 2008                     Designation: OR*3*304
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: EMERGENCY
Version : 3       SEQ #263                      Status: Released
                  Compliance Date: NOV 23, 2008
=============================================================================

Associated patches: (v)OR*3*243    <<= must be installed BEFORE `OR*3*304'

Subject: CPRS GUI - PSPO1089 CPRS PATIENT DISPLAY ISSUES

Category: 
  - Routine
  - PATCH FOR A PATCH
  - Other

Description:
============

 PATIENT SAFETY ISSUES RESOLVED BY THIS PATCH:
 
 PSPO 1089-Incorrect Patient Information Displayed in CPRS V27. When 
 switching from a patient's record to a second patient's record (in the same
 instance of CPRS) while using Version 27 of CPRS, the first patient's
 information may still be displayed in the second patient's CPRS display,
 impacting patient care decisions. It is not known at this time if data
 entered for the second patient will be placed in the incorrect record. This
 problem occurs intermittently and has been reported when viewing clinical
 data on the Orders and Notes Tabs.
 
 The PSPO 1089 problem can occur when CPRS tries to shut down due to
 inactivity and cannot shut down. When this happens, an internal variable
 (FTimedOut), used by CPRS when it is shutting down, can remain set
 incorrectly. This condition can cause the previous patient's data to remain
 in the chart when switching patients.
 
 This patch addresses this problem by correcting CPRS Delphi code. First, 
 changes were made to clear out two dialogs: 1)the Day-of-Week Schedule 
 Builder; and 2)the Expanded Medication Route List. These dialogs have been
 changed so they will clear out correctly when the dialogs are closed. These
 dialogs were not being cleared out correctly when the user closed the dialogs
 which could cause a problem when CPRS tries to shut down.
 
 Second, changes were made to make sure that CPRS shuts down on a time-out
 even if an access violation occurs on shut down. If an access violation
 occurs in CPRS and the Windows' screen saver has been activated, the CPRS
 access violation will not display to the user, and the user will not be aware
 that CPRS attempted to shut down due to inactivity. If this situation exists,
 and the user signs back into the workstation, CPRS continues to function as
 if a time-out had not occurred.
 
 Third, changes were made to CPRS to detect when the user switches patients
 and the FTimedOut variable is set to true.  When this condition exists, CPRS
 will display an error message and will shut down. Listed below is an example
 of the error message:
 
 "CPRS has encountered a serious problem and is unable to display the
 selected patient's data. This is a known issue documented in PSPO 1089. 
 To prevent patient safety issues, CPRS is shutting down. Shutting down and
 then restarting CPRS will correct the problem, and you may continue working
 in CPRS.
 
 Please report all occurrences of this problem by contacting your CPRS Help
 Desk."
 
 When the user clicks the OK button on this form, CPRS will automatically
 shut down. By restarting CPRS the FTimedOut value will be set correctly.
 While it is not anticipated that users will encounter the error message,
 this change was added as a precautionary measure to prevent any occurrences
 of the PSPO 1089 problem.
 
 Test Sites
 ==============
 Bedford
 Cleveland
 Durham
 Hudson Valley Health Care
 Loma Linda
 Manchester
 NCHC
 Palo Alto
 Philadelphia
 Salem
 San Diego
 Tampa
 Togus
 
 Remedy Tickets
 ==============
 283347
 283230
 282836
 275953
 282479
 282175
 281454
 280535
 280286
 279900
 279834
 279461
 279437
 277134
 277814
 275953
 278338
 278521
 278534
 278506
 278354
 278663
 278734
 278621
 278983
 
 REQUIRED BUILDS:
 ================
 OR*3.0*243
 
 The KIDS portion of the installation will simply update the version number
 of the OR CPRS GUI CHART option to be 1.0.27.83. The .ZIP file contains an
 updated CPRS executable and the release notes documentation.
 
 NOTE: Internet Explorer 4.0 (IE4) or later is REQUIRED in order for GUI
 version 27.83 to run.  However IE 5.5 or later with 128-bit encryption is
 required for PKI functionality.
 
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch. The second
 line of each of these routine(s) will look like:
  
 <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 1997
 
 INSTALLATION FILES:
 ==================
 The following software files are exported as part of this patch:
  
    File Name               Contents                    Retrieval Format
    ---------               --------                    ----------------
    OR_30_304.ZIP           File(s) indented below      BINARY
    - CPRSChart.exe          CPRS Executable
    - OR_30_304RN.DOC        Release Notes
    - OR_30_304RN.PDF        Release Notes
    OR_30_304_SRC.ZIP       CPRSChart Source            BINARY
    OR_30_304.KID           KIDS build                  ASCII
 
 The files listed above may be obtained via FTP.  The preferred method is to
 FTP the files from:
  
        download.vista.med.va.gov
  
 This transmits the files from the first available FTP server.  Sites may
 also elect to retrieve software directly from a specific server as follows:
 
    OI FIELD OFFICE    FTP ADDRESS                 DIRECTORY
    ----------------   -------------------------   --------------------
    Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
    Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
    Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
 
 INSTALLATION REQUIREMENTS/NOTES:
 ================================
 -- Required Patches:
 OR*3.0*243
  
 -- Installation Compliance Date:
 OR*3.0*304 must be installed within 3 days of its national release date.
 
 -- Internet Explorer:
 NOTE: Internet Explorer 4.0 (IE4) or later is REQUIRED in order for GUI
 version 27.83 to run.  However IE 5.5 or later with 128-bit encryption is
 required for PKI functionality.
 
 -- Build components:
 The KIDS portion of the installation will simply update the version number
 of the OR CPRS GUI CHART option to be 1.0.27.83. The .ZIP file contains an
 updated CPRS executable.
 
 CPRS v27.83 requires the same BORLNDMM.DLL used by CPRS GUI v27.77.  The
 BORLNDMM.DLL will need to be placed in the workstation or network server's
 CPRS directory, or in a location that is reachable via the workstation's
 PATH variable.
 
 INSTALLATION INSTRUCTIONS:
 ==========================
 Users should not be on the system during installation of this patch. This
 patch should be installed during non-peak hours to minimize disruption.  
 Installation should take approximately 1 minute.  
 
 1. Read the above section "INSTALLATION REQUIREMENTS/NOTES" and take
    appropriate actions.
 
 2. Obtain the file OR_30_304.KID.
  
 3. From the Kernel Installation and Distribution System (KIDS) Menu, select
    the Installation menu.
  
 4. Use Load a Distribution using OR_30_304.KID when prompted to enter a Host
    File name.  You may need to prepend a directory name.
  
 5. From this menu, you may then elect to use the following options (when
    prompted for the INSTALL NAME, enter OR*3.0*304):
        a. Backup a Transport Global
        b. Compare Transport Global to Current System
        c. Verify Checksums in Transport Global 
  
 6. When ready, select the Install Packages option (when prompted for the
    INSTALL NAME, enter OR*3.0*304).
   
 7. When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
    YES//', respond "YES." 
  
 8. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? YES//', respond YES.  When prompted to select the options you
    would like to place out of order, enter the following:
 
        OR OE/RR MENU CLINICIAN          CPRS Clinician Menu
        OR OE/RR MENU NURSE              CPRS Nurse Menu
        OR OE/RR MENU WARD CLERK         CPRS Ward Clerk Menu
        OR CPRS GUI CHART
  
 9. When prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0.'
  
 10. Move the routines to other CPUs if appropriate.
  
 11. Following successful installation, the post-install routine ORY304 may
     be deleted.
  
 12. Retrieve and open the file OR_30_304.ZIP.
  
 13. Note the file date/time inside the ZIP for CPRSChart.EXE. Move this file
     to the appropriate directory where it can be accessed by all CPRS
     workstations.  After moving the files, compare the file date/time of the
     extracted copy to that contained in the ZIP. They should be the same.
     Some ZIP extraction utilities may produce extracted files with the
     current date/time. If this is the case, the CPRSUpdate application may
     not function correctly.
 
 
 
 
 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ORY304
    Before:       n/a   After:  B1671283  **304**

=============================================================================
User Information:
Entered By  : MASSEY,RONNY                  Date Entered  : OCT 23, 2008
Completed By: WODZINSKI,ELIZABETH           Date Completed: NOV 19, 2008
Released By : MONTGOMERY,ALAN               Date Released : NOV 20, 2008
=============================================================================


Packman Mail Message:
=====================

No routines included
