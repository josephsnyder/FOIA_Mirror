Released OR*3*370 SEQ #329
Extracted from mail message
**KIDS**:OR*3.0*370^

**INSTALL NAME**
OR*3.0*370
"BLD",9379,0)
OR*3.0*370^ORDER ENTRY/RESULTS REPORTING^0^3130517^y
"BLD",9379,1,0)
^^1^1^3130326^
"BLD",9379,1,1,0)
Prevent notes without text from being signed
"BLD",9379,4,0)
^9.64PA^^
"BLD",9379,6.3)
4
"BLD",9379,"ABPKG")
n
"BLD",9379,"KRN",0)
^9.67PA^779.2^20
"BLD",9379,"KRN",.4,0)
.4
"BLD",9379,"KRN",.4,"NM",0)
^9.68A^^
"BLD",9379,"KRN",.401,0)
.401
"BLD",9379,"KRN",.401,"NM",0)
^9.68A^^
"BLD",9379,"KRN",.402,0)
.402
"BLD",9379,"KRN",.403,0)
.403
"BLD",9379,"KRN",.5,0)
.5
"BLD",9379,"KRN",.84,0)
.84
"BLD",9379,"KRN",3.6,0)
3.6
"BLD",9379,"KRN",3.8,0)
3.8
"BLD",9379,"KRN",9.2,0)
9.2
"BLD",9379,"KRN",9.8,0)
9.8
"BLD",9379,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",9379,"KRN",9.8,"NM",1,0)
ORCNOTE^^0^B63789081
"BLD",9379,"KRN",9.8,"NM","B","ORCNOTE",1)

"BLD",9379,"KRN",19,0)
19
"BLD",9379,"KRN",19.1,0)
19.1
"BLD",9379,"KRN",101,0)
101
"BLD",9379,"KRN",409.61,0)
409.61
"BLD",9379,"KRN",771,0)
771
"BLD",9379,"KRN",779.2,0)
779.2
"BLD",9379,"KRN",870,0)
870
"BLD",9379,"KRN",8989.51,0)
8989.51
"BLD",9379,"KRN",8989.52,0)
8989.52
"BLD",9379,"KRN",8994,0)
8994
"BLD",9379,"KRN","B",.4,.4)

"BLD",9379,"KRN","B",.401,.401)

"BLD",9379,"KRN","B",.402,.402)

"BLD",9379,"KRN","B",.403,.403)

"BLD",9379,"KRN","B",.5,.5)

"BLD",9379,"KRN","B",.84,.84)

"BLD",9379,"KRN","B",3.6,3.6)

"BLD",9379,"KRN","B",3.8,3.8)

"BLD",9379,"KRN","B",9.2,9.2)

"BLD",9379,"KRN","B",9.8,9.8)

"BLD",9379,"KRN","B",19,19)

"BLD",9379,"KRN","B",19.1,19.1)

"BLD",9379,"KRN","B",101,101)

"BLD",9379,"KRN","B",409.61,409.61)

"BLD",9379,"KRN","B",771,771)

"BLD",9379,"KRN","B",779.2,779.2)

"BLD",9379,"KRN","B",870,870)

"BLD",9379,"KRN","B",8989.51,8989.51)

"BLD",9379,"KRN","B",8989.52,8989.52)

"BLD",9379,"KRN","B",8994,8994)

"BLD",9379,"QDEF")
^^^^NO^^^^^^NO
"BLD",9379,"QUES",0)
^9.62^^
"BLD",9379,"REQB",0)
^9.611^1^1
"BLD",9379,"REQB",1,0)
OR*3.0*280^2
"BLD",9379,"REQB","B","OR*3.0*280",1)

"MBREQ")
0
"PKG",174,-1)
1^1
"PKG",174,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",174,20,0)
^9.402P^^
"PKG",174,22,0)
^9.49I^1^1
"PKG",174,22,1,0)
3.0^2971217^2990325^66481
"PKG",174,22,1,"PAH",1,0)
370^3130517
"PKG",174,22,1,"PAH",1,1,0)
^^1^1^3130517
"PKG",174,22,1,"PAH",1,1,1,0)
Prevent notes without text from being signed
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORCNOTE")
0^1^B63789081^B59596403
"RTN","ORCNOTE",1,0)
ORCNOTE ; SLC/MKB - Progress Note actions ; 5/17/13 8:53am
"RTN","ORCNOTE",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**22,48,65,104,280,370**;Dec 17, 1997;Build 4
"RTN","ORCNOTE",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","ORCNOTE",4,0)
ELSIG ; Sign rec
"RTN","ORCNOTE",5,0)
 N ASK,TIUEVNT,TIUDA,TIUES,TIUI,X,X1,Y,ORI,NMBR,ORPICK,ORQUIT,IDX,TIUPOP,TIUPRM0,TIUPRM1
"RTN","ORCNOTE",6,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","ORCNOTE",7,0)
 I $P(TIUPRM0,U,2)'>0 W !,"Electronic signature not yet enabled." H 3 G ELSIGX
"RTN","ORCNOTE",8,0)
 S ORPICK="",VALMBCK=""
"RTN","ORCNOTE",9,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("sign") Q:'ORNMBR
"RTN","ORCNOTE",10,0)
 I +ORNMBR D FULL^VALM1
"RTN","ORCNOTE",11,0)
 S ORI=1
"RTN","ORCNOTE",12,0)
 F  S NMBR=$P(ORNMBR,",",ORI) Q:+NMBR'>0!$D(ORQUIT)  D
"RTN","ORCNOTE",13,0)
 . N TIU0,TIU12,TIU15,TIUSTAT,TIUEVNT,TIUTYPE,TIUDA
"RTN","ORCNOTE",14,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR)),ORI=+$G(ORI)+1
"RTN","ORCNOTE",15,0)
 . S TIUDA=+IDX,TIU0=$G(^TIU(8925,+TIUDA,0)),TIU12=$G(^(12)),TIU15=$G(^(15))
"RTN","ORCNOTE",16,0)
 . S TIUSTAT=+$P(TIU0,U,5)
"RTN","ORCNOTE",17,0)
 . S TIUTYPE=$$PNAME^TIULC1(+$G(^TIU(8925,+TIUDA,0)))
"RTN","ORCNOTE",18,0)
 . S TIUEVNT=$S(+TIUSTAT'>5:"SIGNATURE",1:"COSIGNATURE")
"RTN","ORCNOTE",19,0)
 . S ASK=$$CANDO^TIULP(TIUDA,TIUEVNT)
"RTN","ORCNOTE",20,0)
 . I +ASK>0 D
"RTN","ORCNOTE",21,0)
 . . L +^TIU(8925,+TIUDA):1
"RTN","ORCNOTE",22,0)
 . . E  S ASK="0^ Another user is editing this entry."
"RTN","ORCNOTE",23,0)
 . I +ASK'>0,$P(ASK,U,2)]"" D  I 1
"RTN","ORCNOTE",24,0)
 . . D FULL^VALM1
"RTN","ORCNOTE",25,0)
 . . W !!,"Item #: ",NMBR,!,$P(ASK,U,2),!
"RTN","ORCNOTE",26,0)
 . . W !,"Removed from signature list.",!
"RTN","ORCNOTE",27,0)
 . . I $$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","ORCNOTE",28,0)
 . E  D
"RTN","ORCNOTE",29,0)
 . . I $S(+$$REQCOSIG^TIULP(+TIU0,+TIUDA,DUZ):1,+$P(TIU15,U,6):1,1:0),(+$P(TIU12,U,8)'>0) D  Q:+$G(TIUPOP)
"RTN","ORCNOTE",30,0)
 . . . N COSIGNER
"RTN","ORCNOTE",31,0)
 . . . W !!,"Item #",NMBR,": ",TIUTYPE," for "
"RTN","ORCNOTE",32,0)
 . . . W $$PTNAME^TIULC1($P(TIU0,U,2))," will need cosignature..."
"RTN","ORCNOTE",33,0)
 . . . S COSIGNER=$$ASKCSNR^TIURS(TIUDA,DUZ)
"RTN","ORCNOTE",34,0)
 . . . I +COSIGNER'>0 D
"RTN","ORCNOTE",35,0)
 . . . . S TIUPOP=1
"RTN","ORCNOTE",36,0)
 . . . . W !!,"Item #",NMBR,": MUST have a cosigner, before you may sign."
"RTN","ORCNOTE",37,0)
 . . . . W !!,"Removed from signature list.",!
"RTN","ORCNOTE",38,0)
 . . . . I $$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","ORCNOTE",39,0)
 . . ; OR*3.0*370 DJH Do not allow notes without any text to be signed
"RTN","ORCNOTE",40,0)
 . . I $$EMPTYDOC^TIULF(+TIUDA) D  Q
"RTN","ORCNOTE",41,0)
 . . . W !!,"Item #",NMBR,": This note contains no text and cannot be signed."
"RTN","ORCNOTE",42,0)
 . . . W !!,"Removed from signature list.",!
"RTN","ORCNOTE",43,0)
 . . . I $$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","ORCNOTE",44,0)
 . . N TIU,TIUY
"RTN","ORCNOTE",45,0)
 . . D EN^VALM("ORC TIU SIGN/COSIGN")
"RTN","ORCNOTE",46,0)
 I +$G(ORPICK)'>0 D  G ELSIGX
"RTN","ORCNOTE",47,0)
 . S VALMSG="** Signature List Empty...Nothing signed. **"
"RTN","ORCNOTE",48,0)
 I +$G(ORPICK)>0 D
"RTN","ORCNOTE",49,0)
 . S TIUES=$$ASKSIG^TIULA1
"RTN","ORCNOTE",50,0)
 . I '+TIUES S VALMSG="** Nothing Signed. **" Q
"RTN","ORCNOTE",51,0)
 . F ORI=1:1:$L(ORPICK,",") S NMBR=$P(ORPICK,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",52,0)
 . . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR)),TIUDA=+IDX
"RTN","ORCNOTE",53,0)
 . . D ES^TIURS(TIUDA,TIUES,NMBR)
"RTN","ORCNOTE",54,0)
 I $G(ORPICK)']"" S VALMSG="** Nothing Signed. **"
"RTN","ORCNOTE",55,0)
 E  S VALMSG="** Item"_$S($L(ORPICK,",")>1:"s ",1:" ")_ORPICK_" Signed. **"
"RTN","ORCNOTE",56,0)
ELSIGX K VALMY S VALMBCK="R"
"RTN","ORCNOTE",57,0)
 Q
"RTN","ORCNOTE",58,0)
ACCEPT(ORPICK,NMBR) ; Adds item(s) to signature list
"RTN","ORCNOTE",59,0)
 D FULL^VALM1
"RTN","ORCNOTE",60,0)
 S ORPICK=$G(ORPICK)_$S($L(ORPICK):",",1:"")_NMBR,OREBUILD=1
"RTN","ORCNOTE",61,0)
 W !,"Item #",NMBR," added to the signature list." H 3
"RTN","ORCNOTE",62,0)
 Q
"RTN","ORCNOTE",63,0)
SIGN ; -- sign notes
"RTN","ORCNOTE",64,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA S VALMBCK=""
"RTN","ORCNOTE",65,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("sign") Q:'ORNMBR
"RTN","ORCNOTE",66,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",67,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",68,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",69,0)
 . D EDSIG^TIURS(TIUDA,"",1)
"RTN","ORCNOTE",70,0)
 Q
"RTN","ORCNOTE",71,0)
 ;
"RTN","ORCNOTE",72,0)
ADDENDUM ; -- make addendum
"RTN","ORCNOTE",73,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG S VALMBCK=""
"RTN","ORCNOTE",74,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("") Q:'ORNMBR
"RTN","ORCNOTE",75,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",76,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",77,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",78,0)
 . I +$$ISADDNDM^TIULC1(TIUDA) D  Q
"RTN","ORCNOTE",79,0)
 . . W !,$C(7),"You may not make addenda to addenda."
"RTN","ORCNOTE",80,0)
 . . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","ORCNOTE",81,0)
 . D CLEAR^VALM1,ADDEND1^TIURA1 I +$G(TIUCHNG) S OREBUILD=1
"RTN","ORCNOTE",82,0)
 . I '+$G(TIUCHNG) S VALMBCK="R"
"RTN","ORCNOTE",83,0)
 Q
"RTN","ORCNOTE",84,0)
 ;
"RTN","ORCNOTE",85,0)
EDIT ; -- edit notes
"RTN","ORCNOTE",86,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG S VALMBCK=""
"RTN","ORCNOTE",87,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("edit") Q:'ORNMBR
"RTN","ORCNOTE",88,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",89,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",90,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",91,0)
 . D CLEAR^VALM1,EDIT1^TIURA I +$G(TIUCHNG) S OREBUILD=1
"RTN","ORCNOTE",92,0)
 S VALMBCK="R"
"RTN","ORCNOTE",93,0)
 Q
"RTN","ORCNOTE",94,0)
COPY ; -- copy notes
"RTN","ORCNOTE",95,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG,ORTAB S VALMBCK=""
"RTN","ORCNOTE",96,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("copy") Q:'ORNMBR
"RTN","ORCNOTE",97,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",98,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",99,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",100,0)
 . D COPY1^TIURC I +$G(TIUCHNG) S OREBUILD=1
"RTN","ORCNOTE",101,0)
 . I '+$G(TIUCHNG) S VALMBCK="R"
"RTN","ORCNOTE",102,0)
 Q
"RTN","ORCNOTE",103,0)
DELETE ; -- delete notes
"RTN","ORCNOTE",104,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG S VALMBCK=""
"RTN","ORCNOTE",105,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("delete") Q:'ORNMBR
"RTN","ORCNOTE",106,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",107,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",108,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",109,0)
 . D DEL^TIURB(TIUDA) I +$G(TIUCHNG) S OREBUILD=1
"RTN","ORCNOTE",110,0)
 Q
"RTN","ORCNOTE",111,0)
SIGNERS ; -- Identify additional signers
"RTN","ORCNOTE",112,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG S VALMBCK=""
"RTN","ORCNOTE",113,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("") Q:'ORNMBR
"RTN","ORCNOTE",114,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",115,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",116,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",117,0)
 . D FULL^VALM1,SIGNER^TIURA1
"RTN","ORCNOTE",118,0)
 S VALMBCK="R"
"RTN","ORCNOTE",119,0)
 Q
"RTN","ORCNOTE",120,0)
PRINT ; Print selected documents
"RTN","ORCNOTE",121,0)
 N DFN,TIUDA,TIUDPRM,TIUDARR,TIUDATA,TIUI,DIROUT,TIUDE,POP,TIUPFLG
"RTN","ORCNOTE",122,0)
 N TIUSPG,TIUDEV
"RTN","ORCNOTE",123,0)
 S VALMBCK="" I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("print") Q:'ORNMBR
"RTN","ORCNOTE",124,0)
 D CLEAR^VALM1
"RTN","ORCNOTE",125,0)
 I +$$CHARTANY(ORNMBR) S TIUPFLG=$$FLAG^TIUPRPN3
"RTN","ORCNOTE",126,0)
 S TIUSPG=1
"RTN","ORCNOTE",127,0)
 S TIUDEV=$$DEVICE^TIUDEV(.IO) ; Get Device/allow queueing
"RTN","ORCNOTE",128,0)
 I $S(IO']"":1,TIUDEV']"":1,1:0) G PRINTX
"RTN","ORCNOTE",129,0)
 I $D(IO("Q")) D QUE^TIUDEV("PRINTN^ORCNOTE",TIUDEV) G PRINTX
"RTN","ORCNOTE",130,0)
 D PRINTN
"RTN","ORCNOTE",131,0)
PRINTX N IOSTBM D ^%ZISC,FIXLST^TIULM
"RTN","ORCNOTE",132,0)
 K VALMY S VALMBCK="R"
"RTN","ORCNOTE",133,0)
 Q
"RTN","ORCNOTE",134,0)
CHARTANY(ORNMBR) ; Evaluate selected documents for chart print
"RTN","ORCNOTE",135,0)
 N ORI,NMBR,ORSLT S ORSLT=0
"RTN","ORCNOTE",136,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) Q:+NMBR'>0!+ORSLT  D
"RTN","ORCNOTE",137,0)
 . N IDX,TIUDA
"RTN","ORCNOTE",138,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",139,0)
 . S TIUDA=+IDX Q:'TIUDA
"RTN","ORCNOTE",140,0)
 . S ORSLT=+$$CHARTONE^TIURA1(TIUDA)
"RTN","ORCNOTE",141,0)
 Q ORSLT
"RTN","ORCNOTE",142,0)
PRINTN ; Loop through selected doc's & invoke print code as appropriate
"RTN","ORCNOTE",143,0)
 N TIUI,TIUTYP,ORINDX,ORY,DFN K ^TMP("TIUPR",$J)
"RTN","ORCNOTE",144,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG
"RTN","ORCNOTE",145,0)
 U IO
"RTN","ORCNOTE",146,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)!$D(DIROUT)
"RTN","ORCNOTE",147,0)
 . N TIUPMTHD,TIUTYP,TIUPFHDR,TIUPFNBR,TIUPGRP,TIUPRINT,TIUDTYP,TIUFLAG
"RTN","ORCNOTE",148,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",149,0)
 . S TIUDA=+IDX Q:'+TIUDA  Q:'$D(^TIU(8925,TIUDA,0))
"RTN","ORCNOTE",150,0)
 . S TIUTYP=$P($G(^TIU(8925,TIUDA,0)),U)
"RTN","ORCNOTE",151,0)
 . ; Evaluate whether user can print record
"RTN","ORCNOTE",152,0)
 . S TIUPRINT=$$CANDO^TIULP(TIUDA,"PRINT RECORD")
"RTN","ORCNOTE",153,0)
 . I +TIUPRINT'>0 D  Q  ; Exclude records user can't print
"RTN","ORCNOTE",154,0)
 . . W !!,"Item #",ORI,": ",!,$P(TIUPRINT,U,2),!
"RTN","ORCNOTE",155,0)
 . . I IO=IO(0),'$D(ZTQUEUED),$$READ^TIUU("EA","RETURN to continue...")
"RTN","ORCNOTE",156,0)
 . I +$G(TIUPFLG) S TIUFLAG=+$$CHARTONE^TIURA1(TIUDA)
"RTN","ORCNOTE",157,0)
 . S DFN=$P($G(^TIU(8925,+TIUDA,0)),U,2)
"RTN","ORCNOTE",158,0)
 . I +TIUTYP D
"RTN","ORCNOTE",159,0)
 . . S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUTYP)
"RTN","ORCNOTE",160,0)
 . . S TIUPGRP=$$PRNTGRP^TIULG(+TIUTYP)
"RTN","ORCNOTE",161,0)
 . . S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYP)
"RTN","ORCNOTE",162,0)
 . . S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYP)
"RTN","ORCNOTE",163,0)
 . I +$$ISADDNDM^TIULC1(TIUDA) D
"RTN","ORCNOTE",164,0)
 . . S TIUDA=+$P($G(^TIU(8925,TIUDA,0)),U,6)
"RTN","ORCNOTE",165,0)
 . . S TIUDTYP=+$G(^TIU(8925,TIUDA,0))
"RTN","ORCNOTE",166,0)
 . I +$G(^TIU(8925,TIUDA,21))>0 D
"RTN","ORCNOTE",167,0)
 . . S TIUDA=+$G(^TIU(8925,TIUDA,21))
"RTN","ORCNOTE",168,0)
 . . S TIUDTYP=+$G(^TIU(8925,TIUDA,0))
"RTN","ORCNOTE",169,0)
 . Q:+$D(ORINDX(TIUDA))
"RTN","ORCNOTE",170,0)
 . I +$G(TIUDTYP)>0 D
"RTN","ORCNOTE",171,0)
 . . S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUDTYP)
"RTN","ORCNOTE",172,0)
 . . S TIUPGRP=$$PRNTGRP^TIULG(+TIUDTYP)
"RTN","ORCNOTE",173,0)
 . . S TIUPFHDR=$$PRNTHDR^TIULG(+TIUDTYP)
"RTN","ORCNOTE",174,0)
 . . S TIUPFNBR=$$PRNTNBR^TIULG(+TIUDTYP)
"RTN","ORCNOTE",175,0)
 . I $G(TIUPMTHD)]"",+$G(TIUPGRP),($G(TIUPFHDR)]""),($G(TIUPFNBR)]"") S ORY(TIUPMTHD,$G(TIUPGRP)_"$"_TIUPFHDR_";"_DFN,ORI,TIUDA)=TIUPFNBR
"RTN","ORCNOTE",176,0)
 . E  S ORY(TIUPMTHD,DFN,ORI,TIUDA)=""
"RTN","ORCNOTE",177,0)
 . S ORINDX(TIUDA)=ORI
"RTN","ORCNOTE",178,0)
 S TIUPMTHD="" F  S TIUPMTHD=$O(ORY(TIUPMTHD)) Q:TIUPMTHD=""  D
"RTN","ORCNOTE",179,0)
 . D PRNTDOC^TIURA(TIUPMTHD,.ORY)
"RTN","ORCNOTE",180,0)
 Q
"RTN","ORCNOTE",181,0)
BROWSE ; -- browse document
"RTN","ORCNOTE",182,0)
 N ORI,NMBR,ORQUIT,IDX,TIUDA,TIUCHNG,TIUQUIT S VALMBCK=""
"RTN","ORCNOTE",183,0)
 I '$G(ORNMBR) S ORNMBR=$$ORDERS^ORCHART("browse") Q:'ORNMBR
"RTN","ORCNOTE",184,0)
 F ORI=1:1:$L(ORNMBR,",") S NMBR=$P(ORNMBR,",",ORI) D:NMBR  Q:$D(ORQUIT)
"RTN","ORCNOTE",185,0)
 . S IDX=$G(^TMP("OR",$J,"CURRENT","IDX",NMBR))
"RTN","ORCNOTE",186,0)
 . S TIUDA=+IDX Q:'+TIUDA
"RTN","ORCNOTE",187,0)
 . D CLEAR^VALM1,BROWS1^TIURA("TIU BROWSE FOR CLINICIAN")
"RTN","ORCNOTE",188,0)
 . S VALMBCK="R" S:+$G(TIUCHNG) OREBUILD=1
"RTN","ORCNOTE",189,0)
 . I +$G(TIUQUIT) S ORQUIT=1
"RTN","ORCNOTE",190,0)
 Q
"RTN","ORCNOTE",191,0)
 ;
"RTN","ORCNOTE",192,0)
EX ; -- exit action
"RTN","ORCNOTE",193,0)
 D:$G(OREBUILD) TAB^ORCHART(ORTAB,1)
"RTN","ORCNOTE",194,0)
 S:$D(^TMP("OR",$J,"CURRENT","MENU")) XQORM("HIJACK")=^("MENU")
"RTN","ORCNOTE",195,0)
 Q
"RTN","ORCNOTE",196,0)
GETTOT(ORY,DFN) ; --get total count of progress notes
"RTN","ORCNOTE",197,0)
 ; ^TIU(8925,"ACLPT",3) refers to progress notes class
"RTN","ORCNOTE",198,0)
 N ORTIDT,ORTIFN
"RTN","ORCNOTE",199,0)
 S ORY=0
"RTN","ORCNOTE",200,0)
 Q:'$G(DFN)
"RTN","ORCNOTE",201,0)
 F ORTIDT=0:0 S ORTIDT=$O(^TIU(8925,"ACLPT",3,DFN,ORTIDT)) Q:ORTIDT<1  D
"RTN","ORCNOTE",202,0)
 .F ORTIFN=0:0 S ORTIFN=$O(^TIU(8925,"ACLPT",3,DFN,ORTIDT,ORTIFN)) Q:ORTIFN<1  S ORY=ORY+1
"RTN","ORCNOTE",203,0)
 Q
"VER")
8.0^22.0
"BLD",9379,6)
^329
**END**
**END**

