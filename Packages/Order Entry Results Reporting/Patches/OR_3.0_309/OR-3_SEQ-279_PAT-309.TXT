$TXT Created by MALMROSE,CARY at ROX-DCM.FO-SLC.MED.VA.GOV  (KIDS) on Monday, 12/14/09 at 12:59
=============================================================================
Run Date: MAR 24, 2010                     Designation: OR*3*309
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: Mandatory
Version : 3       SEQ #279                      Status: Released
                  Compliance Date: APR 24, 2010
=============================================================================

Associated patches: (v)OR*3*212    <<= must be installed BEFORE `OR*3*309'
                    (v)OR*3*243    <<= must be installed BEFORE `OR*3*309'

Subject: VBECS FOLLOW-UP FIXES

Category: 
  - Routine
  - Data Dictionary

Description:
============

 Note:  This patch can only be installed at sites running CPRS.
  
  This patch contains several fixes to CPRS code relating to VBECS
  Blood Bank functionality.
  
  BLOOD BANK REPORT
  
  The Blood Bank report found on the Labs and Reports tab was showing
  Data coming from VBECS twice (the entire report was being duplicated)
  when the parameter OR VBECS LEGACY REPORT was set to yes. (ORWRP2)
  
  CQ 17823  VBECS Change sort order of results displayed on BB reports to
  Reverse Chronologic order.
  
  CQ 17824  VBECS change BB results to display horizontally rather than
  Vertically
  
  CQ 17825  VBECS Change the VBECS canned comments display to once
  
  CQ 17976  VBECS component transfusions were totaled per day.
  This was done to mimic functionality in CPRS V26
  
  CQ 17731  Move the UNITS section of the Patient report on the Patient
  Info tab of the Blood Bank Dialog up higher in the report so that it
  can be seen without having to scroll down.
  
  CQ 18484 Multi Division Potential Problem - Unable to differentiate
  where testing is performed.
  
  CQ 18101 Change OR VBECS Legacy parameter default to Yes, but allow
  sites that have it set to remain the way it is set.
  
  CQ 18644: Fixed a bug that was causing the wrong date to appear for some
  specimens
 BLOOD ORDER DIALOG
  
  CQ 18033  Remove the Ask on Condition value for the Reason for
  Request and Surgery prompts.
  
  CQ 17687  Move the collection type earlier in the order text. 
  
  CQ 18227 Prior to this patch the check for a current Type & Screen during
  the ordering process was including unreleased/unsigned orders.
  This has been changed with this patch so that unreleased/unsigned
  orders will no longer be included in the check for Type & Screen.
  
  CQ 18196|TAB|VBECS-CPRS contains no DC information in the Activity
  Section from backdoor dc
 .
  CQ 18227|TAB|VBECS Remove "unsigned orders" from duplicate T&S order
  check.
  
  CQ 18448  Milwaukee reported the issue Exception Message Object
  reference not set to an instance of an object.  The HL7 message
  received on the VBECS Listerner is missing information in the OBR
  segment.  Specifically, the "PR" messages are not being saved
  correctly, so the lab results stored in this part of the message
  is not getting sent to VBECS.
  
  CQ 18494 OR*3*309  VBECS- CPRS does not allow Auto DC of VBECS orders.
  VBECS is not on the list of acceptable package namespaces which 
  allows auto d/c of orders. To fix this required a change to the 
  Data Dictionary in the OE/RR AUTO-DC RULES (#100.6) file. The change
  to this file is included in the patch.  VBEC is now included in the
  MUMPS Screen found on the TYPE OF ORDERS TO DC field of the 
  INCLUDED PACKAGES multiple of the file.
  
  CQ 18690 VBECS allows Blood Bankers the ability to reject/cancel
  a specimen.  When this happens, CPRS is updated with a status of 
  Complete or Discontinued.  CPRS does not account for this when 
  trying to determine if a current Type & Screen specimen is in the
  the Blood Bank. To fix this, the M code that looks for a current
  Type & Screen has been updated to double check the information 
  returned from VBECS, in regards to a valid specimen, when a 
  Completed/Expired order is found in the specified time frame 
  (usually 3 days).
  
  Remedy Tickets
  --------------
  325289
  340548
  375556
  376189
  
  FTP Instructions:
  =================
  The OR*3.0*309 Release Notes, listed below may be obtained 
  via FTP.  The preferred method is to FTP the files from:
  
   download.vista.med.va.gov
  
  This transmits the files from the first available FTP server.
  Sites may also elect to retrieve software directly from a
  specific server as follows:
  
    CIO FIELD OFFICE   FTP ADDRESS                 DIRECTORY
    ----------------   -------------------------   --------------------
    Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
    Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
    Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
  
    File Name                      Contents           Retrieval Format
    ---------                      --------           ----------------
    OR_30_309_RN.PDF              Release Notes      BINARY
  
 INSTALLATION INSTRUCTIONS:
  ==========================
  This patch should be loaded during non-peak hours to minimize disruption
  to users.  Installation will take less than 1 minute.  Users may remain
  on the system.
   
  1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
   
  2.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
   
  3.  From this menu, you may elect to use the following options
      (when prompted for INSTALL NAME, enter OR*3.0*309):
          a.  Backup a Transport Global
          b.  Compare Transport Global to Current System
          c.  Verify Checksums in Transport Global
   
  4.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//'
      respond NO.
    
  5.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? NO//', respond NO.
  

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**[Patch List]**;Dec 17, 1997;Build 26

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ORCDVBC1
    Before:  B5469622   After:  B7759175  **212,309**
Routine Name: ORCDVBEC
    Before: B66434607   After: B70656296  **212,309**
Routine Name: ORMBLDVB
    Before: B42436603   After: B42857390  **212,309**
Routine Name: ORMVBEC
    Before: B24117916   After: B25262194  **212,309**
Routine Name: ORWDXVB
    Before: B44139791   After: B44657724  **215,243,212,309**
Routine Name: ORWDXVB1
    Before: B34643378   After: B33294455  **215,243,309**
Routine Name: ORWDXVB2
    Before: B16199930   After: B17319895  **215,243,212,309**
Routine Name: ORWLR1
    Before: B29165126   After: B37372130  **172,212,309**
Routine Name: ORWLR2
    Before: B29775782   After: B35589611  **172,212,309**
Routine Name: ORWLR3
    Before: B48454721   After: B46485364  **212,309**
Routine Name: ORWLR4
    Before:       n/a   After: B61036559  **309**
Routine Name: ORWRP2
    Before: B14652707   After: B11410581  **10,109,212,309**Dec 17, 1997
Routine Name: ORY309
    Before:       n/a   After:   B808695  **309**
 
Routine list of preceding patches: 212

=============================================================================
User Information:
Entered By  : MALMROSE,CARY                 Date Entered  : MAR 12, 2009
Completed By: ANURADHA,PATURI               Date Completed: MAR 24, 2010
Released By : SAUNDERS,TOM                  Date Released : MAR 24, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
