Released OR*3*91 SEQ #89
Extracted from mail message
**KIDS**:OR*3.0*91^

**INSTALL NAME**
OR*3.0*91
"BLD",2453,0)
OR*3.0*91^ORDER ENTRY/RESULTS REPORTING^0^3010111^y
"BLD",2453,4,0)
^9.64PA^8989.51^1
"BLD",2453,4,8989.51,0)
8989.51
"BLD",2453,4,8989.51,222)
n^n^f^^y^ORX91 PARAM DEF SEARCH^y^o^n
"BLD",2453,4,8989.51,224)

"BLD",2453,4,"B",8989.51,8989.51)

"BLD",2453,"ABPKG")
n
"BLD",2453,"KRN",0)
^9.67PA^19^17
"BLD",2453,"KRN",.4,0)
.4
"BLD",2453,"KRN",.401,0)
.401
"BLD",2453,"KRN",.402,0)
.402
"BLD",2453,"KRN",.403,0)
.403
"BLD",2453,"KRN",.5,0)
.5
"BLD",2453,"KRN",.84,0)
.84
"BLD",2453,"KRN",3.6,0)
3.6
"BLD",2453,"KRN",3.8,0)
3.8
"BLD",2453,"KRN",9.2,0)
9.2
"BLD",2453,"KRN",9.8,0)
9.8
"BLD",2453,"KRN",9.8,"NM",0)
^9.68A^6^6
"BLD",2453,"KRN",9.8,"NM",1,0)
ORB3^^0^B84803352
"BLD",2453,"KRN",9.8,"NM",2,0)
ORB3U1^^0^B56393620
"BLD",2453,"KRN",9.8,"NM",3,0)
ORB3USER^^0^B65938454
"BLD",2453,"KRN",9.8,"NM",4,0)
ORQPTQ1^^0^B42410007
"BLD",2453,"KRN",9.8,"NM",5,0)
ORUS^^0^B9541231
"BLD",2453,"KRN",9.8,"NM",6,0)
ORB3FN^^0^B5948240
"BLD",2453,"KRN",9.8,"NM","B","ORB3",1)

"BLD",2453,"KRN",9.8,"NM","B","ORB3FN",6)

"BLD",2453,"KRN",9.8,"NM","B","ORB3U1",2)

"BLD",2453,"KRN",9.8,"NM","B","ORB3USER",3)

"BLD",2453,"KRN",9.8,"NM","B","ORQPTQ1",4)

"BLD",2453,"KRN",9.8,"NM","B","ORUS",5)

"BLD",2453,"KRN",19,0)
19
"BLD",2453,"KRN",19.1,0)
19.1
"BLD",2453,"KRN",101,0)
101
"BLD",2453,"KRN",101,"NM",0)
^9.68A^8^8
"BLD",2453,"KRN",101,"NM",1,0)
OR PATIENT ALERTS^^0
"BLD",2453,"KRN",101,"NM",2,0)
OR SELECT ALERTS^^0
"BLD",2453,"KRN",101,"NM",3,0)
VALM NEXT SCREEN^^4^
"BLD",2453,"KRN",101,"NM",4,0)
VALM PREVIOUS SCREEN^^4^
"BLD",2453,"KRN",101,"NM",5,0)
VALM QUIT^^4^
"BLD",2453,"KRN",101,"NM",6,0)
ORB BLANK LINE1^^4^
"BLD",2453,"KRN",101,"NM",7,0)
ORB BLANK LINE2^^4^
"BLD",2453,"KRN",101,"NM",8,0)
ORB BLANK LINE3^^4^
"BLD",2453,"KRN",101,"NM","B","OR PATIENT ALERTS",1)

"BLD",2453,"KRN",101,"NM","B","OR SELECT ALERTS",2)

"BLD",2453,"KRN",101,"NM","B","ORB BLANK LINE1",6)

"BLD",2453,"KRN",101,"NM","B","ORB BLANK LINE2",7)

"BLD",2453,"KRN",101,"NM","B","ORB BLANK LINE3",8)

"BLD",2453,"KRN",101,"NM","B","VALM NEXT SCREEN",3)

"BLD",2453,"KRN",101,"NM","B","VALM PREVIOUS SCREEN",4)

"BLD",2453,"KRN",101,"NM","B","VALM QUIT",5)

"BLD",2453,"KRN",409.61,0)
409.61
"BLD",2453,"KRN",409.61,"NM",0)
^9.68A^1^1
"BLD",2453,"KRN",409.61,"NM",1,0)
OR PATIENT ALERTS^^0
"BLD",2453,"KRN",409.61,"NM","B","OR PATIENT ALERTS",1)

"BLD",2453,"KRN",771,0)
771
"BLD",2453,"KRN",870,0)
870
"BLD",2453,"KRN",8994,0)
8994
"BLD",2453,"KRN","B",.4,.4)

"BLD",2453,"KRN","B",.401,.401)

"BLD",2453,"KRN","B",.402,.402)

"BLD",2453,"KRN","B",.403,.403)

"BLD",2453,"KRN","B",.5,.5)

"BLD",2453,"KRN","B",.84,.84)

"BLD",2453,"KRN","B",3.6,3.6)

"BLD",2453,"KRN","B",3.8,3.8)

"BLD",2453,"KRN","B",9.2,9.2)

"BLD",2453,"KRN","B",9.8,9.8)

"BLD",2453,"KRN","B",19,19)

"BLD",2453,"KRN","B",19.1,19.1)

"BLD",2453,"KRN","B",101,101)

"BLD",2453,"KRN","B",409.61,409.61)

"BLD",2453,"KRN","B",771,771)

"BLD",2453,"KRN","B",870,870)

"BLD",2453,"KRN","B",8994,8994)

"BLD",2453,"QUES",0)
^9.62^^
"BLD",2453,"REQB",0)
^9.611^4^4
"BLD",2453,"REQB",1,0)
OR*3.0*88^2
"BLD",2453,"REQB",2,0)
XU*8.0*171^2
"BLD",2453,"REQB",3,0)
OR*3.0*63^2
"BLD",2453,"REQB",4,0)
OR*3.0*74^2
"BLD",2453,"REQB","B","OR*3.0*63",3)

"BLD",2453,"REQB","B","OR*3.0*74",4)

"BLD",2453,"REQB","B","OR*3.0*88",1)

"BLD",2453,"REQB","B","XU*8.0*171",2)

"DATA",8989.51,46,0)
ORB OI ORDERED - INPT^Flag Items to Send INPT ORDER Notifs^1^Orderable Item^Send alert for ALL inpatients?
"DATA",8989.51,46,1)
Y^Y:yes;N:no^Enter 'Yes' to trigger an alert for ALL patients, 'No' for only linked patients.
"DATA",8989.51,46,6)
P^101.43^Enter the orderable item to trigger a notification.
"DATA",8989.51,46,20,0)
^^19^19^3000918^
"DATA",8989.51,46,20,1,0)
This parameter is used to trigger a notification/alert when a specific
"DATA",8989.51,46,20,2,0)
orderable item is ordered for an inpatient.
"DATA",8989.51,46,20,3,0)
 
"DATA",8989.51,46,20,4,0)
If the value for the orderable item flag is "YES", the entity (user,
"DATA",8989.51,46,20,5,0)
team, device), flagging the orderable item becomes a potential alert
"DATA",8989.51,46,20,6,0)
recipient for ALL patients.  If the value is "NO", the entity (user,
"DATA",8989.51,46,20,7,0)
team, device), flagging the orderable item only becomes a potential
"DATA",8989.51,46,20,8,0)
alert recipient if that entity is "linked" to the patient.  (If a device
"DATA",8989.51,46,20,9,0)
is added to the potential recipient list, it will always receive the
"DATA",8989.51,46,20,10,0)
alert.)
"DATA",8989.51,46,20,11,0)
 
"DATA",8989.51,46,20,12,0)
Users are linked to a patient if the user is the patient's attending
"DATA",8989.51,46,20,13,0)
physician, primary inpatient provider, PCMM primary care practicioner,
"DATA",8989.51,46,20,14,0)
PCMM associate provider, user is assigned to a position on the patient's
"DATA",8989.51,46,20,15,0)
PCMM primary care team or user shares an OE/RR team with the patient.
"DATA",8989.51,46,20,16,0)
OE/RR teams are linked to a patient if the patient is on the team. (If a
"DATA",8989.51,46,20,17,0)
patient is on a team that has flagged an orderable item, all users on that
"DATA",8989.51,46,20,18,0)
team become potential alert recipients.)  Devices (printers, etc.) are
"DATA",8989.51,46,20,19,0)
linked to a patient if the device and patient are on the same OE/RR team.
"DATA",8989.51,46,30,0)
^8989.513I^3^3
"DATA",8989.51,46,30,1,0)
1^200
"DATA",8989.51,46,30,2,0)
2^100.21
"DATA",8989.51,46,30,3,0)
3^3.5
"DATA",8989.51,47,0)
ORB OI RESULTS - INPT^Flag Item to Send INPT RESULT Notifs^1^Orderable Item^Send alert for ALL inpatients?
"DATA",8989.51,47,1)
Y^Y:yes;N:no^Enter 'Yes' to trigger an alert for ALL patients, 'No' for only linked patients.
"DATA",8989.51,47,6)
P^101.43^Enter the orderable item to trigger a notification when resulted.
"DATA",8989.51,47,8)
I $$LRRAD^ORB3F1(+Y)
"DATA",8989.51,47,20,0)
^^21^21^3000918^
"DATA",8989.51,47,20,1,0)
This parameter is used to trigger a notification/alert when a specific
"DATA",8989.51,47,20,2,0)
orderable item is resulted for an inpatient.  Results only apply to orders
"DATA",8989.51,47,20,3,0)
which can be resulted (lab, imaging, consults.)
"DATA",8989.51,47,20,4,0)
 
"DATA",8989.51,47,20,5,0)
If the value for the orderable item flag is "YES", the entity (user,
"DATA",8989.51,47,20,6,0)
team, device), flagging the orderable item becomes a potential alert
"DATA",8989.51,47,20,7,0)
recipient for ALL patients.  If the value is "NO", the entity (user,
"DATA",8989.51,47,20,8,0)
team, device), flagging the orderable item only becomes a potential
"DATA",8989.51,47,20,9,0)
alert recipient if that entity is "linked" to the patient.  (If a device
"DATA",8989.51,47,20,10,0)
is added to the potential recipient list, it will always receive the
"DATA",8989.51,47,20,11,0)
alert.)
"DATA",8989.51,47,20,12,0)
 
"DATA",8989.51,47,20,13,0)
Users are linked to a patient if the user is the patient's attending
"DATA",8989.51,47,20,14,0)
physician, primary inpatient provider, PCMM primary care practicioner,
"DATA",8989.51,47,20,15,0)
PCMM associate provider, user is assigned to a position on the patient's
"DATA",8989.51,47,20,16,0)
PCMM primary care team or user shares an OE/RR team with the patient.
"DATA",8989.51,47,20,17,0)
OE/RR teams are linked to a patient if the patient is on the team. (If
"DATA",8989.51,47,20,18,0)
a patient is on a team that has flagged an orderable item, all users on
"DATA",8989.51,47,20,19,0)
that team become potential alert recipients.)  Devices (printers, etc.)
"DATA",8989.51,47,20,20,0)
are linked to a patient if the device and patient are on the same OE/RR
"DATA",8989.51,47,20,21,0)
team. 
"DATA",8989.51,47,30,0)
^8989.513I^3^3
"DATA",8989.51,47,30,1,0)
1^200
"DATA",8989.51,47,30,2,0)
2^100.21
"DATA",8989.51,47,30,3,0)
3^3.5
"DATA",8989.51,50,0)
ORB PROVIDER RECIPIENTS^Provider Recipients^1^Notification
"DATA",8989.51,50,1)
F^0:8^Any one or combination of 'P', 'A', 'T' 'O', 'M', 'E', 'R', and/or 'S'.
"DATA",8989.51,50,2)
K:$L($TR(X,"PATOMERS","")) X
"DATA",8989.51,50,6)
P^100.9^Notification sent to the patient's provider recipients.
"DATA",8989.51,50,20,0)
^^23^23^3000918^
"DATA",8989.51,50,20,1,0)
Set of codes indicating default provider recipients of a notification by 
"DATA",8989.51,50,20,2,0)
their title or relationship to the patient.  Notifications can be set up 
"DATA",8989.51,50,20,3,0)
with any or all of the following codes:
"DATA",8989.51,50,20,4,0)
 
"DATA",8989.51,50,20,5,0)
  P (Primary Provider): deliver notification to  the patient's Primary
"DATA",8989.51,50,20,6,0)
Provider.  
"DATA",8989.51,50,20,7,0)
  A (Attending Physician): deliver notification to the patient's Attending
"DATA",8989.51,50,20,8,0)
Physician.
"DATA",8989.51,50,20,9,0)
  T (Patient Care Team): deliver notification to the patient's  primary
"DATA",8989.51,50,20,10,0)
care Team.
"DATA",8989.51,50,20,11,0)
  O (Ordering Provider): deliver notification to the provider
"DATA",8989.51,50,20,12,0)
who placed the order which trigger the notification.
"DATA",8989.51,50,20,13,0)
  M (PCMM Team): deliver notification to users/providers linked to the
"DATA",8989.51,50,20,14,0)
patient via PCMM Team Position assignments.
"DATA",8989.51,50,20,15,0)
  E (Entering User): deliver notification to the user/provider who entered
"DATA",8989.51,50,20,16,0)
the order's most recent activity.
"DATA",8989.51,50,20,17,0)
  R (PCMM Primary Care Practicioner): deliver notification to the
"DATA",8989.51,50,20,18,0)
patient's PCMM Primary Care Practicioner.
"DATA",8989.51,50,20,19,0)
  S (PCMM Associate Provider): deliver notification to the patient's PCMM
"DATA",8989.51,50,20,20,0)
Associate Provider.
"DATA",8989.51,50,20,21,0)
 
"DATA",8989.51,50,20,22,0)
The providers, physicians and teams must be set up properly and accurately
"DATA",8989.51,50,20,23,0)
for the correct individuals to receive the notification.
"DATA",8989.51,50,30,0)
^8989.513I^3^3
"DATA",8989.51,50,30,1,0)
1^4
"DATA",8989.51,50,30,2,0)
2^4.2
"DATA",8989.51,50,30,3,0)
3^9.4
"DATA",8989.51,4655,0)
ORB OI ORDERED - OUTPT^Flag Items to Send OUTPT ORDER Notifs^1^Orderable Item^Send alert for ALL outpatients?
"DATA",8989.51,4655,1)
Y^Y:yes;N:no^Enter 'Yes' to trigger an alert for ALL patients, 'No' for only linked patients.
"DATA",8989.51,4655,6)
P^101.43^Enter the orderable item to trigger a notification
"DATA",8989.51,4655,20,0)
^^20^20^3000918^
"DATA",8989.51,4655,20,1,0)
This parameter is used to trigger a notification/alert when a specific
"DATA",8989.51,4655,20,2,0)
orderable item is ordered for an outpatient.
"DATA",8989.51,4655,20,3,0)
 
"DATA",8989.51,4655,20,4,0)
If the value for the orderable item flag is "YES", the entity (user,
"DATA",8989.51,4655,20,5,0)
team, device), flagging the orderable item becomes a potential alert
"DATA",8989.51,4655,20,6,0)
recipient for ALL patients.  If the value is "NO", the entity (user,
"DATA",8989.51,4655,20,7,0)
team, device), flagging the orderable item only becomes a potential
"DATA",8989.51,4655,20,8,0)
alert recipient if that entity is "linked" to the patient.  (If a device
"DATA",8989.51,4655,20,9,0)
is added to the potential recipient list, it will always receive the
"DATA",8989.51,4655,20,10,0)
alert.)
"DATA",8989.51,4655,20,11,0)
 
"DATA",8989.51,4655,20,12,0)
Users are linked to a patient if the user is the patient's attending
"DATA",8989.51,4655,20,13,0)
physician, primary inpatient provider, PCMM primary care practicioner,
"DATA",8989.51,4655,20,14,0)
PCMM associate provider, user is assigned to a position on the patient's
"DATA",8989.51,4655,20,15,0)
PCMM primary care team or user shares an OE/RR team with the patient.
"DATA",8989.51,4655,20,16,0)
OE/RR teams are linked to a patient if the patient is on the team. (If
"DATA",8989.51,4655,20,17,0)
a patient is on a team that has flagged an orderable item, all users on
"DATA",8989.51,4655,20,18,0)
that team become potential alert recipients.)  Devices (printers, etc.)
"DATA",8989.51,4655,20,19,0)
are linked to a patient if the device and patient are on the same OE/RR
"DATA",8989.51,4655,20,20,0)
team. 
"DATA",8989.51,4655,30,0)
^8989.513I^3^3
"DATA",8989.51,4655,30,1,0)
1^200
"DATA",8989.51,4655,30,2,0)
2^100.21
"DATA",8989.51,4655,30,3,0)
3^3.5
"DATA",8989.51,4656,0)
ORB OI RESULTS - OUTPT^Flag Item to Send OUTPT RESULT Notifs^1^Orderable Item^Send alert for ALL outpatients?
"DATA",8989.51,4656,1)
Y^Y:yes;N:no^Enter 'Yes' to trigger an alert for ALL patients, 'No' for only linked patients.
"DATA",8989.51,4656,6)
P^101.43^Enter the orderable item to trigger a notification when resulted.
"DATA",8989.51,4656,8)
I $$LRRAD^ORB3F1(+Y)
"DATA",8989.51,4656,20,0)
^^21^21^3000918^
"DATA",8989.51,4656,20,1,0)
This parameter is used to trigger a notification/alert when a specific
"DATA",8989.51,4656,20,2,0)
orderable item is resulted for an outpatient. Results only apply to orders
"DATA",8989.51,4656,20,3,0)
which can be resulted (lab, imaging, consults.)
"DATA",8989.51,4656,20,4,0)
 
"DATA",8989.51,4656,20,5,0)
If the value for the orderable item flag is "YES", the entity (user,
"DATA",8989.51,4656,20,6,0)
team, device), flagging the orderable item becomes a potential alert
"DATA",8989.51,4656,20,7,0)
recipient for ALL patients.  If the value is "NO", the entity (user,
"DATA",8989.51,4656,20,8,0)
team, device), flagging the orderable item only becomes a potential
"DATA",8989.51,4656,20,9,0)
alert recipient if that entity is "linked" to the patient.  (If a device
"DATA",8989.51,4656,20,10,0)
is added to the potential recipient list, it will always receive the
"DATA",8989.51,4656,20,11,0)
alert.)
"DATA",8989.51,4656,20,12,0)
      
"DATA",8989.51,4656,20,13,0)
Users are linked to a patient if the user is the patient's attending
"DATA",8989.51,4656,20,14,0)
physician, primary inpatient provider, PCMM primary care practicioner,
"DATA",8989.51,4656,20,15,0)
PCMM associate provider, user is assigned to a position on the patient's
"DATA",8989.51,4656,20,16,0)
PCMM primary care team or user shares an OE/RR team with the patient.
"DATA",8989.51,4656,20,17,0)
OE/RR teams are linked to a patient if the patient is on the team. (If
"DATA",8989.51,4656,20,18,0)
a patient is on a team that has flagged an orderable item, all users on
"DATA",8989.51,4656,20,19,0)
that team become potential alert recipients.)  Devices (printers, etc.)
"DATA",8989.51,4656,20,20,0)
are linked to a patient if the device and patient are on the same OE/RR
"DATA",8989.51,4656,20,21,0)
team. 
"DATA",8989.51,4656,30,0)
^8989.513I^3^3
"DATA",8989.51,4656,30,1,0)
1^200
"DATA",8989.51,4656,30,2,0)
2^100.21
"DATA",8989.51,4656,30,3,0)
3^3.5
"DATA",8989.51,4681,0)
ORB OI EXPIRING - INPT^Flag Item to Send INPT EXPIRING Notifs^1^Orderable Item
"DATA",8989.51,4681,1)
Y^Y:yes;N:no^Enter 'Yes' to trigger an alert for ALL patients, 'No' for only linked patients.
"DATA",8989.51,4681,6)
P^101.43^Enter the orderable item to trigger a notification when expiring.
"DATA",8989.51,4681,20,0)
^^20^20^3000918^
"DATA",8989.51,4681,20,1,0)
This parameter is used to trigger a notification/alert when a specific
"DATA",8989.51,4681,20,2,0)
orderable item is expiring for an inpatient. 
"DATA",8989.51,4681,20,3,0)
  
"DATA",8989.51,4681,20,4,0)
If the value for the orderable item flag is "YES", the entity (user,
"DATA",8989.51,4681,20,5,0)
team, device) flagging the orderable item becomes a potential alert
"DATA",8989.51,4681,20,6,0)
recipient for ALL patients.  If the value is "NO", the entity (user,
"DATA",8989.51,4681,20,7,0)
team, device), flagging the orderable item only becomes a potential
"DATA",8989.51,4681,20,8,0)
alert recipient if that entity is "linked" to the patient.  (If a device
"DATA",8989.51,4681,20,9,0)
is added to the potential recipient list, it will always receive the
"DATA",8989.51,4681,20,10,0)
alert.)
"DATA",8989.51,4681,20,11,0)
 
"DATA",8989.51,4681,20,12,0)
Users are linked to a patient if the user is the patient's attending
"DATA",8989.51,4681,20,13,0)
physician, primary inpatient provider, PCMM primary care practicioner,
"DATA",8989.51,4681,20,14,0)
PCMM associate provider, user is assigned to a position on the patient's
"DATA",8989.51,4681,20,15,0)
PCMM primary care team or user shares an OE/RR team with the patient.
"DATA",8989.51,4681,20,16,0)
OE/RR teams are linked to a patient if the patient is on the team. (If
"DATA",8989.51,4681,20,17,0)
a patient is on a team that has flagged an orderable item, all users on
"DATA",8989.51,4681,20,18,0)
that team become potential alert recipients.)  Devices (printers, etc.)
"DATA",8989.51,4681,20,19,0)
are linked to a patient if the device and patient are on the same OE/RR
"DATA",8989.51,4681,20,20,0)
team. 
"DATA",8989.51,4681,30,0)
^8989.513I^3^3
"DATA",8989.51,4681,30,1,0)
1^200
"DATA",8989.51,4681,30,2,0)
2^100.21
"DATA",8989.51,4681,30,3,0)
3^3.5
"DATA",8989.51,4684,0)
ORB OI EXPIRING - OUTPT^Flag Item to Send OUTPT EXPIRING Notifs^1^Orderable Item
"DATA",8989.51,4684,1)
Y^Y:yes;N:no^Enter 'Yes' to trigger an alert for ALL patients, 'No' for only linked patients.
"DATA",8989.51,4684,6)
P^101.43^Enter the orderable item to trigger a notification when expiring.
"DATA",8989.51,4684,20,0)
^^20^20^3000918^
"DATA",8989.51,4684,20,1,0)
 This parameter is used to trigger a notification/alert when a specific
"DATA",8989.51,4684,20,2,0)
 orderable item is expiring for an outpatient. 
"DATA",8989.51,4684,20,3,0)
   
"DATA",8989.51,4684,20,4,0)
 If the value for the orderable item flag is "YES", the entity (user,
"DATA",8989.51,4684,20,5,0)
 team, device) flagging the orderable item becomes a potential alert
"DATA",8989.51,4684,20,6,0)
 recipient for ALL patients.  If the value is "NO", the entity (user,
"DATA",8989.51,4684,20,7,0)
 team, device), flagging the orderable item only becomes a potential
"DATA",8989.51,4684,20,8,0)
 alert recipient if that entity is "linked" to the patient.  (If a device
"DATA",8989.51,4684,20,9,0)
 is added to the potential recipient list, it will always receive the
"DATA",8989.51,4684,20,10,0)
 alert.)
"DATA",8989.51,4684,20,11,0)
  
"DATA",8989.51,4684,20,12,0)
 Users are linked to a patient if the user is the patient's attending
"DATA",8989.51,4684,20,13,0)
 physician, primary inpatient provider, PCMM primary care practicioner,
"DATA",8989.51,4684,20,14,0)
 PCMM associate provider, user is assigned to a position on the patient's
"DATA",8989.51,4684,20,15,0)
 PCMM primary care team or user shares an OE/RR team with the patient.
"DATA",8989.51,4684,20,16,0)
 OE/RR teams are linked to a patient if the patient is on the team. (If
"DATA",8989.51,4684,20,17,0)
 a patient is on a team that has flagged an orderable item, all users on 
"DATA",8989.51,4684,20,18,0)
 that team become potential alert recipients.)  Devices (printers, etc.)
"DATA",8989.51,4684,20,19,0)
 are linked to a patient if the device and patient are on the same OE/RR
"DATA",8989.51,4684,20,20,0)
 team. 
"DATA",8989.51,4684,30,0)
^8989.513I^3^3
"DATA",8989.51,4684,30,1,0)
1^200
"DATA",8989.51,4684,30,2,0)
2^100.21
"DATA",8989.51,4684,30,3,0)
3^3.5
"FIA",8989.51)
PARAMETER DEFINITION
"FIA",8989.51,0)
^XTV(8989.51,
"FIA",8989.51,0,0)
8989.51I
"FIA",8989.51,0,1)
n^n^f^^y^ORX91 PARAM DEF SEARCH^y^o^n
"FIA",8989.51,0,10)

"FIA",8989.51,0,11)

"FIA",8989.51,0,"RLRO")
^DIBT(476,1)
"FIA",8989.51,0,"VR")
3.0^OR
"FIA",8989.51,8989.51)
0
"FIA",8989.51,8989.512)
0
"FIA",8989.51,8989.513)
0
"KRN",101,1211,-1)
4^6
"KRN",101,1211,0)
ORB BLANK LINE1
"KRN",101,1212,-1)
4^7
"KRN",101,1212,0)
ORB BLANK LINE2
"KRN",101,1213,-1)
4^8
"KRN",101,1213,0)
ORB BLANK LINE3
"KRN",101,2759,-1)
4^3
"KRN",101,2759,0)
VALM NEXT SCREEN
"KRN",101,2760,-1)
4^4
"KRN",101,2760,0)
VALM PREVIOUS SCREEN
"KRN",101,2767,-1)
4^5
"KRN",101,2767,0)
VALM QUIT
"KRN",101,5751,-1)
0^1
"KRN",101,5751,0)
OR PATIENT ALERTS^Patient Alerts^^M^^^^^^^^ORDER ENTRY/RESULTS REPORTING
"KRN",101,5751,1,0)
^101.06^2^2^3001120^^^
"KRN",101,5751,1,1,0)
Display a patient's CPRS alerts and allow detailed display of alert
"KRN",101,5751,1,2,0)
recipients.
"KRN",101,5751,4)
26^4
"KRN",101,5751,10,0)
^101.01PA^6^6
"KRN",101,5751,10,1,0)
2759^+^11^
"KRN",101,5751,10,1,"^")
VALM NEXT SCREEN
"KRN",101,5751,10,2,0)
2760^-^21^
"KRN",101,5751,10,2,"^")
VALM PREVIOUS SCREEN
"KRN",101,5751,10,3,0)
2767^Q^31^^^Close
"KRN",101,5751,10,3,"^")
VALM QUIT
"KRN",101,5751,10,4,0)
1211^^12^
"KRN",101,5751,10,4,"^")
ORB BLANK LINE1
"KRN",101,5751,10,5,0)
1212^^22^
"KRN",101,5751,10,5,"^")
ORB BLANK LINE2
"KRN",101,5751,10,6,0)
1213^^32^
"KRN",101,5751,10,6,"^")
ORB BLANK LINE3
"KRN",101,5751,20)

"KRN",101,5751,26)
S XQORM("#")=$G(^TMP("OR",$J,"ALERTS","#")),XQORM("ALT")="D LMALT^ORB3U1",VALMSG="Enter numbers of the alerts to display recipients" D SHOW^VALM
"KRN",101,5751,28)
Select Alert(s):
"KRN",101,5751,29)
 Close
"KRN",101,5751,99)
58398,42134
"KRN",101,5756,-1)
0^2
"KRN",101,5756,0)
OR SELECT ALERTS^Select Alert(s) from List^^A^^^^^^^^
"KRN",101,5756,20)
D SELECT^ORB3U1
"KRN",101,5756,99)
58398,51056
"KRN",409.61,786,-1)
0^1
"KRN",409.61,786,0)
OR PATIENT ALERTS^1^^90^5^20^1^1^Alert^OR PATIENT ALERTS^Patient Alerts^1^^1
"KRN",409.61,786,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,786,"ARRAY")
 ^TMP("OR",$J,"ALERTS")
"KRN",409.61,786,"COL",0)
^409.621^3^3
"KRN",409.61,786,"COL",1,0)
NUMBER^1^3
"KRN",409.61,786,"COL",2,0)
ALERT^5^59^Alert^^1
"KRN",409.61,786,"COL",3,0)
ALERT DATE/TIME^65^15^Alert Date/Time
"KRN",409.61,786,"COL","AIDENT",1,2)

"KRN",409.61,786,"COL","B","ALERT",2)

"KRN",409.61,786,"COL","B","ALERT DATE/TIME",3)

"KRN",409.61,786,"COL","B","NUMBER",1)

"KRN",409.61,786,"EXP")
D EN^VALM("OR ALERT DETAILS")
"KRN",409.61,786,"FNL")
D LMEXIT^ORB3U1
"KRN",409.61,786,"HDR")
D LMHDR^ORB3U1
"KRN",409.61,786,"HLP")
D LMHELP^ORB3U1
"KRN",409.61,786,"INIT")
D LMENTRY^ORB3U1
"MBREQ")
0
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",17,409.61)
409.61;17;1;;;;;;;LMDEL^XPDIA1
"ORD",17,409.61,0)
LIST TEMPLATE
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
91^3010111
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","ORB3")
0^1^B84803352
"RTN","ORB3",1,0)
ORB3 ; slc/CLA - Main routine for OE/RR 3 notifications ;9/15/98  16:13
"RTN","ORB3",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**31,74,91**;Dec 17, 1997
"RTN","ORB3",3,0)
EN(ORN,ORBDFN,ORNUM,ORBADUZ,ORBPMSG,ORBPDATA) ;main entry point
"RTN","ORB3",4,0)
 ;
"RTN","ORB3",5,0)
 Q:$$GET^XPAR("DIV^SYS^PKG","ORB SYSTEM ENABLE/DISABLE",1,"I")="D"
"RTN","ORB3",6,0)
 Q:'$L($G(^ORD(100.9,ORN,0)))
"RTN","ORB3",7,0)
 Q:+$$ONOFF^ORB3FN(ORN)=0
"RTN","ORB3",8,0)
 ;
"RTN","ORB3",9,0)
 S ORBPMSG=$E($G(ORBPMSG),1,51)
"RTN","ORB3",10,0)
 ;
"RTN","ORB3",11,0)
 ;if msg from notif file or oc notif (#54), quit if dup w/in past 1 min:
"RTN","ORB3",12,0)
 N ORBDUP,ORBN
"RTN","ORB3",13,0)
 S ORBN=^ORD(100.9,ORN,0)
"RTN","ORB3",14,0)
 I ($P(ORBN,"^",4)="NOT")!(ORN=54) D
"RTN","ORB3",15,0)
 .S ORBDUP=$$DUP^ORB31(ORN,ORBDFN,ORBPMSG)
"RTN","ORB3",16,0)
 Q:+$G(ORBDUP)=1
"RTN","ORB3",17,0)
 ;
"RTN","ORB3",18,0)
 N ORBDESC
"RTN","ORB3",19,0)
 S ORBDESC=" Send Alert Notification ("_(+ORN)_") "_$P($G(^ORD(100.9,+ORN,0)),U,1)_"  "
"RTN","ORB3",20,0)
 ;
"RTN","ORB3",21,0)
 D QUEUE^ORB31(ORN,ORBDFN,$G(ORNUM),.ORBADUZ,$G(ORBPMSG),$G(ORBPDATA),$H,ORBDESC)
"RTN","ORB3",22,0)
 Q
"RTN","ORB3",23,0)
ZTSK ;
"RTN","ORB3",24,0)
 D START
"RTN","ORB3",25,0)
 S ZTREQ="@"
"RTN","ORB3",26,0)
 Q
"RTN","ORB3",27,0)
UTL(ORBU,ORN,ORBDFN,ORNUM,ORBADUZ,ORBPMSG,ORBPDATA) ;
"RTN","ORB3",28,0)
 Q:$G(ORBU)'=1
"RTN","ORB3",29,0)
START Q:$G(ORN)=""!($G(ORBDFN)="")
"RTN","ORB3",30,0)
 Q:'$L($G(^ORD(100.9,ORN,0)))
"RTN","ORB3",31,0)
 N ORBNOW,ORBID,ORBLOCK,ORBDESC
"RTN","ORB3",32,0)
 S ORBNOW=$$NOW^XLFDT
"RTN","ORB3",33,0)
 S ORBLOCK=0
"RTN","ORB3",34,0)
 ;
"RTN","ORB3",35,0)
 ;lock global to prevent concurrent processing by other resource slots:
"RTN","ORB3",36,0)
 I '$D(ORBU) D
"RTN","ORB3",37,0)
 .S ^XTMP("ORBLOCK",0)=$$FMADD^XLFDT(ORBNOW,1,"","","")_"^"_ORBNOW
"RTN","ORB3",38,0)
 .S ORBID=$P($P($G(ORBPDATA),"|",2),"@")  ;get unique data id
"RTN","ORB3",39,0)
 .I $L(ORBID) D
"RTN","ORB3",40,0)
 ..LOCK +^XTMP("ORBLOCK",ORBDFN,ORN,ORBID):60 E  D  Q
"RTN","ORB3",41,0)
 ...S ORBDESC=" Requeue Alert Notification ("_(+ORN)_") "_$P($G(^ORD(100.9,+ORN,0)),U,1)_"  "
"RTN","ORB3",42,0)
 ...D QUEUE^ORB31(ORN,ORBDFN,$G(ORNUM),.ORBADUZ,$G(ORBPMSG),$G(ORBPDATA),$$HADD^XLFDT($H,"","",5,""),ORBDESC) ;requeue in 5 min.
"RTN","ORB3",43,0)
 ...S ORBLOCK=1
"RTN","ORB3",44,0)
 .;
"RTN","ORB3",45,0)
 .I '$L(ORBID) D
"RTN","ORB3",46,0)
 ..LOCK +^XTMP("ORBLOCK",ORBDFN,ORN):60 E  D  Q
"RTN","ORB3",47,0)
 ...S ORBDESC=" Requeue Alert Notification ("_(+ORN)_") "_$P($G(^ORD(100.9,+ORN,0)),U,1)_"  "
"RTN","ORB3",48,0)
 ...D QUEUE^ORB31(ORN,ORBDFN,$G(ORNUM),.ORBADUZ,$G(ORBPMSG),$G(ORBPDATA),$$HADD^XLFDT($H,"","",5,""),ORBDESC) ;requeue in 5 min.
"RTN","ORB3",49,0)
 ...S ORBLOCK=1
"RTN","ORB3",50,0)
 .;
"RTN","ORB3",51,0)
 I ORBLOCK=1 D QUIT Q
"RTN","ORB3",52,0)
 ;
"RTN","ORB3",53,0)
 N ORBDUZ,ORBN,ORBXQAID,ORPTNAM,ORBPRIM,ORBATTD,ORBDEV
"RTN","ORB3",54,0)
 N ORBUI,ORBASPEC,ORBSMSG,ORBADT,ORBSDEV,ORBDEL,ORBDI
"RTN","ORB3",55,0)
 S ORBUI=1,ORBADT=0
"RTN","ORB3",56,0)
 S:'$L($G(ORBPMSG)) ORBPMSG=""
"RTN","ORB3",57,0)
 S ORBN=^ORD(100.9,ORN,0)
"RTN","ORB3",58,0)
 ;
"RTN","ORB3",59,0)
 N DFN S DFN=ORBDFN,VA200="" D OERR^VADPT
"RTN","ORB3",60,0)
 I ('$L($G(VA("BID"))))!('$L($G(VADM(1)))) D QUIT Q  ;quit if no pt id
"RTN","ORB3",61,0)
 I $D(DGPMA) D
"RTN","ORB3",62,0)
 .I (ORN=18)!(ORN=20)!(ORN=35) S ORBADT=1 ;A/D/T notif
"RTN","ORB3",63,0)
 ;if not an A/D/T notif, get primary & attending from OERR^VADPT:
"RTN","ORB3",64,0)
 I ORBADT=0 S ORBPRIM=+$P(VAIN(2),U),ORBATTD=+$P(VAIN(11),U)
"RTN","ORB3",65,0)
 I ORBADT=1 D  ;if A/D/T notif:
"RTN","ORB3",66,0)
 .;if A/D/T event type is "3" (discharge) use previous visit d/t:
"RTN","ORB3",67,0)
 .I $P(DGPMA,U,2)="3" S VAINDT=$$FMADD^XLFDT($P(DGPMA,U),"","","","-1")
"RTN","ORB3",68,0)
 .E  S VAINDT=$P(DGPMA,U)  ;if not a discharge use this visit d/t
"RTN","ORB3",69,0)
 .D INP^VADPT  ;get new VAIN array for appropriate visit
"RTN","ORB3",70,0)
 .S ORBPRIM=+$P(VAIN(2),U),ORBATTD=+$P(VAIN(11),U)
"RTN","ORB3",71,0)
 I $D(ORBU) D  ;if util processing, begin building rpt
"RTN","ORB3",72,0)
 .S ORBU(ORBUI)="Processing notification: "_$P(ORBN,U),ORBUI=ORBUI+1
"RTN","ORB3",73,0)
 .S ORBU(ORBUI)="            for patient: "_VADM(1),ORBUI=ORBUI+1
"RTN","ORB3",74,0)
 .I $G(ORNUM)>0 S ORBU(ORBUI)="              for order: "_ORNUM,ORBUI=ORBUI+1
"RTN","ORB3",75,0)
 D REGULAR^ORB3REG(ORN,.XQA,.ORBU,.ORBUI,.ORBDEV)
"RTN","ORB3",76,0)
 D SPECIAL^ORB3REG(ORN,.ORBASPEC,.ORBU,.ORBUI,$G(ORNUM),ORBDFN,$G(ORBPDATA),.ORBSMSG,$G(ORBPMSG),.ORBSDEV)
"RTN","ORB3",77,0)
 I $L($G(ORBSMSG)) S ORBPMSG=$E(ORBSMSG,1,51)
"RTN","ORB3",78,0)
 I $D(ORBASPEC)>1 D SPECDUZS ;process special recips
"RTN","ORB3",79,0)
 I $D(ORBADUZ)>1 D PKGDUZS ;process pkg-supplied recips
"RTN","ORB3",80,0)
 D TITLE ;process prim prov, attending, teams, ordering prov
"RTN","ORB3",81,0)
 S ORBXQAID=$P(ORBN,"^",2)_","_ORBDFN_","_ORN
"RTN","ORB3",82,0)
 ;
"RTN","ORB3",83,0)
 ;gather previous alert recips as potential recips for this alert:
"RTN","ORB3",84,0)
 I $P(ORBN,"^",4)="NOT" D  ;if msg from notif file:
"RTN","ORB3",85,0)
 .I $D(ORBU) D
"RTN","ORB3",86,0)
 ..S ORBU(ORBUI)=" ",ORBUI=ORBUI+1
"RTN","ORB3",87,0)
 ..S ORBU(ORBUI)="Recipients with undeleted previous alert:",ORBUI=ORBUI+1
"RTN","ORB3",88,0)
 .S ORBDUZ=""
"RTN","ORB3",89,0)
 .D DELSTAT^XQALBUTL("OR,"_ORBDFN_","_ORN,.ORBDEL)  ;DBIA #3197
"RTN","ORB3",90,0)
 .I +$G(ORBDEL)>1 F ORBDI=1:1:ORBDEL D
"RTN","ORB3",91,0)
 ..I $P(ORBDEL(ORBDI),U,2)=0 S ORBDUZ=$P(ORBDEL(ORBDI),U) D USER
"RTN","ORB3",92,0)
 ;
"RTN","ORB3",93,0)
 I ($D(XQA)>1)!($D(ORBDEV)>1)!($D(ORBSDEV)>1) D  ;recips identified, setup to send alert:
"RTN","ORB3",94,0)
 .S XQAFLG=$P(ORBN,"^",5) ;info only (I) or runtime/follow-up action (R)
"RTN","ORB3",95,0)
 .I XQAFLG="R" S XQAROU=$P(ORBN,"^",6)_"^"_$P(ORBN,"^",7)
"RTN","ORB3",96,0)
 .I $G(ORBPDATA)'="" S XQADATA=ORBPDATA
"RTN","ORB3",97,0)
 .S ORPTNAM=$E(VADM(1)_"         ",1,9)
"RTN","ORB3",98,0)
 .S XQAMSG=ORPTNAM_" "_"("_$E(ORPTNAM)_$E(VA("BID"),1,4)_")"_": "
"RTN","ORB3",99,0)
 .S XQAMSG=XQAMSG_$S(ORBPMSG'="":ORBPMSG,1:$P(ORBN,"^",3))
"RTN","ORB3",100,0)
 .S XQAARCH=$$GET^XPAR("DIV^SYS^PKG","ORB ARCHIVE PERIOD",ORN,"I")
"RTN","ORB3",101,0)
 .S XQASUPV=$$GET^XPAR("DIV^SYS^PKG","ORB FORWARD SUPERVISOR",ORN,"I")
"RTN","ORB3",102,0)
 .S XQASURO=$$GET^XPAR("DIV^SYS^PKG","ORB FORWARD SURROGATES",ORN,"I")
"RTN","ORB3",103,0)
 .I $D(ORBDEV)>1 D REGDEV^ORB31(.ORBDEV)
"RTN","ORB3",104,0)
 .I $D(ORBSDEV)>1 D REGDEV^ORB31(.ORBSDEV)
"RTN","ORB3",105,0)
 .I $P(ORBN,"^",4)="NOT" D  ;if msg from notif file:
"RTN","ORB3",106,0)
 ..K XQAKILL S XQAID=ORBXQAID D DELETEA^XQALERT  ;delete matching notifs
"RTN","ORB3",107,0)
 .S XQAID=ORBXQAID
"RTN","ORB3",108,0)
 .D SETUP^XQALERT
"RTN","ORB3",109,0)
QUIT ;
"RTN","ORB3",110,0)
 K VA,VA200,VADM,VAERR,VAIN,XQA,XQADATA,XQAID,XQAFLG,XQAMSG,XQAROU,XQAARCH,XQASUPV,XQASURO
"RTN","ORB3",111,0)
 K ^XTMP("ORBUSER",$J)
"RTN","ORB3",112,0)
 I '$D(ORBU) D
"RTN","ORB3",113,0)
 .I $L(ORBID) LOCK -^XTMP("ORBLOCK",ORBDFN,ORN,ORBID)
"RTN","ORB3",114,0)
 .E  LOCK -^XTMP("ORBLOCK",ORBDFN,ORN)
"RTN","ORB3",115,0)
 Q
"RTN","ORB3",116,0)
PKGDUZS ;get DUZs from pkg-passed ORBADUZ() array
"RTN","ORB3",117,0)
 N ORBPDUZ
"RTN","ORB3",118,0)
 I $D(ORBU) D
"RTN","ORB3",119,0)
 .S ORBU(ORBUI)=" ",ORBUI=ORBUI+1
"RTN","ORB3",120,0)
 .S ORBU(ORBUI)="Recipients defined when notif was triggered:",ORBUI=ORBUI+1
"RTN","ORB3",121,0)
 S ORBPDUZ=""
"RTN","ORB3",122,0)
 F  S ORBPDUZ=$O(ORBADUZ(ORBPDUZ)) Q:ORBPDUZ=""  S ORBDUZ=ORBPDUZ D USER
"RTN","ORB3",123,0)
 Q
"RTN","ORB3",124,0)
SPECDUZS ;get DUZs from ORBASPEC() array returned by SPECIAL^ORB3REG
"RTN","ORB3",125,0)
 N ORBSDUZ
"RTN","ORB3",126,0)
 I $D(ORBU) D
"RTN","ORB3",127,0)
 .S ORBU(ORBUI)=" ",ORBUI=ORBUI+1
"RTN","ORB3",128,0)
 .S ORBU(ORBUI)="Special recipients associated with the notification:",ORBUI=ORBUI+1
"RTN","ORB3",129,0)
 S ORBSDUZ=""
"RTN","ORB3",130,0)
 F  S ORBSDUZ=$O(ORBASPEC(ORBSDUZ)) Q:ORBSDUZ=""  S ORBDUZ=ORBSDUZ D USER
"RTN","ORB3",131,0)
 Q
"RTN","ORB3",132,0)
TITLE ;check for provider recips by title
"RTN","ORB3",133,0)
 N TITLES
"RTN","ORB3",134,0)
 I $D(ORBU) D
"RTN","ORB3",135,0)
 .S ORBU(ORBUI)=" ",ORBUI=ORBUI+1
"RTN","ORB3",136,0)
 .S ORBU(ORBUI)="Recipients determined by Provider Recipient parameter:",ORBUI=ORBUI+1
"RTN","ORB3",137,0)
 S TITLES=$$GET^XPAR("DIV^SYS^PKG","ORB PROVIDER RECIPIENTS",ORN,"I")
"RTN","ORB3",138,0)
 I TITLES["P" D PRIMARY
"RTN","ORB3",139,0)
 I TITLES["A" D ATTEND
"RTN","ORB3",140,0)
 I TITLES["T" D TEAMS
"RTN","ORB3",141,0)
 I TITLES["O" D ORDERER
"RTN","ORB3",142,0)
 I TITLES["E" D ENTERBY
"RTN","ORB3",143,0)
 I TITLES["R" D PCMMPRIM
"RTN","ORB3",144,0)
 I TITLES["S" D PCMMASSC
"RTN","ORB3",145,0)
 I TITLES["M" D PCMMTEAM
"RTN","ORB3",146,0)
 Q
"RTN","ORB3",147,0)
PRIMARY ;
"RTN","ORB3",148,0)
 I $D(ORBU) S ORBU(ORBUI)=" Primary provider:",ORBUI=ORBUI+1
"RTN","ORB3",149,0)
 I +$G(ORBPRIM)>0 S ORBDUZ=ORBPRIM D USER
"RTN","ORB3",150,0)
 Q
"RTN","ORB3",151,0)
ATTEND ;
"RTN","ORB3",152,0)
 I $D(ORBU) S ORBU(ORBUI)=" Attending physician:",ORBUI=ORBUI+1
"RTN","ORB3",153,0)
 I +$G(ORBATTD)>0 S ORBDUZ=ORBATTD D USER
"RTN","ORB3",154,0)
 Q
"RTN","ORB3",155,0)
TEAMS ;
"RTN","ORB3",156,0)
 I $D(ORBU) S ORBU(ORBUI)=" Teams/Personal Lists related to patient:",ORBUI=ORBUI+1
"RTN","ORB3",157,0)
 N ORBLST,ORBI,ORBJ,ORBTM,ORBTNAME,ORBTTYPE
"RTN","ORB3",158,0)
 D TMSPT^ORQPTQ1(.ORBLST,ORBDFN)
"RTN","ORB3",159,0)
 Q:+$G(ORBLST(1))<1
"RTN","ORB3",160,0)
 S ORBI="" F  S ORBI=$O(ORBLST(ORBI)) Q:ORBI=""  D
"RTN","ORB3",161,0)
 .S ORBTM=$P(ORBLST(ORBI),U),ORBTNAME=$P(ORBLST(ORBI),U,2)
"RTN","ORB3",162,0)
 .S ORBTTYPE=$P(ORBLST(ORBI),U,3)
"RTN","ORB3",163,0)
 .I $D(ORBU) D
"RTN","ORB3",164,0)
 ..S ORBU(ORBUI)="  Patient list "_ORBTNAME_" ["_ORBTTYPE_"]:",ORBUI=ORBUI+1
"RTN","ORB3",165,0)
 .N ORBLST2 D TEAMPROV^ORQPTQ1(.ORBLST2,ORBTM)
"RTN","ORB3",166,0)
 .Q:+$G(ORBLST2(1))<1
"RTN","ORB3",167,0)
 .S ORBJ="" F  S ORBJ=$O(ORBLST2(ORBJ)) Q:ORBJ=""  D
"RTN","ORB3",168,0)
 ..S ORBDUZ=$P(ORBLST2(ORBJ),U)_U_ORBTM I +$G(ORBDUZ)>0 D USER
"RTN","ORB3",169,0)
 Q
"RTN","ORB3",170,0)
ORDERER ;
"RTN","ORB3",171,0)
 I $D(ORBU) S ORBU(ORBUI)=" Ordering provider:",ORBUI=ORBUI+1
"RTN","ORB3",172,0)
 N ORBLST,ORBI,ORBTM,ORBJ,ORBTNAME,ORBPLST,ORBPI,ORBPTM,ORBTTYPE
"RTN","ORB3",173,0)
 Q:'$L($G(ORNUM))
"RTN","ORB3",174,0)
 S ORBDUZ=$$ORDERER^ORQOR2(ORNUM)
"RTN","ORB3",175,0)
 I +$G(ORBDUZ)>0 D
"RTN","ORB3",176,0)
 .D USER
"RTN","ORB3",177,0)
 .;if notification is Order Req E/S (#12) or Order Req Co-sign (#37) and
"RTN","ORB3",178,0)
 .;user doesn't have ES authority, send to fellow team members w/ES:
"RTN","ORB3",179,0)
 .I ((ORN=12)!(ORN=37)),('$D(^XUSEC("ORES",ORBDUZ))) D
"RTN","ORB3",180,0)
 ..I $D(ORBU) S ORBU(ORBUI)=" Orderer can't elec sign, getting teams orderer belongs to:",ORBUI=ORBUI+1
"RTN","ORB3",181,0)
 ..D TEAMPR^ORQPTQ1(.ORBLST,ORBDUZ)  ;get teams orderer belongs to
"RTN","ORB3",182,0)
 ..Q:+$G(ORBLST(1))<1
"RTN","ORB3",183,0)
 ..D TMSPT^ORQPTQ1(.ORBPLST,ORBDFN)  ;get teams patient belongs to
"RTN","ORB3",184,0)
 ..Q:+$G(ORBPLST(1))<1
"RTN","ORB3",185,0)
 ..S ORBI="" F  S ORBI=$O(ORBLST(ORBI)) Q:ORBI=""  D
"RTN","ORB3",186,0)
 ...S ORBPI="" F  S ORBPI=$O(ORBPLST(ORBPI)) Q:ORBPI=""  D
"RTN","ORB3",187,0)
 ....S ORBTM=$P(ORBLST(ORBI),U),ORBPTM=$P(ORBPLST(ORBPI),U)
"RTN","ORB3",188,0)
 ....I ORBTM=ORBPTM D  ;if patient is on provider's team
"RTN","ORB3",189,0)
 .....I +$G(ORBPTM)>0 D
"RTN","ORB3",190,0)
 ......S ORBTNAME=$P(ORBPLST(ORBPI),U,2)
"RTN","ORB3",191,0)
 ......S ORBTTYPE=$P(ORBPLST(ORBPI),U,3)
"RTN","ORB3",192,0)
 ......I $D(ORBU) S ORBU(ORBUI)="  Orderer's pt list "_ORBTNAME_" ["_ORBTTYPE_"] recipients: ",ORBUI=ORBUI+1
"RTN","ORB3",193,0)
 ......N ORBLST2 D TEAMPROV^ORQPTQ1(.ORBLST2,ORBPTM)  ;get providrs on tm
"RTN","ORB3",194,0)
 ......Q:+$G(ORBLST2(1))<1
"RTN","ORB3",195,0)
 ......S ORBJ="" F  S ORBJ=$O(ORBLST2(ORBJ)) Q:ORBJ=""  D
"RTN","ORB3",196,0)
 .......S ORBDUZ=$P(ORBLST2(ORBJ),U)_U_ORBPTM I +$G(ORBDUZ)>0,($D(^XUSEC("ORES",+ORBDUZ))) D USER
"RTN","ORB3",197,0)
 Q
"RTN","ORB3",198,0)
ENTERBY ;
"RTN","ORB3",199,0)
 I $D(ORBU) S ORBU(ORBUI)=" User entering order's most recent activity:",ORBUI=ORBUI+1
"RTN","ORB3",200,0)
 I $D(^OR(100,ORNUM,8,0)) D
"RTN","ORB3",201,0)
 .S ORBDUZ=$P(^OR(100,ORNUM,8,$P(^OR(100,ORNUM,8,0),U,3),0),U,13)
"RTN","ORB3",202,0)
 I +$G(ORBDUZ)>0 D USER
"RTN","ORB3",203,0)
 Q
"RTN","ORB3",204,0)
PCMMPRIM ;
"RTN","ORB3",205,0)
 I $D(ORBU) S ORBU(ORBUI)=" PCMM Primary Care Practitioner:",ORBUI=ORBUI+1
"RTN","ORB3",206,0)
 S ORBDUZ=+$$OUTPTPR^SDUTL3(ORBDFN,$$NOW^XLFDT,1)  ;DBIA #1252
"RTN","ORB3",207,0)
 I +$G(ORBDUZ)>0 D USER
"RTN","ORB3",208,0)
 Q
"RTN","ORB3",209,0)
PCMMASSC ;
"RTN","ORB3",210,0)
 I $D(ORBU) S ORBU(ORBUI)=" PCMM Associate Provider:",ORBUI=ORBUI+1
"RTN","ORB3",211,0)
 S ORBDUZ=+$$OUTPTAP^SDUTL3(ORBDFN,$$NOW^XLFDT)  ;DBIA #1252
"RTN","ORB3",212,0)
 I +$G(ORBDUZ)>0 D USER
"RTN","ORB3",213,0)
 Q
"RTN","ORB3",214,0)
PCMMTEAM ;
"RTN","ORB3",215,0)
 N ORPCMM,ORPCMMDZ
"RTN","ORB3",216,0)
 I $D(ORBU) S ORBU(ORBUI)=" PCMM Team Position Assignments:",ORBUI=ORBUI+1
"RTN","ORB3",217,0)
 S ORPCMM=$$PRPT^SCAPMC(ORBDFN,,,,,,"^TMP(""ORPCMM"",$J)",)  ;DBIA #1916
"RTN","ORB3",218,0)
 S ORPCMMDZ=0
"RTN","ORB3",219,0)
 F  S ORPCMMDZ=$O(^TMP("ORPCMM",$J,"SCPR",ORPCMMDZ)) Q:'ORPCMMDZ  D
"RTN","ORB3",220,0)
 .S ORBDUZ=ORPCMMDZ D USER
"RTN","ORB3",221,0)
 K ^TMP("ORPCMM",$J)
"RTN","ORB3",222,0)
 Q
"RTN","ORB3",223,0)
USER ;check to see if USER (ORBDUZ) should be a recip
"RTN","ORB3",224,0)
 D USER^ORB3USER(.XQA,ORBDUZ,ORN,.ORBU,.ORBUI,ORBDFN)
"RTN","ORB3",225,0)
 Q
"RTN","ORB3FN")
0^6^B5948240
"RTN","ORB3FN",1,0)
ORB3FN ; slc/CLA - Functions which return OE/RR Notification information ;12/15/97
"RTN","ORB3FN",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**31,74,91**;Dec 17, 1997
"RTN","ORB3FN",3,0)
 Q
"RTN","ORB3FN",4,0)
ONOFF(ORBN) ;extrinsic function returns '1' if notif is to be processed
"RTN","ORB3FN",5,0)
 N ORBFLAG,ORBLST,ORBERR,ORBI,ORBE,ORBX
"RTN","ORB3FN",6,0)
 S ORBE="",ORBX=0
"RTN","ORB3FN",7,0)
 D ENVAL^XPAR(.ORBLST,"ORB PROCESSING FLAG",ORBN,.ORBERR)
"RTN","ORB3FN",8,0)
 I 'ORBERR,$G(ORBLST)>0 D
"RTN","ORB3FN",9,0)
 .F ORBI=1:1:ORBLST S ORBE=$O(ORBLST(ORBE)) D
"RTN","ORB3FN",10,0)
 ..I ORBLST(ORBE,ORBN)="M" S ORBX=1 Q
"RTN","ORB3FN",11,0)
 ..I ORBLST(ORBE,ORBN)="E" S ORBX=2 Q
"RTN","ORB3FN",12,0)
 I ORBX=1 Q "1^Mandatory Entity(s) exist."
"RTN","ORB3FN",13,0)
 I ORBX=2 Q "1^Enabled Entity(s) exist."
"RTN","ORB3FN",14,0)
 K ORBLST,ORBERR
"RTN","ORB3FN",15,0)
 D ENVAL^XPAR(.ORBLST,"ORB DEFAULT RECIPIENT DEVICES",ORBN,.ORBERR)
"RTN","ORB3FN",16,0)
 I 'ORBERR,$G(ORBLST)>0 Q "1^Default Recipient Device(s) exist."
"RTN","ORB3FN",17,0)
 K ORBLST,ORBERR
"RTN","ORB3FN",18,0)
 S ORBE="",ORBX=0
"RTN","ORB3FN",19,0)
 D ENVAL^XPAR(.ORBLST,"ORB DEFAULT RECIPIENTS",ORBN,.ORBERR)
"RTN","ORB3FN",20,0)
 I 'ORBERR,$G(ORBLST)>0 D
"RTN","ORB3FN",21,0)
 .F ORBI=1:1:ORBLST S ORBE=$O(ORBLST(ORBE)) D
"RTN","ORB3FN",22,0)
 ..I ORBLST(ORBE,ORBN)=1 S ORBX=1 Q
"RTN","ORB3FN",23,0)
 I ORBX=1 Q "1^Default Recipient(s) exist."
"RTN","ORB3FN",24,0)
 Q "0^No Mandatory or enabled entities and no default recipients."
"RTN","ORB3FN",25,0)
LIST(Y) ;return list of notifications from Notification File [#100.9]
"RTN","ORB3FN",26,0)
 ; RETURN IEN^NAME^URGENCY
"RTN","ORB3FN",27,0)
 N I,J,V
"RTN","ORB3FN",28,0)
 S I=1
"RTN","ORB3FN",29,0)
 S J=0 F  S J=$O(^ORD(100.9,"B",J)) Q:J=""  S V=0,V=$O(^ORD(100.9,"B",J,V)) S Y(I)=V_"^"_J_"^"_^ORD(100.9,V,3),I=I+1
"RTN","ORB3FN",30,0)
 Q
"RTN","ORB3FN",31,0)
LISTON(ORY,ORBUSR) ;return notifications the user has turned On or OFF
"RTN","ORB3FN",32,0)
 ; RETURN NOTIF IEN^NOTIF NAME^ON/OFF FLAG
"RTN","ORB3FN",33,0)
 N ORSX,ORUX,ORMX,ORBNAM,ORBIEN,ORYI
"RTN","ORB3FN",34,0)
 S ORYI=0
"RTN","ORB3FN",35,0)
 ;see if notification system is disabled:
"RTN","ORB3FN",36,0)
 S ORSX=$$GET^XPAR("DIV^SYS^PKG","ORB SYSTEM ENABLE/DISABLE",1,"I")
"RTN","ORB3FN",37,0)
 I ORSX="D" S ORMX="OFF"
"RTN","ORB3FN",38,0)
 ;
"RTN","ORB3FN",39,0)
 ;loop thru all notifications and determine recipient status:
"RTN","ORB3FN",40,0)
 S ORBNAM="" F  S ORBNAM=$O(^ORD(100.9,"B",ORBNAM)) Q:ORBNAM=""  D
"RTN","ORB3FN",41,0)
 .S ORBIEN=0,ORBIEN=$O(^ORD(100.9,"B",ORBNAM,ORBIEN)) I +$G(ORBIEN)>0 D
"RTN","ORB3FN",42,0)
 ..I $G(ORSX)'="D" D
"RTN","ORB3FN",43,0)
 ...S ORUX="",ORUX=$$ONOFF^ORB3USER(ORBIEN,ORBUSR,"","")
"RTN","ORB3FN",44,0)
 ...I $L(ORUX) S ORMX=$P(ORUX,U)
"RTN","ORB3FN",45,0)
 ..S ORYI=ORYI+1
"RTN","ORB3FN",46,0)
 ..S ORY(ORYI)=ORBIEN_U_ORBNAM_U_ORMX
"RTN","ORB3FN",47,0)
 ;
"RTN","ORB3FN",48,0)
 Q
"RTN","ORB3FN",49,0)
PTLOC(ORBPT) ;get patient's location (INPATIENT ONLY - outpt locations
"RTN","ORB3FN",50,0)
 ;cannot be reliably determined, and many simultaneous outpt locations
"RTN","ORB3FN",51,0)
 ;can occur) - returns pt location in format: location ien^location name
"RTN","ORB3FN",52,0)
 ;outpatients return "0^Outpt"
"RTN","ORB3FN",53,0)
 N ORBLOC,ORBLOCN,ORBRES
"RTN","ORB3FN",54,0)
 S ORBRES="0^Outpt"
"RTN","ORB3FN",55,0)
 I +$G(ORBPT)>0 D
"RTN","ORB3FN",56,0)
 .N DFN S DFN=ORBPT,VA200="" D OERR^VADPT
"RTN","ORB3FN",57,0)
 .S ORBLOC=+$G(^DIC(42,+VAIN(4),44)) I +$G(ORBLOC)>0 D
"RTN","ORB3FN",58,0)
 ..S ORBLOCN=$P(^SC(+ORBLOC,0),U)
"RTN","ORB3FN",59,0)
 ..S ORBRES=ORBLOC_U_ORBLOCN
"RTN","ORB3FN",60,0)
 K VA200,VAIN
"RTN","ORB3FN",61,0)
 Q ORBRES
"RTN","ORB3U1")
0^2^B56393620
"RTN","ORB3U1",1,0)
ORB3U1 ; slc/CLA - Utilities which support OE/RR 3 Notifications ;12/15/97
"RTN","ORB3U1",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**9,74,88,91**;Dec 17, 1997
"RTN","ORB3U1",3,0)
 Q
"RTN","ORB3U1",4,0)
LIST(Y) ;return list of notifications from Notification File [#100.9]
"RTN","ORB3U1",5,0)
 ; RETURN IEN^NAME^URGENCY
"RTN","ORB3U1",6,0)
 N I,J,V
"RTN","ORB3U1",7,0)
 S I=1
"RTN","ORB3U1",8,0)
 S J=0 F  S J=$O(^ORD(100.9,"B",J)) Q:J=""  S V=0,V=$O(^ORD(100.9,"B",J,V)) S Y(I)=V_"^"_J_"^"_^ORD(100.9,V,3),I=I+1
"RTN","ORB3U1",9,0)
 Q
"RTN","ORB3U1",10,0)
 ;
"RTN","ORB3U1",11,0)
ALRTHX ;report the recipients for an alert, when received, action taken
"RTN","ORB3U1",12,0)
 N ORBDFN,ORBSDT,ORBEDT
"RTN","ORB3U1",13,0)
 ;prompt for patient (required):
"RTN","ORB3U1",14,0)
 K DIC S DIC="^DPT(",DIC("A")="PATIENT (req'd): ",DIC(0)="AEQNM" D ^DIC
"RTN","ORB3U1",15,0)
 I Y<1 K DIC,Y Q
"RTN","ORB3U1",16,0)
 S ORBDFN=+Y,ORBPT=$P(Y,U,2)
"RTN","ORB3U1",17,0)
 K DIC,Y,DUOUT,DTOUT
"RTN","ORB3U1",18,0)
 ;
"RTN","ORB3U1",19,0)
 S %DT="AET",%DT("A")="Start Date/Time (req'd): ",%DT("B")="T-30" D ^%DT
"RTN","ORB3U1",20,0)
 I Y<1 K %DT,Y Q
"RTN","ORB3U1",21,0)
 S ORBSDT=Y
"RTN","ORB3U1",22,0)
 ;
"RTN","ORB3U1",23,0)
 S %DT="AET",%DT("A")="End Date/Time (req'd): ",%DT("B")="NOW" D ^%DT
"RTN","ORB3U1",24,0)
 I Y<1 K %DT,Y Q
"RTN","ORB3U1",25,0)
 S ORBEDT=Y
"RTN","ORB3U1",26,0)
 ;
"RTN","ORB3U1",27,0)
 ;get alerts for this patient from the alert tracking file:
"RTN","ORB3U1",28,0)
 D PATIENT^XQALERT("^TMP(""ORB"",$J)",ORBDFN,ORBSDT,ORBEDT)
"RTN","ORB3U1",29,0)
 W !!,"Processing..."
"RTN","ORB3U1",30,0)
 ;
"RTN","ORB3U1",31,0)
 D EN^VALM("OR PATIENT ALERTS")
"RTN","ORB3U1",32,0)
 Q
"RTN","ORB3U1",33,0)
SELECT ;if one or more alerts selected, display/print recipient data:
"RTN","ORB3U1",34,0)
 N ORN,ORNUMS,ORI,ORJ,ORBAL,ORBAID,ORBSMSG,ORY,DESC,HDR
"RTN","ORB3U1",35,0)
 S ORNUMS=$P(XQORNOD(0),"=",2)
"RTN","ORB3U1",36,0)
 Q:'$L(ORNUMS)
"RTN","ORB3U1",37,0)
 D FULL^VALM1
"RTN","ORB3U1",38,0)
 ;
"RTN","ORB3U1",39,0)
 S ORJ=1
"RTN","ORB3U1",40,0)
 F ORI=1:1:$L(ORNUMS,",")-1 D
"RTN","ORB3U1",41,0)
 .S ORN=$P(ORNUMS,",",ORI)
"RTN","ORB3U1",42,0)
 .S ORBAL=$G(^TMP("OR",$J,"ALERTS","IDX",ORN)) I $L(ORBAL) D
"RTN","ORB3U1",43,0)
 ..S ORBAID=$P(ORBAL,U)
"RTN","ORB3U1",44,0)
 ..S ORBSMSG=$P(ORBAL,U,2)
"RTN","ORB3U1",45,0)
 ..S ORY(ORJ)="RECIPIENTS OF ALERT: "_ORBSMSG,ORJ=ORJ+1
"RTN","ORB3U1",46,0)
 ..D GETRECS(ORBAID)  ;get recipient data
"RTN","ORB3U1",47,0)
 ..S ORJ=ORJ+1,ORY(ORJ)="",ORJ=ORJ+1,ORY(ORJ)="",ORJ=ORJ+1
"RTN","ORB3U1",48,0)
 S DESC="Recipients of a Kernel Alert"
"RTN","ORB3U1",49,0)
 S HDR="RECIPIENTS OF ALERTS FOR PATIENT: "_ORBPT
"RTN","ORB3U1",50,0)
 D OUTPUT(.ORY,DESC,HDR)
"RTN","ORB3U1",51,0)
 S VALMBCK="R"
"RTN","ORB3U1",52,0)
 Q
"RTN","ORB3U1",53,0)
LMHDR ; header for ListMgr display
"RTN","ORB3U1",54,0)
 S VALMHDR(1)="Alerts for "_ORBPT
"RTN","ORB3U1",55,0)
 Q
"RTN","ORB3U1",56,0)
LMHELP ; help for List Mgr display
"RTN","ORB3U1",57,0)
 N X
"RTN","ORB3U1",58,0)
 D FULL^VALM1 S VALMBCK="R"
"RTN","ORB3U1",59,0)
 W !!,"Enter the display number of the alert whose recipients you wish to review in detail."
"RTN","ORB3U1",60,0)
 W !!,"Press <return> to continue ..."
"RTN","ORB3U1",61,0)
 R X:DTIME
"RTN","ORB3U1",62,0)
 Q
"RTN","ORB3U1",63,0)
LMEXIT ; exit code for List Mgr display
"RTN","ORB3U1",64,0)
 D CLEAR^VALM1
"RTN","ORB3U1",65,0)
 K ORBPT,^TMP("OR",$J,"ALERTS"),XQORM("ALT"),^TMP("ORB",$J)
"RTN","ORB3U1",66,0)
 Q
"RTN","ORB3U1",67,0)
LMALT ; alternative selection code
"RTN","ORB3U1",68,0)
 D FULL^VALM1
"RTN","ORB3U1",69,0)
 S VALMBCK="R"
"RTN","ORB3U1",70,0)
 Q
"RTN","ORB3U1",71,0)
LMENTRY ; entry code for List Mgr display
"RTN","ORB3U1",72,0)
 N ORBA,ORBAID,ORBDT,ORBMSG,ORBX,ORNUM,ORDATA,ORAD,LCNT,NUM
"RTN","ORB3U1",73,0)
 N ORX,ORY
"RTN","ORB3U1",74,0)
 ;
"RTN","ORB3U1",75,0)
 D CLEAN^VALM10
"RTN","ORB3U1",76,0)
 ;
"RTN","ORB3U1",77,0)
 S ORBA="" F  S ORBA=$O(^TMP("ORB",$J,ORBA)) Q:ORBA=""  D
"RTN","ORB3U1",78,0)
 .S ORBX=$G(^TMP("ORB",$J,ORBA)) I $L(ORBX) D
"RTN","ORB3U1",79,0)
 ..S ORBAID=$P(ORBX,U,2)
"RTN","ORB3U1",80,0)
 ..Q:$P(ORBAID,",")'="OR"  ;quit if not "OR" (OE/RR Notifications) alert
"RTN","ORB3U1",81,0)
 ..W "."
"RTN","ORB3U1",82,0)
 ..;
"RTN","ORB3U1",83,0)
 ..;get alert details:
"RTN","ORB3U1",84,0)
 ..D ALERTDAT^XQALBUTL(ORBAID,"ORAD")
"RTN","ORB3U1",85,0)
 ..S ORBMSG=ORAD(1.01) I $L(ORBMSG) D
"RTN","ORB3U1",86,0)
 ...S ORBDT=$P(ORAD(.02),U)
"RTN","ORB3U1",87,0)
 ...S ORDATA=$G(ORAD(2))
"RTN","ORB3U1",88,0)
 ...S ORNUM=""
"RTN","ORB3U1",89,0)
 ...I ORDATA["@" S ORNUM=$P(ORDATA,"@")
"RTN","ORB3U1",90,0)
 ...S ORNUM=$S(+$G(ORNUM)>0:"["_+ORNUM_"]",1:"")
"RTN","ORB3U1",91,0)
 ...S ORBMSG=$P(ORBMSG,"): ",2)
"RTN","ORB3U1",92,0)
 ...S ORBMSG=$E(ORBMSG_$S($L(ORNUM):" "_$G(ORNUM),1:"")_U_"                                                            ",1,60)
"RTN","ORB3U1",93,0)
 ...S ^TMP("OR",$J,"ALERTS","B",9999999-ORBDT_ORBAID)=ORBAID_U_$P(ORBMSG,U)_U_$$FMTE^XLFDT($E(ORBDT,1,$L(ORBDT)-2),"2")
"RTN","ORB3U1",94,0)
 ;
"RTN","ORB3U1",95,0)
 S (LCNT,NUM)=0
"RTN","ORB3U1",96,0)
 S ORX="" F  S ORX=$O(^TMP("OR",$J,"ALERTS","B",ORX)) Q:ORX=""  D
"RTN","ORB3U1",97,0)
 .S ORY=^TMP("OR",$J,"ALERTS","B",ORX)
"RTN","ORB3U1",98,0)
 .S ORBMSG=$P(ORY,U,2)
"RTN","ORB3U1",99,0)
 .S ORBDT=$P(ORY,U,3)
"RTN","ORB3U1",100,0)
 .S LCNT=LCNT+1,NUM=NUM+1
"RTN","ORB3U1",101,0)
 .S ^TMP("OR",$J,"ALERTS","IDX",NUM)=ORY   ;alert id^text^date/time
"RTN","ORB3U1",102,0)
 .S ^TMP("OR",$J,"ALERTS",LCNT,0)=$$LJ^XLFSTR(NUM,4)_$$LJ^XLFSTR(ORBMSG,61)_$$LJ^XLFSTR(ORBDT,15)
"RTN","ORB3U1",103,0)
 .D CNTRL^VALM10(LCNT,1,5,IOINHI,IOINORM)
"RTN","ORB3U1",104,0)
 ;
"RTN","ORB3U1",105,0)
 S ^TMP("OR",$J,"ALERTS",0)=LCNT_U_NUM_U_"Patient Alerts"
"RTN","ORB3U1",106,0)
 S ^TMP("OR",$J,"ALERTS","#")=$O(^ORD(101,"B","OR SELECT ALERTS",0))_"^1:"_NUM
"RTN","ORB3U1",107,0)
 K VALMHDR
"RTN","ORB3U1",108,0)
 S VALMCNT=LCNT,VALMBG=1,VALMBCK="R"
"RTN","ORB3U1",109,0)
 Q
"RTN","ORB3U1",110,0)
GETRECS(ORBAID)  ;get recipient data for an alert
"RTN","ORB3U1",111,0)
 N ORX,ORBI,ORBR,ORBHX
"RTN","ORB3U1",112,0)
 D AHISTORY^XQALBUTL(ORBAID,"ORBHX")
"RTN","ORB3U1",113,0)
 S:$L($G(ORBHX(20,0))) ORX=$P(ORBHX(20,0),U,4)
"RTN","ORB3U1",114,0)
 F ORBI=1:1:ORX D
"RTN","ORB3U1",115,0)
 .S ORBR=ORBHX(20,ORBI,0)
"RTN","ORB3U1",116,0)
 .S ORY(ORJ)="",ORJ=ORJ+1
"RTN","ORB3U1",117,0)
 .S ORY(ORJ)=$P(^VA(200,$P(ORBR,U),0),U),ORJ=ORJ+1
"RTN","ORB3U1",118,0)
 .S ORY(ORJ)="  1st displayed to recipient: "_$$FMTE^XLFDT($P(ORBR,U,2),"1"),ORJ=ORJ+1
"RTN","ORB3U1",119,0)
 .S ORY(ORJ)="  1st selected by recipient:  "_$$FMTE^XLFDT($P(ORBR,U,3),"1"),ORJ=ORJ+1
"RTN","ORB3U1",120,0)
 .S ORY(ORJ)="  Processed by recipient:     "_$$FMTE^XLFDT($P(ORBR,U,4),"1"),ORJ=ORJ+1
"RTN","ORB3U1",121,0)
 .S ORY(ORJ)="  Deleted:                    "_$$FMTE^XLFDT($P(ORBR,U,5),"1"),ORJ=ORJ+1
"RTN","ORB3U1",122,0)
 .S ORY(ORJ)="  Auto deleted:               "_$$FMTE^XLFDT($P(ORBR,U,6),"1"),ORJ=ORJ+1
"RTN","ORB3U1",123,0)
 .S ORY(ORJ)="  Forwarded by:               "_$S($P(ORBR,U,7):$P(^VA(200,$P(ORBR,U,7),0),U),1:""),ORJ=ORJ+1
"RTN","ORB3U1",124,0)
 .S ORY(ORJ)="  Forwarded to recipient:     "_$$FMTE^XLFDT($P(ORBR,U,8),"1"),ORJ=ORJ+1
"RTN","ORB3U1",125,0)
 .S ORY(ORJ)="  Non-process deletion by:    "_$S($P(ORBR,U,9):$P(^VA(200,$P(ORBR,U,9),0),U),1:""),ORJ=ORJ+1
"RTN","ORB3U1",126,0)
 Q
"RTN","ORB3U1",127,0)
RECIPS ;determine/report the list of recipients for a notification
"RTN","ORB3U1",128,0)
 N ORY,ORN,ORBDFN,ORNUM,ORBADUZ,DESC,HDR,ORBPR
"RTN","ORB3U1",129,0)
 ;prompt for patient (required):
"RTN","ORB3U1",130,0)
 K DIC S DIC="^DPT(",DIC("A")="PATIENT (req'd): ",DIC(0)="AEQNM" D ^DIC Q:Y<1
"RTN","ORB3U1",131,0)
 S ORBDFN=+Y
"RTN","ORB3U1",132,0)
 Q:$D(DUOUT)
"RTN","ORB3U1",133,0)
 K DIC,Y,DUOUT,DTOUT
"RTN","ORB3U1",134,0)
 ;
"RTN","ORB3U1",135,0)
 ;prompt for notification (required):
"RTN","ORB3U1",136,0)
 S DIC="^ORD(100.9,",DIC("A")="NOTIFICATION (req'd): ",DIC(0)="AEQN" D ^DIC Q:Y<1
"RTN","ORB3U1",137,0)
 S ORN=+Y
"RTN","ORB3U1",138,0)
 Q:$D(DUOUT)
"RTN","ORB3U1",139,0)
 K DIC,Y,DUOUT,DTOUT
"RTN","ORB3U1",140,0)
 ;
"RTN","ORB3U1",141,0)
 ;prompt for order num if notif processes order num or is a flagged oi:
"RTN","ORB3U1",142,0)
 S ORBPR=$$GET^XPAR("DIV^SYS^PKG","ORB PROVIDER RECIPIENTS",ORN,"I")
"RTN","ORB3U1",143,0)
 I (ORN=32)!(ORN=41)!(ORN=60)!(ORN=61)!(ORN=64)!(ORN=65)!(ORBPR["O")!(ORBPR["E") D
"RTN","ORB3U1",144,0)
 .K DIR S DIR(0)="NAO^::2",DIR("A")="ORDER NUMBER: "
"RTN","ORB3U1",145,0)
 .S DIR("?",1)="This notification uses order number to help determine alert recipients."
"RTN","ORB3U1",146,0)
 .S DIR("?",2)="Enter the order number associated with the alert for most accurate results."
"RTN","ORB3U1",147,0)
 .S DIR("?",3)="Order number must be entered as a whole number (e.g. 458829)."
"RTN","ORB3U1",148,0)
 .;
"RTN","ORB3U1",149,0)
 .S DIR("?")=" "
"RTN","ORB3U1",150,0)
 .D ^DIR
"RTN","ORB3U1",151,0)
 .S ORNUM=+Y
"RTN","ORB3U1",152,0)
 Q:$D(DUOUT)
"RTN","ORB3U1",153,0)
 K DIR,Y,X,DTOUT,DUOUT,DIRUT
"RTN","ORB3U1",154,0)
 ;
"RTN","ORB3U1",155,0)
 ;prompt for pkg-defined recips if normally occurs with notif:
"RTN","ORB3U1",156,0)
 I (ORN=21)!(ORN=22)!(ORN=23)!(ORN=27)!(ORN=30)!(ORN=51)!(ORN=52)!(ORN=53)!(ORN=63) D
"RTN","ORB3U1",157,0)
 .F  K DIC,Y S DIC="^VA(200,",DIC(0)="AEQN",DIC("A")="RECIPIENT(S) FROM PACKAGE WHEN NOTIF WAS TRIGGERED: " D ^DIC Q:Y<1  S ORBADUZ(+Y)=""
"RTN","ORB3U1",158,0)
 Q:$D(DUOUT)
"RTN","ORB3U1",159,0)
 K DIC,Y,DUOUT,DTOUT
"RTN","ORB3U1",160,0)
 ;
"RTN","ORB3U1",161,0)
 W !,"Processing, please stand by..."
"RTN","ORB3U1",162,0)
 ;determine recipients and why:
"RTN","ORB3U1",163,0)
 S ORY="1"
"RTN","ORB3U1",164,0)
 D UTL^ORB3(.ORY,ORN,ORBDFN,$G(ORNUM),.ORBADUZ,"","")
"RTN","ORB3U1",165,0)
 S DESC="Determine Notification Recipients Report"
"RTN","ORB3U1",166,0)
 S HDR="DETERMINE NOTIFICATION RECIPIENTS REPORT"
"RTN","ORB3U1",167,0)
 D OUTPUT(.ORY,DESC,HDR)
"RTN","ORB3U1",168,0)
 Q
"RTN","ORB3U1",169,0)
OUTPUT(ORY,ORBDESC,ORBHDR) ;prompt for device and send report
"RTN","ORB3U1",170,0)
 N POP
"RTN","ORB3U1",171,0)
 ;prompt for device:
"RTN","ORB3U1",172,0)
 S %ZIS="Q"  ;prompt for Queueing
"RTN","ORB3U1",173,0)
 D ^%ZIS
"RTN","ORB3U1",174,0)
 Q:$G(POP)>0
"RTN","ORB3U1",175,0)
 I $D(IO("Q")) D  ;queue the report
"RTN","ORB3U1",176,0)
 .S ZTRTN="PRINT^ORB3U1"
"RTN","ORB3U1",177,0)
 .S ZTSAVE("ORY(")="",ZTSAVE("ORBHDR")=""
"RTN","ORB3U1",178,0)
 .S ZTDESC=ORBDESC
"RTN","ORB3U1",179,0)
 .D ^%ZTLOAD
"RTN","ORB3U1",180,0)
 .K ZTDESC,ZTRTN,ZTSAVE
"RTN","ORB3U1",181,0)
 .I $D(ZTSK)[0 W !!?5,"Report canceled!"
"RTN","ORB3U1",182,0)
 .E  W !!?5,"Report queued."
"RTN","ORB3U1",183,0)
 .D HOME^%ZIS
"RTN","ORB3U1",184,0)
 K %ZIS
"RTN","ORB3U1",185,0)
 I $D(IO("Q")) K IO("Q") Q
"RTN","ORB3U1",186,0)
PRINT ;print body of Determine Notification Recipients Report
"RTN","ORB3U1",187,0)
 N END,PAGE,X
"RTN","ORB3U1",188,0)
 S (END,PAGE,I)=0
"RTN","ORB3U1",189,0)
 U IO
"RTN","ORB3U1",190,0)
 D @("HDR"_(2-($E(IOST,1,2)="C-")))
"RTN","ORB3U1",191,0)
 F  S I=$O(ORY(I)) Q:I=""!(END=1)  D
"RTN","ORB3U1",192,0)
 .D HDR:$Y+5>IOSL
"RTN","ORB3U1",193,0)
 .Q:END=1
"RTN","ORB3U1",194,0)
 .W !,ORY(I)
"RTN","ORB3U1",195,0)
 I END=1 W !!,"           - Report Interrupted -",!
"RTN","ORB3U1",196,0)
 E  W !!!,"           - End of Report -",!
"RTN","ORB3U1",197,0)
 I ($E(IOST,1,2)="C-") W !,"Press RETURN to continue: " R X:DTIME
"RTN","ORB3U1",198,0)
 D ^%ZISC
"RTN","ORB3U1",199,0)
 D:$G(ZTSK) KILL^%ZTLOAD
"RTN","ORB3U1",200,0)
 Q
"RTN","ORB3U1",201,0)
HDR ;print header of report
"RTN","ORB3U1",202,0)
 I PAGE,($E(IOST,1,2)="C-") D
"RTN","ORB3U1",203,0)
 .W !,"Press RETURN to continue or '^' to exit: "
"RTN","ORB3U1",204,0)
 .R X:DTIME S END='$T!(X="^")
"RTN","ORB3U1",205,0)
 Q:END=1
"RTN","ORB3U1",206,0)
HDR1 W:'($E(IOST,1,2)='"C-"&'PAGE) @IOF
"RTN","ORB3U1",207,0)
HDR2 S PAGE=PAGE+1 W ?20,ORBHDR
"RTN","ORB3U1",208,0)
 W ?(IOM-10),"Page: ",$J(PAGE,3),!!
"RTN","ORB3U1",209,0)
 Q
"RTN","ORB3USER")
0^3^B65938454
"RTN","ORB3USER",1,0)
ORB3USER ; slc/CLA - Alert recipient algorithms for OE/RR 3 notifications; 1/19/00 14:45
"RTN","ORB3USER",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**74,91**;Dec 17, 1997
"RTN","ORB3USER",3,0)
USER(XQA,ORBDUZ,ORN,ORBU,ORBUI,ORBDFN) ;called from ORB3
"RTN","ORB3USER",4,0)
 ;check to see if potential recip (ORBDUZ) should be an alert recip
"RTN","ORB3USER",5,0)
 ;XQA     array of alert recips passed to Kernel Alert Utility
"RTN","ORB3USER",6,0)
 ;ORBDUZ  duz of current potential alert recipient
"RTN","ORB3USER",7,0)
 ;ORN     notif ien from file 100.9
"RTN","ORB3USER",8,0)
 ;ORBU    array of info for utility displaying recip who and why
"RTN","ORB3USER",9,0)
 ;ORBUI   counter for utility array
"RTN","ORB3USER",10,0)
 ;ORBDFN  patient ien from Patient file [#2]
"RTN","ORB3USER",11,0)
 ;
"RTN","ORB3USER",12,0)
 N ORBNODE,ORBSUR,ORBACT,ORBTM,ORBTMF,ORBTEAM,ORBON,ORBDUP
"RTN","ORB3USER",13,0)
 I $G(ORBDUZ)["G." S XQA(ORBDUZ)="" Q
"RTN","ORB3USER",14,0)
 Q:+$G(ORBDUZ)<1
"RTN","ORB3USER",15,0)
 ;
"RTN","ORB3USER",16,0)
 S ORBTM=$P(ORBDUZ,U,2) I $L(ORBTM) D  ;if user recip via team
"RTN","ORB3USER",17,0)
 .S ORBTMF=$$GET^XPAR(ORBTM_";OR(100.21,","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",18,0)
 .S ORBTEAM=ORBTMF_U_$P(^OR(100.21,ORBTM,0),U)
"RTN","ORB3USER",19,0)
 .I $D(ORBU) D
"RTN","ORB3USER",20,0)
 ..S ORBU(ORBUI)="   User "_$P(^VA(200,+ORBDUZ,0),U)_" is a potential recipient via team "_$P(ORBTEAM,U,2),ORBUI=ORBUI+1
"RTN","ORB3USER",21,0)
 ;
"RTN","ORB3USER",22,0)
 I '$D(ORBU) D
"RTN","ORB3USER",23,0)
 .I $L($G(ORBTMF))=0 D
"RTN","ORB3USER",24,0)
 ..S:$D(^XTMP("ORBUSER",$J,+ORBDUZ)) ORBDUP=1
"RTN","ORB3USER",25,0)
 ..S ^XTMP("ORBUSER",$J,+ORBDUZ)=""
"RTN","ORB3USER",26,0)
 Q:$G(ORBDUP)=1  ;quit if user already processed and no team param value
"RTN","ORB3USER",27,0)
 ;
"RTN","ORB3USER",28,0)
 S ORBDUZ=$P(ORBDUZ,U)
"RTN","ORB3USER",29,0)
 ;
"RTN","ORB3USER",30,0)
 ; determine if user is active (not terminated from system):
"RTN","ORB3USER",31,0)
 S ORBACT=+$$ACTIVE^XUSER(ORBDUZ)
"RTN","ORB3USER",32,0)
 I $D(ORBU),(ORBACT=0) D  ;if user is terminated on system:
"RTN","ORB3USER",33,0)
 .S ORBNODE=$G(^VA(200,ORBDUZ,0)) I $L($G(ORBNODE)) D
"RTN","ORB3USER",34,0)
 ..S ORBU(ORBUI)="   "_$P(ORBNODE,U)_": OFF because",ORBUI=ORBUI+1
"RTN","ORB3USER",35,0)
 ..S ORBU(ORBUI)="     User's system access is terminated.",ORBUI=ORBUI+1
"RTN","ORB3USER",36,0)
 ;
"RTN","ORB3USER",37,0)
 S:$G(ORBTEAM)="" ORBTEAM="^"
"RTN","ORB3USER",38,0)
 S ORBON=$$ONOFF(ORN,ORBDUZ,ORBDFN,ORBTEAM)
"RTN","ORB3USER",39,0)
 I $D(ORBU),(ORBACT=1) D  ;if user is active on system:
"RTN","ORB3USER",40,0)
 .S ORBNODE=$G(^VA(200,ORBDUZ,0)) I $L($G(ORBNODE)) D
"RTN","ORB3USER",41,0)
 ..S ORBU(ORBUI)="   "_$P(ORBNODE,U)_": "_$P(ORBON,U)_" because ",ORBUI=ORBUI+1
"RTN","ORB3USER",42,0)
 ..S ORBU(ORBUI)="     "_$P(ORBON,U,2),ORBUI=ORBUI+1
"RTN","ORB3USER",43,0)
 I $P(ORBON,U)="ON",($G(ORBDUZ)'["G.") D  ;get user's surrogate recip
"RTN","ORB3USER",44,0)
 .S ORBSUR=$$GET^XPAR("USR.`"_ORBDUZ,"ORB SURROGATE RECIPIENT",1,"B")
"RTN","ORB3USER",45,0)
 .I $L(ORBSUR) D  ;send alert to user's surrogate instead of user
"RTN","ORB3USER",46,0)
 ..I +$$ACTIVE^XUSER(+ORBSUR)=1 D  ;if surrogate is active on system:
"RTN","ORB3USER",47,0)
 ...S ORBDUZ=+ORBSUR
"RTN","ORB3USER",48,0)
 ...I $D(ORBU) S ORBU(ORBUI)="     [* Notification sent to surrogate: "_$P(ORBSUR,U,2)_" *]",ORBUI=ORBUI+1
"RTN","ORB3USER",49,0)
 Q:$P(ORBON,U)="OFF"  ;quit if user is disabled for this notif
"RTN","ORB3USER",50,0)
 Q:$D(ORBU)           ;quit if entered rtn via UTL (do not sent alert)
"RTN","ORB3USER",51,0)
 I ORBACT=1 S XQA(ORBDUZ)=""  ;if user is active, send them the alert
"RTN","ORB3USER",52,0)
 I ORBACT=0,($L($G(ORBSUR))) S XQA(ORBDUZ)=""  ;if user is inactive with a surrogate, send to the surrogate
"RTN","ORB3USER",53,0)
 Q
"RTN","ORB3USER",54,0)
ONOFF(ORN,ORBUSR,ORBPT,ORBTEAM) ;Extrinsic function to check param file
"RTN","ORB3USER",55,0)
 ;determines if user ORBUSR should receive notification ORN for patient
"RTN","ORB3USER",56,0)
 ;patient ORBPT. If ORBUSR was derived via teams, ORBTEAM may be used.
"RTN","ORB3USER",57,0)
 ;ORN      notification ien from file 100.9 (req'd)
"RTN","ORB3USER",58,0)
 ;ORBUSR   user ien from file 200 (req'd)
"RTN","ORB3USER",59,0)
 ;ORBPT    patient ien from file 2 (not req'd)
"RTN","ORB3USER",60,0)
 ;ORBTEAM  processing flag^name for team assoc. w/ORBUSR (not req'd)
"RTN","ORB3USER",61,0)
 N NODE,ORBPTN,ORBNOTN,ORBUSRF,ORBUSRN,ORBLOC,ORBLOCF,ORBLOCN
"RTN","ORB3USER",62,0)
 S (ORBPTN,ORBNOTN,ORBUSRF,ORBUSRN,ORBLOC,ORBLOCF,ORBLOCN)=""
"RTN","ORB3USER",63,0)
 N ORBSRV,ORBSRVF,ORBSRVN,ORBTEA,ORBTEAF,ORBTEAN,ORBTEAD,ORBTEAE
"RTN","ORB3USER",64,0)
 S (ORBSRV,ORBSRVF,ORBSRVN,ORBTEA,ORBTEAF,ORBTEAN,ORBTEAD,ORBTEAE)=""
"RTN","ORB3USER",65,0)
 N ORBCLS,ORBCLSF,ORBCLSN,ORBLST,ORBI
"RTN","ORB3USER",66,0)
 S (ORBCLS,ORBCLSF,ORBCLSN)=""
"RTN","ORB3USER",67,0)
 N ORBDIV,ORBDIVF,ORBDIVN,ORBSYSF,ORBPKGF
"RTN","ORB3USER",68,0)
 S (ORBDIV,ORBDIVF,ORBDIVN,ORBSYSF,ORBPKGF)=""
"RTN","ORB3USER",69,0)
 ;
"RTN","ORB3USER",70,0)
 ;get notification name:
"RTN","ORB3USER",71,0)
 S NODE=$G(^ORD(100.9,ORN,0)) S:$L($G(NODE)) ORBNOTN=$P(NODE,U)
"RTN","ORB3USER",72,0)
 ;
"RTN","ORB3USER",73,0)
 ;get user name:
"RTN","ORB3USER",74,0)
 S NODE=$G(^VA(200,ORBUSR,0)) S:$L($G(NODE)) ORBUSRN=$P(NODE,U)
"RTN","ORB3USER",75,0)
 ;
"RTN","ORB3USER",76,0)
 ;get patient name:
"RTN","ORB3USER",77,0)
 S:$L($G(ORBPT)) NODE=$G(^DPT(ORBPT,0)) S:$L($G(NODE)) ORBPTN=$P(NODE,U)
"RTN","ORB3USER",78,0)
 ;
"RTN","ORB3USER",79,0)
 ;get division flag and name:
"RTN","ORB3USER",80,0)
 S ORBDIV=$$DIVF(ORBUSR,ORN)
"RTN","ORB3USER",81,0)
 I $L(ORBDIV) D
"RTN","ORB3USER",82,0)
 .S ORBDIVF=$P(ORBDIV,U,2),ORBDIV=$P(ORBDIV,U),NODE=$G(^DIC(4,ORBDIV,0))
"RTN","ORB3USER",83,0)
 .S:$L($G(NODE)) ORBDIVN=$P(NODE,U)
"RTN","ORB3USER",84,0)
 ;
"RTN","ORB3USER",85,0)
 ;get system flag:
"RTN","ORB3USER",86,0)
 S ORBSYSF=$$GET^XPAR("SYS","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",87,0)
 ;
"RTN","ORB3USER",88,0)
 ;get OE/RR package-export flag:
"RTN","ORB3USER",89,0)
 S ORBPKGF=$$GET^XPAR("PKG","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",90,0)
 ;
"RTN","ORB3USER",91,0)
 ;get patient's location flag (INPATIENT ONLY - outpt locations cannot be
"RTN","ORB3USER",92,0)
 ;reliably determined, and many simultaneous outpt locations can occur):
"RTN","ORB3USER",93,0)
 I +$G(ORBPT)>0 D
"RTN","ORB3USER",94,0)
 .N DFN S DFN=ORBPT,VA200="" D OERR^VADPT
"RTN","ORB3USER",95,0)
 .S ORBLOC=+$G(^DIC(42,+VAIN(4),44)) I +$G(ORBLOC)>0 D
"RTN","ORB3USER",96,0)
 ..S ORBLOCN=$P(^SC(+ORBLOC,0),U)
"RTN","ORB3USER",97,0)
 ..S ORBLOCF=$$GET^XPAR(+$G(ORBLOC)_";SC(","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",98,0)
 K VA200,VAIN
"RTN","ORB3USER",99,0)
 ;
"RTN","ORB3USER",100,0)
 ;get user's service/section flag:
"RTN","ORB3USER",101,0)
 S ORBSRV=$G(^VA(200,ORBUSR,5)) I +ORBSRV>0 S ORBSRV=$P(ORBSRV,U) D
"RTN","ORB3USER",102,0)
 .S NODE=$G(^DIC(49,ORBSRV,0)) S:$L($G(NODE)) ORBSRVN=$P(NODE,U)
"RTN","ORB3USER",103,0)
 .S:+$G(ORBSRV)>0 ORBSRVF=$$GET^XPAR(ORBSRV_";DIC(49,","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",104,0)
 ;
"RTN","ORB3USER",105,0)
 ;get user's team flag:
"RTN","ORB3USER",106,0)
 I $L($G(ORBTEAM)) S ORBTEAF=$P(ORBTEAM,U),ORBTEAN=$P(ORBTEAM,U,2)
"RTN","ORB3USER",107,0)
 ;
"RTN","ORB3USER",108,0)
 ;get class flag for the user's most recently active ASU class
"RTN","ORB3USER",109,0)
 ;S ORBCLS=$$RECENT(ORBUSR) I $L($G(ORBCLS))>0 D
"RTN","ORB3USER",110,0)
 ;.S ORBCLSN=$P(ORBCLS,U,2),ORBCLS=$P(ORBCLS,U)
"RTN","ORB3USER",111,0)
 ;.S:+$G(ORBCLS)>0 ORBCLSF=$$GET^XPAR(ORBCLS_";USR(8930,","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",112,0)
 ;
"RTN","ORB3USER",113,0)
 ;get user's flag:
"RTN","ORB3USER",114,0)
 S ORBUSRF=$$GET^XPAR(ORBUSR_";VA(200,","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",115,0)
 ;
"RTN","ORB3USER",116,0)
 ;determine overall flag:
"RTN","ORB3USER",117,0)
 I $G(ORBUSRF)="M" Q "ON^User "_ORBUSRN_" is Mandatory.^User value is Mandatory"
"RTN","ORB3USER",118,0)
 I $G(ORBUSRF)="E" Q "ON^User "_ORBUSRN_" is Enabled.^User value is Enabled"
"RTN","ORB3USER",119,0)
 ;I $G(ORBCLSF)="M" Q "ON^User's class "_ORBCLSN_" is Mandatory.^User's class "_ORBCLSN_" value is Mandatory"
"RTN","ORB3USER",120,0)
 I $G(ORBTEAF)="M" Q "ON^User's team "_ORBTEAN_" is Mandatory.^User's team "_ORBTEAN_" value is Mandatory"
"RTN","ORB3USER",121,0)
 I $G(ORBTEAF)="D" Q "OFF^User's team "_ORBTEAN_" is Disabled.^User's team "_ORBTEAN_" value is Disabled"
"RTN","ORB3USER",122,0)
 I $G(ORBSRVF)="M" Q "ON^User's service "_ORBSRVN_" is Mandatory.^User's service "_ORBSRVN_" value is Mandatory"
"RTN","ORB3USER",123,0)
 I $G(ORBLOCF)="M" Q "ON^Patient's location "_ORBLOCN_" is Mandatory.^Pt's location "_ORBLOCN_" value is Mandatory"
"RTN","ORB3USER",124,0)
 I $G(ORBLOCF)="D" Q "OFF^Patient's location "_ORBLOCN_" is Disabled.^Pt's location "_ORBLOCN_" value is Disabled"
"RTN","ORB3USER",125,0)
 I $G(ORBDIVF)="M",($G(ORBLOCF)="") Q "ON^Division "_ORBDIVN_" is Mandatory, no Pt Location value.^Division "_ORBDIVN_" value is Mandatory"
"RTN","ORB3USER",126,0)
 I $G(ORBSYSF)="M",($G(ORBDIVF)=""),($G(ORBLOCF)="") Q "ON^System default is Mandatory, no Division or Pt Location values.^System value is Mandatory"
"RTN","ORB3USER",127,0)
 I $G(ORBPKGF)="M",($G(ORBSYSF)=""),($G(ORBDIVF)=""),($G(ORBLOCF)="") Q "ON^OERR default is Mandatory, no Division, System, or Pt Location values.^OERR value is Mandatory"
"RTN","ORB3USER",128,0)
 I $G(ORBUSRF)="D" Q "OFF^User "_ORBUSRN_" is Disabled - no Mandatory values found.^User value is Disabled"
"RTN","ORB3USER",129,0)
 ;I $G(ORBCLSF)="D" Q "OFF^User's class "_ORBCLSN_" is Disabled - no Mandatory values found.^User's class "_ORBCLSN_" value is Disabled""
"RTN","ORB3USER",130,0)
 I $G(ORBTEAF)="E" Q "ON^User's team "_ORBTEAN_" is Enabled.^User's team "_ORBTEAN_" value is Enabled"
"RTN","ORB3USER",131,0)
 I $G(ORBSRVF)="D" Q "OFF^User's service "_ORBSRVN_" is Disabled.^User's service "_ORBSRVN_" value is Disabled"
"RTN","ORB3USER",132,0)
 I $G(ORBSRVF)="E" Q "ON^User's service "_ORBSRVN_" is Enabled.^User's service "_ORBSRVN_" value is Enabled"
"RTN","ORB3USER",133,0)
 I $G(ORBLOCF)="E" Q "ON^Patient's location "_ORBLOCN_" is Enabled.^Pt's location "_ORBLOCN_" value is Enabled"
"RTN","ORB3USER",134,0)
 I $G(ORBDIVF)="D" Q "OFF^Division "_ORBDIVN_" is Disabled.^Division "_ORBDIVN_" value is Disabled"
"RTN","ORB3USER",135,0)
 I $G(ORBDIVF)="E" Q "ON^Division "_ORBDIVN_" is Enabled.^Division "_ORBDIVN_" value is Enabled"
"RTN","ORB3USER",136,0)
 I $G(ORBSYSF)="D" Q "OFF^System default is Disabled.^System value is Disabled"
"RTN","ORB3USER",137,0)
 I $G(ORBSYSF)="E" Q "ON^System default is Enabled.^System value is Enabled"
"RTN","ORB3USER",138,0)
 I $G(ORBPKGF)="D" Q "OFF^OERR default is Disabled.^OERR value is Disabled"
"RTN","ORB3USER",139,0)
 I $G(ORBPKGF)="E" Q "ON^OERR default is Enabled.^OERR value is Enabled"
"RTN","ORB3USER",140,0)
 Q "OFF^No Mandatory, Disabled or Enabled values found.^No Mandatory/Disabled/Enabled values"
"RTN","ORB3USER",141,0)
 ;
"RTN","ORB3USER",142,0)
RECENT(USER) ;ext funct rtns a user's most recent, active user class
"RTN","ORB3USER",143,0)
 Q:+$G(USER)<1 "^Error: User not identified."
"RTN","ORB3USER",144,0)
 N CLS,CLASS,INACT,ACT,ORX,INVDT,RESULT
"RTN","ORB3USER",145,0)
 ;call api to determine user's class(es)
"RTN","ORB3USER",146,0)
 Q:'$L($G(CLS(0))) "^No user classes found."
"RTN","ORB3USER",147,0)
 D NOW^%DTC
"RTN","ORB3USER",148,0)
 S CLASS="" F  S CLASS=$O(CLS(CLASS)) Q:CLASS=""  D
"RTN","ORB3USER",149,0)
 .S INACT=$P(CLS(CLASS),U,5),ACT=$P(CLS(CLASS),U,4)
"RTN","ORB3USER",150,0)
 .I INACT,(INACT<%) Q  ;quit if class has an inactive date before now
"RTN","ORB3USER",151,0)
 .Q:'ACT     ;quit if class has no active date
"RTN","ORB3USER",152,0)
 .S ORX("DT",9999999-ACT)=$P(CLS(CLASS),U)_U_CLASS
"RTN","ORB3USER",153,0)
 S INVDT="",INVDT=$O(ORX("DT",INVDT))
"RTN","ORB3USER",154,0)
 I INVDT S RESULT=ORX("DT",INVDT)
"RTN","ORB3USER",155,0)
 E  S RESULT="^No user classes found."
"RTN","ORB3USER",156,0)
 K %
"RTN","ORB3USER",157,0)
 Q RESULT
"RTN","ORB3USER",158,0)
DIVF(USER,ORN) ;ext funct rtns user's division value for ORB PROCESSING FLAG
"RTN","ORB3USER",159,0)
 N DIV,DIVF,MDIVF,EDIVF,DDIVF
"RTN","ORB3USER",160,0)
 S DIV=0,(DIVF,MDIVF,EDIVF,DDIVF)=""
"RTN","ORB3USER",161,0)
 F  S DIV=$O(^VA(200,USER,2,"B",DIV)) Q:+$G(DIV)<1!(DIVF="M")  D
"RTN","ORB3USER",162,0)
 .S DIVF=$$GET^XPAR(DIV_";DIC(4,","ORB PROCESSING FLAG",ORN,"I")
"RTN","ORB3USER",163,0)
 .I DIVF="M" S MDIVF=DIV_U_DIVF
"RTN","ORB3USER",164,0)
 .I DIVF="E" S EDIVF=DIV_U_DIVF
"RTN","ORB3USER",165,0)
 .I DIVF="D" S DDIVF=DIV_U_DIVF
"RTN","ORB3USER",166,0)
 Q:$L(MDIVF) MDIVF
"RTN","ORB3USER",167,0)
 Q:$L(EDIVF) EDIVF
"RTN","ORB3USER",168,0)
 Q:$L(DDIVF) DDIVF
"RTN","ORB3USER",169,0)
 Q ""
"RTN","ORQPTQ1")
0^4^B42410007
"RTN","ORQPTQ1",1,0)
ORQPTQ1 ; SLC/CLA - Functs which return OR patient lists and sources pt 1 ;12/15/97 [ 04/02/97  3:32 PM ] [10/10/00 4:53pm]
"RTN","ORQPTQ1",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**9,74,63,91**;Dec 17, 1997
"RTN","ORQPTQ1",3,0)
VAMCPTS(Y) ; RETURN LIST OF PATIENTS IN VAMC: DFN^NAME
"RTN","ORQPTQ1",4,0)
 N I,J,V
"RTN","ORQPTQ1",5,0)
 S I=1
"RTN","ORQPTQ1",6,0)
 S J=0 F  S J=$O(^DPT("B",J)) Q:J=""  S V=0,V=$O(^DPT("B",J,V))  S Y(I)=V_"^"_J,I=I+1
"RTN","ORQPTQ1",7,0)
 Q
"RTN","ORQPTQ1",8,0)
VAMCLONG(Y,DIR,FROM) ; return a bolus of patients in VAMC: DFN^NAME
"RTN","ORQPTQ1",9,0)
 N I,IEN,CNT S CNT=44
"RTN","ORQPTQ1",10,0)
 I DIR=0 D  ; Forward direction
"RTN","ORQPTQ1",11,0)
 . F I=1:1:CNT S FROM=$O(^DPT("B",FROM)) Q:FROM=""  D
"RTN","ORQPTQ1",12,0)
 . . S Y(I)=$O(^DPT("B",FROM,0))_"^"_FROM
"RTN","ORQPTQ1",13,0)
 . I +$G(Y(CNT))="" S Y(I)=""
"RTN","ORQPTQ1",14,0)
 I DIR=1 D  ; Reverse direction
"RTN","ORQPTQ1",15,0)
 . F I=1:1:CNT S FROM=$O(^DPT("B",FROM),-1) Q:FROM=""  D
"RTN","ORQPTQ1",16,0)
 . . S Y(I)=$O(^DPT("B",FROM,0))_"^"_FROM
"RTN","ORQPTQ1",17,0)
 Q 
"RTN","ORQPTQ1",18,0)
DEFTM(ORY) ; return current user's default team list
"RTN","ORQPTQ1",19,0)
 Q:'$D(DUZ)
"RTN","ORQPTQ1",20,0)
 N ORSRV S ORSRV=$G(^VA(200,DUZ,5)) I +ORSRV>0 S ORSRV=$P(ORSRV,U)
"RTN","ORQPTQ1",21,0)
 S ORY=$$GET^XPAR("USR^SRV.`"_+$G(ORSRV),"ORLP DEFAULT TEAM",1,"B")
"RTN","ORQPTQ1",22,0)
 Q
"RTN","ORQPTQ1",23,0)
TEAMS(ORY) ; return list of teams for a system
"RTN","ORQPTQ1",24,0)
 ; Also called under DBIA # 2692.
"RTN","ORQPTQ1",25,0)
 N ORTM,I,ORTMN
"RTN","ORQPTQ1",26,0)
 S ORTMN="",I=1
"RTN","ORQPTQ1",27,0)
 F  S ORTMN=$O(^OR(100.21,"B",ORTMN)) Q:ORTMN=""  D
"RTN","ORQPTQ1",28,0)
 .S ORTM="",ORTM=$O(^OR(100.21,"B",ORTMN,ORTM)) Q:ORTM=""
"RTN","ORQPTQ1",29,0)
 .S ORY(I)=ORTM_U_ORTMN,I=I+1
"RTN","ORQPTQ1",30,0)
 S:+$G(ORY(1))<1 ORY(1)="^No teams found."
"RTN","ORQPTQ1",31,0)
 Q
"RTN","ORQPTQ1",32,0)
TEAMPTS(ORY,TEAM) ; RETURN LIST OF PATIENTS IN A TEAM
"RTN","ORQPTQ1",33,0)
 ; Also called under DBIA # 2692.
"RTN","ORQPTQ1",34,0)
 I +$G(TEAM)<1 S ORY(1)="^No team identified" Q 
"RTN","ORQPTQ1",35,0)
 N ORI,ORPT,I
"RTN","ORQPTQ1",36,0)
 S I=1
"RTN","ORQPTQ1",37,0)
 S ORI=0 F  S ORI=$O(^OR(100.21,+TEAM,10,ORI)) Q:ORI<1  D
"RTN","ORQPTQ1",38,0)
 .S ORPT=^OR(100.21,+TEAM,10,ORI,0)
"RTN","ORQPTQ1",39,0)
 .S ORY(I)=+ORPT_U_$P(^DPT(+ORPT,0),U),I=I+1
"RTN","ORQPTQ1",40,0)
 S:+$G(ORY(1))<1 ORY(1)="^No patients found."
"RTN","ORQPTQ1",41,0)
 Q
"RTN","ORQPTQ1",42,0)
TEAMPR(ORY,PROV) ; return list of teams linked to a provider
"RTN","ORQPTQ1",43,0)
 I +$G(PROV)<1 S ORY(1)="^No provider identified" Q 
"RTN","ORQPTQ1",44,0)
 N ORTM,I,ORTMN
"RTN","ORQPTQ1",45,0)
 S ORTM="",I=1
"RTN","ORQPTQ1",46,0)
 F  S ORTM=$O(^OR(100.21,"C",+PROV,ORTM)) Q:+$G(ORTM)<1  D
"RTN","ORQPTQ1",47,0)
 .S ORTMN=$P(^OR(100.21,ORTM,0),U)
"RTN","ORQPTQ1",48,0)
 .S ORY(I)=ORTM_U_ORTMN,I=I+1
"RTN","ORQPTQ1",49,0)
 S:+$G(ORY(1))<1 ORY(1)="^No teams found."
"RTN","ORQPTQ1",50,0)
 Q
"RTN","ORQPTQ1",51,0)
TEAMPR2(ORY,PROV) ; return list of teams linked to a provider
"RTN","ORQPTQ1",52,0)
 ; This tag added by PKS/slc - 8/1999.
"RTN","ORQPTQ1",53,0)
 I +$G(PROV)<1 S ORY(1)="^No provider identified" Q
"RTN","ORQPTQ1",54,0)
 N ORTM,ORDATA,ORTMN,ORTYPE,I
"RTN","ORQPTQ1",55,0)
 S ORTM="",I=1
"RTN","ORQPTQ1",56,0)
 F  S ORTM=$O(^OR(100.21,"C",+PROV,ORTM)) Q:+$G(ORTM)<1  D
"RTN","ORQPTQ1",57,0)
 .S ORDATA=^OR(100.21,ORTM,0) ; Get value.
"RTN","ORQPTQ1",58,0)
 .S ORTMN=$P(ORDATA,U)        ; Team List name.
"RTN","ORQPTQ1",59,0)
 .S ORTYPE=$P(ORDATA,U,2)     ; Team List type.
"RTN","ORQPTQ1",60,0)
 .S ORY(I)=ORTM_U_ORTMN_U_ORTYPE,I=I+1
"RTN","ORQPTQ1",61,0)
 S:+$G(ORY(1))<1 ORY(1)="^No teams found."
"RTN","ORQPTQ1",62,0)
 Q
"RTN","ORQPTQ1",63,0)
TEAMPROV(ORY,TEAM) ; return list of providers linked to a team
"RTN","ORQPTQ1",64,0)
 I +$G(TEAM)<1 S ORY(1)="^No team identified"
"RTN","ORQPTQ1",65,0)
 N PROV,I,SEQ
"RTN","ORQPTQ1",66,0)
 S I=1
"RTN","ORQPTQ1",67,0)
 S SEQ=0 F  S SEQ=$O(^OR(100.21,+TEAM,1,SEQ)) Q:SEQ<1  D
"RTN","ORQPTQ1",68,0)
 .S PROV=^OR(100.21,+TEAM,1,SEQ,0) I $L(PROV) D
"RTN","ORQPTQ1",69,0)
 ..S ORY(I)=+PROV_U_$P(^VA(200,+PROV,0),U),I=I+1
"RTN","ORQPTQ1",70,0)
 S:+$G(ORY(1))<1 ORY(1)="^No providers found."
"RTN","ORQPTQ1",71,0)
 Q
"RTN","ORQPTQ1",72,0)
TPROVPT(PROV) ;return list of patients linked to a provider via teams
"RTN","ORQPTQ1",73,0)
 ; Modified by PKS: 8/1999.
"RTN","ORQPTQ1",74,0)
 I +$G(PROV)<1 S ^TMP("ORLPUPT",$J,"^No provider identified")=""
"RTN","ORQPTQ1",75,0)
 N ORTM,ORTMN,ORI,ORPT
"RTN","ORQPTQ1",76,0)
 S ORTM=""
"RTN","ORQPTQ1",77,0)
 F  S ORTM=$O(^OR(100.21,"C",+PROV,ORTM)) Q:+$G(ORTM)<1  D  ; Teams.
"RTN","ORQPTQ1",78,0)
 .S ORTMN=$P(^OR(100.21,+ORTM,0),U,1) ; Get name of Team List.
"RTN","ORQPTQ1",79,0)
 .S ORI=0 F  S ORI=$O(^OR(100.21,+ORTM,10,ORI)) Q:ORI<1  D
"RTN","ORQPTQ1",80,0)
 ..S ORPT=^OR(100.21,+ORTM,10,ORI,0)
"RTN","ORQPTQ1",81,0)
 ..S ^TMP("ORLPUPT",$J,+ORPT_U_$P(^DPT(+ORPT,0),U))=""
"RTN","ORQPTQ1",82,0)
 ..; Next line added by PKS:
"RTN","ORQPTQ1",83,0)
 ..S ^TMP("ORLPUPT",$J,"B",ORTMN,$P(^DPT(+ORPT,0),U)_U_+ORPT)=""
"RTN","ORQPTQ1",84,0)
 I '$D(^TMP("ORLPUPT",$J)) S ^TMP("ORLPUPT",$J,"^No patients found.")=""
"RTN","ORQPTQ1",85,0)
 Q
"RTN","ORQPTQ1",86,0)
TMSPT(ORY,PT) ;return list of teams linked to a patient (patient is active)
"RTN","ORQPTQ1",87,0)
 I +$G(PT)<1 S ORY(1)="^No patient identified" Q
"RTN","ORQPTQ1",88,0)
 N ORTM,I,ORTMN,ORTMTYP
"RTN","ORQPTQ1",89,0)
 S ORTM="",I=1
"RTN","ORQPTQ1",90,0)
 F  S ORTM=$O(^OR(100.21,"AB",+PT_";DPT(",ORTM)) Q:+$G(ORTM)<1  D
"RTN","ORQPTQ1",91,0)
 .S ORTMN=$P(^OR(100.21,ORTM,0),U)
"RTN","ORQPTQ1",92,0)
 .S ORTMTYP=$P(^OR(100.21,ORTM,0),U,2) I $L(ORTMTYP) D
"RTN","ORQPTQ1",93,0)
 ..S ORTMTYP=$$EXTERNAL^DILFD(100.21,1,"",ORTMTYP,"")
"RTN","ORQPTQ1",94,0)
 .S ORY(I)=ORTM_U_ORTMN_U_$S($L(ORTMTYP):ORTMTYP,1:"no type"),I=I+1
"RTN","ORQPTQ1",95,0)
 S:+$G(ORY(1))<1 ORY(1)="^No teams found."
"RTN","ORQPTQ1",96,0)
 Q
"RTN","ORQPTQ1",97,0)
TPTPR(ORY,PT) ;return list of providers linked to a patient via teams
"RTN","ORQPTQ1",98,0)
 I +$G(PT)<1 S ORY(1)="^No patient identified" Q
"RTN","ORQPTQ1",99,0)
 N ORTM,PROV,SEQ
"RTN","ORQPTQ1",100,0)
 S ORTM=""
"RTN","ORQPTQ1",101,0)
 F  S ORTM=$O(^OR(100.21,"AB",+PT_";DPT(",ORTM)) Q:+$G(ORTM)<1  D
"RTN","ORQPTQ1",102,0)
 .S SEQ=0 F  S SEQ=$O(^OR(100.21,+ORTM,1,SEQ)) Q:SEQ<1  D
"RTN","ORQPTQ1",103,0)
 ..S PROV=^OR(100.21,+ORTM,1,SEQ,0) I $L(PROV) D
"RTN","ORQPTQ1",104,0)
 ...S ORY(+PROV)=+PROV_U_$P(^VA(200,+PROV,0),U)
"RTN","ORQPTQ1",105,0)
 S:'$D(ORY) ORY(1)="^No providers found."
"RTN","ORQPTQ1",106,0)
 Q
"RTN","ORQPTQ1",107,0)
PERSPR(ORY) ; return list of personal lists linked to current user
"RTN","ORQPTQ1",108,0)
 N ORTM,I,ORTMN
"RTN","ORQPTQ1",109,0)
 S ORTM="",I=1
"RTN","ORQPTQ1",110,0)
 F  S ORTM=$O(^OR(100.21,"C",DUZ,ORTM)) Q:+$G(ORTM)<1  D
"RTN","ORQPTQ1",111,0)
 .Q:$P(^OR(100.21,ORTM,0),U,2)'="P"  ;quit if not a personal list
"RTN","ORQPTQ1",112,0)
 .S ORTMN=$P(^OR(100.21,ORTM,0),U)
"RTN","ORQPTQ1",113,0)
 .S ORY(I)=ORTM_U_ORTMN,I=I+1
"RTN","ORQPTQ1",114,0)
 S:+$G(ORY(1))<1 ORY(1)="^No personal lists found."
"RTN","ORQPTQ1",115,0)
 Q
"RTN","ORQPTQ1",116,0)
PRIMPT(ORY,ORPT) ; return patient's PCMM primary care team
"RTN","ORQPTQ1",117,0)
 I +$G(ORPT)<1 S ORY(1)="^No patient identified"
"RTN","ORQPTQ1",118,0)
 N ORQPUR,ORQERROR,ORQLST,ORQERR,ORQDT,ORIDT,ORADT,ORX
"RTN","ORQPTQ1",119,0)
 S ORQPUR(2)=""  ;"2" is the ien for purpose "primary care" [^SD(403.47]
"RTN","ORQPTQ1",120,0)
 D NOW^%DTC S ORQDT("BEGIN")=%-.0001,ORQDT("END")=%+.0001,ORQDT("INCL")=0
"RTN","ORQPTQ1",121,0)
 S ORQERROR=$$TMPT^SCAPMC(.ORPT,"ORQDT","ORQPUR","ORQLST","ORQERR")
"RTN","ORQPTQ1",122,0)
 I ORQERROR=0 S ORY="^Error in search for primary care team."
"RTN","ORQPTQ1",123,0)
 I +$G(ORQLST(1))>0 D
"RTN","ORQPTQ1",124,0)
 .S ORX=ORQLST(1),ORADT=$P(ORX,U,4),ORIDT=$P(ORX,U,5)
"RTN","ORQPTQ1",125,0)
 .I ($G(ORADT)>$G(ORIDT)) S ORY=$P(ORX,U)_U_$P(ORX,U,2)
"RTN","ORQPTQ1",126,0)
 S:+$G(ORY)<1 ORY="^No primary care team found."
"RTN","ORQPTQ1",127,0)
 K %
"RTN","ORQPTQ1",128,0)
 Q
"RTN","ORQPTQ1",129,0)
PROVPT(ORY,ORPT) ; return PCMM primary provider for a patient
"RTN","ORQPTQ1",130,0)
 I +$G(ORPT)<1 S ORY(1)="^No patient identified"
"RTN","ORQPTQ1",131,0)
 S ORY(1)=$$OUTPTPR^SDUTL3(ORPT,$$NOW^XLFDT,1)
"RTN","ORQPTQ1",132,0)
 Q
"RTN","ORQPTQ1",133,0)
PPLINK(ORPROV,ORPT) ; returns '1' if patient is linked to provider
"RTN","ORQPTQ1",134,0)
 N ORX,ORPP
"RTN","ORQPTQ1",135,0)
 S ORX="",ORPP=0
"RTN","ORQPTQ1",136,0)
 I (+$G(ORPT)<1)!(+$G(ORPROV)<1) Q 0
"RTN","ORQPTQ1",137,0)
 I $D(^DPT("APR",ORPROV,ORPT)) Q "1^PRIM"  ;provider is patient's primary
"RTN","ORQPTQ1",138,0)
 I $D(^DPT("AAP",ORPROV,ORPT)) Q "1^ATTD"  ;provider is patient's attending
"RTN","ORQPTQ1",139,0)
 ;is provider and patient on the same team:
"RTN","ORQPTQ1",140,0)
 D TPROVPT(ORPROV)
"RTN","ORQPTQ1",141,0)
 F  S ORX=$O(^TMP("ORLPUPT",$J,ORX)) Q:ORX=""  D
"RTN","ORQPTQ1",142,0)
 .I +ORX=ORPT S ORPP="1^OERRTM" Q
"RTN","ORQPTQ1",143,0)
 K ^TMP("ORLPUPT",$J)
"RTN","ORQPTQ1",144,0)
 ;
"RTN","ORQPTQ1",145,0)
 ;If not linked already, see if linked via PCMM:
"RTN","ORQPTQ1",146,0)
 I ORPP=0 S ORPP=$$PCMMLINK(ORPROV,ORPT)
"RTN","ORQPTQ1",147,0)
 ;
"RTN","ORQPTQ1",148,0)
 Q ORPP
"RTN","ORQPTQ1",149,0)
PDLINK(ORDEV,ORPT) ; returns '1' if patient is linked to device via team
"RTN","ORQPTQ1",150,0)
 ;ORDEV can be either ien or device name
"RTN","ORQPTQ1",151,0)
 N ORY,ORX,ORTM,ORDP,ORTMDEV,ORDEVIEN
"RTN","ORQPTQ1",152,0)
 S ORDP=0
"RTN","ORQPTQ1",153,0)
 I (+$G(ORPT)<1)!($L($G(ORDEV))<1) Q 0
"RTN","ORQPTQ1",154,0)
 ; Are device and patient on the same team?:
"RTN","ORQPTQ1",155,0)
 I '$D(^%ZIS(1,ORDEV,0)) D  ;ORDEV is not an ien
"RTN","ORQPTQ1",156,0)
 .S ORDEVIEN=0,ORDEVIEN=$O(^%ZIS(1,"B",$P(ORDEV,U),ORDEVIEN))
"RTN","ORQPTQ1",157,0)
 .S ORDEV=ORDEVIEN
"RTN","ORQPTQ1",158,0)
 Q:+$G(ORDEV)<1 0
"RTN","ORQPTQ1",159,0)
 D TMSPT(.ORY,ORPT)
"RTN","ORQPTQ1",160,0)
 S ORX="" F  S ORX=$O(ORY(ORX)) Q:ORX=""  D
"RTN","ORQPTQ1",161,0)
 .S ORTM=ORY(ORX)
"RTN","ORQPTQ1",162,0)
 .I $D(^OR(100.21,+ORTM,0)),$P(^(0),U,4)=ORDEV S ORDP=1 Q
"RTN","ORQPTQ1",163,0)
 Q ORDP
"RTN","ORQPTQ1",164,0)
PCMMLINK(ORPROV,ORPT) ;returns '1' if patient is linked to provider via PCMM
"RTN","ORQPTQ1",165,0)
 N ORPP,ORPCMM,ORPCP
"RTN","ORQPTQ1",166,0)
 S ORPP=0
"RTN","ORQPTQ1",167,0)
 I (+$G(ORPT)<1)!(+$G(ORPROV)<1) Q 0
"RTN","ORQPTQ1",168,0)
 ;
"RTN","ORQPTQ1",169,0)
 ;provider is patient's PCMM primary care practitioner:
"RTN","ORQPTQ1",170,0)
 I ORPROV=+$$OUTPTPR^SDUTL3(ORPT,$$NOW^XLFDT,1) Q "1^PCP"   ;DBIA #1252
"RTN","ORQPTQ1",171,0)
 ;
"RTN","ORQPTQ1",172,0)
 ;provider is patient's PCMM associate provider:
"RTN","ORQPTQ1",173,0)
 I ORPROV=+$$OUTPTAP^SDUTL3(ORPT,$$NOW^XLFDT) Q "1^AP"      ;DBIA #1252
"RTN","ORQPTQ1",174,0)
 ;
"RTN","ORQPTQ1",175,0)
 ;provider is linked to patient via PCMM team position assignment:
"RTN","ORQPTQ1",176,0)
 S ORPCMM=$$PRPT^SCAPMC(ORPT,,,,,,"^TMP(""ORPCMMLK"",$J)",)  ;DBIA #1916
"RTN","ORQPTQ1",177,0)
 S ORPCP=0
"RTN","ORQPTQ1",178,0)
 F  S ORPCP=$O(^TMP("ORPCMMLK",$J,"SCPR",ORPCP)) Q:'ORPCP!ORPP=1  D
"RTN","ORQPTQ1",179,0)
 .I ORPROV=ORPCP S ORPP="1^PCMMTM"
"RTN","ORQPTQ1",180,0)
 K ^TMP("ORPCMMLK",$J)
"RTN","ORQPTQ1",181,0)
 ;
"RTN","ORQPTQ1",182,0)
 Q ORPP
"RTN","ORUS")
0^5^B9541231
"RTN","ORUS",1,0)
ORUS ; slc/KCM - Display List of Items ;6/2/92  08:09
"RTN","ORUS",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**91**;Dec 17, 1997
"RTN","ORUS",3,0)
 ;
"RTN","ORUS",4,0)
EN S Y=-1 Q:'$D(ORUS)!('$D(ORUS(0)))  S:'($D(IO)#2) IO="HOME" I 'IO S IOP=$S($D(ORIO):ORIO,1:"") D ^%ZIS
"RTN","ORUS",5,0)
 D INIT^ORUS5
"RTN","ORUS",6,0)
 I ORUS(0)["M" F I=0:0 D HDR,MOVE^ORUS5,SHOW,EN^ORUS1 I 'ORBACK Q:'ORMOR  Q:ORQUIT
"RTN","ORUS",7,0)
 I ORUS(0)'["M" D:ORUS(0)["N" SORB D SORB1,EN^ORUS1
"RTN","ORUS",8,0)
END K %,A,B,J,K,L,M,N,O,OR9,OR9Y,ORBACK,ORBUF,ORCO,ORCW,ORDA,ORDFLT,OREN,ORENL,ORENLA,ORERR,ORFLG,ORFN,ORFND,ORFNM,ORHL,ORITM,ORLK,ORMOR,ORNC,ORND,ORNE,ORNOSEL,OROD,ORPC,ORPRMT,ORPTR,ORQUIT,ORSC
"RTN","ORUS",9,0)
 K ORUS,ORSEL,ORSEQ,ORSEQL,ORSUB,ORT9,ORTTAB,ORTB,ORTOT,ORWR,ORWRK,P,S,W,X,^XUTL("OR",$J,"ORU"),^("ORV"),^("ORW")
"RTN","ORUS",10,0)
 Q
"RTN","ORUS",11,0)
SHOW S L=0  ;changed 9/18/00 by CLA for OR*3*91:
"RTN","ORUS",12,0)
 N ORTXT
"RTN","ORUS",13,0)
 F  S L=$O(^XUTL("OR",$J,"ORV",P,L)) Q:L>ORCO!(L="")  D
"RTN","ORUS",14,0)
 . W ! F J=0:1:ORNC-1 S X=L+(J*ORCO) I $D(^XUTL("OR",$J,"ORV",P,X)) D
"RTN","ORUS",15,0)
 .. W ?(J*ORTB),$P(^XUTL("OR",$J,"ORV",P,X),"^",2),?(J*ORTB+5)
"RTN","ORUS",16,0)
 .. S ORTXT=$E($P(^XUTL("OR",$J,"ORV",P,X),"^"),1,ORTB-5)
"RTN","ORUS",17,0)
 .. F  Q:'(ORTXT["|SP")  S ORTXT=$P(ORTXT,"|",1)_$$SPACE(+$P($P(ORTXT,"|",2),"SP",2))_$P(ORTXT,"|",3,999)
"RTN","ORUS",18,0)
 .. W ORTXT
"RTN","ORUS",19,0)
 .. I ^(X)="MORE...^999",'$D(OR9(999)) S I=999,OR9(I)=^(X) D S91
"RTN","ORUS",20,0)
 Q
"RTN","ORUS",21,0)
HDR S (DX,DY)=0 X ^%ZOSF("XY") X:$D(ORUS("T")) ORUS("T") S ORHL=$Y K DX,DY Q
"RTN","ORUS",22,0)
S9 S OR9(I)=ORUS(900,I) S:'$L($P(OR9(I),"^",2)) $P(OR9(I),"^",2)=900+I
"RTN","ORUS",23,0)
S91 S:$L($P(OR9(I),"^",1)) OR9("B",$P(OR9(I),"^",1),I)="" S:$L($P(OR9(I),"^",2)) OR9("B",$P(OR9(I),"^",2),I)=""
"RTN","ORUS",24,0)
 Q
"RTN","ORUS",25,0)
SORB I 'OREN S O=OROD,A="",S=0 F I=0:0 S A=$O(@(O_"A)")) Q:A=""  S B="" F  S B=$O(@(O_"A,B)")) Q:B=""  I $D(@(ORUS_"B,0)")) S ORDA=B X ORSC I $T,$D(@(ORUS_"B,0)")) X ORWR I $L(X) S S=S+1,^XUTL("OR",$J,"ORW",S)=B
"RTN","ORUS",26,0)
 I OREN S O=OROD,(B,S)=0 F I=0:0 S B=$O(@(O_"B)")) Q:B=""  I $D(@(ORUS_"B,0)")) S ORDA=B X ORSC I $T,$D(@(ORUS_"B,0)")) X ORWR I $L(X) S S=S+1,^XUTL("OR",$J,"ORW",S)=B
"RTN","ORUS",27,0)
 Q
"RTN","ORUS",28,0)
SORB1 F I=0:0 S I=$O(ORUS(900,I)) Q:I'>0  D S9
"RTN","ORUS",29,0)
 I ORUS(0)["Q" S I=998,OR9(I)="OTHER "_ORFNM_"^998" D S91
"RTN","ORUS",30,0)
 Q
"RTN","ORUS",31,0)
SPACE(NUMSP) ; added by CLA 9/18/00 for OR*3*91 - return NUMSP blank spaces
"RTN","ORUS",32,0)
 Q:+$G(NUMSP)<1 ""
"RTN","ORUS",33,0)
 N SPACES
"RTN","ORUS",34,0)
 S SPACES=""
"RTN","ORUS",35,0)
 S $P(SPACES," ",NUMSP)=" "
"RTN","ORUS",36,0)
 Q SPACES
"RTN","ORUS",37,0)
EN1 ;Display but not prompt (accept RETURN only)
"RTN","ORUS",38,0)
 Q:'$D(ORUS)!('$D(ORUS(0)))  S ORUS("A")="Press RETURN to continue ",ORUS(0)=ORUS(0)_"M",ORNOSEL=1,ORUS("H")="W !,""Press RETURN key to continue.""" G EN
"VER")
8.0^22.0
"^DD",8989.51,8989.51,0)
FIELD^^30^18
"^DD",8989.51,8989.51,0,"DDA")
N
"^DD",8989.51,8989.51,0,"DT")
2970621
"^DD",8989.51,8989.51,0,"ID","WRITE")
N X S X=^(0) D EN^DDIOL($P(X,U,2),"","?36")
"^DD",8989.51,8989.51,0,"IX","AG",8989.513,.02)

"^DD",8989.51,8989.51,0,"IX","B",8989.51,.01)

"^DD",8989.51,8989.51,0,"IX","C",8989.51,.02)

"^DD",8989.51,8989.51,0,"IX","D",8989.51,.01)

"^DD",8989.51,8989.51,0,"NM","PARAMETER DEFINITION")

"^DD",8989.51,8989.51,0,"PT",8989.5,.02)

"^DD",8989.51,8989.51,0,"PT",8989.52,.04)

"^DD",8989.51,8989.51,0,"PT",8989.521,.02)

"^DD",8989.51,8989.51,0,"VRPK")
XT
"^DD",8989.51,8989.51,.01,0)
NAME^RFX^^0;1^D VALID01^XPARDD1
"^DD",8989.51,8989.51,.01,1,0)
^.1
"^DD",8989.51,8989.51,.01,1,1,0)
8989.51^B
"^DD",8989.51,8989.51,.01,1,1,1)
S ^XTV(8989.51,"B",$E(X,1,30),DA)=""
"^DD",8989.51,8989.51,.01,1,1,2)
K ^XTV(8989.51,"B",$E(X,1,30),DA)
"^DD",8989.51,8989.51,.01,1,2,0)
8989.51^D^KWIC
"^DD",8989.51,8989.51,.01,1,2,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^XTV(8989.51,"D",I,DA)=""
"^DD",8989.51,8989.51,.01,1,2,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^XTV(8989.51,"D",I,DA)
"^DD",8989.51,8989.51,.01,1,2,"DT")
3000225
"^DD",8989.51,8989.51,.01,3)
Answer must be 3-30 characters in length.  Name must be unique.
"^DD",8989.51,8989.51,.01,21,0)
^.001^2^2^3000701^^
"^DD",8989.51,8989.51,.01,21,1,0)
This is the name of the parameter.  It should be namespaced according to the 
"^DD",8989.51,8989.51,.01,21,2,0)
package from which the parameter originated.
"^DD",8989.51,8989.51,.01,"DT")
3000225
"^DD",8989.51,8989.51,.02,0)
DISPLAY TEXT^F^^0;2^K:$L(X)>40!($L(X)<1) X
"^DD",8989.51,8989.51,.02,1,0)
^.1
"^DD",8989.51,8989.51,.02,1,1,0)
8989.51^C^MUMPS
"^DD",8989.51,8989.51,.02,1,1,1)
S ^XTV(8989.51,"C",$$UPPER^XPARDD1(X),DA)=""
"^DD",8989.51,8989.51,.02,1,1,2)
K ^XTV(8989.51,"C",$$UPPER^XPARDD1(X),DA)
"^DD",8989.51,8989.51,.02,1,1,"%D",0)
^^2^2^2970606^
"^DD",8989.51,8989.51,.02,1,1,"%D",1,0)
Cross references display text for lookup.  Display text is put in upper
"^DD",8989.51,8989.51,.02,1,1,"%D",2,0)
case so lookup will be case insensitive.
"^DD",8989.51,8989.51,.02,1,1,"DT")
2960409
"^DD",8989.51,8989.51,.02,3)
Answer must be 1-40 characters in length.
"^DD",8989.51,8989.51,.02,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,.02,21,1,0)
This is the displayable name for the parameter (allows mixed case, 
"^DD",8989.51,8989.51,.02,21,2,0)
non-namespaced names).
"^DD",8989.51,8989.51,.02,"DT")
2960409
"^DD",8989.51,8989.51,.03,0)
MULTIPLE VALUED^S^1:Yes;0:No;^0;3^Q
"^DD",8989.51,8989.51,.03,3)
Enter 'Yes' if multiple instances of the parameter are allowed for any single entity.
"^DD",8989.51,8989.51,.03,21,0)
^^3^3^2980705^
"^DD",8989.51,8989.51,.03,21,1,0)
If this field is set to 'Yes', multiple instances of the parameter will be 
"^DD",8989.51,8989.51,.03,21,2,0)
allowed for a single entity.  Otherwise, the value of the instance field
"^DD",8989.51,8989.51,.03,21,3,0)
for a given Entity-Parameter combination will always be '1'.
"^DD",8989.51,8989.51,.03,"DT")
2960207
"^DD",8989.51,8989.51,.04,0)
INSTANCE TERM^F^^0;4^K:$L(X)>40!($L(X)<1) X
"^DD",8989.51,8989.51,.04,3)
Answer must be 1-40 characters in length.
"^DD",8989.51,8989.51,.04,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,.04,21,1,0)
This is a free text term that can be used when prompting for a new instance of 
"^DD",8989.51,8989.51,.04,21,2,0)
the parameter (in the case where the parameter in multiple valued).  If not 
"^DD",8989.51,8989.51,.04,21,3,0)
entered, the word "Instance" will be used.
"^DD",8989.51,8989.51,.04,"DT")
2960207
"^DD",8989.51,8989.51,.05,0)
VALUE TERM^F^^0;5^K:$L(X)>40!($L(X)<1) X
"^DD",8989.51,8989.51,.05,3)
Answer must be 1-40 characters in length.
"^DD",8989.51,8989.51,.05,21,0)
^^2^2^2970626^
"^DD",8989.51,8989.51,.05,21,1,0)
This contains text that is issued as a prompt for the value.  If nothing
"^DD",8989.51,8989.51,.05,21,2,0)
is here, the prompt will be the word 'Value:'.
"^DD",8989.51,8989.51,.05,"DT")
2960612
"^DD",8989.51,8989.51,.06,0)
PROHIBIT EDITING^S^1:Yes;0:No;^0;6^Q
"^DD",8989.51,8989.51,.06,3)
Choose 'Disallow Editing' if editing of this field should not be allowed.
"^DD",8989.51,8989.51,.06,21,0)
^^2^2^2970306^
"^DD",8989.51,8989.51,.06,21,1,0)
This field prevents the parameter value from being edited with Fileman or
"^DD",8989.51,8989.51,.06,21,2,0)
any Parameters tools.
"^DD",8989.51,8989.51,.06,"DT")
2970317
"^DD",8989.51,8989.51,1.1,0)
VALUE DATA TYPE^S^D:date/time;F:free text;N:numeric;S:set of codes;Y:yes/no;P:pointer;W:word processing;M:M code;C:constant;^1;1^Q
"^DD",8989.51,8989.51,1.1,3)
Enter the type of data this parameter will contain.
"^DD",8989.51,8989.51,1.1,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,1.1,21,1,0)
This is the type of data this parameter will contain.  This field is used to 
"^DD",8989.51,8989.51,1.1,21,2,0)
define a call to the reader (^DIR) in most cases.
"^DD",8989.51,8989.51,1.1,"DT")
2960528
"^DD",8989.51,8989.51,1.2,0)
VALUE DOMAIN^F^^1;2^K:$L(X)>100!($L(X)<1) X
"^DD",8989.51,8989.51,1.2,3)
Enter up to 100 characters to further define the data type (used by ^DIR).
"^DD",8989.51,8989.51,1.2,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,1.2,21,1,0)
This is a string that may be used to further specify the data type.  The 
"^DD",8989.51,8989.51,1.2,21,2,0)
string stored here should be appropriate for the second ^-piece of DIR(0) 
"^DD",8989.51,8989.51,1.2,21,3,0)
when used with the data type field.
"^DD",8989.51,8989.51,1.2,"DT")
2960207
"^DD",8989.51,8989.51,1.3,0)
VALUE HELP^F^^1;3^K:$L(X)>80!($L(X)<1) X
"^DD",8989.51,8989.51,1.3,3)
Enter a line of help text to be displayed when entering a parameter value.
"^DD",8989.51,8989.51,1.3,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,1.3,21,1,0)
This field contains a line of help text that is displayed when the user 
"^DD",8989.51,8989.51,1.3,21,2,0)
requests help or encounters an error while entering the VALUE field in the 
"^DD",8989.51,8989.51,1.3,21,3,0)
PARAMETERS file.
"^DD",8989.51,8989.51,1.3,"DT")
2960207
"^DD",8989.51,8989.51,2,0)
VALUE VALIDATION CODE^K^^2;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,2,3)
This is M code used by DIR (3rd piece of DIR(0)).
"^DD",8989.51,8989.51,2,9)
@
"^DD",8989.51,8989.51,2,21,0)
^^2^2^2980705^
"^DD",8989.51,8989.51,2,21,1,0)
This field contains the M code that is placed in the third piece of DIR(0)
"^DD",8989.51,8989.51,2,21,2,0)
when validating a value in the PARAMETERS file.
"^DD",8989.51,8989.51,2,"DT")
2960207
"^DD",8989.51,8989.51,3,0)
VALUE SCREEN CODE^K^^3;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,3,3)
This is M code placed in DIR("S").
"^DD",8989.51,8989.51,3,9)
@
"^DD",8989.51,8989.51,3,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,3,21,1,0)
This field contains M code that is used to screen allowable entries for the 
"^DD",8989.51,8989.51,3,21,2,0)
VALUE field in the PARAMETERS file.  The code is placed in DIR("S") when 
"^DD",8989.51,8989.51,3,21,3,0)
validating the entry.
"^DD",8989.51,8989.51,3,"DT")
2960207
"^DD",8989.51,8989.51,6.1,0)
INSTANCE DATA TYPE^S^D:date/time;F:free text;N:numeric;S:set of codes;Y:yes/no;P:pointer;^6;1^Q
"^DD",8989.51,8989.51,6.1,3)
Enter the type of data allowed for the INSTANCE field of the parameter.
"^DD",8989.51,8989.51,6.1,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,6.1,21,1,0)
This is the type of data that is contained in the INSTANCE field of the 
"^DD",8989.51,8989.51,6.1,21,2,0)
PARAMETERS file, if multiple parameter instances per entity are allowed.  
"^DD",8989.51,8989.51,6.1,21,3,0)
This field is used to define a call to the reader.
"^DD",8989.51,8989.51,6.1,"DT")
2960207
"^DD",8989.51,8989.51,6.2,0)
INSTANCE DOMAIN^F^^6;2^K:$L(X)>100!($L(X)<1) X
"^DD",8989.51,8989.51,6.2,3)
Enter up to 100 characters to further define the data type (used by ^DIR).
"^DD",8989.51,8989.51,6.2,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,6.2,21,1,0)
This may be used to further define the data type for the INSTANCE field of 
"^DD",8989.51,8989.51,6.2,21,2,0)
the parameter.  The string stored here should be appropriate for the second 
"^DD",8989.51,8989.51,6.2,21,3,0)
^-piece of DIR(0) when used with the data type field.
"^DD",8989.51,8989.51,6.2,"DT")
2960207
"^DD",8989.51,8989.51,6.3,0)
INSTANCE HELP^F^^6;3^K:$L(X)>80!($L(X)<1) X
"^DD",8989.51,8989.51,6.3,3)
Enter a line of help text to be displayed when entering the parameter instance.
"^DD",8989.51,8989.51,6.3,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,6.3,21,1,0)
This field contains a line of help text that is displayed when the user 
"^DD",8989.51,8989.51,6.3,21,2,0)
requests help or encounters an error while entering the INSTANCE field of 
"^DD",8989.51,8989.51,6.3,21,3,0)
the PARAMETERS file.
"^DD",8989.51,8989.51,6.3,"DT")
2960207
"^DD",8989.51,8989.51,7,0)
INSTANCE VALIDATION CODE^K^^7;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,7,3)
This is M code used by DIR (3rd piece of DIR(0)).
"^DD",8989.51,8989.51,7,9)
@
"^DD",8989.51,8989.51,7,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,7,21,1,0)
This field contains M code that is placed in the third piece of DIR(0) when 
"^DD",8989.51,8989.51,7,21,2,0)
validating the INSTANCE field in the PARAMETERS file.
"^DD",8989.51,8989.51,7,"DT")
2960207
"^DD",8989.51,8989.51,8,0)
INSTANCE SCREEN CODE^K^^8;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,8,3)
This is M code placed in DIR("S").
"^DD",8989.51,8989.51,8,9)
@
"^DD",8989.51,8989.51,8,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,8,21,1,0)
This field contains M code that is used to screen allowable entries for the 
"^DD",8989.51,8989.51,8,21,2,0)
INSTANCE field in the PARAMETERS file.  The code is placed in DIR("S") when 
"^DD",8989.51,8989.51,8,21,3,0)
validating the entry.
"^DD",8989.51,8989.51,8,"DT")
2960207
"^DD",8989.51,8989.51,20,0)
DESCRIPTION^8989.512^^20;0
"^DD",8989.51,8989.51,20,21,0)
^^1^1^2970626^
"^DD",8989.51,8989.51,20,21,1,0)
A description of the parameter may be entered here.
"^DD",8989.51,8989.51,30,0)
ALLOWABLE ENTITIES^8989.513I^^30;0
"^DD",8989.51,8989.51,30,21,0)
^^2^2^2960213^^
"^DD",8989.51,8989.51,30,21,1,0)
This multiple contains a list of entities (pointers to files) for which the 
"^DD",8989.51,8989.51,30,21,2,0)
parameter may be validly set.
"^DD",8989.51,8989.512,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",8989.51,8989.512,0,"DT")
2960207
"^DD",8989.51,8989.512,0,"NM","DESCRIPTION")

"^DD",8989.51,8989.512,0,"UP")
8989.51
"^DD",8989.51,8989.512,.01,0)
DESCRIPTION^WL^^0;1^Q
"^DD",8989.51,8989.512,.01,3)
Enter a description of the parameter and how it is used.
"^DD",8989.51,8989.512,.01,21,0)
^^1^1^2960207^
"^DD",8989.51,8989.512,.01,21,1,0)
This is text that describes the purpose and use of the parameter.
"^DD",8989.51,8989.512,.01,"DT")
2960207
"^DD",8989.51,8989.513,0)
ALLOWABLE ENTITIES SUB-FIELD^^.02^2
"^DD",8989.51,8989.513,0,"DT")
2970621
"^DD",8989.51,8989.513,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^DIC(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(1,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",8989.51,8989.513,0,"IX","B",8989.513,.01)

"^DD",8989.51,8989.513,0,"NM","ALLOWABLE ENTITIES")

"^DD",8989.51,8989.513,0,"UP")
8989.51
"^DD",8989.51,8989.513,.01,0)
PRECEDENCE^MRNJ6,2^^0;1^K:+X'=X!(X>999.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",8989.51,8989.513,.01,1,0)
^.1
"^DD",8989.51,8989.513,.01,1,1,0)
8989.513^B
"^DD",8989.51,8989.513,.01,1,1,1)
S ^XTV(8989.51,DA(1),30,"B",$E(X,1,30),DA)=""
"^DD",8989.51,8989.513,.01,1,1,2)
K ^XTV(8989.51,DA(1),30,"B",$E(X,1,30),DA)
"^DD",8989.51,8989.513,.01,3)
Type a Number between 0 and 999.99, 2 Decimal Digits
"^DD",8989.51,8989.513,.01,21,0)
^^6^6^2960213^^^
"^DD",8989.51,8989.513,.01,21,1,0)
A single parameter may be set for several different types of entities.  This 
"^DD",8989.51,8989.513,.01,21,2,0)
lists the order in which entities are searched for a defined value.  For 
"^DD",8989.51,8989.513,.01,21,3,0)
example, if a parameter may be set for a package, a location, and a user, 
"^DD",8989.51,8989.513,.01,21,4,0)
and the respective precedents are 3, 2, 1, the value of the user parameter 
"^DD",8989.51,8989.513,.01,21,5,0)
would be returned.  If it did not exist, the value of the location 
"^DD",8989.51,8989.513,.01,21,6,0)
parameter.  If that did not exist, then the value of the package parameter.
"^DD",8989.51,8989.513,.01,"DT")
2960213
"^DD",8989.51,8989.513,.02,0)
ENTITY FILE^RP8989.518'^XTV(8989.518,^0;2^Q
"^DD",8989.51,8989.513,.02,1,0)
^.1
"^DD",8989.51,8989.513,.02,1,1,0)
8989.51^AG^MUMPS
"^DD",8989.51,8989.513,.02,1,1,1)
D AGS^XPARDD1
"^DD",8989.51,8989.513,.02,1,1,2)
D AGK^XPARDD1
"^DD",8989.51,8989.513,.02,1,1,"%D",0)
^^5^5^2980422^
"^DD",8989.51,8989.513,.02,1,1,"%D",1,0)
The AG x-ref has the format ^XTV(8989.51,PARAM,30,"AG",GLOBAL REF,DA)="".
"^DD",8989.51,8989.513,.02,1,1,"%D",2,0)
 
"^DD",8989.51,8989.513,.02,1,1,"%D",3,0)
It is used to screen the parameters that may be selected for a given entity 
"^DD",8989.51,8989.513,.02,1,1,"%D",4,0)
in the PARAMETERS file.  The global root is used because the entity is a 
"^DD",8989.51,8989.513,.02,1,1,"%D",5,0)
variable pointer.
"^DD",8989.51,8989.513,.02,1,1,"DT")
2960207
"^DD",8989.51,8989.513,.02,3)
Choose a file from which entities for this parameter are identified.
"^DD",8989.51,8989.513,.02,21,0)
^^3^3^2980422^
"^DD",8989.51,8989.513,.02,21,1,0)
This identifies an entity for which the parameter can be legally entered.  
"^DD",8989.51,8989.513,.02,21,2,0)
Entities are simply variable pointers.  The files which are eligible to be
"^DD",8989.51,8989.513,.02,21,3,0)
entities are listed in the PARAMETER ENTITY file.
"^DD",8989.51,8989.513,.02,"DT")
2970621
"^DIC",8989.51,8989.51,0)
PARAMETER DEFINITION^8989.51
"^DIC",8989.51,8989.51,0,"GL")
^XTV(8989.51,
"^DIC",8989.51,8989.51,"%D",0)
^^3^3^2980920^
"^DIC",8989.51,8989.51,"%D",1,0)
This file contains the characteristics of parameters.  Entries in this
"^DIC",8989.51,8989.51,"%D",2,0)
file must be namespaced and they are exported by the package which owns
"^DIC",8989.51,8989.51,"%D",3,0)
them.
"^DIC",8989.51,"B","PARAMETER DEFINITION",8989.51)

**END**
**END**
