$TXT Created by INSLEY,MARCIA L at DEVCUR.ISC-SLC.VA.GOV  (KIDS) on THURSDAY, 01/11/01 at 14:38
=============================================================================
Run Date: JAN 12, 2001                     Designation: OR*3*91
Package : OR - ORDER ENTRY/RESULTS REPORTING Priority: Mandatory
Version : 3        SEQ #89                      Status: Released
=============================================================================

Associated patches: (v)OR*3*63     <<= must be installed BEFORE `OR*3*91'
                    (v)OR*3*74     <<= must be installed BEFORE `OR*3*91'
                    (v)OR*3*88     <<= must be installed BEFORE `OR*3*91'
                    (v)XU*8*171    <<= must be installed BEFORE `OR*3*91'

Subject: PCMM Providers and Teams to CPRS Notifications

Category: 
  - Enhancement (Mandatory)
  - Routine

Description: 
============

 Note: This patch can only be installed at sites running CPRS.
  
 Additional technical documentation regarding issues in this patch and
 other aspects of CPRS Notifications/Order Checks are available on our
 web site:
       http://vista.med.va.gov/cprs/html/notif__and_alert_reference.html
  
 An updated version of the CPRS Technical Manual will be released with
 upcoming patch OR*3*96.  OR*3*96 contains additional changes to the
 notifications software.
  
 Routines:
 ========
 ORB3
 ORB3FN
 ORB3U1
 ORB3USER
 ORQPTQ1
 ORUS
  
 NOISes:
 =======
 NOP-0599-12481 
 OKL-0799-72239 
 SHE-1099-50512
 BAN-0100-12218
 WRJ-0500-10873
 MIN-0900-40034 
 SHR-0900-70749
 CIN-0799-40515 
 CLL-1099-41515
 DAY-0399-40503
 WPB-1299-32602
 WRJ-0100-11567
 WRJ-0200-10027
 PAL-0100-62933
  
 E3Rs:
 =====
 11342 
 12645
 13612
  
 Issues:
 =======
 1. [NOP-0599-12481, OKL-0799-72239, BAN-0100-12218, SHE-1099-50512,
 WRJ-0500-10873; E3Rs: 11342,12645,13612]  Add PCMM providers and order
 entering provider to CPRS Notifications.  Modified parameter ORB PROVIDER
 RECIPIENTS to support these changes by adding the following codes:
   E (Entering User): deliver notification to the user/provider who entered
     the order's most recent activity.
   M (PCMM Team): deliver notification to users/providers linked to the
     patient via PCMM Team Position assignments.
   R (PCMM Primary Care Practitioner): deliver notification to the
     patient's PCMM Primary Care Practitioner.
   S (PCMM Associate Provider): deliver notification to the patient's PCMM
     Associate Provider.
 Please remember that for all notification/alert recipients, notifications
 must be Enabled or "on" for the user to actually receive the alert.
 This applies to the new potential alert recipients Entering Provider and
 PCMM providers as well.  Make use of this new functionality by using the
 Notification Mgmt option #7 "Set Provider Recipients for Notifications".
 Add the codes of your choice to notifications/alerts following this
 example:
  
 Select Notification Mgmt Menu Option: 7  Set Provider Recipients for
 Notifications
  
  
              Set PROVIDER RECIPIENTS Parameters for Notifications
  
 Provider Recipients may be set for the following:
  
      1   Division      DIV    [ISC SALT LAKE]
      2   System        SYS    [DEVCUR.ISC-SLC.VA.GOV]
  
 Enter selection: 2  System   DEVCUR.ISC-SLC.VA.GOV
  
 ------- Setting Provider Recipients  for System: DEVCUR.ISC-SLC.VA.GOV
 -------
 Select Notification:  ORDER REQUIRES ELEC SIGNATURE
  
 Notification: ORDER REQUIRES ELEC SIGNATURE//   ORDER REQUIRES ELEC
 SIGNATURE   
 ORDER REQUIRES ELEC SIGNATURE
 Value: PATO// PATOE
  
 Select Notification: CRITICAL LAB RESULTS (ACTION)
  
 Notification: CRITICAL LAB RESULT (INFO)//   CRITICAL LAB RESULT (INFO)
 CRITICAL LAB RESULT (INFO)
 Value: PATOMRS 
  
 In addition to adding Entering Provider and PCMM Providers as potential
 alert recipients, PCMM providers are now considered as "linked" providers.
 Linked PCMM providers include Primary Care Practitioner (PCP), Associate
 Provider and users/providers assigned to the patient via PCMM team
 position assignments.  This affects the alert follow-up action of the
 Order Requires Electronic Signature notification in the following manner:
 If the alert recipient has no existing unsigned orders for the patient
 and is not linked to the patient via CPRS teams, is not the patient's
 attending or inpatient primary provider (and now is not linked to the
 patient via PCMM PCP, PCMM Associate Provider and PCMM team position
 assignments) the alert is deleted for that recipient only.  Therefore the
 alert will not be deleted if the user is on the patient's CPRS or PCMM
 team or is a primary inpatient or outpatient provider for the patient.
 As usual, the alert is deleted for all recipients when no unsigned orders
 exist for the patient.
  
 Linking users to the patient by the new PCMM linkages also affects the
 flagged orderable item notifications.  When prompted for a value, "No"
 indicates only send alert for patients who are "linked" to the User, Team
 or Device. A "No" value will now send the alert for patient linked via
 PCMM PCP, PCMM Associate Provider and PCMM Team Position Assignments.
  
 2. [MIN-0900-40034, SHR-0900-70749] Fixes an invalid subscript error in
 ORUS2.  Error occurred when text displayed for the option "Display
 Patient Alerts and Alert Recipients" exceeded allowable space.
  
  
 3. [CIN-0799-40515,CLL-1099-41515] Fixes problems caused by improper clean
 up of globals used in ORUS list displays. 
  
 4. [DAY-0399-40503,WPB-1299-32602,WRJ-0100-11567,WRJ-0200-10027,
 PAL-0100-62933] Fixes a problem with some notifications/alerts where the
 alert "disappeared" for some users.  The problem occurred with
 notifications that can exist as alerts in only one instance per patient
 ("single instance" alerts.) For example, each patient can only have one
 instance of the Order Requires Signature (Unsigned Order)
 alert/notification.  This is done to reduce the alert load.  (If each
 unsigned order created a separate alert, users would be inundated with
 "Order requires electronic signature" alerts. Imagine the scenario for
 "New Order" notifications/alerts!)  The rationale is the View Alert
 followup action will display all unsigned orders for the one alert. For
 these "single instance" notifications when a new instance occurs the
 previous alert is deleted, a new set of alert recipients is determined and
 a new alert is generated. In our example, each time an unsigned order
 occurs, the previous instance of "Order requires electronic signature"
 alert is deleted and a new alert is sent to a new set of recipients.
 Here is what was happening to cause a problem:
 It was possible for a recipient of the earlier alert to not be
 considered as a recipient of the new alert.  If this recipient had not
 processed the early alert, the alert was deleted ("disappeared") before he
 had a chance to process it. In our example, if a consultant entered an
 order but did not sign it, he received the "Order requires electronic
 signature" alert. When the patient's primary provider entered a new
 unsigned order, the old alert was deleted and a new alert generated.  The
 consultant's alert disappeared before he could sign the order (via the
 alert follow-up action.)
 The fix obtains a list of the previous "single instance" alert recipients
 who have NOT deleted the alert and adds them as potiential recipients to
 the new alert.  As potential recipients, these previous recipients go
 through the same "ON/OFF" algorithm to determine if they should actually
 receive the new alert or not.
 *** This change requires Kernel patch XU*8*171 ***
  
 Single instance notifications/alerts which delete the previous instance of
 the alert and are affected by this fix include:
  
 DC ORDER
 DNR EXPIRING
 FLAG ORDER FOR CLARIFICATION
 MEDICATIONS EXPIRING
 NEW ORDER
 NPO DIET MORE THAN 72 HRS
 ORDER REQUIRES ELEC SIGNATURE
 UNVERIFIED MEDICATION ORDER
 UNVERIFIED ORDER
  
  
 ROUTINE SUMMARY:
  ================
  The following is a list of the routines included in this patch.  The
  second line of each of these routines will look like:
  
     <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 1997
  
                             CHECK^XTSUMBLD results
  Routine name         Before Patch          After Patch         Patch List
  ============         ============          ===========         ==========
  ORB3                     15322376             17955612          31,74,91
  ORB3FN                    2352489              2794950          31,74,91
  ORB3U1                   11306169             12155416         9,74,88,91
  ORB3USER                 20199027             20228416           74,91
  ORQPTQ1                   8312301              9199178         9,74,63,91
  ORUS                      7899545              7200208             91
  
  
 INSTALLATION INSTRUCTIONS:  
 =========================
 This patch should be loaded during non-peak hours to minimize disruption
 to users.  Users may be on the system during installation. [PLEASE INSURE
 THIS PATCH IS NOT INSTALLED WHEN ORMTIME IS RUNNING.] On most systems
 installation will take less than 2 minutes.  Systems with heavy user loads
 or performance problems may take longer. If you choose to rebuild your
 menus, installation will take longer.
  
 1. Disable ORMTIME during the installation process.  This can be
    accomplished by changing ORMTIME's next queue time to occur one hour in
    the future. Use FileMan to edit ORMTIME's "Queued to Run At What Time"
    field in the OPTION SCHEDULING file [#19.2].
  
 2. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 3. Review your mapped set.  If any of the routines listed in the ROUTINE
    SUMMARY section are mapped, they should be removed from the mapped set
    at this time.
  
 4. From the Kernel Installation and Distribution System Menu, select the
    Installation menu.
  
 5. From this menu, you may elect to use the following options (when 
    prompted for INSTALL NAME, enter OR*3.0*91):
      a.  Backup a Transport Global
      b.  Compare Transport Global to Current System
      c.  Verify Checksums in Transport Global
  
 6. Use the Install Package(s) options and select the package OR*3.0*91.
  
 7. When prompted 'Want KIDS to INHIBIT LOGONS during install? YES//',
    respond "NO".
  
 8. When prompted 'Want to DISABLE Scheduled Options, Menu Options and 
    Protocols? YES//', respond "YES".  Then at the prompt 'Enter
    options you wish to mark as Out of Order:' enter "ORMTIME RUN".
  
 9. If routines were unmapped as part of step 2, they should be returned
    to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ORB3


Routine Checksum:

Routine Name:
  - ORB3U1


Routine Checksum:

Routine Name:
  - ORB3USER


Routine Checksum:

Routine Name:
  - ORQPTQ1


Routine Checksum:

Routine Name:
  - ORUS


Routine Checksum:

Routine Name:
  - ORB3FN


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : ANDERSON,CURTIS L.            Date Entered : JUL 10, 2000
Completed By: INSLEY,MARCIA                 Date Completed: JAN 11, 2001
Released By : SCOTT,JEAN M                 Date Released : JAN 12, 2001
=============================================================================


Packman Mail Message:
=====================

$END TXT
