Released DVB*4*64 SEQ #59
Extracted from mail message
**KIDS**:DVB*4.0*64^

**INSTALL NAME**
DVB*4.0*64
"BLD",8357,0)
DVB*4.0*64^HINQ^0^3100802^y
"BLD",8357,1,0)
^^1^1^3100628^
"BLD",8357,1,1,0)
Add ICD9 code mapping to the DISABILITY CONDITION (#31) file.
"BLD",8357,4,0)
^9.64PA^^
"BLD",8357,6)
1^
"BLD",8357,6.3)
25
"BLD",8357,"INI")

"BLD",8357,"INID")
n^n^n
"BLD",8357,"INIT")
EN^DVB4P64
"BLD",8357,"KRN",0)
^9.67PA^779.2^20
"BLD",8357,"KRN",.4,0)
.4
"BLD",8357,"KRN",.401,0)
.401
"BLD",8357,"KRN",.402,0)
.402
"BLD",8357,"KRN",.403,0)
.403
"BLD",8357,"KRN",.5,0)
.5
"BLD",8357,"KRN",.84,0)
.84
"BLD",8357,"KRN",3.6,0)
3.6
"BLD",8357,"KRN",3.8,0)
3.8
"BLD",8357,"KRN",9.2,0)
9.2
"BLD",8357,"KRN",9.8,0)
9.8
"BLD",8357,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",8357,"KRN",9.8,"NM",1,0)
DVB464^^0^B22308667
"BLD",8357,"KRN",9.8,"NM",2,0)
DVB464A^^0^B29834450
"BLD",8357,"KRN",9.8,"NM",3,0)
DVB464P^^0^B25190131
"BLD",8357,"KRN",9.8,"NM",4,0)
DVB464P1^^0^B26531841
"BLD",8357,"KRN",9.8,"NM",5,0)
DVB464P2^^0^B45953379
"BLD",8357,"KRN",9.8,"NM",6,0)
DVB464PA^^0^B26116168
"BLD",8357,"KRN",9.8,"NM",7,0)
DVB464PD^^0^B22793607
"BLD",8357,"KRN",9.8,"NM","B","DVB464",1)

"BLD",8357,"KRN",9.8,"NM","B","DVB464A",2)

"BLD",8357,"KRN",9.8,"NM","B","DVB464P",3)

"BLD",8357,"KRN",9.8,"NM","B","DVB464P1",4)

"BLD",8357,"KRN",9.8,"NM","B","DVB464P2",5)

"BLD",8357,"KRN",9.8,"NM","B","DVB464PA",6)

"BLD",8357,"KRN",9.8,"NM","B","DVB464PD",7)

"BLD",8357,"KRN",19,0)
19
"BLD",8357,"KRN",19.1,0)
19.1
"BLD",8357,"KRN",101,0)
101
"BLD",8357,"KRN",409.61,0)
409.61
"BLD",8357,"KRN",771,0)
771
"BLD",8357,"KRN",779.2,0)
779.2
"BLD",8357,"KRN",870,0)
870
"BLD",8357,"KRN",8989.51,0)
8989.51
"BLD",8357,"KRN",8989.52,0)
8989.52
"BLD",8357,"KRN",8994,0)
8994
"BLD",8357,"KRN","B",.4,.4)

"BLD",8357,"KRN","B",.401,.401)

"BLD",8357,"KRN","B",.402,.402)

"BLD",8357,"KRN","B",.403,.403)

"BLD",8357,"KRN","B",.5,.5)

"BLD",8357,"KRN","B",.84,.84)

"BLD",8357,"KRN","B",3.6,3.6)

"BLD",8357,"KRN","B",3.8,3.8)

"BLD",8357,"KRN","B",9.2,9.2)

"BLD",8357,"KRN","B",9.8,9.8)

"BLD",8357,"KRN","B",19,19)

"BLD",8357,"KRN","B",19.1,19.1)

"BLD",8357,"KRN","B",101,101)

"BLD",8357,"KRN","B",409.61,409.61)

"BLD",8357,"KRN","B",771,771)

"BLD",8357,"KRN","B",779.2,779.2)

"BLD",8357,"KRN","B",870,870)

"BLD",8357,"KRN","B",8989.51,8989.51)

"BLD",8357,"KRN","B",8989.52,8989.52)

"BLD",8357,"KRN","B",8994,8994)

"BLD",8357,"PRE")

"BLD",8357,"QUES",0)
^9.62^^
"BLD",8357,"REQB",0)
^9.611^^
"INIT")
EN^DVB4P64
"MBREQ")
0
"PKG",119,-1)
1^1
"PKG",119,0)
HINQ^DVB^HINQ(Hospital Inquiry)
"PKG",119,20,0)
^9.402P^^
"PKG",119,22,0)
^9.49I^1^1
"PKG",119,22,1,0)
4.0^2930615^2920421
"PKG",119,22,1,"PAH",1,0)
64^3100802^123457152
"PKG",119,22,1,"PAH",1,1,0)
^^1^1^3100802
"PKG",119,22,1,"PAH",1,1,1,0)
Add ICD9 code mapping to the DISABILITY CONDITION (#31) file.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
8
"RTN","DVB464")
0^1^B22308667^n/a
"RTN","DVB464",1,0)
DVB464 ;ALB/MJB - DISABILITY FILE UPDATE ; 1/11/07 1:34pm
"RTN","DVB464",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464",3,0)
 ;
"RTN","DVB464",4,0)
 ;This routine is the main install routine that will add Rated
"RTN","DVB464",5,0)
 ;Disabilities (VA) VBA DX CODES to the DISABILITY CONDITION(#31) file.
"RTN","DVB464",6,0)
 ;
"RTN","DVB464",7,0)
 ;
"RTN","DVB464",8,0)
 Q  ;no direct entry
"RTN","DVB464",9,0)
 ;
"RTN","DVB464",10,0)
POST ;Main entry point for Post-init items.
"RTN","DVB464",11,0)
 ;
"RTN","DVB464",12,0)
 N DVBTOT  ;count of total ICD9 codes filed
"RTN","DVB464",13,0)
 N DVBTMP  ;Closed Root global reference for error reporting
"RTN","DVB464",14,0)
 S DVBTMP=$NA(^TMP("DVB464A",$J))
"RTN","DVB464",15,0)
 K @DVBTMP
"RTN","DVB464",16,0)
 S @DVBTMP@(0)="PATCH DVB*4*64 POST-INSTALL^"_$$NOW^XLFDT
"RTN","DVB464",17,0)
 S DVBTOT=0
"RTN","DVB464",18,0)
 ;
"RTN","DVB464",19,0)
 ;
"RTN","DVB464",20,0)
 ;call to process (#31) file updates
"RTN","DVB464",21,0)
 D POST^DVB464A(DVBTMP,.DVBTOT)
"RTN","DVB464",22,0)
 ;
"RTN","DVB464",23,0)
 S @DVBTMP@(0)=@DVBTMP@(0)_"^"_$$NOW^XLFDT_"^"_DVBTOT
"RTN","DVB464",24,0)
 ;
"RTN","DVB464",25,0)
 I '$D(@DVBTMP@("ERROR")) D
"RTN","DVB464",26,0)
 . D BMES^XPDUTL("  >>> *** SUCCESS updating the DISABILITY CONDITION (#31) file.")
"RTN","DVB464",27,0)
 . D MES^XPDUTL("          Total RELATED ICD9 CODES filed: "_DVBTOT)
"RTN","DVB464",28,0)
 . ;
"RTN","DVB464",29,0)
 E  D
"RTN","DVB464",30,0)
 . D BMES^XPDUTL("  >>> *** FAILURE updating the DISABILITY CONDITION (#31) file.")
"RTN","DVB464",31,0)
 . D BMES^XPDUTL("      Filing error's have occurred when adding the new RELATED ICD9 CODES.")
"RTN","DVB464",32,0)
 . D MES^XPDUTL("      Immediate resolution is necessary to maintain database integrity.")
"RTN","DVB464",33,0)
 . D BMES^XPDUTL("  A MailMan message has been sent to the installer of this patch")
"RTN","DVB464",34,0)
 . D MES^XPDUTL("  with a listing of the error's.")
"RTN","DVB464",35,0)
 . D BMES^XPDUTL("  Once these filing error's have been resolved, please re-run")
"RTN","DVB464",36,0)
 . D MES^XPDUTL("  the Post-Installation routine directly from programmer mode")
"RTN","DVB464",37,0)
 . D MES^XPDUTL("  by entering the following command:")
"RTN","DVB464",38,0)
 . D MES^XPDUTL("  ")
"RTN","DVB464",39,0)
 . D MES^XPDUTL("  D POST^DVB4P64")
"RTN","DVB464",40,0)
 . D MES^XPDUTL("  ")
"RTN","DVB464",41,0)
 . D BMES^XPDUTL("  >>> I'm now creating and sending the MailMan message...")
"RTN","DVB464",42,0)
 . ;
"RTN","DVB464",43,0)
 . D SENDMSG(DVBTMP,.DVBTOT)
"RTN","DVB464",44,0)
 . ;
"RTN","DVB464",45,0)
 . D MES^XPDUTL("  >>> All done.")
"RTN","DVB464",46,0)
 ;
"RTN","DVB464",47,0)
 ;cleanup temp file
"RTN","DVB464",48,0)
 K @DVBTMP
"RTN","DVB464",49,0)
 Q
"RTN","DVB464",50,0)
 ;
"RTN","DVB464",51,0)
 ;
"RTN","DVB464",52,0)
SENDMSG(DVBTMP,DVBTOT) ;send failure MailMan message to installer of patch
"RTN","DVB464",53,0)
 ;
"RTN","DVB464",54,0)
 N DIFROM,DVBMSG
"RTN","DVB464",55,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,XMDUN,XMZ
"RTN","DVB464",56,0)
 S XMSUB="DVB*4.0*64 Patch Post-Install Error Listing"
"RTN","DVB464",57,0)
 S XMTEXT="DVBMSG("
"RTN","DVB464",58,0)
 S XMDUZ=.5,(XMY(DUZ),XMY(XMDUZ))=""
"RTN","DVB464",59,0)
 S DVBMSG(1)="Patch:  DVB*4.0*64 Automated Service Connected Designation"
"RTN","DVB464",60,0)
 S DVBMSG(2)=""
"RTN","DVB464",61,0)
 S DVBMSG(3)="The post-installation update of the DISABILITY CONDITION (#31) file"
"RTN","DVB464",62,0)
 S DVBMSG(4)="has FAILED to successfully complete.  Filing error's have occurred when"
"RTN","DVB464",63,0)
 S DVBMSG(5)="attempting to add the new data mapping of RELATED ICD9 CODES."
"RTN","DVB464",64,0)
 S DVBMSG(6)=""
"RTN","DVB464",65,0)
 S DVBMSG(7)="Immediate resolution of ALL error's is needed to maintain database integrity."
"RTN","DVB464",66,0)
 S DVBMSG(8)=""
"RTN","DVB464",67,0)
 S DVBMSG(9)="Once these filing error's have been resolved, please re-run"
"RTN","DVB464",68,0)
 S DVBMSG(10)="the Post-Installation routine directly from programmer mode"
"RTN","DVB464",69,0)
 S DVBMSG(11)="by entering the following command:"
"RTN","DVB464",70,0)
 S DVBMSG(12)=""
"RTN","DVB464",71,0)
 S DVBMSG(13)="D POST^DVB4P64"
"RTN","DVB464",72,0)
 S DVBMSG(14)=""
"RTN","DVB464",73,0)
 S DVBMSG(15)="The new update run time should take less than 5 minutes to complete."
"RTN","DVB464",74,0)
 S DVBMSG(16)=""
"RTN","DVB464",75,0)
 S DVBMSG(17)=">>> Please review and resolve the following error's:"
"RTN","DVB464",76,0)
 S DVBMSG(18)=""
"RTN","DVB464",77,0)
 S DVBMSG(19)="*** DISABILITY CONDITION FILE (#31) FILING ERRORS ***"
"RTN","DVB464",78,0)
 S DVBMSG(20)="-----------------------------------------------------"
"RTN","DVB464",79,0)
 ;
"RTN","DVB464",80,0)
 ;loop and list error's
"RTN","DVB464",81,0)
 N DVBICD,DVBHDR,DVBHDR1,DVBIEN,DVBLN,DVBMSS,DVBVBA,DVBDESC
"RTN","DVB464",82,0)
 S DVBHDR="VBA DX CODE: ",DVBHDR1="    ICD DIAGNOSIS CODE: "
"RTN","DVB464",83,0)
 S DVBLN=21,DVBVBA=0
"RTN","DVB464",84,0)
 F  S DVBVBA=$O(@DVBTMP@("ERROR",DVBVBA)) Q:'DVBVBA  D
"RTN","DVB464",85,0)
 . I $D(@DVBTMP@("ERROR",DVBVBA,0)) D  Q
"RTN","DVB464",86,0)
 . . S DVBMSS=DVBHDR_DVBVBA_" - "_$G(@DVBTMP@("ERROR",DVBVBA,0))
"RTN","DVB464",87,0)
 . . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464",88,0)
 . K DVBDESC D FIND^DIC(31,"","","X",DVBVBA,,"C","","","DVBDESC")
"RTN","DVB464",89,0)
 . S DVBMSS=DVBHDR_DVBVBA_" - "_$E($G(DVBDESC("DILIST",1,1)),1,50)
"RTN","DVB464",90,0)
 . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464",91,0)
 . S DVBIEN=0
"RTN","DVB464",92,0)
 . F  S DVBIEN=$O(@DVBTMP@("ERROR",DVBVBA,DVBIEN)) Q:'DVBIEN  D
"RTN","DVB464",93,0)
 . . S DVBICD=""
"RTN","DVB464",94,0)
 . . F  S DVBICD=$O(@DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)) Q:DVBICD=""  D
"RTN","DVB464",95,0)
 . . . S DVBMSS=DVBHDR1_DVBICD_" - "_$G(@DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD))
"RTN","DVB464",96,0)
 . . . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464",97,0)
 S DVBMSG(DVBLN)="",DVBLN=DVBLN+1
"RTN","DVB464",98,0)
 S DVBMSG(DVBLN)="<End of Report>"
"RTN","DVB464",99,0)
 ;
"RTN","DVB464",100,0)
 D ^XMD
"RTN","DVB464",101,0)
 Q
"RTN","DVB464A")
0^2^B29834450^n/a
"RTN","DVB464A",1,0)
DVB464A ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB464A",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464A",3,0)
 ;
"RTN","DVB464A",4,0)
 ;This routine will be run as a post-installation for patch DVB*4*64
"RTN","DVB464A",5,0)
 ;This routine will update the disability condition file to add requested
"RTN","DVB464A",6,0)
 ;disability conditions.
"RTN","DVB464A",7,0)
 ;
"RTN","DVB464A",8,0)
 Q
"RTN","DVB464A",9,0)
 ;
"RTN","DVB464A",10,0)
POST(DVBTMP,DVBTOT) ;entry point
"RTN","DVB464A",11,0)
 N DVBLINE
"RTN","DVB464A",12,0)
  ;  Input:
"RTN","DVB464A",13,0)
 ;    DVBTMP - Closed Root global reference for error reporting
"RTN","DVB464A",14,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464A",15,0)
 ;
"RTN","DVB464A",16,0)
 ;  Output:
"RTN","DVB464A",17,0)
 ;    DVBTMP - Temp file of error messages (if any)
"RTN","DVB464A",18,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464A",19,0)
 ;
"RTN","DVB464A",20,0)
 N DVBRTN,DVBCNT
"RTN","DVB464A",21,0)
 S DVBTMP=$G(DVBTMP)
"RTN","DVB464A",22,0)
 S DVBTOT=$G(DVBTOT) I DVBTOT']"" S DVBTOT=0
"RTN","DVB464A",23,0)
 I DVBTMP']"" S DVBTMP=$NA(^TMP("DVB464P",$J)) K @DVBTMP
"RTN","DVB464A",24,0)
 ;
"RTN","DVB464A",25,0)
 ;
"RTN","DVB464A",26,0)
DVBNEW ;add new codes or modify name if code is in use
"RTN","DVB464A",27,0)
 ;
"RTN","DVB464A",28,0)
 N DVBLINE
"RTN","DVB464A",29,0)
 S DVBLINE=1
"RTN","DVB464A",30,0)
 F DVBI=DVBLINE:1 S DVBJ=$P($T(NEWCODE+DVBI),";;",2) Q:DVBJ["$EXIT"  D
"RTN","DVB464A",31,0)
 .S DVBCODE=+DVBJ,DVBNAME=$E($P(DVBJ,"^",2),1,45),DVBLINE=DVBI
"RTN","DVB464A",32,0)
 .S DVBDESC=$E($P(DVBJ,"^",3),1,200)
"RTN","DVB464A",33,0)
 .;
"RTN","DVB464A",34,0)
 .;add new code
"RTN","DVB464A",35,0)
 .I '$D(^DIC(31,"C",DVBCODE)) D
"RTN","DVB464A",36,0)
 ..K DD,DO
"RTN","DVB464A",37,0)
 ..S DIC="^DIC(31,",DIC(0)="L",DIC("DR")="2////"_DVBCODE_";10////"_DVBDESC
"RTN","DVB464A",38,0)
 ..S X=DVBNAME,DLAYGO=31
"RTN","DVB464A",39,0)
 ..D FILE^DICN
"RTN","DVB464A",40,0)
 ..D MES^XPDUTL(DVBCODE_":  adding  "_DVBCODE_"  "_X)
"RTN","DVB464A",41,0)
 ..K DLAYGO,DIC,X
"RTN","DVB464A",42,0)
 ..Q
"RTN","DVB464A",43,0)
 .;
"RTN","DVB464A",44,0)
 .;modify name
"RTN","DVB464A",45,0)
 .S DVBIEN=+$O(^DIC(31,"C",DVBCODE,0))
"RTN","DVB464A",46,0)
 .S DVBREC=$G(^DIC(31,DVBIEN,0)),DVBOLDSC=$G(^DIC(31,DVBIEN,1)) I DVBREC']"" D
"RTN","DVB464A",47,0)
 ..D MES^XPDUTL("  >>>> error "_DVBCODE_" in C x-reference and not in file 31")
"RTN","DVB464A",48,0)
 ..Q
"RTN","DVB464A",49,0)
 .S DVBOLDN=$P(DVBREC,"^") I DVBOLDN'=DVBNAME!(DVBOLDSC'=DVBDESC) D
"RTN","DVB464A",50,0)
 ..S DA=DVBIEN,DIE="^DIC(31,",DR=".01////"_DVBNAME_";10////"_DVBDESC
"RTN","DVB464A",51,0)
 ..D ^DIE
"RTN","DVB464A",52,0)
 ..K DR,DA,DIE
"RTN","DVB464A",53,0)
 ..D MES^XPDUTL(DVBCODE_": changing name from "_DVBOLDN)
"RTN","DVB464A",54,0)
 ..D MES^XPDUTL("                    to   "_DVBNAME)
"RTN","DVB464A",55,0)
 ..D MES^XPDUTL(DVBCODE_": changing description...")
"RTN","DVB464A",56,0)
 ..D MES^XPDUTL("          from:  "_DVBOLDSC)
"RTN","DVB464A",57,0)
 ..D MES^XPDUTL("            to:  "_DVBDESC)
"RTN","DVB464A",58,0)
 .;
"RTN","DVB464A",59,0)
 K DVBCODE,DVBI,DVBIEN,DVBJ,DVBNAME,DVBOLDN,DVBREC,DVBDESC,DVBOLDSC
"RTN","DVB464A",60,0)
 Q
"RTN","DVB464A",61,0)
 ;
"RTN","DVB464A",62,0)
NEWCODE ;codes to be added or changed
"RTN","DVB464A",63,0)
 ;;6036^STATUS POST CORNEAL TRANSPLANT^STATUS POST CORNEAL TRANSPLANT
"RTN","DVB464A",64,0)
 ;;6037^PINGUECULA, SPOT ON WHITE OF EYE^PINGUECULA, SPOT ON WHITE OF EYE
"RTN","DVB464A",65,0)
 ;;8850^UNDIAG. COND. - MUSCULOSKELETAL SYSTEM^UNDIAG. COND. - MUSCULOSKELETAL SYSTEM
"RTN","DVB464A",66,0)
 ;;8851^UNDIAG. COND. - AMPUTATIONS^UNDIAG. COND. - AMPUTATIONS
"RTN","DVB464A",67,0)
 ;;8852^UNDIAG. COND. - JOINTS, SKULL AND RIBS^UNDIAG. COND. - JOINTS, SKULL AND RIBS
"RTN","DVB464A",68,0)
 ;;8853^UNDIAG. COND. - MUSCLE^UNDIAG. COND. - MUSCLE
"RTN","DVB464A",69,0)
 ;;8860^UNDIAG. COND. - EYE DISEASE^UNDIAG. COND. - EYE DISEASE
"RTN","DVB464A",70,0)
 ;;8861^UNDIAG. COND. - HEARING LOSS^UNDIAG. COND. - HEARING LOSS
"RTN","DVB464A",71,0)
 ;;8862^UNDIAG. COND. - EAR AND OTHER SENSE ORGAN^UNDIAG. COND. - EAR AND OTHER SENSE ORGAN
"RTN","DVB464A",72,0)
 ;;8863^UNDIAG. COND. - SYSTEMIC DISEASES^UNDIAG. COND. - SYSTEMIC DISEASES
"RTN","DVB464A",73,0)
 ;;8865^UNDIAG. COND. - NOSE AND THROAT^UNDIAG. COND. - NOSE AND THROAT
"RTN","DVB464A",74,0)
 ;;8866^UNDIAG. COND. - TRACHEA AND BRONCHI^UNDIAG. COND. - TRACHEA AND BRONCHI
"RTN","DVB464A",75,0)
 ;;8867^UNDIAG. COND. - TUBERCULOSIS^UNDIAG. COND. - TUBERCULOSIS
"RTN","DVB464A",76,0)
 ;;8868^UNDIAG. COND. - LUNGS AND PLEURA^UNDIAG. COND. - LUNGS AND PLEURA
"RTN","DVB464A",77,0)
 ;;8870^UNDIAG. COND. - HEART DISEASE^UNDIAG. COND. - HEART DISEASE
"RTN","DVB464A",78,0)
 ;;8871^UNDIAG. COND. - ARTERIES AND VEINS^UNDIAG. COND. - ARTERIES AND VEINS
"RTN","DVB464A",79,0)
 ;;8872^UNDIAG. COND. - UPPER DIGESTIVE SYSTEM^UNDIAG. COND. - UPPER DIGESTIVE SYSTEM
"RTN","DVB464A",80,0)
 ;;8873^UNDIAG. COND. - LOWER DIGESTIVE SYSTEM^UNDIAG. COND. - LOWER DIGESTIVE SYSTEM
"RTN","DVB464A",81,0)
 ;;8875^UNDIAG. COND. - GENITOURINARY SYSTEM^UNDIAG. COND. - GENITOURINARY SYSTEM
"RTN","DVB464A",82,0)
 ;;8876^UNDIAG. COND. - GYNECOLOGICAL SYSTEM^UNDIAG. COND. - GYNECOLOGICAL SYSTEM
"RTN","DVB464A",83,0)
 ;;8877^UNDIAG. COND. - HEMIC AND LYMPHATIC SYSTEM^UNDIAG. COND. - HEMIC AND LYMPHATIC SYSTEM
"RTN","DVB464A",84,0)
 ;;8878^UNDIAG. COND. - SKIN^UNDIAG. COND. - SKIN
"RTN","DVB464A",85,0)
 ;;8879^UNDIAG. COND. - ENDOCRINE SYSTEM^UNDIAG. COND. - ENDOCRINE SYSTEM
"RTN","DVB464A",86,0)
 ;;8880^UNDIAG. COND. - CENTRAL NERVOUS SYSTEM^UNDIAG. COND. - CENTRAL NERVOUS SYSTEM
"RTN","DVB464A",87,0)
 ;;8881^UNDIAG. COND. - MISC NEUROLOGICAL^UNDIAG. COND. - MISC NEUROLOGICAL
"RTN","DVB464A",88,0)
 ;;8882^UNDIAG. COND. - CRANIAL NERVE PARALYSIS^UNDIAG. COND. - CRANIAL NERVE PARALYSIS
"RTN","DVB464A",89,0)
 ;;8883^UNDIAG. COND. - CRANIAL NERVE NEURITIS^UNDIAG. COND. - CRANIAL NERVE NEURITIS
"RTN","DVB464A",90,0)
 ;;8884^UNDIAG. COND. - CRANIAL NERVE NEURALGIA^UNDIAG. COND. - CRANIAL NERVE NEURALGIA
"RTN","DVB464A",91,0)
 ;;8885^UNDIAG. COND. - PERIPHERAL NERVE PARALYSIS^UNDIAG. COND. - PERIPHERAL NERVE PARALYSIS
"RTN","DVB464A",92,0)
 ;;8886^UNDIAG. COND. - PERIPHERAL NERVE NEURITIS^UNDIAG. COND. - PERIPHERAL NERVE NEURITIS
"RTN","DVB464A",93,0)
 ;;8887^UNDIAG. COND. - PERIPHERAL NERVE NEURALGIA^UNDIAG. COND. - PERIPHERAL NERVE NEURALGIA
"RTN","DVB464A",94,0)
 ;;8889^UNDIAG. COND. - EPILEPSIES^UNDIAG. COND. - EPILEPSIES
"RTN","DVB464A",95,0)
 ;;8892^UNDIAG. COND. - PSYCHOTIC DISORDERS^UNDIAG. COND. - PSYCHOTIC DISORDERS
"RTN","DVB464A",96,0)
 ;;8893^UNDIAG. COND. - ORGANIC MENTAL DISORDERS^UNDIAG. COND. - ORGANIC MENTAL DISORDERS
"RTN","DVB464A",97,0)
 ;;8894^UNDIAG. COND. - PSYCHONEUROTIC DISORDERS^UNDIAG. COND. - PSYCHONEUROTIC DISORDERS
"RTN","DVB464A",98,0)
 ;;8895^UNDIAG. COND. - PSYCHOPHYSIOLOGIC DISORDER^UNDIAG. COND. - PSYCHOPHYSIOLOGIC DISORDER
"RTN","DVB464A",99,0)
 ;;8899^UNDIAG. COND. - DENTAL AND ORAL CONDITION^UNDIAG. COND. - DENTAL AND ORAL CONDITION
"RTN","DVB464A",100,0)
 ;;9007^PSYCHOSIS^PSYCHOSIS
"RTN","DVB464A",101,0)
 ;;$EXIT
"RTN","DVB464A",102,0)
 Q
"RTN","DVB464P")
0^3^B25190131^n/a
"RTN","DVB464P",1,0)
DVB464P ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB464P",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464P",3,0)
 ;
"RTN","DVB464P",4,0)
 ;This routine will delete requested
"RTN","DVB464P",5,0)
 ;ICD code mappings from the DISABILITY CONDITION (#31) file.
"RTN","DVB464P",6,0)
 ;
"RTN","DVB464P",7,0)
 ;
"RTN","DVB464P",8,0)
 Q  ;no direct entry
"RTN","DVB464P",9,0)
 ;
"RTN","DVB464P",10,0)
 ;
"RTN","DVB464P",11,0)
ENV ; do environment check
"RTN","DVB464P",12,0)
 S XPDABORT=""
"RTN","DVB464P",13,0)
 D PROGCHK(.XPDABORT)
"RTN","DVB464P",14,0)
 I XPDABORT="" K XPDABORT
"RTN","DVB464P",15,0)
 Q
"RTN","DVB464P",16,0)
PROGCHK(XPDABORT) ; checks for necessary programmer variables
"RTN","DVB464P",17,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") D
"RTN","DVB464P",18,0)
 .D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","DVB464P",19,0)
 .D MES^XPDUTL("Installation aborted.")
"RTN","DVB464P",20,0)
 .S XPDABORT=2
"RTN","DVB464P",21,0)
 Q
"RTN","DVB464P",22,0)
 ;
"RTN","DVB464P",23,0)
POST ;Main entry point for Post-init items.
"RTN","DVB464P",24,0)
 ;
"RTN","DVB464P",25,0)
 N DVBTOT  ;count of total ICD9 codes filed
"RTN","DVB464P",26,0)
 N DVBTMP  ;Closed Root global reference for error reporting
"RTN","DVB464P",27,0)
 S DVBTMP=$NA(^TMP("DVB464PD",$J))
"RTN","DVB464P",28,0)
 K @DVBTMP
"RTN","DVB464P",29,0)
 S @DVBTMP@(0)="PATCH DVB*4*64 POST-INSTALL^"_$$NOW^XLFDT
"RTN","DVB464P",30,0)
 S DVBTOT=0
"RTN","DVB464P",31,0)
 ;
"RTN","DVB464P",32,0)
 ;call to process (#31) file updates
"RTN","DVB464P",33,0)
 D POST^DVB464PD(DVBTMP,.DVBTOT)
"RTN","DVB464P",34,0)
 ;
"RTN","DVB464P",35,0)
 S @DVBTMP@(0)=@DVBTMP@(0)_"^"_$$NOW^XLFDT_"^"_DVBTOT
"RTN","DVB464P",36,0)
 ;
"RTN","DVB464P",37,0)
 I '$D(@DVBTMP@("ERROR")) D
"RTN","DVB464P",38,0)
 . D BMES^XPDUTL("  >>> *** SUCCESS updating the DISABILITY CONDITION (#31) file.")
"RTN","DVB464P",39,0)
 . D MES^XPDUTL("          Total RELATED ICD9 CODES filed: "_DVBTOT)
"RTN","DVB464P",40,0)
 . ;
"RTN","DVB464P",41,0)
 E  D
"RTN","DVB464P",42,0)
 . D BMES^XPDUTL("  >>> *** FAILURE updating the DISABILITY CONDITION (#31) file.")
"RTN","DVB464P",43,0)
 . D BMES^XPDUTL("      Filing error's have occurred when updating the file.")
"RTN","DVB464P",44,0)
 . D MES^XPDUTL("      Resolution is necessary to maintain database integrity.")
"RTN","DVB464P",45,0)
 . D BMES^XPDUTL("  A MailMan message has been sent to the installer of this patch")
"RTN","DVB464P",46,0)
 . D MES^XPDUTL("  with a listing of the errors.")
"RTN","DVB464P",47,0)
 . D BMES^XPDUTL("  Once these errors have been resolved, please re-run")
"RTN","DVB464P",48,0)
 . D MES^XPDUTL("  the Post-Installation routine directly from programmer mode")
"RTN","DVB464P",49,0)
 . D MES^XPDUTL("  by entering the following command:")
"RTN","DVB464P",50,0)
 . D MES^XPDUTL("  ")
"RTN","DVB464P",51,0)
 . D MES^XPDUTL("  D POST^DVB4P64")
"RTN","DVB464P",52,0)
 . D MES^XPDUTL("  ")
"RTN","DVB464P",53,0)
 . D BMES^XPDUTL("  >>> I'm now creating and sending the MailMan message...")
"RTN","DVB464P",54,0)
 . ;
"RTN","DVB464P",55,0)
 . D SENDMSG(DVBTMP,.DVBTOT)
"RTN","DVB464P",56,0)
 . ;
"RTN","DVB464P",57,0)
 . D MES^XPDUTL("  >>> All done.")
"RTN","DVB464P",58,0)
 ;
"RTN","DVB464P",59,0)
 ;cleanup temp file
"RTN","DVB464P",60,0)
 K @DVBTMP
"RTN","DVB464P",61,0)
 Q
"RTN","DVB464P",62,0)
 ;
"RTN","DVB464P",63,0)
 ;
"RTN","DVB464P",64,0)
SENDMSG(DVBTMP,DVBTOT) ;send failure MailMan message to installer of patch
"RTN","DVB464P",65,0)
 ;
"RTN","DVB464P",66,0)
 N DIFROM,DVBMSG
"RTN","DVB464P",67,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,XMDUN,XMZ
"RTN","DVB464P",68,0)
 S XMSUB="DVB*4.0*64 Patch Post-Install Error Listing"
"RTN","DVB464P",69,0)
 S XMTEXT="DVBMSG("
"RTN","DVB464P",70,0)
 S XMY(DUZ)="",XMDUZ=.5
"RTN","DVB464P",71,0)
 ;S XMDUZ=.5,(XMY(DUZ),XMY(XMDUZ))=""
"RTN","DVB464P",72,0)
 S DVBMSG(1)="Patch:  DVB*4.0*64 Automated Service Connected Designation"
"RTN","DVB464P",73,0)
 S DVBMSG(2)=""
"RTN","DVB464P",74,0)
 S DVBMSG(3)="The post-installation update of the DISABILITY CONDITION (#31) file"
"RTN","DVB464P",75,0)
 S DVBMSG(4)="has FAILED to successfully complete.  Errors have occurred when"
"RTN","DVB464P",76,0)
 S DVBMSG(5)="attempting to make the changes."
"RTN","DVB464P",77,0)
 S DVBMSG(6)=""
"RTN","DVB464P",78,0)
 S DVBMSG(7)="Resolution of ALL error's is needed to maintain database integrity."
"RTN","DVB464P",79,0)
 S DVBMSG(8)=""
"RTN","DVB464P",80,0)
 S DVBMSG(9)="Once these filing error's have been resolved, please re-run"
"RTN","DVB464P",81,0)
 S DVBMSG(10)="the Post-Installation routine directly from programmer mode"
"RTN","DVB464P",82,0)
 S DVBMSG(11)="by entering the following command:"
"RTN","DVB464P",83,0)
 S DVBMSG(12)=""
"RTN","DVB464P",84,0)
 S DVBMSG(13)="D POST^DVB4P64"
"RTN","DVB464P",85,0)
 S DVBMSG(14)=""
"RTN","DVB464P",86,0)
 S DVBMSG(15)="The new update run time should take less than 5 minutes to complete."
"RTN","DVB464P",87,0)
 S DVBMSG(16)=""
"RTN","DVB464P",88,0)
 S DVBMSG(17)=">>> Please review and resolve the following error's:"
"RTN","DVB464P",89,0)
 S DVBMSG(18)=""
"RTN","DVB464P",90,0)
 S DVBMSG(19)="*** DISABILITY CONDITION FILE (#31) FILING ERRORS ***"
"RTN","DVB464P",91,0)
 S DVBMSG(20)="-----------------------------------------------------"
"RTN","DVB464P",92,0)
 ;
"RTN","DVB464P",93,0)
 ;loop and list error's
"RTN","DVB464P",94,0)
 N DVBICD,DVBHDR,DVBHDR1,DVBIEN,DVBLN,DVBMSS,DVBVBA,DVBDESC
"RTN","DVB464P",95,0)
 S DVBHDR="VBA DX CODE: ",DVBHDR1="    ICD DIAGNOSIS CODE: "
"RTN","DVB464P",96,0)
 S DVBLN=21,DVBVBA=0
"RTN","DVB464P",97,0)
 F  S DVBVBA=$O(@DVBTMP@("ERROR",DVBVBA)) Q:'DVBVBA  D
"RTN","DVB464P",98,0)
 . I $D(@DVBTMP@("ERROR",DVBVBA,0)) D  Q
"RTN","DVB464P",99,0)
 . . S DVBMSS=DVBHDR_DVBVBA_" - "_$G(@DVBTMP@("ERROR",DVBVBA,0))
"RTN","DVB464P",100,0)
 . . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464P",101,0)
 . K DVBDESC D FIND^DIC(31,"","","X",DVBVBA,,"C","","","DVBDESC")
"RTN","DVB464P",102,0)
 . S DVBMSS=DVBHDR_DVBVBA_" - "_$E($G(DVBDESC("DILIST",1,1)),1,50)
"RTN","DVB464P",103,0)
 . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464P",104,0)
 . S DVBIEN=0
"RTN","DVB464P",105,0)
 . F  S DVBIEN=$O(@DVBTMP@("ERROR",DVBVBA,DVBIEN)) Q:'DVBIEN  D
"RTN","DVB464P",106,0)
 . . S DVBICD=""
"RTN","DVB464P",107,0)
 . . F  S DVBICD=$O(@DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)) Q:DVBICD=""  D
"RTN","DVB464P",108,0)
 . . . S DVBMSS=DVBHDR1_DVBICD_" - "_$G(@DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD))
"RTN","DVB464P",109,0)
 . . . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464P",110,0)
 S DVBMSG(DVBLN)="",DVBLN=DVBLN+1
"RTN","DVB464P",111,0)
 S DVBMSG(DVBLN)="<End of Report>"
"RTN","DVB464P",112,0)
 ;
"RTN","DVB464P",113,0)
 D ^XMD
"RTN","DVB464P",114,0)
 Q
"RTN","DVB464P",115,0)
 ;
"RTN","DVB464P1")
0^4^B26531841^n/a
"RTN","DVB464P1",1,0)
DVB464P1 ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB464P1",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464P1",3,0)
 ;
"RTN","DVB464P1",4,0)
 ;This routine is the main post-install driver that will update the
"RTN","DVB464P1",5,0)
 ;DISABILITY CONDITION (#31) file with the ICD DIAGNOSIS codes requested.
"RTN","DVB464P1",6,0)
 ;
"RTN","DVB464P1",7,0)
 Q  ;no direct entry
"RTN","DVB464P1",8,0)
 ;
"RTN","DVB464P1",9,0)
POST(DVBTMP,DVBTOT) ;post-install driver for updating the (#31) file
"RTN","DVB464P1",10,0)
 ;This procedure will call a series of routines that contain the data
"RTN","DVB464P1",11,0)
 ;element values that will be used to update the VBA-ICD9 mapping.
"RTN","DVB464P1",12,0)
 ;
"RTN","DVB464P1",13,0)
 ;  Input:
"RTN","DVB464P1",14,0)
 ;    DVBTMP - Closed Root global reference for error reporting
"RTN","DVB464P1",15,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464P1",16,0)
 ;
"RTN","DVB464P1",17,0)
 ;  Output:
"RTN","DVB464P1",18,0)
 ;    DVBTMP - Temp file of error messages (if any)
"RTN","DVB464P1",19,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464P1",20,0)
 ;
"RTN","DVB464P1",21,0)
 N DVBRTN,DVBCNT
"RTN","DVB464P1",22,0)
 S DVBTMP=$G(DVBTMP)
"RTN","DVB464P1",23,0)
 S DVBTOT=$G(DVBTOT) I DVBTOT']"" S DVBTOT=0
"RTN","DVB464P1",24,0)
 I DVBTMP']"" S DVBTMP=$NA(^TMP("DVB464P1",$J)) K @DVBTMP
"RTN","DVB464P1",25,0)
 ;
"RTN","DVB464P1",26,0)
 ;loop each routine
"RTN","DVB464P1",27,0)
 F DVBCNT=1:1:2 S DVBRTN="^DVB464P"_DVBCNT D
"RTN","DVB464P1",28,0)
 . Q:($T(@DVBRTN)="")
"RTN","DVB464P1",29,0)
 . D BLDXRF(DVBRTN,DVBTMP,.DVBTOT)
"RTN","DVB464P1",30,0)
 Q
"RTN","DVB464P1",31,0)
 ;
"RTN","DVB464P1",32,0)
 ;
"RTN","DVB464P1",33,0)
BLDXRF(DVBRTN,DVBTMP,DVBTOT) ;call each routine to file VBA/ICD9 codes
"RTN","DVB464P1",34,0)
 ;
"RTN","DVB464P1",35,0)
 ;  Input:
"RTN","DVB464P1",36,0)
 ;    DVBRTN - Post Install routine to process VBA/ICD9 codes
"RTN","DVB464P1",37,0)
 ;    DVBTMP - Closed Root global reference for error reporting
"RTN","DVB464P1",38,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464P1",39,0)
 ;
"RTN","DVB464P1",40,0)
 ;  Output:
"RTN","DVB464P1",41,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464P1",42,0)
 ;
"RTN","DVB464P1",43,0)
 N DVBLINE  ;$TEXT code line
"RTN","DVB464P1",44,0)
 N DVBLN    ;line counter incrimenter
"RTN","DVB464P1",45,0)
 N DVBTAG   ;line tag of routine to process
"RTN","DVB464P1",46,0)
 N DVBVBA   ;VBA DX code (external value)
"RTN","DVB464P1",47,0)
 N DVBVB    ;DX CODE
"RTN","DVB464P1",48,0)
 ;
"RTN","DVB464P1",49,0)
 S (DVBLN,DVBVBA)=0
"RTN","DVB464P1",50,0)
 ;
"RTN","DVB464P1",51,0)
 F DVBLN=1:1 S DVBTAG="TEXT+"_DVBLN_DVBRTN,DVBLINE=$T(@DVBTAG) S DVBVB=$P(DVBLINE,";",3,999) Q:DVBLINE["EXIT"  D
"RTN","DVB464P1",52,0)
 .;get VBA DX CODE var setup
"RTN","DVB464P1",53,0)
 .S DVBVBA=$P(DVBVB,"^",1)
"RTN","DVB464P1",54,0)
 .;S DVBVBA=$P(DVBVB,"^",1),DVBLN=DVBLN+1
"RTN","DVB464P1",55,0)
 .; - if code not found setup ^TMP() file error record
"RTN","DVB464P1",56,0)
 .I '$O(^DIC(31,"C",DVBVBA,"")) D
"RTN","DVB464P1",57,0)
 ..S @DVBTMP@("ERROR",DVBVBA)="DX CODE not found in (#31) file"
"RTN","DVB464P1",58,0)
 ..S DVBVBA=0
"RTN","DVB464P1",59,0)
 ..;
"RTN","DVB464P1",60,0)
 .;quit back to loop if no VBA code ien found (just in case)
"RTN","DVB464P1",61,0)
 .I 'DVBVBA Q
"RTN","DVB464P1",62,0)
 .;
"RTN","DVB464P1",63,0)
 .D BLDVBA(DVBVBA,DVBLINE,.DVBTOT)
"RTN","DVB464P1",64,0)
 Q
"RTN","DVB464P1",65,0)
 ;
"RTN","DVB464P1",66,0)
 ;
"RTN","DVB464P1",67,0)
BLDVBA(DVBVBA,DVBLINE,DVBTOT) ;extract ICD9 codes from text line
"RTN","DVB464P1",68,0)
 ;
"RTN","DVB464P1",69,0)
 ;  Input:
"RTN","DVB464P1",70,0)
 ;    DVBVBA - VBA DX code (external value)
"RTN","DVB464P1",71,0)
 ;   DVBLINE - $TEXT code line of ICD9's
"RTN","DVB464P1",72,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464P1",73,0)
 ;
"RTN","DVB464P1",74,0)
 ;  Output:
"RTN","DVB464P1",75,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464P1",76,0)
 ;
"RTN","DVB464P1",77,0)
 Q:'$G(DVBVBA)
"RTN","DVB464P1",78,0)
 Q:$G(DVBLINE)'[";"
"RTN","DVB464P1",79,0)
 ;
"RTN","DVB464P1",80,0)
 N DVBDATA,DVBI,DVBICD,DVBICDEN,DVBIEN,DVBMATCH,DVBX
"RTN","DVB464P1",81,0)
 ;
"RTN","DVB464P1",82,0)
 ;loop in case there might be multiple VBA ien's setup
"RTN","DVB464P1",83,0)
 I DVBVBA'="" S DVBIEN=0
"RTN","DVB464P1",84,0)
 F  S DVBIEN=$O(^DIC(31,"C",DVBVBA,DVBIEN)) Q:DVBIEN=""  D
"RTN","DVB464P1",85,0)
 . S DVBX=$P(DVBVB,"^",1)
"RTN","DVB464P1",86,0)
 . S (DVBI,DVBICD)=0
"RTN","DVB464P1",87,0)
 . F DVBI=1:1 S DVBDATA=$P(DVBX,"^",DVBI) Q:DVBDATA=""  D
"RTN","DVB464P1",88,0)
 . . Q:DVBDATA[";"
"RTN","DVB464P1",89,0)
 . . S DVBICD=$P(DVBVB,"^",2),DVBMATCH=+$P(DVBVB,"^",3)
"RTN","DVB464P1",90,0)
 . . ; - get ICD9 pointer from ICD DIAGNOSIS (#80) file
"RTN","DVB464P1",91,0)
 . . S DVBICDEN=+$$ICDDX^ICDCODE(DVBICD,DT)
"RTN","DVB464P1",92,0)
 . . I 'DVBICDEN!(DVBICDEN<0)!(DVBICD=DVBICDEN) D  Q
"RTN","DVB464P1",93,0)
 . . . S @DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)="not found in ICD DIAGNOSIS (#80) file"
"RTN","DVB464P1",94,0)
 . . ;
"RTN","DVB464P1",95,0)
 . . Q:$D(^DIC(31,DVBIEN,"ICD","B",DVBICDEN))  ;ICD9 already setup
"RTN","DVB464P1",96,0)
 . . ;
"RTN","DVB464P1",97,0)
 . . ;call to add multiple field (#20) RELATED ICD9 CODES
"RTN","DVB464P1",98,0)
 . . I '$$FILEICD(DVBIEN,DVBICDEN,DVBMATCH) D  Q
"RTN","DVB464P1",99,0)
 . . . S @DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)="error filing to (#31) file"
"RTN","DVB464P1",100,0)
 . . S DVBTOT=DVBTOT+1
"RTN","DVB464P1",101,0)
 Q
"RTN","DVB464P1",102,0)
 ;
"RTN","DVB464P1",103,0)
 ;
"RTN","DVB464P1",104,0)
FILEICD(DVBIEN,DVBICDEN,DVBMATCH) ;file code mapping to (#31) file
"RTN","DVB464P1",105,0)
 ;
"RTN","DVB464P1",106,0)
 ;  Input:
"RTN","DVB464P1",107,0)
 ;    DVBIEN    - ien of VBA DX CODE in file (#31)
"RTN","DVB464P1",108,0)
 ;    DVBICDEN  - ien of ICD9 code in file (#80)
"RTN","DVB464P1",109,0)
 ;    DVBMATCH  - match code (1 or 0)
"RTN","DVB464P1",110,0)
 ;
"RTN","DVB464P1",111,0)
 ;  Output:
"RTN","DVB464P1",112,0)
 ;    Function result - 1 on success, 0 on failure
"RTN","DVB464P1",113,0)
 ;
"RTN","DVB464P1",114,0)
 ; Fields :
"RTN","DVB464P1",115,0)
 ; (#20) RELATED ICD9 CODES - ICD;0 POINTER Multiple (#31.01)
"RTN","DVB464P1",116,0)
 ;   (#31.01) -- RELATED ICD9 CODES SUB-FILE
"RTN","DVB464P1",117,0)
 ;    Field(s):
"RTN","DVB464P1",118,0)
 ;    .01 RELATED ICD9 CODES - 0;1 POINTER TO ICD DIAGNOSIS FILE (#80)
"RTN","DVB464P1",119,0)
 ;    .02 ICD9 MATCH - 0;2 SET ('0' FOR PARTIAL MATCH; '1' FOR MATCH;)
"RTN","DVB464P1",120,0)
 ;
"RTN","DVB464P1",121,0)
 N DVBERR,DVBFDA,DVBRSLT
"RTN","DVB464P1",122,0)
 S DVBRSLT=0
"RTN","DVB464P1",123,0)
 ;
"RTN","DVB464P1",124,0)
 I $G(DVBIEN),$G(DVBICDEN),$G(DVBMATCH)]"" D
"RTN","DVB464P1",125,0)
 .S DA(1)=DVBIEN
"RTN","DVB464P1",126,0)
 .S DA=$O(^DIC(31,DA(1),"ICD","B",DVBICDEN,0))
"RTN","DVB464P1",127,0)
 .I DA'>0 D  Q:DA'>0
"RTN","DVB464P1",128,0)
 ..W !!,"ADDING TO DISABILITY CODE "_DVBVBA_""
"RTN","DVB464P1",129,0)
 ..W !!,"ADDING ICD CODE "_DVBICD_" TO MAPPING"
"RTN","DVB464P1",130,0)
 ..S DIC="^DIC(31,"_DA(1)_",""ICD"",",DIC(0)="L",DIC("P")="31.01PA",DLAYGO=31.01
"RTN","DVB464P1",131,0)
 ..S X=DVBICDEN
"RTN","DVB464P1",132,0)
 ..K DD,DO D FILE^DICN
"RTN","DVB464P1",133,0)
 ..K DIC,DLAYGO
"RTN","DVB464P1",134,0)
 ..S DA=+Y
"RTN","DVB464P1",135,0)
 .;
"RTN","DVB464P1",136,0)
 .S DIE="^DIC(31,"_DA(1)_",""ICD"","
"RTN","DVB464P1",137,0)
 .S DR=".02///^S X=DVBMATCH"
"RTN","DVB464P1",138,0)
 .D ^DIE
"RTN","DVB464P1",139,0)
 .S:'$D(DVBERR) DVBRSLT=1
"RTN","DVB464P1",140,0)
 Q DVBRSLT
"RTN","DVB464P1",141,0)
 ;
"RTN","DVB464P1",142,0)
 ; Fields :
"RTN","DVB464P1",143,0)
 ; (#20) RELATED ICD9 CODES - ICD;0 POINTER Multiple (#31.01)
"RTN","DVB464P1",144,0)
 ;   (#31.01) -- RELATED ICD9 CODES SUB-FILE
"RTN","DVB464P1",145,0)
 ;    Field(s):
"RTN","DVB464P1",146,0)
 ;    .01 RELATED ICD9 CODES - 0;1 POINTER TO ICD DIAGNOSIS FILE (#80)
"RTN","DVB464P1",147,0)
 ;    .02 ICD9 MATCH - 0;2 SET ('0' FOR PARTIAL MATCH; '1' FOR MATCH;)
"RTN","DVB464P1",148,0)
 ;
"RTN","DVB464P1",149,0)
 ;The following TEXT lines are a combination of a single 4 digit VBA
"RTN","DVB464P1",150,0)
 ;rated disabilities code and related ICD9 DIAGNOSIS code to be 
"RTN","DVB464P1",151,0)
 ;mapped together.  Each IDC9 code also has a (1/0)
"RTN","DVB464P1",152,0)
 ;match value that will be filed with it.
"RTN","DVB464P1",153,0)
 ;
"RTN","DVB464P1",154,0)
 ;DISABILITY CODE^ICDCODE^MATCH - FULL(1) OR PARTIAL(0)
"RTN","DVB464P1",155,0)
TEXT ;
"RTN","DVB464P1",156,0)
 ;;6017^076.0^1
"RTN","DVB464P1",157,0)
 ;;6017^076.1^1
"RTN","DVB464P1",158,0)
 ;;6017^076.9^1
"RTN","DVB464P1",159,0)
 ;;5012^209.73^0
"RTN","DVB464P1",160,0)
 ;;5017^274.00^1
"RTN","DVB464P1",161,0)
 ;;5017^274.01^1
"RTN","DVB464P1",162,0)
 ;;5017^274.02^1
"RTN","DVB464P1",163,0)
 ;;5017^274.03^1
"RTN","DVB464P1",164,0)
 ;;6000^371.70^0
"RTN","DVB464P1",165,0)
 ;;6000^362.57^0
"RTN","DVB464P1",166,0)
 ;;6001^370.00^0
"RTN","DVB464P1",167,0)
 ;;6001^370.01^0
"RTN","DVB464P1",168,0)
 ;;6001^370.02^0
"RTN","DVB464P1",169,0)
 ;;6001^370.03^0
"RTN","DVB464P1",170,0)
 ;;6001^370.04^0
"RTN","DVB464P1",171,0)
 ;;6001^370.05^0
"RTN","DVB464P1",172,0)
 ;;6001^370.06^0
"RTN","DVB464P1",173,0)
 ;;6001^370.07^0
"RTN","DVB464P1",174,0)
 ;;6001^370.55^0
"RTN","DVB464P1",175,0)
 ;;6001^370.60^0
"RTN","DVB464P1",176,0)
 ;;6001^370.61^0
"RTN","DVB464P1",177,0)
 ;;6001^370.62^0
"RTN","DVB464P1",178,0)
 ;;6001^370.63^0
"RTN","DVB464P1",179,0)
 ;;6001^370.64^0
"RTN","DVB464P1",180,0)
 ;;6001^371.00^0
"RTN","DVB464P1",181,0)
 ;;6001^371.01^0
"RTN","DVB464P1",182,0)
 ;;6001^371.02^0
"RTN","DVB464P1",183,0)
 ;;6001^371.03^0
"RTN","DVB464P1",184,0)
 ;;6001^371.04^0
"RTN","DVB464P1",185,0)
 ;;6001^371.05^0
"RTN","DVB464P1",186,0)
 ;;6001^371.10^0
"RTN","DVB464P1",187,0)
 ;;6001^371.11^0
"RTN","DVB464P1",188,0)
 ;;6001^371.12^0
"RTN","DVB464P1",189,0)
 ;;6001^371.13^0
"RTN","DVB464P1",190,0)
 ;;6001^371.14^0
"RTN","DVB464P1",191,0)
 ;;6001^371.15^0
"RTN","DVB464P1",192,0)
 ;;6001^371.16^0
"RTN","DVB464P1",193,0)
 ;;6001^371.20^0
"RTN","DVB464P1",194,0)
 ;;6001^371.21^0
"RTN","DVB464P1",195,0)
 ;;6001^371.22^0
"RTN","DVB464P1",196,0)
 ;;6001^371.23^0
"RTN","DVB464P1",197,0)
 ;;6001^371.24^0
"RTN","DVB464P1",198,0)
 ;;6001^371.30^0
"RTN","DVB464P1",199,0)
 ;;6001^371.31^0
"RTN","DVB464P1",200,0)
 ;;6001^371.32^0
"RTN","DVB464P1",201,0)
 ;;6001^371.33^0
"RTN","DVB464P1",202,0)
 ;;6001^371.40^0
"RTN","DVB464P1",203,0)
 ;;6001^371.41^0
"RTN","DVB464P1",204,0)
 ;;6001^371.42^0
"RTN","DVB464P1",205,0)
 ;;6001^371.43^0
"RTN","DVB464P1",206,0)
 ;;6001^371.45^0
"RTN","DVB464P1",207,0)
 ;;6001^371.46^0
"RTN","DVB464P1",208,0)
 ;;6001^371.48^0
"RTN","DVB464P1",209,0)
 ;;6001^371.70^0
"RTN","DVB464P1",210,0)
 ;;6001^371.71^0
"RTN","DVB464P1",211,0)
 ;;6001^371.72^0
"RTN","DVB464P1",212,0)
 ;;6001^371.73^0
"RTN","DVB464P1",213,0)
 ;;6001^371.81^0
"RTN","DVB464P1",214,0)
 ;;6001^371.82^0
"RTN","DVB464P1",215,0)
 ;;EXIT
"RTN","DVB464P2")
0^5^B45953379^n/a
"RTN","DVB464P2",1,0)
DVB464P2 ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB464P2",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464P2",3,0)
 ;
"RTN","DVB464P2",4,0)
 ;This routine will continue the update of the
"RTN","DVB464P2",5,0)
 ;DISABILITY CONDITION (#31) file with the mapping of Rated
"RTN","DVB464P2",6,0)
 ;Disabilities (VA) VBA DX CODES to specific ICD DIAGNOSIS codes with 
"RTN","DVB464P2",7,0)
 ;2009-2010 DX mappings.
"RTN","DVB464P2",8,0)
 ;
"RTN","DVB464P2",9,0)
 ;  ;no direct entry
"RTN","DVB464P2",10,0)
 ;
"RTN","DVB464P2",11,0)
 ; ; Fields :
"RTN","DVB464P2",12,0)
 ; (#20) RELATED ICD9 CODES - ICD;0 POINTER Multiple (#31.01)
"RTN","DVB464P2",13,0)
 ;   (#31.01) -- RELATED ICD9 CODES SUB-FILE
"RTN","DVB464P2",14,0)
 ;    Field(s):
"RTN","DVB464P2",15,0)
 ;    .01 RELATED ICD9 CODES - 0;1 POINTER TO ICD DIAGNOSIS FILE (#80)
"RTN","DVB464P2",16,0)
 ;    .02 ICD9 MATCH - 0;2 SET ('0' FOR PARTIAL MATCH; '1' FOR MATCH;)
"RTN","DVB464P2",17,0)
 ;
"RTN","DVB464P2",18,0)
 ;The following TEXT lines are a combination of a single 4 digit VBA
"RTN","DVB464P2",19,0)
 ;rated disabilities code and related ICD9 DIAGNOSIS code to be 
"RTN","DVB464P2",20,0)
 ;mapped together.  Each IDC9 code also has a (1/0)
"RTN","DVB464P2",21,0)
 ;match value that will be filed with it.
"RTN","DVB464P2",22,0)
 ;
"RTN","DVB464P2",23,0)
 ;DISABILITY CODE^ICDCODE^MATCH - FULL(1) OR PARTIAL(0)
"RTN","DVB464P2",24,0)
TEXT ;
"RTN","DVB464P2",25,0)
 ;;6006^362.10^0
"RTN","DVB464P2",26,0)
 ;;6006^362.11^0
"RTN","DVB464P2",27,0)
 ;;6006^362.13^0
"RTN","DVB464P2",28,0)
 ;;6006^362.14^0
"RTN","DVB464P2",29,0)
 ;;6006^362.15^0
"RTN","DVB464P2",30,0)
 ;;6006^362.16^0
"RTN","DVB464P2",31,0)
 ;;6006^362.17^0
"RTN","DVB464P2",32,0)
 ;;6006^362.18^0
"RTN","DVB464P2",33,0)
 ;;6006^362.20^0
"RTN","DVB464P2",34,0)
 ;;6006^362.21^0
"RTN","DVB464P2",35,0)
 ;;6006^362.22^0
"RTN","DVB464P2",36,0)
 ;;6006^362.23^0
"RTN","DVB464P2",37,0)
 ;;6006^362.24^0
"RTN","DVB464P2",38,0)
 ;;6006^362.25^0
"RTN","DVB464P2",39,0)
 ;;6006^362.26^0
"RTN","DVB464P2",40,0)
 ;;6006^362.27^0
"RTN","DVB464P2",41,0)
 ;;6006^362.30^0
"RTN","DVB464P2",42,0)
 ;;6006^362.31^0
"RTN","DVB464P2",43,0)
 ;;6006^362.32^0
"RTN","DVB464P2",44,0)
 ;;6006^362.33^0
"RTN","DVB464P2",45,0)
 ;;6006^362.34^0
"RTN","DVB464P2",46,0)
 ;;6006^362.35^0
"RTN","DVB464P2",47,0)
 ;;6006^362.36^0
"RTN","DVB464P2",48,0)
 ;;6006^362.37^0
"RTN","DVB464P2",49,0)
 ;;6006^362.50^0
"RTN","DVB464P2",50,0)
 ;;6006^362.51^0
"RTN","DVB464P2",51,0)
 ;;6006^362.52^0
"RTN","DVB464P2",52,0)
 ;;6006^362.53^0
"RTN","DVB464P2",53,0)
 ;;6006^362.54^0
"RTN","DVB464P2",54,0)
 ;;6006^362.55^0
"RTN","DVB464P2",55,0)
 ;;6006^362.56^0
"RTN","DVB464P2",56,0)
 ;;6006^362.60^0
"RTN","DVB464P2",57,0)
 ;;6006^362.61^0
"RTN","DVB464P2",58,0)
 ;;6006^362.62^0
"RTN","DVB464P2",59,0)
 ;;6006^362.63^0
"RTN","DVB464P2",60,0)
 ;;6006^362.64^0
"RTN","DVB464P2",61,0)
 ;;6006^362.65^0
"RTN","DVB464P2",62,0)
 ;;6006^362.66^0
"RTN","DVB464P2",63,0)
 ;;6006^362.81^0
"RTN","DVB464P2",64,0)
 ;;6006^362.82^0
"RTN","DVB464P2",65,0)
 ;;6006^362.83^0
"RTN","DVB464P2",66,0)
 ;;6006^362.84^0
"RTN","DVB464P2",67,0)
 ;;6006^362.81^0
"RTN","DVB464P2",68,0)
 ;;6006^363.31^0
"RTN","DVB464P2",69,0)
 ;;6008^361.10^0
"RTN","DVB464P2",70,0)
 ;;6008^361.11^0
"RTN","DVB464P2",71,0)
 ;;6008^361.12^0
"RTN","DVB464P2",72,0)
 ;;6008^361.13^0
"RTN","DVB464P2",73,0)
 ;;6008^361.14^0
"RTN","DVB464P2",74,0)
 ;;6008^362.40^0
"RTN","DVB464P2",75,0)
 ;;6008^362.41^0
"RTN","DVB464P2",76,0)
 ;;6008^362.42^0
"RTN","DVB464P2",77,0)
 ;;6008^362.43^0
"RTN","DVB464P2",78,0)
 ;;6009^371.30^0
"RTN","DVB464P2",79,0)
 ;;6009^371.31^0
"RTN","DVB464P2",80,0)
 ;;6009^371.32^0
"RTN","DVB464P2",81,0)
 ;;6009^371.33^0
"RTN","DVB464P2",82,0)
 ;;6009^371.72^0
"RTN","DVB464P2",83,0)
 ;;6009^371.82^0
"RTN","DVB464P2",84,0)
 ;;6009^371.20^0
"RTN","DVB464P2",85,0)
 ;;6009^371.21^0
"RTN","DVB464P2",86,0)
 ;;6009^371.22^0
"RTN","DVB464P2",87,0)
 ;;6009^371.23^0
"RTN","DVB464P2",88,0)
 ;;6009^371.24^0
"RTN","DVB464P2",89,0)
 ;;6011^362.56^0
"RTN","DVB464P2",90,0)
 ;;6012^364.82^0
"RTN","DVB464P2",91,0)
 ;;6013^365.62^0
"RTN","DVB464P2",92,0)
 ;;6013^365.63^0
"RTN","DVB464P2",93,0)
 ;;6013^365.65^0
"RTN","DVB464P2",94,0)
 ;;6013^365.81^0
"RTN","DVB464P2",95,0)
 ;;6017^372.34^0
"RTN","DVB464P2",96,0)
 ;;6025^375.30^0
"RTN","DVB464P2",97,0)
 ;;6025^375.31^0
"RTN","DVB464P2",98,0)
 ;;6025^375.32^0
"RTN","DVB464P2",99,0)
 ;;6025^375.33^0
"RTN","DVB464P2",100,0)
 ;;6025^375.41^0
"RTN","DVB464P2",101,0)
 ;;6025^375.42^0
"RTN","DVB464P2",102,0)
 ;;6025^375.43^0
"RTN","DVB464P2",103,0)
 ;;6025^375.51^0
"RTN","DVB464P2",104,0)
 ;;6025^375.52^0
"RTN","DVB464P2",105,0)
 ;;6025^375.53^0
"RTN","DVB464P2",106,0)
 ;;6025^375.54^0
"RTN","DVB464P2",107,0)
 ;;6025^375.55^0
"RTN","DVB464P2",108,0)
 ;;6025^375.56^0
"RTN","DVB464P2",109,0)
 ;;6025^375.57^0
"RTN","DVB464P2",110,0)
 ;;6025^375.61^0
"RTN","DVB464P2",111,0)
 ;;6025^375.81^0
"RTN","DVB464P2",112,0)
 ;;6026^362.85^0
"RTN","DVB464P2",113,0)
 ;;6027^366.10^0
"RTN","DVB464P2",114,0)
 ;;6027^366.11^0
"RTN","DVB464P2",115,0)
 ;;6027^366.12^0
"RTN","DVB464P2",116,0)
 ;;6027^366.13^0
"RTN","DVB464P2",117,0)
 ;;6027^366.14^0
"RTN","DVB464P2",118,0)
 ;;6027^366.15^0
"RTN","DVB464P2",119,0)
 ;;6027^366.16^0
"RTN","DVB464P2",120,0)
 ;;6027^366.17^0
"RTN","DVB464P2",121,0)
 ;;6027^366.18^0
"RTN","DVB464P2",122,0)
 ;;6027^366.19^0
"RTN","DVB464P2",123,0)
 ;;6027^366.30^0
"RTN","DVB464P2",124,0)
 ;;6027^366.31^0
"RTN","DVB464P2",125,0)
 ;;6027^366.32^0
"RTN","DVB464P2",126,0)
 ;;6027^366.33^0
"RTN","DVB464P2",127,0)
 ;;6027^366.34^0
"RTN","DVB464P2",128,0)
 ;;6027^366.41^0
"RTN","DVB464P2",129,0)
 ;;6027^366.42^0
"RTN","DVB464P2",130,0)
 ;;6027^366.43^0
"RTN","DVB464P2",131,0)
 ;;6027^366.44^0
"RTN","DVB464P2",132,0)
 ;;6027^366.50^0
"RTN","DVB464P2",133,0)
 ;;6027^366.51^0
"RTN","DVB464P2",134,0)
 ;;6027^366.52^0
"RTN","DVB464P2",135,0)
 ;;6027^366.53^0
"RTN","DVB464P2",136,0)
 ;;6027^366.8^0
"RTN","DVB464P2",137,0)
 ;;6027^366.9^0
"RTN","DVB464P2",138,0)
 ;;6035^371.60^0
"RTN","DVB464P2",139,0)
 ;;6035^371.61^0
"RTN","DVB464P2",140,0)
 ;;6035^371.62^0
"RTN","DVB464P2",141,0)
 ;;6036^V42.5^1
"RTN","DVB464P2",142,0)
 ;;6036^996.51^1
"RTN","DVB464P2",143,0)
 ;;6036^V42.5^1
"RTN","DVB464P2",144,0)
 ;;6036^996.51^1
"RTN","DVB464P2",145,0)
 ;;6037^372.51^1
"RTN","DVB464P2",146,0)
 ;;6037^372.51^1
"RTN","DVB464P2",147,0)
 ;;6066^369.22^1
"RTN","DVB464P2",148,0)
 ;;6066^369.24^1
"RTN","DVB464P2",149,0)
 ;;6066^369.72^1
"RTN","DVB464P2",150,0)
 ;;6066^369.25^1
"RTN","DVB464P2",151,0)
 ;;6066^369.75^1
"RTN","DVB464P2",152,0)
 ;;6320^136.21^0
"RTN","DVB464P2",153,0)
 ;;6320^136.29^0
"RTN","DVB464P2",154,0)
 ;;6516^784.42^0
"RTN","DVB464P2",155,0)
 ;;6817^416.2^1
"RTN","DVB464P2",156,0)
 ;;6819^209.21^0
"RTN","DVB464P2",157,0)
 ;;6819^511.81^0
"RTN","DVB464P2",158,0)
 ;;6820^209.61^0
"RTN","DVB464P2",159,0)
 ;;6845^511.89^1
"RTN","DVB464P2",160,0)
 ;;7005^414.3^1
"RTN","DVB464P2",161,0)
 ;;7343^209.00^0
"RTN","DVB464P2",162,0)
 ;;7343^209.01^0
"RTN","DVB464P2",163,0)
 ;;7343^209.02^0
"RTN","DVB464P2",164,0)
 ;;7343^209.03^0
"RTN","DVB464P2",165,0)
 ;;7343^209.10^0
"RTN","DVB464P2",166,0)
 ;;7343^209.11^0
"RTN","DVB464P2",167,0)
 ;;7343^209.12^0
"RTN","DVB464P2",168,0)
 ;;7343^209.13^0
"RTN","DVB464P2",169,0)
 ;;7343^209.14^0
"RTN","DVB464P2",170,0)
 ;;7343^209.15^0
"RTN","DVB464P2",171,0)
 ;;7343^209.16^0
"RTN","DVB464P2",172,0)
 ;;7343^209.17^0
"RTN","DVB464P2",173,0)
 ;;7343^209.23^0
"RTN","DVB464P2",174,0)
 ;;7343^209.72^0
"RTN","DVB464P2",175,0)
 ;;7344^209.63^0
"RTN","DVB464P2",176,0)
 ;;7344^209.40^0
"RTN","DVB464P2",177,0)
 ;;7344^209.41^0
"RTN","DVB464P2",178,0)
 ;;7344^209.42^0
"RTN","DVB464P2",179,0)
 ;;7344^209.43^0
"RTN","DVB464P2",180,0)
 ;;7344^209.50^0
"RTN","DVB464P2",181,0)
 ;;7344^209.51^0
"RTN","DVB464P2",182,0)
 ;;7344^209.52^0
"RTN","DVB464P2",183,0)
 ;;7344^209.53^0
"RTN","DVB464P2",184,0)
 ;;7344^209.54^0
"RTN","DVB464P2",185,0)
 ;;7344^209.55^0
"RTN","DVB464P2",186,0)
 ;;7344^209.56^0
"RTN","DVB464P2",187,0)
 ;;7344^209.57^0
"RTN","DVB464P2",188,0)
 ;;7345^571.42^1
"RTN","DVB464P2",189,0)
 ;;7522^607.84^0
"RTN","DVB464P2",190,0)
 ;;7528^209.24^0
"RTN","DVB464P2",191,0)
 ;;7529^209.64^0
"RTN","DVB464P2",192,0)
 ;;7610^625.70^0
"RTN","DVB464P2",193,0)
 ;;7610^625.71^0
"RTN","DVB464P2",194,0)
 ;;7610^625.79^0
"RTN","DVB464P2",195,0)
 ;;7628^621.34^0
"RTN","DVB464P2",196,0)
 ;;7628^621.35^0
"RTN","DVB464P2",197,0)
 ;;7700^285.3^0
"RTN","DVB464P2",198,0)
 ;;7703^204.02^1
"RTN","DVB464P2",199,0)
 ;;7703^204.12^1
"RTN","DVB464P2",200,0)
 ;;7703^204.22^1
"RTN","DVB464P2",201,0)
 ;;7703^204.82^1
"RTN","DVB464P2",202,0)
 ;;7703^204.92^1
"RTN","DVB464P2",203,0)
 ;;7703^205.02^1
"RTN","DVB464P2",204,0)
 ;;7703^205.12^1
"RTN","DVB464P2",205,0)
 ;;7703^205.22^1
"RTN","DVB464P2",206,0)
 ;;7703^205.82^1
"RTN","DVB464P2",207,0)
 ;;7703^205.92^1
"RTN","DVB464P2",208,0)
 ;;7703^206.02^1
"RTN","DVB464P2",209,0)
 ;;7703^206.12^1
"RTN","DVB464P2",210,0)
 ;;7703^206.22^1
"RTN","DVB464P2",211,0)
 ;;7703^206.82^1
"RTN","DVB464P2",212,0)
 ;;7703^206.92^1
"RTN","DVB464P2",213,0)
 ;;7703^207.02^1
"RTN","DVB464P2",214,0)
 ;;7703^207.12^1
"RTN","DVB464P2",215,0)
 ;;7703^207.22^1
"RTN","DVB464P2",216,0)
 ;;7703^207.82^1
"RTN","DVB464P2",217,0)
 ;;7703^208.02^1
"RTN","DVB464P2",218,0)
 ;;7703^208.12^1
"RTN","DVB464P2",219,0)
 ;;7703^208.22^1
"RTN","DVB464P2",220,0)
 ;;7703^208.82^1
"RTN","DVB464P2",221,0)
 ;;7703^208.92^1
"RTN","DVB464P2",222,0)
 ;;7705^289.84^1
"RTN","DVB464P2",223,0)
 ;;7818^209.31^0
"RTN","DVB464P2",224,0)
 ;;7818^209.32^0
"RTN","DVB464P2",225,0)
 ;;7818^209.33^0
"RTN","DVB464P2",226,0)
 ;;7818^209.34^0
"RTN","DVB464P2",227,0)
 ;;7818^209.35^0
"RTN","DVB464P2",228,0)
 ;;7820^078.12^0
"RTN","DVB464P2",229,0)
 ;;7827^695.10^1
"RTN","DVB464P2",230,0)
 ;;7827^695.11^1
"RTN","DVB464P2",231,0)
 ;;7827^695.12^1
"RTN","DVB464P2",232,0)
 ;;7827^695.13^1
"RTN","DVB464P2",233,0)
 ;;7827^695.14^1
"RTN","DVB464P2",234,0)
 ;;7827^695.15^1
"RTN","DVB464P2",235,0)
 ;;7827^695.19^1
"RTN","DVB464P2",236,0)
 ;;7913^249.00^1
"RTN","DVB464P2",237,0)
 ;;7913^249.01^1
"RTN","DVB464P2",238,0)
 ;;7913^249.11^1
"RTN","DVB464P2",239,0)
 ;;7913^249.20^1
"RTN","DVB464P2",240,0)
 ;;7913^249.21^1
"RTN","DVB464P2",241,0)
 ;;7913^249.30^1
"RTN","DVB464P2",242,0)
 ;;7913^249.31^1
"RTN","DVB464P2",243,0)
 ;;7913^249.40^1
"RTN","DVB464P2",244,0)
 ;;7913^249.41^1
"RTN","DVB464P2",245,0)
 ;;7913^249.50^1
"RTN","DVB464P2",246,0)
 ;;7913^249.51^1
"RTN","DVB464P2",247,0)
 ;;7913^249.60^1
"RTN","DVB464P2",248,0)
 ;;7913^249.61^1
"RTN","DVB464P2",249,0)
 ;;7913^249.70^1
"RTN","DVB464P2",250,0)
 ;;7913^249.71^1
"RTN","DVB464P2",251,0)
 ;;7913^249.80^1
"RTN","DVB464P2",252,0)
 ;;7913^249.81^1
"RTN","DVB464P2",253,0)
 ;;7913^249.90^1
"RTN","DVB464P2",254,0)
 ;;7913^249.91^1
"RTN","DVB464P2",255,0)
 ;;7913^366.41^1
"RTN","DVB464P2",256,0)
 ;;7913^362.01^1
"RTN","DVB464P2",257,0)
 ;;7913^362.02^1
"RTN","DVB464P2",258,0)
 ;;7913^362.03^1
"RTN","DVB464P2",259,0)
 ;;7913^362.04^1
"RTN","DVB464P2",260,0)
 ;;7913^362.05^1
"RTN","DVB464P2",261,0)
 ;;7913^362.06^1
"RTN","DVB464P2",262,0)
 ;;7913^362.07^1
"RTN","DVB464P2",263,0)
 ;;7913^357.2^1
"RTN","DVB464P2",264,0)
 ;;8100^346.02^1
"RTN","DVB464P2",265,0)
 ;;8100^346.03^1
"RTN","DVB464P2",266,0)
 ;;8100^346.12^1
"RTN","DVB464P2",267,0)
 ;;8100^346.13^1
"RTN","DVB464P2",268,0)
 ;;8100^346.22^1
"RTN","DVB464P2",269,0)
 ;;8100^346.23^1
"RTN","DVB464P2",270,0)
 ;;8100^346.70^1
"RTN","DVB464P2",271,0)
 ;;8100^346.71^1
"RTN","DVB464P2",272,0)
 ;;8100^346.72^1
"RTN","DVB464P2",273,0)
 ;;8100^346.73^1
"RTN","DVB464P2",274,0)
 ;;8100^346.82^1
"RTN","DVB464P2",275,0)
 ;;8100^346.83^1
"RTN","DVB464P2",276,0)
 ;;8100^346.92^1
"RTN","DVB464P2",277,0)
 ;;8100^346.93^1
"RTN","DVB464P2",278,0)
 ;;8100^346.50^1
"RTN","DVB464P2",279,0)
 ;;8100^346.51^1
"RTN","DVB464P2",280,0)
 ;;8100^346.52^1
"RTN","DVB464P2",281,0)
 ;;8100^346.53^1
"RTN","DVB464P2",282,0)
 ;;8100^346.30^1
"RTN","DVB464P2",283,0)
 ;;8100^346.31^1
"RTN","DVB464P2",284,0)
 ;;8100^346.32^1
"RTN","DVB464P2",285,0)
 ;;8100^346.33^1
"RTN","DVB464P2",286,0)
 ;;8100^346.40^1
"RTN","DVB464P2",287,0)
 ;;8100^346.41^1
"RTN","DVB464P2",288,0)
 ;;8100^346.60^1
"RTN","DVB464P2",289,0)
 ;;8100^346.61^1
"RTN","DVB464P2",290,0)
 ;;8100^346.62^1
"RTN","DVB464P2",291,0)
 ;;8100^346.63^1
"RTN","DVB464P2",292,0)
 ;;8100^339.00^0
"RTN","DVB464P2",293,0)
 ;;8100^339.01^0
"RTN","DVB464P2",294,0)
 ;;8100^339.02^0
"RTN","DVB464P2",295,0)
 ;;8100^339.03^0
"RTN","DVB464P2",296,0)
 ;;8100^339.04^0
"RTN","DVB464P2",297,0)
 ;;8100^339.05^0
"RTN","DVB464P2",298,0)
 ;;8100^339.09^0
"RTN","DVB464P2",299,0)
 ;;8100^339.10^0
"RTN","DVB464P2",300,0)
 ;;8100^339.11^0
"RTN","DVB464P2",301,0)
 ;;8100^339.12^0
"RTN","DVB464P2",302,0)
 ;;8100^339.20^0
"RTN","DVB464P2",303,0)
 ;;8100^339.21^0
"RTN","DVB464P2",304,0)
 ;;8100^339.22^0
"RTN","DVB464P2",305,0)
 ;;8100^339.3^0
"RTN","DVB464P2",306,0)
 ;;8100^339.41^0
"RTN","DVB464P2",307,0)
 ;;8100^339.42^0
"RTN","DVB464P2",308,0)
 ;;8100^339.43^0
"RTN","DVB464P2",309,0)
 ;;8100^339.44^0
"RTN","DVB464P2",310,0)
 ;;8100^339.81^0
"RTN","DVB464P2",311,0)
 ;;8100^339.85^0
"RTN","DVB464P2",312,0)
 ;;8100^339.89^0
"RTN","DVB464P2",313,0)
 ;;EXIT
"RTN","DVB464PA")
0^6^B26116168^n/a
"RTN","DVB464PA",1,0)
DVB464PA ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB464PA",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464PA",3,0)
 ;
"RTN","DVB464PA",4,0)
 ;This routine is the main install routine that will update the
"RTN","DVB464PA",5,0)
 ;DISABILITY CONDITION (#31) file with requested changes to file.
"RTN","DVB464PA",6,0)
 ;
"RTN","DVB464PA",7,0)
 ;
"RTN","DVB464PA",8,0)
 Q  ;no direct entry
"RTN","DVB464PA",9,0)
 ;
"RTN","DVB464PA",10,0)
 ;
"RTN","DVB464PA",11,0)
POST ;Main entry point for Post-init items.
"RTN","DVB464PA",12,0)
 ;
"RTN","DVB464PA",13,0)
 N DVBTOT  ;count of total ICD9 codes filed
"RTN","DVB464PA",14,0)
 N DVBTMP  ;Closed Root global reference for error reporting
"RTN","DVB464PA",15,0)
 S DVBTMP=$NA(^TMP("DVB464PA",$J))
"RTN","DVB464PA",16,0)
 K @DVBTMP
"RTN","DVB464PA",17,0)
 S @DVBTMP@(0)="PATCH DVB*4*64 POST-INSTALL^"_$$NOW^XLFDT
"RTN","DVB464PA",18,0)
 S DVBTOT=0
"RTN","DVB464PA",19,0)
 ;
"RTN","DVB464PA",20,0)
 ;call to process (#31) file updates
"RTN","DVB464PA",21,0)
 D POST^DVB464P1(DVBTMP,.DVBTOT)
"RTN","DVB464PA",22,0)
 ;
"RTN","DVB464PA",23,0)
 S @DVBTMP@(0)=@DVBTMP@(0)_"^"_$$NOW^XLFDT_"^"_DVBTOT
"RTN","DVB464PA",24,0)
 ;
"RTN","DVB464PA",25,0)
 I '$D(@DVBTMP@("ERROR")) D
"RTN","DVB464PA",26,0)
 . D BMES^XPDUTL("  >>> *** SUCCESS updating the DISABILITY CONDITION (#31) file.")
"RTN","DVB464PA",27,0)
 . D MES^XPDUTL("          Total RELATED ICD9 CODES filed: "_DVBTOT)
"RTN","DVB464PA",28,0)
 . ;
"RTN","DVB464PA",29,0)
 E  D
"RTN","DVB464PA",30,0)
 . D BMES^XPDUTL("  >>> *** FAILURE updating the DISABILITY CONDITION (#31) file.")
"RTN","DVB464PA",31,0)
 . D BMES^XPDUTL("      Filing error's have occurred when updating the file.")
"RTN","DVB464PA",32,0)
 . D MES^XPDUTL("      Resolution is necessary to maintain database integrity.")
"RTN","DVB464PA",33,0)
 . D BMES^XPDUTL("  A MailMan message has been sent to the installer of this patch")
"RTN","DVB464PA",34,0)
 . D MES^XPDUTL("  with a listing of the errors.")
"RTN","DVB464PA",35,0)
 . D BMES^XPDUTL("  Once these errors have been resolved, please re-run")
"RTN","DVB464PA",36,0)
 . D MES^XPDUTL("  the Post-Installation routine directly from programmer mode")
"RTN","DVB464PA",37,0)
 . D MES^XPDUTL("  by entering the following command:")
"RTN","DVB464PA",38,0)
 . D MES^XPDUTL("  ")
"RTN","DVB464PA",39,0)
 . D MES^XPDUTL("  D EN^DVB4P64")
"RTN","DVB464PA",40,0)
 . D MES^XPDUTL("  ")
"RTN","DVB464PA",41,0)
 . D BMES^XPDUTL("  >>> I'm now creating and sending the MailMan message...")
"RTN","DVB464PA",42,0)
 . ;
"RTN","DVB464PA",43,0)
 . D SENDMSG(DVBTMP,.DVBTOT)
"RTN","DVB464PA",44,0)
 . ;
"RTN","DVB464PA",45,0)
 . D MES^XPDUTL("  >>> All done.")
"RTN","DVB464PA",46,0)
 ;
"RTN","DVB464PA",47,0)
 ;cleanup temp file
"RTN","DVB464PA",48,0)
 K @DVBTMP
"RTN","DVB464PA",49,0)
 Q
"RTN","DVB464PA",50,0)
 ;
"RTN","DVB464PA",51,0)
 ;
"RTN","DVB464PA",52,0)
SENDMSG(DVBTMP,DVBTOT) ;send failure MailMan message to installer of patch
"RTN","DVB464PA",53,0)
 ;
"RTN","DVB464PA",54,0)
 N DIFROM,DVBMSG
"RTN","DVB464PA",55,0)
 N XMY,XMDUZ,XMSUB,XMTEXT,XMDUN,XMZ
"RTN","DVB464PA",56,0)
 S XMSUB="DVB*4.0*64 Patch Post-Install Error Listing"
"RTN","DVB464PA",57,0)
 S XMTEXT="DVBMSG("
"RTN","DVB464PA",58,0)
 S XMY(DUZ)="",XMDUZ=.5
"RTN","DVB464PA",59,0)
 ;S XMDUZ=.5,(XMY(DUZ),XMY(XMDUZ))=""
"RTN","DVB464PA",60,0)
 S DVBMSG(1)="Patch:  DVB*4.0*64 Automated Service Connected Designation"
"RTN","DVB464PA",61,0)
 S DVBMSG(2)=""
"RTN","DVB464PA",62,0)
 S DVBMSG(3)="The post-installation update of the DISABILITY CONDITION (#31) file"
"RTN","DVB464PA",63,0)
 S DVBMSG(4)="has FAILED to successfully complete.  Errors have occurred when"
"RTN","DVB464PA",64,0)
 S DVBMSG(5)="attempting to make the changes."
"RTN","DVB464PA",65,0)
 S DVBMSG(6)=""
"RTN","DVB464PA",66,0)
 S DVBMSG(7)="Resolution of ALL error's is needed to maintain database integrity."
"RTN","DVB464PA",67,0)
 S DVBMSG(8)=""
"RTN","DVB464PA",68,0)
 S DVBMSG(9)="Once these filing error's have been resolved, please re-run"
"RTN","DVB464PA",69,0)
 S DVBMSG(10)="the Post-Installation routine directly from programmer mode"
"RTN","DVB464PA",70,0)
 S DVBMSG(11)="by entering the following command:"
"RTN","DVB464PA",71,0)
 S DVBMSG(12)=""
"RTN","DVB464PA",72,0)
 S DVBMSG(13)="D POST^DVB4P64"
"RTN","DVB464PA",73,0)
 S DVBMSG(14)=""
"RTN","DVB464PA",74,0)
 S DVBMSG(15)="The new update run time should take less than 5 minutes to complete."
"RTN","DVB464PA",75,0)
 S DVBMSG(16)=""
"RTN","DVB464PA",76,0)
 S DVBMSG(17)=">>> Please review and resolve the following error's:"
"RTN","DVB464PA",77,0)
 S DVBMSG(18)=""
"RTN","DVB464PA",78,0)
 S DVBMSG(19)="*** DISABILITY CONDITION FILE (#31) FILING ERRORS ***"
"RTN","DVB464PA",79,0)
 S DVBMSG(20)="-----------------------------------------------------"
"RTN","DVB464PA",80,0)
 ;
"RTN","DVB464PA",81,0)
 ;loop and list error's
"RTN","DVB464PA",82,0)
 N DVBICD,DVBHDR,DVBHDR1,DVBIEN,DVBLN,DVBMSS,DVBVBA,DVBDESC
"RTN","DVB464PA",83,0)
 S DVBHDR="VBA DX CODE: ",DVBHDR1="    ICD DIAGNOSIS CODE: "
"RTN","DVB464PA",84,0)
 S DVBLN=21,DVBVBA=0
"RTN","DVB464PA",85,0)
 F  S DVBVBA=$O(@DVBTMP@("ERROR",DVBVBA)) Q:'DVBVBA  D
"RTN","DVB464PA",86,0)
 . I $D(@DVBTMP@("ERROR",DVBVBA,0)) D  Q
"RTN","DVB464PA",87,0)
 . . S DVBMSS=DVBHDR_DVBVBA_" - "_$G(@DVBTMP@("ERROR",DVBVBA,0))
"RTN","DVB464PA",88,0)
 . . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464PA",89,0)
 . K DVBDESC D FIND^DIC(31,"","","X",DVBVBA,,"C","","","DVBDESC")
"RTN","DVB464PA",90,0)
 . S DVBMSS=DVBHDR_DVBVBA_" - "_$E($G(DVBDESC("DILIST",1,1)),1,50)
"RTN","DVB464PA",91,0)
 . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464PA",92,0)
 . S DVBIEN=0
"RTN","DVB464PA",93,0)
 . F  S DVBIEN=$O(@DVBTMP@("ERROR",DVBVBA,DVBIEN)) Q:'DVBIEN  D
"RTN","DVB464PA",94,0)
 . . S DVBICD=""
"RTN","DVB464PA",95,0)
 . . F  S DVBICD=$O(@DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)) Q:DVBICD=""  D
"RTN","DVB464PA",96,0)
 . . . S DVBMSS=DVBHDR1_DVBICD_" - "_$G(@DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD))
"RTN","DVB464PA",97,0)
 . . . S DVBMSG(DVBLN)=DVBMSS,DVBLN=DVBLN+1
"RTN","DVB464PA",98,0)
 S DVBMSG(DVBLN)="",DVBLN=DVBLN+1
"RTN","DVB464PA",99,0)
 S DVBMSG(DVBLN)="<End of Report>"
"RTN","DVB464PA",100,0)
 ;
"RTN","DVB464PA",101,0)
 D ^XMD
"RTN","DVB464PA",102,0)
 Q
"RTN","DVB464PA",103,0)
 ;
"RTN","DVB464PA",104,0)
 ;
"RTN","DVB464PA",105,0)
PROGCHK(XPDABORT) ;checks for necessary programmer variables
"RTN","DVB464PA",106,0)
 ;
"RTN","DVB464PA",107,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") D
"RTN","DVB464PA",108,0)
 . D BMES^XPDUTL("*****")
"RTN","DVB464PA",109,0)
 . D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","DVB464PA",110,0)
 . D MES^XPDUTL("Installation aborted.")
"RTN","DVB464PA",111,0)
 . D MES^XPDUTL("*****")
"RTN","DVB464PA",112,0)
 . S XPDABORT=2
"RTN","DVB464PA",113,0)
 Q
"RTN","DVB464PA",114,0)
 ;
"RTN","DVB464PA",115,0)
 ;
"RTN","DVB464PA",116,0)
ISRUNING(XPDABORT) ;check if patch install is running
"RTN","DVB464PA",117,0)
 ;
"RTN","DVB464PA",118,0)
 I $D(^TMP("DVB464PA")) D
"RTN","DVB464PA",119,0)
 . D BMES^XPDUTL("*****")
"RTN","DVB464PA",120,0)
 . D MES^XPDUTL("This patch is currently being Installed.  Try later.")
"RTN","DVB464PA",121,0)
 . D MES^XPDUTL("Installation aborted.")
"RTN","DVB464PA",122,0)
 . D MES^XPDUTL("*****")
"RTN","DVB464PA",123,0)
 . S XPDABORT=2
"RTN","DVB464PA",124,0)
 Q
"RTN","DVB464PD")
0^7^B22793607^n/a
"RTN","DVB464PD",1,0)
DVB464PD ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB464PD",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB464PD",3,0)
 ;
"RTN","DVB464PD",4,0)
 ;This routine is the main install routine that will update the
"RTN","DVB464PD",5,0)
 ;DISABILITY CONDITION (#31) file with requested changes to file.
"RTN","DVB464PD",6,0)
 Q  ;no direct entry
"RTN","DVB464PD",7,0)
 ;
"RTN","DVB464PD",8,0)
POST(DVBTMP,DVBTOT) ;post-install driver for updating the (#31) file
"RTN","DVB464PD",9,0)
 ;This procedure will call a series of routines that contain the data
"RTN","DVB464PD",10,0)
 ;element values that will be used to delete requested VBA-ICD9 mapping.
"RTN","DVB464PD",11,0)
 ;
"RTN","DVB464PD",12,0)
 ;  Input:
"RTN","DVB464PD",13,0)
 ;    DVBTMP - Closed Root global reference for error reporting
"RTN","DVB464PD",14,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464PD",15,0)
 ;
"RTN","DVB464PD",16,0)
 ;  Output:
"RTN","DVB464PD",17,0)
 ;    DVBTMP - Temp file of error messages (if any)
"RTN","DVB464PD",18,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464PD",19,0)
 ;
"RTN","DVB464PD",20,0)
 N DVBCNT
"RTN","DVB464PD",21,0)
 S DVBTMP=$G(DVBTMP)
"RTN","DVB464PD",22,0)
 S DVBTOT=$G(DVBTOT) I DVBTOT']"" S DVBTOT=0
"RTN","DVB464PD",23,0)
 I DVBTMP']"" S DVBTMP=$NA(^TMP("DVB464PD",$J)) K @DVBTMP
"RTN","DVB464PD",24,0)
 D BLDXRF(DVBTMP,.DVBTOT)
"RTN","DVB464PD",25,0)
 ;
"RTN","DVB464PD",26,0)
BLDXRF(DVBTMP,DVBTOT) ;call delete VBA/ICD9 codes
"RTN","DVB464PD",27,0)
 ;
"RTN","DVB464PD",28,0)
 ;  Input:
"RTN","DVB464PD",29,0)
 ;    DVBRTN - Post Install routine to process VBA/ICD9 codes
"RTN","DVB464PD",30,0)
 ;    DVBTMP - Closed Root global reference for error reporting
"RTN","DVB464PD",31,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464PD",32,0)
 ;
"RTN","DVB464PD",33,0)
 ;  Output:
"RTN","DVB464PD",34,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464PD",35,0)
 ;
"RTN","DVB464PD",36,0)
 N DVBLINE  ;$TEXT code line
"RTN","DVB464PD",37,0)
 N DVBLN    ;line counter incrimenter
"RTN","DVB464PD",38,0)
 N DVBTAG   ;line tag of routine to process
"RTN","DVB464PD",39,0)
 N DVBVBA   ;VBA DX code (external value)
"RTN","DVB464PD",40,0)
 N DVBVB    ;DX CODE
"RTN","DVB464PD",41,0)
 ;
"RTN","DVB464PD",42,0)
 S (DVBLN,DVBVBA)=0
"RTN","DVB464PD",43,0)
 ;
"RTN","DVB464PD",44,0)
 F DVBLN=1:1 S DVBTAG="DELCODE+"_DVBLN,DVBLINE=$T(@DVBTAG) S DVBVB=$P(DVBLINE,";",3,999) Q:DVBLINE["EXIT"  D
"RTN","DVB464PD",45,0)
 .;get VBA DX CODE var setup
"RTN","DVB464PD",46,0)
 .S DVBVBA=$P(DVBVB,"^",1)
"RTN","DVB464PD",47,0)
 .I '$O(^DIC(31,"C",DVBVBA,"")) D
"RTN","DVB464PD",48,0)
 ..S @DVBTMP@("ERROR",DVBVBA)="DX CODE not found in (#31) file"
"RTN","DVB464PD",49,0)
 ..S DVBVBA=0
"RTN","DVB464PD",50,0)
 ..;
"RTN","DVB464PD",51,0)
 .;quit back to loop if no VBA code ien found (just in case)
"RTN","DVB464PD",52,0)
 .I 'DVBVBA Q
"RTN","DVB464PD",53,0)
 .;
"RTN","DVB464PD",54,0)
 .D BLDVBA(DVBVBA,DVBLINE,.DVBTOT)
"RTN","DVB464PD",55,0)
 Q
"RTN","DVB464PD",56,0)
 ; ;
"RTN","DVB464PD",57,0)
BLDVBA(DVBVBA,DVBLINE,DVBTOT) ;extract ICD9 codes from text line
"RTN","DVB464PD",58,0)
 ;
"RTN","DVB464PD",59,0)
 ;  Input:
"RTN","DVB464PD",60,0)
 ;    DVBVBA - VBA DX code (external value)
"RTN","DVB464PD",61,0)
 ;   DVBLINE - $TEXT code line of ICD9's
"RTN","DVB464PD",62,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464PD",63,0)
 ;
"RTN","DVB464PD",64,0)
 ;  Output:
"RTN","DVB464PD",65,0)
 ;    DVBTOT - Total number of ICD9 codes filed
"RTN","DVB464PD",66,0)
 ;
"RTN","DVB464PD",67,0)
 Q:'$G(DVBVBA)
"RTN","DVB464PD",68,0)
 Q:$G(DVBLINE)'[";"
"RTN","DVB464PD",69,0)
 ;
"RTN","DVB464PD",70,0)
 N DVBDATA,DVBI,DVBICD,DVBICDEN,DVBIEN,DVBMATCH,DVBX
"RTN","DVB464PD",71,0)
 ;
"RTN","DVB464PD",72,0)
 ;loop in case there might be multiple VBA ien's setup
"RTN","DVB464PD",73,0)
 I DVBVBA'="" S DVBIEN=0
"RTN","DVB464PD",74,0)
 F  S DVBIEN=$O(^DIC(31,"C",DVBVBA,DVBIEN)) Q:DVBIEN=""  D
"RTN","DVB464PD",75,0)
 . S DVBX=$P(DVBVB,"^",1)
"RTN","DVB464PD",76,0)
 . S (DVBI,DVBICD)=0
"RTN","DVB464PD",77,0)
 . F DVBI=1:1 S DVBDATA=$P(DVBX,"^",DVBI) Q:DVBDATA=""  D
"RTN","DVB464PD",78,0)
 . . Q:DVBDATA[";"
"RTN","DVB464PD",79,0)
 . . S DVBICD=$P(DVBVB,"^",2),DVBMATCH=+$P(DVBVB,"^",3)
"RTN","DVB464PD",80,0)
 . . ; - get ICD9 pointer from ICD DIAGNOSIS (#80) file
"RTN","DVB464PD",81,0)
 . . S DVBICDEN=+$$ICDDX^ICDCODE(DVBICD,DT)
"RTN","DVB464PD",82,0)
 . . I 'DVBICDEN!(DVBICDEN<0)!(DVBICD=DVBICDEN) D  Q
"RTN","DVB464PD",83,0)
 . . . S @DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)="not found in ICD DIAGNOSIS (#80) file"
"RTN","DVB464PD",84,0)
 . . ;
"RTN","DVB464PD",85,0)
 . . Q:'$D(^DIC(31,DVBIEN,"ICD","B",DVBICDEN))  ;
"RTN","DVB464PD",86,0)
 . . ;
"RTN","DVB464PD",87,0)
 . . I '$$FILEICD(DVBIEN,DVBICDEN,DVBMATCH) D  Q
"RTN","DVB464PD",88,0)
 . . . S @DVBTMP@("ERROR",DVBVBA,DVBIEN,DVBICD)="error filing to (#31) file"
"RTN","DVB464PD",89,0)
 . . S DVBTOT=DVBTOT+1
"RTN","DVB464PD",90,0)
 Q
"RTN","DVB464PD",91,0)
 ;
"RTN","DVB464PD",92,0)
 ;
"RTN","DVB464PD",93,0)
FILEICD(DVBIEN,DVBICDEN,DVBMATCH) ;file code mapping to delete icds from (#31) file
"RTN","DVB464PD",94,0)
 ;
"RTN","DVB464PD",95,0)
 ;  Input:
"RTN","DVB464PD",96,0)
 ;    DVBIEN    - ien of VBA DX CODE in file (#31)
"RTN","DVB464PD",97,0)
 ;    DVBICDEN  - ien of ICD9 code in file (#80)
"RTN","DVB464PD",98,0)
 ;    DVBMATCH  - match code (1 or 0)
"RTN","DVB464PD",99,0)
 ;
"RTN","DVB464PD",100,0)
 ;  Output:
"RTN","DVB464PD",101,0)
 ;    Function result - 1 on success, 0 on failure
"RTN","DVB464PD",102,0)
 ;
"RTN","DVB464PD",103,0)
 ; Fields :
"RTN","DVB464PD",104,0)
 ; (#20) RELATED ICD9 CODES - ICD;0 POINTER Multiple (#31.01)
"RTN","DVB464PD",105,0)
 ;   (#31.01) -- RELATED ICD9 CODES SUB-FILE
"RTN","DVB464PD",106,0)
 ;    Field(s):
"RTN","DVB464PD",107,0)
 ;    .01 RELATED ICD9 CODES - 0;1 POINTER TO ICD DIAGNOSIS FILE (#80)
"RTN","DVB464PD",108,0)
 ;    .02 ICD9 MATCH - 0;2 SET ('0' FOR PARTIAL MATCH; '1' FOR MATCH;)
"RTN","DVB464PD",109,0)
 ;
"RTN","DVB464PD",110,0)
 N DVBERR,DVBFDA,DVBRSLT,DIK
"RTN","DVB464PD",111,0)
 S DVBRSLT=0
"RTN","DVB464PD",112,0)
 ;
"RTN","DVB464PD",113,0)
 I $G(DVBIEN),$G(DVBICDEN),$G(DVBMATCH)]"" D
"RTN","DVB464PD",114,0)
 .S DA(1)=DVBIEN
"RTN","DVB464PD",115,0)
 .S DA=$O(^DIC(31,DA(1),"ICD","B",DVBICDEN,0)) Q:DA'>0  D
"RTN","DVB464PD",116,0)
 ..W !!,"DELETING FROM DISABILITY CODE "_DVBVBA_""
"RTN","DVB464PD",117,0)
 ..W !!,"DELETING ICD CODE "_DVBICD_" FROM MAPPING"
"RTN","DVB464PD",118,0)
 ..;I DA'>0 D  Q:DA'>0
"RTN","DVB464PD",119,0)
 ..S DIK="^DIC(31,"_DA(1)_",""ICD""," D ^DIK K DA
"RTN","DVB464PD",120,0)
 .S:'$D(DVBERR) DVBRSLT=1
"RTN","DVB464PD",121,0)
 Q DVBRSLT
"RTN","DVB464PD",122,0)
 ;
"RTN","DVB464PD",123,0)
 ;
"RTN","DVB464PD",124,0)
 ;codes to be deleted
"RTN","DVB464PD",125,0)
DELCODE ;DISABILITY CODE^ICDCODE
"RTN","DVB464PD",126,0)
 ;;5017^274.0
"RTN","DVB464PD",127,0)
 ;;6004^364.21
"RTN","DVB464PD",128,0)
 ;;6028^366.10
"RTN","DVB464PD",129,0)
 ;;6028^366.11
"RTN","DVB464PD",130,0)
 ;;6028^366.12
"RTN","DVB464PD",131,0)
 ;;6028^366.13
"RTN","DVB464PD",132,0)
 ;;6028^366.14
"RTN","DVB464PD",133,0)
 ;;6028^366.15
"RTN","DVB464PD",134,0)
 ;;6028^366.16
"RTN","DVB464PD",135,0)
 ;;6028^366.17
"RTN","DVB464PD",136,0)
 ;;6028^366.18
"RTN","DVB464PD",137,0)
 ;;6028^366.19
"RTN","DVB464PD",138,0)
 ;;6028^366.30
"RTN","DVB464PD",139,0)
 ;;6028^366.31
"RTN","DVB464PD",140,0)
 ;;6028^366.32
"RTN","DVB464PD",141,0)
 ;;6028^366.33
"RTN","DVB464PD",142,0)
 ;;6028^366.34
"RTN","DVB464PD",143,0)
 ;;6028^366.41
"RTN","DVB464PD",144,0)
 ;;6028^366.42
"RTN","DVB464PD",145,0)
 ;;6028^366.43
"RTN","DVB464PD",146,0)
 ;;6028^366.44
"RTN","DVB464PD",147,0)
 ;;6028^366.50
"RTN","DVB464PD",148,0)
 ;;6028^366.51
"RTN","DVB464PD",149,0)
 ;;6028^366.52
"RTN","DVB464PD",150,0)
 ;;6028^366.53
"RTN","DVB464PD",151,0)
 ;;6028^366.8
"RTN","DVB464PD",152,0)
 ;;6028^366.9
"RTN","DVB464PD",153,0)
 ;;6028^366.10
"RTN","DVB464PD",154,0)
 ;;6028^366.11
"RTN","DVB464PD",155,0)
 ;;6028^366.12
"RTN","DVB464PD",156,0)
 ;;6028^366.13
"RTN","DVB464PD",157,0)
 ;;6028^366.14
"RTN","DVB464PD",158,0)
 ;;6028^366.15
"RTN","DVB464PD",159,0)
 ;;6028^366.16
"RTN","DVB464PD",160,0)
 ;;6028^366.17
"RTN","DVB464PD",161,0)
 ;;6028^366.18
"RTN","DVB464PD",162,0)
 ;;6028^366.19
"RTN","DVB464PD",163,0)
 ;;6028^366.30
"RTN","DVB464PD",164,0)
 ;;6028^366.31
"RTN","DVB464PD",165,0)
 ;;6028^366.32
"RTN","DVB464PD",166,0)
 ;;6028^366.33
"RTN","DVB464PD",167,0)
 ;;6028^366.34
"RTN","DVB464PD",168,0)
 ;;6028^366.41
"RTN","DVB464PD",169,0)
 ;;6028^366.42
"RTN","DVB464PD",170,0)
 ;;6028^366.43
"RTN","DVB464PD",171,0)
 ;;6028^366.44
"RTN","DVB464PD",172,0)
 ;;6028^366.50
"RTN","DVB464PD",173,0)
 ;;6028^366.51
"RTN","DVB464PD",174,0)
 ;;6028^366.52
"RTN","DVB464PD",175,0)
 ;;6028^366.53
"RTN","DVB464PD",176,0)
 ;;6028^366.8
"RTN","DVB464PD",177,0)
 ;;6028^366.9
"RTN","DVB464PD",178,0)
 ;;6031^375.30
"RTN","DVB464PD",179,0)
 ;;6031^375.31
"RTN","DVB464PD",180,0)
 ;;6031^375.32
"RTN","DVB464PD",181,0)
 ;;6031^375.33
"RTN","DVB464PD",182,0)
 ;;6031^375.41
"RTN","DVB464PD",183,0)
 ;;6031^375.42
"RTN","DVB464PD",184,0)
 ;;6033^379.32
"RTN","DVB464PD",185,0)
 ;;6033^379.33
"RTN","DVB464PD",186,0)
 ;;6033^379.34
"RTN","DVB464PD",187,0)
 ;;6066^369.62
"RTN","DVB464PD",188,0)
 ;;6066^V45.78
"RTN","DVB464PD",189,0)
 ;;6067^369.07
"RTN","DVB464PD",190,0)
 ;;6068^369.13
"RTN","DVB464PD",191,0)
 ;;6069^369.17
"RTN","DVB464PD",192,0)
 ;;6069^369.62
"RTN","DVB464PD",193,0)
 ;;6070^369.62
"RTN","DVB464PD",194,0)
 ;;6071^369.08
"RTN","DVB464PD",195,0)
 ;;6072^369.14
"RTN","DVB464PD",196,0)
 ;;6073^369.18
"RTN","DVB464PD",197,0)
 ;;6073^369.68
"RTN","DVB464PD",198,0)
 ;;6074^369.68
"RTN","DVB464PD",199,0)
 ;;6078^369.75
"RTN","DVB464PD",200,0)
 ;;6092^368.2
"RTN","DVB464PD",201,0)
 ;;6845^511.8
"RTN","DVB464PD",202,0)
 ;;7827^695.1
"RTN","DVB464PD",203,0)
 ;;6017^076.0 
"RTN","DVB464PD",204,0)
 ;;6017^076.1 
"RTN","DVB464PD",205,0)
 ;;6017^076.9 
"RTN","DVB464PD",206,0)
 ;;EXIT
"RTN","DVB464PD",207,0)
 Q
"RTN","DVB4P64")
0^^B958226^n/a
"RTN","DVB4P64",1,0)
DVB4P64 ;ALB/MJB - DISABILITY FILE UPDATE ; 6/28/10 1:34pm
"RTN","DVB4P64",2,0)
 ;;4.0;HINQ;**64**;03/25/92;Build 25
"RTN","DVB4P64",3,0)
 ;
"RTN","DVB4P64",4,0)
 Q
"RTN","DVB4P64",5,0)
EN ; START UPDATE
"RTN","DVB4P64",6,0)
 D BMES^XPDUTL("  >>> *** Updating the DISABILITY CONDITION (#31) file...")
"RTN","DVB4P64",7,0)
 D MES^XPDUTL("      *** Please be patient, this should take less than 5 minutes.")
"RTN","DVB4P64",8,0)
 D MES^XPDUTL("  ")
"RTN","DVB4P64",9,0)
 D POST^DVB464 ; ADD NEW DISABILITY CONDITIONS
"RTN","DVB4P64",10,0)
 D POST^DVB464P ;DELETE REQUESTED ICD'S FROM MAPPING
"RTN","DVB4P64",11,0)
 D POST^DVB464PA ; ADD NEW DIAGNOSIC CODES TO MAPPING
"RTN","DVB4P64",12,0)
 Q
"VER")
8.0^22.0
"BLD",8357,6)
^59
**END**
**END**
