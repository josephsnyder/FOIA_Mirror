EMERGENCY Released DVB*4*63 SEQ #58
Extracted from mail message
**KIDS**:DVB*4.0*63^

**INSTALL NAME**
DVB*4.0*63
"BLD",8098,0)
DVB*4.0*63^HINQ^0^3090610^y
"BLD",8098,1,0)
^^1^1^3090610^
"BLD",8098,1,1,0)
-Corrects a file full error.
"BLD",8098,4,0)
^9.64PA^^
"BLD",8098,6.3)
2
"BLD",8098,"KRN",0)
^9.67PA^779.2^20
"BLD",8098,"KRN",.4,0)
.4
"BLD",8098,"KRN",.4,"NM",0)
^9.68A^^
"BLD",8098,"KRN",.401,0)
.401
"BLD",8098,"KRN",.402,0)
.402
"BLD",8098,"KRN",.403,0)
.403
"BLD",8098,"KRN",.5,0)
.5
"BLD",8098,"KRN",.84,0)
.84
"BLD",8098,"KRN",3.6,0)
3.6
"BLD",8098,"KRN",3.8,0)
3.8
"BLD",8098,"KRN",9.2,0)
9.2
"BLD",8098,"KRN",9.8,0)
9.8
"BLD",8098,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",8098,"KRN",9.8,"NM",1,0)
DVBHQM2^^0^B31832375
"BLD",8098,"KRN",9.8,"NM",2,0)
DVBHQR11^^0^B30574454
"BLD",8098,"KRN",9.8,"NM","B","DVBHQM2",1)

"BLD",8098,"KRN",9.8,"NM","B","DVBHQR11",2)

"BLD",8098,"KRN",19,0)
19
"BLD",8098,"KRN",19.1,0)
19.1
"BLD",8098,"KRN",101,0)
101
"BLD",8098,"KRN",409.61,0)
409.61
"BLD",8098,"KRN",771,0)
771
"BLD",8098,"KRN",779.2,0)
779.2
"BLD",8098,"KRN",870,0)
870
"BLD",8098,"KRN",8989.51,0)
8989.51
"BLD",8098,"KRN",8989.52,0)
8989.52
"BLD",8098,"KRN",8994,0)
8994
"BLD",8098,"KRN","B",.4,.4)

"BLD",8098,"KRN","B",.401,.401)

"BLD",8098,"KRN","B",.402,.402)

"BLD",8098,"KRN","B",.403,.403)

"BLD",8098,"KRN","B",.5,.5)

"BLD",8098,"KRN","B",.84,.84)

"BLD",8098,"KRN","B",3.6,3.6)

"BLD",8098,"KRN","B",3.8,3.8)

"BLD",8098,"KRN","B",9.2,9.2)

"BLD",8098,"KRN","B",9.8,9.8)

"BLD",8098,"KRN","B",19,19)

"BLD",8098,"KRN","B",19.1,19.1)

"BLD",8098,"KRN","B",101,101)

"BLD",8098,"KRN","B",409.61,409.61)

"BLD",8098,"KRN","B",771,771)

"BLD",8098,"KRN","B",779.2,779.2)

"BLD",8098,"KRN","B",870,870)

"BLD",8098,"KRN","B",8989.51,8989.51)

"BLD",8098,"KRN","B",8989.52,8989.52)

"BLD",8098,"KRN","B",8994,8994)

"BLD",8098,"QDEF")
^^^^NO^^^^^^YES
"BLD",8098,"QUES",0)
^9.62^^
"BLD",8098,"REQB",0)
^9.611^1^1
"BLD",8098,"REQB",1,0)
DVB*4.0*49^2
"BLD",8098,"REQB","B","DVB*4.0*49",1)

"MBREQ")
0
"PKG",119,-1)
1^1
"PKG",119,0)
HINQ^DVB^HINQ(Hospital Inquiry)
"PKG",119,20,0)
^9.402P^^
"PKG",119,22,0)
^9.49I^1^1
"PKG",119,22,1,0)
4.0^2930615^2920421
"PKG",119,22,1,"PAH",1,0)
63^3090610
"PKG",119,22,1,"PAH",1,1,0)
^^1^1^3090610
"PKG",119,22,1,"PAH",1,1,1,0)
-Corrects a file full error.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DVBHQM2")
0^1^B31832375^B32012478
"RTN","DVBHQM2",1,0)
DVBHQM2 ;ISC-ALBANY/PKE-MAIL DELIVERY PROGRAM ; 6/10/09 6:01pm
"RTN","DVBHQM2",2,0)
 ;;4.0;HINQ;**49,63**;03/25/92 ;Build 2
"RTN","DVBHQM2",3,0)
 G EN
"RTN","DVBHQM2",4,0)
LIN S CT=CT+1,A1=A_CT_",0)",@A1=T1 Q
"RTN","DVBHQM2",5,0)
DD S:Y Y=$S($E(Y,4,5):$P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC","^",+$E(Y,4,5))_" ",1:"")_$S($E(Y,6,7):+$E(Y,6,7)_",",1:"")_($E(Y,1,3)+1700)_$P("@"_$E(Y_0,9,10)_":"_$E(Y_"000",11,12),"^",Y[".") Q
"RTN","DVBHQM2",6,0)
 ;
"RTN","DVBHQM2",7,0)
EN ;P&T now sent by VBA, 2=no, 3=yes, else null
"RTN","DVBHQM2",8,0)
 I $D(DVBPTI),((DVBPTI=2)!(DVBPTI=3)) S DVBPTI=$S(DVBPTI=2:"No",DVBPTI=3:"Yes",1:""),T1="    Perm.,Total Disability = "_DVBPTI D LIN
"RTN","DVBHQM2",9,0)
 I $D(DVBAAHB),((DVBAAHB="A")!(DVBAAHB="H")) S Y=DVBAAHB S Y=$S(Y="A":"A&A Paid",Y="H":"Housebound Paid",1:"") S T1="             AID & ATTEND = "_Y D LIN
"RTN","DVBHQM2",10,0)
 I $D(DVBFIDUC),(DVBFIDUC>0) S T1="Chief Attorney, fiduciary = "_DVBFIDUC D LIN
"RTN","DVBHQM2",11,0)
 ;;;I $D(DVBFIDUC),DVBFIDUC,$D(^DIC(4,DVBFIDUC,0)) S DVBFIDUC=$P(^(0),U),T1="Chief Attorney, fiduciary = "_DVBFIDUC D LIN
"RTN","DVBHQM2",12,0)
 ;VBA field is Unemployable, codes will Y=Unemploy, N=Employ DVB*4*49 
"RTN","DVBHQM2",13,0)
 I $D(DVBEI),((DVBEI="N")!(DVBEI="Y")) S DVBEI=$S(DVBEI="N":"Employable or not an issue",DVBEI="Y":"Unemployable",1:""),T1="     Employable indicator = "_DVBEI D LIN
"RTN","DVBHQM2",14,0)
 ;new VBA codes, I=incompetent or C=competent DVB*4*49
"RTN","DVBHQM2",15,0)
 I $D(DVBCI),((DVBCI'=" ")) S DVBCI=$S(DVBCI=1!(DVBCI="C"):"Competent, or not an issue",DVBCI="I"!(DVBCI="2"):"Incompetent",1:DVBCI),T1="     Competency indicator = "_DVBCI D LIN
"RTN","DVBHQM2",16,0)
 ;Severence Recoup, PFOP, Competency Pay Status  and Consol Payment will
"RTN","DVBHQM2",17,0)
 ;no longer be sent by VBA - DVB*4*49
"RTN","DVBHQM2",18,0)
 ;
"RTN","DVBHQM2",19,0)
 I $D(DVBP(2)) D P2^DVBHQM11
"RTN","DVBHQM2",20,0)
PNX I $D(DVBSPNAM),DVBSPNAM'?10" " S T1=" " D LIN S T1="Spouse name = "_DVBSPNAM D SDB,LIN
"RTN","DVBHQM2",21,0)
 S T1="" D LIN
"RTN","DVBHQM2",22,0)
 S T1="          "
"RTN","DVBHQM2",23,0)
 ;CHAMPVA no longer sent by VBA - DVB*4*49
"RTN","DVBHQM2",24,0)
 K C I $D(DVBBAS(1)) F N=32:1:35 I $P(DVBBAS(1),U,N) D SHDR Q
"RTN","DVBHQM2",25,0)
 I $D(C) D COUNT ;DVB*4*49 - some fields for C not sent by VBA any more
"RTN","DVBHQM2",26,0)
 ;so calculate from Child Status field
"RTN","DVBHQM2",27,0)
 I $D(C) D LIN S T1="",$P(T1,"-",80)="" D LIN S T1="School = "_$P(C,U,3)_"   Helpless School = "_$P(C,U,4)_"   Depend. total = "_$$DEP($P(C,U,1))_"   This Award = "_$$DEP($P(C,U,2)) D LIN
"RTN","DVBHQM2",28,0)
 I '$D(C),T1'["Not" S T1=$E(T1,1,23) D LIN
"RTN","DVBHQM2",29,0)
 K C
"RTN","DVBHQM2",30,0)
 I $D(DVBCHILD) S T1="" D LIN S T1="Child name        DOB       Child Status" D LIN
"RTN","DVBHQM2",31,0)
 I $D(DVBCHILD) F DVBC=0:0 S DVBC=$O(DVBCHILD(DVBC)) Q:'DVBC  S DVBDOB=$P(DVBCHILD(DVBC),U,3),V=$P(DVBCHILD(DVBC),U),T1=$P(DVBCHILD(DVBC),U,2) D CDATE,CHILD D
"RTN","DVBHQM2",32,0)
 . F DVBB=$L(T1):1:10 S T1=T1_" "
"RTN","DVBHQM2",33,0)
 . S T1=T1_"   "_$E(Y_" ",1,11)_"   "_V D LIN
"RTN","DVBHQM2",34,0)
 K DVBPSNAM,DVBSPDOB,DVBCHILD,DVBDOB,V
"RTN","DVBHQM2",35,0)
 ;
"RTN","DVBHQM2",36,0)
 ;-8
"RTN","DVBHQM2",37,0)
 ;with DVB*4*49 Hardship Exp no longer sent by VBA, so removed from line
"RTN","DVBHQM2",38,0)
 S T1=" " D LIN
"RTN","DVBHQM2",39,0)
 S T1="Check Amount= '''                Net Award= '''"
"RTN","DVBHQM2",40,0)
 I $D(DVBBAS(1)) S $P(T1,"'",5,6)="$"_$P(DVBBAS(1),U,20)
"RTN","DVBHQM2",41,0)
 I $D(DVBCHECK) S $P(T1,"'",2,3)="$"_DVBCHECK
"RTN","DVBHQM2",42,0)
 ;I $P(^DIC(8,$P(^DPT(DFN,.36),U),0),U)'="NSC" D LIN
"RTN","DVBHQM2",43,0)
 D LIN
"RTN","DVBHQM2",44,0)
 K DVBCAP
"RTN","DVBHQM2",45,0)
 ;
"RTN","DVBHQM2",46,0)
RINC ;
"RTN","DVBHQM2",47,0)
 I $G(DVBINC)]"" I +$P(DVBINC,U,15)>0 S T1="                Income for VA Purposes= '$"_$P(DVBINC,U,15)_".00'" D LIN
"RTN","DVBHQM2",48,0)
 ;
"RTN","DVBHQM2",49,0)
EX ;
"RTN","DVBHQM2",50,0)
 K C,T2,T1,DVBDXPCT,DVBPT,DVBPTI,DVBAAHB,DVBFIDUC,DVBEI,DVBCI,DVBCPS,DVBSPNAM,DVBSPDOB,DVBCHILD,DVBDOB,V,DVBCHECK,Y
"RTN","DVBHQM2",51,0)
 D ADD^DVBHQM31
"RTN","DVBHQM2",52,0)
 G ERR^DVBHQM3 ;with DVB*4*49 no call made to EN^DVBHQM3
"RTN","DVBHQM2",53,0)
 ;
"RTN","DVBHQM2",54,0)
SHDR S T1=T1_"             Number of CHILDREN"
"RTN","DVBHQM2",55,0)
 I N>31 S C=$P(DVBBAS(1),U,32,35) Q
"RTN","DVBHQM2",56,0)
 ;
"RTN","DVBHQM2",57,0)
RHDR S T1="" D LIN
"RTN","DVBHQM2",58,0)
 S T1="last date    previously    INCOME REPORTED              amount, type" D LIN
"RTN","DVBHQM2",59,0)
 S T1="Reported     Reported    This Year   For VA purposes   Medical or Last Expense" D LIN
"RTN","DVBHQM2",60,0)
 S T1="",$P(T1,"-",80)="" D LIN Q
"RTN","DVBHQM2",61,0)
 ;
"RTN","DVBHQM2",62,0)
FILLER S T1="" F N=14,12,13,15,16,17 I N'=16 S T2=$S(N'=14:"$",1:"")_+$P(DVBINC,U,N),T1=T1_$J(T2,6) S:N<16 T1=T1_"       " I N=17 S T2=$P(DVBINC,U,16) D RTYP S T1=T1_" "_T2 D LIN S T1="" D LIN
"RTN","DVBHQM2",63,0)
 Q
"RTN","DVBHQM2",64,0)
 ;
"RTN","DVBHQM2",65,0)
RTYP S T2=$S(T2=" ":T2,T2="B":"SS/Other",T2="C":"Unusual Med.Exp.",T2="O":"Other",T2="R":"10%Ret.Pay excl.",T2="S":"Social Security",1:"") Q
"RTN","DVBHQM2",66,0)
 ;
"RTN","DVBHQM2",67,0)
AAA S V=Y S:Y>3&(Y<8) V=Y-4 S V=$S(V=0:"HB and/or A&A TERM",V=1:"HOSPITALIZED, HB,A&A PAY",V=2:"PAY A&A",V=3:"HB ONLY ",V=" ":"HB and/or A&A NOT GRANTED",1:"") I +Y,Y>3&(Y<8) S Y=V_", INCREMENT FOR SPOUSE" Q
"RTN","DVBHQM2",68,0)
 S Y=V Q
"RTN","DVBHQM2",69,0)
 ;
"RTN","DVBHQM2",70,0)
CHILD Q:$G(V)'?1U  S V=$S(V="H":"Helpless Child",V="M":"Minor Child",V="N":"Not an award dep.",V="S":"School Child",V="U":"Unclaimed DIC Child",1:"")
"RTN","DVBHQM2",71,0)
 Q
"RTN","DVBHQM2",72,0)
 ;
"RTN","DVBHQM2",73,0)
CPS S Y=$S(Y=1:"Competent,or not an issue,Pay direct",Y=2:"Incompetent by VA, Court .. pay fiduciary",Y=3:"Incompetent by Court, .. pay fiduciary",Y=4:"Competent by Court, Incompetent by VA .. pay direct",Y=5:"Supervised direct pay",1:Y) Q
"RTN","DVBHQM2",74,0)
 ;
"RTN","DVBHQM2",75,0)
SDB I $D(DVBSPDOB),DVBSPDOB I DVBSPDOB?8N S M=$E(DVBSPDOB,1,2) D MM^DVBHQM11 S T1=T1_"    DOB = "_M_" "_$S(+$E(DVBSPDOB,3,4)>0:$E(DVBSPDOB,3,4)_", ",1:" ")_$E(DVBSPDOB,5,8) K M
"RTN","DVBHQM2",76,0)
 Q
"RTN","DVBHQM2",77,0)
 ;
"RTN","DVBHQM2",78,0)
CDATE I DVBDOB'?8N S Y="" Q
"RTN","DVBHQM2",79,0)
 ;change CDATE to receive date as MMDDYYYY - DVB*4*49
"RTN","DVBHQM2",80,0)
 ;change to take in an eight digit date - DVB*4*63
"RTN","DVBHQM2",81,0)
 S M=$E(DVBDOB,1,2) D MM^DVBHQM11
"RTN","DVBHQM2",82,0)
 S Y=M_" "_$S(+$E(DVBDOB,3,4)>0:$E(DVBDOB,3,4)_",",1:" ")_$E(DVBDOB,5,8)
"RTN","DVBHQM2",83,0)
 Q
"RTN","DVBHQM2",84,0)
DEP(X) ;;V-S^V-S-F^V-S-M^V-S-2P^V-F^V-M^V-2P^V^
"RTN","DVBHQM2",85,0)
 ;Dependency codes
"RTN","DVBHQM2",86,0)
 Q:X>89 X Q:X'?2N X
"RTN","DVBHQM2",87,0)
 I X="00" S X="V" Q X
"RTN","DVBHQM2",88,0)
 I X="80" S X="V-C" Q X
"RTN","DVBHQM2",89,0)
 I $E(X,2)=0 S X=$P($P($T(DEP),";;",2),"^",$E(X,1)) Q X
"RTN","DVBHQM2",90,0)
 I X?2N S X=$P($P($T(DEP),";;",2),"^",$E(X,1))_"-"_$E(X,2)_"C" Q X
"RTN","DVBHQM2",91,0)
 Q X
"RTN","DVBHQM2",92,0)
COUNT ;loop through the DVBCHILD array and count the total, helpless and 
"RTN","DVBHQM2",93,0)
 ;school children
"RTN","DVBHQM2",94,0)
 N DVBC,DVBH,DVBS,DVBT
"RTN","DVBHQM2",95,0)
 S (DVBC,DVBH,DVBS,DVBT)=0
"RTN","DVBHQM2",96,0)
 F  S DVBC=$O(DVBCHILD(DVBC)) Q:DVBC'>0  D
"RTN","DVBHQM2",97,0)
 . I $P(DVBCHILD(DVBC),U)="H" S DVBH=DVBH+1
"RTN","DVBHQM2",98,0)
 . I $P(DVBCHILD(DVBC),U)="S" S DVBS=DVBS+1
"RTN","DVBHQM2",99,0)
 . S DVBT=DVBT+1
"RTN","DVBHQM2",100,0)
 S C=DVBT_"^"_+$P(C,U,2)_"^"_DVBS_"^"_DVBH
"RTN","DVBHQM2",101,0)
 Q
"RTN","DVBHQR11")
0^2^B30574454^B30529777
"RTN","DVBHQR11",1,0)
DVBHQR11 ;ISC-ALBANY/PKE-parse HINQ response ; 6/10/09 7:39pm
"RTN","DVBHQR11",2,0)
 ;;4.0;HINQ;**32,35,49,63**;03/25/92 ;Build 2
"RTN","DVBHQR11",3,0)
 ;
"RTN","DVBHQR11",4,0)
 ;
"RTN","DVBHQR11",5,0)
STAT ;Parse Statistics Segment for the records that have it.
"RTN","DVBHQR11",6,0)
 I ($P(DVBBAS(1),U,6)="A"!($P(DVBBAS(1),U,6)="E")),$P(DVBBAS(1),U,4)="00" D ASTAT
"RTN","DVBHQR11",7,0)
 I $P(DVBBAS(1),U,6)="B"!($P(DVBBAS(1),U,6)="F") D BSTAT
"RTN","DVBHQR11",8,0)
 I $P(DVBBAS(1),U,6)="E",$P(DVBBAS(1),U,4)'="00" D BSTAT
"RTN","DVBHQR11",9,0)
 I $P(DVBBAS(1),U,6)="C",$P(DVBBAS(1),U,4)=10 D CSTAT
"RTN","DVBHQR11",10,0)
 I $P(DVBBAS(1),U,6)="C",$P(DVBBAS(1),U,4)'=10 S DVBVET="C^^^^"
"RTN","DVBHQR11",11,0)
 ;
"RTN","DVBHQR11",12,0)
 G CHILD ;changing the order of the response message - diag will
"RTN","DVBHQR11",13,0)
 ;come at the very end to accommodate variable length records
"RTN","DVBHQR11",14,0)
 ;
"RTN","DVBHQR11",15,0)
DIAG ;Diagnostics Segment.
"RTN","DVBHQR11",16,0)
 K DXP,DX,DVBDX,DVBEFF
"RTN","DVBHQR11",17,0)
 N DVBCUR,DVBEXT,DVBORIG
"RTN","DVBHQR11",18,0)
 ;with the HINQ replacement, interim solution (DVB*4*49) there are 
"RTN","DVBHQR11",19,0)
 ;several changes to the diagnostic segment.  Total # codes, Add'l
"RTN","DVBHQR11",20,0)
 ;codes, length of segment are not longer being sent.  # SC Codes is
"RTN","DVBHQR11",21,0)
 ;being stored in DVBDXNO.  The for loop at DIAG+15 will terminate
"RTN","DVBHQR11",22,0)
 ;after DVBDXNO, the 6 code limit from VBA has been increased to 150.
"RTN","DVBHQR11",23,0)
 ;Total # of SC Diagnostic Codes.
"RTN","DVBHQR11",24,0)
 S DVBV1=$E(X,1,3)
"RTN","DVBHQR11",25,0)
 I DVBV1["{" S DVBV2=2 D SIGN^DVBHUTIL Q:$G(DVBERCS)  ;????
"RTN","DVBHQR11",26,0)
 S DVBDXNO=+DVBV1
"RTN","DVBHQR11",27,0)
 ;Combined Degree of Disability, Effective Date of Combined SC% Eval
"RTN","DVBHQR11",28,0)
 S DVBDXPCT=$E(X,4,6)
"RTN","DVBHQR11",29,0)
 S DVBDXPCT=$TR(DVBDXPCT," ")
"RTN","DVBHQR11",30,0)
 S DVBEFF=$E(X,7,14)
"RTN","DVBHQR11",31,0)
 S DVBEFF=$TR(DVBEFF," ")
"RTN","DVBHQR11",32,0)
 S L=15 D RON S L=1
"RTN","DVBHQR11",33,0)
 ;Y=Diagnostic Codes; DXP(I)=Percent of Disability:
"RTN","DVBHQR11",34,0)
 F I=1:1:DVBDXNO D
"RTN","DVBHQR11",35,0)
 . D RON S L=1
"RTN","DVBHQR11",36,0)
 . I $E(X,L,L+3)["    "!($E(X,L,L+3)']"") S L=L+25 Q
"RTN","DVBHQR11",37,0)
 . S Y=$E(X,L,L+3),DXP(I)=$E(X,L+4,L+6)
"RTN","DVBHQR11",38,0)
 . S DVBEXT(I)=$E(X,L+7,L+8)
"RTN","DVBHQR11",39,0)
 . S DVBEXT(I)=$TR(DVBEXT(I)," ")
"RTN","DVBHQR11",40,0)
 . S DVBORIG(I)=$E(X,L+9,L+16)
"RTN","DVBHQR11",41,0)
 . S DVBORIG(I)=$TR(DVBORIG(I)," ")
"RTN","DVBHQR11",42,0)
 . S DVBCUR(I)=$E(X,L+17,L+24)
"RTN","DVBHQR11",43,0)
 . S DVBCUR(I)=$TR(DVBCUR(I)," ")
"RTN","DVBHQR11",44,0)
 . S L=L+25 I DXP(I)'="   " S DX(I)="" F J=1:1:4 S Z=$E(Y,J) S:Z'?1N Z=$A(Z)-64 S:Z>9 Z=0 S DX(I)=DX(I)_Z
"RTN","DVBHQR11",45,0)
 F I=0:0 S I=$O(DX(I)) Q:'I  S Y=DX(I),DX(I)=$S($O(^DIC(31,"C",+DX(I),0)):$O(^(0)),1:"") S DVBDX(I)=Y_"^"_DX(I)_"^"_DXP(I)_"^"_$G(DVBEXT(I))_"^"_$G(DVBORIG(I))_"^"_$G(DVBCUR(I))
"RTN","DVBHQR11",46,0)
 ;
"RTN","DVBHQR11",47,0)
 ;sorting by SC% so that they will be saved and displayed that way
"RTN","DVBHQR11",48,0)
 N DVBCT,DVBDD,DVBE,DVBEE
"RTN","DVBHQR11",49,0)
 F DVBE=0:0 S DVBE=$O(DVBDX(DVBE)) Q:DVBE'>0  S DVBDD(+$P(DVBDX(DVBE),U,3),DVBE)=DVBDX(DVBE)
"RTN","DVBHQR11",50,0)
 S DVBE="",DVBCT=1
"RTN","DVBHQR11",51,0)
 F  S DVBE=$O(DVBDD(DVBE),-1) Q:DVBE']""  D
"RTN","DVBHQR11",52,0)
 . F DVBEE=0:0 S DVBEE=$O(DVBDD(DVBE,DVBEE)) Q:DVBEE'>0  D
"RTN","DVBHQR11",53,0)
 . . S DVBDX(DVBCT)=DVBDD(DVBE,DVBEE) S DVBCT=DVBCT+1
"RTN","DVBHQR11",54,0)
 K DVBDD,DX,DXP
"RTN","DVBHQR11",55,0)
 Q
"RTN","DVBHQR11",56,0)
 S L=L+1 D RON
"RTN","DVBHQR11",57,0)
 ;
"RTN","DVBHQR11",58,0)
CHILD ;Child-Birth-Data.
"RTN","DVBHQR11",59,0)
 S $P(DVBCHI,U,1)=$E(X,1,2)
"RTN","DVBHQR11",60,0)
 S DVBV1=$E(X,3,4)
"RTN","DVBHQR11",61,0)
 I DVBV1?1N1A!(DVBV1["{") S DVBV2=2 D SIGN^DVBHUTIL Q:$G(DVBERCS)
"RTN","DVBHQR11",62,0)
 S DVBCHNO=DVBV1,L=5,J1=0 D RON
"RTN","DVBHQR11",63,0)
 I 'DVBCHNO S DVBCHNO=0 F DVBV=1:1:20 S L=20 D RON
"RTN","DVBHQR11",64,0)
 E  F DVBV=1:1:20 S DVBV1=$E(X,1,19),L=20 D RON I DVBV'>DVBCHNO S DVBCHDOB=$E(DVBV1,1,8) S:DVBCHDOB?8N J1=J1+1,DVBCHILD(J1)=$E(DVBV1,9)_U_$E(DVBV1,10,19)_U_DVBCHDOB
"RTN","DVBHQR11",65,0)
 K DVBCHDOB,J1,DVBV1,DVBV
"RTN","DVBHQR11",66,0)
 ;
"RTN","DVBHQR11",67,0)
WITH ;WITHHOLDING-APPORTIONED-SEGMENT.
"RTN","DVBHQR11",68,0)
 S $P(DVBWIT,U,1)=$E(X,1),DVBV1=$E(X,2,7)
"RTN","DVBHQR11",69,0)
 I DVBV1?5N1A!(DVBV1["{") S DVBV2=6 D SIGN^DVBHUTIL Q:$G(DVBERCS)
"RTN","DVBHQR11",70,0)
 S $P(DVBWIT,U,2)=+$E(DVBV1,1,4)_"."_$E(DVBV1,5,6)
"RTN","DVBHQR11",71,0)
 S DVBV1=$E(X,8,13)
"RTN","DVBHQR11",72,0)
 I DVBV1?5N1A!(DVBV1["{") S DVBV2=6 D SIGN^DVBHUTIL Q:$G(DVBERCS)
"RTN","DVBHQR11",73,0)
 S $P(DVBWIT,U,3)=+$E(DVBV1,1,4)_"."_$E(DVBV1,5,6)
"RTN","DVBHQR11",74,0)
 S DVBV1=$E(X,14,19)
"RTN","DVBHQR11",75,0)
 I DVBV1?5N1A!(DVBV1["{") S DVBV2=6 D SIGN^DVBHUTIL Q:$G(DVBERCS)
"RTN","DVBHQR11",76,0)
 S $P(DVBWIT,U,4)=+$E(DVBV1,1,4)_"."_$E(DVBV1,5,6),$P(DVBWIT,U,5)=$E(X,20)
"RTN","DVBHQR11",77,0)
 S L=21 D RON
"RTN","DVBHQR11",78,0)
 ;
"RTN","DVBHQR11",79,0)
NMADR ;ADDRESS-SEGMENT.
"RTN","DVBHQR11",80,0)
 S M("+")=7 F I=65:1:70 S M($C(I))=71-I
"RTN","DVBHQR11",81,0)
 S M("-")=15 F I=74:1:80 S M($C(I))=88-I
"RTN","DVBHQR11",82,0)
 F I=84:1:88 S M($C(I))=104-I
"RTN","DVBHQR11",83,0)
 S M("&")=7
"RTN","DVBHQR11",84,0)
 ;Blank & Length of Segment:
"RTN","DVBHQR11",85,0)
 S $P(DVBADD,U,1)=$E(X,1),DVBV1=$E(X,2,4)
"RTN","DVBHQR11",86,0)
 I DVBV1?2N1A!(DVBV1["{") S DVBV2=3 D SIGN^DVBHUTIL Q:$G(DVBERCS)
"RTN","DVBHQR11",87,0)
 S $P(DVBADD,U,2)=DVBV1
"RTN","DVBHQR11",88,0)
 ;Sequence Control:
"RTN","DVBHQR11",89,0)
 S $P(DVBADD,U,3)=$E(X,5)
"RTN","DVBHQR11",90,0)
 ;Name Line Indicator:
"RTN","DVBHQR11",91,0)
 S $P(DVBADD,U,4)=$E(X,6)
"RTN","DVBHQR11",92,0)
 ;Zip Code:
"RTN","DVBHQR11",93,0)
 S DVBZIP=$E(X,7,15)
"RTN","DVBHQR11",94,0)
 S DVBZIP=$E(DVBZIP,1,5) ;use only 1st 5 digits - DVB*4*49
"RTN","DVBHQR11",95,0)
 S L=16,L1=15
"RTN","DVBHQR11",96,0)
 F I=1:1:DVBADRLN Q:$E(X,L)=" "!($E(X,L)="")  Q:'$G(M($E(X,L)))  S M=M($E(X,L)),DVBADR(I)=$E(X,L+1,L+M),L=L+M+1,L1=L1+M+1 D RON S L=1
"RTN","DVBHQR11",97,0)
 S $P(DVBADD,U,18)=145-L1
"RTN","DVBHQR11",98,0)
 S L=$P(DVBADD,U,18)+1 D RON
"RTN","DVBHQR11",99,0)
 K M,L1
"RTN","DVBHQR11",100,0)
 ;instead of calling DEDBL^DVBHQR12 call REF^DVBHQR12, since the DED/BAL
"RTN","DVBHQR11",101,0)
 ;segments will no longer be included in the VBA resp message, DVB*4*49
"RTN","DVBHQR11",102,0)
 G REF^DVBHQR12
"RTN","DVBHQR11",103,0)
 ;
"RTN","DVBHQR11",104,0)
RON S X=$E(X,L,999),LX=$L(X),LY=254-LX I $D(X(2)),(LX+$L(X(2)))<256 S X=X_X(2) K X(2) D RON1 Q
"RTN","DVBHQR11",105,0)
 I $D(X(2)) S X=X_$E(X(2),1,LY),X(2)=$E(X(2),LY+1,999) Q
"RTN","DVBHQR11",106,0)
 Q
"RTN","DVBHQR11",107,0)
 ;
"RTN","DVBHQR11",108,0)
RON1 F Z1=3:1:99 I $D(X(Z1)),'$D(X(Z1-1)) S X(Z1-1)=X(Z1) K X(Z1) Q:'$O(X(Z1))
"RTN","DVBHQR11",109,0)
 QUIT
"RTN","DVBHQR11",110,0)
 ;
"RTN","DVBHQR11",111,0)
ASTAT ;Statistics Segment of Type A Record.
"RTN","DVBHQR11",112,0)
 S $P(DVBVET,U,1)="A",$P(DVBVET,U,2)=$E(X,1)
"RTN","DVBHQR11",113,0)
 S $P(DVBVET,U,3)=$E(X,2)
"RTN","DVBHQR11",114,0)
 S DVBBOS(1)=$E(X,3),DVBEOD(1)=$E(X,4,11),DVBRAD(1)=$E(X,12,19),DVBASVC=$E(X,20),DVBDOB=$E(X,21,28)
"RTN","DVBHQR11",115,0)
 S $P(DVBVET,U,9)=$E(X,29,30),$P(DVBVET,U,10)=$E(X,31)
"RTN","DVBHQR11",116,0)
 S $P(DVBP(2),U,2)=$E(X,32)
"RTN","DVBHQR11",117,0)
 S DVBEI=$E(X,33),DVBCI=$E(X,34)
"RTN","DVBHQR11",118,0)
 S $P(DVBVET,U,14)=$E(X,35)
"RTN","DVBHQR11",119,0)
 S DVBCPS=$E(X,36)
"RTN","DVBHQR11",120,0)
 S DVBPTI=$E(X,37)
"RTN","DVBHQR11",121,0)
 S $P(DVBP(2),U,6)=$E(X,38,39),$P(DVBP(2),U,3)=$E(X,40,41),$P(DVBP(2),U,1)=$E(X,42,43),$P(DVBP(2),U,4)=$E(X,44),$P(DVBP(2),U,5)=$E(X,45)
"RTN","DVBHQR11",122,0)
 S L=46 D RON
"RTN","DVBHQR11",123,0)
 S DVBSPDOB=$E(X,1,8)
"RTN","DVBHQR11",124,0)
 ;leave spouse DOB in format MMDDYYYY
"RTN","DVBHQR11",125,0)
 S DVBSPNAM=$E(X,9,18) ;;;DVBPTI=$E(X,40)
"RTN","DVBHQR11",126,0)
 ;Hospitalized SMC code:
"RTN","DVBHQR11",127,0)
 S $P(DVBVET,U,24)=$E(X,19,20)
"RTN","DVBHQR11",128,0)
 ;DOB of Father:
"RTN","DVBHQR11",129,0)
 S $P(DVBVET,U,25)=$E(X,21,28)
"RTN","DVBHQR11",130,0)
 ;DOB of Mother:
"RTN","DVBHQR11",131,0)
 S $P(DVBVET,U,26)=$E(X,29,36)
"RTN","DVBHQR11",132,0)
 ;Blanks:
"RTN","DVBHQR11",133,0)
 S $P(DVBVET,U,27)=$E(X,37,40)
"RTN","DVBHQR11",134,0)
 S L=41 D RON
"RTN","DVBHQR11",135,0)
 Q
"RTN","DVBHQR11",136,0)
 ;
"RTN","DVBHQR11",137,0)
BSTAT ;Statistics Segment of Type B Record.
"RTN","DVBHQR11",138,0)
 S $P(DVBVET,U,1)="B",$P(DVBVET,U,2)=$E(X,1)
"RTN","DVBHQR11",139,0)
 S $P(DVBVET,U,3)=$E(X,2)
"RTN","DVBHQR11",140,0)
 S DVBBOS(1)=$E(X,3),DVBEOD(1)=$E(X,4,11),DVBRAD(1)=$E(X,12,19),DVBASVC=$E(X,20),DVBDOB=$E(X,21,28)
"RTN","DVBHQR11",141,0)
 S DVBDOB=$E(DVBDOB,5,8)_$E(DVBDOB,1,4)
"RTN","DVBHQR11",142,0)
 S $P(DVBVET,U,9)=$E(X,29,30),$P(DVBVET,U,10)=$E(X,31,37)
"RTN","DVBHQR11",143,0)
 ;Age at Death & Death Date:
"RTN","DVBHQR11",144,0)
 S $P(DVBVET,U,11)=$E(X,38,39),$P(DVBVET,U,12)=$E(X,40,47)
"RTN","DVBHQR11",145,0)
 ;Blank & Pay Grade
"RTN","DVBHQR11",146,0)
 S $P(DVBVET,U,13)=$E(X,48),$P(DVBVET,U,14)=$E(X,49,50)
"RTN","DVBHQR11",147,0)
 ;DOB of Payee & DOB of 3rd Party:
"RTN","DVBHQR11",148,0)
 S $P(DVBVET,U,15)=$E(X,51,58),$P(DVBVET,U,16)=$E(X,59,66)
"RTN","DVBHQR11",149,0)
 ;Name of 3rd Party & Filler
"RTN","DVBHQR11",150,0)
 S $P(DVBVET,U,17)=$E(X,67,73),$P(DVBVET,U,18)=$E(74,85)
"RTN","DVBHQR11",151,0)
 S L=86 D RON
"RTN","DVBHQR11",152,0)
 Q
"RTN","DVBHQR11",153,0)
 ;
"RTN","DVBHQR11",154,0)
CSTAT ;Statistics Segment of Type C Record.
"RTN","DVBHQR11",155,0)
 S $P(DVBVET,U,1)="C",$P(DVBVET,U,2)=$E(X,1)
"RTN","DVBHQR11",156,0)
 ;CP-APPORT-SPOUSE NAME & DOB
"RTN","DVBHQR11",157,0)
 S $P(DVBVET,U,3)=$E(X,2,11),$P(DVBVET,U,4)=$E(X,12,19)
"RTN","DVBHQR11",158,0)
 S $P(DVBVET,U,5)=$E(X,20,25)
"RTN","DVBHQR11",159,0)
 S L=86 D RON
"RTN","DVBHQR11",160,0)
 Q
"VER")
8.0^22.0
"BLD",8098,6)
^58
**END**
**END**
