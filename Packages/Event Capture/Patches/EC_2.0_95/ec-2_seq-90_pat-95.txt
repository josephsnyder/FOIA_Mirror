
=============================================================================
Run Date: SEP 22, 2008                     Designation: EC*2*95
Package : EC - EVENT CAPTURE                  Priority: Mandatory
Version : 2        SEQ #90                      Status: Released
                  Compliance Date: OCT 23, 2008
=============================================================================

Associated patches: (v)EC*2*65     <<= must be installed BEFORE `EC*2*95'
                    (v)EC*2*82     <<= must be installed BEFORE `EC*2*95'
                    (v)EC*2*88     <<= must be installed BEFORE `EC*2*95'
                    (v)EC*2*90     <<= must be installed BEFORE `EC*2*95'
                    (v)EC*2*92     <<= must be installed BEFORE `EC*2*95'
                    (v)EC*2*94     <<= must be installed BEFORE `EC*2*95'

Subject: ECS FY08 ENHANCEMENTS

Category: 
  - Data Dictionary
  - Routine
  - Enhancement (Mandatory)
  - Informational

Description:
============

 I. OVERVIEW
  
 ************************************************************************
 This patch is informational only.  The software for this patch consists
 of a GUI client install and a KIDS host file build.  Please refer to
 the SOFTWARE AND DOCUMENTATION RETRIEVAL section of this patch message
 for retrieval instructions.
 ************************************************************************
  
 The Health Administration Center (HAC) DSS Program office annually
 requests modifications to the Event capture System that would provide
 the field with improved data entry capabilities so that accurate
 costing information can be gathered nationally.  This patch contains
 the modifications for Fiscal Year 2008 and Remedy ticket fixes.
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 1. 20070573    Event Capture 2008 Updates
 2. 20070206    Event Capture GUI Enhancements
 3. 20060809    Increase RPC Time limit in EC GUI for preview of the 
                Provider (1-7) Summary Report
 4. 20050202    Event Capture Volume Field Enhancement
  
  
 This patch addresses the following Remedy tickets:
 --------------------------------------------------
 1. HD0000000223010:  HCPC S9449 not passing to PCE
    Duplicates:
      HD0000000236532: CPT codes beginning with an alphabetical character
                     are not passing over to PCE
  
    Problem:
    ------------
    The Event Capture GUI data entry records that have HCPCS codes are
    not passing to PCE.
  
    Resolution:
    ----------------
    Routine ECEFPAT was modified to add validation for both CPT
    and HCPCS codes to allow Event Capture GUI data entry records
    containing valid HCPCS codes to pass to PCE.
  
  
 2. HD0000000141930:  Patient in Vista w/2Char last name--spreadsheet
                      will not upload
  
    Problem:
    ------------
    When a patient has two character lastname the upload hangs.  An error
    message indicates that the patient's last name does not match Vista,
    but the patient did exist in VistA.
  
  
    Resolution:
    ---------------
    Routine ECV2RPC was modified to correctly validate 2-character last
    names.
  
  
 II. FUNCTIONAL OVERVIEW
  
   1.  The Event Capture System (ECS) to Patient Care Encounter
       (PCE) update has been modified.  Only the Event Capture portion
       of the visit record will be deleted prior to applying the update.
       This will prevent the inadvertent loss of other visit information,
       such as Progress Notes or Clinical Reminders, when editing an
       Event Capture record.
  
   2.  The Provider (1-7) Summary Report RPC Broker timeout error that
       occurs when using the Preview button has been addressed.
  
       a. The RPC Broker timeout value has been increased to allow the
          more time for the report to complete when a large date range
          is selected.
  
       b. A new dialog box was added to display immediately after clicking
          the Preview button.  The dialog box will display the message
          that the report is "Waiting for data from server...".
  
       c. A new 'APRV' cross reference  has been added to the
          EVENT CAPTURE PATIENT (#721) file to improve report performance.
  
   3.  The function buttons at the top of the Spreadsheet Upload screen
       have been enhanced to allow the user to use the tab key to access
       the buttons.
  
   4.  The data entry options have been modified to prevent patient-
       specific informational messages from displaying until the user
       has selected the desired patient.
   
       This modification affects the following options:
       
       o  Data Entry by Patient - Enter/Edit Patient Procedure(s)
       o  Data Entry by Procedure - Batch (Same Procedure, Multiple Patients)
       o  Multiple Dates/ Procs - Multiple Dates / Multiple Procedures
  
  
   5.  The validation of two character last names in the Spreadsheet
       Upload option has been modified to prevent two character last
       names from causing the Spreadsheet Upload option to hang.
       In addition, the messages returned when the name validation
       fails have been modified.
  
       The following new messages have been added:
         o  Patient last name doesn't match VistA
         o  Patient first name doesn't match VistA
  
       The following old messages have been deleted:
         o  First 2 chars of patient last name don't match VistA
         o  First 3 chars of patient last name don't match VistA
         o  First 4 chars of patient last name don't match VistA
         o  First char of patient last name doesn't match VistA
  
   6.  The Data Entry by Patient option has been modified to retain the
       selected Providers after clicking the Add button.
  
   7.  The National/Local Procedure Report and the Category Report have
       been modified to display the report title when using the Preview
       button.
  
   8.  Seven Event Capture reports have been modified by adding the
       following explanatory text to the bottom of each page:
         "Volume totals may represent days, minutes, numbers of   
          procedures and/or a combination of these."
  
       The modified reports are:
         o  Patient Summary Report
         o  DSS Unit Workload Summary Report
         o  Provider Summary Report
         o  Ordering Section Summary Report
         o  Provider (1-7) Summary Report
         o  PCE Data Summary Report
         o  DSS Unit Activity Report (new report provided in this patch) 
  
   9.  The Print Category and Procedure Summary (Report) and the
       Event Code Screens with CPT Codes Report selection screens have
       been enhanced by adding "<ALL>" as a Location selection choice.
       This allows the user to generate the reports for all locations.
  
  10.  A new report, "DSS Unit Activity Report", has been added to list
       all patients for a specific DSS Unit for a range of dates.
  
  11.  The Data Entry by Procedure option has been enhanced to reduce
       user keystrokes, by retaining data entered on the left side of
       the screen.
  
       The enhancements allow the user to return to a previously
       completed field on the left side of the data entry screen and
       tab or click out of it without automatically clearing all
       following fields.
  
       In the case of the procedure date and time field, if a previous
       field is modified that results in a selected DSS Unit that is
       defined with a default date/time of "None", the procedure date
       and time will be cleared.
  
       In the case of the selected modifiers and selected providers, if
       a previous field is modified and available lists are updated, the
       current selected list will be checked against the updated available
       list.  If a selected modifier is no longer in the corresponding list
       of available modifiers, that selected modifier is removed.
       A selected modifier which is still found in the updated list of
       available modifiers will be kept in the selected list.  Selected
       providers are processed in the same way.
  
       Patient information on the right side of the screen will now be
       preserved following changes on the left side of the screen.
  
  12.  The Multiple Date/Multiple Procedure option has been modified by
       the addition of a new 'Add' button.  After the user clicks the 'Add'
       button, the Multiple Date/Multiple Procedure screen will continue
       to display.  In addition, the Location, DSS Unit, Category and
       Provider fields will remain populated ready for another entry.
       The function of the 'OK' button will remain unchanged, filing the
       entry and closing the option.
  
  13.  The data entry options have been modified to display "Press F1
       to view Service Connection and Rated Disability information" in
       the status line at the bottom of the screen.
  
       This modification affects the following options:
       
       o  Data Entry by Patient - Enter/Edit Patient Procedure(s)
       o  Data Entry by Procedure - Batch (Same Procedure, Multiple Patients)
       o  Multiple Dates/ Procs - Multiple Dates / Multiple Procedures
  
  14.  The Add Event Code Screen option has been modified by adding the
       ability to select '<ALL>' as a Location choice.  This will allow
       the user to add an Event Code Screen for all divisions in a
       multi-divisional system by only entering the data once.
  
  15.  The name of Nightly Data Feed to PCE [EC NIGHT] option was changed
       to EC Data Feed to PCE [EC PCE FEED] and the option description
       was modified to comply with the CHANGING THE FREQUENCY OF [EC NIGHT]
       OPTION informational patch EC*2.0*83.
  
  16.  The process used to transfer Event Capture data to PCE has been
       modified to allow the user name of the person that created the
       Event Capture entry to be used as the creator of the PCE Visit
       entry.
  
       a. The Event Capture filer will now trigger an immediate data
          transfer to PCE in the background after the Event Capture
          record is filed.
  
       b. The PCE data transfer will no longer depend on the EC DATA
          FEED TO PCE [EC PCE FEED] option to transfer the data.
  
  17.  The data entry options have been modified to prevent inactive
       procedure modifiers from being displayed.
  
       This modification affects the following options:
       
       o  Data Entry by Patient - Enter/Edit Patient Procedure(s)
       o  Data Entry by Procedure - Batch (Same Procedure, Multiple Patients)
       o  Multiple Dates/ Procs - Multiple Dates / Multiple Procedures
  
  
  
 III.  COMPONENTS SENT WITH PATCH
  
   A. The following File/Field has been modified:
  
     1.       File: EVENT CAPTURE PATIENT (#721)
             Field: PROVIDER MULTIPLE (#42)
          Subfield: PROVIDER (#.01)
       Description: A new whole file cross-reference ('APRV') has been
                    added to improve the performance of provider-based
                    reports.
  
  
   B. The following Remote Procedure has been modified:
  
     1.         Name: EC GETLIST
         Description: The ECARY parameter was modified to add an additional
                      optional fourth "^"-delimited piece to contain the
                      desired number of records to return.  The INPUT
                      PARAMETER DESCRIPTION was updated to document the
                      modification.
  
  
   C. The following new Help Frame has been added:
  
     1.       Name: ECRDSSA
            Header: DSS Unit Activity Report
       Description: The new help frame has been added to support the
                    new DSS Unit Activity Report.
  
  
   D. The following Options have been modified:
  
     1.       Name: EC GUI CONTEXT
              Type: BROKER
       Description: The MENU TEXT has been changed to "EC GUI Context
                    version 2.1.1.0".
  
  
     2.       Name: EC PCE FEED
              Type: RUN ROUTINE
       Description: The existing EC NIGHT option is being renamed to
                    EC PCE FEED during the patch environment check.
                    The MENU TEXT has been changed to "EC Data Feed to PCE".
  
  
 IV. SOFTWARE AND DOCUMENTATION RETRIEVAL
     The software for this patch is NOT being distributed through the National
     Patch Module (NPM).  The VistA server software for this patch is being
     distributed in a host file.  The host file will contain one KIDS file.
  
                 Host File Name:  EC_20_P95.KID (ASCII)
                         Builds:  EC*2.0*95
  
     The Event Capture GUI client software is being distributed as a self-
     extracting Install Shield executable.  The installed executable for
     this patch is client version 2.1.1.0 with a size of 2,377 KB.
  
   The VistA server software, GUI client, and documentation for this patch
   may be retrieved directly using FTP from the ANONYMOUS.SOFTWARE  directory
   at the following Office of Information (OI) Field Offices:
  
   OIFO               FTP ADDRESS                  DIRECTORY
   ------------       ------------------------     ------------------
   First available    download.vista.med.va.gov    anonymous.software
   Albany             ftp.fo-albany.med.va.gov     anonymous.software
   Hines              ftp.fo-hines.med.va.gov      anonymous.software
   Salt Lake City     ftp.fo-slc.med.va.gov        anonymous.software
  
  The following files will be available:
  
     File Name           Format        Description
     ---------           ------        -----------
     EC_20_P95.KID       ASCII         EC VistA server software
     EC2_0P95.EXE        BINARY        EC GUI client application
  
 The Release Notes, Updated User Manual, and Updated Cookbook manual
 can be obtained via FTP from the following ANONYMOUS.SOFTWARE directories:
  
         OI Field Office                 FTP Address
        ---------------                  ------------------------
         Albany                          ftp.fo-albany.med.va.gov
         Hines                           ftp.fo-hines.med.va.gov
         Salt Lake City                  ftp.fo-slc.med.va.gov
   
          File Name           Description
          ----------------    ----------------------------------------
          EC_20_P95_RN.DOC    Release Notes for ECS FY08 Enhancements
          EC_20_P95_UM.DOC    Updated Event Capture User Manual
          EC_20_P95_CB.DOC    Updated Event Capture Cookbook
  
  
   The VistA Documentation Library [VDL] web site will contain the
   updated 'Event Capture User Manual', 'Cookbook', and 'Release Notes'.
   This web site is usually updated within 1-3 days of the patch release
   date.
  
   The VDL address is http://www.va.gov/vdl/application.asp?appid=39.
  
 V. TEST SITES
  
 The following sites participated in the testing of the EC*2.0*95 software.
  
  Test Site
  ------------------------
  ST. CLOUD, MN -VAMC
  LITTLE ROCK, AR (C)
  CENTRAL PLAINS HEALTH NETWORK
  
  
 VI. INSTALLATION INSTRUCTIONS
  
   ********************* IMPORTANT NOTE ***************************
   This patch updates the software version number of both the VistA
   server software and the Event Capture client GUI to version 2.1.1.0.
   GUI client versions prior to version 2.1.1.0 are not compatible with 
   the VistA server software for this patch.  Therefore, it is crucial
   that the Event Capture client GUI distributed with this patch be
   installed immediately following the VistA server software install
   to minimize service disruption to the Event Capture System users.
  
  
  Pre-Installation Overview:
  =========================
  The Environment Check will rename the existing EC NIGHT option to 
  EC PCE FEED and verify that the installer possesses FileMan programmer
  access.
  
  
  Post-Installation Overview:
  ==========================
  1. The new 'APRV' whole file cross-reference on the EVENT CAPTURE PATIENT
  (#721) file will be automatically populated by the post-install routine
  using TaskMan.  A MailMan message will be sent to the installer signalling
  successful completion or that the task was stopped with instructions on 
  how to re-run it.  This process may take 30 minutes or more to complete.
  
  Sample message for a successful run:
  
  Subj: Patch EC*2.0*95 ECS FY08 Enhancements  [#2016887] 07/29/08@13:14  8 lin
  From: 'APRV' RE-INDEX  In 'IN' basket.   Page 1  *New*
  -----------------------------------------------------------------------------
  
           Facility Name:  ALBANY
          Station Number:  500
  
   Date/Time job started:  Jul 29, 2008@13:14:36
   Date/Time job stopped:  Jul 29, 2008@13:14:37
  
  'APRV' Index Populated Successfully
  
  
  2. Since the Event Capture data transfer to PCE process will no longer
  be dependent on the scheduled EC DATA FEED TO PCE [EC PCE FEED] option
  following the installation of this patch, the option may be unscheduled
  the day after the patch installation.  The one day delay will allow
  the option to process any existing queued transfer records.
  
  
  Pre-Installation Items:
  =======================
  
  * Environment Check:
      
     Programmer access is required for installing this patch.
  
     ** NOTE ** -- Prior to installation, the installer must ensure the  
                   DUZ(0) node of the DUZ array is set to the "@" symbol.
   
  * Users On the System:
    
     This patch modifies routines used by the Event Capture application and
     may affect many users.
  
     This patch may be installed with users on the system, but should be
     loaded during non-peak hours to minimize disruption to users and to
     reduce the possibility of errors when the routines are updated.
  
     If installed during the normal workday, it is recommended that the
     following selection(s) in the OPTION (#19) file, and all of their
     descendants be disabled to prevent possible conflicts while running
     the KIDS Install. Other VISTA users will not be affected.
  
           Event Capture Menu               ... ECMENU
           Event Capture Management Menu    ... ECMGR
           EC GUI Context version 2.1.1.0   ... EC GUI CONTEXT
    
  * Software Installation Time:
  
     The estimated installation time is less than 5 minutes during off peak
     hours.
  
  * Required Builds:
    
     The following is a list of REQUIRED builds for this KIDS
     distribution.  KIDS will not allow the installation of this patch
     without their prior installation.
  
     Required Build(s):
     ------------------
     EC*2.0*65
     EC*2.0*82
     EC*2.0*88
     EC*2.0*90
     EC*2.0*92
     EC*2.0*94
  
  
  Installation Steps:
  ===================
   1.  Download the KIDS file EC_20_P95.KID from the ANONYMOUS.SOFTWARE
       directory of the Albany, Hines, or Salt Lake City OIFO ftp server
       to the appropriate directory on your system.
  
   2.  LOAD TRANSPORT GLOBAL
       ---------------------
       Use LOAD A DISTRIBUTION option on the KIDS INSTALLATION menu, and
       enter: EC_20_P95.KID
  
   3.  START UP KIDS
       -------------
       Start up the Kernel Installation and Distribution System Menu
       [XPD MAIN]:
  
         Edits and Distribution ...
         Utilities ...
         Installation ...
  
       Select Kernel Installation & Distribution System Option: INStallation
                                                                ---
         Load a Distribution
         Print Transport Global
         Compare Transport Global to Current System
         Verify Checksums in Transport Global
         Install Package(s)
         Restart Install of Package(s)
         Unload a Distribution
         Backup a Transport Global
  
       Select Installation Option:
  
   4.  Select Installation Option:
       ---------------------------
       NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
              NAME, enter EC*2.0*95):
  
       a.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
       b.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed.  It compares all components of this patch
           (routines, DD's, templates, etc.).
       c.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
  
   5.  Select Installation Option: Install Package(s)
                                   -----------------
       **This is the step to start the installation of this KIDS patch:
  
       a.  Choose the Install Package(s) option to start the patch
           install.
  
           When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
           Install? YES//'  Answer YES unless your system does this in a
           nightly TaskMan process.
       b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
           YES//' answer NO (unless otherwise indicated)
       c.  When prompted 'Want to DISABLE Scheduled Options, Menu
           Options, and Protocols? YES//' answer YES (unless otherwise
           indicated)
       d.  When prompted 'Enter options you wish to mark as 'Out Of
           Order':'  Enter the following options:
      
            Event Capture Menu               ... ECMENU
            Event Capture Management Menu    ... ECMGR
            EC GUI Context version 2.1.1.0   ... EC GUI CONTEXT
  
       e.  When prompted 'Enter protocols you wish to mark as 'Out Of
           Order':' press <return>.
  
   6.  The ENV/PRE/POST Installation routine EC20P95 may be deleted
       from your system after successful patch installation and the
       successful population of the 'APRV' index.
  
   7.  Install the Event Capture GUI client software following the
       instructions on pages 12-16 of the EC GUI Installation Guide
       found on the VistA Documentation Library (VDL) at the following
       link: http://www.va.gov/vdl/application.asp?appid=39
  
   8.  The Event Capture GUI executable file "ECS GUI.exe", that
       is unbundled after running the install in step #7, may be
       copied to another machine without additional supporting files.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;2.0; EVENT CAPTURE ;**[Patch List]**; 8 MAY 96;Build 6

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: EC20P95
    Before:       n/a   After: B17418626  **95**
Routine Name: ECBEN2U
    Before: B32288429   After: B34259052  **4,5,7,10,17,18,23,42,47,54,72,95**
Routine Name: ECDSS1
    Before: B13685323   After: B15692712  **4,25,95**
Routine Name: ECDSS3
    Before:  B4652313   After:  B4631829  **25,95**
Routine Name: ECEFPAT
    Before: B53422819   After: B57770429  **25,32,39,42,47,49,54,65,72,95**
Routine Name: ECMFECS
    Before: B22381235   After: B37201667  **25,33,47,55,65,95**
Routine Name: ECOSSUM
    Before: B61610844   After: B64825146  **5,8,18,47,72,95**
Routine Name: ECPAT
    Before: B30279346   After: B32218957  **5,18,47,72,95**
Routine Name: ECPCER
    Before: B18846503   After: B20555015  **4,18,23,47,72,95**
Routine Name: ECPCEU
    Before: B21055303   After: B29653566  **4,5,7,10,17,18,23,42,54,73,72,95**
Routine Name: ECPROV3
    Before: B34020272   After: B36456147  **5,8,18,29,47,56,63,72,95**
Routine Name: ECPRSUM1
    Before: B27888837   After: B29801966  **5,18,33,47,62,63,61,72,88,95**
Routine Name: ECRDSSA
    Before:       n/a   After:B100885193  **95**
Routine Name: ECRDSSU
    Before: B49642828   After: B52276776  **5,8,10,14,18,47,63,72,95**
Routine Name: ECRRPC
    Before: B12303108   After: B12656189  **25,47,61,72,95**
Routine Name: ECRRPT
    Before: B40896414   After: B53873531  **25,32,41,56,61,82,94,95**
Routine Name: ECRRPT1
    Before: B50497262   After: B51929894  **25,32,33,61,78,72,90,95**
Routine Name: ECSCPT
    Before: B10068653   After: B11029333  **72,92,95**
Routine Name: ECSCPT1
    Before:  B8958555   After:  B9008177  **72,95**
Routine Name: ECSUM
    Before: B11950391   After: B13051883  **4,19,33,47,95**
Routine Name: ECSUM1
    Before: B11786864   After: B11875694  **4,19,23,33,47,95**
Routine Name: ECUERPC
    Before: B51258174   After: B51135256  **25,32,33,46,47,59,72,95**
Routine Name: ECUMRPC1
    Before: B62704681   After: B63202010  **25,30,33,72,94,95**
Routine Name: ECUMRPC2
    Before: B29933557   After: B30358856  **25,30,42,46,47,49,75,72,95**
Routine Name: ECUTL
    Before: B22344248   After: B25415242  **10,18,47,63,95**
Routine Name: ECUTL2
    Before: B26898243   After: B28978680  **23,33,47,63,72,95**
Routine Name: ECUURPC
    Before:  B5686150   After:  B5658708  **25,42,49,94,95**
Routine Name: ECV2RPC
    Before: B31124227   After: B23577970  **25,30,49,95**

=============================================================================
User Information:
Entered By  : MORRISON,JENNIFER             Date Entered  : AUG 14, 2007
Completed By: HARRIS,DONNA H                Date Completed: SEP 19, 2008
Released By : HATTER,JACKIE L               Date Released : SEP 22, 2008
=============================================================================


Packman Mail Message:
=====================

No routines included
