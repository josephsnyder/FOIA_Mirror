$TXT Created by HOWELL,LYNN at DEVVJJ.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 05/25/10 at 11:23
=============================================================================
Run Date: SEP 09, 2010                     Designation: EC*2*107
Package : EC - EVENT CAPTURE                  Priority: Mandatory
Version : 2       SEQ #100                      Status: Released
                  Compliance Date: OCT 10, 2010
=============================================================================

Associated patches: (v)EC*2*100    <<= must be installed BEFORE `EC*2*107'

Subject: RECENT VISITS/INVALID STOP CODE CHANGES

Category: 
  - Routine

Description:
============

 This is a followup to patch EC*2.0*100.  This patch adds the
 capacity on the Enter/Edit Patient Procedure option to select date/times 
 from a list of recent visits, enhances an associated stop code/DSS Unit 
 report, restricts sorts on the Management Tables 'Search by IEN' function, 
 and corrects a technical background issue.
  
 Description:
 ===========
  
 I. OVERVIEW
  
 ************************************************************************
 The software for this patch consists of a GUI client install and a KIDS 
 build.  Please refer to the SOFTWARE AND DOCUMENTATION RETRIEVAL 
 section of this patch message for retrieval instructions.
 ************************************************************************
  
 ASSOCIATED REMEDY TICKET:
 =========================
  
 HD0000000380507:       DSS UNIT ACTIVITY REPORT
 HD0000000381619:       PROBLEM READING XTMP GLOBAL WHEN EXITING 
    
 II. FUNCTIONAL OVERVIEW
  
 A:  RECENT VISITS
 To assist in proper matching of Event Capture data entry with established
 encounters in the VISIT file (#9000010) and/or scheduled visits in 
 the PATIENT file (#2) file, the Event Capture GUI (ECS GUI) will allow
 users to select a date time for data entry from a list of recent visits
 from the VISIT file  (#9000010) and/or PATIENT file (#2) for a patient. A
 new 'Recent Visit' form has been added to the system that will be used
 when the user enters data from the Data Entry by Patient screen.
  
 The Recent Visit form will allow system users to select a recent visit
 for the selected patient from a list of the patient's most recent visits. 
 The Recent Visit list will contain the date and time of the recent visits 
 along with the associated clinic.
  
 If a recent visit is selected the user will then continue on to the 
 Add Patient Procedure data entry form, where the date, time and associated
 clinic will be filled in with the data from the recent visit.  If a recent
 visit is selected, the date/time and associated clinic will not be
 accessible for editing.
  
 The selection of a recent visit is not mandatory, and can be bypassed by
 the user.  If the user chooses to Ignore the Recent Visit information, 
 the Add Patient Procedure form will function as per current business
 rules.  If the user chooses to Cancel out of the Recent Visit form, the
 user will be returned to the Data Entry Menu.
  
  
 B:  ASSOCIATED STOP CODE REPORT
 EC*2*100 contained a VA Fileman report [EC DSS UNIT SECONDARY ASSOC] so
 users could identify and clean/fix invalid DSS Unit Codes on their
 systems. This report has been enhanced with more specific information to
 identify any DSS Unit Code that fails the following requirements:
   
      The Code does not exist in the Clinic Stop (#40.7) file.
      The Code is not 3 digits in length
      The Code is Inactive 
      The Code is a Secondary Code
  
 This report has also been added to the GUI.  It is available from the 
 Reports Menu as: DSS Units with any Associated Stop Code Errors.  The 
 report can only be selected if the user has manager privileges (ECMGR security
 key).  It does not require any input parameters.
   
 C: SEARCH BY IEN
 The 'Search by IEN' function on the Management Tables allowed sorts by 
 non-numeric text which produced irregular results.  The remote procedure 
 which supports the search has been adjusted to only accept numeric input.
  
 D. SPREADSHEET UPLOAD
 The user will now be able to upload spreadsheets with an Excel 2007 (.xlsx)
 extension from the SPREADSHEET UPLOAD option after selecting 'File / Open'
 from the 'Select File' window.
  
 E. ASSOCIATED STOP CODE
 A bug has been corrected in the Update DSS Unit screen from the Management 
 Menu.  An information message will now be displayed if a DSS Unit is selected 
 for updating that has an invalid associated stop code.  An invalid stop code
 is one that has a 2 character/numeric AMIS REPORTING STOP CODE, is inactive, 
 or has a RESTRICTION TYPE of 'S'econdary. The associated stop code box will
 be blanked and the user instructed they need to select a valid code.
  
 F. RETAINING LAST LOCATION USED
 A modification has been made so that the last LOCATION used will be 
 properly retained when the Temporary Global Purge utility is run.
  
 G. REMEDY OVERVIEW:
    ================
 HD0000000380507:        DSS UNIT ACTIVITY REPORT
  
 Problem:
 --------
 A List Out of Bounds error occurs in the DSS Unit Activity Report if the 
 user only has 1 DSS unit assigned to them and does not have the ECALLU 
 security key assigned.
  
 Resolution:
 -----------
 The Event Capture GUI was modified to include being able to run the report 
 if only 1 DSS unit has been assigned with or without the ECALLU security key.
  
 HD0000000381619:       PROBLEM READING XTMP GLOBAL WHEN EXITING
  
 Problem:
 --------
 A syntax error (several different ones) can occur when a user exits
 the Event Capture GUI application due to an improperly set ^XTMP global.
  
 Resolution:
 -----------
 Modifications were made to set up the ^XTMP global correctly.
  
  
 ----------------------------------------------------------------------
  
 III.  COMPONENTS SENT WITH PATCH
  
       HELP FRAME:  
         ECSTPCD
  
       OPTION:                                        
         EC DSS UNIT SECONDARY ASSOC
         EC GUI CONTEXT
  
       REMOTE PROCEDURE:
         EC RECENT VISITS
  
  
 IV. SOFTWARE AND DOCUMENTATION RETRIEVAL
     The VistA server software for this patch is being distributed through the 
     National Patch Module (NPM). 
  
     The Event Capture GUI client software is being distributed as a self-
     extracting Install Shield executable.  The installed executable for
     this patch is client version 2.1.3.3 with a size of 1,659 KB.
  
   The GUI client software and documentation for this patch
   may be retrieved directly using FTP from the ANONYMOUS.SOFTWARE  
   directory at the following Office of Information (OI) Field Offices:
  
   OIFO               FTP ADDRESS                  DIRECTORY
   ------------       ------------------------     ------------------
   First available    download.vista.med.va.gov    anonymous.software
   Albany             ftp.fo-albany.med.va.gov     anonymous.software
   Hines              ftp.fo-hines.med.va.gov      anonymous.software
   Salt Lake City     ftp.fo-slc.med.va.gov        anonymous.software
  
  The following files will be available:
  
     File Name           Format        Description
     ---------           ------        -----------
     ECS_20_P107.ZIP      BINARY        EC GUI client application
  
 The Technical and User Manuals can be obtained via FTP from the
 following ANONYMOUS.SOFTWARE directories:
  
         OI Field Office                 FTP Address
        ---------------                  ------------------------
         Albany                          ftp.fo-albany.med.va.gov
         Hines                           ftp.fo-hines.med.va.gov
         Salt Lake City                  ftp.fo-slc.med.va.gov
  
 V. TEST SITES
  
 The following sites participated in the testing of the EC*2.0*107
 software.
  
  Test Site
  --------------------
  Cincinnati
  Milwaukee
  Omaha
  
 VI. INSTALLATION INSTRUCTIONS
  
   ********************* IMPORTANT NOTE ***************************
   This patch updates the software version number of both the VistA
   server software and the Event Capture client GUI to version 2.1.3.3.
   GUI client versions prior to version 2.1.3.2 are not compatible with 
   the VistA server software for this patch.  Therefore, it is crucial
   that the Event Capture client GUI distributed with this patch be
   installed immediately following the VistA server software install
   to minimize service disruption to the Event Capture System users.
  
  
  
  Pre-Installation Items:
  =======================
  
  * Environment Check:
      
     Programmer access is required for installing this patch.
  
     ** NOTE ** -- Prior to installation, the installer must ensure the  
                   DUZ(0) node of the DUZ array is set to the "@" symbol.
   
  * Users On the System:
    
     This patch modifies routines used by the Event Capture application and
     may affect many users.
  
     This patch may be installed with users on the system, but should be
     loaded during non-peak hours to minimize disruption to users and to
     reduce the possibility of errors when the routines are updated.
  
     If installed during the normal workday, it is recommended that the
     following selection(s) in the OPTION file (#19), and all of their
     descendants be disabled to prevent possible conflicts while running
     the KIDS Install. Other VISTA users will not be affected.
  
           EC GUI Context version 2.1.3.2   ... EC GUI CONTEXT
    
  * Software Installation Time:
  
     The estimated installation time is less than 5 minutes during off peak
     hours.
  
  * Required Builds:
    
     The following is a list of REQUIRED builds for this KIDS
     distribution.  KIDS will not allow the installation of this patch
     without their prior installation.
  
     Required Build(s):
     ------------------
     EC*2.0*100
  
  Installation Steps:
  ===================
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
  
   2.  From the Kernel Installation and Distribution System Menu, select
       the Installation menu.
  
   3.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter EC*2.0*107):
       a. Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch. It will NOT
          backup any other changes such as DDs or templates.
       b. Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed. It compares all components of this patch
          (routines, DD's, templates, etc.).
       c. Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
       d. Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
   4.  Use the Install Package(s) option and select the package EC*2.0*107.
  
   5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
       Install? NO//'  Answer YES unless your system does this in a
       nightly TaskMan process.
  
   6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
       NO//' answer NO (unless otherwise indicated).
  
   7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
       and Protocols? NO//' answer YES (unless otherwise indicated)
     
   8.  When prompted 'Enter options you wish to mark as 'Out Of Order':'  
       Enter the following options:
      
       EC GUI Context version 2.1.3.2   ... EC GUI CONTEXT
  
   9.  When prompted 'Enter protocols you wish to mark as 'Out Of
       Order':' press <return>.
  
  10.  Install the Event Capture GUI client software following the
       instructions in the EC GUI Installation Guide found on the VistA
       Documentation Library (VDL) at the following
       link: http://www.va.gov/vdl/application.asp?appid=39

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;2.0;EVENT CAPTURE;**[Patch List]**;8 May 96;Build 14

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ECOB
    Before: B19937351   After: B22194703  **100,107**
Routine Name: ECOBUF
    Before:  B6151296   After:  B6397998  **100,107**
Routine Name: ECOBVST
    Before: B20262344   After: B21156397  **100,107**
Routine Name: ECRRPC
    Before: B15494219   After: B16341040  **25,47,61,72,95,101,100,107**
Routine Name: ECRRPT1
    Before: B55152988   After: B59190035  **25,32,33,61,78,72,90,95,100,107**
Routine Name: ECUMRPC1
    Before: B73472186   After: B78546073  **25,30,33,72,94,95,105,100,107**
Routine Name: ECUNTRPT
    Before:       n/a   After:  B6471767  **107**
Routine Name: ECUTL1
    Before: B28929596   After: B55734083  **10,13,17,42,54,76,107**
 
Routine list of preceding patches: 76, 100

=============================================================================
User Information:
Entered By  : FLEGEL,CHRIS M                Date Entered  : NOV 12, 2009
Completed By: BARBER,HAROLDINE              Date Completed: AUG 23, 2010
Released By : HATTER,JACKIE L               Date Released : SEP 09, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
