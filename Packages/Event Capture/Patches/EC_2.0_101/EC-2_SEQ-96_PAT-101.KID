Released EC*2*101 SEQ #96
Extracted from mail message
**KIDS**:EC*2.0*101^

**INSTALL NAME**
EC*2.0*101
"BLD",7960,0)
EC*2.0*101^EVENT CAPTURE^0^3090331^y
"BLD",7960,1,0)
^^2^2^3090127^^^^
"BLD",7960,1,1,0)
This patch made changes to routine ECRRPC for VistA Application
"BLD",7960,1,2,0)
Development OED.
"BLD",7960,4,0)
^9.64PA^^
"BLD",7960,6.3)
3
"BLD",7960,"KRN",0)
^9.67PA^779.2^20
"BLD",7960,"KRN",.4,0)
.4
"BLD",7960,"KRN",.401,0)
.401
"BLD",7960,"KRN",.402,0)
.402
"BLD",7960,"KRN",.403,0)
.403
"BLD",7960,"KRN",.5,0)
.5
"BLD",7960,"KRN",.84,0)
.84
"BLD",7960,"KRN",3.6,0)
3.6
"BLD",7960,"KRN",3.8,0)
3.8
"BLD",7960,"KRN",9.2,0)
9.2
"BLD",7960,"KRN",9.8,0)
9.8
"BLD",7960,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",7960,"KRN",9.8,"NM",1,0)
ECRRPC^^0^B12668648
"BLD",7960,"KRN",9.8,"NM",2,0)
ECFLRPC^^0^B3471271
"BLD",7960,"KRN",9.8,"NM","B","ECFLRPC",2)

"BLD",7960,"KRN",9.8,"NM","B","ECRRPC",1)

"BLD",7960,"KRN",19,0)
19
"BLD",7960,"KRN",19,"NM",0)
^9.68A^^
"BLD",7960,"KRN",19.1,0)
19.1
"BLD",7960,"KRN",101,0)
101
"BLD",7960,"KRN",409.61,0)
409.61
"BLD",7960,"KRN",771,0)
771
"BLD",7960,"KRN",779.2,0)
779.2
"BLD",7960,"KRN",870,0)
870
"BLD",7960,"KRN",8989.51,0)
8989.51
"BLD",7960,"KRN",8989.52,0)
8989.52
"BLD",7960,"KRN",8994,0)
8994
"BLD",7960,"KRN","B",.4,.4)

"BLD",7960,"KRN","B",.401,.401)

"BLD",7960,"KRN","B",.402,.402)

"BLD",7960,"KRN","B",.403,.403)

"BLD",7960,"KRN","B",.5,.5)

"BLD",7960,"KRN","B",.84,.84)

"BLD",7960,"KRN","B",3.6,3.6)

"BLD",7960,"KRN","B",3.8,3.8)

"BLD",7960,"KRN","B",9.2,9.2)

"BLD",7960,"KRN","B",9.8,9.8)

"BLD",7960,"KRN","B",19,19)

"BLD",7960,"KRN","B",19.1,19.1)

"BLD",7960,"KRN","B",101,101)

"BLD",7960,"KRN","B",409.61,409.61)

"BLD",7960,"KRN","B",771,771)

"BLD",7960,"KRN","B",779.2,779.2)

"BLD",7960,"KRN","B",870,870)

"BLD",7960,"KRN","B",8989.51,8989.51)

"BLD",7960,"KRN","B",8989.52,8989.52)

"BLD",7960,"KRN","B",8994,8994)

"BLD",7960,"QUES",0)
^9.62^^
"BLD",7960,"REQB",0)
^9.611^2^2
"BLD",7960,"REQB",1,0)
EC*2.0*95^2
"BLD",7960,"REQB",2,0)
EC*2.0*25^2
"BLD",7960,"REQB","B","EC*2.0*25",2)

"BLD",7960,"REQB","B","EC*2.0*95",1)

"MBREQ")
0
"PKG",486,-1)
1^1
"PKG",486,0)
EVENT CAPTURE^EC^Event Capture Workload Capture System^
"PKG",486,20,0)
^9.402P^^
"PKG",486,22,0)
^9.49I^1^1
"PKG",486,22,1,0)
2.0^2960508^2981027^66481
"PKG",486,22,1,"PAH",1,0)
101^3090331
"PKG",486,22,1,"PAH",1,1,0)
^^2^2^3090331
"PKG",486,22,1,"PAH",1,1,1,0)
This patch made changes to routine ECRRPC for VistA Application
"PKG",486,22,1,"PAH",1,1,2,0)
Development OED.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ECFLRPC")
0^2^B3471271^B3736764
"RTN","ECFLRPC",1,0)
ECFLRPC ;ALB/JAM-Event Capture Filer RPC ;09 MAR 16 
"RTN","ECFLRPC",2,0)
 ;;2.0; EVENT CAPTURE ;**25,101**;8 May 96;Build 3
"RTN","ECFLRPC",3,0)
 ;
"RTN","ECFLRPC",4,0)
FILE(RESULTS,ECARY) ;Broker entry point to file data in Event Capture files
"RTN","ECFLRPC",5,0)
 ;This RPC is called when filing any data for ECS.
"RTN","ECFLRPC",6,0)
 ;        RPC: EC FILER
"RTN","ECFLRPC",7,0)
 ;INPUTS  ECARY    - array with data to be filed
"RTN","ECFLRPC",8,0)
 ;         ECARY("ECFILE")=file #
"RTN","ECFLRPC",9,0)
 ;         ECARY(sub)=data ;data relevant to file
"RTN","ECFLRPC",10,0)
 ;
"RTN","ECFLRPC",11,0)
 ;OUTPUTS RESULTS  - Success or failure to file
"RTN","ECFLRPC",12,0)
 ;
"RTN","ECFLRPC",13,0)
 D SETENV^ECUMRPC
"RTN","ECFLRPC",14,0)
 D PARSE
"RTN","ECFLRPC",15,0)
 K ^TMP($J,"ECMSG")
"RTN","ECFLRPC",16,0)
 I $G(ECFILE)="" S ^TMP($J,"ECMSG",1)="0^File Not defined" D END Q
"RTN","ECFLRPC",17,0)
 I ECFILE=721 D ^ECEFPAT,END Q          ; Event Capture Patient File
"RTN","ECFLRPC",18,0)
 I ECFILE=724 D ^ECMFDSSU,END Q         ; DSS Unit
"RTN","ECFLRPC",19,0)
 I ECFILE=720.3 D ^ECMFECS,END Q        ; EC Event Code Screens
"RTN","ECFLRPC",20,0)
 I ECFILE=720.4 D REASON^ECMFECS,END Q  ;Event Code Reasons
"RTN","ECFLRPC",21,0)
 I ECFILE=725 D ^ECMFLPX,END Q        ; EC Local Procedure
"RTN","ECFLRPC",22,0)
 I ECFILE=726 D ^ECMFCAT,END Q        ; Event Capture Category
"RTN","ECFLRPC",23,0)
 I ECFILE=4 D ^ECMFLOC,END Q          ; Event Capture Locations
"RTN","ECFLRPC",24,0)
 I ECFILE=200 D USER^ECMFDSSU,END Q   ; Allocate/Deallocate users to Unit
"RTN","ECFLRPC",25,0)
 I ECFILE="200A" D DSSU^ECMFDSSU,END Q  ; Allocate/Deallocate Unts to usr
"RTN","ECFLRPC",26,0)
 ;I ECFILE=8989.5 D HFS^ECMFLOC,END Q    ; Update HFS directory
"RTN","ECFLRPC",27,0)
 S ^TMP($J,"ECMSG",1)="0^Filer Not Available"
"RTN","ECFLRPC",28,0)
 ;
"RTN","ECFLRPC",29,0)
END ;
"RTN","ECFLRPC",30,0)
 D KILLVAR
"RTN","ECFLRPC",31,0)
 S RESULTS=$NA(^TMP($J,"ECMSG"))
"RTN","ECFLRPC",32,0)
 Q
"RTN","ECFLRPC",33,0)
 ;
"RTN","ECFLRPC",34,0)
PARSE ;Parse data from array for filing
"RTN","ECFLRPC",35,0)
 N SUB
"RTN","ECFLRPC",36,0)
 S SUB="" F  S SUB=$O(ECARY(SUB)) Q:SUB=""  S @SUB=ECARY(SUB)
"RTN","ECFLRPC",37,0)
 Q
"RTN","ECFLRPC",38,0)
KILLVAR ;Kill variables
"RTN","ECFLRPC",39,0)
 N SUB
"RTN","ECFLRPC",40,0)
 S SUB="" F  S SUB=$O(ECARY(SUB)) Q:SUB=""  K @SUB
"RTN","ECFLRPC",41,0)
 K ECARY,ECIEN
"RTN","ECFLRPC",42,0)
 Q
"RTN","ECRRPC")
0^1^B12668648^B12656189
"RTN","ECRRPC",1,0)
ECRRPC ;ALB/JAM - Event Capture Report RPC Broker ;2 Sep 2008
"RTN","ECRRPC",2,0)
 ;;2.0; EVENT CAPTURE ;**25,47,61,72,95,101**;8 May 96;Build 3
"RTN","ECRRPC",3,0)
 ;
"RTN","ECRRPC",4,0)
RPTEN(RESULTS,ECARY) ;RPC Broker entry point for EC Reports
"RTN","ECRRPC",5,0)
 ;All EC GUI reports will call this line tag
"RTN","ECRRPC",6,0)
 ;        RPC: EC REPORTS
"RTN","ECRRPC",7,0)
 ;INPUTS   ECARY - Contains the following elements for report printing
"RTN","ECRRPC",8,0)
 ;          ECDEV  - Print to queue, if device
"RTN","ECRRPC",9,0)
 ;          ECQDT  - Queue to print (date/time), optional
"RTN","ECRRPC",10,0)
 ;
"RTN","ECRRPC",11,0)
 ;OUTPUTS  RESULTS - Array of help text in the HELP FRAM File (#9.2)
"RTN","ECRRPC",12,0)
 ;
"RTN","ECRRPC",13,0)
 N HLPDA,HND,ECSTR,ECFILER,ECERR,ECDIRY,ECUFILE,ECGUI
"RTN","ECRRPC",14,0)
 D SETENV^ECUMRPC
"RTN","ECRRPC",15,0)
 S ECERR=0,ECGUI=1 D PARSE,CHKDT I ECERR Q
"RTN","ECRRPC",16,0)
 K ^TMP("ECMSG",$J),^TMP($J,"ECRPT")
"RTN","ECRRPC",17,0)
 D  I ECERR D END Q
"RTN","ECRRPC",18,0)
 . I ECPTYP="D" D HFSOPEN(ECHNDL) Q
"RTN","ECRRPC",19,0)
 . I '$D(ECDEV) S ^TMP("ECMSG",$J,1)="0^Device undefined",ECERR=1
"RTN","ECRRPC",20,0)
 S HND=$P($T(@ECHNDL),";;",2) I HND="" D  Q
"RTN","ECRRPC",21,0)
 . S ^TMP("ECMSG",$J,1)="0^Line Tag undefined" D END
"RTN","ECRRPC",22,0)
 S ECQDT=$G(ECQDT,"NOW"),%DT="XT",X=ECQDT D ^%DT  ;Print time
"RTN","ECRRPC",23,0)
 S ECQDT=$S(Y>0:Y,1:"NOW")
"RTN","ECRRPC",24,0)
 D @$P(HND,";",2)
"RTN","ECRRPC",25,0)
 I ECPTYP="D" D HFSCLOSE(ECFILER) ;S RESULTS=$NA(^TMP($J))
"RTN","ECRRPC",26,0)
END D KILLVAR
"RTN","ECRRPC",27,0)
 I $D(^TMP("ECMSG",$J)) S RESULTS=$NA(^TMP("ECMSG",$J)) Q
"RTN","ECRRPC",28,0)
 S RESULTS=$NA(^TMP($J))
"RTN","ECRRPC",29,0)
 Q
"RTN","ECRRPC",30,0)
 ;
"RTN","ECRRPC",31,0)
PARSE ;Parse data from array for filing
"RTN","ECRRPC",32,0)
 N SUB
"RTN","ECRRPC",33,0)
 S SUB="" F  S SUB=$O(ECARY(SUB)) Q:SUB=""  S @SUB=ECARY(SUB)
"RTN","ECRRPC",34,0)
 Q
"RTN","ECRRPC",35,0)
CHKDT ;Required Data Check
"RTN","ECRRPC",36,0)
 N I,C
"RTN","ECRRPC",37,0)
 S C=1
"RTN","ECRRPC",38,0)
 F I="ECHNDL","ECPTYP" D
"RTN","ECRRPC",39,0)
 .I $G(@I)="" S ^TMP("ECMSG",$J,C)="0^Key data missing "_I,C=C+1,ECERR=1
"RTN","ECRRPC",40,0)
 Q
"RTN","ECRRPC",41,0)
KILLVAR ;Kill variables
"RTN","ECRRPC",42,0)
 N SUB
"RTN","ECRRPC",43,0)
 S SUB="" F  S SUB=$O(ECARY(SUB)) Q:SUB=""  K @SUB
"RTN","ECRRPC",44,0)
 K ECARY,POP,ECQDT
"RTN","ECRRPC",45,0)
 Q
"RTN","ECRRPC",46,0)
HFSOPEN(HANDLE) ; 
"RTN","ECRRPC",47,0)
 ;S ECDIRY=$$GET^XPAR("DIV","EC HFS SCRATCH")
"RTN","ECRRPC",48,0)
 S ECDIRY=$$DEFDIR^%ZISH()
"RTN","ECRRPC",49,0)
 I ECDIRY="" S ECERR=1 D  Q
"RTN","ECRRPC",50,0)
 .S ^TMP("ECMSG",$J,1)="0^A scratch directory for reports doesn't exist"
"RTN","ECRRPC",51,0)
 S ECFILER="EC"_DUZ_".DAT",ECUFILE=ECFILER S ^TMP("JEN",$J,.1)=ECUFILE
"RTN","ECRRPC",52,0)
 D OPEN^%ZISH(HANDLE,ECDIRY,ECFILER,"W") D:POP  Q:POP
"RTN","ECRRPC",53,0)
 .S ECERR=1,^TMP("ECMSG",$J,1)="0^Unable to open file "_ECDIRY_ECFILER
"RTN","ECRRPC",54,0)
 S IOM=132,IOSL=99999,IOST="P-DUMMY",IOF=""""""
"RTN","ECRRPC",55,0)
 Q
"RTN","ECRRPC",56,0)
 ;
"RTN","ECRRPC",57,0)
HFSCLOSE(HANDLE) ; 
"RTN","ECRRPC",58,0)
 N ECDEL
"RTN","ECRRPC",59,0)
 D CLOSE^%ZISH(ECDIRY_HANDLE)
"RTN","ECRRPC",60,0)
 K ^TMP($J)
"RTN","ECRRPC",61,0)
 S ECDEL(ECFILER)=""
"RTN","ECRRPC",62,0)
 S X=$$FTG^%ZISH(ECDIRY,ECFILER,$NAME(^TMP($J,1)),2)
"RTN","ECRRPC",63,0)
 S X=$$DEL^%ZISH(ECDIRY,$NA(ECDEL))
"RTN","ECRRPC",64,0)
 Q
"RTN","ECRRPC",65,0)
ECPAT ;;Patient Summary Report;ECPAT^ECRRPT
"RTN","ECRRPC",66,0)
ECRDSSA ;;DSS Unit Activity;ECRDSSA^ECRRPT
"RTN","ECRRPC",67,0)
ECRDSSU ;;DSS Unit Workload Summary;ECRDSSU^ECRRPT
"RTN","ECRRPC",68,0)
ECPROV ;;Provider Summary Report;ECPROV^ECRRPT
"RTN","ECRRPC",69,0)
PROSUM ;;Provider (1-7) Summary Report;PROSUM^ECRRPT
"RTN","ECRRPC",70,0)
ECOSSUM ;;Ordering Section Summary Report;ECOSSUM^ECRRPT
"RTN","ECRRPC",71,0)
ECPCER ;;PCE Data Summary Report;ECPCER^ECRRPT
"RTN","ECRRPC",72,0)
ECRPERS ;;Inactive Person Class Report;ECRPERS^ECRRPT1
"RTN","ECRRPC",73,0)
ECRPRSN ;;Procedure Reason Report;ECRPRSN^ECRRPT1
"RTN","ECRRPC",74,0)
ECDSS1 ;;National/Local Procedure Reports;ECDSS1^ECRRPT1
"RTN","ECRRPC",75,0)
ECDSS3 ;;Category Reports;ECDSS3^ECRRPT1
"RTN","ECRRPC",76,0)
ECSUM ;;Print Category and Procedure Summary (Report);ECSUM^ECRRPT1
"RTN","ECRRPC",77,0)
ECNTPCE ;;Records Failing Transmission to PCE Report;ECNTPCE^ECRRPT1
"RTN","ECRRPC",78,0)
ECSCPT ;;Event Code Screens with CPT Codes;ECSCPT^ECRRPT1
"RTN","ECRRPC",79,0)
ECINCPT ;;National/Local Procedure Codes with Inactive CPT;ECINCPT^ECRRPT1
"VER")
8.0^22.0
"BLD",7960,6)
^96
**END**
**END**
