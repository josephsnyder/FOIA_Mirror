$TXT Created by UNDERHILL,GARDNER at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 07/24/08 at 16:10
=============================================================================
Run Date: JUN 26, 2009                     Designation: FH*5.5*19
Package : FH - DIETETICS                      Priority: Mandatory
Version : 5.5        SEQ #19                    Status: Released
                  Compliance Date: JUL 27, 2009
=============================================================================

Associated patches: (v)FH*5.5*5    <<= must be installed BEFORE `FH*5.5*19'

Subject: CORRECT SPECIAL MEALS ISSUE IN CPRS GUI AND ERRORS IN TWO REPORTS

Category: 
  - Routine

Description:
============

 This patch addresses the following problems:
  
 1. When placing a Special Meal order for an outpatient in CPRS GUI,
 an error occurs when the user attempts to select another patient or exit 
 CPRS GUI. 
  
 2. The error in problem 1 will generate an incomplete record in the 
 NUTRITION PERSON file (#115). This incomplete record will cause 
 the MEAL STATUS REPORT [FHOMSS] to error out. 
  
 3. The error in problem 1 will generate an incomplete record in the 
 NUTRITION PERSON file (#115). This incomplete record will cause the 
 option, Patient Data Log, [FHDMP] to error out. 
  
 ASSOCIATED NSR:
 ===============
 N/A
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 1. HD0000000253065 - Unable to order Outpatient Meals. Receive error
    message.
    Duplicate:
    HD0000000274471 - $ZE=<SELECT>LIST+13^FHOMSS2
 2. HD0000000262093 - Problem related to Remedy ticket 253065
  
  
 PARTICIPATING TEST SITES:
 =========================
 DETROIT
 PALO ALTO
 CENTRAL TEXAS
  
 REMEDY OVERVIEW:
 ================
 1. HD0000000253065 - Unable to order Outpatient Meals. Receive error
    message.
  
 Problem 1:
 ----------
 When an order for a Special Meal is placed for an outpatient in CPRS GUI 
 and the user tries to either exit CPRS or select another patient, a HL7 
 message is sent to the Nutrition and Food Service package with the 
 special meal order. Routine, FHOMWOR, will process the HL7 message and 
 call routne, FHOMSR1, to file the data.  Routine FHOMSR1 assumes a
 variable, FHRMBD, will contain the Room / Bed number for the outpatient.
 Since this is an outpatient, there is no Room / Bed number to put in this
 variable and it remains undefined. This creates the error in the FileMan
 data filing routine DIED.
  
 Resolution:
 -----------
 Modify routine FHOMWOR to set the variable FHRMBD to a null value.
   
 Problem 2:
 ----------
 The error in problem 1 will generate an incomplete record in the SPECIAL 
 MEALS multi-valued field (#17, sub-file (#115.017) in the NUTRITION 
 PERSON file (#115). The report routine FHOMSS2 is expecting a value 
 to be stored in the DIET field (#3). This is the pointer field to the
 DIET file (#111). The routine attempts to look up the diet name with a
 null value and errors out.
  
 Resolution:
 -----------
 Modify routine, FHOMSS2, to determine if the DIET field (#3) in 
 the SPECIAL MEALS multl-valued field (#17, sub-file (#115.017) is 
 null. If it is null the routine will bypass the diet name look up.
  
  
 2. HD0000000262093 - Problem related to Remedy ticket 253065
   
 Problem:
 --------
 The error in problem 1 will generate an incomplete record in the 
 SPECIAL MEALS multi-valued field (#17), sub-file (#115.017) in 
 the NUTRITION PERSON file (#115). The report routine, FHDPSM, is 
 expecting a value to be stored in the DIET field (#3). This field is 
 used as the pointer to the DIET file (#111). The routine attempts
 to look up the diet name with a null value and errors out.
  
  
 Resolution:
 -----------
 Modify routine, FHDPSM, to determine if the DIET field (#3) in 
 the SPECIAL MEALS multl-valued field (#17, sub-file (#115.017) is 
 null. If it is null, the routine will bypass the diet name look up.
  
  
 Installation Instructions:
 ==========================
 Suggested time to install: non-peak requirement hours. 
  
 If installed during the normal workday, it is recommended that the 
 Nutrition and Food Service users be off the system.  Other VISTA users 
 will not be affected.
  
 Install Time - less than 2 minutes 
  
 1.  Load Transport Global 
     ---------------------------
  
  Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  Start Up KIDS 
     -----------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     -------------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter FH*5.5*19):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
      ---------------------------------------------------
     **This is the step to start the installation of this KIDS patch: 
     a.  Choose the Install Package(s) option to start the patch
         install.
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
         NO//' answer NO 
     c. When prompted 'Want to DISABLE Scheduled Options, Menu 
        Options, and Protocols? NO//' answer NO

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.5;DIETETICS;**[Patch List]**;Jan 28, 2005;Build 2

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: FHDPSM
    Before:  B4611317   After:  B4795299  **19**
Routine Name: FHOMSS2
    Before: B17440516   After: B17597008  **5,19**
Routine Name: FHOMWOR
    Before: B25425575   After: B25485238  **2,5,19**
 
Routine list of preceding patches: 5

=============================================================================
User Information:
Entered By  : UNDERHILL,GARDNER D           Date Entered  : JUL 22, 2008
Completed By: CRICHLOW,SHERRY               Date Completed: APR 13, 2009
Released By : KREUZ,SHERI B                 Date Released : JUN 26, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
