$TXT Created by UNDERHILL,GARDNER at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Friday, 02/01/08 at 15:43
=============================================================================
Run Date: MAY 08, 2008                     Designation: FH*5.5*13
Package : FH - DIETETICS                      Priority: Mandatory
Version : 5.5        SEQ #13                    Status: Released
                  Compliance Date: JUN 08, 2008
=============================================================================

Associated patches: (v)FH*5.5*5    <<= must be installed BEFORE `FH*5.5*13'
                    (v)FH*5.5*8    <<= must be installed BEFORE `FH*5.5*13'

Subject: ADDRESSES ISSUES WITH TWO REPORTS AND MAPPING ALLERGIES

Category: 
  - Routine

Description:
============

 This patch will resolve the following issues:
  
 1.  The incorrect ward displays when printing the report [RUN SF 
 LABELS/CONSOLID INGRED].
  
 2.  The number of characters for "ALLERGY - GREEN LEAFY VEGTABLES" 
 exceeds the maximum characters in the FOOD PREFERENCE file (#115.2) 
 which causes incorrect mapping.  
  
 3.  When entering a date for the Display Ingredient Inventory option 
 [DISPLAY INGREDIENT INVENTORY LIST], THE %DT variable is killed but not 
 reset.  This is causing an incorrect date to display.  
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
  
 1.  HD0000000198141 - Supplemental Feeding Labels Ingred List
 2.  HD0000000229391 - FGH - MAPPING ALLERGIES
 3.  HD0000000231873 - User is prompted for a date entry that is being
 rejected
  
 PARTICIPATING TEST SITES:
 =========================
  
 CENTRAL TEXAS
 PUGET SOUND,WA
 CHEYENNE,WY 
 NORTH FLORIDA/SOUTH GEORGIA
  
 REMEDY TICKET OVERVIEW:
 ================
  
 1.  HD0000000198141
   
 Problem: 
 ========
 Report Option Run SF Labels/Consolid Ingred List [RUN SF LABELS/CONSLIDD 
 INGRED  FHNO2]. When printing this report and selecting to print by ward,
 instead of showing the currently selected ward in the header, a completely
 different ward will show.
  
 This option runs routine FHNO2. When running this report by the ward and 
 selecting the ingredient list, the user will sometimes get a report with 
 the correct ingredient list for the selected ward, but a different ward 
 would appear in the header. The report routine is designed to process the 
 ingredient first by inpatient, then by outpatients for the selected ward. 
 While the report only processes inpatients for the ward, it processes all 
 outpatients and only includes those outpatients assigned to the selected 
 ward. The routine FHNO2 was changing the ward name in the report header 
 for every outpatient processed. If this outpatient had a different ward 
 from the selected ward, that is the ward that printed in the report 
 header.
  
 Resolution:
 ===========
 Modify routine FHNO2 to only change the ward name to the outpatient's 
 ward if the outpatient's ward is the same as the ward the report is being 
 run for.
  
 2.  HD0000000229391
  
 Problem: 
 ========
 Mapping the "ALLERGY - GREEN LEAFY VEGTABLES" to the FOOD PREFERENCES 
 file (#115.2), does not remove it from the "MISSING FOOD PREFERENCE 
 LIST" in the Create/Map Food Preferences to Allergies [CREATE/MAP FOOD 
 PREFERENCES TO  FHSELA] option. This allows "ALLERGY - GREEN LEAFY 
 VEGTABLES" to be re-mapped multiple times.
  
 The option Create/Map Food Preferences to Allergies [CREATE/MAP FOOD 
 PREFERENCES TO  FHSELA] runs a routine FHSELA2 which builds the list of 
 unmapped food allergies. When an item is selected it is compared to the 
 "B" index of the FODD PREFERENCES file (#115.2). The "B" index limits the 
 size of the allergy name to 30 characters. "ALLERGY - GREEN LEAFY 
 VEGTABLES" is 32 character long and is shortened to "ALLERGY - GREEN 
 LEAFY VETABL" causing the option Create/Map Food Preferences to allergies 
 [CREATE/MAP FOOD PREFERENCES TO  FHSELA] not to find this specfic allergy 
 in FOOD PREFERENCES file (#115.2) and allows it to be re-mapped. This 
 problem is limited to "ALLERGY - GREEN LEAFY VEGTABLES" only.
  
 Resolution:
 ===========
 Modify routine FHSELA2 to shorten "ALLERGY - GREEN LEAFY VEGTABLES" to 
 "ALLERGY - GREEN LEAFY VEG". This is shorter than the limit of 30 
 characters in the "B" index of file 115.2. With the shorter name the "B" 
 index of the FOOD PREFERENCES file (#115.2) will be built correctly 
 matching this specific allergy name and removing it from the list of 
 un-mapped allergies.
  
 3.  HD0000000231873
  
 Problem:
 ========
 In the option Display Ingredient Inventory List [DISPLAY INGREDIENT 
 INVENTORY L  FHING13] the user is prompted to enter a date in a 
 month/year format. The user enters 12/07 for December 2007. This is being 
 rejected as a future date. The option Display Ingredient Inventory List 
 [DISPLAY INGREDIENT INVENTORY L  FHING13] calls routine FHREP1. After the 
 user enters the month/year this routine calls VA FileMan date utility 
 %DT. This utility uses the input variable %DT to control how it processes 
 the user input. The variable %DT is killed and not set. Since it is not 
 set, the utility %DT assumes current year and thinks the user has entered 
 a month/day rather than a month/year.
  
 Resolution:
 ===========
 Modify routine FHREP1 to set the variable %DT to "M". This tells the 
 utility %DT to expect month/year user input rather than month/day user 
 input.
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 If installed during the normal workday, it is recommended that the 
 the Nutrition and Food Service users be off the system.  Other VISTA users
 will not be affected.
  
 Install Time - less than 2 minutes (unless otherwise indicated)
  
 No options need to be disabled.
  
  
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter FH*5.5*13):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     **This is the step to start the installation of this KIDS patch: 
    
     a.  Choose the Install Package(s) option to start the patch
         install.
  
     b.  When prompted  Want KIDS to INHIBIT LOGONs during the install? 
         NO//  answer NO
  
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
         Options, and Protocols? NO//' answer NO

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.5;DIETETICS;**[Patch List]**;Jan 28, 2005;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: FHNO2
    Before: B34765600   After: B34813088  **5,13**
Routine Name: FHREP1
    Before: B20171462   After: B20331884  **13**
Routine Name: FHSELA2
    Before: B97907668   After: B97809412  **8,13**
 
Routine list of preceding patches: 5, 8

=============================================================================
User Information:
Entered By  : UNDERHILL,GARDNER D           Date Entered  : NOV 20, 2007
Completed By: CRICHLOW,SHERRY               Date Completed: MAY 07, 2008
Released By : KREUZ,SHERI B                 Date Released : MAY 08, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
