$TXT Created by UNDERHILL,GARDNER at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 05/19/10 at 16:44
=============================================================================
Run Date: AUG 26, 2010                     Designation: FH*5.5*20
Package : FH - DIETETICS                      Priority: Mandatory
Version : 5.5        SEQ #22                    Status: Released
                  Compliance Date: SEP 26, 2010
=============================================================================

Associated patches: (v)FH*5.5*4    <<= must be installed BEFORE `FH*5.5*20'
                    (v)FH*5.5*8    <<= must be installed BEFORE `FH*5.5*20'

Subject: CORRECT TICKLER FILE ISSUES

Category: 
  - Routine

Description:
============

 This patch addresses the following issues:
 1.  Incorrect records are displaying in the Tickler File Report when 
 executing the Inpatient Monitor Scan option. 
  
 2. New Clinicians that are added to a ward are not getting Tickler File
 entries for patient nutrition monitors when executing the 
 Inpatient Monitor Scan option.  
 Also, new clinicians added to a ward are not getting Tickler File
 entries displayed when option "Display Tickler File" is run.
  
 3. New ward locations with patients who generate a Tickler File entry for
 any nutrition monitor, will error out during the execution of Inpatient 
 Monitor Scan option.  
  
 4. New ward locations with patients who generate an alert for a follow-up
 nutrition assessment or food/drug interactions will error out during the
 execution of Inpatient Monitor Scan when processing alerts.  
  
 5. XINDEX returned SAC violations in routines FHCTF2 and FHCTF5 for having
 lock commands with no time outs.
  
 6. During site testing the monitor for NO PATIENT ORDER+CLEAR LIQUIDS 
 greater than 3 days (NPO+Clr Liq > 3 days) would create a
 tickler for any NPO+Clr Liq diet order placed during a patient's 
 admission. Even if the NPO+Clr Liq diet order was no longer in effect.
  
 7. During site testing it was found that a routine was using the
 CLINICIAN field in the NUTRITION LOCATION file to determine if the
 dietitian is still assigned to ward in the tickler record.
  
 ASSOCIATED NSR:
 ===============
 N/A 
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 1. HD0000000222864    Patient showing up on tickler who should not.
 2. HD0000000248315    Tickler file assignment
    Duplicate(s)
    ------------
    HD0000000265962    Ward assignments update error.
    HD0000000269618    Tickler file is not showing up correctly for the
                       dietitians' new assignments
    HD0000000273059    Ticklers not generated for correct dietician:
    HD0000000295135    Tickler File not generating correct location for
                       Dietitian
  
 3. HD0000000268902    <SUBSCRIPT>PHA+14^FHASM2A *XQA("")
    Duplicates
    ----------
    HD0000000277939    Inpatient Monitor Scan is erroring out. ...    
                       .S:'$D(XQA(FHDUZ)) XQA(FHDUZ)=""    ^  
                       <SUBSCRIPT>ALRT+17^FHASM2A
    HD0000000296119    ALRT+17^FHASM2A
   
 4. HD0000000254150    Script error
    Duplicate(s)
    ------------
    HD0000000261609    We started to receive subscript errors list week for
                       routine FHCTF5
    HD0000000271375    Subscript Error
    HD0000000278946    Nightly task [FHCTF5] - is bombing in the error trap
  
 5. HD0000000283890    XINDEX returned SAC violations in routines FHCTF2
                       and FHCTF5
  
 6. HD0000000366449    Tickler file throughout the entire admission
  
 7. HD0000000375086    Tickler
  
 PARTICIPATING TEST SITES:
 =========================
 Upstate New York HCS
 Central Texas HCS
 Miami, Fl
  
 REMEDY OVERVIEW:
 ================
 1. HD0000000222864
  
 Problem:
 --------
 Patients with the WITHHOLD field (#6) in the DIET SUB-FILE (#115.02)
 in the ADMISSION SUB-FILE (#115.01) in the NUTRITION PERSON file (#115)
 with values of X for NO ORDER and P for PASS are showing up in the tickler
 file as "NPO/Clr Liq>3 days" when routine FHCTF5 is run. Routine FHCTF5 is
 failing to filter out the other possible values of the WITHHOLD field.
  
 Resolution:
 -----------
 Routine FHCTF5 has been modified to filter out all other possible 
 values of the WITHHOLD field and only process those records where the
 WITHHOLD field is equal to N for NPO.
  
 2. HD0000000248315
 Problem 1:
 ----------
 When a site adds a new clinician to a ward location or changes the
 current clinician of a ward to a new clinician, the new clinician is
 not displaying tickler file entries for patient nutrition monitors.
 This is a patch FH*5.5* 8 related issue. Patch FH*5.5*8 introduced a new
 multivalued CLINICIAN(S) field (#112) to the NUTRITION LOCATION file
 (#119.6).
 Routine FHCTF5 which generates tickler file entries was not modified
 in patch FH*5.5*8 to use this new field. So a clinician added to an
 existing ward will not have tickler file entries for monitors generated.
  
 Resolution 1:
 -------------
 The routine FHCTF5 has been modified to use the new multivauled 
 CLINICIAN(S) field (# 112) of the NUTRITION LOCATION file (# 119.6).
  
 Problem 2:
 ----------
 When a site adds a new clinician to a ward location or changes the
 current clinician of a ward to a new clinician, the new clinician is
 not displaying tickler file entries when the option "Display Tickler File"
 [FHCTF1] is run. This is a patch FH*5.5*8 related issue. Patch FH*5.5*8 
 introduced a new multivalued CLINICIAN(S) field (#112) to the NUTRITION
 LOCATION file (#119.6). Part of the tickler file entry display is 
 generated by routine FHCTF2. It was not modified in patch FH*5.5*8
 to use this new field. So a clinician added to an existing ward will not
 have the tickler file entries generated by routine FHCTF2. With no tickler
 file entries for the clinician generated by neither FHCTF2 or FHCTF5 the
 option FHCTF1 will have nothing to display.
  
 Resolution 2:
 -------------
 Routine FHCTF2 has been modified to use the new multivauled CLINICIAN(S)
 field (# 112) of the NUTRITION LOCATION file (# 119.6).
  
 3. HD0000000268902
 Problem:
 --------
 When a site has created a new ward location, assigned a clinician and 
 started admitting patients. Then a nutrition assessment has been
 entered for a patient and flagged as complete.  The next time routine
 FHCTF5 is run it calls routine FHASM2A to determine if an alert is needed.
 If routine FHASM2A determines an alert is needed, it will error out.
 Routine FHASM2A was modified to use the new multivalued CLINICIAN(S) field
 (# 112) of the NUTRITION LOCATION file (#119.6). It still retained code
 to use the old CLINICIAN field (#1) which would be null for the new ward
 location. This will cause the routine FHASM2A to error out and in turn
 stop the run of routine FHCTF5.
  
 Resolution:
 -----------
 The routine FHASM2A has been modified to use the new multivalued
 CLINICIAN(S) field (#112) of the NUTRTIION LOCATION file (#119.6)
  
 4. HD0000000254150
 Problem:
 --------
 A site has created a new nutrition location, assigned a clinician and
 started admitting patients. Routine FHCTF5 processes the patients for
 monitors. Routine FHCTF5 will error out with a subscript error
 when attempting to write to the DIETITIAN TICKLER FILE (#119). 
 Patch FH*5.5*8 introduced a new multivalued CLINICIAN(S) field (#112) to
 the NUTRITION LOCATION file (#119).  Routine FHCTF5 was not modified in
 patch FH*5.5*8 to use the new field. A new nutrition location would not
 have data in the old clinician field.
 This would leave a variable with a null value.
  
 Resolution:
 ------------
 The routine FHCTF5 has been modified to use the new  multivauled
 CLINICIAN(S) field (# 112) of the NUTRITION LOCATION file (# 119.6).
  
  
 5. HD0000000283890
 Problem:
 --------
 Running XINDEX on routines FHCTF2 and FHCTF5 returned the SAC violation
 of a Lock command without a timeout.
  
 Resolution:
 ------------
 Modification of routines FHCTF2 and FHCTF5 to add timeouts to the Lock
 commands. 
  
 6. HD0000000366449
 Problem:
 --------
 During testing of FH*5.5*20 it was found that routine FHCTF5 was 
 processing all diet orders for the patient's current admission and issuing
 a tickler for any monitor NPO+Clr Liq > 3 days found. This caused ticklers
 to be issued for NPO+Clr Liq diet orders that were no longer valid.
  
 Resolution:
 -----------
 Modification of routine FHCTF5 to only process the current diet order. If
 that diet order is either a NPO or Clr Liq then FHCTF5 will continue to
 process that diet order to determine is it older than three days and if
 a monitor needs to be filed and a tickler issued.
  
 7. HD0000000375086
 Problem:
 --------
 During testing of FH*5.5*20 it was found that some dietitians appeared to 
 be losing monitor tickler records when the option Display Tickler File
 [FHCTF1] was run. In addition these same dietitians would run the option
 Clear Tickler File Entries [FHCTF2] it would report the dietitian had no
 tickler records on file. This was reported after the option FHCTF1 had
 displayed status ticklers for the dietitian. Both of the routines these
 options run call CLN^FHCTF4. This checks the ticklers on file for the
 selected dietitian and it will delete tickler records it has been coded to
 determine as obsolete. One test performed on the tickler record is to
 check the ward in the tickler record for the its assigned dietitian. If
 this does not match the selected dietitian it will assume the selected
 dietitian is no longer assigned to that ward and delete the tickler
 record. CLN^FHCTF4 is using the incorrect field to make this
 determination. It is using the obsolete CLINCIAN field (field #1) rather
 the new CLINICIAN(S) field (field #112). This causes the Display Tickler
 File [FHCTF1] to not report monitor ticklers and the Clear Tickler File
 Entries [FHCTF2] to report no tickler records on file for a dietitian.
  
 Resolution:
 -----------
 Modification of CLN^FHCTF4 to use the new CLINICIAN(S) field (field #112)
 to determine if the selected dietitian is still assigned to the ward in
 the current tickler record.
  
 Installation Instructions:
 ==========================
 If installed during the normal workday, it is recommended that the 
 the Nutrition & Food Services users be off the system.  Other VISTA users
 will not be affected.
  
 Install Time - less than 2 minutes (unless otherwise indicated)
  
 1.  Load Transport Global 
     ---------------------------
  
  Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  Start Up KIDS 
     -----------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution 
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
    
 Select Installation Option: 
    
 3.  Select Installation Option: 
     -------------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter FH*5.5*20):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
      
 4.  Select Installation Option: Install Package(s) 
      ---------------------------------------------------
     **This is the step to start the installation of this KIDS patch: 
     a.  Choose the Install Package(s) option to start the patch
         install.
  
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         NO//' answer NO 
  
     c. When prompted 'Want to DISABLE Scheduled Options, Menu 
        Options, and Protocols? NO//' answer NO 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.5;DIETETICS;**[Patch List]**;Jan 28, 2005;Build 7

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: FHASM2A
    Before: B17396578   After: B16913100  **8,20**
Routine Name: FHCTF2
    Before:   B809965   After:   B976114  **20**
Routine Name: FHCTF4
    Before: B13668134   After: B15277826  **20**
Routine Name: FHCTF5
    Before: B27613235   After: B41046535  **4,8,20**
 
Routine list of preceding patches: 8

=============================================================================
User Information:
Entered By  : UNDERHILL,GARDNER D           Date Entered  : SEP 19, 2008
Completed By: CRICHLOW,SHERRY               Date Completed: JUL 21, 2010
Released By : KREUZ,SHERI B                 Date Released : AUG 26, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
