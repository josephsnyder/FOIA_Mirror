KIDS Distribution saved on Dec 04, 2008@13:54:38
YS*5.01*98 V35
**KIDS**:YS*5.01*98^

**INSTALL NAME**
YS*5.01*98
"BLD",7245,0)
YS*5.01*98^MENTAL HEALTH^0^3081204^y
"BLD",7245,1,0)
^9.61A^132^132^3081204^^^^
"BLD",7245,1,1,0)
This patch corrects a defect in the Mental Health Assistant, Dynamic-Link
"BLD",7245,1,2,0)
Library, (MHA DLL). The MHA DLL is called from Computerized Patient Records
"BLD",7245,1,3,0)
System (CPRS) version 27N when a Clinical Reminder note is filled in by the
"BLD",7245,1,4,0)
user.
"BLD",7245,1,5,0)
  
"BLD",7245,1,6,0)
The essential problem concerned the use a temporary file on the user's hard
"BLD",7245,1,7,0)
drive to store user's responses before saving to Veterans Health Information
"BLD",7245,1,8,0)
Systems and Technology Architecture (VistA). This patch provides the means
"BLD",7245,1,9,0)
for that temporary information to be stored in VistA instead. The user is
"BLD",7245,1,10,0)
not aware of this new storage arrangement while using CPRS and the MHA DLL.
"BLD",7245,1,11,0)
  
"BLD",7245,1,12,0)
There are no changes to existing files and no changes from the user's 
"BLD",7245,1,13,0)
perspective.
"BLD",7245,1,14,0)
 
"BLD",7245,1,15,0)
This patch contains three new Remote Procedure Calls (RPCs):
"BLD",7245,1,16,0)
 
"BLD",7245,1,17,0)
   1) YTQ GET SCRATCH: Returns data from the scratch file for the MHA DLL.
"BLD",7245,1,18,0)
      Input: DFN, test CODE and GIU HANDLE.
"BLD",7245,1,19,0)
  
"BLD",7245,1,20,0)
   2) YTQ KILL SCRATCH: Delete entries from the scratch file when a clinical
"BLD",7245,1,21,0)
      reminder is saved. Input: DFN, test CODE and GIU HANDLE.
"BLD",7245,1,22,0)
  
"BLD",7245,1,23,0)
   3) YTQ SET SCRATCH: API is designed to set data to a scratch file for the
"BLD",7245,1,24,0)
      MHA DLL. Input: DFN, test CODE and GIU HANDLE.
"BLD",7245,1,25,0)
  
"BLD",7245,1,26,0)
This patch introduces a new file called, MH CR SCRATCH FILE (#601.94). This
"BLD",7245,1,27,0)
file is used as temporary storage space for the interface between the MHA 
"BLD",7245,1,28,0)
DLL and Clinical Reminders.
"BLD",7245,1,29,0)
  
"BLD",7245,1,30,0)
A new routine, YTQPXRM8, is also included.
"BLD",7245,1,31,0)
 
"BLD",7245,1,32,0)
Associated Remedy Tickets:
"BLD",7245,1,33,0)
=============================
"BLD",7245,1,34,0)
  
"BLD",7245,1,35,0)
HD0000000233026, HD0000000240965, HD0000000232542, HD0000000247135,
"BLD",7245,1,36,0)
HD0000000240965, HD0000000232427, and HD0000000233367.
"BLD",7245,1,37,0)
Clinical reminders: Completed mental health instruments are incorrectly
"BLD",7245,1,38,0)
identified as having missing answers.
"BLD",7245,1,39,0)
  
"BLD",7245,1,40,0)
Associated E3R:
"BLD",7245,1,41,0)
===============
"BLD",7245,1,42,0)
N/A
"BLD",7245,1,43,0)
  
"BLD",7245,1,44,0)
Test Site List:
"BLD",7245,1,45,0)
===============
"BLD",7245,1,46,0)
Loma Linda, CA - Large
"BLD",7245,1,47,0)
Palo Alto, CA - Integrated, Large
"BLD",7245,1,48,0)
Philadelphia, PA - Large
"BLD",7245,1,49,0)
  
"BLD",7245,1,50,0)
This is a sub set of sites used by CPRS GUI v27.n (OR*3*296) and were
"BLD",7245,1,51,0)
determined by that team. (The CPRS test sites do not include any medium or
"BLD",7245,1,52,0)
small sites.)
"BLD",7245,1,53,0)
  
"BLD",7245,1,54,0)
Routine Summary:
"BLD",7245,1,55,0)
================
"BLD",7245,1,56,0)
Checksums shown are NEW Checksums
"BLD",7245,1,57,0)
  
"BLD",7245,1,58,0)
The following routine is included in this patch.  The second line 
"BLD",7245,1,59,0)
of this routine now looks like:
"BLD",7245,1,60,0)
 ;;5.01;MENTAL HEALTH;**[Patch List]**;Dec 30, 1994
"BLD",7245,1,61,0)
 
"BLD",7245,1,62,0)
                 Checksums
"BLD",7245,1,63,0)
Routine         Old         New        Patch List
"BLD",7245,1,64,0)
YTQPXRM8        n/a      15837966    **98**
"BLD",7245,1,65,0)
  
"BLD",7245,1,66,0)
Sites should use CHECK1^XTSUMBLD to verify checksums. 
"BLD",7245,1,67,0)
  
"BLD",7245,1,68,0)
SOFTWARE RETRIEVAL:
"BLD",7245,1,69,0)
===================
"BLD",7245,1,70,0)
 
"BLD",7245,1,71,0)
The following software and documentation files are exported as 
"BLD",7245,1,72,0)
part of this patch:
"BLD",7245,1,73,0)
 
"BLD",7245,1,74,0)
File Name            Contents                            Retrieval Format
"BLD",7245,1,75,0)
---------            --------                            ----------------
"BLD",7245,1,76,0)
YS_501_98.KID        MHA Clinical Reminders APIs         ASCII
"BLD",7245,1,77,0)
YS_501_98_SETUP.EXE  Installs DLL                        Binary
"BLD",7245,1,78,0)
YS_MHA_A.dll         DLL support for Clinical Reminders  Binary
"BLD",7245,1,79,0)
 
"BLD",7245,1,80,0)
The software files are available on the following OI Field Offices'
"BLD",7245,1,81,0)
ANONYMOUS.SOFTWARE directories.
"BLD",7245,1,82,0)
 
"BLD",7245,1,83,0)
All sites are encouraged to use their FTP capability to obtain these
"BLD",7245,1,84,0)
files.  Use the FTP address "download.vista.med.va.gov" (without the
"BLD",7245,1,85,0)
quotes) to connect to the first available FTP server where the files
"BLD",7245,1,86,0)
are located.
"BLD",7245,1,87,0)
 
"BLD",7245,1,88,0)
    OI FIELD OFFICE    FTP ADDRESS                DIRECTORY
"BLD",7245,1,89,0)
    ===============    ===========                =========
"BLD",7245,1,90,0)
    ALBANY             ftp.fo-albany.med.va.gov   [ANONYMOUS.SOFTWARE]
"BLD",7245,1,91,0)
    HINES              ftp.fo-hines.med.va.gov    [ANONYMOUS.SOFTWARE]
"BLD",7245,1,92,0)
    SALT LAKE          ftp.fo-slc.med.va.gov      [ANONYMOUS.SOFTWARE]
"BLD",7245,1,93,0)
 
"BLD",7245,1,94,0)
Installation Instructions:
"BLD",7245,1,95,0)
==========================
"BLD",7245,1,96,0)
1. Use the 'LOAD A DISTRIBUTION' option on the PackMan menu. The
"BLD",7245,1,97,0)
   Host File name is YS_501_98.KID.  Answer YES to the question:
"BLD",7245,1,98,0)
   "Want to Continue with Load? YES//"
"BLD",7245,1,99,0)
  
"BLD",7245,1,100,0)
2. The patch has now been loaded into a Transport global on your
"BLD",7245,1,101,0)
   system. You now need to install the Transport global.
"BLD",7245,1,102,0)
   On the KIDS menu, under the 'Installation' menu, use the
"BLD",7245,1,103,0)
   following options:
"BLD",7245,1,104,0)
  
"BLD",7245,1,105,0)
    Print Transport Global
"BLD",7245,1,106,0)
    Compare Transport Global to Current System
"BLD",7245,1,107,0)
    Verify Checksums in Transport Global
"BLD",7245,1,108,0)
    Backup a Transport Global
"BLD",7245,1,109,0)
  
"BLD",7245,1,110,0)
3. Users may remain on the system, but installation should be done
"BLD",7245,1,111,0)
   at off peak hours.
"BLD",7245,1,112,0)
  
"BLD",7245,1,113,0)
4. Installation will take less than five minutes.
"BLD",7245,1,114,0)
  
"BLD",7245,1,115,0)
5. From the 'Installation Menu' of the KIDS menu, run the option
"BLD",7245,1,116,0)
   'Install Package(s)' Select the package 'YS*5.01*98'
"BLD",7245,1,117,0)
   and proceed with install.
"BLD",7245,1,118,0)
  
"BLD",7245,1,119,0)
6. When prompted 'Want KIDS to INHIBIT LOGONs during the
"BLD",7245,1,120,0)
   install//', respond NO.
"BLD",7245,1,121,0)
  
"BLD",7245,1,122,0)
7. When prompted 'Want to DISABLE Scheduled Options, Menu Options,
"BLD",7245,1,123,0)
   and Protocols? YES//', respond NO
"BLD",7245,1,124,0)
  
"BLD",7245,1,125,0)
8. Download YS_501_98_Setup.exe in binary mode and run the YS_501_98_Setup.
"BLD",7245,1,126,0)
   exe file to install Clinical Reminders MHA DLL. Please install the DLL
"BLD",7245,1,127,0)
   in the default folders. The install program requires two dialogs of the
"BLD",7245,1,128,0)
   user (to start and to signify finished). To avoid the user/install
"BLD",7245,1,129,0)
   interaction, the file YS_MHA_A.dll can be copied directly to the
"BLD",7245,1,130,0)
   C:\Programs Files\Vista\Common Files directory. This may be the more
"BLD",7245,1,131,0)
   desirable way to push the dll to many workstations.
"BLD",7245,1,132,0)
  
"BLD",7245,4,0)
^9.64PA^601.94^1
"BLD",7245,4,601.94,0)
601.94
"BLD",7245,4,601.94,222)
y^y^f^^^^n
"BLD",7245,4,"B",601.94,601.94)

"BLD",7245,6.3)
11
"BLD",7245,"ABPKG")
n
"BLD",7245,"KRN",0)
^9.67PA^8989.52^19
"BLD",7245,"KRN",.4,0)
.4
"BLD",7245,"KRN",.401,0)
.401
"BLD",7245,"KRN",.402,0)
.402
"BLD",7245,"KRN",.403,0)
.403
"BLD",7245,"KRN",.5,0)
.5
"BLD",7245,"KRN",.84,0)
.84
"BLD",7245,"KRN",3.6,0)
3.6
"BLD",7245,"KRN",3.8,0)
3.8
"BLD",7245,"KRN",9.2,0)
9.2
"BLD",7245,"KRN",9.8,0)
9.8
"BLD",7245,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7245,"KRN",9.8,"NM",1,0)
YTQPXRM8^^0^B15837966
"BLD",7245,"KRN",9.8,"NM","B","YTQPXRM8",1)

"BLD",7245,"KRN",19,0)
19
"BLD",7245,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",7245,"KRN",19,"NM",1,0)
YS BROKER1^^0
"BLD",7245,"KRN",19,"NM","B","YS BROKER1",1)

"BLD",7245,"KRN",19.1,0)
19.1
"BLD",7245,"KRN",101,0)
101
"BLD",7245,"KRN",409.61,0)
409.61
"BLD",7245,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",7245,"KRN",771,0)
771
"BLD",7245,"KRN",870,0)
870
"BLD",7245,"KRN",8989.51,0)
8989.51
"BLD",7245,"KRN",8989.52,0)
8989.52
"BLD",7245,"KRN",8994,0)
8994
"BLD",7245,"KRN",8994,"NM",0)
^9.68A^3^3
"BLD",7245,"KRN",8994,"NM",1,0)
YTQ SET SCRATCH^^0
"BLD",7245,"KRN",8994,"NM",2,0)
YTQ KILL SCRATCH^^0
"BLD",7245,"KRN",8994,"NM",3,0)
YTQ GET SCRATCH^^0
"BLD",7245,"KRN",8994,"NM","B","YTQ GET SCRATCH",3)

"BLD",7245,"KRN",8994,"NM","B","YTQ KILL SCRATCH",2)

"BLD",7245,"KRN",8994,"NM","B","YTQ SET SCRATCH",1)

"BLD",7245,"KRN","B",.4,.4)

"BLD",7245,"KRN","B",.401,.401)

"BLD",7245,"KRN","B",.402,.402)

"BLD",7245,"KRN","B",.403,.403)

"BLD",7245,"KRN","B",.5,.5)

"BLD",7245,"KRN","B",.84,.84)

"BLD",7245,"KRN","B",3.6,3.6)

"BLD",7245,"KRN","B",3.8,3.8)

"BLD",7245,"KRN","B",9.2,9.2)

"BLD",7245,"KRN","B",9.8,9.8)

"BLD",7245,"KRN","B",19,19)

"BLD",7245,"KRN","B",19.1,19.1)

"BLD",7245,"KRN","B",101,101)

"BLD",7245,"KRN","B",409.61,409.61)

"BLD",7245,"KRN","B",771,771)

"BLD",7245,"KRN","B",870,870)

"BLD",7245,"KRN","B",8989.51,8989.51)

"BLD",7245,"KRN","B",8989.52,8989.52)

"BLD",7245,"KRN","B",8994,8994)

"BLD",7245,"QUES",0)
^9.62^^
"BLD",7245,"REQB",0)
^9.611^1^1
"BLD",7245,"REQB",1,0)
YS*5.01*85^2
"BLD",7245,"REQB","B","YS*5.01*85",1)

"FIA",601.94)
MH CR SCRATCH
"FIA",601.94,0)
^YTT(601.94,
"FIA",601.94,0,0)
601.94
"FIA",601.94,0,1)
y^y^f^^^^n
"FIA",601.94,0,10)

"FIA",601.94,0,11)

"FIA",601.94,0,"RLRO")

"FIA",601.94,0,"VR")
5.01^YS
"FIA",601.94,601.94)
0
"FIA",601.94,601.949)
0
"IX",601.94,601.94,"AF",0)
601.94^AF^By User,Patient, test and handle^R^^R^IR^I^601.94^^^^^S
"IX",601.94,601.94,"AF",.1,0)
^^2^2^3081022^
"IX",601.94,601.94,"AF",.1,1,0)
This cross reference allows lookup by User (file 200), Patient (DFN), 
"IX",601.94,601.94,"AF",.1,2,0)
Test (file 601.71) and the handle of the session calling the DLL,
"IX",601.94,601.94,"AF",1)
S ^YTT(601.94,"AF",X(1),X(2),X(3),X(4),DA)=""
"IX",601.94,601.94,"AF",2)
K ^YTT(601.94,"AF",X(1),X(2),X(3),X(4),DA)
"IX",601.94,601.94,"AF",2.5)
K ^YTT(601.94,"AF")
"IX",601.94,601.94,"AF",11.1,0)
^.114IA^4^4
"IX",601.94,601.94,"AF",11.1,1,0)
1^F^601.94^8^^1^F
"IX",601.94,601.94,"AF",11.1,2,0)
2^F^601.94^1^^2^F
"IX",601.94,601.94,"AF",11.1,3,0)
3^F^601.94^3^^3^F
"IX",601.94,601.94,"AF",11.1,4,0)
4^F^601.94^10^^4^F
"KRN",19,13413,-1)
0^1
"KRN",19,13413,0)
YS BROKER1^YS BROKER1 version 1.0.2.20~1.0.0.1~1.0.0.1^^B^^^^^^^n^
"KRN",19,13413,1,0)
^19.06^1^1^3081204^^^^
"KRN",19,13413,1,1,0)
Allows user to call VISTA's remote procedures.
"KRN",19,13413,99.1)
60709,60780
"KRN",19,13413,"RPC",0)
^19.05P^139^139
"KRN",19,13413,"RPC",1,0)
YTAPI LISTALL
"KRN",19,13413,"RPC",2,0)
YTAPI LISTONE
"KRN",19,13413,"RPC",3,0)
YTAPI SCOREIT
"KRN",19,13413,"RPC",4,0)
YTAPI SAVEIT
"KRN",19,13413,"RPC",5,0)
YTAPI SHOWALL
"KRN",19,13413,"RPC",6,0)
YTAPI SHOWIT
"KRN",19,13413,"RPC",7,0)
YS GAF API
"KRN",19,13413,"RPC",16,0)
DDR GETS ENTRY DATA
"KRN",19,13413,"RPC",17,0)
DDR LISTER
"KRN",19,13413,"RPC",18,0)
DDR VALIDATOR
"KRN",19,13413,"RPC",19,0)
DDR FILER
"KRN",19,13413,"RPC",20,0)
YTAPI NEW ASI
"KRN",19,13413,"RPC",21,0)
ORWPT LAST5
"KRN",19,13413,"RPC",22,0)
ORQPT CLINIC PATIENTS
"KRN",19,13413,"RPC",23,0)
ORQPT PROVIDER PATIENTS
"KRN",19,13413,"RPC",24,0)
ORQPT SPECIALTIES
"KRN",19,13413,"RPC",25,0)
ORQPT SPECIALTY PATIENTS
"KRN",19,13413,"RPC",26,0)
ORQPT WARDS
"KRN",19,13413,"RPC",28,0)
ORWPT ID INFO
"KRN",19,13413,"RPC",29,0)
ORWPT LIST ALL
"KRN",19,13413,"RPC",33,0)
ORWU CLINLOC
"KRN",19,13413,"RPC",34,0)
ORWU DT
"KRN",19,13413,"RPC",35,0)
ORWU NEWPERS
"KRN",19,13413,"RPC",36,0)
ORWORB FASTUSER
"KRN",19,13413,"RPC",37,0)
ORQPT DEFAULT LIST SOURCE
"KRN",19,13413,"RPC",38,0)
ORWU USERINFO
"KRN",19,13413,"RPC",40,0)
ORQPT DEFAULT PATIENT LIST
"KRN",19,13413,"RPC",46,0)
YTRP INSTRUMENT REPORT
"KRN",19,13413,"RPC",47,0)
YSRP ASI ITEM
"KRN",19,13413,"RPC",48,0)
YSRP ASI NARRATIVE
"KRN",19,13413,"RPC",49,0)
YTAPI ASI PNOTE
"KRN",19,13413,"RPC",50,0)
YTAPI CLERK RESPONSES
"KRN",19,13413,"RPC",51,0)
YTAPI ASI SAVE DATA
"KRN",19,13413,"RPC",52,0)
YTAPI ASI SIGNER
"KRN",19,13413,"RPC",53,0)
YTAPI SAVE TEST COMMENT
"KRN",19,13413,"RPC",54,0)
YTAPI ASI FACTORS
"KRN",19,13413,"RPC",55,0)
DDR FIND1
"KRN",19,13413,"RPC",56,0)
YTAPI ASI LISTER
"KRN",19,13413,"RPC",57,0)
YTAPI GET ASI RESPONSES
"KRN",19,13413,"RPC",58,0)
YTAPI GET INCOMPLETE
"KRN",19,13413,"RPC",59,0)
YTAPI LIST INCOMPLETES
"KRN",19,13413,"RPC",60,0)
YTAPI NEW GAF
"KRN",19,13413,"RPC",61,0)
YTAPI QUEST
"KRN",19,13413,"RPC",62,0)
YTAPI SAVE INCOMPLETES
"KRN",19,13413,"RPC",63,0)
YTAPI TEST BULLETIN
"KRN",19,13413,"RPC",64,0)
YTAPI TEST BATTERY
"KRN",19,13413,"RPC",66,0)
ORWPT PTINQ
"KRN",19,13413,"RPC",67,0)
DDR DELETE ENTRY
"KRN",19,13413,"RPC",68,0)
DGWPT SAVDFLT
"KRN",19,13413,"RPC",69,0)
DGWPT DIEDON
"KRN",19,13413,"RPC",70,0)
DGWPT BYWARD
"KRN",19,13413,"RPC",71,0)
DGWPT CLINRNG
"KRN",19,13413,"RPC",72,0)
DGWPT DFLTSRC
"KRN",19,13413,"RPC",73,0)
DGWPT SELCHK
"KRN",19,13413,"RPC",74,0)
DGWPT TOP
"KRN",19,13413,"RPC",75,0)
XUS KEY CHECK
"KRN",19,13413,"RPC",76,0)
DGWPT SELECT
"KRN",19,13413,"RPC",77,0)
DGWPT1 PRCARE
"KRN",19,13413,"RPC",78,0)
YTQ ADMINS BOTH
"KRN",19,13413,"RPC",79,0)
YTQ ALL ANSWERS
"KRN",19,13413,"RPC",80,0)
YTQ ALL CHOICES
"KRN",19,13413,"RPC",81,0)
YTQ ASI LISTER
"KRN",19,13413,"RPC",82,0)
YTQ ASI SIGNOK
"KRN",19,13413,"RPC",83,0)
YTQ BATTC
"KRN",19,13413,"RPC",84,0)
YTQ BATTDEL
"KRN",19,13413,"RPC",85,0)
YTQ CAPIE
"KRN",19,13413,"RPC",86,0)
YTQ CHOICE ADD
"KRN",19,13413,"RPC",87,0)
YTQ CHOICE ORPHAN DELETE
"KRN",19,13413,"RPC",88,0)
YTQ CHOICEIDENT
"KRN",19,13413,"RPC",89,0)
YTQ CHOICES
"KRN",19,13413,"RPC",90,0)
YTQ CHOICETYPE ADD
"KRN",19,13413,"RPC",91,0)
YTQ CHOICETYPE DELETE
"KRN",19,13413,"RPC",92,0)
YTQ CHOICETYPE DESCRIBE
"KRN",19,13413,"RPC",93,0)
YTQ CHOICETYPE ORPHAN DELETE
"KRN",19,13413,"RPC",94,0)
YTQ COPY TEST
"KRN",19,13413,"RPC",95,0)
YTQ DELETE SCALES AND GROUP
"KRN",19,13413,"RPC",96,0)
YTQ DELETE TEST
"KRN",19,13413,"RPC",97,0)
YTQ DISPLAY
"KRN",19,13413,"RPC",98,0)
YTQ EXPORT
"KRN",19,13413,"RPC",99,0)
YTQ EXPORTED MAIL
"KRN",19,13413,"RPC",100,0)
YTQ FIRST WP
"KRN",19,13413,"RPC",101,0)
YTQ GAF HX
"KRN",19,13413,"RPC",102,0)
YTQ GENERIC LISTER
"KRN",19,13413,"RPC",103,0)
YTQ GET ADMINISTRATIONS
"KRN",19,13413,"RPC",104,0)
YTQ GET REPORT
"KRN",19,13413,"RPC",105,0)
YTQ GET SCALES
"KRN",19,13413,"RPC",106,0)
YTQ GETANS
"KRN",19,13413,"RPC",107,0)
YTQ IMPORT
"KRN",19,13413,"RPC",108,0)
YTQ KEYS
"KRN",19,13413,"RPC",109,0)
YTQ LEGACY REPORT
"KRN",19,13413,"RPC",110,0)
YTQ PATIENT INFO
"KRN",19,13413,"RPC",111,0)
YTQ PATIENT LOOKUP
"KRN",19,13413,"RPC",112,0)
YTQ PN CREATE
"KRN",19,13413,"RPC",113,0)
YTQ PURGE
"KRN",19,13413,"RPC",114,0)
YTQ QUESTALL
"KRN",19,13413,"RPC",115,0)
YTQ RULEDEL
"KRN",19,13413,"RPC",116,0)
YTQ RULES
"KRN",19,13413,"RPC",117,0)
YTQ SAVE
"KRN",19,13413,"RPC",118,0)
YTQ SCALEGROUP
"KRN",19,13413,"RPC",119,0)
YTQ SCORE ADMIN
"KRN",19,13413,"RPC",120,0)
YTQ SCORE SAVE
"KRN",19,13413,"RPC",121,0)
YTQ SECTION
"KRN",19,13413,"RPC",122,0)
YTQ SET ANSWER
"KRN",19,13413,"RPC",123,0)
YTQ SET NATIONAL
"KRN",19,13413,"RPC",124,0)
YTQ SKIP
"KRN",19,13413,"RPC",125,0)
YTQ TEST ADD
"KRN",19,13413,"RPC",126,0)
YTQ TEST ORDER
"KRN",19,13413,"RPC",127,0)
YTQ TSLIST
"KRN",19,13413,"RPC",128,0)
YTQ TSLIST1
"KRN",19,13413,"RPC",129,0)
YTQ USERQ
"KRN",19,13413,"RPC",130,0)
YTQ VERSRV
"KRN",19,13413,"RPC",131,0)
YTQ WP ALL
"KRN",19,13413,"RPC",132,0)
YTQ WP FILER
"KRN",19,13413,"RPC",133,0)
YTQ HL7
"KRN",19,13413,"RPC",134,0)
YTQ LEGCR
"KRN",19,13413,"RPC",135,0)
YTAPI PREVIEW
"KRN",19,13413,"RPC",136,0)
YTQ ALLKEYS
"KRN",19,13413,"RPC",137,0)
YTQ GET SCRATCH
"KRN",19,13413,"RPC",138,0)
YTQ SET SCRATCH
"KRN",19,13413,"RPC",139,0)
YTQ KILL SCRATCH
"KRN",19,13413,"U")
YS BROKER1 VERSION 1.0.2.20~1.
"KRN",8994,2318,-1)
0^1
"KRN",8994,2318,0)
YTQ SET SCRATCH^SETSCR^YTQPXRM8^2^S
"KRN",8994,2318,1,0)
^8994.01^1^1^3081112^^^^
"KRN",8994,2318,1,1,0)
api to set data to a scratch file for the MHA3 DLL.
"KRN",8994,2318,2,0)
^8994.02A^3^3
"KRN",8994,2318,2,1,0)
DFN^1^^1
"KRN",8994,2318,2,1,1,0)
^^1^1^3080523^
"KRN",8994,2318,2,1,1,1,0)
IEN of patient in file 2.
"KRN",8994,2318,2,2,0)
CODE^1^^1
"KRN",8994,2318,2,2,1,0)
^8994.021^1^1^3081112^^^
"KRN",8994,2318,2,2,1,1,0)
Name of Instrument from file 601.71
"KRN",8994,2318,2,3,0)
HANDLE^1^^1
"KRN",8994,2318,2,3,1,0)
^8994.021^1^1^3081112^^^^
"KRN",8994,2318,2,3,1,1,0)
Unique identifer of the GUI session.
"KRN",8994,2318,2,"B","CODE",2)

"KRN",8994,2318,2,"B","DFN",1)

"KRN",8994,2318,2,"B","HANDLE",3)

"KRN",8994,2319,-1)
0^3
"KRN",8994,2319,0)
YTQ GET SCRATCH^GETSCR^YTQPXRM8^4^^^^1
"KRN",8994,2319,1,0)
^8994.01^1^1^3081029^^^^
"KRN",8994,2319,1,1,0)
Returns data from the scratch file for thr MHA3 Clinical reminders DLL.
"KRN",8994,2319,2,0)
^8994.02A^3^3
"KRN",8994,2319,2,1,0)
DFN^1^^1
"KRN",8994,2319,2,1,1,0)
^8994.021^1^1^3081029^^
"KRN",8994,2319,2,1,1,1,0)
Patient DFN
"KRN",8994,2319,2,2,0)
CODE^1^^1
"KRN",8994,2319,2,2,1,0)
^8994.021^1^1^3081029^^
"KRN",8994,2319,2,2,1,1,0)
Instrument Name from file 601.71
"KRN",8994,2319,2,3,0)
HANDLE^1^^1
"KRN",8994,2319,2,3,1,0)
^8994.021^1^1^3081029^^^^
"KRN",8994,2319,2,3,1,1,0)
Unigue identifier of the GUI session.
"KRN",8994,2319,2,"B","CODE",2)

"KRN",8994,2319,2,"B","DFN",1)

"KRN",8994,2319,2,"B","HANDLE",3)

"KRN",8994,2320,-1)
0^2
"KRN",8994,2320,0)
YTQ KILL SCRATCH^KILLSCR^YTQPXRM8^2^S
"KRN",8994,2320,1,0)
^8994.01^1^1^3081029^^^
"KRN",8994,2320,1,1,0)
Delete entires from the scratch file when a clinical reminder is saved.
"KRN",8994,2320,2,0)
^8994.02A^3^3
"KRN",8994,2320,2,1,0)
DFN^1^^1
"KRN",8994,2320,2,1,1,0)
^^1^1^3080523^
"KRN",8994,2320,2,1,1,1,0)
Patient DFN
"KRN",8994,2320,2,2,0)
CODE^1^^1
"KRN",8994,2320,2,2,1,0)
^^1^1^3080523^
"KRN",8994,2320,2,2,1,1,0)
Name of instrument from file 601.71
"KRN",8994,2320,2,3,0)
HANDLE^1^^1
"KRN",8994,2320,2,3,1,0)
^8994.021^1^1^3081029^^^
"KRN",8994,2320,2,3,1,1,0)
Unique identifer of GIU session
"KRN",8994,2320,2,"B","CODE",2)

"KRN",8994,2320,2,"B","DFN",1)

"KRN",8994,2320,2,"B","HANDLE",3)

"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",19,-1)
1^1
"PKG",19,0)
MENTAL HEALTH^YS^Version 5.01 of Mental Health
"PKG",19,20,0)
^9.402P^^
"PKG",19,22,0)
^9.49I^1^1
"PKG",19,22,1,0)
5.01^2941230^2950331
"PKG",19,22,1,"PAH",1,0)
98^3081204
"PKG",19,22,1,"PAH",1,1,0)
^^132^132^3081204
"PKG",19,22,1,"PAH",1,1,1,0)
This patch corrects a defect in the Mental Health Assistant, Dynamic-Link
"PKG",19,22,1,"PAH",1,1,2,0)
Library, (MHA DLL). The MHA DLL is called from Computerized Patient Records
"PKG",19,22,1,"PAH",1,1,3,0)
System (CPRS) version 27N when a Clinical Reminder note is filled in by the
"PKG",19,22,1,"PAH",1,1,4,0)
user.
"PKG",19,22,1,"PAH",1,1,5,0)
  
"PKG",19,22,1,"PAH",1,1,6,0)
The essential problem concerned the use a temporary file on the user's hard
"PKG",19,22,1,"PAH",1,1,7,0)
drive to store user's responses before saving to Veterans Health Information
"PKG",19,22,1,"PAH",1,1,8,0)
Systems and Technology Architecture (VistA). This patch provides the means
"PKG",19,22,1,"PAH",1,1,9,0)
for that temporary information to be stored in VistA instead. The user is
"PKG",19,22,1,"PAH",1,1,10,0)
not aware of this new storage arrangement while using CPRS and the MHA DLL.
"PKG",19,22,1,"PAH",1,1,11,0)
  
"PKG",19,22,1,"PAH",1,1,12,0)
There are no changes to existing files and no changes from the user's 
"PKG",19,22,1,"PAH",1,1,13,0)
perspective.
"PKG",19,22,1,"PAH",1,1,14,0)
 
"PKG",19,22,1,"PAH",1,1,15,0)
This patch contains three new Remote Procedure Calls (RPCs):
"PKG",19,22,1,"PAH",1,1,16,0)
 
"PKG",19,22,1,"PAH",1,1,17,0)
   1) YTQ GET SCRATCH: Returns data from the scratch file for the MHA DLL.
"PKG",19,22,1,"PAH",1,1,18,0)
      Input: DFN, test CODE and GIU HANDLE.
"PKG",19,22,1,"PAH",1,1,19,0)
  
"PKG",19,22,1,"PAH",1,1,20,0)
   2) YTQ KILL SCRATCH: Delete entries from the scratch file when a clinical
"PKG",19,22,1,"PAH",1,1,21,0)
      reminder is saved. Input: DFN, test CODE and GIU HANDLE.
"PKG",19,22,1,"PAH",1,1,22,0)
  
"PKG",19,22,1,"PAH",1,1,23,0)
   3) YTQ SET SCRATCH: API is designed to set data to a scratch file for the
"PKG",19,22,1,"PAH",1,1,24,0)
      MHA DLL. Input: DFN, test CODE and GIU HANDLE.
"PKG",19,22,1,"PAH",1,1,25,0)
  
"PKG",19,22,1,"PAH",1,1,26,0)
This patch introduces a new file called, MH CR SCRATCH FILE (#601.94). This
"PKG",19,22,1,"PAH",1,1,27,0)
file is used as temporary storage space for the interface between the MHA 
"PKG",19,22,1,"PAH",1,1,28,0)
DLL and Clinical Reminders.
"PKG",19,22,1,"PAH",1,1,29,0)
  
"PKG",19,22,1,"PAH",1,1,30,0)
A new routine, YTQPXRM8, is also included.
"PKG",19,22,1,"PAH",1,1,31,0)
 
"PKG",19,22,1,"PAH",1,1,32,0)
Associated Remedy Tickets:
"PKG",19,22,1,"PAH",1,1,33,0)
=============================
"PKG",19,22,1,"PAH",1,1,34,0)
  
"PKG",19,22,1,"PAH",1,1,35,0)
HD0000000233026, HD0000000240965, HD0000000232542, HD0000000247135,
"PKG",19,22,1,"PAH",1,1,36,0)
HD0000000240965, HD0000000232427, and HD0000000233367.
"PKG",19,22,1,"PAH",1,1,37,0)
Clinical reminders: Completed mental health instruments are incorrectly
"PKG",19,22,1,"PAH",1,1,38,0)
identified as having missing answers.
"PKG",19,22,1,"PAH",1,1,39,0)
  
"PKG",19,22,1,"PAH",1,1,40,0)
Associated E3R:
"PKG",19,22,1,"PAH",1,1,41,0)
===============
"PKG",19,22,1,"PAH",1,1,42,0)
N/A
"PKG",19,22,1,"PAH",1,1,43,0)
  
"PKG",19,22,1,"PAH",1,1,44,0)
Test Site List:
"PKG",19,22,1,"PAH",1,1,45,0)
===============
"PKG",19,22,1,"PAH",1,1,46,0)
Loma Linda, CA - Large
"PKG",19,22,1,"PAH",1,1,47,0)
Palo Alto, CA - Integrated, Large
"PKG",19,22,1,"PAH",1,1,48,0)
Philadelphia, PA - Large
"PKG",19,22,1,"PAH",1,1,49,0)
  
"PKG",19,22,1,"PAH",1,1,50,0)
This is a sub set of sites used by CPRS GUI v27.n (OR*3*296) and were
"PKG",19,22,1,"PAH",1,1,51,0)
determined by that team. (The CPRS test sites do not include any medium or
"PKG",19,22,1,"PAH",1,1,52,0)
small sites.)
"PKG",19,22,1,"PAH",1,1,53,0)
  
"PKG",19,22,1,"PAH",1,1,54,0)
Routine Summary:
"PKG",19,22,1,"PAH",1,1,55,0)
================
"PKG",19,22,1,"PAH",1,1,56,0)
Checksums shown are NEW Checksums
"PKG",19,22,1,"PAH",1,1,57,0)
  
"PKG",19,22,1,"PAH",1,1,58,0)
The following routine is included in this patch.  The second line 
"PKG",19,22,1,"PAH",1,1,59,0)
of this routine now looks like:
"PKG",19,22,1,"PAH",1,1,60,0)
 ;;5.01;MENTAL HEALTH;**[Patch List]**;Dec 30, 1994
"PKG",19,22,1,"PAH",1,1,61,0)
 
"PKG",19,22,1,"PAH",1,1,62,0)
                 Checksums
"PKG",19,22,1,"PAH",1,1,63,0)
Routine         Old         New        Patch List
"PKG",19,22,1,"PAH",1,1,64,0)
YTQPXRM8        n/a      15837966    **98**
"PKG",19,22,1,"PAH",1,1,65,0)
  
"PKG",19,22,1,"PAH",1,1,66,0)
Sites should use CHECK1^XTSUMBLD to verify checksums. 
"PKG",19,22,1,"PAH",1,1,67,0)
  
"PKG",19,22,1,"PAH",1,1,68,0)
SOFTWARE RETRIEVAL:
"PKG",19,22,1,"PAH",1,1,69,0)
===================
"PKG",19,22,1,"PAH",1,1,70,0)
 
"PKG",19,22,1,"PAH",1,1,71,0)
The following software and documentation files are exported as 
"PKG",19,22,1,"PAH",1,1,72,0)
part of this patch:
"PKG",19,22,1,"PAH",1,1,73,0)
 
"PKG",19,22,1,"PAH",1,1,74,0)
File Name            Contents                            Retrieval Format
"PKG",19,22,1,"PAH",1,1,75,0)
---------            --------                            ----------------
"PKG",19,22,1,"PAH",1,1,76,0)
YS_501_98.KID        MHA Clinical Reminders APIs         ASCII
"PKG",19,22,1,"PAH",1,1,77,0)
YS_501_98_SETUP.EXE  Installs DLL                        Binary
"PKG",19,22,1,"PAH",1,1,78,0)
YS_MHA_A.dll         DLL support for Clinical Reminders  Binary
"PKG",19,22,1,"PAH",1,1,79,0)
 
"PKG",19,22,1,"PAH",1,1,80,0)
The software files are available on the following OI Field Offices'
"PKG",19,22,1,"PAH",1,1,81,0)
ANONYMOUS.SOFTWARE directories.
"PKG",19,22,1,"PAH",1,1,82,0)
 
"PKG",19,22,1,"PAH",1,1,83,0)
All sites are encouraged to use their FTP capability to obtain these
"PKG",19,22,1,"PAH",1,1,84,0)
files.  Use the FTP address "download.vista.med.va.gov" (without the
"PKG",19,22,1,"PAH",1,1,85,0)
quotes) to connect to the first available FTP server where the files
"PKG",19,22,1,"PAH",1,1,86,0)
are located.
"PKG",19,22,1,"PAH",1,1,87,0)
 
"PKG",19,22,1,"PAH",1,1,88,0)
    OI FIELD OFFICE    FTP ADDRESS                DIRECTORY
"PKG",19,22,1,"PAH",1,1,89,0)
    ===============    ===========                =========
"PKG",19,22,1,"PAH",1,1,90,0)
    ALBANY             ftp.fo-albany.med.va.gov   [ANONYMOUS.SOFTWARE]
"PKG",19,22,1,"PAH",1,1,91,0)
    HINES              ftp.fo-hines.med.va.gov    [ANONYMOUS.SOFTWARE]
"PKG",19,22,1,"PAH",1,1,92,0)
    SALT LAKE          ftp.fo-slc.med.va.gov      [ANONYMOUS.SOFTWARE]
"PKG",19,22,1,"PAH",1,1,93,0)
 
"PKG",19,22,1,"PAH",1,1,94,0)
Installation Instructions:
"PKG",19,22,1,"PAH",1,1,95,0)
==========================
"PKG",19,22,1,"PAH",1,1,96,0)
1. Use the 'LOAD A DISTRIBUTION' option on the PackMan menu. The
"PKG",19,22,1,"PAH",1,1,97,0)
   Host File name is YS_501_98.KID.  Answer YES to the question:
"PKG",19,22,1,"PAH",1,1,98,0)
   "Want to Continue with Load? YES//"
"PKG",19,22,1,"PAH",1,1,99,0)
  
"PKG",19,22,1,"PAH",1,1,100,0)
2. The patch has now been loaded into a Transport global on your
"PKG",19,22,1,"PAH",1,1,101,0)
   system. You now need to install the Transport global.
"PKG",19,22,1,"PAH",1,1,102,0)
   On the KIDS menu, under the 'Installation' menu, use the
"PKG",19,22,1,"PAH",1,1,103,0)
   following options:
"PKG",19,22,1,"PAH",1,1,104,0)
  
"PKG",19,22,1,"PAH",1,1,105,0)
    Print Transport Global
"PKG",19,22,1,"PAH",1,1,106,0)
    Compare Transport Global to Current System
"PKG",19,22,1,"PAH",1,1,107,0)
    Verify Checksums in Transport Global
"PKG",19,22,1,"PAH",1,1,108,0)
    Backup a Transport Global
"PKG",19,22,1,"PAH",1,1,109,0)
  
"PKG",19,22,1,"PAH",1,1,110,0)
3. Users may remain on the system, but installation should be done
"PKG",19,22,1,"PAH",1,1,111,0)
   at off peak hours.
"PKG",19,22,1,"PAH",1,1,112,0)
  
"PKG",19,22,1,"PAH",1,1,113,0)
4. Installation will take less than five minutes.
"PKG",19,22,1,"PAH",1,1,114,0)
  
"PKG",19,22,1,"PAH",1,1,115,0)
5. From the 'Installation Menu' of the KIDS menu, run the option
"PKG",19,22,1,"PAH",1,1,116,0)
   'Install Package(s)' Select the package 'YS*5.01*98'
"PKG",19,22,1,"PAH",1,1,117,0)
   and proceed with install.
"PKG",19,22,1,"PAH",1,1,118,0)
  
"PKG",19,22,1,"PAH",1,1,119,0)
6. When prompted 'Want KIDS to INHIBIT LOGONs during the
"PKG",19,22,1,"PAH",1,1,120,0)
   install//', respond NO.
"PKG",19,22,1,"PAH",1,1,121,0)
  
"PKG",19,22,1,"PAH",1,1,122,0)
7. When prompted 'Want to DISABLE Scheduled Options, Menu Options,
"PKG",19,22,1,"PAH",1,1,123,0)
   and Protocols? YES//', respond NO
"PKG",19,22,1,"PAH",1,1,124,0)
  
"PKG",19,22,1,"PAH",1,1,125,0)
8. Download YS_501_98_Setup.exe in binary mode and run the YS_501_98_Setup.
"PKG",19,22,1,"PAH",1,1,126,0)
   exe file to install Clinical Reminders MHA DLL. Please install the DLL
"PKG",19,22,1,"PAH",1,1,127,0)
   in the default folders. The install program requires two dialogs of the
"PKG",19,22,1,"PAH",1,1,128,0)
   user (to start and to signify finished). To avoid the user/install
"PKG",19,22,1,"PAH",1,1,129,0)
   interaction, the file YS_MHA_A.dll can be copied directly to the
"PKG",19,22,1,"PAH",1,1,130,0)
   C:\Programs Files\Vista\Common Files directory. This may be the more
"PKG",19,22,1,"PAH",1,1,131,0)
   desirable way to push the dll to many workstations.
"PKG",19,22,1,"PAH",1,1,132,0)
  
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","YTQPXRM8")
0^1^B15837966
"RTN","YTQPXRM8",1,0)
YTQPXRM8 ;ALB/ASF- PSYCH TEST API FOR CLINICAL REMINDERS ; 8/27/08 3:39pm
"RTN","YTQPXRM8",2,0)
 ;;5.01;MENTAL HEALTH;**98**;Dec 30, 1994;Build 11
"RTN","YTQPXRM8",3,0)
 Q
"RTN","YTQPXRM8",4,0)
SETSCR(YSDATA,YS) ;save  scratch CR
"RTN","YTQPXRM8",5,0)
 ;input: DFN = Patient ien
"RTN","YTQPXRM8",6,0)
 ;input: CODE= Test NAME from 601.71
"RTN","YTQPXRM8",7,0)
 ;input: HANDLE= identifer for cprs GIU
"RTN","YTQPXRM8",8,0)
 ;input: YS(1) thru YS(N) WP entries as
"RTN","YTQPXRM8",9,0)
 ; QuestionID^AnswerID^LegacyValue^IsMultipleChoice
"RTN","YTQPXRM8",10,0)
 ;output: [DATA] vs [ERROR]
"RTN","YTQPXRM8",11,0)
 N YSHANDLE,YSDFN,YSTN,YSNOW,YSCODE,YSIEN,N,N2,N3,X,Y,%
"RTN","YTQPXRM8",12,0)
 S YSDATA(1)="[ERROR]"
"RTN","YTQPXRM8",13,0)
 S YSHANDLE=$G(YS("HANDLE"),0)
"RTN","YTQPXRM8",14,0)
 S YSDFN=$G(YS("DFN"))
"RTN","YTQPXRM8",15,0)
 S YSCODE=$G(YS("CODE"),0)
"RTN","YTQPXRM8",16,0)
 S YSTN=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQPXRM8",17,0)
 I YSDFN'?1N.N S YSDATA(2)="bad DFN setscr" Q  ;-->out
"RTN","YTQPXRM8",18,0)
 I YSTN'?1N.N S YSDATA(2)="bad test num setcr" Q  ;-->out
"RTN","YTQPXRM8",19,0)
 D NOW^%DTC S YSNOW=%
"RTN","YTQPXRM8",20,0)
 S N=0
"RTN","YTQPXRM8",21,0)
 F  S N=N+1 Q:'$D(YS(N))  D
"RTN","YTQPXRM8",22,0)
 . S YSIEN=$$NEW^YTQLIB(601.94)
"RTN","YTQPXRM8",23,0)
 . L +^YTT(601.94,YSIEN):10
"RTN","YTQPXRM8",24,0)
 . S ^YTT(601.94,YSIEN,0)=YSIEN_U_YSDFN_U_YSNOW_U_YSTN_U_YS(N)_DUZ
"RTN","YTQPXRM8",25,0)
 . S:YSHANDLE'=0 ^YTT(601.94,YSIEN,2)=YSHANDLE
"RTN","YTQPXRM8",26,0)
 . S ^YTT(601.94,0)=$P(^YTT(601.94,0),U,1,2)_U_YSIEN_U_($P(^YTT(601.94,0),U,4)+1)
"RTN","YTQPXRM8",27,0)
 . S ^YTT(601.94,"B",YSIEN,YSIEN)=""
"RTN","YTQPXRM8",28,0)
 . S ^YTT(601.94,"AF",DUZ,YSDFN,YSTN,YSHANDLE,YSIEN)=""
"RTN","YTQPXRM8",29,0)
 . S ^YTT(601.94,"AD",YSNOW,YSIEN)=""
"RTN","YTQPXRM8",30,0)
 . S ^YTT(601.94,"AE",YSHANDLE,YSIEN)=""
"RTN","YTQPXRM8",31,0)
 . ;answer wp
"RTN","YTQPXRM8",32,0)
 . S N2=N,N3=0 F  S N2=$O(YS(N2)) Q:(N2=(N+1))!(N2'>0)  S N3=N3+1,^YTT(601.94,YSIEN,1,N3,0)=YS(N2)
"RTN","YTQPXRM8",33,0)
 . L -^YTT(601.94,YSIEN)
"RTN","YTQPXRM8",34,0)
 S YSDATA(1)="[DATA]",YSDATA(2)="OK"
"RTN","YTQPXRM8",35,0)
 Q
"RTN","YTQPXRM8",36,0)
GETSCR(YSDATA,YS) ;get CR scratch -for a user,patient and instrument
"RTN","YTQPXRM8",37,0)
 ; input: DFN as Patient Ien
"RTN","YTQPXRM8",38,0)
 ; input: CODE as Instrument name- 601.71
"RTN","YTQPXRM8",39,0)
 ; input: HANDLE= identifer for cprs GIU
"RTN","YTQPXRM8",40,0)
 ; output: SCRATCH list in format
"RTN","YTQPXRM8",41,0)
 ;    QuestionID^AnswerValue^AnswerLegacyValue^IsMultipleChoice^Response Date
"RTN","YTQPXRM8",42,0)
 N G,G2,YSQN,YSTN,YSDFN,N,N1,N2,X1,X2,X,YSIEN,YSRDATE,%,YSHANDLE
"RTN","YTQPXRM8",43,0)
 K ^TMP($J,"YSSCR") S YSDATA=$NA(^TMP($J,"YSSCR"))
"RTN","YTQPXRM8",44,0)
 S ^TMP($J,"YSSCR",1)="[ERROR]"
"RTN","YTQPXRM8",45,0)
 S YSDFN=$G(YS("DFN"))
"RTN","YTQPXRM8",46,0)
 S YSCODE=$G(YS("CODE"),0)
"RTN","YTQPXRM8",47,0)
 S YSHANDLE=$G(YS("HANDLE"),0)
"RTN","YTQPXRM8",48,0)
 S YSTN=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQPXRM8",49,0)
 I YSDFN'?1N.N S ^TMP($J,"YSSCR",2)="bad ad num getscr" Q  ;-->out
"RTN","YTQPXRM8",50,0)
 I YSTN'?1N.N S ^TMP($J,"YSSCR",2)="bad test num getscr" Q  ;-->out
"RTN","YTQPXRM8",51,0)
 D NOW^%DTC S X=%
"RTN","YTQPXRM8",52,0)
 D H^%DTC S X1=%H*86400+%T
"RTN","YTQPXRM8",53,0)
 S YSIEN=0,N1=1
"RTN","YTQPXRM8",54,0)
 F  S YSIEN=$O(^YTT(601.94,"AE",YSHANDLE,YSIEN)) Q:YSIEN'>0  D
"RTN","YTQPXRM8",55,0)
 . S G=$G(^YTT(601.94,YSIEN,0))
"RTN","YTQPXRM8",56,0)
 . Q:($P(G,U,2)'=YSDFN)  ;--> out wrong patient
"RTN","YTQPXRM8",57,0)
 . Q:($P(G,U,9)'=DUZ)  ;--> out wrong user
"RTN","YTQPXRM8",58,0)
 . Q:($P(G,U,4)'=YSTN)  ;--> out wrong test
"RTN","YTQPXRM8",59,0)
 . S X=$P(G,U,3)
"RTN","YTQPXRM8",60,0)
 . D H^%DTC S X2=%H*86400+%T
"RTN","YTQPXRM8",61,0)
 . Q:((X1-X2)>86400)  ;-->out too old
"RTN","YTQPXRM8",62,0)
 . S G2=$G(^YTT(601.94,YSIEN,2))
"RTN","YTQPXRM8",63,0)
 . S YSQN=$P(G,U,5)
"RTN","YTQPXRM8",64,0)
 . S N1=N1+1
"RTN","YTQPXRM8",65,0)
 . S ^TMP($J,"YSSCR",N1)=$P(G,U,5,8)_U_$P(G,U,3)
"RTN","YTQPXRM8",66,0)
 . S N2=0 F  S N2=$O(^YTT(601.94,YSIEN,1,N2)) Q:N2'>0  D
"RTN","YTQPXRM8",67,0)
 .. S N1=N1+1
"RTN","YTQPXRM8",68,0)
 .. S ^TMP($J,"YSSCR",N1)=YSQN_U_$G(^YTT(601.94,YSIEN,1,N2,0))
"RTN","YTQPXRM8",69,0)
 S ^TMP($J,"YSSCR",1)="[DATA]"
"RTN","YTQPXRM8",70,0)
 S:'$D(^TMP($J,"YSSCR",2)) ^TMP($J,"YSSCR",2)="ok-none found!"
"RTN","YTQPXRM8",71,0)
 Q
"RTN","YTQPXRM8",72,0)
KILLSCR(YSDATA,YS) ;delete scratch data
"RTN","YTQPXRM8",73,0)
 ;input: DFN = Patient ien
"RTN","YTQPXRM8",74,0)
 ;input: CODE= Test name from 601.71
"RTN","YTQPXRM8",75,0)
 ;input: HANDLE= identifer for cprs GIU
"RTN","YTQPXRM8",76,0)
 ;output: [DATA] vs [ERROR]
"RTN","YTQPXRM8",77,0)
 N YSDFN,YSTN,YSIEN,DA,YSRDATE,N,DIK
"RTN","YTQPXRM8",78,0)
 S YSDATA(1)="[ERROR]"
"RTN","YTQPXRM8",79,0)
 S YSDFN=$G(YS("DFN"))
"RTN","YTQPXRM8",80,0)
 I YSDFN'?1N.N S YSDATA(2)="bad DFN killscr" Q  ;-->out
"RTN","YTQPXRM8",81,0)
 S YSHANDLE=$G(YS("HANDLE"),0)
"RTN","YTQPXRM8",82,0)
 S YSCODE=$G(YS("CODE"),0)
"RTN","YTQPXRM8",83,0)
 I YSCODE=0 D MULTT Q  ;-->out ASF 8/27/08
"RTN","YTQPXRM8",84,0)
 S YSTN=$O(^YTT(601.71,"B",YSCODE,0))
"RTN","YTQPXRM8",85,0)
 I YSTN'?1N.N S YSDATA(2)="bad test num killscr" Q  ;-->out
"RTN","YTQPXRM8",86,0)
 S YSIEN=0
"RTN","YTQPXRM8",87,0)
 F  S YSIEN=$O(^YTT(601.94,"AF",DUZ,YSDFN,YSTN,YSHANDLE,YSIEN)) Q:YSIEN'>0  D
"RTN","YTQPXRM8",88,0)
 . S DA=YSIEN,DIK="^YTT(601.94," D ^DIK
"RTN","YTQPXRM8",89,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQPXRM8",90,0)
 Q
"RTN","YTQPXRM8",91,0)
MULTT ;multiple test remover
"RTN","YTQPXRM8",92,0)
 S YSTN=0 F  S YSTN=$O(^YTT(601.94,"AF",DUZ,YSDFN,YSTN)) Q:YSTN'>0  D
"RTN","YTQPXRM8",93,0)
 . S YSIEN=0
"RTN","YTQPXRM8",94,0)
 . F  S YSIEN=$O(^YTT(601.94,"AF",DUZ,YSDFN,YSTN,YSHANDLE,YSIEN)) Q:YSIEN'>0  S DA=YSIEN,DIK="^YTT(601.94," D ^DIK
"RTN","YTQPXRM8",95,0)
 S YSDATA(1)="[DATA]"
"RTN","YTQPXRM8",96,0)
 Q
"RTN","YTQPXRM8",97,0)
OLDKILL ;clean up scratch file
"RTN","YTQPXRM8",98,0)
 N X1,X2,X,DA,DIK,YSWHEN,YSOUT
"RTN","YTQPXRM8",99,0)
 S X1=DT,X2=-2 D C^%DTC
"RTN","YTQPXRM8",100,0)
 S YSOUT=X
"RTN","YTQPXRM8",101,0)
 S DIK="^YTT(601.94,"
"RTN","YTQPXRM8",102,0)
 S YSWHEN=0 F  S YSWHEN=$O(^YTT(601.94,"AD",YSWHEN)) Q:YSWHEN'>0!(YSWHEN>YSOUT)  D
"RTN","YTQPXRM8",103,0)
 . S DA=0 F  S DA=$O(^YTT(601.94,"AD",YSWHEN,DA)) Q:DA'>0  D ^DIK
"RTN","YTQPXRM8",104,0)
 Q
"SEC","^DIC",601.94,601.94,0,"AUDIT")
@
"SEC","^DIC",601.94,601.94,0,"DD")
@
"SEC","^DIC",601.94,601.94,0,"DEL")
@
"SEC","^DIC",601.94,601.94,0,"LAYGO")
@
"SEC","^DIC",601.94,601.94,0,"RD")
@
"SEC","^DIC",601.94,601.94,0,"WR")
@
"VER")
8.0^22.0
"^DD",601.94,601.94,0)
FIELD^^10^11
"^DD",601.94,601.94,0,"DDA")
N
"^DD",601.94,601.94,0,"DT")
3081023
"^DD",601.94,601.94,0,"IX","AD",601.94,2)

"^DD",601.94,601.94,0,"IX","AE",601.94,10)

"^DD",601.94,601.94,0,"IX","B",601.94,.01)

"^DD",601.94,601.94,0,"NM","MH CR SCRATCH")

"^DD",601.94,601.94,.01,0)
ID NUMBER^RNJ11,0X^^0;1^S:$TR(X,"new","NEW")="NEW" X=$$NEW^YTQLIB(601.94) K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X S:$G(X) DINUM=X
"^DD",601.94,601.94,.01,1,0)
^.1
"^DD",601.94,601.94,.01,1,1,0)
601.94^B
"^DD",601.94,601.94,.01,1,1,1)
S ^YTT(601.94,"B",$E(X,1,30),DA)=""
"^DD",601.94,601.94,.01,1,1,2)
K ^YTT(601.94,"B",$E(X,1,30),DA)
"^DD",601.94,601.94,.01,3)
Type a Number between 1 and 99999999999, 0 Decimal Digits or NEW.
"^DD",601.94,601.94,.01,21,0)
^^4^4^3081023^
"^DD",601.94,601.94,.01,21,1,0)
This is a unique number identifying this entry. It is the same as 
"^DD",601.94,601.94,.01,21,2,0)
the internal .001 DINUM.
"^DD",601.94,601.94,.01,21,3,0)
 
"^DD",601.94,601.94,.01,21,4,0)
You may enter 'New' and the correct number will automatically be assgined.
"^DD",601.94,601.94,.01,"DT")
3081023
"^DD",601.94,601.94,1,0)
PATIENT^RP2'^DPT(^0;2^Q
"^DD",601.94,601.94,1,3)
Enter name of the patient to whom the data applies.
"^DD",601.94,601.94,1,21,0)
^^3^3^3081022^
"^DD",601.94,601.94,1,21,1,0)
The field specifies the patient (File #2) about which the current 
"^DD",601.94,601.94,1,21,2,0)
data applies. This is the DFN that is associated with the Instrument
"^DD",601.94,601.94,1,21,3,0)
Results.
"^DD",601.94,601.94,1,"DT")
3081022
"^DD",601.94,601.94,2,0)
RESPONSE DATE^D^^0;3^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",601.94,601.94,2,1,0)
^.1
"^DD",601.94,601.94,2,1,1,0)
601.94^AD
"^DD",601.94,601.94,2,1,1,1)
S ^YTT(601.94,"AD",$E(X,1,30),DA)=""
"^DD",601.94,601.94,2,1,1,2)
K ^YTT(601.94,"AD",$E(X,1,30),DA)
"^DD",601.94,601.94,2,1,1,"DT")
3080428
"^DD",601.94,601.94,2,3)
Please enter the date/time of the data entered, most often NOW.
"^DD",601.94,601.94,2,21,0)
^^1^1^3081022^
"^DD",601.94,601.94,2,21,1,0)
Date/Time of responses given via the reminder.
"^DD",601.94,601.94,2,"DT")
3081022
"^DD",601.94,601.94,3,0)
INSTRUMENT^P601.71'^YTT(601.71,^0;4^Q
"^DD",601.94,601.94,3,3)
Select the name of the instrument being completed.
"^DD",601.94,601.94,3,21,0)
^^2^2^3081022^
"^DD",601.94,601.94,3,21,1,0)
Instrument from MHA3 file 601.71 that is the basis of the clinical 
"^DD",601.94,601.94,3,21,2,0)
reminder.
"^DD",601.94,601.94,3,"DT")
3081022
"^DD",601.94,601.94,4,0)
QUESTION^P601.72'^YTT(601.72,^0;5^Q
"^DD",601.94,601.94,4,3)
Select a question from this instrument.
"^DD",601.94,601.94,4,21,0)
^^3^3^3081022^
"^DD",601.94,601.94,4,21,1,0)
Question number from file 601.72 MH Questions. This is the question being 
"^DD",601.94,601.94,4,21,2,0)
asked as part of the specified instrument on which the Clinical Reminder 
"^DD",601.94,601.94,4,21,3,0)
is based.
"^DD",601.94,601.94,4,"DT")
3081023
"^DD",601.94,601.94,5,0)
ANSWER^P601.75'^YTT(601.75,^0;6^Q
"^DD",601.94,601.94,5,3)
Select the answer to the question.
"^DD",601.94,601.94,5,21,0)
^^2^2^3081023^
"^DD",601.94,601.94,5,21,1,0)
This is the MH Choice selected as the answer. This is the answer to 
"^DD",601.94,601.94,5,21,2,0)
the question in field 4.
"^DD",601.94,601.94,5,"DT")
3081023
"^DD",601.94,601.94,6,0)
LEGACY VALUE^F^^0;7^K:$L(X)>3!($L(X)<1) X
"^DD",601.94,601.94,6,3)
Answer must be 1-3 characters in length.
"^DD",601.94,601.94,6,21,0)
^^14^14^3081023^
"^DD",601.94,601.94,6,21,1,0)
The MH Choices file contains the individual selections possible in a
"^DD",601.94,601.94,6,21,2,0)
multiple choice question.  Examples are Yes or No, True or False, 1.  
"^DD",601.94,601.94,6,21,3,0)
Abraham Lincoln, 2. George Washington, 3. George W. Bush or 4. Richard
"^DD",601.94,601.94,6,21,4,0)
Nixon. For instruments first defined in the legacy system MH INSTRUMENT
"^DD",601.94,601.94,6,21,5,0)
file (#601), 1-3 characters are specified for a multiple choice answer.  
"^DD",601.94,601.94,6,21,6,0)
If George Washington was the choice selected the legacy value would be 2.
"^DD",601.94,601.94,6,21,7,0)
 
"^DD",601.94,601.94,6,21,8,0)
Choices are pointed to by the MH CHOICETYPES file (#601.751) which is a 
"^DD",601.94,601.94,6,21,9,0)
collection of choices.  Choices are referenced in the MH ANSWERS file 
"^DD",601.94,601.94,6,21,10,0)
(#601.85) as a pointer to the full response.
"^DD",601.94,601.94,6,21,11,0)
 
"^DD",601.94,601.94,6,21,12,0)
 
"^DD",601.94,601.94,6,21,13,0)
Please remember this field is automatically entered by the MHA3 DLL and 
"^DD",601.94,601.94,6,21,14,0)
Clinical reminders. No user input is allowed.
"^DD",601.94,601.94,6,"DT")
3081023
"^DD",601.94,601.94,7,0)
IS MULTIPLE CHOICE^S^YES:Yes;NO:NO;^0;8^Q
"^DD",601.94,601.94,7,3)
Is this question multiple choice?
"^DD",601.94,601.94,7,21,0)
^^1^1^3081022^
"^DD",601.94,601.94,7,21,1,0)
Yes if Question is of Multiple choice type.
"^DD",601.94,601.94,7,"DT")
3081023
"^DD",601.94,601.94,8,0)
USER^P200'^VA(200,^0;9^Q
"^DD",601.94,601.94,8,3)
Select user entering the data.
"^DD",601.94,601.94,8,21,0)
^^1^1^3081023^
"^DD",601.94,601.94,8,21,1,0)
This is the person who entered the clinical reminder.
"^DD",601.94,601.94,8,"DT")
3081023
"^DD",601.94,601.94,9,0)
ANSWER TEXT^601.949^^1;0
"^DD",601.94,601.94,9,21,0)
^^3^3^3081023^
"^DD",601.94,601.94,9,21,1,0)
Full text of the free text answer. Only populated if the question  
"^DD",601.94,601.94,9,21,2,0)
specified in field 4 is listed as free text in the MH Questions file
"^DD",601.94,601.94,9,21,3,0)
(601.72).
"^DD",601.94,601.94,10,0)
HANDLE^F^^2;1^K:$L(X)>240!($L(X)<1) X
"^DD",601.94,601.94,10,1,0)
^.1
"^DD",601.94,601.94,10,1,1,0)
601.94^AE
"^DD",601.94,601.94,10,1,1,1)
S ^YTT(601.94,"AE",$E(X,1,30),DA)=""
"^DD",601.94,601.94,10,1,1,2)
K ^YTT(601.94,"AE",$E(X,1,30),DA)
"^DD",601.94,601.94,10,1,1,"DT")
3080514
"^DD",601.94,601.94,10,3)
Enter the windows session handle.
"^DD",601.94,601.94,10,21,0)
^^3^3^3081022^
"^DD",601.94,601.94,10,21,1,0)
Enter the Unique identifier of the windows session; formally called the 
"^DD",601.94,601.94,10,21,2,0)
Handle. This is the Windows identification of the process calling the 
"^DD",601.94,601.94,10,21,3,0)
MHA3 DLL.
"^DD",601.94,601.94,10,"DT")
3081022
"^DD",601.94,601.949,0)
ANSWER TEXT SUB-FIELD^^.01^1
"^DD",601.94,601.949,0,"DT")
3081023
"^DD",601.94,601.949,0,"NM","ANSWER TEXT")

"^DD",601.94,601.949,0,"UP")
601.94
"^DD",601.94,601.949,.01,0)
ANSWER TEXT^W^^0;1^Q
"^DD",601.94,601.949,.01,"DT")
3081023
"^DIC",601.94,601.94,0)
MH CR SCRATCH^601.94
"^DIC",601.94,601.94,0,"GL")
^YTT(601.94,
"^DIC",601.94,601.94,"%",0)
^1.005^^
"^DIC",601.94,601.94,"%D",0)
^^7^7^3081022^
"^DIC",601.94,601.94,"%D",1,0)
This file is used as temporary storage space for the interface between the
"^DIC",601.94,601.94,"%D",2,0)
MHA3 DLL and Clinical Reminders.
"^DIC",601.94,601.94,"%D",3,0)
 
"^DIC",601.94,601.94,"%D",4,0)
The data in this file cannot be entered manually and is managed by the 
"^DIC",601.94,601.94,"%D",5,0)
MHA3 DLL. Data in this file is routinely purged. The data 
"^DIC",601.94,601.94,"%D",6,0)
in this file is transferred to files MH Administrations 601.84 and MH 
"^DIC",601.94,601.94,"%D",7,0)
Answers 601.85 and then deleted when the Clinical Reminder is completed.
"^DIC",601.94,"B","MH CR SCRATCH",601.94)

**END**
**END**
