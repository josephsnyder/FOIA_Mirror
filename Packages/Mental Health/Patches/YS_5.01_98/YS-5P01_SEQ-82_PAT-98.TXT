
=============================================================================
Run Date: AUG 27, 2009                     Designation: YS*5.01*98
Package : YS - MENTAL HEALTH                  Priority: Mandatory
Version : 5.01        SEQ #82                   Status: Released
                  Compliance Date: SEP 27, 2009
=============================================================================

Associated patches: (v)YS*5.01*85  <<= must be installed BEFORE `YS*5.01*98'

Subject: MHA DLL SUPPORT FOR CLINICAL REMINDERS IN CPRS V27.90

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 This patch corrects a defect in the Mental Health Assistant, Dynamic-Link
 Library, (MHA DLL). The MHA DLL is called from Computerized Patient Records
 System (CPRS) version 27.90 when a Clinical Reminder note is filled in by
 the user.
   
 The essential problem concerned the use a temporary file on the user's hard
 drive to store user's responses before saving to Veterans Health Information
 Systems and Technology Architecture (VistA). This patch provides the means
 for that temporary information to be stored in VistA instead. The user is
 not aware of this new storage arrangement while using CPRS and the MHA DLL.
   
 There are no changes to existing files and no changes from the user's
 perspective.
   
 This patch contains three new Remote Procedure Calls (RPCs):
   
          1) YTQ GET SCRATCH:  Returns data from the scratch file for the MHA
 DLL. Input: DFN, test CODE and GUI HANDLE.
   
          2) YTQ KILL SCRATCH:  Delete entries from the scratch file when a
 clinical reminder is saved. Input: DFN, test CODE and GUI HANDLE.
   
          3) YTQ SET SCRATCH:  API is designed to set data to a scratch file
 for the MHA DLL. Input: DFN, test CODE and GUI HANDLE.
   
 This patch introduces a new file called, MH CR SCRATCH FILE (#601.94). This
 file is used as temporary storage space for the interface between the MHA 
 DLL and Clinical Reminders.
   
 A new routine, YTQPXRM8, is also included.
   
 Associated Remedy Tickets:
 ==========================
    
 HD0000000233026, HD0000000240965, HD0000000232542, HD0000000247135,
 HD0000000232427, and HD0000000233367.
 Clinical reminders: Completed mental health instruments are incorrectly
 identified as having missing answers.
   
 Associated E3R:
 ===============
   
 N/A
   
 Test Site List:
 ===============
 Loma Linda, CA - Large
 Palo Alto, CA - Integrated, Large
 Philadelphia, PA - Large
   
 Software Retrieval:
 ===================
 The following software and documentation files are exported as part
 of this patch:
  
 File Name           Contents                         Retrieval Format
 ---------           --------                         ----------------
 YS_501_98.KID       MHA Clinical Reminders APIs        ASCII
 YS_501_98_SETUP.EXE Installs DLL                       Binary
 YS_MHA_A.dll        DLL support for Clinical Reminders Binary
  
 The software files are available on the following OI Field Offices'
 ANONYMOUS.SOFTWARE directories.
  
 All sites are encouraged to use their FTP capability to obtain these
 files.  Use the FTP address "download.vista.med.va.gov" (without the
 quotes) to connect to the first available FTP server where the files
 are located.
  
 OI FIELD OFFICE    FTP ADDRESS                DIRECTORY
 ===============    ===========                =========
 ALBANY             ftp.fo-albany.med.va.gov   [ANONYMOUS.SOFTWARE]
 HINES              ftp.fo-hines.med.va.gov    [ANONYMOUS.SOFTWARE]
 SALT LAKE          ftp.fo-slc.med.va.gov      [ANONYMOUS.SOFTWARE]
  
 Installation Instructions:
 ==========================
 1. Use the 'LOAD A DISTRIBUTION' option on the PackMan menu. The
    Host File name is YS_501_98.KID.  Answer YES to the question:
    "Want to Continue with Load? YES//"
  
 2. The patch has now been loaded into a Transport global on your
    system. You now need to install the Transport global. 
    On the KIDS menu, under the 'Installation' menu, use the 
    following options:
  
       Print Transport Global
       Compare Transport Global to Current System
       Verify Checksums in Transport Global
       Backup a Transport Global
  
 3. Users may remain on the system, but installation should be done 
    at off peak hours.
  
 4. Installation will take less than five minutes. 
  
 5. From the 'Installation Menu' of the KIDS menu, run the option
    'Install Package(s)' Select the package 'YS*5.01*98'
    and proceed with install.
   
 6. When prompted 'Want KIDS to INHIBIT LOGONs during the
    install//', respond NO.
   
 7. When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
    and Protocols? YES//', respond NO
  
 8. Download YS_501_98_Setup.exe in binary mode and run the YS_501_98_
    Setup.exe file to install Clinical Reminders MHA DLL. Please install
    the DLL in the default folders. The install program requires two dialogs
    of the user (to start and to signify finished). To avoid the user/install
    interaction, the file YS_MHA_A.dll can be copied directly to the
    C:\Programs Files\VistA\Common Files directory. This may be the more 
    desirable way to push the dll to many workstations. 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.01;MENTAL HEALTH;**[Patch List]**;Dec 30, 1994;Build 9

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: YTQPXRM8
    Before:       n/a   After: B15837966  **98**

=============================================================================
User Information:
Entered By  : FINKELSTEIN,ALLAN             Date Entered  : JUN 11, 2008
Completed By: MERRILL,DAVID P               Date Completed: AUG 20, 2009
Released By : MONTGOMERY,ALAN               Date Released : AUG 27, 2009
=============================================================================


Packman Mail Message:
=====================

No routines included
