$TXT Created by KOPECKY,STEVE at MNTVLL.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 06/05/09 at 09:05
=============================================================================
Run Date: NOV 10, 2010                     Designation: PX*1*194
Package : PX - PCE PATIENT CARE ENCOUNTER     Priority: Mandatory
Version : 1       SEQ #150                      Status: Released
                  Compliance Date: DEC 11, 2010
=============================================================================

Associated patches: (v)PX*1*33     <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*73     <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*119    <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*121    <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*124    <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*149    <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*164    <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*168    <<= must be installed BEFORE `PX*1*194'
                    (v)PX*1*190    <<= must be installed BEFORE `PX*1*194'

Subject: API UPDATE FOR UNSUPPORTED ICD/CPT FIELDS

Category: 
  - Routine

Description:
============

 This patch addresses the upcoming deletion of unsupported fields in the 
 ICD DIAGNOSIS File (#80), and the CPT File (#81). Modifications are being 
 made to affected Patient Care Encounter routines to replace unsupported
 calls to the deleted data fields with the appropriate supported API.
    
 CPT File (#81), ^ICPT
 ---------------------
 The following fields are deleted:
   
 2 0;2   SHORT NAME  Free Text 1-28
 5 0;4   INACTIVE FLAG   Set of Codes 1 = Inactive Code
 7 0;7   INACTIVE DATE   Date
 8 0;8   ACTIVE DATE Date
   
 Replace with API: $$CPT^ICPTCOD,   DBIA#1995 - CPT Code APIs, Supported
   
 50    D;0   DESCRIPTION Multiple (81.01)
  .01  0;1   DESCRIPTION Free Text 1-80
   
 Replace with API: CPTD^ICPTCOD,   DBIA#1995 - CPT Code APIs, Supported
   
   
 ICD DIAGNOSIS File (#80), ^ICD9(
 --------------------------------
 The following fields are deleted:
   
 3     0;3   DIAGNOSIS  Free Text 2-30
 16    0;16  ACTIVATION DATEDate
 100   0;9   INACTIVE FLAG  Set of Codes 1= Inactive Code
 102   0;11  INACTIVE DATE  Date
   
 Replace with API: $$ICDDX^IDCCODE, DBIA#3990 - ICD Code APIs, Supported
   
 10     1;1  DESCRIPTION   Free Text 1-245
   
 Replace with API: ICDD^ICDCODE, DBIA#3990 - ICD Code APIs, Supported
   
   
 Problem:
 The Patient Care Encounter (PX) package uses a number of unsupported 
 calls to retrieve CPT and Diagnosis values directly from their respective 
 files, or to check data integrity.  These unsupported calls will cause 
 errors once the respective fields are deleted from the files. 
   
 Solution: 
 Modify the unsupported calls with the appropriate API call in routines
 AUPNSICD, PXAICPT, PXAICPTV, PXAIPOVV, PXBGCPT2, PXCACPT, PXCADXP1, 
 PXCAPL, PXKFCPT1, PXPXRMI1, PXPXRMI2, PXSCH2, PXSCH4.
   
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 There are no Remedy tickets associated with this patch.
  
  
  
 ===================== INSTALLATION INSTRUCTIONS ==========================
   
  If installed during the normal workday, it is recommended that the 
 following entries in the OPTION file (#19) be disabled to prevent possible
 conflicts while running the KIDS Install. Other VISTA users will not be 
 affected.
  
   [SDAM APPT MGT]                 Appointment Management
   [PX PCE CLINICIAN MENU]         PCE Clinician Menu  
   [PX PCE COORDINATOR MENU]       PCE Coordinator Menu
   [PXCE ENCOUNTER DATA ENTRY]     PCE Encounter Data Entry
   [PXCE ENCOUNTER ENTRY NO DELETE] PCE Encounter Data Entry without 
                                         Delete
  
  Users may remain on the system during the installation.
  
  Install Time - less than 5 minutes
   
   
  1.  LOAD TRANSPORT GLOBAL 
  ---------------------
  Choose the PackMan message containing this patch and invoke the 
  INSTALL/CHECK MESSAGE PackMan option.  
   
  2.  START UP KIDS 
  -------------
  Start up the Kernel Installation and Distribution System Menu 
  [XPD MAIN]: 
  
   Edits and Distribution ...  
   Utilities ...  
   Installation ...  
  
  Select Kernel Installation & Distribution System Option: INStallation 
                                                           ---
   Load a Distribution 
   Print Transport Global 
   Compare Transport Global to Current System 
   Verify Checksums in Transport Global 
   Install Package(s) 
   Restart Install of Package(s) 
   Unload a Distribution 
   Backup a Transport Global 
  
  Select Installation Option: 
  
  3.  Select Installation Option: 
  ---------------------------
  NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
  NAME, enter PX*1.0*194):
    
  a.  Backup a Transport Global - This option will create a backup message 
      of any routines exported with this patch. It will not backup any 
      other changes such as DD's or templates.
  b.  Compare Transport Global to Current System - This option will allow
      you to view all changes that will be made when this patch is 
      installed. It compares all components of this patch (routines, DD's,
      templates, etc.).
  c.  Verify Checksums in Transport Global - This option will allow you to 
      ensure the integrity of the routines that are in the transport
      global.
   
  
  4.  Select Installation Option: Install Package(s) 
  ------------------
  **This is the step to start the installation of this KIDS patch: 
  
  a.  Choose the Install Package(s) option to start the patch
      install.
  b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
      YES//' answer NO
  c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
      Options, and Protocols? YES//' answer YES
  d.  When prompted 'Enter options you wish to mark as 'Out Of
      Order':'  Enter the following options:
    
       [SDAM APPT MGT]                 Appointment Management 
       [PX PCE CLINICIAN MENU]         PCE Clinician Menu  
       [PX PCE COORDINATOR MENU]       PCE Coordinator Menu
       [PXCE ENCOUNTER DATA ENTRY]     PCE Encounter Data Entry
       [PXCE ENCOUNTER ENTRY NO DELETE] PCE Encounter Data Entry without 
                                         Delete
  
  e.  When prompted 'Enter protocols you wish to mark as 'Out Of
      Order':'  Press the 'Enter' key

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**[Patch List]**;Aug 12, 1996;Build 2

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: AUPNSICD
    Before:  B1070925   After:  B1050074  **121,149,190,194**
 Description of Changes:
  Before:
  =======
   
   18 SEX    ; IF 'USE WITH SEX' FIELD HAS A VALUE CHECK THAT VALUE AGAINST AUPNS
              EX
   19        G:'$D(AUPNSEX) AGE
   20        I $P(^ICD9(Y,0),U,10)=""!($P(^ICD9(Y,0),U,10)=AUPNSEX)
   21        G:'$T XIT
   
   
  After:
  =======
   
   18 SEX    ; IF 'USE WITH SEX' FIELD HAS A VALUE CHECK THAT VALUE AGAINST AUPNS
              EX
   19        G:'$D(AUPNSEX) AGE
   20        ;I $P(^ICD9(Y,0),U,10)=""!($P(^ICD9(Y,0),U,10)=AUPNSEX)
   21        I $P(ICDSTR,U,11)=""!($P(ICDSTR,U,11)=AUPNSEX)
   22        G:'$T XIT

Routine Name: PXAICPT
    Before: B24514877   After: B26308932  **19,73,108,112,149,124,164,194**
 Description of Changes:
  Before:
  =======
   
   90 SETVARB ;--SET VARIABLES BEFORE
   91        D
   92        .N PXBKY,PXBSAM,PXBSKY,PXBCNT,PXI,PRV,ITEM
   93        .D CPT^PXBGCPT(PXAVISIT)
   94        .S PXAAX("PROCEDURE")=$P($G(^ICPT($G(PXAA("PROCEDURE")),0)),"^",1)
   95        .I $G(PXAA("DELETE"))=1 S PXAAX("PROCEDURE")=$P($G(^ICPT($G(PXAA("PR
              OCEDURE")),0)),"^",1)
   96        .S ITEM=""
   97        .I PXBCNT>0,$G(PXAAX("PROCEDURE"))]"" S ITEM=$O(PXBKY(PXAAX("PROCEDU
              RE"),0))
   
   
  After:
  =======
   
   90 SETVARB ;--SET VARIABLES BEFORE
   91        D
   92        .N PXBKY,PXBSAM,PXBSKY,PXBCNT,PXI,PRV,ITEM,PXICPT
   93        .D CPT^PXBGCPT(PXAVISIT)
   94        .;S PXAAX("PROCEDURE")=$P($G(^ICPT($G(PXAA("PROCEDURE")),0)),"^",1)
   95        .S PXICPT=$$CPT^ICPTCOD($G(PXAA("PROCEDURE")))
   96        .S PXAAX("PROCEDURE")=$S(+PXICPT>0:$P(PXICPT,"^",2),1:"")
   97        .;I $G(PXAA("DELETE"))=1 S PXAAX("PROCEDURE")=$P($G(^ICPT($G(PXAA("P
              ROCEDURE")),0)),"^",1)
   98        .I $G(PXAA("DELETE"))=1 S PXAAX("PROCEDURE")=$S(+PXICPT>0:$P(PXICPT,
              "^",2),1:"")

Routine Name: PXAICPTV
    Before: B16252625   After: B16278915  **15,73,74,111,121,130,168,194**
 Description of Changes:
  Before:
  ========
   
   13        ;
   14        ;----NOT a pointer to PROCEDURE CPT FILE#81
   15        I '$D(^ICPT($G(PXAA("PROCEDURE")),0)) D  Q:$G(STOP)
   16        .S STOP=1
   17        .S PXAERRF=1
   
   
  After:
  ======
   
   13        ;
   14        ;----NOT a pointer to PROCEDURE CPT FILE#81
   15        I +$$CPT^ICPTCOD($G(PXAA("PROCEDURE")))'>0 D  Q:$G(STOP) 
   16        .S STOP=1
   17        .S PXAERRF=1

Routine Name: PXAIPOVV
    Before:  B2601600   After:  B2638479  **121,194**
 Description of Changes:
  Before:
  ========
   
   13        ;
   14        ;----NOT a pointer to PROCEDURE CPT FILE#80
   15        I '$D(^ICD9($G(PXAA("DIAGNOSIS")),0)),$G(PXAA("DELETE"))'=1 D  Q:$G(
              STOP)
   16        .S STOP=1
   
   
  After:
  =======
   
   13        ;
   14        ;----NOT a pointer to PROCEDURE CPT FILE#80
   15        I $$ICDDX^ICDCODE($G(PXAA("DIAGNOSIS")))'>0,$G(PXAA("DELETE"))'=1 D 
               Q:$G(STOP)
   16        .S STOP=1

Routine Name: PXBGCPT2
    Before: B35781906   After: B35739040  **11,19,108,149,194**
 Description of Changes:
  Before:
  =======
   
   81        I DATA?2.A W IOCUOFF,IOCUF,IOCUF S SUBT=$O(^ICPT("C",DATA),-1) F  S 
              SUBT=$O(^ICPT("C",SUBT)) Q:SUBT'[DATA  D
   82        .N IEN,CODE
   83        .S IEN="" F  S IEN=$O(^ICPT("C",SUBT,IEN)) Q:IEN=""  D
   84        ..S CODE=$P(^ICPT(IEN,0),U) I '$$CPTSCREN^PXBUTL(CODE,IDATE) Q
   85        ..S TOTAL=TOTAL+1 S PXBMOD=TOTAL#100 D WAIT^PXBUTL
   86        ..S ^TMP("PXBTOTAL",$J,"DILIST","ID",TOTAL,.01)=$P(^ICPT(IEN,0),U)
   87        ..S ^TMP("PXBTOTAL",$J,"DILIST","ID",TOTAL,2)=SUBT_", "_$P($$CPT^ICP
              TCOD(IEN,IDATE),U,3)
   88        W IOCUON
   
   
  After:
  =======
   
   81        I DATA?2.A W IOCUOFF,IOCUF,IOCUF D
   82        .N IEN,CODE,ARRAY,XX
   83        .D FIND^DIC(81,"","","M",DATA,"","","","","ARRAY")
   84        .I $D(ARRAY("DILIST"))<10 S Y=-1 Q
   85        .S I=0 F  S I=$O(ARRAY("DILIST",2,I)) Q:'I  D
   86        ..S MIEN=ARRAY("DILIST",2,I),XX=$$CPT^ICPTCOD(MIEN,IDATE)
   87        ..Q:'$P(XX,U,7)
   88        ..S TOTAL=TOTAL+1 S PXBMOD=TOTAL#100 D WAIT^PXBUTL
   89        ..S ^TMP("PXBTOTAL",$J,"DILIST","ID",TOTAL,.01)=$P(XX,U,2)
   90        ..S ^TMP("PXBTOTAL",$J,"DILIST","ID",TOTAL,2)=DATA_", "_$P(XX,U,3)
   91        W IOCUON

Routine Name: PXCACPT
    Before: B47517284   After: B47966106  **27,33,73,121,124,194**
 Description of Changes:
  Before:
  ========
   
   29        .. I PXCAITEM]"" D
   30        ... S D=$G(^ICPT(+PXCAITEM,0))
   31        ... I D="" S PXCA("ERROR","PROCEDURE",PXCAPRV,PXCAINDX,1)="CPT code 
              not in File 81^"_PXCAITEM
   32        ... E  I '(+$$CPTSCREN^PXBUTL(PXCAITEM,+PXCADT)) S PXCA("ERROR","PRO
              CEDURE",PXCAPRV,PXCAINDX,1)="CPT code is INACTIVE^"_PXCAITEM
   
   
  After:
  =======
   
   29        .. I PXCAITEM]"" D
   30        ... ;S D=$G(^ICPT(+PXCAITEM,0))
   31        ... S D=$$CPT^ICPTCOD(+PXCAITEM)
   32        ... I D<0 S PXCA("ERROR","PROCEDURE",PXCAPRV,PXCAINDX,1)="CPT code n
              ot in File 81^"_PXCAITEM
   33        ... E  I '(+$$CPTSCREN^PXBUTL(PXCAITEM,+PXCADT)) S PXCA("ERROR","PRO
              CEDURE",PXCAPRV,PXCAINDX,1)="CPT code is INACTIVE^"_PXCAITEM

Routine Name: PXCADXP1
    Before: B22182571   After: B24306608  **24,33,194**
 Description of Changes:
  Before:
  =======
   
   
   15        ;Diagnosis Code
   16        S PXCAITEM=$P(PXCADXPL,"^",1)
   17        I PXCAITEM>0 D
   18        . N DIC,DR,DA,DIQ,PXCADIQ1
   19        . S DIC=80
   20        . S DR=".01;102"
   21        . S DA=PXCAITEM
   22        . S DIQ="PXCADIQ1("
   23        . S DIQ(0)="I"
   24        . D EN^DIQ1
   25        . I $G(PXCADIQ1(80,DA,.01,"I"))="" S PXCA("ERROR","DIAGNOSIS/PROBLEM
              ",PXCAPRV,PXCAINDX,1)="ICD9 Code not in file 80^"_PXCAITEM
   26        . E  I $G(PXCADIQ1(80,DA,102,"I")),PXCADIQ1(80,DA,102,"I")'>+PXCADT 
              S PXCA("ERROR","DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX,1)="ICD9 Code i
              s INACTIVE^"_PXCAITEM
   27        ;
   
  After:
  ======
   
   17        I PXCAITEM>0 D
   18        . S PXCADIQ1=$$ICDDX^ICDCODE(PXCAITEM)
   19        . I PXCADIQ1<0 S PXCA("ERROR","DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX,1
              )="ICD9 Code not in file 80^"_PXCAITEM
   20        . E  I $P(PXCADIQ1,U,12),$P(PXCADIQ1,U,12)'>+PXCADT S PXCA("ERROR","
              DIAGNOSIS/PROBLEM",PXCAPRV,PXCAINDX,1)="ICD9 Code is INACTIVE^"_PXC
              AITEM

Routine Name: PXCAPL
    Before: B31157708   After: B33553090  **24,27,115,130,168,194**
 Description of Changes:
  Before:
  =======
   
   51        .. S PXCAITEM=$P(PXCAPROB,U,9)
   52        .. I PXCAITEM>0 D
   53        ... N DIC,DR,DA,DIQ,PXCADIQ1
   54        ... S DIC=80
   55        ... S DR=".01;102"
   56        ... S DA=PXCAITEM
   57        ... S DIQ="PXCADIQ1("
   58        ... S DIQ(0)="I"
   59        ... D EN^DIQ1
   60        ... I $G(PXCADIQ1(80,DA,.01,"I"))="" S PXCA("ERROR","PROBLEM",PXCAPR
              V,PXCAINDX,9)="ICD9 Code not in file 80^"_PXCAITEM
   61        ... E  I $G(PXCADIQ1(80,DA,102,"I")),PXCADIQ1(80,DA,102,"I")'>+PXCAD
              T S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code is INACTI
              VE^"_PXCAITEM
   62        .. S PXCAITEM=$P(PXCAPROB,U,10)
   
   
  After:
  =======
   
   53        ... S PXCADIQ1=$$ICDDX^ICDCODE(PXCAITEM)
   54        ... I PXCADIQ1<0 S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 
              Code not in file 80^"_PXCAITEM
   55        ... E  I $P(PXCADIQ1,U,12),$P(PXCADIQ1,U,12)'>+PXCADT S PXCA("ERROR"
              ,"PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code is INACTIVE^"_PXCAITEM
   56        ... ;N DIC,DR,DA,DIQ,PXCADIQ1
   57        ... ;S DIC=80
   58        ... ;S DR=".01;102"
   59        ... ;S DA=PXCAITEM
   60        ... ;S DIQ="PXCADIQ1("
   61        ... ;S DIQ(0)="I"
   62        ... ;D EN^DIQ1
   63        ... ;I $G(PXCADIQ1(80,DA,.01,"I"))="" S PXCA("ERROR","PROBLEM",PXCAP
              RV,PXCAINDX,9)="ICD9 Code not in file 80^"_PXCAITEM
   64        ... ;E  I $G(PXCADIQ1(80,DA,102,"I")),PXCADIQ1(80,DA,102,"I")'>+PXCA
              DT S PXCA("ERROR","PROBLEM",PXCAPRV,PXCAINDX,9)="ICD9 Code is INACT
              IVE^"_PXCAITEM
   65        .. S PXCAITEM=$P(PXCAPROB,U,10)

Routine Name: PXKFCPT1
    Before: B22284185   After: B23493411  **11,73,124,194**
 Description of Changes:
  Before:
  ========
   
   14 POVNAR ;
   15        K ^UTILITY("DIQ1",$J)
   16        S DIC=81,DA=PXKCPT,DR=2 D EN^DIQ1
   17        S PXKCPTN=$G(^UTILITY("DIQ1",$J,81,DA,2))
   18        K ^UTILITY("DIQ1",$J),DIC,DA,DR D
   19        .Q:PXKCPTN=""  I $D(^AUTNPOV("B",PXKCPTN)) S PXKCPTN=$O(^AUTNPOV("B"
              ,PXKCPTN,0))
   20        ;
   
   
   30 CATEGOR ;
   31        N PXKSEQ2
   32        S PXKCPTT(1)=$P(PXKCPT,"^",1)
   33        K ^UTILITY("DIQ1",$J)
   34        S DIC=81,DA=PXKCPTT(1),DR=3 D EN^DIQ1
   35        Q:$G(^UTILITY("DIQ1",$J,81,DA,3))=""
   36        S PXKCPTT(4.1)=$G(^UTILITY("DIQ1",$J,81,DA,3))
   37        S PXKCPTT(5)=$E(PXKCPTT(4.1),1,30)
   38        S PXKCPTT(6)=$O(^AUTNPOV("B",PXKCPTT(5),0))
   
   
  After:
  =======
   
   14 POVNAR ;
   15        N PXK1
   16        ;K ^UTILITY("DIQ1",$J) 
   17        ;S DIC=81,DA=PXKCPT,DR=2 D EN^DIQ1
   18        ;S PXKCPTN=$G(^UTILITY("DIQ1",$J,81,DA,2))
   19        ;K ^UTILITY("DIQ1",$J),DIC,DA,DR D
   20        S PXK1=$$CPT^ICPTCOD(PXKCPT)
   21        S PXKCPTN=$P(PXK1,U,3) D
   22        .Q:PXKCPTN=""  I $D(^AUTNPOV("B",PXKCPTN)) S PXKCPTN=$O(^AUTNPOV("B"
              ,PXKCPTN,0))
   
   
   33 CATEGOR ;
   34        N PXKSEQ2,PXK1,PXK2
   35        S PXKCPTT(1)=$P(PXKCPT,"^",1)
   36        ;K ^UTILITY("DIQ1",$J)
   37        ;S DIC=81,DA=PXKCPTT(1),DR=3 D EN^DIQ1
   38        S PXK1=$P($$CPT^ICPTCOD(PXKCPTT(1)),U,4)
   39        S PXK2=$$GET1^DIQ(81.1,PXK1,.01)
   40        Q:PXK2=""
   41        ;Q:$G(^UTILITY("DIQ1",$J,81,DA,3))=""
   42        ;S PXKCPTT(4.1)=$G(^UTILITY("DIQ1",$J,81,DA,3))
   43        S PXKCPTT(4.1)=PXK2
   44        S PXKCPTT(5)=$E(PXKCPTT(4.1),1,30)
   45        S PXKCPTT(6)=$O(^AUTNPOV("B",PXKCPTT(5),0))

Routine Name: PXPXRMI1
    Before: B51224708   After: B51661630  **119,194**
 Description of Changes:
  Before:
  ========
   
   36        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
   37        . I '$D(^ICPT(CPT)) D  Q
   38        .. S ETEXT=DAS_" invalid CPT"
   39        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
   
   
  After:
  =======
   
   36        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
   37        . ;I '$D(^ICPT(CPT)) D  Q
   38        . I $$CPT^ICPTCOD(CPT)<0 D  Q
   39        .. S ETEXT=DAS_" invalid CPT"
   40        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)

Routine Name: PXPXRMI2
    Before: B79678940   After: B80236604  **119,194**
 Description of Changes:
  Before:
  ========
   
  102        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
  103        . I '$D(^ICD9(POV)) D  Q
  104        .. S ETEXT=DAS_" invalid ICD9"
  105        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
   
  After:
  ======
   
  102        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)
  103        . ;I '$D(^ICD9(POV)) D  Q
  104        . I $$ICDDX^ICDCODE(POV)<0 D  Q
  105        .. S ETEXT=DAS_" invalid ICD9"
  106        .. D ADDERROR^PXRMSXRM(GLOBAL,ETEXT,.NERROR)

Routine Name: PXSCH2
    Before:  B7477510   After:  B7363078  **73,194**
 Description of Changes:
  Before:
  ========
   
   28        S PXSFILE=9000010.18
   29        K ^UTILITY("DIQ1",$J)
   30        S DIC=81,DA=PXSCPT,DR=2 D EN^DIQ1
   31        S PXSZPN=$G(^UTILITY("DIQ1",$J,81,DA,2))
   32        K ^UTILITY("DIQ1",$J),DIC,DA,DR
   33        S $P(CPTNOD0,"^",4)=+$$PROVNARR^PXAPI(PXSZPN,PXSFILE) ;PROVIDER NARR
   
   
  After:
  =======
   
   28        S PXSFILE=9000010.18
   29        ;K ^UTILITY("DIQ1",$J)
   30        ;S DIC=81,DA=PXSCPT,DR=2 D EN^DIQ1
   31        ;S PXSZPN=$G(^UTILITY("DIQ1",$J,81,DA,2))
   32        ;K ^UTILITY("DIQ1",$J),DIC,DA,DR
   33        S PXSZPN=$P($$CPT^ICPTCOD(PXSCPT),U,3) ; px*2.0*194
   34        S $P(CPTNOD0,"^",4)=+$$PROVNARR^PXAPI(PXSZPN,PXSFILE) ;PROVIDER NARR

Routine Name: PXSCH4
    Before:  B7905307   After:  B8097371  **194**
 Description of Changes:
  Before:
  =======
   
   23        S PXSFILE=9000010.07
   24        K ^UTILITY("DIQ1",$J)
   25        S DIC=80,DA=PXSDX,DR=3 D EN^DIQ1
   26        S PXSZPN=$G(^UTILITY("DIQ1",$J,80,DA,3))
   27        K ^UTILITY("DIQ1",$J),DIC,DA,DR
   28        S $P(DXNOD0,"^",4)=+$$PROVNARR^PXAPI(PXSZPN,PXSFILE)
   
   
   40        I $D(PXS("CLASSIFICATION",4)) S $P(DXN800,"^",4)=1
   41        K ^UTILITY("DIQ1",$J)
   42        S DIC=80,DA=PXSDX,DR=5,DIQ(0)="E" D EN^DIQ1
   43        S PXSZPN=$G(^UTILITY("DIQ1",$J,80,DA,5,"E"))
   44        ;--DECIDED TO REMOVE CATEGORY
   
   
  After:
  =======
   
   23        S PXSFILE=9000010.07
   24        ;K ^UTILITY("DIQ1",$J)
   25        ;S DIC=80,DA=PXSDX,DR=3 D EN^DIQ1
   26        S PXSZPN=$P($$ICDDX^ICDCODE(PXSDX),U,4) ; Modified for 194
   27        ;S PXSZPN=$G(^UTILITY("DIQ1",$J,80,DA,3))
   28        ;K ^UTILITY("DIQ1",$J),DIC,DA,DR
   29        S $P(DXNOD0,"^",4)=+$$PROVNARR^PXAPI(PXSZPN,PXSFILE)
   
   
   
   41        I $D(PXS("CLASSIFICATION",4)) S $P(DXN800,"^",4)=1
   42        ;K ^UTILITY("DIQ1",$J)
   43        ;S DIC=80,DA=PXSDX,DR=5,DIQ(0)="E" D EN^DIQ1
   44        N PXS1
   45        S PXS1=$P($$ICDDX^ICDCODE(PXSDX),U,6) ; Modified for 194
   46        S PXSZPN=$$GET1^DIQ(80.3,PXS1,.01)
   47        ;S PXSZPN=$G(^UTILITY("DIQ1",$J,80,DA,5,"E"))
   48        ;--DECIDED TO REMOVE CATEGORY


=============================================================================
User Information:
Entered By  : KOPECKY,STEPHEN C.            Date Entered  : APR 24, 2009
Completed By: BARBER,HAROLDINE              Date Completed: OCT 04, 2010
Released By : DANE,SIDNEY                   Date Released : NOV 10, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
