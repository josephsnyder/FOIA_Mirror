$TXT Created by HSU,RAYMOND at NXT.FO-OAKLAND.MED.VA.GOV  (KIDS) on Tuesday, 03/02/10 at 16:15
=============================================================================
Run Date: JUL 20, 2010                     Designation: HL*1.6*145
Package : HL - HEALTH LEVEL SEVEN             Priority: Mandatory
Version : 1.6       SEQ #118                    Status: Released
                  Compliance Date: AUG 20, 2010
=============================================================================

Associated patches: (v)HL*1.6*142  <<= must be installed BEFORE `HL*1.6*145'

Subject: Health Level Seven (HL7) Standard Version 2.5.1 updates and others

Category: 
  - Data Dictionary
  - Enhancement (Mandatory)
  - Routine

Description:
============

 This patch does the following:
  
 1. Updates VistA HL7 files based on HL7 standard version 2.5.1 and does
    the following steps (run in the background) when the patch is
    installed:
  
   a) Transports the necessary entries in the following files: 
       HL7 VERSION (#771.5) file
       HL7 MESSAGE TYPE (#771.2) file                             
       HL7 SEGMENT TYPE (#771.3) file                            
       HL7 EVENT TYPE CODE (#779.001) file                          
       HL7 MESSAGE STRUCTURE CODE (#779.005) file 
       HL7 DEGREE (#771.9) file 
   b) Finds duplicate entries in HL7 EVENT TYPE CODE (#779.001) file, HL7
      MESSAGE TYPE (#771.2) file and HL7 SEGMENT TYPE (#771.3) file.
   c) Resolves duplicate entries pointers for the following fields: 
      - EVENT TYPE (#770.4) field in the PROTOCOL (#101) file.  
      - TRANSACTION MESSAGE TYPE (#770.3) field in the PROTOCOL (#101)
        file.
      - RESPONSE MESSAGE TYPE (770.11) field in the PROTOCOL (#101) file.
      - EVENT TYPE (#16) field in the HL7 MESSAGE ADMINISTRATION (#773)
        file.
      - MESSAGE TYPE (#15) field in the HL7 MESSAGE ADMINISTRATION (#773) 
        file.
      - HL7 MESSAGE (#.01) sub-field within the HL7 MESSAGE (#6) multiple 
        field in the HL7 APPLICATION PARAMETER (#771) file.
      - HL7 SEGMENT (#.01) sub-field within the HL7 SEGMENT (#5) multiple 
        field in the HL7 APPLICATION PARAMETER (#771) file.
   d) Deletes duplicate entries in HL7 MESSAGE STRUCTURE CODE (#779.005)
      file, HL7 MESSAGE TYPE (#771.2) file, and HL7 SEGMENT TYPE (#771.3)
      file.
  
 2. Modifies "LAST IEN, FILE 772" (#772) and "LAST IEN, FILE 773" (#773)
    fields, in the HL COMMUNICATION SERVER PARAMETERS (#869.3) file as
    follows:
  
      869.3,772     LAST IEN, FILE 772     772;1 NUMBER
  
               INPUT TRANSFORM:  K:+X'=X!(X>9999999999999999999)!(X<0)!(
                                 X?.E1"."1.N) X
               LAST EDITED:      FEB 24, 2009 
               HELP-PROMPT:      THIS FIELD CAN'T BE ALTERED. 
               DESCRIPTION:      This field holds an IEN, which can be a 
                                 whole number up to 19 digits.  This field
                                 is used by HL7 process to create and store
                                 the IEN for file #772.  It can't be
                                 altered.  Otherwise, it may cause serious
                                 problem to the message transaction when
                                 HL7 process is running.  
  
                                 UNEDITABLE
               NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY 
                                 PROGRAMMER
  
      869.3,773     LAST IEN, FILE 773     773;1 NUMBER
  
               INPUT TRANSFORM:  K:+X'=X!(X>9999999999999999999)!(X<0)!(
                                 X?.E1"."1.N) X
               LAST EDITED:      FEB 24, 2009 
               HELP-PROMPT:      THIS FIELD CAN'T BE ALTERED. 
               DESCRIPTION:      This field holds an IEN, which can be a 
                                 whole number up to 19 digits.  This field
                                 is used by HL7 process to create and store
                                 the IEN for file #773.  It can't be
                                 altered.  Otherwise, it may cause serious
                                 problem to the message transaction when
                                 HL7 process is running.  
  
                                 UNEDITABLE
               NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY 
                                 PROGRAMMER
  
 3. Fixes the bug of the counter for columns, 'Messages Received' and 
    'Messages Processed', of HL7 System Link Monitor, described in Remedy 
    ticket 322756.  In addition, the 'Messages Processed' counter will be 
    incremented by the incoming filer, if the message is processed by it. 
    (Before this patch, no counter of 'Message Processed' was incremented
    by incoming filer.)
  
 4. Fixed the bug for "Message type" displayed by the "View Transmission 
    Log (TCP only)" option.  The fix code extracts the Message type 
    and Event type from the message header directly.
  
 5. Fixed the bug by sending the 'CR' (commit reject) commit ACK for an
    application ACK to an application ACK. (happened when VistA Lab is 
    testing BW4 with VIE team at AITC for the LDSI interface with DoD.)
  
 6. Fixed the bug for detecting duplicate message with message ID
    containing alphabet character(s).
  
 7. Fixed the bug described in Remedy ticket 383423 when the message 
    header is missing.
  
 Test Sites:
 ===========
 Ann Arbor VAMC 
 Little Rock VAMC
 VA Southern Arizona HCS
  
  
 Remedy:
 =======
 Remedy 322756: ORU (unsolicited) traffic from ESR appears to be misrouted.
 Remedy 297822: HL and HLMA globals are growing larger every month. 
 Remedy 327755: HL7 Degree File.
 Remedy 340288: maxnumber error in HLDIE.
 Remedy 339976: MAXNUMBER ERROR. 
 Remedy 383423: <UNDEFINED>SEARCH+17^HLCRSRPT3
  
  
 INSTALLATION INSTRUCTIONS (takes fewer than 5 minutes):
 ========================================================
 Note: only experienced installer should attempt the install.
  
   1.  Users are allowed to be on the system during the installation. It 
       is highly recommended to install the patch during off-hours.
  
   2.  Disable the HL7 TCPIP services for the multi-listeners running on 
       all nodes in the cluster, for example, at the VMS prompt:
  
         ISC6A1> TCPIP
         TCPIP> DISABLE SERVICE BAY_HLSP
         Note: BAY is the 3 letter site designation for Bay Pines.
          
   3.  Shutdown all Logical Links, incoming and outgoing filers using
       the Filer and Link Management options listed below:
  
         Stop All Messaging Background Processes [HL STOP ALL]
  
   4.  Shutdown the Link Manager using the Filer and Link Management
       option listed below:
  
         TCP Link Manager Start/Stop [HL START/STOP LINK MANAGER]
  
   5.  Optionally, save a temporary backup of data and DD for the following
       files:
  
       For CACHE sites: 
          At the programmer mode prompt do the following: 
          VISTA>D ^%GOGEN 
          Device: HLPAT145DD.DAT   Parameters: "WNS"=> 
          Warning: Use a "V" format to avoid problems with control 
                   characters.  
          Global ^DD(779.001, 
          Global ^DD(779.005, 
          Global ^DD(771.2, 
          Global ^DD(771.3, 
          Global ^DD(771.5, 
          Global ^DD(771.9, 
          Global ^ 
          VISTA> 
          VISTA>D ^%GOGEN
          Device: HLPAT145HL.DAT   Parameters: "WNS"=> 
          Warning: Use a "V" format to avoid problems with control 
                   characters.  
          Global ^HL(779.001, 
          Global ^HL(779.005, 
          Global ^HL(771.2, 
          Global ^HL(771.3, 
          Global ^HL(771.5,
          Global ^HL(771.9,
          Global ^
          VISTA> 
  
   6.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
  
   7.  This patch is now loaded into a transport global on your system.
       The next step is to use KIDS to install the Transport global.  On
       the KIDS menu, under the 'Installation' menu, use the following
       options:
  
          Verify Checksums in Transport Global
          Print Transport Global 
          Compare Transport Global to Current System 
          Backup a Transport Global
          Install Package(s) 
  
       When using the Install Package(s) menu option to install the 
       patch build, you will be asked several questions.  The questions,
       and the answers you should supply, are shown below.
  
        INSTALL NAME: <HL*1.6*145>
   
        Want KIDS to INHIBIT LOGONS during the install? NO// <NO>
        Want to DISABLE Scheduled Options, Menu Options,
          and Protocols? NO// <NO>
  
   8.  Start up all Logical Links and incoming and outgoing filers using
       the Filer and Link Management Option's 'Restart/Start All Links
       and Filers [HL TASK RESTART]' menu option.
       (Note those links that do not have "autostart" enabled will need
       to be restarted manually.)
   
   9.  Restart the Link Manager, that was shutdown in step 4, using the
       Filer and Link Management option listed below:
  
         TCP Link Manager Start/Stop [HL START/STOP LINK MANAGER]
  
   10. Enable the HL7 TCPIP services for the multi-listeners, for example, 
       at the VMS prompt:
  
         ISC6A1> TCPIP
         TCPIP> ENABLE SERVICE BAY_HLSP
         Note: BAY is the 3 letter site designation for Bay Pines.
  
   11. Routine HLP145 may optionally be deleted after installation.
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.6;HEALTH LEVEL SEVEN;**[Patch List]**;Oct 13, 1995;Build 4

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: HLCSIN
    Before: B37729374   After: B39104505  **2,30,14,19,62,109,115,122,140,145**
Routine Name: HLCSRPT1
    Before: B45987832   After: B65022780  **19,50,107,145**
Routine Name: HLCSRPT2
    Before: B79903571   After: B79658099  **50,85,107,145**
Routine Name: HLCSRPT3
    Before: B45488667   After: B48347685  **50,57,145**
Routine Name: HLCSTCP1
    Before: B73827538   After: B81193745  **19,43,57,64,71,133,132,122,
                                           140,142,145**
Routine Name: HLCSTCP2
    Before: B83786254   After: B83867946  **19,43,49,57,63,64,66,67,76,
                                           77,87,109,133,122,140,142,145**
Routine Name: HLDIE
    Before: B70092394   After: B76148315  **109,122,142,145**
Routine Name: HLP145
    Before:       n/a   After: B81187097  **145**
Routine Name: HLTP3
    Before:B126319348   After:B141931403  **19,43,57,58,59,66,69,109,115,
                                           108,116,117,125,120,133,122,
                                           140,142,145**
Routine Name: HLTP31
    Before: B13120490   After: B18539013  **57,58,66,109,120,145**
 
Routine list of preceding patches: 107, 142

=============================================================================
User Information:
Entered By  : HSU,RAYMOND JL                Date Entered  : FEB 09, 2009
Completed By: BEST,LISA                     Date Completed: JUN 14, 2010
Released By : APOLONIO,AUGUSTO              Date Released : JUL 20, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
