$TXT Created by FRANKSON,FERDINAND at LEXDEV1.FO-BAYPINES.MED.VA.GOV  (KIDS) on Tuesday, 04/22/08 at 18:38
=============================================================================
Run Date: JUN 12, 2008                     Designation: LEX*2*41
Package : LEX - LEXICON UTILITY               Priority: Mandatory
Version : 2        SEQ #53                      Status: Released
                  Compliance Date: JUL 13, 2008
=============================================================================

Associated patches: (v)LEX*2*50    <<= must be installed BEFORE `LEX*2*41'

Subject: SNOMED CT VistA implementation

Category: 
  - Routine
  - Other
  - Enhancement (Mandatory)
  - Data Dictionary

Description:
============

 
  
 * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *                                                     *
 *         W - A - R - N - I - N - G                   *
 *                                                     *
 *   This is a very large patch; it increases the      *
 *   size of the Lexicon seven-fold and the export     *
 *   file is 1.4GB (Gigabytes).                        *
 *   Please ensure that you have enough temporary      *
 *   space to accommodate the export file and have     *
 *   sufficient space for the increased Lexicon        *
 *   size.                                             *
 *   The install process spawns a background process   *
 *   that may take several hours to complete. Once     *
 *   this process has completed it will send you a     *
 *   MailMan message to the account where you          *
 *   installed the patch. Information about the file   *
 *   sizes is documented in the Disc Capacity          *
 *   Requirements document that is included with other *
 *   LEX*2.0*41 Documentation below.                    *
 *                                                     *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  
   
  
  This patch adds the Systemized Nomenclature of Medicine Clinical Terms
  (SNOMED CT), which is the CHI standard for mediation, to the Lexicon in
  support of the Lab Data Sharing Interoperability (LDSI) project.
  The LDSI project is a collaboration between the VA and the DoD in which
  data for laboratory tests is exchanged.
  
  This patch transports the data, data dictionaries and new APIs required
  to support the LDSI project in the mediation of laboratory data.
  
  This patch exports data for the following files:
  
  
         MAJOR CONCEPT MAP         757
         CONCEPT USAGE             757.001
         EXPRESSIONS               757.01
         EXPRESSION TYPE           757.011
         EXPRESSION FORM           757.014
         CODES                     757.02
         CODING SYSTEMS            757.03
         SEMANTIC MAP              757.1
         SUBSET DEFINITIONS        757.2
         SUBSETS DEFINITION        757.21
  
  
 Enhancements
 ============
  
   The patch adds the following elements of SNOMED CT to the Lexicon:
  
     All active codes as of 1st July 2005 (SNOMED CT version 20050701);
     All inactive codes as of 1st July 2005 (SNOMED CT version 20050701);
        (these inactives have also been installed as active as of
         1st January 2005 - SNOMED CT version 20050101 - before being
         deactivated);
     All available synonyms as of 1st July 2005 (SNOMED CT version
         20050701);
     All new additions as of 1st January 2006 (SNOMED CT version
         20060101);
     All inactivations as of 1st January 2006 (SNOMED CT version
         20060101);
     All available synonyms for 1st January 2006 (SNOMED CT version
         20060101) update.
  
   A new expression type of FSN - Fully Specified Name - has been added
           to the EXPRESSION TYPE file (#757.011).
   A new expression form of FSN - Fully Specified Name - has been added
           to the EXPRESSION FORM file (#757.014).
   A new coding system SNOMED CT has been added to the CODING SYSTEMS
     file (#757.03).
  
   38 new subsets have been added to the SUBSET DEFINITIONS file (#757.2)
     37 of these partition SNOMED CT on the basis of high level hierarchy
     concepts. The other subset contains all SNOMED CT codes.
  
  
  
 Application Program Interface (API) Summary
 ===========================================
  
    New
        CODE^LEXTRAN    Returns data for code
  
        Refer to DBIA #4912 for details concerning input parameters and
        output of this call.
  
        TEXT^LEXTRAN    Allows search on text and returns data for
                          selected text.
  
        Refer to DBIA #4913 for details concerning input parameters and
        output of this call.
  
        TXT4CS^LEXTRAN  Returns whether a given text has ever been
                          valid for a given code system.
  
        Refer to DBIA #4914 for details concerning input parameters and
        output of this call.
  
  
 Files Summary
 =============
  
      757.01    EXPRESSIONS
  
          * The input transform for the .01 field has been changed so that
            it now allows expressions of 1 to 240 characters in length.
            Previously the length was 2 to 240 characters.
  
      757.02    CODES
  
          * A new field LEGACY CODE (#13) has been added. This field
            stores the LEGACY code for a code system code (if one
            exists).
  
          * DD is updated, security codes are sent, but no new data
            is sent in the build.
  
      757.03    CODING SYSTEMS
  
          * A new multiple SDO VERSION (#10) has been added. This field
            stores a dated version identifier for each version of a
            coding system.
  
          * DD is updated, security codes are sent, but no new data
            is sent in the build.
  
  
 FTP Software Retrieval:
 =======================
  
       The KIDs builds is being distributed in a Packman Message from the
       National Patch Module (NPM).
  
       Data for this patch is being distributed in a global host file:
  
           Filename         FTP Protocol
           ------------     ------------
           LEX_2_41.GBL     ASCII
 
       The file is also available in a zipped format (WinZip), the details are
 
           Filename         FTP Protocol
           ------------     ------------
           LEX_2_41.ZIP     BINARY
  
       The preferred method is to FTP either file from download.vista.med.va.gov
       which will transmit the file from the first available FTP server.
  
       Either file may also be downloaded directly from a particular FTP
       site at the following locations:
  
            Hines           ftp.fo-hines.med.va.gov
            Albany          ftp.fo-albany.med.va.gov
            Salt Lake       ftp.fo-slc.med.va.gov
  
            The file is available in the ANONYMOUS.SOFTWARE directory. The file
            may take 90 to 120 minutes to transfer for the unzipped version
            or approximately 12 to 15 minutes for the zipped version.
 
 
 Documentation:
 ==============
 The Lexicon Utility v2.0 Technical Manual and Developers Guide has been updated
 to reflect the enhancements provided by this patch. The updated documentation is 
 available in the form of (.PDF) files, as follows:
  
    LEXTM2_0.PDF        Lexicon Technical Manual and Developers Guide
    LEX_41_Sizes.PDF    Lex*2.0*41 Disc Capacity Requirements 
  
 This file can be retrieved in BINARY format by FTP. The preferred method
 is to FTP the files from
  
     download.vista.med.va.gov    
  
 which will transmit the files from the first available FTP server.
  
 The files may also be downloaded directly from a particular FTP location
 at the following locations:
 
 
    CIO FIELD OFFICE   FTP ADDRESS                 DIRECTORY
    ----------------   -------------------------   --------------------
    Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
    Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
    Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
  
    The Lexicon Technical manual can also be found on the System Design and
    Development Web page: (http://vista.med.va.gov/vdl/).
 
 
  
 Installation Instructions:
 ==========================
 
 
          W - A - R - N - I - N - G                   
                                                      
    This is a very large patch; it increases the      
    size of the Lexicon seven-fold and the export     
    file is 1.4GB (Gigabytes).                             
    Please ensure that you have enough temporary      
    space to accommodate the export file and have     
    sufficient space for the increased Lexicon        
    size.                                             
    The install process spawns a background process   
    that may take several hours to complete. Once     
    this process has completed it will send you a     
    MailMan message to the account where you          
    installed the patch. Information about the file   
    sizes is documented in the Disc Capacity
    Requirements document that is included with other
    Documentation above.                         
                                                      
  
        1)  Users may be on the system during the install of LEX*2.0*41.
            It is recommended that this patch be installed during non-peak
            hours.  This patch should take between 30 minutes and 90 minutes
            to install.
  
        2)  Create a backup of the following globals files before continuing:
  
                  Lexicon Files                 #757-757.41    ^LEX(
                  SUBSET DEFINITIONS file       #757.2         ^LEXT(
  
        3)  Make sure that the remnants of a previous import global do
            not exist on your system.  If the global ^LEXM does exist, you
            will need to kill this global before proceeding.
  
            On a Cache system, the prevention of unsubscripted global kills
            is a system wide setting, but can be allowed for a particular
            process using the $ZU command.  The command for enabling
            unsubscripted global kills is:
  
                    VAH>S X=$ZU(68,28,0)
                    VAH>K ^LEXM
  
            The command for disabling unsubscripted kills for a process
            is S X=$ZU(68,28,1); however, halting out of the process and
            creating a new process will achieve the same effect.
  
        4)  Install the data from the global host file LEX_2_41.GBL.  This
            file contains the Lexicon Utility's import global ^LEXM.
  
               Thin Client Global Restore
  
                    Using the Cache Thin Client, right-click on the Cache
                    cube, then select "Explorer."  Open the "Namespaces"
                    folder, then open the "VAH" folder, and right click on
                    the "Globals" folder. Select the "Import from disk"
                    option. Click on the "Options..." button.  Select the
                    "Globals" tab, make sure the format is VAX DSM, then
                    click "OK." Find the file in the directory, double click
                    on LEX_2_41.GBL.  Next, select "Import All"  At the prompt
                    "Do you wish to restore '^LEXM'," select "Yes."
  
               Programmer Mode Global Restore
  
                    From the Programmer prompt, execute the following routine:
  
                      >D ^%GI
  
                       Global input
  
                       Device: DEVICE:[PATH]LEX_2_41.GBL   Parameters: "RS"=>
                       Globals were saved on DD Mmm YYYY HH:MM:SS PA Cache
                       with description:  'LEX*2*41 DATA'
  
                       Input option: A
                       ^LEXM
  
            The loading of the global should take from 1 to 2 hours.
  
  
        5)  Set up user and IO variables (D ^XUP) for programmer access.
  
        6)  Distribution Load:
  
            Load the KIDS Distribution from the Packman Message using the
            Packman function "Install/Check Message."
  
               Environment Check:
  
                 Only package components and system variables will be checked
                 during the loading of the transport global.
  
        7)  KIDS Installation:
  
            Install the patch using the KIDS Installation Menu action
            "Install Package(s)" and the install name LEX*2.0*41.  The KIDS
            installation can take more than an hour depending on the number
            of users/jobs on the system.
  
              Environment Check:
  
                LEX*2.0*41 data exists (by global translation):
  
                  If the data for LEX*2.0*41 has been installed and is
                  translated into the current account, then only package
                  components and system variables will be checked.
  
                LEX*2.0*41 data does not exist:
  
                  If the data for LEX*2.0*41 cannot be found (either in
                  the current account or by translation) then the environment
                  check routine will verify the import global ^LEXM by build
                  namespace and global checksum.  This is to ensure that the
                  correct import global is loaded and that all of the data
                  contained in the import global arrived at your site during
                  the FTP transfer.  If you have inadvertently loaded the
                  wrong import global or the global fails the checksum, the
                  install will stop and you will need to kill ^LEXM and FTP
                  another copy of the import global (see the section on FTP
                  Software Retrieval and steps 3 and 4 of the Installation
                  Instructions).
  
            Respond "NO" at the "Want KIDS to INHIBIT LOGONs during the
            install?" prompt.
  
            Respond "NO" at the "Want to DISABLE Schedule Options, Menu
            Options, and Protocols?" prompt.
  
            The loading of the data from the export file into the Lexicon
            globals is quite a lengthy process; therefore it runs as a
            background task. The final act of the background task will be
            to send you a MailMan message informing you that it has
            completed.
  
        8)  Cleanup
  
            a)  Check that the export global ^LEXM has been killed
                automatically.
  
                If it has not been automatically killed you will need to
                kill the "unsubscripted" import global ^LEXM to prevent
                import global checksum errors on future installations.
  
                On a Cache system, the prevention of unsubscripted global
                kills is a system wide setting, but can be allowed for a
                particular process using the $ZU command.  The command for
                enabling unsubscripted global kills is:
  
                    VAH>S X=$ZU(68,28,0)
                    VAH>K ^LEXM
  
                The command for disabling unsubscripted kills for a process
                is S X=$ZU(68,28,1); however, halting out of the process
                and creating a new process will achieve the same effect.
  
  
            b)  If routines LEX2041 and LEX2041P are found on your system,
                they may be deleted upon completion of the installation.
                These routines are the environment check and post-install
                routines for this installation.
  
  
  
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;2.0;LEXICON UTILITY;**[Patch List]**;Sep 23, 1996;Build 34

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LEX2041
    Before:       n/a   After: B73919192  **41**
Routine Name: LEX2041P
    Before:       n/a   After:  B5226744  **41**
Routine Name: LEXAS6
    Before:  B6565185   After:  B6676230  **41**
Routine Name: LEXTRAN
    Before:       n/a   After: B59640556  **41**
Routine Name: LEXXFI
    Before: B48947190   After: B52571781  **32,46,49,41**
Routine Name: LEXXGI
    Before: B64603303   After: B74289713  **4,25,26,27,28,29,46,49,50,41**
Routine Name: LEXXII
    Before: B35261547   After: B34625513  **32,46,49,50,41**
 
Routine list of preceding patches: 50

=============================================================================
User Information:
Entered By  : FRANKSON,FERDINAND            Date Entered  : FEB 07, 2006
Completed By: BASKETT,BARBARA J             Date Completed: MAY 29, 2008
Released By : MONTGOMERY,ALAN               Date Released : JUN 12, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
