KIDS Distribution saved on Oct 26, 2007@11:13:07
Lexicon/ICD/CPT FY08 1st Quarter Update
**KIDS**:LEX*2.0*52^ICPT*6.0*37^ICD*18.0*29^LEX*2.0*53^

**INSTALL NAME**
LEX*2.0*52
"BLD",6825,0)
LEX*2.0*52^LEXICON UTILITY^0^3071026^y
"BLD",6825,1,0)
^^12^12^3071024^
"BLD",6825,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6825,1,2,0)
included in this patch.  This patch is part of a multi-package 
"BLD",6825,1,3,0)
distribution and includes the following patches installed in
"BLD",6825,1,4,0)
the following order:
"BLD",6825,1,5,0)
 
"BLD",6825,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"BLD",6825,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"BLD",6825,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"BLD",6825,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"BLD",6825,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"BLD",6825,1,11,0)
 
"BLD",6825,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"BLD",6825,4,0)
^9.64PA^^
"BLD",6825,6.3)
25
"BLD",6825,"INIT")
POST^LEX2052P
"BLD",6825,"KRN",0)
^9.67PA^8989.52^19
"BLD",6825,"KRN",.4,0)
.4
"BLD",6825,"KRN",.401,0)
.401
"BLD",6825,"KRN",.402,0)
.402
"BLD",6825,"KRN",.403,0)
.403
"BLD",6825,"KRN",.5,0)
.5
"BLD",6825,"KRN",.84,0)
.84
"BLD",6825,"KRN",3.6,0)
3.6
"BLD",6825,"KRN",3.8,0)
3.8
"BLD",6825,"KRN",9.2,0)
9.2
"BLD",6825,"KRN",9.8,0)
9.8
"BLD",6825,"KRN",9.8,"NM",0)
^9.68A^10^10
"BLD",6825,"KRN",9.8,"NM",1,0)
LEX2052^^0^B12878269
"BLD",6825,"KRN",9.8,"NM",2,0)
LEX2052P^^0^B14203256
"BLD",6825,"KRN",9.8,"NM",3,0)
LEX2052A^^0^B64464440
"BLD",6825,"KRN",9.8,"NM",4,0)
LEX2052B^^0^B51845809
"BLD",6825,"KRN",9.8,"NM",5,0)
LEX2052C^^0^B21185674
"BLD",6825,"KRN",9.8,"NM",6,0)
LEX2052D^^0^B54625889
"BLD",6825,"KRN",9.8,"NM",7,0)
LEX2052E^^0^B44536375
"BLD",6825,"KRN",9.8,"NM",8,0)
LEX2052F^^0^B31135086
"BLD",6825,"KRN",9.8,"NM",9,0)
LEX2052G^^0^B50280818
"BLD",6825,"KRN",9.8,"NM",10,0)
LEX2052H^^0^B43592107
"BLD",6825,"KRN",9.8,"NM","B","LEX2052",1)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052A",3)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052B",4)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052C",5)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052D",6)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052E",7)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052F",8)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052G",9)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052H",10)

"BLD",6825,"KRN",9.8,"NM","B","LEX2052P",2)

"BLD",6825,"KRN",19,0)
19
"BLD",6825,"KRN",19.1,0)
19.1
"BLD",6825,"KRN",101,0)
101
"BLD",6825,"KRN",409.61,0)
409.61
"BLD",6825,"KRN",771,0)
771
"BLD",6825,"KRN",870,0)
870
"BLD",6825,"KRN",8989.51,0)
8989.51
"BLD",6825,"KRN",8989.52,0)
8989.52
"BLD",6825,"KRN",8994,0)
8994
"BLD",6825,"KRN","B",.4,.4)

"BLD",6825,"KRN","B",.401,.401)

"BLD",6825,"KRN","B",.402,.402)

"BLD",6825,"KRN","B",.403,.403)

"BLD",6825,"KRN","B",.5,.5)

"BLD",6825,"KRN","B",.84,.84)

"BLD",6825,"KRN","B",3.6,3.6)

"BLD",6825,"KRN","B",3.8,3.8)

"BLD",6825,"KRN","B",9.2,9.2)

"BLD",6825,"KRN","B",9.8,9.8)

"BLD",6825,"KRN","B",19,19)

"BLD",6825,"KRN","B",19.1,19.1)

"BLD",6825,"KRN","B",101,101)

"BLD",6825,"KRN","B",409.61,409.61)

"BLD",6825,"KRN","B",771,771)

"BLD",6825,"KRN","B",870,870)

"BLD",6825,"KRN","B",8989.51,8989.51)

"BLD",6825,"KRN","B",8989.52,8989.52)

"BLD",6825,"KRN","B",8994,8994)

"BLD",6825,"PRE")
LEX2052
"BLD",6825,"QUES",0)
^9.62^^
"BLD",6825,"REQB",0)
^9.611^1^1
"BLD",6825,"REQB",1,0)
LEX*2.0*50^2
"BLD",6825,"REQB","B","LEX*2.0*50",1)

"INIT")
POST^LEX2052P
"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
LEXICON UTILITY^LEX^Medical and Biomedical Terminology System.^^^3030115
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
2.0^2950923^2950923^1118
"PKG",167,22,1,"PAH",1,0)
52^3071026^1118
"PKG",167,22,1,"PAH",1,1,0)
^^12^12^3071026
"PKG",167,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",167,22,1,"PAH",1,1,2,0)
included in this patch.  This patch is part of a multi-package 
"PKG",167,22,1,"PAH",1,1,3,0)
distribution and includes the following patches installed in
"PKG",167,22,1,"PAH",1,1,4,0)
the following order:
"PKG",167,22,1,"PAH",1,1,5,0)
 
"PKG",167,22,1,"PAH",1,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"PKG",167,22,1,"PAH",1,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"PKG",167,22,1,"PAH",1,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"PKG",167,22,1,"PAH",1,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"PKG",167,22,1,"PAH",1,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"PKG",167,22,1,"PAH",1,1,11,0)
 
"PKG",167,22,1,"PAH",1,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"PRE")
LEX2052
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
10
"RTN","LEX2052")
0^1^B12878269
"RTN","LEX2052",1,0)
LEX2052 ;ISL/KER - LEX*2.0*52 Environment Check ;08/18/2007
"RTN","LEX2052",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052",3,0)
 ;            
"RTN","LEX2052",4,0)
 ; Global Variables
"RTN","LEX2052",5,0)
 ;    None
"RTN","LEX2052",6,0)
 ;            
"RTN","LEX2052",7,0)
 ; External References
"RTN","LEX2052",8,0)
 ;    EN^DIQ1          DBIA  10015
"RTN","LEX2052",9,0)
 ;    $$PATCH^XPDUTL   DBIA  10141
"RTN","LEX2052",10,0)
 ;    $$VERSION^XPDUTL DBIA  10141
"RTN","LEX2052",11,0)
 ;    BMES^XPDUTL      DBIA  10141
"RTN","LEX2052",12,0)
 ;    MES^XPDUTL       DBIA  10141
"RTN","LEX2052",13,0)
 ;            
"RTN","LEX2052",14,0)
 ; Variables NEWed or KILLed elsewhere
"RTN","LEX2052",15,0)
 ;    XPDABORT         Kernel Systems Manual pg 454
"RTN","LEX2052",16,0)
 ;    XPDQUIT          Kernel Systems Manual pg 454
"RTN","LEX2052",17,0)
 ;            
"RTN","LEX2052",18,0)
 ; Special Variables
"RTN","LEX2052",19,0)
 ;    XPDDIQ("XPZ1")   Kernel Systems Manual pg 456
"RTN","LEX2052",20,0)
 ;    XPDDIQ("XPI1")   FORUM Message #45828644
"RTN","LEX2052",21,0)
 ;            
"RTN","LEX2052",22,0)
ENV ; LEX*2.0*52 Environment Check
"RTN","LEX2052",23,0)
 ;                    
"RTN","LEX2052",24,0)
 ;   General
"RTN","LEX2052",25,0)
 ;
"RTN","LEX2052",26,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBLDS,LEXBUILD,LEXIGHF,LEXFY,LEXQTR,LEXG,LEXE,LEXSTR D IMP
"RTN","LEX2052",27,0)
 K XPDDIQ("XPZ1","B"),XPDDIQ("XPI1","B") S XPDDIQ("XPZ1","B")="NO",XPDDIQ("XPI1","B")="NO"
"RTN","LEX2052",28,0)
 S LEXSTR=$G(LEXPTYPE) S:$L($G(LEXFY))&($L($G(LEXQTR))) LEXSTR=LEXSTR_" for "_$G(LEXFY)_" "_$G(LEXQTR)_" Quarter"
"RTN","LEX2052",29,0)
 D BM(LEXSTR),M("")
"RTN","LEX2052",30,0)
 S U="^"
"RTN","LEX2052",31,0)
 ;     No user
"RTN","LEX2052",32,0)
 D:+($$UR)'>0 ET("User not defined (DUZ)")
"RTN","LEX2052",33,0)
 ;     No IO
"RTN","LEX2052",34,0)
 D:+($$SY)'>0 ET("Undefined IO variable(s)")
"RTN","LEX2052",35,0)
 I $D(LEXE) D ABRT Q
"RTN","LEX2052",36,0)
 ;                    
"RTN","LEX2052",37,0)
 ;   Load Distribution
"RTN","LEX2052",38,0)
 ;
"RTN","LEX2052",39,0)
 ;     XPDENV = 0 Environment Check during Load
"RTN","LEX2052",40,0)
 ;
"RTN","LEX2052",41,0)
 ;       Check Version (2.0)
"RTN","LEX2052",42,0)
 I $$VERSION^XPDUTL("LEX")'="2.0" D  D ABRT Q
"RTN","LEX2052",43,0)
 . D ET("Version 2.0 not found.  Please install Lexicon Utility v 2.0")
"RTN","LEX2052",44,0)
 ;
"RTN","LEX2052",45,0)
 ;       Check Required Patches
"RTN","LEX2052",46,0)
 D:'$L($G(LEXREQP)) IMP I $L(LEXREQP) D
"RTN","LEX2052",47,0)
 . N LEXPAT,LEXI,LEXPN
"RTN","LEX2052",48,0)
 . F LEXI=1:1 Q:'$L($P(LEXREQP,";",LEXI))  S LEXPAT=$P(LEXREQP,";",LEXI) D
"RTN","LEX2052",49,0)
 . . S LEXPN=$$PATCH^XPDUTL(LEXPAT) W !,"   Checking for ",LEXPAT H 1 W:+LEXPN>0 ?31,"  installed" W:+LEXPN'>0 ?31,"  missing"
"RTN","LEX2052",50,0)
 . . I +LEXPN'>0 D ET((LEXPAT_" not found, please install "_LEXPAT_" before continuing"))
"RTN","LEX2052",51,0)
 I $D(LEXE) D ABRT Q
"RTN","LEX2052",52,0)
QUIT ;     Quit   Passed Environment Check
"RTN","LEX2052",53,0)
 K LEXFULL D OK
"RTN","LEX2052",54,0)
 Q
"RTN","LEX2052",55,0)
EXIT ;     Exit   Failed Environment Check
"RTN","LEX2052",56,0)
 D:$D(LEXE) ED S XPDQUIT=2 K LEXE,LEXFULL Q
"RTN","LEX2052",57,0)
ABRT ;     Abort  Failed Environment Check, KILL the distribution
"RTN","LEX2052",58,0)
 D:$D(LEXE) ED S XPDABORT=1,XPDQUIT=1
"RTN","LEX2052",59,0)
 S (XPDQUIT("LEX*2.0*52"),XPDQUIT("ICPT*6.0*37"))=1
"RTN","LEX2052",60,0)
 K LEXE,LEXFULL
"RTN","LEX2052",61,0)
 Q
"RTN","LEX2052",62,0)
 ;               
"RTN","LEX2052",63,0)
 ; Checks
"RTN","LEX2052",64,0)
 ;
"RTN","LEX2052",65,0)
SY(X) ;   Check System variables
"RTN","LEX2052",66,0)
 Q:'$D(IO)!('$D(IOF))!('$D(IOM))!('$D(ION))!('$D(IOSL))!('$D(IOST)) 0
"RTN","LEX2052",67,0)
 Q 1
"RTN","LEX2052",68,0)
UR(X) ;   Check User variables
"RTN","LEX2052",69,0)
 Q:'$L($G(DUZ(0))) 0
"RTN","LEX2052",70,0)
 Q:+($G(DUZ))=0!($$NOTDEF(+$G(DUZ))) 0
"RTN","LEX2052",71,0)
 Q 1
"RTN","LEX2052",72,0)
 ;               
"RTN","LEX2052",73,0)
 ; Error messages
"RTN","LEX2052",74,0)
 ;
"RTN","LEX2052",75,0)
ET(X) ;   Error Text
"RTN","LEX2052",76,0)
 N LEXI S LEXI=+($G(LEXE(0))),LEXI=LEXI+1,LEXE(LEXI)="    "_$G(X),LEXE(0)=LEXI
"RTN","LEX2052",77,0)
 Q
"RTN","LEX2052",78,0)
ED ;   Error Display
"RTN","LEX2052",79,0)
 N LEXI,LEXC S (LEXI,LEXC)=0 F  S LEXI=$O(LEXE(LEXI)) Q:+LEXI=0  S LEXC=LEXC+1 D:LEXC=1 M("  ") D M(LEXE(LEXI))
"RTN","LEX2052",80,0)
 D M(" ") K LEXE Q
"RTN","LEX2052",81,0)
 ;                   
"RTN","LEX2052",82,0)
 ; Miscellaneous
"RTN","LEX2052",83,0)
 ;
"RTN","LEX2052",84,0)
NOTDEF(IEN) ;   Check to see if user is defined
"RTN","LEX2052",85,0)
 N DA,DR,DIQ,LEX,DIC S DA=IEN,DR=.01,DIC=200,DIQ="LEX" D EN^DIQ1 Q '$D(LEX)
"RTN","LEX2052",86,0)
OK ;   Environment is OK
"RTN","LEX2052",87,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBLDS,LEXBUILD,LEXIGHF,LEXFY,LEXQTR,LEXT
"RTN","LEX2052",88,0)
 D IMP S LEXT="  Environment "_$S($L(LEXBLDS):("for patch/build "_LEXBLDS_" "),1:"")_"is ok"
"RTN","LEX2052",89,0)
 D BM(LEXT),M(" ")
"RTN","LEX2052",90,0)
 Q
"RTN","LEX2052",91,0)
BM(X) ;   Blank Line with Message
"RTN","LEX2052",92,0)
 D BMES^XPDUTL($G(X)) Q
"RTN","LEX2052",93,0)
M(X) ;   Message
"RTN","LEX2052",94,0)
 D MES^XPDUTL($G(X)) Q
"RTN","LEX2052",95,0)
TRIM(X) ;   Trim Spaces
"RTN","LEX2052",96,0)
 S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEX2052",97,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","LEX2052",98,0)
 Q X
"RTN","LEX2052",99,0)
IMP ;   Import names
"RTN","LEX2052",100,0)
 ;     Patch Type
"RTN","LEX2052",101,0)
 S LEXPTYPE="Lexicon/CPT Remedy Ticket Fixes"
"RTN","LEX2052",102,0)
 ;     Revision
"RTN","LEX2052",103,0)
 S LEXLREV="52"
"RTN","LEX2052",104,0)
 ;     Required Builds
"RTN","LEX2052",105,0)
 S LEXREQP="LEX*2.0*50"
"RTN","LEX2052",106,0)
 ;     This Build Name
"RTN","LEX2052",107,0)
 S LEXBLDS="LEX*2.0*52/ICPT*6.0*37",LEXBUILD=$P(LEXBLDS,"/",1)
"RTN","LEX2052",108,0)
 ;     This Build's Export Global Host Filename
"RTN","LEX2052",109,0)
 S LEXIGHF=""
"RTN","LEX2052",110,0)
 ;     Fiscal Year
"RTN","LEX2052",111,0)
 S LEXFY=""
"RTN","LEX2052",112,0)
 ;     Quarter
"RTN","LEX2052",113,0)
 S LEXQTR=""
"RTN","LEX2052",114,0)
 Q
"RTN","LEX2052A")
0^3^B64464440
"RTN","LEX2052A",1,0)
LEX2052A ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052A",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052A",3,0)
 ;               
"RTN","LEX2052A",4,0)
 ; Global Variables
"RTN","LEX2052A",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052A",6,0)
 ;    ^ICPT(        DBIA   4489
"RTN","LEX2052A",7,0)
 ;    ^TMP("LEXMOD51E") - Array of Exempt Codes
"RTN","LEX2052A",8,0)
 ;    ^TMP("LEXMOD51H") - Array of HCPCS Codes
"RTN","LEX2052A",9,0)
 ;    ^TMP("LEXMOD51T") - Array of Temporary Codes
"RTN","LEX2052A",10,0)
 ;            
"RTN","LEX2052A",11,0)
 ; External References
"RTN","LEX2052A",12,0)
 ;    ^DIK          DBIA  10013
"RTN","LEX2052A",13,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052A",14,0)
 ;    $$CPT^ICPTCOD DBIA   1995 
"RTN","LEX2052A",15,0)
 ;    $$DT^XLFDT    DBIA  10103
"RTN","LEX2052A",16,0)
 ;    MES^XPDUTL    DBIA  10141
"RTN","LEX2052A",17,0)
 ;            
"RTN","LEX2052A",18,0)
EN ; Main Entry Point
"RTN","LEX2052A",19,0)
 ;   CPT Code Pairs (less Appendix E) for Modifier 51
"RTN","LEX2052A",20,0)
 K ^TMP("LEXMOD51E",$J),^TMP("LEXMOD51H",$J),^TMP("LEXMOD51T",$J) N QTR,UPDATE,TCACT,THACT,TCINA,THINA
"RTN","LEX2052A",21,0)
 S QTR=3070101,UPDATE=1,(TCACT,THACT,TCINA,THINA)=0
"RTN","LEX2052A",22,0)
 D REMI("CPT Modifier 51 with Codes (less Appendix E)","HD0000000 183497")
"RTN","LEX2052A",23,0)
 D REMI("  ","HD0000000 186884")
"RTN","LEX2052A",24,0)
 D:$D(UPDATE) DEL
"RTN","LEX2052A",25,0)
 D IND("   Inactivating Previous CPT Code Ranges")
"RTN","LEX2052A",26,0)
 D EN^LEX2052B,EN^LEX2052C,EN^LEX2052D
"RTN","LEX2052A",27,0)
 D IND("   Activating New CPT/HCPCS Code Ranges")
"RTN","LEX2052A",28,0)
 D HP,LE,AN,SR,RA,LR,MC,EM,IND("   Changes to CPT Modifier 51 Code Ranges")
"RTN","LEX2052A",29,0)
 I +($G(TCINA))>0 D MES^XPDUTL(("         "_$J(+($G(TCINA)),3)_" CPT Code ranges inactivated"))
"RTN","LEX2052A",30,0)
 I +($G(THINA))>0 D MES^XPDUTL(("         "_$J(+($G(THINA)),3)_" HCPCS Code ranges inactivated"))
"RTN","LEX2052A",31,0)
 I +($G(TCACT))>0 D MES^XPDUTL(("         "_$J(+($G(TCACT)),3)_" CPT Code ranges activated"))
"RTN","LEX2052A",32,0)
 I +($G(THACT))>0 D MES^XPDUTL(("         "_$J(+($G(THACT)),3)_" HCPCS Code ranges activated"))
"RTN","LEX2052A",33,0)
 K ^TMP("LEXMOD51E",$J),^TMP("LEXMOD51H",$J),^TMP("LEXMOD51T",$J)
"RTN","LEX2052A",34,0)
 Q
"RTN","LEX2052A",35,0)
AN ;     Anesthesia        >00000 '>09999
"RTN","LEX2052A",36,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE N X,Y S X="00000",Y="09999" D GP(X,Y)
"RTN","LEX2052A",37,0)
 Q
"RTN","LEX2052A",38,0)
SR ;     Surgery           >10000 '>69999
"RTN","LEX2052A",39,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE N X,Y S X="09000",Y="69999" D GP(X,Y)
"RTN","LEX2052A",40,0)
 Q
"RTN","LEX2052A",41,0)
RA ;     Radiology         >70000 '>79999
"RTN","LEX2052A",42,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE N X,Y S X="70000",Y="79999" D GP(X,Y)
"RTN","LEX2052A",43,0)
 Q
"RTN","LEX2052A",44,0)
LR ;     Pathology/Lab     >80000 '>89999
"RTN","LEX2052A",45,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE N X,Y S X="80000",Y="89999" D GP(X,Y)
"RTN","LEX2052A",46,0)
 Q
"RTN","LEX2052A",47,0)
MC ;     Medicine          >90000 '>98999
"RTN","LEX2052A",48,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE N X,Y S X="90000",Y="98999" D GP(X,Y)
"RTN","LEX2052A",49,0)
 Q
"RTN","LEX2052A",50,0)
EM ;     Eval/Mgmt         >99000 '>99999
"RTN","LEX2052A",51,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE N X,Y S X=99000,Y=99999 D GP(X,Y)
"RTN","LEX2052A",52,0)
 Q
"RTN","LEX2052A",53,0)
HP ;     HCPCS             >A0000 '>Z0000
"RTN","LEX2052A",54,0)
 D LH N CNT,LINE S CNT=0,LINE="" F  S LINE=$O(^TMP("LEXMOD51H",$J,LINE)) Q:LINE=""  D
"RTN","LEX2052A",55,0)
 . N BEG,DA,DIK,EFF,END,ND,NDD,TXT
"RTN","LEX2052A",56,0)
 . S BEG=$P(LINE,"^",1),END=$P(LINE,"^",2) Q:$L(BEG)'=5!($E(BEG,1)'?1U)  Q:$L(END)'=5!($E(END,1)'?1U)
"RTN","LEX2052A",57,0)
 . S NDD=$G(^TMP("LEXMOD51H",$J,LINE)),EFF=$P(NDD,"^",3) Q:EFF'?7N
"RTN","LEX2052A",58,0)
 . S DA(1)=$O(^DIC(81.3,"B",51,0)) Q:+DA(1)'>0  Q:'$D(^DIC(81.3,DA(1),10,0))
"RTN","LEX2052A",59,0)
 . S DA=$O(^DIC(81.3,DA(1),10," "),-1),DA=DA+1 Q:$D(^DIC(81.3,DA(1),10,DA))
"RTN","LEX2052A",60,0)
 . S ND="^DIC(81.3,"_DA(1)_",10,"_DA_",0)",NDD=BEG_"^"_END_"^"_EFF_"^",DIK="^DIC(81.3,"_DA(1)_",10," I $D(UPDATE) D
"RTN","LEX2052A",61,0)
 . . N IEN,LST,TOT S @ND=NDD D IX1^DIK S THACT=+($G(THACT))+1 S IEN=0,(TOT,LST)=""
"RTN","LEX2052A",62,0)
 . . F  S IEN=$O(^DIC(81.3,DA(1),10,IEN)) Q:+IEN=0  S TOT=+($G(TOT))+1,LST=+($G(IEN))
"RTN","LEX2052A",63,0)
 . . S ^DIC(81.3,DA(1),10,0)="^81.32A^^0" S:+($G(TOT))>0&(+($G(LST))>0) ^DIC(81.3,DA(1),10,0)="^81.32A^"_+($G(LST))_"^"_+($G(TOT))
"RTN","LEX2052A",64,0)
 . S CNT=CNT+1 S TXT="       "_BEG_"  -  "_END
"RTN","LEX2052A",65,0)
 K ^TMP("LEXMOD51H",$J)
"RTN","LEX2052A",66,0)
 Q
"RTN","LEX2052A",67,0)
 ;            
"RTN","LEX2052A",68,0)
 ; Miscellaneous
"RTN","LEX2052A",69,0)
GP(X,Y) ;   Get Pairs
"RTN","LEX2052A",70,0)
 D:'$D(^TMP("LEXMOD51E",$J)) LE S X=$E($G(X),1,5),Y=$E($G(Y),1,5) Q:$L(X)'=5 ""  Q:$L(Y)'=5 ""
"RTN","LEX2052A",71,0)
 N BEG,CDT,CODE,END,EXIT,FMN,TON S (BEG,END)="",CDT=$S($L($G(DT))=7:DT,1:$$DT^XLFDT),EXIT=0,FMN=$$NUM(X),TON=$$NUM(Y),CODE=X_" "
"RTN","LEX2052A",72,0)
 F  S CODE=$O(^ICPT("BA",CODE)) Q:CODE=""  D  Q:EXIT  Q:CODE=""
"RTN","LEX2052A",73,0)
 . N NUM,TXT I $E(CODE,5)'?1N S ^TMP("LEXMOD51T",$J,($E(CODE,1,5)_" "))="" Q
"RTN","LEX2052A",74,0)
 . S NUM=$$NUM($E(CODE,1,5)) I NUM<FMN!(NUM>TON) S EXIT=1,CODE="" Q
"RTN","LEX2052A",75,0)
 . S:'$L(BEG) BEG=$$BEG($E(CODE,1,5),X,Y) S END="" S:$L(BEG) END=$$END($E(BEG,1,5),X,Y) Q:$L(BEG)'=5!($L(END)'=5)
"RTN","LEX2052A",76,0)
 . S TXT="       "_BEG_"  -  "_END
"RTN","LEX2052A",77,0)
 . D:BEG?5N&(END?5N)&($D(UPDATE)) ADD(BEG,END)
"RTN","LEX2052A",78,0)
 . I $L(END)>4 S CODE=$E(END,1,5)_" ",BEG="",END=""
"RTN","LEX2052A",79,0)
 Q
"RTN","LEX2052A",80,0)
BEG(CODE,X,Y) ;   Beginning of Range
"RTN","LEX2052A",81,0)
 S CODE=$E($G(CODE),1,5),X=$E($G(X),1,5),Y=$E($G(Y),1,5) Q:$L(CODE)'=5 ""  Q:$L(X)'=5 ""  Q:$L(Y)'=5 ""
"RTN","LEX2052A",82,0)
 N CDT,FMN,TON,NUM,ORD,LAS,BEG S BEG="",FMN=$$NUM(X),TON=$$NUM(Y),NUM=$$NUM(CODE)
"RTN","LEX2052A",83,0)
 Q:NUM<FMN ""  Q:NUM>TON ""  S CDT=$G(DT) S:CDT'?7N CDT=$$DT^XLFDT S ORD=$E(CODE,1,4)_$C($A($E(CODE,5))-1)_"~" D:'$D(^TMP("LEXMOD51E",$J)) LE
"RTN","LEX2052A",84,0)
 F  S ORD=$O(^ICPT("BA",ORD)) Q:ORD=""  D  Q:$L(BEG)  Q:ORD=""
"RTN","LEX2052A",85,0)
 . N OR,ORN,INFO,STA,SRC S OR=$E(ORD,1,5),ORN=$$NUM(OR) Q:$E(OR,5)'?1N  I ORN<FMN!(ORN>TON) S ORD="" Q
"RTN","LEX2052A",86,0)
 . S INFO=$$CPT^ICPTCOD(OR,CDT),STA=$P(INFO,"^",7),SRC=$P(INFO,"^",5) Q:+STA'>0  Q:SRC="L"  Q:$D(^TMP("LEXMOD51E",$J,(OR_" ")))  S BEG=OR
"RTN","LEX2052A",87,0)
 S CODE=$G(BEG)
"RTN","LEX2052A",88,0)
 Q CODE
"RTN","LEX2052A",89,0)
END(CODE,X,Y) ;   Ending of Range
"RTN","LEX2052A",90,0)
 S CODE=$E($G(CODE),1,5),X=$E($G(X),1,5),Y=$E($G(Y),1,5) Q:$L(CODE)'=5 ""  Q:$L(X)'=5 ""  Q:$L(Y)'=5 ""
"RTN","LEX2052A",91,0)
 N CDT,END,FMN,LAS,NUM,ORD,TON S END="",FMN=$$NUM(X),TON=$$NUM(Y),NUM=$$NUM(CODE) Q:NUM<FMN ""  Q:NUM>TON ""
"RTN","LEX2052A",92,0)
 S CDT=$G(DT) S:CDT'?7N CDT=$$DT^XLFDT S ORD=$E(CODE,1,4)_$C($A($E(CODE,5))-1)_"~",LAS=CODE D:'$D(^TMP("LEXMOD51E",$J)) LE
"RTN","LEX2052A",93,0)
 F  S ORD=$O(^ICPT("BA",ORD)) Q:ORD=""  D  Q:$L(END)  Q:ORD=""
"RTN","LEX2052A",94,0)
 . N INFO,OR,ORN,STA,SRC S OR=$E(ORD,1,5),ORN=$$NUM(OR) Q:$E(OR,5)'?1N  I ORN<FMN!(ORN>TON) S ORD="" Q
"RTN","LEX2052A",95,0)
 . S INFO=$$CPT^ICPTCOD(OR,CDT),STA=$P(INFO,"^",7),SRC=$P(INFO,"^",5) Q:+STA'>0  Q:SRC="L"
"RTN","LEX2052A",96,0)
 . I $L(LAS),$D(^TMP("LEXMOD51E",$J,(OR_" "))) S END=LAS,ORD="" Q
"RTN","LEX2052A",97,0)
 . I '$D(^TMP("LEXMOD51E",$J,(OR_" "))) S:$L(OR) LAS=OR
"RTN","LEX2052A",98,0)
 S:$L($G(LAS))&('$L($G(END))) END=$G(LAS) S CODE=$G(END)
"RTN","LEX2052A",99,0)
 Q CODE
"RTN","LEX2052A",100,0)
NUM(X) ;   Convert CPT/HCPCS Code to Numeric
"RTN","LEX2052A",101,0)
 Q $S(X?1.N:+X,X?4N1A:$A($E(X,5))*10_$E(X,1,4),1:$A(X)_$E(X,2,5))
"RTN","LEX2052A",102,0)
ADD(X,Y) ;   Add to file 81.3
"RTN","LEX2052A",103,0)
 N BEG,CNT,DA,DIK,EFF,END,ND,NDD S BEG=$G(X),END=$G(Y) Q:BEG'?5N  Q:END'?5N
"RTN","LEX2052A",104,0)
 S DA(1)=$O(^DIC(81.3,"B",51,0)) Q:'$D(^DIC(81.3,DA(1),10,0))
"RTN","LEX2052A",105,0)
 S DA=$O(^DIC(81.3,DA(1),10," "),-1),DA=DA+1 Q:$D(^DIC(81.3,DA(1),10,DA))
"RTN","LEX2052A",106,0)
 S CNT=0,EFF="" F  S CNT=$O(^DIC(81.3,DA(1),60,CNT)) Q:+CNT'>0  D
"RTN","LEX2052A",107,0)
 . S:$P($G(^DIC(81.3,DA(1),60,CNT,0)),"^",2)>0&($P($G(^DIC(81.3,DA(1),60,CNT,0)),"^",1)?7N) EFF=$P($G(^DIC(81.3,DA(1),60,CNT,0)),"^",1)
"RTN","LEX2052A",108,0)
 Q:EFF'?7N  S:+($G(QTR))>0&($G(QTR)?7N) EFF=QTR
"RTN","LEX2052A",109,0)
 S ND="^DIC(81.3,"_DA(1)_",10,"_DA_",0)",NDD=BEG_"^"_END_"^"_EFF_"^",DIK="^DIC(81.3,"_DA(1)_",10," I $D(UPDATE) D
"RTN","LEX2052A",110,0)
 . N IEN,LST,TOT S @ND=NDD D IX1^DIK S TCACT=+($G(TCACT))+1 S IEN=0,(TOT,LST)=""
"RTN","LEX2052A",111,0)
 . F  S IEN=$O(^DIC(81.3,DA(1),10,IEN)) Q:+IEN=0  S TOT=+($G(TOT))+1,LST=+($G(IEN))
"RTN","LEX2052A",112,0)
 . S ^DIC(81.3,DA(1),10,0)="^81.32A^^0" S:+($G(TOT))>0&(+($G(LST))>0) ^DIC(81.3,DA(1),10,0)="^81.32A^"_+($G(LST))_"^"_+($G(TOT))
"RTN","LEX2052A",113,0)
 Q
"RTN","LEX2052A",114,0)
DEL ;   Delete existing Pairs
"RTN","LEX2052A",115,0)
 N DA,DIK S DA(1)=$O(^DIC(81.3,"B",51,0)) Q:+DA(1)'>0  Q:'$D(^DIC(81.3,DA(1),10,0))  S DIK="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052A",116,0)
 S DA=0 F  S DA=$O(^DIC(81.3,DA(1),10,DA)) Q:+DA'>0  D ^DIK
"RTN","LEX2052A",117,0)
 Q
"RTN","LEX2052A",118,0)
LE ;   Load ^TMP("LEXMOD51E",$J) Exemptions
"RTN","LEX2052A",119,0)
 K ^TMP("LEXMOD51E",$J) N CDT,LINE,TXT S CDT=$$DT^XLFDT,TXT="" F LINE=1:1 D  Q:'$L(TXT)
"RTN","LEX2052A",120,0)
 . N CNT,CODE,EXEC S TXT="" S EXEC="S TXT=$T(EC+"_LINE_")" X EXEC
"RTN","LEX2052A",121,0)
 . S TXT=$$TM(TXT," ") Q:'$L(TXT)  Q:'$L($TR(TXT,";",""))  S TXT=$P(TXT,";",3,299)
"RTN","LEX2052A",122,0)
 . F CNT=1:1 S CODE=$P(TXT,";",CNT) Q:'$L(CODE)  D
"RTN","LEX2052A",123,0)
 . . N INFO S INFO=$$CPT^ICPTCOD(CODE,CDT) Q:$P(INFO,"^",7)'>0
"RTN","LEX2052A",124,0)
 . . S:$D(^ICPT("BA",(CODE_" "))) ^TMP("LEXMOD51E",$J,(CODE_" "))=""
"RTN","LEX2052A",125,0)
 Q
"RTN","LEX2052A",126,0)
LH ;   Load ^TMP("LEXMOD51H",$J) HCPCS
"RTN","LEX2052A",127,0)
 K ^TMP("LEXMOD51H",$J) N LINE,TXT S TXT="" F LINE=1:1 D  Q:'$L(TXT)
"RTN","LEX2052A",128,0)
 . N EXEC,BEG,END,EFF S TXT="" S EXEC="S TXT=$T(HCPCS+"_LINE_")" X EXEC
"RTN","LEX2052A",129,0)
 . S TXT=$$TM(TXT," ") Q:'$L(TXT)  Q:'$L($TR(TXT,";",""))  S TXT=$P(TXT,";",3,299)
"RTN","LEX2052A",130,0)
 . S BEG=$P(TXT,";",1),END=$P(TXT,";",2),EFF=$P(TXT,";",3) S:$L(BEG)'=5!($L(END)'=5)!($L(EFF)'=7) TXT="" Q:'$L(TXT)
"RTN","LEX2052A",131,0)
 . S:$D(^ICPT("BA",(BEG_" ")))&($D(^ICPT("BA",(END_" ")))) ^TMP("LEXMOD51H",$J,(BEG_"^"_END))=BEG_"^"_END_"^"_EFF
"RTN","LEX2052A",132,0)
 Q
"RTN","LEX2052A",133,0)
TM(X,Y) ;   Trim Character C
"RTN","LEX2052A",134,0)
 S X=$G(X),Y=$E($G(Y),1) Q:$L(Y)'=1 X  F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","LEX2052A",135,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","LEX2052A",136,0)
 Q X
"RTN","LEX2052A",137,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2052A",138,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2052A",139,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2052A",140,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052A",141,0)
IND(X) ;   Indent Text
"RTN","LEX2052A",142,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2052A",143,0)
 Q
"RTN","LEX2052A",144,0)
 ;            
"RTN","LEX2052A",145,0)
 ; Code List
"RTN","LEX2052A",146,0)
HCPCS ;   HCPCS Code List
"RTN","LEX2052A",147,0)
 ;;G0127;G0127;2990101
"RTN","LEX2052A",148,0)
 ;;G0186;G0186;3030101
"RTN","LEX2052A",149,0)
 ;;G0168;G0168;3040101
"RTN","LEX2052A",150,0)
 ;;G0104;G0105;3050101
"RTN","LEX2052A",151,0)
 ;;G0121;G0121;3050101
"RTN","LEX2052A",152,0)
 ;;G0268;G0268;3050101
"RTN","LEX2052A",153,0)
 ;;G0338;G0338;3050101
"RTN","LEX2052A",154,0)
 ;;G0340;G0343;3050101
"RTN","LEX2052A",155,0)
 ;;S2135;S2135;3050101
"RTN","LEX2052A",156,0)
 ;;S2215;S2235;3050101
"RTN","LEX2052A",157,0)
 ;;S2362;S2363;3050101
"RTN","LEX2052A",158,0)
 ;;S3000;S3000;3050101
"RTN","LEX2052A",159,0)
 ;;S8093;S8093;3050101
"RTN","LEX2052A",160,0)
 ;;
"RTN","LEX2052A",161,0)
 ;
"RTN","LEX2052A",162,0)
EC ;   Appendix E Code List
"RTN","LEX2052A",163,0)
 ;;17004
"RTN","LEX2052A",164,0)
 ;;20660;20690;20692;20900;20902;20910;20912;20920;20922;20924
"RTN","LEX2052A",165,0)
 ;;20926;20930;20931;20936;20937;20938;20974;20975;22840;22841
"RTN","LEX2052A",166,0)
 ;;22842;22843;22844;22845;22846;22847;22848;22851
"RTN","LEX2052A",167,0)
 ;;31500
"RTN","LEX2052A",168,0)
 ;;32000;32002;32020
"RTN","LEX2052A",169,0)
 ;;33517;33518;33519;33521;33522;33523
"RTN","LEX2052A",170,0)
 ;;35600
"RTN","LEX2052A",171,0)
 ;;36620;36660
"RTN","LEX2052A",172,0)
 ;;38792
"RTN","LEX2052A",173,0)
 ;;44500
"RTN","LEX2052A",174,0)
 ;;61107;61210
"RTN","LEX2052A",175,0)
 ;;62284
"RTN","LEX2052A",176,0)
 ;;90281;90283;90287;90288;90291;90296
"RTN","LEX2052A",177,0)
 ;;90371;90375;90376;90378;90379;90384;90385;90386;90389;90393
"RTN","LEX2052A",178,0)
 ;;90396;90399
"RTN","LEX2052A",179,0)
 ;;90476;90477
"RTN","LEX2052A",180,0)
 ;;90581;90585;90586
"RTN","LEX2052A",181,0)
 ;;90632;90633;90634;90636;90645;90646;90647;90648;90649;90655
"RTN","LEX2052A",182,0)
 ;;90656;90657;90658;90660;90665;90669;90675;90676
"RTN","LEX2052A",183,0)
 ;;90680;90690;90691;90692;90693;90698
"RTN","LEX2052A",184,0)
 ;;90700;90701;90702;90703;90704;90705;90706;90707;90708;90710
"RTN","LEX2052A",185,0)
 ;;90712;90713;90714;90715;90716;90717;90718;90719
"RTN","LEX2052A",186,0)
 ;;90720;90721;90723;90725;90727;90732;90733;90734;90735;90736
"RTN","LEX2052A",187,0)
 ;;90740;90743;90744;90746;90747;90748;90749
"RTN","LEX2052A",188,0)
 ;;93501;93503;93505;93508;93510;93511;93514;93524;93526;93527
"RTN","LEX2052A",189,0)
 ;;93528;93529;93530;93531;93532;93533;93539
"RTN","LEX2052A",190,0)
 ;;93540;93541;93542;93543;93544;93545;93555;93556
"RTN","LEX2052A",191,0)
 ;;93600;93602;93603;93610;93612;93615;93616;93618;93619;93620
"RTN","LEX2052A",192,0)
 ;;93624;93631;93640;93641;93642;93650;93651;93652;93660
"RTN","LEX2052A",193,0)
 ;;94610
"RTN","LEX2052A",194,0)
 ;;95900;95903;95904
"RTN","LEX2052A",195,0)
 ;;99143;99144;99148;99149
"RTN","LEX2052A",196,0)
 ;;;
"RTN","LEX2052B")
0^4^B51845809
"RTN","LEX2052B",1,0)
LEX2052B ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052B",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052B",3,0)
 ;            
"RTN","LEX2052B",4,0)
 ; Global Variables
"RTN","LEX2052B",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052B",6,0)
 ;            
"RTN","LEX2052B",7,0)
 ; External References
"RTN","LEX2052B",8,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052B",9,0)
 ;    $$FMTE^XLFDT  DBIA  10103
"RTN","LEX2052B",10,0)
 ;            
"RTN","LEX2052B",11,0)
 ; Variables NEWed or KILLed in LEX2052A
"RTN","LEX2052B",12,0)
 ;    TCINA         Total CPT Inactivated
"RTN","LEX2052B",13,0)
 ;    THINA         Total HCPCS Inactivated
"RTN","LEX2052B",14,0)
 ;    UPDATE        Flag to Update file 81.3
"RTN","LEX2052B",15,0)
 ;            
"RTN","LEX2052B",16,0)
 Q
"RTN","LEX2052B",17,0)
EN ; Main Entry Point - Jan 1, 1999
"RTN","LEX2052B",18,0)
 N I,TXT S TXT="" F I=1:1 D  Q:'$L(TXT)
"RTN","LEX2052B",19,0)
 . N ENT,EXEC,SEG S TXT="" S EXEC="S TXT=$T(PAIRS+"_I_")" X EXEC S TXT=$$TM(TXT," "),TXT=$$TM(TXT,";") Q:'$L(TXT)
"RTN","LEX2052B",20,0)
 . F ENT=1:1 S SEG=$P(TXT,";;",ENT)  Q:'$L(SEG)  D
"RTN","LEX2052B",21,0)
 . . N BEG,DA,DIK,EFF,END,IEN,INA,LST,ND,NDD,TDT,TOT S (TDT,ND,NDD)=""
"RTN","LEX2052B",22,0)
 . . S BEG=$P(SEG,"^",1),END=$P(SEG,"^",2),EFF=$P(SEG,"^",3),INA=$P(SEG,"^",4)
"RTN","LEX2052B",23,0)
 . . I $L(BEG)=7,'$L(END) S:BEG?7N TDT=$TR($$FMTE^XLFDT(BEG,"5DZ"),"@"," ") S:$L(TDT) TDT="       "_TDT
"RTN","LEX2052B",24,0)
 . . Q:'$D(UPDATE)  S:$L(BEG)=5&($L(END)=5)&($L(EFF)=7)&($L(INA)=7) NDD=BEG_"^"_END_"^"_EFF_"^"_INA
"RTN","LEX2052B",25,0)
 . . S DA(1)=$O(^DIC(81.3,"B",51,0)) Q:+DA(1)'>0  Q:'$D(^DIC(81.3,DA(1),10,0))
"RTN","LEX2052B",26,0)
 . . S DA=$O(^DIC(81.3,DA(1),10," "),-1),DA=DA+1 Q:$D(^DIC(81.3,DA(1),10,DA))
"RTN","LEX2052B",27,0)
 . . S ND="^DIC(81.3,"_DA(1)_",10,"_DA_",0)" Q:'$L(NDD)  S DIK="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052B",28,0)
 . . S @ND=NDD D IX1^DIK S:$E(BEG,1)?1N TCINA=+($G(TCINA))+1 S:$E(BEG,1)?1U THINA=+($G(THINA))+1
"RTN","LEX2052B",29,0)
 . . S IEN=0,(TOT,LST)="" F  S IEN=$O(^DIC(81.3,DA(1),10,IEN)) Q:+IEN=0  S TOT=+($G(TOT))+1,LST=+($G(IEN))
"RTN","LEX2052B",30,0)
 . . S ^DIC(81.3,DA(1),10,0)="^81.32A^^0" S:+($G(TOT))>0&(+($G(LST))>0) ^DIC(81.3,DA(1),10,0)="^81.32A^"_+($G(LST))_"^"_+($G(TOT))
"RTN","LEX2052B",31,0)
 Q
"RTN","LEX2052B",32,0)
TM(X,C) ; Trim Character C
"RTN","LEX2052B",33,0)
 S X=$G(X),C=$E($G(C),1) Q:$L(C)'=1 X  F  Q:$E(X,1)'=C  S X=$E(X,2,$L(X))
"RTN","LEX2052B",34,0)
 F  Q:$E(X,$L(X))'=C  S X=$E(X,1,($L(X)-1))
"RTN","LEX2052B",35,0)
 Q X
"RTN","LEX2052B",36,0)
PAIRS ; Inactive CPT Code pairing for Modifier 51
"RTN","LEX2052B",37,0)
 ;;2990101
"RTN","LEX2052B",38,0)
 ;;10040^11000^2990101^3070101;;1004F^1039F^2990101^3070101;;11010^11100^2990101^3070101;;11200^11200^2990101^3070101
"RTN","LEX2052B",39,0)
 ;;11300^11730^2990101^3070101;;11740^11921^2990101^3070101;;11950^13101^2990101^3070101;;13120^13121^2990101^3070101
"RTN","LEX2052B",40,0)
 ;;13131^13132^2990101^3070101;;13150^13152^2990101^3070101;;13160^15000^2990101^3010401;;15050^15100^2990101^3070101
"RTN","LEX2052B",41,0)
 ;;15120^15120^2990101^3070101;;15200^15200^2990101^3070101;;15220^15220^2990101^3070101;;15240^15240^2990101^3070101
"RTN","LEX2052B",42,0)
 ;;15260^15260^2990101^3070101;;15350^15350^2990101^3070101;;15400^15400^2990101^3070101;;15570^15786^2990101^3070101
"RTN","LEX2052B",43,0)
 ;;15788^15958^2990101^3050401;;16000^16041^2990101^3010401;;17000^17000^2990101^3070101;;17106^17286^2990101^3070101
"RTN","LEX2052B",44,0)
 ;;17340^17380^2990101^3050401;;19000^19000^2990101^3050401;;19020^19125^2990101^3070101;;19140^19290^2990101^3070101
"RTN","LEX2052B",45,0)
 ;;19316^19396^2990101^3050401;;20000^20650^2990101^3050401;;2000F^2028F^2990101^3050401;;20661^20680^2990101^3070101
"RTN","LEX2052B",46,0)
 ;;20693^20838^2990101^3070101;;20950^20973^2990101^3070101;;21010^21070^2990101^3030101;;21100^21296^2990101^3050401
"RTN","LEX2052B",47,0)
 ;;21300^21497^2990101^3050401;;21501^21825^2990101^3050401;;21920^22102^2990101^3050401;;22110^22114^2990101^3070101
"RTN","LEX2052B",48,0)
 ;;22210^22214^2990101^3070101;;22220^22224^2990101^3070101;;22305^22327^2990101^3070101;;22505^22558^2990101^3030101
"RTN","LEX2052B",49,0)
 ;;22590^22612^2990101^3070101;;22630^22630^2990101^3070101;;22800^22830^2990101^3070101;;22849^22850^2990101^3070101
"RTN","LEX2052B",50,0)
 ;;22852^22855^2990101^3050401;;22900^22900^2990101^3050401;;23000^23921^2990101^3050401;;23930^24940^2990101^3050401
"RTN","LEX2052B",51,0)
 ;;25000^25931^2990101^3050401;;26010^26123^2990101^3050401;;26130^26860^2990101^3030101;;26862^26862^2990101^3070101
"RTN","LEX2052B",52,0)
 ;;26910^26952^2990101^3050401;;26990^27295^2990101^3050401;;27301^27357^2990101^3050401;;27360^27598^2990101^3050401
"RTN","LEX2052B",53,0)
 ;;27600^27691^2990101^3050401;;27695^27894^2990101^3050401;;28001^28825^2990101^3050401;;29000^29750^2990101^3050401
"RTN","LEX2052B",54,0)
 ;;29800^29898^2990101^3070101;;30000^30930^2990101^3050401;;3000F^3080F^2990101^3050401;;31000^31294^2990101^3050401
"RTN","LEX2052B",55,0)
 ;;31300^31420^2990101^3050401;;31502^31595^2990101^3050401;;31600^31830^2990101^3050401;;32001^32001^2990101^3010401
"RTN","LEX2052B",56,0)
 ;;32005^32005^2990101^3050401;;32035^32500^2990101^3070101;;33010^33335^2990101^3030101;;33400^33516^2990101^3030101
"RTN","LEX2052B",57,0)
 ;;33533^33545^2990101^3070101;;33600^33922^2990101^3070101;;33930^33945^2990101^3030101;;34001^35381^2990101^3010401
"RTN","LEX2052B",58,0)
 ;;35450^35495^2990101^3070101;;35501^35671^2990101^3070101;;35691^35695^2990101^3070101;;35701^36217^2990101^3070101
"RTN","LEX2052B",59,0)
 ;;36245^36247^2990101^3070101;;36260^36262^2990101^3050401;;36400^36410^2990101^3050401;;36420^37181^2990101^3070101
"RTN","LEX2052B",60,0)
 ;;37200^37205^2990101^3050401;;37207^37207^2990101^3070101;;37209^37209^2990101^3050401;;37565^37790^2990101^3050401
"RTN","LEX2052B",61,0)
 ;;38100^38101^2990101^3050401;;38115^38745^2990101^3070101;;38760^38790^2990101^3070101;;38794^38794^2990101^3050401
"RTN","LEX2052B",62,0)
 ;;39000^39400^2990101^3050401;;40490^40761^2990101^3050401;;4050F^4050F^2990101^3050401;;40800^40845^2990101^3050401
"RTN","LEX2052B",63,0)
 ;;41000^41113^2990101^3050401;;41115^41520^2990101^3050401;;41800^41874^2990101^3050401;;42000^42281^2990101^3050401
"RTN","LEX2052B",64,0)
 ;;42300^42665^2990101^3050401;;42700^42972^2990101^3050401;;43300^43496^2990101^3050401;;43500^43634^2990101^3050401
"RTN","LEX2052B",65,0)
 ;;43750^43880^2990101^3050401;;44005^44010^2990101^3050401;;44020^44120^2990101^3070101;;44125^44130^2990101^3010401
"RTN","LEX2052B",66,0)
 ;;44300^44394^2990101^3010401;;44602^44700^2990101^3030101;;44800^44850^2990101^3050401;;44900^44950^2990101^3050401
"RTN","LEX2052B",67,0)
 ;;45000^45915^2990101^3050401;;46030^46946^2990101^3070101;;47000^47000^2990101^3050401;;47010^47362^2990101^3070101
"RTN","LEX2052B",68,0)
 ;;47400^47530^2990101^3050401;;47600^47900^2990101^3050401;;48000^48180^2990101^3050401;;48500^48556^2990101^3050401
"RTN","LEX2052B",69,0)
 ;;49400^49566^2990101^3050401;;49900^49900^2990101^3030101;;49906^49906^2990101^3050401;;50551^51720^2990101^3010401
"RTN","LEX2052B",70,0)
 ;;51800^53852^2990101^3070101;;54000^54235^2990101^3050401;;55600^55865^2990101^3030101;;55970^56363^2990101^3010401
"RTN","LEX2052B",71,0)
 ;;56405^56605^2990101^3030101;;58600^58605^2990101^3050401;;58700^58976^2990101^3050401;;59000^59015^2990101^3050401
"RTN","LEX2052B",72,0)
 ;;59030^59030^2990101^3050401;;59100^59350^2990101^3050401;;59409^59409^2990101^3050401;;59414^59414^2990101^3050401
"RTN","LEX2052B",73,0)
 ;;59514^59514^2990101^3050401;;59612^59612^2990101^3050401;;59620^59620^2990101^3050401;;59812^59871^2990101^3050401
"RTN","LEX2052B",74,0)
 ;;60000^60505^2990101^3050401;;6005F^6005F^2990101^3050401;;61000^61105^2990101^3050401;;61108^61120^2990101^3030101
"RTN","LEX2052B",75,0)
 ;;61140^61156^2990101^3030101;;61215^61608^2990101^3030101;;61613^61711^2990101^3030101;;61720^61793^2990101^3030101
"RTN","LEX2052B",76,0)
 ;;61850^62282^2990101^3030101;;62287^63030^2990101^3030101;;63040^63047^2990101^3030101;;63055^63056^2990101^3050401
"RTN","LEX2052B",77,0)
 ;;63064^63064^2990101^3070101;;63075^63075^2990101^3070101;;63077^63077^2990101^3070101;;63081^63081^2990101^3070101
"RTN","LEX2052B",78,0)
 ;;63085^63085^2990101^3070101;;63087^63087^2990101^3070101;;63090^63090^2990101^3070101;;63170^63307^2990101^3050401
"RTN","LEX2052B",79,0)
 ;;63600^63688^2990101^3030101;;63700^64442^2990101^3010401;;64505^64530^2990101^3050401;;64553^64622^2990101^3050401
"RTN","LEX2052B",80,0)
 ;;64630^64726^2990101^3070101;;64732^64776^2990101^3070101;;64782^64782^2990101^3070101;;64784^64786^2990101^3070101
"RTN","LEX2052B",81,0)
 ;;64788^64820^2990101^3070101;;64831^64831^2990101^3070101;;64834^64836^2990101^3070101;;64840^64858^2990101^3070101
"RTN","LEX2052B",82,0)
 ;;64861^64870^2990101^3070101;;64885^64898^2990101^3070101;;64905^64907^2990101^3050401;;65091^66986^2990101^3050401
"RTN","LEX2052B",83,0)
 ;;67005^67255^2990101^3070101;;67311^67318^2990101^3050401;;67343^67350^2990101^3050401;;67400^67570^2990101^3050401
"RTN","LEX2052B",84,0)
 ;;67700^67975^2990101^3050401;;68020^68362^2990101^3050401;;68400^68850^2990101^3050401;;69000^69320^2990101^3050401
"RTN","LEX2052B",85,0)
 ;;69400^69745^2990101^3050401;;69801^69930^2990101^3050401;;69950^69970^2990101^3050401;;78306^78315^2990101^3070101
"RTN","LEX2052B",86,0)
 ;;78802^78802^2990101^3070101;;78806^78806^2990101^3070101;;90780^90780^2990101^3070101;;90782^90788^2990101^3050401
"RTN","LEX2052B",87,0)
 ;;90870^90871^2990101^3050401;;90935^90947^2990101^3050401;;90997^90997^2990101^3050401;;91000^91122^2990101^3070101
"RTN","LEX2052B",88,0)
 ;;92015^92287^2990101^3050401;;92502^92546^2990101^3030101;;92548^92598^2990101^3030101;;92950^92977^2990101^3030101
"RTN","LEX2052B",89,0)
 ;;92980^92980^2990101^3070101;;92982^92982^2990101^3070101;;92986^92995^2990101^3070101;;92997^92997^2990101^3070101
"RTN","LEX2052B",90,0)
 ;;93000^93350^2990101^3030101;;93561^93622^2990101^3070101;;93720^93790^2990101^3030101;;93875^94772^2990101^3030101
"RTN","LEX2052B",91,0)
 ;;95004^95180^2990101^3050401;;95805^95875^2990101^3030101;;95921^95961^2990101^3070101;;95970^95972^2990101^3070101
"RTN","LEX2052B",92,0)
 ;;95974^95974^2990101^3070101;;96100^96410^2990101^3070101;;96414^96422^2990101^3070101;;96425^96450^2990101^3050401
"RTN","LEX2052B",93,0)
 ;;96542^96542^2990101^3050401;;97150^97260^2990101^3010401;;97504^97520^2990101^3030101;;97530^97530^2990101^3030101
"RTN","LEX2052B",94,0)
 ;;97542^97545^2990101^3050401;;97703^97770^2990101^3030101;;98925^98929^2990101^3050401;;99175^99186^2990101^3050401
"RTN","LEX2052B",95,0)
 ;;99195^99195^2990101^3050401
"RTN","LEX2052B",96,0)
 ;;
"RTN","LEX2052C")
0^5^B21185674
"RTN","LEX2052C",1,0)
LEX2052C ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052C",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052C",3,0)
 ;            
"RTN","LEX2052C",4,0)
 ; Global Variables
"RTN","LEX2052C",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052C",6,0)
 ;            
"RTN","LEX2052C",7,0)
 ; External References
"RTN","LEX2052C",8,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052C",9,0)
 ;    $$FMTE^XLFDT  DBIA  10103
"RTN","LEX2052C",10,0)
 ;            
"RTN","LEX2052C",11,0)
 ; Variables NEWed or KILLed in LEX2052A
"RTN","LEX2052C",12,0)
 ;    TCINA         Total CPT Inactivated
"RTN","LEX2052C",13,0)
 ;    THINA         Total HCPCS Inactivated
"RTN","LEX2052C",14,0)
 ;    UPDATE        Flag to Update file 81.3
"RTN","LEX2052C",15,0)
 ;            
"RTN","LEX2052C",16,0)
 Q
"RTN","LEX2052C",17,0)
EN ; Main Entry Point - Jan 1, 2000/2001/2002
"RTN","LEX2052C",18,0)
 N I,TXT S TXT="" F I=1:1 D  Q:'$L(TXT)
"RTN","LEX2052C",19,0)
 . N ENT,EXEC,SEG S TXT="" S EXEC="S TXT=$T(PAIRS+"_I_")" X EXEC S TXT=$$TM(TXT," "),TXT=$$TM(TXT,";") Q:'$L(TXT)
"RTN","LEX2052C",20,0)
 . F ENT=1:1 S SEG=$P(TXT,";;",ENT)  Q:'$L(SEG)  D
"RTN","LEX2052C",21,0)
 . . N BEG,DA,DIK,EFF,END,IEN,INA,LST,ND,NDD,TDT,TOT S (TDT,ND,NDD)=""
"RTN","LEX2052C",22,0)
 . . S BEG=$P(SEG,"^",1),END=$P(SEG,"^",2),EFF=$P(SEG,"^",3),INA=$P(SEG,"^",4)
"RTN","LEX2052C",23,0)
 . . I $L(BEG)=7,'$L(END) S:BEG?7N TDT=$TR($$FMTE^XLFDT(BEG,"5DZ"),"@"," ") S:$L(TDT) TDT="       "_TDT
"RTN","LEX2052C",24,0)
 . . Q:'$D(UPDATE)  S:$L(BEG)=5&($L(END)=5)&($L(EFF)=7)&($L(INA)=7) NDD=BEG_"^"_END_"^"_EFF_"^"_INA
"RTN","LEX2052C",25,0)
 . . S DA(1)=$O(^DIC(81.3,"B",51,0)) Q:+DA(1)'>0  Q:'$D(^DIC(81.3,DA(1),10,0))
"RTN","LEX2052C",26,0)
 . . S DA=$O(^DIC(81.3,DA(1),10," "),-1),DA=DA+1 Q:$D(^DIC(81.3,DA(1),10,DA))
"RTN","LEX2052C",27,0)
 . . S ND="^DIC(81.3,"_DA(1)_",10,"_DA_",0)" Q:'$L(NDD)  S DIK="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052C",28,0)
 . . S @ND=NDD D IX1^DIK S:$E(BEG,1)?1N TCINA=+($G(TCINA))+1 S:$E(BEG,1)?1U THINA=+($G(THINA))+1
"RTN","LEX2052C",29,0)
 . . S IEN=0,(TOT,LST)="" F  S IEN=$O(^DIC(81.3,DA(1),10,IEN)) Q:+IEN=0  S TOT=+($G(TOT))+1,LST=+($G(IEN))
"RTN","LEX2052C",30,0)
 . . S ^DIC(81.3,DA(1),10,0)="^81.32A^^0" S:+($G(TOT))>0&(+($G(LST))>0) ^DIC(81.3,DA(1),10,0)="^81.32A^"_+($G(LST))_"^"_+($G(TOT))
"RTN","LEX2052C",31,0)
 Q
"RTN","LEX2052C",32,0)
TM(X,C) ; Trim Character C
"RTN","LEX2052C",33,0)
 S X=$G(X),C=$E($G(C),1) Q:$L(C)'=1 X  F  Q:$E(X,1)'=C  S X=$E(X,2,$L(X))
"RTN","LEX2052C",34,0)
 F  Q:$E(X,$L(X))'=C  S X=$E(X,1,($L(X)-1))
"RTN","LEX2052C",35,0)
 Q X
"RTN","LEX2052C",36,0)
PAIRS ; Inactive CPT Code pairing for Modifier 51
"RTN","LEX2052C",37,0)
 ;;3000101
"RTN","LEX2052C",38,0)
 ;;32520^32997^3000101^3050401;;33968^33978^3000101^3070101;;39501^39561^3000101^3050401;;43020^43280^3000101^3050401
"RTN","LEX2052C",39,0)
 ;;43638^43653^3000101^3050401;;44140^44202^3000101^3070101;;44960^44970^3000101^3050401;;47552^47570^3000101^3050401
"RTN","LEX2052C",40,0)
 ;;49000^49323^3000101^3050401;;49570^49651^3000101^3050401;;50010^50548^3000101^3050401;;54300^54692^3000101^3030101
"RTN","LEX2052C",41,0)
 ;;54700^55550^3000101^3050401;;56620^58563^3000101^3030101;;58615^58673^3000101^3050401;;60520^60650^3000101^3050401
"RTN","LEX2052C",42,0)
 ;;64445^64470^3000101^3030101;;64475^64475^3000101^3070101;;64479^64479^3000101^3070101;;64483^64483^3000101^3070101
"RTN","LEX2052C",43,0)
 ;;64626^64626^3000101^3070101
"RTN","LEX2052C",44,0)
 ;;3010101
"RTN","LEX2052C",45,0)
 ;;13160^13160^3010101^3030101;;14000^15000^3010101^3030101;;15342^15342^3010101^3070101;;16000^16035^3010101^3050401
"RTN","LEX2052C",46,0)
 ;;34001^34804^3010101^3050401;;34812^34812^3010101^3070101;;34820^34820^3010101^3070101;;34830^35381^3010101^3070101
"RTN","LEX2052C",47,0)
 ;;44125^44136^3010101^3030101;;44300^44397^3010101^3050401;;50551^50948^3010101^3050401;;50951^51797^3010101^3030101
"RTN","LEX2052C",48,0)
 ;;55873^55873^3010101^3050401;;85095^85095^3010101^3030101;;85102^85102^3010101^3030101;;88170^88171^3010101^3030101
"RTN","LEX2052C",49,0)
 ;;91132^91133^3010101^3050401;;93536^93536^3010101^3030101;;96900^96913^3010101^3030101
"RTN","LEX2052C",50,0)
 ;;3020101
"RTN","LEX2052C",51,0)
 ;;0001T^0002T^3020101^3030101;;0005T^0005T^3020101^3050401;;0008T^0008T^3020101^3040401;;0009T^0009T^3020101^3040401
"RTN","LEX2052C",52,0)
 ;;0012T^0013T^3020101^3050401;;0014T^0014T^3020101^3050401;;0016T^0016T^3020101^3050401;;0017T^0018T^3020101^3040401
"RTN","LEX2052C",53,0)
 ;;0019T^0020T^3020101^3050401;;0024T^0024T^3020101^3050401;;0025T^0025T^3020101^3040401;;10021^11000^3020101^3050401
"RTN","LEX2052C",54,0)
 ;;1002F^1039F^3020101^3050401;;29800^29902^3020101^3030101;;33967^33980^3020101^3050401;;34820^34825^3020101^3070101
"RTN","LEX2052C",55,0)
 ;;35501^35587^3020101^3030101;;35601^35671^3020101^3070101;;36420^36481^3020101^3030101;;36493^36600^3020101^3030101
"RTN","LEX2052C",56,0)
 ;;36625^36640^3020101^3070101;;36680^37181^3020101^3030101;;38115^38120^3020101^3050401;;38200^38220^3020101^3030101
"RTN","LEX2052C",57,0)
 ;;38230^38241^3020101^3030101;;38300^38572^3020101^3030101;;38700^38745^3020101^3050401;;44204^44205^3020101^3030101
"RTN","LEX2052C",58,0)
 ;;46020^46946^3020101^3050401;;47010^47371^3020101^3050401;;47380^47382^3020101^3050401;;51800^53853^3020101^3030101
"RTN","LEX2052C",59,0)
 ;;55970^55980^3020101^3030101;;63700^64435^3020101^3030101;;64788^64831^3020101^3070101;;67005^67221^3020101^3070101
"RTN","LEX2052C",60,0)
 ;;67227^67255^3020101^3050401;;78306^78320^3020101^3050401;;78802^78803^3020101^3050401;;78806^78807^3020101^3050401
"RTN","LEX2052C",61,0)
 ;;91000^91000^3020101^3050401;;91052^91055^3020101^3050401;;91100^91105^3020101^3050401;;93561^93562^3020101^3070101
"RTN","LEX2052C",62,0)
 ;;93701^93701^3020101^3030101;;95250^95250^3020101^3030101;;95965^95966^3020101^3070101;;96000^96410^3020101^3050401
"RTN","LEX2052C",63,0)
 ;;96567^96567^3020101^3050401;;97601^97602^3020101^3030101;;99551^99569^3020101^3030101
"RTN","LEX2052C",64,0)
 ;;
"RTN","LEX2052D")
0^6^B54625889
"RTN","LEX2052D",1,0)
LEX2052D ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052D",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052D",3,0)
 ;            
"RTN","LEX2052D",4,0)
 ; Global Variables
"RTN","LEX2052D",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052D",6,0)
 ;            
"RTN","LEX2052D",7,0)
 ; External References
"RTN","LEX2052D",8,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052D",9,0)
 ;    $$FMTE^XLFDT  DBIA  10103
"RTN","LEX2052D",10,0)
 ;            
"RTN","LEX2052D",11,0)
 ; Variables NEWed or KILLed in LEX2052A
"RTN","LEX2052D",12,0)
 ;    TCINA         Total CPT Inactivated
"RTN","LEX2052D",13,0)
 ;    THINA         Total HCPCS Inactivated
"RTN","LEX2052D",14,0)
 ;    UPDATE        Flag to Update file 81.3
"RTN","LEX2052D",15,0)
 ;            
"RTN","LEX2052D",16,0)
 Q
"RTN","LEX2052D",17,0)
EN ; Main Entry Point - Jan 1, 2003/2004/2005
"RTN","LEX2052D",18,0)
 N I,TXT S TXT="" F I=1:1 D  Q:'$L(TXT)
"RTN","LEX2052D",19,0)
 . N ENT,EXEC,SEG S TXT="" S EXEC="S TXT=$T(PAIRS+"_I_")" X EXEC S TXT=$$TM(TXT," "),TXT=$$TM(TXT,";") Q:'$L(TXT)
"RTN","LEX2052D",20,0)
 . F ENT=1:1 S SEG=$P(TXT,";;",ENT)  Q:'$L(SEG)  D
"RTN","LEX2052D",21,0)
 . . N BEG,DA,DIK,EFF,END,IEN,INA,LST,ND,NDD,TDT,TOT S (TDT,ND,NDD)=""
"RTN","LEX2052D",22,0)
 . . S BEG=$P(SEG,"^",1),END=$P(SEG,"^",2),EFF=$P(SEG,"^",3),INA=$P(SEG,"^",4)
"RTN","LEX2052D",23,0)
 . . I $L(BEG)=7,'$L(END) S:BEG?7N TDT=$TR($$FMTE^XLFDT(BEG,"5DZ"),"@"," ") S:$L(TDT) TDT="       "_TDT
"RTN","LEX2052D",24,0)
 . . Q:'$D(UPDATE)  S:$L(BEG)=5&($L(END)=5)&($L(EFF)=7)&($L(INA)=7) NDD=BEG_"^"_END_"^"_EFF_"^"_INA
"RTN","LEX2052D",25,0)
 . . S DA(1)=$O(^DIC(81.3,"B",51,0)) Q:+DA(1)'>0  Q:'$D(^DIC(81.3,DA(1),10,0))
"RTN","LEX2052D",26,0)
 . . S DA=$O(^DIC(81.3,DA(1),10," "),-1),DA=DA+1 Q:$D(^DIC(81.3,DA(1),10,DA))
"RTN","LEX2052D",27,0)
 . . S ND="^DIC(81.3,"_DA(1)_",10,"_DA_",0)" Q:'$L(NDD)  S DIK="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052D",28,0)
 . . S @ND=NDD D IX1^DIK S:$E(BEG,1)?1N TCINA=+($G(TCINA))+1 S:$E(BEG,1)?1U THINA=+($G(THINA))+1
"RTN","LEX2052D",29,0)
 . . S IEN=0,(TOT,LST)="" F  S IEN=$O(^DIC(81.3,DA(1),10,IEN)) Q:+IEN=0  S TOT=+($G(TOT))+1,LST=+($G(IEN))
"RTN","LEX2052D",30,0)
 . . S ^DIC(81.3,DA(1),10,0)="^81.32A^^0" S:+($G(TOT))>0&(+($G(LST))>0) ^DIC(81.3,DA(1),10,0)="^81.32A^"_+($G(LST))_"^"_+($G(TOT))
"RTN","LEX2052D",31,0)
 Q
"RTN","LEX2052D",32,0)
TM(X,C) ; Trim Character C
"RTN","LEX2052D",33,0)
 S X=$G(X),C=$E($G(C),1) Q:$L(C)'=1 X  F  Q:$E(X,1)'=C  S X=$E(X,2,$L(X))
"RTN","LEX2052D",34,0)
 F  Q:$E(X,$L(X))'=C  S X=$E(X,1,($L(X)-1))
"RTN","LEX2052D",35,0)
 Q X
"RTN","LEX2052D",36,0)
PAIRS ; Inactive CPT Code pairing for Modifier 51
"RTN","LEX2052D",37,0)
 ;;3030101
"RTN","LEX2052D",38,0)
 ;;0001T^0001T^3030101^3050401;;0002T^0002T^3030101^3040401;;0012T^0013T^3030101^3040401;;0019T^0020T^3030101^3040401
"RTN","LEX2052D",39,0)
 ;;0027T^0027T^3030101^3050401;;0033T^0034T^3030101^3040401;;0035T^0036T^3030101^3040401;;0043T^0044T^3030101^3040401
"RTN","LEX2052D",40,0)
 ;;13160^15000^3030101^3070101;;21010^21040^3030101^3050401;;21044^21070^3030101^3050401;;22505^22521^3030101^3070101
"RTN","LEX2052D",41,0)
 ;;22548^22558^3030101^3070101;;26130^26580^3030101^3050401;;26587^26596^3030101^3050401;;26600^26860^3030101^3050401
"RTN","LEX2052D",42,0)
 ;;29800^29807^3030101^3050401;;29819^29902^3030101^3050401;;33010^33140^3030101^3050401;;33200^33224^3030101^3070101
"RTN","LEX2052D",43,0)
 ;;33226^33506^3030101^3070101;;33510^33516^3030101^3070101;;33930^33960^3030101^3070101;;35501^35571^3030101^3070101
"RTN","LEX2052D",44,0)
 ;;35582^35587^3030101^3050401;;36416^36481^3030101^3050401;;36493^36516^3030101^3040401;;36522^36600^3030101^3050401
"RTN","LEX2052D",45,0)
 ;;36680^37183^3030101^3050401;;37500^37500^3030101^3050401;;38200^38200^3030101^3050401;;38205^38206^3030101^3050401
"RTN","LEX2052D",46,0)
 ;;38220^38220^3030101^3050401;;38230^38230^3030101^3050401;;38240^38572^3030101^3050401;;44125^44127^3030101^3070101
"RTN","LEX2052D",47,0)
 ;;44130^44136^3030101^3070101;;44204^44208^3030101^3050401;;44210^44212^3030101^3050401;;44602^44701^3030101^3040401
"RTN","LEX2052D",48,0)
 ;;49900^49904^3030101^3050401;;50951^53442^3030101^3040401;;53444^53665^3030101^3050401;;53850^53853^3030101^3050401
"RTN","LEX2052D",49,0)
 ;;54300^54401^3030101^3050401;;54405^54406^3030101^3050401;;54408^54408^3030101^3050401;;54410^54505^3030101^3050401
"RTN","LEX2052D",50,0)
 ;;54512^54692^3030101^3050401;;55600^55866^3030101^3050401;;55970^56605^3030101^3050401;;56620^58550^3030101^3050401
"RTN","LEX2052D",51,0)
 ;;58552^58563^3030101^3050401;;61108^61156^3030101^3070101;;61215^61315^3030101^3070101;;61320^61516^3030101^3070101
"RTN","LEX2052D",52,0)
 ;;61518^61608^3030101^3070101;;61613^61793^3030101^3070101;;61850^62147^3030101^3050401;;62163^62282^3030101^3050401
"RTN","LEX2052D",53,0)
 ;;62287^63030^3030101^3070101;;63040^63042^3030101^3070101;;63045^63047^3030101^3070101;;63600^64470^3030101^3070101
"RTN","LEX2052D",54,0)
 ;;92502^92520^3030101^3050401;;92526^92546^3030101^3050401;;92548^92597^3030101^3050401;;92601^92606^3030101^3050401
"RTN","LEX2052D",55,0)
 ;;92609^92617^3030101^3050401;;92950^92971^3030101^3050401;;92975^92977^3030101^3070101;;93000^93318^3030101^3070101
"RTN","LEX2052D",56,0)
 ;;93350^93350^3030101^3070101;;93580^93581^3030101^3070101;;93701^93736^3030101^3050401;;93740^93790^3030101^3050401
"RTN","LEX2052D",57,0)
 ;;93875^94642^3030101^3050401;;94656^94664^3030101^3050401;;94667^94772^3030101^3050401;;95250^95875^3030101^3050401
"RTN","LEX2052D",58,0)
 ;;96900^96922^3030101^3050401;;97504^97530^3030101^3050401;;97601^97750^3030101^3050401;;99551^99568^3030101^3040401
"RTN","LEX2052D",59,0)
 ;;3040101
"RTN","LEX2052D",60,0)
 ;;0008T^0009T^3040101^3050401;;0017T^0018T^3040101^3050401;;0033T^0034T^3040101^3050401;;0035T^0036T^3040101^3050401
"RTN","LEX2052D",61,0)
 ;;0043T^0044T^3040101^3050401;;0048T^0049T^3040101^3050401;;0050T^0051T^3040101^3050401;;0052T^0052T^3040101^3050401
"RTN","LEX2052D",62,0)
 ;;0053T^0053T^3040101^3050401;;36500^36516^3040101^3050401;;50951^52334^3040101^3050401;;52341^53442^3040101^3050401
"RTN","LEX2052D",63,0)
 ;;75894^75894^3040101^3050401;;99601^99601^3040101^3050401
"RTN","LEX2052D",64,0)
 ;;3050101
"RTN","LEX2052D",65,0)
 ;;00100^00104^3050101^3070101;;00120^00164^3050101^3070101;;0012F^0014T^3050101^3070101;;00170^00176^3050101^3070101
"RTN","LEX2052D",66,0)
 ;;00190^00192^3050101^3070101;;00210^00218^3050101^3070101;;00220^00222^3050101^3070101;;00300^00300^3050101^3070101
"RTN","LEX2052D",67,0)
 ;;00320^00326^3050101^3070101;;00350^00352^3050101^3070101;;00400^00406^3050101^3070101;;00410^00410^3050101^3070101
"RTN","LEX2052D",68,0)
 ;;00450^00454^3050101^3070101;;00470^00474^3050101^3070101;;00500^00500^3050101^3070101;;00520^00529^3050101^3070101
"RTN","LEX2052D",69,0)
 ;;00530^00539^3050101^3070101;;00540^00548^3050101^3070101;;00550^00550^3050101^3070101;;00560^00566^3050101^3070101
"RTN","LEX2052D",70,0)
 ;;00580^00580^3050101^3070101;;00600^00604^3050101^3070101;;00620^00622^3050101^3070101;;00630^00635^3050101^3070101
"RTN","LEX2052D",71,0)
 ;;00640^00640^3050101^3070101;;00670^00670^3050101^3070101;;00700^00702^3050101^3070101;;00730^00730^3050101^3070101
"RTN","LEX2052D",72,0)
 ;;00740^00740^3050101^3070101;;00750^00756^3050101^3070101;;00770^00770^3050101^3070101;;00790^00797^3050101^3070101
"RTN","LEX2052D",73,0)
 ;;00800^00802^3050101^3070101;;00810^00810^3050101^3070101;;00820^00820^3050101^3070101;;00830^00836^3050101^3070101
"RTN","LEX2052D",74,0)
 ;;00840^00848^3050101^3070101;;00851^00851^3050101^3070101;;00860^00868^3050101^3070101;;00870^00873^3050101^3070101
"RTN","LEX2052D",75,0)
 ;;00880^00882^3050101^3070101;;00902^01952^3050101^3070101;;0090T^0161T^3050101^3070101;;01958^01967^3050101^3070101
"RTN","LEX2052D",76,0)
 ;;01990^01996^3050101^3070101;;10021^10022^3050101^3070101;;10040^11000^3050101^3070101;;11004^11006^3050101^3070101
"RTN","LEX2052D",77,0)
 ;;15788^16035^3050101^3070101;;17340^19000^3050101^3070101;;19296^19296^3050101^3070101;;19298^19330^3050101^3070101
"RTN","LEX2052D",78,0)
 ;;19342^20005^3050101^3070101;;20100^20650^3050101^3070101;;20979^22102^3050101^3070101;;22532^22533^3050101^3070101
"RTN","LEX2052D",79,0)
 ;;22852^26123^3050101^3070101;;26130^26860^3050101^3070101;;26910^27357^3050101^3070101;;27360^27691^3050101^3070101
"RTN","LEX2052D",80,0)
 ;;27695^31420^3050101^3070101;;31502^31615^3050101^3070101;;31622^31631^3050101^3070101;;31635^31830^3050101^3070101
"RTN","LEX2052D",81,0)
 ;;32005^32019^3050101^3070101;;32520^33140^3050101^3070101;;33967^34805^3050101^3070101;;35583^35587^3050101^3070101
"RTN","LEX2052D",82,0)
 ;;36260^36475^3050101^3070101;;36478^36478^3050101^3070101;;36481^36600^3050101^3070101;;36680^37205^3050101^3070101
"RTN","LEX2052D",83,0)
 ;;37209^37216^3050101^3070101;;37500^38101^3050101^3070101;;38115^38745^3050101^3070101;;38794^39561^3050101^3070101
"RTN","LEX2052D",84,0)
 ;;40490^41113^3050101^3070101;;41115^43634^3050101^3070101;;43638^44010^3050101^3070101;;44204^44397^3050101^3070101
"RTN","LEX2052D",85,0)
 ;;44715^44715^3050101^3070101;;44800^44950^3050101^3070101;;44960^47000^3050101^3070101;;47010^47145^3050101^3070101
"RTN","LEX2052D",86,0)
 ;;47300^47530^3050101^3070101;;47552^48180^3050101^3070101;;48500^49566^3050101^3070101;;49570^49904^3050101^3070101
"RTN","LEX2052D",87,0)
 ;;49906^50325^3050101^3070101;;50340^56605^3050101^3070101;;56620^57265^3050101^3070101;;57268^58605^3050101^3070101
"RTN","LEX2052D",88,0)
 ;;58615^59515^3050101^3070101;;59610^60505^3050101^3070101;;60520^61105^3050101^3070101;;61850^61863^3050101^3070101
"RTN","LEX2052D",89,0)
 ;;61867^61867^3050101^3070101;;61870^62147^3050101^3070101;;62161^62282^3050101^3070101;;63050^63056^3050101^3070101
"RTN","LEX2052D",90,0)
 ;;63101^63102^3050101^3070101;;63170^63290^3050101^3070101;;63300^63307^3050101^3070101;;64505^64622^3050101^3070101
"RTN","LEX2052D",91,0)
 ;;64905^66986^3050101^3070101;;67227^67318^3050101^3070101;;67343^69970^3050101^3070101;;70010^74300^3050101^3070101
"RTN","LEX2052D",92,0)
 ;;74305^75756^3050101^3070101;;75790^75945^3050101^3070101;;75952^75962^3050101^3070101;;75966^75966^3050101^3070101
"RTN","LEX2052D",93,0)
 ;;75970^75992^3050101^3070101;;75994^75995^3050101^3070101;;76000^76080^3050101^3070101;;76086^76120^3050101^3070101
"RTN","LEX2052D",94,0)
 ;;76140^76150^3050101^3070101;;76355^76801^3050101^3070101;;76805^76805^3050101^3070101;;76811^76811^3050101^3070101
"RTN","LEX2052D",95,0)
 ;;76815^76936^3050101^3070101;;76940^78018^3050101^3070101;;78070^78473^3050101^3070101;;78481^78494^3050101^3070101
"RTN","LEX2052D",96,0)
 ;;78580^78816^3050101^3070101;;79005^79445^3050101^3070101;;90782^92546^3050101^3070101;;92548^92607^3050101^3070101
"RTN","LEX2052D",97,0)
 ;;92609^92620^3050101^3070101;;92625^92971^3050101^3070101;;93668^95875^3050101^3070101;;95978^95978^3050101^3070101
"RTN","LEX2052D",98,0)
 ;;95990^96410^3050101^3070101;;96425^96567^3050101^3070101;;96900^97545^3050101^3070101;;97597^99027^3050101^3070101
"RTN","LEX2052D",99,0)
 ;;99070^99091^3050101^3070101;;99170^99289^3050101^3070101;;99291^99291^3050101^3070101;;99293^99350^3050101^3070101
"RTN","LEX2052D",100,0)
 ;;99359^99512^3050101^3070101
"RTN","LEX2052D",101,0)
 ;;
"RTN","LEX2052E")
0^7^B44536375
"RTN","LEX2052E",1,0)
LEX2052E ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052E",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052E",3,0)
 ;            
"RTN","LEX2052E",4,0)
 ; Global Variables
"RTN","LEX2052E",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052E",6,0)
 ;    ^ICPT(        DBIA   4489
"RTN","LEX2052E",7,0)
 ;            
"RTN","LEX2052E",8,0)
 ; External References
"RTN","LEX2052E",9,0)
 ;    FILE^DIE      DBIA   2053
"RTN","LEX2052E",10,0)
 ;    UPDATE^DIE    DBIA   2053
"RTN","LEX2052E",11,0)
 ;    ^DIK          DBIA  10013
"RTN","LEX2052E",12,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052E",13,0)
 ;    $$IENS^DILF   DBIA   2054
"RTN","LEX2052E",14,0)
 ;    MES^XPDUTL    DBIA  10141
"RTN","LEX2052E",15,0)
 ;            
"RTN","LEX2052E",16,0)
 Q
"RTN","LEX2052E",17,0)
EN ; Main Entry Point
"RTN","LEX2052E",18,0)
 D IND(" "),C1,C2,C3,C4,C5,C6,C7,C8,C9,C10
"RTN","LEX2052E",19,0)
 Q
"RTN","LEX2052E",20,0)
C1 ;   131737 Add ICD Code 238.71 for 'Thrombocytosis'
"RTN","LEX2052E",21,0)
 D REMI("Add ICD Code 238.71 for 'Thrombocytosis'","HD0000000 131737")
"RTN","LEX2052E",22,0)
 N DA,DIK S DA=126188,DIK="^LEX(757.02," Q:$D(^LEX(757.02,DA,0))
"RTN","LEX2052E",23,0)
 S ^LEX(757.02,DA,0)="118996^238.71^1^24579^0^^1"
"RTN","LEX2052E",24,0)
 S ^LEX(757.02,DA,4,0)="^757.28D^1^1"
"RTN","LEX2052E",25,0)
 S ^LEX(757.02,DA,4,1,0)="3061001^1"
"RTN","LEX2052E",26,0)
 D IX1^DIK
"RTN","LEX2052E",27,0)
 Q
"RTN","LEX2052E",28,0)
C2 ;   137320 CPT 32002 Thoracentesis w/Insert Tube
"RTN","LEX2052E",29,0)
 D REMI("CPT 32002 Thoracentesis w/Insert Tube","HD0000000 137320")
"RTN","LEX2052E",30,0)
 N DA,DIE,DIK,EFF,EXIST,FLAGS,FDA,IEN,IENE,IENS,TXT,MSG K FDA,IENS,IEN,DA,DIK S IEN=$O(^ICPT("BA","32002 ",0)) Q:IEN'>0  S IENS=IEN_","
"RTN","LEX2052E",31,0)
 S TXT="THORACENTESIS W/INSERT TUBE",EFF=3070101,FDA(81,IENS,2)=TXT D FILE^DIE("","FDA") S DA=IEN,DIK="^ICPT(" D IX1^DIK
"RTN","LEX2052E",32,0)
 S EXIST=$O(^ICPT(32002,61,"B",EFF,0)) S:+EXIST>0 EXIST=$S($P($G(^ICPT(32002,61,+EXIST,0)),"^",2)[TXT:1,1:0) Q:+($G(EXIST))>0
"RTN","LEX2052E",33,0)
 K FDA,IENS,IEN,IENE,DA,DIK S FLAGS="S",IEN=32002,IENS=IEN_",",DA(1)=IEN,(DA,IENE)=+($O(^ICPT(32002,61," "),-1))+1
"RTN","LEX2052E",34,0)
 S IENS="+"_$$IENS^DILF(.DA),FDA(81.061,IENS,.01)=EFF,FDA(81.061,IENS,1)=TXT D UPDATE^DIE(FLAGS,"FDA",,"MSG")
"RTN","LEX2052E",35,0)
 Q
"RTN","LEX2052E",36,0)
C3 ;   163358 Modifiers UN,UP,UQ,UR & US with CPT 99499
"RTN","LEX2052E",37,0)
 D REMI("Modifiers UN,UP,UQ,UR & US with CPT 99499","HD0000000 163358")
"RTN","LEX2052E",38,0)
 N DA,DIE,DIK,EFF,EXIST,FLAGS,FDA,IEN,IENE,IENS,CODE,TXT,MSG K FDA,IENS,IEN,DA,DIK,MUN,MUP,MUQ,MUR,MUS
"RTN","LEX2052E",39,0)
 S CODE=99499,EFF=3070101,FLAGS="S",MUN=$O(^DIC(81.3,"B","UN",0)),MUP=$O(^DIC(81.3,"B","UP",0)),MUQ=$O(^DIC(81.3,"B","UQ",0))
"RTN","LEX2052E",40,0)
 S MUR=$O(^DIC(81.3,"B","UR",0)),MUS=$O(^DIC(81.3,"B","US",0)) F IEN=MUN,MUP,MUQ,MUR,MUS D
"RTN","LEX2052E",41,0)
 . I '$D(^DIC(81.3,IEN,10,"B",CODE)) D
"RTN","LEX2052E",42,0)
 . . K FDA,IENS,IENE S DA(1)=IEN,(DA,IENE)=+($O(^DIC(81.3,IEN,10," "),-1))+1 S IENS="+"_$$IENS^DILF(.DA)
"RTN","LEX2052E",43,0)
 . . S FDA(81.32,IENS,.01)=CODE,FDA(81.32,IENS,.02)=CODE,FDA(81.32,IENS,.03)=EFF D UPDATE^DIE(FLAGS,"FDA",,"MSG")
"RTN","LEX2052E",44,0)
 Q
"RTN","LEX2052E",45,0)
C4 ;   177452 Modifiers TC and 26 with CPT 77071
"RTN","LEX2052E",46,0)
 D REMI("Modifiers TC and 26 with CPT 77071","HD0000000 177452")
"RTN","LEX2052E",47,0)
 N DA,DIE,DIK,EFF,EXIST,FLAGS,FDA,IEN,IENE,IENS,CODE,OLD,TXT,MSG K FDA,IENS,IEN,DA,DIK,MTC,M26 S EFF=3070101
"RTN","LEX2052E",48,0)
 S MTC=$O(^DIC(81.3,"B","TC",0)),M26=$O(^DIC(81.3,"B","26",0)) F IEN=MTC,M26 D
"RTN","LEX2052E",49,0)
 . Q:+IEN'>0  K FDA,IENS,IENE,CODE S CODE=77072,DA(1)=IEN,(DA,IENE)=+($O(^DIC(81.3,IEN,10,"B",CODE,0))) I +DA>0 D
"RTN","LEX2052E",50,0)
 . . N DIK,CODE S DIK="^DIC(81.3,"_DA(1)_",10,",CODE=77071,IENS=$$IENS^DILF(.DA),FDA(81.32,IENS,.01)=CODE D FILE^DIE("","FDA")
"RTN","LEX2052E",51,0)
 Q
"RTN","LEX2052E",52,0)
C5 ;   183280 Modifier LT and RT with CPT 77055
"RTN","LEX2052E",53,0)
 D REMI("Modifier LT and RT with CPT 77055","HD0000000 183280")
"RTN","LEX2052E",54,0)
 N DA,DIE,DIK,EFF,EXIST,FLAGS,FDA,IEN,IENE,IENS,CODE,OLD,TXT,MSG K FDA,IENS,IEN,DA,DIK,MRT,MLT S CODE=77055,EFF=3070101,FLAGS="S"
"RTN","LEX2052E",55,0)
 S MRT=$O(^DIC(81.3,"B","RT",0)),MLT=$O(^DIC(81.3,"B","LT",0)) F IEN=MRT,MLT D
"RTN","LEX2052E",56,0)
 . Q:+IEN'>0  Q:'$D(^DIC(81.3,+IEN,0))  I '$D(^DIC(81.3,IEN,10,"B",CODE)) D
"RTN","LEX2052E",57,0)
 . . K FDA N IENE,DA S DA(1)=IEN,IENE=+($O(^DIC(81.3,IEN,10," "),-1))+1 Q:$D(^DIC(81.3,IENE,10))   S DA=IENE,IENS="+"_$$IENS^DILF(.DA)
"RTN","LEX2052E",58,0)
 . . S FDA(81.32,IENS,.01)=CODE,FDA(81.32,IENS,.02)=CODE,FDA(81.32,IENS,.03)=EFF D UPDATE^DIE(FLAGS,"FDA",,"MSG")
"RTN","LEX2052E",59,0)
 Q
"RTN","LEX2052E",60,0)
C6 ;   184174 Lexicon enhancements for Myelodysplasia
"RTN","LEX2052E",61,0)
 D REMI("Lexicon enhancements for Myelodysplasia","HD0000000 184174")
"RTN","LEX2052E",62,0)
 N IEN,DA,DIK S IEN=+($O(^LEX(757.05,"B","MYELODYSPLASIA",0))) S:+IEN'>0 IEN=+($O(^LEX(757.05,"B","Myelodysplasia",0)))
"RTN","LEX2052E",63,0)
 S:+IEN'>0 IEN=+($O(^LEX(757.05,"B","myelodysplasia",0))) Q:$G(^LEX(757.01,276588,0))'="Myelodysplastic Syndrome"
"RTN","LEX2052E",64,0)
 Q:$G(^LEX(757.01,334028,0))'="Low Grade Myelodysplastic Syndrome lesions"  Q:$G(^LEX(757.01,334029,0))'="High Grade Myelodysplastic Syndrome lesions"
"RTN","LEX2052E",65,0)
 Q:$G(^LEX(757.01,334030,0))'="Myelodysplastic Syndrome with 5Q deletion"  Q:$G(^LEX(757.01,334031,0))'="Myelodysplastic Syndrome, unspecified"
"RTN","LEX2052E",66,0)
 I +IEN>0 S DA=IEN,DIK="^LEX(757.05," D ^DIK
"RTN","LEX2052E",67,0)
 S IEN=+($O(^LEX(757.05," "),-1))+1 Q:+IEN'>1  S ^LEX(757.05,IEN,0)="MYELODYSPLASIA^MYELODYSPLASTIC^L"
"RTN","LEX2052E",68,0)
 S ^LEX(757.05,IEN,1,0)="^757.53P^6^6",^LEX(757.05,IEN,1,1,0)=276588,^LEX(757.05,IEN,1,2,0)=334028,^LEX(757.05,IEN,1,3,0)=334029
"RTN","LEX2052E",69,0)
 S ^LEX(757.05,IEN,1,4,0)=334030,^LEX(757.05,IEN,1,5,0)=334031,^LEX(757.05,IEN,1,6,0)=1
"RTN","LEX2052E",70,0)
 S DA=IEN,DIK="^LEX(757.05," D IX1^DIK F DA=276588,334028,334029,334030,334031 S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2052E",71,0)
 S DA=IEN,DIK="^LEX(757.05," D IX1^DIK
"RTN","LEX2052E",72,0)
 Q
"RTN","LEX2052E",73,0)
C7 ;   184273 Correct spelling of the word Vascular
"RTN","LEX2052E",74,0)
 D REMI("Correct the spelling of the word Vascular","HD0000000 184273")
"RTN","LEX2052E",75,0)
 N DA,DIE,DIK,EFF,EXIST,FLAGS,FDA,IEN,IENE,IENS,CODE,OLD,TXT,MSG K FDA,IENS,IEN,DA,DIK,TXT,IDX
"RTN","LEX2052E",76,0)
 S FLAGS="S",IDX="PERIPHERAL VASCUALAR DISEASE, UNSPECIFIED",TXT="Peripheral Vascular Disease, Unspecified"
"RTN","LEX2052E",77,0)
 S IEN=+($O(^LEX(757.01,"B",IDX,0))) Q:+IEN'>0  Q:$G(^LEX(757.01,IEN,0))'[" Vascualar "
"RTN","LEX2052E",78,0)
 S DA=+IEN,DIK="LEX(757.01,",IENS=$$IENS^DILF(.DA),FDA(757.01,IENS,.01)=TXT D FILE^DIE("","FDA")
"RTN","LEX2052E",79,0)
 S DA=IEN,DIK="LEX(757.01," D IX1^DIK
"RTN","LEX2052E",80,0)
 Q
"RTN","LEX2052E",81,0)
C8 ;   192950 Re-code "Elevation, blood pressure" to 796.2
"RTN","LEX2052E",82,0)
 D REMI("Re-code 'Elevation, blood pressure' to 796.2","HD0000000 192950")
"RTN","LEX2052E",83,0)
 N DA,DIE,DIK,EX,SO,FDA,IENS S EX=$O(^LEX(757.01,"B","ELEVATION, BLOOD PRESSURE",0)) Q:+EX'>0
"RTN","LEX2052E",84,0)
 Q:$O(^LEX(757.01,"B","ELEVATION, BLOOD PRESSURE"," "),-1)'=EX
"RTN","LEX2052E",85,0)
 S SO=0 F  S SO=$O(^LEX(757.02,"B",EX,SO)) Q:+SO'>0  D
"RTN","LEX2052E",86,0)
 . Q:$P($G(^LEX(757.02,SO,0)),"^",2)'="401.9"  S DA=+SO,DIK="LEX(757.02,",IENS=$$IENS^DILF(.DA)
"RTN","LEX2052E",87,0)
 . K FDA S FDA(757.02,IENS,1)="796.2",FDA(757.02,IENS,4)="0",FDA(757.02,IENS,6)="1"
"RTN","LEX2052E",88,0)
 . D FILE^DIE("","FDA") S DA=+SO,DIK="LEX(757.02," D IX1^DIK
"RTN","LEX2052E",89,0)
 Q
"RTN","LEX2052E",90,0)
C9 ;   193847 Code 259.0 incorrect for Hypogonadism
"RTN","LEX2052E",91,0)
 D REMI("Incorrect Code 259.0 for Hypogonadism","HD0000000 193847")
"RTN","LEX2052E",92,0)
 N DA,DIE,DIK,EX,SO,SOI,FDA,IENS S EX=60596,SO="",SOI=0
"RTN","LEX2052E",93,0)
 F  S SOI=$O(^LEX(757.02,"B",EX,SOI)) Q:+SOI=0  S:$P($G(^LEX(757.02,SOI,0)),"^",2)="259.0" SO=SOI
"RTN","LEX2052E",94,0)
 Q:+SO'>0  S DA=SO,DIK="^LEX(757.02," D ^DIK
"RTN","LEX2052E",95,0)
 Q
"RTN","LEX2052E",96,0)
C10 ;   Partially satisfied by this patch
"RTN","LEX2052E",97,0)
 ;     185482 CPT Modifier GC on Encounter Forms
"RTN","LEX2052E",98,0)
 ;     187712 Discontinue use of CPT Modifier GC
"RTN","LEX2052E",99,0)
 ;     168818 VHA DIRECTIVE 2006-045 - CPT Modifier GC
"RTN","LEX2052E",100,0)
 ;     178546 CPT Modifier GC being sent to CPRS
"RTN","LEX2052E",101,0)
 D IND(" "),IND("The following Remedy Tickets are partially satisfied by this ")
"RTN","LEX2052E",102,0)
 D IND("patch by inactivating all CPT Code pairs for CPT Modifier GC,  ")
"RTN","LEX2052E",103,0)
 D IND("effectively discontinuing the use of CPT Modifier GC in the VA."),IND(" ")
"RTN","LEX2052E",104,0)
 D REMI("   CPT Modifier GC on Encounter Forms    CPT 6.0 ","HD0000000 185482")
"RTN","LEX2052E",105,0)
 D REMI("   Discontinue use of Modifier GC        CPT 6.0 ","HD0000000 187712")
"RTN","LEX2052E",106,0)
 D REMI("   VHA DIRECTIVE 2006-045 - Modifier GC  IB 2.0  ","HD0000000 168818")
"RTN","LEX2052E",107,0)
 D REMI("   CPT Modifier GC being sent to CPRS    AICS 3.0","HD0000000 178546")
"RTN","LEX2052E",108,0)
 N MOD,EFF S EFF=3060101 S MOD="GC" N IEN S IEN=0 F  S IEN=$O(^DIC(81.3,"B",MOD,IEN)) Q:+IEN'>0  D
"RTN","LEX2052E",109,0)
 . N IENE S IENE=0 F  S IENE=$O(^DIC(81.3,IEN,10,IENE)) Q:+IENE'>0  D
"RTN","LEX2052E",110,0)
 . . N ND,INA S ND=$G(^DIC(81.3,IEN,10,IENE,0)),INA=$P(ND,"^",4) Q:INA?7N&(INA'>EFF)
"RTN","LEX2052E",111,0)
 . . K FDA,IENS S DA(1)=IEN,(DA,IENE)=IENE,IENS=$$IENS^DILF(.DA),FDA(81.32,IENS,.04)=EFF
"RTN","LEX2052E",112,0)
 . . D FILE^DIE("","FDA")
"RTN","LEX2052E",113,0)
 Q
"RTN","LEX2052E",114,0)
 ;                 
"RTN","LEX2052E",115,0)
 ; Miscellaneous
"RTN","LEX2052E",116,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2052E",117,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2052E",118,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2052E",119,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052E",120,0)
IND(X) ;   Indent Text
"RTN","LEX2052E",121,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052F")
0^8^B31135086
"RTN","LEX2052F",1,0)
LEX2052F ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052F",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052F",3,0)
 ;            
"RTN","LEX2052F",4,0)
 ; Global Variables
"RTN","LEX2052F",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052F",6,0)
 ;            
"RTN","LEX2052F",7,0)
 ; External References
"RTN","LEX2052F",8,0)
 ;    UPDATE^DIE    DBIA   2053
"RTN","LEX2052F",9,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052F",10,0)
 ;    $$IENS^DILF   DBIA   2054
"RTN","LEX2052F",11,0)
 ;    MES^XPDUTL    DBIA  10141
"RTN","LEX2052F",12,0)
 ;            
"RTN","LEX2052F",13,0)
 Q
"RTN","LEX2052F",14,0)
EN ;   196817 Adding Code Ranges to CPT Modifiers
"RTN","LEX2052F",15,0)
 ;            
"RTN","LEX2052F",16,0)
 S U="^" D IND("    "),REMI("Adding Code Ranges to CPT Modifiers 1A, 1B, 1C,","HD0000000 196817")
"RTN","LEX2052F",17,0)
 D IND("    1D, 1E, 1F, 1G, 1H, 1I, 1J, 2L, 2M, 2N, 2O,"),IND("    2Q, 2R, 2S, 2T, 3K, 4I, 4J, 4K, 4L, 4M, 4N,")
"RTN","LEX2052F",18,0)
 D IND("    4O, 6E, 6F, 7F, 8B, 8C, 9B, 9C, 9D, AE, AF,"),IND("    AG, AK, AQ, AR, CD, CE, CF, CR, J1, J2, J3,")
"RTN","LEX2052F",19,0)
 D IND("    KC, KG, KK, KL, 1D, 1E, 1F, 1G, 1H, 1I, 1J,"),IND("    2L, 2M, 2N, 2O, 2Q, QR, RD, SW, SY, UF, UG,")
"RTN","LEX2052F",20,0)
 D IND("    UH, UJ, and UK")
"RTN","LEX2052F",21,0)
 ;     KG, KK, and KL with
"RTN","LEX2052F",22,0)
 ;       A4000-A8999
"RTN","LEX2052F",23,0)
 ;       K0000-K9999 
"RTN","LEX2052F",24,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",25,0)
 S EFF=3070101,MODS="KG;KK;KL" F RAN="A4000^A8999","K0000^K9999" D MOD
"RTN","LEX2052F",26,0)
 ;     QR with
"RTN","LEX2052F",27,0)
 ;       99201-99499
"RTN","LEX2052F",28,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",29,0)
 S EFF=3070101,MODS="QR" S RAN="99201^99499" D MOD
"RTN","LEX2052F",30,0)
 ;     UF, UG, UH, UJ, UK with
"RTN","LEX2052F",31,0)
 ;       99201-99499
"RTN","LEX2052F",32,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",33,0)
 S EFF=3070101,MODS="UF;UG;UH;UJ;UK" S RAN="99201^99499" D MOD
"RTN","LEX2052F",34,0)
 ;     AE with
"RTN","LEX2052F",35,0)
 ;       B4150-B4162
"RTN","LEX2052F",36,0)
 ;       B9000-B9006
"RTN","LEX2052F",37,0)
 ;       B4164-B5200
"RTN","LEX2052F",38,0)
 ;       S9470-S9452
"RTN","LEX2052F",39,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",40,0)
 S EFF=3070101,MODS="AE" F RAN="B4150^B4162","B9000^B9006","B4164^B5200","S9452^S9452","S9470^S9470" D MOD
"RTN","LEX2052F",41,0)
 ;     AF, AG, AK, AR with
"RTN","LEX2052F",42,0)
 ;       10000-69999
"RTN","LEX2052F",43,0)
 ;       90200-99602
"RTN","LEX2052F",44,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",45,0)
 S EFF=3070101,MODS="AF;AG;AK;AR" F RAN="90200^99602","10000^69999" D MOD
"RTN","LEX2052F",46,0)
 ;     CD, CE, CF with
"RTN","LEX2052F",47,0)
 ;       99201-99499
"RTN","LEX2052F",48,0)
 ;       90918-90999
"RTN","LEX2052F",49,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",50,0)
 S EFF=3070101,MODS="CD;CE;CF" F RAN="90918^90999","99201^99499" D MOD
"RTN","LEX2052F",51,0)
 ;     KC with
"RTN","LEX2052F",52,0)
 ;       E1031-E8002
"RTN","LEX2052F",53,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",54,0)
 S EFF=3070101,MODS="KC" S RAN="E1031^E8002" D MOD
"RTN","LEX2052F",55,0)
 ;     RD with
"RTN","LEX2052F",56,0)
 ;       90465-90474
"RTN","LEX2052F",57,0)
 ;       90760-90779
"RTN","LEX2052F",58,0)
 ;       Q0035-Q0085
"RTN","LEX2052F",59,0)
 ;       Q2004-Q3026
"RTN","LEX2052F",60,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",61,0)
 S EFF=3070101,MODS="RD" F RAN="90465^90474","90760^90779","Q0035^Q0085","Q2004^Q3026" D MOD
"RTN","LEX2052F",62,0)
 ;     SW with
"RTN","LEX2052F",63,0)
 ;       G0246-G0247
"RTN","LEX2052F",64,0)
 ;       S9140-S9145
"RTN","LEX2052F",65,0)
 ;       S9460
"RTN","LEX2052F",66,0)
 ;       98960-98962
"RTN","LEX2052F",67,0)
 ;       99078 
"RTN","LEX2052F",68,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",69,0)
 S EFF=3070101,MODS="SW" F RAN="G0246^G0247","S9140^S9145","S9460^S9460","98960^98962","99078^99078" D MOD
"RTN","LEX2052F",70,0)
 ;     SY with
"RTN","LEX2052F",71,0)
 ;       99201-99499
"RTN","LEX2052F",72,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",73,0)
 S EFF=3070101,MODS="SY" S RAN="99201^99499" D MOD
"RTN","LEX2052F",74,0)
 ;     1A, 1B, 1C, 1D, 1E, 1F, 1G, 1H, 1I, 1J with
"RTN","LEX2052F",75,0)
 ;       99201-99499
"RTN","LEX2052F",76,0)
 ;       98960-98962
"RTN","LEX2052F",77,0)
 ;       80000-89346
"RTN","LEX2052F",78,0)
 ;       S3800
"RTN","LEX2052F",79,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",80,0)
 S EFF=3070101,MODS="1A;1B;1C;1D;1E;1F;1G;1H;1I;1J"
"RTN","LEX2052F",81,0)
 F RAN="99201^99499","98960^98962","80000^89346","S3800^S3800" D MOD
"RTN","LEX2052F",82,0)
 ;     2L, 2M, 2N, 2O, 2Q, 2R, 2S, 2T with
"RTN","LEX2052F",83,0)
 ;       99201-99499
"RTN","LEX2052F",84,0)
 ;       98960-98962
"RTN","LEX2052F",85,0)
 ;       80000-89346
"RTN","LEX2052F",86,0)
 ;       S3800
"RTN","LEX2052F",87,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",88,0)
 S EFF=3070101,MODS="2L;2M;2N;2O;2Q;2R;2S;2T"
"RTN","LEX2052F",89,0)
 F RAN="99201^99499","98960^98962","80000^89346","S3800^S3800" D MOD
"RTN","LEX2052F",90,0)
 ;     3K, 4I, 4J, 4K, 4L, 4M, 4N, 4O with
"RTN","LEX2052F",91,0)
 ;       99201-99499
"RTN","LEX2052F",92,0)
 ;       98960-98962
"RTN","LEX2052F",93,0)
 ;       80000-89346
"RTN","LEX2052F",94,0)
 ;       S3800
"RTN","LEX2052F",95,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",96,0)
 S EFF=3070101,MODS="3K;4I;4J;4K;4L;4M;4N;4O"
"RTN","LEX2052F",97,0)
 F RAN="99201^99499","98960^98962","80000^89346","S3800^S3800" D MOD
"RTN","LEX2052F",98,0)
 ;     6E, 6F, 7F, 8B, 8C, 9B, 9C, 9D with
"RTN","LEX2052F",99,0)
 ;       99201-99499
"RTN","LEX2052F",100,0)
 ;       98960-98962
"RTN","LEX2052F",101,0)
 ;       80000-89346
"RTN","LEX2052F",102,0)
 ;       S3800
"RTN","LEX2052F",103,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",104,0)
 S EFF=3070101,MODS="6E;6F;7F;8B;8C;9B;9C;9D"
"RTN","LEX2052F",105,0)
 F RAN="99201^99499","98960^98962","80000^89346","S3800^S3800" D MOD
"RTN","LEX2052F",106,0)
 ;     AQ and CR with
"RTN","LEX2052F",107,0)
 ;       90201-99602
"RTN","LEX2052F",108,0)
 ;       10000-69999
"RTN","LEX2052F",109,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",110,0)
 S EFF=3070101,MODS="AQ;CR" F RAN="90201^99602","10000^69999" D MOD
"RTN","LEX2052F",111,0)
 ;     J1, J2 and J3 with
"RTN","LEX2052F",112,0)
 ;       J0000-J9999
"RTN","LEX2052F",113,0)
 ;       C1716-C3728
"RTN","LEX2052F",114,0)
 ;       Q0163-Q0181
"RTN","LEX2052F",115,0)
 ;       Q4079-Q4082
"RTN","LEX2052F",116,0)
 ;       Q9955-Q9964
"RTN","LEX2052F",117,0)
 N BEG,END,EFF,MOD,MODS,RAN,RAND
"RTN","LEX2052F",118,0)
 S EFF=3070101,MODS="J1;J2;J3"
"RTN","LEX2052F",119,0)
 F RAN="J0000^J9999","C1716^C3728","Q0163^Q0181","Q4079^Q4082","Q9955^Q9964" D MOD
"RTN","LEX2052F",120,0)
 Q
"RTN","LEX2052F",121,0)
 ;            
"RTN","LEX2052F",122,0)
MOD ; Modifier Loop
"RTN","LEX2052F",123,0)
 Q:'$L($G(RAN))  Q:'$L($G(MODS))  Q:'$L($TR($G(MODS),";",""))  Q:$G(EFF)'?7N  N RAND,BEG,END,MOD,MODI,MODT
"RTN","LEX2052F",124,0)
 D RAND S:$L(BEG)'=5 BEG="" S:$L(END)'=5 END="" S:(BEG'?5N)&(BEG'?1U4N)&(BEG'?4N1U) BEG="" S:(END'?5N)&(END'?1U4N)&(END'?4N1U) END=""
"RTN","LEX2052F",125,0)
 F MODI=1:1 S MOD=$P(MODS,";",MODI) Q:'$L(MOD)  D:$L(BEG)&($L(END)) ADD(RAN,MOD,EFF)
"RTN","LEX2052F",126,0)
 Q
"RTN","LEX2052F",127,0)
ADD(X,Y,Z) ; Add Range X to Modifier Y Effective Z
"RTN","LEX2052F",128,0)
 N RAN,MOD,BEG,END,RAND,DA,DIK,FLAGS,IEN,IENE,STA,EFF
"RTN","LEX2052F",129,0)
 S RAN=$G(X),MOD=$G(Y),EFF=$G(Z) Q:'$L(MOD)  Q:'$D(^DIC(81.3,"B",MOD))  Q:EFF'?7N
"RTN","LEX2052F",130,0)
 D RAND Q:$L(BEG)'=5  Q:$L(END)'=5  Q:(BEG'?5N)&(BEG'?1U4N)&(BEG'?4N1U)  Q:(END'?5N)&(END'?1U4N)&(END'?4N1U)
"RTN","LEX2052F",131,0)
 S DIK="^DIC(81.3,",IEN=0,I=0 F  S I=$O(^DIC(81.3,"B",MOD,I)) Q:+I'>0  D
"RTN","LEX2052F",132,0)
 . N STA,EFF S EFF=$O(^DIC(81.3,I,60,"B"," "),-1) Q:+EFF'>0  S STA=$O(^DIC(81.3,I,60,"B",+EFF," "),-1) Q:+STA'>0  S:$P($G(^DIC(81.3,I,60,STA,0)),"^",2)>0 IEN=I
"RTN","LEX2052F",133,0)
 Q:+IEN'>0  I +IEN>0,$D(^DIC(81.3,+IEN,0)) D
"RTN","LEX2052F",134,0)
 . N DA,DIK S DA=IEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2052F",135,0)
 S OIEN=$O(^DIC(81.3,IEN,10,"B",BEG,0)) Q:$P($G(^DIC(81.3,IEN,10,+OIEN,0)),"^",2)=END
"RTN","LEX2052F",136,0)
 S FLAGS="S",DA(1)=IEN,(IENE,DA)=+($O(^DIC(81.3,IEN,10," "),-1))+1,IENS="+"_$$IENS^DILF(.DA)
"RTN","LEX2052F",137,0)
 K FDA S FDA(81.32,IENS,.01)=BEG,FDA(81.32,IENS,.02)=END,FDA(81.32,IENS,.03)=EFF D UPDATE^DIE(FLAGS,"FDA",,"MSG")
"RTN","LEX2052F",138,0)
 K DA S DIK="^DIC(81.3,",DA=IEN D IX1^DIK
"RTN","LEX2052F",139,0)
 Q
"RTN","LEX2052F",140,0)
RAND ; Range Display
"RTN","LEX2052F",141,0)
 S RAND=$P($G(RAN),"^",1)_" - "_$P($G(RAN),"^",2),BEG=$P($G(RAN),"^",1),END=$P($G(RAN),"^",2)
"RTN","LEX2052F",142,0)
 Q
"RTN","LEX2052F",143,0)
L1 ; Display Line 1 - Modifiers
"RTN","LEX2052F",144,0)
 Q:'$L($G(MODS))  N MODT S MODT=$G(MODS) F  Q:MODT'[";"  S MODT=$P(MODT,";",1)_", "_$P(MODT,";",2,299)
"RTN","LEX2052F",145,0)
 D IND(("       "_MODT_" Modifier"_$S($L($G(MODS),";")>1:"s",1:"")))
"RTN","LEX2052F",146,0)
 Q
"RTN","LEX2052F",147,0)
L2 ; Display Line 2 - Ranges
"RTN","LEX2052F",148,0)
 Q:'$L(RAND)  D IND(("           "_$G(RAND)_"    "))
"RTN","LEX2052F",149,0)
 Q
"RTN","LEX2052F",150,0)
REMI(X,Y) ; Remedy Ticket - Indented
"RTN","LEX2052F",151,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2052F",152,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2052F",153,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052F",154,0)
IND(X) ; Indent Text
"RTN","LEX2052F",155,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052G")
0^9^B50280818
"RTN","LEX2052G",1,0)
LEX2052G ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052G",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052G",3,0)
 ;            
"RTN","LEX2052G",4,0)
 ; Global Variables
"RTN","LEX2052G",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052G",6,0)
 ;            
"RTN","LEX2052G",7,0)
 ; External References
"RTN","LEX2052G",8,0)
 ;    FILE^DIE      DBIA   2053
"RTN","LEX2052G",9,0)
 ;    ^DIK          DBIA  10013
"RTN","LEX2052G",10,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052G",11,0)
 ;    $$IENS^DILF   DBIA   2054
"RTN","LEX2052G",12,0)
 ;    MES^XPDUTL    DBIA  10141
"RTN","LEX2052G",13,0)
 ;            
"RTN","LEX2052G",14,0)
EN ; Main Entry Point
"RTN","LEX2052G",15,0)
 D RT,DT,ADJ,P1,P2,P3,P4,P5,EN^LEX2052H
"RTN","LEX2052G",16,0)
 Q
"RTN","LEX2052G",17,0)
 ;            
"RTN","LEX2052G",18,0)
RT ; Range Totals
"RTN","LEX2052G",19,0)
 D IND("  "),IND("Fixing 0 Node of the Range Multiple in the CPT")
"RTN","LEX2052G",20,0)
 D IND("Modifier file #81.3") N MIEN,RIEN S MIEN=0 F  S MIEN=$O(^DIC(81.3,MIEN)) Q:+MIEN'>0  D
"RTN","LEX2052G",21,0)
 . N LAS,TOT,RIEN S (LAS,TOT,RIEN)=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  S LAS=RIEN,TOT=TOT+1
"RTN","LEX2052G",22,0)
 . S ^DIC(81.3,MIEN,10,0)="^81.33DA^"_LAS_"^"_TOT
"RTN","LEX2052G",23,0)
 Q
"RTN","LEX2052G",24,0)
DT ; Dates
"RTN","LEX2052G",25,0)
 D IND("  "),IND("Adjusting Inactivation dates to prevent overlapping")
"RTN","LEX2052G",26,0)
 D IND("activation histories in the CPT Code Ranges in the")
"RTN","LEX2052G",27,0)
 D IND("CPT Modifier file #81.3")
"RTN","LEX2052G",28,0)
 W !!,"      This might take from 1 to 5 minutes, depending on",!,"      the system."
"RTN","LEX2052G",29,0)
 Q
"RTN","LEX2052G",30,0)
 ;            
"RTN","LEX2052G",31,0)
ADJ ; Adjust Dates
"RTN","LEX2052G",32,0)
 D IND("  "),IND("  Adjusting April Inactivation Dates")
"RTN","LEX2052G",33,0)
 N ACT,DA,DIC,DIE,DIK,EC,F,FDA,FI,FLD,IENS,INA,MIEN,N,NA,ND,NEW,NI,O,OK,OLD,RIEN,X K OK S (EC,MIEN)=0
"RTN","LEX2052G",34,0)
 F  S MIEN=$O(^DIC(81.3,MIEN)) Q:+MIEN'>0  D
"RTN","LEX2052G",35,0)
 . N RIEN,FLD,OLD,NEW,ACT K OK S RIEN=0 F  S RIEN=$O(^DIC(81.3,+MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052G",36,0)
 . . N ACT,INA S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)) S ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052G",37,0)
 . . S:INA="3010401" OK(INA)="" S:INA="3040401" OK(INA)="" S:INA="3050401" OK(INA)=""
"RTN","LEX2052G",38,0)
 . S:$D(OK("3010401")) OK("3010401")=".04^3010401^3010101"
"RTN","LEX2052G",39,0)
 . S:$D(OK("3040401")) OK("3040401")=".04^3040401^3040101"
"RTN","LEX2052G",40,0)
 . S:$D(OK("3050401")) OK("3050401")=".04^3050401^3050101"
"RTN","LEX2052G",41,0)
 . S ACT=0 F  S ACT=$O(OK(ACT)) Q:+ACT'>0  D
"RTN","LEX2052G",42,0)
 . . N ND S ND=$G(OK(ACT)) Q:+ND'>0  S FLD=$P(ND,"^",1),OLD=$P(ND,"^",2),NEW=$P(ND,"^",3) Q:FLD'>0  Q:OLD'?7N  Q:NEW'?7N
"RTN","LEX2052G",43,0)
 . . D ADJE(MIEN,FLD,OLD,NEW)
"RTN","LEX2052G",44,0)
 Q
"RTN","LEX2052G",45,0)
ADJE(X,F,O,N) ;   Adjust Dates - Edit
"RTN","LEX2052G",46,0)
 N DA,DIC,DIE,DIK,ED,FDA,FI,FLD,IENS,MIEN,NA,ND,NEW,NI,OLD,RIEN S ED=0,MIEN=+($G(X)) Q:'$D(^DIC(81.3,+MIEN,0))  S FLD=$G(F) Q:FLD'=".03"&(FLD'=".04")
"RTN","LEX2052G",47,0)
 S OLD=$G(O) Q:OLD'?7N  S NEW=$G(N) Q:NEW'?7N  S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052G",48,0)
 . N DA,DIC,DIE,DIK,FDA,FI,IENS,NA,ND,NI K DA S ND=$G(^DIC(81.3,MIEN,10,RIEN,0)) S NA=$P(ND,"^",3),NI=$P(ND,"^",4) Q:NA'?7N
"RTN","LEX2052G",49,0)
 . Q:FLD=".03"&(NA'=OLD)  I FLD=".04" Q:NI'=OLD  Q:+NA'<NEW  S DA=RIEN,DA(1)=MIEN,(DIE,DIC,DIK)="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052G",50,0)
 . S IENS=$$IENS^DILF(.DA),FI=81.32 K FDA S FDA(81.32,IENS,FLD)=NEW
"RTN","LEX2052G",51,0)
 . D FILE^DIE("","FDA") S ED=1
"RTN","LEX2052G",52,0)
 K DA S DIK="^DIC(81.3,",DA=+($G(MIEN))
"RTN","LEX2052G",53,0)
 D:+($G(ED))>0 IX1^DIK
"RTN","LEX2052G",54,0)
 Q
"RTN","LEX2052G",55,0)
 ;            
"RTN","LEX2052G",56,0)
P1 ; Problem History #1:  0005T - 0006T
"RTN","LEX2052G",57,0)
 D IND("  Adjusting Dates for codes 0005T - 0006T")
"RTN","LEX2052G",58,0)
 N MIEN F MIEN=4,9,10,12,13,14,15,17,20,21,22,23,83,109,307 D
"RTN","LEX2052G",59,0)
 . N FC,FL,FN,LC,LN,NO,RIEN S FC="0005T",LC="0006T" F FL=FC,LC D
"RTN","LEX2052G",60,0)
 . . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,"B",FL,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052G",61,0)
 . . . Q:'$D(^DIC(81.3,+MIEN,10,+RIEN,0))
"RTN","LEX2052G",62,0)
 . . . N BEG,END,ACT,INA,ND,DIC,DA,FLD,FI,IENS,NEW,FDA,IENS S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0))
"RTN","LEX2052G",63,0)
 . . . S BEG=$P(ND,"^",1),END=$P(ND,"^",2)
"RTN","LEX2052G",64,0)
 . . . S ACT=3030101,INA=3050101 I BEG=END D ED(MIEN,RIEN,".03",ACT),ED(MIEN,RIEN,".04",INA)
"RTN","LEX2052G",65,0)
 . . . S ACT=3020101,INA=3030101 I BEG'=END D ED(MIEN,RIEN,".03",ACT),ED(MIEN,RIEN,".04",INA)
"RTN","LEX2052G",66,0)
 Q
"RTN","LEX2052G",67,0)
P2 ; Problem History #2:  0012T - 0013T
"RTN","LEX2052G",68,0)
 D IND("  Adjusting Dates for codes 0012T - 0013T")
"RTN","LEX2052G",69,0)
 N MIEN F MIEN=10,11,12,13,14,15,16,20,21,22,24,25,26,54,83,109,190 D
"RTN","LEX2052G",70,0)
 . N FC,FL,FN,LC,LN,NO,RIEN  S (FL,FC)="0012T",LC="0013T"
"RTN","LEX2052G",71,0)
 . S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,"B",FL,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052G",72,0)
 . . Q:'$D(^DIC(81.3,+MIEN,10,+RIEN,0))
"RTN","LEX2052G",73,0)
 . . N BEG,END,OACT,OINA,ACT,INA,ND,DIC,DA,FLD,FI,IENS,NEW,FDA,IENS S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0))
"RTN","LEX2052G",74,0)
 . . S BEG=$P(ND,"^",1),END=$P(ND,"^",2),OACT=$P(ND,"^",3),OINA=$P(ND,"^",4) Q:BEG='FC  Q:END'=LC
"RTN","LEX2052G",75,0)
 . . S ACT=3020101,INA=3030101 I OACT=3020101 D ED(MIEN,RIEN,".03",ACT),ED(MIEN,RIEN,".04",INA)
"RTN","LEX2052G",76,0)
 . . S ACT=3030101,INA=3050101 I OACT=3030101 D ED(MIEN,RIEN,".03",ACT),ED(MIEN,RIEN,".04",INA)
"RTN","LEX2052G",77,0)
 Q
"RTN","LEX2052G",78,0)
P3 ; Problem History #3:  0019T - 0020T
"RTN","LEX2052G",79,0)
 D IND("  Adjusting Dates for codes 0019T - 0020T")
"RTN","LEX2052G",80,0)
 N MIEN F MIEN=10,11,12,13,14,15,20,21,22,82,83,109,190 D
"RTN","LEX2052G",81,0)
 . N FC,FL,FN,LC,LN,NO,RIEN S (FL,FC)="0019T",LC="0020T"
"RTN","LEX2052G",82,0)
 . S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,"B",FL,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052G",83,0)
 . . Q:'$D(^DIC(81.3,+MIEN,10,+RIEN,0))
"RTN","LEX2052G",84,0)
 . . N BEG,END,OLD,OINACT,INA,ND,DIC,DA,FLD,FI,IENS,NEW,FDA,IENS S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0))
"RTN","LEX2052G",85,0)
 . . S BEG=$P(ND,"^",1),END=$P(ND,"^",2),OLD=$P(ND,"^",3),OIN=$P(ND,"^",4) Q:BEG='FC
"RTN","LEX2052G",86,0)
 . . S ACT=3020101,INA=3030101 I OLD=ACT D ED(MIEN,RIEN,".03",ACT),ED(MIEN,RIEN,".04",INA)
"RTN","LEX2052G",87,0)
 . . S ACT=3030101,INA=3050101 I OLD=ACT D ED(MIEN,RIEN,".03",ACT),ED(MIEN,RIEN,".04",INA)
"RTN","LEX2052G",88,0)
 . . I OLD=3030101,OIN=3040101,END=LC S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052G",89,0)
 Q
"RTN","LEX2052G",90,0)
P4 ; Problem History #4:  Overlapping Open Histories
"RTN","LEX2052G",91,0)
 D IND("  Adjusting Dates for Overlapping Open Active Ranges")
"RTN","LEX2052G",92,0)
 N MIEN F MIEN=24,25,26,54 D
"RTN","LEX2052G",93,0)
 . D:$P($G(^DIC(81.3,MIEN,10,118,0)),"^",1)=33020 ED(MIEN,118,.03,2990101),ED(MIEN,118,.04,3010101)
"RTN","LEX2052G",94,0)
 . D:$P($G(^DIC(81.3,MIEN,10,336,0)),"^",1)=33020 ED(MIEN,336,.03,3010101),ED(MIEN,336,.04,3050101)
"RTN","LEX2052G",95,0)
 . D:$P($G(^DIC(81.3,MIEN,10,643,0)),"^",1)=33020 ED(MIEN,643,.03,3050101)
"RTN","LEX2052G",96,0)
 . D:$P($G(^DIC(81.3,MIEN,10,124,0)),"^",1)=35501 ED(MIEN,124,.03,2990101),ED(MIEN,124,.04,3010101)
"RTN","LEX2052G",97,0)
 . D:$P($G(^DIC(81.3,MIEN,10,337,0)),"^",1)=35500 ED(MIEN,337,.03,3010101)
"RTN","LEX2052G",98,0)
 D:$P($G(^DIC(81.3,35,10,38,0)),"^",1)=93024 ED(35,38,.03,2990101),ED(35,38,.04,3010101)
"RTN","LEX2052G",99,0)
 I $P($G(^DIC(81.3,190,10,444,0)),"^",1)=76092 D
"RTN","LEX2052G",100,0)
 . N DA,DIK S DA(1)=190,DA=444,DIK="^DIC(81.3,190,10," D ^DIK
"RTN","LEX2052G",101,0)
 D:$P($G(^DIC(81.3,190,10,141,0)),"^",1)=70010 ED(190,141,.03,2990101),ED(190,141,.04,3030101)
"RTN","LEX2052G",102,0)
 D:$P($G(^DIC(81.3,190,10,520,0)),"^",1)=70010 ED(190,520,.03,3030101),ED(190,520,.04,3040101)
"RTN","LEX2052G",103,0)
 D:$P($G(^DIC(81.3,190,10,726,0)),"^",1)=70010 ED(190,726,.03,3040101),ED(190,726,.04,3050101)
"RTN","LEX2052G",104,0)
 D:$P($G(^DIC(81.3,190,10,928,0)),"^",1)=70010 ED(190,928,.03,3050101)
"RTN","LEX2052G",105,0)
 Q
"RTN","LEX2052G",106,0)
P5 ; Problem History #5:  Two Overlapping contained Ranges
"RTN","LEX2052G",107,0)
 D IND("  Adjusting Dates for years 1999/2001/2003/2005")
"RTN","LEX2052G",108,0)
 N MIEN,RIEN F MIEN=10,17,23,83,192 S RIEN=0 F  S RIEN=$O(^DIC(81.3,+MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052G",109,0)
 . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052G",110,0)
 . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052G",111,0)
 . I BEG="K0065",END="K0078" D
"RTN","LEX2052G",112,0)
 . . I ACT=2990101,(INA=3050101!(INA=3050401)) D ED(MIEN,RIEN,.03,2990101),ED(MIEN,RIEN,.04,3010101)
"RTN","LEX2052G",113,0)
 . . I ACT=3010101,(INA=3030101!(INA=3050101)) D ED(MIEN,RIEN,.03,3010101),ED(MIEN,RIEN,.04,3050101)
"RTN","LEX2052G",114,0)
 . I BEG="L8613",END="L8614",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052G",115,0)
 . I BEG="L8619",END="L8658",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052G",116,0)
 . I BEG="21920",END="22614",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052G",117,0)
 . I BEG="22630",END="22848",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052G",118,0)
 . I BEG="22548",END="22812",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052G",119,0)
 Q
"RTN","LEX2052G",120,0)
 ;            
"RTN","LEX2052G",121,0)
 ; Miscellaneous
"RTN","LEX2052G",122,0)
ED(X,R,F,V) ;   Edit Date
"RTN","LEX2052G",123,0)
 N DA,DIC,DIE,DIK,ED,FDA,FLD,FI,IENS,MIEN,ND,NEW,OLD,RIEN,VDT S MIEN=+($G(X)) Q:'$D(^DIC(81.3,+MIEN,0))
"RTN","LEX2052G",124,0)
 S RIEN=+($G(R)) Q:'$D(^DIC(81.3,+MIEN,10,+RIEN,0))  S FLD=$G(F) Q:FLD'=".03"&(FLD'=".04")
"RTN","LEX2052G",125,0)
 S ND=$G(^DIC(81.3,MIEN,10,RIEN,0)) S:FLD=".03" OLD=$P(ND,"^",3) S:FLD=".04" OLD=$P(ND,"^",4)
"RTN","LEX2052G",126,0)
 S VDT=$G(V) Q:VDT'?7N  S ED=0,DA=RIEN,DA(1)=MIEN,(DIE,DIC,DIK)="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052G",127,0)
 S IENS=$$IENS^DILF(.DA),FI=81.32 K FDA S FDA(81.32,IENS,FLD)=VDT D FILE^DIE("","FDA"),IX1^DIK
"RTN","LEX2052G",128,0)
 S ND=$G(^DIC(81.3,MIEN,10,RIEN,0)) S:FLD=".03" NEW=$P(ND,"^",3) S:FLD=".04" NEW=$P(ND,"^",4)
"RTN","LEX2052G",129,0)
 S:NEW'=OLD&(NEW=VDT) ED=1
"RTN","LEX2052G",130,0)
 Q
"RTN","LEX2052G",131,0)
NM(X) ;   Convert CPT/HCPCS Code to Numeric
"RTN","LEX2052G",132,0)
 S X=$E($G(X),1,5) Q:X?1.N +X  Q:X?4N1A ($A($E(X,5))*10_$E(X,1,4))  Q:X?1A4N ($A(X)_$E(X,2,5))
"RTN","LEX2052G",133,0)
 Q ""
"RTN","LEX2052G",134,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2052G",135,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2052G",136,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2052G",137,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052G",138,0)
IND(X) ;   Indent Text
"RTN","LEX2052G",139,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052H")
0^10^B43592107
"RTN","LEX2052H",1,0)
LEX2052H ;ISL/KER - LEX*2.0*52 Post Install ;08/18/2007
"RTN","LEX2052H",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052H",3,0)
 ;            
"RTN","LEX2052H",4,0)
 ; Global Variables
"RTN","LEX2052H",5,0)
 ;    ^DIC(81.3     DBIA   4492
"RTN","LEX2052H",6,0)
 ;            
"RTN","LEX2052H",7,0)
 ; External References
"RTN","LEX2052H",8,0)
 ;    FILE^DIE      DBIA   2053
"RTN","LEX2052H",9,0)
 ;    ^DIK          DBIA  10013
"RTN","LEX2052H",10,0)
 ;    IX1^DIK       DBIA  10013
"RTN","LEX2052H",11,0)
 ;    $$IENS^DILF   DBIA   2054
"RTN","LEX2052H",12,0)
 ;    MES^XPDUTL    DBIA  10141
"RTN","LEX2052H",13,0)
 ;            
"RTN","LEX2052H",14,0)
EN ; Main Entry Point
"RTN","LEX2052H",15,0)
 D P6,P7,P8,P9,P10
"RTN","LEX2052H",16,0)
 Q
"RTN","LEX2052H",17,0)
P6 ; Problem History #6:   History for years 1999/2002/2003/2005
"RTN","LEX2052H",18,0)
 D IND("  Adjusting Dates for years 1999/2002/2003/2005")
"RTN","LEX2052H",19,0)
 N MIEN,RIEN F MIEN=4,10,35,83,109,192,363,364 S RIEN=0 F  S RIEN=$O(^DIC(81.3,+MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052H",20,0)
 . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",21,0)
 . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",22,0)
 . I MIEN=4 D  Q
"RTN","LEX2052H",23,0)
 . . I BEG="0016T",END="0016T",ACT=3020101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",24,0)
 . . I BEG="38200",END="38200",ACT=2990101 D ED(MIEN,RIEN,".04","3020101")
"RTN","LEX2052H",25,0)
 . I MIEN=10!(MIEN=83)!(MIEN=109) D  Q
"RTN","LEX2052H",26,0)
 . . I BEG="92235",END="92240",ACT=2990101 D ED(MIEN,RIEN,".04","3020101")
"RTN","LEX2052H",27,0)
 . . I BEG="L8613",END="L8614",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",28,0)
 . I MIEN=363!(MIEN=364) D  Q
"RTN","LEX2052H",29,0)
 . . I BEG="29870",END="29902",ACT=3020101 D ED(MIEN,RIEN,".04","3050101")
"RTN","LEX2052H",30,0)
 . N CD F CD="0001T","0002T","0003T","0005T","0006T","0007T","0008T","0010T","0016T","0017T","0023T","0030T" D
"RTN","LEX2052H",31,0)
 . . Q:BEG'=CD  I ACT=3020101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",32,0)
 . F CD="0027T","0030T","0033T","0035T","0040T","0041T","0042T","0045T","0087T","0090T","0094T","0111T","6005F" D
"RTN","LEX2052H",33,0)
 . . Q:BEG'=CD  I ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",34,0)
 . F CD="00100","00120","00140","00160","00170","00220","00300" D
"RTN","LEX2052H",35,0)
 . . Q:BEG'=CD  I ACT=3020101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",36,0)
 . F CD="29800","44005","46020","47000","88300","91000","L4000","Q0183","Q9920" D
"RTN","LEX2052H",37,0)
 . . Q:BEG'=CD  I ACT=3020101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",38,0)
 . F CD="00300","00350","00400","00410","00450","00870","00902","00948","01112","29800","29819","44005" D
"RTN","LEX2052H",39,0)
 . . Q:BEG'=CD  I ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",40,0)
 . F CD="77522","L4000","L5301","L5311","L5321","L5331","L5341","L5661","L5665","L5668","L5670" D
"RTN","LEX2052H",41,0)
 . . Q:BEG'=CD  I ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",42,0)
 . F CD="Q0183","Q0187","Q2017","Q3019","Q3025","Q9920" D
"RTN","LEX2052H",43,0)
 . . Q:BEG'=CD  I ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",44,0)
 Q
"RTN","LEX2052H",45,0)
P7 ; Problem History #7:   History for years 1999/2001/2003/2004
"RTN","LEX2052H",46,0)
 D IND("  Adjusting Dates for years 1999/2001/2003/2004")
"RTN","LEX2052H",47,0)
 N MIEN,RIEN F MIEN=18,17,63,192 D
"RTN","LEX2052H",48,0)
 . I MIEN=18 D  Q
"RTN","LEX2052H",49,0)
 . . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN=0  D
"RTN","LEX2052H",50,0)
 . . . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",51,0)
 . . . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",52,0)
 . . . I BEG=22808,END=22812,ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",53,0)
 . I MIEN'=18 D  Q
"RTN","LEX2052H",54,0)
 . . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN=0  D
"RTN","LEX2052H",55,0)
 . . . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",56,0)
 . . . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",57,0)
 . . . I BEG="22548",END="22614",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052H",58,0)
 . . . I BEG="22630",END="22812",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052H",59,0)
 . . . I BEG="A9500",END="A9700",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",60,0)
 . . . I BEG="0001T",END="0008T",ACT=3040101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052H",61,0)
 . . . N CD F CD="0010F","0016T","0023T","0030T","0033T","0048T","0111T" D
"RTN","LEX2052H",62,0)
 . . . . Q:BEG'=CD  I ACT=3040101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",63,0)
 . . . F CD="00100","00160","00220","00300","00350","00500","01112","Q0187","Q1001","Q3025","Q4001" D
"RTN","LEX2052H",64,0)
 . . . . Q:BEG'=CD  I ACT=3040101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",65,0)
 Q
"RTN","LEX2052H",66,0)
P8 ; Problem History #8:   History for years 1999/2003/2004/2005
"RTN","LEX2052H",67,0)
 D IND("  Adjusting Dates for years 1999/2003/2004/2005")
"RTN","LEX2052H",68,0)
 N MIEN,RIEN F MIEN=88,100,192 D
"RTN","LEX2052H",69,0)
 . I MIEN=88 D  Q
"RTN","LEX2052H",70,0)
 . . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN=0  D
"RTN","LEX2052H",71,0)
 . . . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",72,0)
 . . . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",73,0)
 . . . I BEG="Q0083",END="Q0085",ACT=2990101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ED(MIEN,RIEN,".04","3030101")
"RTN","LEX2052H",74,0)
 . . . I BEG="P9612",END="Q0085",ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ED(MIEN,RIEN,".04","3050101")
"RTN","LEX2052H",75,0)
 . I MIEN'=88 D  Q
"RTN","LEX2052H",76,0)
 . . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN=0  D
"RTN","LEX2052H",77,0)
 . . . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",78,0)
 . . . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",79,0)
 . . . I BEG="Q0081",END="Q0085" S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ED(MIEN,RIEN,".03","2990101"),ED(MIEN,RIEN,".04","3050101")
"RTN","LEX2052H",80,0)
 . . . I BEG="Q0081",END="Q0085",ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",81,0)
 . . . I BEG="Q0083",END="Q0085",ACT=2990101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",82,0)
 . . . I BEG="Q0083",END="Q0085",ACT=3010101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",83,0)
 Q
"RTN","LEX2052H",84,0)
P9 ; Problem History #9:   History for years 2002/2003/2004/2005
"RTN","LEX2052H",85,0)
 D IND("  Adjusting Dates for years 2002/2003/2004/2005")
"RTN","LEX2052H",86,0)
 N MIEN,RIEN F MIEN=11,192,80 S RIEN=0 F  S RIEN=$O(^DIC(81.3,+MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052H",87,0)
 . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",88,0)
 . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",89,0)
 . I MIEN=11 D  Q
"RTN","LEX2052H",90,0)
 . . I BEG="G0173",END="G0173",ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK Q
"RTN","LEX2052H",91,0)
 . . N CD F CD="10040","1004F","29800","33968","35501","36420","38115","46030","47010","51800","67005","78306","78802","78806","91000","96100" D
"RTN","LEX2052H",92,0)
 . . . D:CD="33968"&(ACT=3000101) ED(MIEN,RIEN,".04",3020101)
"RTN","LEX2052H",93,0)
 . . . Q:ACT'=2990101  Q:BEG'=CD  D ED(MIEN,RIEN,".04",3020101)
"RTN","LEX2052H",94,0)
 . I MIEN=80 D  Q
"RTN","LEX2052H",95,0)
 . . I BEG="K0195",END="K0268",ACT=3030101 S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",96,0)
 Q
"RTN","LEX2052H",97,0)
P10 ; Problem History #10:  History for years 1999/2002/2004/2005
"RTN","LEX2052H",98,0)
 D IND("  Adjusting Dates for years 1999/2002/2004/2005")
"RTN","LEX2052H",99,0)
 N MIEN,RIEN F MIEN=4,192 S RIEN=0 F  S RIEN=$O(^DIC(81.3,+MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052H",100,0)
 . N BEG,END,ACT,INA,ND,DA,DIK
"RTN","LEX2052H",101,0)
 . S ND=$G(^DIC(81.3,+MIEN,10,+RIEN,0)),BEG=$P(ND,"^",1),END=$P(ND,"^",2),ACT=$P(ND,"^",3),INA=$P(ND,"^",4)
"RTN","LEX2052H",102,0)
 . I BEG="00164",END="00164" S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",103,0)
 . I BEG="00170",END="00170" S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_MIEN_",10," D ^DIK
"RTN","LEX2052H",104,0)
 Q
"RTN","LEX2052H",105,0)
 ;            
"RTN","LEX2052H",106,0)
 ; Miscellaneous
"RTN","LEX2052H",107,0)
ED(X,R,F,V) ;   Edit Date
"RTN","LEX2052H",108,0)
 N DA,DIC,DIE,DIK,ED,FDA,FLD,FI,IENS,MIEN,ND,NEW,OLD,RIEN,VDT S MIEN=+($G(X)) Q:'$D(^DIC(81.3,+MIEN,0))
"RTN","LEX2052H",109,0)
 S RIEN=+($G(R)) Q:'$D(^DIC(81.3,+MIEN,10,+RIEN,0))  S FLD=$G(F) Q:FLD'=".03"&(FLD'=".04")
"RTN","LEX2052H",110,0)
 S ND=$G(^DIC(81.3,MIEN,10,RIEN,0)) S:FLD=".03" OLD=$P(ND,"^",3) S:FLD=".04" OLD=$P(ND,"^",4)
"RTN","LEX2052H",111,0)
 S VDT=$G(V) Q:VDT'?7N  S ED=0,DA=RIEN,DA(1)=MIEN,(DIE,DIC,DIK)="^DIC(81.3,"_DA(1)_",10,"
"RTN","LEX2052H",112,0)
 S IENS=$$IENS^DILF(.DA),FI=81.32 K FDA S FDA(81.32,IENS,FLD)=VDT D FILE^DIE("","FDA"),IX1^DIK
"RTN","LEX2052H",113,0)
 S ND=$G(^DIC(81.3,MIEN,10,RIEN,0)) S:FLD=".03" NEW=$P(ND,"^",3) S:FLD=".04" NEW=$P(ND,"^",4)
"RTN","LEX2052H",114,0)
 S:NEW'=OLD&(NEW=VDT) ED=1
"RTN","LEX2052H",115,0)
 Q
"RTN","LEX2052H",116,0)
NM(X) ;   Convert CPT/HCPCS Code to Numeric
"RTN","LEX2052H",117,0)
 S X=$E($G(X),1,5) Q:X?1.N +X  Q:X?4N1A ($A($E(X,5))*10_$E(X,1,4))  Q:X?1A4N ($A(X)_$E(X,2,5))
"RTN","LEX2052H",118,0)
 Q ""
"RTN","LEX2052H",119,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2052H",120,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2052H",121,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2052H",122,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052H",123,0)
IND(X) ;   Indent Text
"RTN","LEX2052H",124,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2052P")
0^2^B14203256
"RTN","LEX2052P",1,0)
LEX2052P ;ISL/KER - LEX*2.0*52 Pre/Post Install ;08/18/2007
"RTN","LEX2052P",2,0)
 ;;2.0;LEXICON UTILITY;**52**;Sep 23, 1996;Build 25
"RTN","LEX2052P",3,0)
 ;            
"RTN","LEX2052P",4,0)
 ; Global Variables
"RTN","LEX2052P",5,0)
 ;    ^%ZOSF("DEL"    DBIA  10096
"RTN","LEX2052P",6,0)
 ;    ^%ZOSF("TEST"   DBIA  10096
"RTN","LEX2052P",7,0)
 ;    ^TMP("LEXCNT"   SACC 2.3.2.5.1
"RTN","LEX2052P",8,0)
 ;    ^TMP("LEXCS"    SACC 2.3.2.5.1
"RTN","LEX2052P",9,0)
 ;    ^TMP("LEXI"     SACC 2.3.2.5.1
"RTN","LEX2052P",10,0)
 ;    ^TMP("LEXINS"   SACC 2.3.2.5.1
"RTN","LEX2052P",11,0)
 ;    ^TMP("LEXKID"   SACC 2.3.2.5.1
"RTN","LEX2052P",12,0)
 ;    ^TMP("LEXMSG"   SACC 2.3.2.5.1
"RTN","LEX2052P",13,0)
 ;            
"RTN","LEX2052P",14,0)
 ; External References
"RTN","LEX2052P",15,0)
 ;    HOME^%ZIS       DBIA  10086
"RTN","LEX2052P",16,0)
 ;    ^DIM            DBIA  10016
"RTN","LEX2052P",17,0)
 ;    $$GET1^DIQ      DBIA   2056
"RTN","LEX2052P",18,0)
 ;    $$DT^XLFDT      DBIA  10103
"RTN","LEX2052P",19,0)
 ;    $$FMTE^XLFDT    DBIA  10103
"RTN","LEX2052P",20,0)
 ;    $$NOW^XLFDT     DBIA  10103
"RTN","LEX2052P",21,0)
 ;    $$DTIME^XUP     DBIA   4490
"RTN","LEX2052P",22,0)
 ;            
"RTN","LEX2052P",23,0)
 Q
"RTN","LEX2052P",24,0)
POST ; LEX*2.0*52 Post-Install
"RTN","LEX2052P",25,0)
 N ENV,LEXBEG,LEXEND,LEXELP,LEXRTN,ZTREQ,X,Y S ENV=$$ENV Q:'ENV  S LEXBEG=$$NOW^XLFDT
"RTN","LEX2052P",26,0)
 K ^TMP("LEXCS",$J),^TMP("LEXCNT",$J),^TMP("LEXI",$J),^TMP("LEXMSG",$J),^TMP("LEXINS",$J),^TMP("LEXKID",$J)
"RTN","LEX2052P",27,0)
 N LEXEDT,LEXCHG,LEXSCHG,LEXMUMPS,LEXSHORT,LEXPOST,LEXBLDS,LEXBUILD,LEXBLD,LEXID,LEXSUB,X D EN^LEX2052A,EN^LEX2052E,EN^LEX2052F,EN^LEX2052G
"RTN","LEX2052P",28,0)
 I $D(^%ZOSF("DEL")) F LEXRTN="LEX2052A","LEX2052B","LEX2052C","LEX2052D","LEX2052E","LEX2052F","LEX2052G","LEX2052H" D
"RTN","LEX2052P",29,0)
 . N EXC,X,Y I +($$ROK(LEXRTN))>0 S (EXC,X)=$G(^%ZOSF("DEL")) D ^DIM I $D(X) S X=LEXRTN X EXC
"RTN","LEX2052P",30,0)
 S LEXSHORT=1,(LEXID,LEXSUB)="LEXKID",(LEXBUILD,LEXBLD)="LEX*2.0*52",LEXPOST=1
"RTN","LEX2052P",31,0)
 S LEXEND=$$NOW^XLFDT,LEXELP=$$EP^LEXXII(LEXBEG,LEXEND)
"RTN","LEX2052P",32,0)
 D MSG,RX
"RTN","LEX2052P",33,0)
 Q
"RTN","LEX2052P",34,0)
MSG ;   Send a Install Message
"RTN","LEX2052P",35,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","LEX2052P",36,0)
 N LEXFC,LEXMOD,LEXMUL,LEXTCS,LEXTND,ZTQUEUED,LEXT,LEXI
"RTN","LEX2052P",37,0)
 S LEXMUL=1,(LEXTND,LEXTCS,LEXMOD,LEXFC,ZTQUEUED)=0
"RTN","LEX2052P",38,0)
 D HDR^LEXXFI,EN^LEXXII I $L($G(LEXID)) S LEXI=0 F  S LEXI=$O(^TMP(LEXID,$J,LEXI)) Q:+LEXI'>0  D
"RTN","LEX2052P",39,0)
 . S:$G(^TMP(LEXID,$J,LEXI))=" Lexicon/ICD/CPT Installation" ^TMP(LEXID,$J,LEXI)=" CPT Modifier 51 Update",^TMP(LEXID,$J,(LEXI+1))=" ======================"
"RTN","LEX2052P",40,0)
 I $G(LEXBEG)?7N1".".N S LEXT="" S LEXT="  Started:     "_$TR($$FMTE^XLFDT($G(LEXBEG),"1Z"),"@"," ") D TL^LEXXII(LEXT)
"RTN","LEX2052P",41,0)
 I $G(LEXEND)?7N1".".N S LEXT="" S LEXT="  Finished:    "_$TR($$FMTE^XLFDT($G(LEXEND),"1Z"),"@"," ") D TL^LEXXII(LEXT)
"RTN","LEX2052P",42,0)
 I $G(LEXBEG)?7N1".".N!$G(LEXEND)?7N1".".N!($L($G(LEXELP))&($G(LEXELP)[":")) S LEXT="" S LEXT="  Elapsed:     "_$$ED^LEXXII($G(LEXELP)) D TL^LEXXII(LEXT),BL^LEXXII
"RTN","LEX2052P",43,0)
 D MAIL^LEXXFI,KILL^LEXXFI
"RTN","LEX2052P",44,0)
 Q
"RTN","LEX2052P",45,0)
RX ; Re-Index
"RTN","LEX2052P",46,0)
 N Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTSAVE,ZTRTN,ZTREQ,ZTQUEUED
"RTN","LEX2052P",47,0)
 S ZTRTN="RXT^LEX2052P",ZTDESC="Re-Index CPT Modifier file 81.3",ZTIO="",ZTDTH=$H D ^%ZTLOAD
"RTN","LEX2052P",48,0)
 D:+($G(ZTSK))>0 BMES^XPDUTL((" Re-Indexing CPT Modified file 81.3 (Task #"_+($G(ZTSK))_")"))
"RTN","LEX2052P",49,0)
 D HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTSAVE,ZTRTN
"RTN","LEX2052P",50,0)
 Q
"RTN","LEX2052P",51,0)
RXT ; Re-Index (tasked)
"RTN","LEX2052P",52,0)
 S:$D(ZTQUEUED) ZTREQ="@" N MIEN,DA,DIK S MIEN=0 F  S MIEN=$O(^DIC(81.3,MIEN)) Q:+MIEN'>0  D
"RTN","LEX2052P",53,0)
 . K ^DIC(81.3,MIEN,10,"B"),^DIC(81.3,MIEN,"M")
"RTN","LEX2052P",54,0)
 . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2052P",55,0)
 . . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D IX1^DIK
"RTN","LEX2052P",56,0)
 . K DA S DA=MIEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2052P",57,0)
 F DA=3,11,46,47 S DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2052P",58,0)
 F DA=643,644,645,646,647 S DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2052P",59,0)
 Q
"RTN","LEX2052P",60,0)
ROK(X) ; Routine OK
"RTN","LEX2052P",61,0)
 S X=$G(X) Q:'$L(X) 0  Q:$L(X)>8 0  X ^%ZOSF("TEST") Q:$T 1
"RTN","LEX2052P",62,0)
 Q 0
"RTN","LEX2052P",63,0)
ENV(X) ; Environment check
"RTN","LEX2052P",64,0)
 N LEXNM D HOME^%ZIS S U="^",DT=$$DT^XLFDT,LEXNM=$$GET1^DIQ(200,+($G(DUZ)),.01),DTIME=$$DTIME^XUP(+($G(DUZ))) Q:+($G(DUZ))'>0!('$L(LEXNM)) 0
"RTN","LEX2052P",65,0)
 Q 1
"VER")
8.0^22.0
**INSTALL NAME**
ICPT*6.0*37
"BLD",6826,0)
ICPT*6.0*37^CPT/HCPCS CODES^0^3071026^y
"BLD",6826,1,0)
^^12^12^3071024^
"BLD",6826,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6826,1,2,0)
included in this patch.  This patch is part of a multi-package 
"BLD",6826,1,3,0)
distribution and includes the following patches installed in
"BLD",6826,1,4,0)
the following order:
"BLD",6826,1,5,0)
 
"BLD",6826,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"BLD",6826,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"BLD",6826,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"BLD",6826,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"BLD",6826,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"BLD",6826,1,11,0)
 
"BLD",6826,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"BLD",6826,4,0)
^9.64PA^^
"BLD",6826,6.3)
25
"BLD",6826,"KRN",0)
^9.67PA^8989.52^19
"BLD",6826,"KRN",.4,0)
.4
"BLD",6826,"KRN",.401,0)
.401
"BLD",6826,"KRN",.402,0)
.402
"BLD",6826,"KRN",.403,0)
.403
"BLD",6826,"KRN",.5,0)
.5
"BLD",6826,"KRN",.84,0)
.84
"BLD",6826,"KRN",3.6,0)
3.6
"BLD",6826,"KRN",3.8,0)
3.8
"BLD",6826,"KRN",9.2,0)
9.2
"BLD",6826,"KRN",9.8,0)
9.8
"BLD",6826,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6826,"KRN",9.8,"NM",1,0)
ICPTMOD^^0^B35707569
"BLD",6826,"KRN",9.8,"NM",2,0)
ICPTMOD2^^0^B34943505
"BLD",6826,"KRN",9.8,"NM","B","ICPTMOD",1)

"BLD",6826,"KRN",9.8,"NM","B","ICPTMOD2",2)

"BLD",6826,"KRN",19,0)
19
"BLD",6826,"KRN",19.1,0)
19.1
"BLD",6826,"KRN",101,0)
101
"BLD",6826,"KRN",409.61,0)
409.61
"BLD",6826,"KRN",771,0)
771
"BLD",6826,"KRN",870,0)
870
"BLD",6826,"KRN",8989.51,0)
8989.51
"BLD",6826,"KRN",8989.52,0)
8989.52
"BLD",6826,"KRN",8994,0)
8994
"BLD",6826,"KRN","B",.4,.4)

"BLD",6826,"KRN","B",.401,.401)

"BLD",6826,"KRN","B",.402,.402)

"BLD",6826,"KRN","B",.403,.403)

"BLD",6826,"KRN","B",.5,.5)

"BLD",6826,"KRN","B",.84,.84)

"BLD",6826,"KRN","B",3.6,3.6)

"BLD",6826,"KRN","B",3.8,3.8)

"BLD",6826,"KRN","B",9.2,9.2)

"BLD",6826,"KRN","B",9.8,9.8)

"BLD",6826,"KRN","B",19,19)

"BLD",6826,"KRN","B",19.1,19.1)

"BLD",6826,"KRN","B",101,101)

"BLD",6826,"KRN","B",409.61,409.61)

"BLD",6826,"KRN","B",771,771)

"BLD",6826,"KRN","B",870,870)

"BLD",6826,"KRN","B",8989.51,8989.51)

"BLD",6826,"KRN","B",8989.52,8989.52)

"BLD",6826,"KRN","B",8994,8994)

"BLD",6826,"QUES",0)
^9.62^^
"BLD",6826,"REQB",0)
^9.611^1^1
"BLD",6826,"REQB",1,0)
ICPT*6.0*30^2
"BLD",6826,"REQB","B","ICPT*6.0*30",1)

"MBREQ")
0
"PKG",302,-1)
1^1
"PKG",302,0)
CPT/HCPCS CODES^ICPT^ICPT/HCPCS CODES
"PKG",302,20,0)
^9.402P^^
"PKG",302,22,0)
^9.49I^1^1
"PKG",302,22,1,0)
6.0^2970519^2970519^1118
"PKG",302,22,1,"PAH",1,0)
37^3071026^1118
"PKG",302,22,1,"PAH",1,1,0)
^^12^12^3071026
"PKG",302,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",302,22,1,"PAH",1,1,2,0)
included in this patch.  This patch is part of a multi-package 
"PKG",302,22,1,"PAH",1,1,3,0)
distribution and includes the following patches installed in
"PKG",302,22,1,"PAH",1,1,4,0)
the following order:
"PKG",302,22,1,"PAH",1,1,5,0)
 
"PKG",302,22,1,"PAH",1,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"PKG",302,22,1,"PAH",1,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"PKG",302,22,1,"PAH",1,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"PKG",302,22,1,"PAH",1,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"PKG",302,22,1,"PAH",1,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"PKG",302,22,1,"PAH",1,1,11,0)
 
"PKG",302,22,1,"PAH",1,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ICPTMOD")
0^1^B35707569
"RTN","ICPTMOD",1,0)
ICPTMOD ;ALB/DEK/KER - CPT MODIFIER APIS ;08/18/2007
"RTN","ICPTMOD",2,0)
 ;;6.0;CPT/HCPCS;**6,12,13,14,19,30,37**;May 19, 1997;Build 25
"RTN","ICPTMOD",3,0)
 ;             
"RTN","ICPTMOD",4,0)
 ; Global Variables
"RTN","ICPTMOD",5,0)
 ;    ^DIC(81.3
"RTN","ICPTMOD",6,0)
 ;    ^TMP("ICPTD"     SACC 2.3.2.5.1
"RTN","ICPTMOD",7,0)
 ;             
"RTN","ICPTMOD",8,0)
 ; External References
"RTN","ICPTMOD",9,0)
 ;    $$DT^XLFDT       DBIA  10103
"RTN","ICPTMOD",10,0)
 ;             
"RTN","ICPTMOD",11,0)
 ; External References
"RTN","ICPTMOD",12,0)
 ;
"RTN","ICPTMOD",13,0)
 Q
"RTN","ICPTMOD",14,0)
MOD(MOD,MFT,MDT,SRC,DFN) ;  returns basic info on CPT MODIFIERs
"RTN","ICPTMOD",15,0)
 ;
"RTN","ICPTMOD",16,0)
 ; Input:   MOD   Modifier, Internal or External (Required)
"RTN","ICPTMOD",17,0)
 ;          MFT   Format  "I"=IEN  "E"=.01 field (Default)
"RTN","ICPTMOD",18,0)
 ;          MDT   Version Date, FileMan format (default = TODAY)
"RTN","ICPTMOD",19,0)
 ;          SRC   Source Screen
"RTN","ICPTMOD",20,0)
 ;                  If 0 or Null, Level I and II only
"RTN","ICPTMOD",21,0)
 ;                  If >0, Level I, II, and III
"RTN","ICPTMOD",22,0)
 ;          DFN   Not used
"RTN","ICPTMOD",23,0)
 ; 
"RTN","ICPTMOD",24,0)
 ; Output:  10 piece string delimited by the up-arrow (^)
"RTN","ICPTMOD",25,0)
 ; 
"RTN","ICPTMOD",26,0)
 ;            1  IEN
"RTN","ICPTMOD",27,0)
 ;            2  Modifier (0;1)
"RTN","ICPTMOD",28,0)
 ;            3  Versioned Name (61, 0;1)
"RTN","ICPTMOD",29,0)
 ;            4  Code (0;3)
"RTN","ICPTMOD",30,0)
 ;            5  Source (0;4)
"RTN","ICPTMOD",31,0)
 ;            6  Effective Date (60, 0;1)
"RTN","ICPTMOD",32,0)
 ;            7  Status (60, 0;2) 0:inactive; 1:active
"RTN","ICPTMOD",33,0)
 ;            8  Inactivation Date (60, 0;1)
"RTN","ICPTMOD",34,0)
 ;            9  Activation Date (60, 0;1)
"RTN","ICPTMOD",35,0)
 ;           10  Message
"RTN","ICPTMOD",36,0)
 ;        or 
"RTN","ICPTMOD",37,0)
 ;           -1^Error
"RTN","ICPTMOD",38,0)
 ; 
"RTN","ICPTMOD",39,0)
 N DATA,EFF,EFFX,EFFS,STR,MODN,MODST
"RTN","ICPTMOD",40,0)
 I $G(MOD)="" S STR="-1^NO MODIFIER SELECTED" G MODQ
"RTN","ICPTMOD",41,0)
 I $G(MFT)="" S MFT="E"
"RTN","ICPTMOD",42,0)
 I "E^I"'[MFT S STR="-1^INVALID MODIFIER FORMAT" G MODQ
"RTN","ICPTMOD",43,0)
 S MDT=$S($G(MDT)="":$$DT^XLFDT,1:$$DTBR^ICPTSUPT(MDT))
"RTN","ICPTMOD",44,0)
 I MFT="E" S MODN=$O(^DIC(81.3,"B",MOD,0)) I $O(^(MODN)) S STR="-1^Multiple modifiers w/same name.  Select IEN: " D MULT G MODQ
"RTN","ICPTMOD",45,0)
 I MFT="E" S MOD=MODN
"RTN","ICPTMOD",46,0)
 S MOD=+MOD
"RTN","ICPTMOD",47,0)
 I 'MOD!'$D(^DIC(81.3,MOD)) S STR="-1^NO SUCH MODIFIER" G MODQ
"RTN","ICPTMOD",48,0)
 S DATA=$G(^DIC(81.3,MOD,0))
"RTN","ICPTMOD",49,0)
 S MODST=$$VSTCM(MOD,MDT)
"RTN","ICPTMOD",50,0)
 I '$L(DATA) S STR="-1^NO DATA" G MODQ
"RTN","ICPTMOD",51,0)
 S STR=MOD_"^"_$P(DATA,"^",1,4)
"RTN","ICPTMOD",52,0)
 I '$G(SRC),$P(STR,"^",5)="V" Q "-1^VA LOCAL MODIFIER SELECTED"
"RTN","ICPTMOD",53,0)
 S EFF=$$EFF^ICPTSUPT(81.3,MOD,MDT)
"RTN","ICPTMOD",54,0)
 I EFF<1 S $P(EFF,"^",2)=0
"RTN","ICPTMOD",55,0)
 S STR=STR_"^"_EFF_"^"_$$MSG^ICPTSUPT(MDT)
"RTN","ICPTMOD",56,0)
 S:$L(MODST) $P(STR,"^",3)=MODST
"RTN","ICPTMOD",57,0)
MODQ ; Modifier Quit
"RTN","ICPTMOD",58,0)
 Q STR
"RTN","ICPTMOD",59,0)
 ;
"RTN","ICPTMOD",60,0)
MODD(CODE,OUTARR,DFN,CDT)       ; returns CPT description in array
"RTN","ICPTMOD",61,0)
 ;
"RTN","ICPTMOD",62,0)
 ; Input:   CODE   CPT Modifier, internal or external (Required)
"RTN","ICPTMOD",63,0)
 ;          ARY    Output Array Name
"RTN","ICPTMOD",64,0)
 ;                   e.g. "ABC" or "ABC("TEST")" 
"RTN","ICPTMOD",65,0)
 ;                   Default = ^TMP("ICPTD",$J)
"RTN","ICPTMOD",66,0)
 ;          DFN    Not used
"RTN","ICPTMOD",67,0)
 ;          CDT    Versioning Date (default = TODAY)
"RTN","ICPTMOD",68,0)
 ;                   If prior to 1/1/1989, 1/1/1989 will be used
"RTN","ICPTMOD",69,0)
 ;                   If year only, use first of that year
"RTN","ICPTMOD",70,0)
 ;                   If month/year only, use first of the month
"RTN","ICPTMOD",71,0)
 ;                   If later than today, TODAY will be used
"RTN","ICPTMOD",72,0)
 ; 
"RTN","ICPTMOD",73,0)
 ; Output:  #      Number of lines in description
"RTN","ICPTMOD",74,0)
 ; 
"RTN","ICPTMOD",75,0)
 ;          @ARY(1:n) - Versioned Description (multiple 62)
"RTN","ICPTMOD",76,0)
 ;          @ARY(n+1) - blank
"RTN","ICPTMOD",77,0)
 ;          @ARY(n+1) - message: CODE TEXT MAY BE INACCURATE
"RTN","ICPTMOD",78,0)
 ;      or
"RTN","ICPTMOD",79,0)
 ;          -1^Error
"RTN","ICPTMOD",80,0)
 ; 
"RTN","ICPTMOD",81,0)
 ;  ** User must initialize ^TMP("ICPTD",$J), if used **
"RTN","ICPTMOD",82,0)
 ; 
"RTN","ICPTMOD",83,0)
 N ARR,END,CTV,I,N
"RTN","ICPTMOD",84,0)
 I $G(CODE)="" S N="-1^NO CODE SELECTED" G MODDQ
"RTN","ICPTMOD",85,0)
 I $G(OUTARR)="" S OUTARR="^TMP(""ICPTD"",$J,"
"RTN","ICPTMOD",86,0)
 I OUTARR'["(" S OUTARR=OUTARR_"("
"RTN","ICPTMOD",87,0)
 I OUTARR[")" S OUTARR=$P(OUTARR,")")
"RTN","ICPTMOD",88,0)
 S END=$E(OUTARR,$L(OUTARR)) I END'="("&(END'=",") S OUTARR=OUTARR_","
"RTN","ICPTMOD",89,0)
 I OUTARR="^TMP(""ICPTD"",$J," K ^TMP("ICPTD",$J)
"RTN","ICPTMOD",90,0)
 S CODE=$S(CODE?1.N:+CODE,1:$$CODEN(CODE)),I=0,N=0
"RTN","ICPTMOD",91,0)
 I CODE<1!'$D(^DIC(81.3,CODE)) S N="-1^NO SUCH CODE" G MODDQ
"RTN","ICPTMOD",92,0)
 S CDT=$S($G(CDT)="":$$DT^XLFDT,1:$$DTBR^ICPTSUPT(CDT))
"RTN","ICPTMOD",93,0)
 D VLTCM(+CODE,CDT,.CTV)
"RTN","ICPTMOD",94,0)
 S (N,I)=0 F  S I=$O(CTV(I)) Q:+I=0  D
"RTN","ICPTMOD",95,0)
 . S N=N+1,ARR=OUTARR_N_")",@ARR=$$TRIM($G(CTV(I)))
"RTN","ICPTMOD",96,0)
 I +N>0 D
"RTN","ICPTMOD",97,0)
 . S N=N+1,ARR=OUTARR_N_")",@ARR=" "
"RTN","ICPTMOD",98,0)
 . S N=N+1,ARR=OUTARR_N_")",@ARR=$$MSG^ICPTSUPT(CDT,1)
"RTN","ICPTMOD",99,0)
 I +N'>0 S N="-1^VERSIONED DESCRIPTION NOT FOUND FOR MODIFIER "_$P($G(^DIC(81.3,+CODE,0)),"^",1)
"RTN","ICPTMOD",100,0)
MODDQ ; Modifier Description Quit
"RTN","ICPTMOD",101,0)
 Q N
"RTN","ICPTMOD",102,0)
 ;
"RTN","ICPTMOD",103,0)
MODA(CODE,VDT,ARY) ; Return an array of Modifiers for a CPT Code
"RTN","ICPTMOD",104,0)
 D MODA^ICPTMOD2 Q
"RTN","ICPTMOD",105,0)
MODP(CODE,MOD,MFT,MDT,SRC,DFN) ;  Check if modifier can be used with code
"RTN","ICPTMOD",106,0)
 Q $$MODP^ICPTMOD2($G(CODE),$G(MOD),$G(MFT),$G(MDT),$G(SRC),$G(DFN))
"RTN","ICPTMOD",107,0)
MODC(MOD) ; Checks modifier for range including code
"RTN","ICPTMOD",108,0)
 D MODC^ICPTMOD2($G(MOD))
"RTN","ICPTMOD",109,0)
 Q
"RTN","ICPTMOD",110,0)
MULT ; Finds Duplicate Modifiers
"RTN","ICPTMOD",111,0)
 D MULT^ICPTMOD2 Q
"RTN","ICPTMOD",112,0)
CODEN(CODE)    ; Return the IEN of a CPT modifier CODE
"RTN","ICPTMOD",113,0)
 Q:$G(CODE)="" -1
"RTN","ICPTMOD",114,0)
 N COD S COD=+$O(^DIC(81.3,"BA",(CODE_" "),0))
"RTN","ICPTMOD",115,0)
 Q $S(COD>0:COD,1:-1)
"RTN","ICPTMOD",116,0)
VSTCM(IEN,VDATE) ; Versioned Short Text (CPT Modifier)
"RTN","ICPTMOD",117,0)
 N CPT0,CPTC,CPTI,CPTSTD,CPTSTI,CPTVDT,CPTTXT,CPTTD,CPTTI
"RTN","ICPTMOD",118,0)
 S CPTI=+($G(IEN)) Q:+CPTI'>0 ""  Q:'$D(^DIC(81.3,+CPTI)) ""
"RTN","ICPTMOD",119,0)
 S CPTVDT=$G(VDATE) S:'$L(CPTVDT)!(+CPTVDT'>0) CPTVDT=$$DT^XLFDT Q:$P(CPTVDT,".",1)'?7N ""
"RTN","ICPTMOD",120,0)
 S CPT0=$G(^DIC(81.3,+CPTI,0)),CPTC=$P(CPT0,"^",1) Q:'$L(CPTC) ""
"RTN","ICPTMOD",121,0)
 S CPTSTD=0 S CPTTD=CPTVDT+.000001 F  S CPTTD=$O(^DIC(81.3,"AST",(CPTC_" "),CPTTD),-1) Q:+CPTTD=0  Q:+CPTSTD>0  D
"RTN","ICPTMOD",122,0)
 . S CPTTI=$O(^DIC(81.3,"AST",(CPTC_" "),CPTTD," "),-1) S:CPTTI=CPTI CPTSTD=CPTTD
"RTN","ICPTMOD",123,0)
 I +CPTSTD>0 D  Q:$L($G(CPTTXT)) $G(CPTTXT)
"RTN","ICPTMOD",124,0)
 . S CPTSTI=$O(^DIC(81.3,"AST",(CPTC_" "),CPTSTD,+CPTI," "),-1),CPTTXT=$P($G(^DIC(81.3,+CPTI,61,+CPTSTI,0)),"^",2)
"RTN","ICPTMOD",125,0)
 S CPTSTD=$O(^DIC(81.3,+CPTI,61,"B",0)) I +CPTSTD>0 D  Q:$L($G(CPTTXT)) $G(CPTTXT)
"RTN","ICPTMOD",126,0)
 . S CPTSTI=$O(^DIC(81.3,+CPTI,61,"B",CPTSTD,0)),CPTTXT=$P($G(^DIC(81.3,+CPTI,61,+CPTSTI,0)),"^",2)
"RTN","ICPTMOD",127,0)
 Q $$TRIM($P(CPT0,"^",2))
"RTN","ICPTMOD",128,0)
VLTCM(IEN,VDATE,ARY) ; Versioned Description - Long Text (CPT Modifier)
"RTN","ICPTMOD",129,0)
 N CPT0,CPTC,CPTD,CPTI,CPTSTD,CPTSTI,CPTT,CPTVDT,CPTTXT,CPTTD,CPTTI
"RTN","ICPTMOD",130,0)
 S CPTI=+($G(IEN)) Q:+CPTI'>0  Q:'$D(^DIC(81.3,+CPTI))
"RTN","ICPTMOD",131,0)
 S CPTVDT=$G(VDATE) S:'$L(CPTVDT)!(+CPTVDT'>0) CPTVDT=$$DT^XLFDT Q:$P(CPTVDT,".",1)'?7N
"RTN","ICPTMOD",132,0)
 S CPT0=$G(^DIC(81.3,+CPTI,0)),CPTC=$P(CPT0,"^",1) Q:'$L(CPTC)
"RTN","ICPTMOD",133,0)
 S CPTSTD=0 S CPTTD=CPTVDT+.000001 F  S CPTTD=$O(^DIC(81.3,"ADS",(CPTC_" "),CPTTD),-1) Q:+CPTTD=0  Q:+CPTSTD>0  D
"RTN","ICPTMOD",134,0)
 . S CPTTI=$O(^DIC(81.3,"ADS",(CPTC_" "),CPTTD," "),-1) S:CPTTI=CPTI CPTSTD=CPTTD
"RTN","ICPTMOD",135,0)
 I +CPTSTD>0 D  Q:+($O(ARY(0)))>0
"RTN","ICPTMOD",136,0)
 . S CPTSTI=$O(^DIC(81.3,"ADS",(CPTC_" "),CPTSTD,+CPTI," "),-1)
"RTN","ICPTMOD",137,0)
 . S (CPTD,CPTT)=0 F  S CPTD=$O(^DIC(81.3,+CPTI,62,CPTSTI,1,CPTD)) Q:+CPTD=0  D
"RTN","ICPTMOD",138,0)
 . . S CPTT=CPTT+1,ARY(CPTT)=$$TRIM($G(^DIC(81.3,+CPTI,62,+CPTSTI,1,+CPTD,0))),ARY(0)=CPTT
"RTN","ICPTMOD",139,0)
 S CPTSTD=$O(^DIC(81.3,+CPTI,62,"B",0)) I +CPTSTD>0 D  Q:+($O(ARY(0)))>0
"RTN","ICPTMOD",140,0)
 . S CPTSTI=$O(^DIC(81.3,+CPTI,62,"B",CPTSTD,0))
"RTN","ICPTMOD",141,0)
 . S (CPTD,CPTT)=0 F  S CPTD=$O(^DIC(81.3,+CPTI,62,CPTSTI,1,CPTD)) Q:+CPTD=0  D
"RTN","ICPTMOD",142,0)
 . . S CPTT=CPTT+1,ARY(CPTT)=$$TRIM($G(^DIC(81.3,+CPTI,62,+CPTSTI,1,+CPTD,0))),ARY(0)=CPTT
"RTN","ICPTMOD",143,0)
 K ARY S (CPTD,CPTT)=0 F  S CPTD=$O(^DIC(81.3,CPTI,"D",CPTD)) Q:+CPTD=0  D
"RTN","ICPTMOD",144,0)
 . S CPTT=CPTT+1,ARY(CPTT)=$$TRIM($G(^DIC(81.3,CPTI,"D",CPTD,0))),ARY(0)=CPTT
"RTN","ICPTMOD",145,0)
 Q
"RTN","ICPTMOD",146,0)
TRIM(X) ; Trim Spaces
"RTN","ICPTMOD",147,0)
 S X=$G(X) Q:X="" X F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","ICPTMOD",148,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","ICPTMOD",149,0)
 F  Q:X'["  "  S X=$P(X,"  ",1)_" "_$P(X,"  ",2,229)
"RTN","ICPTMOD",150,0)
 Q X
"RTN","ICPTMOD",151,0)
MO(X) ; Modifier             X = Modifier IEN
"RTN","ICPTMOD",152,0)
 Q $P($G(^DIC(81.3,+($G(X)),0)),"^",1)
"RTN","ICPTMOD2")
0^2^B34943505
"RTN","ICPTMOD2",1,0)
ICPTMOD2 ;ALB/DEK/KER - CPT MODIFIER APIS ;08/18/2007
"RTN","ICPTMOD2",2,0)
 ;;6.0;CPT/HCPCS;**30,37**;May 19, 1997;Build 25
"RTN","ICPTMOD2",3,0)
 ;             
"RTN","ICPTMOD2",4,0)
 ; Global Variables
"RTN","ICPTMOD2",5,0)
 ;    ^DIC(81.3
"RTN","ICPTMOD2",6,0)
 ;    ^ICPT(
"RTN","ICPTMOD2",7,0)
 ;             
"RTN","ICPTMOD2",8,0)
 ; External References
"RTN","ICPTMOD2",9,0)
 ;    $$DT^XLFDT       DBIA  10103
"RTN","ICPTMOD2",10,0)
 ;    $$FMADD^XLFDT    DBIA  10103
"RTN","ICPTMOD2",11,0)
 ;             
"RTN","ICPTMOD2",12,0)
 Q
"RTN","ICPTMOD2",13,0)
MODA ; Create an array of Modifiers for a CPT Code
"RTN","ICPTMOD2",14,0)
 ;
"RTN","ICPTMOD2",15,0)
 ; Input
"RTN","ICPTMOD2",16,0)
 ;     
"RTN","ICPTMOD2",17,0)
 ;     CODE   CPT/HCPCS Code   ?7N / ?1A4N / ?4N1A
"RTN","ICPTMOD2",18,0)
 ;     VDT    Versioning Date (date service provided)
"RTN","ICPTMOD2",19,0)
 ;     .ARY   Name of a Local Array passed by value
"RTN","ICPTMOD2",20,0)
 ; 
"RTN","ICPTMOD2",21,0)
 ; Output
"RTN","ICPTMOD2",22,0)
 ; 
"RTN","ICPTMOD2",23,0)
 ;    ARY    Only returns Active Modifiers
"RTN","ICPTMOD2",24,0)
 ;    ARY(0) = 4 Piece String
"RTN","ICPTMOD2",25,0)
 ;           4 Piece String
"RTN","ICPTMOD2",26,0)
 ;           1   # of Modifiers found for code CODE (input)
"RTN","ICPTMOD2",27,0)
 ;           2   # of Modifiers w/Active Ranges
"RTN","ICPTMOD2",28,0)
 ;           3   # of Modifiers w/Inactive Ranges
"RTN","ICPTMOD2",29,0)
 ;           4   Code
"RTN","ICPTMOD2",30,0)
 ;                  
"RTN","ICPTMOD2",31,0)
 ;    ARY(ST,MOD) = 8 Piece Output String
"RTN","ICPTMOD2",32,0)
 ;    
"RTN","ICPTMOD2",33,0)
 ;      ST   Status A=Active I=Inactive
"RTN","ICPTMOD2",34,0)
 ;      MOD  Modifier (external format)
"RTN","ICPTMOD2",35,0)
 ;           8 Piece String
"RTN","ICPTMOD2",36,0)
 ;           1   IEN of Modifier
"RTN","ICPTMOD2",37,0)
 ;           2   Versioned Short Text (name)
"RTN","ICPTMOD2",38,0)
 ;           3   Activation date of Modifier
"RTN","ICPTMOD2",39,0)
 ;           4   Beginning Range Code
"RTN","ICPTMOD2",40,0)
 ;           5   Ending Range Code
"RTN","ICPTMOD2",41,0)
 ;           6   Activation Date of Range
"RTN","ICPTMOD2",42,0)
 ;           7   Inactivation Date of Range
"RTN","ICPTMOD2",43,0)
 ;           8   Modifier Identifier
"RTN","ICPTMOD2",44,0)
 ;                    
"RTN","ICPTMOD2",45,0)
 N A,EFF,I,ID,MIEN,MOD,SRC,ST,X K ARY
"RTN","ICPTMOD2",46,0)
 S CODE=$G(CODE) Q:'$D(^ICPT("BA",(CODE_" ")))
"RTN","ICPTMOD2",47,0)
 S VDT=$G(VDT) S:+VDT'>0 VDT=$$DT^XLFDT Q:VDT'?7N
"RTN","ICPTMOD2",48,0)
 S SRC=3,MIEN=0 F  S MIEN=$O(^DIC(81.3,MIEN)) Q:+MIEN'>0  D
"RTN","ICPTMOD2",49,0)
 . S (EFF,ST)=$O(^DIC(81.3,MIEN,60,"B"," "),-1) Q:ST'>0  S ST=$O(^DIC(81.3,MIEN,60,"B",ST," "),-1) Q:ST'>0  S ST=$P($G(^DIC(81.3,MIEN,60,ST,0)),"^",2) Q:ST'>0
"RTN","ICPTMOD2",50,0)
 . S MOD=$P($G(^DIC(81.3,MIEN,0)),"^",1) Q:'$L(MOD)
"RTN","ICPTMOD2",51,0)
 . S X=$$MODP(CODE,MIEN,"I",VDT,0) S ID=$P(X,"^",6) S ID=$S(+ID>0:"I",1:"A")
"RTN","ICPTMOD2",52,0)
 . S:+X>0 ARY(ID,MOD)=$P(X,"^",1,2)_"^"_EFF_"^"_$P(X,"^",3,7)
"RTN","ICPTMOD2",53,0)
 S (A,I)=0,ST="" F  S ST=$O(ARY(ST)) Q:ST=""  S MOD="" F  S MOD=$O(ARY(ST,MOD)) Q:MOD=""  S:ST="A" A=A+1 S:ST="I" I=I+1
"RTN","ICPTMOD2",54,0)
 S ST=A+I,ARY(0)=ST_"^"_A_"^"_I_"^"_CODE
"RTN","ICPTMOD2",55,0)
 Q
"RTN","ICPTMOD2",56,0)
 ;            
"RTN","ICPTMOD2",57,0)
MODP(CODE,MOD,MFT,MDT,SRC,DFN) ;  Check if modifier can be used with code (pair)
"RTN","ICPTMOD2",58,0)
 ;
"RTN","ICPTMOD2",59,0)
 ; Input:
"RTN","ICPTMOD2",60,0)
 ; 
"RTN","ICPTMOD2",61,0)
 ;    CODE   CPT/HCPCS Code ?7N / ?1A4N / ?4N1A
"RTN","ICPTMOD2",62,0)
 ;    MOD    Modifier (External or Internal)
"RTN","ICPTMOD2",63,0)
 ;    MFT    Modifier Format "E" - or "I"
"RTN","ICPTMOD2",64,0)
 ;    VDT    Date service provided
"RTN","ICPTMOD2",65,0)
 ;    SRC    Source Screen
"RTN","ICPTMOD2",66,0)
 ;               If 0 or Null, Level I and II modifiers
"RTN","ICPTMOD2",67,0)
 ;               If >0, Level I, II, and III modifiers
"RTN","ICPTMOD2",68,0)
 ; Output:
"RTN","ICPTMOD2",69,0)
 ;
"RTN","ICPTMOD2",70,0)
 ;    If pair is acceptable - Positive "^" Delimited String
"RTN","ICPTMOD2",71,0)
 ;        
"RTN","ICPTMOD2",72,0)
 ;        1 - IEN of CPT Modifier
"RTN","ICPTMOD2",73,0)
 ;        2 - Versioned Short Text
"RTN","ICPTMOD2",74,0)
 ;        3 - Beginning Code for Code Range
"RTN","ICPTMOD2",75,0)
 ;        4 - Ending Code for Code Range
"RTN","ICPTMOD2",76,0)
 ;        5 - Code Range Activaiton Date
"RTN","ICPTMOD2",77,0)
 ;        6 - Code Range Inactivation Date
"RTN","ICPTMOD2",78,0)
 ;        7 - Modifier Identifier
"RTN","ICPTMOD2",79,0)
 ;        
"RTN","ICPTMOD2",80,0)
 ;    If pair is unacceptable
"RTN","ICPTMOD2",81,0)
 ;    
"RTN","ICPTMOD2",82,0)
 ;        0 or
"RTN","ICPTMOD2",83,0)
 ;       -1 with error message
"RTN","ICPTMOD2",84,0)
 ;  
"RTN","ICPTMOD2",85,0)
 N ADT,BEGA,BEGR,CDT,CODEA,CODN,ENDA,ENDR,ICD,IDT,LACT,LINA,MIEN,MODEFF,MODI,MODNM,MODST,ND,NSTA,RIEN,RSTA,SIEN,STA,STI,STX,TA,TEFF,TI,TIEN,VDT
"RTN","ICPTMOD2",86,0)
 S:$G(MFT)="" MFT="E" Q:"^E^I^"'[("^"_MFT_"^") "-1^Invalid Modifier Format"  S VDT=$P($G(MDT),".",1)
"RTN","ICPTMOD2",87,0)
 S:+VDT'?7N VDT=$$DT^XLFDT S:VDT#10000=0 VDT=VDT+101 S:VDT#100=0 VDT=VDT+1 S VDT=$S(VDT<2890101:2890101,1:VDT)
"RTN","ICPTMOD2",88,0)
 Q:+VDT'>0!(VDT'?7N) "-1^Invalid Date"  I MFT="E" D  I +($G(MIEN))'>0 Q "-1^Multiple Modifiers with the same name, use IEN"
"RTN","ICPTMOD2",89,0)
 . S MIEN=0 S (TIEN,TI)=0 F  S TIEN=$O(^DIC(81.3,"B",MOD,TIEN)) Q:+TIEN'>0  D
"RTN","ICPTMOD2",90,0)
 . . S TEFF=$$EFF^ICPTSUPT(81.3,TIEN,VDT) Q:'$P(TEFF,"^",2)  S TI=TI+1,TA(TI)=TIEN,TA(0)=TI
"RTN","ICPTMOD2",91,0)
 . S:+($G(TA(0)))=1 MIEN=+($G(TA(1)))
"RTN","ICPTMOD2",92,0)
 S:MFT="I" MIEN=+MOD S CODE=$G(CODE),CODN=$S(CODE?1.N:+CODE,1:$$CODEN^ICPTCOD(CODE)) I CODN<1!'$D(^ICPT(CODN,0)) Q "-1^NO SUCH CPT CODE"
"RTN","ICPTMOD2",93,0)
 S CODE=$P($G(^ICPT(CODN,0)),"^") Q:'$L(CODE) "-1^No such CPT Code"  Q:$L(CODE)'=5 "-1^Invalid Code"
"RTN","ICPTMOD2",94,0)
 S CODEA=$S(CODE?1N.4N:+CODE,CODE?4N1A:$A($E(CODE,5))*10_$E(CODE,1,4),1:$A(CODE)_$E(CODE,2,5)) Q:+CODEA'>0 "-1^Invalid Code Source"
"RTN","ICPTMOD2",95,0)
 S MIEN=$G(MIEN) Q:+MIEN'>0 "-1^Invalid Modifier"  S SRC=$S(+($G(SRC))>0:1,1:0),SIEN=$O(^ICPT("BA",(CODE_" "),0)) Q:+SIEN'>0 "-3^Invalid Code"
"RTN","ICPTMOD2",96,0)
 Q:$P($G(^ICPT(+SIEN,0)),"^",6)="L"&(SRC'>0) "-1^Invalid Code Source"
"RTN","ICPTMOD2",97,0)
 S MODEFF=$$EFF^ICPTSUPT(81.3,MIEN,VDT) Q:'$P(MODEFF,"^",2) "-1^Modifier Inactive"
"RTN","ICPTMOD2",98,0)
 S MODNM=$P($G(^DIC(81.3,MIEN,0)),"^",2) Q:'$L(MODNM) "-1^Invalid Modifier Name"
"RTN","ICPTMOD2",99,0)
 S MODI=$P($G(^DIC(81.3,MIEN,0)),"^",1) Q:'$L(MODI) "-1^Invalid Modifier ID"
"RTN","ICPTMOD2",100,0)
 S MODST=$$VSTCM^ICPTMOD(MIEN,VDT) K STX S (STA,STI)=0 S CDT=VDT+.001
"RTN","ICPTMOD2",101,0)
 S (LINA,LACT)="",RSTA=0,RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","ICPTMOD2",102,0)
 . N NSTA S NSTA=0,ND=$G(^DIC(81.3,MIEN,10,RIEN,0))
"RTN","ICPTMOD2",103,0)
 . S BEGR=$P(ND,"^",1) Q:$L(BEGR)'=5  S BEGA=$S(BEGR?1N.4N:+BEGR,BEGR?4N1A:$A($E(BEGR,5))*10_$E(BEGR,1,4),1:$A(BEGR)_$E(BEGR,2,5)) Q:+CODEA<+BEGA
"RTN","ICPTMOD2",104,0)
 . S ENDR=$P(ND,"^",2) S:$L(ENDR)'=5 ENDR=BEGR S ENDA=$S(ENDR?1N.4N:+ENDR,ENDR?4N1A:$A($E(ENDR,5))*10_$E(ENDR,1,4),1:$A(ENDR)_$E(ENDR,2,5))
"RTN","ICPTMOD2",105,0)
 . Q:$L(ENDR)&(CODEA>ENDA)  S ADT=$P(ND,"^",3),(ICD,IDT)=$P(ND,"^",4) S:ADT="" ADT=2890101
"RTN","ICPTMOD2",106,0)
 . I +CODEA'<+BEGA,+CODEA'>ENDA,+ADT>0,+IDT'>0 S RSTA=1,NSTA=1 S:+ADT>0&(+ADT>(+LACT)) LACT=+ADT
"RTN","ICPTMOD2",107,0)
 . I +CODEA'<+BEGA,+CODEA'>ENDA,+ADT>0,+IDT>0,CDT>ADT,CDT'>IDT S RSTA=1,NSTA=1 S:+ADT>0&(+ADT>(+LACT)) LACT=+ADT
"RTN","ICPTMOD2",108,0)
 . I +CODEA'<+BEGA,+CODEA'>ENDA,+ADT>0,+IDT>0 S:+IDT>0&(+IDT>(+LINA)) LINA=+IDT
"RTN","ICPTMOD2",109,0)
 . Q:NSTA'>0  S:'$L(IDT) IDT=$$FMADD^XLFDT($$DT^XLFDT,365) S ADT=$P(ND,"^",3),(ICD,IDT)=$P(ND,"^",4) S:ADT="" ADT=2890101
"RTN","ICPTMOD2",110,0)
 . S:'$L(IDT) IDT=$$FMADD^XLFDT($$DT^XLFDT,365) S STA=+($G(STA))+1,STX(STA)=MIEN_"^"_MODST_"^"_BEGR_"^"_ENDR_"^"_ADT_"^"_ICD_"^"_MODI,STX("B",+ADT,+STA)=""
"RTN","ICPTMOD2",111,0)
 S:+LACT>0&(+LINA>0)&(LINA'>CDT)&(+LINA>+LACT) RSTA=0
"RTN","ICPTMOD2",112,0)
 S ADT=$O(STX("B",+CDT),-1),STA=$O(STX("B",+ADT," "),-1),MOD=$G(STX(+STA))
"RTN","ICPTMOD2",113,0)
 Q:+MOD'>0 "0"  Q:+RSTA'>0 "0"
"RTN","ICPTMOD2",114,0)
 Q MOD
"RTN","ICPTMOD2",115,0)
 ;            
"RTN","ICPTMOD2",116,0)
MODC(MOD) ; Checks modifier for active range including code
"RTN","ICPTMOD2",117,0)
 ;
"RTN","ICPTMOD2",118,0)
 ; Input:
"RTN","ICPTMOD2",119,0)
 ;    MOD  - modifier ien
"RTN","ICPTMOD2",120,0)
 ;
"RTN","ICPTMOD2",121,0)
 N MODNM,MODEFF
"RTN","ICPTMOD2",122,0)
 S MODEFF=$$EFF^ICPTSUPT(81.3,MOD,MDT)
"RTN","ICPTMOD2",123,0)
 I '$P(MODEFF,"^",2) S STR="-1^modifier inactive" Q
"RTN","ICPTMOD2",124,0)
 S PR=CODEA_.0001,PR=$O(^DIC(81.3,MOD,"M",PR),-1)
"RTN","ICPTMOD2",125,0)
 I 'PR S STR=0 Q
"RTN","ICPTMOD2",126,0)
 S PRN=^DIC(81.3,MOD,"M",PR)
"RTN","ICPTMOD2",127,0)
 I 'PRN S STR="-1^bad modifier file entry" Q
"RTN","ICPTMOD2",128,0)
 I PRN<CODEA S STR=0 Q
"RTN","ICPTMOD2",129,0)
 S MODNM=$P($G(^DIC(81.3,MOD,0)),"^",2)
"RTN","ICPTMOD2",130,0)
 S STR=MOD_"^"_MODNM
"RTN","ICPTMOD2",131,0)
 Q
"RTN","ICPTMOD2",132,0)
 ;
"RTN","ICPTMOD2",133,0)
MULT ; Finds iens for all modifiers with same 2-letter code
"RTN","ICPTMOD2",134,0)
 ;  MOD = .01, check B x-ref for dupliate .01 fields
"RTN","ICPTMOD2",135,0)
 ;  Output:
"RTN","ICPTMOD2",136,0)
 ;     STR - a ";" delimited string of IENS for modifier MOD
"RTN","ICPTMOD2",137,0)
 F MODN=0:0 S MODN=$O(^DIC(81.3,"B",MOD,MODN)) Q:'MODN   S STR=STR_MODN_"; "
"RTN","ICPTMOD2",138,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
ICD*18.0*29
"BLD",6828,0)
ICD*18.0*29^DRG GROUPER^0^3071026^y
"BLD",6828,1,0)
^^12^12^3071024^
"BLD",6828,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6828,1,2,0)
included in this patch.  This patch is part of a multi-package 
"BLD",6828,1,3,0)
distribution and includes the following patches installed in
"BLD",6828,1,4,0)
the following order:
"BLD",6828,1,5,0)
 
"BLD",6828,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"BLD",6828,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"BLD",6828,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"BLD",6828,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"BLD",6828,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"BLD",6828,1,11,0)
 
"BLD",6828,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"BLD",6828,4,0)
^9.64PA^80^1
"BLD",6828,4,80,0)
80
"BLD",6828,4,80,222)
y^y^f^^^^n
"BLD",6828,4,"B",80,80)

"BLD",6828,6.3)
18
"BLD",6828,"KRN",0)
^9.67PA^8989.52^19
"BLD",6828,"KRN",.4,0)
.4
"BLD",6828,"KRN",.401,0)
.401
"BLD",6828,"KRN",.402,0)
.402
"BLD",6828,"KRN",.403,0)
.403
"BLD",6828,"KRN",.5,0)
.5
"BLD",6828,"KRN",.84,0)
.84
"BLD",6828,"KRN",3.6,0)
3.6
"BLD",6828,"KRN",3.8,0)
3.8
"BLD",6828,"KRN",9.2,0)
9.2
"BLD",6828,"KRN",9.8,0)
9.8
"BLD",6828,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6828,"KRN",9.8,"NM",1,0)
ICDCODE^^0^B75863718
"BLD",6828,"KRN",9.8,"NM","B","ICDCODE",1)

"BLD",6828,"KRN",19,0)
19
"BLD",6828,"KRN",19.1,0)
19.1
"BLD",6828,"KRN",101,0)
101
"BLD",6828,"KRN",409.61,0)
409.61
"BLD",6828,"KRN",771,0)
771
"BLD",6828,"KRN",870,0)
870
"BLD",6828,"KRN",8989.51,0)
8989.51
"BLD",6828,"KRN",8989.52,0)
8989.52
"BLD",6828,"KRN",8994,0)
8994
"BLD",6828,"KRN","B",.4,.4)

"BLD",6828,"KRN","B",.401,.401)

"BLD",6828,"KRN","B",.402,.402)

"BLD",6828,"KRN","B",.403,.403)

"BLD",6828,"KRN","B",.5,.5)

"BLD",6828,"KRN","B",.84,.84)

"BLD",6828,"KRN","B",3.6,3.6)

"BLD",6828,"KRN","B",3.8,3.8)

"BLD",6828,"KRN","B",9.2,9.2)

"BLD",6828,"KRN","B",9.8,9.8)

"BLD",6828,"KRN","B",19,19)

"BLD",6828,"KRN","B",19.1,19.1)

"BLD",6828,"KRN","B",101,101)

"BLD",6828,"KRN","B",409.61,409.61)

"BLD",6828,"KRN","B",771,771)

"BLD",6828,"KRN","B",870,870)

"BLD",6828,"KRN","B",8989.51,8989.51)

"BLD",6828,"KRN","B",8989.52,8989.52)

"BLD",6828,"KRN","B",8994,8994)

"BLD",6828,"QUES",0)
^9.62^^
"BLD",6828,"REQB",0)
^9.611^3^3
"BLD",6828,"REQB",1,0)
ICD*18.0*14^2
"BLD",6828,"REQB",2,0)
ICD*18.0*27^2
"BLD",6828,"REQB",3,0)
LEX*2.0*50^2
"BLD",6828,"REQB","B","ICD*18.0*14",1)

"BLD",6828,"REQB","B","ICD*18.0*27",2)

"BLD",6828,"REQB","B","LEX*2.0*50",3)

"FIA",80)
ICD DIAGNOSIS
"FIA",80,0)
^ICD9(
"FIA",80,0,0)
80OI
"FIA",80,0,1)
y^y^f^^^^n
"FIA",80,0,10)

"FIA",80,0,11)

"FIA",80,0,"RLRO")

"FIA",80,0,"VR")
18.0^ICD
"FIA",80,80)
0
"FIA",80,80.01)
0
"FIA",80,80.0103)
0
"FIA",80,80.02)
0
"FIA",80,80.03)
0
"FIA",80,80.066)
0
"FIA",80,80.067)
0
"FIA",80,80.068)
0
"FIA",80,80.071)
0
"FIA",80,80.072)
0
"FIA",80,80.711)
0
"MBREQ")
0
"PKG",283,-1)
1^1
"PKG",283,0)
DRG GROUPER^ICD^DRG GROUPER^^^3010710
"PKG",283,20,0)
^9.402P^^
"PKG",283,22,0)
^9.49I^1^1
"PKG",283,22,1,0)
18.0^3001020^3001020^1118
"PKG",283,22,1,"PAH",1,0)
29^3071026^1118
"PKG",283,22,1,"PAH",1,1,0)
^^12^12^3071026
"PKG",283,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",283,22,1,"PAH",1,1,2,0)
included in this patch.  This patch is part of a multi-package 
"PKG",283,22,1,"PAH",1,1,3,0)
distribution and includes the following patches installed in
"PKG",283,22,1,"PAH",1,1,4,0)
the following order:
"PKG",283,22,1,"PAH",1,1,5,0)
 
"PKG",283,22,1,"PAH",1,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"PKG",283,22,1,"PAH",1,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"PKG",283,22,1,"PAH",1,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"PKG",283,22,1,"PAH",1,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"PKG",283,22,1,"PAH",1,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"PKG",283,22,1,"PAH",1,1,11,0)
 
"PKG",283,22,1,"PAH",1,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ICDCODE")
0^1^B75863718
"RTN","ICDCODE",1,0)
ICDCODE ;DLS/DEK/KER/FJF - ICD CODE APIS ; 09/20/07 8:54am
"RTN","ICDCODE",2,0)
 ;;18.0;DRG Grouper;**6,12,14,29**;Oct 20, 2000;Build 18
"RTN","ICDCODE",3,0)
 ;
"RTN","ICDCODE",4,0)
 ; External References
"RTN","ICDCODE",5,0)
 ;   DBIA 10103  $$DT^XLFDT
"RTN","ICDCODE",6,0)
 ;
"RTN","ICDCODE",7,0)
ICDDX(CODE,CDT,DFN,SRC) ; Return ICD Dx Code Info
"RTN","ICDCODE",8,0)
 ;Input:
"RTN","ICDCODE",9,0)
 ;  CODE  Code/IEN (required)
"RTN","ICDCODE",10,0)
 ;    CDT  Date (default = TODAY)
"RTN","ICDCODE",11,0)
 ;    DFN  Not in use
"RTN","ICDCODE",12,0)
 ;    SRC  Source
"RTN","ICDCODE",13,0)
 ;         0 = exclude local codes
"RTN","ICDCODE",14,0)
 ;         1 = include local codes
"RTN","ICDCODE",15,0)
 ;
"RTN","ICDCODE",16,0)
 ;Output:
"RTN","ICDCODE",17,0)
 ;  Returns an 19 piece string delimited by ^
"RTN","ICDCODE",18,0)
 ;    1  IEN of code in ^ICD9(
"RTN","ICDCODE",19,0)
 ;    2  ICD-9 Dx Code (#.01)
"RTN","ICDCODE",20,0)
 ;    3  Id (#2)
"RTN","ICDCODE",21,0)
 ;    4  Versioned Dx (67 multiple)
"RTN","ICDCODE",22,0)
 ;    5  Unacceptable as Principal Dx (#101)
"RTN","ICDCODE",23,0)
 ;    6  Major Dx Cat (#5)
"RTN","ICDCODE",24,0)
 ;    7  MDC13 (5.5)
"RTN","ICDCODE",25,0)
 ;    8  Compl/Comorb (#70)
"RTN","ICDCODE",26,0)
 ;    9  ICD Expanded (#8) 1:Yes 0:No
"RTN","ICDCODE",27,0)
 ;    10 Status (66 multiple)
"RTN","ICDCODE",28,0)
 ;    11 Sex (#9.5)
"RTN","ICDCODE",29,0)
 ;    12 Inactive Date (66 multiple)
"RTN","ICDCODE",30,0)
 ;    13 MDC24 (#5.7)
"RTN","ICDCODE",31,0)
 ;    14 MDC25 (#5.9)
"RTN","ICDCODE",32,0)
 ;    15 Age Low (#14)
"RTN","ICDCODE",33,0)
 ;    16 Age High (#15)
"RTN","ICDCODE",34,0)
 ;    17 Activation Date (.01 of 66 multiple)
"RTN","ICDCODE",35,0)
 ;    18 Message
"RTN","ICDCODE",36,0)
 ;    19 Versioned Complication/Comorbidity (#103)
"RTN","ICDCODE",37,0)
 ;
"RTN","ICDCODE",38,0)
 ;    or
"RTN","ICDCODE",39,0)
 ;
"RTN","ICDCODE",40,0)
 ;    -1^Error Description
"RTN","ICDCODE",41,0)
 ;
"RTN","ICDCODE",42,0)
 N DATA,EFF,INV,MDC,DRGFY
"RTN","ICDCODE",43,0)
 I $G(CODE)="" Q "-1^NO CODE SELECTED"
"RTN","ICDCODE",44,0)
 S INV="-1^INVALID CODE",CODE=+$$CODEN(CODE,80)
"RTN","ICDCODE",45,0)
 I CODE<1 Q INV
"RTN","ICDCODE",46,0)
 I '$D(^ICD9(CODE)) Q INV
"RTN","ICDCODE",47,0)
 I '$G(SRC),$P(^ICD9(CODE,0),U,8) Q "-1^VA LOCAL CODE SELECTED"
"RTN","ICDCODE",48,0)
 S DATA=$G(^ICD9(CODE,0)) I '$L(DATA) Q "-1^NO DATA"
"RTN","ICDCODE",49,0)
 S CDT=$S($G(CDT)="":$$DT^XLFDT,1:$$DTBR^ICDAPIU(CDT))
"RTN","ICDCODE",50,0)
 S EFF=$$EFF^ICDSUPT(80,CODE,CDT)
"RTN","ICDCODE",51,0)
 S $P(DATA,U,6)=$$VMDC^ICDREF(CODE)
"RTN","ICDCODE",52,0)
 S $P(DATA,U,9)=$S(EFF<1:0,1:$P(EFF,U))
"RTN","ICDCODE",53,0)
 S $P(DATA,U,11)=$P(EFF,U,2),$P(DATA,U,16)=$P(EFF,U,3)
"RTN","ICDCODE",54,0)
 S $P(DATA,U,3)=$$VSTD(CODE,CDT)
"RTN","ICDCODE",55,0)
 S $P(DATA,U,17)=$$MSG^ICDAPIU(CDT)
"RTN","ICDCODE",56,0)
 S $P(DATA,U,18)=$S($$COMCOM(CODE,CDT)'=-1:$$COMCOM(CODE,CDT),1:"")
"RTN","ICDCODE",57,0)
 Q CODE_U_DATA
"RTN","ICDCODE",58,0)
 ;
"RTN","ICDCODE",59,0)
ICDOP(CODE,CDT,DFN,SRC) ; Return ICD Operation/Procedure Code Info
"RTN","ICDCODE",60,0)
 ;Input:
"RTN","ICDCODE",61,0)
 ;  CODE  ICD code or IEN format, (required)
"RTN","ICDCODE",62,0)
 ;    CDT  Date (default = TODAY)
"RTN","ICDCODE",63,0)
 ;    DFN  Not in use
"RTN","ICDCODE",64,0)
 ;    SRC  Source
"RTN","ICDCODE",65,0)
 ;           0 = exclude local codes
"RTN","ICDCODE",66,0)
 ;           1 = include local codes
"RTN","ICDCODE",67,0)
 ;
"RTN","ICDCODE",68,0)
 ;Output:
"RTN","ICDCODE",69,0)
 ;  Returns an 14 piece string delimited by ^
"RTN","ICDCODE",70,0)
 ;    1  IEN of code in ^ICD9(
"RTN","ICDCODE",71,0)
 ;    2  ICD-9 code (#.01)
"RTN","ICDCODE",72,0)
 ;    3  Id (#2)
"RTN","ICDCODE",73,0)
 ;    4  MDC24 (#5)
"RTN","ICDCODE",74,0)
 ;    5  Versioned Oper/Proc (67 multiple)
"RTN","ICDCODE",75,0)
 ;    6  <null>
"RTN","ICDCODE",76,0)
 ;    7  <null>
"RTN","ICDCODE",77,0)
 ;    8  <null>
"RTN","ICDCODE",78,0)
 ;    9  ICD Expanded (#8) 1:Yes 0:No
"RTN","ICDCODE",79,0)
 ;    10 Status (66 multiple)
"RTN","ICDCODE",80,0)
 ;    11 Use with Sex (#9.5)
"RTN","ICDCODE",81,0)
 ;    12 Inactive Date (66 multiple)
"RTN","ICDCODE",82,0)
 ;    13 Activation Date (66 multiple)
"RTN","ICDCODE",83,0)
 ;    14 Message
"RTN","ICDCODE",84,0)
 ;
"RTN","ICDCODE",85,0)
 ;    or
"RTN","ICDCODE",86,0)
 ;
"RTN","ICDCODE",87,0)
 ;    -1^Error Description
"RTN","ICDCODE",88,0)
 ;
"RTN","ICDCODE",89,0)
 N DATA,EFF,STR,INV
"RTN","ICDCODE",90,0)
 I $G(CODE)="" Q "-1^NO CODE SELECTED"
"RTN","ICDCODE",91,0)
 S INV="-1^INVALID CODE",CODE=+$$CODEN(CODE,80.1)
"RTN","ICDCODE",92,0)
 I CODE<1 Q INV
"RTN","ICDCODE",93,0)
 I '$D(^ICD0(CODE)) Q INV
"RTN","ICDCODE",94,0)
 I '$G(SRC),$P(^ICD0(CODE,0),U,8) Q "-1^VA LOCAL CODE SELECTED"
"RTN","ICDCODE",95,0)
 S DATA=$G(^ICD0(CODE,0)) I '$L(DATA) Q "-1^NO DATA"
"RTN","ICDCODE",96,0)
 S CDT=$S($G(CDT)="":$$DT^XLFDT,1:$$DTBR^ICDAPIU(CDT))
"RTN","ICDCODE",97,0)
 S EFF=$$EFF^ICDSUPT(80.1,CODE,CDT)
"RTN","ICDCODE",98,0)
 S $P(DATA,U,9)=$S(EFF<1:0,1:$P(EFF,U))
"RTN","ICDCODE",99,0)
 S $P(DATA,U,11,12)=$P(EFF,U,2,3)
"RTN","ICDCODE",100,0)
 S $P(DATA,U,4)=$$VSTP(CODE,CDT)
"RTN","ICDCODE",101,0)
 Q CODE_U_DATA_U_$$MSG^ICDAPIU(CDT)
"RTN","ICDCODE",102,0)
 ;
"RTN","ICDCODE",103,0)
ICDD(CODE,OUTARR,CDT) ; returns ICD description in array
"RTN","ICDCODE",104,0)
 ;Input:
"RTN","ICDCODE",105,0)
 ;  CODE   ICD Code or IEN (required)
"RTN","ICDCODE",106,0)
 ;    ARY    Array Name for description
"RTN","ICDCODE",107,0)
 ;           e.g. "ABC" or "ABC("TEST")"
"RTN","ICDCODE",108,0)
 ;           Default = ^TMP("ICDD",$J)
"RTN","ICDCODE",109,0)
 ;    CDT    Date (default = TODAY)
"RTN","ICDCODE",110,0)
 ;
"RTN","ICDCODE",111,0)
 ;Output:
"RTN","ICDCODE",112,0)
 ;  #   Number of lines in array
"RTN","ICDCODE",113,0)
 ;
"RTN","ICDCODE",114,0)
 ;  @ARY(1:n) - Versioned Description (68 multiple)
"RTN","ICDCODE",115,0)
 ;  @ARY(n+1) - blank
"RTN","ICDCODE",116,0)
 ;  @ARY(n+1) - message: CODE TEXT MAY BE INACCURATE
"RTN","ICDCODE",117,0)
 ;
"RTN","ICDCODE",118,0)
 ;  or
"RTN","ICDCODE",119,0)
 ;
"RTN","ICDCODE",120,0)
 ;  -1^Error Description
"RTN","ICDCODE",121,0)
 ;
"RTN","ICDCODE",122,0)
 ; ** NOTE - USER MUST INITIALIZE ^TMP("ICDD",$J), IF USED **
"RTN","ICDCODE",123,0)
 ;
"RTN","ICDCODE",124,0)
 N ARR,END,I,N,GLOB,INV
"RTN","ICDCODE",125,0)
 I $G(CODE)="" Q "-1^NO CODE SELECTED"
"RTN","ICDCODE",126,0)
 S INV="-1^INVALID CODE"
"RTN","ICDCODE",127,0)
 I CODE?1.9N Q "-1^"_INV
"RTN","ICDCODE",128,0)
 S CODE=$$CODEN(CODE),GLOB=$P(CODE,"~",2),CODE=+CODE
"RTN","ICDCODE",129,0)
 I CODE<1!(GLOB["INVALID") Q INV ;if no code, return error
"RTN","ICDCODE",130,0)
 I '$D(@(GLOB_CODE_")")) Q INV ;if no code, return error
"RTN","ICDCODE",131,0)
 I $G(OUTARR)="" S OUTARR="^TMP(""ICDD"",$J,"
"RTN","ICDCODE",132,0)
 ;ensure OUTARR is proper format
"RTN","ICDCODE",133,0)
 I OUTARR'["(" S OUTARR=OUTARR_"("
"RTN","ICDCODE",134,0)
 I OUTARR[")" S OUTARR=$P(OUTARR,")")
"RTN","ICDCODE",135,0)
 S END=$E(OUTARR,$L(OUTARR)) I END'="("&(END'=",") S OUTARR=OUTARR_","
"RTN","ICDCODE",136,0)
 ;clear ^TMP("ICDD",$J - if used
"RTN","ICDCODE",137,0)
 I OUTARR="^TMP(""ICDD"",$J," K ^TMP("ICDD",$J)
"RTN","ICDCODE",138,0)
 S I=0,N=0,CDT=$S($G(CDT)="":$$DT^XLFDT,1:$$DTBR^ICDAPIU(CDT))
"RTN","ICDCODE",139,0)
 S N=N+1,ARR=OUTARR_N_")",@ARR=$$VLT(CODE,CDT,GLOB)
"RTN","ICDCODE",140,0)
 S N=N+1,ARR=OUTARR_N_")",@ARR=" "
"RTN","ICDCODE",141,0)
 S N=N+1,ARR=OUTARR_N_")",@ARR=$$MSG^ICDAPIU(CDT)
"RTN","ICDCODE",142,0)
 Q N
"RTN","ICDCODE",143,0)
 ;
"RTN","ICDCODE",144,0)
CODEN(CODE,FILE) ; return ien of ICD code
"RTN","ICDCODE",145,0)
 ;Input:
"RTN","ICDCODE",146,0)
 ;  CODE - ICD code (required)
"RTN","ICDCODE",147,0)
 ;  FILE - File Number to search for code
"RTN","ICDCODE",148,0)
 ;          80 = ICD Dx file
"RTN","ICDCODE",149,0)
 ;          80.1 = ICD Oper/Proc file
"RTN","ICDCODE",150,0)
 ;
"RTN","ICDCODE",151,0)
 ;Output:
"RTN","ICDCODE",152,0)
 ;  ien~global root
"RTN","ICDCODE",153,0)
 ;    where global root is:
"RTN","ICDCODE",154,0)
 ;      "^ICD9(" - File 80
"RTN","ICDCODE",155,0)
 ;      "^ICD0(" - File 80.1
"RTN","ICDCODE",156,0)
 ;  or
"RTN","ICDCODE",157,0)
 ;  -1~error message
"RTN","ICDCODE",158,0)
 ;
"RTN","ICDCODE",159,0)
 I $G(CODE)="" Q "-1~NO CODE SELECTED"
"RTN","ICDCODE",160,0)
 N Y,GLOB,INV
"RTN","ICDCODE",161,0)
 S INV="INVALID ",CODE=$P(CODE," ")
"RTN","ICDCODE",162,0)
 ;use FILE if passed
"RTN","ICDCODE",163,0)
 I $G(FILE) D  Q Y_"~"_GLOB
"RTN","ICDCODE",164,0)
 .S GLOB=$S(FILE=80:"^ICD9(",FILE=80.1:"^ICD0(",1:INV_"FILE")
"RTN","ICDCODE",165,0)
 .I $E(GLOB)'=U S Y=-1,GLOB=INV_"FILE" Q
"RTN","ICDCODE",166,0)
 .S Y=$S(CODE?1.9N:$$CODEZ(CODE,GLOB),1:$$CODEBA(CODE,GLOB))
"RTN","ICDCODE",167,0)
 ;FILE not passed - report where found
"RTN","ICDCODE",168,0)
 I CODE?1.9N S GLOB="^ICD9(",Y=$$CODEZ(CODE,GLOB) D  G CODENQ
"RTN","ICDCODE",169,0)
 .I Y<1 S GLOB="^ICD0(",Y=$$CODEZ(CODE,GLOB)
"RTN","ICDCODE",170,0)
 S GLOB=$S(CODE?2N1"."1.3N:"^ICD0(",CODE?3N1".".3N!(CODE?1U2.3N1".".2N):"^ICD9(",1:-1)
"RTN","ICDCODE",171,0)
 S Y=$S('GLOB:$$CODEBA(CODE,GLOB),1:-1)
"RTN","ICDCODE",172,0)
CODENQ I Y<1 S GLOB=INV_"CODE"
"RTN","ICDCODE",173,0)
 Q Y_"~"_GLOB
"RTN","ICDCODE",174,0)
 ;
"RTN","ICDCODE",175,0)
CODEC(CODE,FILE) ;return the ICD code of an ien
"RTN","ICDCODE",176,0)
 ;Input:
"RTN","ICDCODE",177,0)
 ;  CODE - IEN of ICD code    REQUIRED
"RTN","ICDCODE",178,0)
 ;  FILE - File Number to search for code
"RTN","ICDCODE",179,0)
 ;         80 = ICD Dx file
"RTN","ICDCODE",180,0)
 ;         80.1 = ICD Oper/Proc file
"RTN","ICDCODE",181,0)
 ;
"RTN","ICDCODE",182,0)
 ;Output: ICD code, -1 if not found
"RTN","ICDCODE",183,0)
 ;
"RTN","ICDCODE",184,0)
 S CODE=$G(CODE) Q:CODE'?1.9N -1
"RTN","ICDCODE",185,0)
 N Y,GLOB
"RTN","ICDCODE",186,0)
 I $G(FILE) D  Q Y
"RTN","ICDCODE",187,0)
 .S GLOB=$S(FILE=80:"^ICD9(",FILE=80.1:"^ICD0(",1:-1)
"RTN","ICDCODE",188,0)
 .S Y=$S(GLOB<0:-1,1:$$CODEZ(CODE,GLOB))
"RTN","ICDCODE",189,0)
 ;FILE not passed - Search for 1st match
"RTN","ICDCODE",190,0)
 S Y=$$CODEZ(CODE,"^ICD9(",1)
"RTN","ICDCODE",191,0)
 Q $S(+Y<0:$$CODEZ(CODE,"^ICD0(",1),1:Y)
"RTN","ICDCODE",192,0)
 ;
"RTN","ICDCODE",193,0)
CODEZ(CODE,ROOT,FLG) ; Based on IEN/root:
"RTN","ICDCODE",194,0)
 N Y,ICDL            ; if 'FLG return code existence, else zero node - piece 1
"RTN","ICDCODE",195,0)
 S Y=$P($G(@(ROOT_CODE_",0)")),U),ICDL=$L(Y) I ICDL,'$G(FLG) Q CODE
"RTN","ICDCODE",196,0)
 Q $S('ICDL:-1,1:Y)
"RTN","ICDCODE",197,0)
CODEBA(CODE,ROOT) ; Return IEN based on code/root
"RTN","ICDCODE",198,0)
 N IEN
"RTN","ICDCODE",199,0)
 S IEN=$O(@(ROOT_"""BA"","""_CODE_" "","""")"),-1)
"RTN","ICDCODE",200,0)
 Q $S('IEN:-1,1:IEN)
"RTN","ICDCODE",201,0)
 ;
"RTN","ICDCODE",202,0)
COMCOM(IEN,VDT) ; Return versioned complication/comorbidity
"RTN","ICDCODE",203,0)
 ;returns a code for complication/comorbidity
"RTN","ICDCODE",204,0)
 ;  0 - non-CC
"RTN","ICDCODE",205,0)
 ;  1 - CC
"RTN","ICDCODE",206,0)
 ;  2 - MCC
"RTN","ICDCODE",207,0)
 ;  -1 - versioned CC not on file for date
"RTN","ICDCODE",208,0)
 N CCDATE,CCIEN
"RTN","ICDCODE",209,0)
 S CCDATE=$O(^ICD9(IEN,69,"B",VDT+.0001),-1)
"RTN","ICDCODE",210,0)
 I CCDATE="" Q -1
"RTN","ICDCODE",211,0)
 S CCIEN=$O(^ICD9(IEN,69,"B",CCDATE,""),-1)
"RTN","ICDCODE",212,0)
 Q $P(^ICD9(IEN,69,CCIEN,0),U,2)
"RTN","ICDCODE",213,0)
 ;
"RTN","ICDCODE",214,0)
VST(IEN,VDT,TYPE)     ; Versioned Short Text
"RTN","ICDCODE",215,0)
 Q:TYPE["ICD9(" $$VSTD($G(IEN),$G(VDT))
"RTN","ICDCODE",216,0)
 Q:TYPE["ICD0(" $$VSTP($G(IEN),$G(VDT))
"RTN","ICDCODE",217,0)
 Q ""
"RTN","ICDCODE",218,0)
VSTD(IEN,VDT)  ; Versioned Short Text (Dx)
"RTN","ICDCODE",219,0)
 N ICD0,ICDC,ICDI,STD,STI,ICDT,TXT S ICDI=+($G(IEN)) Q:+ICDI'>0 ""  Q:'$D(^ICD9(+ICDI)) ""
"RTN","ICDCODE",220,0)
 S ICDT=$G(VDT) S:'$L(ICDT)!(+ICDT'>0) ICDT=$$DT^XLFDT Q:$P(ICDT,".",1)'?7N ""  S ICD0=$G(^ICD9(+ICDI,0)),ICDC=$P(ICD0,U,1) Q:'$L(ICDC) ""
"RTN","ICDCODE",221,0)
 S STD=$O(^ICD9("AST",(ICDC_" "),(ICDT+.000001)),-1)
"RTN","ICDCODE",222,0)
 I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",223,0)
 .S STI=$O(^ICD9("AST",(ICDC_" "),STD,+ICDI," "),-1),TXT=$$TRIM($P($G(^ICD9(+ICDI,67,+STI,0)),U,2))
"RTN","ICDCODE",224,0)
 S STD=$O(^ICD9(+ICDI,67,"B",0)) I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",225,0)
 .S STI=$O(^ICD9(+ICDI,67,"B",STD,0)),TXT=$$TRIM($P($G(^ICD9(+ICDI,67,+STI,0)),U,2))
"RTN","ICDCODE",226,0)
 Q $$TRIM($P(ICD0,U,3))
"RTN","ICDCODE",227,0)
VSTP(IEN,VDT) ; Versioned Short Text (Proc)
"RTN","ICDCODE",228,0)
 N ICD0,ICDC,ICDI,STD,STI,ICDT,TXT S ICDI=+($G(IEN)) Q:+ICDI'>0 ""  Q:'$D(^ICD0(+ICDI)) ""
"RTN","ICDCODE",229,0)
 S ICDT=$G(VDT) S:'$L(ICDT)!(+ICDT'>0) ICDT=$$DT^XLFDT Q:$P(ICDT,".",1)'?7N ""  S ICD0=$G(^ICD0(+ICDI,0)),ICDC=$P(ICD0,U,1) Q:'$L(ICDC) ""
"RTN","ICDCODE",230,0)
 S STD=$O(^ICD0("AST",(ICDC_" "),(ICDT+.000001)),-1)
"RTN","ICDCODE",231,0)
 I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",232,0)
 .S STI=$O(^ICD0("AST",(ICDC_" "),STD,+ICDI," "),-1),TXT=$$TRIM($P($G(^ICD0(+ICDI,67,+STI,0)),U,2))
"RTN","ICDCODE",233,0)
 S STD=$O(^ICD0(+ICDI,67,"B",0)) I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",234,0)
 .S STI=$O(^ICD0(+ICDI,67,"B",STD,0)),TXT=$$TRIM($P($G(^ICD0(+ICDI,67,+STI,0)),U,2))
"RTN","ICDCODE",235,0)
 Q $$TRIM($P(ICD0,U,4))
"RTN","ICDCODE",236,0)
VLT(IEN,VDT,TYPE) ; Version Description - Long Text
"RTN","ICDCODE",237,0)
 Q:TYPE["ICD9(" $$VLTD($G(IEN),$G(VDT))
"RTN","ICDCODE",238,0)
 Q:TYPE["ICD0(" $$VLTP($G(IEN),$G(VDT))
"RTN","ICDCODE",239,0)
 Q ""
"RTN","ICDCODE",240,0)
VLTD(IEN,VDT) ; Versioned Description - Long Text (Dx)
"RTN","ICDCODE",241,0)
 N ICD0,ICDC,ICDI,STD,STI,ICDT,TXT
"RTN","ICDCODE",242,0)
 S ICDI=+($G(IEN)) Q:+ICDI'>0 ""  Q:'$D(^ICD9(+ICDI)) ""
"RTN","ICDCODE",243,0)
 S ICDT=$G(VDT) S:'$L(ICDT)!(+ICDT'>0) ICDT=$$DT^XLFDT Q:$P(ICDT,".",1)'?7N ""
"RTN","ICDCODE",244,0)
 S ICD0=$G(^ICD9(+ICDI,0)),ICDC=$P(ICD0,U,1) Q:'$L(ICDC) ""
"RTN","ICDCODE",245,0)
 S STD=$O(^ICD9("ADS",(ICDC_" "),(ICDT+.000001)),-1)
"RTN","ICDCODE",246,0)
 I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",247,0)
 .S STI=$O(^ICD9("ADS",(ICDC_" "),STD,+ICDI," "),-1)
"RTN","ICDCODE",248,0)
 .S TXT=$$TRIM($P($G(^ICD9(+ICDI,68,+STI,1)),U,1))
"RTN","ICDCODE",249,0)
 S STD=$O(^ICD9(+ICDI,68,"B",0))
"RTN","ICDCODE",250,0)
 I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",251,0)
 .S STI=$O(^ICD9(+ICDI,68,"B",STD,0))
"RTN","ICDCODE",252,0)
 .S TXT=$$TRIM($P($G(^ICD9(+ICDI,68,+STI,1)),U,1))
"RTN","ICDCODE",253,0)
 S TXT=$$TRIM($G(^ICD9(+ICDI,1))) Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",254,0)
 Q $$TRIM($P(ICD0,U,3))
"RTN","ICDCODE",255,0)
VLTP(IEN,VDT) ; Versioned Description - Long Text (Proc)
"RTN","ICDCODE",256,0)
 N ICD0,ICDC,ICDI,STD,STI,ICDT,TXT
"RTN","ICDCODE",257,0)
 S ICDI=+($G(IEN)) Q:+ICDI'>0 ""  Q:'$D(^ICD0(+ICDI)) ""
"RTN","ICDCODE",258,0)
 S ICDT=$G(VDT) S:'$L(ICDT)!(+ICDT'>0) ICDT=$$DT^XLFDT Q:$P(ICDT,".",1)'?7N ""
"RTN","ICDCODE",259,0)
 S ICD0=$G(^ICD0(+ICDI,0)),ICDC=$P(ICD0,U,1) Q:'$L(ICDC) ""
"RTN","ICDCODE",260,0)
 S STD=$O(^ICD0("ADS",(ICDC_" "),(ICDT+.000001)),-1)
"RTN","ICDCODE",261,0)
 I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",262,0)
 .S STI=$O(^ICD0("ADS",(ICDC_" "),STD,+ICDI," "),-1)
"RTN","ICDCODE",263,0)
 .S TXT=$$TRIM($P($G(^ICD0(+ICDI,68,+STI,1)),U,1))
"RTN","ICDCODE",264,0)
 S STD=$O(^ICD0(+ICDI,68,"B",0))
"RTN","ICDCODE",265,0)
 I +STD>0 D  Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",266,0)
 .S STI=$O(^ICD0(+ICDI,68,"B",STD,0))
"RTN","ICDCODE",267,0)
 .S TXT=$$TRIM($P($G(^ICD0(+ICDI,68,+STI,1)),U,1))
"RTN","ICDCODE",268,0)
 S TXT=$$TRIM($G(^ICD0(+ICDI,1))) Q:$L($G(TXT)) $G(TXT)
"RTN","ICDCODE",269,0)
 Q $$TRIM($P(ICD0,U,4))
"RTN","ICDCODE",270,0)
TRIM(X) ; Trim Spaces
"RTN","ICDCODE",271,0)
 S X=$G(X) Q:X="" X F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","ICDCODE",272,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","ICDCODE",273,0)
 F  Q:X'["  "  S X=$P(X,"  ",1)_" "_$P(X,"  ",2,229)
"RTN","ICDCODE",274,0)
 Q X
"SEC","^DIC",80,80,0,"DD")
@
"SEC","^DIC",80,80,0,"DEL")
@
"SEC","^DIC",80,80,0,"LAYGO")
@
"SEC","^DIC",80,80,0,"RD")
d
"SEC","^DIC",80,80,0,"WR")
@
"VER")
8.0^22.0
"^DD",80,80,0)
FIELD^^103^32
"^DD",80,80,0,"DDA")
N
"^DD",80,80,0,"DT")
3070829
"^DD",80,80,0,"ID",3)
D EN^DDIOL((" "_$$IDDXS^ICDID(+Y)),"","?0")
"^DD",80,80,0,"IX","AB",80,.01)

"^DD",80,80,0,"IX","ACC",80.03,.01)

"^DD",80,80,0,"IX","ACT1",80,.01)

"^DD",80,80,0,"IX","ACT2",80.066,.01)

"^DD",80,80,0,"IX","ACT3",80.066,.02)

"^DD",80,80,0,"IX","AST",80.067,.01)

"^DD",80,80,0,"IX","BA",80,.01)

"^DD",80,80,0,"IX","BAA",80,.01)

"^DD",80,80,0,"IX","D",80,10)

"^DD",80,80,0,"NM","ICD DIAGNOSIS")

"^DD",80,80,0,"PT",27.17,3)

"^DD",80,80,0,"PT",31.01,.01)

"^DD",80,80,0,"PT",44.11,.01)

"^DD",80,80,0,"PT",45,79)

"^DD",80,80,0,"PT",45,79.16)

"^DD",80,80,0,"PT",45,79.17)

"^DD",80,80,0,"PT",45,79.18)

"^DD",80,80,0,"PT",45,79.19)

"^DD",80,80,0,"PT",45,79.201)

"^DD",80,80,0,"PT",45,79.21)

"^DD",80,80,0,"PT",45,79.22)

"^DD",80,80,0,"PT",45,79.23)

"^DD",80,80,0,"PT",45,79.24)

"^DD",80,80,0,"PT",45,79.241)

"^DD",80,80,0,"PT",45,79.242)

"^DD",80,80,0,"PT",45,79.243)

"^DD",80,80,0,"PT",45,79.244)

"^DD",80,80,0,"PT",45,80)

"^DD",80,80,0,"PT",45.02,5)

"^DD",80,80,0,"PT",45.02,6)

"^DD",80,80,0,"PT",45.02,7)

"^DD",80,80,0,"PT",45.02,8)

"^DD",80,80,0,"PT",45.02,9)

"^DD",80,80,0,"PT",45.02,11)

"^DD",80,80,0,"PT",45.02,12)

"^DD",80,80,0,"PT",45.02,13)

"^DD",80,80,0,"PT",45.02,14)

"^DD",80,80,0,"PT",45.02,15)

"^DD",80,80,0,"PT",45.06,.04)

"^DD",80,80,0,"PT",45.89,.02)

"^DD",80,80,0,"PT",46,.04)

"^DD",80,80,0,"PT",46,.05)

"^DD",80,80,0,"PT",46,.06)

"^DD",80,80,0,"PT",46,.07)

"^DD",80,80,0,"PT",46,.21)

"^DD",80,80,0,"PT",46,.22)

"^DD",80,80,0,"PT",46,.23)

"^DD",80,80,0,"PT",46,.24)

"^DD",80,80,0,"PT",46.1,.01)

"^DD",80,80,0,"PT",52.052311,.01)

"^DD",80,80,0,"PT",52.41311,.01)

"^DD",80,80,0,"PT",63.203,.01)

"^DD",80,80,0,"PT",63.808,.01)

"^DD",80,80,0,"PT",63.88,.01)

"^DD",80,80,0,"PT",63.901,.01)

"^DD",80,80,0,"PT",64.018,.01)

"^DD",80,80,0,"PT",64.811718,.01)

"^DD",80,80,0,"PT",69.05,.01)

"^DD",80,80,0,"PT",69.54,.01)

"^DD",80,80,0,"PT",75.1,91)

"^DD",80,80,0,"PT",75.13,.01)

"^DD",80,80,0,"PT",80.01,.01)

"^DD",80,80,0,"PT",80.02,.01)

"^DD",80,80,0,"PT",80.03,.01)

"^DD",80,80,0,"PT",90,113)

"^DD",80,80,0,"PT",90,113.6)

"^DD",80,80,0,"PT",90.1,.01)

"^DD",80,80,0,"PT",90.16,.01)

"^DD",80,80,0,"PT",90.17,.01)

"^DD",80,80,0,"PT",100.051,.01)

"^DD",80,80,0,"PT",130,32.5)

"^DD",80,80,0,"PT",130,66)

"^DD",80,80,0,"PT",130,253)

"^DD",80,80,0,"PT",130,286)

"^DD",80,80,0,"PT",130,343)

"^DD",80,80,0,"PT",130,344)

"^DD",80,80,0,"PT",130,392)

"^DD",80,80,0,"PT",130,489)

"^DD",80,80,0,"PT",130.13,4)

"^DD",80,80,0,"PT",130.17,3)

"^DD",80,80,0,"PT",130.18,3)

"^DD",80,80,0,"PT",130.22,6)

"^DD",80,80,0,"PT",136,.03)

"^DD",80,80,0,"PT",136.02,.01)

"^DD",80,80,0,"PT",136.04,.01)

"^DD",80,80,0,"PT",136.32,.01)

"^DD",80,80,0,"PT",160,19)

"^DD",80,80,0,"PT",160,25)

"^DD",80,80,0,"PT",160,25.1)

"^DD",80,80,0,"PT",160,25.2)

"^DD",80,80,0,"PT",160,25.3)

"^DD",80,80,0,"PT",160,25.4)

"^DD",80,80,0,"PT",160,25.5)

"^DD",80,80,0,"PT",160,25.6)

"^DD",80,80,0,"PT",160,25.7)

"^DD",80,80,0,"PT",160,25.8)

"^DD",80,80,0,"PT",160,25.9)

"^DD",80,80,0,"PT",160.075,8)

"^DD",80,80,0,"PT",162.03,28)

"^DD",80,80,0,"PT",162.5,30)

"^DD",80,80,0,"PT",162.5,31)

"^DD",80,80,0,"PT",162.5,32)

"^DD",80,80,0,"PT",162.5,33)

"^DD",80,80,0,"PT",162.5,34)

"^DD",80,80,0,"PT",165.5,1400)

"^DD",80,80,0,"PT",165.5,1400.1)

"^DD",80,80,0,"PT",165.5,1400.2)

"^DD",80,80,0,"PT",165.5,1400.3)

"^DD",80,80,0,"PT",165.5,1400.4)

"^DD",80,80,0,"PT",165.5,1400.5)

"^DD",80,80,0,"PT",165.5,1426)

"^DD",80,80,0,"PT",165.5,1426.1)

"^DD",80,80,0,"PT",165.5,1426.2)

"^DD",80,80,0,"PT",165.5,1426.3)

"^DD",80,80,0,"PT",165.5,1426.4)

"^DD",80,80,0,"PT",165.5,1571)

"^DD",80,80,0,"PT",165.5,1571.1)

"^DD",80,80,0,"PT",165.5,1571.2)

"^DD",80,80,0,"PT",165.5,1571.3)

"^DD",80,80,0,"PT",165.5,1571.4)

"^DD",80,80,0,"PT",165.5,1571.5)

"^DD",80,80,0,"PT",165.5,1579)

"^DD",80,80,0,"PT",165.5,1579.1)

"^DD",80,80,0,"PT",165.5,1579.2)

"^DD",80,80,0,"PT",165.5,1579.3)

"^DD",80,80,0,"PT",165.5,1579.4)

"^DD",80,80,0,"PT",200.0351,.01)

"^DD",80,80,0,"PT",350.9,1.29)

"^DD",80,80,0,"PT",351.612,.01)

"^DD",80,80,0,"PT",356.2,.14)

"^DD",80,80,0,"PT",356.9,.01)

"^DD",80,80,0,"PT",362.3,.01)

"^DD",80,80,0,"PT",373.04,.03)

"^DD",80,80,0,"PT",375.04,.03)

"^DD",80,80,0,"PT",399,64)

"^DD",80,80,0,"PT",399,65)

"^DD",80,80,0,"PT",399,66)

"^DD",80,80,0,"PT",399,67)

"^DD",80,80,0,"PT",399,68)

"^DD",80,80,0,"PT",399,215)

"^DD",80,80,0,"PT",399.0304,7)

"^DD",80,80,0,"PT",409.43,.01)

"^DD",80,80,0,"PT",627.8,1)

"^DD",80,80,0,"PT",627.99,1)

"^DD",80,80,0,"PT",627.99,30)

"^DD",80,80,0,"PT",631,18)

"^DD",80,80,0,"PT",631,46)

"^DD",80,80,0,"PT",660,8.8)

"^DD",80,80,0,"PT",660,30)

"^DD",80,80,0,"PT",660,31)

"^DD",80,80,0,"PT",660,32)

"^DD",80,80,0,"PT",660,33)

"^DD",80,80,0,"PT",665.193,30)

"^DD",80,80,0,"PT",665.193,31)

"^DD",80,80,0,"PT",665.193,32)

"^DD",80,80,0,"PT",665.193,33)

"^DD",80,80,0,"PT",665.194,7)

"^DD",80,80,0,"PT",665.723191,9)

"^DD",80,80,0,"PT",668,1.6)

"^DD",80,80,0,"PT",668,30)

"^DD",80,80,0,"PT",668,31)

"^DD",80,80,0,"PT",668,32)

"^DD",80,80,0,"PT",668,33)

"^DD",80,80,0,"PT",691.19,.01)

"^DD",80,80,0,"PT",691.46,.01)

"^DD",80,80,0,"PT",691.58,.01)

"^DD",80,80,0,"PT",691.69,.01)

"^DD",80,80,0,"PT",691.704,.01)

"^DD",80,80,0,"PT",691.806,.01)

"^DD",80,80,0,"PT",691.9001,.01)

"^DD",80,80,0,"PT",692.03,.01)

"^DD",80,80,0,"PT",693,2)

"^DD",80,80,0,"PT",694.02,.01)

"^DD",80,80,0,"PT",697.5,4)

"^DD",80,80,0,"PT",697.51,.01)

"^DD",80,80,0,"PT",698.02,.01)

"^DD",80,80,0,"PT",698.12,.01)

"^DD",80,80,0,"PT",698.22,.01)

"^DD",80,80,0,"PT",698.32,.01)

"^DD",80,80,0,"PT",699.03,.01)

"^DD",80,80,0,"PT",699.54,.01)

"^DD",80,80,0,"PT",700.05,.01)

"^DD",80,80,0,"PT",701.01,.01)

"^DD",80,80,0,"PT",721,20)

"^DD",80,80,0,"PT",721.038,.01)

"^DD",80,80,0,"PT",801.41,15)

"^DD",80,80,0,"PT",801.41,18)

"^DD",80,80,0,"PT",801.4118,.01)

"^DD",80,80,0,"PT",811.23102,.01)

"^DD",80,80,0,"PT",811.31,.01)

"^DD",80,80,0,"PT",8925.9,.06)

"^DD",80,80,0,"PT",8984.1,.02)

"^DD",80,80,0,"PT",8984.2,.02)

"^DD",80,80,0,"PT",509850.1,.01)

"^DD",80,80,0,"PT",9000010.07,.01)

"^DD",80,80,0,"PT",9000010.11,.08)

"^DD",80,80,0,"PT",9000010.11,.09)

"^DD",80,80,0,"PT",9000010.11,.1)

"^DD",80,80,0,"PT",9000010.11,.11)

"^DD",80,80,0,"PT",9000010.11,.12)

"^DD",80,80,0,"PT",9000010.11,.13)

"^DD",80,80,0,"PT",9000010.11,.14)

"^DD",80,80,0,"PT",9000010.11,.15)

"^DD",80,80,0,"PT",9000010.12,.08)

"^DD",80,80,0,"PT",9000010.12,.09)

"^DD",80,80,0,"PT",9000010.12,.1)

"^DD",80,80,0,"PT",9000010.12,.11)

"^DD",80,80,0,"PT",9000010.12,.12)

"^DD",80,80,0,"PT",9000010.12,.13)

"^DD",80,80,0,"PT",9000010.12,.14)

"^DD",80,80,0,"PT",9000010.12,.15)

"^DD",80,80,0,"PT",9000010.18,.05)

"^DD",80,80,0,"PT",9000010.18,.09)

"^DD",80,80,0,"PT",9000010.18,.1)

"^DD",80,80,0,"PT",9000010.18,.11)

"^DD",80,80,0,"PT",9000010.18,.12)

"^DD",80,80,0,"PT",9000010.18,.13)

"^DD",80,80,0,"PT",9000010.18,.14)

"^DD",80,80,0,"PT",9000010.18,.15)

"^DD",80,80,0,"PT",9000011,.01)

"^DD",80,80,0,"PT",9002313.992274,.01)

"^DD",80,80,0,"VRPK")
ICD
"^DD",80,80,0,"VRRV")
29^3071001
"^DD",80,80,.01,0)
CODE NUMBER^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>7!($L(X)<1)!'(X?.E1".".N) X
"^DD",80,80,.01,1,0)
^.1
"^DD",80,80,.01,1,1,0)
80^BA^MUMPS
"^DD",80,80,.01,1,1,1)
S ^ICD9("BA",X_" ",DA)=""
"^DD",80,80,.01,1,1,2)
K ^ICD9("BA",X_" ",DA)
"^DD",80,80,.01,1,1,"%D",0)
^^2^2^2940314^
"^DD",80,80,.01,1,1,"%D",1,0)
This forces X to be regarded as a string, thus disallowing the dropping of
"^DD",80,80,.01,1,1,"%D",2,0)
leading or final '0's.
"^DD",80,80,.01,1,2,0)
80^AB^MUMPS
"^DD",80,80,.01,1,2,1)
S ^ICD9("AB",X_" ",DA)=""
"^DD",80,80,.01,1,2,2)
K ^ICD9("AB",X_" ",DA)
"^DD",80,80,.01,1,2,"%D",0)
^^2^2^2940314^
"^DD",80,80,.01,1,2,"%D",1,0)
This forces X to be regarded as a string, thus disallowing the dropping of
"^DD",80,80,.01,1,2,"%D",2,0)
leading or final '0's.
"^DD",80,80,.01,1,3,0)
80^BAA^MUMPS
"^DD",80,80,.01,1,3,1)
S:+X\1[$P(X,".",1) ^ICD9("BA",+X,DA)=""
"^DD",80,80,.01,1,3,2)
K:+X\1[$P(X,".",1) ^ICD9("BA",+X,DA)
"^DD",80,80,.01,1,3,"%D",0)
^^2^2^2940314^
"^DD",80,80,.01,1,3,"%D",1,0)
This x-references under the integral part of the code number, within
"^DD",80,80,.01,1,3,"%D",2,0)
the "BA" node, to allow selection from the integral part only.
"^DD",80,80,.01,1,4,0)
80^ACT1^MUMPS
"^DD",80,80,.01,1,4,1)
D SAHC^ICD9IDX
"^DD",80,80,.01,1,4,2)
D KAHC^ICD9IDX
"^DD",80,80,.01,1,4,"%D",0)
^.101^1^1^3030305^^
"^DD",80,80,.01,1,4,"%D",1,0)
Set and Kill Activation History
"^DD",80,80,.01,1,4,"DT")
3030221
"^DD",80,80,.01,3)
Answer must be 1-7 characters in length and contain a decimal point (e.g.: 042.)
"^DD",80,80,.01,21,0)
^.001^2^2^3010313^^^
"^DD",80,80,.01,21,1,0)
 
"^DD",80,80,.01,21,2,0)
ICD 9 code number
"^DD",80,80,.01,"DT")
3030221
"^DD",80,80,.01,"LAYGO",1,0)
I 1
"^DD",80,80,2,0)
IDENTIFIER^F^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",80,80,2,.1)
DRG FLAGS
"^DD",80,80,2,3)
Enter one or more valid codes.
"^DD",80,80,2,4)
D ^ICDHLPD
"^DD",80,80,2,21,0)
^.001^1^1^3010313^^^^
"^DD",80,80,2,21,1,0)
This field contains Identifier codes providing more detail on the DRG.
"^DD",80,80,3,0)
DIAGNOSIS^RF^^0;3^K:$L(X)>30!($L(X)<2) X
"^DD",80,80,3,3)
ANSWER MUST BE 2-30 CHARACTERS IN LENGTH
"^DD",80,80,3,21,0)
^.001^2^2^3021114^^
"^DD",80,80,3,21,1,0)
 
"^DD",80,80,3,21,2,0)
Diagnosis that code represents.
"^DD",80,80,5,0)
MAJOR DIAGNOSTIC CATEGORY^P80.3'^ICM(^0;5^Q
"^DD",80,80,5,21,0)
^^2^2^2940307^
"^DD",80,80,5,21,1,0)
 
"^DD",80,80,5,21,2,0)
MDC within which this code falls.
"^DD",80,80,5.5,0)
MDC13^NJ2,0^^0;6^K:+X'=X!(X>13)!(X<13)!(X?.E1"."1N.N) X
"^DD",80,80,5.5,3)
Type a Number between 13 and 13, 0 Decimal Digits
"^DD",80,80,5.5,21,0)
^^2^2^2940307^
"^DD",80,80,5.5,21,1,0)
 
"^DD",80,80,5.5,21,2,0)
Entered if MDC=13.
"^DD",80,80,5.7,0)
MDC24^S^0:PRINCIPAL DX;1:HEAD;2:CHEST;3:ABDOMEN;4:KIDNEY;5:URINARY;6:PELVIS;7:UPPER LIMB;8:LOWER LIMB;^0;12^Q
"^DD",80,80,5.7,3)
REFLECTS MULTIPLE SIGNIFICANT TRAUMA BODY SITE
"^DD",80,80,5.7,21,0)
^^2^2^2940307^
"^DD",80,80,5.7,21,1,0)
 
"^DD",80,80,5.7,21,2,0)
Code entry of body site of Multiple Significant Trauma.
"^DD",80,80,5.7,"DT")
2910305
"^DD",80,80,5.9,0)
MDC25^S^1:HIV INFECTION;2:MAJOR HIV CONDITION;3:NON-MAJOR HIV CONDITION;^0;13^Q
"^DD",80,80,5.9,3)
REFLECTS HIV DXLS OR RELATED CONDITION
"^DD",80,80,5.9,21,0)
^^2^2^2940307^
"^DD",80,80,5.9,21,1,0)
 
"^DD",80,80,5.9,21,2,0)
Set of codes refers to type of HIV code or related condition.
"^DD",80,80,5.9,"DT")
2910305
"^DD",80,80,8,0)
ICD EXPANDED^S^1:YES;0:NO;^0;8^Q
"^DD",80,80,8,3)
USED WITH VA ONLY CODES
"^DD",80,80,8,21,0)
^^1^1^2940308^
"^DD",80,80,8,21,1,0)
This field contains thr ICD code as expanded by the VA
"^DD",80,80,9.5,0)
SEX^S^M:MALE;F:FEMALE;^0;10^Q
"^DD",80,80,9.5,21,0)
^.001^2^2^3021017^^^^
"^DD",80,80,9.5,21,1,0)
 
"^DD",80,80,9.5,21,2,0)
F = Female; M = Male; Blank otherwise
"^DD",80,80,9.5,"DT")
3021017
"^DD",80,80,10,0)
DESCRIPTION^F^^1;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>245!($L(X)<1) X
"^DD",80,80,10,1,0)
^.1
"^DD",80,80,10,1,1,0)
80^D^MUMPS
"^DD",80,80,10,1,1,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "~!@#$%&*()_+`-=[]{};'\:|,./?<> """[I S I=$E(X,%1,%-1),%1=%+1 I $L(I)>2,$L(I)<31,^DD("KWIC")'[I S ^ICD9("D",I,DA)=""
"^DD",80,80,10,1,1,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "~!@#$%&*()_+`-=[]{};'\:|,./?<> """[I S I=$E(X,%1,%-1),%1=%+1 I $L(I)>2,$L(I)<31 K ^ICD9("D",I,DA)
"^DD",80,80,10,1,1,"%D",0)
^.101^1^1^2890517^^^
"^DD",80,80,10,1,1,"%D",1,0)
This is a KWIC x-ref, allowing selection by Key Words.
"^DD",80,80,10,1,1,"DT")
2890517
"^DD",80,80,10,3)
ANSWER MUST BE 1-245 CHARACTERS IN LENGTH
"^DD",80,80,10,21,0)
^.001^2^2^3020904^^
"^DD",80,80,10,21,1,0)
 
"^DD",80,80,10,21,2,0)
Complete description of ICD9 diagnosis represented by code.
"^DD",80,80,10,"DT")
2890517
"^DD",80,80,14,0)
AGE LOW^NJ2,0^^0;14^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",80,80,14,3)
Type a Number between 0 and 99, 0 Decimal Digits
"^DD",80,80,14,21,0)
^^2^2^3030227^
"^DD",80,80,14,21,1,0)
Code reasonable for age within Age(low) and
"^DD",80,80,14,21,2,0)
Age(high) values.  Blank, otherwise.
"^DD",80,80,14,"DT")
3030227
"^DD",80,80,15,0)
AGE HIGH^NJ3,0^^0;15^K:+X'=X!(X>124)!(X<0)!(X?.E1"."1N.N) X
"^DD",80,80,15,3)
Type a Number between 0 and 124, 0 Decimal Digits
"^DD",80,80,15,21,0)
^.001^2^2^3041021^^
"^DD",80,80,15,21,1,0)
Code reasonable for age within Age(low) and
"^DD",80,80,15,21,2,0)
Age(high) values.  Blank, otherwise.
"^DD",80,80,15,"DT")
3041021
"^DD",80,80,16,0)
ACTIVATION DATE^D^^0;16^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",80,80,16,3)
Enter date the ICD Code was activated.
"^DD",80,80,16,21,0)
^^1^1^3030220^
"^DD",80,80,16,21,1,0)
Date the ICD code becomes/became activated.
"^DD",80,80,16,"DT")
3030220
"^DD",80,80,20,0)
ICD9 CODES NOT TO USE WITH^80.01P^^N;0
"^DD",80,80,20,21,0)
^^1^1^2940314^^
"^DD",80,80,20,21,1,0)
ICD9 codes that cannot be used in conjunction with this code.
"^DD",80,80,30,0)
ICD9 CODES REQUIRED WITH^80.02P^^R;0
"^DD",80,80,30,21,0)
^^1^1^2940307^
"^DD",80,80,30,21,1,0)
Codes required when this code is used.
"^DD",80,80,40,0)
CODE NOT CC WITH^80.03P^^2;0
"^DD",80,80,40,21,0)
^.001^1^1^3010313^^^
"^DD",80,80,40,21,1,0)
Code not considered as Complication/comorbidity with this code.
"^DD",80,80,60,0)
DRGa^P80.2'^ICD(^DRG;1^Q
"^DD",80,80,60,21,0)
^^1^1^2940307^
"^DD",80,80,60,21,1,0)
DRG (Diagnostic Related Group) that this code may be part of.
"^DD",80,80,61,0)
DRGb^P80.2'^ICD(^DRG;2^Q
"^DD",80,80,61,3)

"^DD",80,80,61,21,0)
^^1^1^2940307^
"^DD",80,80,61,21,1,0)
DRG (Diagnostic Related Group) that this code may be part of.
"^DD",80,80,62,0)
DRGc^P80.2'^ICD(^DRG;3^Q
"^DD",80,80,62,3)

"^DD",80,80,62,21,0)
^^1^1^2940307^
"^DD",80,80,62,21,1,0)
DRG (Diagnostic Related Group) that this code may be part of.
"^DD",80,80,63,0)
DRGd^P80.2'^ICD(^DRG;4^Q
"^DD",80,80,63,3)

"^DD",80,80,63,21,0)
^^1^1^2940307^^^
"^DD",80,80,63,21,1,0)
DRG (Diagnostic Related Group) that this code may be part of
"^DD",80,80,64,0)
DRGe^P80.2'^ICD(^DRG;5^Q
"^DD",80,80,64,3)

"^DD",80,80,64,21,0)
^^1^1^2940307^
"^DD",80,80,64,21,1,0)
DRG (Diagnostic Related Group) that this code may be part of.
"^DD",80,80,65,0)
DRGf^P80.2'^ICD(^DRG;6^Q
"^DD",80,80,65,21,0)
^^1^1^2940307^
"^DD",80,80,65,21,1,0)
DRG (Diagnostic Related Group) that this code may be part of.
"^DD",80,80,66,0)
EFFECTIVE DATE^80.066DA^^66;0
"^DD",80,80,66,21,0)
^.001^2^2^3040916^^^^
"^DD",80,80,66,21,1,0)
This multiple contains versioned information for an ICD code.
"^DD",80,80,66,21,2,0)
A new entry is created whenever an ICD code's status is changed.
"^DD",80,80,67,0)
DIAGNOSIS (VERSIONED)^80.067D^^67;0
"^DD",80,80,67,21,0)
^^2^2^3040310^
"^DD",80,80,67,21,1,0)
This is a history of the Diagnosis (short text) to include the date the 
"^DD",80,80,67,21,2,0)
text was first used along with the text.
"^DD",80,80,68,0)
DESCRIPTION (VERSIONED)^80.068D^^68;0
"^DD",80,80,68,21,0)
^^2^2^3040310^
"^DD",80,80,68,21,1,0)
This is a history of the descriptive text to include the date the text 
"^DD",80,80,68,21,2,0)
was first used and the text used.
"^DD",80,80,70,0)
COMPLICATION/COMORBIDITY^S^1:COMPLICATION/COMORBIDITY;^0;7^Q
"^DD",80,80,70,21,0)
^^1^1^2940307^
"^DD",80,80,70,21,1,0)
Set =1 if this ICD9 refers to code with c/c.
"^DD",80,80,70,"DT")
2890526
"^DD",80,80,71,0)
DRG GROUPER EFFECTIVE DATE^80.071D^^3;0
"^DD",80,80,71,21,0)
^.001^1^1^3040916^^^^
"^DD",80,80,71,21,1,0)
ICD Diagnosis code effective date used to resolve corresponding DRGs.
"^DD",80,80,71,"DT")
3040729
"^DD",80,80,72,0)
MDC EFFECTIVE DATE^80.072D^^4;0
"^DD",80,80,72,21,0)
^^3^3^3041213^
"^DD",80,80,72,21,1,0)
Major Diagnostic Category (MDC) effective date associated with ICD 
"^DD",80,80,72,21,2,0)
Diagnosis. A new MDC effective date will be created each fiscal year for 
"^DD",80,80,72,21,3,0)
year versioning of the MDCs.
"^DD",80,80,100,0)
INACTIVE FLAG^S^1:INACTIVE;^0;9^Q
"^DD",80,80,100,21,0)
^.001^1^1^3010313^^^^
"^DD",80,80,100,21,1,0)
Set =1 when this code is  no longer active.
"^DD",80,80,101,0)
UNACCEPTABLE AS PRINCIPAL DX^S^1:YES;^0;4^Q
"^DD",80,80,101,21,0)
^^1^1^2940308^
"^DD",80,80,101,21,1,0)
This field contains a flag indicating that this code is unacceptable as the principal diagnosis.
"^DD",80,80,101,"DT")
3030703
"^DD",80,80,102,0)
INACTIVE DATE^D^^0;11^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",80,80,102,3)
Enter the date that this diagnosis becomes inactive.
"^DD",80,80,102,21,0)
^.001^1^1^3010313^^
"^DD",80,80,102,21,1,0)
Date as of which this code is inactive.
"^DD",80,80,102,"DT")
2890815
"^DD",80,80,103,0)
VERSIONED CC^80.0103D^^69;0
"^DD",80,80,103,21,0)
^^2^2^3071001^
"^DD",80,80,103,21,1,0)
This is a history of the Complication/Comorbidity (CC) status for the 
"^DD",80,80,103,21,2,0)
diagnosis and includes the CC status with the date it became effective.
"^DD",80,80.01,0)
ICD9 CODES NOT TO USE WITH SUB-FIELD^^.01^1
"^DD",80,80.01,0,"IX","B",80.01,.01)

"^DD",80,80.01,0,"NM","ICD9 CODES NOT TO USE WITH")

"^DD",80,80.01,0,"UP")
80
"^DD",80,80.01,.01,0)
ICD9 CODES NOT TO USE WITH^MP80'X^ICD9(^0;1^S DINUM=X
"^DD",80,80.01,.01,1,0)
^.1
"^DD",80,80.01,.01,1,1,0)
80.01^B
"^DD",80,80.01,.01,1,1,1)
S ^ICD9(DA(1),"N","B",$E(X,1,30),DA)=""
"^DD",80,80.01,.01,1,1,2)
K ^ICD9(DA(1),"N","B",$E(X,1,30),DA)
"^DD",80,80.0103,0)
VERSIONED CC SUB-FIELD^^1^2
"^DD",80,80.0103,0,"DT")
3070829
"^DD",80,80.0103,0,"IX","B",80.0103,.01)

"^DD",80,80.0103,0,"NM","VERSIONED CC")

"^DD",80,80.0103,0,"UP")
80
"^DD",80,80.0103,.01,0)
EFFECTIVE DATE^D^^0;1^S %DT="E" D ^%DT S X=Y K:X<1 X
"^DD",80,80.0103,.01,1,0)
^.1
"^DD",80,80.0103,.01,1,1,0)
80.0103^B
"^DD",80,80.0103,.01,1,1,1)
S ^ICD9(DA(1),69,"B",$E(X,1,30),DA)=""
"^DD",80,80.0103,.01,1,1,2)
K ^ICD9(DA(1),69,"B",$E(X,1,30),DA)
"^DD",80,80.0103,.01,1,1,"%D",0)
^^5^5^3071001^
"^DD",80,80.0103,.01,1,1,"%D",1,0)
^ICD9(IEN1,69,"B",EFF,IEN2) - Where IEN1 is the internal entry 
"^DD",80,80.0103,.01,1,1,"%D",2,0)
number in the ICD-9 Diagnosis file #80, EFF is the effective date
"^DD",80,80.0103,.01,1,1,"%D",3,0)
for Complication/Comorbidity (CC) status and IEN2 is the internal
"^DD",80,80.0103,.01,1,1,"%D",4,0)
entry number in the VERSIONED CC multiple where the versioned 
"^DD",80,80.0103,.01,1,1,"%D",5,0)
Complication/Comorbidity (CC) status is stored.
"^DD",80,80.0103,.01,3)
Must be a FileMan date
"^DD",80,80.0103,.01,21,0)
^^2^2^3071001^
"^DD",80,80.0103,.01,21,1,0)
This is the date the Complication/Comorbidity (CC) status became 
"^DD",80,80.0103,.01,21,2,0)
effective.
"^DD",80,80.0103,.01,"DT")
3071001
"^DD",80,80.0103,1,0)
COMPLICATION/COMORBIDITY^S^0:non-CC;1:CC;2:MCC;^0;2^Q
"^DD",80,80.0103,1,3)
0 for nonCC, 1 for CC, or 2 for MCC
"^DD",80,80.0103,1,21,0)
^^3^3^3071001^
"^DD",80,80.0103,1,21,1,0)
This is the Complication/Comorbidity (CC) status.  It may have a status
"^DD",80,80.0103,1,21,2,0)
of Non-Complication/Comorbidity, Complication/Comorbidity, or Major 
"^DD",80,80.0103,1,21,3,0)
Complication/Comorbidity.
"^DD",80,80.0103,1,"DT")
3071001
"^DD",80,80.02,0)
ICD9 CODES REQUIRED WITH SUB-FIELD^^.01^1
"^DD",80,80.02,0,"IX","B",80.02,.01)

"^DD",80,80.02,0,"NM","ICD9 CODES REQUIRED WITH")

"^DD",80,80.02,0,"UP")
80
"^DD",80,80.02,.01,0)
ICD9 CODES REQUIRED WITH^MP80'X^ICD9(^0;1^S DINUM=X
"^DD",80,80.02,.01,1,0)
^.1
"^DD",80,80.02,.01,1,1,0)
80.02^B
"^DD",80,80.02,.01,1,1,1)
S ^ICD9(DA(1),"R","B",$E(X,1,30),DA)=""
"^DD",80,80.02,.01,1,1,2)
K ^ICD9(DA(1),"R","B",$E(X,1,30),DA)
"^DD",80,80.03,0)
CODE NOT CC WITH SUB-FIELD^^.01^1
"^DD",80,80.03,0,"NM","CODE NOT CC WITH")

"^DD",80,80.03,0,"UP")
80
"^DD",80,80.03,.01,0)
CODES NOT CC WITH^MP80'^ICD9(^0;1^Q
"^DD",80,80.03,.01,1,0)
^.1^^-1
"^DD",80,80.03,.01,1,1,0)
80^ACC^MUMPS
"^DD",80,80.03,.01,1,1,1)
S ^ICD9("ACC",DA(1),X)=""
"^DD",80,80.03,.01,1,1,2)
K ^ICD9("ACC",DA(1),X)
"^DD",80,80.03,.01,1,1,"%D",0)
^^2^2^2940314^
"^DD",80,80.03,.01,1,1,"%D",1,0)
This sets a x-ref based on the ICD9 code as the first subscript, and
"^DD",80,80.03,.01,1,1,"%D",2,0)
the "CODE NOT CC WITH" as the second.
"^DD",80,80.03,.01,3)
Enter the ICD diagnosis wich are required with this diagnosis.
"^DD",80,80.03,.01,21,0)
^^1^1^2940308^
"^DD",80,80.03,.01,21,1,0)
This field contains  Code not considered as Complication/comorbidity with this code.
"^DD",80,80.03,.01,"DT")
2960826
"^DD",80,80.066,0)
EFFECTIVE DATE SUB-FIELD^^65^8
"^DD",80,80.066,0,"DT")
3030221
"^DD",80,80.066,0,"IX","B",80.066,.01)

"^DD",80,80.066,0,"NM","EFFECTIVE DATE")

"^DD",80,80.066,0,"UP")
80
"^DD",80,80.066,.01,0)
EFFECTIVE DATE^RD^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",80,80.066,.01,1,0)
^.1
"^DD",80,80.066,.01,1,1,0)
80.066^B
"^DD",80,80.066,.01,1,1,1)
S ^ICD9(DA(1),66,"B",$E(X,1,30),DA)=""
"^DD",80,80.066,.01,1,1,2)
K ^ICD9(DA(1),66,"B",$E(X,1,30),DA)
"^DD",80,80.066,.01,1,2,0)
80^ACT2^MUMPS
"^DD",80,80.066,.01,1,2,1)
D SAHD^ICD9IDX
"^DD",80,80.066,.01,1,2,2)
D KAHD^ICD9IDX
"^DD",80,80.066,.01,1,2,"%D",0)
^.101^1^1^3030305^^
"^DD",80,80.066,.01,1,2,"%D",1,0)
Set and Kill Activation History
"^DD",80,80.066,.01,1,2,"DT")
3030221
"^DD",80,80.066,.01,21,0)
^.001^1^1^3030221^^^^
"^DD",80,80.066,.01,21,1,0)
Date versioned information becomes/became effective.
"^DD",80,80.066,.01,"DT")
3030221
"^DD",80,80.066,.02,0)
STATUS^RS^0:INACTIVE;1:ACTIVE;^0;2^Q
"^DD",80,80.066,.02,1,0)
^.1
"^DD",80,80.066,.02,1,1,0)
80^ACT3^MUMPS
"^DD",80,80.066,.02,1,1,1)
D SAHS^ICD9IDX
"^DD",80,80.066,.02,1,1,2)
D KAHS^ICD9IDX
"^DD",80,80.066,.02,1,1,"%D",0)
^.101^1^1^3030305^^
"^DD",80,80.066,.02,1,1,"%D",1,0)
Set and Kill Activation History
"^DD",80,80.066,.02,1,1,"DT")
3030221
"^DD",80,80.066,.02,3)
Enter status of code.
"^DD",80,80.066,.02,21,0)
^.001^1^1^3030221^^
"^DD",80,80.066,.02,21,1,0)
Set = 1 when the code is active.
"^DD",80,80.066,.02,"DT")
3030221
"^DD",80,80.066,60,0)
DRGa^P80.2'^ICD(^DRG;1^Q
"^DD",80,80.066,60,3)
ENTER FIRST DRG CODE
"^DD",80,80.066,60,21,0)
^^1^1^3030407^
"^DD",80,80.066,60,21,1,0)
DRG CODE ASSOCIATED WITH DIAGNOSIS CODE
"^DD",80,80.066,60,"DT")
3030407
"^DD",80,80.066,61,0)
DRGb^P80.2'^ICD(^DRG;2^Q
"^DD",80,80.066,61,21,0)
^^1^1^3030407^
"^DD",80,80.066,61,21,1,0)
DRG CODE ASSOCIATED WITH DIAGNOSIS CODE
"^DD",80,80.066,61,"DT")
3030407
"^DD",80,80.066,62,0)
DRBc^P80.2'^ICD(^DRG;3^Q
"^DD",80,80.066,62,"DT")
3030407
"^DD",80,80.066,63,0)
DRBd^P80.2'^ICD(^DRG;4^Q
"^DD",80,80.066,63,"DT")
3030407
"^DD",80,80.066,64,0)
DRGe^P80.2'^ICD(^DRG;5^Q
"^DD",80,80.066,64,"DT")
3030407
"^DD",80,80.066,65,0)
DRGf^P80.2'^ICD(^DRG;6^Q
"^DD",80,80.066,65,"DT")
3030407
"^DD",80,80.067,0)
DIAGNOSIS (VERSIONED) SUB-FIELD^^1^2
"^DD",80,80.067,0,"DT")
3040310
"^DD",80,80.067,0,"IX","B",80.067,.01)

"^DD",80,80.067,0,"NM","DIAGNOSIS (VERSIONED)")

"^DD",80,80.067,0,"UP")
80
"^DD",80,80.067,.01,0)
VERSION DATE^MRD^^0;1^S %DT="EX" D ^%DT S X=Y K:2781001>X X
"^DD",80,80.067,.01,1,0)
^.1
"^DD",80,80.067,.01,1,1,0)
80.067^B
"^DD",80,80.067,.01,1,1,1)
S ^ICD9(DA(1),67,"B",$E(X,1,30),DA)=""
"^DD",80,80.067,.01,1,1,2)
K ^ICD9(DA(1),67,"B",$E(X,1,30),DA)
"^DD",80,80.067,.01,1,1,"%D",0)
^^4^4^3040310^
"^DD",80,80.067,.01,1,1,"%D",1,0)
^ICD9(IEN1,67,"B",EFF,IEN2) - Where IEN1 is the internal entry number in 
"^DD",80,80.067,.01,1,1,"%D",2,0)
the ICD-9 Diagnosis file #80, EFF is the effective date for the diagnosis
"^DD",80,80.067,.01,1,1,"%D",3,0)
(short text), and IEN2 is the internal entry number in the DIAGNOSIS
"^DD",80,80.067,.01,1,1,"%D",4,0)
(VERSIONED) multiple where the versioned short text is stored.
"^DD",80,80.067,.01,1,2,0)
80^AST^MUMPS
"^DD",80,80.067,.01,1,2,1)
S:$L($P($G(^ICD9(DA(1),0)),"^",1)) ^ICD9("AST",($P($G(^ICD9(DA(1),0)),"^",1)_" "),+X,DA(1),DA)=""
"^DD",80,80.067,.01,1,2,2)
K:$L($P($G(^ICD9(DA(1),0)),"^",1)) ^ICD9("AST",($P($G(^ICD9(DA(1),0)),"^",1)_" "),+X,DA(1),DA)
"^DD",80,80.067,.01,1,2,"%D",0)
^^5^5^3040310^
"^DD",80,80.067,.01,1,2,"%D",1,0)
^ICD9("AST",(CODE_" "),EFF,IEN1,IEN2) - Where CODE is the ICD-9 Diagnosis
"^DD",80,80.067,.01,1,2,"%D",2,0)
Code, EFF is the effective date for the diagnosis text (short text), IEN1
"^DD",80,80.067,.01,1,2,"%D",3,0)
is the internal entry number in the ICD-9 Diagnosis file (#80) and IEN2 is
"^DD",80,80.067,.01,1,2,"%D",4,0)
the internal entry number in the DIAGNOSIS (VERSIONED) multiple where the
"^DD",80,80.067,.01,1,2,"%D",5,0)
versioned short text is stored.
"^DD",80,80.067,.01,1,2,"DT")
3040310
"^DD",80,80.067,.01,3)
TYPE A DATE NOT EARLIER THAN OCT 01, 1978
"^DD",80,80.067,.01,21,0)
^^1^1^3040310^
"^DD",80,80.067,.01,21,1,0)
This is the date the diagnosis text was first used.
"^DD",80,80.067,.01,"DT")
3040319
"^DD",80,80.067,1,0)
DIAGNOSIS (VERSIONED)^RF^^0;2^K:$L(X)>30!($L(X)<2) X
"^DD",80,80.067,1,3)
Answer must be 2-30 characters in length
"^DD",80,80.067,1,21,0)
^^1^1^3040310^
"^DD",80,80.067,1,21,1,0)
This is the diagnosis that was used beginning on the 'effective date.'
"^DD",80,80.067,1,"DT")
3040319
"^DD",80,80.068,0)
DESCRIPTION (VERSIONED) SUB-FIELD^^1^2
"^DD",80,80.068,0,"DT")
3040310
"^DD",80,80.068,0,"IX","ADS",80.068,.01)

"^DD",80,80.068,0,"IX","B",80.068,.01)

"^DD",80,80.068,0,"NM","DESCRIPTION (VERSIONED)")

"^DD",80,80.068,0,"UP")
80
"^DD",80,80.068,.01,0)
VERSION DATE^MRD^^0;1^S %DT="EX" D ^%DT S X=Y K:2781001>X X
"^DD",80,80.068,.01,1,0)
^.1
"^DD",80,80.068,.01,1,1,0)
80.068^B
"^DD",80,80.068,.01,1,1,1)
S ^ICD9(DA(1),68,"B",$E(X,1,30),DA)=""
"^DD",80,80.068,.01,1,1,2)
K ^ICD9(DA(1),68,"B",$E(X,1,30),DA)
"^DD",80,80.068,.01,1,1,"%D",0)
^^5^5^3040310^
"^DD",80,80.068,.01,1,1,"%D",1,0)
^ICD9(IEN1,68,"B",EFF,IEN2) - Where IEN1 is the internal entry number in 
"^DD",80,80.068,.01,1,1,"%D",2,0)
the ICD-9 Diagnosis file #80, EFF is the effective date for the 
"^DD",80,80.068,.01,1,1,"%D",3,0)
description (long text), and IEN2 is the internal entry number in the
"^DD",80,80.068,.01,1,1,"%D",4,0)
DESCRIPTION (VERSIONED) multiple where the versioned description is
"^DD",80,80.068,.01,1,1,"%D",5,0)
stored.
"^DD",80,80.068,.01,1,2,0)
80.068^ADS^MUMPS
"^DD",80,80.068,.01,1,2,1)
S:$L($P($G(^ICD9(DA(1),0)),"^",1)) ^ICD9("ADS",($P($G(^ICD9(DA(1),0)),"^",1)_" "),+X,DA(1),DA)=""
"^DD",80,80.068,.01,1,2,2)
K:$L($P($G(^ICD9(DA(1),0)),"^",1)) ^ICD9("ADS",($P($G(^ICD9(DA(1),0)),"^",1)_" "),+X,DA(1),DA)
"^DD",80,80.068,.01,1,2,"%D",0)
^^5^5^3040310^
"^DD",80,80.068,.01,1,2,"%D",1,0)
^ICD9("ADS",(CODE_" "),EFF,IEN1,IEN2) - Where CODE is the ICD-9 Diagnosis
"^DD",80,80.068,.01,1,2,"%D",2,0)
Code, EFF is the effective date for the description (long text), IEN1 is
"^DD",80,80.068,.01,1,2,"%D",3,0)
the internal entry number in the ICD-9 Diagnosis file (#80) and IEN2 is
"^DD",80,80.068,.01,1,2,"%D",4,0)
the internal entry number in the DESCRIPTION (VERSIONED) multiple where
"^DD",80,80.068,.01,1,2,"%D",5,0)
the versioned long text is stored.
"^DD",80,80.068,.01,1,2,"DT")
3040310
"^DD",80,80.068,.01,3)
TYPE A DATE NOT EARLIER THAN OCT 01, 1978
"^DD",80,80.068,.01,21,0)
^^1^1^3040310^
"^DD",80,80.068,.01,21,1,0)
This is the date the description was first used.
"^DD",80,80.068,.01,"DT")
3040319
"^DD",80,80.068,1,0)
DESCRIPTION (VERSIONED)^RF^^1;1^K:$L(X)>245!($L(X)<1) X
"^DD",80,80.068,1,3)
Answer must be 1-245 characters in length
"^DD",80,80.068,1,21,0)
^^2^2^3040310^
"^DD",80,80.068,1,21,1,0)
This is the description (long text) that was in used on the 'effective 
"^DD",80,80.068,1,21,2,0)
date.'
"^DD",80,80.068,1,"DT")
3040319
"^DD",80,80.071,0)
DRG GROUPER EFFECTIVE DATE SUB-FIELD^^1^2
"^DD",80,80.071,0,"DT")
3040914
"^DD",80,80.071,0,"IX","B",80.071,.01)

"^DD",80,80.071,0,"NM","DRG GROUPER EFFECTIVE DATE")

"^DD",80,80.071,0,"UP")
80
"^DD",80,80.071,.01,0)
DRG GROUPER EFFECTIVE DATE^MD^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",80,80.071,.01,1,0)
^.1
"^DD",80,80.071,.01,1,1,0)
80.071^B
"^DD",80,80.071,.01,1,1,1)
S ^ICD9(DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",80,80.071,.01,1,1,2)
K ^ICD9(DA(1),3,"B",$E(X,1,30),DA)
"^DD",80,80.071,.01,21,0)
^.001^4^4^3040913^^
"^DD",80,80.071,.01,21,1,0)
This field sets the effective date for the DRGs for a given fiscal year. 
"^DD",80,80.071,.01,21,2,0)
It should normally be the first day of October of the fiscal year. Each
"^DD",80,80.071,.01,21,3,0)
year a new entry will be created and the DRGs hierarchy will reside within
"^DD",80,80.071,.01,21,4,0)
this field.
"^DD",80,80.071,.01,"DT")
3040729
"^DD",80,80.071,1,0)
DRG^80.711P^^1;0
"^DD",80,80.072,0)
MDC EFFECTIVE DATE SUB-FIELD^^1^2
"^DD",80,80.072,0,"DT")
3040825
"^DD",80,80.072,0,"IX","B",80.072,.01)

"^DD",80,80.072,0,"NM","MDC EFFECTIVE DATE")

"^DD",80,80.072,0,"UP")
80
"^DD",80,80.072,.01,0)
MDC EFFECTIVE DATE^MD^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",80,80.072,.01,1,0)
^.1
"^DD",80,80.072,.01,1,1,0)
80.072^B
"^DD",80,80.072,.01,1,1,1)
S ^ICD9(DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",80,80.072,.01,1,1,2)
K ^ICD9(DA(1),4,"B",$E(X,1,30),DA)
"^DD",80,80.072,.01,"DT")
3040825
"^DD",80,80.072,1,0)
MDC^P80.3'^ICM(^0;2^Q
"^DD",80,80.072,1,21,0)
^.001^2^2^3040914^^
"^DD",80,80.072,1,21,1,0)
Major Diagnostic Category (MDC) associated with ICD Diagnosis for a 
"^DD",80,80.072,1,21,2,0)
given fiscal year.
"^DD",80,80.072,1,"DT")
3040825
"^DD",80,80.711,0)
DRG SUB-FIELD^^.01^1
"^DD",80,80.711,0,"DT")
3040914
"^DD",80,80.711,0,"IX","B",80.711,.01)

"^DD",80,80.711,0,"NM","DRG")

"^DD",80,80.711,0,"UP")
80.071
"^DD",80,80.711,.01,0)
DRG^MP80.2'^ICD(^0;1^Q
"^DD",80,80.711,.01,1,0)
^.1
"^DD",80,80.711,.01,1,1,0)
80.711^B
"^DD",80,80.711,.01,1,1,1)
S ^ICD9(DA(2),3,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",80,80.711,.01,1,1,2)
K ^ICD9(DA(2),3,DA(1),1,"B",$E(X,1,30),DA)
"^DD",80,80.711,.01,3)
Enter DRG associated with ICD code
"^DD",80,80.711,.01,21,0)
^^2^2^3040914^
"^DD",80,80.711,.01,21,1,0)
DRG(s) associated with corresponding ICD Diagnosis for a given fiscal
"^DD",80,80.711,.01,21,2,0)
year.
"^DD",80,80.711,.01,"DT")
3040914
"^DIC",80,80,0)
ICD DIAGNOSIS^80IO
"^DIC",80,80,0,"GL")
^ICD9(
"^DIC",80,80,"%",0)
^1.005^2^2
"^DIC",80,80,"%",1,0)
PXRS
"^DIC",80,80,"%",2,0)
QAM
"^DIC",80,80,"%","B","PXRS",1)

"^DIC",80,80,"%","B","QAM",2)

"^DIC",80,80,"%D",0)
^1.001^6^6^3040310^^
"^DIC",80,80,"%D",1,0)
Contains all valid ICD diagnosis codes.
"^DIC",80,80,"%D",2,0)
 
"^DIC",80,80,"%D",3,0)
If an entry needs to be added, modified or deleted, a patch will be issued
"^DIC",80,80,"%D",4,0)
containing the change.  
"^DIC",80,80,"%D",5,0)
 
"^DIC",80,80,"%D",6,0)
This table file should not be edited in anyway by the site.
"^DIC",80,"B","ICD DIAGNOSIS",80)

**INSTALL NAME**
LEX*2.0*53
"BLD",6827,0)
LEX*2.0*53^LEXICON UTILITY^0^3071026^y
"BLD",6827,1,0)
^^12^12^3071024^
"BLD",6827,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6827,1,2,0)
included in this patch.  This patch is part of a multi-package 
"BLD",6827,1,3,0)
distribution and includes the following patches installed in
"BLD",6827,1,4,0)
the following order:
"BLD",6827,1,5,0)
 
"BLD",6827,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"BLD",6827,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"BLD",6827,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"BLD",6827,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"BLD",6827,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"BLD",6827,1,11,0)
 
"BLD",6827,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"BLD",6827,4,0)
^9.64PA^^
"BLD",6827,6.3)
18
"BLD",6827,"INIT")
POST^LEX2053P
"BLD",6827,"KRN",0)
^9.67PA^8989.52^19
"BLD",6827,"KRN",.4,0)
.4
"BLD",6827,"KRN",.401,0)
.401
"BLD",6827,"KRN",.402,0)
.402
"BLD",6827,"KRN",.403,0)
.403
"BLD",6827,"KRN",.5,0)
.5
"BLD",6827,"KRN",.84,0)
.84
"BLD",6827,"KRN",3.6,0)
3.6
"BLD",6827,"KRN",3.8,0)
3.8
"BLD",6827,"KRN",9.2,0)
9.2
"BLD",6827,"KRN",9.8,0)
9.8
"BLD",6827,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6827,"KRN",9.8,"NM",1,0)
LEX2053^^0^B85479743
"BLD",6827,"KRN",9.8,"NM",2,0)
LEX2053P^^0^B7669278
"BLD",6827,"KRN",9.8,"NM",3,0)
LEX2053A^^0^B31973876
"BLD",6827,"KRN",9.8,"NM","B","LEX2053",1)

"BLD",6827,"KRN",9.8,"NM","B","LEX2053A",3)

"BLD",6827,"KRN",9.8,"NM","B","LEX2053P",2)

"BLD",6827,"KRN",19,0)
19
"BLD",6827,"KRN",19.1,0)
19.1
"BLD",6827,"KRN",101,0)
101
"BLD",6827,"KRN",409.61,0)
409.61
"BLD",6827,"KRN",771,0)
771
"BLD",6827,"KRN",870,0)
870
"BLD",6827,"KRN",8989.51,0)
8989.51
"BLD",6827,"KRN",8989.52,0)
8989.52
"BLD",6827,"KRN",8994,0)
8994
"BLD",6827,"KRN","B",.4,.4)

"BLD",6827,"KRN","B",.401,.401)

"BLD",6827,"KRN","B",.402,.402)

"BLD",6827,"KRN","B",.403,.403)

"BLD",6827,"KRN","B",.5,.5)

"BLD",6827,"KRN","B",.84,.84)

"BLD",6827,"KRN","B",3.6,3.6)

"BLD",6827,"KRN","B",3.8,3.8)

"BLD",6827,"KRN","B",9.2,9.2)

"BLD",6827,"KRN","B",9.8,9.8)

"BLD",6827,"KRN","B",19,19)

"BLD",6827,"KRN","B",19.1,19.1)

"BLD",6827,"KRN","B",101,101)

"BLD",6827,"KRN","B",409.61,409.61)

"BLD",6827,"KRN","B",771,771)

"BLD",6827,"KRN","B",870,870)

"BLD",6827,"KRN","B",8989.51,8989.51)

"BLD",6827,"KRN","B",8989.52,8989.52)

"BLD",6827,"KRN","B",8994,8994)

"BLD",6827,"PRE")
LEX2053
"BLD",6827,"QUES",0)
^9.62^^
"BLD",6827,"REQB",0)
^9.611^4^3
"BLD",6827,"REQB",1,0)
LEX*2.0*50^2
"BLD",6827,"REQB",3,0)
ICD*18.0*14^2
"BLD",6827,"REQB",4,0)
ICD*18.0*27^2
"BLD",6827,"REQB","B","ICD*18.0*14",3)

"BLD",6827,"REQB","B","ICD*18.0*27",4)

"BLD",6827,"REQB","B","LEX*2.0*50",1)

"INIT")
POST^LEX2053P
"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
LEXICON UTILITY^LEX^Medical and Biomedical Terminology System.^^^3030115
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
2.0^2950923^2950923^1118
"PKG",167,22,1,"PAH",1,0)
53^3071026^1118
"PKG",167,22,1,"PAH",1,1,0)
^^12^12^3071026
"PKG",167,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",167,22,1,"PAH",1,1,2,0)
included in this patch.  This patch is part of a multi-package 
"PKG",167,22,1,"PAH",1,1,3,0)
distribution and includes the following patches installed in
"PKG",167,22,1,"PAH",1,1,4,0)
the following order:
"PKG",167,22,1,"PAH",1,1,5,0)
 
"PKG",167,22,1,"PAH",1,1,6,0)
 LEX*2.0*52   Fixes for Lexicon, ICD and CPT problems
"PKG",167,22,1,"PAH",1,1,7,0)
 ICPT*6.0*37  Routine ICPTMOD and ICPTMOD2
"PKG",167,22,1,"PAH",1,1,8,0)
 ICD*18.0*29  Routine ICPTCODE and #80 Data Dictionary changes to file #80
"PKG",167,22,1,"PAH",1,1,9,0)
 LEX*2.0*53   FY08 1st quarter ICD/CPT update
"PKG",167,22,1,"PAH",1,1,10,0)
 ICPT*6.0*38  Informational patch installed with LEX*2.0*53
"PKG",167,22,1,"PAH",1,1,11,0)
 
"PKG",167,22,1,"PAH",1,1,12,0)
Please see patch LEX*2.0*52 for install instructions
"PRE")
LEX2053
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","LEX2053")
0^1^B85479743
"RTN","LEX2053",1,0)
LEX2053 ;ISL/KER - LEX*2.0*53 Env Check ;06/06/2007
"RTN","LEX2053",2,0)
 ;;2.0;LEXICON UTILITY;**53**;Sep 23, 1996;Build 18
"RTN","LEX2053",3,0)
 ;              
"RTN","LEX2053",4,0)
 ; Variables NEWed or KILLed Elsewhere
"RTN","LEX2053",5,0)
 ;    XPDABORT
"RTN","LEX2053",6,0)
 ;    XPDDIQ("XPI1")
"RTN","LEX2053",7,0)
 ;    XPDDIQ("XPZ1")
"RTN","LEX2053",8,0)
 ;    XPDENV
"RTN","LEX2053",9,0)
 ;    XPDQUIT
"RTN","LEX2053",10,0)
 ;              
"RTN","LEX2053",11,0)
 ; Global Variables
"RTN","LEX2053",12,0)
 ;    ^LEXM
"RTN","LEX2053",13,0)
 ;              
"RTN","LEX2053",14,0)
 ; External References
"RTN","LEX2053",15,0)
 ;    DBIA 10015  EN^DIQ1
"RTN","LEX2053",16,0)
 ;    DBIA 10141  $$PATCH^XPDUTL
"RTN","LEX2053",17,0)
 ;    DBIA 10141  $$VERSION^XPDUTL
"RTN","LEX2053",18,0)
 ;    DBIA 10141  BMES^XPDUTL
"RTN","LEX2053",19,0)
 ;    DBIA 10141  MES^XPDUTL
"RTN","LEX2053",20,0)
 ;              
"RTN","LEX2053",21,0)
ENV ; LEX*2.0*53 Environment Check
"RTN","LEX2053",22,0)
 ;                    
"RTN","LEX2053",23,0)
 ;   General
"RTN","LEX2053",24,0)
 ;
"RTN","LEX2053",25,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR,LEXG,LEXE,LEXSTR,LEXSUBJ D IMP
"RTN","LEX2053",26,0)
 K XPDDIQ("XPZ1","B"),XPDDIQ("XPI1","B") S XPDDIQ("XPZ1","B")="NO",XPDDIQ("XPI1","B")="NO"
"RTN","LEX2053",27,0)
 S LEXSTR=$G(LEXPTYPE) S:$L($G(LEXFY))&($L($G(LEXQTR))) LEXSTR=LEXSTR_" for "_$G(LEXFY)_" "_$G(LEXQTR)_" Quarter"
"RTN","LEX2053",28,0)
 D BM(LEXSTR),M("")
"RTN","LEX2053",29,0)
 S U="^"
"RTN","LEX2053",30,0)
 ;     No user
"RTN","LEX2053",31,0)
 D:+($$UR)'>0 ET("User not defined (DUZ)")
"RTN","LEX2053",32,0)
 ;     No IO
"RTN","LEX2053",33,0)
 D:+($$SY)'>0 ET("Undefined IO variable(s)")
"RTN","LEX2053",34,0)
 I $D(LEXE) D ABRT Q
"RTN","LEX2053",35,0)
 ;                    
"RTN","LEX2053",36,0)
 ;   Load Distribution
"RTN","LEX2053",37,0)
 ;
"RTN","LEX2053",38,0)
 ;     XPDENV = 0 Environment Check during Load
"RTN","LEX2053",39,0)
 ;
"RTN","LEX2053",40,0)
 ;       Check Version (2.0)
"RTN","LEX2053",41,0)
 I $$VERSION^XPDUTL("LEX")'="2.0" D  D ABRT Q
"RTN","LEX2053",42,0)
 . D ET("Version 2.0 not found.  Please install Lexicon Utility v 2.0")
"RTN","LEX2053",43,0)
 ;
"RTN","LEX2053",44,0)
 ;       Check Required Patches
"RTN","LEX2053",45,0)
 D:'$L($G(LEXREQP)) IMP I $L(LEXREQP) D
"RTN","LEX2053",46,0)
 . N LEXPAT,LEXI,LEXPN
"RTN","LEX2053",47,0)
 . F LEXI=1:1 Q:'$L($P(LEXREQP,";",LEXI))  S LEXPAT=$P(LEXREQP,";",LEXI) D
"RTN","LEX2053",48,0)
 . . S LEXPN=$$PATCH^XPDUTL(LEXPAT) W !,"   Checking for ",LEXPAT I +LEXPN>0 H 1 W " - installed"
"RTN","LEX2053",49,0)
 . . I +LEXPN'>0 D ET((LEXPAT_" not found, please install "_LEXPAT_" before continuing"))
"RTN","LEX2053",50,0)
 I $D(LEXE) D ABRT Q
"RTN","LEX2053",51,0)
 S LEXG=$$RGBL
"RTN","LEX2053",52,0)
 I $D(LEXE)&(+LEXG=0) D ABRT Q
"RTN","LEX2053",53,0)
 I $D(LEXE)&(+LEXG<0) D ABRT Q
"RTN","LEX2053",54,0)
 I '$D(LEXFULL)&(+($G(XPDENV))'=1) D QUIT Q
"RTN","LEX2053",55,0)
 ;                    
"RTN","LEX2053",56,0)
 ;   Install Package(s)
"RTN","LEX2053",57,0)
 ;
"RTN","LEX2053",58,0)
 ;     XPDENV = 1 Environment Check during Install
"RTN","LEX2053",59,0)
 ;
"RTN","LEX2053",60,0)
 ;       Checking Global "Write" Protection 
"RTN","LEX2053",61,0)
 D:+($G(XPDENV))=1 GBLS I $D(LEXE) D ABRT Q
"RTN","LEX2053",62,0)
 ;       Check Import Global Checksum 
"RTN","LEX2053",63,0)
 D:+($G(XPDENV))=1 CS I $D(LEXE) D ABRT Q
"RTN","LEX2053",64,0)
 ;                    
"RTN","LEX2053",65,0)
 ;   Quit, Exit or Abort
"RTN","LEX2053",66,0)
 ;
"RTN","LEX2053",67,0)
QUIT ;     Quit   Passed Environment Check
"RTN","LEX2053",68,0)
 K LEXFULL D OK
"RTN","LEX2053",69,0)
 Q
"RTN","LEX2053",70,0)
EXIT ;     Exit   Failed Environment Check
"RTN","LEX2053",71,0)
 D:$D(LEXE) ED S XPDQUIT=2 K LEXE,LEXFULL Q
"RTN","LEX2053",72,0)
ABRT ;     Abort  Failed Environment Check, KILL the distribution
"RTN","LEX2053",73,0)
 D:$D(LEXE) ED S XPDABORT=1,XPDQUIT=1,XPDQUIT("LEX*2.0*53")=1
"RTN","LEX2053",74,0)
 K LEXE,LEXFULL
"RTN","LEX2053",75,0)
 Q
"RTN","LEX2053",76,0)
 ;               
"RTN","LEX2053",77,0)
 ; Checks
"RTN","LEX2053",78,0)
 ;
"RTN","LEX2053",79,0)
GBLS ;   Check Write access on globals
"RTN","LEX2053",80,0)
 N LEXB1,LEXB2,LEXE,LEXGBL,LEXRT,LEXT,LEXF,LEXI,LEXX,LEXOK,LEXS,X S LEXOK=1
"RTN","LEX2053",81,0)
 D BM("   I will now check the protection on ^LEX, ^ICPT, ^ICD and ^DIC Globals.")
"RTN","LEX2053",82,0)
 D M("   If you get an ERROR, you will need to change the protection on these")
"RTN","LEX2053",83,0)
 D M("   globals to allow read/write as indicated:")
"RTN","LEX2053",84,0)
 D BM("                        Owner     Group    World   Network")
"RTN","LEX2053",85,0)
 D M("      Cache systems      RWD       RW       RW      RWD")
"RTN","LEX2053",86,0)
 D BM("   Checking:"),M(" ")
"RTN","LEX2053",87,0)
 S LEXS="",X=1 F LEXI=1:1 D  Q:'$L(LEXX)
"RTN","LEX2053",88,0)
 . S LEXX="" S LEXE="S LEXX=$T(GD+"_LEXI_")" X LEXE S LEXX=$$TRIM(LEXX) Q:'$L(LEXX)  Q:'$L($TR(LEXX,";",""))
"RTN","LEX2053",89,0)
 . S LEXGBL=$P(LEXX,";",3) S LEXRT=$P(LEXX,";",4),LEXT=$P(LEXX,";",5),LEXF=$P(LEXX,";",6)
"RTN","LEX2053",90,0)
 . S (LEXB1,LEXB2)="",$P(LEXB1," ",(19-$L(LEXRT)))="",$P(LEXB2," ",(28-$L(LEXT)))=""
"RTN","LEX2053",91,0)
 . I '$D(@LEXGBL) D RGNF S LEXOK=0 D M(("      <"_LEXRT_" not found>")) Q
"RTN","LEX2053",92,0)
 . D M(("      "_LEXRT_LEXB1_LEXT_LEXB2_LEXF)) S @LEXGBL=$G(@LEXGBL) H 1
"RTN","LEX2053",93,0)
 D:LEXOK M("    --> ok") D:'LEXOK M("    ??") D M(" ")
"RTN","LEX2053",94,0)
 Q
"RTN","LEX2053",95,0)
RGBL(X) ;   Check Write access on globals
"RTN","LEX2053",96,0)
 N LEXS,LEXI,LEXX,LEXEC,LEXGBL,LEXRT,LEXT,LEXF,LEXB1,LEXB2
"RTN","LEX2053",97,0)
 S LEXS="",X=1 F LEXI=1:1 D  Q:'$L(LEXX)
"RTN","LEX2053",98,0)
 . S LEXX="" S LEXEC="S LEXX=$T(GD+"_LEXI_")" X LEXEC S LEXX=$$TRIM(LEXX) Q:'$L(LEXX)  Q:'$L($TR(LEXX,";",""))
"RTN","LEX2053",99,0)
 . S LEXGBL=$P(LEXX,";",3) S LEXRT=$P(LEXX,";",4),LEXT=$P(LEXX,";",5),LEXF=$P(LEXX,";",6)
"RTN","LEX2053",100,0)
 . S (LEXB1,LEXB2)="",$P(LEXB1," ",(15-$L(LEXRT)))="",$P(LEXB2," ",(28-$L(LEXT)))=""
"RTN","LEX2053",101,0)
 . I '$D(@LEXGBL) S:LEXS'[LEXRT LEXS=LEXS_", "_LEXRT S X=-1 S:LEXGBL["LEXM("&(X=1) X=0
"RTN","LEX2053",102,0)
 I $L(LEXS),X'>0 D
"RTN","LEX2053",103,0)
 . S:LEXS[", " LEXS=$P(LEXS,", ",1,($L(LEXS,", ")-1))_" and "_$P(LEXS,", ",$L(LEXS,", "))
"RTN","LEX2053",104,0)
 . S:$E(LEXS,1,2)=", " LEXS=$E(LEXS,3,$L(LEXS)) S:$E(LEXS,1,7)[" and " LEXS=$P(LEXS," and ",2)
"RTN","LEX2053",105,0)
 . D:X=-1 ET(("Global"_$S(LEXS[", "!(LEXS[" and "):"s",1:"")_" "_LEXS_" either not found or incomplete."))
"RTN","LEX2053",106,0)
 . D:X=0 CM
"RTN","LEX2053",107,0)
 Q X
"RTN","LEX2053",108,0)
RGNF ;   Required global not found
"RTN","LEX2053",109,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP
"RTN","LEX2053",110,0)
 D:$G(LEXGBL)["^LEX"&($G(LEXGBL)'["^LEXM") ET(""),ET("Required global "_$P($G(LEXGBL),"(",1)_" not found.")
"RTN","LEX2053",111,0)
 D:$G(LEXGBL)["^LEX"&($G(LEXGBL)["^LEXM") CM
"RTN","LEX2053",112,0)
 Q
"RTN","LEX2053",113,0)
CHK ;   Check the Checksum
"RTN","LEX2053",114,0)
 D CS I $D(LEXE) D ED Q
"RTN","LEX2053",115,0)
 D BM("  OK"),M(" ")
"RTN","LEX2053",116,0)
 Q
"RTN","LEX2053",117,0)
CS ;   Checksum for import global
"RTN","LEX2053",118,0)
 K LEXE D BM("   Running checksum routine on the ^LEXM import global, please wait")
"RTN","LEX2053",119,0)
 N LEXCK,LEXND,LEXV S LEXCK=+($G(^LEXM(0,"CHECKSUM")))
"RTN","LEX2053",120,0)
 S LEXND=+($G(^LEXM(0,"NODES"))),LEXV=+($$VC(LEXCK,LEXND))
"RTN","LEX2053",121,0)
 D M(" ") D:LEXV>0 M("     Checksum is ok"),M(" ")
"RTN","LEX2053",122,0)
 D:LEXV=0 CM D:LEXV=-1 CW D:LEXV=-2 CU D:LEXV=-3 CF
"RTN","LEX2053",123,0)
 Q
"RTN","LEX2053",124,0)
VC(X,Y) ;   Verify Checksum for import global
"RTN","LEX2053",125,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR Q:'$D(^LEXM) 0
"RTN","LEX2053",126,0)
 D IMP I $G(^LEXM(0,"BUILD"))'=$G(LEXBUILD) Q -1
"RTN","LEX2053",127,0)
 N LEXCK,LEXND,LEXCNT,LEXLC,LEXL,LEXS,LEXNC,LEXD,LEXN,LEXC,LEXGCS,LEXP,LEXT
"RTN","LEX2053",128,0)
 S LEXCK=+($G(X)),LEXND=+($G(Y))
"RTN","LEX2053",129,0)
 Q:LEXCK'>0!(LEXND'>0) -2
"RTN","LEX2053",130,0)
 S LEXL=64,(LEXCNT,LEXLC)=0,LEXS=(+(LEXND\LEXL))
"RTN","LEX2053",131,0)
 S:LEXS=0 LEXS=1 D:+($O(^LEXM(0)))>0 M("")
"RTN","LEX2053",132,0)
 S (LEXC,LEXN)="^LEXM",(LEXNC,LEXGCS)=0 W "   "
"RTN","LEX2053",133,0)
 F  S LEXN=$Q(@LEXN) Q:LEXN=""!(LEXN'[LEXC)  D
"RTN","LEX2053",134,0)
 . Q:LEXN="^LEXM(0,""CHECKSUM"")"
"RTN","LEX2053",135,0)
 . Q:LEXN="^LEXM(0,""NODES"")"
"RTN","LEX2053",136,0)
 . S LEXCNT=LEXCNT+1
"RTN","LEX2053",137,0)
 . I LEXCNT'<LEXS S LEXLC=LEXLC+1 W:LEXLC'>LEXL "." S LEXCNT=0
"RTN","LEX2053",138,0)
 . S LEXNC=LEXNC+1,LEXD=@LEXN,LEXT=LEXN_"="_LEXD
"RTN","LEX2053",139,0)
 . F LEXP=1:1:$L(LEXT) S LEXGCS=$A(LEXT,LEXP)*LEXP+LEXGCS
"RTN","LEX2053",140,0)
 Q:LEXNC'=LEXND -3
"RTN","LEX2053",141,0)
 Q:LEXGCS'=LEXCK -3
"RTN","LEX2053",142,0)
 Q 1
"RTN","LEX2053",143,0)
SY(X) ;   Check System variables
"RTN","LEX2053",144,0)
 Q:'$D(IO)!('$D(IOF))!('$D(IOM))!('$D(ION))!('$D(IOSL))!('$D(IOST)) 0
"RTN","LEX2053",145,0)
 Q 1
"RTN","LEX2053",146,0)
UR(X) ;   Check User variables
"RTN","LEX2053",147,0)
 Q:'$L($G(DUZ(0))) 0
"RTN","LEX2053",148,0)
 Q:+($G(DUZ))=0!($$NOTDEF(+$G(DUZ))) 0
"RTN","LEX2053",149,0)
 Q 1
"RTN","LEX2053",150,0)
 ;               
"RTN","LEX2053",151,0)
 ; Error messages
"RTN","LEX2053",152,0)
 ;
"RTN","LEX2053",153,0)
CM ;   Missing ^LEXM
"RTN","LEX2053",154,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP D ET(""),ET("Missing import global ^LEXM.") D CO
"RTN","LEX2053",155,0)
 Q
"RTN","LEX2053",156,0)
CW ;   Wrong ^LEXM
"RTN","LEX2053",157,0)
 N LEXB,LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP S LEXB=$G(^LEXM(0,"BUILD")) D ET("")
"RTN","LEX2053",158,0)
 I $L(LEXBUILD),$L(LEXB),LEXBUILD'=LEXB D  Q
"RTN","LEX2053",159,0)
 . D ET(("Incorrect import global ^LEXM found ("_LEXB_" global).")) D CKO
"RTN","LEX2053",160,0)
 D ET("Incorrect import global ^LEXM found.") D CKO
"RTN","LEX2053",161,0)
 Q
"RTN","LEX2053",162,0)
CU ;   Unable to verify
"RTN","LEX2053",163,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP D ET(""),ET("Unable to verify checksum for import global ^LEXM (possibly corrupt).") D CKO
"RTN","LEX2053",164,0)
 Q
"RTN","LEX2053",165,0)
CF ;   Failed checksum
"RTN","LEX2053",166,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP D ET("") D ET("Import global ^LEXM failed checksum.") D CKO
"RTN","LEX2053",167,0)
 Q
"RTN","LEX2053",168,0)
CO ;   Obtain new global
"RTN","LEX2053",169,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP
"RTN","LEX2053",170,0)
 D ET(""),ET("    Please obtain a copy of the import global ^LEXM contained in the ")
"RTN","LEX2053",171,0)
 D ET(("    global host file "_LEXIGHF_" before continuing with the "_LEXBUILD))
"RTN","LEX2053",172,0)
 D ET(("    installation."))
"RTN","LEX2053",173,0)
 Q
"RTN","LEX2053",174,0)
CKO ;   Kill and Obtain new global
"RTN","LEX2053",175,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR D IMP
"RTN","LEX2053",176,0)
 D ET(""),ET("    Please KILL the existing import global ^LEXM from your system")
"RTN","LEX2053",177,0)
 D ET(("    and obtain a new copy of ^LEXM contained in the global host file"))
"RTN","LEX2053",178,0)
 D ET(("    "_LEXIGHF_" before continuing with the "_LEXBUILD_" installation."))
"RTN","LEX2053",179,0)
 Q
"RTN","LEX2053",180,0)
ET(X) ;   Error Text
"RTN","LEX2053",181,0)
 N LEXI S LEXI=+($G(LEXE(0))),LEXI=LEXI+1,LEXE(LEXI)="    "_$G(X),LEXE(0)=LEXI
"RTN","LEX2053",182,0)
 Q
"RTN","LEX2053",183,0)
ED ;   Error Display
"RTN","LEX2053",184,0)
 N LEXI S LEXI=0 F  S LEXI=$O(LEXE(LEXI)) Q:+LEXI=0  D M(LEXE(LEXI))
"RTN","LEX2053",185,0)
 D M(" ") K LEXE Q
"RTN","LEX2053",186,0)
 ;                   
"RTN","LEX2053",187,0)
 ; Miscellaneous
"RTN","LEX2053",188,0)
 ;
"RTN","LEX2053",189,0)
NOTDEF(IEN) ;   Check to see if user is defined
"RTN","LEX2053",190,0)
 N DA,DR,DIQ,LEX,DIC S DA=IEN,DR=.01,DIC=200,DIQ="LEX" D EN^DIQ1 Q '$D(LEX)
"RTN","LEX2053",191,0)
OK ;   Environment is OK
"RTN","LEX2053",192,0)
 N LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR,LEXT
"RTN","LEX2053",193,0)
 D IMP S LEXT="  Environment "_$S($L(LEXBUILD):("for patch/build "_LEXBUILD_" "),1:"")_"is ok"
"RTN","LEX2053",194,0)
 D BM(LEXT),M(" ")
"RTN","LEX2053",195,0)
 Q
"RTN","LEX2053",196,0)
BM(X) ;   Blank Line with Message
"RTN","LEX2053",197,0)
 D BMES^XPDUTL($G(X)) Q
"RTN","LEX2053",198,0)
M(X) ;   Message
"RTN","LEX2053",199,0)
 D MES^XPDUTL($G(X)) Q
"RTN","LEX2053",200,0)
TRIM(X) ;   Trim Spaces
"RTN","LEX2053",201,0)
 S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEX2053",202,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","LEX2053",203,0)
 Q X
"RTN","LEX2053",204,0)
IMP ;   Import names
"RTN","LEX2053",205,0)
 K LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR,LEXSUBJ
"RTN","LEX2053",206,0)
 ;     Patch Type
"RTN","LEX2053",207,0)
 S LEXPTYPE="Code Set Remedy Ticket Fixes"
"RTN","LEX2053",208,0)
 S LEXPTYPE="Code Set Update"
"RTN","LEX2053",209,0)
 ;     Revision
"RTN","LEX2053",210,0)
 S LEXLREV=53
"RTN","LEX2053",211,0)
 ;     Required Builds
"RTN","LEX2053",212,0)
 S LEXREQP="LEX*2.0*50"
"RTN","LEX2053",213,0)
 ;     This Build Name
"RTN","LEX2053",214,0)
 S LEXBUILD="LEX*2.0*53"
"RTN","LEX2053",215,0)
 ;     This Build's Export Global Host Filename
"RTN","LEX2053",216,0)
 S LEXIGHF="LEX_2_53.GBL"
"RTN","LEX2053",217,0)
 ;     Fiscal Year
"RTN","LEX2053",218,0)
 S LEXFY="FY08"
"RTN","LEX2053",219,0)
 ;     Quarter
"RTN","LEX2053",220,0)
 S LEXQTR="1st"
"RTN","LEX2053",221,0)
 ;     LEXSUBJ
"RTN","LEX2053",222,0)
 S LEXSUBJ=$G(LEXPTYPE) S:$L($G(LEXFY))&($L($G(LEXQTR))) LEXSUBJ=LEXSUBJ_" for "_$G(LEXFY)_" "_$G(LEXQTR)_" Quarter"
"RTN","LEX2053",223,0)
 Q
"RTN","LEX2053",224,0)
EF ;   Exported Files
"RTN","LEX2053",225,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2053",226,0)
 ;;^LEXT(757.2);^LEXT(757.2);Lexicon Subsets/Defaults;757.2
"RTN","LEX2053",227,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2053",228,0)
 ;;^DIC(81.1,0);^DIC(81.1);CPT Category;81.1
"RTN","LEX2053",229,0)
 ;;^DIC(81.2,0);^DIC(81.2);CPT Copyright;81.2
"RTN","LEX2053",230,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2053",231,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2053",232,0)
 ;;^ICD0(0);^ICD0(;ICD Operation/Procedure;80.1
"RTN","LEX2053",233,0)
 ;;^ICD(0);^ICD(;DRG Grouper;80.2
"RTN","LEX2053",234,0)
 ;;^ICM(0);^ICM(;MAJOR DIAGNOSTIC CATEGORY;80.3
"RTN","LEX2053",235,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2053",236,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2053",237,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2053",238,0)
 ;;^DIC(81.1,0);^DIC(81.1);CPT Category;81.1
"RTN","LEX2053",239,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2053",240,0)
 Q
"RTN","LEX2053",241,0)
GD ;   Global Data
"RTN","LEX2053",242,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2053",243,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2053",244,0)
 ;;^ICD0(0);^ICD0(;ICD Operation/Procedure;80.1
"RTN","LEX2053",245,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2053",246,0)
 ;;^DIC(81.1,0);^DIC(81.1);CPT Category;81.1
"RTN","LEX2053",247,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2053A")
0^3^B31973876
"RTN","LEX2053A",1,0)
LEX2053A ;ISL/KER - LEX*2.0*53 Post Install ;01/27/2007
"RTN","LEX2053A",2,0)
 ;;2.0;LEXICON UTILITY;**53**;Sep 23, 1996;Build 18
"RTN","LEX2053A",3,0)
 ;              
"RTN","LEX2053A",4,0)
EN ; Main Entry Point
"RTN","LEX2053A",5,0)
 N ACT,BEG,CNT,CODE,DA,DIE,DIK,EFF,END,EXEC,EXIST,FDS,FLAGS,I,IEN,IENA,IENB,IENE,IENS,LEXDA,LINE,MC26,MC,MIEN,MOD,MODN
"RTN","LEX2053A",6,0)
 N MSG,MTC,ND,NIEN,NN,OLD,OMC,RIEN,TIEN,TXT,X,Y D MES^XPDUTL(""),HJ,UPD,AC,TC,NUM
"RTN","LEX2053A",7,0)
 Q
"RTN","LEX2053A",8,0)
HJ ; Modifier AH and AJ
"RTN","LEX2053A",9,0)
 D REMI("AH and AJ Modifiers w/Mental Health Codes","HD0000000 209719")
"RTN","LEX2053A",10,0)
 N ACT,BEG,END,LINE,TXT,MOD S ACT=3050101
"RTN","LEX2053A",11,0)
 S TXT="" F MOD="AH","AJ" D
"RTN","LEX2053A",12,0)
 . N MIEN,DA,DIK S MIEN=$O(^DIC(81.3,"B",MOD,0)) Q:+MIEN'>0  F LINE=1:1 D  Q:'$L(TXT)
"RTN","LEX2053A",13,0)
 . . N CNT,BEG,END,ND,EXEC,RIEN,TIEN,NIEN,DA,DIK S RIEN=0,TXT="" S EXEC="S TXT=$T("_MOD_"+"_LINE_")" X EXEC
"RTN","LEX2053A",14,0)
 . . S TXT=$$TM(TXT," ") Q:'$L(TXT)  Q:'$L($TR(TXT,";",""))  S TXT=$P(TXT,";",3,299)
"RTN","LEX2053A",15,0)
 . . S BEG=$P(TXT,"^",1),END=$P(TXT,"^",2) Q:$L(BEG)'=5  Q:$L(END)'=5
"RTN","LEX2053A",16,0)
 . . S ND=BEG_"^"_END_"^"_ACT
"RTN","LEX2053A",17,0)
 . . S TIEN=0 F  S TIEN=$O(^DIC(81.3,+MIEN,10,"B",BEG,TIEN)) Q:+TIEN=0  D
"RTN","LEX2053A",18,0)
 . . . I $P($G(^DIC(81.3,+MIEN,10,TIEN,0)),"^",1,3)=ND S RIEN=TIEN
"RTN","LEX2053A",19,0)
 . . Q:+RIEN>0  S NIEN=$O(^DIC(81.3,+MIEN,10," "),-1)+1
"RTN","LEX2053A",20,0)
 . . W !,"  NIEN=",NIEN
"RTN","LEX2053A",21,0)
 . . S ^DIC(81.3,+MIEN,10,NIEN,0)=ND
"RTN","LEX2053A",22,0)
 . . S ^DIC(81.3,+MIEN,10,0)="^81.33DA^"_NIEN_"^"_NIEN
"RTN","LEX2053A",23,0)
 . . S DA(1)=+MIEN,DA=NIEN,DIK="^DIC(81.3,"_DA(1)_",10," D IX1^DIK K DA
"RTN","LEX2053A",24,0)
 . . W !,"    ",MOD,?8,ND
"RTN","LEX2053A",25,0)
 . K DA S DA=+MIEN,DIK="^DIC(81.3," D IX1^DIK K DA
"RTN","LEX2053A",26,0)
 Q
"RTN","LEX2053A",27,0)
UPD ; Unacceptable as Principal DX (ref: 205216)
"RTN","LEX2053A",28,0)
 D REMI("V53.01 & V53.02 not accepted as Principal DX","HD0000000 205216")
"RTN","LEX2053A",29,0)
 S:$P($G(^ICD9(13373,0)),"^",4)=1 $P(^ICD9(13373,0),"^",4)=""
"RTN","LEX2053A",30,0)
 S:$P($G(^ICD9(13374,0)),"^",4)=1 $P(^ICD9(13374,0),"^",4)=""
"RTN","LEX2053A",31,0)
 Q
"RTN","LEX2053A",32,0)
AC ;
"RTN","LEX2053A",33,0)
 D REMI("Wrong ICD Code for Anticoagulation","HD0000000 203050")
"RTN","LEX2053A",34,0)
 N IENS,TIEN,IENA,IENB,IEN,LEXDA,DA,DIK,DIE,MC,OMC S MC=163475
"RTN","LEX2053A",35,0)
 K IENS,FDA S (IEN,DA)=331819,IENS=IEN_","
"RTN","LEX2053A",36,0)
 S FDA(757.01,IENS,.01)="Hemorrhagic Disorder due to Intrinsic Circulating Anticoagulants"
"RTN","LEX2053A",37,0)
 S FDA(757.01,IENS,1)=MC
"RTN","LEX2053A",38,0)
 S FDA(757.01,IENS,2)=2
"RTN","LEX2053A",39,0)
 D FILE^DIE("","FDA") S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2053A",40,0)
 S OMC=182246,TIEN=0 F  S TIEN=$O(^LEX(757.02,"AMC",OMC,TIEN)) Q:+TIEN=0  D
"RTN","LEX2053A",41,0)
 . N IEN,IENS,FDA,DA,DIK K IENS,FDA S (IEN,DA)=TIEN,IENS=IEN_","
"RTN","LEX2053A",42,0)
 . S FDA(757.02,IENS,3)=MC D FILE^DIE("","FDA") S DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2053A",43,0)
 S DA=327592,DIK="^LEX(757.02," D ^DIK
"RTN","LEX2053A",44,0)
 K IENS,FDA S (IEN,DA)=8516,IENS=IEN_","
"RTN","LEX2053A",45,0)
 S FDA(757.01,IENS,.01)="Anticoagulation Therapy"
"RTN","LEX2053A",46,0)
 S FDA(757.01,IENS,1)=MC
"RTN","LEX2053A",47,0)
 S FDA(757.01,IENS,2)=2
"RTN","LEX2053A",48,0)
 D FILE^DIE("","FDA") S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2053A",49,0)
 S OMC=1753,TIEN=0 F  S TIEN=$O(^LEX(757.02,"AMC",OMC,TIEN)) Q:+TIEN=0  D
"RTN","LEX2053A",50,0)
 . N IEN,IENS,FDA,DA,DIK K IENS,FDA S (IEN,DA)=TIEN,IENS=IEN_","
"RTN","LEX2053A",51,0)
 . S FDA(757.02,IENS,3)=MC D FILE^DIE("","FDA") S DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2053A",52,0)
 K IENS,FDA S (IEN,DA)=316494,IENS=IEN_","
"RTN","LEX2053A",53,0)
 S FDA(757.02,IENS,1)="V58.61"
"RTN","LEX2053A",54,0)
 S FDA(757.02,IENS,3)=MC
"RTN","LEX2053A",55,0)
 D FILE^DIE("","FDA") S DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2053A",56,0)
 K IENS,FDA S (IEN,DA)=304066,IENS=IEN_","
"RTN","LEX2053A",57,0)
 S FDA(757.01,IENS,.01)="Anticoagulation"
"RTN","LEX2053A",58,0)
 S FDA(757.01,IENS,1)=MC
"RTN","LEX2053A",59,0)
 S FDA(757.01,IENS,2)=2
"RTN","LEX2053A",60,0)
 D FILE^DIE("","FDA") S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2053A",61,0)
 K IENS,FDA S (IEN,DA)=303945,IENS=IEN_","
"RTN","LEX2053A",62,0)
 S FDA(757.01,IENS,1)=MC
"RTN","LEX2053A",63,0)
 S FDA(757.01,IENS,2)=2
"RTN","LEX2053A",64,0)
 D FILE^DIE("","FDA") S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2053A",65,0)
 K IENS,FDA S (IEN,DA)=262100,IENS=IEN_","
"RTN","LEX2053A",66,0)
 S FDA(757.01,IENS,.01)="Anticoagulant Therapy"
"RTN","LEX2053A",67,0)
 S FDA(757.01,IENS,1)=MC
"RTN","LEX2053A",68,0)
 S FDA(757.01,IENS,2)=2
"RTN","LEX2053A",69,0)
 D FILE^DIE("","FDA") S DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2053A",70,0)
 S OMC=128555,TIEN=0 F  S TIEN=$O(^LEX(757.02,"AMC",OMC,TIEN)) Q:+TIEN=0  D
"RTN","LEX2053A",71,0)
 . N IEN,IENS,FDA,DA,DIK K IENS,FDA S (IEN,DA)=TIEN,IENS=IEN_","
"RTN","LEX2053A",72,0)
 . S FDA(757.02,IENS,3)=MC D FILE^DIE("","FDA") S DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2053A",73,0)
 F OMC=1753,128555,182246 D
"RTN","LEX2053A",74,0)
 . N DA,DIK S DA=0 F  S DA=$O(^LEX(757.1,"B",OMC,DA)) Q:+DA'>0  D
"RTN","LEX2053A",75,0)
 . . S DIK="^LEX(757.1," D ^DIK
"RTN","LEX2053A",76,0)
 . S DA=OMC,DIK="^LEX(757.001," D ^DIK
"RTN","LEX2053A",77,0)
 . S DA=OMC,DIK="^LEX(757," D ^DIK
"RTN","LEX2053A",78,0)
 . W:$D(^LEX(757,OMC,0)) !,"^LEX(757,",OMC,",0)"
"RTN","LEX2053A",79,0)
 . W:$D(^LEX(757.001,OMC,0)) !,"^LEX(757.001,",OMC,",0)"
"RTN","LEX2053A",80,0)
 . W:$D(^LEX(757.01,"AMC",OMC)) !,"^LEX(757.01,""AMC"",",OMC,")"
"RTN","LEX2053A",81,0)
 . W:$D(^LEX(757.02,"AMC",OMC)) !,"^LEX(757.02,""AMC"",",OMC,")"
"RTN","LEX2053A",82,0)
 . W:$D(^LEX(757.1,"B",OMC)) !,"^LEX(757.1,""B"",",OMC,")"
"RTN","LEX2053A",83,0)
 . Q
"RTN","LEX2053A",84,0)
 Q
"RTN","LEX2053A",85,0)
TC ;   Undo 177452 Modifiers TC and 26 with CPT 77071
"RTN","LEX2053A",86,0)
 D REMI("Discontinue Modifier TC/26 with CPT Code 77071","HD0000000 177452")
"RTN","LEX2053A",87,0)
 D REMI("   (Duplicate of HD0000000 177452)","HD0000000 178171")
"RTN","LEX2053A",88,0)
 N DA,DIE,DIK,EFF,EXIST,FLAGS,FDA,IEN,IENE,IENS,CODE,OLD,TXT,MSG K FDA,IENS,IEN,DA,DIK,MTC,M26 S EFF=3070101
"RTN","LEX2053A",89,0)
 S MTC=$O(^DIC(81.3,"B","TC",0)),M26=$O(^DIC(81.3,"B","26",0)) F IEN=MTC,M26 D
"RTN","LEX2053A",90,0)
 . Q:+IEN'>0  K FDA,IENS,IENE,CODE S CODE=77071,DA(1)=IEN,(DA,IENE)=+($O(^DIC(81.3,IEN,10,"B",CODE,0))) I +DA>0 D
"RTN","LEX2053A",91,0)
 . . N DIK,CODE S DIK="^DIC(81.3,"_DA(1)_",10,",CODE=77072,IENS=$$IENS^DILF(.DA),FDA(81.32,IENS,.01)=CODE D FILE^DIE("","FDA")
"RTN","LEX2053A",92,0)
 Q
"RTN","LEX2053A",93,0)
NUM ;   Numeric Modifiers for codes 99201 through 99499
"RTN","LEX2053A",94,0)
 D REMI("Discontinue using modifiers 0A-9Z with EM codes","HD0000000 209696")
"RTN","LEX2053A",95,0)
 N MOD S MOD="" F  S MOD=$O(^DIC(81.3,"B",MOD)) Q:'$L(MOD)  D
"RTN","LEX2053A",96,0)
 . Q:$E(MOD,1)'?1N  Q:$E(MOD,2)'?1U  S MIEN=0 F  S MIEN=$O(^DIC(81.3,"B",MOD,MIEN)) Q:+MIEN'>0  D
"RTN","LEX2053A",97,0)
 . . N RIEN,MODN S MODN=$P($G(^DIC(81.3,+MIEN,0)),"^",2) S RIEN=0 F  S RIEN=$O(^DIC(81.3,+MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2053A",98,0)
 . . . N NN,ND,BEG,END S NN="^DIC(81.3,"_+MIEN_",10,"_+RIEN_",0)",ND=$G(@NN)
"RTN","LEX2053A",99,0)
 . . . S BEG=$P(ND,"^",1),END=$P(ND,"^",2) S:'$L(END) END=BEG Q:BEG>99215.1  Q:END<99201
"RTN","LEX2053A",100,0)
 . . . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D ^DIK K DA,DIK
"RTN","LEX2053A",101,0)
 Q
"RTN","LEX2053A",102,0)
TM(X,Y) ;   Trim Character C
"RTN","LEX2053A",103,0)
 S X=$G(X),Y=$E($G(Y),1) Q:$L(Y)'=1 X  F  Q:$E(X,1)'=Y  S X=$E(X,2,$L(X))
"RTN","LEX2053A",104,0)
 F  Q:$E(X,$L(X))'=Y  S X=$E(X,1,($L(X)-1))
"RTN","LEX2053A",105,0)
 Q X
"RTN","LEX2053A",106,0)
REMI(X,Y) ;   Remedy Ticket - Indented
"RTN","LEX2053A",107,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2053A",108,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>54  S X=X_" "
"RTN","LEX2053A",109,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X) Q
"RTN","LEX2053A",110,0)
IND(X) ;   Indent Text
"RTN","LEX2053A",111,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2053A",112,0)
 Q
"RTN","LEX2053A",113,0)
AH ; Modifier AH Code Ranges
"RTN","LEX2053A",114,0)
 ;;90801^90802
"RTN","LEX2053A",115,0)
 ;;96101^96120
"RTN","LEX2053A",116,0)
 ;;90804^90804
"RTN","LEX2053A",117,0)
 ;;90806^90806
"RTN","LEX2053A",118,0)
 ;;90808^90808
"RTN","LEX2053A",119,0)
 ;;90810^90810
"RTN","LEX2053A",120,0)
 ;;90812^90812
"RTN","LEX2053A",121,0)
 ;;90814^90814
"RTN","LEX2053A",122,0)
 ;;90845^90853
"RTN","LEX2053A",123,0)
 ;;90857^90857
"RTN","LEX2053A",124,0)
 ;;90880^90880
"RTN","LEX2053A",125,0)
 ;;97532^97533
"RTN","LEX2053A",126,0)
 ;;90816^90816
"RTN","LEX2053A",127,0)
 ;;90818^90818
"RTN","LEX2053A",128,0)
 ;;90821^90821
"RTN","LEX2053A",129,0)
 ;;90823^90823
"RTN","LEX2053A",130,0)
 ;;90826^90826
"RTN","LEX2053A",131,0)
 ;;90828^90828
"RTN","LEX2053A",132,0)
 ;;96150^96154
"RTN","LEX2053A",133,0)
 ;;
"RTN","LEX2053A",134,0)
AJ ; Modifier AJ Code Ranges
"RTN","LEX2053A",135,0)
 ;;90801^90802
"RTN","LEX2053A",136,0)
 ;;96116^96120
"RTN","LEX2053A",137,0)
 ;;90804^90804
"RTN","LEX2053A",138,0)
 ;;90810^90810
"RTN","LEX2053A",139,0)
 ;;90812^90812
"RTN","LEX2053A",140,0)
 ;;90814^90814
"RTN","LEX2053A",141,0)
 ;;90846^90853
"RTN","LEX2053A",142,0)
 ;;90857^90857
"RTN","LEX2053A",143,0)
 ;;97532^97533
"RTN","LEX2053A",144,0)
 ;;96150^96151
"RTN","LEX2053A",145,0)
 ;;
"RTN","LEX2053P")
0^2^B7669278
"RTN","LEX2053P",1,0)
LEX2053P ;ISL/KER - LEX*2.0*53 Pre/Post Install ;06/06/2007
"RTN","LEX2053P",2,0)
 ;;2.0;LEXICON UTILITY;**53**;Sep 23, 1996;Build 18
"RTN","LEX2053P",3,0)
 ;              
"RTN","LEX2053P",4,0)
 ; Variables NEWed or KILLed Elsewhere
"RTN","LEX2053P",5,0)
 ;    None
"RTN","LEX2053P",6,0)
 ;              
"RTN","LEX2053P",7,0)
 ; Global Variables
"RTN","LEX2053P",8,0)
 ;    ^LEXM
"RTN","LEX2053P",9,0)
 ;              
"RTN","LEX2053P",10,0)
 ; External References
"RTN","LEX2053P",11,0)
 ;    None
"RTN","LEX2053P",12,0)
 ;              
"RTN","LEX2053P",13,0)
 Q
"RTN","LEX2053P",14,0)
POST ; LEX*2.0*53 Post-Install
"RTN","LEX2053P",15,0)
 ;            
"RTN","LEX2053P",16,0)
 ; From IMP^LEX2053
"RTN","LEX2053P",17,0)
 ;            
"RTN","LEX2053P",18,0)
 ;      LEXBUILD   Build Name - LEX*2.0*nn
"RTN","LEX2053P",19,0)
 ;      LEXPTYPE   Patch Type - Remedy or Quarterly
"RTN","LEX2053P",20,0)
 ;      LEXFY      Fiscal Year - FYnn
"RTN","LEX2053P",21,0)
 ;      LEXQTR     Quarter - 1st, 2nd, 3rd, or 4th
"RTN","LEX2053P",22,0)
 ;      LEXIGHF    Name of Host File - LEX_2_nn.GBL
"RTN","LEX2053P",23,0)
 ;      LEXLREV    Revision - nn
"RTN","LEX2053P",24,0)
 ;      LEXREQP    Required Builds - build;build;build
"RTN","LEX2053P",25,0)
 ;            
"RTN","LEX2053P",26,0)
 N LEXEDT,LEXPTYPE,LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXFY,LEXQTR,LEXB,LEXCD,LEXRTN,LEXSTR,LEXSUBJ,LEXLAST D IMP^LEX2053
"RTN","LEX2053P",27,0)
 S LEXEDT=$G(^LEXM(0,"CREATED")) D CON,LOAD
"RTN","LEX2053P",28,0)
 I $D(^%ZOSF("DEL")) S LEXRTN="LEX2053A" D
"RTN","LEX2053P",29,0)
 . N EXC,X,Y I +($$ROK(LEXRTN))>0 S (EXC,X)=$G(^%ZOSF("DEL")) D ^DIM I $D(X) S X=LEXRTN X EXC
"RTN","LEX2053P",30,0)
 Q
"RTN","LEX2053P",31,0)
LOAD ; Load Data from export global ^LEXM
"RTN","LEX2053P",32,0)
 ;             
"RTN","LEX2053P",33,0)
 ;      LEXSHORT   Send Short Message
"RTN","LEX2053P",34,0)
 ;      LEXMSG     Flag to send Message
"RTN","LEX2053P",35,0)
 ;            
"RTN","LEX2053P",36,0)
 N LEXSHORT,LEXMSG S LEXSHORT="",LEXMSG=""
"RTN","LEX2053P",37,0)
 S LEXSTR=$G(LEXPTYPE) S:$L($G(LEXFY))&($L($G(LEXQTR))) LEXSTR=LEXSTR_" for "_$G(LEXFY)_" "_$G(LEXQTR)_" Quarter"
"RTN","LEX2053P",38,0)
 S U="^",LEXB=$G(^LEXM(0,"BUILD")) Q:LEXB=""  Q:LEXBUILD=""
"RTN","LEX2053P",39,0)
 D:LEXB=LEXBUILD EN^LEXXGI
"RTN","LEX2053P",40,0)
LQ ; Load Quit
"RTN","LEX2053P",41,0)
 D KLEXM
"RTN","LEX2053P",42,0)
 Q
"RTN","LEX2053P",43,0)
 ;             
"RTN","LEX2053P",44,0)
KLEXM ; Subscripted Kill of ^LEXM
"RTN","LEX2053P",45,0)
 N I S I="" F  S I=$O(^LEXM(I)) Q:'$L(I)  K ^LEXM(I)
"RTN","LEX2053P",46,0)
 Q
"RTN","LEX2053P",47,0)
 ;            
"RTN","LEX2053P",48,0)
PRE ; LEX*2.0*53 Pre-Install   (N/A for patch 53)
"RTN","LEX2053P",49,0)
 Q
"RTN","LEX2053P",50,0)
RX ; Re-Index
"RTN","LEX2053P",51,0)
 N Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTSAVE,ZTRTN,ZTREQ,ZTQUEUED
"RTN","LEX2053P",52,0)
 S ZTRTN="RXT^LEX2053P",ZTDESC="Re-Index CPT Modifier file 81.3",ZTIO="",ZTDTH=$H D ^%ZTLOAD
"RTN","LEX2053P",53,0)
 D:+($G(ZTSK))>0 BMES^XPDUTL((" Re-Indexing CPT Modified file 81.3 (Task #"_+($G(ZTSK))_")"))
"RTN","LEX2053P",54,0)
 D HOME^%ZIS K Y,ZTSK,ZTDESC,ZTDTH,ZTIO,ZTSAVE,ZTRTN
"RTN","LEX2053P",55,0)
 Q
"RTN","LEX2053P",56,0)
RXT ; Re-Index (tasked)
"RTN","LEX2053P",57,0)
 S:$D(ZTQUEUED) ZTREQ="@" N MIEN,DA,DIK S MIEN=0 F  S MIEN=$O(^DIC(81.3,MIEN)) Q:+MIEN'>0  D
"RTN","LEX2053P",58,0)
 . K ^DIC(81.3,MIEN,10,"B"),^DIC(81.3,MIEN,"M")
"RTN","LEX2053P",59,0)
 . N RIEN S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","LEX2053P",60,0)
 . . N DA,DIK S DA(1)=MIEN,DA=RIEN,DIK="^DIC(81.3,"_DA(1)_",10," D IX1^DIK
"RTN","LEX2053P",61,0)
 . K DA S DA=MIEN,DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2053P",62,0)
 F DA=3,11,46,47 S DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2053P",63,0)
 F DA=643,644,645,646,647 S DIK="^DIC(81.3," D IX1^DIK
"RTN","LEX2053P",64,0)
 Q
"RTN","LEX2053P",65,0)
ROK(X) ; Routine OK
"RTN","LEX2053P",66,0)
 S X=$G(X) Q:'$L(X) 0  Q:$L(X)>8 0  X ^%ZOSF("TEST") Q:$T 1
"RTN","LEX2053P",67,0)
 Q 0
"RTN","LEX2053P",68,0)
CON ; Conversion of data    
"RTN","LEX2053P",69,0)
 D EN^LEX2053A
"RTN","LEX2053P",70,0)
 Q
"VER")
8.0^22.0
**END**
**END**
