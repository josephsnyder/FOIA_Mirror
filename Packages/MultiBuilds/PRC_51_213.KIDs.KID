KIDS Distribution saved on Oct 23, 2019@16:23:01
PRC213/PRCA358
**KIDS**:PRC*5.1*213^PRCA*4.5*358^

**INSTALL NAME**
PRC*5.1*213
"BLD",11530,0)
PRC*5.1*213^IFCAP^0^3191023^y
"BLD",11530,1,0)
^^2^2^3190710^
"BLD",11530,1,1,0)
1. All Cost Centers link to a Fund Control Point are not presented for
"BLD",11530,1,2,0)
   selection (the current limit is 70 cost centers compiled)
"BLD",11530,4,0)
^9.64PA^^
"BLD",11530,6.3)
19
"BLD",11530,"ABPKG")
n
"BLD",11530,"KRN",0)
^9.67PA^1.5^24
"BLD",11530,"KRN",.4,0)
.4
"BLD",11530,"KRN",.401,0)
.401
"BLD",11530,"KRN",.402,0)
.402
"BLD",11530,"KRN",.403,0)
.403
"BLD",11530,"KRN",.5,0)
.5
"BLD",11530,"KRN",.84,0)
.84
"BLD",11530,"KRN",1.5,0)
1.5
"BLD",11530,"KRN",1.6,0)
1.6
"BLD",11530,"KRN",1.61,0)
1.61
"BLD",11530,"KRN",1.62,0)
1.62
"BLD",11530,"KRN",3.6,0)
3.6
"BLD",11530,"KRN",3.8,0)
3.8
"BLD",11530,"KRN",9.2,0)
9.2
"BLD",11530,"KRN",9.8,0)
9.8
"BLD",11530,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11530,"KRN",9.8,"NM",1,0)
PRCSREC2^^0^B8365683
"BLD",11530,"KRN",9.8,"NM","B","PRCSREC2",1)

"BLD",11530,"KRN",19,0)
19
"BLD",11530,"KRN",19.1,0)
19.1
"BLD",11530,"KRN",101,0)
101
"BLD",11530,"KRN",409.61,0)
409.61
"BLD",11530,"KRN",771,0)
771
"BLD",11530,"KRN",779.2,0)
779.2
"BLD",11530,"KRN",870,0)
870
"BLD",11530,"KRN",8989.51,0)
8989.51
"BLD",11530,"KRN",8989.52,0)
8989.52
"BLD",11530,"KRN",8994,0)
8994
"BLD",11530,"KRN","B",.4,.4)

"BLD",11530,"KRN","B",.401,.401)

"BLD",11530,"KRN","B",.402,.402)

"BLD",11530,"KRN","B",.403,.403)

"BLD",11530,"KRN","B",.5,.5)

"BLD",11530,"KRN","B",.84,.84)

"BLD",11530,"KRN","B",1.5,1.5)

"BLD",11530,"KRN","B",1.6,1.6)

"BLD",11530,"KRN","B",1.61,1.61)

"BLD",11530,"KRN","B",1.62,1.62)

"BLD",11530,"KRN","B",3.6,3.6)

"BLD",11530,"KRN","B",3.8,3.8)

"BLD",11530,"KRN","B",9.2,9.2)

"BLD",11530,"KRN","B",9.8,9.8)

"BLD",11530,"KRN","B",19,19)

"BLD",11530,"KRN","B",19.1,19.1)

"BLD",11530,"KRN","B",101,101)

"BLD",11530,"KRN","B",409.61,409.61)

"BLD",11530,"KRN","B",771,771)

"BLD",11530,"KRN","B",779.2,779.2)

"BLD",11530,"KRN","B",870,870)

"BLD",11530,"KRN","B",8989.51,8989.51)

"BLD",11530,"KRN","B",8989.52,8989.52)

"BLD",11530,"KRN","B",8994,8994)

"BLD",11530,"QDEF")
^^^^NO^^^^^^YES
"BLD",11530,"QUES",0)
^9.62^^
"BLD",11530,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1
"PKG",455,22,1,"PAH",1,0)
213^3191023
"PKG",455,22,1,"PAH",1,1,0)
^^2^2^3191023
"PKG",455,22,1,"PAH",1,1,1,0)
1. All Cost Centers link to a Fund Control Point are not presented for
"PKG",455,22,1,"PAH",1,1,2,0)
   selection (the current limit is 70 cost centers compiled)
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCSREC2")
0^1^B8365683
"RTN","PRCSREC2",1,0)
PRCSREC2 ;WISC/KMB/DL-UPDATE 420 BALANCES FOR ISSUE BOOK,CONVERSION ;1/28/98  1400
"RTN","PRCSREC2",2,0)
 ;;5.1;IFCAP;**55,155,213**;4/21/95;Build 19
"RTN","PRCSREC2",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCSREC2",4,0)
 ;
"RTN","PRCSREC2",5,0)
 ;PRC*5.1*213 Modify FCP Cost Center verification to
"RTN","PRCSREC2",6,0)
 ;            use ^TMP workfile to handle FCP's with
"RTN","PRCSREC2",7,0)
 ;            large number of attached cost centers
"RTN","PRCSREC2",8,0)
 ;
"RTN","PRCSREC2",9,0)
ISSUES(STATION,FY,CP,QUARTER,AMOUNT) ;
"RTN","PRCSREC2",10,0)
 N A
"RTN","PRCSREC2",11,0)
 S A=+STATION_"^"_(+CP)_"^"_FY_"^"_QUARTER_"^"_AMOUNT
"RTN","PRCSREC2",12,0)
 D EBAL^PRCSEZ(A,"O")
"RTN","PRCSREC2",13,0)
 QUIT
"RTN","PRCSREC2",14,0)
COST(STATION,CP) ;
"RTN","PRCSREC2",15,0)
 ;return FCP cost centers       ;PRC*5.1*213
"RTN","PRCSREC2",16,0)
 K ^TMP($J,"PRCCC")
"RTN","PRCSREC2",17,0)
 N CC
"RTN","PRCSREC2",18,0)
 I '$D(^PRC(420,STATION,1,+CP,2)) Q
"RTN","PRCSREC2",19,0)
 S CC=0 F  S CC=$O(^PRC(420,STATION,1,+CP,2,CC)) Q:'CC  I $D(^PRCD(420.1,CC,0)),'$P(^PRCD(420.1,CC,0),U,2) S ^TMP($J,"PRCCC",CC)=""
"RTN","PRCSREC2",20,0)
 QUIT
"RTN","PRCSREC2",21,0)
 ;
"RTN","PRCSREC2",22,0)
CONV(STRING,AMOUNT,COMMENT) ;
"RTN","PRCSREC2",23,0)
 ;after V5 installation, reconcile CP with adjustment trans.
"RTN","PRCSREC2",24,0)
 N A,CPNAME,IT,PRC,T,X,X1,Z
"RTN","PRCSREC2",25,0)
 Q:'$D(STRING)
"RTN","PRCSREC2",26,0)
 S PRC("SITE")=$P(STRING,"-"),PRC("FY")=$P(STRING,"-",2),PRC("QTR")=$P(STRING,"-",3),PRC("CP")=$P(STRING,"-",4)
"RTN","PRCSREC2",27,0)
 S T(2)="A" D:'$D(DT) DT^DICRW
"RTN","PRCSREC2",28,0)
 S PRC("BBFY")=+$$YEAR^PRC0C(PRC("FY"))
"RTN","PRCSREC2",29,0)
 S X=PRC("SITE")_"-"_PRC("FY")_"-"_PRC("CP"),Z=STRING
"RTN","PRCSREC2",30,0)
 D EN1^PRCSUT3 Q:'$D(X)
"RTN","PRCSREC2",31,0)
 S X1=X D EN2^PRCSUT3 Q:'$D(X1)
"RTN","PRCSREC2",32,0)
 L +^PRCS(410,DA):15 Q:'$T
"RTN","PRCSREC2",33,0)
 S $P(^PRCS(410,DA,5),"^")=AMOUNT,$P(^(5),"^",2)=DT,$P(^(4),"^",2)=DT
"RTN","PRCSREC2",34,0)
 F IT=1,4 S $P(^PRCS(410,DA,IT),"^",4)=DT,$P(^(1),"^",IT)=DT
"RTN","PRCSREC2",35,0)
 F IT=1,3,8 S $P(^PRCS(410,DA,4),"^",IT)=AMOUNT
"RTN","PRCSREC2",36,0)
 S CPNAME=$P(^PRC(420,PRC("SITE"),1,+PRC("CP"),0),"^"),CPNAME=$E(CPNAME,1,30)
"RTN","PRCSREC2",37,0)
 S $P(^PRCS(410,DA,3),"^")=CPNAME
"RTN","PRCSREC2",38,0)
 S $P(^PRCS(410,DA,0),"^",2)="A",$P(^PRCS(410,DA,0),"^",4)=2,$P(^PRCS(410,DA,1),"^",3)="ST"
"RTN","PRCSREC2",39,0)
 S DA(1)=DA,DIC("P")=$P(^DD(410,60,0),"^",2),DIC="^PRCS(410,DA(1),""CO"","
"RTN","PRCSREC2",40,0)
 S DLAYGO=410,DIC(0)="LX",X=COMMENT D ^DIC
"RTN","PRCSREC2",41,0)
 L -^PRCS(410,DA)
"RTN","PRCSREC2",42,0)
 ;update 420 balance here
"RTN","PRCSREC2",43,0)
 S A=PRC("SITE")_"^"_+PRC("CP")_"^"_PRC("FY")_"^"_PRC("QTR")_"^"_AMOUNT
"RTN","PRCSREC2",44,0)
 D EBAL^PRCSEZ(A,"O"),EBAL^PRCSEZ(A,"C")
"RTN","PRCSREC2",45,0)
 K DIC,DLAYGO,DA QUIT
"RTN","PRCSREC2",46,0)
CREATE(STRING) ;create CP for user, return -1 if none created
"RTN","PRCSREC2",47,0)
 Q:'$D(STRING)
"RTN","PRCSREC2",48,0)
 N STATION,FUND,AO,OCP,OBJC,BFY,JOB,PROG,A,B,X,Y
"RTN","PRCSREC2",49,0)
 S X=$P(STRING,"-",2) K %DT D ^%DT
"RTN","PRCSREC2",50,0)
 S STATION=$P(STRING,"-"),BFY=$E(Y,1,3)+1700,FUND=$P(STRING,"-",3),AO=$P(STRING,"-",4),OCP=$P(STRING,"-",5),PROG=$E(OCP,1,4)
"RTN","PRCSREC2",51,0)
 S (OBJC,JOB)=""
"RTN","PRCSREC2",52,0)
 S:FUND="0151A7" PROG=9999 S:FUND="0151A1" PROG=9999 S:FUND="0151A7" OBJC=21 S:FUND="0151A1" OBJC=26
"RTN","PRCSREC2",53,0)
 S:OCP=971 PROG="MOD"
"RTN","PRCSREC2",54,0)
 S A=STATION_"~"_BFY_"~"_FUND_"~"_AO_"~"_PROG_"~"_OCP_"~"_OBJC_"~"_JOB
"RTN","PRCSREC2",55,0)
 S B=$$FIRST^PRC0B1("^PRCD(420.141,""B"","""_A_""",",0)
"RTN","PRCSREC2",56,0)
 I 'B S B=-1 QUIT B
"RTN","PRCSREC2",57,0)
 S B=+$P(^PRCD(420.141,B,0),"^",2),B=$P($G(^PRC(420,STATION,1,B,0)),"^")
"RTN","PRCSREC2",58,0)
 QUIT B
"VER")
8.0^22.2
**INSTALL NAME**
PRCA*4.5*358
"BLD",11529,0)
PRCA*4.5*358^ACCOUNTS RECEIVABLE^0^3191023^y
"BLD",11529,1,0)
^^6^6^3191013^
"BLD",11529,1,1,0)
1. Modify Cost Center selection to pull from work file that ensures
"BLD",11529,1,2,0)
   all cost centers related to a Fund Control Point are available for 
"BLD",11529,1,3,0)
   selection.
"BLD",11529,1,4,0)
 
"BLD",11529,1,5,0)
2. All Cost Centers linked to a Fund Control Point are not checked for 
"BLD",11529,1,6,0)
   inactive status.
"BLD",11529,4,0)
^9.64PA^^
"BLD",11529,6.3)
19
"BLD",11529,"ABPKG")
n
"BLD",11529,"KRN",0)
^9.67PA^1.5^24
"BLD",11529,"KRN",.4,0)
.4
"BLD",11529,"KRN",.401,0)
.401
"BLD",11529,"KRN",.402,0)
.402
"BLD",11529,"KRN",.403,0)
.403
"BLD",11529,"KRN",.5,0)
.5
"BLD",11529,"KRN",.84,0)
.84
"BLD",11529,"KRN",1.5,0)
1.5
"BLD",11529,"KRN",1.6,0)
1.6
"BLD",11529,"KRN",1.61,0)
1.61
"BLD",11529,"KRN",1.62,0)
1.62
"BLD",11529,"KRN",3.6,0)
3.6
"BLD",11529,"KRN",3.8,0)
3.8
"BLD",11529,"KRN",9.2,0)
9.2
"BLD",11529,"KRN",9.8,0)
9.8
"BLD",11529,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",11529,"KRN",9.8,"NM",1,0)
PRCAFBDU^^0^B23188705
"BLD",11529,"KRN",9.8,"NM","B","PRCAFBDU",1)

"BLD",11529,"KRN",19,0)
19
"BLD",11529,"KRN",19.1,0)
19.1
"BLD",11529,"KRN",101,0)
101
"BLD",11529,"KRN",409.61,0)
409.61
"BLD",11529,"KRN",771,0)
771
"BLD",11529,"KRN",779.2,0)
779.2
"BLD",11529,"KRN",870,0)
870
"BLD",11529,"KRN",8989.51,0)
8989.51
"BLD",11529,"KRN",8989.52,0)
8989.52
"BLD",11529,"KRN",8994,0)
8994
"BLD",11529,"KRN","B",.4,.4)

"BLD",11529,"KRN","B",.401,.401)

"BLD",11529,"KRN","B",.402,.402)

"BLD",11529,"KRN","B",.403,.403)

"BLD",11529,"KRN","B",.5,.5)

"BLD",11529,"KRN","B",.84,.84)

"BLD",11529,"KRN","B",1.5,1.5)

"BLD",11529,"KRN","B",1.6,1.6)

"BLD",11529,"KRN","B",1.61,1.61)

"BLD",11529,"KRN","B",1.62,1.62)

"BLD",11529,"KRN","B",3.6,3.6)

"BLD",11529,"KRN","B",3.8,3.8)

"BLD",11529,"KRN","B",9.2,9.2)

"BLD",11529,"KRN","B",9.8,9.8)

"BLD",11529,"KRN","B",19,19)

"BLD",11529,"KRN","B",19.1,19.1)

"BLD",11529,"KRN","B",101,101)

"BLD",11529,"KRN","B",409.61,409.61)

"BLD",11529,"KRN","B",771,771)

"BLD",11529,"KRN","B",779.2,779.2)

"BLD",11529,"KRN","B",870,870)

"BLD",11529,"KRN","B",8989.51,8989.51)

"BLD",11529,"KRN","B",8989.52,8989.52)

"BLD",11529,"KRN","B",8994,8994)

"BLD",11529,"QDEF")
^^^^^^^^^^
"BLD",11529,"QUES",0)
^9.62^^
"BLD",11529,"REQB",0)
^9.611^1^1
"BLD",11529,"REQB",1,0)
PRCA*4.5*198^2
"BLD",11529,"REQB","B","PRCA*4.5*198",1)

"MBREQ")
0
"PKG",142,-1)
1^1
"PKG",142,0)
ACCOUNTS RECEIVABLE^PRCA^BILL COLLECTIONS
"PKG",142,22,0)
^9.49I^1^1
"PKG",142,22,1,0)
4.5^^2950320
"PKG",142,22,1,"PAH",1,0)
358^3191023
"PKG",142,22,1,"PAH",1,1,0)
^^6^6^3191023
"PKG",142,22,1,"PAH",1,1,1,0)
1. Modify Cost Center selection to pull from work file that ensures
"PKG",142,22,1,"PAH",1,1,2,0)
   all cost centers related to a Fund Control Point are available for 
"PKG",142,22,1,"PAH",1,1,3,0)
   selection.
"PKG",142,22,1,"PAH",1,1,4,0)
 
"PKG",142,22,1,"PAH",1,1,5,0)
2. All Cost Centers linked to a Fund Control Point are not checked for 
"PKG",142,22,1,"PAH",1,1,6,0)
   inactive status.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCAFBDU")
0^1^B23188705
"RTN","PRCAFBDU",1,0)
PRCAFBDU ;WASH-ISC@ALTOONA,PA/CLH-FMS Billing Document Utilities ;6/27/96  11:48 AM
"RTN","PRCAFBDU",2,0)
V ;;4.5;Accounts Receivable;**2,16,29,42,168,169,204,198,358**;Mar 20, 1995;Build 19
"RTN","PRCAFBDU",3,0)
 ;;Per VA Directive 6402, this routine should not be modified.
"RTN","PRCAFBDU",4,0)
 ;
"RTN","PRCAFBDU",5,0)
 ;PRCA*4.5*358 Modify FCP Cost Center verification to use
"RTN","PRCAFBDU",6,0)
 ;             all defined cost centers attached to FCP.
"RTN","PRCAFBDU",7,0)
 ;
"RTN","PRCAFBDU",8,0)
BDGEN ;regenerate billing document
"RTN","PRCAFBDU",9,0)
 N Y,ID,REFMS
"RTN","PRCAFBDU",10,0)
EN N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","PRCAFBDU",11,0)
 S DIC="^PRCA(430,",DIC(0)="AEMNQZ",DIC("A")="Select BILL NUMBER: "
"RTN","PRCAFBDU",12,0)
 D ^DIC K DIC Q:+Y<0
"RTN","PRCAFBDU",13,0)
 I $$GSTAT^RCFMFN02("B"_+Y)'=3 W !!,*7,"You CANNOT resend a document that has NOT REJECTED in FMS.",!! G EN
"RTN","PRCAFBDU",14,0)
 S PRCABN=+Y
"RTN","PRCAFBDU",15,0)
 S DIR(0)="Y",DIR("A")="Are you sure",DIR("A",1)="This will RESEND the selected Billing Document to FMS.",DIR("B")="NO" D ^DIR K DIR
"RTN","PRCAFBDU",16,0)
 W ! G:+Y'=1 EN
"RTN","PRCAFBDU",17,0)
 ;Setting variable REFMS flags for retransmission of document and will
"RTN","PRCAFBDU",18,0)
 ;have a date of DT for transmission to FMS.
"RTN","PRCAFBDU",19,0)
 S REFMS=1 D RSEND
"RTN","PRCAFBDU",20,0)
 G EN
"RTN","PRCAFBDU",21,0)
RSEND S FMSNUM="B"_PRCABN
"RTN","PRCAFBDU",22,0)
 D DEL^RCFMFN02(FMSNUM)
"RTN","PRCAFBDU",23,0)
 K FMSNUM
"RTN","PRCAFBDU",24,0)
 D EN^PRCAFBD(PRCABN)
"RTN","PRCAFBDU",25,0)
 K PRCABN
"RTN","PRCAFBDU",26,0)
 Q
"RTN","PRCAFBDU",27,0)
 ;
"RTN","PRCAFBDU",28,0)
BDMGEN ;regenerate modified billing document
"RTN","PRCAFBDU",29,0)
 N Y,DIC,BN,AMT,ADJTYO,TDT,TN,ERR,REFMS
"RTN","PRCAFBDU",30,0)
EN2 N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","PRCAFBDU",31,0)
 S DIC="^PRCA(433,",DIC(0)="AEMNQZ",DIC("A")="Select A/R TRANSACTION NUMBER: " D ^DIC
"RTN","PRCAFBDU",32,0)
 Q:+Y<0
"RTN","PRCAFBDU",33,0)
 I $$GSTAT^RCFMFN02("T"_+Y)'=3 W !!,*7,"You CANNOT resend a document that has NOT REJECTED in FMS.",!! G EN2
"RTN","PRCAFBDU",34,0)
 S TN=+Y,BN=$P(^PRCA(433,TN,0),U,2),TDT=$P(^(1),U),ADJTYP=$P(^(1),U,2),AMT=$P(^(1),U,5)
"RTN","PRCAFBDU",35,0)
 S DIR(0)="Y",DIR("A")="Are you sure",DIR("A",1)="This will RESEND the selected Billing Document to FMS.",DIR("B")="NO" D ^DIR K DIR
"RTN","PRCAFBDU",36,0)
 W ! G:+Y'=1 EN2
"RTN","PRCAFBDU",37,0)
 S FMSNUM="T"_TN,REFMS=1
"RTN","PRCAFBDU",38,0)
 D DEL^RCFMFN02(FMSNUM)
"RTN","PRCAFBDU",39,0)
 K FMSNUM
"RTN","PRCAFBDU",40,0)
 D EN^PRCAFBDM(BN,AMT,ADJTYP,TDT,TN,.ERR)
"RTN","PRCAFBDU",41,0)
 G EN2
"RTN","PRCAFBDU",42,0)
 ;
"RTN","PRCAFBDU",43,0)
 ;
"RTN","PRCAFBDU",44,0)
CC ;cost center    PRCA*4.5*358
"RTN","PRCAFBDU",45,0)
 N DIC,Y
"RTN","PRCAFBDU",46,0)
 D COST^PRCSREC2($S($D(PRCA("SITE")):PRCA("SITE"),1:$$SITE^RCMSITE),CP)
"RTN","PRCAFBDU",47,0)
 S DIC="^PRCD(420.1,",DIC(0)="EMNQ",DIC("A")="COST CENTER: "
"RTN","PRCAFBDU",48,0)
 D ^DIC Q:+Y<0
"RTN","PRCAFBDU",49,0)
 I $D(DUOUT)!($D(DTOUT)) S PRCA("EXIT")=1 Q
"RTN","PRCAFBDU",50,0)
 I '$D(^TMP($J,"PRCCC",$P(Y,U))) W !!,*7,"Invalid Cost Center for the Control Point" D CCDISP Q  ;PRCA*4.5*358
"RTN","PRCAFBDU",51,0)
 S CCC=+Y,CC=$E(+Y,1,4)_"00",SCC=$E(+Y,5,6)
"RTN","PRCAFBDU",52,0)
 K ^TMP("PRCCC",$J)   ;PRCA*4.5*358
"RTN","PRCAFBDU",53,0)
 Q
"RTN","PRCAFBDU",54,0)
 ;
"RTN","PRCAFBDU",55,0)
BOC ;budget object code
"RTN","PRCAFBDU",56,0)
 N DIC,Y
"RTN","PRCAFBDU",57,0)
 I '$D(CCC) S CCC=$P($G(^PRCA(430,$S($D(PRCABN):PRCABN,$D(DA):DA,1:-1),11)),U,2)
"RTN","PRCAFBDU",58,0)
 S DIC="^PRCD(420.2,",DIC(0)="EMNQ"
"RTN","PRCAFBDU",59,0)
 D ^DIC Q:+Y<0
"RTN","PRCAFBDU",60,0)
 I $D(DUOUT)!($D(DTOUT)) S PRCA("EXIT")=1 Q
"RTN","PRCAFBDU",61,0)
 I +CCC>0,'$D(^PRCD(420.1,CCC,1,+Y,0)) S Y=-1 Q
"RTN","PRCAFBDU",62,0)
 S BOC=+Y
"RTN","PRCAFBDU",63,0)
 Q
"RTN","PRCAFBDU",64,0)
 ;
"RTN","PRCAFBDU",65,0)
CCDISP ;display valid cost centers for FCP
"RTN","PRCAFBDU",66,0)
 N DIC,X,Y
"RTN","PRCAFBDU",67,0)
 S X="?"
"RTN","PRCAFBDU",68,0)
 S DIC="^PRC(420,"_$S($D(PRCA("SITE")):PRCA("SITE"),1:$$SITE^RCMSITE)_",1,"_+CP_",2,"
"RTN","PRCAFBDU",69,0)
 S DIC("S")="I '$P($G(^PRCD(420.1,+Y,0)),U,2)"
"RTN","PRCAFBDU",70,0)
 S DIC(0)="EMNQ"
"RTN","PRCAFBDU",71,0)
 D ^DIC
"RTN","PRCAFBDU",72,0)
 Q
"RTN","PRCAFBDU",73,0)
 ;
"RTN","PRCAFBDU",74,0)
BOCDISP ;display valid BOCs
"RTN","PRCAFBDU",75,0)
 N ZZDA,DIC,X,Y
"RTN","PRCAFBDU",76,0)
 S:'$D(CCC) CCC=$P($G(^PRCA(430,$S($D(PRCABN):PRCABN,1:$G(DA)),11)),U,2)
"RTN","PRCAFBDU",77,0)
 S DIC="^PRCD(420.1,"_+CCC_",1,",DIC(0)="EMNQ",X="?"
"RTN","PRCAFBDU",78,0)
 W ?10,!!,"Valid BOCs for this Cost Center are:",!
"RTN","PRCAFBDU",79,0)
 D ^DIC
"RTN","PRCAFBDU",80,0)
 Q
"RTN","PRCAFBDU",81,0)
 ;
"RTN","PRCAFBDU",82,0)
RHLP ;help for refund/reimbursement prompt
"RTN","PRCAFBDU",83,0)
 W !!,"If this BILL will create a receivable for a budget element, i.e. Control Point,",!,"Answer REFUND.  Otherwise answer REIMBURSEMENT.",!!,"A REFUND will ALWAYS reference a Control Point, i.e. SALARY OVERPAYMENT."
"RTN","PRCAFBDU",84,0)
 W !,"A REIMBURSEMENT is usually for services, i.e. Emergency/Humanitarian Care.",!!
"RTN","PRCAFBDU",85,0)
 Q
"RTN","PRCAFBDU",86,0)
 ;
"RTN","PRCAFBDU",87,0)
ACCT ;edit accounting line information on rejected documents
"RTN","PRCAFBDU",88,0)
 NEW BILL,DIE,DA,PRCABN,DIC,X,Y,L,FR,TO,FLDS,DIR,REFMS
"RTN","PRCAFBDU",89,0)
ACCT1 N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","PRCAFBDU",90,0)
 SET (DIC,DIE)="^PRCA(430,",DIC(0)="AEMNQ",DIC("A")="Select BILL NUMBER: " DO ^DIC
"RTN","PRCAFBDU",91,0)
 QUIT:+Y<0
"RTN","PRCAFBDU",92,0)
 I '$P($G(^PRCA(430,+Y,6)),"^",21) W !,"YOU CAN ONLY SELECT BILLS THAT ARE ACTIVE.",! G ACCT1
"RTN","PRCAFBDU",93,0)
 I $D(RCONVERT) S PRCABN=+Y G EDT
"RTN","PRCAFBDU",94,0)
 SET BILL="B"_+Y
"RTN","PRCAFBDU",95,0)
 SET PRCABN=+Y
"RTN","PRCAFBDU",96,0)
EDT SET IOP=IO(0),DIC="^PRCA(430,",FLDS="[PRCA DISP AUDIT2]",(FR,TO)=PRCABN,L=0,BY="@NUMBER" DO EN1^DIP
"RTN","PRCAFBDU",97,0)
 SET (DIC,DIE)="^PRCA(430,"
"RTN","PRCAFBDU",98,0)
 DO CPLK^PRCAFUT(PRCABN)
"RTN","PRCAFBDU",99,0)
 QUIT:$D(PRCA("EXIT"))
"RTN","PRCAFBDU",100,0)
 ;DO:'$DATA(RCONVERT) RSEND
"RTN","PRCAFBDU",101,0)
 I '$D(RCONVERT) S REFMS=1 D RSEND
"RTN","PRCAFBDU",102,0)
 G ACCT
"RTN","PRCAFBDU",103,0)
 ;
"RTN","PRCAFBDU",104,0)
FUND ;valid fund seletion
"RTN","PRCAFBDU",105,0)
 NEW DIC,X,Y
"RTN","PRCAFBDU",106,0)
 S DIC(0)="EMNQ",DIC="^PRCD(420.14,",X="?"
"RTN","PRCAFBDU",107,0)
 D ^DIC
"RTN","PRCAFBDU",108,0)
 Q
"RTN","PRCAFBDU",109,0)
SBOC ;remove SUB BOC from rejected bills
"RTN","PRCAFBDU",110,0)
 N DIE,DA,DIC,DR
"RTN","PRCAFBDU",111,0)
 N DPTNOFZY,DPTNOFZK S (DPTNOFZY,DPTNOFZK)=1
"RTN","PRCAFBDU",112,0)
 S (DIC,DIE)="^PRCA(430,",DIC(0)="AEMNQ" D ^DIC
"RTN","PRCAFBDU",113,0)
 Q:+Y<0
"RTN","PRCAFBDU",114,0)
 S DA=+Y
"RTN","PRCAFBDU",115,0)
 S DR="254///^S X=""@""" D ^DIE
"RTN","PRCAFBDU",116,0)
 W !,"SUB BOC removed.",!
"RTN","PRCAFBDU",117,0)
 Q
"RTN","PRCAFBDU",118,0)
 ;
"RTN","PRCAFBDU",119,0)
BDTRANS ;Select trans type for billing documents
"RTN","PRCAFBDU",120,0)
 N DIC,DA,X,Y
"RTN","PRCAFBDU",121,0)
 S DIC="^PRCA(347.4,",DIC(0)="AEMNQ",DIC("A")="Select TRANS. TYPE: ",DIC("S")="I $P(^(0),U,2)=1" D ^DIC
"RTN","PRCAFBDU",122,0)
 I +Y<0 S PRCA("EXIT")=1 Q
"RTN","PRCAFBDU",123,0)
 S TYPE=$P(Y,U,2)
"RTN","PRCAFBDU",124,0)
 Q
"RTN","PRCAFBDU",125,0)
 ;
"VER")
8.0^22.2
**END**
**END**
