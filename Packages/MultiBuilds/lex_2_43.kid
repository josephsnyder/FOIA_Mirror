KIDS Distribution saved on Sep 06, 2006@16:06:42
LEX*2*43/ICPT*6*30/ICD*18*23 Distribution
**KIDS**:LEX*2.0*43^ICPT*6.0*30^

**INSTALL NAME**
LEX*2.0*43
"BLD",6298,0)
LEX*2.0*43^LEXICON UTILITY^0^3060906^y
"BLD",6298,1,0)
^^2^2^3060803^
"BLD",6298,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6298,1,2,0)
included in this patch.
"BLD",6298,4,0)
^9.64PA^^
"BLD",6298,6.3)
24
"BLD",6298,"INIT")
POST^LEX2043P
"BLD",6298,"KRN",0)
^9.67PA^8989.52^19
"BLD",6298,"KRN",.4,0)
.4
"BLD",6298,"KRN",.401,0)
.401
"BLD",6298,"KRN",.402,0)
.402
"BLD",6298,"KRN",.403,0)
.403
"BLD",6298,"KRN",.5,0)
.5
"BLD",6298,"KRN",.84,0)
.84
"BLD",6298,"KRN",3.6,0)
3.6
"BLD",6298,"KRN",3.8,0)
3.8
"BLD",6298,"KRN",9.2,0)
9.2
"BLD",6298,"KRN",9.8,0)
9.8
"BLD",6298,"KRN",9.8,"NM",0)
^9.68A^8^7
"BLD",6298,"KRN",9.8,"NM",2,0)
LEX2043^^0^B69278303
"BLD",6298,"KRN",9.8,"NM",3,0)
LEX2043P^^0^B26656686
"BLD",6298,"KRN",9.8,"NM",4,0)
LEX2043A^^0^B65763989
"BLD",6298,"KRN",9.8,"NM",5,0)
LEX2043B^^0^B62523661
"BLD",6298,"KRN",9.8,"NM",6,0)
LEX2043C^^0^B27867922
"BLD",6298,"KRN",9.8,"NM",7,0)
LEX2043D^^0^B15573352
"BLD",6298,"KRN",9.8,"NM",8,0)
LEXA^^0^B31301237
"BLD",6298,"KRN",9.8,"NM","B","LEX2043",2)

"BLD",6298,"KRN",9.8,"NM","B","LEX2043A",4)

"BLD",6298,"KRN",9.8,"NM","B","LEX2043B",5)

"BLD",6298,"KRN",9.8,"NM","B","LEX2043C",6)

"BLD",6298,"KRN",9.8,"NM","B","LEX2043D",7)

"BLD",6298,"KRN",9.8,"NM","B","LEX2043P",3)

"BLD",6298,"KRN",9.8,"NM","B","LEXA",8)

"BLD",6298,"KRN",19,0)
19
"BLD",6298,"KRN",19.1,0)
19.1
"BLD",6298,"KRN",101,0)
101
"BLD",6298,"KRN",409.61,0)
409.61
"BLD",6298,"KRN",771,0)
771
"BLD",6298,"KRN",870,0)
870
"BLD",6298,"KRN",8989.51,0)
8989.51
"BLD",6298,"KRN",8989.52,0)
8989.52
"BLD",6298,"KRN",8994,0)
8994
"BLD",6298,"KRN","B",.4,.4)

"BLD",6298,"KRN","B",.401,.401)

"BLD",6298,"KRN","B",.402,.402)

"BLD",6298,"KRN","B",.403,.403)

"BLD",6298,"KRN","B",.5,.5)

"BLD",6298,"KRN","B",.84,.84)

"BLD",6298,"KRN","B",3.6,3.6)

"BLD",6298,"KRN","B",3.8,3.8)

"BLD",6298,"KRN","B",9.2,9.2)

"BLD",6298,"KRN","B",9.8,9.8)

"BLD",6298,"KRN","B",19,19)

"BLD",6298,"KRN","B",19.1,19.1)

"BLD",6298,"KRN","B",101,101)

"BLD",6298,"KRN","B",409.61,409.61)

"BLD",6298,"KRN","B",771,771)

"BLD",6298,"KRN","B",870,870)

"BLD",6298,"KRN","B",8989.51,8989.51)

"BLD",6298,"KRN","B",8989.52,8989.52)

"BLD",6298,"KRN","B",8994,8994)

"BLD",6298,"PRE")
LEX2043
"BLD",6298,"QUES",0)
^9.62^^
"BLD",6298,"REQB",0)
^9.611^4^2
"BLD",6298,"REQB",3,0)
LEX*2.0*44^2
"BLD",6298,"REQB",4,0)
ICPT*6.0*19^2
"BLD",6298,"REQB","B","ICPT*6.0*19",4)

"BLD",6298,"REQB","B","LEX*2.0*44",3)

"INIT")
POST^LEX2043P
"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
LEXICON UTILITY^LEX^Medical and Biomedical Terminology System.^^^3030115
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
2.0^2950923^2950923^1118
"PKG",167,22,1,"PAH",1,0)
43^3060906
"PKG",167,22,1,"PAH",1,1,0)
^^2^2^3060906
"PKG",167,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",167,22,1,"PAH",1,1,2,0)
included in this patch.
"PRE")
LEX2043
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","LEX2043")
0^2^B69278303
"RTN","LEX2043",1,0)
LEX2043 ; ISL/KER - Environment Check/Pre/Post Install ; 09/06/2006
"RTN","LEX2043",2,0)
 ;;2.0;LEXICON UTILITY;**43**;Sep 23, 1996;Build 24
"RTN","LEX2043",3,0)
 ;                     
"RTN","LEX2043",4,0)
 ; External References
"RTN","LEX2043",5,0)
 ;   DBIA 10015  EN^DIQ1
"RTN","LEX2043",6,0)
 ;   DBIA 10141  $$PATCH^XPDUTL
"RTN","LEX2043",7,0)
 ;   DBIA 10141  $$VERSION^XPDUTL
"RTN","LEX2043",8,0)
 ;   DBIA 10141  BMES^XPDUTL
"RTN","LEX2043",9,0)
 ;   DBIA 10141  MES^XPDUTL
"RTN","LEX2043",10,0)
 ;                            
"RTN","LEX2043",11,0)
ENV ; LEX*2.0*43 Environment Check
"RTN","LEX2043",12,0)
 ;
"RTN","LEX2043",13,0)
 W !,"LEX*2.0*43 Environment Check",!
"RTN","LEX2043",14,0)
 ;
"RTN","LEX2043",15,0)
 N LEXBUILD,LEXIGHF,LEXREQP,LEXLREV,LEXG,LEXE
"RTN","LEX2043",16,0)
 D IMP S U="^"
"RTN","LEX2043",17,0)
 ;     No user
"RTN","LEX2043",18,0)
 D:+($$UR)'>0 ET("User not defined (DUZ)")
"RTN","LEX2043",19,0)
 ;     No IO
"RTN","LEX2043",20,0)
 D:+($$SY)'>0 ET("Undefined IO variable(s)") I $D(LEXE) D ABRT Q
"RTN","LEX2043",21,0)
 ;
"RTN","LEX2043",22,0)
 ;   Load Distribution
"RTN","LEX2043",23,0)
 ;
"RTN","LEX2043",24,0)
 ;     XPDENV = 0 Environment Check during Load
"RTN","LEX2043",25,0)
 ;
"RTN","LEX2043",26,0)
 ;       Check Version (2.0)
"RTN","LEX2043",27,0)
 I $$VERSION^XPDUTL("LEX")'="2.0" D  D ABRT Q
"RTN","LEX2043",28,0)
 . D ET("Version 2.0 not found.  Please install Lexicon Utility v 2.0")
"RTN","LEX2043",29,0)
 ;
"RTN","LEX2043",30,0)
 ;       Check Required Patches
"RTN","LEX2043",31,0)
 D:'$L($G(LEXREQP)) IMP I $L(LEXREQP) D
"RTN","LEX2043",32,0)
 . N LEXPAT,LEXI,LEXPN
"RTN","LEX2043",33,0)
 . F LEXI=1:1 Q:'$L($P(LEXREQP,";",LEXI))  S LEXPAT=$P(LEXREQP,";",LEXI) D
"RTN","LEX2043",34,0)
 . . S LEXPN=$$PATCH^XPDUTL(LEXPAT) W !,"    Checking for ",LEXPAT I +LEXPN>0 H 1 W " - installed"
"RTN","LEX2043",35,0)
 . . I +LEXPN'>0 D ET((LEXPAT_" not found, please install "_LEXPAT_" before continuing"))
"RTN","LEX2043",36,0)
 I $D(LEXE) D ABRT Q
"RTN","LEX2043",37,0)
 S LEXG=$$RGBL
"RTN","LEX2043",38,0)
 I $D(LEXE)&(+LEXG=0) D ABRT Q
"RTN","LEX2043",39,0)
 I $D(LEXE)&(+LEXG<0) D ABRT Q
"RTN","LEX2043",40,0)
 I '$D(LEXFULL)&(+($G(XPDENV))'=1) D QUIT Q
"RTN","LEX2043",41,0)
 ;
"RTN","LEX2043",42,0)
 ;   Install Package(s)
"RTN","LEX2043",43,0)
 ;
"RTN","LEX2043",44,0)
 ;     XPDENV = 1 Environment Check during Install
"RTN","LEX2043",45,0)
 ;
"RTN","LEX2043",46,0)
 ;       Check Data "is installed" or "is translated"
"RTN","LEX2043",47,0)
 N LEXIT S LEXIT=+($$CPD) I '$D(LEXFULL)&(LEXIT) D QUIT Q
"RTN","LEX2043",48,0)
 ;       Checking Global "Write" Protection 
"RTN","LEX2043",49,0)
 D:+($G(XPDENV))=1 GBLS I $D(LEXE) D ABRT Q
"RTN","LEX2043",50,0)
 ;       Check Import Global Checksum 
"RTN","LEX2043",51,0)
 D:+($G(XPDENV))=1 CS I $D(LEXE) D ABRT Q
"RTN","LEX2043",52,0)
 ;
"RTN","LEX2043",53,0)
 ;   Quit, Exit or Abort
"RTN","LEX2043",54,0)
 ;
"RTN","LEX2043",55,0)
QUIT ;     Quit   Passed Environment Check
"RTN","LEX2043",56,0)
 K LEXFULL D OK
"RTN","LEX2043",57,0)
 Q
"RTN","LEX2043",58,0)
EXIT ;     Exit   Failed Environment Check
"RTN","LEX2043",59,0)
 D:$D(LEXE) ED S XPDQUIT=2 K LEXE,LEXFULL Q
"RTN","LEX2043",60,0)
ABRT ;     Abort  Failed Environment Check, KILL the distribution
"RTN","LEX2043",61,0)
 D:$D(LEXE) ED S XPDABORT=1,XPDQUIT=1,XPDQUIT("LEX*2.0*43")=1 K LEXE,LEXFULL
"RTN","LEX2043",62,0)
 Q
"RTN","LEX2043",63,0)
 ;               
"RTN","LEX2043",64,0)
 ; Checks
"RTN","LEX2043",65,0)
 ;
"RTN","LEX2043",66,0)
GBLS ;   Check Write access on globals
"RTN","LEX2043",67,0)
 N LEXE,LEXGBL,LEXRT,LEXT,LEXF,LEXI,LEXX,LEXOK,LEXCPD,LEXS,X S LEXOK=1
"RTN","LEX2043",68,0)
 D BM("   I will now check the protection on ^LEX, ^ICPT, ^ICD and ^DIC Globals.")
"RTN","LEX2043",69,0)
 D M("   If you get an ERROR, you will need to change the protection on these")
"RTN","LEX2043",70,0)
 D M("   globals to allow read/write as indicated:")
"RTN","LEX2043",71,0)
 D BM("                        Owner     Group    World   Network")
"RTN","LEX2043",72,0)
 D M("      Cache systems      RWD       RW       RW      RWD")
"RTN","LEX2043",73,0)
 D BM("   Checking:"),M(" ")
"RTN","LEX2043",74,0)
 S LEXCPD=$$CPD,LEXS="",X=1 F LEXI=1:1 D  Q:'$L(LEXX)
"RTN","LEX2043",75,0)
 . S LEXX="" S LEXE="S LEXX=$T(GD+"_LEXI_")" X LEXE S LEXX=$$TRIM(LEXX) Q:'$L(LEXX)  Q:'$L($TR(LEXX,";",""))
"RTN","LEX2043",76,0)
 . S LEXGBL=$P(LEXX,";",3) Q:+LEXCPD>0&(LEXGBL="^LEXM(0)")  S LEXRT=$P(LEXX,";",4),LEXT=$P(LEXX,";",5),LEXF=$P(LEXX,";",6)
"RTN","LEX2043",77,0)
 . S (LEXB1,LEXB2)="",$P(LEXB1," ",(19-$L(LEXRT)))="",$P(LEXB2," ",(28-$L(LEXT)))=""
"RTN","LEX2043",78,0)
 . I '$D(@LEXGBL) D RGNF S LEXOK=0 D M(("      <"_LEXRT_" not found>")) Q
"RTN","LEX2043",79,0)
 . D M(("      "_LEXRT_LEXB1_LEXT_LEXB2_LEXF)) S @LEXGBL=$G(@LEXGBL) H 1
"RTN","LEX2043",80,0)
 D:LEXOK M("    --> ok") D:'LEXOK M("    ??") D M(" ")
"RTN","LEX2043",81,0)
 Q
"RTN","LEX2043",82,0)
RGBL(X) ;   Check Write access on globals
"RTN","LEX2043",83,0)
 N LEXCPD,LEXS,LEXI,LEXX,LEXEC,LEXGBL,LEXRT,LEXT,LEXF,LEXB1,LEXB2
"RTN","LEX2043",84,0)
 S LEXCPD=$$CPD,LEXS="",X=1 F LEXI=1:1 D  Q:'$L(LEXX)
"RTN","LEX2043",85,0)
 . S LEXX="" S LEXEC="S LEXX=$T(GD+"_LEXI_")" X LEXEC S LEXX=$$TRIM(LEXX) Q:'$L(LEXX)  Q:'$L($TR(LEXX,";",""))
"RTN","LEX2043",86,0)
 . S LEXGBL=$P(LEXX,";",3) Q:+LEXCPD>0&(LEXGBL="^LEXM(0)")  S LEXRT=$P(LEXX,";",4),LEXT=$P(LEXX,";",5),LEXF=$P(LEXX,";",6)
"RTN","LEX2043",87,0)
 . S (LEXB1,LEXB2)="",$P(LEXB1," ",(15-$L(LEXRT)))="",$P(LEXB2," ",(28-$L(LEXT)))=""
"RTN","LEX2043",88,0)
 . I '$D(@LEXGBL) S:LEXS'[LEXRT LEXS=LEXS_", "_LEXRT S X=-1 S:LEXGBL["LEXM("&(X=1) X=0
"RTN","LEX2043",89,0)
 I $L(LEXS),X'>0 D
"RTN","LEX2043",90,0)
 . S:LEXS[", " LEXS=$P(LEXS,", ",1,($L(LEXS,", ")-1))_" and "_$P(LEXS,", ",$L(LEXS,", "))
"RTN","LEX2043",91,0)
 . S:$E(LEXS,1,2)=", " LEXS=$E(LEXS,3,$L(LEXS)) S:$E(LEXS,1,7)[" and " LEXS=$P(LEXS," and ",2)
"RTN","LEX2043",92,0)
 . D:X=-1 ET(("Global"_$S(LEXS[", "!(LEXS[" and "):"s",1:"")_" "_LEXS_" either not found or incomplete."))
"RTN","LEX2043",93,0)
 . D:X=0 CM
"RTN","LEX2043",94,0)
 Q X
"RTN","LEX2043",95,0)
RGNF ;   Required global not found
"RTN","LEX2043",96,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP
"RTN","LEX2043",97,0)
 D:$G(LEXGL)["^LEX"&($G(LEXGL)'["^LEXM") ET(""),ET("Required global "_$P($G(LEXGL),"(",1)_" not found.")
"RTN","LEX2043",98,0)
 D:$G(LEXGL)["^LEX"&($G(LEXGL)["^LEXM") CM
"RTN","LEX2043",99,0)
 Q
"RTN","LEX2043",100,0)
CHK ;   Check the Checksum
"RTN","LEX2043",101,0)
 D CS I $D(LEXE) D ED Q
"RTN","LEX2043",102,0)
 D BM("  OK"),M(" ")
"RTN","LEX2043",103,0)
 Q
"RTN","LEX2043",104,0)
CS ;   Checksum for import global
"RTN","LEX2043",105,0)
 K LEXE
"RTN","LEX2043",106,0)
 D BM("   Running checksum routine on the ^LEXM import global, please wait")
"RTN","LEX2043",107,0)
 N LEXCHK,LEXNDS,LEXVER S LEXCHK=+($G(^LEXM(0,"CHECKSUM")))
"RTN","LEX2043",108,0)
 S LEXNDS=+($G(^LEXM(0,"NODES"))),LEXVER=+($$VC(LEXCHK,LEXNDS))
"RTN","LEX2043",109,0)
 D M(" ") D:LEXVER>0 M("     Checksum is ok"),M(" ")
"RTN","LEX2043",110,0)
 D:LEXVER=0 CM D:LEXVER=-1 CW D:LEXVER=-2 CU D:LEXVER=-3 CF
"RTN","LEX2043",111,0)
 Q
"RTN","LEX2043",112,0)
VC(X,Y) ;   Verify Checksum for import global
"RTN","LEX2043",113,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF Q:'$D(^LEXM) 0
"RTN","LEX2043",114,0)
 D IMP I $G(^LEXM(0,"BUILD"))'=$G(LEXBUILD) Q -1
"RTN","LEX2043",115,0)
 N LEXCHK,LEXNDS,LEXCNT,LEXLC,LEXL,LEXS,LEXNC,LEXD,LEXN,LEXC,LEXGCS,LEXP,LEXT
"RTN","LEX2043",116,0)
 S LEXCHK=+($G(X)),LEXNDS=+($G(Y))
"RTN","LEX2043",117,0)
 Q:LEXCHK'>0!(LEXNDS'>0) -2
"RTN","LEX2043",118,0)
 S LEXL=64,(LEXCNT,LEXLC)=0,LEXS=(+(LEXNDS\LEXL))
"RTN","LEX2043",119,0)
 S:LEXS=0 LEXS=1 D:+($O(^LEXM(0)))>0 M("")
"RTN","LEX2043",120,0)
 S (LEXC,LEXN)="^LEXM",(LEXNC,LEXGCS)=0 W "   "
"RTN","LEX2043",121,0)
 F  S LEXN=$Q(@LEXN) Q:LEXN=""!(LEXN'[LEXC)  D
"RTN","LEX2043",122,0)
 . Q:LEXN="^LEXM(0,""CHECKSUM"")"
"RTN","LEX2043",123,0)
 . Q:LEXN="^LEXM(0,""NODES"")"
"RTN","LEX2043",124,0)
 . S LEXCNT=LEXCNT+1
"RTN","LEX2043",125,0)
 . I LEXCNT'<LEXS S LEXLC=LEXLC+1 W:LEXLC'>LEXL "." S LEXCNT=0
"RTN","LEX2043",126,0)
 . S LEXNC=LEXNC+1,LEXD=@LEXN,LEXT=LEXN_"="_LEXD
"RTN","LEX2043",127,0)
 . F LEXP=1:1:$L(LEXT) S LEXGCS=$A(LEXT,LEXP)*LEXP+LEXGCS
"RTN","LEX2043",128,0)
 Q:LEXNC'=LEXNDS -3
"RTN","LEX2043",129,0)
 Q:LEXGCS'=LEXCHK -3
"RTN","LEX2043",130,0)
 Q 1
"RTN","LEX2043",131,0)
SY(X) ;   Check System variables
"RTN","LEX2043",132,0)
 Q:'$D(IO)!('$D(IOF))!('$D(IOM))!('$D(ION))!('$D(IOSL))!('$D(IOST)) 0
"RTN","LEX2043",133,0)
 Q 1
"RTN","LEX2043",134,0)
UR(X) ;   Check User variables
"RTN","LEX2043",135,0)
 Q:'$L($G(DUZ(0))) 0
"RTN","LEX2043",136,0)
 Q:+($G(DUZ))=0!($$NOTDEF(+$G(DUZ))) 0
"RTN","LEX2043",137,0)
 Q 1
"RTN","LEX2043",138,0)
CPD(X) ;  Check Current Patched Data is installed
"RTN","LEX2043",139,0)
 Q 0
"RTN","LEX2043",140,0)
 ;
"RTN","LEX2043",141,0)
 ; Error messages
"RTN","LEX2043",142,0)
 ;
"RTN","LEX2043",143,0)
CM ;   Missing ^LEXM
"RTN","LEX2043",144,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP D ET(""),ET("Missing import global ^LEXM.") D CO
"RTN","LEX2043",145,0)
 Q
"RTN","LEX2043",146,0)
CW ;   Wrong ^LEXM
"RTN","LEX2043",147,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXB D IMP S LEXB=$G(^LEXM(0,"BUILD")) D ET("")
"RTN","LEX2043",148,0)
 I $L(LEXBUILD),$L(LEXB),LEXBUILD'=LEXB D  Q
"RTN","LEX2043",149,0)
 . D ET(("Incorrect import global ^LEXM found ("_LEXB_" global).")) D CKO
"RTN","LEX2043",150,0)
 D ET("Incorrect import global ^LEXM found.") D CKO
"RTN","LEX2043",151,0)
 Q
"RTN","LEX2043",152,0)
CU ;   Unable to verify
"RTN","LEX2043",153,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP D ET(""),ET("Unable to verify checksum for import global ^LEXM (possibly corrupt).") D CKO
"RTN","LEX2043",154,0)
 Q
"RTN","LEX2043",155,0)
CF ;   Failed checksum
"RTN","LEX2043",156,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP D ET("") D ET("Import global ^LEXM failed checksum.") D CKO
"RTN","LEX2043",157,0)
 Q
"RTN","LEX2043",158,0)
CO ;   Obtain new global
"RTN","LEX2043",159,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP
"RTN","LEX2043",160,0)
 D ET(""),ET("    Please obtain a copy of the import global ^LEXM contained in the ")
"RTN","LEX2043",161,0)
 D ET(("    global host file "_LEXIGHF_" before continuing with the "_LEXBUILD))
"RTN","LEX2043",162,0)
 D ET(("    installation."))
"RTN","LEX2043",163,0)
 Q
"RTN","LEX2043",164,0)
CKO ;   Kill and Obtain new global
"RTN","LEX2043",165,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP
"RTN","LEX2043",166,0)
 D ET(""),ET("    Please KILL the existing import global ^LEXM from your system")
"RTN","LEX2043",167,0)
 D ET(("    and obtain a new copy of ^LEXM contained in the global host file"))
"RTN","LEX2043",168,0)
 D ET(("    "_LEXIGHF_" before continuing with the "_LEXBUILD_" installation."))
"RTN","LEX2043",169,0)
 Q
"RTN","LEX2043",170,0)
ET(X) ;   Error Text
"RTN","LEX2043",171,0)
 N LEXI S LEXI=+($G(LEXE(0))),LEXI=LEXI+1,LEXE(LEXI)="    "_$G(X),LEXE(0)=LEXI
"RTN","LEX2043",172,0)
 Q
"RTN","LEX2043",173,0)
ED ;   Error Display
"RTN","LEX2043",174,0)
 N LEXI S LEXI=0 F  S LEXI=$O(LEXE(LEXI)) Q:+LEXI=0  D M(LEXE(LEXI))
"RTN","LEX2043",175,0)
 D M(" ") K LEXE Q
"RTN","LEX2043",176,0)
 ;                   
"RTN","LEX2043",177,0)
 ; Miscellaneous
"RTN","LEX2043",178,0)
 ;
"RTN","LEX2043",179,0)
IMP ;   Import names
"RTN","LEX2043",180,0)
 S LEXLREV=43,LEXIGHF="LEX_2_43.GBL",LEXREQP="LEX*2.0*44;ICPT*6.0*19",LEXBUILD="LEX*2.0*43"
"RTN","LEX2043",181,0)
 Q
"RTN","LEX2043",182,0)
NOTDEF(IEN) ;   Check to see if user is defined
"RTN","LEX2043",183,0)
 N DA,DR,DIQ,LEX,DIC S DA=IEN,DR=.01,DIC=200,DIQ="LEX" D EN^DIQ1 Q '$D(LEX)
"RTN","LEX2043",184,0)
OK ;   Environment is OK
"RTN","LEX2043",185,0)
 N LEXBUILD,LEXIGHF,LEXREQP,LEXLREV,LEXT
"RTN","LEX2043",186,0)
 D IMP S LEXT="  Environment "_$S($L(LEXBUILD):("for patch/build "_LEXBUILD_" "),1:"")_"is ok"
"RTN","LEX2043",187,0)
 D BM(LEXT),M(" ")
"RTN","LEX2043",188,0)
 Q
"RTN","LEX2043",189,0)
BM(X) ;   Blank Line with Message
"RTN","LEX2043",190,0)
 D BMES^XPDUTL($G(X)) Q
"RTN","LEX2043",191,0)
M(X) ;   Message
"RTN","LEX2043",192,0)
 D MES^XPDUTL($G(X)) Q
"RTN","LEX2043",193,0)
TRIM(X) ;   Trim Spaces
"RTN","LEX2043",194,0)
 S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEX2043",195,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","LEX2043",196,0)
 Q X
"RTN","LEX2043",197,0)
 ; Exported Files
"RTN","LEX2043",198,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2043",199,0)
 ;;^LEXT(757.2);^LEXT(757.2);Lexicon Subsets/Defaults;757.2
"RTN","LEX2043",200,0)
 ;;^LEXC(757.9);^LEXC(*;Lexicon Change File;757.9-757.91
"RTN","LEX2043",201,0)
 ;;^LEXM(0);^LEXM(*;Lexicon Export/Import;No File #
"RTN","LEX2043",202,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2043",203,0)
 ;;^DIC(81.1,0);^DIC(81.1);CPT Category;81.1
"RTN","LEX2043",204,0)
 ;;^DIC(81.2,0);^DIC(81.2);CPT Copyright;81.2
"RTN","LEX2043",205,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2043",206,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2043",207,0)
 ;;^ICD0(0);^ICD0(;ICD Operation/Procedure;80.1
"RTN","LEX2043",208,0)
 ;;^ICD(0);^ICD(;DRG Grouper;80.2
"RTN","LEX2043",209,0)
 ;;^ICM(0);^ICM(;MAJOR DIAGNOSTIC CATEGORY;80.3
"RTN","LEX2043",210,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2043",211,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2043",212,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2043",213,0)
 Q
"RTN","LEX2043",214,0)
GD ; Global Data
"RTN","LEX2043",215,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2043",216,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2043A")
0^4^B65763989
"RTN","LEX2043A",1,0)
LEX2043A ; ISL/KER - Post Install LEX*2.0*43  ; 09/06/2006
"RTN","LEX2043A",2,0)
 ;;2.0;LEXICON UTILITY;**43**;Sep 23, 1996;Build 24
"RTN","LEX2043A",3,0)
 ;
"RTN","LEX2043A",4,0)
ALL ;
"RTN","LEX2043A",5,0)
 D EN,EN^LEX2043B,EN^LEX2043C,EN^LEX2043D
"RTN","LEX2043A",6,0)
 Q
"RTN","LEX2043A",7,0)
EN ; Main Entry Point
"RTN","LEX2043A",8,0)
 D MES^XPDUTL(" "),MES^XPDUTL("  Fixes made to correct errors in Lexicon Code Lookups"),MES^XPDUTL(" ")
"RTN","LEX2043A",9,0)
 D C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16
"RTN","LEX2043A",10,0)
 Q 
"RTN","LEX2043A",11,0)
C1 ; Lookup 038.49 returns 038.40
"RTN","LEX2043A",12,0)
 D IND("Lookup 038.49 returns 038.40") N IEN,DA,DIK
"RTN","LEX2043A",13,0)
 S IEN=306947 K FDA S FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",14,0)
 S IEN=273231 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",15,0)
 Q
"RTN","LEX2043A",16,0)
C2 ; Lookup 039.4 returns 039.9
"RTN","LEX2043A",17,0)
 D IND("Lookup 039.4  returns 039.9") N IEN,DA,DIK
"RTN","LEX2043A",18,0)
 S IEN=77345 K FDA S FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",19,0)
 S IEN=77352 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",20,0)
 Q
"RTN","LEX2043A",21,0)
C3 ; Lookup 070.31 returns 070.20
"RTN","LEX2043A",22,0)
 D IND("Lookup 070.31 returns 070.20") N IEN,DA,DIK
"RTN","LEX2043A",23,0)
 S IEN=273372 K FDA S FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",24,0)
 S IEN=273373 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",25,0)
 Q
"RTN","LEX2043A",26,0)
C4 ; Lookup 134.9 returns 136.9
"RTN","LEX2043A",27,0)
 D IND("Lookup 134.9  returns 136.9") N IEN,DA,DIK
"RTN","LEX2043A",28,0)
 S IEN=95357 K FDA S FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",29,0)
 S IEN=95355 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",30,0)
 Q
"RTN","LEX2043A",31,0)
C5 ; Lookup 201.10 returns 201.90
"RTN","LEX2043A",32,0)
 D IND("Lookup 201.10 returns 201.90") N IEN,DA,DIK
"RTN","LEX2043A",33,0)
 S IEN=306577 K FDA S FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",34,0)
 S IEN=303992 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",35,0)
 Q
"RTN","LEX2043A",36,0)
C6 ; Lookup 237.71 returns 237.70
"RTN","LEX2043A",37,0)
 D IND("Lookup 237.71 returns 237.70") N IEN,DA,DIK
"RTN","LEX2043A",38,0)
 S IEN=87807 K FDA S FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",39,0)
 S IEN=87824 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",40,0)
 S IEN=87807 K FDA S FDA(757.02,IEN_",",4)="" D FILE^DIE("","FDA")
"RTN","LEX2043A",41,0)
 S IEN=285394 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",42,0)
 S IEN=285394 K FDA S FDA(757.02,IEN_",",4)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",43,0)
 S IEN=87824 K FDA S FDA(757.02,IEN_",",4)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",44,0)
 S IEN=87815 K FDA S FDA(757.02,IEN_",",4)="" D FILE^DIE("","FDA")
"RTN","LEX2043A",45,0)
 S IEN=82712 K FDA S FDA(757.01,IEN_",",.01)="Neurofibromatosis Type 1 (Von Recklinghausen's Disease)" D FILE^DIE("","FDA")
"RTN","LEX2043A",46,0)
 S IEN=274566 K FDA S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",47,0)
 S IEN=274566 K FDA S FDA(757.02,IEN_",",4)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",48,0)
 S IEN=267773 K FDA S FDA(757.01,IEN_",",.01)="Neurofibromatosis Type 2 (Acoustic)" D FILE^DIE("","FDA")
"RTN","LEX2043A",49,0)
 Q
"RTN","LEX2043A",50,0)
C7 ; Lookup 307.54 returns 536.2
"RTN","LEX2043A",51,0)
 D IND("Lookup 307.54 returns 536.2") N IEN,DA,DIK
"RTN","LEX2043A",52,0)
 S IEN=271705 K FDA S FDA(757.02,IEN_",",4)="" D FILE^DIE("","FDA")
"RTN","LEX2043A",53,0)
 S IEN=271708 K FDA S FDA(757.02,IEN_",",4)="" D FILE^DIE("","FDA")
"RTN","LEX2043A",54,0)
 S IEN=127248 K FDA S FDA(757.01,IEN_",",.01)="Psychogenic Vomiting" D FILE^DIE("","FDA")
"RTN","LEX2043A",55,0)
 S IEN=134692 K FDA S FDA(757.02,IEN_",",1)="307.54",FDA(757.02,IEN_",",2)="1",FDA(757.02,IEN_",",4)="1"
"RTN","LEX2043A",56,0)
 S FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",57,0)
 Q
"RTN","LEX2043A",58,0)
C8 ; Lookup 315.02 returns 784.61
"RTN","LEX2043A",59,0)
 D IND("Lookup 315.02 returns 784.61") N IEN,DA,DIK
"RTN","LEX2043A",60,0)
 S IEN=37559 K FDA S FDA(757.01,IEN_",",.01)="Dyslexia, Developmental" D FILE^DIE("","FDA")
"RTN","LEX2043A",61,0)
 S IEN=37562 K FDA S FDA(757.01,IEN_",",.01)="Developmental Dyslexia" D FILE^DIE("","FDA")
"RTN","LEX2043A",62,0)
 S IEN=39781 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",63,0)
 S IEN=39788 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",64,0)
 S IEN=4790 K FDA S FDA(757.01,IEN_",",.01)="Alexia and Dyslexia" D FILE^DIE("","FDA")
"RTN","LEX2043A",65,0)
 S IEN=4995 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1"
"RTN","LEX2043A",66,0)
 Q
"RTN","LEX2043A",67,0)
C9 ; Lookup 327.51 returns 780.58
"RTN","LEX2043A",68,0)
 D IND("Lookup 327.51 returns 780.58") N IEN,DA,DIK
"RTN","LEX2043A",69,0)
 S IEN=331568 K FDA S FDA(757.01,IEN_",",.01)="Limb Related Movement Disorder" D FILE^DIE("","FDA")
"RTN","LEX2043A",70,0)
 S IEN=327520 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",71,0)
 Q
"RTN","LEX2043A",72,0)
C10 ; Lookup 335.21 returns 335.10
"RTN","LEX2043A",73,0)
 D IND("Lookup 335.21 returns 335.10") N IEN,DA,DIK
"RTN","LEX2043A",74,0)
 S ^LEX(757,16240,0)="79999^" S DA=16240,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043A",75,0)
 S ^LEX(757.001,16240,0)="16240^4^6" S DA=16240,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043A",76,0)
 S ^LEX(757.1,23383,0)="16240^6^47" S DA=23383,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043A",77,0)
 S IEN=79999 K FDA S FDA(757.01,IEN_",",1)="16240",FDA(757.01,IEN_",",2)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",78,0)
 S ^LEX(757.01,79999,0)="Progressive Muscular Atrophy"
"RTN","LEX2043A",79,0)
 S ^LEX(757.01,79999,1)="16240^1^D^12"
"RTN","LEX2043A",80,0)
 S IEN=84909 K FDA S FDA(757.02,IEN_",",3)="16240",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",81,0)
 S ^LEX(757.02,84909,0)="79999^335.21^1^16240^1^^1"
"RTN","LEX2043A",82,0)
 S IEN=80005 K FDA S FDA(757.01,IEN_",",.01)="Spinal Muscular Atrophy, Unspecified" D FILE^DIE("","FDA")
"RTN","LEX2043A",83,0)
 S IEN=88186 K FDA S FDA(757.01,IEN_",",.01)="Spinal Muscular Atrophy, Other" D FILE^DIE("","FDA")
"RTN","LEX2043A",84,0)
 Q
"RTN","LEX2043A",85,0)
C11 ; Lookup 345.51 returns 345.40
"RTN","LEX2043A",86,0)
 D IND("Lookup 345.51 returns 345.40") N IEN,DA,DIK
"RTN","LEX2043A",87,0)
 S IEN=90499 K FDA S FDA(757.01,IEN_",",.01)="Partial epilepsy, without mention of impairment of consciousness, with intractable epilepsy" D FILE^DIE("","FDA")
"RTN","LEX2043A",88,0)
 S DA=275286,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,275286,0)="90499^345.51^1^18596^1^^1",^LEX(757.02,275286,4,0)="^757.28D^1^1",^LEX(757.02,275286,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043A",89,0)
 Q
"RTN","LEX2043A",90,0)
C12 ; Lookup 346.80 returns 346.90
"RTN","LEX2043A",91,0)
 D IND("Lookup 346.80 returns 345.90") N IEN,DA,DIK
"RTN","LEX2043A",92,0)
 S IEN=55511 K FDA S FDA(757.01,IEN_",",.01)="Migraine, unspecified, without mention of Intractable Migraine" D FILE^DIE("","FDA")
"RTN","LEX2043A",93,0)
 S IEN=304585 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",94,0)
 S IEN=306567 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",95,0)
 S IEN=293880 K FDA S FDA(757.01,IEN_",",.01)="Other forms of Migraine without mention of Intractable Migraine" D FILE^DIE("","FDA")
"RTN","LEX2043A",96,0)
 S IEN=304584 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",97,0)
 S IEN=77884 K FDA S FDA(757.01,IEN_",",.01)="Other forms of Migraine with Intractable Migraine, so stated" D FILE^DIE("","FDA")
"RTN","LEX2043A",98,0)
 S DA=304384,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,304384,0)="77884^346.81^1^15780^1^^1",^LEX(757.02,304384,4,0)="^757.28D^1^1",^LEX(757.02,304384,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043A",99,0)
 Q
"RTN","LEX2043A",100,0)
C13 ; Lookup 357.2 returns 250.60
"RTN","LEX2043A",101,0)
 D REMI("Lookup 357.2 returns 250.60","HD0000000 141151")
"RTN","LEX2043A",102,0)
 D REMI("Lookup 357.2 returns 250.60 (dupe)","HD0000000 140716")
"RTN","LEX2043A",103,0)
 D REMI("Lookup 357.2 returns 250.60 (dupe)","HD0000000 141456")
"RTN","LEX2043A",104,0)
 D REMI("Lookup 357.2 returns 250.60 (dupe)","HD0000000 142510")
"RTN","LEX2043A",105,0)
 D REMI("Lookup 357.2 returns 250.60 (dupe)","HD0000000 145965")
"RTN","LEX2043A",106,0)
 N IEN,DA,DIK
"RTN","LEX2043A",107,0)
 S IEN=102058 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",108,0)
 S IEN=306728 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",109,0)
 Q
"RTN","LEX2043A",110,0)
C14 ; Lookup 362.02 returns 250.50
"RTN","LEX2043A",111,0)
 D IND("Lookup 362.02 returns 250.50") N IEN,DA,DIK
"RTN","LEX2043A",112,0)
 S IEN=275435 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",113,0)
 S IEN=307963 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043A",114,0)
 Q
"RTN","LEX2043A",115,0)
C15 ; Lookup 363.22 returns 364.24
"RTN","LEX2043A",116,0)
 D IND("Lookup 363.22 returns 364.24") N IEN,DA,DIK
"RTN","LEX2043A",117,0)
 S ^LEX(757,130566,0)="265238^",DA=130566,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043A",118,0)
 S ^LEX(757.001,130566,0)="130566^4^4",DA=130566,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043A",119,0)
 S ^LEX(757.1,196103,0)="130566^6^47",DA=196103,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043A",120,0)
 S IEN=265238 K FDA S FDA(757.01,IEN_",",.01)="Harada's Syndrome",FDA(757.01,IEN_",",1)="130566",FDA(757.01,IEN_",",2)="1",FDA(757.01,IEN_",",4)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",121,0)
 S IEN=265239 K FDA S FDA(757.01,IEN_",",.01)="Harada's Disease",FDA(757.01,IEN_",",1)="130566" D FILE^DIE("","FDA")
"RTN","LEX2043A",122,0)
 S DA=271631,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,271631,0)="265238^D-X443^8^130566^0^^0",^LEX(757.02,271631,4,0)="^757.28D^1^1",^LEX(757.02,271631,4,1,0)="2960923^1" D IX1^DIK
"RTN","LEX2043A",123,0)
 S DA=271632,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,271632,0)="265239^363.22^1^130566^1^^1",^LEX(757.02,271632,4,0)="^757.28D^1^1",^LEX(757.02,271632,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043A",124,0)
 Q
"RTN","LEX2043A",125,0)
C16 ; Lookup 365.13 returns 365.10
"RTN","LEX2043A",126,0)
 D IND("Lookup 365.13 returns 365.10") N IEN,DA,DIK
"RTN","LEX2043A",127,0)
 S ^LEX(757,10567,0)="51211^" S DA=10567,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043A",128,0)
 S ^LEX(757.001,10567,0)="10567^4^4" S DA=10567,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043A",129,0)
 S ^LEX(757.1,15651,0)="10567^6^47" S DA=15651,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043A",130,0)
 S IEN=51211 K FDA S FDA(757.01,IEN_",",.01)="Pigmentary Glaucoma",FDA(757.01,IEN_",",1)="10567",FDA(757.01,IEN_",",2)="1",FDA(757.01,IEN_",",4)="1" D FILE^DIE("","FDA")
"RTN","LEX2043A",131,0)
 S IEN=51210 K FDA S FDA(757.01,IEN_",",.01)="Pigmentary Glaucoma, Open Angle",FDA(757.01,IEN_",",1)="10567" D FILE^DIE("","FDA")
"RTN","LEX2043A",132,0)
 S DA=54078,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,54078,0)="51210^D-X316^8^10567^1^^0",^LEX(757.02,54078,4,0)="^757.28D^1^1",^LEX(757.02,54078,4,1,0)="2960923^1" D IX1^DIK
"RTN","LEX2043A",133,0)
 S DA=54079,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,54079,0)="51211^365.13^1^10567^1^^1",^LEX(757.02,54079,4,0)="^757.28D^1^1",^LEX(757.02,54079,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043A",134,0)
 Q
"RTN","LEX2043A",135,0)
REM(X,Y) ; Remedy Ticket
"RTN","LEX2043A",136,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)  I $L(Y) S X="  "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043A",137,0)
 S X=X_" "_Y S:$E(X,1)'=" " X=" "_X D MES^XPDUTL(X)
"RTN","LEX2043A",138,0)
REMI(X,Y) ; Remedy Ticket - Indented
"RTN","LEX2043A",139,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2043A",140,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043A",141,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043A",142,0)
 Q
"RTN","LEX2043A",143,0)
IND(X) ; Indent Text
"RTN","LEX2043A",144,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043A",145,0)
 Q
"RTN","LEX2043B")
0^5^B62523661
"RTN","LEX2043B",1,0)
LEX2043B ; ISL/KER - Post Install LEX*2.0*43  ; 09/06/2006
"RTN","LEX2043B",2,0)
 ;;2.0;LEXICON UTILITY;**43**;Sep 23, 1996;Build 24
"RTN","LEX2043B",3,0)
 ;
"RTN","LEX2043B",4,0)
EN ; Main Entry Point
"RTN","LEX2043B",5,0)
 D C17,C18,C19,C20,C21,C22,C23,C24,C25,C26,C27,C28
"RTN","LEX2043B",6,0)
 Q
"RTN","LEX2043B",7,0)
C17 ; Lookup 369.66 returns 369.62
"RTN","LEX2043B",8,0)
 D IND("Lookup 369.66 returns 369.62") N IEN,DA,DIK
"RTN","LEX2043B",9,0)
 S ^LEX(757,140128,0)="268891^" S DA=140128,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043B",10,0)
 S ^LEX(757.001,140128,0)="140128^4^4" S DA=140128,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043B",11,0)
 S ^LEX(757.1,206557,0)="140128^6^47" S DA=206557,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043B",12,0)
 S ^LEX(757.01,268891,0)="One Eye: near total impairment, Other eye: normal vision"
"RTN","LEX2043B",13,0)
 S ^LEX(757.01,268891,1)="140128^1^D^1" S DA=268891,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043B",14,0)
 S DA=275719,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,275719,0)="268891^369.66^1^140128^1^^1",^LEX(757.02,275719,4,0)="^757.28D^1^1",^LEX(757.02,275719,4,1,0)="2781001^1" S DA=275719,DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2043B",15,0)
 Q
"RTN","LEX2043B",16,0)
C18 ; Lookup 414.10 returns 414.19 
"RTN","LEX2043B",17,0)
 D REMI("Lookup 414.10 returns 414.19","HD0000000 149971") N IEN,DA,DIK
"RTN","LEX2043B",18,0)
 S IEN=57741 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",19,0)
 S IEN=306564 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",20,0)
 S IEN=92869 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",21,0)
 S IEN=54644 K FDA S FDA(757.01,IEN_",",.01)="Aneurysm of Heart (Wall)" D FILE^DIE("","FDA")
"RTN","LEX2043B",22,0)
 S IEN=87338 K FDA S FDA(757.01,IEN_",",.01)="Other Aneurysm of Heart" D FILE^DIE("","FDA")
"RTN","LEX2043B",23,0)
 Q
"RTN","LEX2043B",24,0)
C19 ; Lookup 459.9  returns 443.9
"RTN","LEX2043B",25,0)
 D IND("Lookup 459.9  returns 443.9") N IEN,DA,DIK
"RTN","LEX2043B",26,0)
 S IEN=269849 K FDA S FDA(757.01,IEN_",",.01)="Unspecified Circulatory System Disorder" D FILE^DIE("","FDA")
"RTN","LEX2043B",27,0)
 S IEN=307196 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",28,0)
 S IEN=132869 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",29,0)
 S IEN=132871 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",30,0)
 S IEN=191584 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",31,0)
 S IEN=184182 K FDA S FDA(757.01,IEN_",",.01)="Peripheral Vascualar Disease, Unspecified" D FILE^DIE("","FDA")
"RTN","LEX2043B",32,0)
 Q
"RTN","LEX2043B",33,0)
C20 ; Lookup 519.9  returns 786.00
"RTN","LEX2043B",34,0)
 D IND("Lookup 519.9  returns 786.00") N IEN,DA,DIK
"RTN","LEX2043B",35,0)
 S IEN=105137 K FDA S FDA(757.01,IEN_",",.01)="Unspecified Disease of the Respiratory System" D FILE^DIE("","FDA")
"RTN","LEX2043B",36,0)
 S IEN=111130 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",37,0)
 S IEN=111135 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",38,0)
 S IEN=105164 K FDA S FDA(757.01,IEN_",",.01)="Respiratory Abnormality, Unspecified" D FILE^DIE("","FDA")
"RTN","LEX2043B",39,0)
 S IEN=111152 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",40,0)
 Q
"RTN","LEX2043B",41,0)
C21 ; Lookup 533.31 returns 533.20
"RTN","LEX2043B",42,0)
 D IND("Lookup 533.31 returns 533.20") N IEN,DA,DIK
"RTN","LEX2043B",43,0)
 S IEN=270121 K FDA S FDA(757.01,IEN_",",.01)="Acute Peptic Ulcer without mention of hemorrihage and preforation with obstruction" D FILE^DIE("","FDA")
"RTN","LEX2043B",44,0)
 S IEN=276983 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",45,0)
 S IEN=264378 K FDA S FDA(757.01,IEN_",",.01)="Acute peptic ulcer with hemorrhage and perforation, without mention of obstruction" D FILE^DIE("","FDA")
"RTN","LEX2043B",46,0)
 S DA=307237,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,307237,0)="264378^533.20^1^130078^1^^1",^LEX(757.02,307237,4,0)="^757.28D^1^1"
"RTN","LEX2043B",47,0)
 S ^LEX(757.02,307237,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043B",48,0)
 K ^LEX(757.02,"ACODE","533.20 ",276982),^LEX(757.02,"AMC",134124,276982),^LEX(757.02,"APCODE","533.20 ",276982),^LEX(757.02,"ASRC","ICD",276982)
"RTN","LEX2043B",49,0)
 K ^LEX(757.02,"B",270121,276982),^LEX(757.02,"CODE","533.20 ",276982),^LEX(757.02,"ACT","533.20 ",1,2781001,276982,1),^LEX(757.02,"ACT","533.20 ",3,2781001,276982,1)
"RTN","LEX2043B",50,0)
 K ^LEX(757.02,"AVA","533.20 ",270121,"ICD",276982) S ^LEX(757.02,276982,0)="270121^533.20^1^134124^0^^0" S DA=276982,DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2043B",51,0)
 Q
"RTN","LEX2043B",52,0)
C22 ; Lookup 664.14 returns 666.14
"RTN","LEX2043B",53,0)
 D IND("Lookup 664.14 returns 666.14") N IEN,DA,DIK
"RTN","LEX2043B",54,0)
 S IEN=271500 K FDA S FDA(757.01,IEN_",",.01)="Other Immediate Postpartum Hemorrhage, Postpartum" D FILE^DIE("","FDA")
"RTN","LEX2043B",55,0)
 S ^LEX(757,140249,0)="271573^" S DA=140249,DIK="^LEX(757," D IX1^DIK S ^LEX(757.001,140249,0)="140249^4^4" S DA=140249,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043B",56,0)
 S ^LEX(757.1,201631,0)="140249^6^47" S DA=201631,DIK="^LEX(757.1," D IX1^DIK S ^LEX(757.01,271573,0)="Second Degree Perineal Laceration, Postpartum"
"RTN","LEX2043B",57,0)
 S ^LEX(757.01,271573,1)="140249^1^D^1" S DA=271573,DIK="^LEX(757.01," D IX1^DIK S DA=278368,DIK="^LEX(757.02," D ^DIK
"RTN","LEX2043B",58,0)
 S ^LEX(757.02,278368,0)="271573^664.14^1^140249^1^^1",^LEX(757.02,278368,4,0)="^757.28D^1^1",^LEX(757.02,278368,4,1,0)="2781001^1"
"RTN","LEX2043B",59,0)
 S DA=278368,DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2043B",60,0)
 Q
"RTN","LEX2043B",61,0)
C23 ; Lookup 696.8  returns 696.1
"RTN","LEX2043B",62,0)
 D IND("Lookup 696.8  returns 696.1") N IEN,DA,DIK
"RTN","LEX2043B",63,0)
 S IEN=87816 K FDA S FDA(757.01,IEN_",",.01)="Other Psoriasis and Similar Disorders" D FILE^DIE("","FDA")
"RTN","LEX2043B",64,0)
 S IEN=93101 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",65,0)
 S IEN=93102 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",66,0)
 S IEN=271917 K FDA S FDA(757.01,IEN_",",.01)="Other Psoriasis" D FILE^DIE("","FDA")
"RTN","LEX2043B",67,0)
 S IEN=307565 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",68,0)
 Q
"RTN","LEX2043B",69,0)
C24 ; Lookup 745.10 returns 745.19
"RTN","LEX2043B",70,0)
 D IND("Lookup 745.10 returns 745.19") N IEN,DA,DIK
"RTN","LEX2043B",71,0)
 S IEN=121395 K FDA S FDA(757.01,IEN_",",.01)="Complete Transposition of Great Vessels" D FILE^DIE("","FDA")
"RTN","LEX2043B",72,0)
 S IEN=306788 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",73,0)
 S IEN=128688 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",74,0)
 S IEN=272881 K FDA S FDA(757.01,IEN_",",.01)="Other Transposition of Great Vessels" D FILE^DIE("","FDA")
"RTN","LEX2043B",75,0)
 S IEN=279792 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",76,0)
 Q
"RTN","LEX2043B",77,0)
C25 ; Lookup 753.16 returns 753.17
"RTN","LEX2043B",78,0)
 D IND("Lookup 753.16 returns 753.17") N IEN,DA,DIK
"RTN","LEX2043B",79,0)
 S IEN=67302 K FDA S FDA(757.01,IEN_",",.01)="Medullary Sponge Kidney" D FILE^DIE("","FDA")
"RTN","LEX2043B",80,0)
 S IEN=304006 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",81,0)
 S IEN=67073 K FDA S FDA(757.01,IEN_",",.01)="Medullary Cystic Kidney" D FILE^DIE("","FDA")
"RTN","LEX2043B",82,0)
 S IEN=67076 K FDA S FDA(757.01,IEN_",",.01)="Cystic Kidney" D FILE^DIE("","FDA")
"RTN","LEX2043B",83,0)
 S DA=19744,DIK="^LEX(757.1," D ^DIK S ^LEX(757.1,19774,0)="13663^6^47" D IX1^DIK
"RTN","LEX2043B",84,0)
 S DA=304081,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,304081,0)="67073^753.16^1^13663^1^^1",^LEX(757.02,304081,4,0)="^757.28D^1^1",^LEX(757.02,304081,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043B",85,0)
 Q
"RTN","LEX2043B",86,0)
C26 ; Lookup 755.39 returns 755.29
"RTN","LEX2043B",87,0)
 D IND("Lookup 755.39 returns 755.29") N IEN,DA,DIK
"RTN","LEX2043B",88,0)
 S IEN=273036 K FDA S FDA(757.01,IEN_",",.01)="Reduction Deformity of the Lower Limb, Longitudinal Deficiency, Phalanges, complete or partial" D FILE^DIE("","FDA")
"RTN","LEX2043B",89,0)
 S IEN=279955 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",90,0)
 S ^LEX(757,140404,0)="273049^" S DA=140404,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043B",91,0)
 S ^LEX(757.001,140404,0)="140404^4^4" S DA=140404,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043B",92,0)
 S ^LEX(757.1,206697,0)="140404^2^19" S DA=206697,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043B",93,0)
 S ^LEX(757.01,273049,0)="Reduction Deformity of the Upper Limb, Longitudinal Deficiency, Phalanges, complete or partial"
"RTN","LEX2043B",94,0)
 S ^LEX(757.01,273049,1)="140404^1^D^1" S DA=273049,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043B",95,0)
 S DA=279954,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,279954,0)="273049^755.29^1^140404^1^^1",^LEX(757.02,279954,4,0)="^757.28D^1^1",^LEX(757.02,279954,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043B",96,0)
 Q
"RTN","LEX2043B",97,0)
C27 ; Lookup E850.3 returns 965.1
"RTN","LEX2043B",98,0)
 D IND("Lookup E850.3 returns 965.1") N IEN,DA,DIK
"RTN","LEX2043B",99,0)
 S IEN=107569 K FDA S FDA(757.01,IEN_",",.01)="Accidental Poisoning by Sallcylates" D FILE^DIE("","FDA")
"RTN","LEX2043B",100,0)
 S IEN=107571 K FDA S FDA(757.01,IEN_",",.01)="Accidental Poisoning by Salicylic Acid Salts" D FILE^DIE("","FDA")
"RTN","LEX2043B",101,0)
 S IEN=270025 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",102,0)
 S IEN=270027 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",103,0)
 S IEN=276042 K FDA S FDA(757.01,IEN_",",.01)="Poisoning by Salicylates" D FILE^DIE("","FDA")
"RTN","LEX2043B",104,0)
 S IEN=283009 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",105,0)
 Q
"RTN","LEX2043B",106,0)
C28 ; Lookup E866.1 returns 985.0
"RTN","LEX2043B",107,0)
 D IND("Lookup E866.1 returns 985.0") N IEN,DA,DIK
"RTN","LEX2043B",108,0)
 S IEN=76237 K FDA S FDA(757.01,IEN_",",.01)="Accidental Poisoning by Mercury, its Components and/or Fumes" D FILE^DIE("","FDA")
"RTN","LEX2043B",109,0)
 S IEN=76238 K FDA S FDA(757.01,IEN_",",.01)="Accidental Poisoning by Mercury" D FILE^DIE("","FDA")
"RTN","LEX2043B",110,0)
 S IEN=269297 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043B",111,0)
 S IEN=269299 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",112,0)
 S IEN=120633 K FDA S FDA(757.01,IEN_",",.01)="Toxic Effect of Mercury and its Components" D FILE^DIE("","FDA")
"RTN","LEX2043B",113,0)
 S IEN=127967 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043B",114,0)
 Q
"RTN","LEX2043B",115,0)
REM(X,Y) ; Remedy Ticket
"RTN","LEX2043B",116,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)  I $L(Y) S X="  "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043B",117,0)
 S X=X_" "_Y S:$E(X,1)'=" " X=" "_X D MES^XPDUTL(X)
"RTN","LEX2043B",118,0)
REMI(X,Y) ; Remedy Ticket - Indented
"RTN","LEX2043B",119,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2043B",120,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043B",121,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043B",122,0)
 Q
"RTN","LEX2043B",123,0)
IND(X) ; Indent Text
"RTN","LEX2043B",124,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043B",125,0)
 Q
"RTN","LEX2043C")
0^6^B27867922
"RTN","LEX2043C",1,0)
LEX2043C ; ISL/KER - Post Install LEX*2.0*43  ; 09/06/2006
"RTN","LEX2043C",2,0)
 ;;2.0;LEXICON UTILITY;**43**;Sep 23, 1996;Build 24
"RTN","LEX2043C",3,0)
 ;
"RTN","LEX2043C",4,0)
EN ; Main Entry Point
"RTN","LEX2043C",5,0)
 D C29,C30,C31,C32,C33,C34
"RTN","LEX2043C",6,0)
 Q
"RTN","LEX2043C",7,0)
 ;
"RTN","LEX2043C",8,0)
C29 ; Lookup E878.9 returns 998.0
"RTN","LEX2043C",9,0)
 D IND("Lookup E878.9 returns 998.0") N IEN,DA,DIK
"RTN","LEX2043C",10,0)
 S IEN=276746 K FDA S FDA(757.01,IEN_",",.01)="Unspecified Surgical Operations and/or Procedure as the cause of Abnormal Reaction of Patient, or Later Complication" D FILE^DIE("","FDA")
"RTN","LEX2043C",11,0)
 S IEN=97087 K FDA S FDA(757.01,IEN_",",.01)="Postoperative Shock, Not Elsewhere Classified" D FILE^DIE("","FDA")
"RTN","LEX2043C",12,0)
 S IEN=283759 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",13,0)
 S IEN=283760 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043C",14,0)
 S IEN=102809 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",15,0)
 Q
"RTN","LEX2043C",16,0)
C30 ; Lookup E930.2 returns 960.3
"RTN","LEX2043C",17,0)
 D IND("Lookup E930.2 returns 960.3") N IEN,DA,DIK
"RTN","LEX2043C",18,0)
 S IEN=42332 K FDA S FDA(757.01,IEN_",",.01)="Antibiotics, Chloramphenicol Group causing Adverse Effects in Therapeutic Use" D FILE^DIE("","FDA")
"RTN","LEX2043C",19,0)
 S IEN=275987 K FDA S FDA(757.01,IEN_",",.01)="Poisoning by Antibiotics, Erythromycin and Other Marcrolides" D FILE^DIE("","FDA")
"RTN","LEX2043C",20,0)
 S IEN=269328 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043C",21,0)
 S IEN=269329 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",22,0)
 S IEN=282954 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",23,0)
 Q
"RTN","LEX2043C",24,0)
C31 ; Lookup E946.7 returns 976.9
"RTN","LEX2043C",25,0)
 D IND("Lookup E946.7 returns 976.9") N IEN,DA,DIK
"RTN","LEX2043C",26,0)
 S IEN=47058 K FDA S FDA(757.01,IEN_",",.01)="Dental Drugs Topically Applied" D FILE^DIE("","FDA")
"RTN","LEX2043C",27,0)
 S IEN=276147 K FDA S FDA(757.01,IEN_",",.01)="Poisoning by Unspecified Agent Primarily Affecting Skin and Mucous Membrane" D FILE^DIE("","FDA")
"RTN","LEX2043C",28,0)
 S IEN=269432 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043C",29,0)
 S IEN=269434 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",30,0)
 S IEN=283114 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",31,0)
 Q
"RTN","LEX2043C",32,0)
C32 ; Lookup E950.4 returns 964.2
"RTN","LEX2043C",33,0)
 D IND("Lookup E950.4 returns 964.2") N IEN,DA,DIK
"RTN","LEX2043C",34,0)
 S IEN=259817 K FDA S FDA(757.01,IEN_",",.01)="Suicide and Self-Inflicted Poisoning by Other Specified Drugs or Medicinal Substances" D FILE^DIE("","FDA")
"RTN","LEX2043C",35,0)
 S IEN=276028 K FDA S FDA(757.01,IEN_",",.01)="Poisoning by Anticoagulants" D FILE^DIE("","FDA")
"RTN","LEX2043C",36,0)
 S IEN=269769 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043C",37,0)
 S IEN=269771 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",38,0)
 S IEN=282995 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",39,0)
 Q
"RTN","LEX2043C",40,0)
C33 ; Lookup E953.8 returns E958.8
"RTN","LEX2043C",41,0)
 D IND("Lookup E953.8 returns E958.8") N IEN,DA,DIK
"RTN","LEX2043C",42,0)
 S IEN=294993 K FDA S FDA(757.01,IEN_",",.01)="Suicide and Self-Inflicted Injury by other Specified Means" D FILE^DIE("","FDA")
"RTN","LEX2043C",43,0)
 S IEN=305516 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043C",44,0)
 S IEN=305578 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",45,0)
 S ^LEX(757,155034,0)="295837^" S DA=155034,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043C",46,0)
 S ^LEX(757.001,155034,0)="155034^4^4" S DA=155034,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043C",47,0)
 S ^LEX(757.1,223689,0)="155034^6^33" S DA=223689,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043C",48,0)
 S ^LEX(757.01,295837,0)="Suicide and Self-Inflicted Injury by other specified means, causing Strangulation or Suffocation"
"RTN","LEX2043C",49,0)
 S ^LEX(757.01,295837,1)="155034^1^D^1" S DA=295837,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043C",50,0)
 S DA=305516,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,305516,0)="295837^E953.8^1^155034^1^^1",^LEX(757.02,305516,4,0)="^757.28D^1^1",^LEX(757.02,305516,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043C",51,0)
 Q
"RTN","LEX2043C",52,0)
C34 ; Lookup E958.9 returns E953.9
"RTN","LEX2043C",53,0)
 D IND("Lookup E958.9 returns E953.9") N IEN,DA,DIK
"RTN","LEX2043C",54,0)
 S IEN=115521 K FDA S FDA(757.01,IEN_",",.01)="Suicide and Self-Inflicted Injury by other Unspecified Means" D FILE^DIE("","FDA")
"RTN","LEX2043C",55,0)
 S IEN=122357 K FDA S FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043C",56,0)
 S IEN=122358 K FDA S FDA(757.02,IEN_",",4)="1",FDA(757.02,IEN_",",6)="1" D FILE^DIE("","FDA")
"RTN","LEX2043C",57,0)
 S ^LEX(757,155035,0)="295841^" S DA=155035,DIK="^LEX(757," D IX1^DIK
"RTN","LEX2043C",58,0)
 S ^LEX(757.001,155035,0)="155035^4^4" S DA=155035,DIK="^LEX(757.001," D IX1^DIK
"RTN","LEX2043C",59,0)
 S ^LEX(757.1,223690,0)="155035^6^33" S DA=223690,DIK="^LEX(757.1," D IX1^DIK
"RTN","LEX2043C",60,0)
 S ^LEX(757.01,295841,0)="Suicide and Self-Inflicted Injury by unspecified means, causing Strangulation or Suffocation"
"RTN","LEX2043C",61,0)
 S ^LEX(757.01,295841,1)="155035^1^D^1" S DA=295841,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043C",62,0)
 S DA=122357,DIK="^LEX(757.02," D ^DIK S ^LEX(757.02,122357,0)="295841^E953.9^1^155035^1^^1",^LEX(757.02,122357,4,0)="^757.28D^1^1",^LEX(757.02,122357,4,1,0)="2781001^1" D IX1^DIK
"RTN","LEX2043C",63,0)
 Q
"RTN","LEX2043C",64,0)
REM(X,Y) ; Remedy Ticket
"RTN","LEX2043C",65,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)  I $L(Y) S X="  "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043C",66,0)
 S X=X_" "_Y S:$E(X,1)'=" " X=" "_X D MES^XPDUTL(X)
"RTN","LEX2043C",67,0)
REMI(X,Y) ; Remedy Ticket - Indented
"RTN","LEX2043C",68,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2043C",69,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043C",70,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043C",71,0)
 Q
"RTN","LEX2043C",72,0)
IND(X) ; Indent Text
"RTN","LEX2043C",73,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043C",74,0)
 Q
"RTN","LEX2043D")
0^7^B15573352
"RTN","LEX2043D",1,0)
LEX2043D ; ISL/KER - Post Install LEX*2.0*43  ; 09/06/2006
"RTN","LEX2043D",2,0)
 ;;2.0;LEXICON UTILITY;**43**;Sep 23, 1996;Build 24
"RTN","LEX2043D",3,0)
 ;
"RTN","LEX2043D",4,0)
EN ; Main Entry Point
"RTN","LEX2043D",5,0)
 D C35,C36,C37,C38
"RTN","LEX2043D",6,0)
 Q
"RTN","LEX2043D",7,0)
C35 ; HD0000000 142632 - AIDS and Hip Pain 
"RTN","LEX2043D",8,0)
 D MES^XPDUTL(" "),MES^XPDUTL("  Fixes made to ICD-9 in the Lexicon"),MES^XPDUTL(" ")
"RTN","LEX2043D",9,0)
 D REMI("Problem with 2 codes 042 and  719.45","HD0000000 142632")
"RTN","LEX2043D",10,0)
 N IEN,DA,DIK
"RTN","LEX2043D",11,0)
 S ^LEX(757.01,266500,5,0)="^757.18^1^1",^LEX(757.01,266500,5,1,0)="AIDS",^LEX(757.01,266500,5,"B","AIDS",1)="",DA=266500,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043D",12,0)
 S ^LEX(757.01,304652,5,0)="^757.18^1^1",^LEX(757.01,304652,5,1,0)="AIDS",^LEX(757.01,304652,5,"B","AIDS",1)="",DA=304652,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043D",13,0)
 S ^LEX(757.02,317464,0)="2244^042.^1^458^0^^0",^LEX(757.02,317464,4,0)="^757.28D^1^1",^LEX(757.02,317464,4,1,0)="2781001^1",DA=317464,DIK="^LEX(757.02," D IX1^DIK
"RTN","LEX2043D",14,0)
 S ^LEX(757.01,2244,5,0)="^757.18^1^1",^LEX(757.01,2244,5,1,0)="AIDS",^LEX(757.01,2244,5,"B","AIDS",1)="",DA=2244,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043D",15,0)
 S ^LEX(757.01,272402,5,0)="^757.18^1^1",^LEX(757.01,272402,5,1,0)="HIP",^LEX(757.01,272402,5,"B","HIP",1)="",DA=272402,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043D",16,0)
 S ^LEX(757.01,272252,5,0)="^757.18^2^2",^LEX(757.01,272252,5,1,0)="HIP",^LEX(757.01,272252,5,2,0)="PAIN" S DA=272252,DIK="^LEX(757.01," D IX1^DIK
"RTN","LEX2043D",17,0)
 S IEN=60666 K FDA S FDA(757.02,IEN_",",1)="719.45",FDA(757.02,IEN_",",2)="1",FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043D",18,0)
 S IEN=269850 K FDA S FDA(757.02,IEN_",",1)="719.45",FDA(757.02,IEN_",",2)="1",FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043D",19,0)
 S IEN=267561 K FDA S FDA(757.02,IEN_",",1)="719.45",FDA(757.02,IEN_",",2)="1",FDA(757.02,IEN_",",4)="",FDA(757.02,IEN_",",6)="0" D FILE^DIE("","FDA")
"RTN","LEX2043D",20,0)
 Q
"RTN","LEX2043D",21,0)
C36 ; HD0000000 147490 - ICD Code 567.22 Recognized as CC
"RTN","LEX2043D",22,0)
 D MES^XPDUTL(" "),MES^XPDUTL("  Fixes made to ICD-9 in file #80"),MES^XPDUTL(" ")
"RTN","LEX2043D",23,0)
 D REMI("ICD Code 567.22 Recognized as CC","HD0000000 147490")
"RTN","LEX2043D",24,0)
 N IEN,FDA S IEN=+($$ICDDX^ICDCODE("567.22"))
"RTN","LEX2043D",25,0)
 I IEN K FDA S FDA(80,IEN_",",70)="1" D FILE^DIE("","FDA")
"RTN","LEX2043D",26,0)
 Q
"RTN","LEX2043D",27,0)
C37 ; Fixes made by modifying the logic in ICPTMOD Routine
"RTN","LEX2043D",28,0)
 D MES^XPDUTL(" ")
"RTN","LEX2043D",29,0)
 D MES^XPDUTL("  Fixes made by modifying the logic in ICPTMOD Routine")
"RTN","LEX2043D",30,0)
 D MES^XPDUTL("  or by the re-alignment of the CPT Modifier Ranges"),MES^XPDUTL(" ")
"RTN","LEX2043D",31,0)
 D REMI("Modifier 47 with 26951","HD0000000 063473")
"RTN","LEX2043D",32,0)
 D REMI("Modifiers LT & RT with 73500 & 73120","HD0000000 064223")
"RTN","LEX2043D",33,0)
 D REMI("Modifier P5 with 00910","HD0000000 064495")
"RTN","LEX2043D",34,0)
 D REMI("Modifier 50 with 92250","HD0000000 084545")
"RTN","LEX2043D",35,0)
 D REMI("Modifiers 76, 77, 78, and 79 with J8499","HD0000000 097711")
"RTN","LEX2043D",36,0)
 D REMI("Modifier GT with 90853","HD0000000 110935")
"RTN","LEX2043D",37,0)
 D REMI("Modifier GW with 99213","HD0000000 118427")
"RTN","LEX2043D",38,0)
 D REMI("Modifier 53 with G0121","HD0000000 121972")
"RTN","LEX2043D",39,0)
 D REMI("Modifier GT with 90853","HD0000000 122219")
"RTN","LEX2043D",40,0)
 D REMI("Modifiers GN, GO and GP with 97760-97762","HD0000000 134404")
"RTN","LEX2043D",41,0)
 D REMI("Modifiers GN, GO and GP with 97760-97762","HD0000000 150885")
"RTN","LEX2043D",42,0)
 Q
"RTN","LEX2043D",43,0)
C38 ; Fixes made to CPT Modifier file
"RTN","LEX2043D",44,0)
 D MES^XPDUTL(" ")
"RTN","LEX2043D",45,0)
 D MES^XPDUTL("  Fixes made by data changes to the CPT Modifier file"),MES^XPDUTL(" ")
"RTN","LEX2043D",46,0)
 D REMI("Modifier BL with P-Codes","HD0000000 131752")
"RTN","LEX2043D",47,0)
 D REMI("Modifier 66 with Unlisted Procedures","HD0000000 107714")
"RTN","LEX2043D",48,0)
 D REMI("Modifier GW with Commercial/Medicare bills","HD0000000 138426")
"RTN","LEX2043D",49,0)
 D REMI("Modifier 51 with 51741 and 51798","HD0000000 141204")
"RTN","LEX2043D",50,0)
 D REMI("Modifier GT with 99090 and 99091","HD0000000 150470")
"RTN","LEX2043D",51,0)
 Q
"RTN","LEX2043D",52,0)
REM(X,Y) ; Remedy Ticket
"RTN","LEX2043D",53,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)  I $L(Y) S X="  "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043D",54,0)
 S X=X_" "_Y S:$E(X,1)'=" " X=" "_X D MES^XPDUTL(X)
"RTN","LEX2043D",55,0)
REMI(X,Y) ; Remedy Ticket - Indented
"RTN","LEX2043D",56,0)
 N I S X=$G(X),Y=$G(Y) Q:'$L(X)
"RTN","LEX2043D",57,0)
 I $L(Y) S X="    "_X F  Q:$L(X)>48  S X=X_" "
"RTN","LEX2043D",58,0)
 S X=X_" "_Y S:$E(X,1)'=" " X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043D",59,0)
 Q
"RTN","LEX2043D",60,0)
IND(X) ; Indent Text
"RTN","LEX2043D",61,0)
 N I S X=$G(X) Q:'$L(X)  S X="    "_X D MES^XPDUTL(X)
"RTN","LEX2043D",62,0)
 Q
"RTN","LEX2043P")
0^3^B26656686
"RTN","LEX2043P",1,0)
LEX2043P ; ISL/KER - Pre/Post Install ; 09/06/2006
"RTN","LEX2043P",2,0)
 ;;2.0;LEXICON UTILITY;**43**;Sep 23, 1996;Build 24
"RTN","LEX2043P",3,0)
 ;
"RTN","LEX2043P",4,0)
 ; External References
"RTN","LEX2043P",5,0)
 ;   DBIA 10086  HOME^%ZIS
"RTN","LEX2043P",6,0)
 ;   DBIA  2052  $$GET1^DID
"RTN","LEX2043P",7,0)
 ;   DBIA  2055  PRD^DILFD
"RTN","LEX2043P",8,0)
 ;   DBIA 10014  EN^DIU2
"RTN","LEX2043P",9,0)
 ;   DBIA 10141  BMES^XPDUTL
"RTN","LEX2043P",10,0)
 ;   DBIA 10141  MES^XPDUTL
"RTN","LEX2043P",11,0)
 ;                      
"RTN","LEX2043P",12,0)
 Q
"RTN","LEX2043P",13,0)
 ;                      
"RTN","LEX2043P",14,0)
POST ; LEX*2.0*43 Post-Install
"RTN","LEX2043P",15,0)
 N LEXEDT,LEXCHG,LEXSCHG S LEXEDT=$G(^LEXM(0,"CREATED"))
"RTN","LEX2043P",16,0)
 S LEXCHG=0 S:$D(^LEXM(80))!($D(^LEXM(80.1)))!($D(^LEXM(81)))!($D(^LEXM(81.2)))!($D(^LEXM(81.3))) LEXCHG=1
"RTN","LEX2043P",17,0)
 ;
"RTN","LEX2043P",18,0)
 ;-----------------------------
"RTN","LEX2043P",19,0)
 ;   Save Changes
"RTN","LEX2043P",20,0)
 D SCHG
"RTN","LEX2043P",21,0)
 ;
"RTN","LEX2043P",22,0)
 ;-----------------------------
"RTN","LEX2043P",23,0)
 ;   Load Data into Files
"RTN","LEX2043P",24,0)
 D LOAD
"RTN","LEX2043P",25,0)
 ;
"RTN","LEX2043P",26,0)
 ;-----------------------------
"RTN","LEX2043P",27,0)
 ;   Data Conversion
"RTN","LEX2043P",28,0)
 D CON
"RTN","LEX2043P",29,0)
 ;
"RTN","LEX2043P",30,0)
 ;-----------------------------
"RTN","LEX2043P",31,0)
 ;   Re-Index Files - N/A for LEX*2.0*43
"RTN","LEX2043P",32,0)
 ;   Do not use for Annual/Quarterly Updates, it disrupts the Protocol
"RTN","LEX2043P",33,0)
 ;   D RX
"RTN","LEX2043P",34,0)
 ;
"RTN","LEX2043P",35,0)
 ;-----------------------------
"RTN","LEX2043P",36,0)
 ;   Fire Protocol 
"RTN","LEX2043P",37,0)
 D NOTIFY^LEXXGI
"RTN","LEX2043P",38,0)
 ;
"RTN","LEX2043P",39,0)
 ;-----------------------------
"RTN","LEX2043P",40,0)
 ;   Install Remedy Tickets
"RTN","LEX2043P",41,0)
 D ALL^LEX2043A
"RTN","LEX2043P",42,0)
 ;
"RTN","LEX2043P",43,0)
 ;-----------------------------
"RTN","LEX2043P",44,0)
 ;   Send a Install Message
"RTN","LEX2043P",45,0)
 D MSG
"RTN","LEX2043P",46,0)
 ;
"RTN","LEX2043P",47,0)
 ;-----------------------------
"RTN","LEX2043P",48,0)
 ;   Clean up and Quit
"RTN","LEX2043P",49,0)
 D KLEXM
"RTN","LEX2043P",50,0)
 Q
"RTN","LEX2043P",51,0)
 ;                      
"RTN","LEX2043P",52,0)
LOAD ; Load Data from ^LEXM into IC*/LEX Files
"RTN","LEX2043P",53,0)
 N LEXB,LEXBUILD,LEXCD,LEXIGHF,LEXLAST,LEXLREV D IMP^LEX2043
"RTN","LEX2043P",54,0)
 S U="^",LEXB=$G(^LEXM(0,"BUILD")) Q:LEXB=""  Q:LEXBUILD=""
"RTN","LEX2043P",55,0)
 S LEXCD=0 S LEXCD=+($$CPD^LEX2043)
"RTN","LEX2043P",56,0)
 I LEXCD,LEXB=LEXBUILD D  G LQ
"RTN","LEX2043P",57,0)
 . S X="Data for patch "_LEXBUILD_" has already been installed"
"RTN","LEX2043P",58,0)
 . W:'$D(XPDNM) !!,X D:$D(XPDNM) BMES^XPDUTL(X)
"RTN","LEX2043P",59,0)
 . S X="" W:'$D(XPDNM) ! D:$D(XPDNM) MES^XPDUTL(X)
"RTN","LEX2043P",60,0)
 D:'LEXCD&(LEXB=LEXBUILD) EN^LEXXGI
"RTN","LEX2043P",61,0)
LQ ; Load Quit
"RTN","LEX2043P",62,0)
 D KLEXM
"RTN","LEX2043P",63,0)
 Q
"RTN","LEX2043P",64,0)
 ;
"RTN","LEX2043P",65,0)
MSG ; Send Installation Message to G.LEXICON
"RTN","LEX2043P",66,0)
 Q:+($G(DUZ))=0!($$NOTDEF^LEX2043($G(DUZ)))
"RTN","LEX2043P",67,0)
 D HOME^%ZIS N DIFROM,LEXLREV,LEXLAST,LEXBUILD,LEXIGHF
"RTN","LEX2043P",68,0)
 D IMP^LEX2043,POST^LEXXFI Q
"RTN","LEX2043P",69,0)
 ;
"RTN","LEX2043P",70,0)
SCHG ; Save Change File Changes
"RTN","LEX2043P",71,0)
 N LEXI,LEXFI,LEXFIL S LEXFI=0 F  S LEXFI=$O(^LEXM(LEXFI)) Q:+LEXFI=0  D
"RTN","LEX2043P",72,0)
 . S LEXI=0 F  S LEXI=$O(^LEXM(LEXFI,LEXI)) Q:+LEXI=0  D
"RTN","LEX2043P",73,0)
 . . N LEXCF,LEXIEN S LEXMUMPS=$G(^LEXM(LEXFI,LEXI)),LEXRT=$P(LEXMUMPS,"^",2)
"RTN","LEX2043P",74,0)
 . . S:LEXMUMPS["^LEX("!(LEXMUMPS["^LEXT(")!(LEXMUMPS["^LEXC(") LEXFIL=+($P(LEXRT,"(",2))
"RTN","LEX2043P",75,0)
 . . S:LEXMUMPS["^ICD9(" LEXFIL=80 S:LEXMUMPS["^ICD0(" LEXFIL=80.1 S:LEXMUMPS["^ICPT(" LEXFIL=81 S:LEXMUMPS["^DIC(81.3" LEXFIL=81.3
"RTN","LEX2043P",76,0)
 . . S:+LEXFIL>0 LEXSCHG(+LEXFIL,0)="" S LEXCF=+($P(LEXMUMPS,"LEXC(757.9,""AFIL"",",2))
"RTN","LEX2043P",77,0)
 . . S:$P(LEXCF,".",1)'="757"&("^80^80.1^81^81.3^"'[("^"_LEXCF_"^")) LEXCF=""
"RTN","LEX2043P",78,0)
 . . S LEXIEN=+($P(LEXMUMPS,("LEXC(757.9,""AFIL"","_+LEXCF_","),2))
"RTN","LEX2043P",79,0)
 . . I +LEXIEN>0&(+LEXCF)>0&("^80^80.1^81^81.3)"[LEXCF)&(+LEXFIL=757.9)&(LEXMUMPS["LEXC(757.9") D
"RTN","LEX2043P",80,0)
 . . . S LEXSCHG(+LEXFIL,LEXIEN)=LEXCF,LEXSCHG(757.9,"B",+LEXCF,LEXIEN)=""
"RTN","LEX2043P",81,0)
 . . S:$L(LEXMUMPS)&($L(LEXCF)) LEXCHGS(LEXCF)=""
"RTN","LEX2043P",82,0)
 Q
"RTN","LEX2043P",83,0)
 ;
"RTN","LEX2043P",84,0)
KLEXM ; Subscripted Kill of ^LEXM
"RTN","LEX2043P",85,0)
 N DA S DA=0 F  S DA=$O(^LEXM(DA)) Q:+DA=0  K ^LEXM(DA)
"RTN","LEX2043P",86,0)
 K ^LEXM(0)
"RTN","LEX2043P",87,0)
 Q
"RTN","LEX2043P",88,0)
 ;
"RTN","LEX2043P",89,0)
PRE ; LEX*2.0*40 Pre-Install   (N/A for patch 40)
"RTN","LEX2043P",90,0)
 Q
"RTN","LEX2043P",91,0)
 ;
"RTN","LEX2043P",92,0)
RX ; Reindex files            (N/A for patch 40)
"RTN","LEX2043P",93,0)
 Q
"RTN","LEX2043P",94,0)
 N LEX,DA,DIK,TH,TM,TD
"RTN","LEX2043P",95,0)
 D BMES^XPDUTL(" Re-indexing NEW Versioned Text Cross-References")
"RTN","LEX2043P",96,0)
 ;
"RTN","LEX2043P",97,0)
 D BMES^XPDUTL("   ICD-9 Diagnosis file                 #80") W !,"   "
"RTN","LEX2043P",98,0)
 S (LEX,DA)=0 F  S DA=$O(^ICD9(DA)) Q:+DA=0  K ^ICD9(DA,66,"B"),^ICD9(DA,67,"B"),^ICD9(DA,68,"B") S LEX=+($G(LEX))+1 W:LEX#120=0 "."
"RTN","LEX2043P",99,0)
 K ^ICD9("AB"),^ICD9("ACC"),^ICD9("ACT"),^ICD9("BA"),^ICD9("D"),^ICD9("AST"),^ICD9("ADS") S DIK="^ICD9(" D IXALL^DIK
"RTN","LEX2043P",100,0)
 ;
"RTN","LEX2043P",101,0)
 D MES^XPDUTL("   ICD-9 Operations/Procedure file      #80.1") W !,"   "
"RTN","LEX2043P",102,0)
 S (LEX,DA)=0 F  S DA=$O(^ICD0(DA)) Q:+DA=0  K ^ICD0(DA,66,"B"),^ICD0(DA,67,"B"),^ICD0(DA,68,"B") S LEX=+($G(LEX))+1 W:LEX#120=0 "."
"RTN","LEX2043P",103,0)
 K ^ICD0("AB"),^ICD0("ACT"),^ICD0("ADS"),^ICD0("AST"),^ICD0("BA"),^ICD0("D"),^ICD0("E") S DIK="^ICD0(" D IXALL^DIK
"RTN","LEX2043P",104,0)
 ;
"RTN","LEX2043P",105,0)
 D MES^XPDUTL("   DRG file                             #80.2") W !,"   "
"RTN","LEX2043P",106,0)
 S (LEX,DA)=0 F  S DA=$O(^ICD(DA)) Q:+DA=0  K ^ICD(DA,1,"B"),^ICD(DA,66,"B"),^ICD(DA,68,"B") S LEX=+($G(LEX))+1 W:LEX#120=0 "."
"RTN","LEX2043P",107,0)
 K ^ICD("ADS"),^ICD("B") S DIK="^ICD(" D IXALL^DIK
"RTN","LEX2043P",108,0)
 ;
"RTN","LEX2043P",109,0)
 D MES^XPDUTL("   CPT/HCPCS Procedure/Services file    #81") W !,"   "
"RTN","LEX2043P",110,0)
 S (LEX,DA)=0 F  S DA=$O(^ICPT(DA)) Q:+DA=0  D
"RTN","LEX2043P",111,0)
 . K ^ICPT(DA,60,"B"),^ICPT(DA,61,"B"),^ICPT(DA,62,"B"),^ICPT(DA,"D","B") S LEX=+($G(LEX))+1 W:LEX#120=0 "."
"RTN","LEX2043P",112,0)
 K ^ICPT("ACT"),^ICPT("ADS"),^ICPT("AST"),^ICPT("B"),^ICPT("BA"),^ICPT("C"),^ICPT("D"),^ICPT("E"),^ICPT("F") S DIK="^ICPT(" D IXALL^DIK
"RTN","LEX2043P",113,0)
 ;
"RTN","LEX2043P",114,0)
 D MES^XPDUTL("   CPT Modifier file                    #81.3") W !,"   "
"RTN","LEX2043P",115,0)
 S (LEX,DA)=0 F  S DA=$O(^DIC(81.3,DA)) Q:+DA=0  D
"RTN","LEX2043P",116,0)
 . K ^DIC(81.3,DA,60,"B"),^DIC(81.3,DA,61,"B"),^DIC(81.3,DA,62,"B") S LEX=+($G(LEX))+1 W:LEX#120=0 "."
"RTN","LEX2043P",117,0)
 K ^DIC(81.3,"ACT"),^DIC(81.3,"ADS"),^DIC(81.3,"AST"),^DIC(81.3,"B"),^DIC(81.3,"BA"),^DIC(81.3,"C"),^DIC(81.3,"D"),^DIC(81.3,"M") S DIK="^DIC(81.3," D IXALL^DIK
"RTN","LEX2043P",118,0)
 Q
"RTN","LEX2043P",119,0)
 ;
"RTN","LEX2043P",120,0)
CON ; Conversion of data       (N/A for LEX2043)
"RTN","LEX2043P",121,0)
 Q
"RTN","LEXA")
0^8^B31301237
"RTN","LEXA",1,0)
LEXA ; ISA/FJF/KER-Look-up (Silent) ; 09/06/2006
"RTN","LEXA",2,0)
 ;;2.0;LEXICON UTILITY;**3,4,6,19,25,36,38,43**;Sep 23, 1996;Build 24
"RTN","LEXA",3,0)
 ;
"RTN","LEXA",4,0)
 ; External References
"RTN","LEXA",5,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","LEXA",6,0)
 ;   DBIA 10103  $$DT^XLFDT
"RTN","LEXA",7,0)
 ;   DBIA 10060  ^VA(200,
"RTN","LEXA",8,0)
 ;   DBIA 10016  ^DIM
"RTN","LEXA",9,0)
 ;                   
"RTN","LEXA",10,0)
 ; Look-up  D LOOK^LEXA(LEXX,LEXAP,LEXLL,LEXSUB,lexvdt)
"RTN","LEXA",11,0)
 ;                   
"RTN","LEXA",12,0)
 ;         LEXX      User Input
"RTN","LEXA",13,0)
 ;         LEXAP     Application
"RTN","LEXA",14,0)
 ;         LEXLL     Selection List Length
"RTN","LEXA",15,0)
 ;         LEXSUB    Mode/Subset (file 757.2)
"RTN","LEXA",16,0)
 ;         LEXVDT    Date to use for retrieving/displaying codes
"RTN","LEXA",17,0)
 ;                   
"RTN","LEXA",18,0)
 ; 1.  Search parameters ^TMP("LEXSCH",$J,PAR)=VALUE
"RTN","LEXA",19,0)
 ; 2.  Expressions found ^TMP("LEXFND",$J,FQ,IEN)=DT
"RTN","LEXA",20,0)
 ; 3.  Review List       ^TMP("LEXHITS",$J,#)=IEN^DT
"RTN","LEXA",21,0)
 ; 4.  Display List      LEX("LIST",#)
"RTN","LEXA",22,0)
 ;                   
"RTN","LEXA",23,0)
 ;         LEX("LIST",0)=LAST^TOTAL
"RTN","LEXA",24,0)
 ;         LEX("LIST",#)=IEN^DT
"RTN","LEXA",25,0)
 ;                   
"RTN","LEXA",26,0)
LOOK(LEXX,LEXAP,LEXLL,LEXSUB,LEXVDT) ; Search for LEXX
"RTN","LEXA",27,0)
 I $G(LEXVDT)="" S LEXVDT=$$DT^XLFDT
"RTN","LEXA",28,0)
 I $L($G(^TMP("LEXSCH",$J,"VDT",0))) S LEXVDT=^TMP("LEXSCH",$J,"VDT",0)
"RTN","LEXA",29,0)
 K DIERR,LEX
"RTN","LEXA",30,0)
 K ^TMP("LEXFND",$J),^TMP("LEXHIT",$J)
"RTN","LEXA",31,0)
 K ^TMP("LEXSCH",$J,"EXC"),^TMP("LEXSCH",$J,"EXM")
"RTN","LEXA",32,0)
 K:+$G(^TMP("LEXSCH",$J,"ADF",0))=0 ^TMP("LEXSCH",$J)
"RTN","LEXA",33,0)
 I $D(DIC(0)) D
"RTN","LEXA",34,0)
 .S:DIC(0)["L" DIC(0)=$P(DIC(0),"L",1)_$P(DIC(0),"L",2)
"RTN","LEXA",35,0)
 .S:DIC(0)["I" DIC(0)=$P(DIC(0),"I",1)_$P(DIC(0),"I",2)
"RTN","LEXA",36,0)
 S LEXQ=1,LEXX=$G(LEXX)
"RTN","LEXA",37,0)
 I LEXX=""!(LEXX["^") D EN^LEXAR("^",$G(LEXVDT)) K LEXAP D EXIT Q
"RTN","LEXA",38,0)
 S LEXAP=$$UP^XLFSTR($G(LEXAP))
"RTN","LEXA",39,0)
 S LEXLL=+$G(LEXLL)
"RTN","LEXA",40,0)
 S LEXSUB=$G(LEXSUB)
"RTN","LEXA",41,0)
 S ^TMP("LEXSCH",$J,"APP",0)=+$$AP^LEXDFN2($G(LEXAP))
"RTN","LEXA",42,0)
 S:^TMP("LEXSCH",$J,"APP",0)=0 ^TMP("LEXSCH",$J,"APP",0)=1
"RTN","LEXA",43,0)
 S:LEXSUB="" LEXSUB=^TMP("LEXSCH",$J,"APP",0)
"RTN","LEXA",44,0)
 S:$L($G(DIC("S"))) ^TMP("LEXSCH",$J,"FIL",0)=DIC("S")
"RTN","LEXA",45,0)
 S:LEXLL=0 LEXLL=5
"RTN","LEXA",46,0)
 S ^TMP("LEXSCH",$J,"LEN",0)=LEXLL
"RTN","LEXA",47,0)
X ; Search for X
"RTN","LEXA",48,0)
 I '$L($G(LEXX)) D  D EXIT Q
"RTN","LEXA",49,0)
 .S LEX("ERR",0)=$G(LEX("ERR",0))+1
"RTN","LEXA",50,0)
 .S LEX("ERR",LEX("ERR",0))="User input LEXX missing or invalid"
"RTN","LEXA",51,0)
APP ; Application
"RTN","LEXA",52,0)
 I +$G(^TMP("LEXSCH",$J,"APP",0))=0!('$D(^LEXT(757.2,+$G(^TMP("LEXSCH",$J,"APP",0)),0))) D  D EXIT Q
"RTN","LEXA",53,0)
 .S LEX("ERR",0)=$G(LEX("ERR",0))+1
"RTN","LEXA",54,0)
 .S LEX("ERR",LEX("ERR",0))="Calling application identification LEXAP missing or invalid"
"RTN","LEXA",55,0)
USR ; User
"RTN","LEXA",56,0)
 I +$G(DUZ)=0!('$D(^VA(200,+$G(DUZ),0))) D  D EXIT Q
"RTN","LEXA",57,0)
 .S LEX("ERR",0)=$G(LEX("ERR",0))+1
"RTN","LEXA",58,0)
 .S LEX("ERR",LEX("ERR",0))="User identification DUZ missing or invalid"
"RTN","LEXA",59,0)
 N LEXFND,LEXISCD
"RTN","LEXA",60,0)
 S (LEXFND,LEXISCD)=0
"RTN","LEXA",61,0)
 S ^TMP("LEXSCH",$J,"USR",0)=+$G(DUZ)
"RTN","LEXA",62,0)
 S ^TMP("LEXSCH",$J,"NAR",0)=LEXX
"RTN","LEXA",63,0)
 S ^TMP("LEXSCH",$J,"SCH",0)=$$UP^XLFSTR(LEXX)
"RTN","LEXA",64,0)
DEF ; Defaults                     CONFIG^LEXSET
"RTN","LEXA",65,0)
 N LEXFIL,LEXDSP,LEXFILR S:$L($G(DIC("S"))) LEXFIL=DIC("S")
"RTN","LEXA",66,0)
 I '$L($G(LEXFIL)),$L($G(^TMP("LEXSCH",$J,"FIL",0))) S LEXFIL=^TMP("LEXSCH",$J,"FIL",0)
"RTN","LEXA",67,0)
 N LEXNS,LEXSS
"RTN","LEXA",68,0)
 S LEXNS=$$NS^LEXDFN2(LEXAP)
"RTN","LEXA",69,0)
 S LEXSS=$$MD^LEXDFN2(LEXSUB)
"RTN","LEXA",70,0)
 I +$G(^TMP("LEXSCH",$J,"ADF",0))=0 D CONFIG^LEXSET(LEXNS,LEXSS,$G(LEXVDT))
"RTN","LEXA",71,0)
 I '$L($G(LEXFIL)),$L($G(^TMP("LEXSCH",$J,"FIL",0))) S LEXFIL=^TMP("LEXSCH",$J,"FIL",0)
"RTN","LEXA",72,0)
 S:$L($G(LEXFIL)) LEXFIL=$$FIL(LEXFIL)
"RTN","LEXA",73,0)
 S LEXFIL=$G(LEXFIL)
"RTN","LEXA",74,0)
 K ^TMP("LEXFND",$J),^TMP("LEXHIT",$J)
"RTN","LEXA",75,0)
 D MAN
"RTN","LEXA",76,0)
 I $D(LEX("ERR")) D EXIT Q
"RTN","LEXA",77,0)
 D SETUP^LEXAM($G(^TMP("LEXSCH",$J,"VOC",0)))
"RTN","LEXA",78,0)
 I $D(LEX("ERR")) D EXIT Q
"RTN","LEXA",79,0)
LK ; Look-up
"RTN","LEXA",80,0)
IEN ; Look-up by IEN               ADDL^LEXAL PCH 4
"RTN","LEXA",81,0)
 I ^TMP("LEXSCH",$J,"NAR",0)?1"`"1N.N D  I $D(LEX("LIST")) D EXIT Q
"RTN","LEXA",82,0)
 .N LEXE,LEXUN
"RTN","LEXA",83,0)
 .S LEXE=+$E(^TMP("LEXSCH",$J,"NAR",0),2,$L(^TMP("LEXSCH",$J,"NAR",0))) Q:LEXE=0
"RTN","LEXA",84,0)
 .S LEXUN=+$G(^TMP("LEXSCH",$J,"UNR",0))
"RTN","LEXA",85,0)
 .Q:'$D(^LEX(757.01,LEXE,0))
"RTN","LEXA",86,0)
 .D ADDL^LEXAL(LEXE,$$DES^LEXASC(LEXE),$$SO^LEXASO(LEXE,$G(^TMP("LEXSCH",$J,"DIS",0)),1,$G(LEXVDT)))
"RTN","LEXA",87,0)
 .I $D(^TMP("LEXFND",$J)) D BEG^LEXAL
"RTN","LEXA",88,0)
 .I LEXUN>0,$L($G(^TMP("LEXSCH",$J,"NAR",0))) S LEX("NAR")=$G(^TMP("LEXSCH",$J,"NAR",0))
"RTN","LEXA",89,0)
 .I LEXUN>0,$L($G(^LEX(757.01,+$G(LEXE),0))) S LEX("NAR")=$G(^LEX(757.01,+$G(LEXE),0))
"RTN","LEXA",90,0)
SCT ; Look-up by Shortcuts         EN^LEXASC  
"RTN","LEXA",91,0)
 I +$G(^TMP("LEXSCH",$J,"SCT",0)),$D(^LEX(757.41,^TMP("LEXSCH",$J,"SCT",0))) D
"RTN","LEXA",92,0)
 .S LEXFND=$$EN^LEXASC(^TMP("LEXSCH",$J,"SCH",0),^TMP("LEXSCH",$J,"SCT",0),$G(LEXVDT))
"RTN","LEXA",93,0)
 I +LEXFND D EXIT Q
"RTN","LEXA",94,0)
CODE ; Look-up by Code              EN^LEXABC
"RTN","LEXA",95,0)
 S LEXFND=$$EN^LEXABC(^TMP("LEXSCH",$J,"SCH",0),$G(LEXVDT))
"RTN","LEXA",96,0)
 I +LEXFND D EXIT Q
"RTN","LEXA",97,0)
 I +LEXFND'>0,+($G(LEXISCD))>0 D EXIT Q
"RTN","LEXA",98,0)
 ; if code is found but it is inactive
"RTN","LEXA",99,0)
 ;I +$P(LEXFND,"^",2)'=-1 S LEX=0 D EXIT Q
"RTN","LEXA",100,0)
EXACT ; Look-up Exact Match          EN^LEXAB
"RTN","LEXA",101,0)
 S LEXFND=$$EN^LEXAB(^TMP("LEXSCH",$J,"SCH",0),$G(LEXVDT))
"RTN","LEXA",102,0)
 K:+LEXFND=0 ^TMP("LEXFND",$J)
"RTN","LEXA",103,0)
 K ^TMP("LEXHIT",$J)
"RTN","LEXA",104,0)
KEYWRD ; Look-up by word              EN^LEXALK
"RTN","LEXA",105,0)
 D EN^LEXALK
"RTN","LEXA",106,0)
EXIT ; Clean-up and quit
"RTN","LEXA",107,0)
 K LEXQ,LEXDICS,LEXFIL,LEXFILR,LEXDSP,LEXSHOW,LEXSHCT,LEXSUB
"RTN","LEXA",108,0)
 K LEXOVR,LEXUN,LEXLKFL,LEXLKGL,LEXLKIX,LEXLKSH,LEXTKNS,LEXTKN
"RTN","LEXA",109,0)
 K LEXI
"RTN","LEXA",110,0)
 D:$D(LEX("ERR")) CLN
"RTN","LEXA",111,0)
 I $D(LEX),+$G(LEX)=0,'$D(LEX("LIST")),$L($G(LEXX)) D
"RTN","LEXA",112,0)
 .N LEXC,LEXF,LEXV
"RTN","LEXA",113,0)
 .S LEXC=1
"RTN","LEXA",114,0)
 .S LEXF=$G(^TMP("LEXSCH",$J,"FIL",0))
"RTN","LEXA",115,0)
 .S LEXV=$G(^TMP("LEXSCH",$J,"VOC",0))
"RTN","LEXA",116,0)
 .D:+$G(^TMP("LEXSCH",$J,"UNR",0))>0 EN^LEXAR(LEXX,$G(LEXVDT))
"RTN","LEXA",117,0)
 .S LEX("NAR")=LEXX
"RTN","LEXA",118,0)
 .S LEX=0
"RTN","LEXA",119,0)
 .S LEX("HLP",LEXC)="    A suitable term could not be found based on user input"
"RTN","LEXA",120,0)
 .S:LEXF="I 1" LEXF=""
"RTN","LEXA",121,0)
 .I $L(LEXF)!(LEXV'="WRD") D
"RTN","LEXA",122,0)
 ..S LEX("HLP",LEXC)=$G(LEX("HLP",LEXC))_" and "
"RTN","LEXA",123,0)
 ..S LEXC=LEXC+1
"RTN","LEXA",124,0)
 ..S LEX("HLP",LEXC)="    current user defaults"
"RTN","LEXA",125,0)
 ..S LEX("HLP",0)=LEXC
"RTN","LEXA",126,0)
 .S LEX("HLP",LEXC)=$G(LEX("HLP",LEXC))_"."
"RTN","LEXA",127,0)
 Q
"RTN","LEXA",128,0)
CLN ; Clean
"RTN","LEXA",129,0)
 K LEXQ,LEXTKNS,LEXTKN,LEXI
"RTN","LEXA",130,0)
 K ^TMP("LEXSCH",$J),^TMP("LEXHIT",$J),^TMP("LEXFND",$J)
"RTN","LEXA",131,0)
 Q
"RTN","LEXA",132,0)
CLR ; Clear all (FOR TESTING ONLY)
"RTN","LEXA",133,0)
 K LEX,LEXQ,LEXTKNS,LEXTKN,LEXI
"RTN","LEXA",134,0)
 K ^TMP("LEXSCH"),^TMP("LEXHIT"),^TMP("LEXFND")
"RTN","LEXA",135,0)
 Q
"RTN","LEXA",136,0)
MAN ; Mandatory variables
"RTN","LEXA",137,0)
 N LEXERR
"RTN","LEXA",138,0)
 F LEXERR="SCH","VOC","APP","USR" D
"RTN","LEXA",139,0)
 .I '$L($G(^TMP("LEXSCH",$J,LEXERR,0))) D
"RTN","LEXA",140,0)
 ..S LEX("ERR",0)=$G(LEX("ERR",0))+1
"RTN","LEXA",141,0)
 ..S LEX("ERR",LEX("ERR",0))="Mandatory variable ^TMP(""LEXSCH"",$J,"""_LEXERR_""",0) missing or invalid"
"RTN","LEXA",142,0)
 Q
"RTN","LEXA",143,0)
FIL(X) ; Validate Filter
"RTN","LEXA",144,0)
 S X=$G(X) N DIC
"RTN","LEXA",145,0)
 Q:'$L(X) X
"RTN","LEXA",146,0)
 D ^DIM
"RTN","LEXA",147,0)
 S:'$D(X) X=""
"RTN","LEXA",148,0)
 Q X
"RTN","LEXA",149,0)
 ;                   
"RTN","LEXA",150,0)
 ; D INFO^LEXA(IEN,DATE)
"RTN","LEXA",151,0)
 ;                   
"RTN","LEXA",152,0)
 ;    IEN   Internal Entry Number in file 757.01
"RTN","LEXA",153,0)
 ;    DATE  Optional - retrieves codes active on a specified date
"RTN","LEXA",154,0)
 ;               
"RTN","LEXA",155,0)
 ; Returns array LEX("SEL") or null
"RTN","LEXA",156,0)
 ;                   
"RTN","LEXA",157,0)
 ;    LEX("SEL","EXP")   Expressions Concepts/Synonyms/Variants
"RTN","LEXA",158,0)
 ;    LEX("SEL","SIG")   Expression definition
"RTN","LEXA",159,0)
 ;    LEX("SEL","SRC")   Classification Codes
"RTN","LEXA",160,0)
 ;    LEX("SEL"."STY")   Semantic Class/Semantic Types
"RTN","LEXA",161,0)
 ;    LEX("SEL","VAS")   VA Classification Sources
"RTN","LEXA",162,0)
 ;                   
"RTN","LEXA",163,0)
INFO(X,LEXVDT) ; Get Information about a Term
"RTN","LEXA",164,0)
 K LEX("SEL") S X=+$G(X) Q:X=0  Q:'$D(^LEX(757.01,X,0))
"RTN","LEXA",165,0)
 N LEXD S LEXD=$G(LEXVDT) S:+LEXD'>0 LEXD=$$DT^XLFDT
"RTN","LEXA",166,0)
 N LEXVDT S LEXVDT=LEXD D SET^LEXAR4(X,LEXVDT)
"RTN","LEXA",167,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
ICPT*6.0*30
"BLD",6297,0)
ICPT*6.0*30^CPT/HCPCS CODES^0^3060906^y
"BLD",6297,1,0)
^^2^2^3060808^
"BLD",6297,1,1,0)
Please see the National Patch Module for details of the enhancements
"BLD",6297,1,2,0)
included in this patch.
"BLD",6297,4,0)
^9.64PA^^
"BLD",6297,6.3)
23
"BLD",6297,"KRN",0)
^9.67PA^8989.52^19
"BLD",6297,"KRN",.4,0)
.4
"BLD",6297,"KRN",.401,0)
.401
"BLD",6297,"KRN",.402,0)
.402
"BLD",6297,"KRN",.403,0)
.403
"BLD",6297,"KRN",.5,0)
.5
"BLD",6297,"KRN",.84,0)
.84
"BLD",6297,"KRN",3.6,0)
3.6
"BLD",6297,"KRN",3.8,0)
3.8
"BLD",6297,"KRN",9.2,0)
9.2
"BLD",6297,"KRN",9.8,0)
9.8
"BLD",6297,"KRN",9.8,"NM",0)
^9.68A^3^2
"BLD",6297,"KRN",9.8,"NM",2,0)
ICPTMOD^^0^B68557022
"BLD",6297,"KRN",9.8,"NM",3,0)
ICPTMOD2^^0^B6025453
"BLD",6297,"KRN",9.8,"NM","B","ICPTMOD",2)

"BLD",6297,"KRN",9.8,"NM","B","ICPTMOD2",3)

"BLD",6297,"KRN",19,0)
19
"BLD",6297,"KRN",19.1,0)
19.1
"BLD",6297,"KRN",101,0)
101
"BLD",6297,"KRN",409.61,0)
409.61
"BLD",6297,"KRN",771,0)
771
"BLD",6297,"KRN",870,0)
870
"BLD",6297,"KRN",8989.51,0)
8989.51
"BLD",6297,"KRN",8989.52,0)
8989.52
"BLD",6297,"KRN",8994,0)
8994
"BLD",6297,"KRN","B",.4,.4)

"BLD",6297,"KRN","B",.401,.401)

"BLD",6297,"KRN","B",.402,.402)

"BLD",6297,"KRN","B",.403,.403)

"BLD",6297,"KRN","B",.5,.5)

"BLD",6297,"KRN","B",.84,.84)

"BLD",6297,"KRN","B",3.6,3.6)

"BLD",6297,"KRN","B",3.8,3.8)

"BLD",6297,"KRN","B",9.2,9.2)

"BLD",6297,"KRN","B",9.8,9.8)

"BLD",6297,"KRN","B",19,19)

"BLD",6297,"KRN","B",19.1,19.1)

"BLD",6297,"KRN","B",101,101)

"BLD",6297,"KRN","B",409.61,409.61)

"BLD",6297,"KRN","B",771,771)

"BLD",6297,"KRN","B",870,870)

"BLD",6297,"KRN","B",8989.51,8989.51)

"BLD",6297,"KRN","B",8989.52,8989.52)

"BLD",6297,"KRN","B",8994,8994)

"BLD",6297,"PRET")

"BLD",6297,"QUES",0)
^9.62^^
"BLD",6297,"REQB",0)
^9.611^2^2
"BLD",6297,"REQB",1,0)
ICPT*6.0*19^2
"BLD",6297,"REQB",2,0)
LEX*2.0*30^2
"BLD",6297,"REQB","B","ICPT*6.0*19",1)

"BLD",6297,"REQB","B","LEX*2.0*30",2)

"MBREQ")
0
"PKG",302,-1)
1^1
"PKG",302,0)
CPT/HCPCS CODES^ICPT^ICPT/HCPCS CODES
"PKG",302,20,0)
^9.402P^^
"PKG",302,22,0)
^9.49I^1^1
"PKG",302,22,1,0)
6.0^2970519^2970519^1118
"PKG",302,22,1,"PAH",1,0)
30^3060906^1118
"PKG",302,22,1,"PAH",1,1,0)
^^2^2^3060906
"PKG",302,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements
"PKG",302,22,1,"PAH",1,1,2,0)
included in this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ICPTMOD")
0^2^B68557022
"RTN","ICPTMOD",1,0)
ICPTMOD ; ALB/DEK/KER - CPT MODIFIER APIS ; 09/06/2006
"RTN","ICPTMOD",2,0)
 ;;6.0;CPT/HCPCS;**6,12,13,14,19,30**;May 19, 1997;Build 23
"RTN","ICPTMOD",3,0)
 ;
"RTN","ICPTMOD",4,0)
 ; External References
"RTN","ICPTMOD",5,0)
 ;   DBIA  10103  $$DT^XLFDT
"RTN","ICPTMOD",6,0)
 ;
"RTN","ICPTMOD",7,0)
 Q
"RTN","ICPTMOD",8,0)
MOD(MOD,MFT,MDT,SRC,DFN) ;  returns basic info on CPT MODIFIERs
"RTN","ICPTMOD",9,0)
 ;
"RTN","ICPTMOD",10,0)
 ; Input:   MOD   Modifier, Internal or External (Required)
"RTN","ICPTMOD",11,0)
 ;          MFT   Modifier Format  "I" = IEN  "E" = .01 field (Default)
"RTN","ICPTMOD",12,0)
 ;          MDT   Version Date, FileMan format (default = TODAY)
"RTN","ICPTMOD",13,0)
 ;          SRC   Source Screen
"RTN","ICPTMOD",14,0)
 ;                  If 0 or Null, Level I and II only
"RTN","ICPTMOD",15,0)
 ;                  If >0, Level I, II, and III
"RTN","ICPTMOD",16,0)
 ;          DFN   Not used
"RTN","ICPTMOD",17,0)
 ; 
"RTN","ICPTMOD",18,0)
 ; Output:  Returns a 10 piece string delimited by the up-arrow (^)
"RTN","ICPTMOD",19,0)
 ; 
"RTN","ICPTMOD",20,0)
 ;            1  IEN
"RTN","ICPTMOD",21,0)
 ;            2  Modifier (0;1)
"RTN","ICPTMOD",22,0)
 ;            3  Versioned Name (61, 0;1)
"RTN","ICPTMOD",23,0)
 ;            4  Code (0;3)
"RTN","ICPTMOD",24,0)
 ;            5  Source (0;4)
"RTN","ICPTMOD",25,0)
 ;            6  Effective Date (60, 0;1)
"RTN","ICPTMOD",26,0)
 ;            7  Status (60, 0;2) 0:inactive; 1:active
"RTN","ICPTMOD",27,0)
 ;            8  Inactivation Date (60, 0;1)
"RTN","ICPTMOD",28,0)
 ;            9  Activation Date (60, 0;1)
"RTN","ICPTMOD",29,0)
 ;           10  Message
"RTN","ICPTMOD",30,0)
 ;        or 
"RTN","ICPTMOD",31,0)
 ;           -1^Error
"RTN","ICPTMOD",32,0)
 ; 
"RTN","ICPTMOD",33,0)
 N DATA,EFF,EFFX,EFFS,STR,MODN,MODST
"RTN","ICPTMOD",34,0)
 I $G(MOD)="" S STR="-1^NO MODIFIER SELECTED" G MODQ
"RTN","ICPTMOD",35,0)
 I $G(MFT)="" S MFT="E"
"RTN","ICPTMOD",36,0)
 I "E^I"'[MFT S STR="-1^INVALID MODIFIER FORMAT" G MODQ
"RTN","ICPTMOD",37,0)
 S MDT=$S($G(MDT)="":$$DT^XLFDT,1:$$DTBR^ICPTSUPT(MDT))
"RTN","ICPTMOD",38,0)
 I MFT="E" S MODN=$O(^DIC(81.3,"B",MOD,0)) I $O(^(MODN)) S STR="-1^Multiple modifiers w/same name.  Select IEN: " D MULT G MODQ
"RTN","ICPTMOD",39,0)
 I MFT="E" S MOD=MODN
"RTN","ICPTMOD",40,0)
 S MOD=+MOD
"RTN","ICPTMOD",41,0)
 I 'MOD!'$D(^DIC(81.3,MOD)) S STR="-1^NO SUCH MODIFIER" G MODQ
"RTN","ICPTMOD",42,0)
 S DATA=$G(^DIC(81.3,MOD,0))
"RTN","ICPTMOD",43,0)
 S MODST=$$VSTCM(MOD,MDT)
"RTN","ICPTMOD",44,0)
 I '$L(DATA) S STR="-1^NO DATA" G MODQ
"RTN","ICPTMOD",45,0)
 S STR=MOD_"^"_$P(DATA,"^",1,4)
"RTN","ICPTMOD",46,0)
 I '$G(SRC),$P(STR,"^",5)="V" Q "-1^VA LOCAL MODIFIER SELECTED"
"RTN","ICPTMOD",47,0)
 S EFF=$$EFF^ICPTSUPT(81.3,MOD,MDT)
"RTN","ICPTMOD",48,0)
 I EFF<1 S $P(EFF,"^",2)=0
"RTN","ICPTMOD",49,0)
 S STR=STR_"^"_EFF_"^"_$$MSG^ICPTSUPT(MDT)
"RTN","ICPTMOD",50,0)
 S:$L(MODST) $P(STR,"^",3)=MODST
"RTN","ICPTMOD",51,0)
MODQ Q STR
"RTN","ICPTMOD",52,0)
 ;
"RTN","ICPTMOD",53,0)
MODD(CODE,OUTARR,DFN,CDT)       ; returns CPT description in array
"RTN","ICPTMOD",54,0)
 ;
"RTN","ICPTMOD",55,0)
 ; Input:   CODE   CPT Modifier code, internal or external (Required)
"RTN","ICPTMOD",56,0)
 ;          ARY    Output Array Name
"RTN","ICPTMOD",57,0)
 ;                   e.g. "ABC" or "ABC("TEST")" 
"RTN","ICPTMOD",58,0)
 ;                   Default = ^TMP("ICPTD",$J)
"RTN","ICPTMOD",59,0)
 ;          DFN    Not used
"RTN","ICPTMOD",60,0)
 ;          CDT    Versioning Date (default = TODAY)
"RTN","ICPTMOD",61,0)
 ;                   If CDT is prior to 1/1/1989, 1/1/1989 will be used
"RTN","ICPTMOD",62,0)
 ;                   If CDT is year only, the first of that year will be used
"RTN","ICPTMOD",63,0)
 ;                   If CDT is month/year only, the first of month will be used
"RTN","ICPTMOD",64,0)
 ;                   If CDT is later than today, TODAY will be used
"RTN","ICPTMOD",65,0)
 ; 
"RTN","ICPTMOD",66,0)
 ; Output:  #      Number of lines in description
"RTN","ICPTMOD",67,0)
 ; 
"RTN","ICPTMOD",68,0)
 ;          @ARY(1:n) - Versioned Description (from the 62 multiple)
"RTN","ICPTMOD",69,0)
 ;          @ARY(n+1) - blank
"RTN","ICPTMOD",70,0)
 ;          @ARY(n+1) - a message stating: CODE TEXT MAY BE INACCURATE
"RTN","ICPTMOD",71,0)
 ;      or
"RTN","ICPTMOD",72,0)
 ;          -1^Error
"RTN","ICPTMOD",73,0)
 ; 
"RTN","ICPTMOD",74,0)
 ;  ** User must initialize ^TMP("ICPTD",$J), if used **
"RTN","ICPTMOD",75,0)
 ; 
"RTN","ICPTMOD",76,0)
 N ARR,END,CTV,I,N
"RTN","ICPTMOD",77,0)
 I $G(CODE)="" S N="-1^NO CODE SELECTED" G MODDQ
"RTN","ICPTMOD",78,0)
 I $G(OUTARR)="" S OUTARR="^TMP(""ICPTD"",$J,"
"RTN","ICPTMOD",79,0)
 I OUTARR'["(" S OUTARR=OUTARR_"("
"RTN","ICPTMOD",80,0)
 I OUTARR[")" S OUTARR=$P(OUTARR,")")
"RTN","ICPTMOD",81,0)
 S END=$E(OUTARR,$L(OUTARR)) I END'="("&(END'=",") S OUTARR=OUTARR_","
"RTN","ICPTMOD",82,0)
 I OUTARR="^TMP(""ICPTD"",$J," K ^TMP("ICPTD",$J)
"RTN","ICPTMOD",83,0)
 S CODE=$S(CODE?1.N:+CODE,1:$$CODEN(CODE)),I=0,N=0
"RTN","ICPTMOD",84,0)
 I CODE<1!'$D(^DIC(81.3,CODE)) S N="-1^NO SUCH CODE" G MODDQ
"RTN","ICPTMOD",85,0)
 S CDT=$S($G(CDT)="":$$DT^XLFDT,1:$$DTBR^ICPTSUPT(CDT))
"RTN","ICPTMOD",86,0)
 D VLTCM(+CODE,CDT,.CTV)
"RTN","ICPTMOD",87,0)
 S (N,I)=0 F  S I=$O(CTV(I)) Q:+I=0  D
"RTN","ICPTMOD",88,0)
 . S N=N+1,ARR=OUTARR_N_")",@ARR=$$TRIM($G(CTV(I)))
"RTN","ICPTMOD",89,0)
 I +N>0 D
"RTN","ICPTMOD",90,0)
 . S N=N+1,ARR=OUTARR_N_")",@ARR=" "
"RTN","ICPTMOD",91,0)
 . S N=N+1,ARR=OUTARR_N_")",@ARR=$$MSG^ICPTSUPT(CDT,1)
"RTN","ICPTMOD",92,0)
 I +N'>0 S N="-1^VERSIONED DESCRIPTION NOT FOUND FOR MODIFIER "_$P($G(^DIC(81.3,+CODE,0)),"^",1)
"RTN","ICPTMOD",93,0)
MODDQ Q N
"RTN","ICPTMOD",94,0)
 ;
"RTN","ICPTMOD",95,0)
MODA(CODE,VDT,ARY) ; Return an array of Modifiers for a CPT Code
"RTN","ICPTMOD",96,0)
 D MODA^ICPTMOD2 Q
"RTN","ICPTMOD",97,0)
 ;
"RTN","ICPTMOD",98,0)
MODP(CODE,MOD,MFT,MDT,SRC,DFN) ;  Check if modifier can be used with code
"RTN","ICPTMOD",99,0)
 ;
"RTN","ICPTMOD",100,0)
 ; Input:
"RTN","ICPTMOD",101,0)
 ; 
"RTN","ICPTMOD",102,0)
 ;    CODE   CPT/HCPCS Code ?7N / ?1A4N / ?4N1A
"RTN","ICPTMOD",103,0)
 ;    MOD    Modifier (External or Internal)
"RTN","ICPTMOD",104,0)
 ;    MFT    Modifier Format "E" - or "I"
"RTN","ICPTMOD",105,0)
 ;    VDT    Date service provided
"RTN","ICPTMOD",106,0)
 ;    SRC    Source Screen
"RTN","ICPTMOD",107,0)
 ;               If 0 or Null, Level I and II modifiers
"RTN","ICPTMOD",108,0)
 ;               If >0, Level I, II, and III modifiers
"RTN","ICPTMOD",109,0)
 ; Output:
"RTN","ICPTMOD",110,0)
 ;
"RTN","ICPTMOD",111,0)
 ;    If pair is acceptable - Positive 7 Piece "^" Delimited String
"RTN","ICPTMOD",112,0)
 ;        
"RTN","ICPTMOD",113,0)
 ;        1 - IEN of CPT Modifier
"RTN","ICPTMOD",114,0)
 ;        2 - Versioned Short Text
"RTN","ICPTMOD",115,0)
 ;        3 - Beginning Code for Code Range
"RTN","ICPTMOD",116,0)
 ;        4 - Ending Code for Code Range
"RTN","ICPTMOD",117,0)
 ;        5 - Code Range Activaiton Date
"RTN","ICPTMOD",118,0)
 ;        6 - Code Range Inactivation Date
"RTN","ICPTMOD",119,0)
 ;        7 - Modifier Identifier
"RTN","ICPTMOD",120,0)
 ;        
"RTN","ICPTMOD",121,0)
 ;    If pair is unacceptable
"RTN","ICPTMOD",122,0)
 ;    
"RTN","ICPTMOD",123,0)
 ;        0
"RTN","ICPTMOD",124,0)
 ;  
"RTN","ICPTMOD",125,0)
 N ACD,ADT,BEGA,BEGR,CDT,CODEA,CPTS,ENDA,ENDR,ICD,IDT,MIEN,MODEFF,MODI,MODNM,MODST,NEXT,NN,ND,PR,PRN,RIEN,SIEN,SRC,STA,STI,STX,TA,TEFF,TI,TIEN,VDT
"RTN","ICPTMOD",126,0)
 S:$G(MFT)="" MFT="E" Q:"^E^I^"'[("^"_MFT_"^") "-1^Invalid Modifier Format"
"RTN","ICPTMOD",127,0)
 S VDT=$P($G(MDT),".",1) Q:+VDT'>0!(VDT'?7N) "-1^Invalid Date"
"RTN","ICPTMOD",128,0)
 I MFT="E" D  I +($G(MIEN))'>0 Q "-1^Multiple Modifiers with the same name, use IEN"
"RTN","ICPTMOD",129,0)
 . S MIEN=0 S (TIEN,TI)=0 F  S TIEN=$O(^DIC(81.3,"B",MOD,TIEN)) Q:+TIEN'>0  D
"RTN","ICPTMOD",130,0)
 . . S TEFF=$$EFF^ICPTSUPT(81.3,TIEN,VDT) Q:'$P(TEFF,"^",2)
"RTN","ICPTMOD",131,0)
 . . S TI=TI+1,TA(TI)=TIEN,TA(0)=TI
"RTN","ICPTMOD",132,0)
 . S:+($G(TA(0)))=1 MIEN=+($G(TA(1)))
"RTN","ICPTMOD",133,0)
 S:MFT="I" MIEN=+MOD S CODE=$G(CODE)
"RTN","ICPTMOD",134,0)
 S CODN=$S(CODE?1.N:+CODE,1:$$CODEN^ICPTCOD(CODE))
"RTN","ICPTMOD",135,0)
 I CODN<1!'$D(^ICPT(CODN,0)) Q "-1^NO SUCH CPT CODE"
"RTN","ICPTMOD",136,0)
 S CODE=$P($G(^ICPT(CODN,0)),"^") I '$L(CODE) Q:"-1^NO SUCH CPT CODE "
"RTN","ICPTMOD",137,0)
 Q:$L(CODE)'=5 "-1^Invalid Code"
"RTN","ICPTMOD",138,0)
 S CODEA=$S(CODE?1N.4N:+CODE,CODE?4N1A:$A($E(CODE,5))*10_$E(CODE,1,4),1:$A(CODE)_$E(CODE,2,5)) Q:+CODEA'>0 "-1^Invalid Code Source"
"RTN","ICPTMOD",139,0)
 S MIEN=$G(MIEN) Q:+MIEN'>0 "-1^Invalid Modifier"
"RTN","ICPTMOD",140,0)
 S SRC=+($G(SRC)) S SRC=$S(+SRC>0:1,1:0)
"RTN","ICPTMOD",141,0)
 S SIEN=$O(^ICPT("BA",(CODE_" "),0)) Q:+SIEN'>0 "-3^Invalid Code"
"RTN","ICPTMOD",142,0)
 S CPTS=$P($G(^ICPT(+SIEN,0)),"^",6)  Q:CPTS="L"&(SRC'>0) "-1^Invalid Code Source"
"RTN","ICPTMOD",143,0)
 S MODEFF=$$EFF^ICPTSUPT(81.3,MIEN,VDT) Q:'$P(MODEFF,"^",2) "-1^Modifier Inactive"
"RTN","ICPTMOD",144,0)
 S MODNM=$P($G(^DIC(81.3,MIEN,0)),"^",2) Q:'$L(MODNM) "-1^Invalid Modifier Name"
"RTN","ICPTMOD",145,0)
 S MODI=$P($G(^DIC(81.3,MIEN,0)),"^",1) Q:'$L(MODI) "-1^Invalid Modifier ID"
"RTN","ICPTMOD",146,0)
 S MODST=$$VSTCM^ICPTMOD(MIEN,VDT) K STX S (STA,STI)=0 S CDT=($$DTBR^ICPTSUPT(VDT))+.001
"RTN","ICPTMOD",147,0)
 S RIEN=0 F  S RIEN=$O(^DIC(81.3,MIEN,10,RIEN)) Q:+RIEN'>0  D
"RTN","ICPTMOD",148,0)
 . S ND=$G(^DIC(81.3,MIEN,10,RIEN,0))
"RTN","ICPTMOD",149,0)
 . S BEGR=$P(ND,"^",1),BEGA=$S(BEGR?1N.4N:+BEGR,BEGR?4N1A:$A($E(BEGR,5))*10_$E(BEGR,1,4),1:$A(BEGR)_$E(BEGR,2,5)) Q:CODEA<BEGA
"RTN","ICPTMOD",150,0)
 . S ENDR=$P(ND,"^",2),ENDA=$S(ENDR?1N.4N:+ENDR,ENDR?4N1A:$A($E(ENDR,5))*10_$E(ENDR,1,4),1:$A(ENDR)_$E(ENDR,2,5)) Q:CODEA>ENDA
"RTN","ICPTMOD",151,0)
 . S (ACD,ADT)=$P(ND,"^",3),(ICD,IDT)=$P(ND,"^",4) S:ADT="" ADT=2890101 S:'$L(IDT) IDT=$$FMADD^XLFDT($$DT^XLFDT,365)
"RTN","ICPTMOD",152,0)
 . S NN="^DIC(81.3,"_MIEN_",10,"_RIEN_",0)"
"RTN","ICPTMOD",153,0)
 . S STA=+($G(STA))+1,STX(STA)=MIEN_"^"_MODST_"^"_BEGR_"^"_ENDR_"^"_ADT_"^"_ICD_"^"_MODI,STX("B",+ADT,+STA)=""
"RTN","ICPTMOD",154,0)
 S ADT=$O(STX("B",+CDT),-1),STA=$O(STX("B",+ADT," "),-1),MOD=$G(STX(+STA)) Q:+MOD'>0 "0"
"RTN","ICPTMOD",155,0)
 Q MOD
"RTN","ICPTMOD",156,0)
 ;
"RTN","ICPTMOD",157,0)
MODC(MOD) ; Checks modifier for range including code
"RTN","ICPTMOD",158,0)
 D MODC^ICPTMOD2($G(MOD))
"RTN","ICPTMOD",159,0)
 Q
"RTN","ICPTMOD",160,0)
 ;
"RTN","ICPTMOD",161,0)
MULT ; Finds Duplicate Modifiers
"RTN","ICPTMOD",162,0)
 D MULT^ICPTMOD2 Q
"RTN","ICPTMOD",163,0)
 ;
"RTN","ICPTMOD",164,0)
CODEN(CODE)    ; Return the IEN of a CPT modifier
"RTN","ICPTMOD",165,0)
 ;   Input:  CPT modifier code
"RTN","ICPTMOD",166,0)
 ;  Output:  IEN
"RTN","ICPTMOD",167,0)
 ;
"RTN","ICPTMOD",168,0)
 Q:$G(CODE)="" -1
"RTN","ICPTMOD",169,0)
 N COD S COD=+$O(^DIC(81.3,"BA",(CODE_" "),0))
"RTN","ICPTMOD",170,0)
 Q $S(COD>0:COD,1:-1)
"RTN","ICPTMOD",171,0)
 ;
"RTN","ICPTMOD",172,0)
VSTCM(IEN,VDATE) ; Versioned Short Text (CPT Modifier)
"RTN","ICPTMOD",173,0)
 N CPT0,CPTC,CPTI,CPTSTD,CPTSTI,CPTVDT,CPTTXT,CPTTD,CPTTI
"RTN","ICPTMOD",174,0)
 S CPTI=+($G(IEN)) Q:+CPTI'>0 ""  Q:'$D(^DIC(81.3,+CPTI)) ""
"RTN","ICPTMOD",175,0)
 S CPTVDT=$G(VDATE) S:'$L(CPTVDT)!(+CPTVDT'>0) CPTVDT=$$DT^XLFDT Q:$P(CPTVDT,".",1)'?7N ""
"RTN","ICPTMOD",176,0)
 S CPT0=$G(^DIC(81.3,+CPTI,0)),CPTC=$P(CPT0,"^",1) Q:'$L(CPTC) ""
"RTN","ICPTMOD",177,0)
 S CPTSTD=0 S CPTTD=CPTVDT+.000001 F  S CPTTD=$O(^DIC(81.3,"AST",(CPTC_" "),CPTTD),-1) Q:+CPTTD=0  Q:+CPTSTD>0  D
"RTN","ICPTMOD",178,0)
 . S CPTTI=$O(^DIC(81.3,"AST",(CPTC_" "),CPTTD," "),-1) S:CPTTI=CPTI CPTSTD=CPTTD
"RTN","ICPTMOD",179,0)
 I +CPTSTD>0 D  Q:$L($G(CPTTXT)) $G(CPTTXT)
"RTN","ICPTMOD",180,0)
 . S CPTSTI=$O(^DIC(81.3,"AST",(CPTC_" "),CPTSTD,+CPTI," "),-1),CPTTXT=$P($G(^DIC(81.3,+CPTI,61,+CPTSTI,0)),"^",2)
"RTN","ICPTMOD",181,0)
 S CPTSTD=$O(^DIC(81.3,+CPTI,61,"B",0)) I +CPTSTD>0 D  Q:$L($G(CPTTXT)) $G(CPTTXT)
"RTN","ICPTMOD",182,0)
 . S CPTSTI=$O(^DIC(81.3,+CPTI,61,"B",CPTSTD,0)),CPTTXT=$P($G(^DIC(81.3,+CPTI,61,+CPTSTI,0)),"^",2)
"RTN","ICPTMOD",183,0)
 Q $$TRIM($P(CPT0,"^",2))
"RTN","ICPTMOD",184,0)
VLTCM(IEN,VDATE,ARY) ; Versioned Description - Long Text (CPT Modifier)
"RTN","ICPTMOD",185,0)
 N CPT0,CPTC,CPTD,CPTI,CPTSTD,CPTSTI,CPTT,CPTVDT,CPTTXT,CPTTD,CPTTI
"RTN","ICPTMOD",186,0)
 S CPTI=+($G(IEN)) Q:+CPTI'>0  Q:'$D(^DIC(81.3,+CPTI))
"RTN","ICPTMOD",187,0)
 S CPTVDT=$G(VDATE) S:'$L(CPTVDT)!(+CPTVDT'>0) CPTVDT=$$DT^XLFDT Q:$P(CPTVDT,".",1)'?7N
"RTN","ICPTMOD",188,0)
 S CPT0=$G(^DIC(81.3,+CPTI,0)),CPTC=$P(CPT0,"^",1) Q:'$L(CPTC)
"RTN","ICPTMOD",189,0)
 S CPTSTD=0 S CPTTD=CPTVDT+.000001 F  S CPTTD=$O(^DIC(81.3,"ADS",(CPTC_" "),CPTTD),-1) Q:+CPTTD=0  Q:+CPTSTD>0  D
"RTN","ICPTMOD",190,0)
 . S CPTTI=$O(^DIC(81.3,"ADS",(CPTC_" "),CPTTD," "),-1) S:CPTTI=CPTI CPTSTD=CPTTD
"RTN","ICPTMOD",191,0)
 I +CPTSTD>0 D  Q:+($O(ARY(0)))>0
"RTN","ICPTMOD",192,0)
 . S CPTSTI=$O(^DIC(81.3,"ADS",(CPTC_" "),CPTSTD,+CPTI," "),-1)
"RTN","ICPTMOD",193,0)
 . S (CPTD,CPTT)=0 F  S CPTD=$O(^DIC(81.3,+CPTI,62,CPTSTI,1,CPTD)) Q:+CPTD=0  D
"RTN","ICPTMOD",194,0)
 . . S CPTT=CPTT+1,ARY(CPTT)=$$TRIM($G(^DIC(81.3,+CPTI,62,+CPTSTI,1,+CPTD,0))),ARY(0)=CPTT
"RTN","ICPTMOD",195,0)
 S CPTSTD=$O(^DIC(81.3,+CPTI,62,"B",0)) I +CPTSTD>0 D  Q:+($O(ARY(0)))>0
"RTN","ICPTMOD",196,0)
 . S CPTSTI=$O(^DIC(81.3,+CPTI,62,"B",CPTSTD,0))
"RTN","ICPTMOD",197,0)
 . S (CPTD,CPTT)=0 F  S CPTD=$O(^DIC(81.3,+CPTI,62,CPTSTI,1,CPTD)) Q:+CPTD=0  D
"RTN","ICPTMOD",198,0)
 . . S CPTT=CPTT+1,ARY(CPTT)=$$TRIM($G(^DIC(81.3,+CPTI,62,+CPTSTI,1,+CPTD,0))),ARY(0)=CPTT
"RTN","ICPTMOD",199,0)
 K ARY S (CPTD,CPTT)=0 F  S CPTD=$O(^DIC(81.3,CPTI,"D",CPTD)) Q:+CPTD=0  D
"RTN","ICPTMOD",200,0)
 . S CPTT=CPTT+1,ARY(CPTT)=$$TRIM($G(^DIC(81.3,CPTI,"D",CPTD,0))),ARY(0)=CPTT
"RTN","ICPTMOD",201,0)
 Q
"RTN","ICPTMOD",202,0)
TRIM(X) ; Trim Spaces
"RTN","ICPTMOD",203,0)
 S X=$G(X) Q:X="" X F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","ICPTMOD",204,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","ICPTMOD",205,0)
 F  Q:X'["  "  S X=$P(X,"  ",1)_" "_$P(X,"  ",2,229)
"RTN","ICPTMOD",206,0)
 Q X
"RTN","ICPTMOD",207,0)
MO(X) ; Modifier             X = Modifier IEN
"RTN","ICPTMOD",208,0)
 Q $P($G(^DIC(81.3,+($G(X)),0)),"^",1)
"RTN","ICPTMOD2")
0^3^B6025453
"RTN","ICPTMOD2",1,0)
ICPTMOD2 ; ALB/DEK/KER - CPT MODIFIER APIS ; 09/06/2006
"RTN","ICPTMOD2",2,0)
 ;;6.0;CPT/HCPCS;**30**;May 19, 1997;Build 23
"RTN","ICPTMOD2",3,0)
 ;
"RTN","ICPTMOD2",4,0)
 ; External References
"RTN","ICPTMOD2",5,0)
 ;   DBIA  10103  $$DT^XLFDT
"RTN","ICPTMOD2",6,0)
 ;
"RTN","ICPTMOD2",7,0)
 Q
"RTN","ICPTMOD2",8,0)
MODA ; Create an array of Modifiers for a CPT Code
"RTN","ICPTMOD2",9,0)
 ;
"RTN","ICPTMOD2",10,0)
 ; Input
"RTN","ICPTMOD2",11,0)
 ;     
"RTN","ICPTMOD2",12,0)
 ;     CODE   CPT/HCPCS Code   ?7N / ?1A4N / ?4N1A
"RTN","ICPTMOD2",13,0)
 ;     VDT    Versioning Date (date service provided)
"RTN","ICPTMOD2",14,0)
 ;     .ARY   Name of a Local Array passed by value
"RTN","ICPTMOD2",15,0)
 ; 
"RTN","ICPTMOD2",16,0)
 ; Output
"RTN","ICPTMOD2",17,0)
 ; 
"RTN","ICPTMOD2",18,0)
 ;    ARY    Only returns Active Modifiers
"RTN","ICPTMOD2",19,0)
 ;    ARY(0) = 4 Piece String
"RTN","ICPTMOD2",20,0)
 ;           4 Piece String
"RTN","ICPTMOD2",21,0)
 ;           1   # of Modifiers found for code CODE (input)
"RTN","ICPTMOD2",22,0)
 ;           2   # of Modifiers w/Active Ranges
"RTN","ICPTMOD2",23,0)
 ;           3   # of Modifiers w/Inactive Ranges
"RTN","ICPTMOD2",24,0)
 ;           4   Code
"RTN","ICPTMOD2",25,0)
 ;                  
"RTN","ICPTMOD2",26,0)
 ;    ARY(ST,MOD) = 8 Piece Output String
"RTN","ICPTMOD2",27,0)
 ;    
"RTN","ICPTMOD2",28,0)
 ;      ST   Status A=Active I=Inactive
"RTN","ICPTMOD2",29,0)
 ;      MOD  Modifier (external format)
"RTN","ICPTMOD2",30,0)
 ;           8 Piece String
"RTN","ICPTMOD2",31,0)
 ;           1   IEN of Modifier
"RTN","ICPTMOD2",32,0)
 ;           2   Versioned Short Text (name)
"RTN","ICPTMOD2",33,0)
 ;           3   Activation date of Modifier
"RTN","ICPTMOD2",34,0)
 ;           4   Beginning Range Code
"RTN","ICPTMOD2",35,0)
 ;           5   Ending Range Code
"RTN","ICPTMOD2",36,0)
 ;           6   Activation Date of Range
"RTN","ICPTMOD2",37,0)
 ;           7   Inactivation Date of Range
"RTN","ICPTMOD2",38,0)
 ;           8   Modifier Identifier
"RTN","ICPTMOD2",39,0)
 ;                    
"RTN","ICPTMOD2",40,0)
 N A,EFF,I,ID,MIEN,MOD,SRC,ST,X K ARY
"RTN","ICPTMOD2",41,0)
 S CODE=$G(CODE) Q:'$D(^ICPT("BA",(CODE_" ")))
"RTN","ICPTMOD2",42,0)
 S VDT=$G(VDT) S:+VDT'>0 VDT=$$DT^XLFDT Q:VDT'?7N
"RTN","ICPTMOD2",43,0)
 S SRC=3,MIEN=0 F  S MIEN=$O(^DIC(81.3,MIEN)) Q:+MIEN'>0  D
"RTN","ICPTMOD2",44,0)
 . S (EFF,ST)=$O(^DIC(81.3,MIEN,60,"B"," "),-1) Q:ST'>0  S ST=$O(^DIC(81.3,MIEN,60,"B",ST," "),-1) Q:ST'>0  S ST=$P($G(^DIC(81.3,MIEN,60,ST,0)),"^",2) Q:ST'>0
"RTN","ICPTMOD2",45,0)
 . S MOD=$P($G(^DIC(81.3,MIEN,0)),"^",1) Q:'$L(MOD)
"RTN","ICPTMOD2",46,0)
 . S X=$$MODP^ICPTMOD(CODE,MIEN,"I",VDT,0) S ID=$P(X,"^",6) S ID=$S(+ID>0:"I",1:"A")
"RTN","ICPTMOD2",47,0)
 . S:+X>0 ARY(ID,MOD)=$P(X,"^",1,2)_"^"_EFF_"^"_$P(X,"^",3,7)
"RTN","ICPTMOD2",48,0)
 S (A,I)=0,ST="" F  S ST=$O(ARY(ST)) Q:ST=""  S MOD="" F  S MOD=$O(ARY(ST,MOD)) Q:MOD=""  S:ST="A" A=A+1 S:ST="I" I=I+1
"RTN","ICPTMOD2",49,0)
 S ST=A+I,ARY(0)=ST_"^"_A_"^"_I_"^"_CODE
"RTN","ICPTMOD2",50,0)
 Q
"RTN","ICPTMOD2",51,0)
 ;
"RTN","ICPTMOD2",52,0)
MODC(MOD) ; Checks modifier for range including code, and active for date desired
"RTN","ICPTMOD2",53,0)
 ;
"RTN","ICPTMOD2",54,0)
 ; Input:
"RTN","ICPTMOD2",55,0)
 ;    MOD  - modifier ien
"RTN","ICPTMOD2",56,0)
 ;
"RTN","ICPTMOD2",57,0)
 N MODNM,MODEFF
"RTN","ICPTMOD2",58,0)
 S MODEFF=$$EFF^ICPTSUPT(81.3,MOD,MDT)
"RTN","ICPTMOD2",59,0)
 I '$P(MODEFF,"^",2) S STR="-1^modifier inactive" Q
"RTN","ICPTMOD2",60,0)
 S PR=CODEA_.0001,PR=$O(^DIC(81.3,MOD,"M",PR),-1)
"RTN","ICPTMOD2",61,0)
 I 'PR S STR=0 Q
"RTN","ICPTMOD2",62,0)
 S PRN=^DIC(81.3,MOD,"M",PR)
"RTN","ICPTMOD2",63,0)
 I 'PRN S STR="-1^bad modifier file entry" Q
"RTN","ICPTMOD2",64,0)
 I PRN<CODEA S STR=0 Q
"RTN","ICPTMOD2",65,0)
 S MODNM=$P($G(^DIC(81.3,MOD,0)),"^",2)
"RTN","ICPTMOD2",66,0)
 S STR=MOD_"^"_MODNM
"RTN","ICPTMOD2",67,0)
 Q
"RTN","ICPTMOD2",68,0)
 ;
"RTN","ICPTMOD2",69,0)
MULT ; Finds iens for all modifiers with same 2-letter code
"RTN","ICPTMOD2",70,0)
 ;  MOD = .01, check B x-ref for other mods with equivalent .01 fields
"RTN","ICPTMOD2",71,0)
 ;  output concatenates ien of each mod to STR, separated by ":"
"RTN","ICPTMOD2",72,0)
 F MODN=0:0 S MODN=$O(^DIC(81.3,"B",MOD,MODN)) Q:'MODN   S STR=STR_MODN_"; "
"RTN","ICPTMOD2",73,0)
 Q
"VER")
8.0^22.0
**END**
**END**
