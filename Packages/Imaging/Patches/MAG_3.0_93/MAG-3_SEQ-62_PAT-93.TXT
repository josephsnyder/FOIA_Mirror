
=============================================================================
Run Date: FEB 11, 2010                     Designation: MAG*3*93
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #62                      Status: Released
                  Compliance Date: MAR 19, 2010
=============================================================================

Associated patches: (v)MAG*3*51    <<= must be installed BEFORE `MAG*3*93'
                    (v)MAG*3*72    <<= must be installed BEFORE `MAG*3*93'
                    (v)MAG*3*95    <<= must be installed BEFORE `MAG*3*93'
                    (v)MAG*3*96    <<= must be installed BEFORE `MAG*3*93'

Subject: CLINICAL DISPLAY MAINTENANCE II

Category: 
  - Routine

Description:
============

 This document describes VistA Imaging Clinical Display Maintenance
  MAG*3.0*93.  Changes include:
  
 * Patient Safety Issue referenced in Remedy Ticket 310711 (PSPO #1473) 
   has been fixed in this patch. Added a change to check both ICN and SSN,
   if either are valid and if they were the image would be displayed.
 * an improved Image List window;
 * a new image index edit utility;
 * a new verification tool for captured images;
 * improvements to image filters;
 * usability improvements;
 * a new "controlled image  marker that can be used to mask image 
   abstracts;
 * implemented  TIU business rules for images associated with TIU Notes;
 * Improved Remote Image Views by using VistA Imaging Exchange (VIX) 
   service (if installed at site).
  
 Details of these changes are listed in the MAG*3.0*93 Changes section of 
 this document. A demonstration of patch 93 functionality will be provided 
 to the sites prior to national roll out.
  
 Distribution of Software:
 =========================
  
 This patch can be downloaded from:
 ftp.imaging.med.va.gov/Software/Released_Software/Mag3_0P93
 Installation instructions are included in this document.
  
 NOTE    Additional information about this patch can be found in a read-me
         file located in the MAG3_0P93 directory.
  
 Patch Contents:
 ===============
  
 This patch includes the following files:
  
 Software:
 =========
  
 MAG3_0P93.KID     KIDS (Kernel Installation & Distribution System) package
                   to be installed on the VistA system.
 MagInstall.exe    Installation file for Clinical Display and Capture 
                   client software. 
 MagInstall.msi    Installation file for sites using SMS or similar 
                   software.
 MagAUShare.zip    Zip file containing files used by Auto-update sites.
                   Contains MagASet.exe, MagSetup.exe, and magnet.ini.
  
  
 Documentation: 
 ==============
 MAG3_0P93_Patch_Description.pdf
 MAG3_0P93_Whats_New_in_Patch_93.pdf
 MAG3_0P93_Install_Guide_changes.pdf
 MAG3_0P93_Imaging_Systems_Technical_Manual_changes.pdf
 MAG3_0P93_Security_Guide_changes.pdf
  
 Required Patches:
 =================
  
 Before MAG*3.0*93 is installed, the following patches must be installed in
 the following order:
  
 MAG*3*51 
 MAG*3*96
 MAG*3*95
 MAG*3*72
  
 For a list of all released Imaging (MAG) patches, refer to the 
 patch_list.txt
 file available on the Imaging FTP server (go to 
 ftp://ftp.imaging.med.va.gov,
 then navigate to the \Docs\Imaging_Docs_Latest folder).
  
  
 Test Sites:
 ===========
  
 The following sites are test sites for this patch:
  
 Boston HCS (Integrated)
 Fayetteville, NC (Medium)
 Charleston, SC (Large)
 Louisville, KY (Large)
 Salisbury, NC (Large)
 Washington, DC (Large)
 Puget Sound HCS (Integrated)
 Orlando, FL (Large) 
  
  
 Remedy Calls:
 =============
  
 The following Remedy tickets are addressed in this patch:
  
  
 120486  Minimized image window does not open
 146512  Going to Next page of Multipage - Image is reduced in size
 150173  Scanned Documents open to middle of page, not top left
 172667  Crash if Alternate Video Viewer isn't defined.
 198977  Pointer issue with image information advanced on individual 
         images from Remote sites
 248030  Edit reason for deletion fields
 249715  unable to measure length on sonogram
 306530  color PDF s not printing in Color
 307102  Radiology window cannot be seen after Patch 72 install 
 308461  P72 not saving full resolution view settings
 308891  I have one user that the Radiology Exam viewer box will not
         display, no matter what workstation he is on.
 309631  Retinal Imaging Issue
 309786  Issue with image display after loading Patch 72
 310250  RPC MAGG LOGOFF errors after Patch 72
 310711  Changes in SSN/ICN impacting routing.   Patient Safety 
         Reference PSPO #1473
 312321  concerns re changes made by patch 72
 313044  Error has continued after fix
 316015  Apply all button not functioning
 316946  Images viewable in Vista Rad but not VI Display
 332548  Question about the Ruler Option in Vista Imaging Display
 351536  Radiology Viewer/Measurement Tools
  
  
  
 NSR and E3R Entries:
 ====================
  
 20071223 -ASU business rules for VistA Imaging
  
 Patch 93 Changes:
 =================
 Details of the changes are listed in the MAG*3.0*93 Changes section
 of the Patch Description.
  
 VistA System KIDS Summary Changes:
 ==================================
  
 Data Dictionaries:
 ==================
  
 Data Dictionary definitions can be referenced by accessing the Data
 Dictionary.
  
 IMAGE File (#2005), The following fields are NEW or CHANGED
  
 *OBJECT NAME (#.01)   New. Each object has a natural language name; this 
  usually consists of the patient name, SSN, and object description. Field 
  is automatically defines by the Imaging software. 
 *CAPTURE APPLICATION (#8.1)   New. Code stored of the application that 
  captured the image.
 *AUDIT  (#99)   New. Stores the previous values of the record fields 
  (audit trail).
 *CONTROLLED IMAGE (#112)   New. In the Clinical Display Application, the 
  abstract of a controlled image is shown by a bitmap. 
 *CONTROLLED DATE (#112.1)   New. Shows the date and time of the most 
  recent change to the image sensitivity status.
 *CONTROLLED BY (#112.2)   New. References the user that made the most 
  recent change to the image sensitivity status.
 *STATUS (#113)   New. The current status of an image; Viewable, QA 
  Reviewed, In Progress, Needs Review, or Deleted.
 *STATUS DATE (#113.1)   New   This field indicates the date and time of 
  the most recent change of the image status.
 *STATUS BY (#113.2)   New. This field references the user who made the 
  recent change of the image status.
 *STATUS REASON (#113.3)   New. This field indicates the reason for the 
  latest image status change.
 *NUMBER OF PAGES (#114)   New. This field stores number of pages in a 
  multi-page document.
 *OBJECT GROUP (#14)   Modified definition. The object is a multiple 
  field pointing back to IMAGE FILE (#2005) and is a parent of a set of 
  images. 
 *OBJECT GROUP FIELD (#4.01)   Modified definition. This field points to 
  an entry of the #2005 IMAGE FILE that represents an existing 
  (non-deleted) member of the image group.
 *IMAGE (#2005) OBJECT GROUP (#2005.04), This file is a sub file
  of IMAGE File #2005
  
 IMAGE AUDIT File (#2005.1)
  
 *OBJECT NAME (#.01)   New. Each object has a natural language name;
  this usually consists of the patient name, SSN, and object description.
  Field is automatically defines by the Imaging software. 
 *CAPTURE APPLICATION (#8.1)   New. Code stored of the application that
  captured the image.
 *OBJECT GROUP (#14)   Modified definition. The object is a multiple
  field pointing back to #2005 IMAGE FILE and is a parent of a set of
  images. 
 *CONTROLLED IMAGE (#112)   New. In the Clinical Display Application,
  the abstract of a controlled image is shown by a bitmap. 
 *CONTROLLED DATE (#112.1)   New. Shows the date and time of the 
  most recent change to the image sensitivity status.
 *CONTROLLED BY (#112.2)   New. References the user that made the
  most recent change to the image sensitivity status. 
 *STATUS (#113)   New. The current status of an image; Viewable,
  QA Reviewed, In Progress, Needs Review, or Deleted.
 *STATUS DATE (#113.1)   New   This field indicates the date and time
  of the most recent change of the image status. 
 *STATUS BY (#113.2)   New. This field references the user who made
  the recent change of the image status. 
 *STATUS REASON (#113.3)   New. This field indicates the reason for
  the latest image status change.
 *NUMBER OF PAGES (#114)   New. This field stores number of pages
  in a multi-page document.
 *AUDIT (#2005.199), This is a multiple of field 99 in IMAGE File
  (#2005.1),
  
 IMAGE LIST FILTERS File (#2005.87), The following fields are NEW.
  
 *IMAGE STATUS (#10)   New. This field stores the list of
  image statuses. 
 *DESCRIPTION CONTAINS (#11)    New. If this field is not
  empty, the filter considers an image as a possible search
  result only if its short description contains the value of
  this field. The comparison is insensitive. 
 *CAPTURE BY (#12)    New. If this field has a value, then the
  filter considers only images captured by this user. 
 *USE CAPTURE DATES (#13)   New. If the value of this field is YES,
  then filter s date range parameters are considered as image capture
  dates. 
 *DAY RANGE (#14)   New. This field allows selection of predefined
  short date ranges. 
 *COLUMN WIDTHS (#15)   New. This field stores comma separated list
  of column widths in pixels that is applied to the image list view
  when this filter is used.
 *PERCENT (#16)   New. If the field is not empty, it stores the
  percentage of images selected by the filter that is returned as
  the result of the image search. If this field is populated then the
  CAPTURED BY field must also have a value.
  
 MAG REASON File (#2005.88)   New File. This file stores valid reasons
 (justifications) for actions performed on images: copying, printing,
 etc. Once a reason is referenced by a record of other file 
 (e.g. IMAGE File (#2005)), it cannot be deleted. 
  
 *REASON (#.01)   New. This field stores the valid 
  reason/justification for action(s).
 *TYPE (#.02)   New. This field indicates actions that this
  reason is applicable to. 
 *DATE OF INACTIVATION (#.03)   New. If this field is not empty
  and the stored date is no later than today s date, then this record
  is excluded from the list of reasons presented to the user. 
 *CODE (#.04)   New. This field stores the code that uniquely
  identifies the reason. 
 *DESCRIPTION (#1)   New. This field stores the optional explanation
  for the reason.
  
 IMAGING USER PREFERENCE File (#2006.18), The following fields are NEW.
  
 *SHOW IMAGE TREE (#220.01)   New. This field controls visibility
  of the tree view panel in the Image List window of clinical client
  applications. 
 *ENABLE AUTOSELECT (#220.02)   New. This field controls if tree
  view and list items are automatically selected after the mouse
  pointer hovers over them for longer than the defined time.
 *AUTOSELECT SPEED (#220.03)   New. The field determines the amount
  of time after which a tree or list item is automatically selected
  if the value of the ENABLE AUTOSELECT field is TRUE. 
 *SYNCHRONIZED IMAGE SELECTIONS(#220.04)   New. Value of this field
  controls synchronization of image selections in all components of
  the Image List window of the clinical client applications. 
 *WHERE TO SHOW ABSTRACTS (#220.05)   New. Values of this field
  determines whether the list of image abstracts is shown in a panel
  of the Image List Window or in a separate window.
 *POSITIONS OF ABSTRACTS (#220.06)   New. Value of this field controls
  where the list of image abstracts is shown in the Image List window. 
 *WHERE TO SHOW IMAGE (#220.07)   New. Value of this field determines
  whether images are shown in a panel of the Image List window or in
  a separate window. 
 *SHOW TREE SORT BUTTONS  (#220.08)   New. Value of this field controls
  visibility of the sort buttons above the tree view in the Image List.
 *AUTOEXPAND TREE ITEMS (#220.09)    New. Value of this field determines
  if items of the tree view in the Image List window are automatically
  expanded when they are selected. 
 *ABSTRACT LIST SCROLL MODE (#220.1)   New. Values of this field
  determines the direction of scrolling and presence of the corresponding
  scroll bar in the list of image abstracts. 
 *IMAGE LIST SCROLL MODE (#220.11)   New. Value of this field determines
  the direction of scrolling (if several images are open) and presence
  of the corresponding scroll bar in the image list.
 *SHOW LIST VIEW (#220.12)   New. This field controls visibility of the
  list view panel in the Image List window of clinical client applications.
 *LAYOUT OF IMAGE LIST WINDOW (#220.13)   New. This field stores a string
  that determines the layout of the Image List window of clinical client
  applications. 
 *VERIFY WINDOW STYLE (#221.01)   New. Value of this field controls style
  of the Verification window of clinical client applications.
 *VERIFY LEFT (#221.02)  New. The field stores the horizontal coordinate
  of the left side of the Image QA Review window.
 *VERIFY TOP (#221.03)  New. This field stores the vertical coordinate
  of the top side of the Image QA window.
 *VERIFY WIDTH (#221.04)   New. This field stores the width (in pixels)
  of the Image QA Review window.
 *VERIFY HEIGHT (#221.05)   New. This field stores the height (in pixels)
  of the Image QA Review window.
 *VERIFY SHOW IMAGE REPORT (#221.06)   New. Value of this field controls
  visibility of the report preview panel in the Image QA Review window.
 *VERIFY SHOW IMAGE INFO (#221.07)   New. Value of this field controls
  visibility on the image information panel in the Image QA Review window.
 *VERIFY AUTOHIDE QUICK FILTER (#221.08)   New. Value of this field 
  controls visibility of the quick filter panel in the Image QA Review 
  window.
 *VERIFYSINGLE VIEW ONLY (#221.09)   New. If the value of this field
  is TRUE, then the image viewer can show only a single image during
  image verification process; otherwise, multiple images can be open.
 *VERIFY COLUMN WIDTHS (#221.1)   New. This field stores comma separated
  column widths (in pixels) for the image list view in the Image QA window.
 *WINDOW STYLE (#222.01)    New. Value of this field controls the style
  of the Image Index Edit window of the clinical client applications.
 *EDIT LEFT (#222.02)   New. This field stores horizontal coordinates
  of the left side of the Image Index Edit window. 
 *EDIT TOP (#222.03)   New. This field stores vertical coordinates
  of the top side of the Inage Index Edie window. 
 *EDIT WIDTH (#222.04)  New. This field stores the width (in pixels)
  of the Image Index Edit window.
 *EDIT HEIGHT (#222.05)   New. This field stores the height
  (in pixels) of the Image Index Edit window.
  
 IMAGING WINDOWS WORKSTATIONS File (#2006.81), The following fields
 are NEW or the field definitions have been CHANGED.
  
 *DISPLAY APPT DTTM (#5) - This field indicates when the TeleReader
  client application, which is installed on the workstation, was built.
 *TELEREADER APP DTTM (#5.3)  NEW. This field indicates when the
  TeleReader client application, which is installed on the
  workstation, was built.
 *VISTARAD APP DTTM (#5.7)   New. The date and time of the Imaging
  VistA RAD client application that is installed on this workstation.
 *CLINICAL UTILITIES APP DTM (#5.9)    New. The date and time of
  the Clinical Utilities client application that is installed on
  this workstation. 
 *TELEREADER VERSION (#9.3)   New. This field stores the version
  number reported by the TeleReader client during its last execution
  from the workstation. 
 *CLINICAL UTILITIES VERSION (#9.9)    New. This field stores the
  version number reported by the Clinical Utilities client during
  its latest execution from the workstation. 
 *CAPTURE APP DTTM (#5.5)   Changed. The date and time of the
  Clinical Display client application that is installed on this
  workstation.
 *DISPLAY VERSION (#9)   Changed. The field stores the version
  number reported by the Clinical Display client during its latest
  execution from the workstation.
 *CAPTURE VERSION (#9.5)   Changed. The field stores the version
  number reported by the Clinical Capture client during its latest
  execution from the workstation.
 *VISTARAD VERSION(#9.7)   Changed. The field stores the version
  number reported by the VistA RAD software during its latest
  execution from the client workstation.
  
  
 Security Keys:
 ==============
  
 MAG*3.0*93 adds the following security keys:
  
 MAG EDIT
  
 The MAG EDIT key is used to correct an image field when an index field is 
 incorrect or incomplete, such as correcting a wrong specialty that was
 selected. Only users assigned the MAG EDIT key can edit an image.  Only
 the Chief, HIM or authorized designated personnel (i.e., VistA Imaging
 Coordinator, Scanning Supervisor) should be assigned this key.
   
 MAG PAT PHOTO ONLY
  
 The MAG PAT PHOTO ONLY security key allows a user to view the patient 
 photo only and gives the user no other functionality in VistA Imaging
 Display.
  
  
 Remote Procedures:
 ==================
 MAG4 FILTER SAVE
 MAG4 IMAGE LIST
 MAG4 PAT GET IMAGES
 MAG4 VERSION CHECK
 MAGG CAPTURE USERS
 MAGG WRKS UPDATES
 MAGGRADIMAGE
 MAGG IMAGE GET PROPERTIES                      
 MAGG IMAGE LOCK                                
 MAGG IMAGE SET PROPERTIES                      
 MAGG IMAGE STATISTICS                          
 MAGG IMAGE UNLOCK                              
 MAGG REASON GET PROPERTIES                   
 MAGG REASON LIST               
                                 
  
 Menu Options:
 =============
 MAG*3.0*93 adds the following menu options to the Imaging System 
 Manager Menu [MAG SYS MENU]
  Imaging Site Reports [MAG REPORT MENU]
  Imaging Clients Version Report [MAG CLIENT VERSION REPORT]
  
 This option generates a list of workstations that have not been 
 upgraded to the current Imaging Client version and recommends 
 that the workstations be upgraded..  
  
  Imaging System Manager Menu [MAG SYS MENU]: 
  Enter/edit Reason [MAG REASON EDIT]
  
 This option allows adding/editing of reasons for actions performed 
 on images (copying, printing, etc.) stored in the MAG REASON file 
 (#2005.88).
  
  
 Installation: 
 =============
  
 This patch is to be installed on the VistA System and on the 
 Clinical Imaging workstations.
  
 The KIDS portion of this patch can be loaded while VistA Imaging 
 System is active. KIDS installation will take less than one minute. 
  
 *The re-indexing can be run as part of the Post-Install;
 *Or the re-indexing can be tasked to run at a future date and time.
  
 The client portion of this patch can be installed on a
 workstation-by-workstation basis, or it can be pushed to 
 all workstations at a site. Installation times will vary, based 
 on the hardware of the workstation in question and the installation 
 method used.
  
 AS A PART OF THE INSTALLATION OF THE KIDS, A RE-INDEXING OF THE 
 IMAGE (#2005) FILE AND IMAGE AUDIT (#2005.1) FILE MUST OCCUR.
  
 THIS PATCH SHOULD BE INSTALLED DURING OFF HOURS IF REINDEXING IS 
 BEING DONE AT THE TIME OF INSTALLATION.
  
  Prior to installing Patch 93 please note the following:
  
 *This patch should be installed during off hours.  
  
 *Users of packages other than VistA Imaging may be on the system 
  during the installation.  Clinical Display, Clinical Capture, and 
  TeleReader client applications must not be used during the installation.
  
 *Re-Indexing will take approximately 60 minutes. This patch must be 
  installed by the compliance date to conform to VHA Directive 2001-023.
  
 As a part of the post installation procedure of the KIDs, a re-indexing 
 of the IMAGE (#2005) file and IMAGE AUDIT (#2005.1) file must occur. 
 The re-indexing only needs to be done once when first installing Patch 93.
  
 NOTE    After installing the KIDS package, determine if version checking 
         for Clinical Display and Capture is to be enabled or disabled 
         (it is enabled by the Install process). 
  
  
  
 Installation Prerequisites:
 ===========================
  
 Before installing this patch, you will need to download the MAG*3.0*93  
 files from the Imaging FTP site to a local storage location. Verify that
 the patches listed in the Patch Sequence section on page 2 have been
 installed.
  
  
 VistA System (KIDS) Installation
 ================================
  
 Installation Steps (The re-indexing can be run as part of the 
 Post-Install)
  
 During the Post Installation process, Patch MAG*3*93 adds new indexes 
 to the IMAGE file (#2005) and the IMAGE AUDIT file (#2005.1). The files
 can either be re-indexed as part of the installation or tasked to be
 run separately.
  
 1.Access the Kernel Installation & Distribution System [XPD MAIN] menu.
  
 2.Run the Installation option[XPD INSTALLATION MENU] option.
  
 3.Load the KIDS file by performing the following steps.
  
 a Run the Load a Distribution option [XPD LOAD DISTRIBUTION] 
   to load the KIDS distribution.
  
 b When prompted, enter the path and file name (MAG3_0P93.KID) 
   of the Patch 93 KIDS file that you downloaded from the Imaging FTP 
   server.
  
 c When prompted to continue with the load, enter YES.  A Distribution OK!
   message will be displayed when the load is complete.
  
 d When prompted to run the environment check routine, press Enter to 
   confirm the default answer.
  
 4. After loading the KIDS file, use the following options to verify 
    the contents of the patch and to back up any affected routines.
  
       Verify Checksums in Transport Global [XPD PRINT CHECKSUM]   
       run this option if you want to ensure the integrity of the routines
       in the patch. 
  
       PRINT TRANSPORT GLOBAL
  
       Compare Transport Global to Current System [XPD COMPARE TO SYSTEM]
       run this option if you want to view all changes that will be made
       when the patch is installed.  All components (routines, options, and
       so on) in the patch will be compared.
  
       Backup a Transport Global [XPD BACKUP]   run this option if you want
       to create a backup message of any routines exported with the patch.
       It will NOT back up any of the other changes.
  
 5. After performing the load and any optional verification steps, 
    install the KIDS file by performing the following steps:
  
 a. Run the Install Package(s) [XPD INSTALL BUILD] option.
  
 b. When prompted for the install name, enter MAG*3.0*93.
  
 c. Answer NO to the following prompt:
  
  Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO//NO
  
 d. Answer NO to the separate re-indexing task prompt:
  
    Patch MAG*3*93 defines new indexes for the IMAGE (#2005) and IMAGE
    AUDIT (#2005.1) files. These indexes can be built as a part of the
    patch KIDS build installation or the post-install code can schedule a
    separate task that will build the indexes.
  
    Enter 'Y' or 'N'; enter '^' to cancel.
  
    Schedule a separate task that will build the indexes? YES//NO
  
 e. Answer NO to the following prompts:
  
    Want KIDS to INHIBIT LOGONs during the install? No//NO
    Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO//NO
  
 f. Schedule the installation for the off hours:
  
   Enter the Device you want to print the Install messages.
   You can queue the install by enter a 'Q' at the device prompt.
  
   Enter a '^' to abort the install.
  
   DEVICE: HOME// NULL
  
   Request Start Time: Feb 26, 2009@17:58:16// TODAY@21:00
   Install Queued!
  
 6. Check the log of the installation next morning using the Install 
    File Print [XPD PRINT INSTALL FILE] option.
  
 7. If the installation does not complete, fix the problem and restart 
    the installation using the Restart Install of Package(s) 
    [XPD RESTART INSTALL] option.  Do not forget that the installation 
    restart should be scheduled for the off hours.
  
 8. After the installation successfully completes, DELETE the routine 
    MAGIPS93.
  
  
  
 Sample KIDS Installation with Post Installation Routine Completed:
 ==================================================================
  
    Select Installation Option: 6  Install Package(s)
    Select INSTALL NAME: MAG*3.0*93  Loaded from Distribution  
    7/10/09@09:33:02
      => VistA Imaging V3.0 - Patch 93 Clinical Display Maintenance II  ;Cr
  
    This Distribution was loaded on Jul 10, 2009@09:33:02 with header of 
    VistA Imaging V3.0 - Patch 93 Clinical Display Maintenance II ;
    Created on Jul 09, 2009@15:34:58
  
    It consisted of the following Install(s):
    MAG*3.0*93
    Checking Install for Package MAG*3.0*93
    Will first run the Environment Check Routine, MAGIPS93
  
  
    Install Questions for MAG*3.0*93
  
    Incoming Files:
  
  
        2005      IMAGE  (Partial Definition)
 Note:  You already have the 'IMAGE' File.
  
  
        2005.1    IMAGE AUDIT  (Partial Definition)
 Note:  You already have the 'IMAGE AUDIT' File.
  
  
        2005.87   IMAGE LIST FILTERS  (Partial Definition)
 Note:  You already have the 'IMAGE LIST FILTERS' File.
  
  
        2005.88   MAG REASON  (including data)
 Note:  You already have the 'MAG REASON' File.
 I will OVERWRITE your data with mine.
  
  
        2006.18   IMAGING USER PREFERENCE  (Partial Definition)
 Note:  You already have the 'IMAGING USER PREFERENCE' File.
  
  
        2006.81   IMAGING WINDOWS WORKSTATIONS  (Partial Definition)
 Note:  You already have the 'IMAGING WINDOWS WORKSTATIONS' File.
  
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO// 
  
 Patch MAG*3*93 defines new indexes for the IMAGE (#2005) and IMAGE AUDIT
 (#2005.1) files. These indexes can be built as a part of the patch KIDS
 build installation or the post-install code can schedule a separate task
 that will build the indexes.  
     
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   HERE
  
  
  Install Started for MAG*3.0*93 : 
                Jul 10, 2009@09:36:06
  
 Build Distribution Date: Jul 09, 2009
  
  Installing Routines:..............................................
                Jul 10, 2009@09:36:06
  
  Running Pre-Install Routine: PRE^MAGIPS93.
  
  Deleting the field definitions...
  File #2006.81, Fields: '4'
  The definitions have been deleted.
  
  Installing Data Dictionaries: ........
                Jul 10, 2009@09:36:06
  
  Installing Data: 
                Jul 10, 2009@09:36:06
  
  Installing PACKAGE COMPONENTS: 
  
  Installing SECURITY KEY...
  
  Installing INPUT TEMPLATE..
  
  Installing DIALOG...................................................
 .
  
  Installing REMOTE PROCEDURE..............
  
  Installing OPTION.....
                Jul 10, 2009@09:36:07
  
  Running Post-Install Routine: POS^MAGIPS93..
  
    Attaching RPCs to the 'MAG WINDOWS' option...
    MAG4 IMAGE LIST
    MAGG IMAGE GET PROPERTIES
    MAGG IMAGE LOCK
    MAGG IMAGE SET PROPERTIES
    MAGG IMAGE STATISTICS
    MAGG IMAGE UNLOCK
    MAGG REASON GET PROPERTIES
    MAGG REASON LIST
    RPCs have been successfully attached..
    
    Patch 93 is turning Version Checking ON...
    Version Checking is already ON, no action taken for Site: 660
    Patch 93 is turning Version Checking ON...
    Version Checking is already ON, no action taken for Site: 589..
  
    Building new image indexes...
    IMAGE file (#2005)
    This file is already processed.
    IMAGE AUDIT file (#2005.1)
    This file is already processed.
    The indexes have been successfully built..
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  MAG*3.0*93 Installed. 
                Jul 10, 2009@09:36:07
  
 Installing Steps (the re-indexing can be tasked to run at a 
 future date and time)
    To install this patch and schedule the post-routine for a later 
    date follow steps 1-4 (above) and continue to Step 5 below.
  
 5. After performing the load and any optional verification steps, 
    install the KIDS build by performing the following steps:
  
    a Run the Install Package(s) [XPD INSTALL BUILD] option.
  
    b When prompted for the install name, enter MAG*3.0*93.
  
    c Answer NO to the following prompt:
  
    Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO//NO
  
    d Answer YES to the separate re-indexing task prompt and allow 
      automatic suspension during the business hours:
  
 Patch MAG*3*93 defines new indexes for the IMAGE (#2005) and IMAGE AUDIT
 (#2005.1) files. These indexes can be built as a part of the patch KIDS
 build installation or the post-install code can schedule a separate task
 that will build the indexes.
  
    Enter 'Y' or 'N'; enter '^' to cancel.
  
    Schedule a separate task that will build the indexes? YES//YES
  
    Schedule the image indexing task at:  (today - 12/31/2699):
    TODAY@21:00//<ENTER>
    Suspend the image indexing task during business hours (7am-8pm)? 
    YES//<ENTER>
  
    Answer NO to the following prompts:
  
    Want KIDS to INHIBIT LOGONs during the install? No//NO
    Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO//NO
  
  
 6. When installation is finished, an Install Complete message will 
    be displayed.
  
 7. Write down number of the task that is scheduled to build the new 
    indexes.  See the bold number in the example below.
  
    Task #159928 has been scheduled.
    It will rebuild indexes in the IMAGE (#2005) and IMAGE AUDIT (#2005.1)
    files and perform other post-processing actions..
  
 8. The user who performed the installation will receive a VistA alert 
    when the re-indexing task finishes.
  
  After the indexes are successfully built, DELETE the routine MAGIPS93 
  using the Delete Routines [XTRDEL] option of the Routine Tools ... 
  [XUPR-ROUTINE-TOOLS] menu:
  
           %Index of Routines
           Check Routines on Other CPUs
           Compare local/national checksums report
           Compare routines on tape to disk
           Compare two routines
           Delete Routines
           First Line Routine Print
           Flow Chart Entire Routine
           Flow Chart from Entry Point
           Group Routine Edit
           Input routines
           List Routines
           Load/refresh checksum values into ROUTINE file
           Output routines
           Routine Edit
           Routines by Patch Number
           Variable changer
           Version Number Update
  
 Select Routine Tools Option: Delete Routines
  
 ROUTINE DELETE
  
 All Routines? No => <Enter>
  
 Routine: MAGIPS93
 Routine: <Enter>
 1 routine
  
 1 routines to DELETE, OK: NO// Y
 MAGIPS93
  
 9. If the alert is not received, check the status of the re-indexing
    task using Taskman menu. If there was a problem with the task, 
    fix it, and restart the task:
  
 >D REINDEX^MAGIPS93
  
    Patch MAG*3*93 defines new indexes for the IMAGE (#2005) and 
    IMAGE AUDIT (#2005.1) files. These indexes can be built in 
    the current session (this will block it for quite a long time)
    or a separate task can be scheduled.
  
    Enter 'Y' or 'N'; enter '^' to cancel.
  
    Schedule the task that builds the indexes? YES
    Suspend the task during business hours (7am - 8pm)? YES//<ENTER>
    Requested Start Time: NOW//TODAY@21:00
  
    Task #159934 has been scheduled.
  
 8. After the indexes are successfully built, delete the 
    routine MAGIPS93.
  
  
 Clinical Workstation Installation:
 ==================================
  
 Clinical Imaging (Display & Capture) client software can be updated using
 one of the methods outlined below.
  
 *Manual Installation
 *Autoupdate Installation
 *Other Automatic Installation Methods (SMS, etc.)
 *TeleReader Installation
  
 After client installation is complete, log into an updated 
 workstation and use the Help | About menu option to verify 
 that the version number is 3.0.93.10.
  
 Manual Installation
  
 The magInstall.exe file can be installed manually on workstations 
 as described in section 2.5.5.1 in the Clinical Imaging Installation 
 Guide.
  
 Autoupdate Installation
  
 These steps assume Autoupdate has already been implemented.  
 For information about setting up Autoupdate, see section 2.5.6 
 in the Clinical Imaging Installation Guide.
  
 1 Download the MagAUShare.zip and magInstall.exe from the Imaging 
   FTP server to a local storage location.
  
 2 Copy the new magInstall.exe file to the location specified in 
   magautoupdate.bat. 
   (This file is in Program Files\VistA Imaging\InstallationService 
   on the system where VIIS is installed).
  
 3 Extract the contents of the MagAUShare.zip file to the 
   UPDATE\TEST folder.
  
 4 In the UPDATE\TEST folder, open magnet.ini and change the 
   <server> placeholder for "InstallService  to reflect the server 
   (or cluster name) where VIIS is installed. 
  
         [update_mode]
         ForceUpdateAll=FALSE
         InstallFile=MagSetup.exe
         InstallService=http://<SERVER>/imaging/install.asmx
         <MachineName>=TRUE
  
 5 Run the Clinical Display and Capture on the test workstations 
   for a period of time to insure there are no problems with the 
   software at your site.
  
 6 When it is verified that the software is running properly, 
   extract the contents of the MagAUShare.zip file to the UPDATE\DISTRIB 
   folder.
  
 7 In the UPDATE\DISTRIB folder, open magnet.ini and change the 
   <server> placeholder for "InstallService  to reflect the server 
   (or cluster name) where VIIS is installed.
   
 8 All workstations will be updated the next time Clinical Display 
   or Capture is run.
  
 Other Automatic Installation Methods (SMS, PSexec, etc.)
  
 The following methods are available to push updated software to multiple 
 workstations.
  
 *Remote push of magInstall.exe using PSexec and an administrators 
  account.
  
  This process is documented in detail in section 2.5.4.3 in the current 
  Clinical Imaging Installation Guide; change pages are included with this 
  patch.
  
 *Remote push using Microsoft SMS or similar remote installation software.
  
  Either magInstall.exe or magInstall.msi can be used for this.
  Installation specifics will vary from site to site.
  
  
 Routines:
 =========
 New and modified Imaging routines for the VistA system are listed
 below.  For each routine, the second line will contain the following
 information. Please note that the before checksum may differ if a test
 version of the patch has been installed.
  
         <tab>;;3.0;IMAGING;**[patch list]**;November 12,2009
  
  
 Checksums are calculated using the KERNEL utility program 
 CHECK1^XTSUMBLD.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGGA01
    Before:       n/a   After: B29307935  **93**
Routine Name: MAGGA02
    Before:       n/a   After: B57822621  **93**
Routine Name: MAGGA02A
    Before:       n/a   After: B40367747  **93**
Routine Name: MAGGA03
    Before:       n/a   After: B45753507  **93**
Routine Name: MAGGA03A
    Before:       n/a   After: B24276061  **93**
Routine Name: MAGGA03U
    Before:       n/a   After: B15820919  **93**
Routine Name: MAGGA04
    Before:       n/a   After: B10448835  **93**
Routine Name: MAGGAII
    Before:       n/a   After:B118384476  **93**
Routine Name: MAGGI11
    Before:       n/a   After: B19558450  **93**
Routine Name: MAGGI12
    Before:       n/a   After: B30285951  **93**
Routine Name: MAGGI13
    Before:       n/a   After: B36748899  **93**
Routine Name: MAGGI14
    Before:       n/a   After: B39084079  **93**
Routine Name: MAGGNTI
    Before: B37673155   After: B37753394  **10,8,59,93**
Routine Name: MAGGSFL1
    Before: B12555242   After: B17534133  **8,93**
Routine Name: MAGGSFLT
    Before: B27846060   After: B33107414  **7,8,93**
Routine Name: MAGGSIA
    Before: B37580788   After: B34720134  **7,21,8,59,93**
Routine Name: MAGGSIA1
    Before: B40441705   After: B40524442  **7,8,85,59,93**
Routine Name: MAGGSQI
    Before: B71116866   After: B71964647  **8,93**
Routine Name: MAGGTAU
    Before: B53570032   After: B66867957  **7,16,8,59,93**
Routine Name: MAGGTIA1
    Before: B34754160   After: B33003499  **21,8,59,93**
Routine Name: MAGGTID
    Before: B44603396   After: B47456559  **8,59,93**
Routine Name: MAGGTIG
    Before: B53305477   After: B58640406  **8,48,93**
Routine Name: MAGGTPT1
    Before: B32058249   After: B37889156  **16,8,92,46,59,93**
Routine Name: MAGGTRAI
    Before: B28882379   After: B29892001  **8,93**
Routine Name: MAGGTRPT
    Before: B42324178   After: B43638944  **8,48,93**
Routine Name: MAGGTSYS
    Before: B11307252   After: B11574384  **59,93**
Routine Name: MAGGTU3
    Before: B33146590   After: B34334075  **7,8,48,45,20,46,59,93**
Routine Name: MAGGTU31
    Before: B37368094   After: B41847617  **46,59,93**
Routine Name: MAGGTU4
    Before: B40764522   After: B53401008  **8,48,63,45,46,59,96,95,72,93**
Routine Name: MAGGTU41
    Before: B29145844   After: B22378971  **46,59,93**
Routine Name: MAGGTU42
    Before:       n/a   After: B89107061  **93**
Routine Name: MAGGTU4C
    Before:       n/a   After:  B5489850  **93**
Routine Name: MAGGTU4D
    Before:       n/a   After:  B5495655  **93**
Routine Name: MAGGTU4L
    Before:       n/a   After:  B4501110  **93**
Routine Name: MAGGTU4T
    Before:       n/a   After:  B5490003  **93**
Routine Name: MAGGTU6
    Before: B51445026   After: B51862098  **24,8,48,45,20,46,59,72,93**
Routine Name: MAGGTU7
    Before: B22552210   After: B23284378  **8,20,93**
Routine Name: MAGGTUP
    Before: B22068923   After: B23999096  **7,8,48,45,59,93**
Routine Name: MAGGTUX
    Before: B84671980   After: B85905158  **59,93**
Routine Name: MAGIPS93
    Before:       n/a   After:B176674164  **93**
Routine Name: MAGKIDS
    Before:       n/a   After: B30231662  **93**
Routine Name: MAGKIDS1
    Before:       n/a   After: B40480221  **93**
Routine Name: MAGSIXG1
    Before: B48513335   After: B36487191  **8,48,59,93**
Routine Name: MAGSIXG2
    Before:       n/a   After: B63440737  **93**
Routine Name: MAGSIXG3
    Before:       n/a   After: B65195475  **93**
Routine Name: MAGSIXG4
    Before:       n/a   After: B12614135  **93**
Routine Name: MAGUERR
    Before:       n/a   After: B24572740  **93**
Routine Name: MAGUERR1
    Before:       n/a   After: B25613179  **93**
Routine Name: MAGUTL01
    Before:       n/a   After: B28612084  **93**
Routine Name: MAGUTL02
    Before:       n/a   After: B48311130  **93**
Routine Name: MAGUTL03
    Before:       n/a   After: B11647866  **93**
Routine Name: MAGUTL04
    Before:       n/a   After: B23169366  **93**
Routine Name: MAGUTL05
    Before:       n/a   After: B18410909  **93**
Routine Name: MAGUTL06
    Before:       n/a   After: B18816077  **93**
Routine Name: MAGUTL07
    Before:       n/a   After: B22761121  **93**
Routine Name: MAGUTL08
    Before:       n/a   After: B26051030  **93**
Routine Name: MAGUTL10
    Before:       n/a   After:  B8165500  **93**
Routine Name: MAGUXRF
    Before: B17102779   After: B41195502  **51,93**
 
Routine list of preceding patches: 51, 72

=============================================================================
User Information:                          Hold Date     : FEB 11, 2010
Entered By  : SHOVESTUL,MARYANN             Date Entered  : APR 27, 2007
Completed By: CAROZZA,DAN                   Date Completed: FEB 11, 2010
Released By : WARK,PATRICK T                Date Released : FEB 11, 2010
=============================================================================


Packman Mail Message:
=====================

No routines included
