
=============================================================================
Run Date: MAY 08, 2003                     Designation: MAG*3*26
Package : MAG - IMAGING                        Priority: Mandatory
Version : 3         SEQ #9                     Status: Released
                  Compliance Date: JUN 08, 2003
=============================================================================

Associated patches: (v)MAG*3*1     <<= must be installed BEFORE `MAG*3*26'
                    (v)MAG*3*7     <<= must be installed BEFORE `MAG*3*26'

Subject: BASIC DICOM FILE SIZE VERIFICATION

Category: 
  - Routine

Description: 
============

 VistA Imaging patch, MAG*3*26 is a patch for the Digital Imaging and
 Communication in Medicine (DICOM) Gateways.  This patch improves the
 command shell executions and error detection during image processing.
  
 The creation and copying of image files on the DICOM Image gateway has 
 been redesigned.  The old process would shell executions and create Targa,
 Abstracts and BIG files immediately on the Imaging network.  Using this
 process it was possible to create corrupted files especially if the DICOM 
 gateway system had a failing Gigabit network card.  The image process has 
 been redesigned to create temporary files on the local gateway and copy
 the files to the Imaging network drive.  Each time a copy is performed a
 check is done against the local and the copied file to ensure the
 correctness of the file. If a problem is encountered a message will 
 display on the gateway and stop all execution.  This will require user
 interaction to correct the problem with the network card or Imaging
 network. Once the problem has been corrected, the image process can be
 resumed on the DICOM gateway.  All temporary files are cleared from the
 local machine at the beginning of each image process cycle.
  
 This patch consists of the following files:
 ========================================= 
 MAGDCM.RTN - Routines to be restored on all DICOM gateways. 
 MAG3_0P26_IMGDICOMugAppG.12.6.16-G12.6.26.PDF - Change pages to the  
        Imaging DICOM Users Guide in Appendix G. 
  
 Any late-breaking installation notes or other details will be documented 
 in a readme.txt file (this file may not be present for all patches).
  
  
 To receive this patch, a site must have their Site Agreement on file with
 and approved by the VistA Imaging Group. Once the required documents are 
 received and approved, software will be available on the Imaging FTP 
 directory under your site's folder. For information concerning the status 
 of a site, contact the VistA Imaging Distribution Manager via phone 
 (310-734-0357) or email (Kathy.Trombetta@med.va.gov).
  
 NOIS entries:
 =================  
 LIT-0303-71717
 ALX-1102-72072
  
 Test sites:
 ================= 
 Little Rock, AR
 Portland, OR
 Huntington, WV
 Charleston, SC
  
  
 ROUTINE SUMMARY:
 =============    
      
 The following is a list of the routines included in this patch.  
 The second line of each of these routine(s) will look like:
      
 <tab>;;3.0;Imaging;**26**;22-April-2003
  
  
 Routine          Checksum             Patch List
 ---------        ---------            ----------
 MAGDIR2C         14587466              **26**
 MAGDIR2D         11402959              **26**
 MAGDOS            3659416              **26**
 MAGDVRSN          3510833              **1,7,9,26**
  
  
 Installation instructions:
 DICOM GATEWAYS - Installation instructions for MAGDCM.RTN
  =================                                                        
     
 This patch must be installed on all DICOM Gateways (Text, Image and 
 Routing).
 1) STOP ALL PROCESSES on the gateway being updated.        
 2) Use a telnet session to 127.0.0.1.
 3) Provide the access and verify codes as prompted.
 4) Select the 'System Maintenance' menu option and then select the 
    'Enter Programmer's Mode' option.
 5) Provide the programmer's code. (This code was setup during the initial
    installation of the DICOM software.) 
 6) When you are dropped into programmer's mode, the computer prompt should
    have [DCM,DCM]; this will indicate that you are in the correct UCI.
 7) In programmers mode execute the Routine Restore program (^%RR) to 
    restore the routines in MAGDCM.RTN file in the DCM UCI.   This file 
    contains four routines.
 8) Provide the correct full path for the MAGDCM.RTN.  
 9) The following is an example:
  
  VistA DICOM System Maintenance Menu -- 
  
    1  System Operation
    2  Gateway Configuration and DICOM Master Files
    3  MUMPS Utilities
    4  Enter Programmer's Mode
  
   OPTION:  4  <Enter>
  
 PROGRAMMER ACCESS CODE:   (Programmer Mode) <Enter>
 [DCM,DCM]>D ^%RR <Enter>
  
                                                                                
           MSM - Routine Restore Utility
  
 Enter input device <HFS>: <Enter>  Host File Server
 File Name >: n:\builds\v3.0p26build361\patch_26\magdcm.rtn    <Enter>
 Routine(s) saved at 09:01 AM 04/22/2003
 Header comment is: DICOM Gateway MUMPS routines Build V3.0p26Build361
 Selective restore? (allows rename) <N>: <Enter> NO
 Restoring...
  
 MAGDIR2C  MAGDIR2D  MAGDOS    MAGDVRSN

Routine Information:
====================

=============================================================================
User Information:                               
Entered By  : BARRIOS,LUCILLE                Date Entered : APR 23, 2003
Completed By: SCHELL,KATE                   Date Completed: MAY 06, 2003
Released By : PAULIN,RONALD                 Date Released : MAY 08, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included
