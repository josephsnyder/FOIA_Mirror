
=============================================================================
Run Date: OCT 28, 2009                     Designation: MAG*3*54
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #60                      Status: Released
                  Compliance Date: DEC 08, 2009
=============================================================================

Associated patches: (v)MAG*3*20    <<= must be installed BEFORE `MAG*3*54'
                    (v)MAG*3*31    <<= must be installed BEFORE `MAG*3*54'
                    (v)MAG*3*46    <<= must be installed BEFORE `MAG*3*54'
                    (v)MAG*3*61    <<= must be installed BEFORE `MAG*3*54'
                    (v)MAG*3*69    <<= must be installed BEFORE `MAG*3*54'
                    (v)MAG*3*85    <<= must be installed BEFORE `MAG*3*54'
                    (v)MAG*3*86    <<= must be installed BEFORE `MAG*3*54'

Subject: DICOM MAINTENANCE IV

Category: 
  - Routine
  - Data Dictionary

Description:
============

 This document describes Patch 54, the DICOM Maintenance IV patch. This 
 patch addresses a number of maintenance issues including:
  
 * Error messages sent via e-mail will not contain uniquely identifiable 
   patient information.
 * Gateway users are informed when their VistA verify code has expired. 
 * Each DICOM Gateway is now referenced by its hostname rather than by a
   single-letter identifier.
 * Support has been added for the DICOM Encapsulated PDF SOP Class and for 
   various Secondary Capture-related SOP classes.
 * The problem with the M2M broker timing out and disconnecting has been 
   fixed.
 * The problem with TCP send (write) and receive (read) errors has been 
   fixed.
 * The problem with the TCP connection failing has been fixed.
 * Error handing for continuously running tasks has been improved.
 * The problem with REGEDIT has been fixed.
  
 For detailed information about all changes, refer to the 
 MAG3_0_P54_Patch_Description document released with the patch.
  
 NOTE All DICOM failed images must be corrected before installing this 
      patch.  See the Installation section for details.
  
 NOTE After the installation of the KIDS for Patch 54, MSM will no longer 
      be supported on DICOM Gateways.
  
 NOTE Changes in this patch will affect how exam date/times are reported 
      in VistARad for newly acquired exams.  For details, see page 5 of the
      Patch Description for Patch 76 (VistARad 3D and 508 support).
  
 Distribution of Software
 ========================
  
 This patch can be downloaded from:
  
   ftp.imaging.med.va.gov/Software/Released_Software/Mag3_0P54
  
 Installation instructions are included in the 
 MAG3_0_P54_Patch_Description document released with the patch.
  
 NOTE Any late-breaking news about this patch will be found in a readme 
      file.  If present, this file will also be located in the MAG3_0P54
      directory.
  
 Patch Contents
 ==============
  
 This patch includes the following files:
  
 Software
 ========
  
 MAG3_0P54_DICOM_Setup.exe - Installation Program for DICOM Gateway.
  
 MAG3_0P54.KID - KIDS (Kernel Installation & Distribution System) package 
   to be installed on the VistA hospital database.
  
 Documentation 
 =============
  
 The following is the documentation available for this patch:
  
 MAG3_0P54_Patch_Description.pdf - Detailed patch description with patch 
   installation instructions.
  
 MAG_Routing_User_Guide.pdf - VistA Imaging Routing User Guide.
  
 MAG3_0P54_DICOM_User_Manual_Change.pdf - DICOM Gateway User Manual change 
   pages for this patch.
  
 MAG3_0P54_DICOM_Install_Guide_Change.pdf - DICOM Gateway Installation 
   Guide change pages for this patch.
  
 MAG3_0P54_Error_Message_Change.pdf - Error Message Guide change pages for 
   this patch.
  
 MAG3_0P54_Technical_Manual_Change.pdf - Technical Manual change pages for 
   this patch.
  
 MAG3_0P54_SG2_9_File_Security.pdf - Updated File Security change page for 
   this patch.
   
 Associated Patches
 ==================
  
 The following VistA Imaging patches must be installed before installing
 Patch 54:
         MAG*3.0*20
         MAG*3.0*31
         MAG*3.0*46
         MAG*3.0*61
         MAG*3.0*85
         MAG*3.0*86
         MAG*3.0*69
  
 For a list of all released Imaging (MAG) patches, refer to the 
 patch_list.txt file available on the Imaging FTP server (go to
 ftp://ftp.imaging.med.va.gov, then navigate to the \Docs\Imaging_Docs_Latest
 folder).
  
 Test Sites
 ==========
  
 The following sites are test sites for this patch:
  
 * Atlanta, GA (Large)
 * El Paso, TX (Medium)
 * Fayetteville, NC (Medium)
 * Gainesville (North Florida), FL (Integrated)
 * Kansas City, MO (Integrated)
 * Los Angeles (West LA), CA (Integrated)
 * Mountain Home, TN (Medium)
 * Palo Alto, CA (Integrated)
 * Richmond, VA (Large)
 * San Antonio (South Texas), TX (Integrated)
 * Tucson, AZ (Large)
  
 Remedy Calls
 ============
  
 The following Remedy help desk calls are addressed in this patch:
  
  85604: Routing Custom List - Incomplete transfers.
 129835: Imaging gateway locked same at 150522.
 134298: Cannot route images acquired at remote site.
 136790: Txt gateway or HL7 problem with last name containing spaces.
 148241: VistA Imaging Error - 1^No Image Abstract File created.
 150522: Unable to complete RAD-DICOM Correct.
 152144: Imaging IEN number is advancing non-sequentially.
 154045: Toshiba Acquilion CT 3D images are all washed out.
 155957: Trouble sending images.
 159511: Error on text gateway.
 159777: Receiving program error. All 26 'Machine IDs' used, cannot install
         additional DICOM Gateways.
 160309: Process image window displaying the same case (loop) correction. 
 163556: ^TMP is growing fast on VistA.
 164560: Error on the text gateway <SYNTX>MINSPACE+2.
 167705: Questions regarding batch export VistA Radiology Imaging.
 168465: DICOM send image.
 172910: Corrections are not working.
 173744: Update on SCU_list.dic file.
 173879: Image Date/Time.
 174782: MRI having issue with number of images sent.
 179564: Images look compressed.
 180028: UNDEFINED PROCFLD+28^MAG7UM - Ticket 80213 related - 
         PAL-0205-60198 Resend HL7 message in Radiology.
 181897: Email messages appear to arrive hours after incident.
 183475: Reports are not being sent from gateways.
 186003: Instrument reported as 'crashed' when 'no longer in use'.
 186076: Prior studies are being sent routed without current studies.
 187178: Issue with errors on DICOM Image Gateway.
 189290: C-Store process 'hangs'.
 189492: EBW1 W/S not sending images right.
 190443: Routing with no rules.
 193516: GE AWS workstation images are bad.
 196010: VistA Send Error - Intermittent send problems in 2-8-2 window.
 203655: Cannot view first set of images for CT.
 207628: <FILEFULL> ERRORS.
 213636: Derived\Secondary\Screen save image will not display.
 213647: Images not being processed on Image Gateway.
 216950: Digitized image looks good in VistARad, but not Clinical Display.
 220267: DICOM Error. No Study UID.
 221525: Three D images errors when processing in DICOM.
 231209: Error in VistA Send Image Job terminated due to Network Error 2.
 236435: Error 304.
 236659: Modality Interface.
 236993: Scanned Lumisys Images are not valid.
 237134: Help adding new modality Siemens Accuson Sequoia US.
 246003: Sorna CD viewing issues.
 251184: VistA Imaging - 3.0. Cache Registry Error/Hang.
 253811: Undefined Modalities as follows.
 255791: Is the Toshiba Vitrea Workstation an approved modality?
 255934: Having to Restart CachS on Text Gateway.
 256170: DICOM Image Processing Error-TARGA Image File Creation 
         Error-10.176.50.143-vhalasdig2.
 256356: Processor stuck in loop due to CX Consult again.
 259551: Secondary Capture images blurry.
 265977: Image Gateway issue.
 268136: When using batch export on demand routing the 2-8-2 windows error.
 268464: CTs not processing on newly stood up gateway.  Using same DIC 
         files on old gateways.
 275889: Text Gateway issue.
 278990: Installation of new modality.
 279202: Cannot export C:\windows\temp\mag_bias.reg.
 286153: Approved modality.
 287260: Worklist window freezing.
 296933: Adding Pet scan modality.
 300667: P54 Makeabstract error.
 300731: Problems storing and retrieving reconstructs.
 301013: CachS stopped processes.
 301664: M to M errors after P54T31 install.
 303650: IntOps: Configure/Reconfigure software.
 304047: Export problems caused by P54.
 305284: Query/Retrieve error.
 305850: Worklist device configuration.
 305938: Routing window 2-8-2 is not working.
 308424: C-Store process time is one hour behind system time.
 310645: Request assistance in configuration to send RAD images to cPACS.
 311831: Image Gateway looping until database fills.
 314571: Undefined modalities - Vitrea2.
 314621: XWBRL Errors.
 315298: Error Message: -2, Socket for server on port 65535 already open.
 315364: Uploading Pet CT's into Vista Imaging. Waiting on patch 54.
 318626: 'not on file' loop on 2_3 window.
 326617: Scroll bars not working.
 329141: When someone chooses 'High' as a priority for a manual route the 
         telnet session 2-8-2 throws and M6 error.
 330198: Undefined local variable.
 331732: Gateway stuck doing a DICOM correct. images were already 
         processed.  Other DICOM corrects are waiting for this one. Run patch
         54.
  
 NSR and E3R Entries
 ===================
  
 There are no NSR and E3R entries addressed in this patch. 
  
 Patch 54 Changes
 ================
  
 Patch 54 contains changes to the Imaging software on the VistA system as 
 well as on the DICOM Gateway.
  
 VistA Host KIDS
 ===============
  
 Patch 54 includes a KIDS package to be installed on the VistA Host.
  
 * A new environment check will be performed when the KIDS is loaded.  
   Installation will not be permitted if there are uncorrected entries in the
   DICOM FAILED IMAGES
   File (#2006.575).  This check will be performed for future patches that
   incorporate full installations of the DICOM Gateway.
 * The post installation routine will initialize the DICOM FAILED IMAGES 
   File (#2006.575).
 * Installing the KIDS package will also update the patch history in the 
   PACKAGE File (#9.4) to indicate that Patch 54 has been installed.
  
 Data Dictionaries
 =================
  
 There are new and modified data dictionaries included in this patch.
  
 IMAGE: (#2005), Partial data dictionary 
 * DOCUMENT DATE (#110) in the IMAGE (#2005) file (renamed) from CREATION 
   DATE to DOCUMENT DATE and is the Date/Time of the Creation of the Original
   Document or Image.  Document Images can have a separate date, unlike clinical
   images that are attached to a procedure, and only procedure date is needed.
  
 IMAGE AUDIT: (#2005.1), Partial data dictionary
 * DOCUMENT DATE (#110) in the IMAGE (#2005) file has been modified to 
   accept time element.  Document Images can have a separate date, unlike
   clinical images that are attached to a procedure, and only procedure date is
   needed.
  
 DICOM UID SPECIFIC ACTION: (#2006.539) (with data) New File
 * UID field (#.01) - The value of this field is a string that conforms to 
   the format of a DICOM UID (Unique Object Identifier). A UID is a string that
   consists of only digits and periods. The first and the last characters must
   be digits, and none of the integer numbers in the string (that are separated
   by periods) may have leading or trailing zeroes. The meanings of UIDs are
   defined in the DICOM standard.
  
 * DESCRIPTION field (#2) - The value of this field is a string. This 
   string is a descriptive text that explains the meaning of the UID in this
   record.
  
 * TYPE field (#3)- The value of this field is a string. This string 
   describes the usage of this UID.
  
 * SUBTYPEfield (#4) - The value of this field is a string that identifies 
   a sub-type for the UID. Sub-types are not defined in the DICOM standard but
   are used to distinguish between application-specific usages of UIDs. For
   instance, an UID that has a 'type' of 'SOP Class' may have a 'sub-type' of
   'Storage'.
  
 * PURPOSE field (#5) - Multiple field(#1)
  
 ** PURPOSE field (#.01) - The value of this field is a string. This 
    string identifies an action that may be executed by the application
    software. Depending on the UID of the object being manipulated, the
    application will find in this table which specific action is to beexecuted
    for which specific purpose. 
  
 ** ACTION field (#2) - The value of this field is a string. This string 
    identifies the action to be taken by the application for this purpose for
    this UID. Since the value in this field may be used by an application that
    runs on VistA, as well as by a client-application that acquires this value
    through a remote procedure, no assumption can be made about the
    mechanism that may be used to invoke the software to perform this action (it
    may be MUMPS, Delphi, Java, et cetera. Hence, the value in this field will
    be a numeric code. The meaning of this code is specific to each purpose for
    which an action may be taken.
  
 ** COMMENT field (#3)- The value of this field is a string. The value 
    that will be used by the applicationsto determine which action to take
    is taken from a different field in this record (ACTION.  In order to
    facilitate debugging and consistency checking, a semi free text is
    entered in this field that described the action to take in a
    human-readable form.
  
 DICOM GATEWAY PARAMETER: (#2006.563), Partial data dictionary. The 
 following fields are new.
  
 * STATUS OF CREDENTIALS field (#106) - The value of this field is a code 
   that indicates the status of the credentials that are used for
   background processed. When these credentials are known to be valid or
   invalid on VistA, the value of this field is always set to 1 or one.  
   Otherwise, the value of this field defaults to 0 (zero).
  
 * PROCESS TEXT MESSAGES STATUS field (#107) - The value of this field is 
   a code that indicates the status of the application called 'Process Text
   Messages'. This status can be either 'ACTIVE' (process is active) or
   'STOP' (stop requested).
  
 * PROGRESS IMAGES STATUS field (#108) - The value of this field is a code 
   that indicates the status of the application called 'Process DICOM
   Images'. This status can be either 'ACTIVE' (process is active) or
   'STOP' (stop requested).
  
 * TRANSMIT DICOM STATUS field (#109) - The value of this field is a code 
   that indicates the status of the application called 'Transmit DICOM
   Images'. This status can be either 'ACTIVE' (process is active) or
   'STOP' (stop requested).
  
 * BATCH TRANSMIT STATUS field (#110) - The value of this field is a code 
   that indicates the status of the application called 'Select Images for
   Batch Transmission'. This status can be either 'ACTIVE' (process is
   active) or 'STOP' (stop requested).
  
 * POST OFFICE PORT field (#111) - The value of this field is an integer 
   number. This number represents the number of the TCP/IP port that will
   be used for SMTP communication.  Normally, the port number used for this
   purpose is 25.  It is permissible for sites to set up a post-office that
   uses a non-standard port number.  Enter the port number for SMTP
   communication (1<= port <= 65535).
  
 * VISTA STORAGE field (#112) - The value of this field is a string.  This 
   string represents the Application Entity that a PACS system would use
   when transmitting image files to VistA using the DICOM C-Move protocol.
   (AE Title, C-Move and PACS are described in the DICOM Standard.)
  
 * ABSTRACT PATH field (#113) - The value of this field is a string that 
   identifies the drive letter for the system drive. Normally, the value of
   this field will be equal to 'C:'.
  
 DICOM GATEWAY MACHINE ID (#2006.5641), Partial data dictionary
  
 * MACHINE ID field (#.01) has been modified to accept a numeric character 
   up to 99999.  Here is the new INPUT TRANSFORM:
     K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X.
   The value of this field is the same as theinternal entry number.
  
 DICOM INCOMPLETE OBJECT (#2006.5714) New file
 * DATE/TIME ADDED ($H) field (#.01) - The value of this field is the date 
   and time that the incomplete file was recorded, in $H format.
  
 * RAW IMAGE field (#1) - The value of this field is a pointer to the ID 
   of the raw image that is to be processed as an incomplete object.
  
 * FILE PATH field (#2) - The value of this field is the path for the 
   DICOM file. Usually, this will be C:\DICOM\Image_In.
  
 * INSTRUMENT field (#3) - The value of this field is the piece of imaging 
   equipment that captured the file that is marked as incomplete.
  
 * DATE/TIME ADDED (FILEMAN) field (#4) - The value of this field is the 
   date and time the incomplete file was recorded, in FileMan format.
  
 QUERY/RETRIEVE STATISTICS: (#2006.5733) New file
  
 * DATE Field (#.01) - The value of this field is a date.  This date 
   identifies the date for which statistics are being recorded.
  
 * LOCATION Field (#2) Multiple:
  
 ** LOCATION field (#.01) - The value of this field is a pointer to the 
    INSTITUTION File (#4).  The institution that is identified by this
    pointer is the institution for the DICOM Gateway from which the Query
    requests are being posted.
  
 ** TYPE Field (#2) Multiple:
  
 *** TYPE Field (#.01) - The value of this field is a string.  This string 
     identifies the kind of Remote procedure call that was processed for a
     query. 
  
 *** COUNT Field (#2) - The value of this field is a positive integer 
     number.  This number indicates how often a certain type of RPC call
     has occurred.
  
 *** DETAIL field (#3) Multiple:
  
 **** DETAIL Field (#.01) - The value of this field is a string.  This 
      string identifies any detail about a transaction that is worth
      tallying (e.g. in case a transaction has the type 'Error', the value
      of this field would indicate the specific error and in case a
      transaction has the type 'Done', the value of this
      field would indicate the number of rows in returned result.
  
 **** COUNT Field (#2) - The value of this field is a positive integer 
      number. This number indicates how often a transaction of the same
      type and specifics has occurred.
  
 DICOM IMAGE OUTPUT: (#2006.574) Partial data dictionary
  
 * STATUS field (#2) has been modified to include a cross-reference to 
   prevent issuing the same file to multiple transmission processes.
  
   The value of this field is a code that indicates the current status of 
   the entry in this table. Possible values are 'waiting to be
   transmitted', 'transmission in progress' and 'successful transmission'
   or 'failed transmission'.  New cross-ref:   
   X(2):
    Computed Code: S X=$P(^MAGDOUTP(2006.574,DA(1),0),"^",5) (Subscr 2)
  
 DICOM FAILED IMAGES (#2006.575), Partial data dictionary
  
 * FILEPATH field (#.01) (change to cross-reference only) - The value of 
   this field is a string that represents the name of the image file that
   failed the matching process on the local DICOM Image gateway processing
   the image. 
  
 * CROSS-REFERENCE: 2006.575^B 
   1)= S ^MAGD(2006.575,"B",X,DA)=""
   2)= K ^MAGD(2006.575,"B",X,DA)
  
 CT CONVERSION PARAMETERS (#2006.5821) New file
  
 * LOCATION field (#.01) - Identify the site for the CT conversion 
   parameters. The value of this field is a pointer to the INSTITUTION File
   (#4). This pointer identifies the site to which the current record
   applies. 
  
 * MANUFACTURER field (#2) - Identify the manufacturer of the CT scanner. 
   The value of this field is a string. This string is the name of the
   manufacturer of the CT scanner for which parameters are described in
   this record. 
  
 * MODEL field (#3) - The value of this field is a string. This string 
   identifies the model name of the CT scanner for which the conversion
   parameters are described in this record.
  
 * DATE field (#4) - The value of this field is a FileMan date (date only, 
   no time). This date identifies the day on which the conversion
   parameters were established that are described in this record.
  
 * CONVERSION PARAMETERS field (#5) - The value of this field is a string. 
   This string represents the conversion parameters (DICOM to Targa
   conversion) that were applied for the CT scanner on the date specified
   elsewhere in this record.
  
 TELEREADER READ/UNREAD LIST (#2006.5849) - Modified file.
  
 * READING STOP Field (#17) - Corrected spelling in short description.
  
 DICOM TRANSMIT DESTINATION (#2006.587) - Modified file, new fields
  
 * SERVICE TYPE Field (#9) Multiple:
  
 ** SERVICE TYPE Field (#.01) - The value of this field is a code that 
    identifies a DICOM DIMSE Service.  The complete list of DIMSE Services
    is defined in the DICOM Standard.
  
    The Application Entity that is defined in the current record is 
    permitted to perform only those services that are itemized in this
    multiple-valued field.
  
    Note: if there are no values in this multiple-valued field, the 
    current Application Entity is not allowed to perform any DICOM DIMSE
    Services. 
  
 ** SCU Field (#1) - The value of this field is a code that indicates 
    whether or not the service described in this record may be performed in
    such a way that the Application Entity from the main record is an SCU
    (Service Class User).
  
 ** SCP Field (#2) - The value of this field is a code that indicates 
    whether or not the service described in this record may be performed in
    such a way that the Application Entity from the main record is an SCP
    (Service Class Provider).
  
 DICOM GATEWAY INFORMATION (#2006.87) New file:
  
 * HOSTNAME Field (#.01) - The value of this field is a string that 
   represents the name of a computer.  Names of computers typically look
   like xxx-yyyzzzzz where xxx is the three-letter abbreviation for the
   name of the institution, yyy is the abbreviation for the name of the
   department, and zzzzz is the identifier assigned to the computer.
  
 * LOCATION Field (#3) - The value of this field is a pointer to the 
   INSTITUTION File (#4).  This pointer identifies the location for which
   the DICOM Gateway operates.
  
 * TIMESTAMP INSTRUMENT Field (#11) - The value of this field is a 
   timestamp (VA-FileMan format).  This timestamp identifies the date and
   time when the file x:\DICOM\Dict\Instrument.dic was most recently
   updated.
  
 * FILENAME INSTRUMENT Field (#12) - The value of this field is a string 
   that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the text file that holds the instrument
   definitions.  Usually the name of this file looks like
   x:\DICOM\Dict\Instrument.dic.
  
 * TIMESTAMP MODALITY Field (#21) - The value of this field is a timestamp
   (VA-FileMan format).  This timestamp identifies the date and time when 
   the file x:\DICOM\Dict\Modality.dic was most recently updated.
  
 * FILENAME MODALITY Field (#22) - The value of this field is a string that
   identifies the full pathname (drive or disk-share + (sub) directories + 
   file name) of the text file that holds the definitions of the supported 
   modalities.  Usually the name of this file looks like 
   x:\DICOM\Dict\Modality.dic.
  
 * TIMESTAMP PORTLIST Field (#31) - The value of this field is a timestamp 
   (VA-FileMan format).  This timestamp identifies the date and time when 
   the file x:\DICOM\Dict\PortList.dic was most recently updated.
  
 * FILENAME PORTLIST Field (#32) -The value of this field is a string that
   identifies the full pathname (drive or disk-share + (sub) directories + 
   file name) of the text file that holds the definitions of the TCP/IP 
   ports. Usually the name of this file looks like
   x:\DICOM\Dict\PortList.dic.
  
 * TIMESTAMP SCU_LIST Field (#41) - The value of this field is a timestamp
   (VA-FileMan format).  This timestamp identifies the date and time when 
   the file x:\DICOM\Dict\SCU_List.dic was most recently updated.
  
 * FILENAME SCU_LIST Field (#42) - The value of this field is a string that
   identifies the full pathname (drive or disk-share + (sub) directories + 
   file name) of the text file that holds the SCU (Service Class User)
   definitions.  Usually the name of this file looks like   
   x:\DICOM\Dict\SCU_List.dic.
  
 * TIMESTAMP WORKLIST Field (#51) - The value of this field is a timestamp
   (VA-FileMan format).  This timestamp identifies the date and time when 
   the file x:\DICOM\Dict\WorkList.dic was most recently updated.
  
 * FILENAME WORKLIST Field (#52) - The value of this field is a string that
   identifies the full pathname (drive or disk-share + (sub) directories + 
   file name) of the text file that holds the definitions for the Modality
   WorkList Applications. Usually the name of this file looks like
   x:\DICOM\Dict\WorkList.dic.
  
 * TIMESTAMP CT_PARAMS Field (#61) - The value of this field is a timestamp
   (VA-FileMan format).  This timestamp identifies the date and time when 
   the file x:\DICOM\Dict\CT_Params.dic was most recently updated.
  
 * FILENAME CT_PARAMS Field (#62) - The value of this field is a string 
   that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the text file that holds the definitions for
   the conversion of images from CT modalities. Usually the name of this
   file looks like x:\DICOM\Dict\CT_Params.dic.
  
 * DICOM GATEWAY VERSION Field (#1001) - The value of this field is a 
   string that identifies the version of the DICOM Gateway application that
   is running on the computer. This value is copied from the second line of
   routine MAGDVRSN.  (Note that different DICOM Gateways at a single site
   may be running different versions of the DICOM Gateway application.)
  
 * TIMESTAMP DICOM VIEWER Field (#1011) - The value of this field is a 
   timestamp (VA-FileMan format). This timestamp identifies the date and
   time when the file
   C:\Program Files\VistA\Imaging\DCMView\MAG_DCMView.exe was most 
   recently updated.
  
 * FILENAME DICOM VIEWER Field (#1012) - The value of this field is a 
   string that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the executable file that holds this
   application.  Usually the name of this file looks like C:\Program
   Files\VistA\Imaging\DCMView\MAG_DCMView.exe.
  
 * TIMESTAMP ABSTRACT MAKER Field (#1021) - The value of this field is a 
   timestamp (VA-FileMan format). This timestamp identifies the date and
   time when the file
   C:\Program Files\VistA\Imaging\DICOM\MAG_MakeAbs.exe was most recently 
   updated.
  
 * FILENAME ABSTRACT MAKER Field (#1022) - The value of this field is a 
   string that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the executable file that holds this
   application.  Usually the name of this file looks like C:\Program
   Files\VistA\Imaging\DICOM\MAG_MakeAbs.exe.
  
 * TIMESTAMP C-STORE Field (#1031) - The value of this field is a timestamp
   (VA-FileMan format).  This timestamp identifies the date and time when 
   the file C:\Program Files\VistA\Imaging\DICOM\MAG_CStore.exe was most
   recently updated.
  
 * FILENAME C-STORE Field (#1032) - The value of this field is a string 
   that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the executable file that holds this
   application.  Usually the name of this file looks like C:\Program
   Files\VistA\Imaging\DICOM\MAG_CStore.exe.
  
 * TIMESTAMP RECONSTRUCTOR Field (#1041) - The value of this field is a 
   timestamp (VA-FileMan format).  This timestamp identifies the date and
   time when the file
   C:\Program Files\VistA\Imaging\DICOM\MAG_Recon.exe was most recently 
   updated.
  
 * FILENAME RECONSTRUCTOR Field (#1042) - The value of this field is a 
   string that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the executable file that holds this
   application.  Usually the name of this file looks like
   C:\ProgramFiles\VistA\Imaging\DICOM\MAG_Recon.exe.      
  
 * TIMESTAMP DICOM TO TARGA Field (#1051) - The value of this field is a 
   timestamp (VA-FileMan format).  This timestamp identifies the date and
   time when the file C:\Program Files\VistA\Imaging\DICOM\MAG_DCMtoTGA.exe
   was most recently updated.
  
 * FILENAME DICOM TO TARGA Field (#1052) - The value of this field is a 
   string that identifies the full pathname (drive or disk-share + (sub)
   directories + file name) of the executable file that holds this
   application.  Usually the name of this file looks like C:\Program
   Files\VistA\Imaging\DICOM\ MAG_DCMtoTGA.exe.
  
 Security Keys
 =============
  
 There are no new or modified security keys included in this patch.
  
 Remote Procedures
 =================
  
 The following remote procedures are removed in this patch:
  
 * MAG DICOM CHECK MACHINE ID
 * MAG DICOM UPDATE MACHINE ID
  
 The following remote procedures are added or modified in this patch:
  
 * MAG DICOM CHECK AE TITLE
   This Remote Procedure checks whether an Application Entity is specified 
   on a DICOM Gateway that has the specified name.
  
 * MAG DICOM GET GATEWAY INFO
   This Remote Procedure returns information about a DICOM Gateway.
  
 * MAG DICOM GET MACHINE ID 
   This Remote Procedure returns the internal entry number of the entry 
   for the specified computer in the table of registered DICOM Gateways.
  
 * MAG DICOM GET UID ROOT
   This Remote Procedure returns the value of the DICOM root UID that is 
   to be prefixed to all UIDs that are generated on this system and its
   client systems. The format and meaning of a DICOM UID is specified in
   the DICOM Standard.
  
 * MAG DICOM GET UID TABLE
   This Remote Procedure transmits the current content of the UID table 
   from VistA to the DICOM Gateways.
  
 * MAG GET DICOM XMIT ORIGIN
   This RPC returns the list of locations for which currently images are 
   queued to be transmitted using DICOM protocol.
  
 * MAG DICOM IMAGE AUDIT GET
   This RPC call fetches the statistical information that is collected 
   about the acquisition of images.
  
 * MAG DICOM STORE GATEWAY INFO
   This Remote Procedure stores information about a DICOM Gateway in the 
   VistA system.
  
 * MAG DICOM VISTA AE TITLE
   This Remote Procedure returns a string that can be used as a DICOM 
   Application Entity title for the purpose established by the parameters
   to this procedure.
  
 * MAG IMAGE CURRENT INFO
   This Remote Procedure returns current values for the various DICOM tags
   that are to be included in the header of an exported image.
  
 Menu Options
 ============
  
 The following new menu options are included in this patch. 
  
 Each of these new menu options is accessed from the main menu for the
 DICOM Gateway utilities ([MAGD DICOM MENU]).
  
 * [MAGD DICOM MENU] Transported as a link to be used for the new menu 
   options.
  
 * Rename DICOM Gateway (DICOM Destinations) [MAGD RENAME GATEWAY XMIT] 
   (NEW):
  
   This menu option invokes a utility program that renames all entries 
   that have been made for a specific DICOM Gateway in the DICOM TRANSMIT
   DESTINATION table (#2006.587).
  
   This option should be used when a DICOM Gateway is replaced with a new 
   computer that has a different name, while there still are SCU_List
   entries registered for that DICOM Gateway.
  
 * Rename DICOM Gateway (Failed Images) [MAGD RENAME GATEWAY FAILED] (NEW):
  
   This menu option invokes a utility program that renames all entries 
   that have been made for a specific DICOM Gateway in the DICOM FAILED
   IMAGES table (#2006.575).
  
   This option should be used when a DICOM Gateway is replaced with a new 
   computer that has a different name, while there still are failed images
   to be corrected for that DICOM Gateway.
  
 * Clean Up DICOM Gateway (Failed Images) [MAGD REMOVE GATEWAY FAILED] 
   (NEW):
  
   This menu option invokes a utility program that removes all entries 
   that have been made for a specific DICOM Gateway from the DICOM FAILED
   IMAGES table (#2006.575).
  
   This option should be used when a DICOM Gateway is decommissioned 
   without first correcting all failed images that were associated with
   that DICOM Gateway.
  
 * Clean Up Gateway (DICOM Destinations) [MAGD REMOVE GATEWAY XMIT] NEW:
  
   This menu option invokes a utility program that removes all entries 
   that have been made for a specific DICOM Gateway from the DICOM TRANSMIT
   DESTINATION table (#2006.587).
  
   This option should be used when a DICOM Gateway is decommissioned 
   without first removing all SCU_List entries that were associated with
   that DICOM gateway.
  
 * DICOM Query/Retrieve [MAG DICOM QUERY RETRIEVE]: This secondary menu 
   option is added to support MAG*3.0*83.
  
 Templates
 =========
  
 There are no new or modified templates included in this patch.
  
 DICOM Gateway Changes
 =====================
  
 General Changes
 ===============
  
 * Patch 54 imposes an interlock on the DICOM Gateway between processing 
   and parameter changing. Now applications must be stopped while their
   operational parameters are being changed.
  
 * The checks for the presence of valid parameters have been improved in 
   menu option 4-2-4.
  
 * In the DICOM Image Gateway, temporary file names for acquired DICOM 
   objects now consist of the hostname of the computer followed by seven or
   more digits.
  
 * The location of the DICOM Gateway, site contact, and MUMPS license 
   information are now included in the Daily Summary Reports sent to the
   VistA Imaging Project Team.
  
 * The identification for the DICOM Gateway Computer has been changed from 
   a single letter to the hostname of the computer.
  
 * E-mail messages now have more precise time-stamps, and the time-zone 
   information for the DICOM Gateway will be kept up-to-date.
  
 * It is now possible to use non-standard port numbers for e-mail traffic.
  
 * The DICOM Gateway will use the DICOM Root UID that is defined on the 
   VistA system.
  
 * The DICOM Gateway will now issue warnings when the login credentials 
   for Modality Worklist have expired.
  
 * Data in ^TMP is cleaned up more often.
  
 * Menu option 4-1-8 (Shut Down Cach ) is removed.
  
 * E-mail messages that are sent when errors occur will no longer contain 
   uniquely identifiable patient information, like the Social Security
   Number.
  
 * Several sections of unused code are removed.
  
 * References to the subroutines in ^%DT and ^%DTC have been replaced with
   references to the functions in ^XLFDT.
  
 * TeleReader examinations can't be accessed when the Primary Site's 
   Station Number was not the same as the Primary Site's Internal Entry
   Number.  The Primary Site's Station Number is now used to lookup these
   exams rather than its Internal Entry Number.
  
 * Under certain conditions (like VistA database maintenance) DICOM 
   Gateway would wait 5 minutes and retry a non-responding M-to-M Broker
   connection.  After a dozen or so iterations, the application would give
   up and return to the menu. Now the Gateway will repeatedly try to make
   the connection and not return to the menu.  This improvement is
   specifically for text and image processing, so that these tasks no
   longer return to the menu when connection can't be re-established.
  
 * When a connection to a Remote DICOM Service Class Provider (SCP) 
   couldn't be made, the initiating Gateway job would get an error and
   return to the menu.  Now, if the connection can't be made, the
   initiating Gateway job repeatedly waits five minutes and retries to make
   the connection. 
  
 * Error handling for continuously running jobs has been improved in 
   general.  More accurate information is captured and reported by the
   Cache system error trap utility.
  
 * Patch 54 also includes updates to the data element dictionary from the 
   2008 version of the DICOM Standard.
  
 * The DICOM Gateway Storage Provider (MAG_CSTORE.EXE) can now gracefully 
   handle DICOM Abort (PDU 07H) requests generated by the modality.
  
 * DICOM Correct is restricted from associating images with a cancelled or
   discontinued consult requests.
  
 Text Gateway Changes
 ====================
  
 * The Modality Worklist processor now ignores requests for patients that 
   have been removed from the database.
  
 * If the worklist Access/Verify codes are invalid or expired, a warning 
   will be logged. Previously, this situation was improperly reported as a
   TCP/IP disconnect at the modality.  Now, a modality will receive a
   normal query result containing no studies.
  
 Image Gateway Changes
 =====================
  
 * Accession numbers can now be processed for the Picker VistA 1.0 MR.
  
 * A memory overflow condition has been corrected.
  
 * The DICOM Gateway now will accept images only from 'active' modalities.
  
 * The execution window for MAG_MakeAbs.exe will no longer 'flash'.
  
 * The utility program send_image (from Mallinkrodt Institute) has been 
   upgraded to its current version.
  
 * The DICOM Gateway will now include in the Image file (#2005) on VistA 
   the timestamp when an image was created.
  
 * The Image Acquisition software is now able to handle Explicit VR DICOM 
   objects with unknown elements in structures.
  
 * DICOM images that are transmitted using one of the following SOP 
   classes may now be stored in DICOM format on VistA:
  
   1.2.840.10008.5.1.4.1.1.7 (Secondary Capture Image Storage)
   1.2.840.10008.5.1.4.1.1.7.2 (Multi-frame Grayscale Byte Secondary 
      Capture Image Storage)
   1.2.840.10008.5.1.4.1.1.7.3 (Multi-frame Grayscale Word Secondary 
      Capture Image Storage)
   1.2.840.10008.5.1.4.1.1.7.4 (Multi-frame True Color Secondary Capture 
      Image Storage)
  
   Images that are transmitted using one of these SOP classes may need an 
   entry in modality.dic that looks like:
  
    XXX, Inc.|model|<SC>|<DICOM>|LONGCASE^MAGDIR3||datamisc.dic
  
    (Notice the angle-brackets around <SC>; they indicate that we're 
    dealing with a pseudo-modality code. Also, if such an entry exists, the
    images may be stored in <DICOM> format.)
  
   If no such entry is created in Modality.dic, the images will be 
   processed using the actual modality.
  
 * The DICOM Encapsulated PDF SOP Class is now supported.  This is 
   particularly useful for computer-generated reports, like visual
   fields.  (Patch 72 is required to display DICOM Encapsulated PDF
   objects.)
  
 * The Real-Time Storage Server Statistics will now show equipment as 
   'down' (instead of 'crashed') when the equipment is no longer connected
   to a Gateway.
  
 * The 'Transmit DICOM Images to a Storage SCP' option (2-8-2) can now 
   send images to a remote destination when the acquisition site differs
   from the local site. The acquisition site will also be displayed for
   images or exams selected using the 'Select DICOM Images for
   Transmission' option (2-8-1).
  
 * C-Store will automatically restart if a modality does not properly 
   close a Storage association.
  
 * Secondary Capture images are now processed according to the parameters 
   specified for the appropriate SOP class.
  
 * A new feature has been added to the 'Transmit DICOM Images to a Storage 
   SCP' option (2-8-2) that allows user to run 2-8-2 with and without the
   MAG_VISTA_SEND_IMAGE window being displayed.
  
 Routing Gateway Changes
 =======================
  
 * The keyword IF will now be recognized in routing rules (having the same 
   meaning as WHEN).
  
 * Rule evaluation is now based on Study, no longer on image (see Routing 
   User Guide for further explanation of this feature).
  
 Installation 
 ============
  
 Installation Planning
 =====================
  
 When planning the installation of Patch 54, the following factors should 
 be considered.
  
 * This patch is to be installed on the VistA System and on all DICOM 
   Gateways. KIDS installation will take less than one minute. DICOM
   Gateway installation will take 5 - 30 minutes based on workstation
   hardware.
  
 * Before installing the KIDS portion of Patch 54 on the VistA system, all 
   processing on all DICOM Gateways must be stopped.  Users may remain on
   the system during the KIDS installation.
  
 * After the KIDS portion of Patch 54 is installed, the client (DICOM 
   gateway) portion of Patch 54 must be installed on all gateways at once.
   Cache may remain active on DICOM Gateways being updated.
  
 * All DICOM Gateways must be updated to Patch 54 by the compliance date 
   listed for this patch.
  
 All of the installation instructions in this document should be reviewed 
 before beginning installation.
  
 NOTE After the installation of the Patch 54 KIDS, MSM will no longer be 
      supported on DICOM Gateways.
  
 NOTE Do not use Remote Desktop to install DICOM Gateway software.  
      Attempts to perform the installation using Remote Desktop will fail.
      Other applications such as PC Anywhere and DameWare may be used for
      remote installations.
  
 NOTE On the day before you plan to install the Patch 54 Gateway, run 
      option 1-11 "Purge Old DICOM Message Files" on the Text Gateway and
      clear out DICOM message files that are more than 15 days old.  (This
      is only needed if the Gateway sends DICOM messages to a commercial
      PACS.)
  
 Installation Prerequisites
 ==========================
  
 Before installing this patch, create a backup copy of current dictionary 
 (.dic) files.
  
 Also correct any failed images that may be present.  See Chapter 7 in the 
 VistA Imaging DICOM Gateway User Guide for detailed information.
  
 NOTE The Patch 54 KIDS cannot be installed if there are any uncorrected 
      images identified in the DICOM FAILED IMAGES File (#2006.575).
  
 NOTE It is required that all released VistA Imaging patches (KIDS) be 
      installed on the VistA System.
  
 Patch installation files can be downloaded from the Imaging FTP site.  
 All instructions in this section presume that files for this patch have
 been copied to a local storage location.  Files included with this patch
 are listed on page 2.
  
 VistA System (KIDS) Installation
 ================================
  
 1 For all DICOM gateways, ensure that processing is stopped.  To stop 
   processing, do the following for each active menu process/telnet window
   on a gateway:
  
   a Stop the process (use CTRL+C if needed).
  
   b Navigate to the main DICOM Gateway menu and enter 5 (Quit).
  
 NOTE This is preferable to using  to closes the window.
  
 2 Access the Kernel Installation and Distribution System Menu [XPD MAIN].
  
 3 Run the Installation option [XPD INSTALLATION MENU].
  
 4 Load the KIDS file by performing the following steps:
  
   a Run the Load a Distribution [XPD LOAD DISTRIBUTION] option to load
     the KIDS distribution.
  
   b When prompted, enter the path and file name (MAG3_0P54.KID) of the
     Patch 54 KIDS file that you downloaded from the Imaging FTP server.
  
   c When prompted to continue with the load, enter YES. 
  
   d When prompted for the Environment Check, enter YES.  
  
     Want to run the Environment Check Routine? YES// YES
  
 NOTE The environment routine will check the DICOM FAILED IMAGES File 
 (#2006.575) for failed images. If failed images entries are found, the
 load will still be completed but the KIDS installation cannot be performed
 until all failed images are addressed.
  
   e A Distribution OK! message will be displayed when the load is 
     complete.
  
 5 After you load the KIDS file, you may elect to use the following 
   options:
  
   a Verify Checksums in Transport Global [XPD PRINT CHECKSUM] - run this 
     option if you want to ensure the integrity of the routines in the
     patch.
  
   b Compare Transport Global to Current System [XPD COMPARE TO SYSTEM] - 
     run this option if you want to view all changes that will be made when
     the patch is installed. All components (routines, options, and so on)
     in the patch will be compared.
  
   c Backup a Transport Global [XPD BACKUP] - run this option if you want 
     to create a backup message of any routines exported with the patch. It
     will NOT back up any of the other changes.
  
 6 After performing the load and any optional verification steps, install 
   the KIDS file by performing the following steps:
  
   a Run the Install Package(s) [XPD INSTALL BUILD] option.
  
   b When prompted for the install name, enter MAG*3.0*54.
  
   c Answer NO to the following prompts:
  
     Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO//
     Want KIDS to INHIBIT LOGONs during the install? NO//
     Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO//
  
 7 When installation is finished, an Install Completed message will be 
   displayed.
  
 Note: Do not restart DICOM Gateway processes yet.  Perform the steps in 
       the DICOM Gateway Installation section on page 32 first.
  
 KIDS Installation Example
 =========================
  
 Select Kernel Installation & Distribution System Option: INSTallation
  
  
    1      Load a Distribution
    2      Verify Checksums in Transport Global
    3      Print Transport Global
    4      Compare Transport Global to Current System
    5      Backup a Transport Global
    6      Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 Select Installation Option: 1  Load a Distribution
 Enter a Host File: C:\MAG3_0P54.KID
  
 KIDS Distribution saved on May 05, 2009@15:01:54
 Comment: VistA Imaging V3.0 - Patch 54 - 05/05/2009 15:01PM
  
 This Distribution contains Transport Globals for the following Package(s):
 Build MAG*3.0*54 has been loaded before, here is when: 
       MAG*3.0*54   Install Completed
                    was loaded on Mar 18, 2009@07:51:45
       MAG*3.0*54   Install Completed
                    was loaded on Mar 18, 2009@08:04:03
       MAG*3.0*54   Install Completed
                    was loaded on Mar 31, 2009@08:29:09
       MAG*3.0*54   Install Completed
                    was loaded on Apr 30, 2009@07:03:51
       MAG*3.0*54   Install Completed
                    was loaded on Apr 30, 2009@13:26:41
 OK to continue with Load? NO// YES
  
 Distribution OK!
  
 Want to Continue with Load? YES// 
 Loading Distribution...
  
 Build MAG*3.0*54 has an Enviromental Check Routine
 Want to RUN the Environment Check Routine? YES// 
    MAG*3.0*54
 Will first run the Environment Check Routine, MAGENCHK
  
 Use INSTALL NAME: MAG*3.0*54 to install this Distribution.
  
    1      Load a Distribution
    2      Verify Checksums in Transport Global
    3      Print Transport Global
    4      Compare Transport Global to Current System
    5      Backup a Transport Global
    6      Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: MAG*3.0*54       Loaded from Distribution  
 5/11/09@09:37:40
      => VistA Imaging V3.0 - Patch 54 05/05/2009 15:01PM  ;Created o
  
 This Distribution was loaded on May 11, 2009@09:37:40 with header of 
    VistA Imaging V3.0 - Patch 54 -  05/05/2009 15:01PM  ;Created on May 
 05, 200 9@15:01:54
    It consisted of the following Install(s):
      MAG*3.0*54
 Checking Install for Package MAG*3.0*54
 Will first run the Environment Check Routine, MAGENCHK
  
  
 Install Questions for MAG*3.0*54
  
 Incoming Files:
  
  
    2005      IMAGE  (Partial Definition)
 Note:  You already have the 'IMAGE' File.
  
  
    2005.1    IMAGE  (Partial Definition)
 Note:  You already have the 'IMAGE' File.
  
  
    2006.539  DICOM UID SPECIFIC ACTION  (including data)
 Note:  You already have the 'DICOM UID SPECIFIC ACTION' File.
 I will OVERWRITE your data with mine.
  
  
    2006.563  DICOM GATEWAY PARAMETER  (Partial Definition)
 Note:  You already have the 'DICOM GATEWAY PARAMETER' File.
  
  
    2006.5641 DICOM GATEWAY MACHINE ID  (Partial Definition)
 Note:  You already have the 'DICOM GATEWAY MACHINE ID' File.
  
  
    2006.5714 DICOM INCOMPLETE OBJECT
 Note:  You already have the 'DICOM INCOMPLETE OBJECT' File.
  
  
    2006.5733 QUERY/RETRIEVE STATISTICS
 Note:  You already have the 'QUERY/RETRIEVE STATISTICS' File.
  
  
    2006.574  DICOM IMAGE OUTPUT
 Note:  You already have the 'DICOM IMAGE OUTPUT' File.
  
  
    2006.575  DICOM FAILED IMAGES
 Note:  You already have the 'DICOM FAILED IMAGES' File.
  
  
    2006.5821 CT CONVERSION PARAMETERS
 Note:  You already have the 'CT CONVERSION PARAMETERS' File.
  
  
    2006.5849 TELEREADER READ/UNREAD LIST
 Note:  You already have the 'TELEREADER READ/UNREAD LIST' File.
  
  
    2006.587  DICOM TRANSMIT DESTINATION
 Note:  You already have the 'DICOM TRANSMIT DESTINATION' File.
  
  
    2006.87   DICOM GATEWAY INFORMATION
 Note:  You already have the 'DICOM GATEWAY INFORMATION' File.
  
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO// 
  
  
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   HERE
  
  
  Install Started for MAG*3.0*54 : 
                May 11, 2009@09:38:48
  
 Build Distribution Date: May 05, 2009
  
  Installing Routines:.....................................................
 ...........
                May 11, 2009@09:38:49
  
  Running Pre-Install Routine: PRE^MAGIPS54.
  
  Installing Data Dictionaries: ...............
                May 11, 2009@09:38:49
  
  Installing Data: 
                May 11, 2009@09:38:50
  
  Installing PACKAGE COMPONENTS: 
  
  Installing REMOTE PROCEDURE.............
  
  Installing OPTION.......
                May 11, 2009@09:38:50
  
  Running Post-Install Routine: POST^MAGIPS54.
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  MAG*3.0*54 Installed. 
                May 11, 2009@09:38:50
  
 DICOM Gateway Installation
 ==========================
  
 DICOM detailed patch information and installation instructions can be 
 found in the MAG3_0P54_Patch_Description.pdf. 
  
 Routine Summary          
 ===============
  
 DICOM Gateway Routines 
 ======================
  
 New and modified routines for the Imaging DICOM Gateway are listed 
 below.  For each routine, the second line will contain the following
 information.  Please note the before checksum may differ if an Imaging
 Field Unit Test has been installed.
  
 New and modified routines for the VistA System are listed below. 
 CHECK1^XTSUMBLD is used to generate the checksums.
  
 Routine   Checksum  Checksum
 Name      Before     After  Patch List
  
 MAGBRTA5  73955450 73969329 **11,30,51,54**
 MAGBRTA6  12452954 12479695 **11,51,54**
 MAGBRTB2  61016885 62448973 **9,30,51,54**
 MAGBRTB3  21563007 21639509 **9,11,54**
 MAGDACP1  61032941 64531548 **21,11,30,51,69,54**
 MAGDACP2   5727935  5612621 **30,54**
 MAGDACP3  41778832 41171278 **30,69,54**
 MAGDACR1  34218850 33293963 **30,54**
 MAGDACR2  15377654 16258693 **30,54**
 MAGDACR3  52430516 55462381 **51,54**
 MAGDACU1  34572327 38544788 **30,51,54**
 MAGDACU2   7332522  7237662 **30,54**
 MAGDACU3   9013615  8904229 **30,54**
 MAGDACW1  48385556 48007177 **10,30,54**
 MAGDACW2  24930286 26199743 **10,30,54**
 MAGDAUD2  11683580 11632745 **10,11,30,51,54**
 MAGDBB    45698134 51899412 **9,10,11,30,51,69,54**
 MAGDBB2   21634234 22088679 **69,54**
 MAGDCST1  72726193 71046946 **10,30,51,54**
 MAGDCST2  31357754 32420227 **11,51,54**
 MAGDCST3  10315410 12356196 **51,54**
 MAGDCST4  35153452 38314573 **10,11,30,51,69,54**
 MAGDCST5   9052200 11640174 **10,11,54**
 MAGDDEL    5959957 4367093 **10,11,54**
 MAGDDEL2  31175540 31000923 **10,11,51,69,54**
 MAGDDEL3   7595442  7544616 **10,11,54**
 MAGDDR0   53870490 53556787 **1,10,51,54**
 MAGDDR1   48551870 48401978 **10,11,30,51,54**
 MAGDDR2   31291871 32387608 **10,11,30,54**
 MAGDDR2A  68350537 68048092 **1,10,51,54**
 MAGDDW0   18646497 18480829 **1,10,51,54**
 MAGDDW2   45709850 45331856 **10,30,51,54**
 MAGDDW3   37241382 35962080 **10,30,51,54**
 MAGDDW4   74068181 73618612 **1,10,51,54**
 MAGDEXC2  53421053 53045931 **11,69,54**
 MAGDFND0  24278809 23608364 **10,30,54**
 MAGDFND1  17562607 17372953 **51,54**
 MAGDFND2  82885818 82916429 **1,10,30,51,50,54**
 MAGDFND3  63176129 63710119 **10,30,51,54**
 MAGDFND4  20658902 23741315 **10,11,30,50,54**
 MAGDFND5  10060598 10032385 **10,30,54**
 MAGDFND9   5056425  5028212 **54**
 MAGDHRC0   6343536  7715030 **11,51,54**
 MAGDHRC1  34196996 32850852 **11,30,54**
 MAGDHRCP  33412064 33544282 **11,54**
 MAGDIR3   29883068 32120170 **10,54**
 MAGDIR6   63019298 64289349 **11,30,51,54**
 MAGDIR6B  16094855 17588775 **11,30,51,54**
 MAGDIR6C  29909153 33611700 **11,30,51,54**
 MAGDIR6D  24022985 24854094 **11,54**
 MAGDIR6E  23352595 23447535 **11,51,54**
 MAGDIR6F  19221912 19332518 **11,30,51,54**
 MAGDIR71  65797856 66334845 **11,30,51,50,54**
 MAGDIR74   6328826  6275398 **11,51,54**
 MAGDIR7C  69898811 70785160 **11,30,51,54**
 MAGDIR7D  15610601 20617095 **11,51,54**
 MAGDIW2A  39398462 40090331 **10,11,30,51,50,54**
 MAGDIW3   20255166 20270812 **10,30,50,69,54**
 MAGDIW3B  40423601 40511860 **11,30,51,50,54**
 MAGDIW3C  14759167 14730954 **10,51,54**
 MAGDIW4   20581991 20553778 **10,51,50,54**
 MAGDIWB1  68792564 70936816 **11,30,51,50,54**
 MAGDIWB2  79942689 86161827 **11,30,51,50,54**
 MAGDIWB5  72867229 94186343 **11,30,51,50,54**
 MAGDIWBA  79869622 81638859 **30,50,54**
 MAGDIWBB  69250591 69878204 **30,50,54**
 MAGDIWBC  88112705 86128746 **50,54**
 MAGDIWBD  11142738 21590116 **50,54**
 MAGDLOGN  76415767 69219103 **11,30,51,54**
 MAGDM2MB  17589826 16447591 **11,51,54**
 MAGDMENA  50444255 54060598 **9,21,10,11,30,69,54**
 MAGDMENL       new  7146964 **54**
 MAGDMENO  37791052 38759789 **11,30,51,50,69,54**
 MAGDMENU  48648672 49596722 **9,21,11,30,51,69,54**
 MAGDMFB1  90975135 81544111 **9,21,11,30,51,69,54**
 MAGDMFBB  53108146 50673336 **9,21,11,51,69,54**
 MAGDMFBE  61989197 69559531 **9,21,11,30,51,69,54**
 MAGDMFBM  85414926 76440452 **9,10,11,30,51,69,54**
 MAGDMFBN       new  5306612 **54**
 MAGDMFBS  49061654 49061654 **9,10,11,30,51,50,69,54**
 MAGDMFIC  51705421 51798367 **10,11,30,69,54**
 MAGDMLGV  73406133 73643867 **21,10,11,30,54**
 MAGDMLOG  34904846 31647401 **9,10,30,51,54**
 MAGDMMSG  43543314 53806690 **21,11,30,51,50,54**
 MAGDMSGT       new  9623232 **54**
 MAGDQR15  17332163 16568428 **54**
 MAGDQUE0  30791146 30499869 **30,54**
 MAGDQUE4  27792543 27764385 **30,51,54**
 MAGDSTA1   6472482  6477867 **11,54**
 MAGDSTAT  66606435 68354778 **10,11,30,69,54**
 MAGDSTRT  46356300 52825843 **21,11,30,51,69,54**
 MAGDTCP   13570343 14101280 **30,54**
 MAGDTCP1   6357008  6918159 **30,54**
 MAGDTCP2  69761862 69855871 **30,54**
 MAGDTCP3  27946139 27934440 **30,51,54**
 MAGDUID1  17376900 17581821 **21,10,11,50,54**
 MAGDUID4       new  6700589 **54**
 MAGDVRSN  21494160 21494160 **1,7,9,26,21,10,36,3,11,30,
                               5,51,50,52,69,75,102,103,54**
 MAGDWLP2  26804794 29541987 **11,30,50,54**
 MAGDWLP3   3969579  3990165 **11,54**
 MAGDWLU1  38731135 38702922 **21,10,30,51,54**
 MAGM2VC   57573713 57774863 **11,30,51,69,103,54**
 MAGOSFIL  37905396 38021742 **11,69,54**
 MAGOSMSC  44422945 50373718 **69,54**
 MAGOSTCP  33263615 33974021 **11,30,69,54**
 XLFDT1          -- 6255536  This is a Kernel routine referenced
                             by the Gateway software.  It is not
                             modified in this patch.
  
 VistA Routines
 ==============
  
 For each routine, the second line will contain the following information. 
 Please note that the before checksum may differ if any test software has 
 been installed.
  
         <tab>;;3.0;IMAGING;**54**;July 03, 2009
  
 New and modified routines for the VistA System are listed below. 
 CHECK1^XTSUMBLD is used to generate the checksums.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAG7UM
    Before: B23964940   After: B23898950  **11,54**
Routine Name: MAGBRTE4
    Before: B80308391   After: B74476689  **11,30,51,85,54**
Routine Name: MAGBRTE5
    Before: B38970205   After: B47168607  **11,30,51,85,54**
Routine Name: MAGBRTUT
    Before: B44439840   After: B44621391  **9,11,30,51,50,85,54**
Routine Name: MAGDCCS
    Before: B61691051   After: B64783985  **10,11,85,54**
Routine Name: MAGDCCS2
    Before: B15096146   After: B16336800  **10,11,30,54**
Routine Name: MAGDCCU1
    Before:       n/a   After: B26965378  **54**
Routine Name: MAGDHL7
    Before: B23890484   After: B23868283  **11,30,86,54**
Routine Name: MAGDHLE
    Before:  B9654258   After:  B9902651  **54**
Routine Name: MAGDHRC0
    Before:  B7139686   After:  B7715030  **46,54**
Routine Name: MAGDHWC
    Before: B46727596   After: B46762790  **10,51,46,54**
Routine Name: MAGDHWS
    Before: B26938069   After: B26963690  **10,11,51,84,85,54**
Routine Name: MAGDIR8
    Before: B11043357   After: B10992780  **11,51,54**
Routine Name: MAGDIR81
    Before: B75253415   After: B74364862  **11,30,51,50,46,54**
Routine Name: MAGDIR82
    Before: B62866214   After: B63521425  **11,30,51,20,54**
Routine Name: MAGDIR83
    Before: B24672823   After: B24823552  **11,30,51,54**
Routine Name: MAGDIR84
    Before: B18610621   After: B17691728  **11,54**
Routine Name: MAGDIR9A
    Before: B49652107   After: B51676993  **11,30,51,46,54**
Routine Name: MAGDIR9B
    Before: B17634090   After: B19108558  **11,51,50,54**
Routine Name: MAGDIR9E
    Before: B69820632   After: B68376397  **11,51,46,54**
Routine Name: MAGDIRVE
    Before: B66702010   After: B64787457  **11,30,54**
Routine Name: MAGDLB1
    Before: B50516394   After: B53612286  **11,30,54**
Routine Name: MAGDLBAA
    Before: B12734072   After: B12894366  **11,51,54**
Routine Name: MAGDMEDL
    Before: B19875835   After: B20217185  **51,54**
Routine Name: MAGDQR00
    Before:  B3096939   After:  B3247668  **51,54**
Routine Name: MAGDQR01
    Before: B25742875   After: B45027255  **51,54**
Routine Name: MAGDQR02
    Before: B75305659   After: B67333649  **51,54**
Routine Name: MAGDQR03
    Before: B63890253   After:B150326376  **51,54**
Routine Name: MAGDQR04
    Before: B52493648   After: B73426432  **51,54**
Routine Name: MAGDQR05
    Before:       n/a   After: B45801758  **54**
Routine Name: MAGDQR06
    Before:       n/a   After: B31960461  **54**
Routine Name: MAGDQR07
    Before:       n/a   After: B30347605  **54**
Routine Name: MAGDQR08
    Before:       n/a   After: B33379098  **54**
Routine Name: MAGDRA2
    Before: B25261561   After: B25170126  **10,11,51,54**
Routine Name: MAGDRCU1
    Before: B29209213   After: B29329943  **10,30,54**
Routine Name: MAGDRCU2
    Before: B38123577   After: B37774357  **10,11,51,54**
Routine Name: MAGDRPC1
    Before: B57373178   After: B45275966  **11,30,51,50,54**
Routine Name: MAGDRPC2
    Before: B66416501   After: B65411497  **11,30,51,50,54**
Routine Name: MAGDRPC3
    Before: B64691096   After: B64771366  **11,30,51,50,85,54**
Routine Name: MAGDRPC4
    Before: B74521195   After: B79966759  **11,30,51,50,54**
Routine Name: MAGDRPC5
    Before: B81521995   After: B81877416  **11,30,51,85,54**
Routine Name: MAGDRPC6
    Before: B36593110   After: B36205278  **11,30,51,54**
Routine Name: MAGDRPC7
    Before: B33129765   After: B36219173  **11,51,54**
Routine Name: MAGDRPC8
    Before: B49397368   After: B62107213  **11,30,51,54**
Routine Name: MAGDRPC9
    Before: B29652420   After: B42474076  **50,54**
Routine Name: MAGDRUID
    Before:       n/a   After:  B4073143  **54**
Routine Name: MAGDTR02
    Before: B34387376   After: B34307133  **46,54**
Routine Name: MAGDTR03
    Before: B74996162   After: B73363614  **46,54**
Routine Name: MAGDTR05
    Before: B47917279   After: B47569511  **46,54**
Routine Name: MAGDTR06
    Before: B24321973   After: B25510598  **46,54**
Routine Name: MAGDUID3
    Before:       n/a   After:  B4496619  **54**
Routine Name: MAGENCHK
    Before:       n/a   After:  B4666319  **54**
Routine Name: MAGIPS54
    Before:       n/a   After: B43549700  **54**
Routine Name: MAGUE001
    Before:       n/a   After:  B8353040  **54**
Routine Name: MAGUE002
    Before:       n/a   After:  B6508124  **54**
Routine Name: MAGUE003
    Before:       n/a   After:  B3998805  **54**
Routine Name: MAGVCHK
    Before: B21002170   After: B23304941  **51,54**
Routine Name: MAGXCVC
    Before: B40612890   After: B40623229  **17,25,31,54**
Routine Name: MAGXCVI
    Before: B45658217   After: B45675104  **17,25,31,54**
Routine Name: MAGXCVP
    Before: B27517218   After: B27908665  **17,25,31,54**
Routine Name: MAGXCVR
    Before: B56875627   After: B56935964  **17,25,31,54**
Routine Name: MAGXCVS
    Before: B52829212   After: B57771019  **17,25,31,54**
Routine Name: MAGXIDXU
    Before: B81000648   After: B82620851  **61,54**
 
Routine list of preceding patches: 20, 31, 46, 61, 85, 86

=============================================================================
User Information:                          Hold Date     : OCT 28, 2009
Entered By  : CASUGAY,ELSIE G               Date Entered  : DEC 21, 2004
Completed By: TROMBETTA,KATHY               Date Completed: SEP 28, 2009
Released By : WARK,PATRICK T                Date Released : OCT 28, 2009
=============================================================================


Packman Mail Message:
=====================

No routines included
