
=============================================================================
Run Date: AUG 20, 2007                     Designation: MAG*3*81
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #50                      Status: Released
                  Compliance Date: SEP 20, 2007
=============================================================================


Subject: BACKGROUND PROCESSOR VERIFIER UPDATES

Category: 
  - Routine

Description:
============

 Imaging patch MAG*3.0*81 is a maintenance patch that addresses Remedy 
 Tickets for components of the Background Processor, including the Queue
 Processor, the BP Purge, and the BP Verifier.
  
 The purpose of Patch 81 is to:
  
 1)   Enable the BP applications to continue to process when there are 
      duplicate Jukebox shares.
 2)   Eliminate the requirement for a JB volume label for the Background 
      Processor applications.
 3)   Add a column to the NoArchive Report to indicate that the Image Audit
      file (#2005.1) has an entry but no image file.
 4)   Enforce strict version control between the Background Processor 
      Windows executables and the Vista Imaging Host system.
 5)   Correct the verification of Gross Autopsy Lab Image captures
      (eliminate false reporting of patient integrity issues).
 6)   Enable the TIMEOUT WINDOWS VISTARAD field (#123) in the Imaging Site
      Parameter file (#2006.1) to be edited on the BP Site Parameter window. 
 7)   Remove dormant M procedure calls from M routines.  Dormant M procedure
      calls are being removed from the M routine MAGQBUT2: VSTAV, IWSV, 
      DICOMV, VISTARV and SNS.
 8)   Include in the BP Verifier scan all images whose ACQUISITION SITE 
      (#.05) is designated as an Associated Institution of the Imaging 
      platform being verified.
 9)   Provide a method of removing RPCs from MAG WINDOWS and the REMOTE 
      PROCEDURE FILE (#8994) to allow for RPC updates in the current KIDS.
 10)  Resolve memory leaks imposed by the KERNEL Broker patch  XWB*1.1*40.
 11)  Report on IMAGE (#2005) and IMAGE AUDIT (#2005.1) entries that are 
      missing the ACQUISITION SITE (#.05) field.
 12)  Allow the BP Purge to continue processing when it encounters images 
      with a missing ACQUISITION SITE (#.05) field.
 13)  Update the Queuer function such that image entries in the input range
      acquired from Associated Institutions are included in the queue.
 14)  Update the BP Purge and BP Queue Processor executables to terminate
      cleanly when the user decides to <Cancel> rather than log in when 
      prompted for the Access and Verify codes.
 15)  Update the BP Verifier to comply with SOP 192-352 Displaying Patient
      Sensitive Data.  The mailed "Imaging Integrity Check  report will have
      neither patient name nor any patient ID included in its content.
  
 Terms of Use
 ============
  
 FDA regulations require that each Imaging software distribution is 
 documented and tracked by the VistA Imaging project.
  
 To receive this patch, sites must have a Site Agreement filed with and 
 approved by the VistA Imaging Group.
  
 For information about the status of a Site Agreement, contact the VistA 
 Imaging Distribution Manager (VHAVISiteFeedback@va.gov).
  
 This patch can be downloaded from:
 =================================
  
 ftp.imaging.med.va.gov/Software/Released_Software/Mag3_0P81
  
 There may be a brief delay between the distribution of this message and 
 the availability of the patch at the FTP site.
  
 Documentation will also be posted at
 http:/vaww.va.gov/Imaging/3.0patches.htm shortly after this patch is
 released.
   
 Patch Contents:
 ==============
   
 This patch includes the following software:
  
 MAG3_0P81.KID   KIDS (Kernel Installation & Distribution System) package to
                 be installed on the VistA hospital information system.
  
 MagBPSetup.exe   Installation file for BP Queue Processor, Verifier and 
                  Purge client software.
  
 This patch includes the following documentation:
  
 MAG3_0P81_Patch_Description.pdf   This document.
  
 MAG_Verifier_User_Manual.pdf   Verifier User Manual.
  
 Test sites for this patch:
 =========================
  
  Little Rock, AK (Large)
  Atlanta, GA (Large)
  VISN 15 (Integrated)
  
 Associated Remedy Calls:
 =======================
  
  154046 Verifier Message - You have multiple, on-line Jukebox 
         shares with the same physical reference.
  155622 Unable to Verify a set of IEN's.
  155709 Verifier receives error and drops out.
  163698 REQUIRE ASSISTANCE WITH BP VERIFIER OUTPUTS.
  164089 DFN_Error_Log - Invalid Image Ptr to AP.
  167168 I get an Error multiple Jukebox shares with the same 
         physical reference.
  183288 Partially un-retrievable Vista Imaging study.
  186804 Getting error: "You have multiple, on-line Jukebox 
         shares with the same physical reference.
  
 Associated E3R (Electronic Error and Enhancement Reporting) entries:
 ===================================================================
  
 N/A
  
 Remote Procedure Calls:
 ======================
  
 The following remote procedure has been added in this patch:
  
 * MAGQ VOK
  
 Data Dictionaries:
 =================
  
 N/A
  
 Routine Summary:
 ===============
  
 New and modified routines for the VistA Imaging Host are listed below. For
 each routine, the second line will contain the following information. 
 Please note the before checksum may differ if any test software has been
 installed.
  
           <tab>;;3.0;IMAGING;**81**; 31-January-2007
  
 New and modified Imaging routines for the VistA System are listed below.
  
  Routine       CHECK^XTSUMBLD      CHECK1^XTSUMBLD     Patch List
               Before     After     Before    After|TAB|
 MAGIP81       new        new        new      4894048  **81**
 MAGQBPG1      16223889  16837983  74002571  76244753  **7,8,20,81**
 MAGQBPRG      10737799  10882862  57111603  57300845  **7,3,8,20,81**
 MAGQBTM       14327846  14516503  79154449  79858508  **1,7,8,20,81**
 MAGQBUT1      16717752  17078859  75489141  76309021  **7,8,20,81**
 MAGQBUT2      15318127  13777681  73670919  55361113  **7,8,20,81**
 MAGQBUT4      12529641  12489564  78268087  78049028  **7,8,48,20,81**
 MAGQBUT5       7229761   7703732  13804118  15869460  **20,81**
  
 Installation Prerequisites:
 ==========================
  
 Before installing this patch, you will need to download the Patch 81 files
 from the Imaging FTP site to a local storage location.
  
 Verify that the patches listed in the Required Patches section on page 2 
 have been installed.  
  
 The Background Processor must be stopped prior to the installation of the
 KIDS and Client software.
  
 Installation Instructions:
 =========================
  
 This patch is to be installed on the VistA System and on the client BP 
 workstation(s).  The installation of this patch must be coordinated with 
 VistA Imaging Coordinator.  
  
 Detailed patch information and installation instructions for the client
 BP workstation can be found in the MAG3_0P81 Patch Description. Any 
 late-breaking information will be documented in a readme file.
  
 This patch can be installed while the VistA Imaging System is 
 active.
  
 KIDS installation will take less than three minute(s). The client 
 installation will take less than two minutes.
   
 VistA Host (KIDS) Installation:
 ============================== 
  
 1. Access the Kernel Installation and Distribution System Menu [XPD MAIN].
  
 2. Run the Installation option.
  
 3. Load the KIDS file by performing the following steps.
  
    a.  Run the Load a Distribution [XPD LOAD DISTRIBUTION] option to load 
        the KIDS distribution.
  
    b.  When prompted, enter the path and file name (MAG3_0P81.KID) of the
        Patch 81 KIDS file that you downloaded from the Imaging FTP 
        server.
  
    c.  When prompted to continue with the load, enter YES.  A Distribution
        OK! message will be displayed when the load is complete.
        
 4. After loading the KIDS file, use the following menu options to verify
    the contents of the patch and to back up any affected routines.
  
    Verify Checksums in Transport Global [XPD PRINT CHECKSUM] - run this 
    option if you want to ensure the integrity of the routines in the
    patch.
  
    Compare Transport Global to Current System [XPD COMPARE TO SYSTEM] -
    run this option if you want to view all changes that will be made when
    the patch is installed.  All components (routines, options, and so on)
    in the patch will be compared.
  
    Backup a Transport Global [XPD BACKUP] - run this option if you want to
    create a backup message of any routines exported with the patch.  It 
    will NOT back up any of the other changes.
  
 5. After performing the load and any optional verification steps, install
    the KIDS file by performing the following steps:
  
    a.  Run the Install Package(s) option.
  
    b.  When prompted for the install name, enter MAG*3.0*81.
  
    c.  Answer NO to the following prompts:
  
    Want KIDS to Rebuild Menu Trees Upon Completion of Install? Yes//NO
    Want KIDS to INHIBIT LOGONs during the install? No//NO
    Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES//NO
  
 6. When installation is finished, an Install Complete message will be
    displayed.

Routine Information:
====================
Routine Name: MAGIP81
    Checksum:
  4894048
Routine Name: MAGQBPG1
    Checksum:
  76244753
Routine Name: MAGQBPRG
    Checksum:
  57300845
Routine Name: MAGQBTM
    Checksum:
  79858508
Routine Name: MAGQBUT1
    Checksum:
  76309021
Routine Name: MAGQBUT2
    Checksum:
  55361113
Routine Name: MAGQBUT4
    Checksum:
  78049028
Routine Name: MAGQBUT5
    Checksum:
  15869460

=============================================================================
User Information:
Entered By  : SHOVESTUL,MARYANN             Date Entered  : JUL 06, 2006
Completed By: TROMBETTA,KATHY               Date Completed: AUG 20, 2007
Released By : BLACK,KATHLEEN                Date Released : AUG 20, 2007
=============================================================================


Packman Mail Message:
=====================

No routines included
