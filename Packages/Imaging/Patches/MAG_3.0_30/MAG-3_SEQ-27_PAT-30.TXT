List of VISTA server and DICOM Gateway routines are in the MAG3_0P30_Patch_Desc.pdf document
=============================================================================
Run Date: NOV 05, 2004                     Designation: MAG*3*30
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #27                      Status: Released
                  Compliance Date: DEC 06, 2004
=============================================================================

Associated patches: (v)MAG*3*10    <<= must be installed BEFORE `MAG*3*30'
                    (v)MAG*3*11    <<= must be installed BEFORE `MAG*3*30'
                    (v)MAG*3*27    <<= must be installed BEFORE `MAG*3*30'
                    (v)MAG*3*29    <<= must be installed BEFORE `MAG*3*30'
                    (v)MAG*3*40    <<= must be installed BEFORE `MAG*3*30'

Subject: DICOM Gateway Maintenance

Category: 
  - Routine
  - Other
  - Data Dictionary

Description:
============

 Imaging patch MAG*3*30 DICOM maintenance contains a number of fixes for 
 released patches 29 and 11, also contain several fixes issues as Field
 Unit Tests (FUT 20 and 39).  The following is a brief outline on what is
 being corrected.  Please review the MAG3_0P30_Patch_Desc.pdf file for more
 details.
  
 DICOM Gateway changes:
 . Corrects the problems related to the processing of SSN from HL7 
   messages.
  
 . Corrects the problem of issuing a fatal error when attempting to delete
   a non-existent file. 
  
 . In the InstallShield program for the "abstract creator" product, changed
   the word "thumbnail" to "Abstract". 
  
 . Corrects the error "<UNDEF>FINDFILE+35^MAGFILEB:1"; incorrect parameter
   value was being sent to an Imaging RPC call. 
  
 . Corrects the message on the DICOM Gateway that were erroneously 
   reporting the missing patches.
  
 . Correctly builds the icon for 'Start all DICOM Gateway functions".
  
 . When an end-user attempts to enter a TCP/IP address that is longer than
   30 characters, issue a warning that a shorter name must be selected.
  
 . Invalid entries in file SCU_LIST.dic do not create errors and displays a
   more user-friendly warning.
  
 . Corrects error <SBSCR>PASS1+33^MAGDMFB3.  This error was the result of a
   DICOM tag that is not present in the Element.dic file; the program will
   now stop process when such an event is encountered.  Note: errors of
   this kind only occur when unauthorized modifications are made to the
   master file Template.dic.
  
 . When the "domain" of the site has not yet been defined on the DICOM
   Gateway and a condition has been met to send an email message. A warning
   message will appear that encourages the end-user to run menu option
   4-2-2 (Update Gateway Configuration Parameters) first.
  
 . Corrects this error <UNDEF>MISMATCH+4^MAGDIRVE. A routine was modified
   to be more graceful about situations where images have been deleted.
  
 . A warning message is issued when the login program cannot complete
   because of an error on the VISTA side during login.  Such errors only
   occur when sites make local modifications to the Kernel Login software.
  
 . Corrected the time out problem on HL7 messages to complete on the VistA
   server; time has been expanded from 30 to 60 seconds. 
  
 . Corrects the page header for the final page on DICOM Gateway menu option
   to display the Modality Statistics.
  
 . M2M Broker disruption during Exam Complete processing.  MSM "clobbers"
   open TCP/IP sockets when a new port is opened in "listener" mode. A
   modification was made so that no further attempts will be made to use
   any "clobbered" socket.
  
 . Routing software will no longer display the passwords when connecting to
   Routing shares.
  
 . A log-message was added to a Routing routine to confirm entering 
   route-balanced entries into the transmission queue. 
  
 . Corrects the issue with routing rules containing a date/time valued
   parameter.
  
 . Starting the Routing Transmitter for "consolidated" sited will now
   obtain a list of valid destination before asking the end-user which
   origin to use for the transmitter to be started.
  
 . A warning message is issued when Routing is configured to be active,
   but is not being used.
  
 VistA Server changes:
 . Deletes obsolete Imaging dictionaries. 
     Files: DICOM UNDEFINED MODALITIES, #2006.592, 
            DICOM INCOMPLETE IMAGE, #2006.593
            DICOM ROUTINE COPY, #2006.79
  
 . Corrects the error "%DSM-E-NULLSUBSCR" . The patient name contained a
   vertical bar ("|"). This is the delimiter for the RPC message. The value
   of MAGIEN was off because it came after the patient name and was being
   read from a different piece.
  
 . Added to the Monthly Usage Report mail-message the "BP VERS NUM DATE"
   entry; this is the Background Processor version number and date
   creation.
  
 . Corrects the missing parameter in the call to RPC MAG DICOM TEXT
   AUDIT GET). 
  
  
 NOTE:    All sites running VISTA Imaging 3.0 that have implemented DICOM 
 Gateways must install both the KIDS portion on their VISTA system and the 
 client portions of this patch on all relevant client systems.
  
 Vista Imaging 2.5 sites should not install this patch. 
  
 This patch can be downloaded from:
 ==================================
 ftp.imaging.med.va.gov/software/released software/mag3_0p30
  
 This patch consists of the following file:
 MAG30P30.ZIP - Download the file from the Imaging FTP folder.  This file 
 contains the entire patch 30 files required for an automatic installation 
 on the Imaging DICOM gateways as well as the KIDs application for 
 upgrading the VistA server (hospital server).
  
  
 The following is the structure of MAG30P30.ZIP when unzipped:
 Directories:
  . Adobe - has Adobe Reader v5.0 (ar505enu.exe)
  . DICOM - All the files needed to install the DICOM Gateway software
  . Documentation- Patch 30 documentation and installation instructions
  . Patch_30 - has the MAG30P30.KID (Kernel Installation & Distribution 
            System) package to be installed on the VISTA hospital
            database.
 The following files are located in the Documentation folder mentioned
 above:
  . MAG3_0P30_Patch_Desc.pdf - Patch 30's description and software 
             installation instructions.
  . DICOMIG.pdf - Imaging DICOM Gateway Installation Guide.
  . MAG3_IMGerrormsg - Imaging System Error Message Guide.  This guide 
             provides detail information on possible error messages for the
             Imaging systems.
  
 Terms of use:
 =============
 FDA regulations require that each Imaging software distribution is
 documented and tracked by the VISTA Imaging project. To receive this
 patch, sites must have a Site Agreement filed with and approved by the
 VISTA Imaging Group. For information about the status of a Site Agreement,
 contact the VISTA Imaging Distribution Manager via phone (301-734-0357) or
 email (Kathy.Trombetta@med.va.gov). 
  
  
 NOIS Entries:
 =============
  
 The following NOIS (National Online Information System) entries are
 addressed in this patch:
  
 HUN-0504-21874    HOU-0604-70933    HOU-0604-70936
 MUS-0504-71591    NCH-0604-40409    TAM-0504-31452
 CIN-0504-41164    CTX-0504-71448    ECH-0504-51948
 FAV-0504-70570    PHI-0504-21968    PRE-0504-61375
 PRO-0604-10477    REN-0504-60480    UNY-0604-10202
 DAN-0604-41100    DAN-0604-41101    ELP-0504-70721
 PRO-0504-11116    BHS-0604-11135    CON-0604-10408
 HUN-0404-21849    POR-0604-50611    MIW-0504-41706
 MUS-0504-71883    WBP-0504-21237    MAD-0504-41541
 MEM-0504-71323    CMS-0504-30853    MEM-0504-70575
 WPB-0504-31218    HWH-0504-41630    ATG-0504-31981
 BIR-0504-32137    DUR-0504-31736    LEB-0504-21429
 OKL-0504-71898    STX-0604-70527    ELP-0404-71851
 NOL-0504-71967    PHO-0504-62054    PHO-0604-60106
 BED-0604-10364    MAD-0504-41775    PHI-0504-21988
 TNV-0604-30904    CPH-0604-40476    COS-0504-41635
 CAH-0604-30344    HUN-0604-20019    LIT-0604-70562
 HOU-0604-70507    HWH-0504-41467    LIT-0604-70647
 CTX-0604-71283    HWH-0504-41467    TNV-0604-31379
 ANC-0404-50489    DAY-0604-41808    CAH-0604-31630
 ELP-0404-71851    NOL-0504-71967    HWH-0604-40425
  
  
  
 Test sites for this patch:
 ==========================  
 Fayetteville, NC
 Houston, TX
 Tampa, FL
 Loma Linda, CA
 Columbia, SC 
  
 Installation instructions: 
 =========================== 
 Installation instructions for both the KIDS application to be installed 
 on the VistA server as well as the automatic software installation on the 
 DICOM Gateway servers is located in the MAG3_0P30_Patch_Desc.pdf 
 document. 

Routine Information:
====================

=============================================================================
User Information:
Entered By  : BARRIOS,LUCILLE               Date Entered  : OCT 30, 2003
Completed By: CARR,ROSEMARY                 Date Completed: NOV 03, 2004
Released By : LOVING,MANLEY                 Date Released : NOV 05, 2004
=============================================================================


Packman Mail Message:
=====================

