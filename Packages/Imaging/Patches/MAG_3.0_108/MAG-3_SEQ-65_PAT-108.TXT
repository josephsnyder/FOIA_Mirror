
=============================================================================
Run Date: AUG 20, 2010                     Designation: MAG*3*108
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #65                      Status: Released
                  Compliance Date: SEP 19, 2010
=============================================================================

Associated patches: (v)MAG*3*59    <<= must be installed BEFORE `MAG*3*108'
                    (v)MAG*3*93    <<= must be installed BEFORE `MAG*3*108'

Subject: IMPORT API ENHANCEMENTS

Category: 
  - Routine

Description:
============

 The Import API (Application Programming Interface) Active X control was
 built in VistA Imaging patches 15 and 38 and is used to allow non-imaging
 VA and commercial applications to import images into the VistA database
 and connect them to the patient record. 
  
 The Import API is used by the VA Veteran's ID Card (VIC) and Clinical 
 Procedures applications, as well as commercial applications such as 
 iMed consent and DocManager. The VIC software is used to acquire 
 photographic images of patients. These images are sent to the National
 Card Management Directory (NCMD).A copy of these photo images are also
 automatically sent to VistA Imaging through the VistA Imaging Import API. 
  
 The VIC Program Office has requested enhancements to the VistA Imaging
 API to make sure that VistA Imaging has the most recent copy of the 
 patient photo on file. If no photo exists in VistA Imaging the VIC will
 send the latest photo on file for the patient. The VIC application will
 be responsible for submitting new import requests for these patients
 through the VistA Imaging API. 
  
 Additionally Patch 108 modifies the Active X control to offer new 
 capabilities to applications using the Import API. 
  
 Patch 108 adds the following functions to the existing Import API:
  * Ability to check VistA Imaging and verify if a patient has a 
    photo ID on file in VistA Imaging.
  * Ability to retrieve a current list of indexing terms.
  * Ability to send index terms in the Import API when importing
    images.
  * Ability to create a new TIU Note. 
  
 NOTE: All sites running VistA Imaging 3.0 must install the KIDS portion
       of this patch. 
  
 NOTE: The Active X control is distributed to the application developers
       who build and maintain the applications that use the Import API.
  
 Distribution of Software
 ========================
  
 This patch can be downloaded from:
  
 ftp.imaging.med.va.gov/Software/Released_Software/Mag3_0P108
  
 NOTE: There is no client application being distributed with this patch.
  
 NOTE: Any late-breaking news about this patch will be found in a readme 
       file.  If present, this file will also be located in the MAG3_0P108
       directory.
  
 Patch Contents
 ==============
  
 This patch includes the following files:
  
 MAG3_0P108.KID   KIDS (Kernel Installation & Distribution System) package
                  to be installed on the VistA System.
  
 MAG3_0P108_PatchDescription.pdf   Detailed patch description and 
                                   installation instructions.
  
 MAG3_0P108_Imaging_Systems_Technical_Manual_changes.pdf
                                   Contains changes made to the Imaging
                                   Systems Technical Manual to match
                                   functionality changes implemented in 
                                   this patch.
  
 VistA_Imaging_System_Import_API_Programmer_Guide.pdf
                                   Programmer's guide for using VistA 
                                   Imaging's Import API.
  
 Associated Patches
 ==================
  
 Before Patch 108 is installed, the following patches must be installed:
  
   MAG*3.0*93
   MAG*3.0*59
  
 For a list of all released Imaging (MAG) patches, refer to the 
 patch_list.txt file available on the Imaging FTP server (go to 
 ftp://ftp.imaging.med.va.gov, and then navigate to the 
 \Docs\Imaging_Docs_Latest folder). If the FTP link does not connect you
 to the site then cut and paste the link in to your web browser or 
 Explorer window. 
  
 Test Sites
 ==========
  
 The following sites are test sites for this patch:
  
 Baltimore, MD (Integrated)
 El Paso, TX (Medium)
 Washington, DC (Large)
 West Palm Beach, FL (Large)
 Wilmington, DE (Medium)
  
 Remedy Calls
 ============
  
 There are no Remedy calls addressed in this patch.
  
 NSR Entries
 ===========
  
 There are no NSR Entries addressed in this patch.
  
 Patch 108 Changes
 =================
  
 Patch 108 contains changes to the Import API.
  
 VistA Imaging Import API Changes
 ================================
  
  * Patient Photo ID
  
    An API user can use the Import API to send a query to see if 
    a patient has a photo ID on file in VistA Imaging. 
  
    - The API will return a (0) if a photo does not exist. 
    - The API will return a Procedure Date/Time Timestamp of the
      most recent photo.
  
  * Index Terms
  
    Provide Index Term capabilities
  
     - Provide a list of index terms for Types, Specialty/Sub 
       Specialty, Procedures, and Origin.
     - Provide the ability to send index terms in the Import API 
       while importing images to VistA Imaging.
  
  * Creating a New TIU Note
  
    Users of the Import API can create new TIU notes and link images
    to the notes. TIU notes can be unsigned or electronically filed 
    through the Import API.
  
  * Origin Index
  
    The default value of the origin index is set to VA.
  
 Data Dictionaries
 =================
  
 There are no new or modified data dictionaries included in this patch.
  
 Security Keys
 =============
  
 There is no new or modified security keys included in this patch.
  
 Remote Procedures
 =================
  
 The following new remote procedures are included in this patch:
  
  MAG4 INDEX GET EVENT
  MAG4 INDEX GET ORIGIN
  MAG4 INDEX GET SPECIALTY
  MAG4 INDEX GET TYPE
  MAGN PATIENT HAS PHOTO
  
 Menu Options
 ============
  
 There are no new or modified menu options included in this patch.
  
 Templates
 =========
  
 There are no new or modified templates included in this patch.
  
 Client Software Changes
 =======================
  
 There are no client software changes in this patch.
  
  
 Installation
 ============
  
 This patch is to be installed on the VistA System.  There are no client
 routines or executables in this patch. Patch 108 is a KIDS package 
 installation only. This patch may be loaded while users are on the system.
 Installation will take approximately one minute. 
  
 Installation Prerequisites
 ==========================
  
 Before installing this patch, you will need to download the Patch 108 
 files from the Imaging FTP site to a local storage location.
  
 Verify that the patches listed in the Associated Patches section of 
 this document have been installed.
  
 VistA System (KIDS) Installation
 ================================
  
 Installing the KIDS Package:
  
 1 Access the Kernel Installation and Distribution System Menu [XPD MAIN].
  
 2 Run the Installation option [XPD INSTALLATION MENU].
  
 3 Load the KIDS file by performing the following steps.
  
   a Run the Load a Distribution option [XPD LOAD DISTRIBUTION] to load the
     KIDS distribution.
   b When prompted, enter the path and file name (MAG3_0P108.KID) of the 
     Patch 108 KIDS file that you downloaded from the Imaging FTP server.
   c When prompted to continue with the load, enter YES.  A Distribution 
     OK! message will be displayed when the load is complete.
  
 4 After loading the KIDS file, use the following options to verify the 
   contents of the patch and to back up any affected routines.
  
     Verify Checksums in Transport Global [XPD PRINT CHECKSUM]   run this 
       option if you want to ensure the integrity of the routines in the 
       patch. 
  
     Compare Transport Global to Current System [XPD COMPARE TO SYSTEM]   
       run this option if you want to view all changes that will be made
       when the patch is installed.  All components (routines, options, and
       so on) in the patch will be compared.
  
     Backup a Transport Global [XPD BACKUP]   run this option if you want 
       to create a backup message of any routines exported with the patch.
       It will NOT back up any of the other changes.
  
 5 After performing the load and any optional verification steps, install 
   the KIDS file by performing the following steps:
  
   a Run the Install Package(s) [XPD INSTALL BUILD] option.
   b When prompted for the install name, enter MAG*3.0*108.
   c Answer NO to the following prompts:
  
     Want KIDS to INHIBIT LOGONs during the install? No//NO
     Want to DISABLE Scheduled Options, Menu Options, and Protocols? No//NO
  
 6 When installation is finished, an Installed message will be displayed.
  
 Select INSTALL NAME: MAG*3.0*108        Loaded From Distribution 
 5/21/10@07:37:55
  
 =>      VISTa Imaging V3.0  Patch 108   05/20/2010 14:22PM; Created o
  
  
 This Distribution was loaded on May 21, 2010@07:37:55 with header of 
 y   VistA Imaging V3.0 - Patch 108 -05/20/2010 12:24PM  ;Created on May 
 20, 2010@15:22:13
    It consisted of the following Install(s):
     MAG*3.0*108
 Checking Install for Package MAG*3.0*108
  
 Install Questions for MAG*3.0*108
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   HERE
  
  
 Install Started for MAG*3.0*108 : 
                May 21, 2010@07:38:41
  
 Build Distribution Date: May 20, 2010
  
  Installing Routines:.........
                May 21, 2010@07:38:41
  
  Running Pre-Install Routine: PRE^MAGIP108.
  
  Installing PACKAGE COMPONENTS: 
  
  Installing REMOTE PROCEDURE......
                May 21, 2010@07:38:41
  
  Running Post-Install Routine: POS^MAGIP108. 
  Updating Routine file......
  
  Updating KIDS files.......
  
  MAG*3.0*108 Installed. 
                May 21, 2010@07:38:41
  
  
  
  
 VistA System KIDS Summary
 =========================
  
 Patch 108 includes a KIDS package to be installed on the VistA System.
  
 MAGIP108 is a post install routine and is deleted after the KIDS install.
 The MAGIP108 is a routine that performs the following functions after a 
 successful installation:
  
  * Links new remote procedures to the Broker context options
  * Restarts the Imaging Utilization Report task
  * Sends the notification e-mail that the patch has been installed
  
 Routines
 ========
  
 New and modified Imaging routines for the VistA System are listed below.
 For each routine, the second line will contain the following information. 
 Please note that the Checksum Before may differ if test software has been 
 installed.
  
 Checksums are calculated using the Kernel utility program CHECK1^XTSUMBLD.
  
 <tab>;;3.0; IMAGING;**108**; Mar 19, 2002; Build 1738; May 20, 2010

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGGNTI
    Before: B37753394   After: B68648040  **10,8,59,93,108**
Routine Name: MAGGSIU1
    Before: B13472953   After: B13865691  **7,8,108**
Routine Name: MAGGSIU2
    Before: B19991293   After: B45076678  **7,8,85,59,108**
Routine Name: MAGGSIUI
    Before: B44173317   After: B54395865  **7,8,48,20,85,59,108**
Routine Name: MAGGSIV
    Before: B39311019   After: B56346793  **7,8,20,59,108**
Routine Name: MAGIP108
    Before:       n/a   After: B17758911  **108**
Routine Name: MAGNVIC
    Before:       n/a   After:  B5635645  **108**
Routine Name: MAGSIXGT
    Before: B67629374   After: B73290631  **8,48,61,59,108**
 
Routine list of preceding patches: 93

=============================================================================
User Information:
Entered By  : CAROZZA,DAN                   Date Entered  : OCT 02, 2009
Completed By: TROMBETTA,KATHY               Date Completed: AUG 19, 2010
Released By : MASSEY,DAVID                  Date Released : AUG 20, 2010
=============================================================================


Packman Mail Message:
=====================

No routines included
