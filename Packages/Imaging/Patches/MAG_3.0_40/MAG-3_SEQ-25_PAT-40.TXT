
=============================================================================
Run Date: AUG 30, 2004                     Designation: MAG*3*40
Package : MAG - IMAGING                       Priority: EMERGENCY
Version : 3        SEQ #25                      Status: Released
                  Compliance Date: SEP 01, 2004
=============================================================================

Associated patches: (v)MAG*3*11    <<= must be installed BEFORE `MAG*3*40'

Subject: DIQUIET Maintenance

Category: 
  - Routine

Description:
============

 Imaging patch MAG*3*40 is an emergency patch that will resolve an issue
 with a leftover variable, DIQUIET.  Our analysis has identified one
 routine, MAG7RS, that is invoked by interactive menu options and leaves
 variable DIQUIET defined after use. When using the Radiology menu Register
 Patient for Exams [RA REG] option or Cancel an Exam [RA CANCEL] option,
 DIQUIET is defined from an Imaging call to execute routine MAG7RS, which
 populates patient demographic information into an HL7 message.
  
 Having DIQUIET remain defined causes the following result: When an end
 user selects either one of the two options and then immediately afterward
 selects a menu option that performs a FileMan call, not all of the
 identification fields display for the selected entry.  For example, if the
 end user registers a patient with Register Patient for Exams [RA REG]
 option and then immediately uses the DICOM Menu Options [MAGD DICOM MENU]
 option to correct an image, the result is that, for the selected patient,
 only the patient's name and service type are displayed.  The social
 security number (SSN) and date of birth are not displayed on the selection
 list.  (However, through the rest of the screens for the selected option,
 the patient's SSN does display, and the SSN is displayed twice during the
 verification of the image correction.)
  
 Another issue is that calls to FileMan's utility EN^DDIOL cause "string 
 too long" errors. A node in the ^TMP("DIMSG",$J global grows by being
 appended to when a process calls EN^DDIOL and DIQUIET exists.
  
 Note: Do not install this patch if your site is a test site for the VistA 
 Imaging v2.5 consolidation software.
  
 This patch can be downloaded from:
 =================================
 ftp.imaging.med.va.gov/Software/Released_Software/Mag3_0P40.
  
 Patch Contents:
 ==============
 This patch includes the following files:
  
 MAG3_0P40.KID - Kernel Installation & Distribution System (KIDS) package
          to be installed on the VistA hospital database.
  
 Terms of use:
 =============
 FDA regulations require that each Imaging software distribution is
 documented and tracked by the VISTA Imaging project. To receive this
 patch, sites must have a Site Agreement filed with and approved by the
 VISTA Imaging Group. For information about the status of a Site Agreement,
 contact the VISTA Imaging Distribution Manager via phone (301-734-0357) or
 email (Kathy.Trombetta@med.va.gov).
  
 NOIS entries:
 ============ 
 MOU-0604-30646
 DAY 0604-41287
 ECH-0604-51398
 SDC-0604-60184
  
 Test Sites:
 ============
 Eastern Colorado - Denver
 Loma Linda
 Mountain Home
 North Chicago
 Pittsburgh
 West Haven
  
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The 
 second line of each of these routine(s) will look like:
  
      <tab>;;3.0;IMAGING;**[patch list]**;07-July-2004
  
                             CHECK^XTSUMBLD results
  
   Routine name       Before Patch    After Patch          Patch List
   ============       ============    ============        ===========  
    MAG7RS               11923364       12193599           **11,40**
    MAGIPS40              N/A            4705510           **40**
  
 Routine MAGIPS40 is an installation routine and is automatically deleted 
 after the KIDS installation.
  
 Please note:  
 We have identified other Imaging routines that have the DIQUIET variable 
 defined and not cleared.  These routines are used in remote procedure 
 calls and have been in existence since the release of Imaging 3.0.  Our 
 software testing has not found any problem with these routines, but they 
 will be modified as soon as possible.  The routines are identified below
 as well as the future Imaging patch.
  
 Routines: MAGGTMC and MAGGTRA will be modified in patch MAG*3*8
  
 Routines: MAGJEX1, MAGJRT, MAGJUPD1, MAGJUTL1, and MAGJUTL3 will be 
 modified in patch MAG*3*18
  
 All other Imaging routines have been reviewed and the DIQUIET variable 
 is properly set and cleared.
  
  
 INSTALLATION INSTRUCTIONS: 
 ==========================
 This patch may be loaded with users on the system. Installation will take 
 less than one minute.
   
 Note: Patch MAG*3*11 IS A REQUIRED PATCH for this KIDS distribution.  
 KIDS will not allow the installation of this patch without patch
 MAG*3.0*11 installed prior to loading this patch.
                                                                                 
  1.  From the Kernel Installation and Distribution System Menu, select the
      Installation menu.
  2.  Use the Kernel Installation and Distribution System Menu option to
       load the MAG3_0P40.KID.
  3.  From this menu, you may elect to use the following options (when
       prompted for the INSTALL NAME, enter MAG*3.0*40).
                                                                                 
     a. Backup a Transport Global - this option will create a backup
        message of any routines exported with the patch.  It will NOT
        backup any of the other changes.
     b. Compare Transport Global to Current System - this option will allow
        you to view all changes that will be made when the patch is
        installed.  It compares all components of the patch (routines and 
        options).                                                       
     c. Verify Checksums in Transport Global - this option will allow you
        to ensure the integrity of the routines that are in the transport
        global.                                                                 
  
  4.  Use the Install Package(s) option and select the package MAG*3.0*40.  
  5.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? Yes// " respond "NO".
  6.  When Prompted to "Want KIDS to INHIBIT LOGONs during the install?
      NO//" respond "NO".
  7.  When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond "NO".  

Routine Information:
====================

=============================================================================
User Information:
Entered By  : BARRIOS,LUCILLE               Date Entered  : JUL 13, 2004
Completed By: CARR,ROSEMARY                 Date Completed: AUG 20, 2004
Released By : LOVING,MANLEY                 Date Released : AUG 30, 2004
=============================================================================


Packman Mail Message:
=====================

No routines included
