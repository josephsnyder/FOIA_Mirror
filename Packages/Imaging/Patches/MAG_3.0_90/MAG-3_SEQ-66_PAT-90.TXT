
=============================================================================
Run Date: AUG 30, 2010                     Designation: MAG*3*90
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #66                      Status: Released
                  Compliance Date: SEP 30, 2010
=============================================================================

Associated patches: (v)MAG*3*101   <<= must be installed BEFORE `MAG*3*90'
                    (v)MAG*3*111   <<= must be installed BEFORE `MAG*3*90'

Subject: VISTARAD ENHANCEMENTS

Category: 
  - Routine
  - Enhancement (Mandatory)

Description:
============

 Description
 ===========
  This document describes VistA Imaging Patch 90, the VistARad Enhancements
  patch.Enhancements in this patch are based on the results of the VistARad
  Site Survey performed in 2008. 
  
 This patch introduces
 ===================== 
 * Remote Image Views in the Patient Exams list.
 * Multi-site monitoring for radiologists who read for multiple sites,
   including automatic urgent or STAT exam notification, and one-click 
   login to a monitored site.
 * A mensurated scale can be displayed for images with embedded pixel
   spacing data.
 * Unsupported VistARad clients (pre-Patch 76) will now appear on the
   report created by the MAG CLIENT VERSION menu option.
  
  
 Distribution of Software
 ========================
  Sites that have implemented VistARad can download this patch from
  the Imaging FTP server at:
  
  ftp.imaging.med.va.gov/Software/Sites/<yoursite>/Mag3_0p90
  
  Sites that have not implemented VistARad can download the KIDS-only
  portion of this patch from:
  
  ftp.imaging.med.va.gov/Software/Sites/Mag3_0p90_KIDS_ONLY
  Installation instructions are included in this document.
  
  NOTE:Any late-breaking news about this patch will be found in
  a readme file. If present, this file will also be located in 
  the /MAG3_0P90 directory on the Imaging FTP server.
  
  
 Patch Contents
 ==============
 This patch includes the following files:
  
  
 MAG3_0P90.KID   KIDS (Kernel Installation & Distribution System)
                     package to be installed on the VistA System.
  
 MAG_VistARad_P90_Setup.exe   Client software to be installed
                              on VistARad workstations.
  
 MAG3_0P90_Patch_Desc.pdf   Detailed patch description with patch
                            installation instructions.
  
 MAG3_0P90_VistARad_changes_Install_Guide.pdf   Revised Installation
                                      Guide sections for this patch.
  
 MAG3_0P90_VistARad_changes_Technical_Manual.pdf   Revised Technical
                                      Manual sections for this patch.
  
 MAG3_0P90_VistARad_changes_Security_Guide.pdf   Revised Security
                                       Guide pages for this patch.
  
 MAG3_0P90_VistARad_User_Guide.pdf   Revised VistARad User Guide. 
  
 MAG_Vrad_Quick_Start_Guide.pdf   Revised VistARad Quick Start Guide.
  
 MAG_Vrad_Quick_Reference_Guide.pdf   Revised VistARad Quick Reference
                                      Card. 
  
  
 Associated Patches
 ==================
  Before Patch 90 is installed, the following patches must be installed:
  
  MAG*3.0*101 and MAG*3.0*111
  
 NOTE:While MAG*3.0*83 is not required for installation, this patch
      is required to use most of the new features introduced in Patch 90.
      For a list of all released Imaging patches, refer to the
      patch_list.txt file available at:
  
      ftp://ftp.imaging.med.va.gov/Docs/Imaging_Docs_Latest.
  
  
 Test Sites
 ==========
 The following are test sites for this patch:
  
  Baltimore, MD (Integrated)
  Charleston, SC (Large)
  El Paso, TX (Medium)
  Fayetteville, NC (Large)
  Little Rock, AR (Large)
  Muskogee, OK (Medium)
  Phoenix, AZ (Medium)
  Prescott, AZ (Large)
  Tucson, AZ (Large)
  Washington, DC ( Large)
  
 Remedy Calls
 ============
  
  Remedy #383151     Spokane VAMC Window/Level problem, image rendered 
                     incorrectly for some DCM format images
  
  Remedy #387107     Patient Exams list sometimes loops when the radiology
                     record has a problem.The VistARad client now detects 
                     this condition and prevents the looping, and provides
                     a warning message to the user to have the radiology
                     record problem researched and fixed.
  
  Remedy #394276     " since the installation of Patch 101, the ROI tissue
                      measurements are almost double what they are on the
                      scanners   (cf. #400785)
  
  Remedy #400785      Oklahoma City S/A #394276 (Hounsfield measurement 
                      issue)
  
 NSRs
 ====
 There are no NSRs (New Service Requests) associated with this patch.
  
  
 Patch 90 Changes
 ================
  Patch 90 includes changes to the VistARad workstation software and to
  Imaging-related routines on the VistA host.
  
  NOTE: Most of the features introduced in this patch are available
        only if a local VIX (VistA Imaging Exchange server) has been
        implemented. For information about the VIX, refer to the
        documentation for Imaging Patch 83.
  
  
 VistARad Workstation Software Changes
 =====================================
  Remote Data/Image Views:
  
  VistARad can now be used to view images and reports for radiology exams
  stored at any remote VA site. Exams stored at DoD medical facilities for
  VA/DoD shared patients can also be viewed. 
  When the Patient Exams list is displayed in VistARad, remote sites where
  the patient has been treated are displayed as buttons at the top of the
  list. Clicking one of the buttons adds exams (if any) from the named site
  onto the Patient Exams list, and re-sorts the list to show all exams in
  chronological order. VistARad uses conventions similar to those used in
  Clinical Display to indicate which remote sites can be connected to and
  which cannot.Remote exams shown in the Patient Exams list can be opened
  for image review, and reports and requisitions can also be displayed.
  (Note that for DoD exams, images and reports are accessible, but
  requisitions are not.)The site s local VIX handles retrieval and caching
  automatically.Remote exams, once retrieved, remain cached on the local 
  VIX to speed subsequent retrievals. Access to remote exams is recorded in
  the remote site s IMAGE ACCESS LOG File (#2006.95).
  
 Remote Reading Enhancements
 ===========================
  Radiologists who read for multiple sites can now view exam lists at other
  sites while logged in to the current reading site. When this feature is
  enabled, radiologists can be interpreting exams for one site, but 
  conveniently monitor the workload at the other sites. A new exam list 
  tab, "Monitored Sites , is used to access the exam lists from the other
  sites. Each of the sites  lists is shown as a separate subtab, and is
  periodically refreshed to reflect the most current information.
  
  If a STAT or Urgent exam is detected on a Monitored Site exam list,
  VistARad displays a special icon on the Manager's top button bar,
  next to the "Patient Lookup" button.The icon also appears on any
  Monitored Sites sub-tab for the individual site s list that has
  a STAT or Urgent exam.Note: the multi-site monitoring features may only 
  be accessed by a user having a new security key, MAGJ REMOTE ACCESS
  CONTROL. One-click login to a monitored site Users can quickly log into a
  monitored site using a special Login button on the monitored list. This
  login process is streamlined so there is no need to re-enter the Access
  and Verify codes, or to select a division. The only action that may need
  to be taken is to close any previously opened exams. VistARad will prompt
  the user if this needs to be done.Once the user has logged in to the new
  site, all standard VistARad functions are available. VIX-assisted
  retrieval of non-routed exams Sessions of Remote reading of routed exams
  can benefit from using the local site's VIX to retrieve exams that were
  not routed (e.g., ad hoc exam opening).
  
  This feature allows those exams' imagesto display more quickly, and then 
  to be cached locally on the VIX.Readlist extended pre-load queuing A
  remote reading session can use a feature that allows the Readlist s  
  ability to pre-load the "next  exam to pre-load more than just one exam.
  Mensurated Scale  When an image is displayed, a mensurated scale can be  
  displayed in the  images viewport. The scale uses pixel size data in the
  image header; This feature is not dependent on the VIX.
  
 Unsupported VistARad Client Reporting 
 =====================================
  VistARad clients which pre-date the minimum supported version
  (Patch 76) will now appear on the report produced by the VistA
  host s MAG CLIENT VERSION REPORT menu option (introduced by Patch 93).
  
 VistA System Changes
 ====================
  
 Data Dictionaries
 ================= 
  This patch contains no data dictionary changes.
  
  
 Security Keys
 =============
  This patch contains the following Security Key:
  
  MAGJ REMOTE ACCESS CONTROL   New.This key allows a VistARad user
                               to access the Monitored Sites configuration
                               subset of the VIX Configuration settings 
                               tab, and to view exam list data in the
                               Monitored Sites tab.
  
  This patch adds functionality to the following (existing) Security Key:
  
  MAGJ SYSTEM MANAGER:         This security key is required to make any 
                               edits to the "Local Site VIX  settings in
                               the VIX Configuration tab.Note that hese
                               settings are NOT user-specific, but
                               are specific to the workstation.
  
 Remote Procedures
 =================
 This patch contains the following RPCs (remote procedure calls):
  
 MAG BROKER GET VISITOR:      New. Wraps code underlying RPC: XUS GET 
                              VISITOR to check for expired BSE
                              authentication token.
  
 MAGJ GET TREATING LIST:      New. Used to retrieve the list of sites 
                              where a selected patient has been treated.
  
 MAGJ VIX LOG REMOTE IMG ACCESS: New. Used by the local site s VIX to
                              update a remote site s IMAGING WINDOWS 
                              SESSIONS (#2006.82) and IMAGE ACCESS LOG
                              (#2006.95) Files when a remote exam is
                              viewed from a VistARad workstation at the
                              local site.
  
 Menu Options 
 ============
  The following menu option is included in this patch:
  
  MAGJ VISTARAD RPC'S [MAGJ VISTARAD WINDOWS]
  
  Updated RPC references; no other changes.
  
  
 Templates
 =========
  This patch contains no new or modified templates.
  
                                 
 Installation
 ============
  This patch is to be installed on the VistA System and on VistARad
  workstations.
  
  NOTE:All sites running VistA Imaging 3.0 must install the 
       KIDS portion of this patch.
  NOTE:Sites running VistARad must install all software components of this
       patch.The Patch 90 KIDS is backwards-compatible with the Patch 101
       client software; installation of the client software may be phased
       in according to each site s needs.
  
  All VistARad users must log out before the KIDS portion of this patch is
  loaded. Other VistA Imaging operations may continue.Installation of the
  KIDS will take less than one minute. Installation of the workstation
  software will take about one to three minutes per workstation, depending
  on hardware.
  
  Installation Prerequisites:
  
  Before installing this patch, you will need to download the Patch 90
  files from the Imaging FTP site to a local storage location.
  Verify that all clients have Adobe Reader 6.0 or higher installed.
  Verify that the patches listed in the Patch Sequence section have been
  installed.
  
 VistA System (KIDS) Installation
  
  NOTE:This KIDS file includes an environment check that will
  automatically disable background exam list compiles during the
  installation process. After the KIDS installation is complete,
  compiles will be automatically re-enabled.
  
 Installing the KIDS Package
 ===========================
 1. Ensure all users log off all VistARad workstations. 
 2. Log in to VistA and access the Kernel Installation and
    Distribution System Menu [XPD MAIN].
 3. Run the Installation option [XPD INSTALLATION MENU].
 4. Load the KIDS file by performing the following steps.
    a. Run the Load a Distribution option [XPD LOAD DISTRIBUTION]
       to load the KIDS distribution.
    b. When prompted, enter the path and file name (MAG3_0P90.KID)
       of the Patch 90 KIDS file that you downloaded from the Imaging
       FTP server.
    c. When prompted to continue with the load, enter YES.
       Distribution
       OK! message will be displayed when the load is complete.
 5. After loading the KIDS file, use the following options to verify the
    contents of the patch and to back up any affected routines.
    a. Verify Checksums in Transport Global [XPD PRINT CHECKSUM]  Run this
       option if you want to ensure the integrity of the routines in the 
       patch. 
    b. Compare Transport Global to Current System [XPD COMPARE TO SYSTEM]
       Run this option if you want to view all changes that will be made
       when the patch is installed. All components (routines, options, and
       so on) in the patch will be compared.
    c. Backup a Transport Global [XPD BACKUP]   Run this option if you want
       to create a backup message of any routines exported with the patch.
       It will not back up any of the other changes.
 6. After performing the load and any optional verification steps,
    install the KIDS file by performing the following steps: 
    a. Run the Install Package(s) [XPD INSTALL BUILD] option.
    b  When prompted for the install name, enter MAG*3.0*90.
    c. Answer NO to the following prompts:
  
  Want KIDS to Rebuild Menu Trees Upon Completion of Install? No//NO
  Want KIDS to INHIBIT LOGONs during the install? No//NO
  Want to DISABLE Scheduled Options, Menu Options, and Protocols? No//NO
  
  
 7. When installation is finished, an Install Complete message will
    be displayed.
  
  Sample KIDS Installation
    1      Load a Distribution
    2      Verify Checksums in Transport Global
    3      Print Transport Global
    4      Compare Transport Global to Current System
    5      Backup a Transport Global
    6      Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: MAG*3.0*90       Loaded from Distribution
 5/27/10@13:00:48
 VistA Imaging V3.0 - Patch 90 -  05/27/2010 09:16AM;
 This Distribution was loaded on May 27, 2010@13:00:48
 with header of VistA Imaging V3.0 - Patch 90 -  05/27/2010 09:16AM
 ;Created on May 27 , 2010@09:16:14 It consisted of the following
  Install(s): MAG*3.0*90
  Checking Install for Package MAG*3.0*90
  Will first run the Environment Check Routine, MAGJMN1
  
 Install Questions for MAG*3.0*90
  
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO// 
  
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME// ;;99999  HERE
  
  Install Started for MAG*3.0*90 : 
                May 27, 2010@13:03:40
  
 Build Distribution Date: May 27, 2010
  
  Installing Routines:.............
                May 27, 2010@13:03:40
  
  Installing PACKAGE COMPONENTS: 
  
  Installing SECURITY KEY..
  
  Installing REMOTE PROCEDURE....
  
  Installing OPTION..
                May 27, 2010@13:03:40
  
 Running Post-Install Routine: POSTINST^MAGJMN1. 
 Enabling background compile
 Background Compile Enabled.
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  MAG*3.0*90 Installed. 
                May 27, 2010@13:03:44
  
  Not a production UCI
  
  Not a production UCI
  
  NO Install Message sent 
  
  
 VistARad Client Installation
 ============================
  The following steps can be used to install VistARad for the first time,
  or to update a workstation that is running VistARad Patch 101 to VistARad
  Patch 90. Installation should take one to three minutes.
  NOTE: If any other versions of VistARad are installed (such as Patch 76),
  use Add/Remove Programs in the Windows Control Panel to remove VistARad
  before using the steps below.
  
 1. Log in to the workstation as an administrator, and ensure that no other
    programs are running. 
 2. Double-click MAG_VistARad_P90_Install.exe to start the installation
    wizard. There will be a brief delay as the installation files are 
    extracted.
    NOTE VistARad will be installed in C:\Program Files\Vista\Imaging\.
    here are no configurable installation options.
 3. If you are updating from Patch 101 to Patch 90, perform the steps
    below (workstation-specific configuration files will be retained):
    a. When the Welcome page appears, click Next. 
    b. When the Ready to Install page displays, click Install.
    c. When you are informed that Patch 101 must be removed, click Yes.
    d. When you are prompted to confirm the removal of VistARad, click
       Yes again.
    e. When you are informed that VistARad has been uninstalled, click OK.
    f. Installation of Patch 90 will start automatically. After
       installation is complete, click Finish to exit the wizard.
 4. If you are installing Patch 90 for the first time, perform the steps
    below:
    a. When the Welcome page appears, click Next. 
    b. When the Ready to Install page displays, click Install.
    c. After installation is complete, click Finish to exit the wizard.
 5. Use the VistARad shortcut on the desktop or in Windows Start menu
    (Start | Programs | VistA Imaging Programs | MAG_VistARad_Patch90)
    to start VistARad.
 6. After starting VistARad, go to Help | About and verify that the 
    software client version is 3.0.90.9.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGGTU41
    Before: B22378971   After: B22196181  **46,59,93,90**
Routine Name: MAGJLS2
    Before: B91361467   After:B105609021  **22,18,76,101,90**
Routine Name: MAGJLS2B
    Before: B78466929   After: B81043388  **16,22,18,76,101,90**
Routine Name: MAGJLS3
    Before: B84076756   After: B73090068  **16,22,18,101,90**
Routine Name: MAGJLST1
    Before: B50075739   After: B54042932  **16,22,18,65,76,101,90**
Routine Name: MAGJMN1
    Before:B140332514   After: B92377689  **16,9,22,18,65,76,101,90**
Routine Name: MAGJTU4V
    Before:       n/a   After:  B4996119  **90**
Routine Name: MAGJUTL3
    Before: B91880385   After:B113857123  **16,9,22,18,65,76,101,90**
Routine Name: MAGJUTL4
    Before:B150484690   After:B148832735  **18,76,101,90**
Routine Name: MAGJUTL5
    Before: B32996102   After: B33141001  **65,76,101,90**
Routine Name: MAGJVAPI
    Before:       n/a   After: B13867025  **90**
Routine Name: MAGS2BSE
    Before:  B3731702   After:  B3911053  **111,90**
 
Routine list of preceding patches: 93, 101, 111

=============================================================================
User Information:
Entered By  : SHOVESTUL,MARYANN             Date Entered  : JAN 09, 2007
Completed By: CASUGAY,ELSIE G               Date Completed: AUG 27, 2010
Released By : SCHOONOVER,JOHN E             Date Released : AUG 30, 2010
=============================================================================


Packman Mail Message:
=====================

No routines included
