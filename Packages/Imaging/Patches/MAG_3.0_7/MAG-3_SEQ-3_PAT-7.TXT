
=============================================================================
Run Date: JUL 25, 2002                     Designation: MAG*3*7
Package : MAG - IMAGING                        Priority: Mandatory
Version : 3         SEQ #3                     Status: Released
=============================================================================

Associated patches: (v)MAG*3*1     <<= must be installed BEFORE `MAG*3*7'

Subject: Support for Clinical Procedures

Category: 
  - Informational
  - Routine
  - Data Dictionary

Description: 
============

 This patch has improvements to the VistA Imaging Clinical Capture, 
 Clinical Display and Background Processor software that are required for 
 interfacing to Clinical Procedures v1.0. Also included in this patch is a 
 modification to the Clinical capture software to provide higher
 compression of scanned documents (G4 TIFF).  Detailed documentation on
 this patch (MAG*3*7) is available on the Imaging web page, Universal
 Resource Location (URL) vaww.va.gov/imaging.
  
  
 The following files constitute this patch; installation instructions are 
 located at the end of this document.
 MagSetup3_0P7.exe - Clinical Display and Capture software for 
              workstations.       
  
 Mag3_0P7.kid - Kernel Installation & Distribution System (KIDS)   
              application to be installed on hospital database.
 MAGBPSetup.exe - Background processor software for Background Processor 
              workstation.
  
 MAGDCM.RTN - Digital Imaging and Communication in Medicein (DICOM)
              Image and Text gateway software.  The only changes in
              the DICOM routines are in the shared routines between
              the Clinical software and DICOM. 
  
 Mil6.1.exe - self-extracting executable that contains the Matrox Mil6.1 
              drivers for Meteor II and Orion capture boards.
             
 We are mandated by Food and Drug Administration (FDA) regulations to track
 Imaging software distribution.  The software will be available on the
 Imaging FTP directory under your site's folder.  Only sites that have
 their release agreements on file and have installed patch 1 (MAG*3.0*1)
 are candidates for receiving the software.  Please contact Kathy Trombetta
 to check the status of your site's release agreement. Kathy can be
 contacted via exchange mail.
  
 Clinical Procedures interface:
 ==================== 
 Imaging has an Import interface that will allow Clinical Procedures to 
 file reports from a medical device to Imaging.  Imaging will automatically
 store the report file and provide the linkage to the patient and
 associated Text Integration Utilities (TIU) report.  Report files will be
 displayed on Imaging display workstations.  Clinical Procedures will setup
 the Health Level Seven (HL7) communication with the medical device and,
 through their Clinical Procedures User application, the end user can
 select the reports to be stored by Imaging.  Please review the Clinical
 Procedures User Manual for more details on this interface.
  
 Modifications to Display software- Radiology and Document windows
  ============================
 When a reduced resolution Radiology image is viewed with the Clinical 
 Display software and the diagnostic resolution "BIG" file is not on the 
 current magnetic network drives, the software will make a Jukebox to Hard 
 Disk (JBTOHD) queue entry for the Background Processor to copy the "BIG" 
 image file to the current magnetic share. The image will subsequently be 
 available on the current magnetic share without having to obtain a copy 
 from the jukebox. This will speed up future retrievals of the image. 
  
 Modifications were made to the document window to improve the consistency 
 of the document magnification.  
  
 Document scanning enhancement for Capture software
  ============================= 
 Clinical Capture software changes:
 The Image Type setting of "Document (TIFF G3 FAX)" has been replaced with 
 "Document (TIFF G4 FAX)".  The G3 FAX setting was a group 3 compression 
 setting.  It is being replaced with a group 4 compression setting 
 to allow documents to be compressed at a higher TIF compression ratio, 
 thus creating a smaller image file as required by the Health Eligibility 
 Center (HEC). 
  
  
 Matrox Meteor Board support
  ============================
 Capture software now supports the following Meteor board software features:
 Support for Meteor MIL 6.1 drivers 
 Support for Orion Frame grab/Display board
 Support for Meteor II and Orion boards with Windows 2000
  
 Please note that this patch will require the workstation's Meteor board 
 drivers to be updated.  See Imaging V3.0 Patch 7 documentation for 
 updating the Meteor drivers. 
  
 Do not install this patch on VistA Imaging Capture workstations with the 
 original Meteor and Meteor PPB frame grab boards. 
  
 If your system has an original Matrox Meteor or Matrox Meteor PPB frame 
 grab board, Imaging Capture version 3.0 patch 7 WILL NOT WORK with these 
 boards.  These boards were designed for the original Pentium and Pentium 
 Pro PCs and Matrox has stopped supporting them.  The Imaging Capture 
 version 3.0 (un-patched) software will continue to work on these boards 
 but they should be phased out and replaced with the Matrox Orion or Meteor 
 II capture boards. To determine if a Capture workstation uses a Matrox 
 Meteor or Meteor PPB board, check the green sticker on the board itself - 
 it will say Meteor or Meteor PPB
  
  
 Background Processor software changes:
 ========================= 
 A new IMPORT queue is available for selection on a BP workstation 
 parameter setup.  This is used for Clinical Procedures reports.
 Background processor functions when receiving an IMPORT queue will 1) 
 create the image in the Image file, 2) copy the image to the current 
 write location (magnetic server), 3) create a JUKEBOX queue to copy the 
 image to the JUKEKBOX, 4) create an ABSTRACT queue to create the 
 abstract, and 5) return the IMPORT status to the calling application. 
  
  
 Test at the following sites:
 ======================== 
 Dallas, TX
 Washington, DC
 NY Harbor, NY
 Memphis, TN
 Baltimore, MD
 Huntington, WV
  
 NOIS entries:
 ================== 
 HUN-0102-23083
  
 ROUTINE SUMMARY:
 ============= 
 The following is a list of the routines included in this patch.  The 
 second line of each of these routine(s) will look like:
  
  
      <tab>;;3.0;Imaging;**7**;Jun 03, 2002
  
 Routine                 Check sum     Patch List
  
 MAGBAPI                 7367416         **1,7**
 MAGGSCP                 6108869         **7**
 MAGGSERR                3210527         **7**
 MAGGSFT                 3067100         **7**
 MAGGSIA                 5464426         **7**
 MAGGSIA1                9791476         **7**
 MAGGSIM                 5360010         **7**
 MAGGSIU1                4199767         **7**
 MAGGSIU2                4516888         **7**
 MAGGSIU3                7186347         **7**
 MAGGSIUI                11682244        **7**
 MAGGSIV                 12079119        **7**
 MAGGSPP                 3242430         **7**
 MAGGSTI                 6260731         **7**
 MAGGSU1                 2676194         **7**
 MAGGTAU                 9601918         **7**
 MAGGTSY1                6104608         **7**
 MAGGTU3                 7481270         **7**
 MAGGTUP                 7182048         **7**
 MAGIPOS7                2508617         **7**
 MAGQBIM                 3963432         **7**
 MAGQBPG1                11319930        **7**
 MAGQBPRG                9369062         **7**
 MAGQBTM                 14438732        **1,7**
 MAGQBUT                 12416907        **7**
 MAGQBUT1                13611765        **7**
 MAGQBUT2                15727225        **7**
 MAGQBUT4                2633801         **7**
 MAGQST                  7149563         **7**
  
  
 RPC:
 ========= 
 The following Remote procedures are being distributed in this patch.
  
    MAG4 ADD IMAGE                                 
    MAG4 CP CONSULT TO TIUDA                       
    MAG4 CP GET REQUESTS                           
    MAG4 CP GET VISITS                             
    MAG4 CP UPDATE CONSULT                         
    MAG4 DATA FROM IMPORT QUEUE                    
    MAG4 GET SUPPORTED EXTENSIONS                  
    MAG4 REMOTE IMPORT                             
    MAG4 STATUS CALLBACK                           
    MAG4 VALIDATE DATA                             
  
 SECURITY KEY:
 =========== 
 This patch will add a MAGCAP CP security key that is required to capture 
 Clinical Procedure images from the Imaging Capture workstation.
  
 DATA DICTIONARIES:
 ============ 
 KIDs installation will install the following 
 dictionaries:                     
  
 A partial build for the IMAGE file (#2005) that adds the following fields 
 ACQUISITION SITE (#.05), ACQUISITION DEVICE (#107), TRACKING ID (#108), 
 CREATE METHOD (#109), and DOCUMENT DATE (#110). 
  
 A partial build for the BP WORKSTATION file (#2006.8) adds a new field 
 IMPORT (#16).
  
 The OBJECT TYPE file (#2005.02) is included with data and will add the 
 following new entries: UNKNOWN, HTML, WORD, TEXT, ADOBE, RICH TEXT and 
 AUDIO.
  
 A partial build for file IMAGING USER PREFERENCE (#2006.18) is included 
 and will add field MAIN TOOLBAR (#8.5).   
  
 A partial build for file IMAGING WINDOWS WORKSTATION (#2006.81) is 
 included, adding fields OS VERSION (#13) and IMPORT COUNT (#12.5). 
  
 A partial build for file IMAGING WINDOWS SESSIONS (#2006.82) is included 
 and will add field TRACKING ID (#8). 
  
 The following files are new: 
 IMPORT QUEUE (#2006.034) 
 ACQUISITION DEVICE (#2006.04) 
 ACQUISITION SESSION FILE (#2006.041
 IMAGE FILE TYPES (#2005.021)
  
  
 KIDS INSTALLATION
 ============ 
  
 This patch may be loaded with users on the system.  
  
 Please Note: Patch MAG*3.0*1 is a REQUIRED BUILD for this KIDS 
 distribution.  KIDS will not allow the installation of this patch without 
 this build installed prior to loading this patch. 
  
   Installation will take less than one minute.
                                                                                 
  1. From the Kernel Installation and Distribution System Menu, select the
     Installation menu.
  2. Use the Kernel Installation and Distribution System Menu option to
     load the MAG3_0P7.KID.
  3. From this menu, you may elect to use the following options (when
     prompted for the INSTALL NAME, enter MAG*3.0*7).
                                                                                 
     a. Backup a Transport Global - this option will create a backup
        message of any routines exported with the patch.  It will NOT
        backup any of the other changes.
                                                                                 
     b. Compare Transport Global to Current System - this option will     
        allow you to view all changes that will be made when the patch
        is installed.
        It compares all components of the patch (routines and options).
                                                                                 
     c. Verify Checksums in Transport Global - this option will allow 
        you to ensure the integrity of the routines that are in the 
        transport global.
                                                                                 
  4.  Use the Install Package(s) option and select the package MAG*3.0*7
  5.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? Yes// " respond "NO".
  6.  When Prompted to "Want KIDS to INHIBIT LOGONs during the install?
      NO//" respond "NO".
  7.  When prompted "Want to DISABLE Scheduled Options, Menu Options,   
     and Protocols? YES//" respond "NO".  
  
  
 CLIENT INSTALLATION INSTRUCTIONS
 ====================== 
  
 To install the executable file follow the instructions on the VistA 
 Imaging Installation Guide section. Below are the sections to review.  
 After the client software is installed, you can verify the correct 
 version (3.0.7.10) by selecting HELP under the ABOUT heading.
 =============================================================             
      
                                                                                 
   -For the clinical software, MagSetup3_0P7.exe, follow the instructions
    in section 2.5.4, Installing the VistA Imaging Workstation Software.
    When this file is installed on a clinical workstation the TELE19N.EXE
    and the IMGVWP10.EXE will be extracted and installed in the following
    directory Program Files\Vista\Imaging.
                                                                                 
   -Review section 2.5.5, Autoupdating the Imaging Application, for
    automatic distribution of the clinical software on all Imaging
    workstations.  
                                                                                 
   -For the Background Verifier software, MAGBPVSetup.exe, follow the
    instructions in the Imaging Installation Manual section 2.4    
    BackGround Processor Installation, see section 2.4.4, Installation 
    Instructions. Remember to stop the Background Processor before 
    installing.                 
  
 - To validate that the correct version of the software is installed for
   the Background Processor on the workstation use the Help|About and
   verify that the version number is 3.0.7.1.
  
 DICOM GATEWAYS - Installation instructions for MAGDCM.RTN
  =================                           
 STOP ALL PROCESSES on the DICOM gateways before installing the routines.
 Use a telnet session to 127.0.0.1 and drop into programmer's mode into
 the DCM uci.  (Remember that dropping into programmer's mode will require 
 a programmer's access code that was setup during the initial installation 
 of the DICOM software.)
                                                                                 
 The following is an example; please provide the correct full path for the 
 MAGDCM.RTN file. The file contains 178 routines.
                                                                                 
 [DCM,DCM]>D ^%RR
                                                                                 
           MSM - Routine Restore Utility
                                                                                 
 Enter input device <HFS>:   Host File Server
 File Name >: MAGDCM.RTN                                        
 Routine(s) saved at 10:40 AM 06/03/2002 
 Header comment is: DICOM Gateway MUMPS routines Build V3.0p7Build223
 Selective restore? (allows rename) <N>: NO
 Restoring...                                                              
      
 MAGBAPI   MAGDACP1  MAGDACP2  MAGDACP3  MAGDACR1  MAGDACR2  MAGDACR3
 MAGDACU   MAGDACU0  MAGDACU1  MAGDACU2  MAGDACU3  MAGDACW1  MAGDACW2
 MAGDAUD1  MAGDAUD2  MAGDAUD3  MAGDBB    MAGDCST1  MAGDCST2  MAGDCST3
 MAGDCST4  MAGDCST5  MAGDCST6  MAGDDEL   MAGDDEL1  MAGDDEL2  MAGDDEL3
 MAGDDEL4  MAGDDR0   MAGDDR1   MAGDDR2   MAGDDR2A  MAGDDR3   MAGDDW0
 MAGDDW1   MAGDDW2   MAGDDW3   MAGDDW4   MAGDECHO  MAGDEDIT  MAGDEXC1
 MAGDEXC2  MAGDEXC3  MAGDEXC4  MAGDFB    MAGDFCNS  MAGDFND0  MAGDFND1
 MAGDFND2  MAGDFND3  MAGDFND4  MAGDFND9  MAGDHR1   MAGDHR1A  MAGDHR2
 MAGDHR3   MAGDHR4   MAGDHR5   MAGDHR9   MAGDHRP   MAGDIR1   MAGDIR1A
 MAGDIR1B  MAGDIR2   MAGDIR2A  MAGDIR2B  MAGDIR2C  MAGDIR2D  MAGDIR3
 MAGDIR4   MAGDIR4A  MAGDIR5   MAGDIR99  MAGDIRER  MAGDIW1   MAGDIW2
 MAGDIW3   MAGDIW3A  MAGDIW3B  MAGDIW4   MAGDIW5   MAGDIW6   MAGDIX
 MAGDIX1   MAGDLB11  MAGDLB1A  MAGDLB1B  MAGDLB1C  MAGDLB5   MAGDLB6
 MAGDLB7   MAGDLB9   MAGDLBSR  MAGDLOGN  MAGDMENA  MAGDMENU  MAGDMFB
 MAGDMFB0  MAGDMFB1  MAGDMFB2  MAGDMFB3  MAGDMFB4  MAGDMFB5  MAGDMFB6
 MAGDMFB7  MAGDMFB8  MAGDMFB9  MAGDMFBA  MAGDMFBB  MAGDMFBC  MAGDMFBI
 MAGDMFBM  MAGDMFBP  MAGDMFBS  MAGDMFBW  MAGDMFIC  MAGDMLOG  MAGDMPPC
 MAGDOS    MAGDQRU0  MAGDQRU1  MAGDQRU2  MAGDQRU3  MAGDQRU4  MAGDQRU5
 MAGDQUE0  MAGDQUE1  MAGDQUE2  MAGDQUE3  MAGDQUE4  MAGDROUT  MAGDSSD
 MAGDSTA1  MAGDSTAT  MAGDSTRT  MAGDTCP   MAGDTCP1  MAGDTCP2  MAGDTCP3
 MAGDTGA   MAGDTLOG  MAGDUID1  MAGDUID2  MAGDVRSN  MAGDWLP1  MAGDWLP2
 MAGDWLP3  MAGDWLP4  MAGDWLU   MAGDWLU0  MAGDWLU1  MAGDWLU2  MAGDWLU3
 MAGDWLU4  MAGDWLUA  MAGDWLUB  MAGDWLUC  MAGDWLUD  MAGDWLUE  MAGFILEB
 MAGGTAU   MAGGTERR  MAGGTIA   MAGGTIA1  MAGGTIA2  MAGGTID   MAGGTII
 MAGGTU1   MAGLOG    MAGOSDIR  MAGOSFIL  MAGOSMSC  MAGOSTCP  MAGSDEL2
 MAGSDEL3  MAGSDEL4  MAGUXRF    
  
  
 To verify that the correct version has been installed use the menu option
 on the DICOM Gateways.  The path is the following: 4- System Maintenance,
 1 - System Operation,  4 Display the Version  of  the Software.
  
 Example of display: 
 This is "IMAGING 3.0" created on 03-June-2002.
 Installed patches: **1,7** 

Routine Information:
====================

=============================================================================
User Information:                               
Entered By  : BARRIOS,LUCILLE                Date Entered : MAY 21, 2002
Completed By: FRANK,STUART                  Date Completed: JUL 25, 2002
Released By : CAROZZA,DAN                   Date Released : JUL 25, 2002
=============================================================================


Packman Mail Message:
=====================

No routines included
