
=============================================================================
Run Date: DEC 13, 2019                     Designation: MAG*3*226
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3       SEQ #185                      Status: Released
                  Compliance Date: JAN 14, 2020
=============================================================================


Subject: Clinical Capture Delphi Upgrade 

Category: 
  - Routine

Description:
============

 MAG*3.0*226, a patch that provides fixes to VistA Imaging Clinical 
 Capture. This patch addresses the following issues:
  
 1.  Teledermatology images are not getting moved to Tier 2 storage.
 2.  VistA Imaging environment upgrade Delphi XE8 to Delphi 10.2.3 
     Tokyo.
 3.  OK button on Select New progress notes is not highlighted for 
     saved Configurations. 
 4.  When entering progress notes, scroll bar is not working. 
 5.  Progress Notes columns disappear when navigating past first 
     screen.
  
  
 Patch Components:
 -----------------
 MAG3_0P226.KID - Kernel Installation and Distribution System (KIDS) build 
 for MAG*3.0*226 - New
  
 MAG3_0P226_Clincal_Capture_Setup.exe - Clinical Capture client 
 installation file - New
  
 MAG3_0P226_Clinical_Capture_Install.msi - Clinical Capture push 
 installation file - New
  
 MAG3_0P226_DIBORG.pdf - Deployment, Installation, Back-Out, and Rollback 
 Guide for Patch 226 - New
  
 Files & Fields Associated:
  
 File Name (Number)          Field Name (Number)       New/Modified/Deleted
 ------------------          -------------------       --------------------
 N/A
  
 Forms Associated:
  
 Form Name                   File Number               New/Modified/Deleted
 ---------                   -----------               --------------------
 N/A
  
 Mail Groups Associated:
  
 Mail Group Name             New/Modified/Deleted
 ---------------             --------------------
 N/A
  
 Options Associated:
  
 Option Name                 Type                      New/Modified/Deleted
 -----------                 ----                      --------------------
 N/A
  
 Protocols Associated:
  
 Protocol Name               New/Modified/Deleted
 -------------               --------------------
 N/A
  
 Security Keys Associated: 
  
 Security Key Name
 -----------------
 N/A
  
 Templates Associated:
  
 Template Name         Type    File Name (Number)      New/Modified/Deleted
 -------------         ----    ------------------      --------------------
 N/A
  
 Remote Procedures Associated:
  
 Remote Procedure Name       New/Modified/Deleted
 ---------------------       --------------------
 N/A
  
 Parameter Definitions Associated:
  
 Parameter Name              New/Modified/Deleted
 --------------              --------------------
 N/A
  
 Additional Information:
 -----------------------
  
 Blood Bank Team Coordination:
 N/A
  
 New Service Requests (NSRs):
 N/A
  
 Patient Safety Issues (PSIs):
 N/A
  
 Defect Tracking System Ticket(s) & Overview:
  
 1. Defect 967341 (Trouble Ticket INC4765823) Teledermatology images are
 not getting moved to Tier 2 storage
  
 Problem:
 --------
 When capturing DICOM images to a Teledermatology consult, the images are
 not getting added to the Background Processor Jukebox queue for transfer
 to Tier 2 storage.  Additionally, if capture has Abstracts Created set to
 false in Clinical Capture, Teledermatology Images are not getting added to
 the Background Processor abstract queue.
  
 Resolution:
 -----------
 Modified the code to add DICOM Images captured to a Teledermatology 
 consult to the Jukebox and Abstract Queues.
  
 2. Story 789521 VistA Imaging environment upgrade Delphi XE8 to Delphi 
 10.2.3 Tokyo
  
 Problem:
 --------
 This task upgrades the environments for Clinical Capture from Delphi XE8 
 to Delphi 10.2.3 Tokyo.  
  
 Resolution:
 -----------
 The version of Delphi used to build Clinical Capture has been upgraded to 
 Delphi 10.2.3 Tokyo.
  
 3. Defect 1078755 (Trouble Ticket INC6185305) OK button on the create new 
 progress note window is not available for saved configurations.
  
 Problem:
 --------
 For saved configurations, the OK button on the Create New Progress Notes 
 window is no longer highlighted without selecting a consult title first, 
 which should have been saved with the configuration.  
  
 Resolution:
 -----------
 The OK button on the Progress Notes screen is highlighted. Made change to 
 hold Note Title Name coming from the selected saved "Progress Note 
 Configuration" to be compared against a complete list of National Progress
 Note Titles.
  
 4. Defect 1078765 (Trouble Ticket INC6186970) When creating a new progress
 note, the scroll bar on the list of note titles  is not working.
  
 Problem: 
 --------
 On the progress note screen, user is facing issues selecting the progress 
 note and using vertical scroll bar. 
  
 Resolution: 
 -----------
 A coding change was made to ensure retention of the National Progress
 Note Title from the National Progress Note Titles vs Patient Title list.  
 This change ensures the correct spelling of a Note Title is always used
 to do a search when scrolling through the list.
  
 5. Defect 1118727 Progress Notes columns disappear when navigating past
 first screen.
  
 Problem: 
 --------
 On the Progress Note screen, the predetermined columns are displayed on
 the first screen, but when navigating to different tabs all other Progress
 Note columns disappear forcing the user to exit and reopen the application
 for information to display correctly.
  
 Resolution: 
 -----------
 Added code to ensure the view style is changed from "List" to
 "ReportStyle" to reinstate the column headers. 
   
  
 Software and Documentation Retrieval Instructions:
 --------------------------------------------------
 Documentation describing the new functionality and/or a host file
 containing a build may be included in this release.
  
 Sites may retrieve the software and/or documentation directly using 
 Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE 
 directory on server download.vista.domain.ext
  
 Documentation can also be found on the VA Software Documentation Library
 at: https://www.domain.ext/vdl/
  
  
 Patch Installation:
 -------------------
  
 Supported Client Versions:
  
 When MAG*3.0*226 is released, the list of supported versions of Clinical 
 Capture will change:
  
 Client Versions Supported:
    3.0.226
    3.0.233
    3.0.216
  
 Client Versions No Longer Supported:
    3.0.215
    3.0.211
    3.0.189 
  
 Pre/Post Installation Overview:
  
 MAG*3.0*226 must be installed on the VistA System and on 64-bit
 workstations on which the VistA Imaging Applications will be used. This 
 patch must be installed by the compliance date.
  
 This patch may be installed with users on the system although it is
 recommended that it be installed during non-peak hours to minimize 
 potential disruption to users. This patch should take less than 5 minutes 
 to install.
  
 Verify that the previous patch in the Supported Client Versions section 
 has been installed.
  
 Note: All released VistA Imaging patches must be installed on the VistA 
 system before installing MAG*3.0*226.
  
 Installation Instructions:
  
 The actual KIDS installation will take less than one minute.
  
 1  On the VistA system, access the Kernel Installation and Distribution
    System Menu [XPD MAIN].
  
 2  Run the Installation option [XPD INSTALLATION MENU].
  
 3  Load the KIDS file by performing the following steps:
      a.  Run the Load a Distribution option [XPD LOAD DISTRIBUTION] to
          load the KIDS distribution.
      b.  When prompted, enter the path and file name MAG3_0P226.KID of the
          Patch 226 KIDS file.
      c.  When prompted to continue with the load, enter YES. A 
          Distribution OK! message will be displayed when the load is
          complete.
  
 4  After loading the KIDS file, use the following options to verify the
    contents of the patch and to back up any affected routines.
      a.  Verify Checksums in Transport Global [XPD PRINT CHECKSUM] - Run
          this option to ensure the integrity of the routines in the patch.
      b.  Compare Transport Global to Current System [XPD COMPARE TO
          SYSTEM] - Run this option to view all changes that will be made
          when the patch is installed. All components (routines, options,
          and so on) in the patch will be compared.
      c.  Backup a Transport Global [XPD BACKUP] - Run this option to
          create a backup message of any routines exported with the patch.
          It will NOT back up any of the other changes.
  
 5  After performing the load and any optional verification steps, install
    the KIDS file by performing the following steps:
  
    a.  Run the Install Package(s) [XPD INSTALL BUILD] option.
    b.  When prompted for the install name, enter MAG*3.0*226.
    c.  Answer NO to the following prompts:
  
  Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO//
  Want KIDS to INHIBIT LOGONs during the install? NO//
  Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO//
  
 6  When installation is finished, an Install Complete message will be
    displayed.
  
 VistA Imaging Clinical Capture Client Installation Instructions
  
 Note: The Clinical Capture Application is only supported on Windows 7 and 
 10 operating systems. Other operating systems are not officially
 supported.
  
 Clinical Capture is distributed as an MSI and EXE installation. The MSI 
 is intended for sites that want to do a push installation (using SCCM or 
 another tool). The EXE is intended for use to install on a single 
 workstation.
  
 The MAG3_0P226_Clinical_Capture_Setup.exe file can be installed manually 
 on workstations as described in the Single Workstations Installation 
 section in the VistA Imaging System Installation Guide.
  
  
 Post-Installation Instructions:
  
 N/A
  
 Back-Out/Roll Back Plan:
 ------------------------
  
 Uninstalling the Application:
  
 If it is necessary to uninstall the MAG*3.0*226 client, use the Uninstall 
 option from Programs and Features within Windows Control Panel to 
 Uninstall: VistA Imaging Clinical Capture.
  
 Then install the previous version of Clinical Capture which was included 
 in MAG*3.0*233.
  
 KIDS Uninstall:
  
 If it is necessary to uninstall the MAG*3.0*226 VistA KIDS, then select 
 the Kernel Installation & Distribution System menu option, Backup a 
 Transport Global, see the Installation Steps section, where step 4c must 
 be done before installing the patch.
 Administrators will need to use the PackMan function INSTALL/CHECK 
 MESSAGE. Check the MailMan messages for the backup message sent by the 
 Backup a Transport Global function executed prior to the patch install.
  
 1.  Select the message shown below:
 Backup of MAG*3.0*226 install on <mm, dd, yyyy> <user name>
 2.  Select the Xtract PackMan option.
 3.  Select the Install/Check Message option.
 4.  Enter Yes at the prompt.
 5.  Enter No at the backup prompt. There is no need to back up the backup.
  
 Enter message action (in IN basket): Ignore// Xtract PackMan
 Select PackMan function: ?
     Answer with PackMan function NUMBER, or NAME
    Choose from:
    1            ROUTINE LOAD
    2            GLOBAL LOAD
    3            PACKAGE LOAD
    4            SUMMARIZE MESSAGE
    5            PRINT MESSAGE
    6            INSTALL/CHECK MESSAGE
    7            INSTALL SELECTED ROUTINE(S)
    8            TEXT PRINT/DISPLAY
    9            COMPARE MESSAGE
  
 Select PackMan function: Select PackMan function: 6  INSTALL/CHECK MESSAGE
  
 Warning:  Installing this message will cause a permanent update of globals
 and routines.
 Do you really want to do this? NO// YES<Enter>
  
 Routines are the only parts that are backed up.  NO other parts are backed
 up, not even globals.  You may use the Summarize Message option of PackMan
 to see what parts the message contains.
 Those parts that are not routines should be backed up separately if they
 need to be preserved.
  
 Shall I preserve the routines on disk in a separate back-up message? 
 YES// NO
 No backup message built.
  
 Line 2  Message #43934   Unloading Routine  MAGXXXX (PACKMAN_BACKUP)
  
 Select PackMan function:<Enter>
  
 Routine Information:
  
 This section lists modified routines for the VistA KIDS build. For each 
 routine, the second line will contain the following information: 
  
 ;;3.0;IMAGING;**[Patch List]**; Mar 19, 2002;Build 1;Feb 15, 2017
  
 CHECK1^XTSUMBLD is used to generate the checksums.
  
 Routine Checksums
  
 Routine           Checksum        Checksum          Patch List
                   Before          After
 MAGIP226          New             4110407           **226**
 MAGGTU4C          5780139         4965467           **93,94,106,117,122,
                                                     129,140,151,178,189,
                                                     211,215,223,233,226**
  
 Routine MAGIP226 is an installation routine that is automatically deleted 
 after the KIDS installation.

Routine Information:
====================
The second line of each of these routines now looks like:
;;3.0;IMAGING;**[Patch List]**;Mar 19, 2002;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGGTU4C
    Before:  B5780139   After:  B4965467  **93,94,106,117,122,129,140,
                                           151,178,189,211,215,223,233,
                                           226**
Routine Name: MAGIP226
    Before:       n/a   After:  B4110407  **226**
 
Routine list of preceding patches: 233

=============================================================================
User Information:
Entered By  :                               Date Entered  : SEP 16, 2018
Completed By:                               Date Completed: NOV 25, 2019
Released By :                               Date Released : DEC 13, 2019
=============================================================================


Packman Mail Message:
=====================

No routines included
