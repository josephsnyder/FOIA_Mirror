KIDS Distribution saved on Mar 31, 2005@11:20:49
VistA Imaging Version 3.0 Patch 31 Build 10
**KIDS**:MAG*3.0*31^

**INSTALL NAME**
MAG*3.0*31
"BLD",4111,0)
MAG*3.0*31^IMAGING^0^3050331^y
"BLD",4111,1,0)
^^13^13^3050331^
"BLD",4111,1,1,0)
This is MAG*3.0*31T10.
"BLD",4111,1,2,0)
 
"BLD",4111,1,3,0)
Image Index Conversion.
"BLD",4111,1,4,0)
 
"BLD",4111,1,5,0)
MAGIPS31 value =  6638669
"BLD",4111,1,6,0)
MAGXCVC  value = 12825393
"BLD",4111,1,7,0)
MAGXCVI  value = 12567821
"BLD",4111,1,8,0)
MAGXCVI1 value = 11895918
"BLD",4111,1,9,0)
MAGXCVL  value =  7379304
"BLD",4111,1,10,0)
MAGXCVP  value =  9864505
"BLD",4111,1,11,0)
MAGXCVR  value = 16849068
"BLD",4111,1,12,0)
MAGXCVS  value = 17548265
"BLD",4111,1,13,0)
MAGXCVX  value =  9257872
"BLD",4111,4,0)
^9.64PA^2005.85^2
"BLD",4111,4,2005.81,0)
2005.81
"BLD",4111,4,2005.81,222)
y^y^f^^y^^y^m^n
"BLD",4111,4,2005.85,0)
2005.85
"BLD",4111,4,2005.85,222)
y^y^f^^n^^y^o^n
"BLD",4111,4,"B",2005.81,2005.81)

"BLD",4111,4,"B",2005.85,2005.85)

"BLD",4111,"ABNS",0)
^9.66A^^
"BLD",4111,"ABPKG")
n^y
"BLD",4111,"INI")
PRE^MAGIPS31
"BLD",4111,"INID")
n^y^y
"BLD",4111,"INIT")
POST^MAGIPS31
"BLD",4111,"KRN",0)
^9.67PA^8989.52^19
"BLD",4111,"KRN",.4,0)
.4
"BLD",4111,"KRN",.4,"NM",0)
^9.68A^^
"BLD",4111,"KRN",.401,0)
.401
"BLD",4111,"KRN",.402,0)
.402
"BLD",4111,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",4111,"KRN",.403,0)
.403
"BLD",4111,"KRN",.403,"NM",0)
^9.68A^^
"BLD",4111,"KRN",.5,0)
.5
"BLD",4111,"KRN",.84,0)
.84
"BLD",4111,"KRN",3.6,0)
3.6
"BLD",4111,"KRN",3.8,0)
3.8
"BLD",4111,"KRN",9.2,0)
9.2
"BLD",4111,"KRN",9.8,0)
9.8
"BLD",4111,"KRN",9.8,"NM",0)
^9.68A^17^8
"BLD",4111,"KRN",9.8,"NM",10,0)
MAGXCVI1^^0^B50406294
"BLD",4111,"KRN",9.8,"NM",11,0)
MAGXCVP^^0^B27517218
"BLD",4111,"KRN",9.8,"NM",12,0)
MAGXCVC^^0^B40612890
"BLD",4111,"KRN",9.8,"NM",13,0)
MAGXCVI^^0^B45658217
"BLD",4111,"KRN",9.8,"NM",14,0)
MAGXCVL^^0^B17791267
"BLD",4111,"KRN",9.8,"NM",15,0)
MAGXCVR^^0^B56875627
"BLD",4111,"KRN",9.8,"NM",16,0)
MAGXCVS^^0^B52829212
"BLD",4111,"KRN",9.8,"NM",17,0)
MAGXCVX^^0^B20611154
"BLD",4111,"KRN",9.8,"NM","B","MAGXCVC",12)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVI",13)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVI1",10)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVL",14)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVP",11)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVR",15)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVS",16)

"BLD",4111,"KRN",9.8,"NM","B","MAGXCVX",17)

"BLD",4111,"KRN",19,0)
19
"BLD",4111,"KRN",19,"NM",0)
^9.68A^^0
"BLD",4111,"KRN",19.1,0)
19.1
"BLD",4111,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",4111,"KRN",101,0)
101
"BLD",4111,"KRN",409.61,0)
409.61
"BLD",4111,"KRN",771,0)
771
"BLD",4111,"KRN",870,0)
870
"BLD",4111,"KRN",8989.51,0)
8989.51
"BLD",4111,"KRN",8989.52,0)
8989.52
"BLD",4111,"KRN",8994,0)
8994
"BLD",4111,"KRN","B",.4,.4)

"BLD",4111,"KRN","B",.401,.401)

"BLD",4111,"KRN","B",.402,.402)

"BLD",4111,"KRN","B",.403,.403)

"BLD",4111,"KRN","B",.5,.5)

"BLD",4111,"KRN","B",.84,.84)

"BLD",4111,"KRN","B",3.6,3.6)

"BLD",4111,"KRN","B",3.8,3.8)

"BLD",4111,"KRN","B",9.2,9.2)

"BLD",4111,"KRN","B",9.8,9.8)

"BLD",4111,"KRN","B",19,19)

"BLD",4111,"KRN","B",19.1,19.1)

"BLD",4111,"KRN","B",101,101)

"BLD",4111,"KRN","B",409.61,409.61)

"BLD",4111,"KRN","B",771,771)

"BLD",4111,"KRN","B",870,870)

"BLD",4111,"KRN","B",8989.51,8989.51)

"BLD",4111,"KRN","B",8989.52,8989.52)

"BLD",4111,"KRN","B",8994,8994)

"BLD",4111,"QUES",0)
^9.62^^
"BLD",4111,"REQB",0)
^9.611^4^4
"BLD",4111,"REQB",1,0)
MAG*3.0*17^2
"BLD",4111,"REQB",2,0)
MAG*3.0*7^2
"BLD",4111,"REQB",3,0)
MAG*3.0*1^2
"BLD",4111,"REQB",4,0)
MAG*3.0*25^2
"BLD",4111,"REQB","B","MAG*3.0*1",3)

"BLD",4111,"REQB","B","MAG*3.0*17",1)

"BLD",4111,"REQB","B","MAG*3.0*25",4)

"BLD",4111,"REQB","B","MAG*3.0*7",2)

"DATA",2005.81,1,0)
ANATOMIC DIAGRAM^CLIN
"DATA",2005.81,1,2)
NONE^1^76
"DATA",2005.81,4,0)
CONSULT FORM^CLIN
"DATA",2005.81,4,2)
NONE^1^80
"DATA",2005.81,6,0)
INSURANCE FORM^ADMIN
"DATA",2005.81,6,2)
NONE^8^6
"DATA",2005.81,10,0)
ENCOUNTER FORM^CLIN
"DATA",2005.81,10,2)
NONE^1^73
"DATA",2005.81,12,0)
OTHER-MEDICAL^CLIN
"DATA",2005.81,12,2)
NONE^1
"DATA",2005.81,13,0)
OTHER-NON-MEDICAL^OLD
"DATA",2005.81,13,2)
NONE^8^45
"DATA",2005.81,15,0)
ADMIN^OLD
"DATA",2005.81,15,2)
NONE^8
"DATA",2005.81,16,0)
VAS^CLIN
"DATA",2005.81,16,2)
NONE^1^^117^21
"DATA",2005.81,17,0)
DRM^CLIN
"DATA",2005.81,17,2)
NONE^1^^^19
"DATA",2005.81,18,0)
ABG^CLIN
"DATA",2005.81,18,2)
NONE^1^^110
"DATA",2005.81,19,0)
ENDOC^CLIN
"DATA",2005.81,19,2)
NONE^1^^^12
"DATA",2005.81,20,0)
BMA^CLIN
"DATA",2005.81,20,2)
NONE^1^^118^4
"DATA",2005.81,21,0)
NEU^CLIN
"DATA",2005.81,21,2)
NONE^1^^^27
"DATA",2005.81,22,0)
Wound assessment^CLIN
"DATA",2005.81,22,2)
NONE^1^^119
"DATA",2005.81,23,0)
POD^CLIN
"DATA",2005.81,23,2)
NONE^1^^^23
"DATA",2005.81,24,0)
DENTAL^CLIN
"DATA",2005.81,24,2)
NONE^1^^^53
"DATA",2005.81,25,0)
ANGIO^CLIN
"DATA",2005.81,25,2)
NONE^1^^109
"DATA",2005.81,26,0)
OPH^CLIN
"DATA",2005.81,26,2)
NONE^1^^^17
"DATA",2005.81,27,0)
ECG^CLIN
"DATA",2005.81,27,2)
NONE^1^^3^2
"DATA",2005.81,28,0)
AUD^CLIN
"DATA",2005.81,28,2)
NONE^1^^^58
"DATA",2005.81,29,0)
LHC^CLIN
"DATA",2005.81,29,2)
NONE^1^^^30
"DATA",2005.81,30,0)
GEN^CLIN
"DATA",2005.81,30,2)
NONE^1^^^47
"DATA",2005.81,31,0)
ERC^CLIN
"DATA",2005.81,31,2)
NONE^1^^79^3
"DATA",2005.81,32,0)
ORTH^CLIN
"DATA",2005.81,32,2)
NONE^1^^^16
"DATA",2005.81,33,0)
RHEUM^CLIN
"DATA",2005.81,33,2)
NONE^1^^^9
"DATA",2005.81,34,0)
ULTSND^CLIN
"DATA",2005.81,34,2)
NONE^1^^108
"DATA",2005.81,35,0)
DERM^CLIN
"DATA",2005.81,35,2)
NONE^1^^^19
"DATA",2005.81,36,0)
ENT^CLIN
"DATA",2005.81,36,2)
NONE^1^^^24
"DATA",2005.81,37,0)
IMM^CLIN
"DATA",2005.81,37,2)
NONE^1^^^34
"DATA",2005.81,38,0)
Hematology^CLIN
"DATA",2005.81,38,2)
NONE^1^^^4
"DATA",2005.81,39,0)
BSW^CLIN
"DATA",2005.81,39,2)
NONE^1^^^58
"DATA",2005.81,40,0)
SPEECH TH.^CLIN
"DATA",2005.81,40,2)
NONE^1^^^58
"DATA",2005.81,41,0)
EEG^CLIN
"DATA",2005.81,41,2)
NONE^1^^120^27
"DATA",2005.81,42,0)
Clinical Picture^CLIN
"DATA",2005.81,42,2)
NONE^1^75
"DATA",2005.81,43,0)
ARTH^CLIN
"DATA",2005.81,43,2)
NONE^1^^7^16
"DATA",2005.81,44,0)
UNASSIGNED^CLIN
"DATA",2005.81,44,2)
NONE^9
"DATA",2005.81,45,0)
MISCELLANEOUS^ADMIN
"DATA",2005.81,45,2)
NONE^8^45
"DATA",2005.81,46,0)
MEANS TEST (10-10EZ)^ADMIN
"DATA",2005.81,46,1)
1^Copy this image to the HEC Server^HEC^MAGGSPP
"DATA",2005.81,46,2)
NONE^8^46
"DATA",2005.81,47,0)
MEANS TEST (10-10F)^ADMIN
"DATA",2005.81,47,1)
1^Copy this image to the HEC Server^HEC^MAGGSPP
"DATA",2005.81,47,2)
NONE^8^47
"DATA",2005.81,48,0)
ALLIED VETERAN^ADMIN
"DATA",2005.81,48,2)
NONE^8^48
"DATA",2005.81,49,0)
APPT OF VSO AS CLAIMANT'S REP^ADMIN
"DATA",2005.81,49,2)
NONE^8^49
"DATA",2005.81,50,0)
CORRESPONDENCE^ADMIN
"DATA",2005.81,50,2)
NONE^8^50
"DATA",2005.81,51,0)
DD214 ENLISTED RECORD & RPT OF SEP^ADMIN
"DATA",2005.81,51,2)
NONE^8^51
"DATA",2005.81,52,0)
DEATH CERTIFICATE^ADMIN
"DATA",2005.81,52,2)
NONE^9^52
"DATA",2005.81,53,0)
DENIAL LETTER^ADMIN
"DATA",2005.81,53,2)
NONE^8^53
"DATA",2005.81,54,0)
DISCHARGE AGAINST MEDICAL ADVICE^ADMIN
"DATA",2005.81,54,2)
NONE^9^54
"DATA",2005.81,55,0)
ELIGIBILITY (10-7131)^ADMIN
"DATA",2005.81,55,2)
NONE^8^7
"DATA",2005.81,56,0)
FINANCIAL WORKSHEET^ADMIN
"DATA",2005.81,56,2)
NONE^8^56
"DATA",2005.81,57,0)
INVENTORY OF FUNDS AND EFFECTS^ADMIN
"DATA",2005.81,57,2)
NONE^8^57
"DATA",2005.81,58,0)
MEDICAL CERTIFICATE^ADMIN
"DATA",2005.81,58,2)
NONE^8^58
"DATA",2005.81,59,0)
HEALTH INSURANCE CARDS^ADMIN
"DATA",2005.81,59,2)
NONE^8^59
"DATA",2005.81,60,0)
PLENARY GUARDIANSHIP^ADMIN
"DATA",2005.81,60,2)
NONE^9^60
"DATA",2005.81,61,0)
POWER OF ATTORNEY^ADMIN
"DATA",2005.81,61,2)
NONE^9^61
"DATA",2005.81,62,0)
REPORT OF CONTACT^ADMIN
"DATA",2005.81,62,2)
NONE^8^62
"DATA",2005.81,63,0)
REQUEST FOR INFORMATION^ADMIN
"DATA",2005.81,63,2)
NONE^8^63
"DATA",2005.81,64,0)
VALUABLES / BELONGINGS CHECKLIST^ADMIN
"DATA",2005.81,64,2)
NONE^8^64
"DATA",2005.81,65,0)
DESIGNATION OF HEALTHCARE SURROGATE^ADMIN
"DATA",2005.81,65,2)
NONE^9^65
"DATA",2005.81,66,0)
LOCAL SITE ENTRY
"DATA",2005.81,66,2)
NONE^9^45
"DATA",2005.81,67,0)
REQUEST FOR AUTOPSY
"DATA",2005.81,67,2)
NONE^9^82
"DATA",2005.81,68,0)
ADVANCE DIRECTIVE
"DATA",2005.81,68,2)
^7^67
"DATA",2005.81,69,0)
RELEASE OF INFORMATION CONSENTS
"DATA",2005.81,69,2)
NONE^9^83
"DATA",2005.81,70,0)
COMMITMENT 1013
"DATA",2005.81,70,2)
NONE^9^81
"DATA",2005.81,71,0)
COMMITMENT 2013
"DATA",2005.81,71,2)
NONE^9^81
"DATA",2005.81,72,0)
PHOTO ID^CLIN
"DATA",2005.85,1,0)
CARDIAC CATHETERIZATION^1
"DATA",2005.85,1,1,0)
^2005.852P^2^2
"DATA",2005.85,1,1,1,0)
2
"DATA",2005.85,1,1,2,0)
47
"DATA",2005.85,1,2)
CATH
"DATA",2005.85,2,0)
ECHOCARDIOGRAM^1
"DATA",2005.85,2,1,0)
^2005.852P^1^1
"DATA",2005.85,2,1,1,0)
2
"DATA",2005.85,2,2)
ECHO
"DATA",2005.85,3,0)
EKG^1
"DATA",2005.85,3,1,0)
^2005.852P^1^1
"DATA",2005.85,3,1,1,0)
2
"DATA",2005.85,3,2)
EKG
"DATA",2005.85,4,0)
HOLTER^1
"DATA",2005.85,4,1,0)
^2005.852P^2^2
"DATA",2005.85,4,1,1,0)
2
"DATA",2005.85,4,1,2,0)
47
"DATA",2005.85,4,2)
HOLTR
"DATA",2005.85,5,0)
PULMONARY FUNCTION TEST^1
"DATA",2005.85,5,1,0)
^2005.852P^1^1
"DATA",2005.85,5,1,1,0)
8
"DATA",2005.85,5,2)
PFT
"DATA",2005.85,6,0)
ENDOSCOPY^1
"DATA",2005.85,6,1,0)
^2005.852P^3^3
"DATA",2005.85,6,1,1,0)
3
"DATA",2005.85,6,1,2,0)
8
"DATA",2005.85,6,1,3,0)
47
"DATA",2005.85,6,2)
ENDO
"DATA",2005.85,7,0)
ARTHROSCOPY^1
"DATA",2005.85,7,1,0)
^2005.852P^2^2
"DATA",2005.85,7,1,1,0)
16
"DATA",2005.85,7,1,2,0)
48
"DATA",2005.85,7,2)
ARTHR
"DATA",2005.85,8,0)
CYSTOSCOPY^1
"DATA",2005.85,8,1,0)
^2005.852P^2^2
"DATA",2005.85,8,1,1,0)
15
"DATA",2005.85,8,1,2,0)
48
"DATA",2005.85,8,2)
CYSTO
"DATA",2005.85,9,0)
MICROSCOPY^1
"DATA",2005.85,9,1,0)
^2005.852P^4^3
"DATA",2005.85,9,1,2,0)
32
"DATA",2005.85,9,1,3,0)
4
"DATA",2005.85,9,1,4,0)
30
"DATA",2005.85,9,2)
MICRO
"DATA",2005.85,10,0)
BIOPSY^1
"DATA",2005.85,10,1,0)
^2005.852P^15^14
"DATA",2005.85,10,1,1,0)
20
"DATA",2005.85,10,1,2,0)
19
"DATA",2005.85,10,1,3,0)
4
"DATA",2005.85,10,1,4,0)
18
"DATA",2005.85,10,1,5,0)
43
"DATA",2005.85,10,1,6,0)
16
"DATA",2005.85,10,1,7,0)
24
"DATA",2005.85,10,1,8,0)
23
"DATA",2005.85,10,1,9,0)
45
"DATA",2005.85,10,1,10,0)
42
"DATA",2005.85,10,1,12,0)
21
"DATA",2005.85,10,1,13,0)
48
"DATA",2005.85,10,1,14,0)
47
"DATA",2005.85,10,1,15,0)
8
"DATA",2005.85,10,2)
BX 
"DATA",2005.85,11,0)
SURGERY^1
"DATA",2005.85,11,1,0)
^2005.852P^13^13
"DATA",2005.85,11,1,1,0)
20
"DATA",2005.85,11,1,2,0)
18
"DATA",2005.85,11,1,3,0)
15
"DATA",2005.85,11,1,4,0)
14
"DATA",2005.85,11,1,5,0)
21
"DATA",2005.85,11,1,6,0)
53
"DATA",2005.85,11,1,7,0)
43
"DATA",2005.85,11,1,8,0)
17
"DATA",2005.85,11,1,9,0)
16
"DATA",2005.85,11,1,10,0)
24
"DATA",2005.85,11,1,11,0)
44
"DATA",2005.85,11,1,12,0)
23
"DATA",2005.85,11,1,13,0)
48
"DATA",2005.85,11,2)
SURG
"DATA",2005.85,12,0)
COLONOSCOPY^1
"DATA",2005.85,12,1,0)
^2005.852P^1^1
"DATA",2005.85,12,1,1,0)
3
"DATA",2005.85,12,2)
COL
"DATA",2005.85,13,0)
EGD^1
"DATA",2005.85,13,1,0)
^2005.852P^1^1
"DATA",2005.85,13,1,1,0)
3
"DATA",2005.85,13,2)
EGD
"DATA",2005.85,14,0)
VISIT^1
"DATA",2005.85,14,1,0)
^2005.852P^26^26
"DATA",2005.85,14,1,1,0)
2
"DATA",2005.85,14,1,2,0)
53
"DATA",2005.85,14,1,3,0)
19
"DATA",2005.85,14,1,4,0)
39
"DATA",2005.85,14,1,5,0)
12
"DATA",2005.85,14,1,6,0)
3
"DATA",2005.85,14,1,7,0)
11
"DATA",2005.85,14,1,8,0)
4
"DATA",2005.85,14,1,9,0)
5
"DATA",2005.85,14,1,10,0)
1
"DATA",2005.85,14,1,11,0)
47
"DATA",2005.85,14,1,12,0)
7
"DATA",2005.85,14,1,13,0)
27
"DATA",2005.85,14,1,14,0)
52
"DATA",2005.85,14,1,15,0)
43
"DATA",2005.85,14,1,16,0)
6
"DATA",2005.85,14,1,17,0)
17
"DATA",2005.85,14,1,18,0)
16
"DATA",2005.85,14,1,19,0)
24
"DATA",2005.85,14,1,20,0)
25
"DATA",2005.85,14,1,21,0)
45
"DATA",2005.85,14,1,22,0)
8
"DATA",2005.85,14,1,23,0)
9
"DATA",2005.85,14,1,24,0)
15
"DATA",2005.85,14,1,25,0)
42
"DATA",2005.85,14,1,26,0)
23
"DATA",2005.85,14,2)
VISIT
"DATA",2005.85,15,0)
LAPAROSCOPY^1
"DATA",2005.85,15,1,0)
^2005.852P^1^1
"DATA",2005.85,15,1,1,0)
48
"DATA",2005.85,15,2)
LAP
"DATA",2005.85,16,0)
ANESTHESIA^1
"DATA",2005.85,16,1,0)
^2005.852P^2^2
"DATA",2005.85,16,1,1,0)
40
"DATA",2005.85,16,1,2,0)
48
"DATA",2005.85,16,2)
ANEST
"DATA",2005.85,17,0)
BRONCHOSCOPY^1
"DATA",2005.85,17,1,0)
^2005.852P^2^2
"DATA",2005.85,17,1,1,0)
8
"DATA",2005.85,17,1,2,0)
47
"DATA",2005.85,17,2)
BRONC
"DATA",2005.85,18,0)
CONTRAST INJECTION^1
"DATA",2005.85,18,1,0)
^2005.852P^5^5
"DATA",2005.85,18,1,1,0)
47
"DATA",2005.85,18,1,2,0)
51
"DATA",2005.85,18,1,3,0)
2
"DATA",2005.85,18,1,4,0)
48
"DATA",2005.85,18,1,5,0)
29
"DATA",2005.85,18,2)
CONTR
"DATA",2005.85,19,0)
DENTAL IMAGE PA^1
"DATA",2005.85,19,1,0)
^2005.852P^2^2
"DATA",2005.85,19,1,1,0)
53
"DATA",2005.85,19,1,2,0)
53
"DATA",2005.85,19,2)
DENPA
"DATA",2005.85,20,0)
STRESS TEST^1
"DATA",2005.85,20,1,0)
^2005.852P^1^1
"DATA",2005.85,20,1,1,0)
2
"DATA",2005.85,20,2)
STRES
"DATA",2005.85,21,0)
ACUPUNCTURE^1
"DATA",2005.85,21,1,0)
^2005.852P^2^1
"DATA",2005.85,21,1,2,0)
40
"DATA",2005.85,21,2)
ACU
"DATA",2005.85,22,0)
EPID STEROID INJECTION^1
"DATA",2005.85,22,1,0)
^2005.852P^2^2
"DATA",2005.85,22,1,1,0)
47
"DATA",2005.85,22,1,2,0)
16
"DATA",2005.85,22,2)
STERD
"DATA",2005.85,23,0)
PARACENTESIS^1
"DATA",2005.85,23,1,0)
^2005.852P^3^3
"DATA",2005.85,23,1,1,0)
48
"DATA",2005.85,23,1,2,0)
47
"DATA",2005.85,23,1,3,0)
40
"DATA",2005.85,23,2)
PARAC
"DATA",2005.85,24,0)
NASOPHARYNGOSCOPY^1
"DATA",2005.85,24,1,0)
^2005.852P^2^2
"DATA",2005.85,24,1,1,0)
24
"DATA",2005.85,24,1,2,0)
48
"DATA",2005.85,24,2)
NASOP
"DATA",2005.85,25,0)
SIGMOIDOSCOPY^1
"DATA",2005.85,25,1,0)
^2005.852P^1^1
"DATA",2005.85,25,1,1,0)
3
"DATA",2005.85,25,2)
SIG
"DATA",2005.85,26,0)
THALLIUM STRESS TEST^1
"DATA",2005.85,26,1,0)
^2005.852P^3^3
"DATA",2005.85,26,1,1,0)
2
"DATA",2005.85,26,1,2,0)
28
"DATA",2005.85,26,1,3,0)
29
"DATA",2005.85,26,2)
THALL
"DATA",2005.85,27,0)
TRIG PT INJ^1
"DATA",2005.85,27,1,0)
^2005.852P^2^2
"DATA",2005.85,27,1,1,0)
53
"DATA",2005.85,27,1,2,0)
40
"DATA",2005.85,27,2)
TRIGM
"DATA",2005.85,28,0)
BLOOD TRANSFUSION^1
"DATA",2005.85,28,1,0)
^2005.852P^3^3
"DATA",2005.85,28,1,1,0)
6
"DATA",2005.85,28,1,2,0)
1
"DATA",2005.85,28,1,3,0)
48
"DATA",2005.85,28,2)
BB 
"DATA",2005.85,29,0)
ASPIRATION/DRAINAGE/BIOPSY^1
"DATA",2005.85,29,1,0)
^2005.852P^2^2
"DATA",2005.85,29,1,1,0)
48
"DATA",2005.85,29,1,2,0)
47
"DATA",2005.85,29,2)
ASP
"DATA",2005.85,30,0)
UPPER ENDOSCOPY^1
"DATA",2005.85,30,1,0)
^2005.852P^4^4
"DATA",2005.85,30,1,1,0)
3
"DATA",2005.85,30,1,2,0)
24
"DATA",2005.85,30,1,3,0)
47
"DATA",2005.85,30,1,4,0)
40
"DATA",2005.85,30,2)
ENDOU
"DATA",2005.85,31,0)
DIALYSIS CATHETER INSERTION^1
"DATA",2005.85,31,1,0)
^2005.852P^3^3
"DATA",2005.85,31,1,1,0)
7
"DATA",2005.85,31,1,2,0)
1
"DATA",2005.85,31,1,3,0)
48
"DATA",2005.85,31,2)
DIALC
"DATA",2005.85,32,0)
CONSCIOUS SEDATION^1
"DATA",2005.85,32,1,0)
^2005.852P^2^2
"DATA",2005.85,32,1,1,0)
48
"DATA",2005.85,32,1,2,0)
27
"DATA",2005.85,32,2)
SED
"DATA",2005.85,33,0)
EXTENDED CARE^1
"DATA",2005.85,33,1,0)
^2005.852P^1^1
"DATA",2005.85,33,1,1,0)
47
"DATA",2005.85,33,2)
ECARE
"DATA",2005.85,34,0)
HIV TESTING^1
"DATA",2005.85,34,1,0)
^2005.852P^2^2
"DATA",2005.85,34,1,1,0)
5
"DATA",2005.85,34,1,2,0)
49
"DATA",2005.85,34,2)
HIV
"DATA",2005.85,35,0)
INFLUENZA FLU VACCINE^1
"DATA",2005.85,35,1,0)
^2005.852P^2^2
"DATA",2005.85,35,1,1,0)
5
"DATA",2005.85,35,1,2,0)
52
"DATA",2005.85,35,2)
FLUVC
"DATA",2005.85,36,0)
INTER-FACILITY TRANSFER^1
"DATA",2005.85,36,1,0)
^2005.852P^1^1
"DATA",2005.85,36,1,1,0)
47
"DATA",2005.85,36,2)
IFT
"DATA",2005.85,37,0)
PALLIATIVE CARE^1
"DATA",2005.85,37,1,0)
^2005.852P^1^1
"DATA",2005.85,37,1,1,0)
6
"DATA",2005.85,37,2)
PALLI
"DATA",2005.85,38,0)
PHOTOGRAPHY^1
"DATA",2005.85,38,1,0)
^2005.852P^2^2
"DATA",2005.85,38,1,1,0)
19
"DATA",2005.85,38,1,2,0)
52
"DATA",2005.85,38,2)
PHOTO
"DATA",2005.85,39,0)
PATIENT CONTRACT/CHRONIC NARCOTIC USE^1
"DATA",2005.85,39,1,0)
^2005.852P^1^1
"DATA",2005.85,39,1,1,0)
55
"DATA",2005.85,39,2)
PTNAR
"DATA",2005.85,40,0)
PORT PLACEMENT^1
"DATA",2005.85,40,1,0)
^2005.852P^1^1
"DATA",2005.85,40,1,1,0)
48
"DATA",2005.85,40,2)
PORT
"DATA",2005.85,41,0)
USE OF RESTRAINT^1
"DATA",2005.85,41,1,0)
^2005.852P^2^2
"DATA",2005.85,41,1,1,0)
52
"DATA",2005.85,41,1,2,0)
55
"DATA",2005.85,41,2)
RESTR
"DATA",2005.85,42,0)
RESEARCH PROCEDURE^1^A
"DATA",2005.85,42,1,0)
^2005.852P^1^1
"DATA",2005.85,42,1,1,0)
66
"DATA",2005.85,42,2)
RESCH
"DATA",2005.85,43,0)
VASCULAR INTERVENTION^1
"DATA",2005.85,43,1,0)
^2005.852P^1^1
"DATA",2005.85,43,1,1,0)
21
"DATA",2005.85,43,2)
VASC
"DATA",2005.85,44,0)
VENOGRAM^1
"DATA",2005.85,44,1,0)
^2005.852P^2^2
"DATA",2005.85,44,1,1,0)
29
"DATA",2005.85,44,1,2,0)
21
"DATA",2005.85,44,2)
VENGR
"DATA",2005.85,45,0)
WAIVER FOR PATIENT OF CHILD BEARING AGE^1
"DATA",2005.85,45,1,0)
^2005.852P^1^1
"DATA",2005.85,45,1,1,0)
43
"DATA",2005.85,45,2)
WAIVR
"DATA",2005.85,46,0)
MISCELLANEOUS^1
"DATA",2005.85,46,2)
MISC
"DATA",2005.85,47,0)
REQUEST FOR VOLUNTARY ADMISSION^1
"DATA",2005.85,47,1,0)
^2005.852P^1^1
"DATA",2005.85,47,1,1,0)
55
"DATA",2005.85,47,2)
VOLAD
"DATA",2005.85,48,0)
PATIENT'S TREATMENT PLAN^1
"DATA",2005.85,48,1,0)
^2005.852P^2^2
"DATA",2005.85,48,1,1,0)
52
"DATA",2005.85,48,1,2,0)
55
"DATA",2005.85,48,2)
PTTXP
"DATA",2005.85,49,0)
ONE-TO-ONE OBSERVATION REQUIREMENT^1
"DATA",2005.85,49,1,0)
^2005.852P^2^2
"DATA",2005.85,49,1,1,0)
26
"DATA",2005.85,49,1,2,0)
55
"DATA",2005.85,49,2)
1TO1
"DATA",2005.85,50,0)
RESERVIST PHYSICAL SF 88/93^1
"DATA",2005.85,50,1,0)
^2005.852P^1^1
"DATA",2005.85,50,1,1,0)
47
"DATA",2005.85,50,2)
RESPE
"DATA",2005.85,51,0)
VENTILATION^1
"DATA",2005.85,51,1,0)
^2005.852P^3^3
"DATA",2005.85,51,1,1,0)
8
"DATA",2005.85,51,1,2,0)
10
"DATA",2005.85,51,1,3,0)
22
"DATA",2005.85,51,2)
VENT
"DATA",2005.85,52,0)
OCCLUSAL^1
"DATA",2005.85,52,1,0)
^2005.852P^1^1
"DATA",2005.85,52,1,1,0)
53
"DATA",2005.85,52,2)
OCCLU
"DATA",2005.85,53,0)
EXTRAORAL^1
"DATA",2005.85,53,1,0)
^2005.852P^1^1
"DATA",2005.85,53,1,1,0)
53
"DATA",2005.85,53,2)
EXTOR
"DATA",2005.85,54,0)
INTRA-ORAL RADIOGRAPH^1
"DATA",2005.85,54,1,0)
^2005.852P^1^1
"DATA",2005.85,54,1,1,0)
53
"DATA",2005.85,54,2)
IOR
"DATA",2005.85,55,0)
BONE SURVEY^1
"DATA",2005.85,55,1,0)
^2005.852P^2^2
"DATA",2005.85,55,1,1,0)
53
"DATA",2005.85,55,1,2,0)
28
"DATA",2005.85,55,2)
BONSV
"DATA",2005.85,56,0)
SIALOGRAPHY^1
"DATA",2005.85,56,1,0)
^2005.852P^1^1
"DATA",2005.85,56,1,1,0)
53
"DATA",2005.85,56,2)
SIALO
"DATA",2005.85,57,0)
VERTICAL BITEWINGS^1
"DATA",2005.85,57,1,0)
^2005.852P^68^2
"DATA",2005.85,57,1,1,0)
53
"DATA",2005.85,57,1,68,0)
53
"DATA",2005.85,57,2)
BITEV
"DATA",2005.85,58,0)
TMJ^1
"DATA",2005.85,58,1,0)
^2005.852P^69^2
"DATA",2005.85,58,1,1,0)
53
"DATA",2005.85,58,1,69,0)
53
"DATA",2005.85,58,2)
TMJ
"DATA",2005.85,59,0)
TOMOGRAPHIC^1
"DATA",2005.85,59,1,0)
^2005.852P^70^2
"DATA",2005.85,59,1,1,0)
53
"DATA",2005.85,59,1,70,0)
53
"DATA",2005.85,59,2)
TOMOG
"DATA",2005.85,60,0)
PANORAMIC^1
"DATA",2005.85,60,1,0)
^2005.852P^71^2
"DATA",2005.85,60,1,1,0)
53
"DATA",2005.85,60,1,71,0)
53
"DATA",2005.85,60,2)
PANOR
"DATA",2005.85,61,0)
CEPHALOMETRIC^1
"DATA",2005.85,61,1,0)
^2005.852P^72^2
"DATA",2005.85,61,1,1,0)
53
"DATA",2005.85,61,1,72,0)
53
"DATA",2005.85,61,2)
CEPHL
"DATA",2005.85,62,0)
VISIBLE LIGHT^1
"DATA",2005.85,62,1,0)
^2005.852P^1^1
"DATA",2005.85,62,1,1,0)
53
"DATA",2005.85,62,2)
VISLT
"DATA",2005.85,63,0)
INACTIVE 63^^I
"DATA",2005.85,64,0)
FLUORESCEIN ANGIOGRAPHY^1
"DATA",2005.85,64,1,0)
^2005.852P^1^1
"DATA",2005.85,64,1,1,0)
17
"DATA",2005.85,64,2)
FLANG
"DATA",2005.85,65,0)
MANOMETRY^1
"DATA",2005.85,65,1,0)
^2005.852P^1^1
"DATA",2005.85,65,1,1,0)
3
"DATA",2005.85,65,2)
MANOM
"DATA",2005.85,66,0)
REFERRAL^1
"DATA",2005.85,66,2)
REFER
"DATA",2005.85,67,0)
HOME VISIT^1
"DATA",2005.85,67,1,0)
^2005.852P^1^1
"DATA",2005.85,67,1,1,0)
52
"DATA",2005.85,67,2)
HBPC
"DATA",2005.85,68,0)
INTRAORAL^1
"DATA",2005.85,68,1,0)
^2005.852P^1^1
"DATA",2005.85,68,1,1,0)
53
"DATA",2005.85,68,2)
INTOR
"DATA",2005.85,69,0)
ORAL MAXILLOFACIAL SURGERY^1
"DATA",2005.85,69,1,0)
^2005.852P^1^1
"DATA",2005.85,69,1,1,0)
53
"DATA",2005.85,69,2)
MFSUR
"DATA",2005.85,70,0)
HEALTH QUESTIONS/QUESTIONNAIRE^1
"DATA",2005.85,70,1,0)
^2005.852P^1^1
"DATA",2005.85,70,1,1,0)
53
"DATA",2005.85,70,2)
QUEST
"DATA",2005.85,71,0)
OP EMER/REF & TREATMENT^1
"DATA",2005.85,71,1,0)
^2005.852P^1^1
"DATA",2005.85,71,1,1,0)
53
"DATA",2005.85,71,2)
OPERT
"DATA",2005.85,72,0)
PERIODONTIC EXAM^1
"DATA",2005.85,72,1,0)
^2005.852P^1^1
"DATA",2005.85,72,1,1,0)
53
"DATA",2005.85,72,2)
PERIO
"DATA",2005.85,73,0)
RATING DECISION^1
"DATA",2005.85,73,1,0)
^2005.852P^1^1
"DATA",2005.85,73,1,1,0)
53
"DATA",2005.85,73,2)
RATNG
"DATA",2005.85,74,0)
CATHETER INSERTION^1
"DATA",2005.85,74,1,0)
^2005.852P^2^2
"DATA",2005.85,74,1,1,0)
7
"DATA",2005.85,74,1,2,0)
15
"DATA",2005.85,74,2)
CATHI
"DATA",2005.85,75,0)
DAILY CRITICAL CARE^1
"DATA",2005.85,75,1,0)
^2005.852P^1^1
"DATA",2005.85,75,1,1,0)
52
"DATA",2005.85,75,2)
DCARE
"DATA",2005.85,76,0)
HEPARIN DRIP^1
"DATA",2005.85,76,1,0)
^2005.852P^1^1
"DATA",2005.85,76,1,1,0)
52
"DATA",2005.85,76,2)
HEP
"DATA",2005.85,77,0)
NEURO CHECKS^1
"DATA",2005.85,77,1,0)
^2005.852P^1^1
"DATA",2005.85,77,1,1,0)
52
"DATA",2005.85,77,2)
NEURO
"DATA",2005.85,78,0)
PACU^1
"DATA",2005.85,78,1,0)
^2005.852P^1^1
"DATA",2005.85,78,1,1,0)
52
"DATA",2005.85,78,2)
PACU
"DATA",2005.85,79,0)
ERCP^1
"DATA",2005.85,79,1,0)
^2005.852P^1^1
"DATA",2005.85,79,1,1,0)
3
"DATA",2005.85,79,2)
ERCP
"DATA",2005.85,80,0)
ARTERIOGRAM^1
"DATA",2005.85,80,1,0)
^2005.852P^1^1
"DATA",2005.85,80,1,1,0)
29
"DATA",2005.85,80,2)
ARTGR
"DATA",2005.85,81,0)
NUCLEAR MEDICINE SCAN^1
"DATA",2005.85,81,1,0)
^2005.852P^1^1
"DATA",2005.85,81,1,1,0)
28
"DATA",2005.85,81,2)
NMSCN
"DATA",2005.85,82,0)
STERILIZATION^1
"DATA",2005.85,82,1,0)
^2005.852P^1^1
"DATA",2005.85,82,1,1,0)
15
"DATA",2005.85,82,2)
STERI
"DATA",2005.85,83,0)
BLOOD COMPONENT FORM^1
"DATA",2005.85,83,1,0)
^2005.852P^2^2
"DATA",2005.85,83,1,1,0)
49
"DATA",2005.85,83,1,2,0)
31
"DATA",2005.85,83,2)
BLFRM
"DATA",2005.85,84,0)
ARMED FORCES INST PATH RPT^1
"DATA",2005.85,84,1,0)
^2005.852P^2^2
"DATA",2005.85,84,1,1,0)
50
"DATA",2005.85,84,1,2,0)
49
"DATA",2005.85,84,2)
AFIP
"DATA",2005.85,85,0)
REFERENCE LAB^1
"DATA",2005.85,85,1,0)
^2005.852P^4^4
"DATA",2005.85,85,1,1,0)
49
"DATA",2005.85,85,1,2,0)
33
"DATA",2005.85,85,1,3,0)
30
"DATA",2005.85,85,1,4,0)
32
"DATA",2005.85,85,2)
RFLAB
"DATA",2005.85,86,0)
SERUM PROTEIN ELECTROPHORESIS^1
"DATA",2005.85,86,1,0)
^2005.852P^2^2
"DATA",2005.85,86,1,1,0)
49
"DATA",2005.85,86,1,2,0)
34
"DATA",2005.85,86,2)
SPEP
"DATA",2005.85,87,0)
SECLUSION/RESTRAINT^1
"DATA",2005.85,87,1,0)
^2005.852P^1^1
"DATA",2005.85,87,1,1,0)
55
"DATA",2005.85,87,2)
SECLU
"DATA",2005.85,88,0)
DIABETIC RETINOPATHY^1
"DATA",2005.85,88,1,0)
^2005.852P^3^3
"DATA",2005.85,88,1,1,0)
17
"DATA",2005.85,88,1,2,0)
57
"DATA",2005.85,88,1,3,0)
12
"DATA",2005.85,88,2)
DIEYE
"DATA",2005.85,89,0)
EYE THRESHOLD TEST^1
"DATA",2005.85,89,1,0)
^2005.852P^2^2
"DATA",2005.85,89,1,1,0)
17
"DATA",2005.85,89,1,2,0)
57
"DATA",2005.85,89,2)
EYETH
"DATA",2005.85,90,0)
OPT OBSERVATION MAR^1
"DATA",2005.85,90,1,0)
^2005.852P^1^1
"DATA",2005.85,90,1,1,0)
60
"DATA",2005.85,90,2)
OPTOB
"DATA",2005.85,91,0)
SPIROMETRY^1
"DATA",2005.85,91,1,0)
^2005.852P^2^2
"DATA",2005.85,91,1,1,0)
47
"DATA",2005.85,91,1,2,0)
8
"DATA",2005.85,91,2)
SPIRO
"DATA",2005.85,92,0)
PLETHYSMOGRAPHY^1
"DATA",2005.85,92,1,0)
^2005.852P^1^1
"DATA",2005.85,92,1,1,0)
21
"DATA",2005.85,92,2)
PLETH
"DATA",2005.85,93,0)
DISCHARGE SUMMARY^1
"DATA",2005.85,93,2)
DCSUM
"DATA",2005.85,94,0)
HISTORY & PHYSICAL^1
"DATA",2005.85,94,2)
H&P
"DATA",2005.85,95,0)
INACTIVE 95^^I
"DATA",2005.85,96,0)
INACTIVE 96^^I
"DATA",2005.85,97,0)
INACTIVE 97^^I
"DATA",2005.85,98,0)
ELECTROPHYSIOLOGY STUDY^1
"DATA",2005.85,98,1,0)
^2005.852P^1^1
"DATA",2005.85,98,1,1,0)
2
"DATA",2005.85,98,2)
EPS
"DATA",2005.85,99,0)
LUMBAR PUNCTURE^1
"DATA",2005.85,99,1,0)
^2005.852P^1^1
"DATA",2005.85,99,1,1,0)
40
"DATA",2005.85,99,2)
LP
"DATA",2005.85,100,0)
CHEMOTHERAPY^1
"DATA",2005.85,100,1,0)
^2005.852P^3^3
"DATA",2005.85,100,1,1,0)
6
"DATA",2005.85,100,1,2,0)
47
"DATA",2005.85,100,1,3,0)
48
"DATA",2005.85,100,2)
CHEMO
"DATA",2005.85,101,0)
TRICARE/DOD RESERVIST PHYSICAL SF 88/93^1
"DATA",2005.85,101,1,0)
^2005.852P^1^1
"DATA",2005.85,101,1,1,0)
47
"DATA",2005.85,101,2)
DODPE
"DATA",2005.85,102,0)
CYTOLOGY^1
"DATA",2005.85,102,1,0)
^2005.852P^1^1
"DATA",2005.85,102,1,1,0)
50
"DATA",2005.85,102,2)
CYTO
"DATA",2005.85,103,0)
AUTOPSY^1
"DATA",2005.85,103,1,0)
^2005.852P^1^1
"DATA",2005.85,103,1,1,0)
50
"DATA",2005.85,103,2)
AUT
"DATA",2005.85,104,0)
ELECTRON MICROSCOPY^1
"DATA",2005.85,104,1,0)
^2005.852P^1^1
"DATA",2005.85,104,1,1,0)
50
"DATA",2005.85,104,2)
EM
"DATA",2005.85,105,0)
COMPUTED TOMOGRAPHY^1
"DATA",2005.85,105,1,0)
^2005.852P^1^1
"DATA",2005.85,105,1,1,0)
29
"DATA",2005.85,105,2)
CT
"DATA",2005.85,106,0)
MAGNETIC RESONANCE SCAN^1
"DATA",2005.85,106,1,0)
^2005.852P^1^1
"DATA",2005.85,106,1,1,0)
29
"DATA",2005.85,106,2)
MR
"DATA",2005.85,107,0)
XRAY^1
"DATA",2005.85,107,1,0)
^2005.852P^1^1
"DATA",2005.85,107,1,1,0)
29
"DATA",2005.85,107,2)
XRAY
"DATA",2005.85,108,0)
ULTRASOUND^1
"DATA",2005.85,108,1,0)
^2005.852P^3^3
"DATA",2005.85,108,1,1,0)
29
"DATA",2005.85,108,1,2,0)
2
"DATA",2005.85,108,1,3,0)
21
"DATA",2005.85,108,2)
US
"DATA",2005.85,109,0)
ANGIOGRAPHY^1
"DATA",2005.85,109,1,0)
^2005.852P^2^2
"DATA",2005.85,109,1,1,0)
29
"DATA",2005.85,109,1,2,0)
2
"DATA",2005.85,109,2)
ANGIO
"DATA",2005.85,110,0)
ARTERIAL BLOOD GAS^1
"DATA",2005.85,110,1,0)
^2005.852P^1^1
"DATA",2005.85,110,1,1,0)
8
"DATA",2005.85,110,2)
ABG
"DATA",2005.85,111,0)
COMPUTED RADIOGRAPHY^1
"DATA",2005.85,111,1,0)
^2005.852P^1^1
"DATA",2005.85,111,1,1,0)
29
"DATA",2005.85,111,2)
CR
"DATA",2005.85,112,0)
INACTIVE 112^^I
"DATA",2005.85,113,0)
INACTIVE 113^^I
"DATA",2005.85,114,0)
DIGITAL RADIOGRAPHY^1
"DATA",2005.85,114,1,0)
^2005.852P^1^1
"DATA",2005.85,114,1,1,0)
29
"DATA",2005.85,114,2)
DX
"DATA",2005.85,115,0)
INACTIVE 115^^I
"DATA",2005.85,116,0)
XRAY ANGIOGRAPHY^1
"DATA",2005.85,116,1,0)
^2005.852P^1^1
"DATA",2005.85,116,1,1,0)
29
"DATA",2005.85,116,2)
XA
"DATA",2005.85,117,0)
VASCULAR ULTRASOUND^1^A
"DATA",2005.85,117,1,0)
^2005.852P^3^3
"DATA",2005.85,117,1,1,0)
29
"DATA",2005.85,117,1,2,0)
21
"DATA",2005.85,117,1,3,0)
48
"DATA",2005.85,117,2)
VASUS
"DATA",2005.85,118,0)
BONE MARROW ASPIRATE^1
"DATA",2005.85,118,1,0)
^2005.852P^1^1
"DATA",2005.85,118,1,1,0)
30
"DATA",2005.85,118,2)
BMA
"DATA",2005.85,119,0)
WOUND ASSESSMENT^1
"DATA",2005.85,119,1,0)
^2005.852P^1^1
"DATA",2005.85,119,1,1,0)
52
"DATA",2005.85,119,2)
WOUND
"DATA",2005.85,120,0)
EEG^1
"DATA",2005.85,120,1,0)
^2005.852P^1^1
"DATA",2005.85,120,1,1,0)
27
"DATA",2005.85,120,2)
EEG
"DATA",2005.85,121,0)
SURGICAL PATHOLOGY^1
"DATA",2005.85,121,1,0)
^2005.852P^1^1
"DATA",2005.85,121,1,1,0)
49
"DATA",2005.85,121,2)
SP
"DATA",2005.85,122,0)
EYE EXAM^1
"DATA",2005.85,122,1,0)
^2005.852P^1^1
"DATA",2005.85,122,1,1,0)
57
"DATA",2005.85,122,2)
EYEEX
"DATA",2005.85,123,0)
VITAL SIGNS^1^A
"DATA",2005.85,123,1,0)
^2005.852P^2^2
"DATA",2005.85,123,1,1,0)
42
"DATA",2005.85,123,1,2,0)
52
"DATA",2005.85,123,2)
VITAL
"DATA",2005.85,124,0)
C&P EXAM^1
"DATA",2005.85,124,2)
C&P
"DATA",2005.85,125,0)
ELECTROMYOGRAM^1
"DATA",2005.85,125,1,0)
^2005.852P^1^1
"DATA",2005.85,125,1,1,0)
27
"DATA",2005.85,125,2)
EMG
"DATA",2005.85,126,0)
LARYNGOSCOPY^1
"DATA",2005.85,126,1,0)
^2005.852P^1^1
"DATA",2005.85,126,1,1,0)
24
"DATA",2005.85,126,2)
LAR
"DATA",2005.85,127,0)
THORACENTESIS^1^A
"DATA",2005.85,127,1,0)
^2005.852P^3^3
"DATA",2005.85,127,1,1,0)
48
"DATA",2005.85,127,1,2,0)
14
"DATA",2005.85,127,1,3,0)
8
"DATA",2005.85,127,2)
THORA
"DATA",2005.85,128,0)
LUNG REDUCTION^1
"DATA",2005.85,128,1,0)
^2005.852P^1^1
"DATA",2005.85,128,1,1,0)
48
"DATA",2005.85,128,2)
LUNGR
"DATA",2005.85,129,0)
DIALYSIS^1
"DATA",2005.85,129,1,0)
^2005.852P^1^1
"DATA",2005.85,129,1,1,0)
7
"DATA",2005.85,129,2)
DIALY
"DATA",2005.85,130,0)
MAMMOGRAPHY^1^A
"DATA",2005.85,130,1,0)
^2005.852P^2^2
"DATA",2005.85,130,1,1,0)
29
"DATA",2005.85,130,1,2,0)
43
"DATA",2005.85,130,2)
MAMMO
"DATA",2005.85,131,0)
VISUAL FIELD^1^A
"DATA",2005.85,131,1,0)
^2005.852P^3^3
"DATA",2005.85,131,1,1,0)
57
"DATA",2005.85,131,1,2,0)
17
"DATA",2005.85,131,1,3,0)
56
"DATA",2005.85,131,2)
VISFD
"DATA",2005.85,132,0)
EYE PHOTOGRAPHY^1^A
"DATA",2005.85,132,1,0)
^2005.852P^3^3
"DATA",2005.85,132,1,1,0)
57
"DATA",2005.85,132,1,2,0)
17
"DATA",2005.85,132,1,3,0)
56
"DATA",2005.85,132,2)
EYEPH
"DATA",2005.85,133,0)
IMMUNIZATION^1^A
"DATA",2005.85,133,1,0)
^2005.852P^3^3
"DATA",2005.85,133,1,1,0)
42
"DATA",2005.85,133,1,2,0)
52
"DATA",2005.85,133,1,3,0)
41
"DATA",2005.85,133,2)
IMMUN
"DATA",2005.85,134,0)
BONE MARROW BIOPSY^1^A
"DATA",2005.85,134,1,0)
^2005.852P^2^2
"DATA",2005.85,134,1,1,0)
4
"DATA",2005.85,134,1,2,0)
30
"DATA",2005.85,134,2)
BMB
"DATA",2005.85,135,0)
PATIENT EDUCATION^1^A
"DATA",2005.85,135,2)
PATED
"DATA",2005.85,136,0)
INJECTION^1^A
"DATA",2005.85,136,2)
INJ
"DATA",2005.85,137,0)
TELEPHONE CONTACT^1^A
"DATA",2005.85,137,2)
TEL
"DATA",2005.85,138,0)
PAIN MANAGEMENT^1^A
"DATA",2005.85,138,1,0)
^2005.852P^5^5
"DATA",2005.85,138,1,1,0)
27
"DATA",2005.85,138,1,2,0)
6
"DATA",2005.85,138,1,3,0)
52
"DATA",2005.85,138,1,4,0)
55
"DATA",2005.85,138,1,5,0)
25
"DATA",2005.85,138,2)
PAINM
"DATA",2005.85,139,0)
PERIPHERAL BLOOD SMEAR^1^A
"DATA",2005.85,139,1,0)
^2005.852P^2^2
"DATA",2005.85,139,1,1,0)
30
"DATA",2005.85,139,1,2,0)
4
"DATA",2005.85,139,2)
PBS
"DATA",2005.85,140,0)
PHYSICAL THERAPY^1^A
"DATA",2005.85,140,1,0)
^2005.852P^2^2
"DATA",2005.85,140,1,1,0)
16
"DATA",2005.85,140,1,2,0)
25
"DATA",2005.85,140,2)
PT
"DATA",2005.85,141,0)
RESPIRATORY THERAPY^1^A
"DATA",2005.85,141,1,0)
^2005.852P^3^3
"DATA",2005.85,141,1,1,0)
8
"DATA",2005.85,141,1,2,0)
14
"DATA",2005.85,141,1,3,0)
48
"DATA",2005.85,141,2)
RT
"DATA",2005.85,142,0)
OCCUPATIONAL THERAPY^1^A
"DATA",2005.85,142,1,0)
^2005.852P^2^2
"DATA",2005.85,142,1,1,0)
25
"DATA",2005.85,142,1,2,0)
16
"DATA",2005.85,142,2)
OT
"DATA",2005.85,143,0)
MR ANGIOGRAPHY^1
"DATA",2005.85,143,1,0)
^2005.852P^1^1
"DATA",2005.85,143,1,1,0)
29
"DATA",2005.85,143,2)
MA
"DATA",2005.85,144,0)
POSITRON EMISSION TOMOGRAPHY^1
"DATA",2005.85,144,1,0)
^2005.852P^2^2
"DATA",2005.85,144,1,1,0)
29
"DATA",2005.85,144,1,2,0)
28
"DATA",2005.85,144,2)
PT
"DATA",2005.85,145,0)
ANGIOSCOPY^1
"DATA",2005.85,145,1,0)
^2005.852P^2^2
"DATA",2005.85,145,1,1,0)
48
"DATA",2005.85,145,1,2,0)
21
"DATA",2005.85,145,2)
ANGSC
"DATA",2005.85,146,0)
CULPOSCOPY^1
"DATA",2005.85,146,1,0)
^2005.852P^1^1
"DATA",2005.85,146,1,1,0)
43
"DATA",2005.85,146,2)
CULP
"DATA",2005.85,147,0)
RADIOTHERAPY IMAGE^1
"DATA",2005.85,147,1,0)
^2005.852P^1^1
"DATA",2005.85,147,1,1,0)
71
"DATA",2005.85,147,2)
RTIMG
"DATA",2005.85,148,0)
MR SPECTROSCOPY^1
"DATA",2005.85,148,1,0)
^2005.852P^1^1
"DATA",2005.85,148,1,1,0)
29
"DATA",2005.85,148,2)
MS
"DATA",2005.85,149,0)
SPECT^1
"DATA",2005.85,149,1,0)
^2005.852P^1^1
"DATA",2005.85,149,1,1,0)
29
"DATA",2005.85,149,2)
ST
"DATA",2005.85,150,0)
DENSITOMETRY^1
"DATA",2005.85,150,1,0)
^2005.852P^3^3
"DATA",2005.85,150,1,1,0)
29
"DATA",2005.85,150,1,2,0)
43
"DATA",2005.85,150,1,3,0)
16
"DATA",2005.85,150,2)
DENS
"DATA",2005.85,151,0)
PACEMAKER PLACEMENT/MONITORING^1^A
"DATA",2005.85,151,1,0)
^2005.852P^1^1
"DATA",2005.85,151,1,1,0)
2
"DATA",2005.85,151,2)
PACEM
"DATA",2005.85,152,0)
BARIUM SWALLOW^1^A
"DATA",2005.85,152,1,0)
^2005.852P^2^2
"DATA",2005.85,152,1,1,0)
29
"DATA",2005.85,152,1,2,0)
24
"DATA",2005.85,152,2)
BARSW
"DATA",2005.85,153,0)
SLEEP STUDY^1^A
"DATA",2005.85,153,1,0)
^2005.852P^1^1
"DATA",2005.85,153,1,1,0)
27
"DATA",2005.85,153,2)
SLP
"DATA",2005.85,154,0)
PANENDOSCOPY^1^A
"DATA",2005.85,154,1,0)
^2005.852P^6^6
"DATA",2005.85,154,1,1,0)
3
"DATA",2005.85,154,1,2,0)
1
"DATA",2005.85,154,1,3,0)
48
"DATA",2005.85,154,1,4,0)
8
"DATA",2005.85,154,1,5,0)
43
"DATA",2005.85,154,1,6,0)
24
"DATA",2005.85,154,2)
PNEND
"DATA",2005.85,155,0)
TRANSFUSION^1^A
"DATA",2005.85,155,1,0)
^2005.852P^2^2
"DATA",2005.85,155,1,1,0)
4
"DATA",2005.85,155,1,2,0)
6
"DATA",2005.85,155,2)
TXF
"DATA",2005.85,156,0)
TYMPANOGRAM^1^A
"DATA",2005.85,156,1,0)
^2005.852P^1^1
"DATA",2005.85,156,1,1,0)
58
"DATA",2005.85,156,2)
TYMP
"DATA",2005.85,157,0)
AUDIOGRAM^1^A
"DATA",2005.85,157,1,0)
^2005.852P^1^1
"DATA",2005.85,157,1,1,0)
58
"DATA",2005.85,157,2)
AUDGM
"DATA",2005.85,158,0)
WANDERER PHOTO^1^A
"DATA",2005.85,158,1,0)
^2005.852P^3^3
"DATA",2005.85,158,1,1,0)
52
"DATA",2005.85,158,1,2,0)
26
"DATA",2005.85,158,1,3,0)
76
"DATA",2005.85,158,2)
WAN
"DATA",2005.85,159,0)
SCREENING^1^A
"DATA",2005.85,159,1,0)
^2005.852P^1^1
"DATA",2005.85,159,1,1,0)
52
"DATA",2005.85,159,2)
SCR
"DATA",2005.85,160,0)
RADIO FLUOROSCOPY^1^A
"DATA",2005.85,160,1,0)
^2005.852P^1^1
"DATA",2005.85,160,1,1,0)
29
"DATA",2005.85,160,2)
RF
"DATA",2005.85,161,0)
CRITICAL TIME INTERVENTION^1^A
"DATA",2005.85,161,1,0)
^2005.852P^3^3
"DATA",2005.85,161,1,1,0)
26
"DATA",2005.85,161,1,2,0)
55
"DATA",2005.85,161,1,3,0)
76
"DATA",2005.85,161,2)
CTI
"DATA",2005.85,162,0)
STROBOSCOPY^1^A
"DATA",2005.85,162,1,0)
^2005.852P^1^1
"DATA",2005.85,162,1,1,0)
58
"DATA",2005.85,162,2)
STROB
"DATA",2005.85,163,0)
BONE DENSITY STUDY^1^A
"DATA",2005.85,163,1,0)
^2005.852P^1^1
"DATA",2005.85,163,1,1,0)
29
"DATA",2005.85,163,2)
BDS
"FIA",2005.81)
MAG DESCRIPTIVE CATEGORIES
"FIA",2005.81,0)
^MAG(2005.81,
"FIA",2005.81,0,0)
2005.81
"FIA",2005.81,0,1)
y^y^f^^y^^y^m^n
"FIA",2005.81,0,10)

"FIA",2005.81,0,11)

"FIA",2005.81,0,"RLRO")

"FIA",2005.81,0,"VR")
3.0^MAG
"FIA",2005.81,2005.81)
0
"FIA",2005.85)
IMAGE INDEX FOR PROCEDURE/EVENT
"FIA",2005.85,0)
^MAG(2005.85,
"FIA",2005.85,0,0)
2005.85
"FIA",2005.85,0,1)
y^y^f^^n^^y^o^n
"FIA",2005.85,0,10)

"FIA",2005.85,0,11)

"FIA",2005.85,0,"RLRO")

"FIA",2005.85,0,"VR")
3.0^MAG
"FIA",2005.85,2005.85)
0
"FIA",2005.85,2005.852)
0
"FRV1",2005.81,"1,2",2)
CLIN
"FRV1",2005.81,"1,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"1,2",3)
DIAGRAM
"FRV1",2005.81,"1,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"10,2",2)
CLIN
"FRV1",2005.81,"10,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"10,2",3)
VISIT RECORD
"FRV1",2005.81,"10,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"12,2",2)
CLIN
"FRV1",2005.81,"12,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"13,2",2)
ADMIN
"FRV1",2005.81,"13,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"13,2",3)
MISCELLANEOUS DOCUMENT
"FRV1",2005.81,"13,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"15,2",2)
ADMIN
"FRV1",2005.81,"15,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"16,2",2)
CLIN
"FRV1",2005.81,"16,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"16,2",4)
VASCULAR ULTRASOUND
"FRV1",2005.81,"16,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"16,2",5)
VASCULAR
"FRV1",2005.81,"16,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"17,2",2)
CLIN
"FRV1",2005.81,"17,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"17,2",5)
DERMATOLOGY
"FRV1",2005.81,"17,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"18,2",2)
CLIN
"FRV1",2005.81,"18,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"18,2",4)
ARTERIAL BLOOD GAS
"FRV1",2005.81,"18,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"19,2",2)
CLIN
"FRV1",2005.81,"19,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"19,2",5)
ENDOCRINOLOGY, DIABETES, METAB
"FRV1",2005.81,"19,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"20,2",2)
CLIN
"FRV1",2005.81,"20,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"20,2",4)
BONE MARROW ASPIRATE
"FRV1",2005.81,"20,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"20,2",5)
HEMATOLOGY, MEDICAL
"FRV1",2005.81,"20,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"21,2",2)
CLIN
"FRV1",2005.81,"21,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"21,2",5)
NEUROLOGY
"FRV1",2005.81,"21,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"22,2",2)
CLIN
"FRV1",2005.81,"22,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"22,2",4)
WOUND ASSESSMENT
"FRV1",2005.81,"22,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"23,2",2)
CLIN
"FRV1",2005.81,"23,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"23,2",5)
PODIATRY
"FRV1",2005.81,"23,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"24,2",2)
CLIN
"FRV1",2005.81,"24,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"24,2",5)
DENTISTRY
"FRV1",2005.81,"24,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"25,2",2)
CLIN
"FRV1",2005.81,"25,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"25,2",4)
ANGIOGRAPHY
"FRV1",2005.81,"25,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"26,2",2)
CLIN
"FRV1",2005.81,"26,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"26,2",5)
OPHTHALMOLOGY
"FRV1",2005.81,"26,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"27,2",2)
CLIN
"FRV1",2005.81,"27,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"27,2",4)
EKG
"FRV1",2005.81,"27,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"27,2",5)
CARDIOLOGY
"FRV1",2005.81,"27,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"28,2",2)
CLIN
"FRV1",2005.81,"28,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"28,2",5)
AUDIOLOGY
"FRV1",2005.81,"28,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"29,2",2)
CLIN
"FRV1",2005.81,"29,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"29,2",5)
HEMATOLOGY, LAB
"FRV1",2005.81,"29,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"30,2",2)
CLIN
"FRV1",2005.81,"30,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"30,2",5)
MEDICINE
"FRV1",2005.81,"30,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"31,2",2)
CLIN
"FRV1",2005.81,"31,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"31,2",4)
ERCP
"FRV1",2005.81,"31,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"31,2",5)
GASTROENTEROLOGY
"FRV1",2005.81,"31,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"32,2",2)
CLIN
"FRV1",2005.81,"32,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"32,2",5)
ORTHOPEDICS
"FRV1",2005.81,"32,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"33,2",2)
CLIN
"FRV1",2005.81,"33,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"33,2",5)
RHEUMATOLOGY
"FRV1",2005.81,"33,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"34,2",2)
CLIN
"FRV1",2005.81,"34,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"34,2",4)
ULTRASOUND
"FRV1",2005.81,"34,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"35,2",2)
CLIN
"FRV1",2005.81,"35,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"35,2",5)
DERMATOLOGY
"FRV1",2005.81,"35,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"36,2",2)
CLIN
"FRV1",2005.81,"36,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"36,2",5)
OTORHINOLARYNGOLOGY (ENT)
"FRV1",2005.81,"36,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"37,2",2)
CLIN
"FRV1",2005.81,"37,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"37,2",5)
IMMUNOLOGY
"FRV1",2005.81,"37,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"38,2",2)
CLIN
"FRV1",2005.81,"38,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"38,2",5)
HEMATOLOGY, MEDICAL
"FRV1",2005.81,"38,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"39,2",2)
CLIN
"FRV1",2005.81,"39,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"39,2",5)
AUDIOLOGY
"FRV1",2005.81,"39,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"4,2",2)
CLIN
"FRV1",2005.81,"4,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"4,2",3)
CONSULT
"FRV1",2005.81,"4,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"40,2",2)
CLIN
"FRV1",2005.81,"40,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"40,2",5)
AUDIOLOGY
"FRV1",2005.81,"40,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"41,2",2)
CLIN
"FRV1",2005.81,"41,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"41,2",4)
EEG
"FRV1",2005.81,"41,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"41,2",5)
NEUROLOGY
"FRV1",2005.81,"41,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"42,2",2)
CLIN
"FRV1",2005.81,"42,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"42,2",3)
IMAGE
"FRV1",2005.81,"42,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"43,2",2)
CLIN
"FRV1",2005.81,"43,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"43,2",4)
ARTHROSCOPY
"FRV1",2005.81,"43,2",4,"F")
;MAG(2005.85,
"FRV1",2005.81,"43,2",5)
ORTHOPEDICS
"FRV1",2005.81,"43,2",5,"F")
;MAG(2005.84,
"FRV1",2005.81,"44,2",2)
ADMIN/CLIN
"FRV1",2005.81,"44,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"45,2",2)
ADMIN
"FRV1",2005.81,"45,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"45,2",3)
MISCELLANEOUS DOCUMENT
"FRV1",2005.81,"45,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"46,2",2)
ADMIN
"FRV1",2005.81,"46,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"46,2",3)
MEANS TEST (10-10EZ)
"FRV1",2005.81,"46,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"47,2",2)
ADMIN
"FRV1",2005.81,"47,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"47,2",3)
MEANS TEST (10-10F)
"FRV1",2005.81,"47,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"48,2",2)
ADMIN
"FRV1",2005.81,"48,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"48,2",3)
ALLIED VETERAN
"FRV1",2005.81,"48,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"49,2",2)
ADMIN
"FRV1",2005.81,"49,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"49,2",3)
APPT OF VSO AS CLAIMANT'S REP
"FRV1",2005.81,"49,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"50,2",2)
ADMIN
"FRV1",2005.81,"50,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"50,2",3)
CORRESPONDENCE
"FRV1",2005.81,"50,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"51,2",2)
ADMIN
"FRV1",2005.81,"51,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"51,2",3)
DD214 ENLISTED RECORD & RPT OF SEP
"FRV1",2005.81,"51,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"52,2",2)
ADMIN/CLIN
"FRV1",2005.81,"52,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"52,2",3)
DEATH CERTIFICATE
"FRV1",2005.81,"52,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"53,2",2)
ADMIN
"FRV1",2005.81,"53,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"53,2",3)
DENIAL LETTER
"FRV1",2005.81,"53,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"54,2",2)
ADMIN/CLIN
"FRV1",2005.81,"54,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"54,2",3)
DISCHARGE AGAINST MEDICAL ADVICE
"FRV1",2005.81,"54,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"55,2",2)
ADMIN
"FRV1",2005.81,"55,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"55,2",3)
ELIGIBILITY/VA FORM 10-7131
"FRV1",2005.81,"55,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"56,2",2)
ADMIN
"FRV1",2005.81,"56,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"56,2",3)
FINANCIAL WORKSHEET
"FRV1",2005.81,"56,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"57,2",2)
ADMIN
"FRV1",2005.81,"57,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"57,2",3)
INVENTORY OF FUNDS AND EFFECTS
"FRV1",2005.81,"57,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"58,2",2)
ADMIN
"FRV1",2005.81,"58,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"58,2",3)
MEDICAL CERTIFICATE
"FRV1",2005.81,"58,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"59,2",2)
ADMIN
"FRV1",2005.81,"59,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"59,2",3)
HEALTH INSURANCE CARDS
"FRV1",2005.81,"59,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"6,2",2)
ADMIN
"FRV1",2005.81,"6,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"6,2",3)
INSURANCE FORM
"FRV1",2005.81,"6,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"60,2",2)
ADMIN/CLIN
"FRV1",2005.81,"60,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"60,2",3)
PLENARY GUARDIANSHIP
"FRV1",2005.81,"60,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"61,2",2)
ADMIN/CLIN
"FRV1",2005.81,"61,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"61,2",3)
POWER OF ATTORNEY
"FRV1",2005.81,"61,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"62,2",2)
ADMIN
"FRV1",2005.81,"62,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"62,2",3)
REPORT OF CONTACT
"FRV1",2005.81,"62,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"63,2",2)
ADMIN
"FRV1",2005.81,"63,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"63,2",3)
REQUEST FOR INFORMATION
"FRV1",2005.81,"63,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"64,2",2)
ADMIN
"FRV1",2005.81,"64,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"64,2",3)
VALUABLES / BELONGINGS CHECKLIST
"FRV1",2005.81,"64,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"65,2",2)
ADMIN/CLIN
"FRV1",2005.81,"65,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"65,2",3)
DESIGNATION OF HEALTHCARE SURROGATE
"FRV1",2005.81,"65,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"66,2",2)
ADMIN/CLIN
"FRV1",2005.81,"66,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"66,2",3)
MISCELLANEOUS DOCUMENT
"FRV1",2005.81,"66,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"67,2",2)
ADMIN/CLIN
"FRV1",2005.81,"67,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"67,2",3)
REQUEST FOR AUTOPSY
"FRV1",2005.81,"67,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"68,2",2)
CLIN/ADMIN
"FRV1",2005.81,"68,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"68,2",3)
ADVANCE DIRECTIVE
"FRV1",2005.81,"68,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"69,2",2)
ADMIN/CLIN
"FRV1",2005.81,"69,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"69,2",3)
RELEASE OF INFORMATION
"FRV1",2005.81,"69,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"70,2",2)
ADMIN/CLIN
"FRV1",2005.81,"70,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"70,2",3)
COMMITMENT
"FRV1",2005.81,"70,2",3,"F")
;MAG(2005.83,
"FRV1",2005.81,"71,2",2)
ADMIN/CLIN
"FRV1",2005.81,"71,2",2,"F")
;MAG(2005.82,
"FRV1",2005.81,"71,2",3)
COMMITMENT
"FRV1",2005.81,"71,2",3,"F")
;MAG(2005.83,
"INI")
PRE^MAGIPS31
"INIT")
POST^MAGIPS31
"IX",2005.85,2005.85,"AC",0)
2005.85^AC^Cross reference on CLASS, PROC/EVENT^R^^R^IR^I^2005.85^^^^^S
"IX",2005.85,2005.85,"AC",1)
S ^MAG(2005.85,"AC",$E(X(1),1,20),$E(X(2),1,50),DA)=""
"IX",2005.85,2005.85,"AC",2)
K ^MAG(2005.85,"AC",$E(X(1),1,20),$E(X(2),1,50),DA)
"IX",2005.85,2005.85,"AC",2.5)
K ^MAG(2005.85,"AC")
"IX",2005.85,2005.85,"AC",11.1,0)
^.114IA^2^2
"IX",2005.85,2005.85,"AC",11.1,1,0)
1^F^2005.85^1^20^1^F
"IX",2005.85,2005.85,"AC",11.1,1,3)

"IX",2005.85,2005.85,"AC",11.1,2,0)
2^F^2005.85^1^50^2^F
"IX",2005.85,2005.85,"AC",11.1,2,3)

"MBREQ")
0
"PGL",2005.81,2,2,41)
CLASS INDEX^P2005.82'^MAG(2005.82,^2;2^Q
"PGL",2005.81,2,3,42)
TYPE INDEX^P2005.83'^MAG(2005.83,^2;3^Q
"PGL",2005.81,2,4,43)
PROC/EVENT INDEX^P2005.85'^MAG(2005.85,^2;4^Q
"PGL",2005.81,2,5,44)
SPEC/SUBSPEC INDEX^P2005.84'^MAG(2005.84,^2;5^Q
"PKG",454,-1)
1^1
"PKG",454,0)
IMAGING^MAG^Imaging-V1 to release 
"PKG",454,20,0)
^9.402P^^
"PKG",454,22,0)
^9.49I^1^1
"PKG",454,22,1,0)
3.0^3020319^3020517^126
"PKG",454,22,1,"PAH",1,0)
31^3050331^1353
"PKG",454,22,1,"PAH",1,1,0)
^^13^13^3050331
"PKG",454,22,1,"PAH",1,1,1,0)
This is MAG*3.0*31T10.
"PKG",454,22,1,"PAH",1,1,2,0)
 
"PKG",454,22,1,"PAH",1,1,3,0)
Image Index Conversion.
"PKG",454,22,1,"PAH",1,1,4,0)
 
"PKG",454,22,1,"PAH",1,1,5,0)
MAGIPS31 value =  6638669
"PKG",454,22,1,"PAH",1,1,6,0)
MAGXCVC  value = 12825393
"PKG",454,22,1,"PAH",1,1,7,0)
MAGXCVI  value = 12567821
"PKG",454,22,1,"PAH",1,1,8,0)
MAGXCVI1 value = 11895918
"PKG",454,22,1,"PAH",1,1,9,0)
MAGXCVL  value =  7379304
"PKG",454,22,1,"PAH",1,1,10,0)
MAGXCVP  value =  9864505
"PKG",454,22,1,"PAH",1,1,11,0)
MAGXCVR  value = 16849068
"PKG",454,22,1,"PAH",1,1,12,0)
MAGXCVS  value = 17548265
"PKG",454,22,1,"PAH",1,1,13,0)
MAGXCVX  value =  9257872
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","MAGIPS31")
0^^B18159805
"RTN","MAGIPS31",1,0)
MAGIPS31 ;WOIFO/MLH - Pre & Post-Init routines for Patch 31 ; 31 Mar 2005  11:17 AM
"RTN","MAGIPS31",2,0)
 ;;3.0;IMAGING;**31**;Mar 31, 2005
"RTN","MAGIPS31",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGIPS31",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGIPS31",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGIPS31",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGIPS31",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGIPS31",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGIPS31",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGIPS31",10,0)
 ;; |                                                               |
"RTN","MAGIPS31",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGIPS31",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGIPS31",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGIPS31",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGIPS31",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGIPS31",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGIPS31",17,0)
 ;;
"RTN","MAGIPS31",18,0)
 Q
"RTN","MAGIPS31",19,0)
PRE ; Entry point - pre-initialization for Patch 31
"RTN","MAGIPS31",20,0)
 ; Set ^XTMP subtree to expire in one year.
"RTN","MAGIPS31",21,0)
 ; 
"RTN","MAGIPS31",22,0)
 K DQ
"RTN","MAGIPS31",23,0)
 N CURDAT ; ----- current date and time
"RTN","MAGIPS31",24,0)
 N EXPDAT ; ----- expiration date of our ^XTMP subtree
"RTN","MAGIPS31",25,0)
 N IX ; --------- global subscript index
"RTN","MAGIPS31",26,0)
 ;
"RTN","MAGIPS31",27,0)
 ; 1-year retention for ^XTMP
"RTN","MAGIPS31",28,0)
 S CURDAT=$$DT^XLFDT
"RTN","MAGIPS31",29,0)
 S EXPDAT=$$FMADD^XLFDT(CURDAT,366)
"RTN","MAGIPS31",30,0)
 S ^XTMP("MAG30P25",0)=EXPDAT_U_CURDAT_U_"IMAGE INDEX CONVERSION"
"RTN","MAGIPS31",31,0)
 W !!,"^XTMP nodes will be auto-purged on ",$$FMTE^XLFDT(EXPDAT)
"RTN","MAGIPS31",32,0)
 ;
"RTN","MAGIPS31",33,0)
 ; Clear old subtree of generated uncommitted index values.
"RTN","MAGIPS31",34,0)
 K ^XTMP("MAG30P25","OUTPUT")
"RTN","MAGIPS31",35,0)
 ;
"RTN","MAGIPS31",36,0)
 ; Clear Fields 40-45 (subscript 2) on the MAG DESCRIPTIVE CATEGORIES 
"RTN","MAGIPS31",37,0)
 ; File (#2005.81) so the data merge works properly
"RTN","MAGIPS31",38,0)
 W !!,"Resetting Fields 40-45 on MAG DESCRIPTIVE CATEGORIES (#2005.81)..."
"RTN","MAGIPS31",39,0)
 S IX=0
"RTN","MAGIPS31",40,0)
 F  S IX=$O(^MAG(2005.81,IX)) Q:'IX  K ^(IX,2)
"RTN","MAGIPS31",41,0)
 W "done."
"RTN","MAGIPS31",42,0)
 ;
"RTN","MAGIPS31",43,0)
 ; Remove File 2005.85 preparatory to reinstallation.
"RTN","MAGIPS31",44,0)
 K ^MAG(2005.85)
"RTN","MAGIPS31",45,0)
EXITPRE ;
"RTN","MAGIPS31",46,0)
 Q
"RTN","MAGIPS31",47,0)
 ;
"RTN","MAGIPS31",48,0)
POST ; Entry point - post-initialization for Patch 31
"RTN","MAGIPS31",49,0)
 ;
"RTN","MAGIPS31",50,0)
 N ENTNUM ; --- entry number to be updated
"RTN","MAGIPS31",51,0)
 N ASPEC ; ---- array containing specialty information
"RTN","MAGIPS31",52,0)
 N PTRVAL ; --- pointer value from proc/event index file
"RTN","MAGIPS31",53,0)
 ;
"RTN","MAGIPS31",54,0)
 ; Make sure specialties of PHARMACY (60), RESEARCH (66), SOCIAL WORK (67),
"RTN","MAGIPS31",55,0)
 ; and SPINAL CORD INJURY (68) all have a CLASS value of CLIN (1).
"RTN","MAGIPS31",56,0)
 F ENTNUM=60,66,67,68 S ASPEC(2005.84,ENTNUM_",",1)=1
"RTN","MAGIPS31",57,0)
 D FILE^DIE("K",$NA(ASPEC))
"RTN","MAGIPS31",58,0)
 ;
"RTN","MAGIPS31",59,0)
 ; Correct PROC/EVENT INDEX mapping for CT images from DICOM Gateway.
"RTN","MAGIPS31",60,0)
 S ENTNUM=$O(^MAG(2005.872,"B","CT",""))
"RTN","MAGIPS31",61,0)
 I ENTNUM D
"RTN","MAGIPS31",62,0)
 . S PTRVAL=$O(^MAG(2005.85,"B","COMPUTED TOMOGRAPHY",""))
"RTN","MAGIPS31",63,0)
 . S $P(^MAG(2005.872,ENTNUM,1,1,0),U,2)=PTRVAL
"RTN","MAGIPS31",64,0)
 . Q
"RTN","MAGIPS31",65,0)
 ;
"RTN","MAGIPS31",66,0)
 ; Send an installation message.
"RTN","MAGIPS31",67,0)
 D INS(XPDNM,DUZ,$$NOW^XLFDT,XPDA)
"RTN","MAGIPS31",68,0)
 Q
"RTN","MAGIPS31",69,0)
 ;
"RTN","MAGIPS31",70,0)
INS(XP,DUZ,DATE,IDA) ; Compose an installation message in ^TMP.
"RTN","MAGIPS31",71,0)
 N CT,CNT,COM,DDATE,ST
"RTN","MAGIPS31",72,0)
 D GETENV^%ZOSV
"RTN","MAGIPS31",73,0)
 K ^TMP($J,"MAGQ")
"RTN","MAGIPS31",74,0)
 S CNT=0
"RTN","MAGIPS31",75,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="PACKAGE INSTALL"
"RTN","MAGIPS31",76,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="SITE: "_$$KSP^XUPARAM("WHERE")
"RTN","MAGIPS31",77,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="PACKAGE: "_XP
"RTN","MAGIPS31",78,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Version: "_$$VER^XPDUTL(XP)
"RTN","MAGIPS31",79,0)
 S ST=$$GET1^DIQ(9.7,IDA,11,"I")
"RTN","MAGIPS31",80,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Start time: "_$$FMTE^XLFDT(ST)
"RTN","MAGIPS31",81,0)
 S CT=$$GET1^DIQ(9.7,IDA,17,"I") S:+CT'=CT CT=$$NOW^XLFDT
"RTN","MAGIPS31",82,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Completion time: "_$$FMTE^XLFDT(CT)
"RTN","MAGIPS31",83,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Run time: "_$$FMDIFF^XLFDT(CT,ST,3)
"RTN","MAGIPS31",84,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Environment: "_Y
"RTN","MAGIPS31",85,0)
 S COM=$$GET1^DIQ(9.7,IDA,6,"I")
"RTN","MAGIPS31",86,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="FILE COMMENT: "_COM
"RTN","MAGIPS31",87,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="DATE: "_DATE
"RTN","MAGIPS31",88,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Installed by: "_$$GET1^DIQ(9.7,IDA,9,"E")
"RTN","MAGIPS31",89,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Install Name: "_$$GET1^DIQ(9.7,IDA,.01,"E")
"RTN","MAGIPS31",90,0)
 S DDATE=$$GET1^DIQ(9.7,IDA,51,"I")
"RTN","MAGIPS31",91,0)
 S CNT=CNT+1,^TMP($J,"MAGQ",CNT)="Distribution Date: "_$$FMTE^XLFDT(DDATE)
"RTN","MAGIPS31",92,0)
 S XMSUB=XP_" INSTALLATION"
"RTN","MAGIPS31",93,0)
 D MAILSHR
"RTN","MAGIPS31",94,0)
 K ^TMP($J,"MAGQ")
"RTN","MAGIPS31",95,0)
 Q
"RTN","MAGIPS31",96,0)
MAILSHR ; Shared Mail server code
"RTN","MAGIPS31",97,0)
 ; This is copied from Routine MAGQE2 in Patch 29, because Patch 29
"RTN","MAGIPS31",98,0)
 ; will not necessarily be released ahead of Patch 31.
"RTN","MAGIPS31",99,0)
 N D,D0,D1,D2,DG,DIC,DICR,DIW,XMID,XMY
"RTN","MAGIPS31",100,0)
 S XMID=$G(DUZ) S:'XMID XMID=.5
"RTN","MAGIPS31",101,0)
 S XMY(XMID)=""
"RTN","MAGIPS31",102,0)
 S XMY("G.MAG SERVER")=""
"RTN","MAGIPS31",103,0)
 S:$G(MAGDUZ) XMY(MAGDUZ)=""
"RTN","MAGIPS31",104,0)
 S XMSUB=$E(XMSUB,1,63)
"RTN","MAGIPS31",105,0)
 D SENDMSG^XMXAPI(XMID,XMSUB,"^TMP($J,""MAGQ"")",.XMY,,.XMZ,)
"RTN","MAGIPS31",106,0)
 I $G(XMERR) M XMERR=^TMP("XMERR",$J) S $EC=",U13-Cannot send MailMan message,"
"RTN","MAGIPS31",107,0)
 Q
"RTN","MAGIPS31",108,0)
 ;
"RTN","MAGXCVC")
0^12^B40612890
"RTN","MAGXCVC",1,0)
MAGXCVC ;WOIFO/SEB,MLH - Image Index Conversion Commit ; 24 Mar 2005  9:56 AM
"RTN","MAGXCVC",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVC",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVC",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVC",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVC",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVC",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVC",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVC",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVC",10,0)
 ;; |                                                               |
"RTN","MAGXCVC",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVC",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVC",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVC",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVC",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVC",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVC",17,0)
 ;;
"RTN","MAGXCVC",18,0)
 Q
"RTN","MAGXCVC",19,0)
 ;
"RTN","MAGXCVC",20,0)
 ; Entry point for the commit image indices option (MAG IMAGE INDEX COMMIT indices)
"RTN","MAGXCVC",21,0)
COMMIT N START,END,FLAG,TMF,STATUS
"RTN","MAGXCVC",22,0)
 N ZTDTH,ZTIO,ZTRTN,ZTDESC,ZTSAVE,ZTSK ; -- TaskMan variables
"RTN","MAGXCVC",23,0)
 N INPUT ; -------------------------------- user input holder
"RTN","MAGXCVC",24,0)
 ;
"RTN","MAGXCVC",25,0)
 S STATUS=$G(^XTMP("MAG30P25","STATUS"))
"RTN","MAGXCVC",26,0)
 L +MAGTMP("IMAGE INDEX GENERATE"):0 E  D  G COMMITX
"RTN","MAGXCVC",27,0)
 . W !,"Image index generation still in progress. Please try again later."
"RTN","MAGXCVC",28,0)
 . Q
"RTN","MAGXCVC",29,0)
 L +MAGTMP("IMAGE INDEX COMMIT"):0 E  D  G COMMITX
"RTN","MAGXCVC",30,0)
 . W !,"Image index commit still in progress. Please try again later."
"RTN","MAGXCVC",31,0)
 . Q
"RTN","MAGXCVC",32,0)
 I '$D(^XTMP("MAGIXCVGEN")) D  G COMMITX
"RTN","MAGXCVC",33,0)
 . W !,"You must generate the image indices before running this option."
"RTN","MAGXCVC",34,0)
 . Q
"RTN","MAGXCVC",35,0)
 S (START,END)=0,FLAG=""
"RTN","MAGXCVC",36,0)
 D BOUNDS^MAGXCVP(.START,.END) I START="^" G COMMITX
"RTN","MAGXCVC",37,0)
 D RECREATE^MAGXCVP(.FLAG) I FLAG="^" G COMMITX
"RTN","MAGXCVC",38,0)
 R !!,"Commit new index entries? N // ",INPUT:DTIME
"RTN","MAGXCVC",39,0)
 I INPUT="" S INPUT="N"
"RTN","MAGXCVC",40,0)
 S INPUT=$$UCASE^MAGXCVP($E(INPUT))
"RTN","MAGXCVC",41,0)
 I INPUT'="Y" W !,"OK, entries not committed." G COMMITX
"RTN","MAGXCVC",42,0)
 D TASKMAN^MAGXCVP(.TMF) I TMF="^" G COMMITX
"RTN","MAGXCVC",43,0)
 S ZTSK=0 I TMF="" D COM1(START,END,FLAG,0) G COMMITX
"RTN","MAGXCVC",44,0)
 S ZTRTN="COMTM^MAGXCVC",ZTDESC="COMMIT IMAGE INDEX VALUES",ZTDTH=TMF,ZTIO=""
"RTN","MAGXCVC",45,0)
 S ZTSAVE("START")=START,ZTSAVE("END")=END,ZTSAVE("FLAG")=FLAG
"RTN","MAGXCVC",46,0)
 D ^%ZTLOAD
"RTN","MAGXCVC",47,0)
 W !!,"Image index commitment has been queued as task #"_ZTSK_"."
"RTN","MAGXCVC",48,0)
 ;
"RTN","MAGXCVC",49,0)
COMMITX ; Clean up locks from COMMIT initial processing.
"RTN","MAGXCVC",50,0)
 L -MAGTMP("IMAGE INDEX GENERATE")
"RTN","MAGXCVC",51,0)
 L -MAGTMP("IMAGE INDEX COMMIT")
"RTN","MAGXCVC",52,0)
 Q
"RTN","MAGXCVC",53,0)
 ;
"RTN","MAGXCVC",54,0)
 ; TaskMan entry point for committing image indices
"RTN","MAGXCVC",55,0)
COMTM D COM1(START,END,FLAG,1)
"RTN","MAGXCVC",56,0)
 Q
"RTN","MAGXCVC",57,0)
 ;
"RTN","MAGXCVC",58,0)
COM1(START,END,FLAG,QUEUED) N MAGIEN,CT,INDXDATA,INDX,STARTDT,ENDDT,SUMMARY,STOP,HISTORY,RESULT
"RTN","MAGXCVC",59,0)
 N PREVLOG ; ------ log entry of a previous committal
"RTN","MAGXCVC",60,0)
 N PREV0 ; -------- beginning MAGIEN of previous range
"RTN","MAGXCVC",61,0)
 N PREVF ; -------- ending MAGIEN of previous range
"RTN","MAGXCVC",62,0)
 N RANGE ; -------- array containing the current range being committed
"RTN","MAGXCVC",63,0)
 N T0 ; ----------- internal index of ^TMP($J,"PREVRNG") for range checks
"RTN","MAGXCVC",64,0)
 ;
"RTN","MAGXCVC",65,0)
 L +MAGTMP("IMAGE INDEX COMMIT"):900 E  Q  ; don't let more than one commit run at once!
"RTN","MAGXCVC",66,0)
 K ^XTMP("MAG30P25","SUMMARY") S $P(^XTMP("MAG30P25","STATUS"),U,13,14)=4_U_ZTSK
"RTN","MAGXCVC",67,0)
 D NOW^%DTC S Y=% D DD^%DT S STARTDT=Y
"RTN","MAGXCVC",68,0)
 S START=+$G(START),END=+$G(END),STOP=0
"RTN","MAGXCVC",69,0)
 I END=0 S END=+$P($G(^MAG(2005,0)),U,3)
"RTN","MAGXCVC",70,0)
 S MAGIEN=START-1 I MAGIEN=-1 S MAGIEN=0
"RTN","MAGXCVC",71,0)
 S $P(^XTMP("MAG30P25","STATUS"),U,7,11)=DUZ_U_START_U_STARTDT_U_U
"RTN","MAGXCVC",72,0)
 I 'QUEUED W !!
"RTN","MAGXCVC",73,0)
 ; Now run the entries that are ready to commit.
"RTN","MAGXCVC",74,0)
 ; 
"RTN","MAGXCVC",75,0)
 K RANGE
"RTN","MAGXCVC",76,0)
 F CT=0:1 S MAGIEN=$O(^XTMP("MAGIXCVGEN",MAGIEN)) Q:MAGIEN>END!(+MAGIEN'=MAGIEN)  D  I STOP Q
"RTN","MAGXCVC",77,0)
 . D COM2(MAGIEN,CT,FLAG,QUEUED)
"RTN","MAGXCVC",78,0)
 . S $P(^XTMP("MAG30P25","STATUS"),U,12)=MAGIEN
"RTN","MAGXCVC",79,0)
 . I QUEUED,$$S^%ZTLOAD S STOP=1,$P(^XTMP("MAG30P25","STATUS"),U,13)=5
"RTN","MAGXCVC",80,0)
 . Q
"RTN","MAGXCVC",81,0)
 D NOW^%DTC S Y=% D DD^%DT S ENDDT=Y
"RTN","MAGXCVC",82,0)
 S $P(^XTMP("MAG30P25","STATUS"),U,10,11)=$S(STOP:MAGIEN,1:END)_U_ENDDT
"RTN","MAGXCVC",83,0)
 S ^XTMP("MAG30P25","SUMMARY")=$P(^XTMP("MAG30P25","STATUS"),U,8,11)
"RTN","MAGXCVC",84,0)
 S HISTORY=$G(^XTMP("MAG30P25","HISTORY"))+1,^XTMP("MAG30P25","HISTORY")=HISTORY
"RTN","MAGXCVC",85,0)
 S ^XTMP("MAG30P25","HISTORY",HISTORY)=$P(^XTMP("MAG30P25","STATUS"),U,8,11)
"RTN","MAGXCVC",86,0)
 I 'STOP D  ; end-of-processing cleanup
"RTN","MAGXCVC",87,0)
 . S $P(^XTMP("MAG30P25","STATUS"),U,13)=6
"RTN","MAGXCVC",88,0)
 . D ENTRY^MAGLOG("P17CV",$G(DUZ),START,$T(+0),"","",START_"_"_END)
"RTN","MAGXCVC",89,0)
 . D NOTIFY^MAGXCVP(.RESULT,2,STARTDT,ENDDT,START,END,FLAG)
"RTN","MAGXCVC",90,0)
 . Q
"RTN","MAGXCVC",91,0)
 L -MAGTMP("IMAGE INDEX COMMIT")
"RTN","MAGXCVC",92,0)
 Q
"RTN","MAGXCVC",93,0)
 ;
"RTN","MAGXCVC",94,0)
COM2(MAGIEN,CT,FREC,QUEUED) N INDXDATA,SUMMARY
"RTN","MAGXCVC",95,0)
 N FQUIT ; -------- quit flag
"RTN","MAGXCVC",96,0)
 N PREV0 ; -------- beginning MAGIEN of previous range
"RTN","MAGXCVC",97,0)
 ;
"RTN","MAGXCVC",98,0)
 I 'QUEUED,CT#100=0 W MAGIEN
"RTN","MAGXCVC",99,0)
 I 'QUEUED,CT#10=0 W "."
"RTN","MAGXCVC",100,0)
 ;Patch 8 has been installed (NOOP MLH 12/6/02)
"RTN","MAGXCVC",101,0)
 ;or "recreate previously calculated indices" question answered no.
"RTN","MAGXCVC",102,0)
 I $TR($G(^MAG(2005,MAGIEN,40)),"^")]"" D
"RTN","MAGXCVC",103,0)
 . S FQUIT=1 ; Assume they may not recreate.
"RTN","MAGXCVC",104,0)
 . I $E($G(FREC))="N" Q  ; "Recreate previously calculated indices" question answered no.
"RTN","MAGXCVC",105,0)
 . ; Don't allow committal unless the previous calculation was done by us.
"RTN","MAGXCVC",106,0)
 . I $D(^MAGIXCVT(2006.96,MAGIEN)) K FQUIT ; ok
"RTN","MAGXCVC",107,0)
 . Q
"RTN","MAGXCVC",108,0)
 Q:$G(FQUIT)
"RTN","MAGXCVC",109,0)
 ;
"RTN","MAGXCVC",110,0)
 S INDXDATA="" D COMIEN(MAGIEN,.INDXDATA)
"RTN","MAGXCVC",111,0)
 K ^XTMP("MAGIXCVGEN",MAGIEN)
"RTN","MAGXCVC",112,0)
 I INDXDATA="" S INDXDATA="(none)"
"RTN","MAGXCVC",113,0)
 S SUMMARY=$G(^XTMP("MAG30P25","SUMMARY",INDXDATA))
"RTN","MAGXCVC",114,0)
 I SUMMARY="" S ^XTMP("MAG30P25","SUMMARY",INDXDATA)=1_U_MAGIEN_U_MAGIEN
"RTN","MAGXCVC",115,0)
 E  S ^XTMP("MAG30P25","SUMMARY",INDXDATA)=(SUMMARY+1)_U_$P(SUMMARY,U,2)_U_MAGIEN
"RTN","MAGXCVC",116,0)
 S ^XTMP("MAG30P25","SUMMARY",INDXDATA,MAGIEN)=""
"RTN","MAGXCVC",117,0)
 S ^MAGIXCVT(2006.96,MAGIEN)=1 ; flag as converted by index generation
"RTN","MAGXCVC",118,0)
 Q
"RTN","MAGXCVC",119,0)
 ;
"RTN","MAGXCVC",120,0)
COMIEN(MAGIEN,INDXDATA) ; Commit indices for one image (IEN=MAGIEN), return indices in INDXDATA
"RTN","MAGXCVC",121,0)
 N VAL40 ; --- values on the 40 node
"RTN","MAGXCVC",122,0)
 N IX40 ; ---- index to pieces of the 40 node
"RTN","MAGXCVC",123,0)
 ;
"RTN","MAGXCVC",124,0)
 S INDXDATA=$G(INDXDATA)
"RTN","MAGXCVC",125,0)
 I INDXDATA="" S INDXDATA=$P($G(^XTMP("MAGIXCVGEN",MAGIEN)),U,2,7)
"RTN","MAGXCVC",126,0)
 I INDXDATA="" D GENIEN^MAGXCVI(MAGIEN,.INDXDATA)
"RTN","MAGXCVC",127,0)
 F  Q:$E(INDXDATA,$L(INDXDATA))'=U  S INDXDATA=$E(INDXDATA,1,$L(INDXDATA)-1)
"RTN","MAGXCVC",128,0)
 I INDXDATA]"" D
"RTN","MAGXCVC",129,0)
 . S ^MAG(2005,MAGIEN,40)=INDXDATA
"RTN","MAGXCVC",130,0)
 . Q
"RTN","MAGXCVC",131,0)
 E  D
"RTN","MAGXCVC",132,0)
 . K ^MAG(2005,MAGIEN,40)
"RTN","MAGXCVC",133,0)
 . Q
"RTN","MAGXCVC",134,0)
 Q
"RTN","MAGXCVC",135,0)
 ;
"RTN","MAGXCVC",136,0)
 ; Direct edit of image index fields (#40-44) in the image file (#2005).
"RTN","MAGXCVC",137,0)
IMAGE N I,DIC,DIE,DA,DR,X,Y,MAGIEN,MAGDFN,MAGTMP,BEFORE,AFTER
"RTN","MAGXCVC",138,0)
 W ! S DIC=2005,DIC(0)="AEQ" D ^DIC I Y=-1 Q
"RTN","MAGXCVC",139,0)
 S DIE=DIC,DR="[MAG IMAGE INDEX EDIT]",(MAGIEN,DA)=$P(Y,U)
"RTN","MAGXCVC",140,0)
 S MAGDFN=$P($G(^MAG(2005,MAGIEN,0)),"^",7)
"RTN","MAGXCVC",141,0)
 K MAGTMP
"RTN","MAGXCVC",142,0)
 D GETS^DIQ(2005,MAGIEN_",","40:45","I","MAGTMP")
"RTN","MAGXCVC",143,0)
 S BEFORE="" F I=40:1:45 S:BEFORE'="" BEFORE=BEFORE_"|" S BEFORE=BEFORE_MAGTMP(2005,MAGIEN_",",I,"I")
"RTN","MAGXCVC",144,0)
 D ^DIE
"RTN","MAGXCVC",145,0)
 K MAGTMP
"RTN","MAGXCVC",146,0)
 D GETS^DIQ(2005,MAGIEN_",","40:45","I","MAGTMP")
"RTN","MAGXCVC",147,0)
 S AFTER="" F I=40:1:45 S:AFTER'="" AFTER=AFTER_"|" S AFTER=AFTER_MAGTMP(2005,MAGIEN_",",I,"I")
"RTN","MAGXCVC",148,0)
 D ENTRY^MAGLOG("INDXCHG",$G(DUZ),$G(MAGIEN),"BEFORE: "_BEFORE_" "_"AFTER: "_AFTER,$G(MAGDFN),1)
"RTN","MAGXCVC",149,0)
 G IMAGE
"RTN","MAGXCVI")
0^13^B45658217
"RTN","MAGXCVI",1,0)
MAGXCVI ;WOIFO/SEB,MLH - Image Index Conversion Generate ; 24 Mar 2005  10:52 AM
"RTN","MAGXCVI",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVI",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVI",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVI",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVI",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVI",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVI",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVI",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVI",10,0)
 ;; |                                                               |
"RTN","MAGXCVI",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVI",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVI",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVI",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVI",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVI",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVI",17,0)
 ;;
"RTN","MAGXCVI",18,0)
 Q
"RTN","MAGXCVI",19,0)
 ; Extract fields from an image record and look them up in the
"RTN","MAGXCVI",20,0)
 ; conversion global ^XTMP("MAG30P25","MAPPING") for possible values for
"RTN","MAGXCVI",21,0)
 ; Package, Class, Type, Procedure/Event and Specialty.
"RTN","MAGXCVI",22,0)
 ; Currently uses the following fields:
"RTN","MAGXCVI",23,0)
 ; #3 - Object Type (0;6)
"RTN","MAGXCVI",24,0)
 ; #6 - Procedure (0;8)
"RTN","MAGXCVI",25,0)
 ; #8 - Image Save By (2;2)
"RTN","MAGXCVI",26,0)
 ; #10 - Short Desc (2;4)
"RTN","MAGXCVI",27,0)
 ; #14 - Group Parent (0;10)
"RTN","MAGXCVI",28,0)
 ; #16 - Parent Data File (2;6)
"RTN","MAGXCVI",29,0)
 ; #100 - Document Category (100;1)
"RTN","MAGXCVI",30,0)
 ;
"RTN","MAGXCVI",31,0)
 ; Entry point for the generate image indices option (MAG IMAGE INDEX GEN indices)
"RTN","MAGXCVI",32,0)
GEN N START,END,RUN,TMF
"RTN","MAGXCVI",33,0)
 N ZTRTN,ZTDESC,ZTSAVE,ZTSK,ZTDTH,ZTIO ; -- TaskMan control variables
"RTN","MAGXCVI",34,0)
 N RECFLAG ; ------------------------------ true (1) if all image index entries should be recreated
"RTN","MAGXCVI",35,0)
 ;
"RTN","MAGXCVI",36,0)
 I '$D(^XTMP("MAG30P25","MAPPING")) D  Q
"RTN","MAGXCVI",37,0)
 . W !,"You must load the mapping file before running this option."
"RTN","MAGXCVI",38,0)
 . Q
"RTN","MAGXCVI",39,0)
 L +MAGTMP("IMAGE INDEX GENERATION"):0 E  D  Q
"RTN","MAGXCVI",40,0)
 . W !,"Image index generation still in progress. Please try again later."
"RTN","MAGXCVI",41,0)
 . Q
"RTN","MAGXCVI",42,0)
 L +MAGTMP("IMAGE INDEX COMMIT"):0 E  D  Q
"RTN","MAGXCVI",43,0)
 . W !,"Image index commit still in progress. Please try again later."
"RTN","MAGXCVI",44,0)
 . Q
"RTN","MAGXCVI",45,0)
 S (START,END)=0,RECFLAG=""
"RTN","MAGXCVI",46,0)
 D BOUNDS^MAGXCVP(.START,.END) I START="^" Q
"RTN","MAGXCVI",47,0)
 D RECREATE^MAGXCVP(.RECFLAG) I RECFLAG="^" Q
"RTN","MAGXCVI",48,0)
 D TASKMAN^MAGXCVP(.TMF) I TMF="^" G DONE
"RTN","MAGXCVI",49,0)
 S ZTSK=0 I TMF="" D GEN1(START,END,RECFLAG,0) G DONE
"RTN","MAGXCVI",50,0)
 S ZTRTN="GENTM^MAGXCVI",ZTDESC="GENERATE IMAGE INDEX VALUES",ZTDTH=TMF
"RTN","MAGXCVI",51,0)
 S ZTSAVE("START")=START,ZTSAVE("END")=END,ZTSAVE("RECFLAG")=RECFLAG,ZTIO=""
"RTN","MAGXCVI",52,0)
 D ^%ZTLOAD
"RTN","MAGXCVI",53,0)
 W !!,"Image index generation has been queued as task #"_ZTSK_"."
"RTN","MAGXCVI",54,0)
 L -MAGTMP("IMAGE INDEX COMMIT")
"RTN","MAGXCVI",55,0)
 L -MAGTMP("IMAGE INDEX GENERATION")
"RTN","MAGXCVI",56,0)
 Q
"RTN","MAGXCVI",57,0)
 ;
"RTN","MAGXCVI",58,0)
 ; TaskMan entry point for generating image indices
"RTN","MAGXCVI",59,0)
GENTM D GEN1(START,END,RECFLAG,1)
"RTN","MAGXCVI",60,0)
 Q
"RTN","MAGXCVI",61,0)
 ;
"RTN","MAGXCVI",62,0)
GEN1(START,END,RECFLAG,QUEUED) ; Main entry point.
"RTN","MAGXCVI",63,0)
 ;
"RTN","MAGXCVI",64,0)
 N MAGIEN,CT,RESULT,STARTDT,ENDDT,SUMMARY,STOP
"RTN","MAGXCVI",65,0)
 N CURDAT ; -- current FileMan date
"RTN","MAGXCVI",66,0)
 N EXPDAT ; -- expiration date for ^XTMP
"RTN","MAGXCVI",67,0)
 ;
"RTN","MAGXCVI",68,0)
 ; Don't let others run while we're running, but give adequate quit time
"RTN","MAGXCVI",69,0)
 ; to the foreground process that generated us.
"RTN","MAGXCVI",70,0)
 L +MAGTMP("IMAGE INDEX GENERATION"):1800 E  Q
"RTN","MAGXCVI",71,0)
 ; 10-day retention for the ^XTMP output node
"RTN","MAGXCVI",72,0)
 S CURDAT=$$DT^XLFDT
"RTN","MAGXCVI",73,0)
 S EXPDAT=$$FMADD^XLFDT(CURDAT,10)
"RTN","MAGXCVI",74,0)
 K ^XTMP("MAGCVIXGEN")
"RTN","MAGXCVI",75,0)
 S ^XTMP("MAGCVIXGEN",0)=EXPDAT_U_CURDAT_U_"IMAGE INDEX CONVERSION"
"RTN","MAGXCVI",76,0)
 K ^XTMP("MAG30P25","SUMMARY"),^TMP($J)
"RTN","MAGXCVI",77,0)
 S $P(^XTMP("MAG30P25","STATUS"),U,13,14)=1_U_ZTSK
"RTN","MAGXCVI",78,0)
 D NOW^%DTC S Y=% D DD^%DT S STARTDT=Y
"RTN","MAGXCVI",79,0)
 S START=+$G(START),END=+$G(END),STOP=0
"RTN","MAGXCVI",80,0)
 I END=0 S END=+$P($G(^MAG(2005,0)),U,3)
"RTN","MAGXCVI",81,0)
 S $P(^XTMP("MAG30P25","STATUS"),U,1,5)=DUZ_U_START_U_STARTDT_U_U
"RTN","MAGXCVI",82,0)
 S MAGIEN=START-1 I MAGIEN=-1 S MAGIEN=0
"RTN","MAGXCVI",83,0)
 I 'QUEUED W !!
"RTN","MAGXCVI",84,0)
 F CT=0:1 S MAGIEN=$O(^MAG(2005,MAGIEN)) Q:MAGIEN>END!(+MAGIEN'=MAGIEN)  D  I STOP Q
"RTN","MAGXCVI",85,0)
 . D GEN2(MAGIEN,CT,RECFLAG,QUEUED) S $P(^XTMP("MAG30P25","STATUS"),U,6)=MAGIEN
"RTN","MAGXCVI",86,0)
 . I QUEUED,$$S^%ZTLOAD S STOP=1,$P(^XTMP("MAG30P25","STATUS"),U,13)=2
"RTN","MAGXCVI",87,0)
 . Q
"RTN","MAGXCVI",88,0)
 D NOW^%DTC S Y=% D DD^%DT S ENDDT=Y
"RTN","MAGXCVI",89,0)
 S $P(^XTMP("MAG30P25","STATUS"),U,4,5)=$S(STOP:MAGIEN,1:END)_U_ENDDT
"RTN","MAGXCVI",90,0)
 S ^XTMP("MAG30P25","SUMMARY")=$P(^XTMP("MAG30P25","STATUS"),U,2,5)
"RTN","MAGXCVI",91,0)
 I 'STOP S $P(^XTMP("MAG30P25","STATUS"),U,13)=3
"RTN","MAGXCVI",92,0)
 D NOTIFY^MAGXCVP(.RESULT,1,STARTDT,ENDDT,START,END,RECFLAG)
"RTN","MAGXCVI",93,0)
 L -MAGTMP("IMAGE INDEX GENERATION") ; now others can get in
"RTN","MAGXCVI",94,0)
 Q
"RTN","MAGXCVI",95,0)
 ;
"RTN","MAGXCVI",96,0)
GEN2(MAGIEN,CT,XFREC,QUEUED) N INDXDATA
"RTN","MAGXCVI",97,0)
 N SUMMARY ; ---- summary node for this set of index field values
"RTN","MAGXCVI",98,0)
 N FQUIT ; -- flag to bypass records w/existing values not to be regen'd
"RTN","MAGXCVI",99,0)
 ;
"RTN","MAGXCVI",100,0)
 ;Patch 8 has been installed
"RTN","MAGXCVI",101,0)
 ;or "recreate previously calculated indices" question answered no.
"RTN","MAGXCVI",102,0)
 I $TR($G(^MAG(2005,MAGIEN,40)),"^")'="" D  Q:$G(FQUIT)
"RTN","MAGXCVI",103,0)
 . S FQUIT=1 ; Assume they may not recreate.
"RTN","MAGXCVI",104,0)
 . ; "Recreate previously calculated indices" question answered no?
"RTN","MAGXCVI",105,0)
 . I $E($G(XFREC))="N" K ^XTMP("MAGIXCVGEN",MAGIEN) Q  ; yes
"RTN","MAGXCVI",106,0)
 . ; Don't allow generation unless the previous calculation was done by us.
"RTN","MAGXCVI",107,0)
 . I $D(^MAGIXCVT(2006.96,MAGIEN)) K FQUIT ; ok
"RTN","MAGXCVI",108,0)
 . Q
"RTN","MAGXCVI",109,0)
 I 'QUEUED,CT#100=0 W MAGIEN
"RTN","MAGXCVI",110,0)
 I 'QUEUED,CT#10=0 W "."
"RTN","MAGXCVI",111,0)
 I XFREC="N",$D(^XTMP("MAGIXCVGEN",MAGIEN)) Q
"RTN","MAGXCVI",112,0)
 K ^XTMP("MAGIXCVGEN",MAGIEN)
"RTN","MAGXCVI",113,0)
 D GENIEN(MAGIEN,.INDXDATA)
"RTN","MAGXCVI",114,0)
 D NOW^%DTC S ^XTMP("MAGIXCVGEN",MAGIEN)=%_U_INDXDATA
"RTN","MAGXCVI",115,0)
 I INDXDATA="" S INDXDATA="(none)"
"RTN","MAGXCVI",116,0)
 S SUMMARY=$G(^XTMP("MAG30P25","SUMMARY",INDXDATA))
"RTN","MAGXCVI",117,0)
 I $P(SUMMARY,U,2)="" S $P(SUMMARY,U,2)=MAGIEN
"RTN","MAGXCVI",118,0)
 S $P(SUMMARY,U,3)=MAGIEN
"RTN","MAGXCVI",119,0)
 S $P(SUMMARY,U)=$P(SUMMARY,U)+1
"RTN","MAGXCVI",120,0)
 S ^XTMP("MAG30P25","SUMMARY",INDXDATA)=SUMMARY,^(INDXDATA,MAGIEN)=""
"RTN","MAGXCVI",121,0)
 Q
"RTN","MAGXCVI",122,0)
 ;
"RTN","MAGXCVI",123,0)
 ; Generate indices for one image (IEN=MAGIEN), return indices in INDXDATA
"RTN","MAGXCVI",124,0)
GENIEN(MAGIEN,INDXDATA) N GRPIEN,MAGTMP,MAGVALS,FLDDATA,MAPDATA,FLDNUM,UTYPE
"RTN","MAGXCVI",125,0)
 N D0,D1,INDXVAL,UNIQUE,FIRSTVAL,DESC,CHILD1
"RTN","MAGXCVI",126,0)
 N I ; --------- loop index
"RTN","MAGXCVI",127,0)
 N MAGNOD ; ---- nodes of the current record, for fast lookup
"RTN","MAGXCVI",128,0)
 N HITDESC ; --- flag set to TRUE if we get a hit on SHORT DESCRIPTION
"RTN","MAGXCVI",129,0)
 N SHDSCTXT ; -- short description text
"RTN","MAGXCVI",130,0)
 N CMPIDX ; ---- index array for comparison (to see if we already mapped)
"RTN","MAGXCVI",131,0)
 ;
"RTN","MAGXCVI",132,0)
 S GRPIEN=$P($G(^MAG(2005,MAGIEN,0)),U,10)
"RTN","MAGXCVI",133,0)
 I GRPIEN="" S GRPIEN=MAGIEN ; this image is not in a group
"RTN","MAGXCVI",134,0)
 I '$D(^MAG(2005,GRPIEN)) S GRPIEN=MAGIEN
"RTN","MAGXCVI",135,0)
 F I=0,2,100 S MAGNOD(I)=$G(^MAG(2005,GRPIEN,I))
"RTN","MAGXCVI",136,0)
 K MAGVALS
"RTN","MAGXCVI",137,0)
 S MAGVALS(3,"I")=$P(MAGNOD(0),U,6) ; object type
"RTN","MAGXCVI",138,0)
 S MAGVALS(6,"I")=$P(MAGNOD(0),U,8) ; procedure
"RTN","MAGXCVI",139,0)
 S MAGVALS(8,"I")=$P(MAGNOD(2),U,2) ; image save by
"RTN","MAGXCVI",140,0)
 S MAGVALS(10,"I")=$P(MAGNOD(2),U,4) ; short description
"RTN","MAGXCVI",141,0)
 S MAGVALS(16,"I")=$P(MAGNOD(2),U,6) ; parent data file
"RTN","MAGXCVI",142,0)
 S MAGVALS(100,"I")=$P(MAGNOD(100),U) ; descriptive category
"RTN","MAGXCVI",143,0)
 S CHILD1=$P($G(^MAG(2005,GRPIEN,1,1,0)),U)
"RTN","MAGXCVI",144,0)
 I CHILD1="" S CHILD1=MAGIEN ; this image is not in a group
"RTN","MAGXCVI",145,0)
 I CHILD1'="" S MAGVALS(3,"I")=$P($G(^MAG(2005,CHILD1,0)),U,6)
"RTN","MAGXCVI",146,0)
 S INDXDATA=""
"RTN","MAGXCVI",147,0)
 ; If these field values have already been indexed, reuse the previously
"RTN","MAGXCVI",148,0)
 ; mapped-to values.
"RTN","MAGXCVI",149,0)
 F FLDNUM=3,6,8,10,16,100 D
"RTN","MAGXCVI",150,0)
 . S X=$G(MAGVALS(FLDNUM,"I")),CMPIDX(FLDNUM)=$S(X]"":X,1:"@")
"RTN","MAGXCVI",151,0)
 . Q
"RTN","MAGXCVI",152,0)
 S INDXDATA=$G(^TMP($J,"CMPIDX",CMPIDX(3),CMPIDX(6),CMPIDX(8),CMPIDX(10),CMPIDX(16),CMPIDX(100)))
"RTN","MAGXCVI",153,0)
 I INDXDATA="" D GENINEW^MAGXCVI1 ; no previous indexing on these values
"RTN","MAGXCVI",154,0)
 ; save indices for possible later re-use
"RTN","MAGXCVI",155,0)
 S ^TMP($J,"CMPIDX",CMPIDX(3),CMPIDX(6),CMPIDX(8),CMPIDX(10),CMPIDX(16),CMPIDX(100))=INDXDATA
"RTN","MAGXCVI",156,0)
 Q
"RTN","MAGXCVI",157,0)
 ;
"RTN","MAGXCVI",158,0)
DONE W !!,"Done!"
"RTN","MAGXCVI",159,0)
 Q
"RTN","MAGXCVI",160,0)
 ;
"RTN","MAGXCVI",161,0)
 ; Silent call to generate and commit image indices for one image (IEN=MAGIEN)
"RTN","MAGXCVI",162,0)
ONE(MAGIEN) N INDXDATA
"RTN","MAGXCVI",163,0)
 D GENIEN(MAGIEN,.INDXDATA),COMIEN^MAGXCVC(MAGIEN,.INDXDATA)
"RTN","MAGXCVI",164,0)
 Q
"RTN","MAGXCVI1")
0^10^B50406294
"RTN","MAGXCVI1",1,0)
MAGXCVI1 ;WOIFO/SEB,MLH - Image Index Conversion Generate - subroutines ; 15 Jul 2004  9:01 AM
"RTN","MAGXCVI1",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVI1",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVI1",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVI1",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVI1",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVI1",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVI1",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVI1",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVI1",10,0)
 ;; |                                                               |
"RTN","MAGXCVI1",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVI1",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVI1",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVI1",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVI1",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVI1",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVI1",17,0)
 ;;
"RTN","MAGXCVI1",18,0)
 Q
"RTN","MAGXCVI1",19,0)
 ;
"RTN","MAGXCVI1",20,0)
GENINEW ; SUBROUTINE - Called from GENIEN^MAGXCVI.
"RTN","MAGXCVI1",21,0)
 ; generate new index values for a set of lookup fields not previously indexed on
"RTN","MAGXCVI1",22,0)
 N INDXSPEC ; ----- specialty indexed to
"RTN","MAGXCVI1",23,0)
 N FILEXT ; ------- file extension for type override checking
"RTN","MAGXCVI1",24,0)
 N TYPE ; --------- type mapped to, for override checking
"RTN","MAGXCVI1",25,0)
 ;
"RTN","MAGXCVI1",26,0)
 F FLDNUM=16,10,6,100,3,8 I $G(MAGVALS(FLDNUM,"I"))]"" D GENFLD
"RTN","MAGXCVI1",27,0)
 S FILEXT=$P($P($G(^MAG(2005,CHILD1,0)),U,2),".",2) ; for later checking
"RTN","MAGXCVI1",28,0)
 ;
"RTN","MAGXCVI1",29,0)
 I $P(INDXDATA,U)="" S $P(INDXDATA,U)="NONE"  ; package still has no value
"RTN","MAGXCVI1",30,0)
 ;
"RTN","MAGXCVI1",31,0)
 I $P(INDXDATA,U,2)="" D  ; class still has no value - base it on type
"RTN","MAGXCVI1",32,0)
 . S TYPE=$P(INDXDATA,U,3)
"RTN","MAGXCVI1",33,0)
 . I TYPE]"" S $P(INDXDATA,U,2)=$P($G(^MAG(2005.83,TYPE,0)),U,2)
"RTN","MAGXCVI1",34,0)
 . Q
"RTN","MAGXCVI1",35,0)
 ;
"RTN","MAGXCVI1",36,0)
 ; if class is ADMIN, no procedure or specialty
"RTN","MAGXCVI1",37,0)
 I $P(INDXDATA,U,2)=8 S $P(INDXDATA,U,4,5)=""
"RTN","MAGXCVI1",38,0)
 ;
"RTN","MAGXCVI1",39,0)
 I $P(INDXDATA,U,3)="" D  ; image type still has no value
"RTN","MAGXCVI1",40,0)
 . S $P(INDXDATA,U,3)=$S(FILEXT="TIF":45,1:75) ; document/image
"RTN","MAGXCVI1",41,0)
 . ; special check for documents
"RTN","MAGXCVI1",42,0)
 . I MAGVALS(3,"I")]"",$P($G(^MAG(2005.02,MAGVALS(3,"I"),0)),U)="DOCUMENT" D
"RTN","MAGXCVI1",43,0)
 . . I $P(INDXDATA,U,2)=1 D  ; clinical
"RTN","MAGXCVI1",44,0)
 . . . S $P(INDXDATA,U,3)=$O(^MAG(2005.83,"B","MISCELLANEOUS DOCUMENT",""))
"RTN","MAGXCVI1",45,0)
 . . . Q
"RTN","MAGXCVI1",46,0)
 . . E  I $P(INDXDATA,U,2)=8 D  ; administrative
"RTN","MAGXCVI1",47,0)
 . . . S $P(INDXDATA,U,3)=$O(^MAG(2005.83,"B","MISCELLANEOUS",""))
"RTN","MAGXCVI1",48,0)
 . . . Q
"RTN","MAGXCVI1",49,0)
 . . Q
"RTN","MAGXCVI1",50,0)
 . Q
"RTN","MAGXCVI1",51,0)
 ;
"RTN","MAGXCVI1",52,0)
 ; if Type is ADVANCE DIRECTIVE or PHOTO ID: no Specialty;
"RTN","MAGXCVI1",53,0)
 ; ADVANCE DIRECTIVE must always be Class CLIN/ADMIN;
"RTN","MAGXCVI1",54,0)
 ; PHOTO ID must always be Class ADMIN/CLIN
"RTN","MAGXCVI1",55,0)
 I "^67^84^"[("^"_$P(INDXDATA,U,3)_"^") D
"RTN","MAGXCVI1",56,0)
 . S $P(INDXDATA,U,5)=""
"RTN","MAGXCVI1",57,0)
 . S $P(INDXDATA,U,2)=$S($P(INDXDATA,U,3)=67:7,1:9)
"RTN","MAGXCVI1",58,0)
 . Q
"RTN","MAGXCVI1",59,0)
 ;
"RTN","MAGXCVI1",60,0)
 ; if Type is ENDOSCOPY, delete Type if really non-Endo (i.e., from
"RTN","MAGXCVI1",61,0)
 ; Medicine Package)
"RTN","MAGXCVI1",62,0)
 I $P(INDXDATA,U,4)=6 D
"RTN","MAGXCVI1",63,0)
 . I (" "_$TR($G(MAGVALS(6,"I")),"-","")_" ")[" NONENDO " S $P(INDXDATA,U,4)=""
"RTN","MAGXCVI1",64,0)
 . Q
"RTN","MAGXCVI1",65,0)
 ;
"RTN","MAGXCVI1",66,0)
 ; if no Procedure or Specialty, then...
"RTN","MAGXCVI1",67,0)
 ; if no type, or an image, default to CLIN Class if no Class
"RTN","MAGXCVI1",68,0)
 I $P(INDXDATA,U,4)="",$P(INDXDATA,U,5)="" D
"RTN","MAGXCVI1",69,0)
 . I "^^75^"[("^"_$P(INDXDATA,U,3)_"^"),$P(INDXDATA,U,2)="" D
"RTN","MAGXCVI1",70,0)
 . . S $P(INDXDATA,U,2)=1
"RTN","MAGXCVI1",71,0)
 . . Q
"RTN","MAGXCVI1",72,0)
 . Q
"RTN","MAGXCVI1",73,0)
 ;
"RTN","MAGXCVI1",74,0)
 ; if Specialty is GI and parent file is ENDOSCOPY and current procedure isn't
"RTN","MAGXCVI1",75,0)
 ; a GI procedure, map to ENDO Procedure
"RTN","MAGXCVI1",76,0)
 I $P(INDXDATA,U,5)=3,MAGVALS(16,"I")=699 D
"RTN","MAGXCVI1",77,0)
 . I '$D(^MAG(2005.85,+$P(INDXDATA,U,4),1,"B",3)) S $P(INDXDATA,U,4)=6
"RTN","MAGXCVI1",78,0)
 . Q
"RTN","MAGXCVI1",79,0)
 ;
"RTN","MAGXCVI1",80,0)
 Q
"RTN","MAGXCVI1",81,0)
 ;
"RTN","MAGXCVI1",82,0)
GENFLD ; SUBROUTINE - Called from GENINEW.
"RTN","MAGXCVI1",83,0)
 ; Generate indices for one field.
"RTN","MAGXCVI1",84,0)
 N D0 ; ----------- scratch array index
"RTN","MAGXCVI1",85,0)
 N I ; ------------ scratch string piece index
"RTN","MAGXCVI1",86,0)
 N INDXVAL ; ------ the index value we compute
"RTN","MAGXCVI1",87,0)
 N PRVVAL ; ------- the index value computed from a previous field mapping
"RTN","MAGXCVI1",88,0)
 ;
"RTN","MAGXCVI1",89,0)
 S MAPDATA=""
"RTN","MAGXCVI1",90,0)
 I FLDNUM=3 D  ; object type
"RTN","MAGXCVI1",91,0)
 . S MAGVALS(3,"I")=$$UCASE^MAGXCVP($$STRIP^MAGXCVP(MAGVALS(3,"I")))
"RTN","MAGXCVI1",92,0)
 . S MAPDATA=$P($G(^XTMP("MAG30P25","MAPPING",3,MAGVALS(3,"I"))),U,2,999)
"RTN","MAGXCVI1",93,0)
 . Q
"RTN","MAGXCVI1",94,0)
 I FLDNUM=6 D GENF06 ; procedure
"RTN","MAGXCVI1",95,0)
 I FLDNUM=8 D GENF08 ; image save by
"RTN","MAGXCVI1",96,0)
 I FLDNUM=10 D GENF10 ; short description
"RTN","MAGXCVI1",97,0)
 I FLDNUM=16 D  ; parent data file
"RTN","MAGXCVI1",98,0)
 . S MAPDATA=$G(^MAG(2005.03,MAGVALS(16,"I"),2))
"RTN","MAGXCVI1",99,0)
 . ; make sure TIUs map properly for CP
"RTN","MAGXCVI1",100,0)
 . I MAGVALS(16,"I")=8925 D
"RTN","MAGXCVI1",101,0)
 . . I (" "_MAGVALS(6,"I")_" ")[" CP " S $P(MAPDATA,U)="CP"
"RTN","MAGXCVI1",102,0)
 . . Q
"RTN","MAGXCVI1",103,0)
 . Q
"RTN","MAGXCVI1",104,0)
 I FLDNUM=100 S MAPDATA=$G(^MAG(2005.81,MAGVALS(100,"I"),2)) ; doc category
"RTN","MAGXCVI1",105,0)
 ; D0: 1=package, 2=class, 3=type, 4=procedure/event, 5=specialty, 6=origin
"RTN","MAGXCVI1",106,0)
 F D0=1:1:6 D
"RTN","MAGXCVI1",107,0)
 . S INDXVAL=$P($P(MAPDATA,U,D0),"-"),PRVVAL=$P(INDXDATA,U,D0)
"RTN","MAGXCVI1",108,0)
 . I INDXVAL]"" D
"RTN","MAGXCVI1",109,0)
 . . I $P(INDXDATA,U,D0)="" D
"RTN","MAGXCVI1",110,0)
 . . . S $P(INDXDATA,U,D0)=INDXVAL
"RTN","MAGXCVI1",111,0)
 . . . Q
"RTN","MAGXCVI1",112,0)
 . . E  I D0=5,PRVVAL=48 D
"RTN","MAGXCVI1",113,0)
 . . . ; override previous Specialty of 'SURGERY' if a more precise mapping
"RTN","MAGXCVI1",114,0)
 . . . ; has been found
"RTN","MAGXCVI1",115,0)
 . . . S $P(INDXDATA,U,D0)=INDXVAL
"RTN","MAGXCVI1",116,0)
 . . . Q
"RTN","MAGXCVI1",117,0)
 . . Q
"RTN","MAGXCVI1",118,0)
 . Q
"RTN","MAGXCVI1",119,0)
 Q
"RTN","MAGXCVI1",120,0)
 ;
"RTN","MAGXCVI1",121,0)
GENF06 ; generate indices based on field 6 (Procedure)
"RTN","MAGXCVI1",122,0)
 ; expects MAGVALS, U; returns MAPDATA
"RTN","MAGXCVI1",123,0)
 N TERM ; --- DICOM Modality Defined Term
"RTN","MAGXCVI1",124,0)
 N I ; ------ scratch index
"RTN","MAGXCVI1",125,0)
 N IVAL ; --- positional index value
"RTN","MAGXCVI1",126,0)
 ;
"RTN","MAGXCVI1",127,0)
 S MAGVALS(6,"I")=$$UCASE^MAGXCVP($$STRIP^MAGXCVP($G(MAGVALS(6,"I"))))
"RTN","MAGXCVI1",128,0)
 I $E(MAGVALS(6,"I"),1,2)="+ " D
"RTN","MAGXCVI1",129,0)
 . S MAGVALS(6,"I")=$E(MAGVALS(6,"I"),3,$L(MAGVALS(6,"I")))
"RTN","MAGXCVI1",130,0)
 . Q
"RTN","MAGXCVI1",131,0)
 I MAGVALS(6,"I")[" TEMPLATE" D
"RTN","MAGXCVI1",132,0)
 . S MAGVALS(6,"I")=$P(MAGVALS(6,"I")," TEMPLATE")
"RTN","MAGXCVI1",133,0)
 . Q
"RTN","MAGXCVI1",134,0)
 I MAGVALS(6,"I")]"" D
"RTN","MAGXCVI1",135,0)
 . S MAPDATA=$P($G(^XTMP("MAG30P25","MAPPING",6,MAGVALS(6,"I"))),U,2,999)
"RTN","MAGXCVI1",136,0)
 . ; did they use a DICOM Modality Defined Term?
"RTN","MAGXCVI1",137,0)
 . S TERM=MAGVALS(6,"I")
"RTN","MAGXCVI1",138,0)
 . I $P(TERM," ")="RAD" S TERM=$P(TERM," ",2,999)
"RTN","MAGXCVI1",139,0)
 . I TERM]"",$D(^RAMIS(73.1,"B",TERM)) D
"RTN","MAGXCVI1",140,0)
 . . F I=1:1:6 D
"RTN","MAGXCVI1",141,0)
 . . . S IVAL=$P(MAPDATA,U,I)
"RTN","MAGXCVI1",142,0)
 . . . I IVAL]"" S $P(INDXDATA,U,I)=$P(IVAL,"-")
"RTN","MAGXCVI1",143,0)
 . . . Q
"RTN","MAGXCVI1",144,0)
 . . Q
"RTN","MAGXCVI1",145,0)
 . Q
"RTN","MAGXCVI1",146,0)
 I MAGVALS(6,"I")["NON VA" D
"RTN","MAGXCVI1",147,0)
 . S $P(INDXDATA,U,6)="N"
"RTN","MAGXCVI1",148,0)
 . Q
"RTN","MAGXCVI1",149,0)
 Q
"RTN","MAGXCVI1",150,0)
 ;
"RTN","MAGXCVI1",151,0)
GENF08 ; generate indices based on field 8
"RTN","MAGXCVI1",152,0)
 ; expects MAGVALS, U; returns MAPDATA
"RTN","MAGXCVI1",153,0)
 ; logic:  strip trailing 'SERVICE', 'SECTION' and then trailing 'CARE';
"RTN","MAGXCVI1",154,0)
 ;         do not tokenize; exact match on mapping
"RTN","MAGXCVI1",155,0)
 N UTYPE ; ----- external value of service/section
"RTN","MAGXCVI1",156,0)
 N SVSECTXT ; -- service/section name, all caps and tokenized
"RTN","MAGXCVI1",157,0)
 ;
"RTN","MAGXCVI1",158,0)
 S UTYPE=$$GET1^DIQ(200,MAGVALS(8,"I")_",",29,"E")
"RTN","MAGXCVI1",159,0)
 I UTYPE]"" D  ; tokenize the service/section
"RTN","MAGXCVI1",160,0)
 . S SVSECTXT=$$STRIP^MAGXCVP($$UCASE^MAGXCVP(UTYPE))
"RTN","MAGXCVI1",161,0)
 . I UTYPE?.E1" SERVICE".1"S" S UTYPE=$P(UTYPE," SERVICE")
"RTN","MAGXCVI1",162,0)
 . I UTYPE?.E1" SECTION" S UTYPE=$P(UTYPE," SECTION")
"RTN","MAGXCVI1",163,0)
 . I UTYPE?.E1" CARE" S UTYPE=$P(UTYPE," CARE")
"RTN","MAGXCVI1",164,0)
 . S MAPDATA=$P($G(^XTMP("MAG30P25","MAPPING",8,UTYPE)),U,2,999)
"RTN","MAGXCVI1",165,0)
 . Q
"RTN","MAGXCVI1",166,0)
 Q
"RTN","MAGXCVI1",167,0)
 ;
"RTN","MAGXCVI1",168,0)
GENF10 ; generate indices based on field 10 (Short Description)
"RTN","MAGXCVI1",169,0)
 ; returns MAPDATA
"RTN","MAGXCVI1",170,0)
 N CURMAP ; ---- current mapping value
"RTN","MAGXCVI1",171,0)
 N NEWMAP ; ---- new mapping value
"RTN","MAGXCVI1",172,0)
 N TOKSTR ; ---- a token string that we check for
"RTN","MAGXCVI1",173,0)
 N SHDSCTXT ; -- short description text
"RTN","MAGXCVI1",174,0)
 N TSTSPEC ; --- specialty mapped to, for override checking
"RTN","MAGXCVI1",175,0)
 ;
"RTN","MAGXCVI1",176,0)
 S TOKSTR="",MAPDATA=""
"RTN","MAGXCVI1",177,0)
 S SHDSCTXT=(" "_$$SCRUBTKN^MAGXCVP($$UCASE^MAGXCVP(MAGVALS(10,"I")))_" ")
"RTN","MAGXCVI1",178,0)
 F  S TOKSTR=$O(^XTMP("MAG30P25","MAPPING",10,TOKSTR)) Q:TOKSTR=""  D
"RTN","MAGXCVI1",179,0)
 . ; Check *every* token - don't stop after the first hit.
"RTN","MAGXCVI1",180,0)
 . ; Set up test string for checking on a standard token boundary (space).
"RTN","MAGXCVI1",181,0)
 . S FLDDATA=$$UCASE^MAGXCVP($G(^XTMP("MAG30P25","MAPPING",10,TOKSTR)))
"RTN","MAGXCVI1",182,0)
 . I SHDSCTXT[(" "_$P(FLDDATA,U)_" ") D
"RTN","MAGXCVI1",183,0)
 . . F I=1:1:6 D
"RTN","MAGXCVI1",184,0)
 . . . S CURMAP=$P(MAPDATA,U,I),NEWMAP=$P(FLDDATA,U,I+1)
"RTN","MAGXCVI1",185,0)
 . . . ; overrides:
"RTN","MAGXCVI1",186,0)
 . . . ;   map to a more precise Specialty than 'SURGERY'
"RTN","MAGXCVI1",187,0)
 . . . I I=5,NEWMAP]"",CURMAP=48 S $P(MAPDATA,U,I)=NEWMAP Q
"RTN","MAGXCVI1",188,0)
 . . . ;
"RTN","MAGXCVI1",189,0)
 . . . I CURMAP="" D
"RTN","MAGXCVI1",190,0)
 . . . . ; overrides:
"RTN","MAGXCVI1",191,0)
 . . . . ;   don't map to Cardiac Cath if specialty other than Cardiology
"RTN","MAGXCVI1",192,0)
 . . . . I I=4,+NEWMAP=1 S TSTSPEC=$P(INDXDATA,U,5) I TSTSPEC,TSTSPEC-2 Q
"RTN","MAGXCVI1",193,0)
 . . . . S $P(MAPDATA,U,I)=NEWMAP
"RTN","MAGXCVI1",194,0)
 . . . . Q
"RTN","MAGXCVI1",195,0)
 . . . Q
"RTN","MAGXCVI1",196,0)
 . . Q
"RTN","MAGXCVI1",197,0)
 . Q
"RTN","MAGXCVI1",198,0)
 Q
"RTN","MAGXCVL")
0^14^B17791267
"RTN","MAGXCVL",1,0)
MAGXCVL ;WOIFO/SEB,MLH - Image File Conversion Utilities & Misc. options ; 15 Jul 2004  10:54 AM
"RTN","MAGXCVL",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVL",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVL",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVL",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVL",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVL",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVL",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVL",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVL",10,0)
 ;; |                                                               |
"RTN","MAGXCVL",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVL",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVL",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVL",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVL",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVL",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVL",17,0)
 ;;
"RTN","MAGXCVL",18,0)
 Q
"RTN","MAGXCVL",19,0)
 ;
"RTN","MAGXCVL",20,0)
 ; Entry point for the File Setup option (MAG IMAGE INDEX FILE SETUP)
"RTN","MAGXCVL",21,0)
EN N FNAME,COUNT,MAGDATA,MAGFLD,MAGID,CT,DR,DIE,DA,%ZIS
"RTN","MAGXCVL",22,0)
 N IX ; --------- scratch subscript var
"RTN","MAGXCVL",23,0)
 ;
"RTN","MAGXCVL",24,0)
 S COUNT=0
"RTN","MAGXCVL",25,0)
EN1 ; get the name of the conversion file
"RTN","MAGXCVL",26,0)
 K DIR S DIR(0)="FOU^3:60"
"RTN","MAGXCVL",27,0)
 S DIR("A")="Please enter the filename of the conversion file"
"RTN","MAGXCVL",28,0)
 S DIR("?",1)="Enter a filename (including the path) of a text file"
"RTN","MAGXCVL",29,0)
 S DIR("?")="containing mapping data."
"RTN","MAGXCVL",30,0)
 D ^DIR
"RTN","MAGXCVL",31,0)
 I $G(Y)]"",'$D(DUOUT),'$D(DTOUT)
"RTN","MAGXCVL",32,0)
 E  S COUNT=-1 G DONE
"RTN","MAGXCVL",33,0)
 S %ZIS="",%ZIS("HFSNAME")=Y,%ZIS("HFSMODE")="R",IOP="HFS"
"RTN","MAGXCVL",34,0)
 S X="ERR^"_$T(+0),@^%ZOSF("TRAP")
"RTN","MAGXCVL",35,0)
 D ^%ZIS I POP=1 W !,"Invalid filename. Please try again." G EN1
"RTN","MAGXCVL",36,0)
 U IO(0)
"RTN","MAGXCVL",37,0)
CLEAR ; confirm it's OK to clear before proceeding
"RTN","MAGXCVL",38,0)
 K DIR S DIR(0)="YU"
"RTN","MAGXCVL",39,0)
 S DIR("A")="Clear mapping file",DIR("B")="NO"
"RTN","MAGXCVL",40,0)
 D ^DIR
"RTN","MAGXCVL",41,0)
 I $D(DUOUT)!$D(DTOUT) G CLOSE
"RTN","MAGXCVL",42,0)
 I Y K ^XTMP("MAG30P25","MAPPING") W "    File cleared!"
"RTN","MAGXCVL",43,0)
 U IO(0) W !
"RTN","MAGXCVL",44,0)
 F CT=1:1 U IO(0) W:CT#10=0 "." U IO R MAGDATA:DTIME Q:$E(MAGDATA,1,7)="$$EOF$$"  D
"RTN","MAGXCVL",45,0)
 . S MAGDATA=$TR(MAGDATA,$C(9),U),MAGDATA=$TR(MAGDATA,$C(34),"")
"RTN","MAGXCVL",46,0)
 . I $E(MAGDATA,1,2)="ID"!(MAGDATA="") Q
"RTN","MAGXCVL",47,0)
 . I $E(MAGDATA,1,7)="Field #" S MAGFLD=$P($E(MAGDATA,8,$L(MAGDATA)),"-") Q
"RTN","MAGXCVL",48,0)
 . I MAGFLD="" Q
"RTN","MAGXCVL",49,0)
 . ; To prevent mismatching of IEN keys, do not overwrite the values in the
"RTN","MAGXCVL",50,0)
 . ; MAG DESCRIPTIVE CATEGORIES File (#2005.81).  Instead, we will later
"RTN","MAGXCVL",51,0)
 . ; load the values from that (merged-into) file into the mapping file.
"RTN","MAGXCVL",52,0)
 . I MAGFLD=100 Q
"RTN","MAGXCVL",53,0)
 . S MAGID=$P(MAGDATA,U)
"RTN","MAGXCVL",54,0)
 . I MAGFLD=6!(MAGFLD=8)!(MAGFLD=10) S MAGID=$P(MAGDATA,U,2)
"RTN","MAGXCVL",55,0)
 . I MAGID="" Q
"RTN","MAGXCVL",56,0)
 . S ^XTMP("MAG30P25","MAPPING",MAGFLD,MAGID)=$P(MAGDATA,U,2,999)
"RTN","MAGXCVL",57,0)
 . I MAGFLD=16 D DIE(MAGFLD,MAGID,MAGDATA)
"RTN","MAGXCVL",58,0)
 . Q
"RTN","MAGXCVL",59,0)
 U IO(0) W !,"Mapping text file load complete.",!
"RTN","MAGXCVL",60,0)
 ;
"RTN","MAGXCVL",61,0)
 ; Here is where we will load FROM the MAG DESCRIPTIVE CATEGORIES File
"RTN","MAGXCVL",62,0)
 ; (#2005.81) INTO the mapping file.  (We used to do it the other way around.)
"RTN","MAGXCVL",63,0)
 W !,"Loading values from MAG DESCRIPTIVE CATEGORIES..."
"RTN","MAGXCVL",64,0)
 S IX=0
"RTN","MAGXCVL",65,0)
 F  S IX=$O(^MAG(2005.81,IX)) Q:'IX  S MAGDATA=$G(^(IX,2)) I MAGDATA]"" D
"RTN","MAGXCVL",66,0)
 . S ^XTMP("MAG30P25","MAPPING",100,IX)=$P($G(^MAG(2005.81,IX,0)),U)_U_MAGDATA
"RTN","MAGXCVL",67,0)
 . Q
"RTN","MAGXCVL",68,0)
 W "done.",!
"RTN","MAGXCVL",69,0)
 ;
"RTN","MAGXCVL",70,0)
 ; Now, re-apply local edits from the audit subtree.
"RTN","MAGXCVL",71,0)
 W !,"Re-applying local edits..."
"RTN","MAGXCVL",72,0)
 S AUDIX=0
"RTN","MAGXCVL",73,0)
 F  S AUDIX=$O(^XTMP("MAG30P25","MAPEDITAUD",AUDIX)) Q:'AUDIX  S AUDDTA=$G(^(AUDIX,0)) I AUDDTA]"" D
"RTN","MAGXCVL",74,0)
 . S ^XTMP("MAG30P25","MAPPING",$P(AUDDTA,U,3),$P(AUDDTA,U,4))=$P(AUDDTA,U,5,999)
"RTN","MAGXCVL",75,0)
 . Q
"RTN","MAGXCVL",76,0)
 W "done.",!
"RTN","MAGXCVL",77,0)
 G CLOSE
"RTN","MAGXCVL",78,0)
 ;
"RTN","MAGXCVL",79,0)
DIE(MAGFLD,MAGID,MAGDATA) ;
"RTN","MAGXCVL",80,0)
 ; File mapping data for field 16 into file #2005.03 (Parent Data File)
"RTN","MAGXCVL",81,0)
 ; or mapping data for field 100 into file #2005.81 (MAG Descriptive Categories)
"RTN","MAGXCVL",82,0)
 ; Called from CLEAR and from END^MAGXCVE 
"RTN","MAGXCVL",83,0)
 N DR ; --- FileMan field string
"RTN","MAGXCVL",84,0)
 N DIE ; -- FileMan file number
"RTN","MAGXCVL",85,0)
 N DA ; --- FileMan internal entry number
"RTN","MAGXCVL",86,0)
 N I ; ---- scratch index
"RTN","MAGXCVL",87,0)
 ;
"RTN","MAGXCVL",88,0)
 F I=3:1:8 S $P(MAGDATA,U,I)=$S($P(MAGDATA,U,I)="":"@",1:$P($P(MAGDATA,U,I),"-"))
"RTN","MAGXCVL",89,0)
 S DR="40////"_$P(MAGDATA,U,3)_";41////"_$P(MAGDATA,U,4)
"RTN","MAGXCVL",90,0)
 S DR=DR_";42////"_$P(MAGDATA,U,5)_";43////"_$P(MAGDATA,U,6)
"RTN","MAGXCVL",91,0)
 S DR=DR_";44////"_$P(MAGDATA,U,7)_";45////"_$P(MAGDATA,U,8)
"RTN","MAGXCVL",92,0)
 S DIE=$S(MAGFLD=16:2005.03,MAGFLD=100:2005.81),DA=MAGID U IO D ^DIE
"RTN","MAGXCVL",93,0)
 Q
"RTN","MAGXCVL",94,0)
 ;
"RTN","MAGXCVL",95,0)
 ; Reached when an error (including end-of-file) occurs.
"RTN","MAGXCVL",96,0)
ERR ;
"RTN","MAGXCVL",97,0)
 U IO(0) X "W !,$ZE,!"
"RTN","MAGXCVL",98,0)
CLOSE ; normal file close logic
"RTN","MAGXCVL",99,0)
 D ^%ZISC
"RTN","MAGXCVL",100,0)
DONE S COUNT=COUNT+1
"RTN","MAGXCVL",101,0)
 I COUNT=1 W !,"Done importing conversion values."
"RTN","MAGXCVL",102,0)
 Q
"RTN","MAGXCVP")
0^11^B27517218
"RTN","MAGXCVP",1,0)
MAGXCVP ;WOIFO/SEB,MLH - Image Index Conversion Generate & Commit ; 29 Nov 2003  2:18 PM
"RTN","MAGXCVP",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVP",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVP",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVP",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVP",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVP",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVP",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVP",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVP",10,0)
 ;; |                                                               |
"RTN","MAGXCVP",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVP",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVP",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVP",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVP",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVP",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVP",17,0)
 ;;
"RTN","MAGXCVP",18,0)
 Q
"RTN","MAGXCVP",19,0)
 ;
"RTN","MAGXCVP",20,0)
 ; Input starting and ending IENs. Return in variables START and END.
"RTN","MAGXCVP",21,0)
BOUNDS(START,END) N TEMP
"RTN","MAGXCVP",22,0)
START R !,"From ID: 1 // ",START:DTIME
"RTN","MAGXCVP",23,0)
 I $E(START)="?" D  G START
"RTN","MAGXCVP",24,0)
 . W !!,"Please enter the ID of an entry in the image file. This will be the first image"
"RTN","MAGXCVP",25,0)
 . W !,"in the range of images processed by this menu option.",!
"RTN","MAGXCVP",26,0)
 . Q
"RTN","MAGXCVP",27,0)
 I START="" S START=1
"RTN","MAGXCVP",28,0)
 I START="^" Q
"RTN","MAGXCVP",29,0)
 I +START'=START W !!,"Please enter a starting image ID - numbers only." G START
"RTN","MAGXCVP",30,0)
END R !,"To ID: LAST // ",END:DTIME
"RTN","MAGXCVP",31,0)
 I $E(END)="?" D  G END
"RTN","MAGXCVP",32,0)
 . W !!,"Please enter the ID of an entry in the image file. This will be the last image"
"RTN","MAGXCVP",33,0)
 . W !,"in the range of images processed by this menu option.",!
"RTN","MAGXCVP",34,0)
 . Q
"RTN","MAGXCVP",35,0)
 I "^LAST"[("^"_$$UCASE(END)) D  ; includes null response default
"RTN","MAGXCVP",36,0)
 . W "  LAST"
"RTN","MAGXCVP",37,0)
 . S END=+$P($G(^MAG(2005,0)),U,3)
"RTN","MAGXCVP",38,0)
 . Q
"RTN","MAGXCVP",39,0)
 I END="^" S START="^" Q
"RTN","MAGXCVP",40,0)
 I +END'=END W !!,"Please enter an ending image ID - numbers only." G END
"RTN","MAGXCVP",41,0)
 I START>END D  G END ;S TEMP=END,END=START,START=TEMP
"RTN","MAGXCVP",42,0)
 . W !!,"'To ID' value must not be less than 'From ID' value."
"RTN","MAGXCVP",43,0)
 . Q
"RTN","MAGXCVP",44,0)
 Q
"RTN","MAGXCVP",45,0)
 ;
"RTN","MAGXCVP",46,0)
 ; Prompt whether the user wishes to recreate previously-calculated indices. Return in FLAG.
"RTN","MAGXCVP",47,0)
RECREATE(FLAG) S FLAG=""
"RTN","MAGXCVP",48,0)
RECR R !,"Recreate previously calculated indices? Y // ",FLAG:DTIME
"RTN","MAGXCVP",49,0)
 S FLAG=$$UCASE($E(FLAG)) I FLAG="" S FLAG="Y"
"RTN","MAGXCVP",50,0)
 I FLAG="?" D  G RECR
"RTN","MAGXCVP",51,0)
 . W !!,"Entering YES will cause index fields that have been calculated by a previous"
"RTN","MAGXCVP",52,0)
 . W !,"execution of this option to be recalculated. Entering NO will cause the option"
"RTN","MAGXCVP",53,0)
 . W !,"to skip images that already have index fields.",!
"RTN","MAGXCVP",54,0)
 . Q
"RTN","MAGXCVP",55,0)
 I "YN^"'[FLAG W !!,"Please enter YES or NO." G RECR
"RTN","MAGXCVP",56,0)
 Q
"RTN","MAGXCVP",57,0)
 ;
"RTN","MAGXCVP",58,0)
 ; Ask if user wishes to job a task into the background with TaskMan. Returns NULL if
"RTN","MAGXCVP",59,0)
 ; the user wishes to run it in the foreground, and a schedule date/time if the user
"RTN","MAGXCVP",60,0)
 ; wishes to use TaskMan.
"RTN","MAGXCVP",61,0)
TASKMAN(RETURN) N ASK,X,%DT
"RTN","MAGXCVP",62,0)
 I '$$TM^%ZTLOAD() S RETURN="" Q
"RTN","MAGXCVP",63,0)
TMA R !,"Would you like to schedule this with TaskMan? Y // ",ASK:DTIME
"RTN","MAGXCVP",64,0)
 S ASK=$$UCASE($E(ASK))
"RTN","MAGXCVP",65,0)
 I ASK="?" D  G TMA
"RTN","MAGXCVP",66,0)
 . W !!,"Entering YES will run this task with TaskMan. Entering NO will cause it to"
"RTN","MAGXCVP",67,0)
 . W !,"run in the foreground.",!
"RTN","MAGXCVP",68,0)
 I "YN^"'[ASK W !!,"Please enter YES or NO." G TMA
"RTN","MAGXCVP",69,0)
 I ASK="^" S RETURN="^" Q
"RTN","MAGXCVP",70,0)
 I ASK="N" S RETURN="" Q
"RTN","MAGXCVP",71,0)
SCHED R !!,"Please enter the date/time for scheduling the task: NOW // ",X:DTIME I X="" S X="NOW"
"RTN","MAGXCVP",72,0)
 I X="^" S RETURN="^" Q
"RTN","MAGXCVP",73,0)
 S %DT="R" D ^%DT I Y=-1 G SCHED
"RTN","MAGXCVP",74,0)
 S RETURN=Y Q
"RTN","MAGXCVP",75,0)
 Q
"RTN","MAGXCVP",76,0)
 ;
"RTN","MAGXCVP",77,0)
DONE W !!,"Done!"
"RTN","MAGXCVP",78,0)
 Q
"RTN","MAGXCVP",79,0)
 ;
"RTN","MAGXCVP",80,0)
 ; Generate a notification message and send it to group MAG SERVER
"RTN","MAGXCVP",81,0)
NOTIFY(RESULT,SUBJECT,STARTDT,ENDDT,STARTIEN,ENDIEN,RECR) N Y,LOC,XMSUB,DIS,CAP,CNT,I,VR,DM,SUMMARY
"RTN","MAGXCVP",82,0)
 K ^TMP($J,"MAGQ")
"RTN","MAGXCVP",83,0)
 D NOW^%DTC S Y=% D DD^%DT
"RTN","MAGXCVP",84,0)
 S U="^",LOC=$$KSP^XUPARAM("WHERE")
"RTN","MAGXCVP",85,0)
 S SUBJECT=$G(SUBJECT)
"RTN","MAGXCVP",86,0)
 I +SUBJECT=SUBJECT S SUBJECT=$P("Generate^Commit",U,SUBJECT)
"RTN","MAGXCVP",87,0)
 S XMSUB=SUBJECT_" Image Index Conversion Values: "_$G(ENDDT)
"RTN","MAGXCVP",88,0)
 S ^TMP($J,"MAGQ",1)="Status: "_$$ST^MAGXCVR
"RTN","MAGXCVP",89,0)
 S ^TMP($J,"MAGQ",2)="Started on: "_$G(STARTDT)
"RTN","MAGXCVP",90,0)
 S ^TMP($J,"MAGQ",3)="Finished on: "_$G(ENDDT)
"RTN","MAGXCVP",91,0)
 S ^TMP($J,"MAGQ",4)="Starting IEN: "_$G(STARTIEN)
"RTN","MAGXCVP",92,0)
 S ^TMP($J,"MAGQ",5)="Ending IEN: "_$G(ENDIEN)
"RTN","MAGXCVP",93,0)
 S ^TMP($J,"MAGQ",6)="Recreate Indices: "_$G(RECR)
"RTN","MAGXCVP",94,0)
 S SUMMARY=""
"RTN","MAGXCVP",95,0)
 F I=7:1 S SUMMARY=$O(^XTMP("MAG30P25","SUMMARY",SUMMARY)) Q:SUMMARY=""  D
"RTN","MAGXCVP",96,0)
 . S ^TMP($J,"MAGQ",I)=SUMMARY_U_^XTMP("MAG30P25","SUMMARY",SUMMARY)
"RTN","MAGXCVP",97,0)
 . Q
"RTN","MAGXCVP",98,0)
 N XMY,XMTEXT
"RTN","MAGXCVP",99,0)
 S XMTEXT="^TMP($J,""MAGQ"","
"RTN","MAGXCVP",100,0)
 S:$G(DUZ) XMY(DUZ)=""
"RTN","MAGXCVP",101,0)
 S XMY("G.MAG SERVER")=""
"RTN","MAGXCVP",102,0)
 S:$G(MAGDUZ) XMY(MAGDUZ)=""
"RTN","MAGXCVP",103,0)
 D ^XMD
"RTN","MAGXCVP",104,0)
 S RESULT="1"
"RTN","MAGXCVP",105,0)
 K ^TMP($J,"MAGQ")
"RTN","MAGXCVP",106,0)
 Q
"RTN","MAGXCVP",107,0)
 ; 
"RTN","MAGXCVP",108,0)
 ; Convert a string to all uppercase.
"RTN","MAGXCVP",109,0)
UCASE(STRING) N OUTPUT
"RTN","MAGXCVP",110,0)
 S OUTPUT=$TR(STRING,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","MAGXCVP",111,0)
 Q OUTPUT
"RTN","MAGXCVP",112,0)
 ;
"RTN","MAGXCVP",113,0)
 ; Convert a string to all lowercase.
"RTN","MAGXCVP",114,0)
LCASE(STRING) N OUTPUT
"RTN","MAGXCVP",115,0)
 S OUTPUT=$TR(STRING,"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","MAGXCVP",116,0)
 Q OUTPUT
"RTN","MAGXCVP",117,0)
 ;
"RTN","MAGXCVP",118,0)
 ; Strip leading and trailing spaces.
"RTN","MAGXCVP",119,0)
STRIP(STRING) N START,END
"RTN","MAGXCVP",120,0)
 F START=1:1:$L(STRING) I $E(STRING,START)'=" " Q
"RTN","MAGXCVP",121,0)
 F END=$L(STRING):-1:1 I $E(STRING,END)'=" " Q
"RTN","MAGXCVP",122,0)
 Q $E(STRING,START,END)
"RTN","MAGXCVP",123,0)
 ;
"RTN","MAGXCVP",124,0)
SCRUBTKN(XSTRING) ; FUNCTION - Create standard token delimiters for parsing
"RTN","MAGXCVP",125,0)
 ; by changing all punctuation to spaces.
"RTN","MAGXCVP",126,0)
 N STRING ; output string
"RTN","MAGXCVP",127,0)
 S STRING=$TR(XSTRING,"+-/\.,~`!@#$%^&*()_-={}[]|:;""'<>?","                                 ")
"RTN","MAGXCVP",128,0)
 ; compress multiple spaces to single space
"RTN","MAGXCVP",129,0)
 F  Q:STRING'["  "  S STRING=$P(STRING,"  ",1)_" "_$P(STRING,"  ",2,999)
"RTN","MAGXCVP",130,0)
 Q STRING
"RTN","MAGXCVR")
0^15^B56875627
"RTN","MAGXCVR",1,0)
MAGXCVR ;WOIFO/SEB,MLH - Image File Conversion Reports ; 24 Mar 2005  10:56 AM
"RTN","MAGXCVR",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVR",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVR",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVR",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVR",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVR",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVR",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVR",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVR",10,0)
 ;; |                                                               |
"RTN","MAGXCVR",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVR",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVR",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVR",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVR",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVR",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVR",17,0)
 ;;
"RTN","MAGXCVR",18,0)
 Q
"RTN","MAGXCVR",19,0)
 ;
"RTN","MAGXCVR",20,0)
 ; Entry point for the detail report option (MAG IMAGE INDEX DETAIL REPORT)
"RTN","MAGXCVR",21,0)
REPORT N START,END S (START,END)=0
"RTN","MAGXCVR",22,0)
 D BOUNDS^MAGXCVP(.START,.END) I START="^" Q
"RTN","MAGXCVR",23,0)
 W !!,"Are you sure that you want to run this report for ",(END-START+1)," images? Y // " R RUN:DTIME
"RTN","MAGXCVR",24,0)
 I "Yy"'[RUN W !,"OK, report not printed." G DONE
"RTN","MAGXCVR",25,0)
 N ZTSAVE S ZTSAVE("START")=START,ZTSAVE("END")=END
"RTN","MAGXCVR",26,0)
 U IO(0) W !,"This report must be run on a device at least 132 columns wide."
"RTN","MAGXCVR",27,0)
 D EN^XUTMDEVQ("REPORT1^"_$T(+0),"Print Image Index Detail Report",.ZTSAVE)
"RTN","MAGXCVR",28,0)
 G DONE
"RTN","MAGXCVR",29,0)
 ;
"RTN","MAGXCVR",30,0)
REPORT1 N MAGIEN,LINENUM,PAGE,RET,STARTDT,ENDDT
"RTN","MAGXCVR",31,0)
 I IOM<132 W !,"This report must be run on a device at least 132 columns wide. Goodbye!" Q
"RTN","MAGXCVR",32,0)
 D NOW^%DTC S Y=% D DD^%DT S STARTDT=Y
"RTN","MAGXCVR",33,0)
 S LINENUM=0,PAGE=0,RET="" D HEADER(1)
"RTN","MAGXCVR",34,0)
 S START=+$G(START),END=+$G(END)
"RTN","MAGXCVR",35,0)
 I END=0 S END=+$P($G(^MAG(2005,0)),U,3)
"RTN","MAGXCVR",36,0)
 S MAGIEN=START-1 I MAGIEN=-1 S MAGIEN=0
"RTN","MAGXCVR",37,0)
 F  S MAGIEN=$O(^MAG(2005,MAGIEN)) Q:MAGIEN>END!(+MAGIEN'=MAGIEN)  D REPONE(MAGIEN,1) I RET="^" Q
"RTN","MAGXCVR",38,0)
 D NOW^%DTC S Y=% D DD^%DT S ENDDT=Y
"RTN","MAGXCVR",39,0)
 Q
"RTN","MAGXCVR",40,0)
 ;
"RTN","MAGXCVR",41,0)
 ; Print data for one image (IEN=MAGIEN)
"RTN","MAGXCVR",42,0)
REPONE(MAGIEN,TYPE) N MAGTMP,MAGVALS,GRPIEN,UTYPE,INDXDATA,CHILD1
"RTN","MAGXCVR",43,0)
 N GRPFLG ; ------- true (1) if this image is part of a group
"RTN","MAGXCVR",44,0)
 ;
"RTN","MAGXCVR",45,0)
 S GRPIEN=$$GET1^DIQ(2005,MAGIEN_",",14,"I"),GRPFLG=1
"RTN","MAGXCVR",46,0)
 ; NEW:  Skip child images (for MRs, CTs, etc.)
"RTN","MAGXCVR",47,0)
 I GRPIEN]"" Q
"RTN","MAGXCVR",48,0)
 I GRPIEN="" S GRPIEN=MAGIEN,GRPFLG=0
"RTN","MAGXCVR",49,0)
 S LINENUM=LINENUM+1 I LINENUM>(IOSL-2) D HEADER(TYPE) I RET="^" Q
"RTN","MAGXCVR",50,0)
 W !,MAGIEN
"RTN","MAGXCVR",51,0)
 I '$D(^MAG(2005,GRPIEN)) D  Q
"RTN","MAGXCVR",52,0)
 . W ?9,"<<< "_$S(GRPFLG:"PARENT ",1:"")_"IMAGE RECORD DOES NOT EXIST! >>>"
"RTN","MAGXCVR",53,0)
 . Q
"RTN","MAGXCVR",54,0)
 K MAGTMP
"RTN","MAGXCVR",55,0)
 D GETS^DIQ(2005,GRPIEN_",","3;6;8;10;16;100","EI","MAGTMP")
"RTN","MAGXCVR",56,0)
 K MAGVALS M MAGVALS=MAGTMP(2005,GRPIEN_",")
"RTN","MAGXCVR",57,0)
 S CHILD1=$G(^MAG(2005,GRPIEN,1,1,0))
"RTN","MAGXCVR",58,0)
 I CHILD1'="" S MAGVALS(3,"E")=$$GET1^DIQ(2005,CHILD1_",",3,"E")
"RTN","MAGXCVR",59,0)
 S UTYPE="" I $G(MAGVALS(8,"I"))]"" S UTYPE=$$GET1^DIQ(200,MAGVALS(8,"I")_",",29,"E")
"RTN","MAGXCVR",60,0)
 W ?9,$E($G(MAGVALS(6,"E")),1,16),?27,$E($G(MAGVALS(10,"E")),1,27),?56,$E($G(MAGVALS(16,"E")),1,20)
"RTN","MAGXCVR",61,0)
 W ?78,$E($G(MAGVALS(100,"E")),1,23),?103,$E($G(MAGVALS(3,"E")),1,17),?120,$E(UTYPE,1,10)
"RTN","MAGXCVR",62,0)
 S INDXDATA=$G(^XTMP("MAGIXCVGEN",MAGIEN)) I INDXDATA="" Q
"RTN","MAGXCVR",63,0)
 I TYPE=1 D INDICES(INDXDATA,TYPE) ;I RET'="^" W ! S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(TYPE) I RET="^" Q
"RTN","MAGXCVR",64,0)
 Q
"RTN","MAGXCVR",65,0)
 ;
"RTN","MAGXCVR",66,0)
 ; Print index values for the current image
"RTN","MAGXCVR",67,0)
INDICES(INDXDATA,TYPE) N D0,INDXVAL,INDXNUM,TAB,LEN,SPACES
"RTN","MAGXCVR",68,0)
 S SPACES="",$P(SPACES," ",21)=""
"RTN","MAGXCVR",69,0)
 W !
"RTN","MAGXCVR",70,0)
 F D0=1:1:5 D
"RTN","MAGXCVR",71,0)
 . S INDXVAL=$P(INDXDATA,U,D0+1)
"RTN","MAGXCVR",72,0)
 . S INDXNUM=$S(D0=2:2005.82,D0=3:2005.83,D0=4:2005.85,D0=5:2005.84,1:"")
"RTN","MAGXCVR",73,0)
 . I D0>1,INDXVAL]"" S INDXVAL=$$GET1^DIQ(INDXNUM,INDXVAL,.01,"E")
"RTN","MAGXCVR",74,0)
 . S TAB=$P("9^27^36^56^78",U,D0),LEN=$P("20^7^18^20^20",U,D0)
"RTN","MAGXCVR",75,0)
 . I TYPE=1 W ?TAB,$E(INDXVAL,1,LEN),"  "
"RTN","MAGXCVR",76,0)
 . I TYPE=2 W $P("Package^Class^Type^Procedure^Specialty",U,D0),": ",$E(INDXVAL,1,LEN),$E(SPACES,1,LEN-$L(INDXVAL))
"RTN","MAGXCVR",77,0)
 . Q
"RTN","MAGXCVR",78,0)
 S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(TYPE) I RET="^" Q
"RTN","MAGXCVR",79,0)
 Q
"RTN","MAGXCVR",80,0)
 ;
"RTN","MAGXCVR",81,0)
 ; Entry point for the summary report option (MAG IMAGE INDEX SUMMARY REPORT)
"RTN","MAGXCVR",82,0)
SUMMARY N ZTSAVE,DETAIL
"RTN","MAGXCVR",83,0)
ALL R !!,"Display data for all images? N // ",DETAIL:DTIME
"RTN","MAGXCVR",84,0)
 S DETAIL=$$UCASE^MAGXCVP(DETAIL) I DETAIL="^" G DONE
"RTN","MAGXCVR",85,0)
 I DETAIL'="Y" S DETAIL="N"
"RTN","MAGXCVR",86,0)
 S ZTSAVE("DETAIL")=DETAIL
"RTN","MAGXCVR",87,0)
 D EN^XUTMDEVQ("SUMMARY1^"_$T(+0),"Print Image Index Summary Report",.ZTSAVE)
"RTN","MAGXCVR",88,0)
 G DONE
"RTN","MAGXCVR",89,0)
 ;
"RTN","MAGXCVR",90,0)
SUMMARY1 N SUMMARY,SUMDATA,PAGE,LINENUM,RET,MAGIEN
"RTN","MAGXCVR",91,0)
 I IOM'=132 W !,"This report must be run on a 132-column device. Goodbye!" Q
"RTN","MAGXCVR",92,0)
 S SUMMARY="",PAGE=0,LINENUM=0,RET="" D HEADER(2)
"RTN","MAGXCVR",93,0)
 F  S SUMMARY=$O(^XTMP("MAG30P25","SUMMARY",SUMMARY)) Q:SUMMARY=""!(RET="^")  D
"RTN","MAGXCVR",94,0)
 . S SUMDATA=$G(^XTMP("MAG30P25","SUMMARY",SUMMARY))
"RTN","MAGXCVR",95,0)
 . D INDICES(U_SUMMARY,2) I RET="^" Q
"RTN","MAGXCVR",96,0)
 . W ! S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",97,0)
 . I DETAIL="Y" D DETL(SUMMARY) I RET="^" Q
"RTN","MAGXCVR",98,0)
 . I DETAIL="N" D SUMM(SUMDATA) I RET="^" Q
"RTN","MAGXCVR",99,0)
 . W ! F I=1:1:132 W "-"
"RTN","MAGXCVR",100,0)
 . S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",101,0)
 . Q
"RTN","MAGXCVR",102,0)
 I RET="^" Q
"RTN","MAGXCVR",103,0)
 W !!,"Index Commit History:" S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",104,0)
 F I=1:1:+$G(^XTMP("MAG30P25","HISTORY")) Q:I=""  D
"RTN","MAGXCVR",105,0)
 . S SUMDATA=$G(^XTMP("MAG30P25","HISTORY",I))
"RTN","MAGXCVR",106,0)
 . W !?2,I,?8,$P(SUMDATA,U),"-",$P(SUMDATA,U,3)," started on ",$P(SUMDATA,U,2),", finished on ",$P(SUMDATA,U,4)
"RTN","MAGXCVR",107,0)
 . S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",108,0)
 . Q
"RTN","MAGXCVR",109,0)
 Q
"RTN","MAGXCVR",110,0)
 ;
"RTN","MAGXCVR",111,0)
 ; Print the header of the report
"RTN","MAGXCVR",112,0)
HEADER(TYPE) N I,STATUS ; TYPE = 1: Detail, 2: Summary
"RTN","MAGXCVR",113,0)
 S STATUS=$G(^XTMP("MAG30P25","SUMMARY"))
"RTN","MAGXCVR",114,0)
 I PAGE>0,IOT="TRM"!(IOT="VTRM") R !!,"Press <RETURN> to continue, or '^' to exit: ",RET:DTIME I RET="^" Q
"RTN","MAGXCVR",115,0)
 S LINENUM=$P("6^5",U,TYPE),PAGE=PAGE+1
"RTN","MAGXCVR",116,0)
 W:PAGE>0 # W ! F I=1:1:132 W "-"
"RTN","MAGXCVR",117,0)
 W !?53,"Image Index Report ",$S(TYPE=1:"Detail",1:"Summary"),?106,"Page #",PAGE
"RTN","MAGXCVR",118,0)
 I TYPE=1 D
"RTN","MAGXCVR",119,0)
 . W !,"Img ID",?9,"Procedure",?27,"Short Description",?56,"Parent Data File"
"RTN","MAGXCVR",120,0)
 . W ?78,"Document Category",?103,"Obj. Type",?120,"User Type"
"RTN","MAGXCVR",121,0)
 . W !?9,"Package",?27,"Class",?36,"Type",?56,"Procedure/Event",?78,"Specialty"
"RTN","MAGXCVR",122,0)
 . Q
"RTN","MAGXCVR",123,0)
 I TYPE=2 D
"RTN","MAGXCVR",124,0)
 . W !?40,"Compiled: ",$P(STATUS,U,2),"-",$P(STATUS,U,4)
"RTN","MAGXCVR",125,0)
 . W !?(132-11-$L($P(STATUS,U))-$L($P(STATUS,U,3))/2),"Image IDs: ",$P(STATUS,U),"-",$P(STATUS,U,3)
"RTN","MAGXCVR",126,0)
 . Q
"RTN","MAGXCVR",127,0)
 W ! F I=1:1:132 W "-"
"RTN","MAGXCVR",128,0)
 Q
"RTN","MAGXCVR",129,0)
 ;
"RTN","MAGXCVR",130,0)
SUMM(SUMDATA) W !,"Total: ",$P(SUMDATA,U),?15,"First IEN: ",$P(SUMDATA,U,2),?35,"Last IEN: ",$P(SUMDATA,U,3)
"RTN","MAGXCVR",131,0)
 S LINENUM=LINENUM+2 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",132,0)
 W !,"Img ID",?9,"Procedure",?27,"Short Description",?56,"Parent Data File"
"RTN","MAGXCVR",133,0)
 W ?78,"Document Category",?103,"Obj. Type",?120,"User Type"
"RTN","MAGXCVR",134,0)
 S LINENUM=LINENUM+1 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",135,0)
 ;D REPONE($P(SUMDATA,U,2),2) I RET="^" Q
"RTN","MAGXCVR",136,0)
 I $P(SUMDATA,U,2)'=$P(SUMDATA,U,3) D  I RET="^" Q
"RTN","MAGXCVR",137,0)
 . ;D REPONE($P(SUMDATA,U,3),2) I RET="^" Q
"RTN","MAGXCVR",138,0)
 . Q
"RTN","MAGXCVR",139,0)
 Q
"RTN","MAGXCVR",140,0)
 ;
"RTN","MAGXCVR",141,0)
DETL(SUMMARY) N MAGIEN
"RTN","MAGXCVR",142,0)
 W !,"Img ID",?9,"Procedure",?27,"Short Description",?56,"Parent Data File"
"RTN","MAGXCVR",143,0)
 W ?78,"Document Category",?103,"Obj. Type",?120,"User Type"
"RTN","MAGXCVR",144,0)
 S LINENUM=LINENUM+2 I LINENUM>(IOSL-3) D HEADER(2) I RET="^" Q
"RTN","MAGXCVR",145,0)
 S MAGIEN="" F  S MAGIEN=$O(^XTMP("MAG30P25","SUMMARY",SUMMARY,MAGIEN)) Q:MAGIEN=""!(RET="^")  D
"RTN","MAGXCVR",146,0)
 . D REPONE(MAGIEN,2) I RET="^" Q
"RTN","MAGXCVR",147,0)
 . Q
"RTN","MAGXCVR",148,0)
 Q
"RTN","MAGXCVR",149,0)
 ;
"RTN","MAGXCVR",150,0)
DONE W !!,"Done!"
"RTN","MAGXCVR",151,0)
 Q
"RTN","MAGXCVR",152,0)
 ;
"RTN","MAGXCVR",153,0)
 ; Entry point for the status report option (MAG IMAGE INDEX STATUS)
"RTN","MAGXCVR",154,0)
STATUS N STDATA,STFLAG,TASKNUM
"RTN","MAGXCVR",155,0)
 S STDATA=$G(^XTMP("MAG30P25","STATUS")),STFLAG=$P(STDATA,U,13),TASKNUM=$P(STDATA,U,14)
"RTN","MAGXCVR",156,0)
 W ! F CT=1:1:80 W "-"
"RTN","MAGXCVR",157,0)
 W !,"Current status: ",$$ST I TASKNUM>0 W " (#",TASKNUM,")"
"RTN","MAGXCVR",158,0)
 W ?60,"Current IEN: ",$P(STDATA,U,((STFLAG>3)+1)*6)
"RTN","MAGXCVR",159,0)
 W !!,"Last generation started on: ",$P(STDATA,U,3),?53,"Starting IEN: ",$P(STDATA,U,2)
"RTN","MAGXCVR",160,0)
 W !?18,"ended on: ",$P(STDATA,U,5),?55,"Ending IEN: ",$P(STDATA,U,4)
"RTN","MAGXCVR",161,0)
 W !!?4,"Last commit started on: ",$P(STDATA,U,9),?53,"Starting IEN: ",$P(STDATA,U,8)
"RTN","MAGXCVR",162,0)
 W !?18,"ended on: ",$P(STDATA,U,11),?55,"Ending IEN: ",$P(STDATA,U,10)
"RTN","MAGXCVR",163,0)
 W ! F CT=1:1:80 W "-"
"RTN","MAGXCVR",164,0)
 Q
"RTN","MAGXCVR",165,0)
 ;
"RTN","MAGXCVR",166,0)
ST() N STDATA,STFLAG,STATUS
"RTN","MAGXCVR",167,0)
 S STDATA=$G(^XTMP("MAG30P25","STATUS"))
"RTN","MAGXCVR",168,0)
 S STFLAG=$P(STDATA,U,13)
"RTN","MAGXCVR",169,0)
 I +STFLAG=0 Q "Image index conversion not started yet"
"RTN","MAGXCVR",170,0)
 S STATUS="Image index "_$S(STFLAG<4:"generation",1:"commit")_" "_$S(STFLAG#3=0:"done",STFLAG#3=1:"in progress",1:"aborted")
"RTN","MAGXCVR",171,0)
 Q STATUS
"RTN","MAGXCVS")
0^16^B52829212
"RTN","MAGXCVS",1,0)
MAGXCVS ;WOIFO/MLH - Imaging - index conversion - summary report ; 28 Mar 2005  9:20 AM
"RTN","MAGXCVS",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVS",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVS",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVS",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVS",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVS",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVS",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVS",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVS",10,0)
 ;; |                                                               |
"RTN","MAGXCVS",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVS",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVS",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVS",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVS",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVS",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVS",17,0)
 ;;
"RTN","MAGXCVS",18,0)
 Q
"RTN","MAGXCVS",19,0)
 ;
"RTN","MAGXCVS",20,0)
MAKESUMM ; entry point - construct a summary report from site data
"RTN","MAGXCVS",21,0)
 ; This expects that the site will already have created an export file.
"RTN","MAGXCVS",22,0)
 ;
"RTN","MAGXCVS",23,0)
 N %ZIS,IOP,X,COUNT,LN,DATA,MAGIEN,PKG,CLS,TYP,SPEC,PROC,PROC2,DESC
"RTN","MAGXCVS",24,0)
 N SUB ; ------- station or substation mnemonic
"RTN","MAGXCVS",25,0)
 N FQFNAME ; --- fully qualified file name to process
"RTN","MAGXCVS",26,0)
 N FNAME ; ----- file name without directory or extension
"RTN","MAGXCVS",27,0)
 N RANGE ; ----- range of records (for documentation)
"RTN","MAGXCVS",28,0)
 N DTIME ; ----- timeout (in seconds) for input
"RTN","MAGXCVS",29,0)
 N FULABR ; ---- Full or Abridged report flag
"RTN","MAGXCVS",30,0)
 ;
"RTN","MAGXCVS",31,0)
 K ^TMP($J,"MAGIXCVSTAT")
"RTN","MAGXCVS",32,0)
 S COUNT=0
"RTN","MAGXCVS",33,0)
 S:'$D(DTIME) DTIME=$$DTIME^XUP(DUZ)
"RTN","MAGXCVS",34,0)
SM1 ; set frequency threshold based on full or abridged report
"RTN","MAGXCVS",35,0)
 ;
"RTN","MAGXCVS",36,0)
 K DIR S DIR(0)="SB^A:Abridged;F:Full"
"RTN","MAGXCVS",37,0)
 S DIR("A")="Abridged or Full report"
"RTN","MAGXCVS",38,0)
 S DIR("?",1)="Enter A if you wish to see the mapping only for those combinations"
"RTN","MAGXCVS",39,0)
 S DIR("?",2)="  of source field values that occurred more than 50 times."
"RTN","MAGXCVS",40,0)
 S DIR("?",3)=" "
"RTN","MAGXCVS",41,0)
 S DIR("?",4)="Enter F if you wish to see the mapping for all combinations of source"
"RTN","MAGXCVS",42,0)
 S DIR("?",5)="  field values in the range of image IENs that you mapped, even those"
"RTN","MAGXCVS",43,0)
 S DIR("?",6)="  that occurred fewer than 50 times."
"RTN","MAGXCVS",44,0)
 S DIR("?")=" "
"RTN","MAGXCVS",45,0)
 D ^DIR Q:$D(DTOUT)  Q:$D(DUOUT)  S FRQTHRS=$S(Y="A":50,1:1)
"RTN","MAGXCVS",46,0)
 ;
"RTN","MAGXCVS",47,0)
SM15 ; what export file?
"RTN","MAGXCVS",48,0)
 ;
"RTN","MAGXCVS",49,0)
 K DIR S DIR(0)="FO"
"RTN","MAGXCVS",50,0)
 S DIR("A")="Please enter the filename of the export file to use for input"
"RTN","MAGXCVS",51,0)
 S DIR("?")="Enter a file name, including the path, of the export file that contains the data to be summarized in the report."
"RTN","MAGXCVS",52,0)
 D ^DIR Q:$D(DTOUT)  Q:$D(DUOUT)  S FQFNAME=Y
"RTN","MAGXCVS",53,0)
 I FQFNAME="" W !!,"No filename entered. Goodbye!" Q
"RTN","MAGXCVS",54,0)
 S %ZIS="",%ZIS("HFSNAME")=FQFNAME,%ZIS("HFSMODE")="R",IOP="HFS"
"RTN","MAGXCVS",55,0)
 S $ET="G ERR^"_$T(+0)
"RTN","MAGXCVS",56,0)
 D ^%ZIS I POP=1 W !,"Unable to open "_FQFNAME_". Please try again." G SM15
"RTN","MAGXCVS",57,0)
 W ! S FNAME=$P($P(FQFNAME,"\",$L(FQFNAME,"\")),".")
"RTN","MAGXCVS",58,0)
 S (SUB,CODE)=$$UCASE^MAGXCVP($P(FNAME,"_")),RANGE=$P(FNAME,"_",2)
"RTN","MAGXCVS",59,0)
 I RANGE="" S RANGE="not given"
"RTN","MAGXCVS",60,0)
 K ^TMP($J,"MAGIXCVSTAT") S ^TMP($J,"MAGIXCVSTAT",0)=SUB_"^"_RANGE
"RTN","MAGXCVS",61,0)
 F LN=1:1 U IO R DATA:99999 Q:DATA="***end***"  I LN>1 D  ; Skip header
"RTN","MAGXCVS",62,0)
 . S MAGIEN=$P(DATA,$C(9))
"RTN","MAGXCVS",63,0)
 . S PKG=$P(DATA,$C(9),8) I PKG="" S PKG="(none)"
"RTN","MAGXCVS",64,0)
 . S CLS=+$P(DATA,$C(9),9),TYP=+$P(DATA,$C(9),10),SPEC=+$P(DATA,$C(9),11)
"RTN","MAGXCVS",65,0)
 . S PROC=+$P(DATA,$C(9),12)
"RTN","MAGXCVS",66,0)
 . S X=$P(DATA,$C(9),13),ORIG=$S(X="":"(none)",1:$P(X,"-")_" - "_$P(X,"-",2,999))
"RTN","MAGXCVS",67,0)
 . I ORIG="" S ORIG="(none)"
"RTN","MAGXCVS",68,0)
 . S DESC=$$STRIP^MAGXCVP($$UCASE^MAGXCVP($P(DATA,$C(9),2))) I DESC="" S DESC="(none)"
"RTN","MAGXCVS",69,0)
 . S PROCTXT=$$STRIP^MAGXCVP($$UCASE^MAGXCVP($P(DATA,$C(9),3))) I PROCTXT="" S PROCTXT="(none)"
"RTN","MAGXCVS",70,0)
 . S PARENT=$P(DATA,$C(9),4) I PARENT="" S PARENT="(none)"
"RTN","MAGXCVS",71,0)
 . S DOCCAT=$P(DATA,$C(9),5) I DOCCAT="" S DOCCAT="(none)"
"RTN","MAGXCVS",72,0)
 . S OBJTYP=$P(DATA,$C(9),6) I OBJTYP="" S OBJTYP="(none)"
"RTN","MAGXCVS",73,0)
 . S SAVBYGRP=$P(DATA,$C(9),7) I SAVBYGRP="" S SAVBYGRP="(none)"
"RTN","MAGXCVS",74,0)
 . S ^(SAVBYGRP)=$G(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC,PROCTXT,PARENT,DOCCAT,OBJTYP,SAVBYGRP))+1
"RTN","MAGXCVS",75,0)
 . I LN#100=0 U IO(0) W "."
"RTN","MAGXCVS",76,0)
 . I LN#5000=0 U IO(0) W LN,!
"RTN","MAGXCVS",77,0)
 . Q
"RTN","MAGXCVS",78,0)
 D ^%ZISC
"RTN","MAGXCVS",79,0)
 U IO(0) W !,"File import complete.",! G SM2
"RTN","MAGXCVS",80,0)
 ;
"RTN","MAGXCVS",81,0)
 ; Reached when an error (including end-of-file) occurs.
"RTN","MAGXCVS",82,0)
ERR ;
"RTN","MAGXCVS",83,0)
 S $ET=""
"RTN","MAGXCVS",84,0)
 D ^%ZISC
"RTN","MAGXCVS",85,0)
 U IO(0) X "W !,$ZE" W !,"Processing interrupted after ",LN," lines.",!
"RTN","MAGXCVS",86,0)
 ;
"RTN","MAGXCVS",87,0)
SM2 ;
"RTN","MAGXCVS",88,0)
 W !,"This report must be run on at least a 132-column device.",!
"RTN","MAGXCVS",89,0)
 D EN^XUTMDEVQ("ANZRPT^"_$T(+0),"Print Image Index Summary Report",.ZTSAVE)
"RTN","MAGXCVS",90,0)
 Q
"RTN","MAGXCVS",91,0)
 ;
"RTN","MAGXCVS",92,0)
ANZRPT ;
"RTN","MAGXCVS",93,0)
 I IOM<132 W !,"This report must be run on at least a 132-column device.  Goodbye!",! Q
"RTN","MAGXCVS",94,0)
 N FQUIT ; --- quit flag from header logic
"RTN","MAGXCVS",95,0)
 N RDATE ; --- report date
"RTN","MAGXCVS",96,0)
 ;
"RTN","MAGXCVS",97,0)
 S %H=$H D YX^%DTC S RDATE=Y
"RTN","MAGXCVS",98,0)
 S PG=0
"RTN","MAGXCVS",99,0)
 S FQUIT=0
"RTN","MAGXCVS",100,0)
 S SUB=$O(^MAG(2006.1,0)) I SUB S SUB=$P($G(^MAG(2006.1,SUB,0)),U)
"RTN","MAGXCVS",101,0)
 ;
"RTN","MAGXCVS",102,0)
 S PKG=""
"RTN","MAGXCVS",103,0)
 F  S PKG=$O(^TMP($J,"MAGIXCVSTAT",PKG)) Q:PKG=""  D  Q:FQUIT
"RTN","MAGXCVS",104,0)
 . S CLS=""
"RTN","MAGXCVS",105,0)
 . F  S CLS=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS)) Q:CLS=""  D  Q:FQUIT
"RTN","MAGXCVS",106,0)
 . . S TYP=""
"RTN","MAGXCVS",107,0)
 . . F  S TYP=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP)) Q:TYP=""  D  Q:FQUIT
"RTN","MAGXCVS",108,0)
 . . . S PROC=""
"RTN","MAGXCVS",109,0)
 . . . F  S PROC=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC)) Q:PROC=""  D  Q:FQUIT
"RTN","MAGXCVS",110,0)
 . . . . S SPEC=""
"RTN","MAGXCVS",111,0)
 . . . . F  S SPEC=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC)) Q:SPEC=""  D  Q:FQUIT
"RTN","MAGXCVS",112,0)
 . . . . . S ORIG=""
"RTN","MAGXCVS",113,0)
 . . . . . F  S ORIG=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG)) Q:ORIG=""  D SPEC1 Q:FQUIT
"RTN","MAGXCVS",114,0)
 . . . . Q
"RTN","MAGXCVS",115,0)
 . . . Q
"RTN","MAGXCVS",116,0)
 . . Q
"RTN","MAGXCVS",117,0)
 . Q
"RTN","MAGXCVS",118,0)
 Q
"RTN","MAGXCVS",119,0)
 ;
"RTN","MAGXCVS",120,0)
SPEC1 ;
"RTN","MAGXCVS",121,0)
 S NUPG=1
"RTN","MAGXCVS",122,0)
 S DESC=""
"RTN","MAGXCVS",123,0)
 F  S DESC=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC)) Q:DESC=""  D  Q:FQUIT
"RTN","MAGXCVS",124,0)
 . S PROCTXT=""
"RTN","MAGXCVS",125,0)
 . F  S PROCTXT=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC,PROCTXT)) Q:PROCTXT=""  D  Q:FQUIT
"RTN","MAGXCVS",126,0)
 . . S PARENT=""
"RTN","MAGXCVS",127,0)
 . . F  S PARENT=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC,PROCTXT,PARENT)) Q:PARENT=""  D  Q:FQUIT
"RTN","MAGXCVS",128,0)
 . . . S DOCCAT=""
"RTN","MAGXCVS",129,0)
 . . . F  S DOCCAT=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC,PROCTXT,PARENT,DOCCAT)) Q:DOCCAT=""  D  Q:FQUIT
"RTN","MAGXCVS",130,0)
 . . . . S OBJTYP=""
"RTN","MAGXCVS",131,0)
 . . . . F  S OBJTYP=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC,PROCTXT,PARENT,DOCCAT,OBJTYP)) Q:OBJTYP=""  D  Q:FQUIT
"RTN","MAGXCVS",132,0)
 . . . . . S SAVBYGRP=""
"RTN","MAGXCVS",133,0)
 . . . . . F  S SAVBYGRP=$O(^TMP($J,"MAGIXCVSTAT",PKG,CLS,TYP,PROC,SPEC,ORIG,DESC,PROCTXT,PARENT,DOCCAT,OBJTYP,SAVBYGRP)) Q:SAVBYGRP=""  S KT=^(SAVBYGRP) D  Q:FQUIT
"RTN","MAGXCVS",134,0)
 . . . . . . I KT<FRQTHRS Q  ; count must exceed frequency threshold
"RTN","MAGXCVS",135,0)
 . . . . . . I ($Y>(IOSL-3))!NUPG D ANZHED Q:FQUIT
"RTN","MAGXCVS",136,0)
 . . . . . . W DESC,"  ",?34,PROCTXT,"  ",?64,PARENT,"  ",?78,DOCCAT,"  ",?92,OBJTYP,"  ",?106,SAVBYGRP,"  ",?150,$J(KT,8),!
"RTN","MAGXCVS",137,0)
 . . . . . . Q
"RTN","MAGXCVS",138,0)
 . . . . . Q
"RTN","MAGXCVS",139,0)
 . . . . Q
"RTN","MAGXCVS",140,0)
 . . . Q
"RTN","MAGXCVS",141,0)
 . . Q
"RTN","MAGXCVS",142,0)
 . Q
"RTN","MAGXCVS",143,0)
 Q
"RTN","MAGXCVS",144,0)
 ;
"RTN","MAGXCVS",145,0)
ANZHED ;
"RTN","MAGXCVS",146,0)
 I PG>0,IOT="TRM"!(IOT="VTRM") D  Q:FQUIT
"RTN","MAGXCVS",147,0)
 . R !!,"Press <RETURN> to continue, or '^' to exit: ",RET:DTIME
"RTN","MAGXCVS",148,0)
 . S FQUIT=(RET="^")
"RTN","MAGXCVS",149,0)
 . Q
"RTN","MAGXCVS",150,0)
 S PG=PG+1,NUPG=0
"RTN","MAGXCVS",151,0)
 W #!,"Site: ",SUB D CTR("IMAGE INDEX GENERATION REPORT") W ?115,"DATE ",RDATE,!
"RTN","MAGXCVS",152,0)
 ;W "Range: ",RANGE
"RTN","MAGXCVS",153,0)
 D CTR("Package: "_PKG)
"RTN","MAGXCVS",154,0)
 W ?122,$J("PAGE "_PG,8),!
"RTN","MAGXCVS",155,0)
 D CTR("Class: "_$S(CLS:CLS_" - "_$P($G(^MAG(2005.82,CLS,0)),"^"),1:"(none)")) W !
"RTN","MAGXCVS",156,0)
 D CTR("Type: "_$S(TYP:TYP_" - "_$P($G(^MAG(2005.83,TYP,0)),"^"),1:"(none)")) W !
"RTN","MAGXCVS",157,0)
 D CTR("Procedure/Event: "_$S(PROC:PROC_" - "_$P($G(^MAG(2005.85,PROC,0)),"^"),1:"(none)")) W !
"RTN","MAGXCVS",158,0)
 D CTR("Specialty: "_$S(SPEC:SPEC_" - "_$P($G(^MAG(2005.84,SPEC,0)),"^"),1:"(none)")) W !
"RTN","MAGXCVS",159,0)
 D CTR("Origin: "_ORIG) W !!
"RTN","MAGXCVS",160,0)
 W ?64,"Parent",!
"RTN","MAGXCVS",161,0)
 W "Short Description",?34,"Procedure Text",?64,"Data File",?78,"Document Cat",?92,"Object Type",?106,"Save By Group",?153,"Count",!!
"RTN","MAGXCVS",162,0)
 Q 
"RTN","MAGXCVS",163,0)
 ;
"RTN","MAGXCVS",164,0)
CTR(X) W ?65-($L(X)/2),X Q
"RTN","MAGXCVS",165,0)
EOR ;END ROUTINE
"RTN","MAGXCVX")
0^17^B20611154
"RTN","MAGXCVX",1,0)
MAGXCVX ;WOIFO/SEB,MLH - Image File Conversion Export ; 24 Mar 2005  11:00 AM
"RTN","MAGXCVX",2,0)
 ;;3.0;IMAGING;**17,25,31**;Mar 31, 2005
"RTN","MAGXCVX",3,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVX",4,0)
 ;; | Property of the US Government.                                |
"RTN","MAGXCVX",5,0)
 ;; | No permission to copy or redistribute this software is given. |
"RTN","MAGXCVX",6,0)
 ;; | Use of unreleased versions of this software requires the user |
"RTN","MAGXCVX",7,0)
 ;; | to execute a written test agreement with the VistA Imaging    |
"RTN","MAGXCVX",8,0)
 ;; | Development Office of the Department of Veterans Affairs,     |
"RTN","MAGXCVX",9,0)
 ;; | telephone (301) 734-0100.                                     |
"RTN","MAGXCVX",10,0)
 ;; |                                                               |
"RTN","MAGXCVX",11,0)
 ;; | The Food and Drug Administration classifies this software as  |
"RTN","MAGXCVX",12,0)
 ;; | a medical device.  As such, it may not be changed in any way. |
"RTN","MAGXCVX",13,0)
 ;; | Modifications to this software may result in an adulterated   |
"RTN","MAGXCVX",14,0)
 ;; | medical device under 21CFR820, the use of which is considered |
"RTN","MAGXCVX",15,0)
 ;; | to be a violation of US Federal Statutes.                     |
"RTN","MAGXCVX",16,0)
 ;; +---------------------------------------------------------------+
"RTN","MAGXCVX",17,0)
 ;;
"RTN","MAGXCVX",18,0)
 Q
"RTN","MAGXCVX",19,0)
 ;
"RTN","MAGXCVX",20,0)
 ; Entry point for the Export Results option (MAG IMAGE INDEX EXPORT)
"RTN","MAGXCVX",21,0)
EXPORT N FNAME,COUNT,MAGDATA,MAGFLD,MAGID,CT,DR,DIE,DA,%ZIS,CLEAR
"RTN","MAGXCVX",22,0)
 N MAGIEN,GRPIEN,CHILD1,UTYPE,MAGTMP,MAGVALS,FLDNUM,START,END
"RTN","MAGXCVX",23,0)
 N MAGNOD ; --- nodes of the current image record, for fast lookup
"RTN","MAGXCVX",24,0)
 N I ; -------- scratch loop index
"RTN","MAGXCVX",25,0)
 N INT ; ------ internal code value
"RTN","MAGXCVX",26,0)
 N EXT ; ------ array for return of external code value from VAL^DIE
"RTN","MAGXCVX",27,0)
 ;
"RTN","MAGXCVX",28,0)
 S COUNT=0
"RTN","MAGXCVX",29,0)
EX1 R !!,"Please enter the filename of the output file: ",FNAME:DTIME
"RTN","MAGXCVX",30,0)
 I $E(FNAME)="?" D  G EX1
"RTN","MAGXCVX",31,0)
 . W !!,"Enter a file name, including the path, of the file to export."
"RTN","MAGXCVX",32,0)
 . Q
"RTN","MAGXCVX",33,0)
 I $TR(FNAME,"^")="" W !!,"No filename entered. Goodbye!" Q
"RTN","MAGXCVX",34,0)
 S %ZIS="",%ZIS("HFSNAME")=FNAME,%ZIS("HFSMODE")="W",IOP="HFS"
"RTN","MAGXCVX",35,0)
 S X="ERR^"_$T(+0),@^%ZOSF("TRAP")
"RTN","MAGXCVX",36,0)
 D ^%ZIS I POP=1 W !,"Unable to open "_FNAME_" for output. Please try again." G EX1
"RTN","MAGXCVX",37,0)
 W ! D BOUNDS^MAGXCVP(.START,.END) I START="^" S COUNT=-1 G ERR
"RTN","MAGXCVX",38,0)
 S START=+$G(START),END=+$G(END) I END=0 S END=+$P($G(^MAG(2005,0)),U,3)
"RTN","MAGXCVX",39,0)
 S MAGIEN=START-1 I MAGIEN=-1 S MAGIEN=0
"RTN","MAGXCVX",40,0)
 W ! U IO W "Image IEN",$C(9),"Short Description",$C(9),"Procedure",$C(9),"Parent Data File",$C(9)
"RTN","MAGXCVX",41,0)
 W "Document Category",$C(9),"Object Type",$C(9),"Save By Group",$C(9)
"RTN","MAGXCVX",42,0)
 W "Package",$C(9),"Class",$C(9),"Type",$C(9),"Specialty",$C(9),"Proc/Event",$C(9),"Origin",!
"RTN","MAGXCVX",43,0)
 F CT=0:1 S MAGIEN=$O(^XTMP("MAGIXCVGEN",MAGIEN)) Q:MAGIEN>END!(+MAGIEN'=MAGIEN)  D
"RTN","MAGXCVX",44,0)
 . U IO(0) W:CT#100=0 MAGIEN W:CT#10=0 "."
"RTN","MAGXCVX",45,0)
 . S GRPIEN=$P($G(^MAG(2005,MAGIEN,0)),U,10) I GRPIEN="" S GRPIEN=MAGIEN
"RTN","MAGXCVX",46,0)
 . F I=0,2,100 S MAGNOD(I)=$G(^MAG(2005,GRPIEN,I))
"RTN","MAGXCVX",47,0)
 . K MAGVALS,UTYPE
"RTN","MAGXCVX",48,0)
 . ; get internal values
"RTN","MAGXCVX",49,0)
 . S MAGVALS(3,"I")=$P(MAGNOD(0),U,6) ; object type
"RTN","MAGXCVX",50,0)
 . S CHILD1=$P($G(^MAG(2005,GRPIEN,1,1,0)),U)
"RTN","MAGXCVX",51,0)
 . I CHILD1]"" S MAGVALS(3,"I")=$P($G(^MAG(2005,CHILD1,0)),U,6)
"RTN","MAGXCVX",52,0)
 . S MAGVALS(6,"I")=$P(MAGNOD(0),U,8) ; procedure
"RTN","MAGXCVX",53,0)
 . S MAGVALS(8,"I")=$P(MAGNOD(2),U,2) ; image save by
"RTN","MAGXCVX",54,0)
 . S MAGVALS(10,"I")=$P(MAGNOD(2),U,4) ; short description
"RTN","MAGXCVX",55,0)
 . S MAGVALS(16,"I")=$P(MAGNOD(2),U,6) ; parent data file
"RTN","MAGXCVX",56,0)
 . S MAGVALS(100,"I")=$P(MAGNOD(100),U) ; descriptive category
"RTN","MAGXCVX",57,0)
 . ; get external values
"RTN","MAGXCVX",58,0)
 . I MAGVALS(3,"I") D
"RTN","MAGXCVX",59,0)
 . . S MAGVALS(3,"E")=$P($G(^MAG(2005.02,MAGVALS(3,"I"),0)),U)
"RTN","MAGXCVX",60,0)
 . . Q
"RTN","MAGXCVX",61,0)
 . S MAGVALS(6,"E")=MAGVALS(6,"I")
"RTN","MAGXCVX",62,0)
 . I MAGVALS(8,"I") S UTYPE=$$GET1^DIQ(200,MAGVALS(8,"I")_",",29,"E")
"RTN","MAGXCVX",63,0)
 . S MAGVALS(10,"E")=MAGVALS(10,"I")
"RTN","MAGXCVX",64,0)
 . I MAGVALS(16,"I") D
"RTN","MAGXCVX",65,0)
 . . S MAGVALS(16,"E")=$P($G(^MAG(2005.03,MAGVALS(16,"I"),0)),U)
"RTN","MAGXCVX",66,0)
 . . Q
"RTN","MAGXCVX",67,0)
 . I MAGVALS(100,"I") D
"RTN","MAGXCVX",68,0)
 . . S MAGVALS(100,"E")=$P($G(^MAG(2005.81,MAGVALS(100,"I"),0)),U)
"RTN","MAGXCVX",69,0)
 . . Q
"RTN","MAGXCVX",70,0)
 . U IO W MAGIEN F FLDNUM=10,6,16,100,3 W $C(9),$G(MAGVALS(FLDNUM,"E"))
"RTN","MAGXCVX",71,0)
 . W $C(9),$G(UTYPE)
"RTN","MAGXCVX",72,0)
 . S MAGDATA=$G(^XTMP("MAGIXCVGEN",MAGIEN))
"RTN","MAGXCVX",73,0)
 . W $C(9),$P(MAGDATA,U,2)
"RTN","MAGXCVX",74,0)
 . W $C(9) I $P(MAGDATA,U,3)'="" W $P(MAGDATA,U,3),"-",$P($G(^MAG(2005.82,$P(MAGDATA,U,3),0)),U)
"RTN","MAGXCVX",75,0)
 . W $C(9) I $P(MAGDATA,U,4)'="" W $P(MAGDATA,U,4),"-",$P($G(^MAG(2005.83,$P(MAGDATA,U,4),0)),U)
"RTN","MAGXCVX",76,0)
 . W $C(9) I $P(MAGDATA,U,6)'="" W $P(MAGDATA,U,6),"-",$P($G(^MAG(2005.84,$P(MAGDATA,U,6),0)),U)
"RTN","MAGXCVX",77,0)
 . W $C(9) I $P(MAGDATA,U,5)'="" W $P(MAGDATA,U,5),"-",$P($G(^MAG(2005.85,$P(MAGDATA,U,5),0)),U)
"RTN","MAGXCVX",78,0)
 . W $C(9) I $P(MAGDATA,U,7)'="" D  ; convert set-of-codes to external value
"RTN","MAGXCVX",79,0)
 . . S INT=$P(MAGDATA,U,7)
"RTN","MAGXCVX",80,0)
 . . D VAL^DIE(2005,"",45,"E",INT,.EXT)
"RTN","MAGXCVX",81,0)
 . . W INT_"-"_$G(EXT(0))
"RTN","MAGXCVX",82,0)
 . . Q
"RTN","MAGXCVX",83,0)
 . W !
"RTN","MAGXCVX",84,0)
 . Q
"RTN","MAGXCVX",85,0)
 U IO W "***end***",!
"RTN","MAGXCVX",86,0)
 U IO(0)
"RTN","MAGXCVX",87,0)
 D ^%ZISC G EXDONE
"RTN","MAGXCVX",88,0)
 ;
"RTN","MAGXCVX",89,0)
ERR ; Reached when an error (including end-of-file) occurs.
"RTN","MAGXCVX",90,0)
 D ^%ZISC
"RTN","MAGXCVX",91,0)
EXDONE S COUNT=COUNT+1
"RTN","MAGXCVX",92,0)
 I COUNT=1 W !,"Done exporting generated index values."
"RTN","MAGXCVX",93,0)
 Q
"SEC","^DIC",2005.81,2005.81,0,"DD")
@
"SEC","^DIC",2005.81,2005.81,0,"DEL")
@
"SEC","^DIC",2005.81,2005.81,0,"LAYGO")
@
"SEC","^DIC",2005.81,2005.81,0,"RD")
@
"SEC","^DIC",2005.81,2005.81,0,"WR")
@
"SEC","^DIC",2005.85,2005.85,0,"AUDIT")
@
"SEC","^DIC",2005.85,2005.85,0,"DD")
@
"SEC","^DIC",2005.85,2005.85,0,"DEL")
@
"SEC","^DIC",2005.85,2005.85,0,"LAYGO")
@
"SEC","^DIC",2005.85,2005.85,0,"RD")
@
"SEC","^DIC",2005.85,2005.85,0,"WR")
@
"VER")
8.0^22.0
"^DD",2005.81,2005.81,0)
FIELD^^45^12
"^DD",2005.81,2005.81,0,"DDA")
N
"^DD",2005.81,2005.81,0,"DT")
3030814
"^DD",2005.81,2005.81,0,"IX","B",2005.81,.01)

"^DD",2005.81,2005.81,0,"NM","MAG DESCRIPTIVE CATEGORIES")

"^DD",2005.81,2005.81,0,"PT",2005,100)

"^DD",2005.81,2005.81,0,"PT",2005.1,100)

"^DD",2005.81,2005.81,0,"VRPK")
MAG
"^DD",2005.81,2005.81,.01,0)
NAME^RF^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",2005.81,2005.81,.01,1,0)
^.1
"^DD",2005.81,2005.81,.01,1,1,0)
2005.81^B
"^DD",2005.81,2005.81,.01,1,1,1)
S ^MAG(2005.81,"B",$E(X,1,30),DA)=""
"^DD",2005.81,2005.81,.01,1,1,2)
K ^MAG(2005.81,"B",$E(X,1,30),DA)
"^DD",2005.81,2005.81,.01,3)
Answer must be 3-40 characters in length.
"^DD",2005.81,2005.81,.01,21,0)
^.001^4^4^3011206^^^^
"^DD",2005.81,2005.81,.01,21,1,0)
Descriptive name of the category or document type.  
"^DD",2005.81,2005.81,.01,21,2,0)
The list of categories is presented to the VistA Imaging Capture user
"^DD",2005.81,2005.81,.01,21,3,0)
when they select 'User defined Specialty/Category' or 'ADMIN'. 
"^DD",2005.81,2005.81,.01,21,4,0)
can be entered.
"^DD",2005.81,2005.81,.01,23,0)
^.001^2^2^3011206^^^^
"^DD",2005.81,2005.81,.01,23,1,0)
This file is pointed to by the IMAGE (2005) and IMAGE AUDIT (2005.1) Files.
"^DD",2005.81,2005.81,.01,23,2,0)

"^DD",2005.81,2005.81,.01,"DT")
3011206
"^DD",2005.81,2005.81,1,0)
CLASS^S^ADMIN:ADMIN;CLIN:CLIN;OLD:OLD;^0;2^Q
"^DD",2005.81,2005.81,1,21,0)
^^4^4^3011218^
"^DD",2005.81,2005.81,1,21,1,0)
This field indicates the class of document/image being captured.  Defined 
"^DD",2005.81,2005.81,1,21,2,0)
classes include Adminstrative (A) for scanned documents, Clinical (C) for 
"^DD",2005.81,2005.81,1,21,3,0)
images not associated with a VistA package report, or Old (O) for 
"^DD",2005.81,2005.81,1,21,4,0)
categories that are no longer used.
"^DD",2005.81,2005.81,1,"DT")
3011205
"^DD",2005.81,2005.81,10,0)
ACTION IS ACTIVE^S^1:YES;0:NO;^1;1^Q
"^DD",2005.81,2005.81,10,3)
The Action is performed on a successful save of an Image if this field is '1'
"^DD",2005.81,2005.81,10,21,0)
^^1^1^3011210^
"^DD",2005.81,2005.81,10,21,1,0)
The action associated with this type of Document is performed when the image is first successfully saved.  This flag can turn On/Off the processing of the Action.
"^DD",2005.81,2005.81,10,"DT")
3011210
"^DD",2005.81,2005.81,11,0)
ACTION DESC^F^^1;2^K:$L(X)>60!($L(X)<3) X
"^DD",2005.81,2005.81,11,3)
A short description of this action
"^DD",2005.81,2005.81,11,21,0)
^.001^3^3^3011218^^
"^DD",2005.81,2005.81,11,21,1,0)
This field indicates whether some software action will be taken when this 
"^DD",2005.81,2005.81,11,21,2,0)
type of image is captured.  For example, scanned MEANS TESTS will be 
"^DD",2005.81,2005.81,11,21,3,0)
automatically copied to a subdirectory at the HEC.
"^DD",2005.81,2005.81,11,"DT")
3011210
"^DD",2005.81,2005.81,12,0)
ACTION TAG^F^^1;3^K:$L(X)>8!($L(X)<2) X
"^DD",2005.81,2005.81,12,3)
Answer must be 2-8 characters in length.
"^DD",2005.81,2005.81,12,9)
@
"^DD",2005.81,2005.81,12,21,0)
^.001^1^1^3011218^^
"^DD",2005.81,2005.81,12,21,1,0)
The TAG of the Routine that will be called to perform the action.
"^DD",2005.81,2005.81,12,"DT")
3011210
"^DD",2005.81,2005.81,13,0)
ACTION ROUTINE^F^^1;4^K:$L(X)>8!($L(X)<2) X
"^DD",2005.81,2005.81,13,3)
Answer must be 2-8 characters in length.
"^DD",2005.81,2005.81,13,9)
@
"^DD",2005.81,2005.81,13,21,0)
^.001^1^1^3011218^^^
"^DD",2005.81,2005.81,13,21,1,0)
The routine to call to perform the action.
"^DD",2005.81,2005.81,13,"DT")
3011210
"^DD",2005.81,2005.81,40,0)
PACKAGE INDEX^S^RAD:RAD;LAB:LAB;MED:MED;NOTE:NOTE;CP:CP;SUR:SUR;CONS:CONS;PHOTOID:PHOTOID;NONE:NONE;^2;1^Q
"^DD",2005.81,2005.81,40,3)
The package associated with the image.
"^DD",2005.81,2005.81,40,21,0)
^^1^1^3020819^
"^DD",2005.81,2005.81,40,21,1,0)
This is an abbreviation of the package that the image is attached to.
"^DD",2005.81,2005.81,40,"DT")
3030203
"^DD",2005.81,2005.81,41,0)
CLASS INDEX^P2005.82'^MAG(2005.82,^2;2^Q
"^DD",2005.81,2005.81,41,21,0)
^^2^2^3020819^
"^DD",2005.81,2005.81,41,21,1,0)
The Classification of the images.  CLASS is an index field used for 
"^DD",2005.81,2005.81,41,21,2,0)
sorting and searching.
"^DD",2005.81,2005.81,41,"DT")
3030203
"^DD",2005.81,2005.81,42,0)
TYPE INDEX^P2005.83'^MAG(2005.83,^2;3^Q
"^DD",2005.81,2005.81,42,21,0)
^^1^1^3020819^
"^DD",2005.81,2005.81,42,21,1,0)
The TYPE of image.  TYPE is an index field used for sorting and searching.
"^DD",2005.81,2005.81,42,"DT")
3030203
"^DD",2005.81,2005.81,43,0)
PROC/EVENT INDEX^P2005.85'^MAG(2005.85,^2;4^Q
"^DD",2005.81,2005.81,43,21,0)
^^2^2^3020819^
"^DD",2005.81,2005.81,43,21,1,0)
The PROCEDURE/EVENT of the image.  PROCEDURE/EVENT is an index field used
"^DD",2005.81,2005.81,43,21,2,0)
for sorting and searching.
"^DD",2005.81,2005.81,43,"DT")
3030203
"^DD",2005.81,2005.81,44,0)
SPEC/SUBSPEC INDEX^P2005.84'^MAG(2005.84,^2;5^Q
"^DD",2005.81,2005.81,44,21,0)
^^2^2^3020819^
"^DD",2005.81,2005.81,44,21,1,0)
The SPECIALTY/SUBSPECIALTY of the image.  SPECIALTY/SUBSPECIALTY is an
"^DD",2005.81,2005.81,44,21,2,0)
index field used for sorting and searching.
"^DD",2005.81,2005.81,44,"DT")
3030203
"^DD",2005.81,2005.81,45,0)
ORIGIN INDEX^S^V:VA;N:NON-VA;^2;6^Q
"^DD",2005.81,2005.81,45,21,0)
^^2^2^3030814^
"^DD",2005.81,2005.81,45,21,1,0)
This field is used to indicate whether the image or document originated 
"^DD",2005.81,2005.81,45,21,2,0)
inside or outside VA.
"^DD",2005.81,2005.81,45,"DT")
3030814
"^DD",2005.85,2005.85,0)
FIELD^^4^5
"^DD",2005.85,2005.85,0,"DT")
3020823
"^DD",2005.85,2005.85,0,"IX","ACL",2005.85,1)

"^DD",2005.85,2005.85,0,"IX","B",2005.85,.01)

"^DD",2005.85,2005.85,0,"IX","C",2005.85,3)

"^DD",2005.85,2005.85,0,"NM","IMAGE INDEX FOR PROCEDURE/EVENT")

"^DD",2005.85,2005.85,0,"PT",2005,43)

"^DD",2005.85,2005.85,0,"PT",2005.03,43)

"^DD",2005.85,2005.85,0,"PT",2005.1,43)

"^DD",2005.85,2005.85,0,"PT",2005.81,43)

"^DD",2005.85,2005.85,0,"PT",2005.872,1)

"^DD",2005.85,2005.85,0,"PT",2005.8722,1)

"^DD",2005.85,2005.85,0,"VRPK")
MAG
"^DD",2005.85,2005.85,.01,0)
NAME^RF^^0;1^K:$L(X)>50!($L(X)<2)!'(X'?1P.E) X
"^DD",2005.85,2005.85,.01,1,0)
^.1
"^DD",2005.85,2005.85,.01,1,1,0)
2005.85^B
"^DD",2005.85,2005.85,.01,1,1,1)
S ^MAG(2005.85,"B",$E(X,1,30),DA)=""
"^DD",2005.85,2005.85,.01,1,1,2)
K ^MAG(2005.85,"B",$E(X,1,30),DA)
"^DD",2005.85,2005.85,.01,3)
Answer must be 2-50 characters in length.
"^DD",2005.85,2005.85,.01,21,0)
^^1^1^3020819^
"^DD",2005.85,2005.85,.01,21,1,0)
This field contains the procedure/event for the image being captured.  
"^DD",2005.85,2005.85,.01,"DT")
3020718
"^DD",2005.85,2005.85,1,0)
CLASS^P2005.82'^MAG(2005.82,^0;2^Q
"^DD",2005.85,2005.85,1,1,0)
^.1
"^DD",2005.85,2005.85,1,1,1,0)
2005.85^ACL
"^DD",2005.85,2005.85,1,1,1,1)
S ^MAG(2005.85,"ACL",$E(X,1,30),DA)=""
"^DD",2005.85,2005.85,1,1,1,2)
K ^MAG(2005.85,"ACL",$E(X,1,30),DA)
"^DD",2005.85,2005.85,1,1,1,"DT")
3020118
"^DD",2005.85,2005.85,1,21,0)
^^2^2^3020819^
"^DD",2005.85,2005.85,1,21,1,0)
This field points to the IMAGE INDEX FOR CLASS file.  Select the 
"^DD",2005.85,2005.85,1,21,2,0)
appropriate image class for the procedure being entered.
"^DD",2005.85,2005.85,1,"DT")
3020120
"^DD",2005.85,2005.85,2,0)
SPECIALTY^2005.852P^^1;0
"^DD",2005.85,2005.85,2,21,0)
^.001^3^3^3020819^^
"^DD",2005.85,2005.85,2,21,1,0)
This field points to the IMAGE INDEX FOR SPECIALTY/SUBSPECIALTY file.
"^DD",2005.85,2005.85,2,21,2,0)
Select the appropriate specialty for the procedure being entered; it is 
"^DD",2005.85,2005.85,2,21,3,0)
possible to have multiple specialties for one procedure.
"^DD",2005.85,2005.85,3,0)
ABBREVIATION^F^^2;1^K:$L(X)>5!($L(X)<2) X
"^DD",2005.85,2005.85,3,1,0)
^.1
"^DD",2005.85,2005.85,3,1,1,0)
2005.85^C
"^DD",2005.85,2005.85,3,1,1,1)
S ^MAG(2005.85,"C",$E(X,1,30),DA)=""
"^DD",2005.85,2005.85,3,1,1,2)
K ^MAG(2005.85,"C",$E(X,1,30),DA)
"^DD",2005.85,2005.85,3,1,1,"DT")
3021002
"^DD",2005.85,2005.85,3,3)
Answer must be 2-5 characters in length.
"^DD",2005.85,2005.85,3,21,0)
^^2^2^3020819^
"^DD",2005.85,2005.85,3,21,1,0)
Enter 2-5 characters abbreviation for the procedure. This can be used as
"^DD",2005.85,2005.85,3,21,2,0)
part of abstract label on image display.
"^DD",2005.85,2005.85,3,"DT")
3021002
"^DD",2005.85,2005.85,4,0)
STATUS^S^A:ACTIVE;I:INACTIVE;^0;3^Q
"^DD",2005.85,2005.85,4,21,0)
^^3^3^3020905^
"^DD",2005.85,2005.85,4,21,1,0)
This field is used to inactivate an entry in this file. It affects which
"^DD",2005.85,2005.85,4,21,2,0)
procedures / events can be selected in the filtering option of VistA
"^DD",2005.85,2005.85,4,21,3,0)
Imaging Display.
"^DD",2005.85,2005.85,4,23,0)
^^3^3^3020905^
"^DD",2005.85,2005.85,4,23,1,0)
This field is used to inactivate an entry in this file. It affects which
"^DD",2005.85,2005.85,4,23,2,0)
procedures / events can be selected in the filtering option of VistA
"^DD",2005.85,2005.85,4,23,3,0)
Imaging Display introduced in Patch 8.
"^DD",2005.85,2005.85,4,"DT")
3020905
"^DD",2005.85,2005.852,0)
SPECIALTY SUB-FIELD^^.01^1
"^DD",2005.85,2005.852,0,"DT")
3020120
"^DD",2005.85,2005.852,0,"IX","B",2005.852,.01)

"^DD",2005.85,2005.852,0,"NM","SPECIALTY")

"^DD",2005.85,2005.852,0,"UP")
2005.85
"^DD",2005.85,2005.852,.01,0)
SPECIALTY^MP2005.84^MAG(2005.84,^0;1^Q
"^DD",2005.85,2005.852,.01,1,0)
^.1
"^DD",2005.85,2005.852,.01,1,1,0)
2005.852^B
"^DD",2005.85,2005.852,.01,1,1,1)
S ^MAG(2005.85,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",2005.85,2005.852,.01,1,1,2)
K ^MAG(2005.85,DA(1),1,"B",$E(X,1,30),DA)
"^DD",2005.85,2005.852,.01,"DT")
3020120
"^DIC",2005.81,2005.81,0)
MAG DESCRIPTIVE CATEGORIES^2005.81
"^DIC",2005.81,2005.81,0,"GL")
^MAG(2005.81,
"^DIC",2005.81,2005.81,"%",0)
^1.005^1^1
"^DIC",2005.81,2005.81,"%",1,0)
MAG
"^DIC",2005.81,2005.81,"%","B","MAG",1)

"^DIC",2005.81,2005.81,"%D",0)
^1.001^24^24^3011217^^^
"^DIC",2005.81,2005.81,"%D",1,0)
 +---------------------------------------------------------------+
"^DIC",2005.81,2005.81,"%D",2,0)
 |                                                               |
"^DIC",2005.81,2005.81,"%D",3,0)
 | Property of the US Government.                                |
"^DIC",2005.81,2005.81,"%D",4,0)
 | No permission to copy or redistribute this software is given. |
"^DIC",2005.81,2005.81,"%D",5,0)
 | Use of unreleased versions of this software requires the user |
"^DIC",2005.81,2005.81,"%D",6,0)
 | to execute a written test agreement with the VistA Imaging    |
"^DIC",2005.81,2005.81,"%D",7,0)
 | Development Office of the Department of Veterans Affairs,     |
"^DIC",2005.81,2005.81,"%D",8,0)
 | telephone (301) 734-0100.                                     |
"^DIC",2005.81,2005.81,"%D",9,0)
 |                                                               |
"^DIC",2005.81,2005.81,"%D",10,0)
 | The Food and Drug Administration classifies this software as  |
"^DIC",2005.81,2005.81,"%D",11,0)
 | a  medical device.  As such, it may not be changed            |
"^DIC",2005.81,2005.81,"%D",12,0)
 | in any way.  Modifications to this software may result in an  |
"^DIC",2005.81,2005.81,"%D",13,0)
 | adulterated medical device under 21CFR820, the use of which   |
"^DIC",2005.81,2005.81,"%D",14,0)
 | is considered to be a violation of US Federal Statutes.       |
"^DIC",2005.81,2005.81,"%D",15,0)
 |                                                               |
"^DIC",2005.81,2005.81,"%D",16,0)
 +---------------------------------------------------------------+
"^DIC",2005.81,2005.81,"%D",17,0)
 
"^DIC",2005.81,2005.81,"%D",18,0)
 The purpose of this file is to present a standard list of Image 
"^DIC",2005.81,2005.81,"%D",19,0)
Categories to the user.
"^DIC",2005.81,2005.81,"%D",20,0)
 The user of the VistA Imaging Capture application is able to 
"^DIC",2005.81,2005.81,"%D",21,0)
select from this list during the capturing of images that are not
"^DIC",2005.81,2005.81,"%D",22,0)
associated with a specific VistA Package.
"^DIC",2005.81,2005.81,"%D",23,0)
This file is pointed to by the Image file (2005) and the Image
"^DIC",2005.81,2005.81,"%D",24,0)
Audit file (2005.1).
"^DIC",2005.81,"B","MAG DESCRIPTIVE CATEGORIES",2005.81)

"^DIC",2005.85,2005.85,0)
IMAGE INDEX FOR PROCEDURE/EVENT^2005.85
"^DIC",2005.85,2005.85,0,"GL")
^MAG(2005.85,
"^DIC",2005.85,2005.85,"%D",0)
^1.001^25^25^3020822^^
"^DIC",2005.85,2005.85,"%D",1,0)
 +---------------------------------------------------------------+
"^DIC",2005.85,2005.85,"%D",2,0)
 |                                                               |
"^DIC",2005.85,2005.85,"%D",3,0)
 | Property of the US Government.                                |
"^DIC",2005.85,2005.85,"%D",4,0)
 | No permission to copy or redistribute this software is given. |
"^DIC",2005.85,2005.85,"%D",5,0)
 | Use of unreleased versions of this software requires the user |
"^DIC",2005.85,2005.85,"%D",6,0)
 | to execute a written test agreement with the VistA Imaging    |
"^DIC",2005.85,2005.85,"%D",7,0)
 | Development Office of the Department of Veterans Affairs,     |
"^DIC",2005.85,2005.85,"%D",8,0)
 | telephone (301) 734-0100.                                     |
"^DIC",2005.85,2005.85,"%D",9,0)
 |                                                               |
"^DIC",2005.85,2005.85,"%D",10,0)
 | The Food and Drug Administration classifies this software as  |
"^DIC",2005.85,2005.85,"%D",11,0)
 | a medical device.  As such, it may not be changed in any way. |
"^DIC",2005.85,2005.85,"%D",12,0)
 | Modifications to this software may result in an adulterated   |
"^DIC",2005.85,2005.85,"%D",13,0)
 | medical device under 21CFR820, the use of which is considered |
"^DIC",2005.85,2005.85,"%D",14,0)
 | to be a violation of US Federal Statutes.                     |
"^DIC",2005.85,2005.85,"%D",15,0)
 |                                                               |
"^DIC",2005.85,2005.85,"%D",16,0)
 +---------------------------------------------------------------+
"^DIC",2005.85,2005.85,"%D",17,0)
 
"^DIC",2005.85,2005.85,"%D",18,0)
This file has all the possible procedures or procedural events that an 
"^DIC",2005.85,2005.85,"%D",19,0)
image can be associated with and will be used for indexing images.  The 
"^DIC",2005.85,2005.85,"%D",20,0)
PROCEDURE/EVENT associated with an image can be used in filters defined by 
"^DIC",2005.85,2005.85,"%D",21,0)
a clinician. 
"^DIC",2005.85,2005.85,"%D",22,0)
 
"^DIC",2005.85,2005.85,"%D",23,0)
This file is updated by Imaging and should not be edited on-site.
"^DIC",2005.85,2005.85,"%D",24,0)
Request for additions or modifications should be submitted to the Imaging
"^DIC",2005.85,2005.85,"%D",25,0)
Developers group.
"^DIC",2005.85,"B","IMAGE INDEX FOR PROCEDURE/EVENT",2005.85)

**END**
**END**
