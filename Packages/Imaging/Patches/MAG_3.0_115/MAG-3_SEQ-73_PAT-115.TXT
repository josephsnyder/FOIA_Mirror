
=============================================================================
Run Date: MAR 10, 2011                     Designation: MAG*3*115
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #73                      Status: Released
                  Compliance Date: APR 10, 2011
=============================================================================

Associated patches: (v)MAG*3*90    <<= must be installed BEFORE `MAG*3*115'

Subject: VISTARAD MAINTENANCE VI

Category: 
  - Routine
  - Data Dictionary
  - Other
  - Enhancement (Mandatory)

Description:
============

 Patch 115 Overview:
 ===================
 
 This document describes VistA Imaging Patch 115, the VistARad Maintenance VI 
 patch. 
 
 This patch introduces:
 ======================
 
      *  Provide support personnel some tools for VistARad user management
 
      *  Send a whole series or study to a MIRC server (instead of picking 
         specific images)
 
      *  Fix a problem with the MIRC Teaching Files exam abstract statement
 
      *  Move the line measurements to its own button
 
      *  Fix GUI interaction when terminating a freehand annotation
 
      *  Fixes to the scout line projection for cross sectional studies
 
      *  Apply Value Of Interest/Lookup Tables (VOI LUT)
 
      *  Provide a way to load excessively large individual Image Sets
 
      *  Support VistA Imaging Exchange (VIX) logging of the 
         VistARad-generated transaction identifier to the IMAGE ACCESS LOG 
         file (#2006.95).
 
 For detailed information, see section Patch 115 Changes.
 
 NOTE   All sites running VistA Imaging 3.0 must install the KIDS portion of 
        this patch.
 
 NOTE   Sites running VistARad must install all software components of this 
        patch. The Patch 115 KIDS is backwards-compatible with the Patch 90 
        client software; installation of the client software may be phased in
        according to each site's needs. 
 
 Distribution of Software:
 =========================
 
 Sites that have implemented VistARad can download this patch from the Imaging
 FTP server at: 
 
        ftp.imaging.med.va.gov/Software/Sites/<yoursite>/MAG3_0P115
 
 Sites that have not implemented VistARad can download the KIDS-only portion of
 this patch from:
 
        ftp.imaging.med.va.gov/Software/Released_Software/MAG3_0P115_KIDS_ONLY
 
 Installation instructions are included in section Installation Instruction.
 
 NOTE   Any late-breaking news about this patch will be found in a readme 
        file. If present, this file will also be located in the distribution 
        directory on the Imaging FTP server (as described above).
  
 Patch Contents:
 ===============
 
 This patch includes the following files:
 ========================================
 
 Software:
 =========
 
 MAG3_0P115.KID - KIDS (Kernel Installation & Distribution System) package to 
 be installed on the VistA System.
 
 MAG3_0P115_VistARad_Setup.exe - Client software to be installed on VistARad 
 workstations. 
 
 Documentation:
 ==============
 
 MAG3_0P115_Patch_Description.pdf - Patch Description.
 
 MAG3_0P115_Install_Guide_Changes.pdf - Revised Installation Guide sections 
 for this patch.
 
 MAG3_0P115_Technical_Manual_Changes.pdf - Revised Technical Manual sections 
 for this patch. 
 
 MAG3_0P115_Security_Guide_Changes.pdf - Revised Security Guide pages for this
 patch.
 
 MAG_VistARad_User_Guide.pdf - Revised VistARad User Guide. 
 
 MAG_vrad_QSG.pdf - Revised VistARad Quick Start Guide.
 
 MAG_Vrad_Quick_Ref.pdf - Revised VistARad Quick Reference Card.
 
 MAG_vrad_Shortcuts.pdf - VistARad keyboard shortcut reference. 
 
 MAG_VIX_admin_guide.pdf - Revised VIX Administrator s Guide. 
 
 Associated Patch(es):
 =====================
 
 Before Patch 115 is installed, the following patch(es) must be installed:
 
        MAG*3.0*90 
 
 For a list of all released Imaging patches, refer to the patch_list.txt file 
 available at ftp://ftp.imaging.med.va.gov/Docs/Imaging_Docs_Latest.
 
 Test Sites:
 ===========
 
 The following are test sites for this patch:
 ============================================
 
 Baltimore, MD (Integrated)
 Charleston, SC (Large)
 Fayetteville, NC (Large)
 Little Rock, AR (Large)
 New Orleans, LA (Large)
 Oklahoma City, OK (Large)
 Tucson, AZ (Large)
 
 Remedy Calls:
 =============
 
 Remedy #177146  Cleveland VAMC reports that VistARad is unable to load very 
                 large CT studies structured as a single series. The studies are
                 500 to 1000 slices on average, with some at a 1024 matrix 
                 (~2mb/slice).
        
 NSRs:
 =====
 
 There are no NSRs (New Service Requests) associated with this patch.
  
 Patch 115 Changes:
 ==================
 
 Patch 115 includes changes to the VistARad workstation software and to 
 Imaging-related routines on the VistA host.
 
 VistARad Workstation Software Changes:
 ======================================
 
 Provide support personnel some tools for VistARad user management:
 ==================================================================
 
 The "Open with  dialog now filters out users that are inactive or terminated.
 The system provides a user function to copy a "default profile" to copy 
 settings/hanging protocols to brand new users, giving support personnel a 
 more convenient means to configure and orient new users.  
 
 Send a whole series or study to a MIRC server:
 ==============================================
 
 This change in the teaching file system interface allows the user to select 
 an entire series or study and send it to a MIRC server in one interaction.
 
 Fix MIRC Teaching files abstract statement:
 ===========================================
 
 The MIRC exam abstract statement may repeat multiple times, showing 
 duplicated text on the "document" tab. This has been corrected.
 
 Move the line measurement function to its own button:
 =====================================================
 
 The line measurement button used to be a drop-down item on the measurement 
 button. With this patch, the line measurement function is accessible using 
 an individual toolbar button.
 
 Fix GUI interaction when terminating a freehand tool annotation:
 ================================================================
 
 Previously, using the right-click to terminate a freehand annotation would 
 place the tool in a mode to initiate drawing a new freehand annotation. Now, 
 terminating the annotation places the tool in the edit mode so that edit 
 adjustments can be made to the just-drawn annotation.
 
 Fixes to the scout line projection for cross sectional studies:
 ===============================================================
 
 In previous versions of the workstation the slice line projection only worked 
 on images that were designated as scout images, creating a problem when new 
 series were dropped into a viewport. The fix allows the slice projection of 
 intersecting images to occur for images that have not been explicitly 
 designated as scouts. This is the default behavior, but can be un-defaulted 
 by the user from a drop-down on the right of the Scout Window button.
 
 Apply Value Of Interest/Lookup Tables (VOI LUT):
 ================================================
 
 If an image contains a VOI LUT it is applied as the default presentation of 
 the image; a new icon is placed on the image to indicate the presence of 
 VOI LUT information. Window level adjustments applied to the image will 
 nullify the effects of the VOI LUT. To re-apply the VOI LUT the user can use 
 the Reset Image option, or select the VOI LUT value from a context menu hosted 
 on the new icon.
 
 Loading excessively large image sets:
 =====================================
 
 This change will allow a single image set that is too large to load to be 
 sub-divided into smaller image sets, which will load and display using existing
 Preview window features for managing large exams (c.f., Remedy #177146).
 
 VistA System Changes:
 =====================
 
 Data Dictionaries:
 ==================
 
 Two new fields have been added to the IMAGING SITE PARAMETERS file (#2006.1):
 
      DEFAULT VISTARAD USERPREF RAD field (#202) - New. Points to a reference 
      MAGJ USER DATA file (#2006.68) entry which will serve as the default for
      initializing new radiologist's profiles.
 
      DEFAULT VISTARAD USERPREF NON field (#203) - New. Points to a reference 
      MAGJ USER DATA file (#2006.68) entry which will serve as the default for
      initializing new NON-radiologist's profiles.
 
 Security Keys:
 ==============
 
 This patch contains no Security Key changes.
 
 Remote Procedures:
 ==================
 
 This patch contains no new Remote Procedure Calls (RPCs). The following 
 Remote Procedure Call was modified:
 
 MAGJ VIX LOG REMOTE IMG ACCESS now accepts an eighth ^-piece in the DATA 
 parameter. This piece holds a unique VistARad transaction identifier which 
 the VistA Imaging Exchange (VIX) server logs in the ADDITIONAL DATA field 
 (#100) of the IMAGE ACCESS LOG file (#2006.95).
 
 Menu Options:
 =============
 
 The following menu options are included in this patch:
 
 E/E VistARad Default User Profiles [MAGJ E/E DEFAULT USER PROFILES]
 
 Adds a new menu option to the VistARad System Options menu [MAGJ MAIN], 
 allowing the system administrator to define default user profile entries for 
 radiologist and non-radiologist user types.
 
 VistARad System Options [MAGJ MAIN]
 
 Used only as a link to add the above new menu option.
 
 Templates:
 ==========
 
 This patch contains no new or modified templates.
  
 Installation:
 =============
 
 This patch is to be installed on the VistA System and on VistARad 
 workstations.
 
 NOTE    All sites running VistA Imaging 3.0 must install the KIDS portion of 
         this patch.
 
 NOTE    Sites running VistARad must install all software components of this 
         patch. The Patch 115 KIDS is backwards-compatible with the Patch 90 
         client software; installation of the client software may be phased in
         according to each site s needs.
 
 All VistARad users must log out before the KIDS portion of this patch is 
 loaded. Other VistA Imaging operations may continue.
 
 Installation of the KIDS will take less than one minute. Installation of the 
 workstation software will take about one to three minutes per workstation, 
 depending on hardware. 
 
 Installation Prerequisites:
 ===========================
 
 Before installing this patch, you will need to download the Patch 115 files 
 from the Imaging FTP site to a local storage location.
 
 Verify that all clients have Adobe Reader 6.0 or higher installed.
 
 Verify that the patch(es) listed in the Associated Patch(es) section have 
 been installed.
 
 VistA System (KIDS) Installation:
 =================================
 
 NOTE    This KIDS file includes an environment check that will automatically 
         disable background exam list compiles during the installation process. 
         After the KIDS installation is complete, compiles will be automatically
         re-enabled.
  
 Installing the KIDS Package:
 ============================
 
 1.  Ensure all users log off all VistARad workstations. 
 
 2.  Log in to VistA and access the Kernel Installation and Distribution 
     System Menu [XPD MAIN].
 
 3.  Run the Installation option [XPD INSTALLATION MENU].
 
 4.  Load the KIDS file by performing the following steps.
 
     a.  Run the Load a Distribution option [XPD LOAD DISTRIBUTION] to load the 
         KIDS distribution.
 
     b.  When prompted, enter the path and file name (MAG3_0P115.KID) of the 
         Patch 115 KIDS file that you downloaded from the Imaging FTP server.
 
     c.  When prompted to continue with the load, enter YES. A Distribution 
         OK! message will be displayed when the load is complete.
 
 5.  After loading the KIDS file, use the following options to verify the 
     contents of the patch and to back up any affected routines.
 
     *  Verify Checksums in Transport Global [XPD PRINT CHECKSUM] - Run this 
        option if you want to ensure the integrity of the routines in the 
        patch. 
 
     *  Compare Transport Global to Current System [XPD COMPARE TO SYSTEM] -   
        Run this option if you want to view all changes that will be made when
        the patch is installed. All components (routines, options, and so on) 
        in the patch will be compared.
 
     *  Backup a Transport Global [XPD BACKUP] - Run this option if you want 
        to create a backup message of any routines exported with the patch. It
        will not back up any of the other changes.
 
 6.  After performing the load and any optional verification steps, install 
     the KIDS file by performing the following steps: 
 
     a.  Run the Install Package(s) [XPD INSTALL BUILD] option.
     
     b.  When prompted for the install name, enter MAG*3.0*115.
 
     c.  Answer NO to the following prompts:
 
       Want KIDS to Rebuild Menu Trees Upon Completion of Install? No//NO
       Want KIDS to INHIBIT LOGONs during the install? No//NO
       Want to DISABLE Scheduled Options, Menu Options, and Protocols? No//NO
 
 7.  When installation is finished, an Install Complete message will be 
     displayed.
 
 Sample KIDS Installation:
 =========================
 
     1  Load a Distribution
     2  Verify Checksums in Transport Global
     3  Print Transport Global
     4  Compare Transport Global to Current System
     5  Backup a Transport Global
     6  Install Package(s)
        Restart Install of Package(s)
        Unload a Distribution
 
 Select Installation Option: INStall Package(s)
 Select INSTALL NAME:    MAG*3.0*115     Loaded from Distribution  
 12/17/10@14:40:43
      => VistA Imaging V3.0 - Patch 115 - 12/17/2010 12:50PM  ;Created o
 
 This Distribution was loaded on Dec 17, 2010@14:40:43 with header of 
    VistA Imaging V3.0 - Patch 115 - 12/17/2010 12:50PM  ;Created on 
 Dec 17, 2010@12:50:59
    It consisted of the following Install(s):
     MAG*3.0*115
 Checking Install for Package MAG*3.0*115
 Will first run the Environment Check Routine, MAGJMN1
 
 Install Questions for MAG*3.0*115
 
 Incoming Files:
 
    2006.1    IMAGING SITE PARAMETERS  (Partial Definition)
 Note:  You already have the 'IMAGING SITE PARAMETERS' File.
 
 Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO// 
 
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
 
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
 
 DEVICE: HOME//   TELNET
  
  Install Started for MAG*3.0*115 : 
                Dec 17, 2010@14:40:50
  
 Build Distribution Date: Dec 17, 2010
  
  Installing Routines:
                Dec 17, 2010@14:40:51
  
  Installing Data Dictionaries:
                Dec 17, 2010@14:40:51
  
  Installing PACKAGE COMPONENTS: 
  
  Installing REMOTE PROCEDURE
 
  Installing OPTION
                Dec 17, 2010@14:40:51
  
  Running Post-Install Routine: POSTINST^MAGJMN1   
 
 Background Compile Enabled.
  
  Updating Routine file...
 
  Updating KIDS files...
 
  MAG*3.0*115 Installed. 
                Dec 17, 2010@14:40:54
  
  Install Message sent #32436
 
 Install Completed
 
 VistARad Client Installation:
 =============================
 
 The following steps can be used to install VistARad for the first time, or to
 update a workstation that is running VistARad Patch 90 (or Patch 101) to 
 VistARad Patch 115. Installation should take one to three minutes.
 
 NOTE    If any other versions of VistARad are installed (such as Patch 76), 
         use Add/Remove Programs in the Windows Control Panel to remove 
         VistARad before using the steps below.
 
 1.  Log in to the workstation as an administrator, and ensure that no other 
     programs are running. 
 
 2.  Double-click MAG3_0P115_VistARad_Setup.exe to start the installation 
     wizard. There will be a brief delay as the installation files are 
     extracted.
 
 NOTE   There are no configurable installation options. VistARad will be 
        installed in:
 
     C:\Program Files\VistA\Imaging\MAG_VistARad
 
 3.  If you are updating from Patch 90 (or Patch 101) to Patch 115, perform the 
     steps below (workstation-specific configuration files will be retained):
 
     a.  When the Welcome page appears, click Next. 
   
     b.  When the Ready to Install page displays, click Install.
 
     c.  When you are informed that Patch 90 (or Patch 101) must be removed, 
         click Yes.
 
     d.  When you are prompted to confirm the removal of VistARad, click Yes 
         again.
 
     e.  When you are informed that VistARad has been uninstalled, click OK.
 
     f.  Installation of Patch 115 will start automatically. After installation 
         is complete, click Finish to exit the wizard.
  
 4.  If you are installing Patch 115 for the first time, perform the steps below:
 
     a.  When the Welcome page appears, click Next. 
 
     b.  When the Ready to Install page displays, click Install.
 
     c.  After installation is complete, click Finish to exit the wizard.
 
 5. You may be prompted to re-start your workstation in order for the 
    configuration changes to take effect. In this case, answer "Yes" to be sure 
    this step is complete.
 
 6. Use the VistARad shortcut on the desktop or in Windows Start menu (Start 
    | Programs | VistA Imaging Programs | MAG_VistARad_Patch115) to start 
    VistARad.
 
 7.  From the Help | About menu, verify that the software client version is 
     3.0.115.4
 
 Routines:
 =========
 
 For each routine, the second line will contain the following information. 
 Please note that the "before  checksum may differ if any test software has 
 been installed.
 
    ;;3.0;IMAGING;**[patch_list]**;Mar 19, 2002;Build 1912;Dec 17, 2010
 
 New and modified routines for the VistA System are listed below. Checksums 
 are calculated using the KERNEL utility program CHECK1^XTSUMBLD.
 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGJEX1
    Before: B86728330   After: B78821225  **16,22,18,65,101,115**
Routine Name: MAGJMN1
    Before: B92377689   After:B100385788  **16,9,22,18,65,76,101,90,115**
Routine Name: MAGJPRF1
    Before: B77283408   After:B142578165  **18,115**
Routine Name: MAGJTU4V
    Before:  B4996119   After:  B4995092  **90,115**
Routine Name: MAGJUTL5
    Before: B33141001   After: B33147179  **65,76,101,90,115**
Routine Name: MAGJVAPI
    Before: B13867025   After: B15026041  **90,115**
 
Routine list of preceding patches: 90

=============================================================================
User Information:
Entered By  : TROMBETTA,KATHY               Date Entered  : JUL 13, 2010
Completed By: CASUGAY,ELSIE G               Date Completed: FEB 15, 2011
Released By : RAYNO,WILLIAM                 Date Released : MAR 10, 2011
=============================================================================


Packman Mail Message:
=====================

No routines included
