
=============================================================================
Run Date: DEC 13, 2019                     Designation: MAG*3*238
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3       SEQ #184                      Status: Released
                  Compliance Date: JAN 13, 2020
=============================================================================


Subject: Background Processor Defects

Category: 
  - Routine

Description:
============

 Description:
  
 This document describes MAG*3.0*238, a patch that provides fixes to the 
 BACKGROUND PROCESSOR (BP). This patch addresses the following issues:
 1.  BP Purge does not check the file sizes before deleting
 2.  BP Queue Processor has wrong erroneous line on the Help>Version window
  
 Associated Patches: 
 VistA Imaging MAG*3.0*238 must be installed after MAG*3.0*235.
  
 Patch Components:
 -----------------
 MAG3_0P238.KID - Kernel Installation and Distribution System (KIDS) build 
 for Patch 238 - New
  
 MAG3_0P238_Background_Processor_Setup.exe - Background Processor Client 
 Installation File - New
  
 MAG3_0P238_DIBORG.pdf - Background Processor Deployment, Installation, 
 Back-Out, and Rollback Guide - New
  
 MAG_BP_USER_MANUAL.pdf - Background Processor User Manual - New
  
  
 Files & Fields Associated:
  
 File Name (Number)          Field Name (Number)       New/Modified/Deleted
 ------------------          -------------------       --------------------
 N/A
  
 Forms Associated:
  
 Form Name                   File Number               New/Modified/Deleted
 ---------                   -----------               --------------------
 N/A
  
 Mail Groups Associated:
  
 Mail Group Name             New/Modified/Deleted
 ---------------             --------------------
 N/A
  
 Options Associated:
  
 Option Name                 Type                      New/Modified/Deleted
 -----------                 ----                      --------------------
 N/A
  
 Protocols Associated:
  
 Protocol Name               New/Modified/Deleted
 -------------               --------------------
 N/A
  
 Security Keys Associated: 
  
 Security Key Name
 -----------------
 N/A
  
 Templates Associated:
  
 Template Name         Type    File Name (Number)      New/Modified/Deleted
 -------------         ----    ------------------      --------------------
 N/A
  
 Remote Procedures Associated:
  
 Remote Procedure Name       New/Modified/Deleted
 ---------------------       --------------------
 N/A
  
 Parameter Definitions Associated:
  
 Parameter Name              New/Modified/Deleted
 --------------              --------------------
 N/A
  
 Additional Information:
 -----------------------
  
 Blood Bank Team Coordination:
 N/A
  
 New Service Requests (NSRs):
 N/A
  
 Patient Safety Issues (PSIs):
 N/A
  
 Defect Tracking System Ticket(s) & Overview:
  
 1. Defect 926376 (Trouble Ticket # INC4002914) BP Purge does not check 
 the file sizes before deleting
  
 Problem:
 --------
 The Background Processor User Manual states that the Purge utility will 
 perform a size check on an image between Tier 1 and Tier 2, prior to 
 deleting the image from Tier 1, but the Purge Utility is not functioning 
 this way.
 Section 6.4 in the BP User manual: When the purge finds a file that is a 
 candidate for deletion based on the file date option selected, it first 
 checks to make sure the file is on Tier 2 and has the same file properties
 (size, etc.).  
  
 Resolution:
 -----------
 Updated the Purge utility to compare the file sizes on Tier 1 and Tier 2 
 prior to deleting.  If the file sizes are different the image is not 
 purged, and an email is sent to the Image_File_Size_Variance mail group.
  
 2. Defect 969224 BP Queue Processor has wrong erroneous line on the 
 Help>Version window
  
 Problem:
 --------
 When selecting the menu options Help>Version, a window is displayed that 
 shows the versions for all Background Processor components. On the window 
 there is an erroneous line for a file that does not exist: C:\Program 
 Files (x86)\vista\imaging\backproc\magbtm196.exe. 
  
 Resolution:
 -----------
 The code was modified to remove the erroneous line from displaying on the 
 versions window.
  
  
 Test Sites:
 -----------
 Lebanon VA Medical Center
 North Florida/South Georgia Veterans Health System 
  
  
 Software and Documentation Retrieval Instructions:
 --------------------------------------------------
 Documentation describing the new functionality and/or a host file
 containing a build may be included in this release.
  
 Sites may retrieve the software and/or documentation directly using Secure
 File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directory on
 download.vista.domain.ext
  
 Documentation can also be found on the VA Software Documentation Library
 at: https://www.domain.ext/vdl/
  
  
 Patch Installation:
 -------------------
 Supported Client Versions:
  
 When MAG*3.0*238 is released, the list of supported versions of 
 Background Processor will change:
  
 Client Versions Supported:
   3.0.238
   3.0.235
   3.0.222
  
 Client Versions No Longer Supported:
   3.0.214
   3.0.198
   3.0.196
   3.0.135
  
 Pre/Post Installation Overview:
 MAG*3.0*238 must be installed on the VistA System prior to running the new
 executables. This patch must be installed by the compliance date. All
 sites running VistA Imaging 3.0 must install the KIDS portion of this
 patch. This patch may be loaded while the VistA Imaging System is active. 
 Installation will take less than one minute.
  
 Important: Any BP applications (including Processor, Verifier, and Purge)
 that are running must be stopped and closed prior to the installation of
 the KIDS and Client software. Any image capture application (Clinical 
 Capture and DICOM Gateway processing) or display application (Clinical
 Display and Telereader) can continue to run during the installation.
  
 Pre-Installation Instructions:
 Please refer to the Deployment, Implementation, Back-Out, and Rollback 
 Guide (MAG3_0P238 DIBORG.pdf) for Pre-Installation instructions.
  
  
 Installation Instructions:
 Please refer to the Deployment, Implementation, Back-Out and Rollback 
 Guide (MAG3_0P238 DIBORG.pdf) for Installation instructions.
  
 Post-Installation Instructions:
 Restart all Background Processor applications that were stopped for 
 installation.
  
 Installing the BP Client:
 Please refer to the Deployment, Implementation, Back-Out and Rollback 
 Guide (MAG3_0P238 DIBORG.pdf) for Client Installation instructions.
  
  
 Back-Out/Roll Back Plan:
 ------------------------
 Please refer to the Deployment, Implementation, Back-Out and Rollback 
 Guide (MAG3_0P238 DIBORG.pdf) for Client Installation instructions.
  
 Routine Information:
  
 VistA KIDS Checksums
  
 This section lists modified routines for the VistA KIDS build. For each 
 routine, the second line will contain the following information: 
  
 ;;3.0;IMAGING;**[Patch List]**;Mar 19, 2002;Build 7
  
 CHECK1^XTSUMBLD is used to generate the checksums.
  
 Routine Checksums
  
 Routine           Checksum         Checksum        Patch List
                   Before           After
 MAGQBUT4          97826311         97831307        **7,8,48,20,81,39,121,
                                                    135,196,198,214,222,235,238**
 MAGIP238          NEW              4110433         **238**
  
  
  
 Routine MAGIP238 is an installation routine that is automatically deleted 
 after the KIDS installation.                                          

Routine Information:
====================
The second line of each of these routines now looks like:
;;3.0;IMAGING;**[Patch List]**;Mar 19, 2002;Build 7

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGIP238
    Before:       n/a   After:  B4110433  **238**
Routine Name: MAGQBUT4
    Before: B97826311   After: B97831307  **7,8,48,20,81,39,121,135,196,
                                           198,214,222,235,238**
 
Routine list of preceding patches: 235

=============================================================================
User Information:
Entered By  :                               Date Entered  : FEB 22, 2019
Completed By:                               Date Completed: NOV 25, 2019
Released By :                               Date Released : DEC 13, 2019
=============================================================================


Packman Mail Message:
=====================

No routines included
