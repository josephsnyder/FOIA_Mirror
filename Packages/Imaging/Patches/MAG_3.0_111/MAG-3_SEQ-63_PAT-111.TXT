
=============================================================================
Run Date: MAY 06, 2010                     Designation: MAG*3*111
Package : MAG - IMAGING                       Priority: Mandatory
Version : 3        SEQ #63                      Status: Released
                  Compliance Date: JUN 06, 2010
=============================================================================

Associated patches: (v)XWB*1.1*53  <<= must be installed BEFORE `MAG*3*111'
                    (v)XU*8*523    <<= must be installed BEFORE `MAG*3*111'

Subject: Broker Security Enhancements

Category: 
  - Enhancement (Mandatory)
  - Routine

Description:
============

 This document describes MAG*3.0*111 VistA Imaging Broker Security 
 Enhancement (BSE).
  
 This patch is the first step in implementing the Broker Security 
 Enhancement (BSE).  BSE will be the required method for authenticating a
 connection to a remote VA site.  This patch provides the necessary
 databases entries which will be used by VistA Imaging applications in
 future patches for secure authentication.  Entries into the database are
 made in this patch on behalf of the following VistA Imaging applications:
  
  * VistA Imaging Clinical Display
  * VistA Imaging TeleReader
  * VistA Imaging Exchange (VIX) Service
  * VistA Imaging VistARad
  
 This patch also provides a Remote Procedure Call (RPC) that provides BSE 
 tokens for use by VistA Imaging applications which require connections to 
 remote VA sites for Imaging Clinical Display, TeleReader, VIX and
 VistARad  with VIX.
  
 Note: After installing this patch, sites will not see a change in 
 behavior.  Applications that use the functionality included in this patch
 will be released at a later date.
  
 Distribution of Software
 ========================
  
 This patch can be downloaded from:
  
 ftp.imaging.med.va.gov/Software/Released_Software/Mag3_0P111
  
 Installation instructions are included in this document.
  
 Patch Contents
 ==============
  
 This patch includes the following files:
  
 MAG3_0P111.KID    KIDS (Kernel Installation & Distribution System) 
                   package to be installed on the VistA system.
  
 MAG3_0P111_Patch_Description.pdf - VistA Imaging Patch Description
  
 Required Patches
 ================
  
 Before MAG*3.0*111 is installed, the following patches must be installed:
 Kernel Patches # XWB*1.1*53 and XU*8*523
  
 For a list of all released Imaging (MAG) patches, refer to the 
 patch_list.txt file available on the Imaging FTP server (go to
 ftp://ftp.imaging.med.va.gov, then navigate to the
 \Docs\Imaging_Docs_Latest folder).
  
 Test Sites
 ==========
  
 The following sites are test sites for this patch:
  
 Baltimore, MD (Integrated)
 Charleston, SC (Large)
 El Paso, TX (Medium)
 Fayetteville, NC (Medium)
 Phoenix, AZ (Medium)
 Prescott, AZ (Large)
 Washington DC (Large)
  
 Remedy Calls
 ============
  
 There are no Remedy calls assigned to this patch.
  
 E3R Entries/NSR 
 ===============
  
 There are no E3R (Electronic Error and Enhancement Report)/ NSR (New 
 Service Request) entries addressed in this patch.
  
 MAG*3.0*111 Summary of Changes
 ==============================
  
 During the Post Installation process, Patch MAG*3.0*111 adds 4 entries 
 into the file REMOTE APPLICATION (#8994.5) in the VistA Database to allow
 BSE enabled VistA Imaging applications to authenticate properly. Also this
 patch installs a new RPC that requests a BSE token for use by Imaging
 applications.
  
 Data Dictionaries
 =================
  
 There are no new or modified data dictionaries included in this patch.
  
 Security Keys
 =============
  
 There are no new or modified security keys included in this patch.
  
 Remote Procedure Calls
 ======================
  
 MAG*3.0*111 adds the following remote procedure calls:
  
        MAG BROKER SECURITY
  
 Menu Options
 ============
  
 There are no new or modified menu options included in this patch.
  
 Input Templates
 ===============
  
 There are no new or modified templates included in this patch.
  
 KIDS Installation Instructions
 ==============================
  
 This patch is to be installed on the VistA System. This patch can be 
 installed while the system is active. Image acquisition need not be
 stopped to install this patch.
  
 Installation Prerequisites
 ==========================
  
 The installation of this patch should take less than one minute. Before 
 installing this patch, you will need to download the MAG*3.0*111 files
 from the Imaging FTP site to a local storage location.
  
 Verify that the patches listed in the Required Patches Section have been 
 installed.
  
 Kernel Patch  - XWB*1.1*53 
                 XU*8.0*523
  
 Installing the KIDS Package 
 ===========================
  
 1. Access the Kernel Installation & Distribution System [XPD MAIN] menu.
  
 2. Run the Installation option [XPD INSTALLATION MENU] option.
  
 3. Load the KIDS file by performing the following steps.
  
    a. Run the Load a Distribution option [XPD LOAD DISTRIBUTION] to 
       load the KIDS distribution.
    b. When prompted, enter the path and file name (MAG3_0P111.KID) of the 
       Patch 111 KIDS file that you downloaded from the Imaging FTP server.
    c. When prompted to continue with the load, enter YES.  
       A Distribution OK! message will be displayed when the load is
       complete.
    d. When prompted to run the environment check routine, press Enter to 
       confirm the default answer.
  
 4. After loading the KIDS file, use the following options to verify the 
    contents of the patch and to back up any affected routines.
  
    Verify Checksums in Transport Global [XPD PRINT CHECKSUM] run this 
    option if you want to ensure the integrity of the routines in the
    patch. 
  
    Compare Transport Global to Current System [XPD COMPARE TO SYSTEM]   
    run this option if you want to view all changes that will be made when
    the patch is installed.  All components (routines, options, and so on)
    in the patch will be compared.
  
    Backup a Transport Global [XPD BACKUP]   run this option if 
    you want to create a backup message of any routines exported with the 
    patch.  
  
    It will NOT back up any of the other changes.
  
 5. After performing the load and any optional verification steps, install 
    the KIDS file by performing the following steps:
  
    a. Run the Install Package(s) [XPD INSTALL BUILD] option.
    b. When prompted for the install name, enter MAG*3.0*111.
    c. If prompted, answer NO to the following prompt:
  
       Want KIDS to Rebuild Menu Trees Upon Completion of Install? NO//NO
  
    d. If prompted, answer NO to the following prompts:
  
       Want KIDS to INHIBIT LOGONs during the install? No//NO
       Want to DISABLE Scheduled Options, Menu Options, and Protocols? 
       No//NO
  
       Enter the Device you want to print the Install messages.
  
       You can queue the install by enter a 'Q' at the device prompt.
       Enter a '^' to abort the install.
  
       DEVICE: HOME//
  
 6. When installation is finished, an Install Complete message will be 
    displayed.
  
 KIDS Installation Example
 =========================
  
    1      Load a Distribution
    2      Verify Checksums in Transport Global
    3      Print Transport Global
    4      Compare Transport Global to Current System
    5      Backup a Transport Global
    6      Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
  
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: MAG*3.0*111       Loaded from Distribution  
 3/29/10@08:12:46
      => VistA Imaging V3.0 - Patch 111 - 09/28/2009 17:22PM  ;Created on 
 Sep 2
  
 This Distribution was loaded on Mar 29, 2010@08:12:46 with header of 
    VistA Imaging V3.0 - Patch 111 - 09/28/2009 17:22PM  ;Created on Sep 
 28, 2009
 @17:22:38
    It consisted of the following Install(s):
     MAG*3.0*111
 Checking Install for Package MAG*3.0*111
  
 Install Questions for MAG*3.0*111
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? NO//
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO//
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   HERE
  
  
  Install Started for MAG*3.0*111 :
                Sep 14, 2009@10:23:07
  
 Build Distribution Date: Sep 10, 2009
  
  Installing Routines:...
                Sep 14, 2009@10:23:07
  
  Installing PACKAGE COMPONENTS:
  
  Installing REMOTE PROCEDURE..
                Sep 14, 2009@10:23:07
  
  Running Post-Install Routine: POS^MAGIP111.
 I will check the 'IMAGING' entry in the REMOTE APPLICATION file.******
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  MAG*3.0*111 Installed.
                Sep 14, 2009@10:23:07
  
  Install Message sent #30953

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGIP111
    Before:       n/a   After:  B7785590  **111**
Routine Name: MAGS2BSE
    Before:       n/a   After:  B3731702  **111**

=============================================================================
User Information:                          Hold Date     : MAY 01, 2010
Entered By  : IBRAGIMOVA,LAYLA              Date Entered  : OCT 08, 2009
Completed By: TROMBETTA,KATHY               Date Completed: APR 01, 2010
Released By : MASSEY,DAVID                  Date Released : MAY 06, 2010
=============================================================================


Packman Mail Message:
=====================

No routines included
