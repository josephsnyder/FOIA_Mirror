
=============================================================================
Run Date: MAR 03, 2009                     Designation: MAG*3*103
Package : MAG - IMAGING                       Priority: EMERGENCY
Version : 3        SEQ #59                      Status: Released
                  Compliance Date: MAR 04, 2009
=============================================================================


Subject: M2M LOG ON ERROR

Category: 
  - Other

Description:
============

 Description:
 ===========
 The login process on the DICOM Gateway is a two-step process.  First a 
 TCP session is opened to the VistA HIS and the user is asked to enter 
 their access and verify codes.  After authentication, the login TCP 
 session is terminated and a second session is launched using the user 
 entered access and verify codes to run the actual Gateway applications.
  
 We have encountered an occasional error at sites where the login process 
 fails to properly close the initial TCP session.  A ZWRITE error is 
 reported and the user is prevented from logging in.
  
 Patch 103 contains two changes that have been made in MAGM2VC and 
 MAGM2VCU to correct this problem.
  
  
 Patch Contents:
 ===============
 This patch can be downloaded from:
  
 ftp.imaging.med.va.gov/Software/Released_software/Mag3_0p103
  
 This patch includes the following files:
  
 MAG3_0P103.KID - KIDS (Kernel Installation & Distribution System) package 
 to be installed on the VistA system.
  
 VistA System KIDS Installation for Tracking Purposes
 Patch 103 includes a KIDS package to be installed on the VistA System.  
 Installing the KIDS package will update the patch history in the Package 
 file (#9.4) to indicate that Patch 103 has been installed
  
 Routine MAGIP103 is an installation routine that will be automatically 
 deleted after the KIDS installation.
  
 MAG3_0P103_DICOM_Setup.exe - the InstallShield executable for the DICOM 
 Gateway.
  
 Patch Documentation:
 ====================
 This patch includes the following documentation:
  
 MAG3_0P103_PATCH_DESCRIPTION.pdf
  
 Remedy Entries:
 ===============
 285390 - Unable to connect to Vista via 2 DICOM Gateways
 286006 - Cannot log into DICOM gateway get a ZWRITE error
 286274 - DICOM Server Error
 286321 - Vista Img. 3.0 DICOM Long-on problem
 286332 - Problem logging onto Telnet Session
 286555 - Getting ZWRITE error when trying to connect with M2M
 286897 - DICOM Image Gateway
 287240 - Problems with Microsoft updates
 288506 - Can't connect to ecp
 288753 - After installing Windows SEC updates cannot log into DICOM
          Gateway
 288891 - ZWRITE error after login to gateways
 289959 - V07: Routing Gateway Issue
 290244 - Error ZWRITE
 290335 - Cannot Log on to Image Gateway
 290464 - ZWRITE errors,cannot log into one gateway
 290682 - Unable to connect to gateway
 290976 - Errors after patch
  
  
 E3R Entries:
 ============
 There are no E3Rs or New Service Requests for this patch.
  
 Test Sites for this patch:
 ==========================
 Charleston, SC - Large
 Cleveland, OH - Large
 Fresno, CA - Medium
 Kansas City, MO - Integrated
 Lebanon, PA - Medium
 Salem, VA - Large
 White River Junction, VT - Medium
  
 Remote Procedure Calls:
 =======================
 There are no new or modified Remote Procedure Calls included in this 
 patch.
  
 Security Keys:
 ==============
 There are no new or modified Security Keys included in this patch.
  
 Data Dictionaries:
 ==================
 There are no new or modified Data Dictionaries included in this patch.
  
 Menu Options:
 =============
 There are no new or modified Menu Options included in this patch.
  
 Templates:
 ==========
 There are no new or modified templates included in this patch.
  
 DICOM Gateway Routine Checksums:
 ================================
  
 New and modified routines for the Imaging DICOM Gateway are listed 
 below.  For each routine, the second line will contain the following 
 information.  Please note the before check sum may differ if the site is 
 testing other Imaging patches.
  
 Checksums are calculated using the kernel utility program CHECK1^XTSUMBLD
  
 For each routine, the second line will contain the following information. 
 Please note that the "before" checksum may differ if any test software 
 has been installed.
  
                 <tab>;;3.0;IMAGING;**103**;November 25 2008
 ROUTINE         BEFORE          AFTER           PATCH LIST
 MAGDVRSN        7248209         21494160        **7,9,26,21,10,36,3,
                                                 11,30,5,51,50,52,69,
                                                 75,102,103**
 MAGM2VC         11451854        57573713        **11,30,51,69,103**
 MAGM2VCU        13917960        89722252        **11,30,51,50,103**
  
 Installation Instructions:
 ==========================
 This patch can be installed while the VistA Imaging System is 
 active.
  
 KIDS installation will take less than minute.
  
 Before installing this patch, you will need to download the Patch 102
 files from the Imaging FTP site to a local storage location.
  
  
 VistA Host (KIDS) Installation
 ------------------------------
  
 1.  Access the Kernel Installation and Distribution System Menu [XPD 
     MAIN].
  
 2.  Run the Installation option.
  
 3.  Load the KIDS file by performing the following steps.
  
     a.  Run the Load a Distribution [XPD LOAD DISTRIBUTION] option to 
         load the KIDS distribution.
  
     b.  When prompted, enter the path and file name (MAG3_0P103.KID)
         of the Patch 103 KIDS file that you downloaded from the Imaging
         FTP server.
  
     c.  When prompted to continue with the load, enter YES.  A 
         Distribution OK! message will be displayed when the load is
         complete.
        
 4.  After loading the KIDS file, use the following menu options to verify 
     the contents of the patch and to back up any affected routines.
  
         Verify Checksums in Transport Global [XPD PRINT CHECKSUM] - run 
         this option if you want to ensure the integrity of the routines in
         the patch.
  
         Compare Transport Global to Current System [XPD COMPARE TO 
         SYSTEM] - run this option if you want to view all changes that
         will be made when the patch is installed.  All components
         (routines, options, and so on) in the patch will be compared.
  
         Backup a Transport Global [XPD BACKUP] - run this option if you 
         want to create a backup message of any routines exported with the
         patch. It will NOT back up any of the other changes.
  
 5.  After performing the load and any optional verification steps, 
     install the KIDS file by performing the following steps:
  
     a.  Run the Install Package(s) option.
  
     b.  When prompted for the install name, enter MAG*3.0*103.
  
     c.  Answer NO to the following prompts:
  
   Want KIDS to INHIBIT LOGONs during the install? No//NO
   Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES//NO
  
 6.  When installation is finished, an Install Complete message will be
     displayed.
  
 Sample Installation:
 ====================
 Select Installation Option: INstall Package(s)
 Select INSTALL NAME:    MAG*3.0*103 Loaded from Distribution  
 12/8/08@13:56:17
  
      => VistA Imaging V3.0 - Patch 103 - Test 2 11/27/2008 11:15AM  
 ;Created o
  
 This Distribution was loaded on Dec 08, 2008@13:56:17 with header of 
    VistA Imaging V3.0 - Patch 103 - Test 2 11/27/2008 11:15AM  ;Created 
 on Nov 2
 7, 2008@11:15:02
    It consisted of the following Install(s):
     MAG*3.0*103
 Checking Install for Package MAG*3.0*103
  
 Install Questions for MAG*3.0*103
  
  
  
 Want KIDS to INHIBIT LOGONs during the install? NO// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TELNET
                MAG*3.0*103                        
  
  Install Started for MAG*3.0*103 : 
                Dec 08, 2008@13:57:11
  
 Build Distribution Date: Nov 27, 2008
  
  Installing Routines:
                Dec 08, 2008@13:57:11
  
  Running Post-Install Routine: POST^MAGIP103
  
  Updating Routine file...
  
  Updating KIDS files...
  
  MAG*3.0*103 Installed. 
                Dec 08, 2008@13:57:11
  
  Install Message sent #29504
  
 Install Completed
  
  
  
 Post Install Instructions:
 ==========================
 Imaging Patch 103 needs to be installed on all of the Text Gateways and 
 VistA Systems at the same time.  Detailed instructions are provided in the
 MAG3_0P102_PATCH_DESCRIPTION.pdf.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MAGIP103
    Before:       n/a   After:  B8415079  **103**

=============================================================================
User Information:
Entered By  : TROMBETTA,KATHY               Date Entered  : NOV 26, 2008
Completed By: SHOVESTUL,MARYANN             Date Completed: MAR 02, 2009
Released By : ANDKHOIE,MOSA                 Date Released : MAR 03, 2009
=============================================================================


Packman Mail Message:
=====================

No routines included
