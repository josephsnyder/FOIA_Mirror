Released DVBA*2.7*132 SEQ #117
Extracted from mail message
**KIDS**:DVBA*2.7*132^

**INSTALL NAME**
DVBA*2.7*132
"BLD",7626,0)
DVBA*2.7*132^AUTOMATED MED INFO EXCHANGE^0^3080619^y
"BLD",7626,1,0)
^^1^1^3080602^
"BLD",7626,1,1,0)
Add Exam Reference Number to the manual print of new C&P Exam requests.
"BLD",7626,4,0)
^9.64PA^^
"BLD",7626,6.3)
2
"BLD",7626,"KRN",0)
^9.67PA^8989.52^19
"BLD",7626,"KRN",.4,0)
.4
"BLD",7626,"KRN",.401,0)
.401
"BLD",7626,"KRN",.402,0)
.402
"BLD",7626,"KRN",.403,0)
.403
"BLD",7626,"KRN",.5,0)
.5
"BLD",7626,"KRN",.84,0)
.84
"BLD",7626,"KRN",3.6,0)
3.6
"BLD",7626,"KRN",3.8,0)
3.8
"BLD",7626,"KRN",9.2,0)
9.2
"BLD",7626,"KRN",9.8,0)
9.8
"BLD",7626,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7626,"KRN",9.8,"NM",1,0)
DVBCUTL3^^0^B23312372
"BLD",7626,"KRN",9.8,"NM","B","DVBCUTL3",1)

"BLD",7626,"KRN",19,0)
19
"BLD",7626,"KRN",19.1,0)
19.1
"BLD",7626,"KRN",101,0)
101
"BLD",7626,"KRN",409.61,0)
409.61
"BLD",7626,"KRN",771,0)
771
"BLD",7626,"KRN",870,0)
870
"BLD",7626,"KRN",8989.51,0)
8989.51
"BLD",7626,"KRN",8989.52,0)
8989.52
"BLD",7626,"KRN",8994,0)
8994
"BLD",7626,"KRN","B",.4,.4)

"BLD",7626,"KRN","B",.401,.401)

"BLD",7626,"KRN","B",.402,.402)

"BLD",7626,"KRN","B",.403,.403)

"BLD",7626,"KRN","B",.5,.5)

"BLD",7626,"KRN","B",.84,.84)

"BLD",7626,"KRN","B",3.6,3.6)

"BLD",7626,"KRN","B",3.8,3.8)

"BLD",7626,"KRN","B",9.2,9.2)

"BLD",7626,"KRN","B",9.8,9.8)

"BLD",7626,"KRN","B",19,19)

"BLD",7626,"KRN","B",19.1,19.1)

"BLD",7626,"KRN","B",101,101)

"BLD",7626,"KRN","B",409.61,409.61)

"BLD",7626,"KRN","B",771,771)

"BLD",7626,"KRN","B",870,870)

"BLD",7626,"KRN","B",8989.51,8989.51)

"BLD",7626,"KRN","B",8989.52,8989.52)

"BLD",7626,"KRN","B",8994,8994)

"BLD",7626,"QUES",0)
^9.62^^
"BLD",7626,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^2950508
"PKG",223,22,1,"PAH",1,0)
132^3080619
"PKG",223,22,1,"PAH",1,1,0)
^^1^1^3080619
"PKG",223,22,1,"PAH",1,1,1,0)
Add Exam Reference Number to the manual print of new C&P Exam requests.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DVBCUTL3")
0^1^B23312372^B22875732
"RTN","DVBCUTL3",1,0)
DVBCUTL3 ;ALB/GTS-557/THM-DVBCUTL2, CONTINUED ; 5/17/91  11:35 AM
"RTN","DVBCUTL3",2,0)
 ;;2.7;AMIE;**132**;Apr 10, 1995;Build 2
"RTN","DVBCUTL3",3,0)
 ;
"RTN","DVBCUTL3",4,0)
KILL I $D(LKILL) K LKILL D LKILL
"RTN","DVBCUTL3",5,0)
 K C0,DVBCLTR,DVBCNOW,DVBCSORT,LI,LREXMDT,LV,PGRN,ROUT,RT,TSTAT,XMB,XT,EXNAME,OTHDIS1,OTHDIS2,PG,REQRO,RSTAT,TIME,ZI,ZZI,DAYEX,DINUM,DTCAN,ERDAYS,EXMDA,FB,OLDAYS,^TMP("DVBC",$J),^TMP("DVBCLAB",$J),DVBCBDT,DVBCLOC,DVBCN,DVBCRLOC
"RTN","DVBCUTL3",6,0)
 K HD4,RONUM,TPRT,DG,LRPARAM,RARPT,SUPER,^TMP($J),^TMP("DVBC","BULL",$J),EXCNT,RTYPE,XD,XLINE,ZC,LY,LZ,MX,MY,WKSNUM,HD7,HD8,HD9,LN1,LN2,DXCMT,CANBY,CANDT,CANREM,CFLOC,CFREQ,CMBN,DVBCI,ELIGCOD,ELIGSDT,ELIGST,DVBCD2
"RTN","DVBCUTL3",7,0)
 K EXM,EXMDT,EXMPL,EXPHYS,FREAS,HD5,HD6,HD7,HD8,HD9,LNH,NREQDA,OLREQDA,OTHDOC,OWNER,PDSRV,PFAX,POWSTAT,SITE,SITE1,SRVCON,SRVEDT,SRVPCT,SRVSDT,SUB,TIME,TOT,USER,USERNM,USR,VETST,WRKSHT,XFERDT,XFERSITE,XMER,XMREC,XMRG,ZJ,ZK
"RTN","DVBCUTL3",8,0)
 K HD91,CNUM,DFN,DX,DXCOD,DXNUM,I,LINE,DVBCRALC,PCT,SC,SSN,CANCBY,CANCDT,CANCREM,DATRETN,EXST,FA,OWNDOM,REMK,TSTA1,XMFG,YY,ZG,ZH,DVBCAO,XCN,MANUAL
"RTN","DVBCUTL3",9,0)
 K DVBCTYPE,HD7,HD8,HD9,HD91,RDATE1,TPRT,XJ,RONAM,PNAM,^TMP($J)
"RTN","DVBCUTL3",10,0)
 Q
"RTN","DVBCUTL3",11,0)
 ;
"RTN","DVBCUTL3",12,0)
LKILL K LRO,LR0,LRAA,LRAAO,LRCDT,LRCMNT,LRNIDT,LRCW,LRDATA,LRDFN,LRDN,LRDOC,LRDPF,LREDT,LREND,LRFFLG,LRFOOT,LRHF,LRHI,LRIDT,LRLAB,LRLO,LRMNIDT,LROC,LRONESPC,LRONETST,LRORN,LRPC,LRPO,LRSDT,LRSPEC,LRSS,LRSTOP,LRSUB,LRTC,LRCNIDT
"RTN","DVBCUTL3",13,0)
 K LRTHER,LRTSTS,LRWRD,RACNI,RAST,RPTR,OK,LRBLOOD,LRPARAM,LRPLASMA,LRSERUM,LRUNKNOW,LRURINE,LRPANEL,LRTM60,LRDT0,LRLABKY
"RTN","DVBCUTL3",14,0)
 Q
"RTN","DVBCUTL3",15,0)
 ;  **The following routines are called by DVBCREQ1 **
"RTN","DVBCUTL3",16,0)
DDIS1 S DXNUM=$P(^DPT(DFN,.372,DVBCXJI,0),U,1),PCT=$P(^(0),U,2)
"RTN","DVBCUTL3",17,0)
 S DVBCSC=$P(^(0),U,3)
"RTN","DVBCUTL3",18,0)
 S DVBCDX=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,1),1:"Unknown")
"RTN","DVBCUTL3",19,0)
 S DXCOD=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,3),1:"Unknown")
"RTN","DVBCUTL3",20,0)
 W ?2,DVBCDX,?37,$J(PCT,3,0)," %",?50,$S(DVBCSC=1:"Yes",1:"No")
"RTN","DVBCUTL3",21,0)
 W ?58,DXCOD,!
"RTN","DVBCUTL3",22,0)
 I IOST?1"C-".E W !,"VA Form 21-2507" D TERM
"RTN","DVBCUTL3",23,0)
 Q
"RTN","DVBCUTL3",24,0)
 ;
"RTN","DVBCUTL3",25,0)
DDIS ;display rated disabilities
"RTN","DVBCUTL3",26,0)
 I '$D(^DPT(DFN,.372)) W !?25,"No rated disabilities on file",!! Q
"RTN","DVBCUTL3",27,0)
 W !?2,"Rated Disability",?37,"Percent",?50,"SC ?",?58,"Dx Code",! W ?2 F LINE=1:1:63 W "-"
"RTN","DVBCUTL3",28,0)
 W !!
"RTN","DVBCUTL3",29,0)
 F DVBCXJI=0:0 S DVBCXJI=$O(^DPT(DFN,.372,DVBCXJI)) Q:DVBCXJI=""  D DDIS1  Q:($D(GETOUT))
"RTN","DVBCUTL3",30,0)
 W !!
"RTN","DVBCUTL3",31,0)
 Q
"RTN","DVBCUTL3",32,0)
 ;
"RTN","DVBCUTL3",33,0)
TST W ?3
"RTN","DVBCUTL3",34,0)
 F DA=0:0 S DA=$O(^DVB(396.4,"C",DA(1),DA)) Q:(DA="")!($D(GETOUT))  D CONTST
"RTN","DVBCUTL3",35,0)
 Q
"RTN","DVBCUTL3",36,0)
 ;
"RTN","DVBCUTL3",37,0)
CONTST K PRINT S TSTAT=$P(^DVB(396.4,DA,0),U,4)
"RTN","DVBCUTL3",38,0)
 S TST=$P(^DVB(396.4,DA,0),U,3)
"RTN","DVBCUTL3",39,0)
 S PRTNM=$S($D(^DVB(396.6,TST,0)):$P(^(0),U,2),1:"")
"RTN","DVBCUTL3",40,0)
 D TST1
"RTN","DVBCUTL3",41,0)
 Q
"RTN","DVBCUTL3",42,0)
 ;
"RTN","DVBCUTL3",43,0)
TST1 I $Y>(IOSL-3) W !,"VA Form 21-2507" I IOST?1"C-".E D TERM Q:($D(GETOUT))
"RTN","DVBCUTL3",44,0)
 S TSTA1=""
"RTN","DVBCUTL3",45,0)
 I $D(^DVB(396.4,DA,"CAN")) S TSTA1=$P(^DVB(396.4,DA,"CAN"),U,3)
"RTN","DVBCUTL3",46,0)
 I $D(^DVB(396.4,DA,"TRAN")) S X=$P(^DVB(396.4,DA,"TRAN"),U,3)
"RTN","DVBCUTL3",47,0)
 S:TSTA1]"" TSTA1=$P(^DVB(396.5,TSTA1,0),U,1) ;tsta1=cancellation reason
"RTN","DVBCUTL3",48,0)
 ;DVBA*132 - added Exam Ref# to end of Write command below
"RTN","DVBCUTL3",49,0)
 W:(($L(PRTNM)+$L(TSTA1)+$X)>55!($D(DVBAINSF))) !?1 W $S(PRTNM]"":PRTNM,1:"Missing exam name")_$S(TSTA1]"":" - cancelled ("_TSTA1_")",TSTAT="T":" - Transferred",TSTAT="":" (Unknown status)",1:"")," (Exam Ref#: ",DA,")"
"RTN","DVBCUTL3",50,0)
 I TSTAT="T" S X=$S($D(^DIC(4.2,+X,0)):$P(^(0),U,1),1:"unknown site") W " to ",$P(X,".",1)
"RTN","DVBCUTL3",51,0)
 W "; "
"RTN","DVBCUTL3",52,0)
 I $D(DVBAINSF) DO
"RTN","DVBCUTL3",53,0)
 .I +$P(^DVB(396.4,DA,0),U,11)>0 DO
"RTN","DVBCUTL3",54,0)
 ..I $Y>(IOSL-7) D BOT D:'$D(GETOUT) HDR^DVBCREQ1
"RTN","DVBCUTL3",55,0)
 ..I '$D(GETOUT) DO
"RTN","DVBCUTL3",56,0)
 ...S TVAR(1,0)="0,3,0,2,0^Insufficient Reason: "_$P(^DVB(396.94,$P(^DVB(396.4,DA,0),U,11),0),U,1)
"RTN","DVBCUTL3",57,0)
 ...S TVAR(2,0)="0,3,0,2:1,0^Insufficient Remarks: "
"RTN","DVBCUTL3",58,0)
 ...D WR^DVBAUTL4("TVAR")
"RTN","DVBCUTL3",59,0)
 ...K TVAR
"RTN","DVBCUTL3",60,0)
 ...I $D(^DVB(396.4,DA,"INREM")) DO
"RTN","DVBCUTL3",61,0)
 ....K ^UTILITY($J,"W")
"RTN","DVBCUTL3",62,0)
 ....S DIWL=5,DIWF="NW"
"RTN","DVBCUTL3",63,0)
 ....F LPCNT=0:0 S LPCNT=$O(^DVB(396.4,DA,"INREM",LPCNT)) Q:LPCNT=""!($D(GETOUT))  DO  ;**Loop Insufficient Remarks
"RTN","DVBCUTL3",64,0)
 .....S X=^DVB(396.4,DA,"INREM",LPCNT,0)
"RTN","DVBCUTL3",65,0)
 .....S:X="<" X=" <"
"RTN","DVBCUTL3",66,0)
 .....S X=$P(X,"<",1)
"RTN","DVBCUTL3",67,0)
 .....D ^DIWP ;**Print Insufficient Remarks
"RTN","DVBCUTL3",68,0)
 .....I $Y>(IOSL-8),$O(^DVB(396.4,DA,"INREM",LPCNT))]"" DO
"RTN","DVBCUTL3",69,0)
 ......D BOT D:'$D(GETOUT) HDR^DVBCREQ1,RMRK
"RTN","DVBCUTL3",70,0)
 ....D:'$D(GETOUT)&($O(^DVB(396.4,DA,"INREM",0))>0) ^DIWW
"RTN","DVBCUTL3",71,0)
 ...W !!
"RTN","DVBCUTL3",72,0)
 Q
"RTN","DVBCUTL3",73,0)
 ;
"RTN","DVBCUTL3",74,0)
TERM ;  ** If output to CRT, display 'Continue' prompt **
"RTN","DVBCUTL3",75,0)
 S DIR(0)="F,O^^",DIR("A")="Enter [Return] to continue or ""^"" to exit"
"RTN","DVBCUTL3",76,0)
 K GETOUT D ^DIR S:$D(DTOUT)!($D(DUOUT)) GETOUT=1
"RTN","DVBCUTL3",77,0)
 I '$D(GETOUT) W @IOF K DIR,DIRUT
"RTN","DVBCUTL3",78,0)
 Q
"RTN","DVBCUTL3",79,0)
 ;
"RTN","DVBCUTL3",80,0)
BOT ;**Write form # at bottom
"RTN","DVBCUTL3",81,0)
 I IOST?1"C-".E F LPCNT1=$Y:1:(IOSL-6) W !
"RTN","DVBCUTL3",82,0)
 I IOST'?1"C-".E F LPCNT1=$Y:1:(IOSL-4) W !
"RTN","DVBCUTL3",83,0)
 W !,"VA Form 21-2507"
"RTN","DVBCUTL3",84,0)
 I IOST?1"C-".E D TERM
"RTN","DVBCUTL3",85,0)
 Q
"RTN","DVBCUTL3",86,0)
 ;
"RTN","DVBCUTL3",87,0)
RMRK ;** Write remarks continued at top of page
"RTN","DVBCUTL3",88,0)
 W !!?3,"Insufficient remarks, continued",!!
"RTN","DVBCUTL3",89,0)
 Q
"VER")
8.0^22.0
"BLD",7626,6)
^117
**END**
**END**
