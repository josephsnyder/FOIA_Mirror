Released DVBA*2.7*136 SEQ #127
Extracted from mail message
**KIDS**:DVBA*2.7*136^

**INSTALL NAME**
DVBA*2.7*136
"BLD",7844,0)
DVBA*2.7*136^AUTOMATED MED INFO EXCHANGE^0^3090604^y
"BLD",7844,1,0)
^^3^3^3081029^
"BLD",7844,1,1,0)
This patch allows users to use the "|" character in free text fields
"BLD",7844,1,2,0)
for the 2507 requests and prevents users from accessing the VistAWeb
"BLD",7844,1,3,0)
tab when connecting to test accounts due to security issues. 
"BLD",7844,4,0)
^9.64PA^^
"BLD",7844,6.3)
2
"BLD",7844,"KRN",0)
^9.67PA^779.2^20
"BLD",7844,"KRN",.4,0)
.4
"BLD",7844,"KRN",.401,0)
.401
"BLD",7844,"KRN",.402,0)
.402
"BLD",7844,"KRN",.403,0)
.403
"BLD",7844,"KRN",.5,0)
.5
"BLD",7844,"KRN",.84,0)
.84
"BLD",7844,"KRN",3.6,0)
3.6
"BLD",7844,"KRN",3.8,0)
3.8
"BLD",7844,"KRN",9.2,0)
9.2
"BLD",7844,"KRN",9.8,0)
9.8
"BLD",7844,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",7844,"KRN",9.8,"NM",1,0)
DVBAB70^^0^B39041842
"BLD",7844,"KRN",9.8,"NM",2,0)
DVBABURL^^0^B2101434
"BLD",7844,"KRN",9.8,"NM","B","DVBAB70",1)

"BLD",7844,"KRN",9.8,"NM","B","DVBABURL",2)

"BLD",7844,"KRN",19,0)
19
"BLD",7844,"KRN",19.1,0)
19.1
"BLD",7844,"KRN",101,0)
101
"BLD",7844,"KRN",409.61,0)
409.61
"BLD",7844,"KRN",771,0)
771
"BLD",7844,"KRN",779.2,0)
779.2
"BLD",7844,"KRN",870,0)
870
"BLD",7844,"KRN",8989.51,0)
8989.51
"BLD",7844,"KRN",8989.52,0)
8989.52
"BLD",7844,"KRN",8994,0)
8994
"BLD",7844,"KRN","B",.4,.4)

"BLD",7844,"KRN","B",.401,.401)

"BLD",7844,"KRN","B",.402,.402)

"BLD",7844,"KRN","B",.403,.403)

"BLD",7844,"KRN","B",.5,.5)

"BLD",7844,"KRN","B",.84,.84)

"BLD",7844,"KRN","B",3.6,3.6)

"BLD",7844,"KRN","B",3.8,3.8)

"BLD",7844,"KRN","B",9.2,9.2)

"BLD",7844,"KRN","B",9.8,9.8)

"BLD",7844,"KRN","B",19,19)

"BLD",7844,"KRN","B",19.1,19.1)

"BLD",7844,"KRN","B",101,101)

"BLD",7844,"KRN","B",409.61,409.61)

"BLD",7844,"KRN","B",771,771)

"BLD",7844,"KRN","B",779.2,779.2)

"BLD",7844,"KRN","B",870,870)

"BLD",7844,"KRN","B",8989.51,8989.51)

"BLD",7844,"KRN","B",8989.52,8989.52)

"BLD",7844,"KRN","B",8994,8994)

"BLD",7844,"QDEF")
^^^^NO^^^^^^NO
"BLD",7844,"QUES",0)
^9.62^^
"BLD",7844,"REQB",0)
^9.611^2^2
"BLD",7844,"REQB",1,0)
DVBA*2.7*104^1
"BLD",7844,"REQB",2,0)
DVBA*2.7*57^1
"BLD",7844,"REQB","B","DVBA*2.7*104",1)

"BLD",7844,"REQB","B","DVBA*2.7*57",2)

"MBREQ")
0
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^2950508
"PKG",223,22,1,"PAH",1,0)
136^3090604
"PKG",223,22,1,"PAH",1,1,0)
^^3^3^3090604
"PKG",223,22,1,"PAH",1,1,1,0)
This patch allows users to use the "|" character in free text fields
"PKG",223,22,1,"PAH",1,1,2,0)
for the 2507 requests and prevents users from accessing the VistAWeb
"PKG",223,22,1,"PAH",1,1,3,0)
tab when connecting to test accounts due to security issues. 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DVBAB70")
0^1^B39041842^B39943172
"RTN","DVBAB70",1,0)
DVBAB70 ;ALB/SPH - CAPRI C&P EXAM INQUIRY ;09/08/00
"RTN","DVBAB70",2,0)
 ;;2.7;AMIE;**35,42,57,136**;Apr 10, 1995;Build 2
"RTN","DVBAB70",3,0)
 ;
"RTN","DVBAB70",4,0)
STRT(ZMSG,DFN,ZREQDA) ;
"RTN","DVBAB70",5,0)
 S DVBABCNT=0
"RTN","DVBAB70",6,0)
 K ^TMP($J) S Y=DT X ^DD("DD") S FDT(0)=Y D HOME^%ZIS S FF=IOF
"RTN","DVBAB70",7,0)
 S DIC="^DVB(396.3,"
"RTN","DVBAB70",8,0)
 S DIC(0)="M"
"RTN","DVBAB70",9,0)
 S DIC(1)=ZREQDA
"RTN","DVBAB70",10,0)
 S Y=ZREQDA
"RTN","DVBAB70",11,0)
 S JI=$P(Y,U,2),(DA,DA(1),REQDA)=+Y
"RTN","DVBAB70",12,0)
 S (NAME,SSN,CNUM,ADR1,ADR2,ADR3,CITY,STATE,ZIP,HOMPHON,BUSPHON,OTHDIS)=""
"RTN","DVBAB70",13,0)
 D VARS^DVBCUTIL
"RTN","DVBAB70",14,0)
 G START
"RTN","DVBAB70",15,0)
CON ;
"RTN","DVBAB70",16,0)
 I IOST?1"P-".E,$Y>45 W @IOF D HDR
"RTN","DVBAB70",17,0)
 Q
"RTN","DVBAB70",18,0)
START S PGHD="",PG=0
"RTN","DVBAB70",19,0)
 S ZMSG(DVBABCNT)="                     COMPENSATION AND PENSION EXAM INQUIRY",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",20,0)
 S ZMSG(DVBABCNT)="                     -------------------------------------",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",21,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",22,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",23,0)
 S ZMSG(DVBABCNT)="            Name: "_PNAM,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",24,0)
 S ZMSG(DVBABCNT)="             SSN: "_SSN,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",25,0)
 S ZMSG(DVBABCNT)="        C-Number: "_CNUM,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",26,0)
 S Y=DOB X ^DD("DD")
"RTN","DVBAB70",27,0)
 S ZMSG(DVBABCNT)="             DOB: "_Y,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",28,0)
 S ZMSG(DVBABCNT)="         Address: "_ADR1,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",29,0)
 I ADR2'="" S ZMSG(DVBABCNT)="                  "_ADR2,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",30,0)
 I ADR3'="" S ZMSG(DVBABCNT)="                  "_ADR3,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",31,0)
 S ZMSG(DVBABCNT)="City,State,Zip+4: "_CITY_", "_STATE_" "_ZIP,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",32,0)
 S ZMSG(DVBABCNT)="       Res Phone: "_HOMPHON,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",33,0)
 S ZMSG(DVBABCNT)="       Bus Phone: "_BUSPHON,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",34,0)
 S EDTA=$S($D(^DPT(DFN,.32)):^(.32),1:""),EOD=$P(EDTA,U,6),RAD=$P(EDTA,U,7)
"RTN","DVBAB70",35,0)
 S Y=EOD X ^DD("DD") S:Y="" Y="Not specified"
"RTN","DVBAB70",36,0)
 S ZMSG(DVBABCNT)="Entered active service: "_Y,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",37,0)
 S Y=RAD X ^DD("DD") S:Y="" Y="Not specified"
"RTN","DVBAB70",38,0)
 S ZMSG(DVBABCNT)="Released active service: "_Y,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",39,0)
 S ZMSG(DVBABCNT)="================================================================================",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",40,0)
 W !! D CON Q:$D(OUT)  D ^DVBAB97,CON Q:$D(OUT)  D ^DVBAB68,CON Q:$D(OUT)  S REQDT=$P(^DVB(396.3,REQDA,0),U,2)
"RTN","DVBAB70",41,0)
 S Y=REQDT X ^DD("DD")
"RTN","DVBAB70",42,0)
 S ZMSG(DVBABCNT)="This request was initiated on "_$P(Y,"@",1)_" at "_$P(Y,"@",2),DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",43,0)
 S ZMSG(DVBABCNT)="Requester: "_REQN,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",44,0)
 S ZMSG(DVBABCNT)="Requesting Regional Office: "_RONAME,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",45,0)
 S ZMSG(DVBABCNT)="VHA Division Processing Request: "_$P($$SITE^VASITE(,$P(^DVB(396.3,REQDA,1),U,4)),U,2),DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",46,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",47,0)
 I $D(^DVB(396.4,"C",REQDA)) S ZMSG(DVBABCNT)="Exams on this request: ",DVBABCNT=DVBABCNT+1 D TST^DVBAB96 ;DVBCUTL2 
"RTN","DVBAB70",48,0)
 I '$D(^DVB(396.4,"C",REQDA)) S ZMSG(DVBABCNT)="(No exams have yet been entered)",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",49,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",50,0)
 S ZMSG(DVBABCNT)="** Status of request: ",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",51,0)
 S (XSTAT,STAT)=$P(^DVB(396.3,REQDA,0),U,18)
"RTN","DVBAB70",52,0)
 S STAT=$S(XSTAT="N":"New",XSTAT="P":"Pending, reported to MAS",XSTAT="T":"Transcribed",XSTAT="S":"Scheduled",XSTAT="R":"Released, not printed",XSTAT="C":"Completed",XSTAT="CT":"Completed, transferred out",XSTAT="NT":"New, transferred in",1:"")
"RTN","DVBAB70",53,0)
 I STAT]"" S ZMSG(DVBABCNT)=STAT,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",54,0)
 I XSTAT="R"!(XSTAT="C") S Y=$P(^DVB(396.3,REQDA,0),U,14) X ^DD("DD") S RELBY=$P(^DVB(396.3,REQDA,0),U,15),RELBY=$S($D(^VA(200,+RELBY,0)):$P(^(0),U,1),1:"Unknown user") S ZMSG(DVBABCNT)="Released on "_Y_" by "_RELBY,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",55,0)
 I XSTAT="C" S Y=$P(^DVB(396.3,REQDA,0),U,16) X ^DD("DD") S PRBY=$P(^DVB(396.3,REQDA,0),U,17),PRBY=$S($D(^VA(200,+PRBY,0)):$P(^(0),U,1),1:"Unknown user") S ZMSG(DVBABCNT)="Printed by the RO on "_Y_" by "_PRBY,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",56,0)
 I STAT="" S STAT=$S(XSTAT="X":"Cancelled by MAS",XSTAT="RX":"Cancelled by RO",1:"Unknown") S ZMSG(DVBABCNT)=STAT,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",57,0)
 I STAT["Cancelled" S CANDT=$P(^DVB(396.3,REQDA,0),U,19) S ZMSG(DVBABCNT)="  (Cancelled on "_$$FMTE^XLFDT(CANDT,"5DZ")_")",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",58,0)
 I $D(^DVB(396.3,REQDA,1)),$P(^(1),U,3)="Y" S ZMSG(DVBABCNT)="This request was faxed to the regional office.",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",59,0)
 S FEXAM=$P(^DVB(396.3,REQDA,0),U,9) I FEXAM="Y" S ZMSG(DVBABCNT)="*** Exams done on a FEE BASIS ***  ",DVBABCNT=DVBABCNT+1 K FEXAM
"RTN","DVBAB70",60,0)
 S ZMSG(DVBABCNT)="--------------------------------------------------------------------------------",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",61,0)
 D DDIS Q:$D(OUT)  D CON Q:$D(OUT)
"RTN","DVBAB70",62,0)
 I IOST?1"P-".E,$Y>45 W @IOF D HDR
"RTN","DVBAB70",63,0)
 S ZMSG(DVBABCNT)="Other Disabilities: "_OTHDIS,DVBABCNT=DVBABCNT+1 I $D(^DVB(396.3,REQDA,1)) S ZMSG(DVBABCNT)="                    "_OTHDIS1,DVBABCNT=DVBABCNT+1 S ZMSG(DVBABCNT)="                    "_OTHDIS2,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",64,0)
 S ZMSG(DVBABCNT)="General Remarks:",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",65,0)
 K ^UTILITY($J,"W")
"RTN","DVBAB70",66,0)
 F LINE=0:0 S LINE=$O(^DVB(396.3,REQDA,2,LINE)) Q:LINE=""  S X=^(LINE,0),DIWL=5,DIWR=75,DIWF=$S(X["|":"NWX",1:"NW") D ^DIWP S ZMSG(DVBABCNT)=X,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",67,0)
END    K ^TMP($J),TSTA1,TSTAT,XCNP
"RTN","DVBAB70",68,0)
 Q
"RTN","DVBAB70",69,0)
DDIS1 S ZMSG(DVBABCNT)=DX_"  "_$J(PCT,3,0)_" %",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",70,0)
 S ZMSG(DVBABCNT)="    Service-Connected? "_$S(SC=1:"Yes",1:"No")_"  DX Code: "_DXCOD,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",71,0)
 I $Y>19 D CON
"RTN","DVBAB70",72,0)
 Q
"RTN","DVBAB70",73,0)
DDIS I $Y>12 D CON Q:$D(OUT)
"RTN","DVBAB70",74,0)
 I '$D(^DPT(DFN,.372)) S ZMSG(DVBABCNT)="No rated disabilities on file",DVBABCNT=DVBABCNT+1 Q
"RTN","DVBAB70",75,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",76,0)
 S ZMSG(DVBABCNT)="RATED DISABILITIES:",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",77,0)
 F JII=0:0 S JII=$O(^DPT(DFN,.372,JII)) Q:JII=""  S DXNUM=$P(^DPT(DFN,.372,JII,0),U,1),PCT=$P(^(0),U,2),SC=$P(^(0),U,3),DX=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,1),1:"Unknown"),DXCOD=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,3),1:"Unknown") D DDIS1
"RTN","DVBAB70",78,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",79,0)
 Q
"RTN","DVBAB70",80,0)
HDR S PG=PG+1 W:(IOST?1"C-".E) @IOF
"RTN","DVBAB70",81,0)
 S ZMSG(DVBABCNT)="================================================================================",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",82,0)
 Q
"RTN","DVBABURL")
0^2^B2101434^B1770669
"RTN","DVBABURL",1,0)
DVBABURL ;ALB/SPH - CAPRI URL ;10/15/2005
"RTN","DVBABURL",2,0)
 ;;2.7;AMIE;**104,136**;Apr 10, 1995;Build 2
"RTN","DVBABURL",3,0)
 ;
"RTN","DVBABURL",4,0)
URL(Y,WHICH) ; 
"RTN","DVBABURL",5,0)
 S Y=""
"RTN","DVBABURL",6,0)
 ; 1=VBA's AMIE Worksheet Website
"RTN","DVBABURL",7,0)
 ; 2=CAPRI training website
"RTN","DVBABURL",8,0)
 ; 3=VistAWeb website
"RTN","DVBABURL",9,0)
 ; 999=Debug/Test Code
"RTN","DVBABURL",10,0)
 I WHICH=1 S Y="http://152.124.238.193/bl/21/rating/Medical/exams/index.htm"
"RTN","DVBABURL",11,0)
 I WHICH=2 S Y="http://vaww.cpep.med.va.gov/capri/"
"RTN","DVBABURL",12,0)
 I WHICH=3 D
"RTN","DVBABURL",13,0)
 . I '$$PROD^XUPROD S Y="-1^VistAWeb disabled for non-production systems." Q
"RTN","DVBABURL",14,0)
 . S Y="https://vistaweb.med.va.gov/CapriPage.aspx"
"RTN","DVBABURL",15,0)
 I WHICH=4 S Y="M21-1, Part VI, Rating Board Procedures^http://152.124.238.193/bl/21/Publicat/Manuals/Part6/601.htm#Exam"
"RTN","DVBABURL",16,0)
 I WHICH=999 S Y="http://vhaannweb2.v11.med.va.gov/VwDesktop/CapriPage.aspx"
"RTN","DVBABURL",17,0)
 Q 
"RTN","DVBABURL",18,0)
 ;
"VER")
8.0^22.0
"BLD",7844,6)
^127
**END**
**END**
