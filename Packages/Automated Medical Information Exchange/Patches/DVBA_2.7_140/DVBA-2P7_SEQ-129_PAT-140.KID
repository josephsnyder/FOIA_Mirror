Released DVBA*2.7*140 SEQ #129
Extracted from mail message
**KIDS**:DVBA*2.7*140^

**INSTALL NAME**
DVBA*2.7*140
"BLD",7316,0)
DVBA*2.7*140^AUTOMATED MED INFO EXCHANGE^0^3090512^y
"BLD",7316,1,0)
^^2^2^3090212^
"BLD",7316,1,1,0)
Please refer to patch DVBA*2.7*140 for a complete description of this 
"BLD",7316,1,2,0)
patch.
"BLD",7316,4,0)
^9.64PA^^0
"BLD",7316,6)
^118
"BLD",7316,6.3)
16
"BLD",7316,"INI")

"BLD",7316,"INIT")

"BLD",7316,"KRN",0)
^9.67PA^779.2^20
"BLD",7316,"KRN",.4,0)
.4
"BLD",7316,"KRN",.401,0)
.401
"BLD",7316,"KRN",.402,0)
.402
"BLD",7316,"KRN",.403,0)
.403
"BLD",7316,"KRN",.5,0)
.5
"BLD",7316,"KRN",.84,0)
.84
"BLD",7316,"KRN",3.6,0)
3.6
"BLD",7316,"KRN",3.8,0)
3.8
"BLD",7316,"KRN",9.2,0)
9.2
"BLD",7316,"KRN",9.8,0)
9.8
"BLD",7316,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",7316,"KRN",9.8,"NM",1,0)
DVBAB84^^0^B36589482
"BLD",7316,"KRN",9.8,"NM",2,0)
DVBABDOD^^0^B8507285
"BLD",7316,"KRN",9.8,"NM","B","DVBAB84",1)

"BLD",7316,"KRN",9.8,"NM","B","DVBABDOD",2)

"BLD",7316,"KRN",19,0)
19
"BLD",7316,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",7316,"KRN",19,"NM",1,0)
DVBA CAPRI GUI^^0
"BLD",7316,"KRN",19,"NM","B","DVBA CAPRI GUI",1)

"BLD",7316,"KRN",19.1,0)
19.1
"BLD",7316,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",7316,"KRN",101,0)
101
"BLD",7316,"KRN",409.61,0)
409.61
"BLD",7316,"KRN",771,0)
771
"BLD",7316,"KRN",779.2,0)
779.2
"BLD",7316,"KRN",870,0)
870
"BLD",7316,"KRN",8989.51,0)
8989.51
"BLD",7316,"KRN",8989.52,0)
8989.52
"BLD",7316,"KRN",8994,0)
8994
"BLD",7316,"KRN",8994,"NM",0)
^9.68A^7^6
"BLD",7316,"KRN",8994,"NM",2,0)
DVBAB RESTRICTED LIST PATIENTS^^0
"BLD",7316,"KRN",8994,"NM",3,0)
DVBAB DOD INFO^^0
"BLD",7316,"KRN",8994,"NM",4,0)
DVBAB DOD REPORT^^0
"BLD",7316,"KRN",8994,"NM",5,0)
DVBAB DOD REPORT TYPES^^0
"BLD",7316,"KRN",8994,"NM",6,0)
DVBAB FIND DFN BY ICN^^0
"BLD",7316,"KRN",8994,"NM",7,0)
DVBAB CCOW^^0
"BLD",7316,"KRN",8994,"NM","B","DVBAB CCOW",7)

"BLD",7316,"KRN",8994,"NM","B","DVBAB DOD INFO",3)

"BLD",7316,"KRN",8994,"NM","B","DVBAB DOD REPORT",4)

"BLD",7316,"KRN",8994,"NM","B","DVBAB DOD REPORT TYPES",5)

"BLD",7316,"KRN",8994,"NM","B","DVBAB FIND DFN BY ICN",6)

"BLD",7316,"KRN",8994,"NM","B","DVBAB RESTRICTED LIST PATIENTS",2)

"BLD",7316,"KRN","B",.4,.4)

"BLD",7316,"KRN","B",.401,.401)

"BLD",7316,"KRN","B",.402,.402)

"BLD",7316,"KRN","B",.403,.403)

"BLD",7316,"KRN","B",.5,.5)

"BLD",7316,"KRN","B",.84,.84)

"BLD",7316,"KRN","B",3.6,3.6)

"BLD",7316,"KRN","B",3.8,3.8)

"BLD",7316,"KRN","B",9.2,9.2)

"BLD",7316,"KRN","B",9.8,9.8)

"BLD",7316,"KRN","B",19,19)

"BLD",7316,"KRN","B",19.1,19.1)

"BLD",7316,"KRN","B",101,101)

"BLD",7316,"KRN","B",409.61,409.61)

"BLD",7316,"KRN","B",771,771)

"BLD",7316,"KRN","B",779.2,779.2)

"BLD",7316,"KRN","B",870,870)

"BLD",7316,"KRN","B",8989.51,8989.51)

"BLD",7316,"KRN","B",8989.52,8989.52)

"BLD",7316,"KRN","B",8994,8994)

"BLD",7316,"PRET")

"BLD",7316,"QUES",0)
^9.62^^
"BLD",7316,"REQB",0)
^9.611^3^2
"BLD",7316,"REQB",2,0)
DVBA*2.7*123^1
"BLD",7316,"REQB",3,0)
DVBA*2.7*137^1
"BLD",7316,"REQB","B","DVBA*2.7*123",2)

"BLD",7316,"REQB","B","DVBA*2.7*137",3)

"KRN",19,9510,-1)
0^1
"KRN",19,9510,0)
DVBA CAPRI GUI^Capri GUI (Broker)^^B^^^^^^^^AUTOMATED MED INFO EXCHANGE^^1
"KRN",19,9510,1,0)
^19.06^2^2^3051219^^^^
"KRN",19,9510,1,1,0)
This is the 'B' type option used by CAPRI GUI client application. It
"KRN",19,9510,1,2,0)
contains all the RPCs used by the CAPRI GUI application.
"KRN",19,9510,20)
 
"KRN",19,9510,25)
 
"KRN",19,9510,99.1)
61384,42885
"KRN",19,9510,"RPC",0)
^19.05P^135^134
"KRN",19,9510,"RPC",1,0)
DVBAB REPORT LISTS
"KRN",19,9510,"RPC",2,0)
DVBAB APPOINTMENT LIST
"KRN",19,9510,"RPC",3,0)
DVBAB CHECK CREDENTIALS
"KRN",19,9510,"RPC",4,0)
DVBAB FIND EXAMS
"KRN",19,9510,"RPC",5,0)
DVBAB PTINQ
"KRN",19,9510,"RPC",6,0)
DVBAB INCREASE EXAM COUNT
"KRN",19,9510,"RPC",7,0)
DVBAB SEND MSG
"KRN",19,9510,"RPC",8,0)
DVBAB REPORT CHECKLIST
"KRN",19,9510,"RPC",9,0)
DDR FILER
"KRN",19,9510,"RPC",10,0)
DDR LISTER
"KRN",19,9510,"RPC",11,0)
DDR VALIDATOR
"KRN",19,9510,"RPC",12,0)
DDR GETS ENTRY DATA
"KRN",19,9510,"RPC",14,0)
XWB GET VARIABLE VALUE
"KRN",19,9510,"RPC",15,0)
DVBAB HEALTH SUMMARY TEXT
"KRN",19,9510,"RPC",16,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,9510,"RPC",17,0)
TIU GET RECORD TEXT
"KRN",19,9510,"RPC",18,0)
ORQQCN LIST
"KRN",19,9510,"RPC",19,0)
ORQQCN DETAIL
"KRN",19,9510,"RPC",20,0)
DVBAB INST LIST
"KRN",19,9510,"RPC",22,0)
ORWRP REPORT TEXT
"KRN",19,9510,"RPC",23,0)
ORWORR AGET
"KRN",19,9510,"RPC",24,0)
ORWRA IMAGING EXAMS
"KRN",19,9510,"RPC",25,0)
ORWRP1 LISTNUTR
"KRN",19,9510,"RPC",26,0)
ORWMC PATIENT PROCEDURES
"KRN",19,9510,"RPC",27,0)
ORQQPL PROBLEM LIST
"KRN",19,9510,"RPC",28,0)
ORWORR GET4LST
"KRN",19,9510,"RPC",29,0)
ORWLR CUMULATIVE REPORT
"KRN",19,9510,"RPC",32,0)
DVBAB DATETIME
"KRN",19,9510,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,9510,"RPC",35,0)
DVBAB SC VETERAN REPORT
"KRN",19,9510,"RPC",36,0)
ORQQVS VISITS/APPTS
"KRN",19,9510,"RPC",37,0)
ORWU DT
"KRN",19,9510,"RPC",38,0)
ORWLRR CHART
"KRN",19,9510,"RPC",39,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,9510,"RPC",40,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,9510,"RPC",41,0)
DVBAB REPORT EXAM CHKLIST
"KRN",19,9510,"RPC",42,0)
DVBAB REPORT ADMINQ
"KRN",19,9510,"RPC",43,0)
DVBAB REPORT INCOMPVET
"KRN",19,9510,"RPC",44,0)
DVBAB REPORT DISCHARGE
"KRN",19,9510,"RPC",45,0)
DVBAB REPORT READMIT
"KRN",19,9510,"RPC",46,0)
DVBAB REPORT ADMISSIONS
"KRN",19,9510,"RPC",47,0)
DVBAB REPORT 7131INQ
"KRN",19,9510,"RPC",48,0)
DVBAB PENDING C&P REPORT
"KRN",19,9510,"RPC",49,0)
DVBAB REPORT CPDETAILS
"KRN",19,9510,"RPC",50,0)
DVBAB AMIS REPORT
"KRN",19,9510,"RPC",51,0)
DVBAB REPORT PENDING7131
"KRN",19,9510,"RPC",52,0)
DVBAB LABLIST
"KRN",19,9510,"RPC",53,0)
DVBAB VERSION
"KRN",19,9510,"RPC",54,0)
DDR DELETE ENTRY
"KRN",19,9510,"RPC",55,0)
ORWRP REPORT LISTS
"KRN",19,9510,"RPC",57,0)
DVBAB DIVISION
"KRN",19,9510,"RPC",58,0)
DVBAB TEAM PATIENTS
"KRN",19,9510,"RPC",59,0)
ORWCIRN FACLIST
"KRN",19,9510,"RPC",60,0)
XWB REMOTE STATUS CHECK
"KRN",19,9510,"RPC",61,0)
XWB REMOTE GETDATA
"KRN",19,9510,"RPC",63,0)
ORWPT DIEDON
"KRN",19,9510,"RPC",66,0)
XWB REMOTE RPC
"KRN",19,9510,"RPC",68,0)
DDR FIND1
"KRN",19,9510,"RPC",69,0)
DVBAB REPORTS
"KRN",19,9510,"RPC",70,0)
ORWRP2 COMPABV
"KRN",19,9510,"RPC",71,0)
DVBAB SURGERY CASE
"KRN",19,9510,"RPC",72,0)
ORWRP2 COMPDISP
"KRN",19,9510,"RPC",73,0)
ORWRP2 HS COMPONENTS
"KRN",19,9510,"RPC",74,0)
ORWRP2 HS COMPONENT SUBS
"KRN",19,9510,"RPC",75,0)
ORWRP2 HS COMP FILES
"KRN",19,9510,"RPC",76,0)
ORWRP2 SAVLKUP
"KRN",19,9510,"RPC",77,0)
ORWRP2 HS REPORT TEXT
"KRN",19,9510,"RPC",78,0)
ORWRP2 GETLKUP
"KRN",19,9510,"RPC",79,0)
ORWRP2 HS FILE LOOKUP
"KRN",19,9510,"RPC",80,0)
ORWRP2 HS SUBITEMS
"KRN",19,9510,"RPC",81,0)
DVBAB MAIL INIT
"KRN",19,9510,"RPC",82,0)
ORWLRR MICRO
"KRN",19,9510,"RPC",83,0)
TIU CREATE RECORD
"KRN",19,9510,"RPC",84,0)
DVBAB MPI ASSIGN ICN
"KRN",19,9510,"RPC",85,0)
TIU SIGN RECORD
"KRN",19,9510,"RPC",86,0)
TIU DELETE RECORD
"KRN",19,9510,"RPC",87,0)
TIU REQUIRES COSIGNATURE
"KRN",19,9510,"RPC",88,0)
DVBAB REPORT ADMISSION INQUIRY
"KRN",19,9510,"RPC",89,0)
DVBAB REPORT NEW NOTICES DC
"KRN",19,9510,"RPC",90,0)
DVBAB NOTE TITLES
"KRN",19,9510,"RPC",91,0)
DVBAB TEMPLATE DEFINITION
"KRN",19,9510,"RPC",92,0)
DDR FINDER
"KRN",19,9510,"RPC",93,0)
ORWCV VST
"KRN",19,9510,"RPC",94,0)
TIU LOAD BOILERPLATE TEXT
"KRN",19,9510,"RPC",95,0)
DVBAB GET VISIT INFO
"KRN",19,9510,"RPC",96,0)
DVBAB REPORT SPECIAL
"KRN",19,9510,"RPC",97,0)
DVBAB SAVE FORM
"KRN",19,9510,"RPC",98,0)
DVBAB EXAMS BY DATE
"KRN",19,9510,"RPC",99,0)
TIU GET SITE PARAMETERS
"KRN",19,9510,"RPC",100,0)
TIU GET ALERT INFO
"KRN",19,9510,"RPC",101,0)
ORWU VALIDSIG
"KRN",19,9510,"RPC",103,0)
ORWORB FASTUSER
"KRN",19,9510,"RPC",104,0)
DVBAB TEMPLATE LIST
"KRN",19,9510,"RPC",105,0)
DVBAB LOAD FORM
"KRN",19,9510,"RPC",106,0)
DVBAB TEMPLATE REPORT FULL
"KRN",19,9510,"RPC",107,0)
DVBAB FETCH 1U4N
"KRN",19,9510,"RPC",108,0)
DVBAB FORM DATA BACKUP DELETE
"KRN",19,9510,"RPC",109,0)
DVBAB FORM DATA BACKUP RESTORE
"KRN",19,9510,"RPC",110,0)
DDR LOCK/UNLOCK NODE
"KRN",19,9510,"RPC",111,0)
DVBAB FORM COPY
"KRN",19,9510,"RPC",112,0)
DVBAB FIND DUPS
"KRN",19,9510,"RPC",113,0)
DVBAB NEW PERSON FILE
"KRN",19,9510,"RPC",114,0)
DVBAB FORM DATA BACKUP
"KRN",19,9510,"RPC",116,0)
DVBAB SET DIVISION
"KRN",19,9510,"RPC",117,0)
DVBAB GET URL
"KRN",19,9510,"RPC",118,0)
ORPRF TRIGGER POPUP
"KRN",19,9510,"RPC",119,0)
ORPRF HASFLG
"KRN",19,9510,"RPC",120,0)
ORPRF HASCAT1
"KRN",19,9510,"RPC",121,0)
ORPRF GETFLG
"KRN",19,9510,"RPC",122,0)
ORPRF CLEAR
"KRN",19,9510,"RPC",123,0)
TIU SET DOCUMENT TEXT
"KRN",19,9510,"RPC",124,0)
DVBAB ORIGINAL PROCESSING DATE
"KRN",19,9510,"RPC",125,0)
TIU CREATE ADDENDUM RECORD
"KRN",19,9510,"RPC",126,0)
TIU UPDATE RECORD
"KRN",19,9510,"RPC",128,0)
XUS SET VISITOR
"KRN",19,9510,"RPC",129,0)
XUS GET VISITOR
"KRN",19,9510,"RPC",130,0)
DVBAB RESTRICTED LIST PATIENTS
"KRN",19,9510,"RPC",131,0)
DVBAB DOD INFO
"KRN",19,9510,"RPC",132,0)
DVBAB DOD REPORT
"KRN",19,9510,"RPC",133,0)
DVBAB DOD REPORT TYPES
"KRN",19,9510,"RPC",134,0)
DVBAB FIND DFN BY ICN
"KRN",19,9510,"RPC",135,0)
DVBAB CCOW
"KRN",19,9510,"U")
CAPRI GUI (BROKER)
"KRN",8994,1612,-1)
0^4
"KRN",8994,1612,0)
DVBAB DOD REPORT^SENDRPT^DVBABDOD^4^R^^^1
"KRN",8994,1612,1,0)
^^11^11^3090408^
"KRN",8994,1612,1,1,0)
This remote procedure call returns a DOD report from the FHIE framework.  
"KRN",8994,1612,1,2,0)
The RPC is designed specifically for the FHIE VistA server not the local 
"KRN",8994,1612,1,3,0)
VAMC facilities.  It is distributed nationally with the CAPRI application 
"KRN",8994,1612,1,4,0)
to keep the remote procedures and the DVBA CAPRI GUI option consistent on 
"KRN",8994,1612,1,5,0)
all systems using CAPRI.  Please do not use.
"KRN",8994,1612,1,6,0)
 
"KRN",8994,1612,1,7,0)
Input:  IEN       = Patient's DFN
"KRN",8994,1612,1,8,0)
        DATATYPE  = Type of data being requested
"KRN",8994,1612,1,9,0)
        BEGDATE   = Beginning search date
"KRN",8994,1612,1,10,0)
        ENDDATE   = Ending search date
"KRN",8994,1612,1,11,0)
        ORMAX     = Max number of entries for report 
"KRN",8994,1612,2,0)
^8994.02A^5^5
"KRN",8994,1612,2,1,0)
IEN^1
"KRN",8994,1612,2,2,0)
DATATYPE^1
"KRN",8994,1612,2,3,0)
BEGDATE^1
"KRN",8994,1612,2,4,0)
ENDDATE^1
"KRN",8994,1612,2,5,0)
ORMAX^1
"KRN",8994,1612,2,"B","BEGDATE",3)

"KRN",8994,1612,2,"B","DATATYPE",2)

"KRN",8994,1612,2,"B","ENDDATE",4)

"KRN",8994,1612,2,"B","IEN",1)

"KRN",8994,1612,2,"B","ORMAX",5)

"KRN",8994,1658,-1)
0^3
"KRN",8994,1658,0)
DVBAB DOD INFO^INFOMSG^DVBABDOD^1^R
"KRN",8994,1658,1,0)
^^5^5^3090408^
"KRN",8994,1658,1,1,0)
This remote procedure call returns a message to be displayed in CAPRI.  
"KRN",8994,1658,1,2,0)
The RPC is designed specifically for the FHIE VistA server not the local 
"KRN",8994,1658,1,3,0)
VAMC facilities.  It is distributed nationally with the CAPRI application 
"KRN",8994,1658,1,4,0)
to keep the remote procedures and the DVBA CAPRI GUI option consistent on 
"KRN",8994,1658,1,5,0)
all systems using CAPRI.  Please do not use.
"KRN",8994,1669,-1)
0^6
"KRN",8994,1669,0)
DVBAB FIND DFN BY ICN^ICN^DVBABDOD^4^P^0
"KRN",8994,1669,1,0)
^^6^6^3090408^
"KRN",8994,1669,1,1,0)
This remote procedure call returns the patient's DFN associated with the 
"KRN",8994,1669,1,2,0)
ICN passed to the RPC.  The DFN is the internal entry number in the 
"KRN",8994,1669,1,3,0)
Patient (#2) file.  The RPC is designed specifically for the FHIE VistA 
"KRN",8994,1669,1,4,0)
server not the local VAMC facilities.  It is distributed nationally with 
"KRN",8994,1669,1,5,0)
the CAPRI application to keep the remote procedures and the DVBA CAPRI 
"KRN",8994,1669,1,6,0)
GUI option consistent on all systems using CAPRI.  Please do not use.
"KRN",8994,1669,2,0)
^8994.02A^1^1
"KRN",8994,1669,2,1,0)
ICN^1^^1^1
"KRN",8994,1669,2,1,1,0)
^^1^1^3020802^
"KRN",8994,1669,2,1,1,1,0)
INTEGRATION CONTROL NUMBER
"KRN",8994,1669,2,"B","ICN",1)

"KRN",8994,1669,2,"PARAMSEQ",1,1)

"KRN",8994,1670,-1)
0^5
"KRN",8994,1670,0)
DVBAB DOD REPORT TYPES^RPTTYPS^DVBABDOD^2^R
"KRN",8994,1670,1,0)
^^5^5^3090408^
"KRN",8994,1670,1,1,0)
This remote procedure call returns a list of available report types.  The 
"KRN",8994,1670,1,2,0)
RPC is designed specifically for the FHIE VistA server not the local VAMC 
"KRN",8994,1670,1,3,0)
facilities.  It is distributed nationally with the CAPRI application to 
"KRN",8994,1670,1,4,0)
keep the remote procedures and the DVBA CAPRI GUI option consistent on 
"KRN",8994,1670,1,5,0)
all systems using CAPRI.  Please do not use.
"KRN",8994,2254,-1)
0^7
"KRN",8994,2254,0)
DVBAB CCOW^CCOW^DVBABFRM^1^S
"KRN",8994,2254,1,0)
^^6^6^3090512^
"KRN",8994,2254,1,1,0)
This remote procedure encapsulates the supported calls $$SITE^VASITE
"KRN",8994,2254,1,2,0)
and $$PROD^XUPROD.
"KRN",8994,2254,1,3,0)
 
"KRN",8994,2254,1,4,0)
Paramater TYPE
"KRN",8994,2254,1,5,0)
     1 = Pass back local station number ($$SITE^VASITE)
"KRN",8994,2254,1,6,0)
     2 = Pass back whether production account or not ($$PROD^XUPROD)
"KRN",8994,2254,2,0)
^8994.02A^2^2
"KRN",8994,2254,2,1,0)
INFOTYPE^1^^1
"KRN",8994,2254,2,2,0)
TYPE
"KRN",8994,2254,2,"B","INFOTYPE",1)

"KRN",8994,2254,2,"B","TYPE",2)

"KRN",8994,2887,-1)
0^2
"KRN",8994,2887,0)
DVBAB RESTRICTED LIST PATIENTS^RSTLIST^DVBABFRM^4
"KRN",8994,2887,1,0)
^^1^1^3090109^
"KRN",8994,2887,1,1,0)
Returns a list of restricted patients for CAPRI when in remote mode.
"KRN",8994,2887,2,0)
^8994.02A^1^1
"KRN",8994,2887,2,1,0)
DUZ^1
"KRN",8994,2887,2,"B","DUZ",1)

"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^3010328
"PKG",223,22,1,"PAH",1,0)
140^3090512
"PKG",223,22,1,"PAH",1,1,0)
^^2^2^3090512
"PKG",223,22,1,"PAH",1,1,1,0)
Please refer to patch DVBA*2.7*140 for a complete description of this 
"PKG",223,22,1,"PAH",1,1,2,0)
patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DVBAB84")
0^1^B36589482^B31846335
"RTN","DVBAB84",1,0)
DVBAB84 ;ALB/DK - CAPRI REMOTE NEW PERSON FILE ;11/17/08
"RTN","DVBAB84",2,0)
 ;;2.7;AMIE;**90,137,140**;Apr 10, 1995;Build 16
"RTN","DVBAB84",3,0)
 ;
"RTN","DVBAB84",4,0)
START(MSG) ;RPC DVBAB NEW PERSON FILE
"RTN","DVBAB84",5,0)
 K ^TMP("DVBAB200",$J)
"RTN","DVBAB84",6,0)
 N DATA,VAR,VAR1,DVBDIV,DVBDIVN,DVBRPT,CNT
"RTN","DVBAB84",7,0)
 S DATA="",CNT=0,MSG=$NA(^TMP("DVBAB200",$J))
"RTN","DVBAB84",8,0)
 F  S DATA=$O(^VA(200,"B",DATA)) Q:DATA=""  D
"RTN","DVBAB84",9,0)
 . S VAR=""
"RTN","DVBAB84",10,0)
 . F  S VAR=$O(^VA(200,"B",DATA,VAR)) Q:VAR=""  D
"RTN","DVBAB84",11,0)
 . . D GETS^DIQ(200,VAR_",",".01","E","DVBRPT")
"RTN","DVBAB84",12,0)
 . . I $P($G(^VA(200,VAR,2,0)),"^",3)'="" D  Q
"RTN","DVBAB84",13,0)
 . . . S VAR1=""
"RTN","DVBAB84",14,0)
 . . . F  S VAR1=$O(^VA(200,VAR,2,"B",VAR1)) Q:VAR1=""  D
"RTN","DVBAB84",15,0)
 . . . . S DVBDIV=$$GET1^DIQ(200.02,VAR1_","_VAR_",",.01,"I")
"RTN","DVBAB84",16,0)
 . . . . S DVBDIVN=$$GET1^DIQ(200.02,VAR1_","_VAR_",",.01,"E")
"RTN","DVBAB84",17,0)
 . . . . S ^TMP("DVBAB200",$J,CNT)=VAR_"^"_DVBRPT(200,VAR_",",.01,"E")_"^"_DVBDIV_"^"_DVBDIVN_$C(13)
"RTN","DVBAB84",18,0)
 . . . . S CNT=CNT+1
"RTN","DVBAB84",19,0)
 . . S ^TMP("DVBAB200",$J,CNT)=VAR_"^"_DVBRPT(200,VAR_",",.01,"E")_"^"_"^"_$C(13)
"RTN","DVBAB84",20,0)
 . . S CNT=CNT+1
"RTN","DVBAB84",21,0)
 Q
"RTN","DVBAB84",22,0)
DUZ2(Y,NUM) ;RPC DVBAB SET DUZ2
"RTN","DVBAB84",23,0)
 N X,Z S NUM=$G(NUM),Y=1,X="0^STATION NUMBER "
"RTN","DVBAB84",24,0)
 I NUM="" S Y=X_"IS REQUIRED"
"RTN","DVBAB84",25,0)
 I '$D(^DIC(4,"D",NUM))&Y S Y=X_"DOES NOT EXIST"
"RTN","DVBAB84",26,0)
 Q:'Y  S Y=$O(^DIC(4,"D",NUM,"")),Z=""
"RTN","DVBAB84",27,0)
 S:Y]"" Z=$G(^DIC(4,Y,0))
"RTN","DVBAB84",28,0)
 I Y=""!(Z="") S Y=X_"HAS A BAD X-REF" Q
"RTN","DVBAB84",29,0)
 S DUZ(2)=Y,Y=Y_U_$P(Z,U)
"RTN","DVBAB84",30,0)
 Q
"RTN","DVBAB84",31,0)
DUP(Y,NAM,DOB,SSN) ;RPC DVBAB FIND DUPS
"RTN","DVBAB84",32,0)
 N E,C,N,D,S,A,B,M S B=" - Must be ",M=B_"at least 1 argument"
"RTN","DVBAB84",33,0)
 S NAM=$$N0($G(NAM)),DOB=$P($G(DOB),"."),SSN=$$U($G(SSN))
"RTN","DVBAB84",34,0)
 S (C,N,D,S)=0,E="-1^Invalid Argument: ",Y=$NA(^TMP("DVBDUP",$J,DUZ)) K @Y
"RTN","DVBAB84",35,0)
 I '$L(NAM_DOB_SSN) S C=E_"None Passed"_M
"RTN","DVBAB84",36,0)
 S:'C&DOB&'$L(NAM_SSN) C=E_$P(M," ",3,8)_" passed with DOB"
"RTN","DVBAB84",37,0)
 S:'C N=$$VN(NAM) I N S C=E_"NAM"_B_"LAST,FIRST or IEN"
"RTN","DVBAB84",38,0)
 S:'C D=$$VD(DOB) I D S C=E_"DOB"_B_"FileMan format"
"RTN","DVBAB84",39,0)
 S:'C S=$$VS(SSN) I S>0 S C=E_"SSN"_B_"9 digits, 1U4N format, or P (for pseudo-SSN)"
"RTN","DVBAB84",40,0)
 I C S @Y@(0)=C Q
"RTN","DVBAB84",41,0)
 S:S<0 SSN=$$S(NAM,DOB)
"RTN","DVBAB84",42,0)
 D DN(.N,NAM),DD(.D,DOB,NAM,SSN),DS(.S,SSN,NAM,DOB),WT(Y,.A,.N,.D,.S)
"RTN","DVBAB84",43,0)
 Q
"RTN","DVBAB84",44,0)
DN(A,N) I N=""!A S A=0 Q  ;Dup Name checks
"RTN","DVBAB84",45,0)
 N K,M S A=0,M=$$N2(N),K=$$N1(M)_"zzzzzzzzzz"
"RTN","DVBAB84",46,0)
 F  S K=$O(^DPT("B",K)) Q:$$N2(K)'=M  D:$$M("N",K,N,,,5) D0(.A,"B",K)
"RTN","DVBAB84",47,0)
 Q
"RTN","DVBAB84",48,0)
DD(A,D,N,S) I A!'D S A=0 Q  ;Dup DOB checks
"RTN","DVBAB84",49,0)
 N K,M,F S A=0,M=$E(D,1,5),K=M-1_99
"RTN","DVBAB84",50,0)
 F  S K=$O(^DPT("ADOB",K)) Q:$E(K,1,5)'=M  D
"RTN","DVBAB84",51,0)
 .S F=0 I N]"",$$M("DN",K,N,D,,7) S F=1
"RTN","DVBAB84",52,0)
 .I 'F,S]"",$$M("DS",K,,D,S,7) S F=1
"RTN","DVBAB84",53,0)
 .D:F D0(.A,"ADOB",K)
"RTN","DVBAB84",54,0)
 Q
"RTN","DVBAB84",55,0)
DS(A,S,N,D) N F,K,M,X,R,P I A!'S S A=0 Q  ;Dup SSN checks
"RTN","DVBAB84",56,0)
 S A=0,P=$L(S),R=P-4,M=$E(S,1,R),K=M-1_9999,X=$S(P=5:"BS5",1:"SSN")
"RTN","DVBAB84",57,0)
 F  S K=$O(^DPT(X,K)) Q:$E(K,1,R)'=M  D
"RTN","DVBAB84",58,0)
 .S F=$$M("S",K,,,S,P) I F D D0(.A,X,K) Q
"RTN","DVBAB84",59,0)
 .Q:N=""&'D  Q:'$$FF(S,K)
"RTN","DVBAB84",60,0)
 .I D,$$MD(K,D,1) D D0(.A,X,K,3,D) Q
"RTN","DVBAB84",61,0)
 .I N]"",$$MN(K,N,1) D D0(.A,X,K,1,N)
"RTN","DVBAB84",62,0)
 Q
"RTN","DVBAB84",63,0)
D0(A,X,Y,P,V) N I,C,Z S I="",C="N D     S",P=$G(P),V=$G(V)
"RTN","DVBAB84",64,0)
 F  S I=$O(^DPT(X,Y,I)) Q:'I  D
"RTN","DVBAB84",65,0)
 .S Z=$G(^DPT(I,0)) Q:Z=""
"RTN","DVBAB84",66,0)
 .I P,'$$M($E(C,P),$P(Z,U,P),V,V,V,5) Q
"RTN","DVBAB84",67,0)
 .S A=A+1,A(I)=Z
"RTN","DVBAB84",68,0)
 Q
"RTN","DVBAB84",69,0)
VN(X) Q:X="" 0  Q X'?2.U1","2.U  ;Validate Name
"RTN","DVBAB84",70,0)
VD(X) Q:X="" 0  Q:X'?7N 1  N M,D S M=$E(X,4,5),D=$E(X,6,7)  ;Validate DOB
"RTN","DVBAB84",71,0)
 Q:M<1!(M>12)!(D<0) 1  Q (D>$$D(M,$E(X,1,3)))
"RTN","DVBAB84",72,0)
VS(X) Q:X="" 0  Q:$E(X,$L(X))="P" -1  N L S L=$L(X)  ;Validate SSN
"RTN","DVBAB84",73,0)
 Q:L=5&(X'?1A4N)!(L=9&(X'?9N))!(L<5)!(L>9) 1
"RTN","DVBAB84",74,0)
 Q:$E(X,1,5)="00000" 0  ;Test Patient
"RTN","DVBAB84",75,0)
 Q $E(X,1)=9!($E(X,1,3)="000")  ;Can't begin with 9 or 000
"RTN","DVBAB84",76,0)
MN(X,N,F) S F=$G(F)_U_($$N2(X,2)=$$N2(N,2)) Q:'F $P(F,U,2)  Q $$N2(X)=$$N2(N)  ;Match Name
"RTN","DVBAB84",77,0)
MD(X,D,F) S F=$G(F)_U_($E(X,4,5)=$E(D,4,5)) Q:'F $P(F,U,2)  Q $E(X,1,3)=$E(D,1,3)  ;Match DOB
"RTN","DVBAB84",78,0)
MS(X,S) N I,K S K=0,X=$$L4(X),S=$$L4(S)  ;Match SSN
"RTN","DVBAB84",79,0)
 F I=1:1:4 S K=$E(X,I)=$E(S,I)+K
"RTN","DVBAB84",80,0)
 Q:K>1 1  ;2 nums, same spot
"RTN","DVBAB84",81,0)
 Q $$S4(X)=$$S4(S)  ;ALL 4 nums, any spot
"RTN","DVBAB84",82,0)
M(Y,X,N,D,S,L) N A,B,C,Z S (A,B,C)=0,Z=$L(X),L=+$G(L) Q:Z<L 0
"RTN","DVBAB84",83,0)
 S:Y["N" A=$$MN(X,N) S:Y["D" B=$$MD(X,D) S:Y["S" C=$$MS(X,S)
"RTN","DVBAB84",84,0)
 Q:Y="N" A  Q:Y="D" B  Q:Y="S" C  Q:Y'["N" B&C
"RTN","DVBAB84",85,0)
 Q:Y'["D" A&C  Q:Y'["S" A&B  Q A&B&C
"RTN","DVBAB84",86,0)
WT(Y,A,N,D,S) N C S C=$$W0(.A,.N,.D,.S),@Y@(0)=C Q:'C  ;Weights
"RTN","DVBAB84",87,0)
 N I,J,K,L S (C,I,J,K,L)=""
"RTN","DVBAB84",88,0)
 F  S I=$O(A(I)) Q:'I  F  S J=$O(A(I,J)) Q:'J  D
"RTN","DVBAB84",89,0)
 .S K=K+1,K(-J,$P(A(I,J),U),K)=I_U_A(I,J)
"RTN","DVBAB84",90,0)
 F  S I=$O(K(I)) Q:'I  F  S J=$O(K(I,J)) Q:J=""  D
"RTN","DVBAB84",91,0)
 .F  S L=$O(K(I,J,L)) Q:'L  D
"RTN","DVBAB84",92,0)
 ..;If SSN or DOB should not be displayed in the Patient File Matches 
"RTN","DVBAB84",93,0)
 ..;list in CAPRI replace DOB and SSN with *SENSITIVE* in DOB and SSN 
"RTN","DVBAB84",94,0)
 ..;fields in RPC results.
"RTN","DVBAB84",95,0)
 ..N DVBADOB,DVBASSN,DVBADFN
"RTN","DVBAB84",96,0)
 ..;1st piece in K array is DFN followed by 0th node of DPT record.
"RTN","DVBAB84",97,0)
 ..;DOB found in 3rd piece of 0th node and 4th piece K array
"RTN","DVBAB84",98,0)
 ..S DVBADFN=+$P($G(K(I,J,L)),"^")
"RTN","DVBAB84",99,0)
 ..S DVBADOB=$$DOB^DPTLK1(DVBADFN,2)
"RTN","DVBAB84",100,0)
 ..I DVBADOB="*SENSITIVE*" S $P(K(I,J,L),"^",4)=DVBADOB
"RTN","DVBAB84",101,0)
 ..;1st piece in K array is DFN followed by 0th node of DPT( record.  
"RTN","DVBAB84",102,0)
 ..;SSN found in 9th piece of the 0th node and 10 piece in K array.
"RTN","DVBAB84",103,0)
 ..S DVBASSN=$$SSN^DPTLK1(DVBADFN)
"RTN","DVBAB84",104,0)
 ..I DVBASSN="*SENSITIVE*" S $P(K(I,J,L),"^",10)=DVBASSN
"RTN","DVBAB84",105,0)
 ..S C=C+1
"RTN","DVBAB84",106,0)
 ..S @Y@(C)=K(I,J,L)
"RTN","DVBAB84",107,0)
 Q
"RTN","DVBAB84",108,0)
W0(A,N,D,S) Q:N&D&S $$W3(.A,.N,.D,.S)  Q:N&S&'D $$W2(.A,.N,.S)
"RTN","DVBAB84",109,0)
 Q:D&S&'N $$W2(.A,.D,.S)  Q:N&D&'S $$W2(.A,.N,.D)
"RTN","DVBAB84",110,0)
 Q:S&'N&'D $$W1(.A,.S)  Q:N&'D&'S $$W1(.A,.N)  ;Q:D&'N&'S $$W1(.A,.D)
"RTN","DVBAB84",111,0)
 Q 0
"RTN","DVBAB84",112,0)
W1(A,X) N I,C S (I,C)=0 ;Weighting 1
"RTN","DVBAB84",113,0)
 F  S I=$O(X(I)) Q:'I  S C=C+1,A(I,1)=X(I)
"RTN","DVBAB84",114,0)
 Q C
"RTN","DVBAB84",115,0)
W2(A,X,Y) N I,C S (I,C)=0 ;Weighting 2
"RTN","DVBAB84",116,0)
 F  S I=$O(X(I)) Q:'I  S C=C+1 D
"RTN","DVBAB84",117,0)
 .I $D(Y(I)) S A(I,2)=Y(I)
"RTN","DVBAB84",118,0)
 .E  S A(I,1)=X(I)
"RTN","DVBAB84",119,0)
 F  S I=$O(Y(I)) Q:'I  S:'$D(X(I)) C=C+1,A(I,1)=Y(I)
"RTN","DVBAB84",120,0)
 Q C
"RTN","DVBAB84",121,0)
W3(A,X,Y,Z) N I,C S (I,C)=0 ;Weighting 3
"RTN","DVBAB84",122,0)
 F  S I=$O(X(I)) Q:'I  S C=C+1 D
"RTN","DVBAB84",123,0)
 .I $D(Y(I)) D  Q
"RTN","DVBAB84",124,0)
 ..I $D(Z(I)) S A(I,3)=Z(I)
"RTN","DVBAB84",125,0)
 ..E  S A(I,2)=Y(I)
"RTN","DVBAB84",126,0)
 .I $D(Z(I)) S A(I,2)=Z(I)
"RTN","DVBAB84",127,0)
 .E  S A(I,1)=X(I)
"RTN","DVBAB84",128,0)
 Q C+$$W2(.A,.Y,.Z)
"RTN","DVBAB84",129,0)
N0(X) Q:X="" ""  I X?.1"`"1.N S:X["`" X=$P(X,"`",2) S X=$P($G(^DPT(X,0)),U)
"RTN","DVBAB84",130,0)
 Q $$U($$P(X,", "))
"RTN","DVBAB84",131,0)
N1(X) Q $E(X,1,$L(X)-1)_$C($A($E(X,$L(X)))-1)
"RTN","DVBAB84",132,0)
N2(X,Y) Q $E($$P($P(X,",",$G(Y,1)),2),1,2)
"RTN","DVBAB84",133,0)
U(X) Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","DVBAB84",134,0)
L4(X) N L S L=$L(X) S:$E(X,L)="P" L=L-1,X=$E(X,1,L) Q $E(X,L-3,L)
"RTN","DVBAB84",135,0)
D(M,Y) Q:M=2 28+$$L(Y+1700)  Q 31-((M<7&'(M#2))!(M>7&(M#2)))
"RTN","DVBAB84",136,0)
L(Y) Q Y#100!('(Y#400)&'(Y#4))
"RTN","DVBAB84",137,0)
C(X) S X=$A($E(X,1))-65\3+1 Q:X<0 0  Q X
"RTN","DVBAB84",138,0)
P(X,C,L) N I,Y,Z S Z="",Y=X,C=$G(C,U),L=$G(L,$L(Y))
"RTN","DVBAB84",139,0)
 F I=1:1:$L(Y) Q:$L(Z)=L  S X=$E(Y,I) S:X?1U!(C[X) Z=Z_X
"RTN","DVBAB84",140,0)
 Q Z
"RTN","DVBAB84",141,0)
S(N,D) N L1,L2,L3 S:$G(D)="" D=2000000 ;PSEU^DGRPDD1
"RTN","DVBAB84",142,0)
 S L3=$$C(N),L1=$$C($P(N," ",2)),L2=$$C($P(N,",",2))
"RTN","DVBAB84",143,0)
 Q L2_L1_L3_$E(D,4,7)_$E(D,2,3)_"P"
"RTN","DVBAB84",144,0)
A(X) Q $S(X<0:X*-1,1:X)
"RTN","DVBAB84",145,0)
FF(X,Y) N I,K S X=$$L4(X),Y=$$L4(Y),K=0
"RTN","DVBAB84",146,0)
 F I=1:1:4 S:$$A($E(X,I)-$E(Y,I))<2 K=K+1
"RTN","DVBAB84",147,0)
 Q K>2
"RTN","DVBAB84",148,0)
S4(X) N I,J,K,L,M S L=$L(X)
"RTN","DVBAB84",149,0)
 F I=2:1:L S J=I,K=$E(X,I) D
"RTN","DVBAB84",150,0)
 .F  Q:J=1  S M=$E(X,J-1)  Q:M'>K  S $E(X,J)=M,J=J-1
"RTN","DVBAB84",151,0)
 .S $E(X,J)=K
"RTN","DVBAB84",152,0)
 Q X
"RTN","DVBABDOD")
0^2^B8507285^n/a
"RTN","DVBABDOD",1,0)
DVBABDOD ;ALB/SPH - FHIE SERVER RPC'S ; 04/21/2009
"RTN","DVBABDOD",2,0)
 ;;2.7;AMIE;**140**;Apr 10, 1995;Build 16
"RTN","DVBABDOD",3,0)
 ;
"RTN","DVBABDOD",4,0)
 ; This routine supports the following remote procedure calls:
"RTN","DVBABDOD",5,0)
 ;
"RTN","DVBABDOD",6,0)
 ;   RPC Name                 Tag
"RTN","DVBABDOD",7,0)
 ;   ----------------------   ---------
"RTN","DVBABDOD",8,0)
 ;   DVBAB DOD REPORT TYPES   RPTTYPS
"RTN","DVBABDOD",9,0)
 ;   DVBAB DOD INFO           INFOMSG
"RTN","DVBABDOD",10,0)
 ;   DVBAB DOD REPORT         SENDRPT
"RTN","DVBABDOD",11,0)
 ;   DVBAB FIND DFN BY ICN    ICN
"RTN","DVBABDOD",12,0)
 ;              
"RTN","DVBABDOD",13,0)
 ; The routine is designed specifically for the Federal Health Information
"RTN","DVBABDOD",14,0)
 ; Exchange (FHIE) server (Station 200). It is distributed nationally with
"RTN","DVBABDOD",15,0)
 ; the CAPRI application so the RPC's and this supporting routine are
"RTN","DVBABDOD",16,0)
 ; consistent on all systems using CAPRI.
"RTN","DVBABDOD",17,0)
 ;
"RTN","DVBABDOD",18,0)
 ;
"RTN","DVBABDOD",19,0)
SENDRPT(DVBABY,IEN,DATATYPE,BEGDATE,ENDDATE,ORMAX,DVBABTMP) ;return DOD report
"RTN","DVBABDOD",20,0)
 ;This remote procedure call returns a DOD report from the FHIE framework.
"RTN","DVBABDOD",21,0)
 ;
"RTN","DVBABDOD",22,0)
 ; -- rpc: DVBAB DOD REPORT
"RTN","DVBABDOD",23,0)
 ; 
"RTN","DVBABDOD",24,0)
 ; Supported References:
"RTN","DVBABDOD",25,0)
 ;  DBIA #3486: D GCPR^OMGCOAS1(IEN,DATATYPE,BEGDATE,ENDDATE,ORMAX) 
"RTN","DVBABDOD",26,0)
 ;
"RTN","DVBABDOD",27,0)
 ; Input:  IEN       = Patient's DFN
"RTN","DVBABDOD",28,0)
 ;         DATATYPE  = Type of data being requested:
"RTN","DVBABDOD",29,0)
 ;                       LRO - Lab Orders
"RTN","DVBABDOD",30,0)
 ;                       LRC - Chem & Hem
"RTN","DVBABDOD",31,0)
 ;                       SP  - Surgical Path
"RTN","DVBABDOD",32,0)
 ;                       CY  - Cytology
"RTN","DVBABDOD",33,0)
 ;                       MI  - Microbiology
"RTN","DVBABDOD",34,0)
 ;                       RR  - Radiology Report
"RTN","DVBABDOD",35,0)
 ;                       RXOP- All Outpatient RX
"RTN","DVBABDOD",36,0)
 ;                       ADT - ADT Summary
"RTN","DVBABDOD",37,0)
 ;                       DS  - Discharge Summary
"RTN","DVBABDOD",38,0)
 ;        
"RTN","DVBABDOD",39,0)
 ;                       RI  - Radiology Impression
"RTN","DVBABDOD",40,0)
 ;                       RXA - Active Outpatient RX
"RTN","DVBABDOD",41,0)
 ;                       ALRG - Allergies
"RTN","DVBABDOD",42,0)
 ;
"RTN","DVBABDOD",43,0)
 ;    TIUPRG - Progress Notes
"RTN","DVBABDOD",44,0)
 ;
"RTN","DVBABDOD",45,0)
 ;    Outpatient encounter
"RTN","DVBABDOD",46,0)
 ;    TIUPRG - Progress Notes
"RTN","DVBABDOD",47,0)
 ;
"RTN","DVBABDOD",48,0)
 ;         BEGDATE   = Beginning search date
"RTN","DVBABDOD",49,0)
 ;         ENDDATE   = Ending search date
"RTN","DVBABDOD",50,0)
 ;         ORMAX     = Max number of entries for report 
"RTN","DVBABDOD",51,0)
 ;
"RTN","DVBABDOD",52,0)
 ;quit if Clinical Observation Access Service (routine: OMGCOAS1) not installed
"RTN","DVBABDOD",53,0)
 Q:'$L($T(GCPR^OMGCOAS1))
"RTN","DVBABDOD",54,0)
 ;
"RTN","DVBABDOD",55,0)
 N DVBATXT
"RTN","DVBABDOD",56,0)
 ;
"RTN","DVBABDOD",57,0)
 S DVBABY=$NA(^TMP(DVBABTMP,$J))
"RTN","DVBABDOD",58,0)
 D GCPR^OMGCOAS1(IEN,DATATYPE,BEGDATE,ENDDATE,ORMAX)
"RTN","DVBABDOD",59,0)
 ; S ^TMP("CAPRI",DUZ)=IEN+"-"+DATATYPE+"-"+BEGDATE+"-"+ENDDATE+"-"+ORMAX
"RTN","DVBABDOD",60,0)
 S DVBATXT=IEN_","_DATATYPE_","_BEGDATE_","_ENDDATE_","_ORMAX_","_DVBABTMP
"RTN","DVBABDOD",61,0)
 S ^TMP("CAPRI",DUZ,$J)=DVBATXT
"RTN","DVBABDOD",62,0)
 ; K IEN,DATATYPE,BEGDATE,ENDDATE,ORMAX,DVBABTMP
"RTN","DVBABDOD",63,0)
 Q
"RTN","DVBABDOD",64,0)
 ;
"RTN","DVBABDOD",65,0)
RPTTYPS(Y) ;return list of available report types
"RTN","DVBABDOD",66,0)
 ;This remote procedure call returns a list of available report types.
"RTN","DVBABDOD",67,0)
 ; 
"RTN","DVBABDOD",68,0)
 ; -- rpc: DVBAB DOD REPORT TYPES
"RTN","DVBABDOD",69,0)
 ;
"RTN","DVBABDOD",70,0)
 S Y(1)="Allergies^ALRG^ORDATA"
"RTN","DVBABDOD",71,0)
 ;S Y(2)="Ambulatory Data^ADR^ORDATA"
"RTN","DVBABDOD",72,0)
 S Y(3)="Expanded ADT^ADT^ORDATA"
"RTN","DVBABDOD",73,0)
 S Y(4)="Consult Report^CONS^ORDATA"
"RTN","DVBABDOD",74,0)
 S Y(5)="Discharge Summary^DS^ORDATA"
"RTN","DVBABDOD",75,0)
 S Y(6)="Lab Orders^LRO^LRO"
"RTN","DVBABDOD",76,0)
 S Y(7)="Chem & Hem^LRC^LRC"
"RTN","DVBABDOD",77,0)
 S Y(8)="Surgical Path^SP^LRA"
"RTN","DVBABDOD",78,0)
 S Y(9)="Cytology^CY^LRCY"
"RTN","DVBABDOD",79,0)
 S Y(10)="Microbiology^MI^LRM"
"RTN","DVBABDOD",80,0)
 S Y(11)="Radiology Report^RR^RAE"
"RTN","DVBABDOD",81,0)
 S Y(12)="Outpatient RX^RXOP^PSOO"
"RTN","DVBABDOD",82,0)
 S Y(13)="Progress Notes^PN^ORDATA"
"RTN","DVBABDOD",83,0)
 Q
"RTN","DVBABDOD",84,0)
 ;
"RTN","DVBABDOD",85,0)
INFOMSG(Y) ;return DOD data message
"RTN","DVBABDOD",86,0)
 ;This remote procedure call returns a message to be displayed in CAPRI. 
"RTN","DVBABDOD",87,0)
 ;
"RTN","DVBABDOD",88,0)
 ; -- rpc: DVBAB DOD INFO
"RTN","DVBABDOD",89,0)
 ;
"RTN","DVBABDOD",90,0)
 S Y="NOTE:  DoD data at shared sites is available immediately.  All other sites will be available less than a week after discharge."
"RTN","DVBABDOD",91,0)
 Q
"RTN","DVBABDOD",92,0)
 ;
"RTN","DVBABDOD",93,0)
ICN(RESULT,DVBAICN) ;retrieve patient DFN
"RTN","DVBABDOD",94,0)
 ;
"RTN","DVBABDOD",95,0)
 ;This remote procedure call returns the patient's DFN associated
"RTN","DVBABDOD",96,0)
 ;with the ICN passed to the RPC. The DFN is the internal entry
"RTN","DVBABDOD",97,0)
 ;number in the Patient (#2) file.  
"RTN","DVBABDOD",98,0)
 ;
"RTN","DVBABDOD",99,0)
 ; -- rpc: DVBAB FIND DFN BY ICN
"RTN","DVBABDOD",100,0)
 ; 
"RTN","DVBABDOD",101,0)
 ;  Supported References:
"RTN","DVBABDOD",102,0)
 ;    DBIA #4679: GETDFN^VAFCTFU1
"RTN","DVBABDOD",103,0)
 ;
"RTN","DVBABDOD",104,0)
 ;  Input:
"RTN","DVBABDOD",105,0)
 ;   DVBAICN - patient's Integration Control Number
"RTN","DVBABDOD",106,0)
 ;    
"RTN","DVBABDOD",107,0)
 ; Output:
"RTN","DVBABDOD",108,0)
 ;    RESULT - global array containing patient's DFN, otherwise
"RTN","DVBABDOD",109,0)
 ;             an error msg if ICN can't be converted to a DFN
"RTN","DVBABDOD",110,0)
 ;
"RTN","DVBABDOD",111,0)
 N DVBADFN  ;patient DFN
"RTN","DVBABDOD",112,0)
 ;
"RTN","DVBABDOD",113,0)
 S DVBADFN=0
"RTN","DVBABDOD",114,0)
 K ^TMP("DVBAICN",$J)
"RTN","DVBABDOD",115,0)
 ;
"RTN","DVBABDOD",116,0)
 I $G(DVBAICN)>0 D
"RTN","DVBABDOD",117,0)
 . D GETDFN^VAFCTFU1(.DVBADFN,DVBAICN) ;convert icn to dfn
"RTN","DVBABDOD",118,0)
 S ^TMP("DVBAICN",$J,0)=$S(DVBADFN>0:DVBADFN,1:"NOT A VALID ICN")
"RTN","DVBABDOD",119,0)
 S RESULT=$NA(^TMP("DVBAICN",$J))
"RTN","DVBABDOD",120,0)
 Q
"VER")
8.0^22.0
"BLD",7316,6)
^129
**END**
**END**
