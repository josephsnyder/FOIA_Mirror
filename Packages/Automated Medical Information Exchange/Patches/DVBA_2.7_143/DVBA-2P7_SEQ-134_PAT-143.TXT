$TXT Created by LOUCK,KEVIN C at DEVFEX.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 10/22/09 at 13:46
=============================================================================
Run Date: MAY 03, 2010                     Designation: DVBA*2.7*143
Package : DVBA - AUTOMATED MED INFO EXCHANGE  Priority: Mandatory
Version : 2.7       SEQ #134                    Status: Released
                  Compliance Date: JUN 03, 2010
=============================================================================

Associated patches: (v)DVBA*2.7*126<<= must be installed BEFORE `DVBA*2.7*143'
                    (v)DVBA*2.7*136<<= must be installed BEFORE `DVBA*2.7*143'
                    (v)DVBA*2.7*140<<= must be installed BEFORE `DVBA*2.7*143'
                    (v)XWB*1.1*53  <<= must be installed BEFORE `DVBA*2.7*143'
                    (v)XU*8*523    <<= must be installed BEFORE `DVBA*2.7*143'
                    (v)DVBA*2.7*146<<= must be installed BEFORE `DVBA*2.7*143'

Subject: CAPRI-DEFECT FIXES & DES/BSE ENHANCEMENTS

Category: 
  - Enhancement (Mandatory)
  - Routine
  - Informational

Description:
============

 I. OVERVIEW
  
   This patch is to announce the release of a new version of the
   Compensation & Pension Record Interchange (CAPRI) Graphical User
   Interface (GUI) v143. 
   
   Additionally, this patch (DVBA*2.7*143) contains VistA server
   modifications that support the release of the new CAPRI GUI v143.  
  
    *********************  I M P O R T A N T  *************************
    *                                                                 *
    *  This patch (DVBA*2.7*143) may be installed while CAPRI users   *
    *  are still using the previously released version of the CAPRI   *
    *  GUI (DVBA_27_140.exe).                                         *
    *                                                                 *
    *  Once the installation of this patch has been completed, CAPRI  * 
    *  users should be upgraded to the new released version of the    *
    *  CAPRI GUI (DVBA_27_143_12.exe).                                *
    *                                                                 *
    *  Note: For users remaining on an older version of CAPRI, any    *
    *  Compensation & Pension Worksheet Module (CPWM) exam templates  *
    *  opened and saved using the new CAPRI GUI v143 will not be      *
    *  backwards compatible with older versions of the CAPRI GUI      *
    *  (i.e. CAPRI GUI v140). Users of older versions of the CAPRI    *
    *  GUI will experience errors when attempting to open CPWM exam   *
    *  templates saved using the new CAPRI GUI v143.                  *
    *                                                                 *
    *  Please refer to the 'SOFTWARE AND DOCUMENTATION RETRIEVAL'     *
    *  section (V.) of this patch message for specific instructions   *
    *  regarding the retrieval of the CAPRI GUI v143 software and     *
    *  user documentation.                                            *
    *                                                                 *
    *******************************************************************
  
   This patch (DVBA*2.7*143) and CAPRI GUI v143 provides defect fixes and
   enhancements for the CAPRI GUI and the Automated Medical Information
   Exchange (AMIE) package.  Please refer to the 'FUNCTIONAL OVERVIEW'
   section (III.) for the specific changes and primary functionality being
   delivered.
  
  
  
 II. ASSOCIATED REMEDY TICKETS & NEW SERVICE REQUESTS
  
   The following section lists the Remedy tickets and/or New Service 
   Requests associated with this patch.
  
   1. Associated Remedy Ticket(s):
      ----------------------------
      HD0000000344256 - Error message [Error messages in CAPRI after
                        screensaver pushed to all Region 5 desktops]
      
        Duplicates:
           HD0000000345144
           HD0000000356973
  
      HD0000000295597 - CAPRI no longer allows copy/paste on C&P Exam 
                        Request screen. 
  
        Duplicates:
           None
  
  
   2. Associated New Service Request(s):
      ----------------------------------
      NONE
  
  
  
 III. FUNCTIONAL OVERVIEW
  
   The following is an overview of the changes and primary functionality
   that will be delivered in CAPRI GUI v143 and this VistA patch 
   (DVBA*2.7*143).
   
   1. The following Remedy tickets are being addressed:
  
      a. HD0000000344256 - Error message [Error messages in CAPRI after
                           screensaver pushed to all Region 5 desktops]
  
      Problem
      -------
      A screen saver was pushed to all Region 5 desktops and it was 
      reported that immediately after the push, CAPRI users began
      experiencing a Win32 API function failed error while using the
      application and having the screen saver engage. Specifically, the
      error could be duplicated by launching CAPRI, opening an exam 
      template for a patient, letting the PC sit idle for one minute 
      until the screen saver engaged, and then almost immediately upon
      moving the mouse, an error was displayed and the CAPRI application
      would shut down. 
  
      Solution
      --------
      If the user's mouse was over the CAPRI GUI when the screen saver
      activates, CAPRI would error and then cause the application to 
      shut down. This problem is caused by a Windows API call 
      (Mouse.CursorPos) that fails when the screen saver activates.
      The active desktop is changed by a screen saver, which causes CAPRI
      to error when attempting to retrieve the current cursor position
      using the Windows API. The Windows API (Mouse.CursorPos) will be
      replaced with a call to another Windows API (Windows.GetCursorPos)
      to prevent an error when the cursor is over the CAPRI application
      and the screen saver activates.
  
      b. HD0000000295597 - CAPRI no longer allows copy/paste on C&P Exam 
                           Request screen.
  
      Problem
      -------
      User can no longer cut and paste on the Add New C&P Exam dialogue via
      the shortcut keys or the right click menu.
  
      Solution
      --------
      The code pertaining to the cut and paste functionality was rewritten 
      in relation to the upgrade to Delphi 2006, which in turn corrected
      the faulty logic. The cut and paste functionality should now work via
      the menu option, short cut keys, or the right click menu.
  
  
   2. The following defects that were reported directly to the CAPRI
      development team are being addressed:
  
      a. Defect - Non-compliant Department of Veteran Affairs Seal
  
      Problem
      ------- 
      When the CAPRI application is attempting to establish a network
      connection, the 'Establishing Network Connection' dialog presented to
      the user contained an image of a non-compliant Department of 
      Veterans Affairs seal. Specifically, the non-compliant seal graphic
      contained an eagle with brown tail feathers.
       
      Solution
      --------
      The 'Establishing Network Connection' dialog presented to the user 
      has been modified by replacing the non-compliant Department of
      Veterans Affairs seal image with a compliant image. Specifically, the
      compliant seal graphic contains an eagle with white tail feathers.
  
      b. Defect - Error attempting to enter a new patient having
                  a single character first name.
  
      Problem
      -------
      A Veterans Service Representative at the Togus Regional Office
      reported a problem when attempting to enter a new patient
      using CAPRI. The patient they were attempting to enter had a
      first name consisting only of a single character (i.e. "J"). 
      Upon completing the required fields within the 'Enter New 
      Patient' window and clicking on the 'Click to Continue' button,
      the error dialog "Invalid Argument - Must be LAST, FIRST or IEN"
      was displayed. Since the CAPRI software validates the name,
      ensuring that it contains at least a 2 character 'last name'
      and a 2 character 'first name', the error is generated by
      attempting to enter the single character first name. The CAPRI
      software should only be validating the 'first name' to ensure
      it is at least a single character as does the logic for entering
      a new patient through the VistA Registration package. 
  
      Solution
      --------
      The CAPRI software responsible for validating the name of new
      patient being entered has been modified to validate the name,
      ensuring that it contains at least a 2 character 'last name'
      and a single character 'first name'. This will prevent an error
      from being generated by attempting to enter a new patient having
      a single character first name. 
  
      c. Defect - "Problem detecting your division" displays after 
                  selecting remote site
  
      Problem
      -------
      When the INSTITUTION (#4) file record number of the user's assigned 
      Division does not match the Station number, CAPRI generates two dialog
      boxes and shuts down. The first dialog box contains the text: "There
      was a problem detecting your division. Please notify IT support".  The
      second dialog box is an "Application Exception" and contains the text:
      "FMGets1.Record Number (IENS) is not initialized". The defect impacts
      only CAPRI remote users logging in through the CLAIMS system.
  
      Solution
      --------
      The CAPRI logic has been modified to resolve the remote user's Division
      by utilizing the Station Number instead of the Division record number
      (i.e. internal entry number).
  
      d. Defect - Semicolon-delimited Access/Verify code entry causes CAPRI
                  to re-prompt for credentials
  
      Problem
      -------
      When the user enters the Access and Verify separated by a semicolon
      into the VistA login dialog box Access code field, CAPRI displays
      the login dialog box several times after connecting to a remote site.
      The silent login was only functioning when both the Access and Verify
      code fields were populated.
  
      Solution
      --------
      The custom CAPRI RPCBroker was modified to recognize the semicolon-
      delimited Access/Verify as a valid entry for performing silent logins.
  
  
   3. CAPRI/AMIE - Add Foreign Address Support
   
      Modifications to CAPRI and the AMIE software were required to
      support release of the Enrollment VistA Changes Release 2 project,
      fulfilling the business need to implement a Foreign Address construct
      for a Patient's Permanent, Temporary, and Confidential addresses.
      
      a. CAPRI has been enhanced to support foreign addresses. The
         following dialog boxes and tabs have been modified with the
         addition of fields for Country, Province, and Postal Code:
  
       - Enter New Patient
  
        * Three new fields have been added to the address section:
       
            Country
            Province
            Postal Code
  
        * The new Country field containing a dropdown list of all
          available countries has been added. The Country field defaults to
          UNITED STATES. The Country field controls the display of the
          Zip+4, County, State, Province, and Postal Code fields. When the
          selected country is "UNITED STATES", CAPRI displays the Zip+4,
          County, and State fields and hides the Province and Postal Code
          fields. When the selected Country is other than "UNITED STATES",
          CAPRI displays the Province and Postal Code fields and hides the
          Zip+4, County, and State fields.
  
        * The Zip+4 field has been modified to automatically populate the
          City, County, and State fields when a valid value is entered. In
          the case that more than one city may correspond to a Zip code,
          the preferred city populates the City field and the alternate
          cities populate the City field dropdown list.
  
        * The City, County, and State fields have been modified to prevent
          free text entry for UNITED STATES addresses unless the user
          possesses the "EAS GMT COUNTY EDIT" Security Key.
  
       - Address Verification
    
        * Country, Province, and Postal Code fields have been added to the
          Permanent Address and Temporary Address section.
         
        * When the Country field displays "UNITED STATES", CAPRI displays
          the State, Zip+4, and County fields and hides the Province and
          Postal Code fields.  When the selected country is other than
          "UNITED STATES", CAPRI displays the Province and Postal Code
          fields and hides the Zip+4, County, and State fields.
  
       - Admin tab
      
        * Five new fields have been added to the Permanent Address and 
          Temporary Address Info sections:
  
             Country
             Province
             Postal Code
             Last Updated
             Update Site
  
       - Compensation and Pension Exam Inquiry     
        
        * The address section has been modified to display the Country on
          the line following the City, State, Zip+4.
  
        * CAPRI displays "City, State, Zip+4:" when the country is "UNITED
          STATES".
  
        * CAPRI displays "City, Province, Postal Code:" when the country is
          not "UNITED STATES"
         
      b. The AMIE package in VistA has been enhanced to support foreign
         addresses.
  
       - Inquiry for C&P Requests [DVBA C INQUIRY] option.
  
        * The address section has been modified to display the Country on
          the line following the City, State, Zip+4.
      
        * "City, State, Zip+4:" displays when the country is "UNITED
          STATES".
  
        * "City, Province, Postal Code:" displays when the country is not
          "UNITED STATES".
  
   
   4. Restore Local Bi-Directional Health Information Exchange (BHIE)
      Connectivity and Fix Verify Code Change problem
   
      a. The Broker Security Enhancement (BSE) implementation in the
         previously released CAPRI GUI (DVBA*2.7*140) required the
         disabling of the CAPRI 'DOD tab' to prevent direct access from
         CAPRI to the Federal Health Information Exchange (FHIE) for CAPRI
         local users (non-CLAIMS).
  
         This patch implements an enhancement to BSE that allows local
         CAPRI user to connect to a central server and the 'DOD tab'
         functionality has been restored for local users.
  
      b. Internal Software Quality Assurance testing by the CAPRI 
         development team revealed that when the RPCBroker dialog (Change
         VISTA Verify Code) is utilized to change the user's Verify Code,
         subsequent silent logins potentially fail. CAPRI has been modified
         to prevent silent login failures when a user changes their VistA
         Verify Code using the 'Change VISTA Verify Code' dialog window.
  
  
    5. Support VA/DoD Disability Evaluation System (DES) Examinations
         
      a. In support of the joint VA/DOD Disability Evaluation System (DES)
         pilot program, 'TRICARE' and 'SHARING AGREEMENT' have been added
         as available Primary Eligibility selections when entering a new
         patient. The addition of 'TRICARE' and 'SHARING AGREEMENT' primary
         eligibilities will allow the DES pilot program office to better
         identify the number of DES exams performed.
  
         - From Patient Selector|Enter New Patient window, CAPRI was
           modified to add SHARING AGREEMENT as a Primary Eligibility
           value selectable by a user.
  
         - From Patient Selector|Enter New Patient window, CAPRI was 
           modified to add TRICARE as a Primary Eligibility value 
           selectable by a user.
  
         - From Patient Selector|Enter New Patient window, CAPRI was 
           modified to add TRICARE as a Patient Type selectable by a user.
  
  
   6. Disable 'Generate Blank Template' button
  
      The 'Generate Blank Template' button on the 'Options:' menu within
      the C&P Worksheets Module (CPWM) will be disabled and not visible
      when the 'CAPRI Templates - Standard Objects, Phase 1' patch
      (DVBA*2.7*142) is installed.  This will prevent the creation of badly
      formatted blank templates, due to the Standard Objects report format
      modifications exported with patch (DVBA*2.7*142).
  
  
   7. Technical Enhancement - Control CAPRI Client/Server Version
      Synchronization
  
      The CAPRI GUI client obtains the version of the CAPRI software 
      running on the VistA server by calling the DVBA VERSION remote
      procedure call (RPC). The RPC derived the server version from 
      hard-coded values in the RPC routine, VERSION^DVBAB1, which
      required distribution of the RPC routine anytime the server
      version of CAPRI was modified.
  
      Enhancements were made to the RPC routine to obtain the VistA
      server version of the CAPRI software from CAPRI/AMIE package
      parameters defined in the PARAMETERS (#8989.5) file. This 
      allows development staff greater flexibility for setting and
      deriving the CAPRI server version through manipulation of
      version parameters.
      
  
   8. Technical Enhancement - Development platform upgrade to Delphi 2006
  
      The development platform for the CAPRI GUI was upgraded for this 
      effort. Previously released versions of the CAPRI GUI had been
      compiled via Delphi 5 and this version of the CAPRI GUI (v143) has
      been compiled via Delphi 2006. The technical changes made for this
      upgrade should not impact the current functionality within CAPRI.
  
  
  
 IV. Known Anomalies
  
   The following section describes the known anomalies within CAPRI GUI
   v143 and this VistA patch (DVBA*2.7*143). These anomalies will be fixed 
   in the next CAPRI GUI Patch DVBA*2.7*149.
   
   1. Duplex Printer Setting 
      
     a. The duplex printer setting in the printer properties is ignored. 
        When a printer is set to print on both sides of the paper, the
        setting is disregarded and the printer will only print on one side
        of the paper. This issue will be addressed in a future CAPRI GUI
        patch, at which time the duplex printer property will be honored
        and the printer will print on both sides of the paper.
  
        - Risk/Impact: Low impact to users.
  
        - Workaround:  Users are still able to print without duplex 
                       availability.
  
        - Comments:    This only affects Veteran's Benefits Administration
                       and not Veteran's Health Administration sites. This
                       anomaly will be fixed in the next CAPRI GUI v149 and
                       VistA patch DVBA*2.7*149.
  
                    
   2. CAPRI Remote Window - Can no longer enter a facility name with a 
                            space
     
     a. The Health Revenue Center (HRC) reported an issue when attempting 
        to switch facilities within the CAPRI Remote window. When typing in
        the beginning characters (e.g. "New") of a facility name containing
        more than one word (e.g. "New York"), CAPRI doesn't recognize the
        space and next word in the name. Instead, CAPRI defaults to the
        first facility name in the list that contains the characters
        entered by the user.  For example, if a user attempts to enter the
        facility "New York", CAPRI defaults to "New Jersey" since "Jersey"
        precedes "York" alphabetically in the facility list.  This issue
        will be addressed in a future CAPRI GUI patch.
  
        - Risk/Impact: Low impact to users.
  
        - Workaround:  Users are still able access the facility in the 
                       facility list by typing the first letter of the site
                       name (e.g. "New") and arrowing or scrolling down to
                       access the facility they would like to select.
  
        - Comments:    This only affects the Health Revenue Center remote 
                       (Claims) users. This anomaly will be fixed in the
                       next CAPRI GUI v149 and VistA patch DVBA*2.7*149.
   
  
  
 V. TECHNICAL COMPONENTS
  
   The following section describes the technical components being exported
   with this patch. 
  
   1. The following record will be added to the REMOTE APPLICATION
      (#8994.5) file:
     
      a.           NAME: CAPRIFHIE
          CONTEXTOPTION: DVBA CAPRI GUI
           CALLBACKTYPE: STATION-NUMBER
           CALLBACKPORT: -1
         CALLBACKSERVER: XXX
      
         Description of change:
            A new record entry for the REMOTE APPLICATION (#8994.5) file
            will be created to support Station Number type connections by
            the Broker Security Enhancement Broker. This entry will be
            utilized by the CAPRI application when connecting from a local
            VistA site to the FHIE/BHIE server for DOD data retrieval.
  
  
   2. The following records will be added to the PARAMETERS (#8989.5) file:
  
      a.    ENTITY: AUTOMATED MED INFO EXCHANGE
         PARAMETER: DVBAB CAPRI MINIMUM VERSION
          INSTANCE: 1
             VALUE: CAPRI GUI V2.7*123*0*A
  
      b.    ENTITY: AUTOMATED MED INFO EXCHANGE
         PARAMETER: DVBAB CAPRI ALLOW OLD VERSION
          INSTANCE: 1 
             VALUE: NO
     
      c.    ENTITY: AUTOMATED MED INFO EXCHANGE
         PARAMETER: DVBAB CAPRI HIA UPDATE URL
          INSTANCE: 1
         VALUE: http://vaww.va.gov/hia/Downloads.htm
     
       
    3.  The following records will be added to the PARAMETER DEFINITION
        (#8989.51) file:    
  
      a.            NAME: DVBAB CAPRI ALLOW OLD VERSION
            DISPLAY TEXT: Allow old versions of CAPRI to run
         MULTIPLE VALUED: No
         VALUE DATA TYPE: yes/no
              VALUE HELP: Will versions older than the Minimum Version
                          be allowed to run?
              PRECEDENCE: 1
             ENTITY FILE: PACKAGE
  
      b.            NAME: DVBAB CAPRI HIA UPDATE URL
            DISPLAY TEXT: HIA URL to obtain CAPRI software update:
         MULTIPLE VALUED: No
         VALUE DATA TYPE: free text
              VALUE HELP: Enter the HIA URL that contains current CAPRI
                          software
             DESCRIPTION: This parameter contains the full URL that
                          points to the Health Information Access
                          download web site.  The web site contains the
                          latest released version of CAPRI.
              PRECEDENCE: 1
             ENTITY FILE: PACKAGE
  
      c.            NAME: DVBAB CAPRI MINIMUM VERSION
            DISPLAY TEXT: CAPRI minimum server version
         MULTIPLE VALUED: No
        PROHIBIT EDITING: No
         VALUE DATA TYPE: free text
              VALUE HELP: This is the current minimum CAPRI GUI version
             DESCRIPTION: This parameter contains the minimum CAPRI GUI
                          version that is compatible with the server
                          version.
                  Format: CAPRI GUIv2.7*123*1*A*NOOLD
              PRECEDENCE: 1
             ENTITY FILE: PACKAGE
  
  
    4. The following Remote Procedure Call(s) are being added to the 
       REMOTE PROCEDURE (#8994) file:
       
       a.                NAME: DVBAB ZIP2CITY
                          TAG: ZIP2CITY
                      ROUTINE: DVBABADR
            RETURN VALUE TYPE: ARRAY
                 AVAILABILITY: SUBSCRIPTION
                  DESCRIPTION: The remote procedure returns a list 
                               containing city, county, and state for a
                               given ZIP code.
               Results format: Result(0)=ResultCount_"^"_ErrorMsg
                               Result(1..n)=City_"^"_County_"^"_State
              INPUT PARAMETER: DVBZIP
               PARAMETER TYPE: LITERAL
          MAXIMUM DATA LENGTH: 12
                     REQUIRED: YES
              SEQUENCE NUMBER: 1
                  DESCRIPTION: ZIP code value in ZIP+4 format.
        RETURN PARAMETER DESC: RESULT(0)=ResultCount_"^"_ErrorMsg
                               RESULT(1)=City_"^"_County_"^"_State
                               RESULT(n)=City_"^"_County_"^"_State
  
       b.                NAME: DVBA CHECK PATCH
                          TAG: CHECK
                      ROUTINE: DVBAB1B
            RETURN VALUE TYPE: SINGLE VALUE
                 AVAILABILITY: SUBSCRIPTION
                  DESCRIPTION: This RPC is a wrapper for the supported
                               $$PATCH^XPDUTL API to determine whether a
                               given patch is installed or not.  "1^Patch
                               Is Installed" is returned on success;
                               otherwise "0^Patch Is Not Installed" is
                               returned.
              INPUT PARAMETER: DVBPATCH    
               PARAMETER TYPE: LITERAL
          MAXIMUM DATA LENGTH: 20 
                     REQUIRED: YES
              SEQUENCE NUMBER: 1
                  DESCRIPTION: This parameter contains the patch
                               designation (ex. DVBA*2.7*142).
        RETURN PARAMETER DESC: Returns "1^Patch Is Installed" on success;
                               otherwise returns "0^Patch Is Not
                               Installed".
  
                               
    5. The following Option(s) have been modified in the OPTION (#19) file:
       
       a.        NAME: DVBA CAPRI GUI                    
            MENU TEXT: Capri GUI (Broker)
                 TYPE: Broker (Client/Server)
          DESCRIPTION: This is the 'B' type option used by CAPRI GUI client
                       application. It contains all the RPCs used by the
                       CAPRI GUI application.
  
          Description of change:
             The following RPCs are being added to the option:
                  RPC: DVBAB ZIP2CITY 
                  RPC: DVBA CHECK PATCH
          
  
    6. The following Routine(s) are being added/modified:
  
       a.     Modify: DVBAB1
         Description of change:
            The code for Remote Procedure DVBAB VERSION is being modified.
            The existing VERSION entry point has been modified to allow the
            CAPRI GUI to obtain the current version of the CAPRI software
            running on the VistA server and whether old versions of the
            CAPRI GUI are allowed to run using the following parameters
            defined in the PARAMETERS (#8989.5) file.
                   - PARAMETER: DVBAB CAPRI MINIMUM VERSION
                   - PARAMETER: DVBAB CAPRI ALLOW OLD VERSION
  
       b.     Modify: DVBAB1B
         Description of change:
            Added new CHECK entry point to the routine. CHECK^DVBAB1B uses
            the supported $$PATCH^XPDUTL API to determine whether a patch
            is installed or not. The CHECK entry point is called by the new
            DVBA CHECK PATCH remote procedure.
  
       c.     Modify: DVBAB70
         Description of change:
            This routine was modified for CAPRI/AMIE enhancements to
            support foreign addresses.  
  
       d.     Modify: DVBAB84
         Description of change:
            The $$VN function in the routine was modified. This function is
            used to validate the name of a new patient being entered using
            CAPRI. The function now validates the patient name, ensuring
            that it contains at least a 2 character 'last name' followed by
            a comma and a single character 'first name'.
  
       e.        Add: DVBABADR 
         Description of change:
            The following routine is being exported to support the
            following remote procedure call (RPC):
                 - DVBAB ZIP2CITY
  
       f.     Modify: DVBCENQ1
         Description of change:
            This routine was modified for CAPRI/AMIE enhancements to
            support foreign addresses.  
  
       g.     Modify: DVBCUTIL
         Description of change:
            This routine was modified for CAPRI/AMIE enhancements to
            support foreign addresses.
  
       h.     Modify: DVBABURL
         Description of change:
            This URL entry point was modified to allow the return the
            Health Information Access (HIA) program website (URL) when
            calling the DVBAB GET URL remote procedure call.
  
  
  
 VI. SOFTWARE AND DOCUMENTATION RETRIEVAL
     
   1. VistA Patch DVBA*2.7*143
    
      a. The VistA server software is being distributed as a PackMan patch
         message through the National Patch Module (NPM). The KIDS build
         for this patch is DVBA*2.7*143.
  
   2. CAPRI GUI v143 Client Software & User Documentation
  
      a.  The CAPRI GUI v143 client software is being distributed as
          executable DVBA_27_143_12.exe. The installed executable for this
          patch is client version 2.7.143.12 with a size of 13,511 KB.
  
          The CAPRI GUI v143 client software and documentation for this
          patch may be retrieved directly using FTP. The preferred method
          is to FTP the files from:
  
             download.vista.med.va.gov
  
         This transmits the files from the first available FTP server.
         Sites may also elect to retrieve software directly from a specific
         server as follows:
  
         OI&T FIELD OFFICE       FTP ADDRESS              DIRECTORY
         -----------------       -----------              ---------
         Albany             ftp.fo-albany.med.va.gov   [anonymous.software]
         Hines              ftp.fo-hines.med.va.gov    [anonymous.software]
         Salt Lake City     ftp.fo-slc.med.va.gov      [anonymous.software]
  
  
        The following files will be available:
  
        File Name             Format    Description
        ---------             ------    -----------
        DVBA_27_P143_12.ZIP   BINARY    ZIP archive containing the CAPRI
                                        GUI v143 Client Application
                                        executable: DVBA_27_143_12.exe
  
        DVBA_27_P143_UM.PDF   BINARY    Updated CAPRI User Manual
  
        DVBA_27_P143_RN.PDF   BINARY    Release Notes     
  
       The VistA Documentation Library (VDL) web site will also contain the
       'Release Notes' and updated 'CAPRI User Manual'. This web site is
       usually updated within 1-3 days of the patch release date.
  
       The VDL web address for CAPRI user documentation is:
      
          http://www.va.gov/vdl/application.asp?appid=133
  
  
  
 VII. INSTALLATION REQUIREMENTS/NOTES:
  
  1. Users On the System
  
     a. This patch (DVBA*2.7*143) may be installed while CAPRI users are
        still using the previously released version of the CAPRI GUI
        (i.e. DVBA_27_140.exe).
  
     b. Once the installation of this patch has been completed, CAPRI users
        should be upgraded to the new released version of the CAPRI GUI
        (DVBA_27_143_12.exe).
  
          PLEASE NOTE:
          ------------
          If CAPRI users are not upgraded, any Compensation & Pension
          Worksheet Module (CPWM) exam templates opened and saved using the
          new CAPRI GUI v143 (DVBA_27_143_12.exe) will not be backwards
          compatible with older versions of the CAPRI GUI (i.e. CAPRI GUI
          v140). Users of older versions of the CAPRI GUI will experience
          errors when attempting to open CPWM exam templates saved using
          the new CAPRI GUI v143.
  
     c. This patch modifies routines used by the CAPRI GUI application 
        and the Automated Medical Information Exchange (AMIE) package. It
        should be installed during non-peak hours to minimize disruption to
        users and to reduce the possibility of errors when the routines are
        updated.
  
  2. VistA Options
         
     a. There are no VistA options to disable while installing this patch.
     
     b. This patch exports the Capri GUI (Broker) [DVBA CAPRI GUI] context
        option. When using the 'Compare Transport Global to Current System'
        option on the 'Kernel Installation & Distribution System' menu, the
        compare shows that it is re-adding the existing RPCs currently 
        attached to the option. However, only the following (2) new RPCs 
        are being added:
           RPC: DVBAB ZIP2CITY 
           RPC: DVBA CHECK PATCH
  
  3. Software Installation Time
  
     a. The estimated installation time for VistA patch DVBA*2.7*143 is 
        less than 5 minutes during off peak hours.
  
  
  4. Required Builds
  
     a. The following is a list of REQUIRED builds for this KIDS
        distribution (DVBA*2.7*143). KIDS will not allow the installation
        of this patch without their prior installation.
  
        Required Builds:
        ----------------
        DVBA*2.7*126
        DVBA*2.7*136
        DVBA*2.7*140
        DVBA*2.7*146
        XU*8.0*523
        XWB*1.1*53
  
  
  
 VIII. INSTALLATION INSTRUCTIONS:
  
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
  
    2. From the 'Kernel Installation & Distribution System' menu, select
       the Installation menu.
  
    3. From this menu, you may now elect to use the following options (when
       prompted for INSTALL NAME, enter DVBA*2.7*143).
  
       a. Backup a Transport Global - This option will create a backup
          message of any routines exported with the patch. It will NOT
          backup any changes such as DDs or templates.
       b. Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch (routines,
          DDs, templates, etc.).
       c. Verify Checksums in Transport Global - This option will allow you
          to ensure the integrity of the routines that are in the transport
          global.
       d. Print Transport Global - this option will allow you to view the
          components of the KIDS build.
  
    4. Use the Install Package(s) option and select package DVBA*2.7*143.
  
    5. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
       Install? NO//', respond NO.
  
    6. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
       NO//', it is recommended you answer NO.
  
    7. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
       and Protocols? NO//', answer NO.
  
    8. If CAPRI GUI users have not already been upgraded to the new 
       version of the CAPRI GUI v143 (DVBA_27_143_12.exe), they should be 
       upgraded as soon as possible upon installation of this patch.
  
    9. NOTE: Pre/Post-init routine DVBA143P is a temporary routine used as
       part of the pre/post-install process and will be automatically
       deleted by KIDS after patch installation. However, in some cases
       Cache doesn't always delete the routine. You may delete it manually
       if you discover this at your site.
  
  
 IX. TEST SITES
  
   The following sites participated in the testing of the CAPRI GUI v143 
   and DVBA*2.7*143 server software.
  
    Test Sites:
    ---------- 
     * Alexandria, LA VAMC
     * Greater Los Angeles HCS, West Los Angeles VAMC
     * Saginaw, MI VAMC
     * Washington, DC VAMC

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;2.7;AMIE;**[Patch List]**;Apr 10, 1995;Build 4

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DVBA143P
    Before:       n/a   After:  B3638369  **143**
Routine Name: DVBAB1
    Before: B54214482   After: B54842893  **35,37,50,42,53,57,73,104,109,
                                           137,146,143**
Routine Name: DVBAB1B
    Before: B10372670   After: B11312167  **104,143**
Routine Name: DVBAB70
    Before: B39041842   After: B43310973  **35,42,57,136,143**
Routine Name: DVBAB84
    Before: B36589482   After: B36589384  **90,137,140,143**
Routine Name: DVBABADR
    Before:       n/a   After:  B1913888  **143**
Routine Name: DVBABURL
    Before:  B2101434   After:  B2354419  **104,136,143**
Routine Name: DVBCENQ1
    Before: B24327636   After: B27476723  **17,57,143**
Routine Name: DVBCUTIL
    Before: B27818943   After: B33092099  **17,126,143**
 
Routine list of preceding patches: 126, 136, 140, 146

=============================================================================
User Information:
Entered By  : LOUCK,KEVIN                   Date Entered  : MAR 05, 2009
Completed By: DELACRUZ,KRISTINA             Date Completed: APR 30, 2010
Released By : FRANCE,KATHI                  Date Released : MAY 03, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
