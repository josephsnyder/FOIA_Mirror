KIDS Distribution saved on May 13, 2008@07:07:55
CRHD*1   RELEASED
**KIDS**:CRHD 1.0^

**INSTALL NAME**
CRHD 1.0
"BLD",18207,0)
CRHD 1.0^SHIFT CHANGE HANDOFF TOOL^0^3080513^y
"BLD",18207,4,0)
^9.64PA^183.4^4
"BLD",18207,4,183,0)
183
"BLD",18207,4,183,222)
y^y^f^^^^n
"BLD",18207,4,183.2,0)
183.2
"BLD",18207,4,183.2,222)
y^y^f^^^^n
"BLD",18207,4,183.3,0)
183.3
"BLD",18207,4,183.3,222)
y^y^f^^^^n
"BLD",18207,4,183.4,0)
183.4
"BLD",18207,4,"B",183,183)

"BLD",18207,4,"B",183.2,183.2)

"BLD",18207,4,"B",183.3,183.3)

"BLD",18207,4,"B",183.4,183.4)

"BLD",18207,6.3)
19
"BLD",18207,"INID")
^y
"BLD",18207,"INIT")
ENT^CRHDI01
"BLD",18207,"KRN",0)
^9.67PA^8989.52^19
"BLD",18207,"KRN",.4,0)
.4
"BLD",18207,"KRN",.401,0)
.401
"BLD",18207,"KRN",.402,0)
.402
"BLD",18207,"KRN",.403,0)
.403
"BLD",18207,"KRN",.5,0)
.5
"BLD",18207,"KRN",.84,0)
.84
"BLD",18207,"KRN",3.6,0)
3.6
"BLD",18207,"KRN",3.8,0)
3.8
"BLD",18207,"KRN",9.2,0)
9.2
"BLD",18207,"KRN",9.8,0)
9.8
"BLD",18207,"KRN",9.8,"NM",0)
^9.68A^20^19
"BLD",18207,"KRN",9.8,"NM",1,0)
CRHD^^0^B1457874
"BLD",18207,"KRN",9.8,"NM",2,0)
CRHD9^^0^B70845564
"BLD",18207,"KRN",9.8,"NM",3,0)
CRHDAM^^0^B18095609
"BLD",18207,"KRN",9.8,"NM",4,0)
CRHDDNR^^0^B16560217
"BLD",18207,"KRN",9.8,"NM",5,0)
CRHDDR^^0^B9947157
"BLD",18207,"KRN",9.8,"NM",6,0)
CRHDPL^^0^B15561818
"BLD",18207,"KRN",9.8,"NM",7,0)
CRHDUD^^0^B13222509
"BLD",18207,"KRN",9.8,"NM",8,0)
CRHDUT^^0^B67060529
"BLD",18207,"KRN",9.8,"NM",9,0)
CRHD1^^0^B15630604
"BLD",18207,"KRN",9.8,"NM",10,0)
CRHD10^^0^B12600193
"BLD",18207,"KRN",9.8,"NM",11,0)
CRHD11^^0^B12360222
"BLD",18207,"KRN",9.8,"NM",13,0)
CRHD2^^0^B61931550
"BLD",18207,"KRN",9.8,"NM",14,0)
CRHD3^^0^B39552167
"BLD",18207,"KRN",9.8,"NM",15,0)
CRHD4^^0^B54955462
"BLD",18207,"KRN",9.8,"NM",16,0)
CRHD5^^0^B10041807
"BLD",18207,"KRN",9.8,"NM",17,0)
CRHD6^^0^B23982080
"BLD",18207,"KRN",9.8,"NM",18,0)
CRHD7^^0^B4400083
"BLD",18207,"KRN",9.8,"NM",19,0)
CRHD8^^0^B22543750
"BLD",18207,"KRN",9.8,"NM",20,0)
CRHDUT2^^0^B14775379
"BLD",18207,"KRN",9.8,"NM","B","CRHD",1)

"BLD",18207,"KRN",9.8,"NM","B","CRHD1",9)

"BLD",18207,"KRN",9.8,"NM","B","CRHD10",10)

"BLD",18207,"KRN",9.8,"NM","B","CRHD11",11)

"BLD",18207,"KRN",9.8,"NM","B","CRHD2",13)

"BLD",18207,"KRN",9.8,"NM","B","CRHD3",14)

"BLD",18207,"KRN",9.8,"NM","B","CRHD4",15)

"BLD",18207,"KRN",9.8,"NM","B","CRHD5",16)

"BLD",18207,"KRN",9.8,"NM","B","CRHD6",17)

"BLD",18207,"KRN",9.8,"NM","B","CRHD7",18)

"BLD",18207,"KRN",9.8,"NM","B","CRHD8",19)

"BLD",18207,"KRN",9.8,"NM","B","CRHD9",2)

"BLD",18207,"KRN",9.8,"NM","B","CRHDAM",3)

"BLD",18207,"KRN",9.8,"NM","B","CRHDDNR",4)

"BLD",18207,"KRN",9.8,"NM","B","CRHDDR",5)

"BLD",18207,"KRN",9.8,"NM","B","CRHDPL",6)

"BLD",18207,"KRN",9.8,"NM","B","CRHDUD",7)

"BLD",18207,"KRN",9.8,"NM","B","CRHDUT",8)

"BLD",18207,"KRN",9.8,"NM","B","CRHDUT2",20)

"BLD",18207,"KRN",19,0)
19
"BLD",18207,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",18207,"KRN",19,"NM",1,0)
CRHD SHIFT CHANGE HANDOFF^^0
"BLD",18207,"KRN",19,"NM","B","CRHD SHIFT CHANGE HANDOFF",1)

"BLD",18207,"KRN",19.1,0)
19.1
"BLD",18207,"KRN",19.1,"NM",0)
^9.68A^2^2
"BLD",18207,"KRN",19.1,"NM",1,0)
CRHD HOT TEAM MGR^^0
"BLD",18207,"KRN",19.1,"NM",2,0)
CRHD SHIFT CHG HANDOFF MGR^^0
"BLD",18207,"KRN",19.1,"NM","B","CRHD HOT TEAM MGR",1)

"BLD",18207,"KRN",19.1,"NM","B","CRHD SHIFT CHG HANDOFF MGR",2)

"BLD",18207,"KRN",101,0)
101
"BLD",18207,"KRN",409.61,0)
409.61
"BLD",18207,"KRN",771,0)
771
"BLD",18207,"KRN",870,0)
870
"BLD",18207,"KRN",8989.51,0)
8989.51
"BLD",18207,"KRN",8989.51,"NM",0)
^9.68A^4^4
"BLD",18207,"KRN",8989.51,"NM",1,0)
CRHD DEFAULT PREFERENCE^^0
"BLD",18207,"KRN",8989.51,"NM",2,0)
CRHD DNR ORDER TITLE^^0
"BLD",18207,"KRN",8989.51,"NM",3,0)
CRHD DNR ORDERABLE ITEMS^^0
"BLD",18207,"KRN",8989.51,"NM",4,0)
CRHD TEMP FLD EXPIRE^^0
"BLD",18207,"KRN",8989.51,"NM","B","CRHD DEFAULT PREFERENCE",1)

"BLD",18207,"KRN",8989.51,"NM","B","CRHD DNR ORDER TITLE",2)

"BLD",18207,"KRN",8989.51,"NM","B","CRHD DNR ORDERABLE ITEMS",3)

"BLD",18207,"KRN",8989.51,"NM","B","CRHD TEMP FLD EXPIRE",4)

"BLD",18207,"KRN",8989.52,0)
8989.52
"BLD",18207,"KRN",8994,0)
8994
"BLD",18207,"KRN",8994,"NM",0)
^9.68A^58^57
"BLD",18207,"KRN",8994,"NM",1,0)
CRHD ADDITIONAL USER INFO^^0
"BLD",18207,"KRN",8994,"NM",2,0)
CRHD ALL USER PARAMETERS^^0
"BLD",18207,"KRN",8994,"NM",3,0)
CRHD AVAILABLE PARAMETERS^^0
"BLD",18207,"KRN",8994,"NM",4,0)
CRHD COMB TM LIST^^0
"BLD",18207,"KRN",8994,"NM",5,0)
CRHD DEFAULT PREFERENCE^^0
"BLD",18207,"KRN",8994,"NM",6,0)
CRHD DELETE A PREFERENCE^^0
"BLD",18207,"KRN",8994,"NM",7,0)
CRHD GET CONSULT^^0
"BLD",18207,"KRN",8994,"NM",8,0)
CRHD GET DNR TITLES^^0
"BLD",18207,"KRN",8994,"NM",9,0)
CRHD GET IMAGING^^0
"BLD",18207,"KRN",8994,"NM",10,0)
CRHD GET LABS^^0
"BLD",18207,"KRN",8994,"NM",11,0)
CRHD GET ONE PARAMETER^^0
"BLD",18207,"KRN",8994,"NM",12,0)
CRHD GET ORDERABLE ITEMS^^0
"BLD",18207,"KRN",8994,"NM",13,0)
CRHD GET PAT LIST^^0
"BLD",18207,"KRN",8994,"NM",14,0)
CRHD GET PREFERENCES^^0
"BLD",18207,"KRN",8994,"NM",15,0)
CRHD GET TEAM PHONE NUMBERS^^0
"BLD",18207,"KRN",8994,"NM",16,0)
CRHD GET TEMP FLD^^0
"BLD",18207,"KRN",8994,"NM",17,0)
CRHD GET USER DIVISIONS^^0
"BLD",18207,"KRN",8994,"NM",18,0)
CRHD GET USER PARAMETERS^^0
"BLD",18207,"KRN",8994,"NM",19,0)
CRHD GET XPAR VALUES^^0
"BLD",18207,"KRN",8994,"NM",20,0)
CRHD HOT CAN EDIT^^0
"BLD",18207,"KRN",8994,"NM",21,0)
CRHD HOT DELETE PAT/PRV^^0
"BLD",18207,"KRN",8994,"NM",22,0)
CRHD HOT DELETE TEAM LIST^^0
"BLD",18207,"KRN",8994,"NM",23,0)
CRHD HOT MODIFY LIST^^0
"BLD",18207,"KRN",8994,"NM",24,0)
CRHD HOT PATIENT LIST^^0
"BLD",18207,"KRN",8994,"NM",25,0)
CRHD HOT PATPRV^^0
"BLD",18207,"KRN",8994,"NM",26,0)
CRHD HOT PROVIDER BY CLASS^^0
"BLD",18207,"KRN",8994,"NM",27,0)
CRHD HOT PROVIDER LIST^^0
"BLD",18207,"KRN",8994,"NM",28,0)
CRHD HOT PROVIDER LIST2^^0
"BLD",18207,"KRN",8994,"NM",29,0)
CRHD HOT PROVIDER PATIENTS^^0
"BLD",18207,"KRN",8994,"NM",30,0)
CRHD HOT PRV INFO^^0
"BLD",18207,"KRN",8994,"NM",31,0)
CRHD HOT TEAM LIST^^0
"BLD",18207,"KRN",8994,"NM",32,0)
CRHD HOT TEAM PHONE INFO^^0
"BLD",18207,"KRN",8994,"NM",33,0)
CRHD HOT TEAM SAVE^^0
"BLD",18207,"KRN",8994,"NM",35,0)
CRHD INPT LIST^^0
"BLD",18207,"KRN",8994,"NM",36,0)
CRHD IS RECORD LOCKED^^0
"BLD",18207,"KRN",8994,"NM",37,0)
CRHD LIST DIVISIONS^^0
"BLD",18207,"KRN",8994,"NM",38,0)
CRHD LIST SERVICES^^0
"BLD",18207,"KRN",8994,"NM",39,0)
CRHD MGR^^0
"BLD",18207,"KRN",8994,"NM",40,0)
CRHD MOD TM PROVIDERS^^0
"BLD",18207,"KRN",8994,"NM",41,0)
CRHD PAT ACTMEDS^^0
"BLD",18207,"KRN",8994,"NM",42,0)
CRHD PAT ALLERGIES^^0
"BLD",18207,"KRN",8994,"NM",43,0)
CRHD PAT CODESTS^^0
"BLD",18207,"KRN",8994,"NM",44,0)
CRHD PAT DEMO^^0
"BLD",18207,"KRN",8994,"NM",45,0)
CRHD SAVE DNR TITLES^^0
"BLD",18207,"KRN",8994,"NM",46,0)
CRHD SAVE PARAMETERS^^0
"BLD",18207,"KRN",8994,"NM",47,0)
CRHD SAVE TEMP FLD^^0
"BLD",18207,"KRN",8994,"NM",48,0)
CRHD SAVE XPAR PARAMETERS^^0
"BLD",18207,"KRN",8994,"NM",49,0)
CRHD SERVICE INFO^^0
"BLD",18207,"KRN",8994,"NM",50,0)
CRHD SORT PRINT LIST^^0
"BLD",18207,"KRN",8994,"NM",51,0)
CRHD SPECIALTY INFO^^0
"BLD",18207,"KRN",8994,"NM",52,0)
CRHD TM PRV INFO^^0
"BLD",18207,"KRN",8994,"NM",53,0)
CRHD TM PRV LIST^^0
"BLD",18207,"KRN",8994,"NM",54,0)
CRHD USER PHONE INFO^^0
"BLD",18207,"KRN",8994,"NM",55,0)
CRHD USER PHONE NUMBERS^^0
"BLD",18207,"KRN",8994,"NM",56,0)
CRHD HOT TEAM MGR^^0
"BLD",18207,"KRN",8994,"NM",57,0)
CRHD SAVE TEAM FILENAME^^0
"BLD",18207,"KRN",8994,"NM",58,0)
CRHD GET TEAM FILENAME^^0
"BLD",18207,"KRN",8994,"NM","B","CRHD ADDITIONAL USER INFO",1)

"BLD",18207,"KRN",8994,"NM","B","CRHD ALL USER PARAMETERS",2)

"BLD",18207,"KRN",8994,"NM","B","CRHD AVAILABLE PARAMETERS",3)

"BLD",18207,"KRN",8994,"NM","B","CRHD COMB TM LIST",4)

"BLD",18207,"KRN",8994,"NM","B","CRHD DEFAULT PREFERENCE",5)

"BLD",18207,"KRN",8994,"NM","B","CRHD DELETE A PREFERENCE",6)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET CONSULT",7)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET DNR TITLES",8)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET IMAGING",9)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET LABS",10)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET ONE PARAMETER",11)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET ORDERABLE ITEMS",12)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET PAT LIST",13)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET PREFERENCES",14)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET TEAM FILENAME",58)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET TEAM PHONE NUMBERS",15)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET TEMP FLD",16)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET USER DIVISIONS",17)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET USER PARAMETERS",18)

"BLD",18207,"KRN",8994,"NM","B","CRHD GET XPAR VALUES",19)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT CAN EDIT",20)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT DELETE PAT/PRV",21)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT DELETE TEAM LIST",22)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT MODIFY LIST",23)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PATIENT LIST",24)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PATPRV",25)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PROVIDER BY CLASS",26)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PROVIDER LIST",27)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PROVIDER LIST2",28)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PROVIDER PATIENTS",29)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT PRV INFO",30)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT TEAM LIST",31)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT TEAM MGR",56)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT TEAM PHONE INFO",32)

"BLD",18207,"KRN",8994,"NM","B","CRHD HOT TEAM SAVE",33)

"BLD",18207,"KRN",8994,"NM","B","CRHD INPT LIST",35)

"BLD",18207,"KRN",8994,"NM","B","CRHD IS RECORD LOCKED",36)

"BLD",18207,"KRN",8994,"NM","B","CRHD LIST DIVISIONS",37)

"BLD",18207,"KRN",8994,"NM","B","CRHD LIST SERVICES",38)

"BLD",18207,"KRN",8994,"NM","B","CRHD MGR",39)

"BLD",18207,"KRN",8994,"NM","B","CRHD MOD TM PROVIDERS",40)

"BLD",18207,"KRN",8994,"NM","B","CRHD PAT ACTMEDS",41)

"BLD",18207,"KRN",8994,"NM","B","CRHD PAT ALLERGIES",42)

"BLD",18207,"KRN",8994,"NM","B","CRHD PAT CODESTS",43)

"BLD",18207,"KRN",8994,"NM","B","CRHD PAT DEMO",44)

"BLD",18207,"KRN",8994,"NM","B","CRHD SAVE DNR TITLES",45)

"BLD",18207,"KRN",8994,"NM","B","CRHD SAVE PARAMETERS",46)

"BLD",18207,"KRN",8994,"NM","B","CRHD SAVE TEAM FILENAME",57)

"BLD",18207,"KRN",8994,"NM","B","CRHD SAVE TEMP FLD",47)

"BLD",18207,"KRN",8994,"NM","B","CRHD SAVE XPAR PARAMETERS",48)

"BLD",18207,"KRN",8994,"NM","B","CRHD SERVICE INFO",49)

"BLD",18207,"KRN",8994,"NM","B","CRHD SORT PRINT LIST",50)

"BLD",18207,"KRN",8994,"NM","B","CRHD SPECIALTY INFO",51)

"BLD",18207,"KRN",8994,"NM","B","CRHD TM PRV INFO",52)

"BLD",18207,"KRN",8994,"NM","B","CRHD TM PRV LIST",53)

"BLD",18207,"KRN",8994,"NM","B","CRHD USER PHONE INFO",54)

"BLD",18207,"KRN",8994,"NM","B","CRHD USER PHONE NUMBERS",55)

"BLD",18207,"KRN","B",.4,.4)

"BLD",18207,"KRN","B",.401,.401)

"BLD",18207,"KRN","B",.402,.402)

"BLD",18207,"KRN","B",.403,.403)

"BLD",18207,"KRN","B",.5,.5)

"BLD",18207,"KRN","B",.84,.84)

"BLD",18207,"KRN","B",3.6,3.6)

"BLD",18207,"KRN","B",3.8,3.8)

"BLD",18207,"KRN","B",9.2,9.2)

"BLD",18207,"KRN","B",9.8,9.8)

"BLD",18207,"KRN","B",19,19)

"BLD",18207,"KRN","B",19.1,19.1)

"BLD",18207,"KRN","B",101,101)

"BLD",18207,"KRN","B",409.61,409.61)

"BLD",18207,"KRN","B",771,771)

"BLD",18207,"KRN","B",870,870)

"BLD",18207,"KRN","B",8989.51,8989.51)

"BLD",18207,"KRN","B",8989.52,8989.52)

"BLD",18207,"KRN","B",8994,8994)

"BLD",18207,"QDEF")
^^^^NO^^^^YES^^NO
"BLD",18207,"QUES",0)
^9.62^^
"BLD",18207,"REQB",0)
^9.611^^
"FIA",183)
CRHD HANDOFF PARAMETERS
"FIA",183,0)
^CRHD(183,
"FIA",183,0,0)
183V
"FIA",183,0,1)
y^y^f^^^^n
"FIA",183,0,10)

"FIA",183,0,11)

"FIA",183,0,"RLRO")

"FIA",183,0,"VR")
1.0^CRHD
"FIA",183,183)
0
"FIA",183,183.01)
0
"FIA",183,183.12)
0
"FIA",183.2)
CRHD TEMPORARY DATA
"FIA",183.2,0)
^CRHD(183.2,
"FIA",183.2,0,0)
183.2
"FIA",183.2,0,1)
y^y^f^^^^n
"FIA",183.2,0,10)

"FIA",183.2,0,11)

"FIA",183.2,0,"RLRO")

"FIA",183.2,0,"VR")
1.0^CRHD
"FIA",183.2,183.2)
0
"FIA",183.2,183.21)
0
"FIA",183.3)
CRHD HOT TEAM PATIENT LIST
"FIA",183.3,0)
^CRHD(183.3,
"FIA",183.3,0,0)
183.3
"FIA",183.3,0,1)
y^y^f^^^^n
"FIA",183.3,0,10)

"FIA",183.3,0,11)

"FIA",183.3,0,"RLRO")

"FIA",183.3,0,"VR")
1.0^CRHD
"FIA",183.3,183.3)
0
"FIA",183.3,183.31)
0
"FIA",183.3,183.32)
0
"FIA",183.4)
CRHD TEAM CONTACT LIST
"FIA",183.4,0)
^CRHD(183.4,
"FIA",183.4,0,0)
183.4
"FIA",183.4,0,1)
^^f
"FIA",183.4,0,10)

"FIA",183.4,0,11)

"FIA",183.4,0,"RLRO")

"FIA",183.4,0,"VR")
1.0^CRHD
"FIA",183.4,183.4)
0
"FIA",183.4,183.41)
0
"INIT")
ENT^CRHDI01
"KRN",19,12480,-1)
0^1
"KRN",19,12480,0)
CRHD SHIFT CHANGE HANDOFF^Shift Change Handoff Tool^^B^^^^^^^^
"KRN",19,12480,99.1)
61094,35911
"KRN",19,12480,"RPC",0)
^19.05P^75^75
"KRN",19,12480,"RPC",1,0)
ORWU USERINFO
"KRN",19,12480,"RPC",2,0)
ORWU NEWPERS
"KRN",19,12480,"RPC",3,0)
ORQPT PROVIDER PATIENTS
"KRN",19,12480,"RPC",4,0)
ORQPT SPECIALTIES
"KRN",19,12480,"RPC",5,0)
ORQPT SPECIALTY PATIENTS
"KRN",19,12480,"RPC",6,0)
ORQPT TEAMS
"KRN",19,12480,"RPC",7,0)
ORQPT TEAM PATIENTS
"KRN",19,12480,"RPC",8,0)
ORQPT WARDS
"KRN",19,12480,"RPC",9,0)
ORQPT DEFAULT LIST SOURCE
"KRN",19,12480,"RPC",10,0)
ORWPT LIST ALL
"KRN",19,12480,"RPC",11,0)
ORWPT LAST5
"KRN",19,12480,"RPC",12,0)
ORWPT FULLSSN
"KRN",19,12480,"RPC",13,0)
ORWPT BYWARD
"KRN",19,12480,"RPC",14,0)
ORWTPP NEWLIST
"KRN",19,12480,"RPC",15,0)
ORWTPP PLISTS
"KRN",19,12480,"RPC",16,0)
ORWTPP SAVELIST
"KRN",19,12480,"RPC",17,0)
ORWTPP DELLIST
"KRN",19,12480,"RPC",18,0)
ORQPT DEFAULT LIST SORT
"KRN",19,12480,"RPC",19,0)
CRHD ADDITIONAL USER INFO
"KRN",19,12480,"RPC",20,0)
CRHD ALL USER PARAMETERS
"KRN",19,12480,"RPC",21,0)
CRHD AVAILABLE PARAMETERS
"KRN",19,12480,"RPC",22,0)
CRHD DEFAULT PREFERENCE
"KRN",19,12480,"RPC",23,0)
CRHD DELETE A PREFERENCE
"KRN",19,12480,"RPC",24,0)
CRHD GET CONSULT
"KRN",19,12480,"RPC",25,0)
CRHD GET DNR TITLES
"KRN",19,12480,"RPC",26,0)
CRHD GET IMAGING
"KRN",19,12480,"RPC",27,0)
CRHD GET LABS
"KRN",19,12480,"RPC",28,0)
CRHD GET ONE PARAMETER
"KRN",19,12480,"RPC",29,0)
CRHD GET ORDERABLE ITEMS
"KRN",19,12480,"RPC",30,0)
CRHD GET PAT LIST
"KRN",19,12480,"RPC",31,0)
CRHD GET PREFERENCES
"KRN",19,12480,"RPC",32,0)
CRHD GET TEAM PHONE NUMBERS
"KRN",19,12480,"RPC",33,0)
CRHD GET TEMP FLD
"KRN",19,12480,"RPC",34,0)
CRHD GET USER DIVISIONS
"KRN",19,12480,"RPC",35,0)
CRHD GET USER PARAMETERS
"KRN",19,12480,"RPC",36,0)
CRHD GET XPAR VALUES
"KRN",19,12480,"RPC",37,0)
CRHD HOT CAN EDIT
"KRN",19,12480,"RPC",38,0)
CRHD HOT DELETE PAT/PRV
"KRN",19,12480,"RPC",39,0)
CRHD HOT DELETE TEAM LIST
"KRN",19,12480,"RPC",40,0)
CRHD HOT MODIFY LIST
"KRN",19,12480,"RPC",41,0)
CRHD HOT PATIENT LIST
"KRN",19,12480,"RPC",42,0)
CRHD HOT PATPRV
"KRN",19,12480,"RPC",43,0)
CRHD HOT PROVIDER BY CLASS
"KRN",19,12480,"RPC",44,0)
CRHD HOT PROVIDER LIST
"KRN",19,12480,"RPC",45,0)
CRHD HOT PROVIDER LIST2
"KRN",19,12480,"RPC",46,0)
CRHD HOT PROVIDER PATIENTS
"KRN",19,12480,"RPC",47,0)
CRHD HOT PRV INFO
"KRN",19,12480,"RPC",48,0)
CRHD HOT TEAM LIST
"KRN",19,12480,"RPC",49,0)
CRHD HOT TEAM PHONE INFO
"KRN",19,12480,"RPC",50,0)
CRHD HOT TEAM SAVE
"KRN",19,12480,"RPC",51,0)
CRHD HOT TEAM MGR
"KRN",19,12480,"RPC",52,0)
CRHD IS RECORD LOCKED
"KRN",19,12480,"RPC",53,0)
CRHD LIST DIVISIONS
"KRN",19,12480,"RPC",54,0)
CRHD LIST SERVICES
"KRN",19,12480,"RPC",55,0)
CRHD MGR
"KRN",19,12480,"RPC",56,0)
CRHD MOD TM PROVIDERS
"KRN",19,12480,"RPC",57,0)
CRHD PAT ACTMEDS
"KRN",19,12480,"RPC",58,0)
CRHD PAT ALLERGIES
"KRN",19,12480,"RPC",59,0)
CRHD PAT CODESTS
"KRN",19,12480,"RPC",60,0)
CRHD PAT DEMO
"KRN",19,12480,"RPC",61,0)
CRHD SAVE DNR TITLES
"KRN",19,12480,"RPC",62,0)
CRHD SAVE PARAMETERS
"KRN",19,12480,"RPC",63,0)
CRHD SAVE TEMP FLD
"KRN",19,12480,"RPC",64,0)
CRHD SAVE XPAR PARAMETERS
"KRN",19,12480,"RPC",65,0)
CRHD SERVICE INFO
"KRN",19,12480,"RPC",66,0)
CRHD SORT PRINT LIST
"KRN",19,12480,"RPC",67,0)
CRHD SPECIALTY INFO
"KRN",19,12480,"RPC",68,0)
CRHD TM PRV INFO
"KRN",19,12480,"RPC",69,0)
CRHD TM PRV LIST
"KRN",19,12480,"RPC",70,0)
CRHD USER PHONE INFO
"KRN",19,12480,"RPC",71,0)
CRHD USER PHONE NUMBERS
"KRN",19,12480,"RPC",72,0)
CRHD COMB TM LIST
"KRN",19,12480,"RPC",73,0)
CRHD INPT LIST
"KRN",19,12480,"RPC",74,0)
CRHD GET TEAM FILENAME
"KRN",19,12480,"RPC",75,0)
CRHD SAVE TEAM FILENAME
"KRN",19,12480,"U")
SHIFT CHANGE HANDOFF TOOL
"KRN",19.1,470,-1)
0^1
"KRN",19.1,470,0)
CRHD HOT TEAM MGR^Shift Chg Handoff Hot Team Mgr^l
"KRN",19.1,471,-1)
0^2
"KRN",19.1,471,0)
CRHD SHIFT CHG HANDOFF MGR^Shift Chg Handoff Tool Mgr^l
"KRN",19.1,471,1,0)
^19.11^1^1^3071126^^
"KRN",19.1,471,1,1,0)
Key that allows the user to enter/edit Perferences for the CAIRO Hand-off
"KRN",8989.51,457,-1)
0^2
"KRN",8989.51,457,0)
CRHD DNR ORDER TITLE^Shift Change Handoff DNR Order^1^Sequence
"KRN",8989.51,457,1)
F
"KRN",8989.51,457,6)
F
"KRN",8989.51,457,20,0)
^8989.512^2^2^3070831^^^^
"KRN",8989.51,457,20,1,0)
if an orderable item  for DNR can not be found in the list of orders than 
"KRN",8989.51,457,20,2,0)
look for a text order using this parameter value list.
"KRN",8989.51,457,30,0)
^8989.513I^1^1
"KRN",8989.51,457,30,1,0)
1^4
"KRN",8989.51,458,-1)
0^1
"KRN",8989.51,458,0)
CRHD DEFAULT PREFERENCE^Shift Change Handoff Default Preference
"KRN",8989.51,458,1)
F^
"KRN",8989.51,458,6)
^
"KRN",8989.51,458,30,0)
^8989.513I^1^1
"KRN",8989.51,458,30,1,0)
1^200
"KRN",8989.51,459,-1)
0^3
"KRN",8989.51,459,0)
CRHD DNR ORDERABLE ITEMS^Shift Chg Handoff Tool DNR Order Titles^1
"KRN",8989.51,459,1)
P^101.43;ORD(
"KRN",8989.51,459,2)

"KRN",8989.51,459,6)
N
"KRN",8989.51,459,30,0)
^8989.513I^1^1
"KRN",8989.51,459,30,1,0)
1^4
"KRN",8989.51,460,-1)
0^4
"KRN",8989.51,460,0)
CRHD TEMP FLD EXPIRE^Shift Change Handoff Temp field Expire
"KRN",8989.51,460,1)
N
"KRN",8989.51,460,30,0)
^8989.513I^1^1
"KRN",8989.51,460,30,1,0)
1^4
"KRN",8994,2038,-1)
0^47
"KRN",8994,2038,0)
CRHD SAVE TEMP FLD^TEMPDATA^CRHD2^2
"KRN",8994,2039,-1)
0^44
"KRN",8994,2039,0)
CRHD PAT DEMO^PATDEMO^CRHD^1
"KRN",8994,2039,1,0)
^8994.01^4^4^3061026^^^^
"KRN",8994,2039,1,1,0)
Returns:
"KRN",8994,2039,1,2,0)
NAME^SSN^DOB^AGE^SEX^ROOM/BED^TREATING_SPECIALTY^ATTENDING^
"KRN",8994,2039,1,3,0)
PRIMARY_CARE_PROVIDER^WARD_LOCATION
"KRN",8994,2039,1,4,0)
ADMISSION_DATE^DAY_WITHIN_ADMISSION^ADMISSION_DIAGNOSIS
"KRN",8994,2039,2,0)
^8994.02A^1^1
"KRN",8994,2039,2,1,0)
STR^1
"KRN",8994,2039,2,"B","STR",1)

"KRN",8994,2040,-1)
0^42
"KRN",8994,2040,0)
CRHD PAT ALLERGIES^ALG^CRHD^2
"KRN",8994,2040,2,0)
^8994.02A^1^1
"KRN",8994,2040,2,1,0)
STR^1
"KRN",8994,2040,2,"B","STR",1)

"KRN",8994,2041,-1)
0^41
"KRN",8994,2041,0)
CRHD PAT ACTMEDS^ACTMED^CRHD^2
"KRN",8994,2041,2,0)
^8994.02A^1^1
"KRN",8994,2041,2,1,0)
STR^1
"KRN",8994,2041,2,"B","STR",1)

"KRN",8994,2042,-1)
0^43
"KRN",8994,2042,0)
CRHD PAT CODESTS^CODESTS^CRHD^2
"KRN",8994,2042,2,0)
^8994.02A^1^1
"KRN",8994,2042,2,1,0)
STR^1
"KRN",8994,2042,2,"B","STR",1)

"KRN",8994,2043,-1)
0^16
"KRN",8994,2043,0)
CRHD GET TEMP FLD^GTEMPTXT^CRHD3^2
"KRN",8994,2043,2,0)
^8994.02A^3^3
"KRN",8994,2043,2,1,0)
FLDNAME^1
"KRN",8994,2043,2,2,0)
USER^1
"KRN",8994,2043,2,3,0)
DFN^1
"KRN",8994,2043,2,"B","DFN",3)

"KRN",8994,2043,2,"B","FLDNAME",1)

"KRN",8994,2043,2,"B","USER",2)

"KRN",8994,2044,-1)
0^13
"KRN",8994,2044,0)
CRHD GET PAT LIST^GETPTLST^CRHD3^2
"KRN",8994,2045,-1)
0^2
"KRN",8994,2045,0)
CRHD ALL USER PARAMETERS^GETALLP^CRHD4^2
"KRN",8994,2046,-1)
0^11
"KRN",8994,2046,0)
CRHD GET ONE PARAMETER^GETONEP^CRHD4^2
"KRN",8994,2047,-1)
0^7
"KRN",8994,2047,0)
CRHD GET CONSULT^CONSULT^CRHDUT^2
"KRN",8994,2048,-1)
0^9
"KRN",8994,2048,0)
CRHD GET IMAGING^IMAGING^CRHDUT^2
"KRN",8994,2049,-1)
0^10
"KRN",8994,2049,0)
CRHD GET LABS^LABS^CRHDUT^2
"KRN",8994,2050,-1)
0^46
"KRN",8994,2050,0)
CRHD SAVE PARAMETERS^SAVEPARM^CRHD4^2
"KRN",8994,2051,-1)
0^38
"KRN",8994,2051,0)
CRHD LIST SERVICES^SRV^CRHD5^2
"KRN",8994,2052,-1)
0^37
"KRN",8994,2052,0)
CRHD LIST DIVISIONS^DIV^CRHD5^2
"KRN",8994,2053,-1)
0^45
"KRN",8994,2053,0)
CRHD SAVE DNR TITLES^SAVEP^CRHD6^2
"KRN",8994,2054,-1)
0^8
"KRN",8994,2054,0)
CRHD GET DNR TITLES^GETDNRT^CRHD4^2
"KRN",8994,2055,-1)
0^1
"KRN",8994,2055,0)
CRHD ADDITIONAL USER INFO^AUSRINFO^CRHDUT2^2
"KRN",8994,2056,-1)
0^14
"KRN",8994,2056,0)
CRHD GET PREFERENCES^GETP^CRHD6^2
"KRN",8994,2057,-1)
0^15
"KRN",8994,2057,0)
CRHD GET TEAM PHONE NUMBERS^TEAMMEM^CRHD7^2
"KRN",8994,2058,-1)
0^54
"KRN",8994,2058,0)
CRHD USER PHONE INFO^DISPEMP^CRHDUD^2
"KRN",8994,2059,-1)
0^36
"KRN",8994,2059,0)
CRHD IS RECORD LOCKED^LOCK^CRHD2^1
"KRN",8994,2060,-1)
0^39
"KRN",8994,2060,0)
CRHD MGR^MGR^CRHD7^1
"KRN",8994,2061,-1)
0^49
"KRN",8994,2061,0)
CRHD SERVICE INFO^SRV^CRHDUD^2
"KRN",8994,2062,-1)
0^51
"KRN",8994,2062,0)
CRHD SPECIALTY INFO^SPEC^CRHDUD^2
"KRN",8994,2063,-1)
0^50
"KRN",8994,2063,0)
CRHD SORT PRINT LIST^SORT^CRHD8^2
"KRN",8994,2064,-1)
0^17
"KRN",8994,2064,0)
CRHD GET USER DIVISIONS^USERDIV^CRHD5^2
"KRN",8994,2065,-1)
0^31
"KRN",8994,2065,0)
CRHD HOT TEAM LIST^HOLIST^CRHD9^2
"KRN",8994,2066,-1)
0^24
"KRN",8994,2066,0)
CRHD HOT PATIENT LIST^HOPLIST^CRHD9^2
"KRN",8994,2067,-1)
0^27
"KRN",8994,2067,0)
CRHD HOT PROVIDER LIST^HODLIST^CRHD9^2
"KRN",8994,2068,-1)
0^20
"KRN",8994,2068,0)
CRHD HOT CAN EDIT^CANEDIT^CRHD9^1
"KRN",8994,2069,-1)
0^23
"KRN",8994,2069,0)
CRHD HOT MODIFY LIST^MOD^CRHD9^1
"KRN",8994,2070,-1)
0^30
"KRN",8994,2070,0)
CRHD HOT PRV INFO^PRVINFO^CRHD9^1
"KRN",8994,2071,-1)
0^33
"KRN",8994,2071,0)
CRHD HOT TEAM SAVE^HOTMSAVE^CRHD9^1
"KRN",8994,2072,-1)
0^22
"KRN",8994,2072,0)
CRHD HOT DELETE TEAM LIST^HOTMDEL^CRHD9^1
"KRN",8994,2073,-1)
0^25
"KRN",8994,2073,0)
CRHD HOT PATPRV^PATPRV^CRHD9^1
"KRN",8994,2074,-1)
0^21
"KRN",8994,2074,0)
CRHD HOT DELETE PAT/PRV^DELENTS^CRHD1^1
"KRN",8994,2076,-1)
0^28
"KRN",8994,2076,0)
CRHD HOT PROVIDER LIST2^HOTMMEM^CRHD1^2
"KRN",8994,2077,-1)
0^26
"KRN",8994,2077,0)
CRHD HOT PROVIDER BY CLASS^HOTMMEMS^CRHD1^2
"KRN",8994,2078,-1)
0^29
"KRN",8994,2078,0)
CRHD HOT PROVIDER PATIENTS^HOTPRVPT^CRHD1^2
"KRN",8994,2079,-1)
0^55
"KRN",8994,2079,0)
CRHD USER PHONE NUMBERS^USERPHPG^CRHD9^1
"KRN",8994,2080,-1)
0^32
"KRN",8994,2080,0)
CRHD HOT TEAM PHONE INFO^HOTEAM^CRHDUD^2
"KRN",8994,2081,-1)
0^48
"KRN",8994,2081,0)
CRHD SAVE XPAR PARAMETERS^SAVEP2^CRHD6^2
"KRN",8994,2082,-1)
0^19
"KRN",8994,2082,0)
CRHD GET XPAR VALUES^GETPAR2^CRHD6^2
"KRN",8994,2083,-1)
0^40
"KRN",8994,2083,0)
CRHD MOD TM PROVIDERS^TMMOD^CRHD10^1
"KRN",8994,2084,-1)
0^53
"KRN",8994,2084,0)
CRHD TM PRV LIST^TMLIST^CRHD10^2
"KRN",8994,2085,-1)
0^52
"KRN",8994,2085,0)
CRHD TM PRV INFO^TMPRVINF^CRHD10^1
"KRN",8994,2086,-1)
0^18
"KRN",8994,2086,0)
CRHD GET USER PARAMETERS^GETIT^CRHD11^2
"KRN",8994,2087,-1)
0^3
"KRN",8994,2087,0)
CRHD AVAILABLE PARAMETERS^GETALLPL^CRHD11^2
"KRN",8994,2088,-1)
0^5
"KRN",8994,2088,0)
CRHD DEFAULT PREFERENCE^DEFPREF^CRHD11^2
"KRN",8994,2089,-1)
0^12
"KRN",8994,2089,0)
CRHD GET ORDERABLE ITEMS^LORDITM^CRHDDR^2
"KRN",8994,2090,-1)
0^6
"KRN",8994,2090,0)
CRHD DELETE A PREFERENCE^DELPREF^CRHD5^2
"KRN",8994,2091,-1)
0^4
"KRN",8994,2091,0)
CRHD COMB TM LIST^TMCOMB^CRHD10^2
"KRN",8994,2092,-1)
0^35
"KRN",8994,2092,0)
CRHD INPT LIST^LISTINPT^CRHD3^2
"KRN",8994,2106,-1)
0^56
"KRN",8994,2106,0)
CRHD HOT TEAM MGR^HOTMMGR^CRHD1^1
"KRN",8994,2107,-1)
0^58
"KRN",8994,2107,0)
CRHD GET TEAM FILENAME^FILENGET^CRHD9^1
"KRN",8994,2108,-1)
0^57
"KRN",8994,2108,0)
CRHD SAVE TEAM FILENAME^FILENSAV^CRHD9^1
"MBREQ")
0
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3;;PAR1DEL^XPDIA3(%)
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"PKG",404,-1)
1^1
"PKG",404,0)
SHIFT CHANGE HANDOFF TOOL^CRHD^CAIRO PRODUCT CONVERSION TO CLASS I PRODUCT
"PKG",404,5)
SLC
"PKG",404,7)
^^I
"PKG",404,20,0)
^9.402P^^
"PKG",404,22,0)
^9.49I^1^1
"PKG",404,22,1,0)
1.0^3080513
"PKG",404,"VERSION")
1.0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
20
"RTN","CRHD")
0^1^B1457874
"RTN","CRHD",1,0)
CRHD ; CAIRO/CLC - GET THE PATIENT DATA ELEMENTS FOR CHANGEOVER LIST ;04-Mar-2008 16:00;CLC
"RTN","CRHD",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD",3,0)
 ;=================================================================
"RTN","CRHD",4,0)
ALG(CRHDROOT,CRHDSTR) ; Allergies
"RTN","CRHD",5,0)
 D ALG^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",6,0)
 Q
"RTN","CRHD",7,0)
ACTMED(CRHDROOT,CRHDSTR) ;Active Medications
"RTN","CRHD",8,0)
 D ACTMED^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",9,0)
 Q
"RTN","CRHD",10,0)
CONSULT(CRHDROOT,CRHDSTR) ;consults orders - call from cprs
"RTN","CRHD",11,0)
 D CONSULT^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",12,0)
 Q
"RTN","CRHD",13,0)
IMAGING(CRHDROOT,CRHDSTR) ;Radiology orders - call from cprs
"RTN","CRHD",14,0)
 D IMAGING^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",15,0)
 Q
"RTN","CRHD",16,0)
LABS(CRHDROOT,CRHDSTR) ;LABS orders - call from cprs
"RTN","CRHD",17,0)
 D LABS^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",18,0)
 Q
"RTN","CRHD",19,0)
PROC(CRHDROOT,CRHDSTR) ;Procedures orders - call from cprs
"RTN","CRHD",20,0)
 D PROC^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",21,0)
 Q
"RTN","CRHD",22,0)
PROB(CRHDROOT,CRHDSTR) ;DFN,NUM,HDR) ;
"RTN","CRHD",23,0)
 D PROB^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",24,0)
 Q
"RTN","CRHD",25,0)
RECENTLR(ROOT,DFN,NUM,HDR) ;
"RTN","CRHD",26,0)
 D RECNTLAB^CRHDUT(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",27,0)
 Q
"RTN","CRHD",28,0)
PATDEMO(CRHDROOT,CRHDSTR) ;GET PATIENTS DEMOGRAPHICS
"RTN","CRHD",29,0)
 D PATDEMO^CRHDUT2(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",30,0)
 Q
"RTN","CRHD",31,0)
CODESTS(CRHDROOT,CRHDSTR) ; GET CODE STATUS
"RTN","CRHD",32,0)
 D CODESTS^CRHD2(.CRHDROOT,.CRHDSTR)
"RTN","CRHD",33,0)
 Q
"RTN","CRHD1")
0^9^B15630604
"RTN","CRHD1",1,0)
CRHD1 ; CAIRO/CLC - ADDED TO WORK WITH HAND OFF TEAM SECTION ;04-Mar-2008 16:00;CLC
"RTN","CRHD1",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD1",3,0)
 ;=================================================================
"RTN","CRHD1",4,0)
DELENTS(CRHDRTN,CRHDTM,CRHDTY,CRHDP) ;
"RTN","CRHD1",5,0)
 ;delete a Hand off patient, provider, or team
"RTN","CRHD1",6,0)
 N DA,DIK
"RTN","CRHD1",7,0)
 K CRHDRTN
"RTN","CRHD1",8,0)
 S CRHDRTN=0
"RTN","CRHD1",9,0)
 N CRHDPIEN,CRHDN
"RTN","CRHD1",10,0)
 S CRHDN=$S(CRHDTY="P":1,1:2)
"RTN","CRHD1",11,0)
 S CRHDPIEN=$O(^CRHD(183.3,+CRHDTM,+CRHDN,"B",+CRHDP,0))
"RTN","CRHD1",12,0)
 I CRHDPIEN S DIK="^CRHD(183.3,"_+CRHDTM_","_+CRHDN_",",DA(1)=+CRHDTM,DA=CRHDPIEN D ^DIK S CRHDRTN=1
"RTN","CRHD1",13,0)
 Q
"RTN","CRHD1",14,0)
HOTMMGR(CRHDRTN,DUZ) ;
"RTN","CRHD1",15,0)
 N CRHDKN,CRHDKEYS,CRHDOUT
"RTN","CRHD1",16,0)
 S CRHDRTN=0
"RTN","CRHD1",17,0)
 S CRHDKN=$$FIND1^DIC(19.1,"","X","CRHD HOT TEAM MGR","","","OUT")
"RTN","CRHD1",18,0)
 D GETS^DIQ(200,DUZ_",","51*","I","CRHDOUT")
"RTN","CRHD1",19,0)
 I CRHDKN>0 S CRHDRTN=$D(CRHDOUT(200.051,+CRHDKN_","_DUZ_","))
"RTN","CRHD1",20,0)
 Q
"RTN","CRHD1",21,0)
HOTMMEM(CRHDRTN,CRHDTM,CRHDFRM,CRHDDIR,CRHDPFG) ;
"RTN","CRHD1",22,0)
 ;Return a set of providers from the HOT Team list.
"RTN","CRHD1",23,0)
 ;CRHDPFG - only return providers who have patients assigned to them
"RTN","CRHD1",24,0)
 N CRHDPLST,CRHDN,CRHDMAX,CRHDORI,CRHDTL,CRHDPATS
"RTN","CRHD1",25,0)
 K CRHDRTN
"RTN","CRHD1",26,0)
 S CRHDRTN=""
"RTN","CRHD1",27,0)
 I '$G(CRHDDIR) S CRHDDIR=1
"RTN","CRHD1",28,0)
 S CRHDORI=0,CRHDMAX=44
"RTN","CRHD1",29,0)
 I $G(CRHDPFG) D PP G NX
"RTN","CRHD1",30,0)
 D HODLIST^CRHD9(.CRHDPLST,CRHDTM)
"RTN","CRHD1",31,0)
 I $D(CRHDPLST) D
"RTN","CRHD1",32,0)
 .S CRHDN=0
"RTN","CRHD1",33,0)
 .F  S CRHDN=$O(CRHDPLST(CRHDN)) Q:'CRHDN  D
"RTN","CRHD1",34,0)
 ..S CRHDTL($P(CRHDPLST(CRHDN),"^",2))=CRHDPLST(CRHDN)
"RTN","CRHD1",35,0)
NX I CRHDFRM'="",$D(CRHDTL(CRHDFRM)) S CRHDFRM=$E(CRHDFRM,1,$L(CRHDFRM)-1)
"RTN","CRHD1",36,0)
 S CRHDN=CRHDFRM
"RTN","CRHD1",37,0)
 F  Q:CRHDORI'<CRHDMAX  S CRHDN=$O(CRHDTL(CRHDN),CRHDDIR) Q:CRHDN=""  D
"RTN","CRHD1",38,0)
 .S CRHDORI=CRHDORI+1,CRHDRTN(CRHDORI)=CRHDTL(CRHDN)
"RTN","CRHD1",39,0)
 Q
"RTN","CRHD1",40,0)
PP ;
"RTN","CRHD1",41,0)
 N CRHDPATS,CRHDX
"RTN","CRHD1",42,0)
 K CRHDPATS D HOTPRVPT(.CRHDPATS,CRHDTM,"")
"RTN","CRHD1",43,0)
 I $D(CRHDPATS) D
"RTN","CRHD1",44,0)
 .S CRHDX=0
"RTN","CRHD1",45,0)
 .F  S CRHDX=$O(CRHDPATS(CRHDX)) Q:'CRHDX  D
"RTN","CRHD1",46,0)
 ..S:'$D(CRHDTL($P(CRHDPATS(CRHDX),"^",1))) CRHDTL($P(CRHDPATS(CRHDX),"^",1))=$P(CRHDPATS(CRHDX),"^",2)_"^"_$P(CRHDPATS(CRHDX),"^",1)
"RTN","CRHD1",47,0)
 Q
"RTN","CRHD1",48,0)
HOTMMEMS(CRHDRTN,CRHDTM,CRHDFRM,CRHDDIR,CRHDCLAS) ;
"RTN","CRHD1",49,0)
 ;Return a subset of HO Team list
"RTN","CRHD1",50,0)
 ;CRHDCLAS
"RTN","CRHD1",51,0)
 ;    ATTN:ATTENDING
"RTN","CRHD1",52,0)
 ;    RES:RESIDENT
"RTN","CRHD1",53,0)
 ;    INTERN:INTERN
"RTN","CRHD1",54,0)
 ;    FELLOW:FELLOW
"RTN","CRHD1",55,0)
 ;    STUD:MED STUDENT
"RTN","CRHD1",56,0)
 N CRHDPLST,CRHDN,CRHDMAX,CRHDORI,CRHDTL
"RTN","CRHD1",57,0)
 K CRHDRTN
"RTN","CRHD1",58,0)
 I '$G(CRHDDIR) S CRHDDIR=1
"RTN","CRHD1",59,0)
 S CRHDORI=0,CRHDMAX=44
"RTN","CRHD1",60,0)
 D HOTMMEM(.CRHDPLST,CRHDTM,CRHDFRM,CRHDDIR)
"RTN","CRHD1",61,0)
 I $D(CRHDPLST) D
"RTN","CRHD1",62,0)
 .S CRHDN=0
"RTN","CRHD1",63,0)
 .F  S CRHDN=$O(CRHDPLST(CRHDN)) Q:'CRHDN  D
"RTN","CRHD1",64,0)
 ..I $G(CRHDCLAS)'="" I $P(CRHDPLST(CRHDN),"^",3)=CRHDCLAS S CRHDTL($P(CRHDPLST(CRHDN),"^",2))=CRHDPLST(CRHDN)
"RTN","CRHD1",65,0)
 ..I $G(CRHDCLAS)="" S CRHDTL($P(CRHDPLST(CRHDN),"^",2))=CRHDPLST(CRHDN)
"RTN","CRHD1",66,0)
 F  Q:CRHDORI'<CRHDMAX  S CRHDN=$O(CRHDTL(CRHDN),CRHDDIR) Q:CRHDN=""  D
"RTN","CRHD1",67,0)
 .S CRHDORI=CRHDORI+1,CRHDRTN(CRHDORI)=CRHDTL(CRHDN)
"RTN","CRHD1",68,0)
 Q
"RTN","CRHD1",69,0)
HOTPRVPT(CRHDRTN,CRHDTM,CRHDPRV) ;
"RTN","CRHD1",70,0)
 ;return list of patients from the HO team list provider
"RTN","CRHD1",71,0)
 K CRHDRTN
"RTN","CRHD1",72,0)
 N CRHDPLST,CRHDORI,CRHDMAX,CRHDP,CRHDTMPL,CRHDCT,CRHDI,CRHDN,CRHDNN,CRHDNNN
"RTN","CRHD1",73,0)
 S CRHDORI=0,CRHDMAX=44
"RTN","CRHD1",74,0)
 D HOPLIST^CRHD9(.CRHDPLST,CRHDTM)
"RTN","CRHD1",75,0)
 I $D(CRHDPLST) D
"RTN","CRHD1",76,0)
 .S CRHDN=0,CRHDCT=0
"RTN","CRHD1",77,0)
 .F  S CRHDN=$O(CRHDPLST(CRHDN)) Q:'CRHDN  D
"RTN","CRHD1",78,0)
 ..S CRHDP=$P(CRHDPLST(CRHDN),"*",2)
"RTN","CRHD1",79,0)
 ..F CRHDI=2:1:$L(CRHDP,";") I +$P(CRHDP,";",CRHDI) D
"RTN","CRHD1",80,0)
 ...I +CRHDPRV I +CRHDPRV=+$P(CRHDP,";",CRHDI) S CRHDCT=CRHDCT+1,CRHDTMPL($P($P(CRHDP,";",CRHDI),"^",2),+$P(CRHDP,";",CRHDI),CRHDCT)=$P(CRHDPLST(CRHDN),"*",1) Q
"RTN","CRHD1",81,0)
 ...I 'CRHDPRV S CRHDCT=CRHDCT+1,CRHDTMPL($P($P(CRHDP,";",CRHDI),"^",2),+$P(CRHDP,";",CRHDI),CRHDCT)=$P(CRHDPLST(CRHDN),"*",1)
"RTN","CRHD1",82,0)
 I $D(CRHDTMPL) D
"RTN","CRHD1",83,0)
 .S CRHDN=""
"RTN","CRHD1",84,0)
 .F  Q:CRHDORI'<CRHDMAX  S CRHDN=$O(CRHDTMPL(CRHDN)) Q:CRHDN=""  D
"RTN","CRHD1",85,0)
 ..S CRHDNN=0
"RTN","CRHD1",86,0)
 ..F  S CRHDNN=$O(CRHDTMPL(CRHDN,CRHDNN)) Q:'CRHDNN  D
"RTN","CRHD1",87,0)
 ...S CRHDNNN=0
"RTN","CRHD1",88,0)
 ...F  S CRHDNNN=$O(CRHDTMPL(CRHDN,CRHDNN,CRHDNNN)) Q:'CRHDNNN  D
"RTN","CRHD1",89,0)
 ....S CRHDORI=CRHDORI+1,CRHDRTN(CRHDORI)=CRHDN_"^"_CRHDNN_"^"_CRHDTMPL(CRHDN,CRHDNN,CRHDNNN)
"RTN","CRHD1",90,0)
 Q
"RTN","CRHD10")
0^10^B12600193
"RTN","CRHD10",1,0)
CRHD10 ; CAIRO/CLC - ASSIGN PROVIDERS TO A TEAM LIST ;04-Mar-2008 16:00;CLC
"RTN","CRHD10",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD10",3,0)
 ;=================================================================
"RTN","CRHD10",4,0)
TMDELAPV(CRHDRTN,CRHDTM) ;
"RTN","CRHD10",5,0)
 ;delete all providers from list, delete entry.
"RTN","CRHD10",6,0)
 N DA,DIK
"RTN","CRHD10",7,0)
 K CRHDRTN
"RTN","CRHD10",8,0)
 S CRHDRTN=0
"RTN","CRHD10",9,0)
 I +CRHDTM S DIK="^CRHD(183.4,",DA=+CRHDTM D ^DIK S CRHDRTN=1
"RTN","CRHD10",10,0)
 Q
"RTN","CRHD10",11,0)
TMLIST(CRHDRTN,CRHDTM) ;Get list of Providers for a team
"RTN","CRHD10",12,0)
 N CRHDX,CRHDPRV,CRHDTLST,CRHDCT,CRHDZ0,CRHDSORT,CRHDUT
"RTN","CRHD10",13,0)
 N CRHDI,CRHDTM6,CRHDPNAM
"RTN","CRHD10",14,0)
 K CRHDRTN
"RTN","CRHD10",15,0)
 S CRHDRTN(1)="No list found"
"RTN","CRHD10",16,0)
 Q:'CRHDTM
"RTN","CRHD10",17,0)
 Q:$P($G(CRHDTM),"^",2)=""
"RTN","CRHD10",18,0)
 I '$D(^CRHD(183.4,"B",$P(CRHDTM,"^",2))) Q
"RTN","CRHD10",19,0)
 S CRHDTM6=$O(^CRHD(183.4,"B",$P(CRHDTM,"^",2),0))
"RTN","CRHD10",20,0)
 I 'CRHDTM6 S CRHDRTN(1)=0 Q
"RTN","CRHD10",21,0)
 S CRHDX=0
"RTN","CRHD10",22,0)
 F  S CRHDX=$O(^CRHD(183.4,+CRHDTM6,1,CRHDX)) Q:'CRHDX  D
"RTN","CRHD10",23,0)
 .S CRHDPRV=+$G(^CRHD(183.4,+CRHDTM6,1,CRHDX,0))
"RTN","CRHD10",24,0)
 .S CRHDPNAM=$$GET1^DIQ(200,+CRHDPRV,.01,"E")
"RTN","CRHD10",25,0)
 .I CRHDPNAM'="" D
"RTN","CRHD10",26,0)
 ..S CRHDZ0=$G(^CRHD(183.4,+CRHDTM6,1,+CRHDX,0))
"RTN","CRHD10",27,0)
 ..S CRHDUT=$P(CRHDZ0,"^",2)
"RTN","CRHD10",28,0)
 ..I CRHDUT="" S CRHDUT="ZNOTYPE"
"RTN","CRHD10",29,0)
 ..S CRHDSORT(CRHDUT,CRHDPNAM)=CRHDPRV_"^"_CRHDPNAM_"^"_$P(CRHDZ0,"^",2)_"^"_$P(CRHDZ0,"^",3)_"^"_$P(CRHDZ0,"^",4)
"RTN","CRHD10",30,0)
 S CRHDI=""
"RTN","CRHD10",31,0)
 F  S CRHDI=$O(CRHDSORT(CRHDI)) Q:CRHDI=""  D
"RTN","CRHD10",32,0)
 .S CRHDPRV=""
"RTN","CRHD10",33,0)
 .F  S CRHDPRV=$O(CRHDSORT(CRHDI,CRHDPRV)) Q:CRHDPRV=""  D
"RTN","CRHD10",34,0)
 ..S CRHDTLST(CRHDPRV)=CRHDSORT(CRHDI,CRHDPRV)
"RTN","CRHD10",35,0)
 I $D(CRHDTLST) D
"RTN","CRHD10",36,0)
 .S CRHDCT=0
"RTN","CRHD10",37,0)
 .S CRHDX=""
"RTN","CRHD10",38,0)
 .F  S CRHDX=$O(CRHDTLST(CRHDX)) Q:CRHDX=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTLST(CRHDX)
"RTN","CRHD10",39,0)
 Q
"RTN","CRHD10",40,0)
TMPRVINF(CRHDRTN,CRHDTM,CRHDPHY) ;
"RTN","CRHD10",41,0)
 ;return user information
"RTN","CRHD10",42,0)
 N CRHDPRV,CRHDZ0,CRHDMGR,CRHDMN,CRHDPNAM
"RTN","CRHD10",43,0)
 Q:CRHDTM=""
"RTN","CRHD10",44,0)
 S CRHDMN=$O(^CRHD(183.4,"B",$P(CRHDTM,"^",2),0))
"RTN","CRHD10",45,0)
 S CRHDPRV=$O(^CRHD(183.4,+CRHDMN,1,"B",+CRHDPHY,0))
"RTN","CRHD10",46,0)
 I 'CRHDPRV Q
"RTN","CRHD10",47,0)
 S CRHDZ0=$G(^CRHD(183.4,+CRHDMN,1,+CRHDPRV,0))
"RTN","CRHD10",48,0)
 S CRHDPNAM=$$GET1^DIQ(200,+CRHDZ0,.01,"E")
"RTN","CRHD10",49,0)
 S CRHDRTN=$P(CRHDZ0,"^",1)_"^"_CRHDPNAM_"^"_$P(CRHDZ0,"^",2)_"^^^"_$P(CRHDZ0,"^",3,99)
"RTN","CRHD10",50,0)
 Q
"RTN","CRHD10",51,0)
TMMOD(CRHDRTN,CRHDTM,CRHDTXT,CRHDKFG) ;
"RTN","CRHD10",52,0)
 N CRHDX,CRHDFDA,CRHDOUT,CRHDERR,CRHDMN,CRHDPG,CRHDPL,CRHDOP
"RTN","CRHD10",53,0)
 K CRHDRTN
"RTN","CRHD10",54,0)
 S CRHDRTN(0)=0
"RTN","CRHD10",55,0)
 I '$D(^CRHD(183.4,"B",$P(CRHDTM,"^",2),+CRHDTM)) D
"RTN","CRHD10",56,0)
 .S CRHDFDA(183.4,"?+1,",.01)=$P(CRHDTM,"^",2)
"RTN","CRHD10",57,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD10",58,0)
A .I '$D(CRHDERR) S CRHDMN=CRHDOUT(1) K CRHDFDA,CRHDOUT
"RTN","CRHD10",59,0)
 Q:'CRHDMN
"RTN","CRHD10",60,0)
 K:CRHDKFG ^CRHD(183.4,CRHDMN,1)
"RTN","CRHD10",61,0)
 S CRHDX=0
"RTN","CRHD10",62,0)
 F  S CRHDX=$O(CRHDTXT(CRHDX)) Q:'CRHDX  D
"RTN","CRHD10",63,0)
 .S CRHDPL=$L(CRHDTXT(CRHDX),"^"),CRHDPG=$P(CRHDTXT(CRHDX),"^",CRHDPL)
"RTN","CRHD10",64,0)
 .S CRHDOP=$P(CRHDTXT(CRHDX),"^",CRHDPL-1)
"RTN","CRHD10",65,0)
 .S CRHDFDA(183.41,"?+"_(CRHDX+1)_","_+CRHDMN_","_"",.01)=$P(CRHDTXT(CRHDX),"^",1)
"RTN","CRHD10",66,0)
 .S CRHDFDA(183.41,"?+"_(CRHDX+1)_","_+CRHDMN_","_"",1)=$P(CRHDTXT(CRHDX),"^",3)
"RTN","CRHD10",67,0)
 .S CRHDFDA(183.41,"?+"_(CRHDX+1)_","_+CRHDMN_","_"",2)=CRHDOP
"RTN","CRHD10",68,0)
 .S CRHDFDA(183.41,"?+"_(CRHDX+1)_","_+CRHDMN_","_"",3)=CRHDPG
"RTN","CRHD10",69,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD10",70,0)
 I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD10",71,0)
 E  S CRHDRTN(1)=1
"RTN","CRHD10",72,0)
 K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD10",73,0)
 Q
"RTN","CRHD10",74,0)
TMCOMB(CRHDRTN) ;return list of teams for a user with a combination list
"RTN","CRHD10",75,0)
 N CRHDS,CRHDF,CRHDFN,CRHDSRC,CRHDCT
"RTN","CRHD10",76,0)
 Q:'$G(DUZ)
"RTN","CRHD10",77,0)
 S CRHDCT=0
"RTN","CRHD10",78,0)
 S CRHDSRC=0
"RTN","CRHD10",79,0)
 F  S CRHDSRC=$O(^OR(100.24,DUZ,.01,CRHDSRC)) Q:'CRHDSRC  D
"RTN","CRHD10",80,0)
 .S CRHDS=$G(^OR(100.24,DUZ,.01,CRHDSRC,0))
"RTN","CRHD10",81,0)
 .I CRHDS D
"RTN","CRHD10",82,0)
 ..S CRHDFN=+$P($P(CRHDS,";",2),"(",2)
"RTN","CRHD10",83,0)
 ..S CRHDF=+CRHDS
"RTN","CRHD10",84,0)
 ..S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDS_"^"_$$GET1^DIQ(CRHDFN,CRHDF,.01,"E")
"RTN","CRHD10",85,0)
 Q
"RTN","CRHD11")
0^11^B12360222
"RTN","CRHD11",1,0)
CRHD11 ; CAIRO/CLC - GET USERS PARAMETERS ;23-Mar-2008 13:13;CLC
"RTN","CRHD11",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD11",3,0)
 ;=================================================================
"RTN","CRHD11",4,0)
GETALLPL(CRHDRTN,DUZ,CRHDDIV) ;
"RTN","CRHD11",5,0)
 ;get a list of Parameters levels
"RTN","CRHD11",6,0)
 N CRHDPAR,CRHDTEAM,CRHDSRV,Y,CRHDX,CRHDIVIE,CRHDCT,CRHDMGR
"RTN","CRHD11",7,0)
 N CRHDI
"RTN","CRHD11",8,0)
 D MGR^CRHD7(.CRHDMGR,+DUZ)
"RTN","CRHD11",9,0)
 I +CRHDMGR D GETMGRPL(.CRHDRTN,DUZ) Q
"RTN","CRHD11",10,0)
 S Y=-1
"RTN","CRHD11",11,0)
 S CRHDCT=1
"RTN","CRHD11",12,0)
 D TEAMS^ORWTPT(.CRHDTEAM,DUZ)
"RTN","CRHD11",13,0)
 S CRHDSRV=$$GET1^DIQ(200,DUZ_",",29,"E")
"RTN","CRHD11",14,0)
 S CRHDPAR="USR.`"_DUZ
"RTN","CRHD11",15,0)
 D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD11",16,0)
 ;I (Y>0)&($$CKATNRES(+Y)) S CRHDRTN(CRHDCT)=Y_"^"_$$GETFENT($P(Y,"^",2),0,1)
"RTN","CRHD11",17,0)
 I Y>0 S CRHDRTN(CRHDCT)=Y_"^"_$$GETFENT($P(Y,"^",2),0,1)
"RTN","CRHD11",18,0)
 I $D(CRHDTEAM) D
"RTN","CRHD11",19,0)
 .S CRHDI=0
"RTN","CRHD11",20,0)
 .F  S CRHDI=$O(CRHDTEAM(CRHDI)) Q:'CRHDI  D
"RTN","CRHD11",21,0)
 ..S Y=0,CRHDPAR="OTL.`"_+CRHDTEAM(CRHDI) D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD11",22,0)
 ..I Y>0 S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=Y_"^"_$$GETFENT($P(Y,"^",2),0,1)
"RTN","CRHD11",23,0)
 I $G(CRHDSRV)'="" S Y=0,CRHDPAR="SRV."_CRHDSRV D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD11",24,0)
 I Y>0 S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=Y_"^"_$$GETFENT($P(Y,"^",2),0,1)
"RTN","CRHD11",25,0)
 I '+$G(CRHDDIV) S CRHDDIV=+$$SITE^VASITE
"RTN","CRHD11",26,0)
 S Y=0,CRHDPAR="DIV.`"_+CRHDDIV D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD11",27,0)
 I Y>0 S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=Y_"^"_$$GETFENT($P(Y,"^",2),0,1)
"RTN","CRHD11",28,0)
 I (Y<0) D
"RTN","CRHD11",29,0)
 .S CRHDIVIE=$O(^DIC(4,"D",CRHDDIV,0))
"RTN","CRHD11",30,0)
 .I CRHDIVIE S Y=0,CRHDPAR="DIV.`"_CRHDIVIE D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD11",31,0)
 .I Y>0 S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=Y_"^"_$$GETFENT($P(Y,"^",2),0,1)
"RTN","CRHD11",32,0)
 Q
"RTN","CRHD11",33,0)
GETIT(CRHDRTN,CRHDMN) ;get all of the users PARameters 2
"RTN","CRHD11",34,0)
 N CRHDX2,CRHDCT,CRHDP,CRHDMGR
"RTN","CRHD11",35,0)
 K CRHDRTN
"RTN","CRHD11",36,0)
 S (CRHDP,CRHDCT)=0
"RTN","CRHD11",37,0)
 ;Q:'$$CKATNRES(+CRHDMN)
"RTN","CRHD11",38,0)
 F  S CRHDP=$O(^CRHD(183,+CRHDMN,1,CRHDP)) Q:'CRHDP  D
"RTN","CRHD11",39,0)
 .S CRHDCT=CRHDCT+1
"RTN","CRHD11",40,0)
 .I $P($G(^CRHD(183,+CRHDMN,1,CRHDP,0)),"^",2)="" D
"RTN","CRHD11",41,0)
 ..S CRHDX2=0 F  S CRHDX2=$O(^CRHD(183,+CRHDMN,1,CRHDP,1,CRHDX2)) Q:'CRHDX2  D
"RTN","CRHD11",42,0)
 ...S CRHDRTN(CRHDCT)=$P($G(^CRHD(183,+CRHDMN,1,CRHDP,0)),"^",1)_"^"_$G(^CRHD(183,+CRHDMN,1,CRHDP,1,CRHDX2,0))
"RTN","CRHD11",43,0)
 ...S CRHDCT=CRHDCT+1
"RTN","CRHD11",44,0)
 .E  S CRHDRTN(CRHDCT)=$G(^CRHD(183,+CRHDMN,1,CRHDP,0))
"RTN","CRHD11",45,0)
 Q
"RTN","CRHD11",46,0)
CKATNRES(CRHDN) ;Check for Resident and Student fields only exist
"RTN","CRHD11",47,0)
 ;0 - Resident and/or Student Parameters or no Parameters exist
"RTN","CRHD11",48,0)
 ;1 - if full setup
"RTN","CRHD11",49,0)
 ;I '$D(^CRHD(183,CRHDN)) Q 0
"RTN","CRHD11",50,0)
 ;I $D(^CRHD(183,CRHDN,1,0))&($P(^CRHD(183,CRHDN,1,0),"^",4)>2) Q 1
"RTN","CRHD11",51,0)
 ;E  Q 0
"RTN","CRHD11",52,0)
 ;
"RTN","CRHD11",53,0)
GETMGRPL(CRHDRTN,CRHDUSR) ;Get a list of preferences for Manager, excludes user levels- this could be to long
"RTN","CRHD11",54,0)
 N CRHDPNAM,CRHDMN,CRHDCT,CRHDMGR
"RTN","CRHD11",55,0)
 S CRHDCT=0
"RTN","CRHD11",56,0)
 D MGR^CRHD7(.CRHDMGR,+CRHDUSR)
"RTN","CRHD11",57,0)
 Q:'CRHDMGR
"RTN","CRHD11",58,0)
 S CRHDPNAM=""
"RTN","CRHD11",59,0)
 F  S CRHDPNAM=$O(^CRHD(183,"B",CRHDPNAM)) Q:CRHDPNAM=""  D
"RTN","CRHD11",60,0)
 .S CRHDMN=0
"RTN","CRHD11",61,0)
 .F  S CRHDMN=$O(^CRHD(183,"B",CRHDPNAM,CRHDMN)) Q:'CRHDMN  D
"RTN","CRHD11",62,0)
 ..;Q:'$$CKATNRES(+CRHDMN)
"RTN","CRHD11",63,0)
 ..;S CRHDPFMT="^"_$P(CRHDPNAM,";",2)_+CRHDPNAM_",0)"
"RTN","CRHD11",64,0)
 ..I CRHDPNAM[";" S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDMN_"^"_CRHDPNAM_"^"_$$GETFENT(CRHDPNAM,0,1)
"RTN","CRHD11",65,0)
 Q
"RTN","CRHD11",66,0)
GETFENT(CRHDE,CRHDN,CRHDP) ;Convert to file entry
"RTN","CRHD11",67,0)
 ;CRHDE = entity
"RTN","CRHD11",68,0)
 ;CRHDN = node
"RTN","CRHD11",69,0)
 ;CRHDP = piece
"RTN","CRHD11",70,0)
 N CRHDPFMT
"RTN","CRHD11",71,0)
 S CRHDPFMT="^"_$P(CRHDE,";",2)_+CRHDE_","_CRHDN_")"
"RTN","CRHD11",72,0)
 Q $P($G(@CRHDPFMT),"^",CRHDP)
"RTN","CRHD11",73,0)
DEFPREF(CRHDRTN,CRHDUSR) ;Default preference for a user
"RTN","CRHD11",74,0)
 N CRHDE,CRHDOLST,CRHDX,Y,CRHDP
"RTN","CRHD11",75,0)
 K CRHDRTN
"RTN","CRHD11",76,0)
 S CRHDE="USR.`"_+CRHDUSR
"RTN","CRHD11",77,0)
 ;D GETLST^XPAR(.CRHDOLST,CRHDE,"CRHD DEFAULT PREFERENCE","E")
"RTN","CRHD11",78,0)
 S CRHDOLST=$$GET^XPAR(CRHDE,"CRHD DEFAULT PREFERENCE",1,"E")
"RTN","CRHD11",79,0)
 I CRHDOLST D
"RTN","CRHD11",80,0)
 .I '$$GET1^DIQ(183,+CRHDOLST_",",.01,"I") D NDEL^XPAR("USR.`"_+CRHDUSR,"CRHD DEFAULT PREFERENCE") Q
"RTN","CRHD11",81,0)
 .I CRHDOLST'?.E1"|".E S CRHDRTN(1)=+CRHDOLST_"^"_$$GET1^DIQ(183,+CRHDOLST_",",.01,"I")_"^"_$$GET1^DIQ(183,+CRHDOLST_",",.01,"E")_"^DEF" Q
"RTN","CRHD11",82,0)
 .S CRHDRTN(1)=$P(CRHDOLST,"^",2)
"RTN","CRHD11",83,0)
 .S CRHDRTN(1)=$TR(CRHDRTN(1),"|","^")_"^D"
"RTN","CRHD11",84,0)
 Q
"RTN","CRHD2")
0^13^B61931550
"RTN","CRHD2",1,0)
CRHD2 ; CAIRO/CLC - GET DATA ITEMS FOR CHANGEOVER LIST ;08-Apr-2008 08:03;CLC
"RTN","CRHD2",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD2",3,0)
 ;=================================================================
"RTN","CRHD2",4,0)
CODESTS(CRHDRTN,CRHDSTR) ;CODE STATUS -using orders, try to find and orderable item for DNR, if not found look for a text order
"RTN","CRHD2",5,0)
 ;                     by the name of DNRTITLE, title also set up as a p
"RTN","CRHD2",6,0)
 ;DFN      - patient internal entry number to Patient file
"RTN","CRHD2",7,0)
 ;DNRTITLE - DNR order title if not defined by a parameter
"RTN","CRHD2",8,0)
 ;DIVISION - the division user logged into
"RTN","CRHD2",9,0)
 ;LEN      - length of text to return for each line, default:18
"RTN","CRHD2",10,0)
 ;DTFLG    - return the start date and stop date for order default:yes
"RTN","CRHD2",11,0)
 ;
"RTN","CRHD2",12,0)
 N CRHDDFN,CRHDDNRT,CRHDDIV,CRHDLEN,CRHDX,CRHDY,CRHDCT,CRHDMDNR,CRHDQQFG
"RTN","CRHD2",13,0)
 N CRHDDTFG,CRHDOCT,CRHDSR,CRHDO,CRHDT,CRHDQ,CRHDQ1,CRHDQX,CRHDTMP,CRHDQY,CRHDFLG
"RTN","CRHD2",14,0)
 K CRHDRTN
"RTN","CRHD2",15,0)
 S CRHDDFN=+CRHDSTR
"RTN","CRHD2",16,0)
 S CRHDDNRT=$P(CRHDSTR,U,2)
"RTN","CRHD2",17,0)
 S CRHDDIV=$P(CRHDSTR,U,3)
"RTN","CRHD2",18,0)
 S CRHDLEN=$P(CRHDSTR,U,4)
"RTN","CRHD2",19,0)
 I 'CRHDLEN S CRHDLEN=18
"RTN","CRHD2",20,0)
 S CRHDDTFG=$P(CRHDSTR,U,5)
"RTN","CRHD2",21,0)
 I CRHDDTFG="" S CRHDDTFG=1
"RTN","CRHD2",22,0)
 S CRHDMDNR=+$P(CRHDSTR,U,6)
"RTN","CRHD2",23,0)
 D ENT^CRHDDR(.CRHDO,CRHDDFN,.CRHDDNRT,.CRHDDIV,CRHDMDNR)
"RTN","CRHD2",24,0)
 D ENT^CRHDDNR(.CRHDT,CRHDDFN,.CRHDDNRT,.CRHDDIV,CRHDMDNR)
"RTN","CRHD2",25,0)
 S CRHDQ=0 F  S CRHDQ=$O(CRHDO(CRHDQ)) Q:'CRHDQ  I $P(CRHDO(CRHDQ),"~",1)&(CRHDO(CRHDQ)["~") S CRHDTMP($P(CRHDO(CRHDQ),"~",1),$P(CRHDO(CRHDQ),"~",2))="CRHDO^"_CRHDQ
"RTN","CRHD2",26,0)
 S CRHDQ=0 F  S CRHDQ=$O(CRHDT(CRHDQ)) Q:'CRHDQ  I $P(CRHDT(CRHDQ),"~",1)&(CRHDT(CRHDQ)["~")  S CRHDTMP($P(CRHDT(CRHDQ),"~",1),$P(CRHDT(CRHDQ),"~",2))="CRHDT^"_CRHDQ
"RTN","CRHD2",27,0)
 S (CRHDCT,CRHDQQFG)=0
"RTN","CRHD2",28,0)
 S CRHDQ=0 F CRHDI=1:1 S CRHDQ=$O(CRHDTMP(CRHDQ)) Q:'CRHDQ!(CRHDQQFG)  S CRHDQ1=0 F  S CRHDQ1=$O(CRHDTMP(CRHDQ,CRHDQ1)) Q:'CRHDQ1  D
"RTN","CRHD2",29,0)
 .S CRHDQFLG=0
"RTN","CRHD2",30,0)
 .I 'CRHDMDNR S CRHDQQFG=1
"RTN","CRHD2",31,0)
 .S CRHDQX=$P(CRHDTMP(CRHDQ,CRHDQ1),"^",1),CRHDQY=$P(CRHDTMP(CRHDQ,CRHDQ1),"^",2)
"RTN","CRHD2",32,0)
 .S CRHDQ2=CRHDQY-1,CRHDQFLG=0 F  S CRHDQ2=$O(@CRHDQX@(CRHDQ2)) Q:'CRHDQ2!(CRHDQFLG)  D
"RTN","CRHD2",33,0)
 ..I (CRHDQ2'=CRHDQY)&(@CRHDQX@(CRHDQ2)["~") S CRHDQFLG=1 S:('CRHDMDNR)&(CRHDI>1) CRHDQQFG=1 Q
"RTN","CRHD2",34,0)
 ..I (CRHDQ2'=CRHDQY)&(@CRHDQX@(CRHDQ2)["~") S CRHDQFLG=1 Q
"RTN","CRHD2",35,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD2",36,0)
 ..I @CRHDQX@(CRHDQ2)["~" S CRHDRTN(CRHDCT)=$P(@CRHDQX@(CRHDQ2),"~",3)
"RTN","CRHD2",37,0)
 ..E  S CRHDRTN(CRHDCT)=@CRHDQX@(CRHDQ2)
"RTN","CRHD2",38,0)
 I $D(CRHDRTN) D
"RTN","CRHD2",39,0)
 .S CRHDX=0,CRHDCT=1
"RTN","CRHD2",40,0)
 .F  S CRHDX=$O(CRHDRTN(CRHDX)) Q:'CRHDX  D
"RTN","CRHD2",41,0)
 ..I $L(CRHDRTN(CRHDX))>CRHDLEN D
"RTN","CRHD2",42,0)
 ...F  Q:$L(CRHDRTN(CRHDX))=0  S CRHDCT=CRHDCT+1,CRHDY(CRHDCT)=$E(CRHDRTN(CRHDX),1,CRHDLEN),CRHDRTN(CRHDX)=$E(CRHDRTN(CRHDX),CRHDLEN+1,9999)
"RTN","CRHD2",43,0)
 ..E  D
"RTN","CRHD2",44,0)
 ...I CRHDRTN(CRHDX)["Stop Date" S CRHDY(CRHDCT)=CRHDY(CRHDCT)_"  "_CRHDRTN(CRHDX) D
"RTN","CRHD2",45,0)
 ....I $L(CRHDY(CRHDCT))>CRHDLEN S CRHDOCT=CRHDCT,CRHDSR=CRHDY(CRHDCT) F  Q:$L(CRHDSR)=0  S CRHDY(CRHDCT)=$E(CRHDSR,1,CRHDLEN),CRHDSR=$E(CRHDSR,CRHDLEN+1,9999),CRHDOCT=CRHDOCT+1
"RTN","CRHD2",46,0)
 ...E  S CRHDCT=CRHDCT+1,CRHDY(CRHDCT)=CRHDRTN(CRHDX)
"RTN","CRHD2",47,0)
 K CRHDRTN
"RTN","CRHD2",48,0)
 M CRHDRTN=CRHDY
"RTN","CRHD2",49,0)
 I CRHDCT>1 S CRHDRTN(1)=CRHDCT-1
"RTN","CRHD2",50,0)
 I $G(CRHDRTN(2))="" S CRHDRTN(1)=1,CRHDRTN(2)="Code Status Not Found"
"RTN","CRHD2",51,0)
 Q
"RTN","CRHD2",52,0)
NODETAM(CRHDY,CRHDDFN,CRHDCAT) ;GET ACTIVE MEDS WITHOUT THE DETAILS, FOR ACTIVE MEDS WITH DETAILS USE CRHDAM
"RTN","CRHD2",53,0)
 ;CRHDCAT :I - inpatient
"RTN","CRHD2",54,0)
 ;         O - outpatient
"RTN","CRHD2",55,0)
 N CRHDP1,CRHDP2,CRHDPP1,CRHDPP2,CRHDCT,CRHDN2,CRHDN3,CRHDRTN,CRHDSORT
"RTN","CRHD2",56,0)
 N CRHDN
"RTN","CRHD2",57,0)
 S CRHDCT=0
"RTN","CRHD2",58,0)
 D COVER^ORWPS(.CRHDRTN,CRHDDFN)
"RTN","CRHD2",59,0)
 I '$D(CRHDRTN) Q
"RTN","CRHD2",60,0)
 S CRHDN=0
"RTN","CRHD2",61,0)
 F  S CRHDN=$O(CRHDRTN(CRHDN)) Q:'CRHDN  D
"RTN","CRHD2",62,0)
 .S CRHDP1=$P(CRHDRTN(CRHDN),"^",1)
"RTN","CRHD2",63,0)
 .S CRHDPP1=$P(CRHDP1,";",1)
"RTN","CRHD2",64,0)
 .S CRHDPP2=$P(CRHDP1,";",2)
"RTN","CRHD2",65,0)
 .I CRHDCAT="O"&(CRHDPP2="O") D SORT
"RTN","CRHD2",66,0)
 .I CRHDCAT="I"&(CRHDPP2="I") D SORT
"RTN","CRHD2",67,0)
 D OUTPUT Q
"RTN","CRHD2",68,0)
 Q
"RTN","CRHD2",69,0)
SORT ;
"RTN","CRHD2",70,0)
 I $P(CRHDRTN(CRHDN),"^",4)'["ACTIVE" Q
"RTN","CRHD2",71,0)
 S CRHDSORT($E(CRHDPP1,$L(CRHDPP1)),$P(CRHDRTN(CRHDN),"^",2),CRHDPP1)=""
"RTN","CRHD2",72,0)
 Q
"RTN","CRHD2",73,0)
OUTPUT ;
"RTN","CRHD2",74,0)
 S CRHDN=""
"RTN","CRHD2",75,0)
 F  S CRHDN=$O(CRHDSORT(CRHDN)) Q:CRHDN=""  D
"RTN","CRHD2",76,0)
 .S CRHDN2="" F  S CRHDN2=$O(CRHDSORT(CRHDN,CRHDN2)) Q:CRHDN2=""  D
"RTN","CRHD2",77,0)
 ..S CRHDN3="" F  S CRHDN3=$O(CRHDSORT(CRHDN,CRHDN2,CRHDN3)) Q:CRHDN3=""  D
"RTN","CRHD2",78,0)
 ...S CRHDCT=CRHDCT+1
"RTN","CRHD2",79,0)
 ...I CRHDCAT="O"&(CRHDN="N") S CRHDY(CRHDN,CRHDCT)="NON-VA "_CRHDN2 Q
"RTN","CRHD2",80,0)
 ...S CRHDY(CRHDN,CRHDCT)=CRHDN2
"RTN","CRHD2",81,0)
 S CRHDY(0)=CRHDCT_"^"_CRHDCAT_$S(CRHDCAT="O":"UT",1:"N")_"PATIENT"
"RTN","CRHD2",82,0)
 Q
"RTN","CRHD2",83,0)
TEMPDATA(CRHDRTN,CRHDFLDN,CRHDUSER,CRHDDFN,CRHDTXT) ;TEMPORARY DATA, DATA ONLY USE FOR A SHORT TIME FRAME
"RTN","CRHD2",84,0)
 ;CRHDFLD - TEMP FIELD NAME
"RTN","CRHD2",85,0)
 ;CRHDUSER    - AUTHOR OF THE NOTE
"RTN","CRHD2",86,0)
 ;if fld already has the author then this is 'WHO LAST EDITED'
"RTN","CRHD2",87,0)
 ;CRHDDFN     - Patient
"RTN","CRHD2",88,0)
 ;TEXT    - Text to be stored
"RTN","CRHD2",89,0)
 N CRHDFDA,CRHDOUT,CRHDERR,CRHDFN,CRHDUPZ,CRHDUPZZ,CRHDPZZZ
"RTN","CRHD2",90,0)
 K CRHDRTN,CRHDUPY
"RTN","CRHD2",91,0)
 S CRHDFLDN=$$UP^XLFSTR(CRHDFLDN)
"RTN","CRHD2",92,0)
 S CRHDUPY=$$CHK(CRHDFLDN,CRHDUSER,CRHDDFN)
"RTN","CRHD2",93,0)
 S CRHDUPZ=$P(CRHDUPY,"^",2)
"RTN","CRHD2",94,0)
 I CRHDUPZ="+1," S CRHDUPZZ="?+1,",CRHDPZZZ="?+2,"
"RTN","CRHD2",95,0)
 E  S CRHDUPZZ="?+2,"
"RTN","CRHD2",96,0)
 I CRHDUPZ="+1," S CRHDUPZ=CRHDUPZZ,CRHDUPZZ=CRHDPZZZ D NEW
"RTN","CRHD2",97,0)
 E  D UPDATE(CRHDFLDN,CRHDUSER,CRHDDFN,.CRHDTXT)
"RTN","CRHD2",98,0)
 I $D(CRHDERR) D  Q
"RTN","CRHD2",99,0)
 .S ^CRHDER($$NOW^XLFDT,"ERROR-UPDATING DATA")=CRHDFLDN_U_CRHDUSER_U_CRHDDFN
"RTN","CRHD2",100,0)
 .M ^CRHDER($$NOW^XLFDT,"ERROR-UPDATING DATA")=CRHDTXT Q
"RTN","CRHD2",101,0)
 .K CRHDERR,CRHDOUT,CRHDFDA
"RTN","CRHD2",102,0)
 .S CRHDRTN(1)=0_"^ERROR SAVING DATA..."
"RTN","CRHD2",103,0)
 E  S CRHDRTN(1)=1_"^SAVE SUCCESSFUL..."
"RTN","CRHD2",104,0)
 Q
"RTN","CRHD2",105,0)
NEW S CRHDFDA(183.21,CRHDUPZZ_CRHDUPZ,1)=CRHDUSER
"RTN","CRHD2",106,0)
 S CRHDFDA(183.21,CRHDUPZZ_CRHDUPZ,2)=$$NOW^XLFDT
"RTN","CRHD2",107,0)
 S CRHDFDA(183.21,CRHDUPZZ_CRHDUPZ,5)=0
"RTN","CRHD2",108,0)
 D UPDATE(CRHDFLDN,CRHDUSER,CRHDDFN,.CRHDTXT)
"RTN","CRHD2",109,0)
 I $D(CRHDERR) D
"RTN","CRHD2",110,0)
 .S ^CRHDER($$NOW^XLFDT,"ERROR-ADDING DATA")=CRHDFLDN_U_CRHDUSER_U_CRHDDFN
"RTN","CRHD2",111,0)
 .M ^CRHDER($$NOW^XLFDT,"ERROR-ADDING DATA")=CRHDTXT Q
"RTN","CRHD2",112,0)
 .K CRHDERR,CRHDOUT,CRHDFDA
"RTN","CRHD2",113,0)
 Q
"RTN","CRHD2",114,0)
UPDATE(CRHDFLD,CRHDUSER,CRHDDFN,CRHDTXT) ;
"RTN","CRHD2",115,0)
 ;SEE NEWDATA
"RTN","CRHD2",116,0)
 S CRHDFDA(183.2,"?+1,",.01)=CRHDFLD
"RTN","CRHD2",117,0)
 S CRHDFDA(183.21,CRHDUPZZ_CRHDUPZ,.01)=CRHDDFN
"RTN","CRHD2",118,0)
 S CRHDFDA(183.21,CRHDUPZZ_CRHDUPZ,3)=CRHDUSER
"RTN","CRHD2",119,0)
 S CRHDFDA(183.21,CRHDUPZZ_CRHDUPZ,4)=$$NOW^XLFDT
"RTN","CRHD2",120,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD2",121,0)
 S CRHDIEN=$G(CRHDOUT(1)),CRHDMIEN=$G(CRHDOUT(2))
"RTN","CRHD2",122,0)
 L +^CRHD(183.2,CRHDIEN,1,CRHDMIEN):1 I '$T Q
"RTN","CRHD2",123,0)
 I '$D(CRHDERR) D STORETXT(CRHDIEN,CRHDMIEN,.CRHDTXT)
"RTN","CRHD2",124,0)
 L -^CRHD(183.2,CRHDIEN,1,CRHDMIEN)
"RTN","CRHD2",125,0)
 Q
"RTN","CRHD2",126,0)
STORETXT(CRHDIEN,CRHDMIEN,CRHDTARY) ;store text to file
"RTN","CRHD2",127,0)
 N CRHDTRG,CRHDFG,CRHDX,CRHDCT,CRHDLINE
"RTN","CRHD2",128,0)
 Q:'CRHDIEN&('CRHDMIEN)
"RTN","CRHD2",129,0)
 S CRHDTRG="CRHDTARY"
"RTN","CRHD2",130,0)
 Q:'$D(@CRHDTRG)
"RTN","CRHD2",131,0)
 ;D SAVEOLD(CRHDIEN,CRHDMIEN)
"RTN","CRHD2",132,0)
 K ^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT")
"RTN","CRHD2",133,0)
 S ^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT",0)="^^^^"_$$DT^XLFDT
"RTN","CRHD2",134,0)
 S CRHDX=0 F CRHDLINE=0:1 S CRHDX=$O(@CRHDTRG@(CRHDX)) Q:'CRHDX
"RTN","CRHD2",135,0)
 S (CRHDFG,CRHDX,CRHDCT)=0
"RTN","CRHD2",136,0)
 F  S CRHDX=$O(@CRHDTRG@(CRHDX)) Q:'CRHDX!(CRHDFG)  D
"RTN","CRHD2",137,0)
 .I $D(@CRHDTRG@(CRHDX,0)) D  Q
"RTN","CRHD2",138,0)
 ..M ^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT")=@CRHDTRG
"RTN","CRHD2",139,0)
 ..S $P(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT",0),"^",3,4)=CRHDLINE_"^"_CRHDLINE
"RTN","CRHD2",140,0)
 ..S CRHDFG=1
"RTN","CRHD2",141,0)
 .I $G(@CRHDTRG@(CRHDX))'="" D
"RTN","CRHD2",142,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD2",143,0)
 ..S ^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT",CRHDCT,0)=@CRHDTRG@(CRHDX)
"RTN","CRHD2",144,0)
 ..S $P(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT",0),"^",3,4)=CRHDCT_"^"_CRHDCT
"RTN","CRHD2",145,0)
 Q
"RTN","CRHD2",146,0)
SAVEOLD(CRHDIEN,CRHDMIEN) ;
"RTN","CRHD2",147,0)
 I $D(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT")) D
"RTN","CRHD2",148,0)
 .K ^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"ZOLD_TEXT")
"RTN","CRHD2",149,0)
 .M ^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"ZOLD_TEXT")=^CRHD(183.2,CRHDIEN,1,CRHDMIEN,"TEXT")
"RTN","CRHD2",150,0)
 Q
"RTN","CRHD2",151,0)
CHK(CRHDFLDN,CRHDUSER,CRHDDFN) ;
"RTN","CRHD2",152,0)
 N CRHDFLG,CRHDX,CRHDP  ;FLG = 1 if record already exist
"RTN","CRHD2",153,0)
 S CRHDFLG=0
"RTN","CRHD2",154,0)
 S CRHDFN=183.2
"RTN","CRHD2",155,0)
 S CRHDFLD=$O(^CRHD(CRHDFN,"B",CRHDFLDN,0))
"RTN","CRHD2",156,0)
 I $D(^CRHD(CRHDFN,"C",+CRHDDFN,+CRHDFLD)) D
"RTN","CRHD2",157,0)
 .S:CRHDFLD CRHDFLG=1
"RTN","CRHD2",158,0)
 I CRHDFLG S CRHDFLG=CRHDFLG_"^"_CRHDFLD_","
"RTN","CRHD2",159,0)
 E  S CRHDFLG=CRHDFLG_"^"_"+1,"
"RTN","CRHD2",160,0)
 Q CRHDFLG
"RTN","CRHD2",161,0)
XREF(CRHDIEN,CRHDMIEN) ;SET THE XREF FOR SPECIALTY AND TEAM
"RTN","CRHD2",162,0)
 N CRHDTM,CRHDTSP,CRHDAUTH,CRHDPAT
"RTN","CRHD2",163,0)
 S CRHDAUTH=$P($G(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,0)),"^",2)
"RTN","CRHD2",164,0)
 Q:'CRHDAUTH
"RTN","CRHD2",165,0)
 S CRHDPAT=$P($G(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,0)),"^",1)
"RTN","CRHD2",166,0)
 ;do not set up reference if a private note
"RTN","CRHD2",167,0)
 Q:+$P($G(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,0)),"^",6)
"RTN","CRHD2",168,0)
 S CRHDTM=$$GET^XPAR("USR.`"_CRHDAUTH,"ORLP DEFAULT TEAM",1,"I")
"RTN","CRHD2",169,0)
 S CRHDTSP=$$GET^XPAR("USR.`"_CRHDAUTH,"ORLP DEFAULT SPECIALTY",1,"I")
"RTN","CRHD2",170,0)
 S:+CRHDTM ^CRHD(183.2,"AC","TM",CRHDTM,CRHDPAT,CRHDIEN,CRHDMIEN)=""
"RTN","CRHD2",171,0)
 S:+CRHDTSP ^CRHD(183.2,"AC","TSP",CRHDTSP,CRHDPAT,CRHDIEN,CRHDMIEN)=""
"RTN","CRHD2",172,0)
 Q
"RTN","CRHD2",173,0)
KILXREF(CRHDIEN,CRHDMIEN) ;KILL XREF FOR SPECIALTY AND TEAM
"RTN","CRHD2",174,0)
 N CRHDTM,CRHDTSP,CRHDAUTH,CRHDPAT
"RTN","CRHD2",175,0)
 S CRHDAUTH=$P($G(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,0)),"^",2)
"RTN","CRHD2",176,0)
 Q:'CRHDAUTH
"RTN","CRHD2",177,0)
 S CRHDPAT=$P($G(^CRHD(183.2,CRHDIEN,1,CRHDMIEN,0)),"^",1)
"RTN","CRHD2",178,0)
 S CRHDTM=$$GET^XPAR("USR.`"_CRHDAUTH,"ORLP DEFAULT TEAM",1,"I")
"RTN","CRHD2",179,0)
 S CRHDTSP=$$GET^XPAR("USR.`"_CRHDAUTH,"ORLP DEFAULT SPECIALTY",1,"I")
"RTN","CRHD2",180,0)
 K:+CRHDTM ^CRHD(183.2,"AC","TM",CRHDTM,CRHDPAT,CRHDIEN,CRHDMIEN)
"RTN","CRHD2",181,0)
 K:+CRHDTSP ^CRHD(183.2,"AC","TSP",CRHDTSP,CRHDPAT,CRHDIEN,CRHDMIEN)
"RTN","CRHD2",182,0)
 Q
"RTN","CRHD2",183,0)
ONOFFPRV(CRHDPRIV,CRHDIEN,CRHDMIEN) ;ON/OFF PRIVATE NOTE
"RTN","CRHD2",184,0)
 I 'CRHDPRIV D XREF(CRHDIEN,CRHDMIEN)
"RTN","CRHD2",185,0)
 I +CRHDPRIV D KILXREF(CRHDIEN,CRHDMIEN)
"RTN","CRHD2",186,0)
 Q
"RTN","CRHD2",187,0)
LOCK(CRHDRTN,CRHDDFN,CRHDFLDM) ;
"RTN","CRHD2",188,0)
 N CRHDIEN,CRHDMIEN
"RTN","CRHD2",189,0)
 S CRHDRTN=0
"RTN","CRHD2",190,0)
 S CRHDFLDM=$$UP^XLFSTR(CRHDFLDM)
"RTN","CRHD2",191,0)
 S CRHDIEN=$O(^CRHD(183.2,"B",CRHDFLDM,0))
"RTN","CRHD2",192,0)
 S CRHDMIEN=$O(^CRHD(183.2,"C",+CRHDDFN,+CRHDIEN,0))
"RTN","CRHD2",193,0)
 Q:'CRHDMIEN
"RTN","CRHD2",194,0)
 L +^CRHD(183.2,CRHDIEN,1,CRHDMIEN):10 I '$T S CRHDRTN=1      ;_"^0^Another user is editing this task"
"RTN","CRHD2",195,0)
 L -^CRHD(183.2,CRHDIEN,1,CRHDMIEN)
"RTN","CRHD2",196,0)
 Q
"RTN","CRHD3")
0^14^B39552167
"RTN","CRHD3",1,0)
CRHD3 ; CAIRO/CLC - Modules to support CAIRO Hand-off Tool ;03-Apr-2008 11:22;CLC
"RTN","CRHD3",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD3",3,0)
 ;=================================================================
"RTN","CRHD3",4,0)
GTEMPTXT(CRHDRTN,CRHDSTR) ;
"RTN","CRHD3",5,0)
 D GETTEXT(.CRHDRTN,.CRHDSTR,1)
"RTN","CRHD3",6,0)
 Q
"RTN","CRHD3",7,0)
GETTEXT(CRHDRTN,CRHDSTR,DIWF) ;
"RTN","CRHD3",8,0)
 N CRHDFLD,CRHDUSER,CRHDDFN,CRHDVALS,CRHDTEAM,X,CRHDX1
"RTN","CRHD3",9,0)
 N CRHDFLDN,CRHDTRG,CRHDTM,CRHDTSP,CRHDPN,CRHDFG,CRHDX
"RTN","CRHD3",10,0)
 N CRHDLEN,CRHDCT,CRHDWLED,CRHDTMP,CRHDATTN,CRHDDIV,CRHDEX,CRHDZ0,DIWL,DIWR
"RTN","CRHD3",11,0)
 N CRHDEXPD,CRHDFG2,CRHDLEDI,CRHDLL,CRHDLSTT,CRHDMN2,CRHDROOT,CRHDNAM
"RTN","CRHD3",12,0)
 K CRHDRTN
"RTN","CRHD3",13,0)
 S CRHDTRG="^CRHD(183.2)"
"RTN","CRHD3",14,0)
 S CRHDFLD=$P(CRHDSTR,"^",1)
"RTN","CRHD3",15,0)
 S:CRHDFLD'="" CRHDFLD=$$UP^XLFSTR(CRHDFLD)
"RTN","CRHD3",16,0)
 S CRHDUSER=$P(CRHDSTR,"^",2)
"RTN","CRHD3",17,0)
 S CRHDDFN=$P(CRHDSTR,"^",3)
"RTN","CRHD3",18,0)
 S CRHDLEN=$P(CRHDSTR,"^",4)
"RTN","CRHD3",19,0)
 I 'CRHDLEN S CRHDLEN=256
"RTN","CRHD3",20,0)
 S CRHDDIV=$P(CRHDSTR,"^",5)
"RTN","CRHD3",21,0)
 S DIWF=$S(+$G(DIWF):"NR",1:"R")
"RTN","CRHD3",22,0)
 I CRHDDIV="" S CRHDDIV=+$$SITE^VASITE
"RTN","CRHD3",23,0)
 S CRHDATTN=+$G(^DPT(+CRHDDFN,.1041))
"RTN","CRHD3",24,0)
 Q:CRHDFLD=""
"RTN","CRHD3",25,0)
 Q:'CRHDUSER
"RTN","CRHD3",26,0)
 Q:'CRHDDFN
"RTN","CRHD3",27,0)
 ;get expiration date for temp fields
"RTN","CRHD3",28,0)
 S CRHDEX=$$GET^XPAR("DIV.`"_CRHDDIV,"CRHD TEMP FLD EXPIRE",1,"I")
"RTN","CRHD3",29,0)
 S CRHDFLDN=$O(@CRHDTRG@("B",CRHDFLD,0))
"RTN","CRHD3",30,0)
 Q:'CRHDFLDN
"RTN","CRHD3",31,0)
 S CRHDFG=$O(^CRHD(183.2,"C",+CRHDDFN,CRHDFLDN,0))
"RTN","CRHD3",32,0)
 Q:'CRHDFG
"RTN","CRHD3",33,0)
 ;check expiration date here
"RTN","CRHD3",34,0)
 S CRHDZ0=$G(@CRHDTRG@(CRHDFLDN,1,CRHDFG,0)),CRHDLEDI=$P(CRHDZ0,"^",5),CRHDWLED=$P(CRHDZ0,"^",4)
"RTN","CRHD3",35,0)
 ;S CRHDEX=7
"RTN","CRHD3",36,0)
 I 'CRHDEX S CRHDEX=7  ;if parameter not set default to 7 days
"RTN","CRHD3",37,0)
 I CRHDEX&(CRHDLEDI) S CRHDEXPD=$$FMADD^XLFDT(CRHDLEDI,CRHDEX)
"RTN","CRHD3",38,0)
 I $G(CRHDEXPD) I $G(CRHDEXPD)<DT D DELTMPTX^CRHD7(CRHDFLDN,CRHDFG) Q
"RTN","CRHD3",39,0)
 ;
"RTN","CRHD3",40,0)
 S CRHDROOT="^CRHD(183.2,"_CRHDFLDN_",1,"_CRHDFG_")"
"RTN","CRHD3",41,0)
 S DIWL=1,DIWR=CRHDLEN K ^UTILITY($J,"W"),CRHDTMP
"RTN","CRHD3",42,0)
 I DIWF="R" S CRHDCT=1 D B2
"RTN","CRHD3",43,0)
 I DIWF="NR" D
"RTN","CRHD3",44,0)
 .M CRHDTMP(CRHDFLDN)=@CRHDROOT@("TEXT")
"RTN","CRHD3",45,0)
 S CRHDCT=2,CRHDX=0
"RTN","CRHD3",46,0)
 S CRHDX=$O(CRHDTMP(CRHDX)) Q:'CRHDX  S CRHDX1=0 F  S CRHDX1=$O(CRHDTMP(CRHDX,CRHDX1)) Q:'CRHDX1  S CRHDRTN(CRHDX1+1)=CRHDTMP(CRHDX,CRHDX1,0)
"RTN","CRHD3",47,0)
 S CRHDCT=99999,CRHDCT=$O(CRHDRTN(CRHDCT),-1)
"RTN","CRHD3",48,0)
 S CRHDNAM=$$GET1^DIQ(200,+CRHDWLED,.01,"E")
"RTN","CRHD3",49,0)
 S CRHDWLED=$$TITLE^XLFSTR($P(CRHDNAM,",",1))_","_$E($P(CRHDNAM,",",2),1)
"RTN","CRHD3",50,0)
 S CRHDRTN(1)=CRHDCT_"^"_$$FMTE^XLFDT(CRHDLEDI,2)_"^"_CRHDWLED
"RTN","CRHD3",51,0)
 Q
"RTN","CRHD3",52,0)
 I DIWF="R" D
"RTN","CRHD3",53,0)
 .S CRHDMN=0
"RTN","CRHD3",54,0)
 .F  S CRHDMN=$O(@CRHDROOT@("TEXT",CRHDMN)) Q:'CRHDMN  S CRHDX=@CRHDROOT@("TEXT",CRHDMN,0) S:CRHDX="" CRHDX=" " D ^DIWP  ;M TMP=^UTILITY($J,"W")
"RTN","CRHD3",55,0)
 .M CRHDTMP=^UTILITY($J,"W") D ^DIWW K ^UTILITY($J,"W")
"RTN","CRHD3",56,0)
 Q
"RTN","CRHD3",57,0)
B2 ;
"RTN","CRHD3",58,0)
 S CRHDMN=0
"RTN","CRHD3",59,0)
 F  S CRHDMN=$O(@CRHDROOT@("TEXT",CRHDMN)) Q:'CRHDMN  S CRHDX=@CRHDROOT@("TEXT",CRHDMN,0) D
"RTN","CRHD3",60,0)
 .S CRHDFG2=0
"RTN","CRHD3",61,0)
 .S CRHDMN2=CRHDMN F  S CRHDMN2=$O(@CRHDROOT@("TEXT",CRHDMN2)) Q:'CRHDMN2!(CRHDFG2)  D
"RTN","CRHD3",62,0)
 ..S CRHDX1=@CRHDROOT@("TEXT",CRHDMN2,0)
"RTN","CRHD3",63,0)
 ..I ($E(CRHDX1,1,3)?1N1". ")!($E(CRHDX1,1,3)?1N1") ")!($E(CRHDX1,1,4)?2N1". ")!($E(CRHDX1,1,4)?2N1") ") I CRHDX'="" D DIWP(.CRHDTMP,CRHDX,CRHDLEN,.CRHDCT) S CRHDFG2=1,CRHDMN=CRHDMN2-1,CRHDX1="" Q
"RTN","CRHD3",64,0)
 ..E  D
"RTN","CRHD3",65,0)
 ...I ($L(CRHDX)+$L(CRHDX1))>256 D DIWP(.CRHDTMP,CRHDX,CRHDLEN,.CRHDCT) S CRHDLL=999,CRHDLL=$O(CRHDTMP(1,CRHDLL),-1) I $L(CRHDTMP(1,CRHDLL,0))<CRHDLEN S CRHDX=CRHDTMP(1,CRHDLL,0) K CRHDTMP(1,CRHDLL,0) S CRHDCT=CRHDCT-1
"RTN","CRHD3",66,0)
 ...S:CRHDX="" CRHDX=" " S CRHDX=CRHDX_CRHDX1 I ($E(CRHDX,$L(CRHDX)-2,$L(CRHDX))[".")!($E(CRHDX,$L(CRHDX)-2,$L(CRHDX))["?") D DIWP(.CRHDTMP,CRHDX,CRHDLEN,.CRHDCT) S CRHDMN=CRHDMN2,CRHDFG2=1 S CRHDX=""
"RTN","CRHD3",67,0)
 Q
"RTN","CRHD3",68,0)
DIWP(CRHDRN,CRHDSTR,CRHDL,CRHDN) ;
"RTN","CRHD3",69,0)
 N CRHDX,CRHDFG
"RTN","CRHD3",70,0)
 ;CRHDRN : Array to return data
"RTN","CRHD3",71,0)
 ;CRHDSTR: String to manipulate
"RTN","CRHD3",72,0)
 ;CRHDL  : Length to return
"RTN","CRHD3",73,0)
 ;CRHDN  : Next number to use in array
"RTN","CRHD3",74,0)
 I $L(CRHDSTR)<CRHDL S CRHDRN(1,CRHDN,0)=CRHDSTR,CRHDN=CRHDN+1 Q
"RTN","CRHD3",75,0)
 F  Q:'$L(CRHDSTR)  D
"RTN","CRHD3",76,0)
 .S CRHDFG=0
"RTN","CRHD3",77,0)
 .S CRHDX=$E(CRHDSTR,1,CRHDL)
"RTN","CRHD3",78,0)
 .I $L(CRHDX)<CRHDL S CRHDRN(1,CRHDN,0)=CRHDX,CRHDSTR="",CRHDN=CRHDN+1 Q
"RTN","CRHD3",79,0)
 .F  Q:CRHDFG  S:$E(CRHDX,$L(CRHDX))=" "!($E(CRHDSTR,$L(CRHDX)+1)=" ") CRHDFG=1 S:'CRHDFG CRHDX=$E(CRHDX,1,$L(CRHDX)-1)
"RTN","CRHD3",80,0)
 .S CRHDRN(1,CRHDN,0)=CRHDX,CRHDSTR=$E(CRHDSTR,$L(CRHDX)+1,$L(CRHDSTR)),CRHDN=CRHDN+1
"RTN","CRHD3",81,0)
 Q
"RTN","CRHD3",82,0)
PRIV(CRHDUSR,CRHDFN,CRHDMN) ;returns 1 if note is private, viewable only to the author; 0 anyone on the authors team or treating specialty or attending can view
"RTN","CRHD3",83,0)
 N CRHDPRIV
"RTN","CRHD3",84,0)
 S CRHDPRIV=0
"RTN","CRHD3",85,0)
 I CRHDUSR'=$P($G(@CRHDTRG@(CRHDFN,1,CRHDMN,0)),"^",2) D
"RTN","CRHD3",86,0)
 . I +$P(@CRHDTRG@(CRHDFN,1,CRHDMN,0),"^",6) S CRHDPRIV=1
"RTN","CRHD3",87,0)
 Q CRHDPRIV
"RTN","CRHD3",88,0)
GETPTLST(CRHDPATL,CRHDTML) ;
"RTN","CRHD3",89,0)
 N CRHDSTG
"RTN","CRHD3",90,0)
 S CRHDSTG="DFN^NAME^SSN^DOB^AGE^SEX"
"RTN","CRHD3",91,0)
 I $G(CRHDTML)'="" D
"RTN","CRHD3",92,0)
 .S CRHDLSTT=$$UP^XLFSTR($P(CRHDTML,"^",3))
"RTN","CRHD3",93,0)
 .I CRHDLSTT="P"!(CRHDTML["^TEAM") D TEAM(+CRHDTML)
"RTN","CRHD3",94,0)
 .I CRHDLSTT="TEAM" D TEAM(+CRHDTML)
"RTN","CRHD3",95,0)
 .I CRHDLSTT="SPECIALTY" D SPECPTS(+CRHDTML)
"RTN","CRHD3",96,0)
 .I CRHDLSTT="PATLIST"!(CRHDTML["PATLIST") D DEFPATL()
"RTN","CRHD3",97,0)
 .I CRHDLSTT="WARD" D WARD(+CRHDTML)
"RTN","CRHD3",98,0)
 .I CRHDLSTT="PROVIDER"!(CRHDTML["PROVIDER") D PROV(+CRHDTML)
"RTN","CRHD3",99,0)
 I $G(CRHDTML)="" D DEFPATL()
"RTN","CRHD3",100,0)
 Q
"RTN","CRHD3",101,0)
LISTINPT(Y,CRHDFRM,CRHDDIR) ; Return a bolus of patient names.  From is either Name or IEN^Name.
"RTN","CRHD3",102,0)
 N CRHDI2,CRHDIEN,CRHDCNT,CRHDFROM,CRHDORID,CRHDPM
"RTN","CRHD3",103,0)
 S CRHDCNT=44,CRHDI2=0,CRHDFROM=0
"RTN","CRHD3",104,0)
 S CRHDPM=0
"RTN","CRHD3",105,0)
 F  S CRHDPM=$O(^DPT("ACA",CRHDPM)) Q:'CRHDPM  S CRHDIEN=0 F  S CRHDIEN=$O(^DPT("ACA",CRHDPM,CRHDIEN)) Q:'CRHDIEN  S:$P($G(^DPT(+CRHDIEN,0)),"^",1)'="" ^TMP("CRHDACA",$J,$P(^DPT(+CRHDIEN,0),"^",1),CRHDIEN)=""
"RTN","CRHD3",106,0)
 I $D(^TMP("CRHDACA",$J)) D
"RTN","CRHD3",107,0)
 . I $P(CRHDFRM,U,2)'="" S CRHDFROM=$P(CRHDFRM,U,1),CRHDFRM=$O(^TMP("CRHDACA",$J,$P(CRHDFRM,U,2)),-CRHDDIR)
"RTN","CRHD3",108,0)
 . F  S CRHDFRM=$O(^TMP("CRHDACA",$J,CRHDFRM),CRHDDIR) Q:CRHDFRM=""  D  Q:CRHDI2=CRHDCNT
"RTN","CRHD3",109,0)
 . . S CRHDIEN=CRHDFROM,CRHDFROM=0 F  S CRHDIEN=$O(^TMP("CRHDACA",$J,CRHDFRM,CRHDIEN)) Q:'CRHDIEN  D  Q:CRHDI2=CRHDCNT
"RTN","CRHD3",110,0)
 . . . S CRHDORID=""
"RTN","CRHD3",111,0)
 . . . S CRHDORID=$G(^DPT(CRHDIEN,0)) ; Get zero node name.
"RTN","CRHD3",112,0)
 . . . ; S CRHDX1=$G(^DPT(CRHDIEN,.1))_" "_$G(^DPT(CRHDIEN,.101))
"RTN","CRHD3",113,0)
 . . . S CRHDI2=CRHDI2+1 S Y(CRHDI2)=CRHDIEN_U_CRHDFRM_U_U_U_U_$P(CRHDORID,U) ;_"^"_CRHDX ; _"^"_CRHDX1  ;"   ("_X_")"
"RTN","CRHD3",114,0)
 Q
"RTN","CRHD3",115,0)
ISINPT(CRHDDFN) ;is patient an inpatient
"RTN","CRHD3",116,0)
 Q:'CRHDDFN ""
"RTN","CRHD3",117,0)
 Q +$G(^DPT(+CRHDDFN,.105))
"RTN","CRHD3",118,0)
 ;
"RTN","CRHD3",119,0)
PERLIST(DUZ) ;
"RTN","CRHD3",120,0)
 K CRHDPATL
"RTN","CRHD3",121,0)
 D PERSLST^CRHDPL(.CRHDPATL,DUZ)  ;get personal lists
"RTN","CRHD3",122,0)
 Q
"RTN","CRHD3",123,0)
DEFPATL() ;
"RTN","CRHD3",124,0)
 K CRHDPATL
"RTN","CRHD3",125,0)
 D DEFPAT^CRHDPL(.CRHDPATL,DUZ)   ;get default patient list
"RTN","CRHD3",126,0)
 Q
"RTN","CRHD3",127,0)
TEAM(CRHDTM) ;
"RTN","CRHD3",128,0)
 K CRHDPATL
"RTN","CRHD3",129,0)
 D TEAM^CRHDPL(.CRHDPATL,.CRHDTM,0)   ;get patient list
"RTN","CRHD3",130,0)
 Q
"RTN","CRHD3",131,0)
SPECPTS(CRHDSPEC) ;
"RTN","CRHD3",132,0)
 K CRHDPATL
"RTN","CRHD3",133,0)
 D SPECPTS^CRHDPL(.CRHDPATL,CRHDSPEC)  ;get specialty list
"RTN","CRHD3",134,0)
 Q
"RTN","CRHD3",135,0)
WARD(CRHDWRD) ;
"RTN","CRHD3",136,0)
 K CRHDPATL
"RTN","CRHD3",137,0)
 D WARD^CRHDPL(.CRHDPATL,.CRHDWRD)  ;get ward list
"RTN","CRHD3",138,0)
 Q
"RTN","CRHD3",139,0)
PROV(CRHDPRV) ;
"RTN","CRHD3",140,0)
 K CRHDPATL
"RTN","CRHD3",141,0)
 D PROV^CRHDPL(.CRHDPATL,.CRHDPRV)  ;get provider list
"RTN","CRHD3",142,0)
 Q
"RTN","CRHD4")
0^15^B54955462
"RTN","CRHD4",1,0)
CRHD4 ; CAIRO/CLC - GET USERS PARAMETERS ;4/22/08  12:52
"RTN","CRHD4",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD4",3,0)
 ;=================================================================
"RTN","CRHD4",4,0)
GETALLP(CRHDRTN,CRHDUSR,CRHDDIV,CRHDPLEV) ;get all of the users parameters
"RTN","CRHD4",5,0)
 N X,X1,X2,CRHDCT,CRHDDOFG,CRHDMN,CRHDP,CRHDRSL,I,CRHDAX
"RTN","CRHD4",6,0)
 N CRHDL,CRHDVPTR,CRHDPN
"RTN","CRHD4",7,0)
 K CRHDRTN
"RTN","CRHD4",8,0)
 S CRHDVPTR("USR")=";VA(200,"      ;NEW PERSON
"RTN","CRHD4",9,0)
 S CRHDVPTR("OTL")=";OR(100.21,"   ;OE/RR TEAM
"RTN","CRHD4",10,0)
 S CRHDVPTR("SRV")=";DIC(49,"      ;SERVICE/SERVICE
"RTN","CRHD4",11,0)
 S CRHDVPTR("DIV")=";DIC(4,"       ;INSTITUTION
"RTN","CRHD4",12,0)
 S CRHDVPTR("TS")=";DIC(45.7,"     ;TREATING SPECIALTY
"RTN","CRHD4",13,0)
 S CRHDVPTR("LOC")=";SC("          ;HOSPITAL LOCATION
"RTN","CRHD4",14,0)
 S CRHDVPTR("SD")=";SCTM(404.51,"  ;SD TEAM
"RTN","CRHD4",15,0)
 S CRHDAX=+$G(CRHDPLEV)
"RTN","CRHD4",16,0)
 S CRHDL=$L($G(CRHDPLEV),"^")
"RTN","CRHD4",17,0)
 I CRHDAX D
"RTN","CRHD4",18,0)
 .S CRHDAX=CRHDAX_$G(CRHDVPTR($P(CRHDPLEV,"^",CRHDL)))
"RTN","CRHD4",19,0)
 .S CRHDDOFG=$O(^CRHD(183,"B",CRHDAX,0))
"RTN","CRHD4",20,0)
 I $G(CRHDPLEV)="" S CRHDDOFG=$$GETPLEV(CRHDUSR,CRHDDIV,0)
"RTN","CRHD4",21,0)
 I CRHDDOFG>0 D
"RTN","CRHD4",22,0)
 .I CRHDDOFG["VA(200" D USRSET(.CRHDRSL,CRHDDOFG)
"RTN","CRHD4",23,0)
 .I $D(CRHDRSL) S CRHDDOFG=$$GETPLEV(CRHDUSR,CRHDDIV,1)
"RTN","CRHD4",24,0)
 .S CRHDMN=+CRHDDOFG
"RTN","CRHD4",25,0)
 .S (CRHDP,CRHDCT)=0
"RTN","CRHD4",26,0)
 .F  S CRHDP=$O(^CRHD(183,CRHDMN,1,CRHDP)) Q:'CRHDP  D
"RTN","CRHD4",27,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD4",28,0)
 ..I $P($G(^CRHD(183,CRHDMN,1,CRHDP,0)),"^",2)="" D
"RTN","CRHD4",29,0)
 ...S X2=0 F  S X2=$O(^CRHD(183,CRHDMN,1,CRHDP,1,X2)) Q:'X2  D
"RTN","CRHD4",30,0)
 ....I $D(CRHDRSL($P($G(^CRHD(183,CRHDMN,1,CRHDP,0)),"^",1))) Q
"RTN","CRHD4",31,0)
 ....;I $D(CRHDRSL("STUDENT")) Q
"RTN","CRHD4",32,0)
 ....S CRHDRTN(CRHDCT)=$P($G(^CRHD(183,CRHDMN,1,CRHDP,0)),"^",1)_"^"_$G(^CRHD(183,CRHDMN,1,CRHDP,1,X2,0))
"RTN","CRHD4",33,0)
 ....S CRHDCT=CRHDCT+1
"RTN","CRHD4",34,0)
 ..E  S CRHDRTN(CRHDCT)=$G(^CRHD(183,CRHDMN,1,CRHDP,0))
"RTN","CRHD4",35,0)
 I $D(CRHDRSL) D
"RTN","CRHD4",36,0)
 .S CRHDPN=""
"RTN","CRHD4",37,0)
 .F  S CRHDPN=$O(CRHDRSL(CRHDPN)) Q:CRHDPN=""  D
"RTN","CRHD4",38,0)
 ..S CRHDX=0
"RTN","CRHD4",39,0)
 ..F  S CRHDX=$O(CRHDRSL(CRHDPN,CRHDX)) Q:'CRHDX  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDRSL(CRHDPN,CRHDX)
"RTN","CRHD4",40,0)
 Q
"RTN","CRHD4",41,0)
USRSET(CRHDLST,CRHDDA) ;
"RTN","CRHD4",42,0)
 N CRHDFG,CRHDX,CRHDP0,CRHDCT,CRHDX1
"RTN","CRHD4",43,0)
 S (CRHDX,CRHDFG,CRHDCT)=0
"RTN","CRHD4",44,0)
 F  S CRHDX=$O(^CRHD(183,+CRHDDA,1,CRHDX)) Q:'CRHDX  D
"RTN","CRHD4",45,0)
 .S CRHDP0=$G(^CRHD(183,+CRHDDA,1,CRHDX,0))
"RTN","CRHD4",46,0)
 .I $P(CRHDP0,"^",2)="" D
"RTN","CRHD4",47,0)
 ..S CRHDX1=0
"RTN","CRHD4",48,0)
 ..F  S CRHDX1=$O(^CRHD(183,+CRHDDA,1,CRHDX,1,CRHDX1)) Q:'CRHDX1  S CRHDCT=CRHDCT+1,CRHDLST(CRHDP0,CRHDCT)=$P(CRHDP0,"^",1)_"^"_$G(^CRHD(183,+CRHDDA,1,CRHDX,1,CRHDX1,0))
"RTN","CRHD4",49,0)
 .E  S CRHDCT=CRHDCT+1,CRHDLST($P(CRHDP0,"^",1),CRHDCT)=CRHDP0
"RTN","CRHD4",50,0)
 Q
"RTN","CRHD4",51,0)
GETONEP(CRHDRTN,CRHDE,PNAME) ;Get one parameter from file 183
"RTN","CRHD4",52,0)
 N CRHDPAR,Y,X,CRHDCT,CRHDMN,CRHDP,CRHDE1,CRHDE2,CRHDE3,CRHDE4
"RTN","CRHD4",53,0)
 N CRHDX2,CRHDRSL,CRHDL,CRHDXCT,CRHDTRSL,CRHDEX,CRHDEE
"RTN","CRHD4",54,0)
 S Y=-1
"RTN","CRHD4",55,0)
 S CRHDE1=+CRHDE                          ;internal entry number to file
"RTN","CRHD4",56,0)
 S CRHDE2=$P(CRHDE,"^",2)                 ;name
"RTN","CRHD4",57,0)
 S CRHDE3=$P($P(CRHDE,"^",3),"-",1)       ;types
"RTN","CRHD4",58,0)
 ;                                      USR - New Person
"RTN","CRHD4",59,0)
 ;                                      OTL - OE/RR Team
"RTN","CRHD4",60,0)
 ;                                      SRV - Service/Section
"RTN","CRHD4",61,0)
 ;                                      DIV-Institution;
"RTN","CRHD4",62,0)
 ;
"RTN","CRHD4",63,0)
 S CRHDCT=0
"RTN","CRHD4",64,0)
 S CRHDL=$L(CRHDE,"^")
"RTN","CRHD4",65,0)
 S CRHDE4="DIV.`"_$P($P(CRHDE,"^",CRHDL),"-",2)                  ;User Sign in Division
"RTN","CRHD4",66,0)
 I $P(CRHDE4,"`",2)="" D USERDIV^CRHD5(.CRHDEE,DUZ) S CRHDE4="DIV.`"_$G(CRHDEE(1))
"RTN","CRHD4",67,0)
 S CRHDPAR=CRHDE3_".`"_CRHDE1
"RTN","CRHD4",68,0)
 I CRHDPAR'="" D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD4",69,0)
 I Y>-1 D
"RTN","CRHD4",70,0)
 .S CRHDMN=+Y
"RTN","CRHD4",71,0)
 .S CRHDP=$O(^CRHD(183,CRHDMN,1,"B",PNAME,0))
"RTN","CRHD4",72,0)
 .Q:'CRHDP
"RTN","CRHD4",73,0)
 .I $P($G(^CRHD(183,CRHDMN,1,+CRHDP,0)),"^",2)="" D
"RTN","CRHD4",74,0)
 ..S CRHDX2=0 F  S CRHDX2=$O(^CRHD(183,CRHDMN,1,+CRHDP,1,CRHDX2)) Q:'CRHDX2  D
"RTN","CRHD4",75,0)
 ...S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=$G(^CRHD(183,CRHDMN,1,+CRHDP,1,CRHDX2,0))
"RTN","CRHD4",76,0)
 .E  S CRHDRTN(1)=$P($G(^CRHD(183,CRHDMN,1,+CRHDP,0)),"^",2)
"RTN","CRHD4",77,0)
 Q
"RTN","CRHD4",78,0)
GETDNRT(CRHDRTN,CRHDUSR,CRHDDIV) ;get DNR Titles
"RTN","CRHD4",79,0)
 K CRHDRTN
"RTN","CRHD4",80,0)
 N CRHDDNR,CRHDX
"RTN","CRHD4",81,0)
 D DNRPARM^CRHDDNR(.CRHDDNR,DUZ,CRHDDIV)
"RTN","CRHD4",82,0)
 I $D(CRHDDNR) D
"RTN","CRHD4",83,0)
 .S CRHDX=0 F  S CRHDX=$O(CRHDDNR(CRHDX)) Q:'CRHDX  S CRHDRTN(CRHDX)=$P(CRHDDNR(CRHDX),"^",2)
"RTN","CRHD4",84,0)
 Q
"RTN","CRHD4",85,0)
SAVEPARM(CRHDRTN,CRHDLEV,CRHDPAR,CRHDVAL,CRHDTXT) ;save parameters
"RTN","CRHD4",86,0)
 N Y,CRHDFN,CRHDFDA,CRHDERR,CRHDOUT,CRHDFILE,CRHDXX,CRHDUPY,CRHDUPZ
"RTN","CRHD4",87,0)
 N CRHDIENS,CRHDFLAG,CRHDANS,CRHDVPTR,CRHDL,DIE,DR,DA,CRHDAX
"RTN","CRHD4",88,0)
 S CRHDVPTR("USR")=";VA(200,"      ;NEW PERSON
"RTN","CRHD4",89,0)
 S CRHDVPTR("OTL")=";OR(100.21,"   ;OE/RR TEAM
"RTN","CRHD4",90,0)
 S CRHDVPTR("SRV")=";DIC(49,"      ;SERVICE/SERVICE
"RTN","CRHD4",91,0)
 S CRHDVPTR("DIV")=";DIC(4,"       ;INSTITUTION
"RTN","CRHD4",92,0)
 ;S CRHDVPTR("TS")=";DIC(45.7,"     ;TREATING SPECIALTY
"RTN","CRHD4",93,0)
 ;S CRHDVPTR("LOC")=";SC("          ;HOSPITAL LOCATION
"RTN","CRHD4",94,0)
 ;S CRHDVPTR("SD")=";SCTM(404.51,"  ;SD TEAM
"RTN","CRHD4",95,0)
 S CRHDFN=183  ;CRHD PARAMETER FILE NUMBER
"RTN","CRHD4",96,0)
B K CRHDRTN
"RTN","CRHD4",97,0)
 S CRHDRTN(0)="0^NO DATA STORED"
"RTN","CRHD4",98,0)
 I $D(CRHDTXT)&((CRHDPAR="")&(CRHDVAL="")) D SAVELIST(.CRHDRTN,.CRHDLEV,.CRHDTXT) Q
"RTN","CRHD4",99,0)
 I CRHDPAR="" S CRHDRTN(0)="0^PARAMETER NAME MISSING" Q
"RTN","CRHD4",100,0)
 S CRHDUPY=$$CHK(CRHDLEV)
"RTN","CRHD4",101,0)
 S CRHDUPZ=$P(CRHDUPY,"^",2)
"RTN","CRHD4",102,0)
 S CRHDAX=$P(CRHDUPY,"^",3)
"RTN","CRHD4",103,0)
 S CRHDL=$L(CRHDLEV,"^")
"RTN","CRHD4",104,0)
 I CRHDAX<1 S CRHDAX=+CRHDLEV_$G(CRHDVPTR($P(CRHDLEV,"^",CRHDL)))
"RTN","CRHD4",105,0)
 I +CRHDAX S CRHDFDA(CRHDFN,CRHDUPZ,.01)=CRHDAX
"RTN","CRHD4",106,0)
 I CRHDUPZ="+1," D
"RTN","CRHD4",107,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD4",108,0)
 .I '$D(CRHDERR) S CRHDUPZ=CRHDOUT(1)_",",CRHDRTN(0)=1
"RTN","CRHD4",109,0)
 .K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD4",110,0)
 .S CRHDFDA(CRHDFN,CRHDUPZ,.01)=CRHDAX
"RTN","CRHD4",111,0)
 I $D(CRHDFDA) D
"RTN","CRHD4",112,0)
 .S CRHDFDA(CRHDFN_".01","?+2,"_CRHDUPZ,.01)=CRHDPAR
"RTN","CRHD4",113,0)
 .S:CRHDVAL'="" CRHDFDA(CRHDFN_".01","?+2,"_CRHDUPZ,1)=CRHDVAL
"RTN","CRHD4",114,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD4",115,0)
 .I '$D(CRHDERR) S CRHDMX=$G(CRHDOUT(2)),CRHDRTN(0)=1
"RTN","CRHD4",116,0)
 .I $D(CRHDTXT) D
"RTN","CRHD4",117,0)
 .S CRHDXX=0 F  S CRHDXX=$O(^CRHD(CRHDFN,+CRHDUPZ,1,CRHDMX,1,CRHDXX)) Q:'CRHDXX  D
"RTN","CRHD4",118,0)
 ..S DIE="^CRHD("_CRHDFN_","_CRHDUPZ_"1,"_CRHDMX_",1,",DA=CRHDXX,DR=".01///@"
"RTN","CRHD4",119,0)
 ..S DA(2)=+CRHDUPZ,DA(1)=CRHDMX
"RTN","CRHD4",120,0)
 ..D ^DIE
"RTN","CRHD4",121,0)
 .S CRHDX=0
"RTN","CRHD4",122,0)
 .F  S CRHDX=$O(CRHDTXT(CRHDX)) Q:'CRHDX  D
"RTN","CRHD4",123,0)
 ..S CRHDFDA(CRHDFN_.12,"?+"_(CRHDX+1)_","_CRHDMX_","_CRHDUPZ_"",.01)=$S($D(CRHDTXT(CRHDX,0)):CRHDTXT(CRHDX,0),1:CRHDTXT(CRHDX))
"RTN","CRHD4",124,0)
 .D:$D(CRHDFDA) UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD4",125,0)
 .I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD4",126,0)
 .E  S CRHDRTN(0)="0^ERROR ENCOUNTERED STORING DATA"
"RTN","CRHD4",127,0)
 K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD4",128,0)
 Q
"RTN","CRHD4",129,0)
SAVELIST(CRHDRTN,CRHDLEV,CRHDTXT) ;process list of parameters
"RTN","CRHD4",130,0)
 ;list in the format:PARAMETER:VALUE
"RTN","CRHD4",131,0)
 N CRHDI,CRHDPAR,CRHDVAL,CRHDFDA,CRHDUPY,CRHDUPZ,CRHDAX,CRHDL
"RTN","CRHD4",132,0)
 K CRHDRTN
"RTN","CRHD4",133,0)
 S CRHDRTN(0)=0_"^DATA NOT STORED"
"RTN","CRHD4",134,0)
 S CRHDUPY=$$CHK(CRHDLEV)
"RTN","CRHD4",135,0)
 S CRHDUPZ=$P(CRHDUPY,"^",2)
"RTN","CRHD4",136,0)
 S CRHDAX=$P(CRHDUPY,"^",3)
"RTN","CRHD4",137,0)
 S CRHDL=$L(CRHDLEV,"^")
"RTN","CRHD4",138,0)
 I CRHDAX<1 S CRHDAX=+CRHDLEV_$G(CRHDVPTR($P(CRHDLEV,"^",CRHDL)))
"RTN","CRHD4",139,0)
 I +CRHDAX S CRHDFDA(CRHDFN,CRHDUPZ,.01)=CRHDAX
"RTN","CRHD4",140,0)
 I CRHDUPZ="+1," D
"RTN","CRHD4",141,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD4",142,0)
 .I '$D(CRHDERR) S CRHDUPZ=CRHDOUT(1)_",",CRHDRTN(0)=1
"RTN","CRHD4",143,0)
 .K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD4",144,0)
 S CRHDFDA(CRHDFN,CRHDUPZ,.01)=CRHDAX
"RTN","CRHD4",145,0)
 S CRHDI=0
"RTN","CRHD4",146,0)
 F  S CRHDI=$O(CRHDTXT(CRHDI)) Q:'CRHDI  D
"RTN","CRHD4",147,0)
 .S CRHDPAR=$P(CRHDTXT(CRHDI),":",1)
"RTN","CRHD4",148,0)
 .S CRHDVAL=$P(CRHDTXT(CRHDI),":",2,10)
"RTN","CRHD4",149,0)
 .Q:CRHDPAR=""
"RTN","CRHD4",150,0)
 .I CRHDVAL="" D DELPAR(+CRHDUPZ,CRHDPAR) Q
"RTN","CRHD4",151,0)
 .I $D(CRHDFDA) D
"RTN","CRHD4",152,0)
 ..S CRHDFDA(CRHDFN_".01","?+"_CRHDI_","_CRHDUPZ,.01)=CRHDPAR
"RTN","CRHD4",153,0)
 ..S CRHDFDA(CRHDFN_".01","?+"_CRHDI_","_CRHDUPZ,1)=CRHDVAL
"RTN","CRHD4",154,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD4",155,0)
 I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD4",156,0)
 E  S CRHDRTN(0)="0^ERROR SETTING DATA"
"RTN","CRHD4",157,0)
 K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD4",158,0)
 Q
"RTN","CRHD4",159,0)
CHK(CRHDL) ;
"RTN","CRHD4",160,0)
 N CRHDFLG,Y,CRHDX  ;FLG = 1 if record already exist
"RTN","CRHD4",161,0)
 S CRHDFLG=0
"RTN","CRHD4",162,0)
 I $P(CRHDL,"^",2)'="" D LOOKUP^XPAREDIT($P(CRHDL,"^",2),183)
"RTN","CRHD4",163,0)
 I +Y>0 S CRHDX=+Y,CRHDFLG=1
"RTN","CRHD4",164,0)
 I CRHDFLG S CRHDFLG=CRHDFLG_"^"_CRHDX_","_"^"_$P(Y,"^",2)
"RTN","CRHD4",165,0)
 E  S CRHDFLG=CRHDFLG_"^"_"+1,"_"^"_$P(Y,"^",2)
"RTN","CRHD4",166,0)
 Q CRHDFLG
"RTN","CRHD4",167,0)
DELPAR(CRHDD1,CRHDDPAR) ;
"RTN","CRHD4",168,0)
 N DA,DIE,DR
"RTN","CRHD4",169,0)
 Q:'CRHDD1
"RTN","CRHD4",170,0)
 S DA=$O(^CRHD(183,+CRHDD1,1,"B",CRHDPAR,0))
"RTN","CRHD4",171,0)
 Q:'DA
"RTN","CRHD4",172,0)
 S DIE="^CRHD(183,"_CRHDD1_",1,"
"RTN","CRHD4",173,0)
 S DR=".01///@",DA(1)=CRHDD1
"RTN","CRHD4",174,0)
 D ^DIE
"RTN","CRHD4",175,0)
 Q
"RTN","CRHD4",176,0)
GETPLEV(CRHDDUZ,CRHDDIV,CRHDBYU) ;
"RTN","CRHD4",177,0)
 N CRHDPAR,CRHDTEAM,CRHDSRV,Y,X,CRHDDIVI
"RTN","CRHD4",178,0)
 S Y=-1
"RTN","CRHD4",179,0)
 S CRHDTEAM=$$GET^XPAR("USR.`"_CRHDDUZ,"ORLP DEFAULT TEAM",1,"I")
"RTN","CRHD4",180,0)
 S CRHDSRV=$$GET1^DIQ(200,CRHDDUZ_",",29,"E")
"RTN","CRHD4",181,0)
 S CRHDPAR="USR.`"_CRHDDUZ
"RTN","CRHD4",182,0)
 S:CRHDBYU CRHDPAR=""
"RTN","CRHD4",183,0)
 I CRHDPAR'="" D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD4",184,0)
 I (Y<0)&($G(CRHDTEAM)>0) S CRHDPAR="OTL.`"_+CRHDTEAM D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD4",185,0)
 I (Y<0)&($G(CRHDSRV)'="") S CRHDPAR="SRV."_CRHDSRV D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD4",186,0)
 I '+$G(CRHDDIV) S CRHDDIV=+$$SITE^VASITE
"RTN","CRHD4",187,0)
 I (Y<0) S CRHDPAR="DIV.`"_+CRHDDIV D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD4",188,0)
 I (Y<0) D
"RTN","CRHD4",189,0)
 .S CRHDDIVI=$O(^DIC(4,"D",CRHDDIV,0))
"RTN","CRHD4",190,0)
 .I CRHDDIVI S CRHDPAR="DIV.`"_CRHDDIVI D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD4",191,0)
 Q Y
"RTN","CRHD5")
0^16^B10041807
"RTN","CRHD5",1,0)
CRHD5 ; CAIRO/CLC - MISC ROUTINE FOR CAIRO HAND-OFF TOOL ;20-Mar-2008 13:28;CLC
"RTN","CRHD5",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD5",3,0)
 ;=================================================================
"RTN","CRHD5",4,0)
SRV(CRHDY) ; RETURN LIST OF SERVICES/SECTIONS
"RTN","CRHD5",5,0)
 N CRHDI,CRHDIEN,CRHDNAME
"RTN","CRHD5",6,0)
 S CRHDI=1,CRHDNAME=""
"RTN","CRHD5",7,0)
 F  S CRHDNAME=$O(^DIC(49,"B",CRHDNAME)) Q:CRHDNAME=""  S CRHDIEN=$O(^(CRHDNAME,0)) D
"RTN","CRHD5",8,0)
 . S CRHDY(CRHDI)=CRHDIEN_"^"_CRHDNAME,CRHDI=CRHDI+1
"RTN","CRHD5",9,0)
 Q
"RTN","CRHD5",10,0)
DIV(CRHDY) ; RETURN LIST OF INSTITUTIONS
"RTN","CRHD5",11,0)
 N CRHDI,CRHDIEN,CRHDNAME,CRHDIVST,CRHDINA
"RTN","CRHD5",12,0)
 S CRHDI=1,CRHDNAME=""
"RTN","CRHD5",13,0)
 F  S CRHDNAME=$O(^DIC(4,"B",CRHDNAME)) Q:CRHDNAME=""  S CRHDIEN=$O(^(CRHDNAME,0)) D
"RTN","CRHD5",14,0)
 .S CRHDINA=$$GET1^DIQ(4,CRHDIEN_",",101,"I")
"RTN","CRHD5",15,0)
 .S CRHDIVST=$$GET1^DIQ(4,CRHDIEN_",",11,"I")
"RTN","CRHD5",16,0)
 .I 'CRHDINA S CRHDY(CRHDI)=CRHDIEN_"^"_CRHDNAME,CRHDI=CRHDI+1
"RTN","CRHD5",17,0)
 Q
"RTN","CRHD5",18,0)
SET(CRHDENT,CRHDP,CRHDS,CRHDVAL) ;Set the parameter
"RTN","CRHD5",19,0)
 ;D PUT^XPAR("DIV.`583","CRHD DNR ORDER TITLE",2,"Patient DNR Orders")
"RTN","CRHD5",20,0)
 ;CRHDENT=entity
"RTN","CRHD5",21,0)
 ;CRHDP=Parameter name
"RTN","CRHD5",22,0)
 ;CRHDS=Sequence (count)
"RTN","CRHD5",23,0)
 ;CRHDVAL=parameter value
"RTN","CRHD5",24,0)
 N CRHDERR,CRHDFG
"RTN","CRHD5",25,0)
 ;
"RTN","CRHD5",26,0)
 S CRHDFG=1
"RTN","CRHD5",27,0)
 D PUT^XPAR(CRHDENT,CRHDP,+CRHDS,CRHDVAL,.CRHDERR)
"RTN","CRHD5",28,0)
 I CRHDERR>0 S CRHDFG=0
"RTN","CRHD5",29,0)
 Q CRHDFG
"RTN","CRHD5",30,0)
DEL(CRHDENT,CRHDP,CRHDS) ;Delete a parameter value
"RTN","CRHD5",31,0)
 N CRHDERR,CRHDFG
"RTN","CRHD5",32,0)
 S CRHDFG=1
"RTN","CRHD5",33,0)
 D DEL^XPAR(CRHDENT,CRHDP,CRHDS,.CRHDERR)
"RTN","CRHD5",34,0)
 I CRHDERR>0 S CRHDFG=0
"RTN","CRHD5",35,0)
 Q CRHDFG
"RTN","CRHD5",36,0)
GET(CRHDRTN,CRHDENT,CRHDP) ;Get parameters from the parameter file
"RTN","CRHD5",37,0)
 D GETLST^XPAR(.CRHDRTN,CRHDENT,CRHDP,"E")
"RTN","CRHD5",38,0)
 Q
"RTN","CRHD5",39,0)
DELALL(CRHDENT,CRHDP) ;Delete all instances
"RTN","CRHD5",40,0)
 N CRHDERR,CRHDFG
"RTN","CRHD5",41,0)
 S CRHDFG=1
"RTN","CRHD5",42,0)
 D NDEL^XPAR(CRHDENT,CRHDP,.CRHDERR)
"RTN","CRHD5",43,0)
 I CRHDERR>0 S CRHDFG=0
"RTN","CRHD5",44,0)
 Q CRHDFG
"RTN","CRHD5",45,0)
USERDIV(CRHDRTN,CRHDDUZ) ;
"RTN","CRHD5",46,0)
 K CRHDRTN
"RTN","CRHD5",47,0)
 N CRHDX,CRHDR,CRHDC
"RTN","CRHD5",48,0)
 S CRHDC=0
"RTN","CRHD5",49,0)
 D DIV4^XUSER(.CRHDR,CRHDDUZ)
"RTN","CRHD5",50,0)
 S CRHDX=0
"RTN","CRHD5",51,0)
 F  S CRHDX=$O(CRHDR(CRHDX)) Q:'CRHDX!($D(CRHDRTN(1)))  D
"RTN","CRHD5",52,0)
 .I CRHDR(CRHDX)=1 S CRHDC=CRHDC+1,CRHDRTN(CRHDC)=CRHDX_"^"_$P($G(^DIC(4,+CRHDX,0)),"^",1)_"^1" K CRHDR(CRHDX)
"RTN","CRHD5",53,0)
 S CRHDX=0
"RTN","CRHD5",54,0)
 F  S CRHDX=$O(CRHDR(CRHDX)) Q:'CRHDX  D
"RTN","CRHD5",55,0)
 .S CRHDC=CRHDC+1
"RTN","CRHD5",56,0)
 .S CRHDRTN(CRHDC)=CRHDX_"^"_$P($G(^DIC(4,+CRHDX,0)),"^",1)_"^0"
"RTN","CRHD5",57,0)
 Q
"RTN","CRHD5",58,0)
DELPREF(CRHDRTN,CRHDE) ;delete a preference
"RTN","CRHD5",59,0)
 N Y,X,CRHDE1,CRHDE2,CRHDE3,CRHDE4,CRHDE5,DA,DR,DIE,CRHDL
"RTN","CRHD5",60,0)
 N CRHDPN
"RTN","CRHD5",61,0)
 S CRHDRTN(1)=0
"RTN","CRHD5",62,0)
 S CRHDE1=+CRHDE
"RTN","CRHD5",63,0)
 S CRHDE2=$P(CRHDE,"^",2)
"RTN","CRHD5",64,0)
 S CRHDL=$L(CRHDE,"^")
"RTN","CRHD5",65,0)
 S CRHDE3=$P(CRHDE,"^",CRHDL)
"RTN","CRHD5",66,0)
 S CRHDE4="DIV.`"_$P($P(CRHDE,"^",CRHDL),"-",2)
"RTN","CRHD5",67,0)
 S CRHDE5=CRHDE1_$S(CRHDE3="USR":";VA(200,",CRHDE3="OTL":";OR(100.21,",CRHDE3="DIV":";DIC(4,",CRHDE3="SRV":";DIC(49,",1:"")
"RTN","CRHD5",68,0)
 I CRHDE5'="" S DA=$O(^CRHD(183,"B",CRHDE5,0))
"RTN","CRHD5",69,0)
 I DA D
"RTN","CRHD5",70,0)
 .K ^CRHD(183,DA)
"RTN","CRHD5",71,0)
 .K ^CRHD(183,"B",CRHDE5)
"RTN","CRHD5",72,0)
 .K ^CRHD(183,"AC",+CRHDE5)
"RTN","CRHD5",73,0)
 .;S DIE=183,DR=".01///@" D ^DIE
"RTN","CRHD5",74,0)
 .I '$D(^CRHD(183,"B",CRHDE5)) S CRHDRTN(1)=1
"RTN","CRHD5",75,0)
 .S CRHDENT=CRHDE3_".`"_CRHDE1
"RTN","CRHD5",76,0)
 .I CRHDE3="DIV" S CRHDPN(1)="CRHD DNR ORDERABLE ITEMS",CRHDPN(2)="CRHD DNR ORDER TITLE"
"RTN","CRHD5",77,0)
 .S CRHDX=0
"RTN","CRHD5",78,0)
 .F  S CRHDX=$O(CRHDPN(CRHDX)) Q:'CRHDX  D
"RTN","CRHD5",79,0)
 ..D GETLST^XPAR(.CRHDOLST,CRHDENT,CRHDPN(CRHDX),"I")
"RTN","CRHD5",80,0)
 ..I $G(CRHDOLST) S CRHDFG=$$DELALL^CRHD5(CRHDENT,CRHDPN(CRHDX)) K CRHDOLST
"RTN","CRHD5",81,0)
 Q
"RTN","CRHD6")
0^17^B23982080
"RTN","CRHD6",1,0)
CRHD6 ; CAIRO/CLC - MISC ROUTINE FOR CAIRO HAND-OFF TOOL ;04-Mar-2008 16:00;CLC
"RTN","CRHD6",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD6",3,0)
 ;=================================================================
"RTN","CRHD6",4,0)
GETP(CRHDRTN,CRHDE) ;
"RTN","CRHD6",5,0)
 N CRHDPAR,Y,CRHDX,CRHDCT,CRHDMN,CRHDP,CRHDE1,CRHDE2,CRHDE3,CRHDE4
"RTN","CRHD6",6,0)
 N CRHDX2,CRHDRSL,CRHDL,CRHDXCT,CRHDTRSL,CRHDEX,CRHDEE,CRHDXY
"RTN","CRHD6",7,0)
 S Y=-1
"RTN","CRHD6",8,0)
 S CRHDE1=+CRHDE                          ;internal entry number to file
"RTN","CRHD6",9,0)
 S CRHDE2=$P(CRHDE,"^",2)                 ;name
"RTN","CRHD6",10,0)
 S CRHDE3=$P(CRHDE,"^",3)                 ;types
"RTN","CRHD6",11,0)
 ;                                         USR - New Person
"RTN","CRHD6",12,0)
 ;                                         OTL - OE/RR Team
"RTN","CRHD6",13,0)
 ;                                         SRV - Service/Section
"RTN","CRHD6",14,0)
 ;                                         DIV-Institution;
"RTN","CRHD6",15,0)
 ;
"RTN","CRHD6",16,0)
 S CRHDCT=0
"RTN","CRHD6",17,0)
 S CRHDL=$L(CRHDE,"^")
"RTN","CRHD6",18,0)
 S CRHDE4="DIV.`"_$P($P(CRHDE,"^",CRHDL),"-",2)                  ;User Sign in Division
"RTN","CRHD6",19,0)
 I $P(CRHDE4,"`",2)="" D USERDIV^CRHD5(.CRHDEE,DUZ) S CRHDE4="DIV.`"_$G(CRHDEE(1))
"RTN","CRHD6",20,0)
 S CRHDE3=$P($P(CRHDE,"^",CRHDL),"-",1)
"RTN","CRHD6",21,0)
 S CRHDPAR=CRHDE3_".`"_CRHDE1
"RTN","CRHD6",22,0)
 I CRHDPAR'="" D LOOKUP^XPAREDIT(CRHDPAR,183)
"RTN","CRHD6",23,0)
 I Y>-1 D
"RTN","CRHD6",24,0)
 .S CRHDMN=+Y
"RTN","CRHD6",25,0)
 .S CRHDP=0
"RTN","CRHD6",26,0)
 .F  S CRHDP=$O(^CRHD(183,CRHDMN,1,CRHDP)) Q:'CRHDP  D
"RTN","CRHD6",27,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD6",28,0)
 ..I $P($G(^CRHD(183,CRHDMN,1,CRHDP,0)),"^",2)="" D
"RTN","CRHD6",29,0)
 ...S CRHDX2=0 F  S CRHDX2=$O(^CRHD(183,CRHDMN,1,CRHDP,1,CRHDX2)) Q:'CRHDX2  D
"RTN","CRHD6",30,0)
 ....S CRHDRTN(CRHDCT)=$P($G(^CRHD(183,CRHDMN,1,CRHDP,0)),"^",1)_"^"_$G(^CRHD(183,CRHDMN,1,CRHDP,1,CRHDX2,0))
"RTN","CRHD6",31,0)
 ....S CRHDCT=CRHDCT+1
"RTN","CRHD6",32,0)
 ..E  S CRHDRTN(CRHDCT)=$G(^CRHD(183,CRHDMN,1,CRHDP,0))
"RTN","CRHD6",33,0)
 ;get Temp fields expiration days
"RTN","CRHD6",34,0)
 S CRHDEX=$$GET^XPAR(CRHDE4,"CRHD TEMP FLD EXPIRE",1,"I")
"RTN","CRHD6",35,0)
 I 'CRHDEX S CRHDEX=2
"RTN","CRHD6",36,0)
 S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)="TEMP_FLD_EXPIRE"_"^"_CRHDEX
"RTN","CRHD6",37,0)
 ;get dnr title and/or text
"RTN","CRHD6",38,0)
 K CRHDRSL D DNRPARM^CRHDDR(.CRHDRSL,DUZ,$P($P(CRHDE,"^",CRHDL),"-",2)) D
"RTN","CRHD6",39,0)
 .I $D(CRHDRSL) D
"RTN","CRHD6",40,0)
 ..S (CRHDXCT,CRHDXY)=0 F  S CRHDXY=$O(CRHDRSL(CRHDXY)) Q:'CRHDXY  D
"RTN","CRHD6",41,0)
 ...S CRHDXCT=CRHDXCT+1,CRHDTRSL(CRHDXCT)=CRHDXY_"^"_$P($G(^ORD(101.43,+CRHDXY,0)),"^",1)
"RTN","CRHD6",42,0)
 .I $D(CRHDTRSL) K CRHDRSL M CRHDRSL=CRHDTRSL K CRHDTRSL
"RTN","CRHD6",43,0)
 I $D(CRHDRSL) D RTNLST("DNR_Titles") K CRHDRSL
"RTN","CRHD6",44,0)
 D GET^CRHD5(.CRHDRSL,CRHDE4,"CRHD DNR ORDER TITLE")
"RTN","CRHD6",45,0)
 I $D(CRHDRSL) D RTNLST("DNR_Text")
"RTN","CRHD6",46,0)
 Q
"RTN","CRHD6",47,0)
RTNLST(CRHDTT) ;
"RTN","CRHD6",48,0)
 I $D(CRHDRSL) D
"RTN","CRHD6",49,0)
 .S CRHDX=0
"RTN","CRHD6",50,0)
 .I CRHDTT["DNR_Titles" F  S CRHDX=$O(CRHDRSL(CRHDX)) Q:'CRHDX  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTT_"^"_CRHDRSL(CRHDX)
"RTN","CRHD6",51,0)
 .E  F  S CRHDX=$O(CRHDRSL(CRHDX)) Q:'CRHDX  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTT_"^"_$P(CRHDRSL(CRHDX),"^",2)
"RTN","CRHD6",52,0)
 Q
"RTN","CRHD6",53,0)
 ;
"RTN","CRHD6",54,0)
SAVEP(CRHDRTN,CRHDE,CRHDPN,CRHDV,CRHDVAL) ;
"RTN","CRHD6",55,0)
 N CRHDENT,CRHDX,CRHDX1,CRHDOLST,CRHDFG,CRHDL
"RTN","CRHD6",56,0)
 S CRHDRTN(0)=1
"RTN","CRHD6",57,0)
 I CRHDE="" S CRHDRTN(0)=0_"^Entity data not valid" Q
"RTN","CRHD6",58,0)
 S CRHDL=$L(CRHDE,"^")
"RTN","CRHD6",59,0)
 I +CRHDE S CRHDENT=$P($P(CRHDE,"^",CRHDL),"-",1)_".`"_+CRHDE
"RTN","CRHD6",60,0)
 I CRHDPN="" S CRHDPN="CRHD DNR ORDER TITLE"
"RTN","CRHD6",61,0)
 ;get all Instances of a Parameter
"RTN","CRHD6",62,0)
 D GETLST^XPAR(.CRHDOLST,CRHDENT,CRHDPN,"I")
"RTN","CRHD6",63,0)
 I $D(CRHDOLST) S CRHDFG=$$DELALL^CRHD5(CRHDENT,CRHDPN)
"RTN","CRHD6",64,0)
 I $D(CRHDVAL) D
"RTN","CRHD6",65,0)
 .S CRHDX=0,CRHDCT=0
"RTN","CRHD6",66,0)
 .F  S CRHDX=$O(CRHDVAL(CRHDX)) Q:'CRHDX  D
"RTN","CRHD6",67,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD6",68,0)
 ..D SET^CRHD5(CRHDENT,CRHDPN,CRHDCT,CRHDVAL(CRHDX))
"RTN","CRHD6",69,0)
 Q
"RTN","CRHD6",70,0)
SAVEP2(CRHDRTN,CRHDE,CRHDPN,CRHDV,CRHDVAL) ;
"RTN","CRHD6",71,0)
 N CRHDENT,CRHDX,CRHDX1,CRHDOLST,CRHDFG,CRHDL
"RTN","CRHD6",72,0)
 S CRHDRTN(0)=1
"RTN","CRHD6",73,0)
 I CRHDE="" S CRHDRTN(0)=0_"^Entity data not valid" Q
"RTN","CRHD6",74,0)
 S CRHDL=$L(CRHDE,"^")
"RTN","CRHD6",75,0)
 I +CRHDE S CRHDENT=$P($P(CRHDE,"^",CRHDL),"-",1)_".`"_+CRHDE
"RTN","CRHD6",76,0)
 I CRHDPN="" S CRHDRTN(0)=0_"^Parameter name not valid" Q     ;S PN="CRHD DNR ORDER TITLE"
"RTN","CRHD6",77,0)
 I CRHDV=""&('$D(CRHDVAL)) S CRHDFG=$$DELALL^CRHD5(CRHDENT,CRHDPN) S CRHDRTN(0)=1 Q
"RTN","CRHD6",78,0)
 ;get all Instances of a Parameter
"RTN","CRHD6",79,0)
 D GETLST^XPAR(.CRHDOLST,CRHDENT,CRHDPN,"I")
"RTN","CRHD6",80,0)
 I $G(CRHDOLST) S CRHDFG=$$DELALL^CRHD5(CRHDENT,CRHDPN) K CRHDOLST
"RTN","CRHD6",81,0)
 I $D(CRHDVAL) D
"RTN","CRHD6",82,0)
 .S CRHDX=0,CRHDCT=0
"RTN","CRHD6",83,0)
 .F  S CRHDX=$O(CRHDVAL(CRHDX)) Q:'CRHDX  D
"RTN","CRHD6",84,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD6",85,0)
 ..I CRHDVAL(CRHDX)'="" D
"RTN","CRHD6",86,0)
 ...I CRHDVAL(CRHDX)?1N.E S CRHDVAL(CRHDX)=+CRHDVAL(CRHDX)
"RTN","CRHD6",87,0)
 ...I CRHDVAL(CRHDX)?1A.E S CRHDVAL(CRHDX)=$P(CRHDVAL(CRHDX),"^",1)
"RTN","CRHD6",88,0)
 ..D SET^CRHD5(CRHDENT,CRHDPN,CRHDCT,CRHDVAL(CRHDX))
"RTN","CRHD6",89,0)
 Q
"RTN","CRHD6",90,0)
GETPAR2(CRHDRTN,CRHDE,CRHDPN) ;
"RTN","CRHD6",91,0)
 ;Get XPAR parameter values
"RTN","CRHD6",92,0)
 N CRHDENT,CRHDX,CRHDX1,CRHDL,CRHDOLST,CRHDPNUM,CRHDFMT,CRHDFG
"RTN","CRHD6",93,0)
 N CRHDI
"RTN","CRHD6",94,0)
 S CRHDRTN(0)=1
"RTN","CRHD6",95,0)
 S CRHDFMT="I"
"RTN","CRHD6",96,0)
 I CRHDE="" S CRHDRTN(0)=0_"^Entity data not valid" Q
"RTN","CRHD6",97,0)
 S CRHDL=$L(CRHDE,"^")
"RTN","CRHD6",98,0)
 I +CRHDE S CRHDENT=$P($P(CRHDE,"^",CRHDL),"-",1)_".`"_+CRHDE
"RTN","CRHD6",99,0)
 I CRHDPN="" S CRHDRTN(0)=0_"^Parameter name not valid" Q     ;S PN="CRHD DNR ORDER TITLE"
"RTN","CRHD6",100,0)
 ;get format code
"RTN","CRHD6",101,0)
 S CRHDPNUM=$O(^XTV(8989.51,"B",CRHDPN,0))
"RTN","CRHD6",102,0)
 I CRHDPNUM D
"RTN","CRHD6",103,0)
 .S CRHDFMT=$S(($P($G(^XTV(8989.51,CRHDPNUM,1)),"^",1)="F")!($P($G(^XTV(8989.51,CRHDPNUM,1)),"^",6)="F"):"E",1:"B")
"RTN","CRHD6",104,0)
 ;get all Instances of a Parameter
"RTN","CRHD6",105,0)
 D GETLST^XPAR(.CRHDOLST,CRHDENT,CRHDPN,CRHDFMT)
"RTN","CRHD6",106,0)
 I CRHDFMT="B" D
"RTN","CRHD6",107,0)
 .K CRHDRTN
"RTN","CRHD6",108,0)
 .S CRHDI=0
"RTN","CRHD6",109,0)
 .F  S CRHDI=$O(CRHDOLST(CRHDI)) Q:'CRHDI  S:$G(CRHDOLST(CRHDI,"V"))'="" CRHDRTN(CRHDI)=$G(CRHDOLST(CRHDI,"V"))
"RTN","CRHD6",110,0)
 E  K CRHDRTN D
"RTN","CRHD6",111,0)
 .S CRHDI=0
"RTN","CRHD6",112,0)
 .F  S CRHDI=$O(CRHDOLST(CRHDI)) Q:'CRHDI  S CRHDRTN(CRHDI)=$P(CRHDOLST(CRHDI),"^",2)
"RTN","CRHD6",113,0)
 Q
"RTN","CRHD7")
0^18^B4400083
"RTN","CRHD7",1,0)
CRHD7 ; CAIRO/CLC - TEAM ROSTER ;4/22/08  12:53
"RTN","CRHD7",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD7",3,0)
 ;=================================================================
"RTN","CRHD7",4,0)
MGR(CRHDRTN,DUZ) ;check for the Manager key
"RTN","CRHD7",5,0)
 N CRHDKN,CRHDOUT
"RTN","CRHD7",6,0)
 S CRHDRTN=0
"RTN","CRHD7",7,0)
 S CRHDKN=$$FIND1^DIC(19.1,"","X","CRHD SHIFT CHG HANDOFF MGR","","","CRHDOUT")
"RTN","CRHD7",8,0)
 D GETS^DIQ(200,DUZ_",","51*","I","CRHDOUT")
"RTN","CRHD7",9,0)
 I CRHDKN>0 S CRHDRTN=$D(CRHDOUT(200.051,+CRHDKN_","_DUZ_","))
"RTN","CRHD7",10,0)
 Q
"RTN","CRHD7",11,0)
TEAMMEM(CRHDRTN,CRHDTM) ;
"RTN","CRHD7",12,0)
 N CRHDTMM,CRHDCT,CRHDOP,CRHDPG,CRHDX1,CRHDRM,CRHDEM
"RTN","CRHD7",13,0)
 N CRHDTT,CRHDSORT,CRHDTTCT,CRHDTIT,CRHDFG,CRHDUIF,CRHDX
"RTN","CRHD7",14,0)
 S CRHDCT=1
"RTN","CRHD7",15,0)
 I $P(CRHDTM,"^",2)="USR" D
"RTN","CRHD7",16,0)
 .S CRHDTM=$$GET^XPAR("USR.`"_+CRHDTM,"ORLP DEFAULT TEAM",1,"I")
"RTN","CRHD7",17,0)
 I +CRHDTM D
"RTN","CRHD7",18,0)
 .I '$D(^OR(100.21,+CRHDTM,0)) K CRHDRTN S CRHDRTN="" Q
"RTN","CRHD7",19,0)
 .K CRHDTMM
"RTN","CRHD7",20,0)
 .D TEAMPROV^ORQPTQ1(.CRHDTMM,+CRHDTM)
"RTN","CRHD7",21,0)
 .I $D(CRHDTMM) D
"RTN","CRHD7",22,0)
 ..S CRHDX1=0
"RTN","CRHD7",23,0)
 ..F  S CRHDX1=$O(CRHDTMM(CRHDX1)) Q:'CRHDX1  D
"RTN","CRHD7",24,0)
 ...D DISP^CRHDUD(.CRHDUIF,+CRHDTMM(CRHDX1))
"RTN","CRHD7",25,0)
 ...I $D(CRHDUIF) S CRHDSORT($P(CRHDUIF,"^",2))=CRHDUIF
"RTN","CRHD7",26,0)
 I $D(CRHDSORT) D
"RTN","CRHD7",27,0)
 .S CRHDCT=0
"RTN","CRHD7",28,0)
 .S CRHDX=""
"RTN","CRHD7",29,0)
 .F  S CRHDX=$O(CRHDSORT(CRHDX)) Q:CRHDX=""  D
"RTN","CRHD7",30,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHD7",31,0)
 ..S CRHDRTN(CRHDCT)=CRHDSORT(CRHDX)
"RTN","CRHD7",32,0)
 Q
"RTN","CRHD7",33,0)
GETMPEXP(CRHDLST,CRHDUSR,CRHDDIV) ;get temp flds expiration time
"RTN","CRHD7",34,0)
 K CRHDLST
"RTN","CRHD7",35,0)
 N CRHDPARA,CRHDTITL,CRHDPP
"RTN","CRHD7",36,0)
 F CRHDPP=1,2,3,4 D
"RTN","CRHD7",37,0)
 .D GETONEP^CRHD4(.CRHDPARA,CRHDUSR,"TEMP_FLD_"_CRHDPP_"_TITLE",CRHDDIV)
"RTN","CRHD7",38,0)
 .I $G(CRHDPARA(1))'=""  D
"RTN","CRHD7",39,0)
 ..S CRHDTITL=$$UP^XLFSTR(CRHDPARA(1))
"RTN","CRHD7",40,0)
 ..S CRHDLST(CRHDTITL)=""
"RTN","CRHD7",41,0)
 ..K CRHDPARA
"RTN","CRHD7",42,0)
 ..D GETONEP^CRHD4(.CRHDPARA,CRHDUSR,"edt_TEMP_FLD_"_CRHDPP_"_EXPIRE",CRHDDIV)
"RTN","CRHD7",43,0)
 ..I $G(CRHDPARA(1))'="" S CRHDLST(CRHDTITL)=CRHDPARA(1)
"RTN","CRHD7",44,0)
 Q
"RTN","CRHD7",45,0)
DELTMPTX(CRHDFLDA,DA) ;KILL TEXT FOR TEMP FLD DATA
"RTN","CRHD7",46,0)
 N DIE,DR
"RTN","CRHD7",47,0)
 S DIE="^CRHD(183.2,"_CRHDFLDA_",1,"
"RTN","CRHD7",48,0)
 S DA(1)=CRHDFLDA,DR=".01///@"
"RTN","CRHD7",49,0)
 D ^DIE
"RTN","CRHD7",50,0)
 Q
"RTN","CRHD8")
0^19^B22543750
"RTN","CRHD8",1,0)
CRHD8 ; CAIRO/CLC - RETURNS THE TEXTS OF AND ORDER ;21-Mar-2008 10:31;CLC
"RTN","CRHD8",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD8",3,0)
 ;=================================================================
"RTN","CRHD8",4,0)
TEXT(ORTX,ORIFN,WIDTH) ; -- Returns text of order ORIFN in ORTX(#)
"RTN","CRHD8",5,0)
 N CRHD0,CRHD3,CRHD6,CRHDORX,X,Y,CRHDFRST,CRHDI,CRHDJ,CRHDLG,X,CRHDACT
"RTN","CRHD8",6,0)
 N CRHDTA,XQAID,ORFLG
"RTN","CRHD8",7,0)
 K ORTX S:'$G(WIDTH) WIDTH=244
"RTN","CRHD8",8,0)
 S CRHDACT=+$P(ORIFN,";",2),ORIFN=+ORIFN
"RTN","CRHD8",9,0)
 I CRHDACT<1 S CRHDACT=+$P($G(^OR(100,ORIFN,3)),U,7) S:'CRHDACT CRHDACT=1
"RTN","CRHD8",10,0)
 S CRHD0=$G(^OR(100,ORIFN,0)),CRHD3=$G(^(3)),CRHD6=$G(^(6)),CRHDORX=$G(^(8,CRHDACT,0))
"RTN","CRHD8",11,0)
 S ORTX=1,ORTX(1)=""
"RTN","CRHD8",12,0)
 I $P($G(CRHD0),U,11)'="",($P($G(^ORD(100.98,$P(CRHD0,U,11),0)),U)="NON-VA MEDICATIONS") S X="Non-VA" D ADD^ORQ12
"RTN","CRHD8",13,0)
 G:$G(ORIGVIEW)>1 T1
"RTN","CRHD8",14,0)
 S:$P(CRHD0,U,14)=$O(^DIC(9.4,"C","OR",0)) ORTX(1)=">>" ;generic
"RTN","CRHD8",15,0)
 S X=$$ACTION^ORQ12($P(CRHDORX,U,2)) D:$L(X) ADD^ORQ12
"RTN","CRHD8",16,0)
 I $P(CRHDORX,U,2)="NW",$P(CRHD3,U,11),'$G(ORIGVIEW) D  ; Changed or Renewed
"RTN","CRHD8",17,0)
 . I $P(CRHD3,U,11)=2 S X="Renew" D ADD^ORQ12 Q
"RTN","CRHD8",18,0)
 . N CRHDIG,CRHDIGTA S CRHDIG=+$P(CRHD3,U,5) Q:'CRHDIG  Q:$P(CRHD3,U,11)'=1
"RTN","CRHD8",19,0)
 . S X="Change" D ADD^ORQ12 S CRHDI=0
"RTN","CRHD8",20,0)
 . I $G(IOST)'="P-OTHER" D
"RTN","CRHD8",21,0)
 . .S CRHDIGTA=$$LASTXT^ORQ12(CRHDIG) ;D:$O(^OR(100,CRHDIG,1,0)) CNV^ORY92(CRHDIG)
"RTN","CRHD8",22,0)
 . .F  S CRHDI=$O(^OR(100,CRHDIG,8,CRHDIGTA,.1,CRHDI)) Q:CRHDI'>0  S X=$G(^(CRHDI,0)) S:$E(X,1,3)=">> " X=$E(X,4,999) D ADD^ORQ12
"RTN","CRHD8",23,0)
 . .S X=" to" D ADD^ORQ12
"RTN","CRHD8",24,0)
T1 S CRHDTA=+$P(CRHDORX,U,14),CRHDFRST=+$O(^OR(100,ORIFN,8,CRHDTA,.1,0))
"RTN","CRHD8",25,0)
 S CRHDI=0 F  S CRHDI=$O(^OR(100,ORIFN,8,CRHDTA,.1,CRHDI)) Q:CRHDI'>0  S X=$G(^(CRHDI,0)) S:(CRHDFRST=CRHDI)&($E(X,1,3)=">> ") X=$E(X,4,999) D:$L(X) ADD^ORQ12
"RTN","CRHD8",26,0)
 Q:$G(ORIGVIEW)>1  ;contents of global only
"RTN","CRHD8",27,0)
 S CRHDLG=$P(CRHD0,U,5) K Y I CRHDLG,$P(CRHDLG,";",2)["101.41",$D(^ORD(101.41,+CRHDLG,9)) X ^(9) I $L($G(Y)) S X=Y D ADD^ORQ12 ; additional text
"RTN","CRHD8",28,0)
 ; I $P(CRHD3,U,11)=2 S X="(Renewal)" D ADD^ORQ12
"RTN","CRHD8",29,0)
 I $P(CRHDORX,U,4)=2 S X="*UNSIGNED*" D ADD^ORQ12
"RTN","CRHD8",30,0)
 I $P(CRHDORX,U,2)="DC"!("^1^13^"[(U_$P(CRHD3,U,3)_U)),$L(CRHD6) S X=" <"_$S($L($P(CRHD6,U,5)):$P(CRHD6,U,5),$P(CRHD6,U,4):$P($G(^ORD(100.03,+$P(CRHD6,U,4),0)),U),1:"")_">" D:$L(X)>3 ADD^ORQ12 ; DC Reason
"RTN","CRHD8",31,0)
 I $D(XQAID),$G(ORFLG)=12 S CRHDORX=$G(^OR(100,ORIFN,8,CRHDACT,3)) D
"RTN","CRHD8",32,0)
 .I $P(CRHDORX,U) S X=" Flagged "_$$DATETIME^ORQ12($P(CRHDORX,U,3))_$S($P(CRHDORX,U,4):" by "_$$NAME^ORQ12($P(CRHDORX,U,4)),1:"")_": "_$P(CRHDORX,U,5) D ADD^ORQ12 ;Flagged - show in FUP
"RTN","CRHD8",33,0)
 Q
"RTN","CRHD8",34,0)
SORT(CRHDRTN,CRHDPLST,CRHDFG,CRHDP) ;SORT PRINT LIST
"RTN","CRHD8",35,0)
 N VAIN,CRHDV,CRHDV1,CRHDV2,CRHDCT,CRHDDFN,CRHDWARD
"RTN","CRHD8",36,0)
 N CRHDNAME,CRHDRM,CRHDN,CRHDWR,CRHDW,CRHDFLG,CRHDS,CRHDLG,CRHDLB
"RTN","CRHD8",37,0)
 K CRHDRTN
"RTN","CRHD8",38,0)
 I (CRHDP?1N.E)&($E(CRHDP,1)'=1) S CRHDP="1,"_CRHDP
"RTN","CRHD8",39,0)
 S CRHDP1=$P(CRHDP,"^",1)
"RTN","CRHD8",40,0)
 S CRHDLG=$P(CRHDP,"^",2)
"RTN","CRHD8",41,0)
 S CRHDLB=$P(CRHDP,"^",3)
"RTN","CRHD8",42,0)
 S CRHDV=0
"RTN","CRHD8",43,0)
 F  S CRHDV=$O(CRHDPLST(CRHDV)) Q:'CRHDV  D
"RTN","CRHD8",44,0)
 .S CRHDDFN=+CRHDPLST(CRHDV)
"RTN","CRHD8",45,0)
 .K CRHDRL,CRHDS
"RTN","CRHD8",46,0)
 .Q:'CRHDDFN
"RTN","CRHD8",47,0)
 .S CRHDS=CRHDDFN_"^"_CRHDP1_"^"_CRHDLG_"^"_CRHDLB
"RTN","CRHD8",48,0)
 .D PATDEMO^CRHDUT2(.CRHDRL,CRHDS)
"RTN","CRHD8",49,0)
 .S CRHDFLG=CRHDFG
"RTN","CRHD8",50,0)
 .S CRHDRM=$P($G(CRHDRL),"^",4)                              ;Room/Bed
"RTN","CRHD8",51,0)
 .I CRHDRM["RM : " S CRHDRM=$P(CRHDRM,": ",2)
"RTN","CRHD8",52,0)
 .S CRHDWARD=$P($G(CRHDRL),"^",5)                             ;Ward Location
"RTN","CRHD8",53,0)
 .I CRHDWARD["LOC: " S CRHDWARD=$P(CRHDWARD,": ",2)
"RTN","CRHD8",54,0)
 .S CRHDNAME=$P(^DPT(CRHDDFN,0),"^",1)
"RTN","CRHD8",55,0)
 .Q:CRHDNAME=""
"RTN","CRHD8",56,0)
 .I CRHDFLG=1 D
"RTN","CRHD8",57,0)
 ..I (CRHDWARD="") S CRHDWARD="UNK"  ;S CRHDFLG=0 Q
"RTN","CRHD8",58,0)
 ..I (CRHDRM="") S CRHDRM="UNK"      ;S CRHDFLG=2 Q
"RTN","CRHD8",59,0)
 ..S CRHDWR(CRHDWARD,CRHDRM,CRHDNAME)=CRHDRL
"RTN","CRHD8",60,0)
 .I CRHDFLG=2 D
"RTN","CRHD8",61,0)
 ..I CRHDWARD="" S CRHDWARD="UNK"    ;S CRHDFLG=0 Q
"RTN","CRHD8",62,0)
 ..S CRHDW(CRHDWARD,CRHDNAME)=CRHDRL
"RTN","CRHD8",63,0)
 .I CRHDFLG=0 S CRHDN(CRHDNAME)=CRHDRL
"RTN","CRHD8",64,0)
 ;
"RTN","CRHD8",65,0)
 S CRHDCT=0
"RTN","CRHD8",66,0)
 S CRHDV=0
"RTN","CRHD8",67,0)
 I CRHDFG=0 D
"RTN","CRHD8",68,0)
 .F  S CRHDV=$O(CRHDN(CRHDV)) Q:CRHDV=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDN(CRHDV)
"RTN","CRHD8",69,0)
 .K CRHDN
"RTN","CRHD8",70,0)
 I CRHDFG=1 D
"RTN","CRHD8",71,0)
 .F  S CRHDV=$O(CRHDWR(CRHDV)) Q:CRHDV=""  S CRHDV1="" F  S CRHDV1=$O(CRHDWR(CRHDV,CRHDV1)) Q:CRHDV1=""  S CRHDV2="" F  S CRHDV2=$O(CRHDWR(CRHDV,CRHDV1,CRHDV2)) Q:CRHDV2=""   S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDWR(CRHDV,CRHDV1,CRHDV2)
"RTN","CRHD8",72,0)
 .K CRHDWR
"RTN","CRHD8",73,0)
 I CRHDFG=2 D
"RTN","CRHD8",74,0)
 .F  S CRHDV=$O(CRHDW(CRHDV)) Q:CRHDV=""  S CRHDV1="" F  S CRHDV1=$O(CRHDW(CRHDV,CRHDV1)) Q:CRHDV1=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDW(CRHDV,CRHDV1)
"RTN","CRHD8",75,0)
 .K CRHDW
"RTN","CRHD8",76,0)
 I '$D(CRHDRTN) D
"RTN","CRHD8",77,0)
 .S CRHDV=0
"RTN","CRHD8",78,0)
 .I $D(CRHDW) F  S CRHDV=$O(CRHDW(CRHDV)) Q:CRHDV=""  S CRHDV1="" F  S CRHDV1=$O(CRHDW(CRHDV,CRHDV1)) Q:CRHDV1=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDWR(CRHDV,CRHDV1)
"RTN","CRHD8",79,0)
 .I $D(CRHDN) F  S CRHDV=$O(CRHDN(CRHDV)) Q:CRHDV=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDN(CRHDV)
"RTN","CRHD8",80,0)
 Q
"RTN","CRHD9")
0^2^B70845564
"RTN","CRHD9",1,0)
CRHD9 ; CAIRO/CLC - HANDOFF TEAM LIST ;4/24/08  12:49
"RTN","CRHD9",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHD9",3,0)
 ;=================================================================
"RTN","CRHD9",4,0)
HOTMSAVE(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",5,0)
 ;create a team name
"RTN","CRHD9",6,0)
 N CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD9",7,0)
 K CRHDRTN
"RTN","CRHD9",8,0)
 S CRHDRTN=0
"RTN","CRHD9",9,0)
 I (CRHDTM'?1A.E)&(CRHDTM'?1N.E) Q
"RTN","CRHD9",10,0)
 S CRHDFDA(183.3,"?+1,",.01)=CRHDTM
"RTN","CRHD9",11,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",12,0)
 I '$D(CRHDERR) S CRHDRTN=CRHDOUT(1)
"RTN","CRHD9",13,0)
 Q
"RTN","CRHD9",14,0)
HOTMDEL(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",15,0)
 ;delete a Hand off team
"RTN","CRHD9",16,0)
 N DIK,DA
"RTN","CRHD9",17,0)
 K CRHDRTN
"RTN","CRHD9",18,0)
 S CRHDRTN=0
"RTN","CRHD9",19,0)
 I +CRHDTM S DIK="^CRHD(183.3,",DA=+CRHDTM D ^DIK S CRHDRTN=1
"RTN","CRHD9",20,0)
 Q
"RTN","CRHD9",21,0)
HOLIST(CRHDRTN) ;
"RTN","CRHD9",22,0)
 ;return a list of teams
"RTN","CRHD9",23,0)
 N CRHDX,CRHDX1,CRHDTDT,CRHDCT
"RTN","CRHD9",24,0)
 K CRHDRTN
"RTN","CRHD9",25,0)
 S CRHDX=""
"RTN","CRHD9",26,0)
 S CRHDCT=0
"RTN","CRHD9",27,0)
 S CRHDRTN(0)="0^No List Found"
"RTN","CRHD9",28,0)
 F  S CRHDX=$O(^CRHD(183.3,"B",CRHDX)) Q:CRHDX=""  D
"RTN","CRHD9",29,0)
 .S CRHDX1=0
"RTN","CRHD9",30,0)
 .F  S CRHDX1=$O(^CRHD(183.3,"B",CRHDX,CRHDX1)) Q:'CRHDX1  D
"RTN","CRHD9",31,0)
 ..;check to see if team list is active, if date is less then today then inactive
"RTN","CRHD9",32,0)
 ..S CRHDTDT=$P($G(^CRHD(183.3,CRHDX1,0)),"^",2)
"RTN","CRHD9",33,0)
 ..I CRHDTDT&(CRHDTDT<$$DT^XLFDT) Q
"RTN","CRHD9",34,0)
 ..S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDX1_"^"_CRHDX_"^"_"HOTEAM"
"RTN","CRHD9",35,0)
 I CRHDCT>0 K CRHDRTN(0)
"RTN","CRHD9",36,0)
 Q
"RTN","CRHD9",37,0)
HOPLIST(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",38,0)
 ;Get list of Patients for a HO team
"RTN","CRHD9",39,0)
 N CRHDX,CRHDPT,CRHDPD,CRHDTLST,CRHDCT,CRHDPD2,VAIP,DFN,DIE,DA,DR
"RTN","CRHD9",40,0)
 K CRHDRTN
"RTN","CRHD9",41,0)
 S CRHDRTN(1)="No Patients Found"
"RTN","CRHD9",42,0)
 Q:'CRHDTM
"RTN","CRHD9",43,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHD9",44,0)
 S CRHDX=0
"RTN","CRHD9",45,0)
 F  S CRHDX=$O(^CRHD(183.3,+CRHDTM,1,CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",46,0)
 .S CRHDPT=+$G(^CRHD(183.3,+CRHDTM,1,CRHDX,0))
"RTN","CRHD9",47,0)
 .;check to see if patient has been discharged, if so delete from list
"RTN","CRHD9",48,0)
 .S DFN=CRHDPT D IN5^VADPT
"RTN","CRHD9",49,0)
 .I VAIP(1)="" D  Q
"RTN","CRHD9",50,0)
 ..S DA(1)=+CRHDTM,DIE="^CRHD(183.3,"_DA(1)_",1,",DA=CRHDX,DR=".01///@" D ^DIE
"RTN","CRHD9",51,0)
 .S CRHDPD=$$PATDATA(CRHDPT)
"RTN","CRHD9",52,0)
 .K CRHDPD2
"RTN","CRHD9",53,0)
 .D PATPRV(.CRHDPD2,CRHDTM,CRHDPT)
"RTN","CRHD9",54,0)
 .I $P(CRHDPD,"^",2)'="" S CRHDTLST($P(CRHDPD,"^",2))=CRHDPD
"RTN","CRHD9",55,0)
 .I $G(CRHDPD2)'="" S CRHDTLST($P(CRHDPD,"^",2))=CRHDTLST($P(CRHDPD,"^",2))_"^*"_CRHDPD2
"RTN","CRHD9",56,0)
 I $D(CRHDTLST) D
"RTN","CRHD9",57,0)
 .S CRHDCT=0
"RTN","CRHD9",58,0)
 .S CRHDX=""
"RTN","CRHD9",59,0)
 .F  S CRHDX=$O(CRHDTLST(CRHDX)) Q:CRHDX=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTLST(CRHDX)
"RTN","CRHD9",60,0)
 Q
"RTN","CRHD9",61,0)
PATDATA(DFN) ;
"RTN","CRHD9",62,0)
 ;
"RTN","CRHD9",63,0)
 N CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE,CRHDSEX,VAIP,VADM
"RTN","CRHD9",64,0)
 K VAIP,VADM
"RTN","CRHD9",65,0)
 D DEM^VADPT,IN5^VADPT
"RTN","CRHD9",66,0)
 S CRHDNAME=VADM(1),CRHDSSN=$P(VADM(2),U,1),CRHDDOB=$P(VADM(3),U,1)
"RTN","CRHD9",67,0)
 S CRHDAGE=VADM(4),CRHDSEX=$P(VADM(5),U,1)
"RTN","CRHD9",68,0)
 K VAIP,VADM
"RTN","CRHD9",69,0)
 Q DFN_U_CRHDNAME_U_CRHDSSN_U_CRHDDOB_U_CRHDAGE_U_CRHDSEX
"RTN","CRHD9",70,0)
 ;
"RTN","CRHD9",71,0)
HODLIST(CRHDRTN,CRHDTM) ;Get list of Providers for a HO team
"RTN","CRHD9",72,0)
 N CRHDX,CRHDPRV,CRHDTLST,CRHDCT,CRHDZ0,CRHDSORT,CRHDUT
"RTN","CRHD9",73,0)
 N CRHDPX,CRHDPX0,CRHDNAM
"RTN","CRHD9",74,0)
 K CRHDRTN
"RTN","CRHD9",75,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHD9",76,0)
 S CRHDX=0
"RTN","CRHD9",77,0)
 F  S CRHDX=$O(^CRHD(183.3,+CRHDTM,2,CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",78,0)
 .S CRHDPRV=+$G(^CRHD(183.3,+CRHDTM,2,CRHDX,0))
"RTN","CRHD9",79,0)
 .S CRHDNAM=$$GET1^DIQ(200,+CRHDPRV,.01,"E")
"RTN","CRHD9",80,0)
 .;Delete Provider if inactive, 1st check to see if assigned to a patient, if so remove
"RTN","CRHD9",81,0)
 .I '$$ACTIVE^XUSER(+CRHDPRV) D  Q
"RTN","CRHD9",82,0)
 ..S CRHDPX=0 F  S CRHDPX=$O(^CRHD(183.3,+CRHDTM,1,CRHDPX)) Q:'CRHDPX  D
"RTN","CRHD9",83,0)
 ...S CRHDPX0=^CRHD(183.3,+CRHDTM,1,CRHDPX,0)
"RTN","CRHD9",84,0)
 ...I CRHDPX0[+CRHDPRV F CRHDI=2:1:$L(CRHDPX0,"^") I $P(CRHDPX0,"^",CRHDI)=+CRHDPRV S $P(^CRHD(183.3,+CRHDTM,1,CRHDPX,0),"^",CRHDI)=""
"RTN","CRHD9",85,0)
 ..S DA(1)=+CRHDTM,DIE="^CRHD(183.3,"_DA(1)_",2,",DA=CRHDX,DR=".01///@" D ^DIE
"RTN","CRHD9",86,0)
 .I CRHDNAM'="" D
"RTN","CRHD9",87,0)
 ..S CRHDZ0=$G(^CRHD(183.3,+CRHDTM,2,+CRHDX,0))
"RTN","CRHD9",88,0)
 ..S CRHDUT=$P(CRHDZ0,"^",2)
"RTN","CRHD9",89,0)
 ..I CRHDUT="" S CRHDUT="ZNOTYPE"
"RTN","CRHD9",90,0)
 ..S CRHDSORT(CRHDUT,CRHDNAM)=CRHDPRV_"^"_CRHDNAM_"^"_$P(CRHDZ0,"^",2)_"^"_+$P(CRHDZ0,"^",3)_"^"_+$P(CRHDZ0,"^",4)_"^"_$P(CRHDZ0,"^",5)_"^"_$P(CRHDZ0,"^",6)
"RTN","CRHD9",91,0)
 S CRHDI=""
"RTN","CRHD9",92,0)
 F  S CRHDI=$O(CRHDSORT(CRHDI)) Q:CRHDI=""  D
"RTN","CRHD9",93,0)
 .S CRHDPRV=""
"RTN","CRHD9",94,0)
 .F  S CRHDPRV=$O(CRHDSORT(CRHDI,CRHDPRV)) Q:CRHDPRV=""  D
"RTN","CRHD9",95,0)
 ..S CRHDTLST(CRHDPRV)=CRHDSORT(CRHDI,CRHDPRV)
"RTN","CRHD9",96,0)
 ..;S CRHDTLST(CRHDNAM)=CRHDPRV_"^"_CRHDNAM_"^"_$P(CRHDZ0,"^",2)_"^"_+$P(CRHDZ0,"^",3)_"^"_+$P(CRHDZ0,"^",4)_"^"_$P(CRHDZ0,"^",5)_"^"_$P(CRHDZ0,"^",6)
"RTN","CRHD9",97,0)
 I $D(CRHDTLST) D
"RTN","CRHD9",98,0)
 .S CRHDCT=0
"RTN","CRHD9",99,0)
 .S CRHDX=""
"RTN","CRHD9",100,0)
 .F  S CRHDX=$O(CRHDTLST(CRHDX)) Q:CRHDX=""  S CRHDCT=CRHDCT+1,CRHDRTN(CRHDCT)=CRHDTLST(CRHDX)
"RTN","CRHD9",101,0)
 Q
"RTN","CRHD9",102,0)
CANEDIT(CRHDRTN,CRHDTM,DUZ) ;
"RTN","CRHD9",103,0)
 ;Can user edit team list
"RTN","CRHD9",104,0)
 N CRHDPRV,CRHDMGR,CRHDA
"RTN","CRHD9",105,0)
 Q:CRHDTM=""
"RTN","CRHD9",106,0)
 ;S CRHDRTN="1^1"
"RTN","CRHD9",107,0)
 S CRHDA=$$GET1^DIQ(200,+DUZ,3,"I")
"RTN","CRHD9",108,0)
 S CRHDRTN="0^0"
"RTN","CRHD9",109,0)
 I CRHDA["@" S CRHDRTN="1^1" Q
"RTN","CRHD9",110,0)
 D HOTMMGR^CRHD1(.CRHDMGR,DUZ)
"RTN","CRHD9",111,0)
 I CRHDMGR S CRHDRTN="1^1" Q
"RTN","CRHD9",112,0)
 S CRHDPRV=$O(^CRHD(183.3,+CRHDTM,2,"B",+DUZ,0))
"RTN","CRHD9",113,0)
 I 'CRHDPRV Q
"RTN","CRHD9",114,0)
 E  S CRHDRTN=+$P($G(^CRHD(183.3,+CRHDTM,2,+CRHDPRV,0)),"^",3)_"^"_+$P($G(^CRHD(183.3,+CRHDTM,2,+CRHDPRV,0)),"^",4)
"RTN","CRHD9",115,0)
 Q
"RTN","CRHD9",116,0)
PATPRV(CRHDRTN,CRHDTM,CRHDDFN) ;
"RTN","CRHD9",117,0)
 ;return Providers assigned to patient on list
"RTN","CRHD9",118,0)
 N CRHDPAT,CRHDNAM,CRHDZ0,CRHDP,CRHDATTN,CRHDRES,CRHDINT,CRHDFEL,CRHDMST,CRHDNUR,CRHDVP,CRHDI,CRHDI2
"RTN","CRHD9",119,0)
 S CRHDVP="^CRHDATTN^CRHDRES^CRHDINT^CRHDFEL^CRHDMST^CRHDNUR"
"RTN","CRHD9",120,0)
 S CRHDPAT=$O(^CRHD(183.3,+CRHDTM,1,"B",+CRHDDFN,0))
"RTN","CRHD9",121,0)
 I 'CRHDPAT Q
"RTN","CRHD9",122,0)
 S CRHDZ0=$G(^CRHD(183.3,+CRHDTM,1,+CRHDPAT,0))
"RTN","CRHD9",123,0)
 ;I need to add, if the physician is not on team list delete from patient.
"RTN","CRHD9",124,0)
 F CRHDI=2:1:7 S CRHDP=$P(CRHDZ0,"^",CRHDI) D
"RTN","CRHD9",125,0)
 .I '$D(@$P(CRHDVP,"^",CRHDI)) S @$P(CRHDVP,"^",CRHDI)=""
"RTN","CRHD9",126,0)
 .I CRHDP["," D
"RTN","CRHD9",127,0)
 ..F CRHDI2=1:1:$L(CRHDP,",") D
"RTN","CRHD9",128,0)
 ...I '$D(^CRHD(183.3,CRHDTM,2,"B",$P(CRHDP,",",CRHDI2))) Q
"RTN","CRHD9",129,0)
 ...S CRHDNAM=$$GET1^DIQ(200,+$P(CRHDP,",",CRHDI2),.01,"E")
"RTN","CRHD9",130,0)
 ...S @$P(CRHDVP,"^",CRHDI)=@$P(CRHDVP,"^",CRHDI)_+$P(CRHDP,",",CRHDI2)_"^"_CRHDNAM_"+"
"RTN","CRHD9",131,0)
 .;E  S:+CRHDP&($D(^CRHD(183.3,+CRHDTM,2,"B",+CRHDP))) @$P(CRHDVP,"^",CRHDI)=+CRHDP_"^"_$$GET1^DIQ(200,+CRHDP,.01,"E")
"RTN","CRHD9",132,0)
 .E  S:+CRHDP @$P(CRHDVP,"^",CRHDI)=+CRHDP_"^"_$$GET1^DIQ(200,+CRHDP,.01,"E")
"RTN","CRHD9",133,0)
 F CRHDI=2:1:7 I $E(@$P(CRHDVP,"^",CRHDI),$L(@$P(CRHDVP,"^",CRHDI)))="+" S @$P(CRHDVP,"^",CRHDI)=$E(@$P(CRHDVP,"^",CRHDI),1,$L(@$P(CRHDVP,"^",CRHDI))-1)
"RTN","CRHD9",134,0)
 S CRHDRTN=CRHDDFN_";"_$G(CRHDATTN)_";"_$G(CRHDRES)_";"_$G(CRHDINT)_";"_$G(CRHDFEL)_";"_$G(CRHDMST)_";"_$G(CRHDNUR)
"RTN","CRHD9",135,0)
 Q
"RTN","CRHD9",136,0)
USERPHPG(CRHDRTN,DUZ) ;
"RTN","CRHD9",137,0)
 N CRHDOP,CRHDPG
"RTN","CRHD9",138,0)
 S CRHDOP=$$GET1^DIQ(200,+DUZ_",",.132,"E")             ;OFFICE PHONE
"RTN","CRHD9",139,0)
 S CRHDPG=$$GET1^DIQ(200,+DUZ_",",.138,"E")             ;PAGER
"RTN","CRHD9",140,0)
 S CRHDRTN=$S($L(CRHDOP)>2:CRHDOP,1:"")_"^"_$S($L(CRHDPG)>2:CRHDPG,1:"")
"RTN","CRHD9",141,0)
 Q
"RTN","CRHD9",142,0)
PRVINFO(CRHDRTN,CRHDTM,DUZ) ;
"RTN","CRHD9",143,0)
 ;return user information
"RTN","CRHD9",144,0)
 N CRHDPRV,CRHDZ0,CRHDMGR
"RTN","CRHD9",145,0)
 Q:CRHDTM=""
"RTN","CRHD9",146,0)
 ;S CRHDRTN(1)="0^0"
"RTN","CRHD9",147,0)
 S CRHDPRV=$O(^CRHD(183.3,+CRHDTM,2,"B",+DUZ,0))
"RTN","CRHD9",148,0)
 I 'CRHDPRV Q
"RTN","CRHD9",149,0)
 S CRHDZ0=$G(^CRHD(183.3,+CRHDTM,2,+CRHDPRV,0))
"RTN","CRHD9",150,0)
 D MGR^CRHD7(.CRHDMGR,DUZ)
"RTN","CRHD9",151,0)
 I ($$GET1^DIQ(200,+DUZ,3,"E")["@")!(+CRHDMGR) S $P(CRHDZ0,"^",3)=1,$P(CRHDZ0,"^",4)=1
"RTN","CRHD9",152,0)
 S CRHDRTN=$P(CRHDZ0,"^",1)_"^"_$$GET1^DIQ(200,+CRHDZ0,.01,"E")_"^"_$P(CRHDZ0,"^",2,$L(CRHDZ0,"^"))
"RTN","CRHD9",153,0)
 Q
"RTN","CRHD9",154,0)
MOD(CRHDRTN,CRHDTM,CRHDLTYP,CRHDTXT,CRHDKFG) ;
"RTN","CRHD9",155,0)
 N CRHDX,CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD9",156,0)
 K CRHDRTN
"RTN","CRHD9",157,0)
 S CRHDRTN(0)=0
"RTN","CRHD9",158,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHD9",159,0)
 I CRHDLTYP="P" D
"RTN","CRHD9",160,0)
 .K:CRHDKFG ^CRHD(183.3,+CRHDTM,1)
"RTN","CRHD9",161,0)
 .S CRHDX=0
"RTN","CRHD9",162,0)
 .F  S CRHDX=$O(CRHDTXT(CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",163,0)
 ..I CRHDTXT(CRHDX)["~" S CRHDTXT(CRHDX)=$P(CRHDTXT(CRHDX),"~",2)
"RTN","CRHD9",164,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",.01)=+$P(CRHDTXT(CRHDX),"^",1)
"RTN","CRHD9",165,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",1)=+$P(CRHDTXT(CRHDX),";",2)
"RTN","CRHD9",166,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",2)=+$P(CRHDTXT(CRHDX),";",3)
"RTN","CRHD9",167,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",3)=+$P(CRHDTXT(CRHDX),";",4)
"RTN","CRHD9",168,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",4)=+$P(CRHDTXT(CRHDX),";",5)
"RTN","CRHD9",169,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",5)=+$P(CRHDTXT(CRHDX),";",6)
"RTN","CRHD9",170,0)
 ..S CRHDFDA(183.31,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",6)=+$P(CRHDTXT(CRHDX),";",7)
"RTN","CRHD9",171,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",172,0)
 .I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD9",173,0)
 .E  S CRHDRTN(1)=1
"RTN","CRHD9",174,0)
 I CRHDLTYP="D" D
"RTN","CRHD9",175,0)
 .K:CRHDKFG ^CRHD(183.3,+CRHDTM,2)
"RTN","CRHD9",176,0)
 .S CRHDX=0
"RTN","CRHD9",177,0)
 .F  S CRHDX=$O(CRHDTXT(CRHDX)) Q:'CRHDX  D
"RTN","CRHD9",178,0)
 ..I CRHDTXT(CRHDX)["~" S CRHDTXT(CRHDX)=$P(CRHDTXT(CRHDX),"~",2)
"RTN","CRHD9",179,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",.01)=$P(CRHDTXT(CRHDX),"^",1)
"RTN","CRHD9",180,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",1)=$P(CRHDTXT(CRHDX),"^",3)
"RTN","CRHD9",181,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",2)=$P(CRHDTXT(CRHDX),"^",4)
"RTN","CRHD9",182,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",3)=$P(CRHDTXT(CRHDX),"^",5)
"RTN","CRHD9",183,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",4)=$P(CRHDTXT(CRHDX),"^",6)
"RTN","CRHD9",184,0)
 ..S CRHDFDA(183.32,"?+"_(CRHDX+1)_","_+CRHDTM_","_"",5)=$P(CRHDTXT(CRHDX),"^",7)
"RTN","CRHD9",185,0)
 .D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",186,0)
 .I '$D(CRHDERR) S CRHDRTN(0)=1
"RTN","CRHD9",187,0)
 .E  S CRHDRTN(1)=1
"RTN","CRHD9",188,0)
 K CRHDFDA,CRHDOUT,CRHDERR
"RTN","CRHD9",189,0)
 Q
"RTN","CRHD9",190,0)
FILENSAV(CRHDRTN,CRHDTM,CRHDFNM) ;
"RTN","CRHD9",191,0)
 ;save filename for a team
"RTN","CRHD9",192,0)
 N CRHDFDA,CRHDOUT,CRHDERR,CRHDA
"RTN","CRHD9",193,0)
 K CRHDRTN
"RTN","CRHD9",194,0)
 S CRHDRTN=0
"RTN","CRHD9",195,0)
 ;I CRHDTM'?1A.E Q
"RTN","CRHD9",196,0)
 S CRHDFDA(183.4,"?+1,",.01)=$P(CRHDTM,"^",2)
"RTN","CRHD9",197,0)
 D UPDATE^DIE("","CRHDFDA","CRHDOUT","CRHDERR")
"RTN","CRHD9",198,0)
 I '$D(CRHDERR) D
"RTN","CRHD9",199,0)
 .S CRHDA=CRHDOUT(1)
"RTN","CRHD9",200,0)
 .K CRHDFDA,CRHDOUT
"RTN","CRHD9",201,0)
 .I CRHDA D
"RTN","CRHD9",202,0)
 ..S CRHDFDA(183.4,CRHDA_",",2)=CRHDFNM
"RTN","CRHD9",203,0)
 ..D FILE^DIE("","CRHDFDA")
"RTN","CRHD9",204,0)
 ..S CRHDRTN=1
"RTN","CRHD9",205,0)
 Q
"RTN","CRHD9",206,0)
FILENGET(CRHDRTN,CRHDTM) ;
"RTN","CRHD9",207,0)
 ;get filename for a team
"RTN","CRHD9",208,0)
 S CRHDRTN=$$GET1^DIQ(183.4,+$$FIND1^DIC(183.4,"","X",$P(CRHDTM,"^",2),"","","ERR")_",",2,"I")
"RTN","CRHD9",209,0)
 Q
"RTN","CRHDAM")
0^3^B18095609
"RTN","CRHDAM",1,0)
CRHDAM ; CAIRO/CLC -  ;04-Mar-2008 16:00;CLC;CLC
"RTN","CRHDAM",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDAM",3,0)
 ;=================================================================
"RTN","CRHDAM",4,0)
 ;copied from CWCVR0I
"RTN","CRHDAM",5,0)
PSGI(CRHDY,DFN) ;
"RTN","CRHDAM",6,0)
 N CRHDLST,CRHDAMED,CRHDNUM,CRHDCT,CRHDFG,CRHDDRGN,CRHDSEC,CRHDNUM2,CRHDLSTR,CRHDPFN
"RTN","CRHDAM",7,0)
 K CRHDY,CRHDLST,CRHDDRG
"RTN","CRHDAM",8,0)
 D ACTIVE^ORWPS(.CRHDLST,DFN)
"RTN","CRHDAM",9,0)
 S CRHDLSTR=$O(CRHDLST(999),-1),CRHDFG=1
"RTN","CRHDAM",10,0)
 I '$D(CRHDLST) S CRHDY="" Q CRHDY
"RTN","CRHDAM",11,0)
 S CRHDNUM=0 F  S CRHDNUM=$O(CRHDLST(CRHDNUM)) Q:'CRHDNUM!('CRHDFG)  D
"RTN","CRHDAM",12,0)
 .Q:$P(CRHDLST(CRHDNUM),U,10)'="ACTIVE"
"RTN","CRHDAM",13,0)
 .I CRHDLST(CRHDNUM)["~OP" Q
"RTN","CRHDAM",14,0)
 .S CRHDSEC=$E($P(CRHDLST(CRHDNUM),U,1),2,999)
"RTN","CRHDAM",15,0)
 .S CRHDDRGN=$P(CRHDLST(CRHDNUM),U,3)
"RTN","CRHDAM",16,0)
 .S CRHDPFN=+$P(CRHDLST(CRHDNUM),"^",2)
"RTN","CRHDAM",17,0)
 .S CRHDNUM2=CRHDNUM F  S CRHDNUM2=$O(CRHDLST(CRHDNUM2)) Q:$G(CRHDLST(+CRHDNUM2))["~"!('CRHDNUM2)  D
"RTN","CRHDAM",18,0)
 ..I $L($G(CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)))+$L(CRHDLST(CRHDNUM2))<80 S CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)=$G(CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN))_$$STRIP(CRHDLST(CRHDNUM2)," ")_" "
"RTN","CRHDAM",19,0)
 ..E  S CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)=$$STR($G(CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN))_" "_CRHDLST(CRHDNUM2),80)
"RTN","CRHDAM",20,0)
 ..I CRHDNUM2=CRHDLSTR S CRHDFG=0
"RTN","CRHDAM",21,0)
 . S CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)=DFN_"^"_CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)_"^^^"_CRHDPFN_$S($P(CRHDLST(CRHDNUM),"^",2)["U":"|5",1:"|IV")
"RTN","CRHDAM",22,0)
 . S:CRHDFG CRHDNUM=CRHDNUM2-1
"RTN","CRHDAM",23,0)
 S CRHDY(2)="0^<==UNIT DOSE==>",CRHDCT=2
"RTN","CRHDAM",24,0)
 S CRHDSEC=""
"RTN","CRHDAM",25,0)
 F CRHDSEC="UD","CP","IV" S CRHDFG=0,CRHDDRG="" F  S CRHDDRG=$O(CRHDAMED(CRHDSEC,CRHDDRG)) Q:CRHDDRG=""  D
"RTN","CRHDAM",26,0)
 .  S CRHDNUM=0 F  S CRHDNUM=$O(CRHDAMED(CRHDSEC,CRHDDRG,CRHDNUM)) Q:'CRHDNUM  D
"RTN","CRHDAM",27,0)
 .. I (CRHDSEC="UD"!(CRHDSEC="CP"))&'CRHDFG S CRHDY(CRHDCT)="0^<==UNIT DOSE==>",CRHDFG=1,CRHDCT=CRHDCT+1
"RTN","CRHDAM",28,0)
 .. I CRHDSEC="IV"&('CRHDFG) S CRHDY(CRHDCT)="0^<==IV DOSE==>",CRHDFG=1,CRHDCT=CRHDCT+1
"RTN","CRHDAM",29,0)
 .. S CRHDY(CRHDCT)=CRHDAMED(CRHDSEC,CRHDDRG,CRHDNUM),CRHDCT=CRHDCT+1
"RTN","CRHDAM",30,0)
 S CRHDY(-9900)=CRHDCT-2
"RTN","CRHDAM",31,0)
 Q $O(CRHDY(2))
"RTN","CRHDAM",32,0)
STR(CRHDSTR,CRHDLEN) ;
"RTN","CRHDAM",33,0)
 N CRHDX,CRHDCHAR,CRHDK
"RTN","CRHDAM",34,0)
 S CRHDX=""
"RTN","CRHDAM",35,0)
 I $L(CRHDSTR)>CRHDLEN S CRHDX=$E(CRHDSTR,1,CRHDLEN) D
"RTN","CRHDAM",36,0)
 .F CRHDK=132:-1 S CRHDCHAR=$E(CRHDX,CRHDK) Q:CRHDCHAR=" "  S CRHDX=$E(CRHDX,1,CRHDK-1)
"RTN","CRHDAM",37,0)
 .S CRHDX=CRHDX_"..."
"RTN","CRHDAM",38,0)
 I $L(CRHDSTR)<CRHDLEN S CRHDX=$E(CRHDSTR,1,CRHDLEN)
"RTN","CRHDAM",39,0)
 Q CRHDX
"RTN","CRHDAM",40,0)
STRIP(CRHDSTR,CRHDSTRP) ;
"RTN","CRHDAM",41,0)
 F  Q:$E(CRHDSTR,1)'=CRHDSTRP  S CRHDSTR=$E(CRHDSTR,2,$L(CRHDSTR))
"RTN","CRHDAM",42,0)
 Q CRHDSTR
"RTN","CRHDAM",43,0)
OUTPT(CRHDY,CRHDDFN) ;get outpatient active meds
"RTN","CRHDAM",44,0)
 N CRHDLST,CRHDAMED,CRHDNUM,CRHDCT,CRHDFG,CRHDDRGN,CRHDSEC,CRHDNUM2,CRHDLSTR,CRHDPFN
"RTN","CRHDAM",45,0)
 K CRHDY,CRHDLST
"RTN","CRHDAM",46,0)
 D ACTIVE^ORWPS(.CRHDLST,CRHDDFN)
"RTN","CRHDAM",47,0)
 S CRHDLSTR=$O(CRHDLST(999),-1),CRHDFG=1
"RTN","CRHDAM",48,0)
 I '$D(CRHDLST) S CRHDY="" Q CRHDY
"RTN","CRHDAM",49,0)
 S CRHDNUM=0 F  S CRHDNUM=$O(CRHDLST(CRHDNUM)) Q:'CRHDNUM!('CRHDFG)  D
"RTN","CRHDAM",50,0)
 .Q:$P(CRHDLST(CRHDNUM),U,10)'="ACTIVE"
"RTN","CRHDAM",51,0)
 .I CRHDLST(CRHDNUM)'["~OP" Q
"RTN","CRHDAM",52,0)
 .S CRHDSEC=$E($P(CRHDLST(CRHDNUM),U,1),2,999)
"RTN","CRHDAM",53,0)
 .S CRHDDRGN=$P(CRHDLST(CRHDNUM),U,3)
"RTN","CRHDAM",54,0)
 .S CRHDPFN=+$P(CRHDLST(CRHDNUM),"^",2)
"RTN","CRHDAM",55,0)
 .S CRHDNUM2=CRHDNUM F  S CRHDNUM2=$O(CRHDLST(CRHDNUM2)) Q:$G(CRHDLST(+CRHDNUM2))["~"!('CRHDNUM2)  D
"RTN","CRHDAM",56,0)
 ..I $L($G(CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)))+$L(CRHDLST(CRHDNUM2))<80 S CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)=$G(CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN))_$$STRIP(CRHDLST(CRHDNUM2)," ")_" "
"RTN","CRHDAM",57,0)
 ..E  S CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)=$$STR(CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)_" "_CRHDLST(CRHDNUM2),80)
"RTN","CRHDAM",58,0)
 ..I CRHDNUM2=CRHDLSTR S CRHDFG=0
"RTN","CRHDAM",59,0)
 . S CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)=CRHDDFN_"^"_CRHDAMED(CRHDSEC,CRHDDRGN,CRHDPFN)_"^^^"_CRHDPFN_$S($P(CRHDLST(CRHDNUM),"^",2)["U":"|5",1:"|IV")
"RTN","CRHDAM",60,0)
 . S:CRHDFG CRHDNUM=CRHDNUM2-1
"RTN","CRHDAM",61,0)
 S CRHDCT=1
"RTN","CRHDAM",62,0)
 ;S CRHDY(2)="0^<==OUTPATIENT MEDS==>",CRHDCT=2
"RTN","CRHDAM",63,0)
 S CRHDSEC="OP"
"RTN","CRHDAM",64,0)
 S CRHDFG=0,CRHDDRG="" F  S CRHDDRG=$O(CRHDAMED(CRHDSEC,CRHDDRG)) Q:CRHDDRG=""  D
"RTN","CRHDAM",65,0)
 .  S CRHDNUM=0 F  S CRHDNUM=$O(CRHDAMED(CRHDSEC,CRHDDRG,CRHDNUM)) Q:'CRHDNUM  D
"RTN","CRHDAM",66,0)
 .. I 'CRHDFG S CRHDY(CRHDCT)="0^<==OUTPATIENT MEDS==>",CRHDFG=1,CRHDCT=CRHDCT+1
"RTN","CRHDAM",67,0)
 .. S CRHDY(CRHDCT)=CRHDAMED(CRHDSEC,CRHDDRG,CRHDNUM),CRHDCT=CRHDCT+1
"RTN","CRHDAM",68,0)
 S CRHDY(-9900)=CRHDCT-2,$P(CRHDY(1),"^",1)=CRHDCT-2
"RTN","CRHDAM",69,0)
 Q $O(CRHDY(1))
"RTN","CRHDDNR")
0^4^B16560217
"RTN","CRHDDNR",1,0)
CRHDDNR ; CAIRO/CLC - GET ACTIVE DNR ORDER ;4/23/08  07:48
"RTN","CRHDDNR",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDDNR",3,0)
 ;=================================================================
"RTN","CRHDDNR",4,0)
 ;
"RTN","CRHDDNR",5,0)
ENT(CRHDRTN,DFN,CRHDNRTT,CRHDDIV,CRHDMULT) ;
"RTN","CRHDDNR",6,0)
 K CRHDRTN
"RTN","CRHDDNR",7,0)
 N CRHDRN S CRHDRN=1
"RTN","CRHDDNR",8,0)
 S CRHDMULT=$G(CRHDMULT)
"RTN","CRHDDNR",9,0)
 D DNRPARM(.CRHDNRTT,DUZ,.CRHDDIV)
"RTN","CRHDDNR",10,0)
 I 'CRHDNRTT S CRHDNRTT(1)="^DNR ORDER"
"RTN","CRHDDNR",11,0)
 N CRHDFILE,CRHDSDAT,CRHDFND,CRHDTMP,CRHDEXDT,CRHDBY,CRHDDI
"RTN","CRHDDNR",12,0)
 N CRHDOI,CRHDEXN,X,Y,CRHDBDNR
"RTN","CRHDDNR",13,0)
 N CRHDDDNR,CRHDBI,CRHDFLG,CRHDZ,CRHDCNT,CRHDZCT,CRHDZZOR
"RTN","CRHDDNR",14,0)
 S (CRHDFLG,CRHDZCT)=0,CRHDCNT=1
"RTN","CRHDDNR",15,0)
 S CRHDFILE=$$TERMLKUP^ORB31(.CRHDBY,"DNR")
"RTN","CRHDDNR",16,0)
 S CRHDSDAT=$$NOW^XLFDT
"RTN","CRHDDNR",17,0)
 ;S CRHDEXDT=9999999.999999-CRHDSDAT
"RTN","CRHDDNR",18,0)
 S CRHDEXDT=0
"RTN","CRHDDNR",19,0)
 F  S CRHDEXDT=$O(^OR(100,"AC",DFN_";DPT(",CRHDEXDT)) Q:'CRHDEXDT!(CRHDFLG)  D
"RTN","CRHDDNR",20,0)
 .S CRHDEXN="" F  S CRHDEXN=$O(^OR(100,"AC",DFN_";DPT(",CRHDEXDT,CRHDEXN)) Q:CRHDEXN=""!(CRHDFLG)  D
"RTN","CRHDDNR",21,0)
 ..I $D(CRHDBY),(+$G(CRHDFILE)=101.43) D
"RTN","CRHDDNR",22,0)
 ...F CRHDBI=1:1:CRHDBY D
"RTN","CRHDDNR",23,0)
 ....S CRHDBDNR=$P(CRHDBY(CRHDBI),U)
"RTN","CRHDDNR",24,0)
 ....S CRHDOI=$$OI^ORQOR2(CRHDEXN)
"RTN","CRHDDNR",25,0)
 ....I CRHDBDNR=CRHDOI D
"RTN","CRHDDNR",26,0)
 .....D DETAIL("CRHDRTN",CRHDEXN,.CRHDFLG,.CRHDCNT,CRHDMULT)            ;,WRT("STMP")
"RTN","CRHDDNR",27,0)
 ..;I '$$OI^ORQOR2(CRHDEXN)&('CRHDFLG) D
"RTN","CRHDDNR",28,0)
 ..I 'CRHDFLG D
"RTN","CRHDDNR",29,0)
 ...D DETAIL("CRHDRTN",CRHDEXN,.CRHDFLG,.CRHDCNT,CRHDMULT)    ;,WRT("TMP")
"RTN","CRHDDNR",30,0)
 I '$D(CRHDRTN) S CRHDRTN(1)=""
"RTN","CRHDDNR",31,0)
 E  S CRHDRTN(1)=$G(CRHDCNT)
"RTN","CRHDDNR",32,0)
 Q
"RTN","CRHDDNR",33,0)
DETAIL(CRHDY,CRHDIFN,CRHDFND,CRHDCNT,CRHDMDNR) ; -- Returns details of order CRHDIFN in CRHDY(#)
"RTN","CRHDDNR",34,0)
 N CRHDMCNT,X,X2,I,CRHDILOG,CRHD0,CRHD3,CRHD6,CRHDSEQ,CRHDITEM,CRHDPRMT,CRHDMULT,CRHDFIRT,CRHDTITL,CRHDINST
"RTN","CRHDDNR",35,0)
 N DIWL,DIWR,DIWF,CRHDACTI,CRHDII,VAIN,ORIGVIEW,CRHDNMSP,CRHDYT,CRHDDNR,CRHDXX,CRHDNX,CRHDGOTI,ORFLG
"RTN","CRHDDNR",36,0)
 S CRHDIFN=+CRHDIFN,CRHD0=$G(^OR(100,CRHDIFN,0)),CRHD3=$G(^(3)),CRHD6=$G(^(6))
"RTN","CRHDDNR",37,0)
 K CRHDYT S ORIGVIEW=1 D TEXT^CRHD8(.CRHDYT,+CRHDIFN_";"_+$P(CRHD3,U,7),254) ;CurrTx
"RTN","CRHDDNR",38,0)
 I $D(CRHDYT) D
"RTN","CRHDDNR",39,0)
 .Q:$D(CRHDZZOR(CRHDIFN))
"RTN","CRHDDNR",40,0)
 .S CRHDDNR=0,CRHDDNR=$O(CRHDYT(CRHDDNR))
"RTN","CRHDDNR",41,0)
 .S CRHDGOTI=0
"RTN","CRHDDNR",42,0)
 .S CRHDXX="" F  S CRHDXX=$O(CRHDNRTT(CRHDXX)) Q:CRHDXX=""!(CRHDGOTI)!(CRHDFND)  D    ;S NX=0 F  S NX=$O(CRHDNRTT(XX,NX)) Q:'NX!(CRHDFND)  D
"RTN","CRHDDNR",43,0)
 ..I ($G(CRHDYT(CRHDDNR))'[$P(CRHDNRTT(CRHDXX),"^",2))&($P(CRHDNRTT(CRHDXX),"^",2)'[CRHDYT(CRHDDNR)) Q
"RTN","CRHDDNR",44,0)
 ..S CRHDZCT=$G(CRHDZCT)+1,CRHDGOTI=1
"RTN","CRHDDNR",45,0)
 ..I 'CRHDMDNR S CRHDFND=1
"RTN","CRHDDNR",46,0)
 ..I CRHDCNT>1 S CRHDCNT=CRHDCNT+1,@CRHDY@(CRHDCNT)=""
"RTN","CRHDDNR",47,0)
 ..S CRHDMCNT=0 F CRHDII=1:1 S CRHDMCNT=$O(CRHDYT(CRHDMCNT)) Q:'CRHDMCNT  S CRHDCNT=CRHDCNT+1 D
"RTN","CRHDDNR",48,0)
 ...I CRHDII=1 S @CRHDY@(CRHDCNT)=CRHDEXDT_"~"_CRHDIFN_"~"_CRHDYT(CRHDMCNT)
"RTN","CRHDDNR",49,0)
 ...E  S @CRHDY@(CRHDCNT)=CRHDYT(CRHDMCNT)
"RTN","CRHDDNR",50,0)
 ..S CRHDCNT=$G(CRHDCNT)+1
"RTN","CRHDDNR",51,0)
 ..S @CRHDY@(CRHDCNT)="Start Date/Time: "_$S($P(CRHD0,U,8):$$DATE^ORQ20($P(CRHD0,U,8)),1:"")
"RTN","CRHDDNR",52,0)
 ..I $P(CRHD3,U,5),$P(CRHD3,U,11)=2 S X=$$ORIG(CRHDIFN),@CRHDY@(CRHDCNT)=@CRHDY@(CRHDCNT)_" (originally "_$$DATE^ORQ20(X)_")"
"RTN","CRHDDNR",53,0)
 ..S CRHDCNT=CRHDCNT+1
"RTN","CRHDDNR",54,0)
 ..S:+$P(CRHD0,U,9) @CRHDY@(CRHDCNT)="Stop Date/Time: "_$S($P(CRHD0,U,9):$$DATE^ORQ20($P(CRHD0,U,9)),1:"")
"RTN","CRHDDNR",55,0)
 ..S CRHDZZOR(CRHDIFN)=""
"RTN","CRHDDNR",56,0)
 Q
"RTN","CRHDDNR",57,0)
WRT(CRHDC,CRHDARRY,CRHDTRG) ;
"RTN","CRHDDNR",58,0)
 Q:'$D(CRHDARRY)
"RTN","CRHDDNR",59,0)
 N CRHDN
"RTN","CRHDDNR",60,0)
 S CRHDN=0 F  S CRHDN=$O(CRHDARRY(CRHDN)) Q:'CRHDN  S CRHDC=$G(CRHDC)+1,@CRHDTRG@(CRHDC,0)=CRHDARRY(CRHDN)
"RTN","CRHDDNR",61,0)
 Q
"RTN","CRHDDNR",62,0)
ORIG(CRHDIFN) ; -- Return original start date of [renewal] order
"RTN","CRHDDNR",63,0)
 N CRHDI,CRHDY,CRHDX3,CRHDDONE
"RTN","CRHDDNR",64,0)
 S CRHDI=CRHDIFN,CRHDY=$P($G(^OR(100,CRHDIFN,0)),U,8),CRHDDONE=0
"RTN","CRHDDNR",65,0)
 F  S CRHDX3=$G(^OR(100,CRHDI,3)) D  Q:CRHDDONE
"RTN","CRHDDNR",66,0)
 . I $P(CRHDX3,U,11)=2,$P(CRHDX3,U,5) S CRHDI=$P(CRHDX3,U,5) Q  ;loop
"RTN","CRHDDNR",67,0)
 . S CRHDY=$P($G(^OR(100,CRHDI,0)),U,8),CRHDDONE=1
"RTN","CRHDDNR",68,0)
 Q CRHDY
"RTN","CRHDDNR",69,0)
DNRPARM(CRHDNRTT,DUZ,CRHDDIV) ;GET DNR TITLES
"RTN","CRHDDNR",70,0)
 N CRHDPAR,CRHDDIVI
"RTN","CRHDDNR",71,0)
 S CRHDNRTT=0
"RTN","CRHDDNR",72,0)
 I '+$G(CRHDDIV) S CRHDDIV=+$$SITE^VASITE
"RTN","CRHDDNR",73,0)
 I 'CRHDNRTT S CRHDPAR="DIV.`"_+CRHDDIV  D GETLST^XPAR(.CRHDNRTT,CRHDPAR,"CRHD DNR ORDER TITLE")
"RTN","CRHDDNR",74,0)
 I 'CRHDNRTT D
"RTN","CRHDDNR",75,0)
 .S CRHDDIVI=$O(^DIC(4,"D",CRHDDIV,0))
"RTN","CRHDDNR",76,0)
 .I CRHDDIVI S CRHDPAR="DIV.`"_CRHDDIVI D GETLST^XPAR(.CRHDNRTT,CRHDPAR,"CRHD DNR ORDER TITLE")
"RTN","CRHDDNR",77,0)
 Q
"RTN","CRHDDR")
0^5^B9947157
"RTN","CRHDDR",1,0)
CRHDDR ; CAIRO/CLC - RETRIEVE DNR ORDERS USING ORDER DIALOG ;4/23/08  13:06
"RTN","CRHDDR",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDDR",3,0)
 ;=================================================================
"RTN","CRHDDR",4,0)
ENT(CRHDRTN,DFN,CRHDNRTT,CRHDDIV,CRHDMULT) ;
"RTN","CRHDDR",5,0)
 N CRHDSDAT,CRHDFND,CRHDRN,CRHDEXDT,CRHDEXN,X,Y
"RTN","CRHDDR",6,0)
 N CRHDSTS,CRHDDL,CRHDCT,CRHDFLG,CRHDIEN1,CRHDOI
"RTN","CRHDDR",7,0)
 K CRHDRTN
"RTN","CRHDDR",8,0)
 ;CRHDMULT = 1,if multi active orders displayed
"RTN","CRHDDR",9,0)
 S CRHDMULT=+$G(CRHDMULT)
"RTN","CRHDDR",10,0)
 I '$G(CRHDRN) S CRHDRN=1
"RTN","CRHDDR",11,0)
 D DNRPARM(.CRHDNRTT,DUZ,.CRHDDIV)
"RTN","CRHDDR",12,0)
 S CRHDFLG=0
"RTN","CRHDDR",13,0)
 S CRHDSDAT=$$NOW^XLFDT
"RTN","CRHDDR",14,0)
 S CRHDEXDT=0,CRHDCT=0
"RTN","CRHDDR",15,0)
 F  S CRHDEXDT=$O(^OR(100,"AC",DFN_";DPT(",CRHDEXDT)) Q:'CRHDEXDT!(CRHDFLG)  D
"RTN","CRHDDR",16,0)
 .S CRHDEXN="" F  S CRHDEXN=$O(^OR(100,"AC",DFN_";DPT(",CRHDEXDT,CRHDEXN)) Q:CRHDEXN=""!(CRHDFLG)  D
"RTN","CRHDDR",17,0)
 ..S CRHDOI=0
"RTN","CRHDDR",18,0)
 ..F  S CRHDOI=$O(^OR(100,CRHDEXN,.1,"B",CRHDOI)) Q:'CRHDOI!(CRHDFLG)  D
"RTN","CRHDDR",19,0)
 ...I $D(CRHDNRTT(+CRHDOI)) D DETAIL("CRHDRTN",CRHDEXN,.CRHDFLG,.CRHDCT,.CRHDMULT)
"RTN","CRHDDR",20,0)
 Q
"RTN","CRHDDR",21,0)
 ;
"RTN","CRHDDR",22,0)
DETAIL(CRHDY,CRHDIFN,CRHDFND,CRHDCNT,CRHDMDNR) ; -- Returns details of order CRHDIFN in CRHDY(#)
"RTN","CRHDDR",23,0)
 N CRHDMCNT,X,CRHDX2,CRHDI,CRHDILOG,CRHD0,CRHD3,CRHD6,CRHDSEQ,CRHDITEM,CRHDPRMT
"RTN","CRHDDR",24,0)
 N CRHDFIRT,CRHDTITL,CRHDINST,CRHDN,ORIGVIEW,ORFLG,CRHDII
"RTN","CRHDDR",25,0)
 N DIWL,DIWR,DIWF,CRHDACTI,VAIN,CRHDOVW,ORNMSP,CRHDYT,CRHDDNR,CRHDXX,CRHDNX
"RTN","CRHDDR",26,0)
 S CRHDIFN=+CRHDIFN,CRHD0=$G(^OR(100,CRHDIFN,0)),CRHD3=$G(^(3)),CRHD6=$G(^(6))
"RTN","CRHDDR",27,0)
 Q:$P(CRHD3,"^",3)'=6
"RTN","CRHDDR",28,0)
 K CRHDYT S CRHDOVW=1 D TEXT^CRHD8(.CRHDYT,+CRHDIFN_";"_+$P(CRHD3,U,7),254)
"RTN","CRHDDR",29,0)
 ;CurrTx
"RTN","CRHDDR",30,0)
 I $D(CRHDYT) D
"RTN","CRHDDR",31,0)
 .I 'CRHDMDNR S CRHDFND=1
"RTN","CRHDDR",32,0)
 .S CRHDN=0
"RTN","CRHDDR",33,0)
 .;USE CRHDEXDT IN THE DATA NODE TO
"RTN","CRHDDR",34,0)
 .I $D(@CRHDY) S CRHDCNT=CRHDCNT+1,@CRHDY@(CRHDCNT)=""
"RTN","CRHDDR",35,0)
 .F CRHDII=1:1 S CRHDN=$O(CRHDYT(CRHDN)) Q:'CRHDN  D
"RTN","CRHDDR",36,0)
 ..S CRHDCNT=CRHDCNT+1
"RTN","CRHDDR",37,0)
 ..I CRHDII=1 S @CRHDY@(CRHDCNT)=CRHDEXDT_"~"_CRHDIFN_"~"_CRHDYT(CRHDN)
"RTN","CRHDDR",38,0)
 ..E  S @CRHDY@(CRHDCNT)=CRHDYT(CRHDN)
"RTN","CRHDDR",39,0)
 Q
"RTN","CRHDDR",40,0)
DNRPARM(CRHDNRTT,DUZ,CRHDDIV) ;GET DNR TITLES
"RTN","CRHDDR",41,0)
 N CRHDPAR,CRHDDIVI,CRHDDNRT
"RTN","CRHDDR",42,0)
 K CRHDNRTT
"RTN","CRHDDR",43,0)
 S CRHDDNRT=0
"RTN","CRHDDR",44,0)
 I '+$G(CRHDDIV) S CRHDDIV=+$$SITE^VASITE
"RTN","CRHDDR",45,0)
 S CRHDPAR="DIV.`"_+CRHDDIV D GETLST^XPAR(.CRHDDNRT,CRHDPAR,"CRHD DNR ORDERABLE ITEMS")
"RTN","CRHDDR",46,0)
 I 'CRHDDNRT D
"RTN","CRHDDR",47,0)
 .S CRHDDIVI=$O(^DIC(4,"D",CRHDDIV,0))
"RTN","CRHDDR",48,0)
 .I CRHDDIVI S CRHDPAR="DIV.`"_CRHDDIVI D GETLST^XPAR(.CRHDDNRT,CRHDPAR,"CRHD DNR ORDERABLE ITEMS")
"RTN","CRHDDR",49,0)
 I CRHDDNRT D
"RTN","CRHDDR",50,0)
 .S CRHDN=0 F  S CRHDN=$O(CRHDDNRT(CRHDN)) Q:'CRHDN  D
"RTN","CRHDDR",51,0)
 ..S:$P($G(CRHDDNRT(CRHDN)),"^",2)'="" CRHDNRTT($P(CRHDDNRT(CRHDN),"^",2))=""
"RTN","CRHDDR",52,0)
 Q
"RTN","CRHDDR",53,0)
LORDITM(CRHDY,CRHDFROM,CRHDDIR) ; Return a set of names from the ORDERABLE ITEMS file.
"RTN","CRHDDR",54,0)
 ; copied from ORWU1
"RTN","CRHDDR",55,0)
 ;  .CRHDY=returned list.
"RTN","CRHDDR",56,0)
 ;  CRHDDIR=Direction to move through the x-ref with $O.
"RTN","CRHDDR",57,0)
 ;  CRHDFROM=Starting name for this set.
"RTN","CRHDDR",58,0)
 K CRHDRTN
"RTN","CRHDDR",59,0)
 N CRHDNAME,CRHDNUMB,CRHDIEN1,CRHDMAX
"RTN","CRHDDR",60,0)
 S CRHDI=0,CRHDMAX=44
"RTN","CRHDDR",61,0)
 F  Q:CRHDI'<CRHDMAX  S CRHDFROM=$O(^ORD(101.43,"B",CRHDFROM),CRHDDIR) Q:CRHDFROM=""  D
"RTN","CRHDDR",62,0)
 .S CRHDIEN1=""
"RTN","CRHDDR",63,0)
 .F  S CRHDIEN1=$O(^ORD(101.43,"B",CRHDFROM,CRHDIEN1),CRHDDIR) Q:'CRHDIEN1  D
"RTN","CRHDDR",64,0)
 ..I $D(^ORD(101.43,CRHDIEN1,.1)),+$G(^ORD(101.43,CRHDIEN1,.1)) I +^ORD(101.43,CRHDIEN1,.1)<$$DT^XLFDT Q
"RTN","CRHDDR",65,0)
 ..S CRHDI=CRHDI+1,CRHDY(CRHDI)=CRHDIEN1_"^"_CRHDFROM
"RTN","CRHDDR",66,0)
 Q
"RTN","CRHDI01")
0^^B3992065
"RTN","CRHDI01",1,0)
CRHDI01 ; CAIRO/CLC - POST INIT - routine to move data from old namespace 'AJR' to new namespace 'CRHD' ;04-Mar-2008 16:00;CLC
"RTN","CRHDI01",2,0)
 ;;1.0;;;30-Jan-2008 13:44;Build 19
"RTN","CRHDI01",3,0)
 ;=================================================================
"RTN","CRHDI01",4,0)
 ;This will affect files
"RTN","CRHDI01",5,0)
 ;^AJRCHGOV(                                  |  ^CRHD(
"RTN","CRHDI01",6,0)
 ;5830006404 = AJRCHGOV TEMP FIELDS           | 183.2 = CRHD TEMPORARY DATA
"RTN","CRHDI01",7,0)
 ;5830006405 = AJRCHGOV PARAMETERS            | 183   = CRHD HANDOFF PARAMETERS
"RTN","CRHDI01",8,0)
 ;5830006406 = AJRCHGOV TEAM PROVIDERS        | 183.4 = CRHD TEAM CONTACT LIST
"RTN","CRHDI01",9,0)
 ;5830006408 = AJRCHGOV HAND-OFF PATIENT LIST | 183.3 = CRHD HOT TEAM PATIENT LIST
"RTN","CRHDI01",10,0)
ENT ;
"RTN","CRHDI01",11,0)
 N CRHDI
"RTN","CRHDI01",12,0)
 F CRHDI="^AJRCHGOV(5830006404)-^CRHD(183.2)","^AJRCHGOV(5830006405)-^CRHD(183)","^AJRCHGOV(5830006406)-^CRHD(183.4)","^AJRCHGOV(5830006408)-^CRHD(183.3)" D ENT2($P(CRHDI,"-",1),$P(CRHDI,"-",2))
"RTN","CRHDI01",13,0)
 Q
"RTN","CRHDI01",14,0)
ENT2(CRHDS,CRHDD) ;
"RTN","CRHDI01",15,0)
 ;CRHDSRC : Source file number
"RTN","CRHDI01",16,0)
 ;CRHDEST : Destination file number
"RTN","CRHDI01",17,0)
 N CRHDSRC,CRHDEST,CRHD0,CRHDNXN,CRHDX
"RTN","CRHDI01",18,0)
 N CRHDFLN,CRHDFLL,CRHDL,CRHDS0
"RTN","CRHDI01",19,0)
 S CRHDSRC=+$P(CRHDS,"(",2)
"RTN","CRHDI01",20,0)
 S CRHDEST=+$P(CRHDD,"(",2)
"RTN","CRHDI01",21,0)
 I $D(@CRHDS)  D
"RTN","CRHDI01",22,0)
 .;if destination file - no data exist
"RTN","CRHDI01",23,0)
 .I $D(@CRHDD) D
"RTN","CRHDI01",24,0)
 ..D DD(.CRHDL,CRHDEST)
"RTN","CRHDI01",25,0)
 ..I +$P(@CRHDD@(0),"^",4)=0 D
"RTN","CRHDI01",26,0)
 ...S CRHD0=@CRHDD@(0)
"RTN","CRHDI01",27,0)
 ...M @CRHDD=@CRHDS
"RTN","CRHDI01",28,0)
 ...S $P(@CRHDD@(0),"^",1)=$P(CRHD0,"^",1)
"RTN","CRHDI01",29,0)
 ...S $P(@CRHDD@(0),"^",2)=$P(CRHD0,"^",2)
"RTN","CRHDI01",30,0)
 ...S CRHDS0=0
"RTN","CRHDI01",31,0)
 ...F  S CRHDS0=$O(@CRHDD@(CRHDS0)) Q:'CRHDS0  D
"RTN","CRHDI01",32,0)
 ....S CRHDFLL=0
"RTN","CRHDI01",33,0)
 ....F  S CRHDFLL=$O(@CRHDD@(CRHDS0,CRHDFLL)) Q:'CRHDFLL  D
"RTN","CRHDI01",34,0)
 .....I $D(CRHDL(CRHDFLL)) S CRHDFLN=CRHDL(CRHDFLL),$P(@CRHDD@(CRHDS0,CRHDFLL,0),"^",2)=CRHDFLN
"RTN","CRHDI01",35,0)
 Q
"RTN","CRHDI01",36,0)
DD(CRHDRTN,CRHDDF) ;
"RTN","CRHDI01",37,0)
 N CRHDFLN,CRHDFLL
"RTN","CRHDI01",38,0)
 K CRHDRTN
"RTN","CRHDI01",39,0)
 S CRHDFLN=0
"RTN","CRHDI01",40,0)
 F  S CRHDFLN=$O(^DD(CRHDDF,"SB",CRHDFLN)) Q:'CRHDFLN  D
"RTN","CRHDI01",41,0)
 .S CRHDFLL=0
"RTN","CRHDI01",42,0)
 .F  S CRHDFLL=$O(^DD(CRHDEST,"SB",CRHDFLN,CRHDFLL)) Q:'CRHDFLL  D
"RTN","CRHDI01",43,0)
 ..S CRHDRTN(CRHDFLL)=CRHDFLN
"RTN","CRHDI01",44,0)
 Q
"RTN","CRHDPL")
0^6^B15561818
"RTN","CRHDPL",1,0)
CRHDPL ; CAIRO/MGH - Find personal lists for changeover list ;04-Mar-2008 16:00;CLC
"RTN","CRHDPL",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDPL",3,0)
 ;=================================================================
"RTN","CRHDPL",4,0)
DEFPAT(CRHDPATL,DUZ) ;Find the personal list for this person
"RTN","CRHDPL",5,0)
 N VAIN,CRHDLIST,CRHDCT,CRHDPLST,CRHDL,CRHDORX,CRHDDFN,CRHDNAME,CRHDSSN
"RTN","CRHDPL",6,0)
 N CRHDDOB,CRHDAGE,CRHDSEX,CRHDDSRC,CRHDJ,CRHDN,CRHDTLST
"RTN","CRHDPL",7,0)
 S CRHDCT=0
"RTN","CRHDPL",8,0)
 ;get default patient list
"RTN","CRHDPL",9,0)
 D DEFSRC^ORQPTQ11(.CRHDDSRC)
"RTN","CRHDPL",10,0)
 D DEFLIST^ORQPTQ11(.CRHDLST)
"RTN","CRHDPL",11,0)
 I $G(CRHDDSRC)["^Combination" D
"RTN","CRHDPL",12,0)
 .K CRHDLST
"RTN","CRHDPL",13,0)
 .I $D(^TMP("OR",$J,"PATIENTS")) D
"RTN","CRHDPL",14,0)
 ..S CRHDN=0
"RTN","CRHDPL",15,0)
 ..F  S CRHDN=$O(^TMP("OR",$J,"PATIENTS",CRHDN)) Q:'CRHDN  S CRHDLST(CRHDN)=^TMP("OR",$J,"PATIENTS",CRHDN,0)
"RTN","CRHDPL",16,0)
 I $D(CRHDLST) D  Q
"RTN","CRHDPL",17,0)
 .S CRHDJ=0
"RTN","CRHDPL",18,0)
 .F  S CRHDJ=$O(CRHDLST(CRHDJ)) Q:'CRHDJ  D
"RTN","CRHDPL",19,0)
 ..S CRHDDFN=+CRHDLST(CRHDJ)
"RTN","CRHDPL",20,0)
 ..Q:'CRHDDFN
"RTN","CRHDPL",21,0)
 ..D PATDATA(CRHDDFN,.CRHDCT)
"RTN","CRHDPL",22,0)
 .D ALPHA(.CRHDPATA,.CRHDPATL,.CRHDCT)
"RTN","CRHDPL",23,0)
 .I $G(CRHDTLST)="" D DEFSRC^ORQPTQ11(.CRHDTLST)
"RTN","CRHDPL",24,0)
 Q
"RTN","CRHDPL",25,0)
PERSLST(CRHDPATL,DUZ) ;
"RTN","CRHDPL",26,0)
 ;If no patient list, get personal list
"RTN","CRHDPL",27,0)
 D PERSPR^ORQPTQ1(.CRHDLST)
"RTN","CRHDPL",28,0)
 I $P($G(CRHDLST(1)),U,1) D
"RTN","CRHDPL",29,0)
 .S CRHDL=0 F  S CRHDL=$O(CRHDLST(CRHDL)) Q:CRHDL=""  D
"RTN","CRHDPL",30,0)
 ..S CRHDLIST=$P(CRHDLST(CRHDL),U,1)
"RTN","CRHDPL",31,0)
 ..D GETPTS
"RTN","CRHDPL",32,0)
 ;If no personal list, look for a default team list
"RTN","CRHDPL",33,0)
 E  D
"RTN","CRHDPL",34,0)
 .K CRHDLST
"RTN","CRHDPL",35,0)
 .D DEFTM^ORQPTQ1(.CRHDLST)
"RTN","CRHDPL",36,0)
 .I '$P($G(CRHDLST),U,1) S CRHDPATL(1)=CRHDLST Q
"RTN","CRHDPL",37,0)
 .S CRHDLIST=$P(CRHDLST,U,1)
"RTN","CRHDPL",38,0)
 .D GETPTS
"RTN","CRHDPL",39,0)
 Q
"RTN","CRHDPL",40,0)
GETPTS ;subroutine to return patients on a list
"RTN","CRHDPL",41,0)
 N J,VADM,VAIP
"RTN","CRHDPL",42,0)
 S J=0
"RTN","CRHDPL",43,0)
 F  S J=$O(^OR(100.21,+CRHDLIST,10,J)) Q:J<1  D
"RTN","CRHDPL",44,0)
 .S CRHDORX=^(J,0),CRHDDFN=$P(CRHDORX,";")
"RTN","CRHDPL",45,0)
 .D PATDATA(CRHDDFN,.CRHDCT)
"RTN","CRHDPL",46,0)
 D ALPHA(.CRHDPATA,.CRHDPATL,.CRHDCT)
"RTN","CRHDPL",47,0)
 Q
"RTN","CRHDPL",48,0)
ALPHA(CRHDPATA,CRHDPATL,CRHDCT) ;
"RTN","CRHDPL",49,0)
 N TXX
"RTN","CRHDPL",50,0)
 S TXX=""
"RTN","CRHDPL",51,0)
 F  S TXX=$O(CRHDPATA(TXX)) Q:TXX=""  S CRHDCT=CRHDCT+1,CRHDPATL(CRHDCT)=CRHDPATA(TXX)
"RTN","CRHDPL",52,0)
 K CRHDPATA
"RTN","CRHDPL",53,0)
 Q
"RTN","CRHDPL",54,0)
PATDATA(CRHDDFN,CRHDCT) ;
"RTN","CRHDPL",55,0)
 ;
"RTN","CRHDPL",56,0)
 K VAIP,VADM,DFN
"RTN","CRHDPL",57,0)
 S DFN=CRHDDFN
"RTN","CRHDPL",58,0)
 D DEM^VADPT,IN5^VADPT
"RTN","CRHDPL",59,0)
 ;Outpatients not valid for changeover list
"RTN","CRHDPL",60,0)
 ;Q:VAIP(1)=""
"RTN","CRHDPL",61,0)
 S CRHDNAME=VADM(1),CRHDSSN=$P(VADM(2),U,1),CRHDDOB=$P(VADM(3),U,1)
"RTN","CRHDPL",62,0)
 S CRHDAGE=VADM(4),CRHDSEX=$P(VADM(5),U,1)
"RTN","CRHDPL",63,0)
 ;S CRHDCT=CRHDCT+1
"RTN","CRHDPL",64,0)
 ;S CRHDPATL(CRHDCT)=CRHDDFN_U_CRHDNAME_U_CRHDSSN_U_CRHDDOB_U_CRHDAGE_U_CRHDSEX
"RTN","CRHDPL",65,0)
 S CRHDPATA(CRHDNAME)=CRHDDFN_U_CRHDNAME_U_CRHDSSN_U_CRHDDOB_U_CRHDAGE_U_CRHDSEX
"RTN","CRHDPL",66,0)
 Q
"RTN","CRHDPL",67,0)
SPECPTS(CRHDPATL,SPL) ;
"RTN","CRHDPL",68,0)
 N VAIN,CRHDLIST,CRHDCT,CRHDLST,CRHDL,CRHDORX,CRHDDFN,CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE
"RTN","CRHDPL",69,0)
 S CRHDCT=0
"RTN","CRHDPL",70,0)
 D SPECPTS^ORQPTQ2(.CRHDLST,.SPL)
"RTN","CRHDPL",71,0)
 I $P($G(CRHDLST(1)),U,1) D
"RTN","CRHDPL",72,0)
 .S CRHDL=0 F  S CRHDL=$O(CRHDLST(CRHDL)) Q:CRHDL=""  D
"RTN","CRHDPL",73,0)
 ..S CRHDLIST=$P(CRHDLST(CRHDL),U,1)
"RTN","CRHDPL",74,0)
 ..D PATDATA(CRHDLIST,.CRHDCT)
"RTN","CRHDPL",75,0)
 .D ALPHA(.CRHDPATA,.CRHDPATL,.CRHDCT)
"RTN","CRHDPL",76,0)
 Q
"RTN","CRHDPL",77,0)
TEAM(CRHDPATL,TEAM,FLAG) ;
"RTN","CRHDPL",78,0)
 N VAIN,CRHDLIST,CRHDCT,CRHDLST,CRHDL,CRHDORX,CRHDDFN,CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE
"RTN","CRHDPL",79,0)
 S CRHDCT=0
"RTN","CRHDPL",80,0)
 D TEAMPTS^ORQPTQ1(.CRHDLST,.TEAM,.FLAG)
"RTN","CRHDPL",81,0)
 I $P($G(CRHDLST(1)),U,1) D
"RTN","CRHDPL",82,0)
 .S CRHDL=0 F  S CRHDL=$O(CRHDLST(CRHDL)) Q:CRHDL=""  D
"RTN","CRHDPL",83,0)
 ..S CRHDLIST=$P(CRHDLST(CRHDL),U,1)
"RTN","CRHDPL",84,0)
 ..D PATDATA(CRHDLIST,.CRHDCT)
"RTN","CRHDPL",85,0)
 .D ALPHA(.CRHDPATA,.CRHDPATL,.CRHDCT)
"RTN","CRHDPL",86,0)
 Q
"RTN","CRHDPL",87,0)
PROV(CRHDPATL,PROV) ;
"RTN","CRHDPL",88,0)
 N VAIN,CRHDLIST,CRHDCT,CRHDLST,CRHDL,CRHDORX,CRHDDFN,CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE
"RTN","CRHDPL",89,0)
 S CRHDCT=0
"RTN","CRHDPL",90,0)
 D PROVPTS^ORQPTQ2(.CRHDLST,.PROV)
"RTN","CRHDPL",91,0)
 I $P($G(CRHDLST(1)),U,1) D
"RTN","CRHDPL",92,0)
 .S CRHDL=0 F  S CRHDL=$O(CRHDLST(CRHDL)) Q:CRHDL=""  D
"RTN","CRHDPL",93,0)
 ..S CRHDLIST=$P(CRHDLST(CRHDL),U,1)
"RTN","CRHDPL",94,0)
 ..D PATDATA(CRHDLIST,.CRHDCT)
"RTN","CRHDPL",95,0)
 .D ALPHA(.CRHDPATA,.CRHDPATL,.CRHDCT)
"RTN","CRHDPL",96,0)
 Q
"RTN","CRHDPL",97,0)
WARD(CRHDPATL,WARD) ;
"RTN","CRHDPL",98,0)
 N VAIN,CRHDLIST,CRHDCT,CRHDLST,CRHDL,CRHDORX,CRHDDFN,CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE
"RTN","CRHDPL",99,0)
 S CRHDCT=0
"RTN","CRHDPL",100,0)
 D BYWARD^ORWPT(.CRHDLST,.WARD)
"RTN","CRHDPL",101,0)
 I $P($G(CRHDLST(1)),U,1) D
"RTN","CRHDPL",102,0)
 .S CRHDL=0 F  S CRHDL=$O(CRHDLST(CRHDL)) Q:CRHDL=""  D
"RTN","CRHDPL",103,0)
 ..S CRHDLIST=$P(CRHDLST(CRHDL),U,1)
"RTN","CRHDPL",104,0)
 ..D PATDATA(CRHDLIST,.CRHDCT)
"RTN","CRHDPL",105,0)
 .D ALPHA(.CRHDPATA,.CRHDPATL,.CRHDCT)
"RTN","CRHDPL",106,0)
 Q
"RTN","CRHDUD")
0^7^B13222509
"RTN","CRHDUD",1,0)
CRHDUD ;CAIRO/CLC - New Person general information ;04-Mar-2008 16:00;CLC;EMPLOYEE DIRECTORY
"RTN","CRHDUD",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDUD",3,0)
DISPEMP(CRHDRTN,CRHDEMP) ;
"RTN","CRHDUD",4,0)
 K CRHDRTN
"RTN","CRHDUD",5,0)
 N CRHDUIF
"RTN","CRHDUD",6,0)
 D DISP(.CRHDUIF,+CRHDEMP)
"RTN","CRHDUD",7,0)
 I $D(CRHDUIF) S CRHDRTN(1)=CRHDUIF
"RTN","CRHDUD",8,0)
 Q
"RTN","CRHDUD",9,0)
DISP(CRHDRTN,CRHDEMP) ;
"RTN","CRHDUD",10,0)
 ;COLUMNS
"RTN","CRHDUD",11,0)
 ;DUZ^NAME^SITE^TITLE^OFFICE PH^PAGER^RM^EMAIL^SRV^MAIL CODE
"RTN","CRHDUD",12,0)
 N CRHDEXT,CRHDSF,CRHDPG,CRHDRM,CRHDNAM,CRHDTIT,CRHDSRV,CRHDSMC,CRHDSRM,CRHDFAX,CRHDEM
"RTN","CRHDUD",13,0)
 N CRHDSRVN,CRHDMC
"RTN","CRHDUD",14,0)
 ;
"RTN","CRHDUD",15,0)
 K CRHDRTN
"RTN","CRHDUD",16,0)
 I $$GET1^DIQ(200,+CRHDEMP,.01,"I")="" Q
"RTN","CRHDUD",17,0)
 S CRHDNAM=$$GET1^DIQ(200,+CRHDEMP_",",.01,"E")
"RTN","CRHDUD",18,0)
 I $L(CRHDNAM)<2 Q
"RTN","CRHDUD",19,0)
 I '$$ACTIVE^XUSER(+CRHDEMP) S CRHDNAM=CRHDNAM_" (NOT AN ACTIVE USER)"
"RTN","CRHDUD",20,0)
 S CRHDTIT=$$GET1^DIQ(200,+CRHDEMP_",",8,"E")
"RTN","CRHDUD",21,0)
 S CRHDMC=$$GET1^DIQ(200,+CRHDEMP_",",28,"E")               ;MAIL CODE
"RTN","CRHDUD",22,0)
 S CRHDEXT=$$GET1^DIQ(200,+CRHDEMP_",",.132,"E")            ;OFFICE PHONE
"RTN","CRHDUD",23,0)
 S CRHDPG=$$GET1^DIQ(200,+CRHDEMP_",",.138,"E")             ;PAGER
"RTN","CRHDUD",24,0)
 S CRHDEM=$$GET1^DIQ(200,+CRHDEMP_",",.151,"E")             ;EMAIL ADDRESS
"RTN","CRHDUD",25,0)
 S CRHDRM=$$GET1^DIQ(200,+CRHDEMP_",",.141,"E")             ;ROOM
"RTN","CRHDUD",26,0)
 S CRHDFAX=$$GET1^DIQ(200,+CRHDEMP_",",.136,"E")            ;FAX
"RTN","CRHDUD",27,0)
 S CRHDSRV=$$GET1^DIQ(200,+CRHDEMP_",",29,"E")              ;SERVICE
"RTN","CRHDUD",28,0)
 S CRHDSRVN=$$GET1^DIQ(200,+CRHDEMP_",",29,"I")             ;SERVICE IEN
"RTN","CRHDUD",29,0)
 ;SERVICE INFORMATION
"RTN","CRHDUD",30,0)
 S CRHDSMC=$$GET1^DIQ(49,+CRHDSRVN_",",1.5,"E")             ;SERVICE MAIL CODE
"RTN","CRHDUD",31,0)
 S CRHDSRM=$$GET1^DIQ(200,+CRHDSRVN_",",6,"E")              ;SERVICE LOCATION
"RTN","CRHDUD",32,0)
 ;DISPLAY INFORMATION
"RTN","CRHDUD",33,0)
 S CRHDRTN=+CRHDEMP_"^"_CRHDNAM
"RTN","CRHDUD",34,0)
 S $P(CRHDRTN,"^",3)=$$TITLE^XLFSTR(CRHDTIT)
"RTN","CRHDUD",35,0)
 S $P(CRHDRTN,"^",4)=CRHDEXT
"RTN","CRHDUD",36,0)
 S $P(CRHDRTN,"^",5)=CRHDPG
"RTN","CRHDUD",37,0)
 S $P(CRHDRTN,"^",6)=CRHDRM
"RTN","CRHDUD",38,0)
 S $P(CRHDRTN,"^",7)=CRHDEM
"RTN","CRHDUD",39,0)
 S $P(CRHDRTN,"^",8)=CRHDFAX
"RTN","CRHDUD",40,0)
 S $P(CRHDRTN,"^",9)=CRHDSRV
"RTN","CRHDUD",41,0)
 S $P(CRHDRTN,"^",10)=CRHDSMC
"RTN","CRHDUD",42,0)
 ;S $P(CRHDRTN,"^",11)=CRHDSRM
"RTN","CRHDUD",43,0)
 S $P(CRHDRTN,"^",11)=$TR($P($$SITE^VASITE,"^",2,3),"^","-")
"RTN","CRHDUD",44,0)
 Q
"RTN","CRHDUD",45,0)
SRV(CRHDRTN,CRHDSRVN,CRHDDIV) ;
"RTN","CRHDUD",46,0)
 K CRHDRTN
"RTN","CRHDUD",47,0)
 N CRHDUIF,CRHDUSR,CRHDS,CRHDCT,CRHDX,CRHDSORT
"RTN","CRHDUD",48,0)
 I $D(^VA(200,"E")) D
"RTN","CRHDUD",49,0)
 .S CRHDUSR=0
"RTN","CRHDUD",50,0)
 .F  S CRHDUSR=$O(^VA(200,"E",+CRHDSRVN,CRHDUSR)) Q:'CRHDUSR  D
"RTN","CRHDUD",51,0)
 ..I $$ACTIVE^XUSER(CRHDUSR) D
"RTN","CRHDUD",52,0)
 ...K CRHDUIF
"RTN","CRHDUD",53,0)
B ...D DISP(.CRHDUIF,CRHDUSR)
"RTN","CRHDUD",54,0)
 ...I $D(CRHDUIF) S:$P(CRHDUIF,"^",3)'="" CRHDSORT($P(CRHDUIF,"^",2))=CRHDUIF
"RTN","CRHDUD",55,0)
 ;COLUMNS - SEE ABOVE USER
"RTN","CRHDUD",56,0)
 ;
"RTN","CRHDUD",57,0)
 ;DISPLAY INFORMATION
"RTN","CRHDUD",58,0)
 I $D(CRHDSORT) D
"RTN","CRHDUD",59,0)
 .S CRHDX=""
"RTN","CRHDUD",60,0)
 .S CRHDCT=0
"RTN","CRHDUD",61,0)
 .F  S CRHDX=$O(CRHDSORT(CRHDX)) Q:CRHDX=""  D
"RTN","CRHDUD",62,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHDUD",63,0)
 ..S CRHDRTN(CRHDCT)=CRHDSORT(CRHDX)
"RTN","CRHDUD",64,0)
 Q
"RTN","CRHDUD",65,0)
SPEC(CRHDRTN,CRHDSP) ;
"RTN","CRHDUD",66,0)
 N CRHDCT,X,CRHDX,CRHDPRV,CRHDPG,CRHDNAM,CRHDS,CRHDUIF,CRHDSORT
"RTN","CRHDUD",67,0)
 K CRHDRTN
"RTN","CRHDUD",68,0)
 ;S S="                                   "
"RTN","CRHDUD",69,0)
 ;S CRHDRTN(1)="Specialty: "_$C(9)_$$GET1^DIQ(45.7,+CRHDSP_",",.01,"E")
"RTN","CRHDUD",70,0)
 ;S CRHDRTN(2)=""
"RTN","CRHDUD",71,0)
 ;S CRHDRTN(3)="No provider Found."
"RTN","CRHDUD",72,0)
 ;S CT=2
"RTN","CRHDUD",73,0)
 I $D(^DIC(45.7,+CRHDSP,"PRO")) D
"RTN","CRHDUD",74,0)
 .S X=0
"RTN","CRHDUD",75,0)
 .F  S X=$O(^DIC(45.7,+CRHDSP,"PRO",X)) Q:'X  D
"RTN","CRHDUD",76,0)
 ..Q:'$$ACTIVE^XUSER(X)
"RTN","CRHDUD",77,0)
 ..S CRHDPRV=+$G(^DIC(45.7,+CRHDSP,"PRO",X,0))
"RTN","CRHDUD",78,0)
 ..D DISP(.CRHDUIF,+CRHDPRV)
"RTN","CRHDUD",79,0)
 ..I $D(CRHDUIF) S CRHDSORT($P(CRHDUIF,"^",2))=CRHDUIF
"RTN","CRHDUD",80,0)
 I $D(CRHDSORT) D
"RTN","CRHDUD",81,0)
 .S CRHDCT=0
"RTN","CRHDUD",82,0)
 .S CRHDX=""
"RTN","CRHDUD",83,0)
 .F  S CRHDX=$O(CRHDSORT(CRHDX)) Q:CRHDX=""  D
"RTN","CRHDUD",84,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHDUD",85,0)
 ..S CRHDRTN(CRHDCT)=CRHDSORT(CRHDX)
"RTN","CRHDUD",86,0)
 Q
"RTN","CRHDUD",87,0)
HOTEAM(CRHDRTN,CRHDTM) ;
"RTN","CRHDUD",88,0)
 ;Get HOTeam phone list
"RTN","CRHDUD",89,0)
 N CRHDX,CRHDPRV,CRHDCT,CRHDSORT,CRHDUIF
"RTN","CRHDUD",90,0)
 K CRHDRTN
"RTN","CRHDUD",91,0)
 I '$D(^CRHD(183.3,"B",$P(CRHDTM,"^",2),+CRHDTM)) Q
"RTN","CRHDUD",92,0)
 S CRHDX=0
"RTN","CRHDUD",93,0)
 F  S CRHDX=$O(^CRHD(183.3,+CRHDTM,2,CRHDX)) Q:'CRHDX  D
"RTN","CRHDUD",94,0)
 .S CRHDPRV=+$G(^CRHD(183.3,+CRHDTM,2,CRHDX,0))
"RTN","CRHDUD",95,0)
 .D DISP(.CRHDUIF,+CRHDPRV)
"RTN","CRHDUD",96,0)
 .I $D(CRHDUIF) S CRHDSORT($P(CRHDUIF,"^",2))=CRHDUIF
"RTN","CRHDUD",97,0)
 I $D(CRHDSORT) D
"RTN","CRHDUD",98,0)
 .S CRHDCT=0
"RTN","CRHDUD",99,0)
 .S CRHDX=""
"RTN","CRHDUD",100,0)
 .F  S CRHDX=$O(CRHDSORT(CRHDX)) Q:CRHDX=""  D
"RTN","CRHDUD",101,0)
 ..S CRHDCT=CRHDCT+1
"RTN","CRHDUD",102,0)
 ..S CRHDRTN(CRHDCT)=CRHDSORT(CRHDX)
"RTN","CRHDUD",103,0)
 Q
"RTN","CRHDUT")
0^8^B67060529
"RTN","CRHDUT",1,0)
CRHDUT ; CAIRO/CLC - GET THE PATIENT DATA ELEMENTS FOR HANDOFF LIST ;5/13/08  05:19
"RTN","CRHDUT",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDUT",3,0)
 ;=================================================================
"RTN","CRHDUT",4,0)
ALG(CRHDRTN0,CRHDSTR) ; Allergies
"RTN","CRHDUT",5,0)
 N CRHDTNUM
"RTN","CRHDUT",6,0)
 S CRHDTRG="CRHDRTN0"
"RTN","CRHDUT",7,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",8,0)
 S CRHDNUM=$P(CRHDSTR,U,2)
"RTN","CRHDUT",9,0)
 S CRHDHDR=$P(CRHDSTR,U,3)
"RTN","CRHDUT",10,0)
 K @CRHDTRG,CRHDRTN
"RTN","CRHDUT",11,0)
 N CRHDX
"RTN","CRHDUT",12,0)
 S CRHDNUM=CRHDNUM+1,CRHDTNUM=CRHDNUM
"RTN","CRHDUT",13,0)
 S CRHDNUM=$G(CRHDNUM)+1
"RTN","CRHDUT",14,0)
 S:$G(CRHDHDR) @CRHDTRG@(CRHDNUM)="Allergies: "
"RTN","CRHDUT",15,0)
 D LIST^ORQQAL(.CRHDRTN,DFN)
"RTN","CRHDUT",16,0)
 S CRHDX=0
"RTN","CRHDUT",17,0)
 F  S CRHDX=$O(CRHDRTN(CRHDX)) Q:'CRHDX  D
"RTN","CRHDUT",18,0)
 .S @CRHDTRG@(CRHDNUM)=$G(@CRHDTRG@(CRHDNUM))_$$SPACE($G(@CRHDTRG@(CRHDNUM)),$S($G(CRHDHDR):12,1:1))_$P(CRHDRTN(CRHDX),"^",2)
"RTN","CRHDUT",19,0)
 . S CRHDNUM=CRHDNUM+1
"RTN","CRHDUT",20,0)
 S @CRHDTRG@(CRHDTNUM)=CRHDNUM-1
"RTN","CRHDUT",21,0)
 Q
"RTN","CRHDUT",22,0)
ACTMED(CRHDRTN,CRHDSTR) ;Active Medications
"RTN","CRHDUT",23,0)
 ;CRHDRTN: Target array
"RTN","CRHDUT",24,0)
 ;CRHDCAT: I-Inpatient Meds
"RTN","CRHDUT",25,0)
 ;         O-Outpatient Meds
"RTN","CRHDUT",26,0)
 ;         B-Both
"RTN","CRHDUT",27,0)
 ;CRHDIV:  0 - Do not include IV
"RTN","CRHDUT",28,0)
 ;         1 - include IV
"RTN","CRHDUT",29,0)
 ;CRHDNUM: next number in results array
"RTN","CRHDUT",30,0)
 ;CRHDHDR: include section heading
"RTN","CRHDUT",31,0)
 ;CRHDDET: details, 1-include the sig, 0-exclude sig
"RTN","CRHDUT",32,0)
 ;CRHDLEN: length to return in chars. Defaults to 16 chars.
"RTN","CRHDUT",33,0)
 N CRHDUD,CRHDV,CRHDX2,CRHDC,CRHDMEDS,CRHDRN,DFN,CRHDCAT,CRHDI,CRHDN,CRHDP1,CRHDP2
"RTN","CRHDUT",34,0)
 N CRHDIV,CRHDNUM,CRHDHDR,CRHDDET,CRHDFG,CRHDLEN,CRHDTNUM,CRHDMCTR,CRHDTX
"RTN","CRHDUT",35,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",36,0)
 S CRHDCAT=$P(CRHDSTR,U,2)
"RTN","CRHDUT",37,0)
 I CRHDCAT="" S CRHDCAT="I"
"RTN","CRHDUT",38,0)
 S CRHDIV=$P(CRHDSTR,U,3)
"RTN","CRHDUT",39,0)
 S CRHDNUM=$P(CRHDSTR,U,4)
"RTN","CRHDUT",40,0)
 S CRHDHDR=$P(CRHDSTR,U,5)
"RTN","CRHDUT",41,0)
 S CRHDDET=$P(CRHDSTR,U,6)
"RTN","CRHDUT",42,0)
 S CRHDLEN=$P(CRHDSTR,U,7)
"RTN","CRHDUT",43,0)
 I 'CRHDLEN S CRHDLEN=16
"RTN","CRHDUT",44,0)
 S CRHDTRG="CRHDRTN"
"RTN","CRHDUT",45,0)
 K @CRHDTRG
"RTN","CRHDUT",46,0)
 S CRHDMCTR=0
"RTN","CRHDUT",47,0)
 S CRHDNUM=CRHDNUM+1,CRHDTNUM=CRHDNUM
"RTN","CRHDUT",48,0)
 S CRHDNUM=$G(CRHDNUM)+1
"RTN","CRHDUT",49,0)
 S:$G(CRHDHDR) @CRHDTRG@(CRHDNUM)="Meds: "
"RTN","CRHDUT",50,0)
 I CRHDCAT="O"!('CRHDDET) D NODETAM^CRHD2(.CRHDMEDS,DFN,CRHDCAT),NDOUT S @CRHDTRG@(CRHDTNUM)=CRHDNUM-1 Q
"RTN","CRHDUT",51,0)
 I CRHDDET S CRHDX=$$PSGI^CRHDAM(.CRHDMEDS,DFN) D DOUT
"RTN","CRHDUT",52,0)
 S @CRHDTRG@(CRHDTNUM)=CRHDNUM-1
"RTN","CRHDUT",53,0)
 Q
"RTN","CRHDUT",54,0)
NDOUT ;no details output
"RTN","CRHDUT",55,0)
 S CRHDP2=" S CRHDN="""""_" F  S CRHDN=$O(CRHDMEDS(CRHDI,CRHDN)) Q:'CRHDN  D AOUTPUT"
"RTN","CRHDUT",56,0)
 I CRHDCAT="I" D
"RTN","CRHDUT",57,0)
 .S CRHDP1="F CRHDI=""U"""
"RTN","CRHDUT",58,0)
 .I CRHDIV S CRHDP1=CRHDP1_","_"""V"""
"RTN","CRHDUT",59,0)
 I CRHDCAT="O" D
"RTN","CRHDUT",60,0)
 .S CRHDP1="F CRHDI=""N"""_","_"""R"""
"RTN","CRHDUT",61,0)
 S CRHDP1=CRHDP1_CRHDP2
"RTN","CRHDUT",62,0)
 X CRHDP1
"RTN","CRHDUT",63,0)
 Q
"RTN","CRHDUT",64,0)
AOUTPUT ;
"RTN","CRHDUT",65,0)
 S CRHDNUM=CRHDNUM+1
"RTN","CRHDUT",66,0)
 ;I HDR S @TRG@(CRHDNUM)="Medications",NUM=NUM+1,HDR=0
"RTN","CRHDUT",67,0)
 ;S @CRHDTRG@(CRHDNUM)=$E($G(CRHDMEDS(CRHDI,CRHDN)),1,CRHDLEN)
"RTN","CRHDUT",68,0)
 S CRHDMCTR=CRHDMCTR+1,@CRHDTRG@(CRHDNUM)=CRHDMCTR_"."_$E($G(CRHDMEDS(CRHDI,CRHDN)),1,CRHDLEN)
"RTN","CRHDUT",69,0)
 Q
"RTN","CRHDUT",70,0)
DOUT ;
"RTN","CRHDUT",71,0)
 S (CRHDX2,CRHDFG,CRHDMCTR)=0
"RTN","CRHDUT",72,0)
 F  S CRHDX2=$O(CRHDMEDS(CRHDX2)) Q:'CRHDX2!(CRHDFG)  D
"RTN","CRHDUT",73,0)
 .S CRHDTX=""
"RTN","CRHDUT",74,0)
 .S CRHDC=$P(CRHDMEDS(CRHDX2),"^",2)
"RTN","CRHDUT",75,0)
 .Q:CRHDC=""
"RTN","CRHDUT",76,0)
 .I CRHDHDR S CRHDNUM=CRHDNUM+1,@CRHDTRG@(CRHDNUM)="Inpatient Meds: ",CRHDNUM=CRHDNUM+1,CRHDHDR=0
"RTN","CRHDUT",77,0)
IV .I 'CRHDIV&(CRHDC["IV DOSE") S CRHDFG=1 Q
"RTN","CRHDUT",78,0)
 .I CRHDDET D
"RTN","CRHDUT",79,0)
 ..I (CRHDC["=UNIT DOSE=")!(CRHDC["=IV DOSE=") S @CRHDTRG@(CRHDNUM)=$E(CRHDC,1,CRHDLEN)
"RTN","CRHDUT",80,0)
 ..E  S CRHDMCTR=CRHDMCTR+1,@CRHDTRG@(CRHDNUM)=CRHDMCTR_"."_$E(CRHDC,1,CRHDLEN)
"RTN","CRHDUT",81,0)
 .I 'CRHDDET S @CRHDTRG@(CRHDNUM)=$E(CRHDC,1,CRHDLEN)
"RTN","CRHDUT",82,0)
 .S CRHDNUM=CRHDNUM+1
"RTN","CRHDUT",83,0)
 Q
"RTN","CRHDUT",84,0)
CONSULT(CRHDRTN,CRHDSTR) ;consults orders - call from cprs
"RTN","CRHDUT",85,0)
 ;DFN,FILTERS,GROUPS,DTFROM,DTTHRU,EVENT
"RTN","CRHDUT",86,0)
 N CRHDY,CRHDILST,ORYD,CRHDLST,X,D1,CRHDATE,CRHDGRP
"RTN","CRHDUT",87,0)
 N CRHDLEN,CHRDHDR,CRHDSTS,CRHDILST,DFN
"RTN","CRHDUT",88,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",89,0)
 S CRHDSTS=$P(CRHDSTR,U,2)
"RTN","CRHDUT",90,0)
 S CRHDNUM=$P(CRHDSTR,U,3)
"RTN","CRHDUT",91,0)
 S CRHDHDR=$P(CRHDSTR,U,4)
"RTN","CRHDUT",92,0)
 S CRHDLEN=$P(CRHDSTR,U,5)
"RTN","CRHDUT",93,0)
 I 'CRHDLEN S CRHDLEN=20
"RTN","CRHDUT",94,0)
 S CRHDTRG="CRHDRTN"
"RTN","CRHDUT",95,0)
 K @CRHDTRG
"RTN","CRHDUT",96,0)
 S CRHDGRP=$O(^ORD(100.98,"B","CONSULTS",0))
"RTN","CRHDUT",97,0)
 ;D AGET^ORWORR(.CRHDY,DFN,"2^0",11,0,0,"")
"RTN","CRHDUT",98,0)
 D AGET^ORWORR(.CRHDY,DFN,"2^0",CRHDGRP,0,0,"")
"RTN","CRHDUT",99,0)
 M CRHDILST=@CRHDY
"RTN","CRHDUT",100,0)
 K CRHDILST(.1)
"RTN","CRHDUT",101,0)
 D DETORD("CRHDRTN",.CRHDLST,.CRHDILST,"",CRHDLEN)
"RTN","CRHDUT",102,0)
 Q
"RTN","CRHDUT",103,0)
IMAGING(CRHDRTN,CRHDSTR) ;Radiology orders - call from cprs
"RTN","CRHDUT",104,0)
 ;DFN,FILTERS,CRHDGRPS,DTFROM,DTTHRU,EVENT
"RTN","CRHDUT",105,0)
 N CRHDY,CRHDILST,ORYD,CRHDLST,X,CRHDLEN
"RTN","CRHDUT",106,0)
 N D1,CRHDATE,DFN,CRHDSTS,CRHDNUM,CRHDHDR,CRHDTRG,CRHDGRP
"RTN","CRHDUT",107,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",108,0)
 S CRHDSTS=$P(CRHDSTR,U,2)
"RTN","CRHDUT",109,0)
 S CRHDNUM=$P(CRHDSTR,U,3)
"RTN","CRHDUT",110,0)
 S CRHDHDR=$P(CRHDSTR,U,4)
"RTN","CRHDUT",111,0)
 S CRHDLEN=$P(CRHDSTR,U,5)
"RTN","CRHDUT",112,0)
 I 'CRHDLEN S CRHDLEN=20
"RTN","CRHDUT",113,0)
 S CRHDTRG="CRHDRTN"
"RTN","CRHDUT",114,0)
 K @CRHDTRG
"RTN","CRHDUT",115,0)
 S CRHDGRP=$O(^ORD(100.98,"B","IMAGING",0))
"RTN","CRHDUT",116,0)
 ;D AGET^ORWORR(.CRHDY,DFN,"2^0",34,0,0,"")
"RTN","CRHDUT",117,0)
 D AGET^ORWORR(.CRHDY,DFN,"2^0",CRHDGRP,0,0,"")
"RTN","CRHDUT",118,0)
 M CRHDILST=@CRHDY
"RTN","CRHDUT",119,0)
 K CRHDILST(.1)
"RTN","CRHDUT",120,0)
 D DETORD(.CRHDTRG,.CRHDLST,.CRHDILST,"",CRHDLEN)
"RTN","CRHDUT",121,0)
 Q
"RTN","CRHDUT",122,0)
LABS(CRHDRTN,CRHDSTR) ;LABS orders - call from cprs
"RTN","CRHDUT",123,0)
 ;DFN,FILTERS,CRHDGRPS,DTFROM,DTTHRU,EVENT
"RTN","CRHDUT",124,0)
 N CRHDY,CRHDILST,ORYD,CRHDLST,X,D1,CRHDATE
"RTN","CRHDUT",125,0)
 N DFN,CRHDSTS,CRHDNUM,CRHDHDR,CRHDLEN,CRHDTRG
"RTN","CRHDUT",126,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",127,0)
 S CRHDSTS=$P(CRHDSTR,U,2)
"RTN","CRHDUT",128,0)
 S CRHDNUM=$P(CRHDSTR,U,3)
"RTN","CRHDUT",129,0)
 S CRHDHDR=$P(CRHDSTR,U,4)
"RTN","CRHDUT",130,0)
 S CRHDLEN=$P(CRHDSTR,U,5)
"RTN","CRHDUT",131,0)
 I 'CRHDLEN S CRHDLEN=20
"RTN","CRHDUT",132,0)
 S CRHDTRG="CRHDRTN"
"RTN","CRHDUT",133,0)
 K @CRHDTRG
"RTN","CRHDUT",134,0)
 S CRHDGRP=$O(^ORD(100.98,"B","LABORATORY",0))
"RTN","CRHDUT",135,0)
 ;D AGET^ORWORR(.CRHDY,DFN,"2^0",5,0,0,"")
"RTN","CRHDUT",136,0)
 D AGET^ORWORR(.CRHDY,DFN,"2^0",CRHDGRP,0,0,"")
"RTN","CRHDUT",137,0)
 M CRHDILST=@CRHDY
"RTN","CRHDUT",138,0)
 K CRHDILST(.1)
"RTN","CRHDUT",139,0)
 D DETORD(.CRHDTRG,.CRHDLST,.CRHDILST,"",CRHDLEN)
"RTN","CRHDUT",140,0)
 Q
"RTN","CRHDUT",141,0)
PROC(CRHDRTN,CRHDSTR) ;,DFN,CRHDSTS,CRHDNUM,CRHDHDR) ;Procedures orders - call from cprs
"RTN","CRHDUT",142,0)
 ;DFN,FILTERS,CRHDGRPS,DTFROM,DTTHRU,EVENT
"RTN","CRHDUT",143,0)
 N CRHDY,CRHDILST,ORYD,CRHDLST,X,D1,CRHDATE
"RTN","CRHDUT",144,0)
 N DFN,CRHDSTS,CRHDNUM,CRHDHDR,CRHDGRP,CRHDLEN,CRHDTRG
"RTN","CRHDUT",145,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",146,0)
 S CRHDSTS=$P(CRHDSTR,U,2)
"RTN","CRHDUT",147,0)
 S CRHDNUM=$P(CRHDSTR,U,3)
"RTN","CRHDUT",148,0)
 S CRHDHDR=$P(CRHDSTR,U,4)
"RTN","CRHDUT",149,0)
 S CRHDLEN=$P(CRHDSTR,U,5)
"RTN","CRHDUT",150,0)
 I 'CRHDLEN S CRHDLEN=20
"RTN","CRHDUT",151,0)
 S CRHDTRG="CRHDRTN"
"RTN","CRHDUT",152,0)
 K @CRHDTRG
"RTN","CRHDUT",153,0)
 S CRHDGRP=$O(^ORD(100.98,"B","PROCEDURES",0))
"RTN","CRHDUT",154,0)
 ;D AGET^ORWORR(.CRHDY,DFN,"2^0",43,0,0,"")
"RTN","CRHDUT",155,0)
 D AGET^ORWORR(.CRHDY,DFN,"2^0",CRHDGRP,0,0,"")
"RTN","CRHDUT",156,0)
 M CRHDILST=@CRHDY
"RTN","CRHDUT",157,0)
 K CRHDILST(.1)
"RTN","CRHDUT",158,0)
 D DETORD(.CRHDTRG,.CRHDLST,.CRHDILST,"",CRHDLEN)
"RTN","CRHDUT",159,0)
 Q
"RTN","CRHDUT",160,0)
DETORD(CRHDTRG,CRHDRLST,CRHDILST,CRHDHEAD,CRHDLEN) ;
"RTN","CRHDUT",161,0)
 N ORYD,CRHDSTS,CRHDD1,CRHDATE,CRHDX
"RTN","CRHDUT",162,0)
 S ORYD=""
"RTN","CRHDUT",163,0)
 D GET4LST^ORWORR(.CRHDRLST,.CRHDILST)
"RTN","CRHDUT",164,0)
 S:$G(CRHDHDR) @CRHDTRG@(CRHDNUM,0)=CRHDHEAD_": "
"RTN","CRHDUT",165,0)
 S CRHDX=""
"RTN","CRHDUT",166,0)
 F  S CRHDX=$O(CRHDLST(CRHDX)) Q:'CRHDX  D
"RTN","CRHDUT",167,0)
 . S CRHDD1=$P(CRHDLST(CRHDX),"^",3)
"RTN","CRHDUT",168,0)
 . I $E(CRHDLST(CRHDX),1)="~" D
"RTN","CRHDUT",169,0)
 . .S CRHDD1=$P(CRHDLST(CRHDX),"^",3)
"RTN","CRHDUT",170,0)
 . .S CRHDSTS=$P(CRHDLST(CRHDX),"^",10)
"RTN","CRHDUT",171,0)
 . .S CRHDATE=$$FMTE^XLFDT(CRHDD1,2)
"RTN","CRHDUT",172,0)
 . .S @CRHDTRG@(CRHDNUM)=$G(@CRHDTRG@(CRHDNUM))_$$SPACE($G(@CRHDTRG@(CRHDNUM)),$S($G(CRHDHDR):16,1:1))_$P(CRHDATE,"@",1)
"RTN","CRHDUT",173,0)
 . I $E(CRHDLST(CRHDX),1)="t" D
"RTN","CRHDUT",174,0)
 . .S @CRHDTRG@(CRHDNUM)=$G(@CRHDTRG@(CRHDNUM))_$$SPACE($G(@CRHDTRG@(CRHDNUM)),$S($G(CRHDHDR):16,1:1))_" "_$E(CRHDLST(CRHDX),2,$L(CRHDLST(CRHDX)))_" ("_$P($G(^ORD(100.01,+CRHDSTS,0)),"^",1)_")"
"RTN","CRHDUT",175,0)
 . .S @CRHDTRG@(CRHDNUM)=$E(@CRHDTRG@(CRHDNUM),1,CRHDLEN),CRHDNUM=CRHDNUM+1
"RTN","CRHDUT",176,0)
 Q
"RTN","CRHDUT",177,0)
PROB(CRHDRTNA,CRHDSTR) ;DFN,NUM,CRHDHDR) ;
"RTN","CRHDUT",178,0)
 ;Target array ^TMP("CRHD_PROB_DATA",$J)
"RTN","CRHDUT",179,0)
 N CRHDRTN,X,DFN,CRHDNUM,CRHDHDR,CRHDTRG
"RTN","CRHDUT",180,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT",181,0)
 S CRHDNUM=$P(CRHDSTR,U,2)
"RTN","CRHDUT",182,0)
 S CRHDHDR=$P(CRHDSTR,U,3)
"RTN","CRHDUT",183,0)
 S CRHDTRG="^TMP(""CRHD_PROB_DATA"",$J)"
"RTN","CRHDUT",184,0)
 K @CRHDTRG
"RTN","CRHDUT",185,0)
 S CRHDNUM=$G(CRHDNUM)+1
"RTN","CRHDUT",186,0)
 S:$G(CRHDHDR) @CRHDTRG@(CRHDNUM,0)="Problem List: "
"RTN","CRHDUT",187,0)
 D LIST^ORQQPL(.CRHDRTN,DFN,"A")
"RTN","CRHDUT",188,0)
 S CRHDX=0
"RTN","CRHDUT",189,0)
 F  S CRHDX=$O(CRHDRTN(CRHDX)) Q:'CRHDX  D
"RTN","CRHDUT",190,0)
 . S @CRHDTRG@(CRHDNUM)=$G(@CRHDTRG@(CRHDNUM))_$$SPACE($G(@CRHDTRG@(CRHDNUM)),$S($G(CRHDHDR):15,1:1))_$P(CRHDRTN(X),"^",2)
"RTN","CRHDUT",191,0)
 . S CRHDNUM=CRHDNUM+1
"RTN","CRHDUT",192,0)
 ;S @CRHDTRG@(CRHDNUM)=""
"RTN","CRHDUT",193,0)
 Q
"RTN","CRHDUT",194,0)
RECNTLAB(CRHDROOT,DFN,CRHDNUM,CRHDHDR) ;
"RTN","CRHDUT",195,0)
 ;(CRHDY,DFN,CRHDATE1,DIR,FORMAT)
"RTN","CRHDUT",196,0)
 D INTERIMG^ORWLRR(.CRHDY,DFN,$$DT^XLFDT_".2359",1,"")
"RTN","CRHDUT",197,0)
 Q
"RTN","CRHDUT",198,0)
SPACE(CRHDX1,CRHDX) ;
"RTN","CRHDUT",199,0)
 N CRHDY,CRHDY1
"RTN","CRHDUT",200,0)
 S CRHDY1="",CRHDY=CRHDX-$L(CRHDX1)
"RTN","CRHDUT",201,0)
 S $P(CRHDY1," ",CRHDY)=""
"RTN","CRHDUT",202,0)
 Q CRHDY1
"RTN","CRHDUT",203,0)
PARAM(CRHDW,CRHDX) ;
"RTN","CRHDUT",204,0)
 Q $$GET^XPAR(CRHDW,CRHDX,1,"I")
"RTN","CRHDUT",205,0)
 ;
"RTN","CRHDUT",206,0)
PTSTS(DFN) ;Display current patient status
"RTN","CRHDUT",207,0)
 N CRHDGPMV,NOW,NOWI,X,Y,%,%H,%I,CRHDA,E,CRHDDGX,VAIP,VAX,VAZ,VAZ2
"RTN","CRHDUT",208,0)
 D NOW^%DTC S (VAX("DAT"),NOW)=%,NOWI=9999999.999999-%
"RTN","CRHDUT",209,0)
 D LAST^VADPT3
"RTN","CRHDUT",210,0)
 S CRHDGPMV(1)=$S($D(VAIP("E")):VAIP("E"),1:E) ;use ifn of last mvt from VADPT cal
"RTN","CRHDUT",211,0)
 S CRHDDGX=$G(^DGPM(+CRHDGPMV(1),0)),CRHDGPMV(2)=$P(CRHDDGX,"^",2),CRHDGPMV(4)=$P(CRHDDGX,"^",18)
"RTN","CRHDUT",212,0)
 S CRHDA=$S("^3^5^"[("^"_+CRHDGPMV(2)_"^"):0,1:+CRHDGPMV(2))
"RTN","CRHDUT",213,0)
 Q $S('CRHDA:"IN",1:"")_"ACTIVE "_$S("^4^5^"[("^"_+CRHDGPMV(2)_"^"):"LODGER",1:"INPATIENT")
"RTN","CRHDUT",214,0)
DNRPARM(CRHDNRTT,DUZ,CRHDDIV) ;GET DNR TITLES
"RTN","CRHDUT",215,0)
 N CRHDPAR,CRHDSRV,CRHDTEAM
"RTN","CRHDUT",216,0)
 S CRHDTEAM=$$GET^XPAR("USR.`"_DUZ,"ORLP DEFAULT TEAM",1,"I")
"RTN","CRHDUT",217,0)
 S CRHDSRV=$$GET1^DIQ(200,DUZ_",",29,"E")
"RTN","CRHDUT",218,0)
 S CRHDPAR="USR.`"_DUZ
"RTN","CRHDUT",219,0)
 D GETLST^XPAR(.CRHDNRTT,CRHDPAR,"CRHD DNR ORDER TITLE")
"RTN","CRHDUT",220,0)
 I ('CRHDNRTT)&($G(CRHDTEAM)>0) S CRHDPAR="OTL.`"_+CRHDTEAM D GETLST^XPAR(.CRHDNRTT,CRHDPAR,"CRHD DNR ORDER TITLE")
"RTN","CRHDUT",221,0)
 I ('CRHDNRTT)&($G(CRHDSRV)'="") S CRHDPAR="SRV."_CRHDSRV D GETLST^XPAR(.CRHDNRTT,CRHDPAR,"CRHD DNR ORDER TITLE")
"RTN","CRHDUT",222,0)
 I '+$G(CRHDDIV) S CRHDDIV=+$$SITE^VASITE
"RTN","CRHDUT",223,0)
 I 'CRHDNRTT S CRHDPAR="DIV.`"_+CRHDDIV  D GETLST^XPAR(.CRHDNRTT,CRHDPAR,"CRHD DNR ORDER TITLE")
"RTN","CRHDUT",224,0)
 Q
"RTN","CRHDUT2")
0^20^B14775379
"RTN","CRHDUT2",1,0)
CRHDUT2 ; CAIRO/CLC - GET THE PATIENT DATA ELEMENTS FOR HANDOFF LIST CONTINUED;04-Mar-2008 16:00;CLC
"RTN","CRHDUT2",2,0)
 ;;1.0;CRHD;****;Jan 28, 2008;Build 19
"RTN","CRHDUT2",3,0)
 ;=================================================================
"RTN","CRHDUT2",4,0)
PATDEMO(CRHDDATA,CRHDSTR) ;GET PATIENTS DEMOGRAPHICS
"RTN","CRHDUT2",5,0)
 ;DFN  - patient internal entry number to the Patient file
"RTN","CRHDUT2",6,0)
 ;P    - pieces to return from retrieve data string
"RTN","CRHDUT2",7,0)
 ;CRHDLEN  - max length of returned items, defaults to 18
"RTN","CRHDUT2",8,0)
 ;LABELS - 0 or 1
"RTN","CRHDUT2",9,0)
 ;Output
"RTN","CRHDUT2",10,0)
 ;CRHDRTN
"RTN","CRHDUT2",11,0)
 ;DFN - Piece  1             NAME     Piece 2
"RTN","CRHDUT2",12,0)
 ;SSN          3 (full ssn)  DOB            4
"RTN","CRHDUT2",13,0)
 ;SSN          5 (last 4ssn) AGE            6
"RTN","CRHDUT2",14,0)
 ;SEX          7             RM             8
"RTN","CRHDUT2",15,0)
 ;TSP          9             ATN           10
"RTN","CRHDUT2",16,0)
 ;PCP         11             LOC           12
"RTN","CRHDUT2",17,0)
 ;ADMDT       13 (adm date)  DAY w/i ADM   14
"RTN","CRHDUT2",18,0)
 ;ADMDX       15 (admission Diagnosis)
"RTN","CRHDUT2",19,0)
 ;
"RTN","CRHDUT2",20,0)
 N VAIN,VAIP,VADM,CRHDNAME,CRHDSSN,CRHDDOB,CRHDAGE,CRHDSEX,CRHDRM,CRHDTSP,CRHDATTN,CRHDRTN,CRHDLEN,CRHDLBLS
"RTN","CRHDUT2",21,0)
 N CRHDPCP,CRHDWARD,CRHDADMD,CRHDADAY,CRHDADX,CRHDI,CRHDTRG,CRHDNUM,CRHDP,DFN
"RTN","CRHDUT2",22,0)
 K CRHDDATA
"RTN","CRHDUT2",23,0)
 S CRHDTRG="^TMP(""CRHD_ORDATA"",$J)"
"RTN","CRHDUT2",24,0)
 K @CRHDTRG,CRHDRTN
"RTN","CRHDUT2",25,0)
 S CRHDNUM=0
"RTN","CRHDUT2",26,0)
 S DFN=+CRHDSTR
"RTN","CRHDUT2",27,0)
 S CRHDP=$P(CRHDSTR,U,2)
"RTN","CRHDUT2",28,0)
 I CRHDP=""!(CRHDP="ALL") S CRHDP="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15"
"RTN","CRHDUT2",29,0)
 S CRHDLEN=$P(CRHDSTR,U,3)
"RTN","CRHDUT2",30,0)
 I 'CRHDLEN S CRHDLEN=18
"RTN","CRHDUT2",31,0)
 S CRHDLBLS=$P(CRHDSTR,U,4)
"RTN","CRHDUT2",32,0)
 Q:'DFN
"RTN","CRHDUT2",33,0)
 D DEM^VADPT
"RTN","CRHDUT2",34,0)
 S CRHDNAME=VADM(1),CRHDSSN=$P(VADM(2),U,1),CRHDDOB=$P(VADM(3),U,2)
"RTN","CRHDUT2",35,0)
 S CRHDAGE=VADM(4),CRHDSEX=$P(VADM(5),U,1)
"RTN","CRHDUT2",36,0)
 D INP^VADPT
"RTN","CRHDUT2",37,0)
 S CRHDRM=$G(VAIN(5))                              ;Room/Bed
"RTN","CRHDUT2",38,0)
 S CRHDTSP=$P($G(VAIN(3)),U,2)                     ;Team (Treating Specialty)
"RTN","CRHDUT2",39,0)
 S CRHDATTN=$P($G(VAIN(11)),U,2)                   ;Attending Physicial
"RTN","CRHDUT2",40,0)
 S CRHDPCP=$P($$OUTPTPR^SDUTL3(DFN,DT),U,2)        ;Primary Care Provider
"RTN","CRHDUT2",41,0)
 S CRHDWARD=$P($G(VAIN(4)),U,2)                    ;Ward Location
"RTN","CRHDUT2",42,0)
 S CRHDADMD=$P($G(VAIN(7)),U,2)                   ;Admission Date
"RTN","CRHDUT2",43,0)
 S:+$G(VAIN(7))>0 CRHDADAY=$$FMDIFF^XLFDT(+$$DT^XLFDT,+$G(VAIN(7)),1)   ;Day within Admission
"RTN","CRHDUT2",44,0)
 S CRHDADX=$G(VAIN(9))                           ;Admission Diagnosis
"RTN","CRHDUT2",45,0)
 I $G(CRHDLBLS) D
"RTN","CRHDUT2",46,0)
 .S CRHDRTN=DFN_U_$E(CRHDNAME,1,CRHDLEN)_U_"SSN: "_CRHDSSN_U_"DOB: "_CRHDDOB
"RTN","CRHDUT2",47,0)
 .S CRHDRTN=CRHDRTN_U_"SSN: "_$E(CRHDSSN,6,9)_U_"AGE: "_CRHDAGE_U_"SEX: "_CRHDSEX
"RTN","CRHDUT2",48,0)
 .S CRHDRTN=CRHDRTN_U_"RM : "_CRHDRM_U_"TM: "_$E(CRHDTSP,1,CRHDLEN-4)
"RTN","CRHDUT2",49,0)
 .S CRHDRTN=CRHDRTN_U_"ATN: "_$E(CRHDATTN,1,CRHDLEN-5)_U_"PCP: "_$E(CRHDPCP,1,CRHDLEN-5)
"RTN","CRHDUT2",50,0)
 .S CRHDRTN=CRHDRTN_U_"LOC: "_CRHDWARD_U_CRHDADMD_U_"DAY OF ADM: "_$G(CRHDADAY)_U_"ADM DX: "_$E(CRHDADX,1,CRHDLEN)
"RTN","CRHDUT2",51,0)
 .F CRHDI=1:1:$L(CRHDP,",") I $P(CRHDRTN,"^",$P(CRHDP,",",CRHDI))'="" S CRHDDATA=$G(CRHDDATA)_$P(CRHDRTN,"^",$P(CRHDP,",",CRHDI)) S:CRHDI<$L(CRHDP,",") CRHDDATA=CRHDDATA_"^"
"RTN","CRHDUT2",52,0)
 E  D
"RTN","CRHDUT2",53,0)
 .S CRHDRTN=DFN_U_$E(CRHDNAME,1,CRHDLEN)_U_CRHDSSN_U_CRHDDOB_U_$E(CRHDSSN,6,9)_U_CRHDAGE_U_CRHDSEX_U_CRHDRM_U_$E(CRHDTSP,1,CRHDLEN)_U_$E(CRHDATTN,1,CRHDLEN-5)_U_$E(CRHDPCP,1,CRHDLEN-5)_U_CRHDWARD_U_CRHDADMD_U_$G(CRHDADAY)_U_$E(CRHDADX,1,CRHDLEN)
"RTN","CRHDUT2",54,0)
 .F CRHDI=1:1:$L(CRHDP,",") S CRHDDATA=$G(CRHDDATA)_$P(CRHDRTN,"^",$P(CRHDP,",",CRHDI)) S:CRHDI<$L(CRHDP,",") CRHDDATA=CRHDDATA_"^"
"RTN","CRHDUT2",55,0)
 Q
"RTN","CRHDUT2",56,0)
AUSRINFO(CRHDRTN,CRHDUSR) ;retrieve additional user information
"RTN","CRHDUT2",57,0)
 N X,Y
"RTN","CRHDUT2",58,0)
 K CRHDRTN
"RTN","CRHDUT2",59,0)
 S CRHDRTN(1)=0
"RTN","CRHDUT2",60,0)
 S CRHDRTN(1)=$$GET1^DIQ(200,CRHDUSR_",",.132,"E")_"^"_$$GET1^DIQ(200,CRHDUSR_",",.138,"E")_"^"_$$GET^XPAR("USR.`"_CRHDUSR,"ORLP DEFAULT TEAM",1,"I")
"RTN","CRHDUT2",61,0)
 Q
"SEC","^DIC",183,183,0,"AUDIT")
@
"SEC","^DIC",183,183,0,"DD")
@
"SEC","^DIC",183,183,0,"DEL")
@
"SEC","^DIC",183,183,0,"LAYGO")
@
"SEC","^DIC",183,183,0,"RD")
@
"SEC","^DIC",183,183,0,"WR")
@
"SEC","^DIC",183.2,183.2,0,"AUDIT")
@
"SEC","^DIC",183.2,183.2,0,"DD")
@
"SEC","^DIC",183.2,183.2,0,"DEL")
@
"SEC","^DIC",183.2,183.2,0,"LAYGO")
@
"SEC","^DIC",183.2,183.2,0,"RD")
@
"SEC","^DIC",183.2,183.2,0,"WR")
@
"SEC","^DIC",183.3,183.3,0,"AUDIT")
@
"SEC","^DIC",183.3,183.3,0,"DD")
@
"SEC","^DIC",183.3,183.3,0,"DEL")
@
"SEC","^DIC",183.3,183.3,0,"LAYGO")
@
"SEC","^DIC",183.3,183.3,0,"RD")
@
"SEC","^DIC",183.3,183.3,0,"WR")
@
"VER")
8.0^22.0
"^DD",183,183,0)
FIELD^^1^2
"^DD",183,183,0,"DT")
3071119
"^DD",183,183,0,"IX","B",183,.01)

"^DD",183,183,0,"NM","CRHD HANDOFF PARAMETERS")

"^DD",183,183,.01,0)
NAME^RV^^0;1^Q
"^DD",183,183,.01,1,0)
^.1
"^DD",183,183,.01,1,1,0)
183^B
"^DD",183,183,.01,1,1,1)
S ^CRHD(183,"B",$E(X,1,30),DA)=""
"^DD",183,183,.01,1,1,2)
K ^CRHD(183,"B",$E(X,1,30),DA)
"^DD",183,183,.01,3)

"^DD",183,183,.01,"DT")
3071119
"^DD",183,183,.01,"V",0)
^.12P^7^7
"^DD",183,183,.01,"V",1,0)
200^USER^1^USR^n^n
"^DD",183,183,.01,"V",2,0)
100.21^OE/RR TEAM^2^OTL^n^n
"^DD",183,183,.01,"V",3,0)
45.7^TREATING SPECIALTY^3^TS^n^n
"^DD",183,183,.01,"V",4,0)
404.51^SD TEAM^4^SD^n^n
"^DD",183,183,.01,"V",5,0)
49^SERVICE^5^SRV^n^n
"^DD",183,183,.01,"V",6,0)
44^LOCATION^6^LOC^n^n
"^DD",183,183,.01,"V",7,0)
4^DIVISION^7^DIV^n^n
"^DD",183,183,1,0)
ENTITY^183.01^^1;0
"^DD",183,183.01,0)
ENTITY SUB-FIELD^^2^3
"^DD",183,183.01,0,"DT")
3071119
"^DD",183,183.01,0,"IX","B",183.01,.01)

"^DD",183,183.01,0,"NM","ENTITY")

"^DD",183,183.01,0,"UP")
183
"^DD",183,183.01,.01,0)
NAME^MRF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",183,183.01,.01,1,0)
^.1
"^DD",183,183.01,.01,1,1,0)
183.01^B
"^DD",183,183.01,.01,1,1,1)
S ^CRHD(183,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",183,183.01,.01,1,1,2)
K ^CRHD(183,DA(1),1,"B",$E(X,1,30),DA)
"^DD",183,183.01,.01,3)
Answer must be 1-30 characters in length.
"^DD",183,183.01,.01,21,0)
^^1^1^3071119^
"^DD",183,183.01,.01,21,1,0)
This file holds the parameters for a Hand-off configuration.
"^DD",183,183.01,.01,"DT")
3071119
"^DD",183,183.01,1,0)
VALUE^F^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",183,183.01,1,3)
Answer must be 1-30 characters in length.
"^DD",183,183.01,1,"DT")
3071119
"^DD",183,183.01,2,0)
LIST VALUE^183.12^^1;0
"^DD",183,183.12,0)
LIST VALUE SUB-FIELD^^.01^1
"^DD",183,183.12,0,"DT")
3071119
"^DD",183,183.12,0,"IX","B",183.12,.01)

"^DD",183,183.12,0,"NM","LIST VALUE")

"^DD",183,183.12,0,"UP")
183.01
"^DD",183,183.12,.01,0)
LIST VALUE^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",183,183.12,.01,1,0)
^.1
"^DD",183,183.12,.01,1,1,0)
183.12^B
"^DD",183,183.12,.01,1,1,1)
S ^CRHD(183,DA(2),1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",183,183.12,.01,1,1,2)
K ^CRHD(183,DA(2),1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",183,183.12,.01,3)
Answer must be 1-30 characters in length.
"^DD",183,183.12,.01,"DT")
3071119
"^DD",183.2,183.2,0)
FIELD^^1^2
"^DD",183.2,183.2,0,"DT")
3071119
"^DD",183.2,183.2,0,"IX","AC",183.21,1)

"^DD",183.2,183.2,0,"IX","AD",183.21,5)

"^DD",183.2,183.2,0,"IX","B",183.2,.01)

"^DD",183.2,183.2,0,"IX","C",183.21,.01)

"^DD",183.2,183.2,0,"IX","D",183.21,1)

"^DD",183.2,183.2,0,"NM","CRHD TEMPORARY DATA")

"^DD",183.2,183.2,.01,0)
FIELD NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",183.2,183.2,.01,1,0)
^.1
"^DD",183.2,183.2,.01,1,1,0)
183.2^B
"^DD",183.2,183.2,.01,1,1,1)
S ^CRHD(183.2,"B",$E(X,1,30),DA)=""
"^DD",183.2,183.2,.01,1,1,2)
K ^CRHD(183.2,"B",$E(X,1,30),DA)
"^DD",183.2,183.2,.01,3)
Answer must be 3-30 characters in length.
"^DD",183.2,183.2,.01,"DT")
3071119
"^DD",183.2,183.2,1,0)
PATIENT^183.21P^^1;0
"^DD",183.2,183.21,0)
PATIENT SUB-FIELD^^6^7
"^DD",183.2,183.21,0,"DT")
3071119
"^DD",183.2,183.21,0,"IX","AC",183.21,1)

"^DD",183.2,183.21,0,"IX","B",183.21,.01)

"^DD",183.2,183.21,0,"IX","D",183.21,1)

"^DD",183.2,183.21,0,"NM","PATIENT")

"^DD",183.2,183.21,0,"UP")
183.2
"^DD",183.2,183.21,.01,0)
PATIENT^MRP2'^DPT(^0;1^Q
"^DD",183.2,183.21,.01,1,0)
^.1
"^DD",183.2,183.21,.01,1,1,0)
183.21^B
"^DD",183.2,183.21,.01,1,1,1)
S ^CRHD(183.2,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",183.2,183.21,.01,1,1,2)
K ^CRHD(183.2,DA(1),1,"B",$E(X,1,30),DA)
"^DD",183.2,183.21,.01,1,2,0)
183.2^C
"^DD",183.2,183.21,.01,1,2,1)
S ^CRHD(183.2,"C",$E(X,1,30),DA(1),DA)=""
"^DD",183.2,183.21,.01,1,2,2)
K ^CRHD(183.2,"C",$E(X,1,30),DA(1),DA)
"^DD",183.2,183.21,.01,1,2,"DT")
3071120
"^DD",183.2,183.21,.01,"DT")
3071120
"^DD",183.2,183.21,1,0)
AUTHOR^P200'^VA(200,^0;2^Q
"^DD",183.2,183.21,1,1,0)
^.1
"^DD",183.2,183.21,1,1,1,0)
183.21^D^MUMPS
"^DD",183.2,183.21,1,1,1,1)
S ^CRHD(183.2,"D",X,+^CRHD(183.2,DA(1),1,DA,0),DA(1),DA)=""
"^DD",183.2,183.21,1,1,1,2)
K ^CRHD(183.2,"D",X,+^CRHD(183.2,DA(1),1,DA,0),DA(1),DA)
"^DD",183.2,183.21,1,1,1,"DT")
3071120
"^DD",183.2,183.21,1,1,2,0)
183.21^AC^MUMPS
"^DD",183.2,183.21,1,1,2,1)
D XREF^CRHD2(DA(1),DA)
"^DD",183.2,183.21,1,1,2,2)
D KILXREF^CRHD2(DA(1),DA)
"^DD",183.2,183.21,1,1,2,"DT")
3080201
"^DD",183.2,183.21,1,"DT")
3080201
"^DD",183.2,183.21,2,0)
DATE ENTERED^D^^0;3^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",183.2,183.21,2,"DT")
3071119
"^DD",183.2,183.21,3,0)
LAST EDITED BY^P200'^VA(200,^0;4^Q
"^DD",183.2,183.21,3,"DT")
3071119
"^DD",183.2,183.21,4,0)
DATE/TIME OF LAST EDIT^D^^0;5^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",183.2,183.21,4,"DT")
3071119
"^DD",183.2,183.21,5,0)
PRIVATE^S^1:YES;0:NO;^0;6^Q
"^DD",183.2,183.21,5,1,0)
^.1
"^DD",183.2,183.21,5,1,1,0)
183.2^AD^MUMPS
"^DD",183.2,183.21,5,1,1,1)
D ONOFFPRV^CRHD2(X,DA(1),DA)
"^DD",183.2,183.21,5,1,1,2)
Q
"^DD",183.2,183.21,5,1,1,"DT")
3080201
"^DD",183.2,183.21,5,"DT")
3080201
"^DD",183.2,183.21,6,0)
READ ONLY^S^1:YES;0:NO;^0;7^Q
"^DD",183.2,183.21,6,"DT")
3071119
"^DD",183.3,183.3,0)
FIELD^^2^4
"^DD",183.3,183.3,0,"DT")
3071119
"^DD",183.3,183.3,0,"IX","B",183.3,.01)

"^DD",183.3,183.3,0,"NM","CRHD HOT TEAM PATIENT LIST")

"^DD",183.3,183.3,.01,0)
TEAM^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",183.3,183.3,.01,1,0)
^.1
"^DD",183.3,183.3,.01,1,1,0)
183.3^B
"^DD",183.3,183.3,.01,1,1,1)
S ^CRHD(183.3,"B",$E(X,1,30),DA)=""
"^DD",183.3,183.3,.01,1,1,2)
K ^CRHD(183.3,"B",$E(X,1,30),DA)
"^DD",183.3,183.3,.01,3)
Answer must be 3-30 characters in length.
"^DD",183.3,183.3,.01,"DT")
3071119
"^DD",183.3,183.3,.02,0)
INACTIVE^D^^0;2^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",183.3,183.3,.02,"DT")
3071119
"^DD",183.3,183.3,1,0)
PATIENTS^183.31P^^1;0
"^DD",183.3,183.3,2,0)
PROVIDERS^183.32P^^2;0
"^DD",183.3,183.31,0)
PATIENTS SUB-FIELD^^6^7
"^DD",183.3,183.31,0,"DT")
3071119
"^DD",183.3,183.31,0,"IX","B",183.31,.01)

"^DD",183.3,183.31,0,"NM","PATIENTS")

"^DD",183.3,183.31,0,"UP")
183.3
"^DD",183.3,183.31,.01,0)
PATIENTS^MP2'^DPT(^0;1^Q
"^DD",183.3,183.31,.01,1,0)
^.1
"^DD",183.3,183.31,.01,1,1,0)
183.31^B
"^DD",183.3,183.31,.01,1,1,1)
S ^CRHD(183.3,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",183.3,183.31,.01,1,1,2)
K ^CRHD(183.3,DA(1),1,"B",$E(X,1,30),DA)
"^DD",183.3,183.31,.01,"DT")
3071119
"^DD",183.3,183.31,1,0)
ATTENDING^F^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",183.3,183.31,1,3)
Answer must be 1-30 characters in length.
"^DD",183.3,183.31,1,"DT")
3071119
"^DD",183.3,183.31,2,0)
RESIDENT^F^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",183.3,183.31,2,3)
Answer must be 1-30 characters in length.
"^DD",183.3,183.31,2,"DT")
3071119
"^DD",183.3,183.31,3,0)
INTERN^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",183.3,183.31,3,3)
Answer must be 1-30 characters in length.
"^DD",183.3,183.31,3,"DT")
3071119
"^DD",183.3,183.31,4,0)
FELLOW^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",183.3,183.31,4,3)
Answer must be 1-30 characters in length.
"^DD",183.3,183.31,4,"DT")
3071119
"^DD",183.3,183.31,5,0)
MED STUDENT^F^^0;6^K:$L(X)>30!($L(X)<1) X
"^DD",183.3,183.31,5,3)
Answer must be 1-30 characters in length.
"^DD",183.3,183.31,5,"DT")
3071119
"^DD",183.3,183.31,6,0)
NURSE^F^^0;7^K:$L(X)>30!($L(X)<1) X
"^DD",183.3,183.31,6,3)
Answer must be 1-30 characters in length.
"^DD",183.3,183.31,6,"DT")
3071119
"^DD",183.3,183.32,0)
PROVIDERS SUB-FIELD^^5^6
"^DD",183.3,183.32,0,"DT")
3071119
"^DD",183.3,183.32,0,"IX","B",183.32,.01)

"^DD",183.3,183.32,0,"NM","PROVIDERS")

"^DD",183.3,183.32,0,"UP")
183.3
"^DD",183.3,183.32,.01,0)
PROVIDERS^MP200'^VA(200,^0;1^Q
"^DD",183.3,183.32,.01,1,0)
^.1
"^DD",183.3,183.32,.01,1,1,0)
183.32^B
"^DD",183.3,183.32,.01,1,1,1)
S ^CRHD(183.3,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",183.3,183.32,.01,1,1,2)
K ^CRHD(183.3,DA(1),2,"B",$E(X,1,30),DA)
"^DD",183.3,183.32,.01,"DT")
3071119
"^DD",183.3,183.32,1,0)
CLASS^S^ATTN:ATTENDING;RES:RESIDENT;INTERN:INTERN;FELLOW:FELLOW;STUD:MED STUDENT;NUR:NURSE;^0;2^Q
"^DD",183.3,183.32,1,"DT")
3071119
"^DD",183.3,183.32,2,0)
MODIFY PATIENT LIST^S^1:YES;0:NO;^0;3^Q
"^DD",183.3,183.32,2,"DT")
3071119
"^DD",183.3,183.32,3,0)
MODIFY PROVIDER LIST^S^1:YES;0:NO;^0;4^Q
"^DD",183.3,183.32,3,"DT")
3071119
"^DD",183.3,183.32,4,0)
PAGER^F^^0;5^K:$L(X)>20!($L(X)<3) X
"^DD",183.3,183.32,4,3)
Answer must be 3-20 characters in length.
"^DD",183.3,183.32,4,"DT")
3071119
"^DD",183.3,183.32,5,0)
OFFICE PHONE^F^^0;6^K:$L(X)>20!($L(X)<3) X
"^DD",183.3,183.32,5,3)
Answer must be 3-20 characters in length.
"^DD",183.3,183.32,5,"DT")
3071119
"^DD",183.4,183.4,0)
FIELD^^2^3
"^DD",183.4,183.4,0,"DT")
3080411
"^DD",183.4,183.4,0,"IX","B",183.4,.01)

"^DD",183.4,183.4,0,"NM","CRHD TEAM CONTACT LIST")

"^DD",183.4,183.4,.01,0)
TEAM^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",183.4,183.4,.01,1,0)
^.1
"^DD",183.4,183.4,.01,1,1,0)
183.4^B
"^DD",183.4,183.4,.01,1,1,1)
S ^CRHD(183.4,"B",$E(X,1,30),DA)=""
"^DD",183.4,183.4,.01,1,1,2)
K ^CRHD(183.4,"B",$E(X,1,30),DA)
"^DD",183.4,183.4,.01,3)
Answer must be 3-30 characters in length.
"^DD",183.4,183.4,.01,"DT")
3071119
"^DD",183.4,183.4,1,0)
PROVIDERS^183.41P^^1;0
"^DD",183.4,183.4,2,0)
FILENAME^F^^2;1^K:$L(X)>30!($L(X)<2) X
"^DD",183.4,183.4,2,1,0)
^.1^^0
"^DD",183.4,183.4,2,3)
Answer must be 2-30 characters in length.
"^DD",183.4,183.4,2,"DT")
3080411
"^DD",183.4,183.41,0)
PROVIDERS SUB-FIELD^^3^4
"^DD",183.4,183.41,0,"DT")
3071119
"^DD",183.4,183.41,0,"IX","B",183.41,.01)

"^DD",183.4,183.41,0,"NM","PROVIDERS")

"^DD",183.4,183.41,0,"UP")
183.4
"^DD",183.4,183.41,.01,0)
PROVIDERS^MP200'^VA(200,^0;1^Q
"^DD",183.4,183.41,.01,1,0)
^.1
"^DD",183.4,183.41,.01,1,1,0)
183.41^B
"^DD",183.4,183.41,.01,1,1,1)
S ^CRHD(183.4,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",183.4,183.41,.01,1,1,2)
K ^CRHD(183.4,DA(1),1,"B",$E(X,1,30),DA)
"^DD",183.4,183.41,.01,"DT")
3071119
"^DD",183.4,183.41,1,0)
CLASS^S^ATTN:ATTENDING;RES:RESIDENT;INTERN:INTERN;FELLOW:FELLOW;STUD:STUDENT;NUR:NURSE;^0;2^Q
"^DD",183.4,183.41,1,"DT")
3071119
"^DD",183.4,183.41,2,0)
PAGER^F^^0;3^K:$L(X)>20!($L(X)<3) X
"^DD",183.4,183.41,2,3)
Answer must be 3-20 characters in length.
"^DD",183.4,183.41,2,"DT")
3071119
"^DD",183.4,183.41,3,0)
OFFICE PHONE^F^^0;4^K:$L(X)>20!($L(X)<3) X
"^DD",183.4,183.41,3,3)
Answer must be 3-20 characters in length.
"^DD",183.4,183.41,3,"DT")
3071119
"^DIC",183,183,0)
CRHD HANDOFF PARAMETERS^183
"^DIC",183,183,0,"GL")
^CRHD(183,
"^DIC",183,"B","CRHD HANDOFF PARAMETERS",183)

"^DIC",183.2,183.2,0)
CRHD TEMPORARY DATA^183.2
"^DIC",183.2,183.2,0,"GL")
^CRHD(183.2,
"^DIC",183.2,"B","CRHD TEMPORARY DATA",183.2)

"^DIC",183.3,183.3,0)
CRHD HOT TEAM PATIENT LIST^183.3
"^DIC",183.3,183.3,0,"GL")
^CRHD(183.3,
"^DIC",183.3,"B","CRHD HOT TEAM PATIENT LIST",183.3)

"^DIC",183.4,183.4,0)
CRHD TEAM CONTACT LIST^183.4
"^DIC",183.4,183.4,0,"GL")
^CRHD(183.4,
"^DIC",183.4,"B","CRHD TEAM CONTACT LIST",183.4)

**END**
**END**
