$TXT Created by MCGINNIS,RON at DEVFEX.ISC-ALBANY.VA.GOV  (KIDS) on FRIDAY, 06/02/00 at 11:20
=============================================================================
Run Date: JUL 12, 2000                     Designation: SD*5.3*210
Package : SD - SCHEDULING                      Priority: Mandatory
Version : 5.3       SEQ #199                     Status: Released
=============================================================================

Associated patches: (v)SD*5.3*51   <<= must be installed BEFORE `SD*5.3*210'
                    (v)SD*5.3*177  <<= must be installed BEFORE `SD*5.3*210'
                    (v)SD*5.3*204  <<= must be installed BEFORE `SD*5.3*210'

Subject: PCMM HL7 REJECT PROCESSING/NOIS CORRECTIONS

Category: 
  - Routine
  - Data Dictionary
  - Enhancement (Mandatory)

Description: 
============

 I. DESCRIPTION
  
  This patch introduces changes to the Vista Primary Care Management Module
  (PCMM).  The purpose of this patch description is to provide an overview
  of the functionality that will be delivered in this patch and to provide
  field personnel with instructions on how to acquire, install and
  implement the patch software.
  
  
  
 II. FUNCTIONAL OVERVIEW
  
  This patch introduces changes to the Vista Primary Care Management Module
  (PCMM) to support PCMM HL7 Reject Processing.  There are also NOIS
  issues that are addressed in this patch.  The functionality in this patch
  will be added to the M (MUMPS) server side of the PCMM application and will
  not be added to the PCMM GUI client side of the PCMM application.  
  
  
  1. HL7 Reject Processing
  
   This new functionality provides the data structures necessary to
   store/track the transmission and acknowledgement status of PCMM data
   transmitted to the Austin Automation Center (AAC) database.
   Transmissions identified as containing errors by the AAC will be
   transmitted back to facilities (via HL7 messages) for correction.
  
   To assist the user in identifying PCMM reject errors, a new
   'PCMM HL7 Reject Transmission' menu option has been introduced.  This
   menu option will contain the following sub-menu options:
          ---> PCMM Transmission Error Processing
          ---> PCMM Transmission Error Report
          ---> PCMM Transmission Error Code Report
  
   a) PCMM Transmission Error Processing option
  
      The new 'PCMM Transmission Error Processing' option will allow the
      user to work with lists of patients for which error messages were
      received. The user will be able to select the contents of the list
      selecting all errors or selecting by a date range.  Users will also
      have the ability to sort the list by date/time received, patient
      name, and provider. The list of error messages can be reviewed,
      printed, and marked for re-transmission. Users will not have the
      ability to correct errors through this option. Errors must be
      corrected using the appropriate Vista and PCMM options.
     
      The new 'PCMM HL7 Reject Transmission' option is a new stand-alone
      menu option and is not linked to an existing PCMM menu option.
      This menu option should be given to PCMM users that will be
      responsible for correcting PCMM transmission errors.
  
      A new 'PCMM Retransmit Key' security key is being added to assist the
      site in controlling which individuals may retransmit PCMM data to the
      Austin Automation Center (AAC) using this option. This security key
      should be given to PCMM users that will be responsible for
      retransmitting PCMM transmission errors.
  
   b) PCMM Transmission Error Report option
  
      The new 'PCMM Transmission Error Report' option will be used to
      produce the PCMM TRANSMISSION ERROR REPORT.  This report will allow
      the user to print a list of patients for which HL7 transmission
      errors were received from the Austin Automation Center (AAC). The
      user will have the ability to print all transmission errors or may
      print errors for a selected date range. Users will also have the
      ability to sort the error list by <Patient Name>, <Date/Time Error
      Received>, or <Provider Name>.
  
   c) PCMM Transmission Error Code Report option
  
      The new 'PCMM Error Code Report' option will be used to produce the
      PCMM Transmission Error Code Report.  This report will print a list
      of the error codes and descriptions for entries in the PCMM HL7 ERROR
      CODE file.
  
  
  2. NOIS Corrections
  
   The following NOIS issues are also addressed in this patch:
  
   a) The PCMM GUI allows duplicate position assignments when Multiple
      Patient Position Assignment is used.  Code has been added to lock the
      multiple position assignment process by DFN and position.  Code has
      been added to stop the process if a current team position assignment
      already exists for the patient.
  
      References: [PRO-1199-12309, FRE-0200-60759, ASH-0200-30330,
                   MWV-0100-22845]
  
   b) Beta testing of patch SD*5.3*204 uncovered that all parsing variables
      in the Multiple Assignment and Multiple Reassignment functions were
      not being cleaned up when the function terminated.  This allowed for
      potential Merge naming collisions on Cache/NT systems.  All parsing
      variables will be cleaned up.
  
      References: [REN-0200-62520]
  
  
  
 III. TECHNICAL COMPONENTS
  
  The following section describes the technical components of this patch.
  
  1. The following option(s) will be added
  
   a) NAME: SCMC PCMM REJECT TRANS MENU
      MENU TEXT: PCMM Reject Transmission Menu
      DESCRIPTION: This option will contain all options associated with
      reporting/processing of PCMM HL7 Reject/Error Transmissions.  
  
   b) NAME: SCMC PCMM ERR CODE REPORT
      MENU TEXT: PCMM Transmission Error Code Report
      DESCRIPTION: This report will print a list of the error codes and
      descriptions for entries in the PCMM HL7 ERROR CODE file.  
  
   c) NAME: SCMC PCMM TRANS ERROR PROC
      MENU TEXT: PCMM Transmission Error Processing
      DESCRIPTION: This option permits users to view/work with list of
      patients for which HL7 transmission were received from the Austin
      Automation Center (AAC).  This option will also allow user to mark
      patients for retransmission to the AAC.
  
   d) NAME: SCMC PCMM TRANS ERROR REPORT
      MENU TEXT: PCMM Transmission Error Report
      DESCRIPTION: This option will be used to produce the PCMM
      TRANSMISSION ERROR REPORT.  This report will allow the user to print
      a list of patients for which HL7 transmission errors were received
      from the Austin Automation Center (AAC).
  
  2. The following option(s) have been modified:
  
   a) NAME: SCMC PCMM HL7 TRANSMIT
      MENU TEXT: PCMM HL7 Transmission
      DESCRIPTION: This menu option should be queued to run nightly. It
      will go through the "AACXMIT" x-ref on the PCMM HL7 EVENT file and
      send an HL7 message to the NPCD in Austin for each entry.
  
      Changes:  The option has been modified by adding a loop through the
      PCMM HL7 TRANSMISSION LOG file to find every entry with STATUS="M"
      and re-transmit those entries.
  
  
  3. The following protocol(s) will be added
  
   a) NAME: SCMC LE CHANGE DATE RANGE         
      ITEM TEXT: Change Date Range
      DESCRIPTION: This protocol action permits the user to change the date
      range of the error list being viewed.
  
   b) NAME: SCMC LE CHANGE STATUS
      ITEM TEXT: Change Error Processing Status
      DESCRIPTION: This protocol action permits the user to change the
      error processing status of the error list being viewed.  It allows
      the user to select an error processing status of NEW, CHECKED, or
      BOTH.  
  
   c) NAME: SCMC LE CHECK ERROR OFF LIST
      ITEM TEXT: Mark Error as Checked/Corrected
      DESCRIPTION: This protocol action permits the user to check an error
      with an error processing status of 'NEW' off the list.
  
   d) NAME: SCMC LE DESELECT ALL
      ITEM TEXT: Deselect All for Retransmit
      DESCRIPTION: This protocol action permits the user to Deselect ALL
      patients from retransmission.
  
   e) NAME: SCMC LE DESELECT PATIENT
      ITEM TEXT: Deselect Patient(s) for Retransmit
      DESCRIPTION: This protocol action permits a user to Deselect
      Patient(s) for retransmission.
  
   f) NAME: SCMC LE PCMM TRANSMISSION ERRORS MENU
      ITEM TEXT: PCMM TRANSMISSION ERRORS MENU
      DESCRIPTION: This protocol menu contains all the activities for PCMM
      HL7 Transmission Error Processing.
  
   g) NAME: SCMC LE RETRANSMIT ALL
      ITEM TEXT: Select All for Retransmit
      DESCRIPTION: This protocol action permits a user to mark all patients
      on the list for retransmission.
  
   h) NAME: SCMC LE RETRANSMIT PATIENT
      ITEM TEXT: Select Patient(s) for Retransmit
      DESCRIPTION: This protocol action permits a user to mark a patient on
      the list for retransmission.
  
   i) NAME: SCMC LE SORT LIST
      ITEM TEXT: Change Sort By Criteria
      DESCRIPTION: This protocol action permits the user to sort the error 
      list by Patient Name, Date Acknowledgement Received, or Provider
      Name.
  
  
  4. The following protocol(s) have been modified.
  
   a) NAME: PCMM SEND SERVER FOR ADT-A08
      ITEM TEXT: PCMM SERVER FOR SENDING PC DATA TO NPCDB
      DESCRIPTION: HL7 send server protocol for sending PCMM ADT-A08
      messages, which will contain primary care data used by the NPCD.
  
      Changes:  The acknowledgement message processor has been added.
  
   b) NAME: PCMM SEND CLIENT FOR ADT-A08
      ITEM TEXT: PCMM CLIENT FOR SENDING PC DATA TO NPCDB
      DESCRIPTION: HL7 send client protocol for sending PCMM ADT-A08
      messages, which will contain primary care data used by the NPCD.
  
      Changes:  None.  This protocol is required when sending the PCMM
      SEND SERVER FOR ADT-08 to maintain the logical link after install.
  
   c) NAME: VALM PRINT LIST
      ITEM TEXT: Print List
      DESCRIPTION: This protocol action permits the user to print the
      entire list of entries currently being displayed.
  
      Changes:  None.  This protocol is being attached as an item on the
      new SCMC LE PCMM TRANSMISSION ERRORS MENU protocol.
  
  
  5. The following file changes will be included
  
   a) PCMM PARAMETER (#404.44) file
  
      - Field (#16) HL7 AUTO RETRANSMIT PERIOD
      Description: This new field will store the number of days that an
      auto retransmit of HL7 messages should occur if no ACK message is
      received. 
  
   b) PCMM HL7 TRANSMISSION LOG (#404.471) file
      Description: This is a new file. The file will contain a log of all
      PCMM HL7 Transmissions that have occurred at the medical center.  It
      is also used to track PCMM HL7 Transmission errors that have been
      transmitted back to the medical center from the Austin Automation
      Center (AAC).   
  
   c) PCMM HL7 ERROR CODE (#404.472) file
      Description: This is a new file.  This table file will contain a list
      of all error codes that the Austin Automation Center (AAC) will
      report when processing PCMM HL7 Transmissions.
  
   d) PCMM HL7 ID (#404.49) file  
      Description: This file will be deleted (including data) during the
      patch pre-installation if a pre-release version of SD*5.3*210 has not
      previously been installed.  The file will then be added during the patch
      installation process.  This file stores PCMM HL7 message ID numbers
      for ZPC segments. The file is being deleted so that only ID's exist
      for new "active" data transmitted to the AAC starting with this
      patch.
  
  
  6. The following Mail Group(s) will be added
  
   a) NAME: PCMM TRANSMISSION ERRORS
      Description: This mail group is used to notify the local site that
      PCMM HL7 Transmission errors were received from the Austin Automation
      Center (AAC).
  
    
  7. The following List Template(s) will be added
    
   a) NAME: SCMC PCMM TRANSMISSION ERRORS
      Description:  This list template will be used to display the list of
      PCMM transmission errors using the new SCMC PCMM TRANS ERROR PROC
      option.
  
  
  8. The following Security Key(s) will be added:
    
   a) NAME: SCMC PCMM RETRANSMIT
      DESCRIPTIVE NAME: PCMM Retransmit Key
      Description: This security key is used to lock the SCMC PCMM TRANS
      ERROR PROC [PCMM Transmission Error Processing] option in the PCMM
      module.  The purpose of this security key is to assist the site in
      controlling which individuals may retransmit PCMM data to the Austin
      Automation Center (AAC). This security key should be assigned to PCMM
      users that will be responsible for retransmitting PCMM transmission
      errors.
  
  
  9. The following routine(s) will be included:
  
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
  
  
      <tab>;;5.3;Scheduling;**[patch list]**;AUG 13, 1993
  
                             CHECK^XTSUMBLD results
   Routine name      Before Patch          After Patch         Patch List
   ============      ============          ===========         ==========
   SCAPMC29               2534984              2759015           41,210
   SCMCBK1               10237483             10066709          41,51,210
   SCMCBK6                1832960              1938533         148,177,210
   SCMCBK8                4560566              4969066         148,177,210
   SCMCHLA                    N/A              3507352             210
   SCMCHLA1                   N/A              1817678             210
   SCMCHLA2                   N/A               378283             210
   SCMCHLB                2732193              2674353         177,204,210
   SCMCHLB2               4120516              4120516         177,204,210
   SCMCHLG                2380461              2938558           177,210
   SCMCHLL                    N/A              2656955             210
   SCMCHLM                2193938              4982839           177,210
   SCMCHLR1                   N/A              2603824             210
   SCMCHLR2                   N/A              5190738             210
   SCMCHLR3                   N/A              8635219             210
   SCMCHLR4                   N/A              6542102             210
   SCMCHLR5                   N/A              4810656             210
   SCMCHLR7                   N/A               237459             210
   SCMCHLR8                   N/A              3738199             210
   SCMCHLR9                   N/A              6953434             210
   SCMCHLRI                   N/A              4410316             210
   SCMCHLRR                   N/A              4669704             210
   SCMCHLS                1380175              1517025           177,210
   SCMCHLZ                2120667              2345051           177,210
   SD53P210                   N/A              3765940             210
  
  
  
 IV. SOFTWARE AND DOCUMENTATION RETRIEVAL
  
  This patch will be distributed in a Packman patch message through the
  National Patch Module and should be obtained from there.  The KIDs build
  for this patch is SD*5.3*210.
  
  
  The documentation is available on the following OI Field Office
  directory:
  
     Field Office       FTP Address      Directory
     ------------       -------------    ------------------
     Hines              152.129.1.110    anonymous.software
     Albany             152.127.1.5      anonymous.software
     Salt Lake City     152.131.2.1      anonymous.software
  
   The following documentation files will be available:
  
     SD_53_210tm.pdf       ---> PIMS V. 5.3 Technical Manual Changes
     SD_53_210PCMMUG.pdf   ---> PCMM User Guide Changes
     PCMMUGAPPX.pdf        ---> PCMM User Guide Appendix
  
   Please use the appropriate FTP capability to retrieve the documentation.
   (All .pdf type files should be downloaded as binary.)
  
  
  
 V. INSTALLATION INSTRUCTIONS
  
  o This patch requires the following patches be installed:
      ---> SD*5.3*51
      ---> SD*5.3*177
      ---> SD*5.3*204
  
  o Installation of this patch may occur with all users on the system
    except PCMM users.  It is highly recommended that PCMM users not be
    running PCMM software at the time of this installation. Installation
    should take less than 5 minutes.
  
  Installation Steps:
  ===================
  
   1. Send the PackMan patch message to the account in which you wish to
      install the build.
   
   2. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.  This
      will load the PackMan KIDS build.
  
   3. Review your mapped set. If any of the routines listed in the Routine 
      Summary section of this patch are mapped, they should be removed from
      the mapped set at this time.
   
   4. From the 'Kernel Installation & Distribution System' menu, select the
      Installation menu.
  
   5. From this menu, you may now elect to use the following options (when
      prompted for INSTALL NAME, enter SD*5.3*210).
  
      a. Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch. It will NOT
         backup any changes such as DDs or templates.
   
      b. Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch is
         installed. It compares all components of the patch (routines, DDs,
         templates, etc
   
      c. Verify Checksums in Transport Global - This option will allow you
         to ensure the integrity of the routines that are in the transport
         global.
  
   6. Use the Install Package(s) option and select package SD*5.3*210.
  
   7. The install will ask if you wish to rebuild menu trees. It is 
      recommended that you answer NO to this prompt. The trees will be
      rebuilt the next time the system does this task.
  
   8. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
      YES//', it is recommended you answer NO. The disabling of the PCMM
      options will help protect PCMM data.
  
   9. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
      and Protocols? YES//', respond YES.  When prompted to select the
      options you would like to place out of order, enter the following:
  
       --> SCMC PCMM GUI WORKSTATION PCMM GUI Workstation
       --> SC PCMM PT LIST W/TEAM ASSIGN Patient Listing for Team
           Assignments
       --> SC PCMM PRACT PATIENTS Practitioner's Patients
       --> SC PCMM REPORTS MENU PCMM Reports
  
  10. If routines were unmapped as part of Step 3, they should be returned
      to the mapped set once the installation has run to completion.
  
  11. The routine SD53P210 that contains ENV/PRE/POST install items may be
      deleted from your system.
  
  12. Verify that the PCMM HL7 Transmission [SCMC PCMM HL7 TRANSMIT] option
      is scheduled to run at least once per day when the system load is
      usually low (i.e. 1:00am).  If the option needs to be scheduled,
      please do the following:
       a. From the TaskMan Management Menu, select the Schedule/Unschedule
          Options option.
       b. At the "Select OPTION to schedule or reschedule: " prompt, enter
          SCMC PCMM HL7 TRANSMIT.
       c. At the "Are you adding SCMC PCMM HL7 TRANSMIT as a new OPTION
          SCHEDULING ? " prompt, enter YES.
       d. In the ScreenMan form, enter T+1@01:00 into the QUEUED TO RUN AT
          WHAT TIME field and 1D into the RESCHEDULING FREQUENCY field.
       e. Save changes and exit the form.
  
  13. Verify that the PCMM HL7 Link is not "Halting" or "SHUTDOWN" in the 
      HL7 Systems Link Monitor.  If the PCMM link needs to be started, use
      option "SL" in the "Filer and Link Management Options" of the HL7 Main 
      Menu.  
  
  14. The new PCMM HL7 Reject Transmission [SCMC PCMM REJECT TRANS MENU]
      option is a new stand-alone menu option and is not linked to an
      existing PCMM menu option.  This menu option should be given to PCMM
      users that will be responsible for correcting PCMM transmission errors.
  
  15. A new PCMM Retransmit Key [PCMM RETRANSMIT KEY] security key is being
      added to assist the site in controlling which individuals may
      retransmit PCMM data to the Austin Automation Center (AAC) using the
      new PCMM Transmission Error Processing [SCMC PCMM TRANS ERROR PROC]
      option. This security key should be given to PCMM users that will be
      responsible for retransmitting PCMM transmission errors.

Routine Information:
====================

Routine Name:
  - SCAPMC29


Routine Checksum:

Routine Name:
  - SCMCBK1


Routine Checksum:

Routine Name:
  - SCMCBK6


Routine Checksum:

Routine Name:
  - SCMCBK8


Routine Checksum:

Routine Name:
  - SCMCHLA


Routine Checksum:

Routine Name:
  - SCMCHLA1


Routine Checksum:

Routine Name:
  - SCMCHLA2


Routine Checksum:

Routine Name:
  - SCMCHLB


Routine Checksum:

Routine Name:
  - SCMCHLB2


Routine Checksum:

Routine Name:
  - SCMCHLG


Routine Checksum:

Routine Name:
  - SCMCHLL


Routine Checksum:

Routine Name:
  - SCMCHLM


Routine Checksum:

Routine Name:
  - SCMCHLR1


Routine Checksum:

Routine Name:
  - SCMCHLR2


Routine Checksum:

Routine Name:
  - SCMCHLR3


Routine Checksum:

Routine Name:
  - SCMCHLR4


Routine Checksum:

Routine Name:
  - SCMCHLR5


Routine Checksum:

Routine Name:
  - SCMCHLR7


Routine Checksum:

Routine Name:
  - SCMCHLR8


Routine Checksum:

Routine Name:
  - SCMCHLR9


Routine Checksum:

Routine Name:
  - SCMCHLRI


Routine Checksum:

Routine Name:
  - SCMCHLRR


Routine Checksum:

Routine Name:
  - SCMCHLS


Routine Checksum:

Routine Name:
  - SCMCHLZ


Routine Checksum:

Routine Name:
  - SD53P210


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : LOUCK,KEVIN                    Date Entered : DEC 08, 1999
Completed By: MCGINNIS,RONALD P (EDS)     Date Completed: JUN 15, 2000
Released By : BROCKERT,JUDY                 Date Released : JUL 12, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT
