$TXT Created by              T at DEVVVV.DOMAIN.EXT  (KIDS) on Friday, 09/20/19 at 12:23
=============================================================================
Run Date: NOV 19, 2019                     Designation: SD*5.3*731
Package : SD - SCHEDULING                     Priority: EMERGENCY
Version : 5.3       SEQ #594                    Status: Released
                  Compliance Date: DEC 03, 2019
=============================================================================

Associated patches: (v)SD*5.3*723  <<= must be installed BEFORE `SD*5.3*731'

Subject: Patch on 723

Category: 
  - PATCH FOR A PATCH
  - Routine
  - Other

Description:
============

 Patch SD*5.3*731 enhances the appointment correcting routine used by the 
 options Manually Fix Appointments with No Resource [SDEC NO RES APPT FIX]
 and Automatically Fix Appointments with No Resource [SDEC NO RES APPT AUTO
 FIX] that were introduced in patch SD*5.3*723. It also has a fix to the
 SDEC EP WAIT LIST Remote Procedure Call (RPC) to strip time from the
 Clinically Indicated Date (CID) if it is present. This fix allows
 schedulers to cancel VA Online Scheduling (VAOS) appointments from the 
 VistA Scheduling Enhancement Graphical User Interface (VSE GUI) calendar
 without error.
  
 The routine in SD*5.3*723 would not repair appointments in the SDEC 
 APPOINTMENT file (#409.84) where the current state (active or cancelled)
 was different from the appointment status in the PATIENT file (#2).
  
 The new version can flag a SDEC APPOINTMENT file (#409.84) entry as
 cancelled and will copy the cancellation data from the corresponding
 PATIENT file (#2) entry into the appropriate fields. It can also change a 
 SDEC APPOINTMENT file (#409.84) entry from cancelled to active and will
 remove the cancellation data.  The enhanced version also compares
 appointments in the PATIENT (#2) and HOSPITAL LOCATION file (#44) to
 ensure consistency between them so that VSE and VistA Scheduling
 can function properly.
  
 This patch also adds a new option Appointments with no resource report
 [SDEC NO RES  APPT REPORT]; this report option uses the same criteria as 
 the Automatically Fix Appointments with No Resource option [SDEC NO RES 
 APPT AUTO FIX] without making any changes. Use the option to review the
 discrepancies between the PATIENT (#2), HOSPITAL LOCATION (#44) and SDEC
 APPOINTMENT (#409.84) files.
  
   Patch Components:
   -----------------
  
   Files & Fields Associated:
  
   File Name (Number)         Field Name (Number)  New/Modified/Deleted
   ------------------         -------------------  --------------------
   N/A
  
  
   Forms Associated:
  
   Form Name    File #    New/Modified/Deleted
   ---------    ------    --------------------
   N/A
  
  
   Mail Groups Associated:
  
   Mail Group Name    New/Modified/Deleted
   ---------------    --------------------
   N/A
  
  
   Options Associated:
  
   Option Name                                    Type       New/Modified/
                                                             Deleted    
   -----------                                    ----       -------------
   Appointments with No Resource Report 
       [SDEC NO RES APPT REPORT]                  Routine    NEW
  
   Supervisor Menu [SDSUP]                        Menu       MODIFIED
  
  
   Protocols Associated:
  
   Protocol Name    New/Modified/Deleted
   -------------    -------------------- 
   N/A
  
  
   Security Keys Associated:
  
   Security Key Name
   -----------------
   N/A
  
  
   Templates Associated:
  
                                                              New/Modified/
   Template Name          Type    File Name (Number)             Deleted 
   -------------          ----    ------------------          -------------
  
   Additional Information:
   N/A
  
  
   New Service Requests (NSRs):
   ----------------------------  
   N/A
  
  
   Patient Safety Issues (PSIs):
   -----------------------------
   HITPS-6559
  
   Defect Tracking System Ticket(s) & Overview:
   --------------------------------------------
   1. RTC 1087933 - Appointment fix options (manual and automatic) do not 
      fix appointments that are cancelled in the PATIENT (#2) and HOSPITAL
      LOCATION (#44) files but not in the SDEC APPOINTMENT file
      (#409.84).  Also need to activate a cancelled SDEC appointment
      (#409.84) file entry if the patient (#2) file entry is active.
  
   Problem:
   -------
   The appointment correction routine developed for patch SD*5.3*723 does
   not repair active SDEC APPOINTMENT file (#409.84) entries when the
   PATIENT file (#2) appointment is cancelled and vice versa.  This problem
   was discovered during production Initial Operating Capacity (IOC)
   testing.
  
   Resolution:
   ----------
   The new appointment routine was modified to change appointment data
   from active to cancelled and cancelled to active to match the 
   corresponding PATIENT file (#2) entry.
  
   The instructions for using the two appointment fixing options are 
   described in detail in patch SD*5.3*723.
  
   2. INC6787649 - Cancels wrong patient appointment when original
                   appointment was made through a self-scheduling
                   application.
      INC5319470 - Managerial Cost Accounting & Analytics (MCAA) report and
                   GUI cancelling wrong appointments.
      INC6138283 - Scheduler tries to cancel Veterans Appointment 
                   Request (VAR)/VA Online Scheduled appointment by right
                   clicking appointment in "Pending Appointments" box at
                   top of VSE screen, and it puts her in another patient's
                   record and tries to cancel an appt. for that patient.
      INC6953752 - Schedulers are stating they are in the middle of 
                   scheduling and patients are flipped.
  
   Problem:
   -------
   When a VAOS-created appointment is cancelled in VSE, the appointment 
   for the previously scheduled appointment, potentially for another
   patient, is cancelled instead.
  
   Resolution:
   ----------
   Appointment cancellation can be performed from the appointment context 
   menu associated with the appointment from either the Pending
   Appointments list or the calendar.  A change was made to a 
   Massachusetts General Hospital Utility Multi-Programming System (MUMPS)
   routine (SDECEPT) that blocked access to the cancel appointment option
   on the calendar.  The block resulted from time being filed along with
   date in the CID field by VAOS.  SDECEPT strips off time when it returns
   data to VS GUI.  The presence of time resulted in an "unhandled
   exception" error in VS GUI blocking access to the cancel appointment
   option.
  
   Note:  This code change does not correct the error in the cancel option 
   on the Pending Appointments list.
  
 ==========================================================================
  
   Test Sites:
   ----------
   North Texas
   Fayetteville, NC
  
  
   Software and Documentation Retrieval Instructions:
   ---------------------------------------------------- 
   Software being released as a host file and/or documentation describing 
   the new functionality introduced by this patch are available.
      
   The preferred method is to retrieve files from
   download.vista.domain.ext. This transmits the files from the first
   available server. Sites may also elect to retrieve files directly from
   a specific server. 
      
   Sites may retrieve the software and/or documentation directly using 
   Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE
   directory at the following OI Field Offices:
      
   Hines:    domain.ext  
   Salt Lake City:    domain.ext
      
   Documentation can also be found on the VA Software Documentation 
   Library at: http://www4.domain.ext/vdl/
  
   
   Title                                        File Name         FTP Mode
     
 --------------------------------------------------------------------------
   VistA Scheduling Enhancements User Guide     VSE_UG.PDF        Binary
  
   
   Patch Installation:
  
  
   Pre/Post Installation Overview:
   -------------------------------
  
   Pre-Installation Instructions:
  
   This patch may be installed with users on the system although it is
   recommended that it be installed during non-peak hours to minimize
   potential disruption to users.  This patch should take less than 5
   minutes to install plus the time required to rebuild the menu trees.
  
  
   No pre- or post-installation steps are required.
  
   Installation Instructions:
   --------------------------
  
   1. Choose the PackMan message containing this patch.
  
   2. Choose the INSTALL/CHECK MESSAGE PackMan option. 
  
   3. From the Kernel Installation and Distribution System Menu, select the
   Installation Menu.  From this menu, you may elect to use the following
   options. When prompted for the INSTALL NAME enter the patch number (ex. 
   SD*5.3*731):
  
   a. Backup a Transport Global - This option will create a backup message 
   of any routines exported with this patch. It will not backup any other
   changes such as DDs or templates.
  
   b. Compare Transport Global to Current System - This option will (allow 
   you to view all changes that will be made when this patch is installed.
   It compares all components of this patch routines, DDs, templates,
   etc.).
  
   c. Verify Checksums in Transport Global - This option will allow you to
   ensure the integrity of the routines that are in the transport global.
  
   4.  From the Installation Menu, select the Install Package(s) option and
   choose the patch to install.
  
   5. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
   Install? YES//', respond YES.
  
   6. When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//',
   respond NO.
  
   7. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
   Protocols? NO//', respond NO.
  
   8. If prompted 'Delay Install (Minutes):  (0 - 60): 0//' respond 0.
  
  
   Back-Out Plan:
   --------------------
   In order to back out this patch, restore the transport global that was 
   saved in Step 3.a. of the installation.  Edit the SDSUP option to remove
   the "Appointments with No Resource Report" [SDEC NO RES APPT REPORT] 
   item and then delete the SDEC NO RES APPT REPORT option.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Scheduling;**[Patch List]**;;Build 7

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SDECDATA
    Before: B33222031   After:B131188343  **723,731**
Routine Name: SDECEPT
    Before:B129602604   After:B132582629  **669,671,731**
 
Routine list of preceding patches: 671, 723

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUL 26, 2019
Completed By:                               Date Completed: NOV 19, 2019
Released By :                               Date Released : NOV 19, 2019
=============================================================================


Packman Mail Message:
=====================

$END TXT
