$TXT Created by WHELAN,ROBERT at MNTDEM.ISC-ALBANY.VA.GOV  (KIDS) on WEDNESDAY, 02/19/97 at 15:51
=============================================================================
Run Date: MAY 20, 1997                     Designation: SD*5.3*51
Package : SD - SCHEDULING                      Priority: Mandatory
Version : 5.3       SEQ #105                     Status: Released
=============================================================================

Associated patches: (v)SD*5.3*41   <<= must be installed BEFORE `SD*5.3*51'
                    (v)SD*5.3*107  <<= must be installed BEFORE `SD*5.3*51'

Subject: PCMM GUI (Client) Fixes

Category: 
  - Informational
  - Routine

Description: 
============

 This patch to the Primary Care Management Module (PCMM) consists of a 
 routine patch to the Scheduling Package (SD*5.3*51), and a replacement
 Windows executable for the graphical user interface (GUI). 
   
 The client workstation (GUI) portion of the patch is not being distributed
 through the National Patch Module.  The client workstation portion of this
 patch is contained in the file, SD_53_51.exe which may be obtained from
 the appropriate Customer Service distribution directory.  Remember to
 download this file as BINARY.
  
 The server (MUMPS) portion of this patch is distributed via the National
 Patch Module.
  
 Sites may install either the client or the server portions independently
 and the software will function at least as well as it did before; however,
 some of the corrected problems require modifications to both the client
 and the server software.
  
 The following problems with the PCMM GUI are corrected by this patch.  If
 there is an associated NOIS, it is shown in parentheses at the end of each
 item:
  
 1.  Patient assignment using right mouse click not displaying patient name
 properly. This was just a display update problem.  Data was being saved
 and retrieved correctly. The Get Patient option on the popup menu returns
 a new team list for the patient selected, but fails to update the header
 information on the form to reflect this new patient.  
 (KAN-0896-41854)
  
 2.  When entering a new position, position name can't be edited until
 after clicking on the OK button. Form headers, the name field display ,
 and the stored value were all corrected by one small change, as is the
 problem being reported.  (MAD-0896-40284 and E3R #8634)
  
 3.  Site set up a position, filled in the first three tabs, saved and were
 prompted to select an activation date.  They canceled out, then clicked on
 the History tab.  When they clicked Add, they got an Elist index out of
 bounds error.  (MAD-0796-41679)
  
 4.  When assigning multiple patients by stop code, clinic enrollment, or
 appointments, then selecting either the stop code or the clinic, user is
 prompted for a date range for the selections.  After selecting beginning
 and ending dates, only the Cancel button is active.  OK can not be
 clicked. Simply tabbing off the dates shown also fails to enable the OK
 button.  This has been corrected.  (ISA-0996-10705)
  
 5.   If user double-clicks on the 'hands' button to logon to DHCP,  GPF
 results in Broker DLL.  This seemed to be only a problem under Windows NT.
  (DUB-1196-31065)
  
 6.  Out of Resources errors when starting PCMM.  Included code to check
 for available resources at startup and before opening other forms.
 (ALB-1296-50628)
  
 7.  If a comma is entered in the 'maximum # of patients' box, as in
 '1,000', an Econvert exception occurs when attempting to assign a patient
 to the team/position.  Fixed by adding code to TextExit procedure for the
 edit box to remove embedded commas before validate/save. Also added code
 to prevent this exception and return the correct result if existing data
 contains a comma.  (DUB-1296-31472)
  
 8.   If there is no eligibility code for a patient, SSN does not display
 on patient lookup.  Corrected on server by patch SD*5.3*86, which returns
 SSN if eligibility code null.  Corrected further in GUI by using this SSN
 on the Team Assignment screen if no eligibility code is available.
 (DUB-1296-31487)
  
 9.   Problem updating patient-team assignment.  Discharge date could not
 be changed once entered.
  
 10.  Problem editing team name in team setup. Problem occurs when changing
 team name, then clicking SAVE without tabbing off name field.  Name's
 TextExit event handler executes first, leaving SAVE button in a depressed
 state, but requiring another click.  CLOSE button has same problem.
  
 11.  On the Position Set Up screen, help for Messages and History tabs is
 switched.
  
 12.  Fixed storing of preferences and restoring defaults (colors and
 fonts), as well as Primary Care defaults for the workstation.  All are now
 saved and retrieved to/from PCMM.INI.  Also added code to capture user's
 institution at signon and use as the default institution for new teams
 being created. This involved a change to GETUSER^SCUTBK3 on the server.
  
 13.  Changed 'before contimuing' to 'before continuing' in message shown
 when checking maximum assignments allowed for a team. 
  
 14.  Inactivated STAFF button if team has no positions shown.  Fixed by
 setting 'Enabled' state of button based on the contents of the position
 list.
  
 15. On Patient Lookup, Staff Lookup, and Team Selection lists, clicking OK
 with no items in list returns exception and allows program abort.  This
 was a runtime bug in the FMLookup component.  Changed logic to match that
 in next release of FMLookup (1.0T2).  
  
 16.  In multiple patient assignments, after a failed assignment, if New
 Assignments box has 0 entries and the '<' button is clicked, program
 returns an Elist exception - index out of bounds. Cancellation at the date
 range screen or returning an empty list as a result of the date range
 screen also leaves '>' and '>>' buttons enabled, and if clicked, an Elist
 exception occurs. Fixed by enabling/disabling all buttons at appropriate
 times, based on the contents of the source list for the button.
  
 17.  In both team and position assignments, if no active items appear in
 the list for the selected patient, and the edit option is clicked on
 either the main or popup menus,  Elist exception results.  Added code to
 both screens to enable/disable EDIT option based on contents of the lists.
  
 18.  If RPCBroker.CreateContext call returns false, the error message
 provided is misleading.  Either the user is not registered to use SC PCMM
 GUI WORKSTATION, or this menu option has been placed out of order.
 Message corrected to reflect these two possibilities.
  
 19. The default date range passed for retrieving a position's information
 when 'Show All Positions' is checked was corrected to prevent Y2K problems
 in the near future.  The same problem was corrected for retrieving a
 team's information when 'Show All Team Assignments' is checked.
  
 20.  On the team assignment screen, right click produces a popup menu
 whose choices are Save and Cancel.  These menu choices are ALWAYS enabled,
 but should match the state of the respective buttons shown on the screen.
 Added code to synchronize this.
  
 21.  On patient lookup list box, added ', and SSN' to caption.
  
 22.  In Patient Lookup, if user enters fewer than 3 characters for lookup,
 or if no matches are returned, the message box that results comes up
 BEHIND the lookup screen and can not be read or closed (Win95).  Same
 problem with Staff Lookup.  
  
 23.  On Position Set Up screen, if no positions are in list, and Remove
 Position menu option is clicked, a Broker Error results, ending in
 shutdown.  Disabled the option if no positions in list.  Same problem and
 solution for Delete History option.
  
 24.  Multiple patient assignments to a position by appointment date was
 not correctly returning a list of those patients available.  This occurred
 because of a date range checking problem, and has been corrected.
 (MIN-1096-40845, SDC-0996-61657)
  
 25.  It was possible to assign the same patient to the same team multiple
 times on the same date.  This has been corrected. (BED-0996-10381,
 DAY-1296-40672)
  
 26. Problems editing a patient's position assignment and its primary care
 role (Practitioner, Attending, Other) have been corrected.  There were
 occasional problems with the correct radio buttons not always being
 selectable, and with assignments set to 'Other' not always being
 modifiable once set.
  
 27.  Prior to this patch, if an inactivation date had been added for a
 team, and the team had currently active patients, it was impossible to
 delete the inactivation date.  A correction in this patch allows deletion
 under these circumstances.
  
 28.  On the Primary Care Team Profile history screen, if 'Open' is
 selected from the menu while a history entry is active (selected and
 editable), and the user cancels from the team selection list screen, an
 EInvalidOperation exception occurs when trying to redisplay the team setup
 window.  This has been corrected.
  
  
 The following GUI enhancements are also included in this patch:
  
 1.  Added menu item to Options menu, allowing setting the following items
 to 'primary care' as a workstation preference, saved in PCMM.INI.  If the
 menu item is checked, the following are set to Primary Care as the
 default.  Otherwise, they are not.  The default is to have the menu item
 checked and primary care as the default.  
  
 -  Default purpose of team set to 'Primary Care'
 -  Default response to 'Primary Care Team?' is 'Yes'
 -  Position definition 'Can provide Primary Care' defaults to 'Yes'.
 -  On multiple assignments screen, default for 'Make this a Primary Care
    Assignment?' is 'Yes', and 'PC Role' is 'PC Practitioner'.  If a
    non-primary care team or position is selected for assignment of the
    patient, these controls are now set to non-primary care options and
    also disabled.
  
 2.  Included a button on the Position Set Up screen to add a new
 position.  Currently user must right-mouse click or select from the 'Edit'
 menu to add a new position. 
  
 3.  Included a button on the Staff Assignment Add/Edit screen to assign or
 inactivate a staff member from a position - currently user must
 right-mouse click or select from the 'Edit' menu to assign or inactivate a
 staff member.
  
 4.  Added a new security 'SC PCMM SETUP'.  Allocation of this key to a
 user allows all PCMM team and position setup functionality, multiple
 patient assignments, and report template creation and use within the GUI.
 Users without this key will be limited to single patient assignments to a
 team or position.  It is highly recommended that security keys be
 allocated on the server prior to installation of the GUI software on a
 workstation.  Otherwise, users who currently use the PCMM setup options
 will be unable to do so until the new key is allocated.  Therefore, the
 installation sequence should be as follows:  (1)  Install server patch
 SD*5.3*51;  (2)  Allocate the new 'SC PCMM SETUP' security key;  and (3)
 Install the GUI software.  Users of the previous version of the GUI
 software will be unaffected by the key change.
  
 5.  All visible references to 'DHCP' have been changed to 'VistA'.  The 
 exception to this is the default RPCBroker server 'DHCPSERVER', which has 
 kept its original name to prevent potential configuration problems.
  
 The software is being distributed as follows:
  
   (1) The GUI software is distributed in one file, which may be obtained 
       using FTP from the appropriate Customer Service directory:
   
          SD_53_51.EXE - This is a MS Windows(TM) software 
          installation program for the client software and
          documentation.
  
       PCMM Documentation included in this patch:
  
        PCMMIG.PDF      51,925  05-31-96  3:40p     Installation Guide
        PCMMIMP.PDF    352,568  05-30-96  9:44a     Implementation Guide
        PCMMRN.PDF     115,543  05-29-96 10:45a     Release Notes
        PCMMUG.PDF     414,172  05-24-96 10:59a     User's guide
  
       NOTE: Documentation and online help have NOT been updated in
       this patch.  These are the original versions of the documentation
       included in the original PCMM release in SD*5.3*41.  They require
       the freeware Adobe Acrobat Reader for viewing and/or printing.
       During client installation, you will be given the opportunity to
       install or not install these files, as you see fit.
  
   (2) The server software consists of the enclosed PackMan message.
  
  
 ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Scheduling;**[patch list]**;AUG 13, 1993
  
                         CHECK^XTSUMBLD results
  Routine name     Before Patch          After Patch         Patch List
  ============     ============          ===========         ==========
  SCMCBK                6524045              6542624           41,51
  SCMCBK1              10209017             10237483           41,51
  SCMCDD               12646275             12778341           41,51
  SCUTBK3               1951821              2029958           41,51
  
  
 INSTALLATION INSTRUCTIONS:
  ==========================
  
 Patches SD*5.3*41 and SD*5.3*107 must be installed prior to installing the
 software in this patch.
  
 CLIENT
  
 The client installation will completely replace your previous installation
 of PCMM.  You will be prompted to indicate whether you would like to
 create backup copies of all files replaced as an option during the
 installation.
  
 1.  Get SD_53_51.EXE file. This will be obtained from the appropriate
 anonymous software directory.   Make sure to set transfer as BINARY.
 Depending on the FTP software, this file might be placed in the
 c:\WINDOWS, c:\, or some other directory.  Careful attention to the FTP
 client's setup should show where downloaded files will be placed.  If you
 cannot find it, use Window's File Manager's Search functionality.  It is
 also possible, in rare cases, that the FTP process may modify the filename
 in some way.  If this occurs, once found, rename the file to the correct
 'SD_53_51.EXE'.
  
  
 2. Copy the file SD_53_51.EXE file into an empty (temporary or scratch)
 directory.
  
 3. Run the SD_53_51.EXE (double click on it). This starts the PCMM
 installation.  Example: Run c:\xxx\SD_53_51.EXE from Program Manager. Take
 all the default prompts unless it causes a conflict.  When the
 installation is complete, a README.TXT file will be displayed.  When
 finished, you can safely delete the SD_53_51.EXE file.
  
 SERVER
  
   This patch can be loaded with users on the system.  Installation
   will take less than 2 minutes.
  
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. If you
       receive the prompt 'Shall I preserve what is on disk in a separate
       back-up message ?', answer NO.  Respond YES at the prompt 'Want to
       Continue with Load? YES//'.
  
   2.  Review your mapped set.  If any of the routines listed in the
       ROUTINE SUMMARY section are mapped, they should be removed
       from the mapped set at this time.
  
   3.  From the Kernel Installation and Distribution System Menu, select 
       the Installation menu.  
  
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter SD*5.3*51):
  
       a.  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
  
       b.  Compare Transport Global to Current System  - this option will
           allow you to view all changes that will be made when the patch
           is installed.  It compares all components of the patch 
           (routines, DDs, templates, etc.).
  
       c.  Verify Checksums in Transport Global - this option will
           allow you to ensure the integrity of the routines that are in
           the transport global.
  
   5.  Use the Install Package(s) option and select the package
       SD*5.3*51.
  
   6.  When prompted 'Want to DISABLE Scheduled Options and Options?
       YES//', respond YES.  When prompted to select the options you
       would like to place out of order, enter the following: 
  
             SC PCMM GUI WORKSTATION          PCMM GUI Workstation
  
   7.  MSM sites:  Please ensure you answer YES when asked if you want 
       to move the routines to other systems and indicate the appropriate 
       CPUs.  Alternately, you can wait until the installation is
       complete and move the routines listed in the ROUTINE SUMMARY
       section to all systems.
  
   8.  If routines were unmapped as part of step 2, they should be 
       returned to the mapped set once the installation has run to 
       completion.

Routine Information:
====================

Routine Name:
  - SCMCBK


Routine Checksum:

Routine Name:
  - SCMCBK1


Routine Checksum:

Routine Name:
  - SCMCDD


Routine Checksum:

Routine Name:
  - SCUTBK3


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : WHELAN,ROBERT E               Date Entered : SEP 06, 1996
Completed By: PODOLEC,JEFFREY               Date Completed: MAY 19, 1997
Released By : ROWE,LINDA                    Date Released : MAY 20, 1997
=============================================================================


Packman Mail Message:
=====================

$END TXT
