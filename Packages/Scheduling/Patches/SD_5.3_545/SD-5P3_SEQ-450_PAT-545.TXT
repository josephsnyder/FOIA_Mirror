$TXT Created by CURTIS,RICHARD L at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 03/10/09 at 15:56
=============================================================================
Run Date: MAY 12, 2009                     Designation: SD*5.3*545
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #450                    Status: Released
                  Compliance Date: JUN 12, 2009
=============================================================================

Associated patches: (v)SD*5.3*334  <<= must be installed BEFORE `SD*5.3*545'
                    (v)SD*5.3*478  <<= must be installed BEFORE `SD*5.3*545'
                    (v)SD*5.3*523  <<= must be installed BEFORE `SD*5.3*545'

Subject: FIXES FOR PRE-CANCELLATION LIST AND DISPLAY APPOINTMENTS

Category: 
  - Routine

Description:
============

 This patch will fix the following issues:
  
 - Errors that occur with the Display Appointments report [SDDISPPEND].
 - Errors that occur with the Pre-Cancellation List.
  
 ASSOCIATED REMEDY TICKETS:
 ==========================
 1) HD0000000225641 - ERROR IN TRAP
 2) HD0000000251759 - <UNDEFINED>START+4^SDC1
  
 ASSOCIATED NSR(S):
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 Central Plains HCS
 Louisville, KY
 Memphis, TN
  
 REMEDY TICKET OVERVIEW:
 =======================
 1)  HD0000000225641 - ERROR IN TRAP
  
     Problem:
     --------
     Occasionally the Display Appointments report [SDDISPPEND] will error 
     (<UNDEFINED>FLEN^SDDPA) when it comes across a missing node in the
     APPOINTMENT sub-file (#44.001) of the HOSPITAL LOCATION file (#44).  
     In these instances, the zero node containing the patient, appointment
     length, date/time created and user who created the appointment is
     undefined, but there is a lingering "C" node for this appointment.  It
     appears the appointments in these instances have been Checked In and
     then subsequently deleted, but for some reason the "C" node is not
     deleted as it should be.  The "C" node in the APPOINTMENT sub-file 
     (#44.001) contains Check In/Check Out data.  This does not occur very
     often, but developers have not been able to determine what causes
     it.  A separate Remedy ticket (HD221097) has been logged for that
     issue and it is still being researched.
  
     Resolution:
     -----------
     Routine SDDPA will be modified to prevent future occurrences of this
     error (<UNDEFINED>FLEN^SDDPA) when the Display Appointments report
     [SDDISPPEND] comes across a lingering "C" node in the APPOINTMENT
     sub-file (#44.001) of the HOSPITAL LOCATION file (#44).  Additionally,
     when possible, if the data values required for the missing zero node
     in the APPOINTMENT sub-file (#44.001) can be extracted from the
     APPOINTMENT sub-file (#44.001) of the PATIENT file (#2), new code has
     been added to routine SDDPA to restore the missing zero node in the
     APPOINTMENT sub-file (#44.001).  If the APPOINTMENT sub-file 
     (#44.001) in the PATIENT file (#2) indicates the appointment has been
     cancelled, then the new code in routine SDDPA will delete the
     lingering "C" node in the APPOINTMENT sub-file (#44.001) of the 
     HOSPITAL LOCATION file (#44).
  
 2)  HD0000000251759 - <UNDEFINED>START+4^SDC1
  
     Problem:
     --------
     Occasionally, when a user is attempting to Cancel a Clinic, option 
     Cancel Clinic Availability [SDCANCEL], for a day or part of a day,
     this error will occur when building the Pre- Cancellation List when it
     comes across a missing zero node in the APPOINTMENT sub-file (#44.001)
     of the HOSPITAL LOCATION file (#44) where there is a lingering "C"
     node. This does not occur very often, but developers have not been
     able to determine what causes it.  A separate Remedy ticket (HD221097)
     has been logged for that issue and it is still being researched.
  
     Resolution:
     -----------
     Routines SDC, SDC0 and SDC1 will be modified to prevent future
     occurrences of this error when the Pre-Cancellation List comes across
     a lingering "C" node in the APPOINTMENT sub-file (#44.001) of the
     HOSPITAL LOCATION file (#44).  However, with this option, Cancel 
     Clinic Availability [SDCANCEL], the required data values are not
     known, so the missing zero node in the APPOINTMENT sub-file (#44.001)
     of the HOSPITAL LOCATION file (#44) cannot be restored, so whenever
     one of these corrupt sub-records is found it will be deleted.
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 Users can be on the system during the installation of this patch.
  
 Installation should take less than 5 minutes.
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]
  
           Edits and Distribution ...
           Utilities ...
           Installation ...
  
     Select Kernel Installation & Distribution System Option:  INStallation
                                                               ---
  
     1     Load a Distribution
     2     Verify Checksums in Transport Global
     3     Print Transport Global
     4     Compare Transport Global to Current System
     5     Backup a Transport Global
     6     Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter SD*5.3*545):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch.  It will NOT
         backup any other changes such as DDs or templates.
  
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will ensure
         the integrity of the routines that are in the transport global.
  
     d.  Print Transport Global - This option will allow you to view
         the components of the KIDS build.
  
 4.  Use the Install Package(s) option and select the package SD*5.3*545.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONS during the
         install? NO//", respond NO.
  
     b.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? NO//", respond YES.
  
         1) When prompted "Enter options you wish to mark as "Out of
            Order":" enter the following option:
  
            Display Appointments         [SDDISPPEND]
            Cancel Clinic Availability   [SDCANCEL]
            Appointment Management       [SDAM APPT MGT]
  
         2) When prompted "Enter protocols you wish to mark as "Out of
            Order":" just press <Return>.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Scheduling;**[Patch List]**;Aug 13, 1993;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SDC
    Before: B25530077   After: B27191984  **15,32,79,132,167,478,487,523,545**
Routine Name: SDC0
    Before: B26494152   After: B35668791  **303,330,379,398,467,478,545**
Routine Name: SDC1
    Before:  B5430963   After:  B6495993  **379,398,439,478,545**
Routine Name: SDDPA
    Before: B20293036   After: B24783116  **140,334,545**
 
Routine list of preceding patches: 334, 523

=============================================================================
User Information:
Entered By  : CURTIS,RICHARD                Date Entered  : OCT 02, 2008
Completed By: SESSLER,APRIL                 Date Completed: MAY 08, 2009
Released By : LANDRIE,LARRY                 Date Released : MAY 12, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
