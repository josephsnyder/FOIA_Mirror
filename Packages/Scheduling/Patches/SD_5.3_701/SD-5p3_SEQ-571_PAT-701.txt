$TXT Created by              T at CHEYL54.FO-BAYPINES.DOMAIN.EXT  (KIDS) on Tuesday, 06/19/18 at 09:16
=============================================================================
Run Date: JUL 31, 2018                     Designation: SD*5.3*701
Package : SD - SCHEDULING                     Priority: EMERGENCY
Version : 5.3       SEQ #571                    Status: Released
                  Compliance Date: AUG 15, 2018
=============================================================================

Associated patches: (v)SD*5.3*679  <<= must be installed BEFORE `SD*5.3*701'

Subject: SCHEDULING: INFINITE LOOP FIX

Category: 
  - Routine

Description:
============

 Description:
 ===========
  
 Changes were made to the following routines:
  
 1. SDEC07 - code modified in APPADD to limit the date of future
 appointments based on field #2002 (MAX # DAYS FOR FUTURE BOOKING) in the 
 Hospital Location (#44) file.  In the event that this field is empty, 
 appointment dates are limited to no more than 390 days in the future.  
 Change made to prevent users from creating appointments too far in the 
 future that FileMan date conversion routines cannot handle them correctly.
  
 2. SDEC57 - code modified in GETLOOPS to prevent an infinite loop 
 occurring when an appointment date past 10/14/2115 is encountered as the 
 XLFDT date conversion routine fails to convert these far future dates 
 correctly.
  
 3. SDEC55A - code modified in APPSDGET to limit the earliest search date 
 to 10 years ago and the latest search date to 390 days in the future.  
 Change made to prevent searching the entire appointment file which
 adversely impacts system performance.
  
 Patch Components
 ================
  
  
 Files & Fields Associated:
  
 File Name (#)          Field Name (#)                      
 New/Modified/Deleted
 -------------          ----------------------------------- 
 --------------------
  
 Forms Associated:
  
 Form Name                File #                  New/Modified/Deleted
 ---------                ------                  --------------------
  
  
 Mail Groups Associated:
  
 Mail Group Name                  New/Modified/Deleted
 ---------------                  --------------------
  
 Options Associated:
  
 Option Name                    Type             New/Modified/Deleted
 -----------                    ----             --------------------
  
 Protocols Associated:
  
 Protocol Name                     New/Modified/Deleted
 -------------                     --------------------
  
 Security Keys Associated:
  
 Security Key Name
 -----------------
  
 Templates Associated:
  
 Template Name      Type      File Name (#)                 
 New/Modified/Deleted
 -------------      ----      ------------------            
 --------------------
  
 Additional Information:
  
  
 New Service Requests (NSRs):
 -----------------------------
  
 Patient Safety Issues (PSIs):
 ------------------------------
  
  
 Defect Tracking Ticket(s) & Overviews:
 -----------------------------
 1.INC0978123 - Numerous tcpip scheduling processes eating up application 
 node resources forcing users to the back end node causing system wide
 issue 
  
 Problem:
 -------
 FileMan date utility XLFDT has a programmed stop date of 10/14/2115.  Any 
 attempt to pass that date in the ADD function returns a -1.  This, in
 turn, causes existing code in SDEC57 to go into an infinite loop.
  
 Resolution:
 ----------
 When a date on or after 10/14/2115 is found, the code in SDEC57 now 
 returns an error to the user.  A change was also made to SDEC07 to prevent
 entry of dates too far in the future.
  
 Test Sites:
 -----------
 Salt Lake City
 Tomah 
  
 Software and Documentation Retrieval Instructions:
 -------------------------------------------------
 Software being released as a host file and/or documentation describing
 the new functionality introduced by this patch are available.
  
 The preferred method is to retrieve files from download.vista.domain.ext.
 This transmits the files from the first available server. Sites may 
 also elect to retrieve files directly from a specific server.
  
 Sites may retrieve the software and/or documentation directly using 
 Secure File Transfer Protocol (SFTP) from the ANONYMOUS.SOFTWARE directly
 at the following OI Field Offices:
  
  
 Hines          domain.ext
 Salt Lake City domain.ext
  
 Documentation can also be found on the VA Software Documentation Library 
 at: http://www4.domain.ext/vdl/
  
 Title                                      File Name             FTP Mode
 --------------------------------------------------------------------------
  
 Patch Installation:
  
  
 Pre/Post Installation Overview
 ------------------------------
  
 This patch may be installed with users on the system although it is 
 recommended that it be installed during non-peak hours to minimize
 potential disruption to users.  This patch should take less than 5 minutes
 to install.
  
 Routine list of preceding patches: 679
  
 Installation Instructions
 -------------------------
  
 1.  Choose the PackMan message containing this patch.
  
 2.  Choose the INSTALL/CHECK MESSAGE PackMan option.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation Menu.  From this menu, you may elect to use the
     following option. When prompted for the INSTALL enter the patch #
     (SD*5.3*701):
  
     a. Backup a Transport Global - This option will create a backup
        message of any routines exported with this patch. It will not
        backup any other changes such as DD's or templates.
     b. Compare Transport Global to Current System - This option will
        allow you to view all changes that will be made when this patch
        is installed.  It compares all components of this patch
        (routines, DD's, templates, etc.).
     c. Verify Checksums in Transport Global - This option will allow
        you to ensure the integrity of the routines that are in the
        transport global.
  
 4.  From the Installation Menu, select the Install Package(s) option and
     choose the patch to install.
  
 5.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
     Install? NO//', respond NO.
  
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//',
     respond NO.
  
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? NO//', respond NO.
  
 8.  If prompted 'Delay Install (Minutes):  (0 - 60): 0//', respond 0.
  
 Post-Installation Instructions:
 ------------------------------
  
 Back-Out Plan:
 -------------
 Restore the 3 routines using the routine save set created when installing 
 the patch.
  
 Routine Information:
 -------------------
  
 The second line of each of these routines now looks like:
  ;;5.3;Scheduling;**[Patch List]**;Aug 13, 1993;Build 3
  
 The checksums below are new checksums, and can be checked with
 CHECK1^XTSUMBLD.
  
 Routine Name: SDEC07
     Before:B193088585   After:B200567128  **627,642,651,658,665,669,671,
                                            672,701**
 Routine Name: SDEC55A
     Before: B80956414   After: B88296381  **627,671,701**
 Routine Name: SDEC57
     Before:B110596286   After:B115815412  **627,642,658,665,701**
  
 Description of Changes:
   SDEC07 - Code added to check that appointment date does not exceed 
   limit specified in the Hospital Location (#44) file, field #2002.
    
   SDEC57 - Code added to prevent an infinite loop from occuring due to -1 
   value returned by XLFDT for the date 10/14/2115 and beyond.
    
   SDEC55A - Code added to limit appointment search to no earlier than 10 
   years in the past and no later than 390 days in the future.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Scheduling;**[Patch List]**;Aug 13, 1993;Build 3

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SDEC07
    Before:B193088585   After:B200567128  **627,642,651,658,665,669,671,
                                           672,701**
Routine Name: SDEC55A
    Before: B80956414   After: B88296381  **627,671,701**
Routine Name: SDEC57
    Before:B110596286   After:B115815412  **627,642,658,665,701**
 Description of Changes:
  SDEC07 - Code added to check that appointment date does not exceed limit 
  specified in the Hospital Location (#44) file, field #2002.
   
  SDEC57 - Code added to prevent an infinite loop from occuring due to -1 
  value returned by XLFDT for the date 10/14/2115 and beyond.
   
  SDEC55A - Code added to limit appointment search to no earlier than 10 
  years in the past and no later than 390 days in the future.

 
Routine list of preceding patches: 672

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUN 18, 2018
Completed By:                               Date Completed: JUL 30, 2018
Released By :                               Date Released : JUL 31, 2018
=============================================================================


Packman Mail Message:
=====================

$END TXT
