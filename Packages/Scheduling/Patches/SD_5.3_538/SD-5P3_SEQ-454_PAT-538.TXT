$TXT Created by WOLF,ED at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 03/09/09 at 15:11
=============================================================================
Run Date: AUG 11, 2009                     Designation: SD*5.3*538
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #454                    Status: Released
                  Compliance Date: SEP 11, 2009
=============================================================================

Associated patches: (v)SD*5.3*446  <<= must be installed BEFORE `SD*5.3*538'
                    (v)SD*5.3*478  <<= must be installed BEFORE `SD*5.3*538'
                    (v)SD*5.3*524  <<= must be installed BEFORE `SD*5.3*538'

Subject: ELECTRONIC WAIT LIST FIXES

Category: 
  - Routine

Description:
============

 This patch addresses several Electronic Wait List (EWL) related issues:
  
 - Correcting functionality of Disposition of open EWL entries with
   matching appointments and update the related documentation.
 - Corrects printing issues for 30, Over 30, Over 120 Day Report [SD WAIT
   LIST 30>30>120 REPORT] option.
 - Corrects total issues for 30, Over 30, Over 120 Day Report [SD WAIT LIST
   30>30>120 REPORT] option.
 - Correct messaging for wait list patients when cancelling appointments.
  
  
 ASSOCIATED NSR(S):
 ==================
 N/A
  
 ASSOCIATED REMEDY TICKETS:
 ========================== 
 1)HD0000000279957- make appointment violate requirement to allow up-arrow?
 2)HD0000000238767- 30, Over 30, Over 120 Day Report problem?   bdj
 3)HD0000000268162- Need some assistance with report 30, Over 30, Over 120
                    Day Report
 4)HD0000000231413- Patients on Wait List
   Duplicates:
        HD0000000244342 - Where's the person on the wait list?   bdj
        HD0000000282184 - Waitlist Error
  
 PARTICIPATING TEST SITES:
 =========================
 Muskogee, OK
 North California HCS
 North Texas 
  
 REMEDY OVERVIEW:
 ================
   
 1) HD0000000279957 - make appointment violate requirement to allow
                      up-arrow?
   
    Problem:
    ======== 
    The main problem is that the feature that matches an EWL entry to the
    appointment in Appointment Management [SDAM APPT MGT] option forces
    the user to enter a Non Removal Reason if the user does not want to
    disposition (close) that matched entry. Therefore, the EWL Entry can
    never be closed during this process because an EWL entry with a Non
    Removal Reason is not displayed again.
  
    The related documentation that describes this functionality is
    contained in the "Important Concepts" section of the EWL User Manual
    and is titled:
  
      "Disposition of Matching Appointments".
   
     Both the title and the technical explanation contained in this section
     are incorrect.
    
    Solution:
    =========
    When a list of available open EWL entries is displayed, an appointment 
    already exists and it makes sense to close the related EWL entry if 
    applicable, or to enter the DO NOT REMOVE REASON field (#18) of the SD 
    WAIT LIST file (#409.3).
  
      a. When open EWL entries are displayed for possible closing, entries
         with Non Removal Reasons are included. A Do Not Remove Reason can
         be entered, or an existing one left in place, unless the user
         decides to close that entry.
  
      b. The ^ key is no longer allowed, instead the <Enter> key will be
         used to indicate the user's intention not to close a matched
         entry.
   
      c. During appointment entry and during the check out process 
         all open EWL entries will be displayed for possible closing,
         including those that already have the Do Not Remove Reason
         entered.
  
      d. The EWL User Manual will be revised to change the title
         "Disposition of Matching Appointments" to "Disposition of Matching
          EWL Entries", and correct its description.
   
 2)  HD0000000238767 - 30, Over 30, Over 120 Day Report problem?   bdj
  
    Problem:
    ========
    The 30, Over 30, Over 120 Day Report [SD WAIT LIST 30>30>120 REPORT]
    does not print when it is queued to a virtual device such as P-MESSAGE
    or the spooler. It was identified that the tasked print job does not
    find the temporary global created by an original driver, especially if
    queued jobs are in cluster. Depending on the particular configuration,
    this report sometimes works and sometimes does not.
  
    Solution:
    =========
    The SDWLR31 routine that handles this report will be modified to 
    allow printing as desired.
  
    Technical:
    ==========
    Routine SDWLR31 will pass a local array instead of relying on the 
    existence of a temporary global created by an initial driver, which may
    not be recognized by the tasked job.
  
   
 3)  HD0000000268162 - Need some assistance with report 30, Over 30,
                       Over 120 Day Report
    Problem:
    ======== 
    The numbers associated with the report for different divisions appear
    much higher than what is actually open. The report prompts for open
    wait list entries only, and if the user enters 'yes', both 
    open and closed entries are printed. A FileMan report from the SD WAIT
    LIST file (#409.3) generates numbers that match the related open EWL
    entry as expected.
  
    Solution:
    =========
    Code to generate a summary of reported EWL entries in routine SDWLR31
    was modified to calculate and to display correct numbers.
  
 4)  HD0000000231413 - Patients on Wait List
  
    Problem:
    ========
    At the end of the cancellation process using the CA  Cancel Appointment
    action under the Appointment Management [SDAM APPT MGT] option, a
    message displays if the patient has open entries on the Wait List in
    the related clinic. Occasionally that message displays incorrectly if
    there are only closed EWL entries for the processed patient. The
    existing code is searching for all EWL entries instead of only looking
    for open ones.
  
    The Message text:
  
        'There are Patients on the Wait List waiting for an Appointment
         in the ' CLINICNAME
  
    is incorrectly worded because "Patients"should be singular and the same
    patient might have one or more EWL entries for a clinic in which a
    scheduled appointment was canceled.
  
    
    Solution:
    =========
    Code in routine SDAMC was corrected to verify that at least one open
    EWL created for the clinic where a scheduled appointment was canceled
    exists for the processed patient, and only then will the  related
    message be displayed.
  
       The message wording was corrected to:
  
        'There are Wait List entries waiting for an Appointment for this
         patient in' CLINICNAME.
  
  
   DOCUMENTATION RETRIEVAL:
   ======================== 
   The manual that have changed with this patch are as follows:
  
   Electronic Wait List (EWL) for Scheduling and Primary Care Management 
   Module (PCMM) - User Manual
     
   The updated manual will be posted to the VistA Documentation Library
   (VDL)immediately after the release of the patch.
   
   Sites may retrieve the updated documentation directly using FTP 
   from the ANONYMOUS.SOFTWARE directory at the following OI Field 
   Offices:
    
               Albany:  ftp.fo-albany.med.va.gov
                Hines:  ftp.fo-hines.med.va.gov
       Salt Lake City:  ftp.fo-slc.med.va.gov
    
  The following documentation will be available:
   
      File Name         Description
      ---------         -----------
      sd_53_p538_um.pdf Electronic Wait List (EWL) for Scheduling and
                        Primary Care Management Module (PCMM) - User Manual
  
  * Note: Use Binary mode when transferring the .PDF file.  
          The .PDF files can be read on a PC using the Adobe
          Acrobat Reader program.
   
 INSTALLATION INSTRUCTIONS:
 ==========================
 Users can be on the system during the installation of this patch.
 Installation should take less than 5 minutes. Because some heavily-used
 Scheduling options will be out of order during the install, it is
 recommended that installation be done in off-peak hours.
  
        
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
    
 2.  START UP KIDS
     [XPD MAIN]
           Edits and Distribution ...
           Utilities ...
           Installation ...
     Select Kernel Installation & Distribution System Option:  
                                                          INStallation
                                                          --- 
     1     Load a Distribution
     2     Verify Checksums in Transport Global
     3     Print Transport Global
     4     Compare Transport Global to Current System
     5     Backup a Transport Global
     6     Install Package(s)
           Restart Install of Package(s)
           Unload a Distribution
    
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter SD*5.3*538):
    
   a.  Backup a Transport Global - This option will create a backup
       message of any routines exported with this patch.  It will NOT
       backup any other changes such as DDs or templates.
    
   b.  Compare Transport Global to Current System - This option will
       allow you to view all changes that will be made when the patch
       is installed.  It compares all components of the patch
       (routines, DDs, templates, etc.).
    
   c.  Verify Checksums in Transport Global - This option will ensure
       the integrity of the routines that are in the transport global.
    
   d.  Print Transport Global - This option will allow you to view
       the components of the KIDS build.
    
 4.  Use the Install Package(s) option and select the package SD*5.3*538.
    
   a.  When prompted "Want KIDS to INHIBIT LOGONS during the
          install? NO//" respond NO.
    
   b.  When prompted "Want to DISABLE Scheduled Options, Menu Options,
       and Protocols? YES//" respond YES.
   
       1) When prompted "Enter options you wish to mark as "Out of
          Order":" enter the following option:
       
          Appointment Management         [SDAM APPT MGT]
          Make Appointment               [SDM]
          30,Over 30,Over 120 Day Report [SD WAIT LIST 30>30>120 REPORT]
                              
       2) When prompted "Enter protocols you wish to mark as "Out of
          Order":" enter 'YES'.
   
          Enter the following protocols to be disabled:
         
          Appointment Event Driver       [SDAM APPOINTMENT EVENTS]
          Cancel Appointment             [SDAM APPT CANCEL]

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Scheduling;**[Patch List]**;Aug 13, 1993;Build 5

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SDAMC
    Before: B12821748   After: B14033006  **20,28,32,46,263,414,444,478,538**
Routine Name: SDCO1
    Before: B29753601   After: B29919726  **27,132,149,193,250,296,446,538**
Routine Name: SDWLEVAL
    Before: B62921958   After: B67364673  **327,471,446,538**
Routine Name: SDWLPL
    Before: B36034628   After: B39152733  **327,394,417,446,538**
Routine Name: SDWLR31
    Before: B17924948   After: B18724335  **524,538**
 
Routine list of preceding patches: 446, 478, 524

=============================================================================
User Information:
Entered By  : WOLF,ED                       Date Entered  : JUN 19, 2008
Completed By: SESSLER,APRIL                 Date Completed: JUL 15, 2009
Released By : HEUER,CINDY                   Date Released : AUG 11, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
