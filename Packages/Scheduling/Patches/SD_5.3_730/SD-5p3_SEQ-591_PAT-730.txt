$TXT Created by                    VISTA-LOAD-AITC-6.AAC.DOMAIN.EXT  (KIDS) on Monday, 08/26/19 at 07:32
=============================================================================
Run Date: NOV 05, 2019                     Designation: SD*5.3*730
Package : SD - SCHEDULING                     Priority: EMERGENCY
Version : 5.3       SEQ #591                    Status: Released
                  Compliance Date: NOV 15, 2019
=============================================================================

Associated patches: (v)SD*5.3*707  <<= must be installed BEFORE `SD*5.3*730'

Subject: SD GMRC ENHANCEMENT FOR COMM CARE SCHEDULING

Category: 
  - Routine

Description:
============

  
 The Community Care Referrals and Authorizations (CCR&A) application is an
 enterprise-wide system used by Community Care (CC) staff to automatically
 generate referrals and authorizations for all Veterans receiving care in
 the community. Clinical and VA CC staff located at VA Medical Centers,
 Outpatient Clinics, Community Based Outpatient Clinics, and VISN offices
 use this application.  The CCR&A solution is an integral component of the
 VA Community Care Information Technology (IT) architecture that allows
 Veterans to receive care from Community Providers.
   
 The VA Imaging project has created specific community care consult 
 titles with matching non-count clinics. When an appointment is being made
 thru the HealthShare Referral Manager (HSRM), in order to update VistA
 with the appointment information, this patch uses the consult title in the
 consult to lookup the correct clinic to schedule the appointment for. This
 patch introduces code and table that is used to match the imaging consults
 to the correct clinic name.
  
 This patch will also set the AUTO START flag for the CCRA-NAK HL Logical 
 Link to Yes. This link must be started in order for the HL7 Non 
 Acknowledgement (NAK) message to be returned to HSRM if an appointment 
 action can't be completed. The NAK message has the error condition that 
 prevented the scheduling action from updating VistA. When an NAK message 
 for a scheduling action is received by HSRM it triggers a task in HSRM to 
 notify the user that there was a problem with filing the action on VistA.
  
  
 Patch Components:
 -----------------
   
 ROUTINES:
 ---------
 SDCCRCOR
 SDCCRSEN
 SDPST730 (Post install routine)
   
 Bulletins:
 ---------
 N/A 
   
   
 Files & Fields Associated:
   
 File Name (Number)      Field Name (Number)  New/Modified/Deleted
 ------------------      -------------------  --------------------
 N/A 
   
 Forms Associated:
   
 Form Name       File #  New/Modified/Deleted
 ---------       ------  --------------------
 N/A 
   
 Mail Groups Associated:
   
 Mail Group Name New/Modified/Deleted
 --------------- --------------------
 N/A 
   
 Options Associated:
   
 Option Name     Type    New/Modified/Deleted
 -----------     ----    -------------------- 
 N/A
   
 Protocols Associated:
   
 Protocol Name                   New/Modified/Deleted
 -------------                   -------------------- 
   
 HL7 Logical Links               New/Modified/Deleted
 -----------------               -------------------- 
 CCRA-NAK                        Modified.
   
 Security Keys Associated:
   
 Security Key Name
 -----------------
 N/A 
   
 Templates Associated:
   
 Template Name   Type    File Name (Number)  New/Modified/Deleted
 -------------   ----    ------------------  --------------------
 N/A
   
 Additional Information:
 N/A
   
   
 New Service Requests (NSRs):
 ----------------------------
 N/A 
  
 Patient Safety Issues (PSIs):
 -----------------------------
 N/A
   
   
 Defect Tracking System Ticket(s) & Overview:
 --------------------------------------------
 N/A 
   
 Problem:
 --------
 N/A 
   
 Resolution:
 -----------
 N/A 
   
 Test Sites:
 --------
 Lebanon, PA
 Philadelphia, PA
 Ft Harrison, MT 
 Togus, ME
  
 Documentation Retrieval Instructions
 ------------------------------------
 N/A
  
 Software and Documentation Retrieval Instructions:
 ---------------------------------------------------- 
 Software is distributed by PackMan.
  
 Patch Installation:
 ------------------
 N/A 
  
 Pre/Post Installation Overview:
 -------------------------------
 N/A 
  
 Pre-Installation Instructions:
 ------------------------------
 Insure patch SD*5.3*707 has been installed. 
  
 Setup/Configuration Instructions:
 ---------------------------------
  
 These steps can be completed with users on the system. This should take 
 less than 15 minutes to configure. NOTE: Patch SD*5.3*707 must be 
 installed in order to install this patch. This patch should take less than
 15 minutes to install.
  
 This patch can be queued for later installation.
  
  1.  Choose the PackMan message containing this patch.
     
  2.  Choose the INSTALL/CHECK MESSAGE PackMan option.  
    
  3.  From the KIDS Menu, select the Installation Menu.  From this menu, 
      you may elect to use the following options. When prompted for the
      INSTALL NAME, enter SD*5.3*730.
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as Data Dictionaries (DDs) or
          templates. IN ORDER TO BACKOUT THIS PATCH, THIS OPTION MUST BE 
          USED.
      b.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed.  It compares all components of this patch
          (routines, DDs, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
       
  4.  From the Installation Menu, select the Install Package(s) option and
      when prompted for the INSTALL NAME, enter SD*5.3*730.
  
  5.  If prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? NO//' respond NO.
    
  6.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
      NO//" respond NO.
     
  7.  If prompted "Want to DISABLE Scheduled Options, Menu Options, 
      and Protocols? NO//" respond NO. 
     
  8.  If prompted "Delay Install (Minutes):  (0 - 60): 0//" respond 0.
     
   
 Select Installation <TEST ACCOUNT> Option: Install Package(s)
 Select INSTALL NAME: SD*5.3*730      7/10/19@08:06:54
     => SD*5.3*730 JUL 10
  
 This Distribution was loaded on Jul 10, 2019@08:06:54 with header of 
   SD*5.3*730 JUL 10
   It consisted of the following Install(s):
     SD*5.3*730
 Checking Install for Package SD*5.3*730
  
 Install Questions for SD*5.3*730
  
 Want KIDS to INHIBIT LOGONs during the install? NO// 
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? NO// 
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   HOME  (CRT)
  
 SD*5.3*730                                   
 -------------------------------------------------------------------------
 Install Started for SD*5.3*730 : 
               Jul 10, 2019@08:09:37
  
 Build Distribution Date: Jul 10, 2019
  
 Installing Routines:
               Jul 10, 2019@08:09:37
  
 Updating Routine file...
  
 Updating KIDS files...
  
 SD*5.3*730 Installed. 
               Jul 10, 2019@08:09:37
  
 Not a production UCI
  
 NO Install Message sent 
 -------------------------------------------------------------------------
  
           +------------------------------------------------------------+
   100%    |             25             50             75               |
  Complete +------------------------------------------------------------+
  
  
  
  
  
 Install Completed
  
     
 Post-Installation Instructions:
 -------------------------------
  
  
 Backout and rollback Procedure:
 -------------------------------
 In order to back out this patch, sites must use the
 KIDS option to Backup a Transport Global after loading
 the patch. If this option is not used, then backing out
 the patch is not possible. 
  
 If this patch needs to be backed out, use the VistA MailMan backup 
 message created during the install to restore the routines to their 
 pre-patch state.
  
 Sample backout/rollback:
  
 Subj: Backup of SD*5.3*730 install on Jul 23, 2019  [#345036] 
 07/23/19@13:19 385 lines
 From: INSTALLER,PATCH  In 'IN' basket.   Page 1
 --------------------------------------------------------------------------
 $TXT PACKMAN BACKUP Created on Tuesday, 7/23/19 at 13:19:03 by 
                    VISTA-LOAD-AITC-6.AAC.DOMAIN.EXT
 $ROU SDCCRSEN (PACKMAN_BACKUP)
 SDCCRSEN ;CCRA/LB,PB - Appointment retrieval API;APR 4, 2019
  ;;5.3;Scheduling;**707,730**;APR 4, 2019;Build 52
  ;;Per VA directive 6402, this routine should not be modified.
  Q
  ; Documented API's and Integration Agreements
  ; ----------------------------------------------
  ; 2165   GENACK^HLMA1
  ; 2701   $$GETDFN^MPIF001DT
  
 Type <Enter> to continue or '^' to exit: ^
  
 Enter message action (in IN basket): Ignore// Xtract PackMan
 Select PackMan function: IN
      1   INSTALL SELECTED ROUTINE(S)  
      2   INSTALL/CHECK MESSAGE  
 CHOOSE 1-2: 2  INSTALL/CHECK MESSAGE
  
  
 Warning:  Installing this message will cause a permanent update of globals
 and routines.
 Do you really want to do this? NO// YES
  
 Routines are the only parts that are backed up.  NO other parts
 are backed up, not even globals.  You may use the 'Summarize Message'
 option of PackMan to see what parts the message contains.
  
  ; 2701   $$GETICN^MPIF001
  ; 3535   MAKEADD^TIUSRVP2
  ; 10103  $$HL7TFM^XLFDT
 EN() ;Primary entry routine for HL7 based CCRA scheduling processing.
  ;Will take all scheduling messages through this one point.
  N FS,CS,RS,ES,SS,MID,HLQUIT,HLNODE,USER,USERMAIL,NAKMSG,ICN
  N 
 MSG,HDR,SEG,SEGTYPE,MSGARY,LASTSEG,HDRTIME,ABORT,BASEDT,CLINARY,COUNT,PROV
 DT
  
 Type <Enter> to continue or '^' to exit: ^
  
 Enter message action (in IN basket): Ignore// Xtract PackMan
 Select PackMan function: IN
      1   INSTALL SELECTED ROUTINE(S)  
      2   INSTALL/CHECK MESSAGE  
 CHOOSE 1-2: 2  INSTALL/CHECK MESSAGE
  
  
 Warning:  Installing this message will cause a permanent update of globals
 and routines.
 Do you really want to do this? NO// YES
  
 Routines are the only parts that are backed up.  NO other parts
 are backed up, not even globals.  You may use the 'Summarize Message'
 option of PackMan to see what parts the message contains.
 Those parts that are not routines should be backed up separately
 if they need to be preserved.
  
 Shall I preserve the routines on disk in a separate back-up message? 
 YES// 
  
 Subject: BACKUP    
 Send mail to: INSTALLER,PATCH//INSTALLER,PATCH
 Select basket to send to: IN//   
 And Send to: 
 Building PackMan backup message with subject BACKUP
  
 PackMan backup message [345037] sent.
 Line 2    Message #345036    Unloading Routine   SDCCRSEN (PACKMAN_BACKUP)
 Line 368  Message #345036    Unloading Routine   SDPST730 (PACKMAN_BACKUP)
  
 Select PackMan function: 
  
 Enter message action (in IN basket): Ignore// 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Scheduling;**[Patch List]**;APR 4, 2019;Build 8

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SDCCRCOR
    Before: B91692691   After: B91720288  **707,730**
Routine Name: SDCCRSEN
    Before:B147345634   After:B169705715  **707,730**
Routine Name: SDPST730
    Before:       n/a   After:   B608255  **730**
 
Routine list of preceding patches: 707

=============================================================================
User Information:
Entered By  :                               Date Entered  : JUL 02, 2019
Completed By:                               Date Completed: NOV 05, 2019
Released By :                               Date Released : NOV 05, 2019
=============================================================================


Packman Mail Message:
=====================

$END TXT
