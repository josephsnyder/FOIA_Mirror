$TXT Created by BOWEN,MARY JANE at CHEY20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Friday, 05/16/08 at 08:03
=============================================================================
Run Date: JUN 10, 2008                     Designation: SD*5.3*520
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #435                    Status: Released
                  Compliance Date: JUL 11, 2008
=============================================================================

Associated patches: (v)SD*5.3*107  <<= must be installed BEFORE `SD*5.3*520'
                    (v)SD*5.3*112  <<= must be installed BEFORE `SD*5.3*520'
                    (v)SD*5.3*130  <<= must be installed BEFORE `SD*5.3*520'
                    (v)SD*5.3*210  <<= must be installed BEFORE `SD*5.3*520'
                    (v)SD*5.3*297  <<= must be installed BEFORE `SD*5.3*520'
                    (v)SD*5.3*526  <<= must be installed BEFORE `SD*5.3*520'

Subject: PCMM CORRECTIONS FOR ASSOCIATED CLINIC DISPLAYS AND APPOINTMENTS

Category: 
  - Data Dictionary
  - Routine
  - Other

Description:
============

 This patch corrects
 1. The Associated Clinic display for PCMM reports.
 2. The display of appointment information on PCMM reports.
 3. Correct lookup if position IEN is 1 on the TEAM POSITION FILE
    (#404.57).
  
  
 Reports that now show the Associated Clinics correctly are:
    Individual team profile  [SC PCMM IND TEAM PROFILE]
    Team Member Listing [SC PCMM LIST TEAM'S MEMBERS]
    Team Patient Listing [SC PCMM LIST TEAM'S PATIENTS]
    Summary Listing of Teams [SC PCMM SUM LIST OF TEAMS]
    Practitioner Demographics [SC PCMM PRACT DEMO]
    Practitioner's Patients [SC PCMM PRACT PATIENTS]
  
  
  ASSOCIATED REMEDY TICKETS:
  ========================= 
 1. HD0000000172259 - DO NOT SEE ASSOCIATED CLINIC CHANGES
    DUPLICATES:
    ==========
    HD0000000181662 ASSOCIATED CLINIC NOT SHOWING ON SC PCMM PRACTITIONERS
                    REPORT
    HD0000000182122 Help with clinic association on Practitioner' Patient 
                    Reports
    HD0000000188135 Team Patient Listing report
    HD0000000190165 Unable to Change Clinic Name For Physician
    HD0000000192551 Problems with associated clinics in PCMM
    HD0000000193684 Associated Clinic field still on report
    HD0000000198029 PCMM Report Issue
    HD0000000198568 Changes to associated clinics not transitioning from 
                    GUI
    HD0000000201133 Associated Clinic issues with new clinics
    HD0000000202857 Problem getting the associated clinics to "take".
    HD0000000209289 Practitioner's Patient Reports
    HD0000000214906 In the current GUI PCMM version, it won't save the
                    associated clinic for viewing on the Patient
                    Demographic report in VistA.
    HD0000000214996 Problem w/SC PCMM PRACT PATIENTS
    HD0000000241730 Report from Facility ADPAC
    HD0000000243117 Associated Clinic on the SLT report
  
 2. HD0000000183760 - PCMM report Practitioner's Patients report does not
                      show Last Appt.,Next Appt and Clinic.
    DUPLICATES:
    ==========
    HD0000000194106-Practitioner's Patient Report will not pull data for
    next and last appt.
    HD0000000224080-Practitioners Patients list inquiry
    HD0000000237298-Information not showing on a particular provider
  
 3. HD210311 - PCMM reporting error
  
  
  ASSOCIATED NSR'S:
  ================
  N/A 
   
  PARTICIPATING TEST SITES:
  ========================
  Amarillo, TX
  Cheyenne, WY
  Perry Pointe, MD
   
  REMEDY OVERVIEW:
  ===============
 1.HD0000000172259 - DO NOT SEE ASSOCIATED CLINIC CHANGES
    
  Problem:
  ========
  Patch SD*5.3*297 added ASSOCIATED CLINICS Multiple(#404.575), ASSOCIATED
  CLINICS FIELD(#.01) to TEAM POSITION FILE(#404.57).
  Most of the Reports use the ASSOCIATED CLINIC FIELD(#.09) of the
  TEAM POSITION FILE(#404.57) which is no longer updated.
  Some use the "D"  cross reference of the TEAM POSITION FILE(#404.57)
  which is also no longer updated.
  This field should have been retired. As team assignments are made and/or
  changed these reports will no longer have the correct Associated Clinic 
  showing. It will have the old one or nothing at all.
        
  Solution:
  =========
  Routines using the ASSOCIATED CLINIC FIELD(#.09) of the TEAM POSITION 
  FILE(#404.57) changed to use the Associated Clinic Multiple node 5,  
  field#( 404.575) ASSOCIATED CLINICS field(3.01), and if the routine
  currently allows for only one associated clinic, changed to allow for 
  multiple associated clinics. Also creating a new "E" cross reference for
  the multiple associated clinics and changing routines that use the "D"
  cross reference of the TEAM POSITION FILE(#404.57) to use the "E" cross
  reference instead. Routines changed to use the new cross reference are
  SCRPBK11, SCRPU1, SCRPU2, SCAPMC14, SCAPMC29, SCAPMC30, and SCAPMC9
  
 2.HD0000000183760 - PCMM report Practitioner's Patients report does not
                      show Last Appt.,Next Appt and Clinic.
  
  Problem:
  =======
  Along with Associated Clinics not appearing on reports, appointment 
  information is also missing.
  
  Solution:
  =========
  Some of the reports that had the incorrect Associated Clinics showing on 
  the report were also verifying that patients were enrolled in 
  the clinics. Patch SD*5.3*433 changed routines so that enrollment 
  should no longer be verified. Part of patch description:
  "(This patch will remove the logic that only allows the Associated Clinic
  to print on the Practitioner's Patients Report and the Team Patient 
  Listing if the patient is enrolled in the Associated Clinic found in the 
  TEAM POSITION (#404.57) file.  Clinic enrollment is discretionary and not
  used by all sites, therefore, the Associated Clinic assigned to the TEAM
  POSITION (#404.57) file should print on these reports.)"
  
  Solution:
  ======== 
  Fixed the code for the reports so that enrollment is not verified before
  getting the appointment information.
  
 3. HD210311 - PCMM reporting error
  
  Problem:
  =======
  Site reported incorrect provider showing. 
  When assigning AP's to the position STAFF PHYSICIAN with IEN=1 on
  team GROUP PRACTICE A, all her AP's show as PCP's on the ITP and SLT
  reports.
  EIN of the position STAFF PHYSICIAN on the team GROUP PRACTICE A is '1' 
  so any preceptee assigned to a preceptor that has this position would be 
  listed with 'PCP' instead of 'AP'.
  
  Solution:
  ========
  Primary Provider status in the PC? column on the ITP report is 
  determined from the following line of code in routine SCRPITP2:
  
  S PPC=$S($P(TNODE,"^",4)'=1:"NPC",+$$OKPREC3^SCMCLK(TPOS,DT)>1:" 
  AP",1:"PCP") ;primary care position
  
  and from routine SCMCLK:
  
  S SCPIEN=$P(^SCTM(404.53,SCP3,0),U,6)    <------- pointer to the Team 
  Position, in this case =1
  Q SCPIEN_U_$$EXT^SCAPMCU2(404.53,SCPIEN)
  
  EIN of the position STAFF PHYSICIAN on the team GROUP PRACTICE A is '1' 
  so any preceptee assigned to a preceptor that has this position would be 
  listed with 'PCP' instead of 'AP'.
  
   1) ^SCTM(404.57,1,0) = STAFF PHYSICIAN^1^1^1^^^^1000^4534^^659-0010^1
   2) ^SCTM(404.57,1,1,0) = ^^1^1^2991217
   3) ^SCTM(404.57,1,1,1,0) = GROUP PRACTICE A
   4) ^SCTM(404.57,1,2) = N^N^N^N^^^^^N
   5) ^SCTM(404.57,1,5,0) = ^404.575PA^4534^1
   6) ^SCTM(404.57,1,5,4534,0) = 4534
   7) ^SCTM(404.57,1,5,"B",4534,4534) = 
  
  Routine SCRPITP2 has to be corrected as follows:
  
  S PPC=$S($P(TNODE,"^",4)'=1:"NPC",+$$OKPREC3^SCMCLK(TPOS,DT)>0:" 
  AP",1:"PCP") ;primary care position
  
  Routine SCRPSLT2 also needed to be corrected. 
           
                         
 COMPONENTS:
 ==========
 DD CHANGES:
 1) 404.575,.01 ADD THE FOLLOWING X-REF FOR MULTIPLES:
   
              CROSS-REFERENCE:  404.57^E   >>>>> ADD NEW XREF
                             1)= S ^SCTM(404.57,"E",$E(X,1,30),DA(1),DA)=""
                             2)= K ^SCTM(404.57,"E",$E(X,1,30),DA(1),DA)
  
  
 2) 404.57,.09  DELETE THE FOLLOWING X-REF AS IT IS NO LONGER NEEDED:
    
              CROSS-REFERENCE:  404.57^D  - >>>> DELETE
                                 1)= S ^SCTM(404.57,"D",$E(X,1,30),DA)=""
                                 2)= K ^SCTM(404.57,"D",$E(X,1,30),DA)
 THIS FIELD CAN NO LONGER BE UPDATED.
  
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NOTE: While testing this patch(SD*5.3*520) we found that the 
 report showing in option Detailed Patient Assignments [DPA Detailed
 Patient Assignments] only chooses patients with active clinic enrollments.
 Clinic enrollment functionality is inactive and the data in this report is
 invalid as the routines look for enrolled clinics instead of the
 associated clinics for the Teams.
  
 SD*5.3*520 will temporarily disable the option Detailed Patient 
 Assignments [DPA Detailed Patient Assignments]. The report will be 
 corrected by replacing Enrolled Clinic column with Associated Clinics 
 in patch SD*5.3*535.
 This is how the menu will appear:
 Select PATIENT REPORTS AND OPTIONS Option: DPA  ??
  
  
   AU     Team/Position Assignment/Re-Assignment
   DPA    Detailed Patient Assignments
          **> Out of order:  TEMPORARILY DISABLED UNTIL PATCH SD*5.3*535
   PAD    Historical Patient Assignment Detail
   PATA   Patient Listing for Team Assignments
   REV    Patient Team Position Assignment Review
   PTAL   Historical Patient Position Assignment Listing
   SCHD   Patients Scheduled for Inactivation from PC Panels
   EXTD   Patients with Extended Primary Care Inactivation
   INAC   Patients Automated Inactivations from PC Panels
   EXTP   Extend Patient Inactivation Date
  
  
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
   
   INSTALLATION INSTRUCTIONS:
   ===========================
   This patch may be run with users on the system.
   Installation will take less than 2 minutes.
   
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
    
       NOTE:  If the required patches are not installed, the transport 
              global will be removed.  If the transport global is removed
              you will need to repeat this step.
    
   2.  From the Kernel Installation and Distribution System Menu, select
       the Installation menu.
    
   3.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter SD*5.3*520):
  
       a.  Backup a Transport Global - This option creates a MailMan 
           message that will backup all current routines on your system
           that would be replaced by the Packages in this Transport Global.
           Those components that are not routines must be backed up
           separately if they need to be preserved.
  
       b.  Compare Transport Global to Current - This option lets you
           compare the components of a Transport Global, that is currently
           loaded in the XTMP global, to your current system.
  
       c.  Print Transport Global - This option lets you print the contents
           of a Transport Global that is currently loaded in the ^XTMP
           global.
  
       d.  Verify Checksums in Transport Global - This option will verify 
           checksums for the components of a Transport Global and will
           report any checksums that are incorrect.
   
   4.  Use the Install Package(s) option and select the package SD*5.3*520.
    
   5.  When promted'Want KIDS to Rebuild Menu Trees Upon Completion of 
       Install? NO//', respond NO.
   6.  When prompted'Want KIDS to INHIBIT LOGONs during the install?
       YES//', respond NO.
    
   7.  When prompted,'Want to DISABLE Scheduled Options, Menu Options, and 
       Protocols? YES//', respond Yes.
       When prompted,'Enter options you wish to mark as 'Out Of Order':',
       enter:
          PCMM MAIN MENU  [SCMC PCMM MAIN MENU]
                
       When prompted,'Enter protocols you wish to mark as 
       'Out Of Order':', hit enter.
  
  **Routine SD53P520 can be deleted after patch installation has been 
    completed.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.3;Scheduling;**[Patch List]**;AUG 13, 1993;Build 26

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: SCAPMC14
    Before:  B7296482   After:  B8228150  **41,520**
Routine Name: SCAPMC29
    Before:  B9093400   After:  B5381891  **41,210,520**
Routine Name: SCAPMC30
    Before:  B6119891   After:  B6119989  **41,520**
Routine Name: SCAPMC9
    Before:  B5295919   After:  B5296004  **41,112,520**
Routine Name: SCMCDD2
    Before:  B3853753   After:  B3853809  **41,107,520**
Routine Name: SCRPBK11
    Before: B14197603   After: B14197732  **41,520**
Routine Name: SCRPEC
    Before: B15607236   After: B12978896  **41,140,174,177,431,526,520**
Routine Name: SCRPITP
    Before: B23110919   After: B25285896  **41,52,177,520**
Routine Name: SCRPITP2
    Before: B21590194   After: B23670971  **41,177,520**
Routine Name: SCRPPAT2
    Before: B28347716   After: B44698538  **41,48,174,181,177,231,433,
                                           297,526,520**
Routine Name: SCRPPAT3
    Before: B30801448   After: B33197824  **41,52,148,174,181,177,297,526,520**
Routine Name: SCRPRAC2
    Before: B19064401   After: B21302300  **41,177,520**
Routine Name: SCRPSLT
    Before: B25417054   After: B27323544  **41,52,177,231,520**
Routine Name: SCRPSLT2
    Before: B31388193   After: B34006267  **41,174,177,231,520**
Routine Name: SCRPTM
    Before: B33079935   After: B34769251  **41,48,52,181,177,520**
Routine Name: SCRPTM2
    Before: B21284139   After: B23722266  **41,140,177,520**
Routine Name: SCRPTP
    Before: B26905186   After: B37396149  **41,48,174,177,526,520**
Routine Name: SCRPTP2
    Before: B31636644   After: B34599932  **41,53,52,174,177,231,526,520**
Routine Name: SCRPTP3
    Before: B27716649   After: B16177961  **41,48,98,177,231,433,526,520**
Routine Name: SCRPU1
    Before: B24892812   After: B24892950  **41,45,130,520**
Routine Name: SCRPU2
    Before: B22140204   After: B22140264  **41,174,297,526,520**
Routine Name: SD53P520
    Before:       n/a   After:  B2396170  **520**
 
Routine list of preceding patches: 107, 112, 130, 210, 526

=============================================================================
User Information:
Entered By  : VILLELLA,ROSS                 Date Entered  : JUL 17, 2007
Completed By: SESSLER,APRIL                 Date Completed: JUN 10, 2008
Released By : SCHMITT,MARSHA                Date Released : JUN 10, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
