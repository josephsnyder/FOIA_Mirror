Released SD*5.3*297 SEQ #399
Extracted from mail message
**KIDS**:SD*5.3*297^

**INSTALL NAME**
SD*5.3*297
"BLD",4630,0)
SD*5.3*297^SCHEDULING^0^3061005^y
"BLD",4630,1,0)
^^6^6^3051128^
"BLD",4630,1,1,0)
This patch will enforce business rules in PCMM and inactivate patient and
"BLD",4630,1,2,0)
provider PCMM assignments if they are no longer active based on the
"BLD",4630,1,3,0)
business rules.
"BLD",4630,1,4,0)
 
"BLD",4630,1,5,0)
Please refer to the PCMM Release Notes/Installation Guide for complete 
"BLD",4630,1,6,0)
details.
"BLD",4630,4,0)
^9.64PA^404.57^5
"BLD",4630,4,403.46,0)
403.46
"BLD",4630,4,403.46,222)
y^n^f^^^^y^m^n
"BLD",4630,4,404.43,0)
404.43
"BLD",4630,4,404.43,2,0)
^9.641
"BLD",4630,4,404.43,222)
y^n^p^^^^n^^n
"BLD",4630,4,404.44,0)
404.44
"BLD",4630,4,404.44,2,0)
^9.641
"BLD",4630,4,404.44,222)
y^n^p^^^^n^^n
"BLD",4630,4,404.52,0)
404.52
"BLD",4630,4,404.52,222)
y^n^f^^^^n^^n
"BLD",4630,4,404.57,0)
404.57
"BLD",4630,4,404.57,2,0)
^9.641
"BLD",4630,4,404.57,222)
y^y^p^^^^n^^n
"BLD",4630,4,"B",403.46,403.46)

"BLD",4630,4,"B",404.43,404.43)

"BLD",4630,4,"B",404.44,404.44)

"BLD",4630,4,"B",404.52,404.52)

"BLD",4630,4,"B",404.57,404.57)

"BLD",4630,"INI")
PRE^SD53P297
"BLD",4630,"INID")
^y
"BLD",4630,"INIT")
POST^SD53P297
"BLD",4630,"KRN",0)
^9.67PA^8994^19
"BLD",4630,"KRN",.4,0)
.4
"BLD",4630,"KRN",.4,"NM",0)
^9.68A^12^11
"BLD",4630,"KRN",.4,"NM",1,0)
SCMC DIRECT PC FTEE    FILE #404.52^404.52^0
"BLD",4630,"KRN",.4,"NM",2,0)
SCMC INCONSISTENT    FILE #404.57^404.57^0
"BLD",4630,"KRN",.4,"NM",3,0)
SCMC PENDING UNASSIGN    FILE #404.43^404.43^0
"BLD",4630,"KRN",.4,"NM",4,0)
SCMC EXTENDED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.4,"NM",5,0)
SC PROVIDER FLAGGED    FILE #404.52^404.52^0
"BLD",4630,"KRN",.4,"NM",6,0)
SCMC INACTIVATED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.4,"NM",8,0)
SCMC DIRECT PC FTEE 1 CLN    FILE #404.52^404.52^0
"BLD",4630,"KRN",.4,"NM",9,0)
SC INACTIVATED    FILE #404.52^404.52^0
"BLD",4630,"KRN",.4,"NM",10,0)
SCMC PENDING UNASSIGN PAT    FILE #404.43^404.43^0
"BLD",4630,"KRN",.4,"NM",11,0)
SC BULLETIN    FILE #404.43^404.43^0
"BLD",4630,"KRN",.4,"NM",12,0)
SCMC TOBE INACTIVATED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.4,"NM","B","SC BULLETIN    FILE #404.43",11)

"BLD",4630,"KRN",.4,"NM","B","SC INACTIVATED    FILE #404.52",9)

"BLD",4630,"KRN",.4,"NM","B","SC PROVIDER FLAGGED    FILE #404.52",5)

"BLD",4630,"KRN",.4,"NM","B","SCMC DIRECT PC FTEE    FILE #404.52",1)

"BLD",4630,"KRN",.4,"NM","B","SCMC DIRECT PC FTEE 1 CLN    FILE #404.52",8)

"BLD",4630,"KRN",.4,"NM","B","SCMC EXTENDED    FILE #404.43",4)

"BLD",4630,"KRN",.4,"NM","B","SCMC INACTIVATED    FILE #404.43",6)

"BLD",4630,"KRN",.4,"NM","B","SCMC INCONSISTENT    FILE #404.57",2)

"BLD",4630,"KRN",.4,"NM","B","SCMC PENDING UNASSIGN    FILE #404.43",3)

"BLD",4630,"KRN",.4,"NM","B","SCMC PENDING UNASSIGN PAT    FILE #404.43",10)

"BLD",4630,"KRN",.4,"NM","B","SCMC TOBE INACTIVATED    FILE #404.43",12)

"BLD",4630,"KRN",.401,0)
.401
"BLD",4630,"KRN",.401,"NM",0)
^9.68A^23^20
"BLD",4630,"KRN",.401,"NM",1,0)
SCMC DIRECT PC FTEE    FILE #404.52^404.52^0
"BLD",4630,"KRN",.401,"NM",2,0)
SCMC INCONSISTENT    FILE #404.57^404.57^0
"BLD",4630,"KRN",.401,"NM",3,0)
SCMC PENDING UNASSIGN    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",4,0)
SCMC FLAGGED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",5,0)
SCMC EXTENDED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",6,0)
SCMC INACTIVATION SORT    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",7,0)
SCMC INACTIVATED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",8,0)
SC PROVIDER FLAGGED    FILE #404.52^404.52^0
"BLD",4630,"KRN",.401,"NM",9,0)
SCMC EXTENDED BY CLINIC    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",10,0)
SCMC EXTENDED BY TEAM    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",11,0)
SCMC INACTIVATION BY CLINIC    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",12,0)
SCMC INACTIVATION BY TEAM    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",13,0)
SCMC FLAGGED BY TEAM    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",14,0)
SCMC FLAGGED BY CLINIC    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",15,0)
SCMC PROVIDER INACTIVATED    FILE #404.52^404.52^0
"BLD",4630,"KRN",.401,"NM",19,0)
SCMC EXTENDED BULLETIN    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",20,0)
SC PROVIDER FLAGGED BULLE    FILE #404.52^404.52^0
"BLD",4630,"KRN",.401,"NM",21,0)
SCMC FLAGGED BULLETIN    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM",22,0)
SC INACTIVATED    FILE #404.52^404.52^0
"BLD",4630,"KRN",.401,"NM",23,0)
SCMC TOBE INACTIVATED    FILE #404.43^404.43^0
"BLD",4630,"KRN",.401,"NM","B","SC INACTIVATED    FILE #404.52",22)

"BLD",4630,"KRN",.401,"NM","B","SC PROVIDER FLAGGED    FILE #404.52",8)

"BLD",4630,"KRN",.401,"NM","B","SC PROVIDER FLAGGED BULLE    FILE #404.52",20)

"BLD",4630,"KRN",.401,"NM","B","SCMC DIRECT PC FTEE    FILE #404.52",1)

"BLD",4630,"KRN",.401,"NM","B","SCMC EXTENDED    FILE #404.43",5)

"BLD",4630,"KRN",.401,"NM","B","SCMC EXTENDED BULLETIN    FILE #404.43",19)

"BLD",4630,"KRN",.401,"NM","B","SCMC EXTENDED BY CLINIC    FILE #404.43",9)

"BLD",4630,"KRN",.401,"NM","B","SCMC EXTENDED BY TEAM    FILE #404.43",10)

"BLD",4630,"KRN",.401,"NM","B","SCMC FLAGGED    FILE #404.43",4)

"BLD",4630,"KRN",.401,"NM","B","SCMC FLAGGED BULLETIN    FILE #404.43",21)

"BLD",4630,"KRN",.401,"NM","B","SCMC FLAGGED BY CLINIC    FILE #404.43",14)

"BLD",4630,"KRN",.401,"NM","B","SCMC FLAGGED BY TEAM    FILE #404.43",13)

"BLD",4630,"KRN",.401,"NM","B","SCMC INACTIVATED    FILE #404.43",7)

"BLD",4630,"KRN",.401,"NM","B","SCMC INACTIVATION BY CLINIC    FILE #404.43",11)

"BLD",4630,"KRN",.401,"NM","B","SCMC INACTIVATION BY TEAM    FILE #404.43",12)

"BLD",4630,"KRN",.401,"NM","B","SCMC INACTIVATION SORT    FILE #404.43",6)

"BLD",4630,"KRN",.401,"NM","B","SCMC INCONSISTENT    FILE #404.57",2)

"BLD",4630,"KRN",.401,"NM","B","SCMC PENDING UNASSIGN    FILE #404.43",3)

"BLD",4630,"KRN",.401,"NM","B","SCMC PROVIDER INACTIVATED    FILE #404.52",15)

"BLD",4630,"KRN",.401,"NM","B","SCMC TOBE INACTIVATED    FILE #404.43",23)

"BLD",4630,"KRN",.402,0)
.402
"BLD",4630,"KRN",.402,"NM",0)
^9.68A^^
"BLD",4630,"KRN",.403,0)
.403
"BLD",4630,"KRN",.5,0)
.5
"BLD",4630,"KRN",.84,0)
.84
"BLD",4630,"KRN",3.6,0)
3.6
"BLD",4630,"KRN",3.6,"NM",0)
^9.68A^1^1
"BLD",4630,"KRN",3.6,"NM",1,0)
SCMC PROVIDER INACTIVATION^^0
"BLD",4630,"KRN",3.6,"NM","B","SCMC PROVIDER INACTIVATION",1)

"BLD",4630,"KRN",3.8,0)
3.8
"BLD",4630,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",4630,"KRN",3.8,"NM",1,0)
PCMM PATIENT/PROVIDER INACTIVE^^0
"BLD",4630,"KRN",3.8,"NM","B","PCMM PATIENT/PROVIDER INACTIVE",1)

"BLD",4630,"KRN",9.2,0)
9.2
"BLD",4630,"KRN",9.8,0)
9.8
"BLD",4630,"KRN",9.8,"NM",0)
^9.68A^34^33
"BLD",4630,"KRN",9.8,"NM",1,0)
SCMCTSK^^0^B36414078
"BLD",4630,"KRN",9.8,"NM",2,0)
SCMCHLP^^0^B27060859
"BLD",4630,"KRN",9.8,"NM",3,0)
SCMCTSK1^^0^B77403484
"BLD",4630,"KRN",9.8,"NM",4,0)
SCMCPR1^^0^B5606708
"BLD",4630,"KRN",9.8,"NM",5,0)
SCMCHLR2^^0^B22203753
"BLD",4630,"KRN",9.8,"NM",6,0)
SCMCHLR9^^0^B32131385
"BLD",4630,"KRN",9.8,"NM",7,0)
SCAPMC3^^0^B10524382
"BLD",4630,"KRN",9.8,"NM",9,0)
SCMCTSK2^^0^B89984359
"BLD",4630,"KRN",9.8,"NM",10,0)
SCAPMC25^^0^B22389432
"BLD",4630,"KRN",9.8,"NM",11,0)
SCMCWAIT^^0^B13044802
"BLD",4630,"KRN",9.8,"NM",12,0)
SCMCBK1^^0^B72880659
"BLD",4630,"KRN",9.8,"NM",13,0)
SCRPO6^^0^B54277580
"BLD",4630,"KRN",9.8,"NM",14,0)
SCRPPAT2^^0^B29043068
"BLD",4630,"KRN",9.8,"NM",15,0)
SCRPPAT^^0^B62259749
"BLD",4630,"KRN",9.8,"NM",16,0)
SCUTBK10^^0^B14108218
"BLD",4630,"KRN",9.8,"NM",17,0)
SCMCQK^^0^B16433135
"BLD",4630,"KRN",9.8,"NM",18,0)
SCMCTSK3^^0^B78524925
"BLD",4630,"KRN",9.8,"NM",19,0)
SCMCQK2^^0^B56192341
"BLD",4630,"KRN",9.8,"NM",20,0)
SCMCQK1^^0^B91901955
"BLD",4630,"KRN",9.8,"NM",21,0)
SCMCTSK4^^0^B48354390
"BLD",4630,"KRN",9.8,"NM",22,0)
SCRPO^^0^B56300672
"BLD",4630,"KRN",9.8,"NM",23,0)
SCMCTSK5^^0^B83482396
"BLD",4630,"KRN",9.8,"NM",24,0)
SCRPPAT3^^0^B30801721
"BLD",4630,"KRN",9.8,"NM",25,0)
SCMCTSK6^^0^B62522590
"BLD",4630,"KRN",9.8,"NM",26,0)
SCUTBK1^^0^B6471871
"BLD",4630,"KRN",9.8,"NM",27,0)
SCMCDDA^^0^B2917179
"BLD",4630,"KRN",9.8,"NM",28,0)
SCRPU2^^0^B22624198
"BLD",4630,"KRN",9.8,"NM",29,0)
SCMCTSK7^^0^B31968404
"BLD",4630,"KRN",9.8,"NM",30,0)
SCMCTSK8^^0^B66850488
"BLD",4630,"KRN",9.8,"NM",31,0)
SCMCCV5^^0^B13099731
"BLD",4630,"KRN",9.8,"NM",32,0)
SDPPTEM^^0^B45405058
"BLD",4630,"KRN",9.8,"NM",33,0)
SCMCTSK9^^0^B28705844
"BLD",4630,"KRN",9.8,"NM",34,0)
SCUTBK11^^0^B28671391
"BLD",4630,"KRN",9.8,"NM","B","SCAPMC25",10)

"BLD",4630,"KRN",9.8,"NM","B","SCAPMC3",7)

"BLD",4630,"KRN",9.8,"NM","B","SCMCBK1",12)

"BLD",4630,"KRN",9.8,"NM","B","SCMCCV5",31)

"BLD",4630,"KRN",9.8,"NM","B","SCMCDDA",27)

"BLD",4630,"KRN",9.8,"NM","B","SCMCHLP",2)

"BLD",4630,"KRN",9.8,"NM","B","SCMCHLR2",5)

"BLD",4630,"KRN",9.8,"NM","B","SCMCHLR9",6)

"BLD",4630,"KRN",9.8,"NM","B","SCMCPR1",4)

"BLD",4630,"KRN",9.8,"NM","B","SCMCQK",17)

"BLD",4630,"KRN",9.8,"NM","B","SCMCQK1",20)

"BLD",4630,"KRN",9.8,"NM","B","SCMCQK2",19)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK",1)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK1",3)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK2",9)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK3",18)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK4",21)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK5",23)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK6",25)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK7",29)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK8",30)

"BLD",4630,"KRN",9.8,"NM","B","SCMCTSK9",33)

"BLD",4630,"KRN",9.8,"NM","B","SCMCWAIT",11)

"BLD",4630,"KRN",9.8,"NM","B","SCRPO",22)

"BLD",4630,"KRN",9.8,"NM","B","SCRPO6",13)

"BLD",4630,"KRN",9.8,"NM","B","SCRPPAT",15)

"BLD",4630,"KRN",9.8,"NM","B","SCRPPAT2",14)

"BLD",4630,"KRN",9.8,"NM","B","SCRPPAT3",24)

"BLD",4630,"KRN",9.8,"NM","B","SCRPU2",28)

"BLD",4630,"KRN",9.8,"NM","B","SCUTBK1",26)

"BLD",4630,"KRN",9.8,"NM","B","SCUTBK10",16)

"BLD",4630,"KRN",9.8,"NM","B","SCUTBK11",34)

"BLD",4630,"KRN",9.8,"NM","B","SDPPTEM",32)

"BLD",4630,"KRN",19,0)
19
"BLD",4630,"KRN",19,"NM",0)
^9.68A^57^57
"BLD",4630,"KRN",19,"NM",1,0)
SC PCMM DIRECT PC FTEE^^0
"BLD",4630,"KRN",19,"NM",2,0)
SCMC INCONSISTENT POSITION^^0
"BLD",4630,"KRN",19,"NM",3,0)
SC PCMM REPORTS MENU^^2
"BLD",4630,"KRN",19,"NM",4,0)
SCMC PCMM INACTIVE REPORT^^1^
"BLD",4630,"KRN",19,"NM",5,0)
SCMC RETRANSMIT^^0
"BLD",4630,"KRN",19,"NM",6,0)
SCMC PCMM NIGHTLY TASK^^0
"BLD",4630,"KRN",19,"NM",7,0)
SCMC PCMM GUI WORKSTATION^^0
"BLD",4630,"KRN",19,"NM",8,0)
SCMC ROOT MENU^^0
"BLD",4630,"KRN",19,"NM",9,0)
SCMC EXTENDED REPORT^^0
"BLD",4630,"KRN",19,"NM",10,0)
SCMC PRACTITIONER FLAGGED^^0
"BLD",4630,"KRN",19,"NM",11,0)
SCMC INACTIVATED REPORT^^0
"BLD",4630,"KRN",19,"NM",12,0)
SCMC INACTIVATED 30^^0
"BLD",4630,"KRN",19,"NM",13,0)
SCMC PATIENT ASSIGN/UNASSIGN^^0
"BLD",4630,"KRN",19,"NM",14,0)
SCMC FLAGGED^^0
"BLD",4630,"KRN",19,"NM",15,0)
SCMC PC STAFF AUTO INACTIVATE^^0
"BLD",4630,"KRN",19,"NM",16,0)
SCMC PCMM EWL MENU^^0
"BLD",4630,"KRN",19,"NM",17,0)
SCMC PCMM HISTORICAL REPORTS^^0
"BLD",4630,"KRN",19,"NM",18,0)
SCMC PCMM MAIN MENU^^0
"BLD",4630,"KRN",19,"NM",19,0)
SCMC PCMM PROVIDER RPTS MENU^^0
"BLD",4630,"KRN",19,"NM",20,0)
SCMC PCMM PT RPTS MENU^^0
"BLD",4630,"KRN",19,"NM",21,0)
SCMC PCMM REPORTS MENU^^0
"BLD",4630,"KRN",19,"NM",22,0)
SCMC PCMM REJECT TRANS MENU^^0
"BLD",4630,"KRN",19,"NM",23,0)
SCMC PCMM TEAM REPORTS MENU^^0
"BLD",4630,"KRN",19,"NM",24,0)
SCMC HL7 MENU^^0
"BLD",4630,"KRN",19,"NM",25,0)
SC PCMM LIST TEAM'S MEMBERS^^0
"BLD",4630,"KRN",19,"NM",26,0)
SC PCMM LIST TEAM'S PATIENTS^^0
"BLD",4630,"KRN",19,"NM",27,0)
SC PCMM SUM LIST OF TEAMS^^0
"BLD",4630,"KRN",19,"NM",28,0)
SC PCMM IND TEAM PROFILE^^0
"BLD",4630,"KRN",19,"NM",29,0)
SCMC MU MASS TEAM UNASSIGNMENT^^0
"BLD",4630,"KRN",19,"NM",30,0)
SC PCMM HIST TEAM ASSIGN SUMM^^0
"BLD",4630,"KRN",19,"NM",31,0)
SC PCMM HIST PAT ASSIGN DETAIL^^0
"BLD",4630,"KRN",19,"NM",32,0)
SC PCMM HIST PAT ASSIGN LIST^^0
"BLD",4630,"KRN",19,"NM",33,0)
SC PCMM HIST PROV ASSIGN LIST^^0
"BLD",4630,"KRN",19,"NM",34,0)
SD WAIT LIST INQUIRY^^0
"BLD",4630,"KRN",19,"NM",35,0)
SD WAIT LIST ENTER/EDIT^^0
"BLD",4630,"KRN",19,"NM",36,0)
SD WAIT LIST DISPOSITION ENTRY^^0
"BLD",4630,"KRN",19,"NM",37,0)
SD WAIT LIST REPORTS MENU^^0
"BLD",4630,"KRN",19,"NM",38,0)
SD WAIT LIST PAR ENTER/EDIT^^0
"BLD",4630,"KRN",19,"NM",39,0)
SCMC PCMM TRANS ERROR REPORT^^0
"BLD",4630,"KRN",19,"NM",40,0)
SCMC PCMM TRANS ERROR PROC^^0
"BLD",4630,"KRN",19,"NM",41,0)
SCMC PCMM ERR CODE REPORT^^0
"BLD",4630,"KRN",19,"NM",42,0)
SD WAIT LIST APPT REPORT^^4^
"BLD",4630,"KRN",19,"NM",43,0)
SD WAIT LIST PRM CARE/TEAM^^4^
"BLD",4630,"KRN",19,"NM",44,0)
SD WAIT LIST OVERDUE REPORT^^4^
"BLD",4630,"KRN",19,"NM",45,0)
SD WAIT LIST STAT REPORT^^4^
"BLD",4630,"KRN",19,"NM",46,0)
SD WAIT LIST ENROLL REPORT^^4^
"BLD",4630,"KRN",19,"NM",47,0)
SC PCMM PRACT DEMO^^4^
"BLD",4630,"KRN",19,"NM",48,0)
SC PCMM PRACT PATIENTS^^4^
"BLD",4630,"KRN",19,"NM",49,0)
SCMC PCMM EDIT PRACTIT #404.52^^4^
"BLD",4630,"KRN",19,"NM",50,0)
SC PCMM DETAIL LIST PTS^^4^
"BLD",4630,"KRN",19,"NM",51,0)
SC PCMM PT LIST W/TEAM ASSIGN^^4^
"BLD",4630,"KRN",19,"NM",52,0)
SC PCMM POSITION ASSIGN REVIEW^^4^
"BLD",4630,"KRN",19,"NM",53,0)
SC PCMM INCONSISTENCY REPORT^^0
"BLD",4630,"KRN",19,"NM",54,0)
SCMC EXTEND A PATIENT^^0
"BLD",4630,"KRN",19,"NM",55,0)
SCMC TOBE INACTIVATED^^0
"BLD",4630,"KRN",19,"NM",56,0)
SD WAIT LIST REOPEN ENTRIES^^4^
"BLD",4630,"KRN",19,"NM",57,0)
SDWL TRANSFER PRINT REQUESTS^^4^
"BLD",4630,"KRN",19,"NM","B","SC PCMM DETAIL LIST PTS",50)

"BLD",4630,"KRN",19,"NM","B","SC PCMM DIRECT PC FTEE",1)

"BLD",4630,"KRN",19,"NM","B","SC PCMM HIST PAT ASSIGN DETAIL",31)

"BLD",4630,"KRN",19,"NM","B","SC PCMM HIST PAT ASSIGN LIST",32)

"BLD",4630,"KRN",19,"NM","B","SC PCMM HIST PROV ASSIGN LIST",33)

"BLD",4630,"KRN",19,"NM","B","SC PCMM HIST TEAM ASSIGN SUMM",30)

"BLD",4630,"KRN",19,"NM","B","SC PCMM INCONSISTENCY REPORT",53)

"BLD",4630,"KRN",19,"NM","B","SC PCMM IND TEAM PROFILE",28)

"BLD",4630,"KRN",19,"NM","B","SC PCMM LIST TEAM'S MEMBERS",25)

"BLD",4630,"KRN",19,"NM","B","SC PCMM LIST TEAM'S PATIENTS",26)

"BLD",4630,"KRN",19,"NM","B","SC PCMM POSITION ASSIGN REVIEW",52)

"BLD",4630,"KRN",19,"NM","B","SC PCMM PRACT DEMO",47)

"BLD",4630,"KRN",19,"NM","B","SC PCMM PRACT PATIENTS",48)

"BLD",4630,"KRN",19,"NM","B","SC PCMM PT LIST W/TEAM ASSIGN",51)

"BLD",4630,"KRN",19,"NM","B","SC PCMM REPORTS MENU",3)

"BLD",4630,"KRN",19,"NM","B","SC PCMM SUM LIST OF TEAMS",27)

"BLD",4630,"KRN",19,"NM","B","SCMC EXTEND A PATIENT",54)

"BLD",4630,"KRN",19,"NM","B","SCMC EXTENDED REPORT",9)

"BLD",4630,"KRN",19,"NM","B","SCMC FLAGGED",14)

"BLD",4630,"KRN",19,"NM","B","SCMC HL7 MENU",24)

"BLD",4630,"KRN",19,"NM","B","SCMC INACTIVATED 30",12)

"BLD",4630,"KRN",19,"NM","B","SCMC INACTIVATED REPORT",11)

"BLD",4630,"KRN",19,"NM","B","SCMC INCONSISTENT POSITION",2)

"BLD",4630,"KRN",19,"NM","B","SCMC MU MASS TEAM UNASSIGNMENT",29)

"BLD",4630,"KRN",19,"NM","B","SCMC PATIENT ASSIGN/UNASSIGN",13)

"BLD",4630,"KRN",19,"NM","B","SCMC PC STAFF AUTO INACTIVATE",15)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM EDIT PRACTIT #404.52",49)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM ERR CODE REPORT",41)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM EWL MENU",16)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM GUI WORKSTATION",7)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM HISTORICAL REPORTS",17)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM INACTIVE REPORT",4)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM MAIN MENU",18)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM NIGHTLY TASK",6)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM PROVIDER RPTS MENU",19)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM PT RPTS MENU",20)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM REJECT TRANS MENU",22)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM REPORTS MENU",21)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM TEAM REPORTS MENU",23)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM TRANS ERROR PROC",40)

"BLD",4630,"KRN",19,"NM","B","SCMC PCMM TRANS ERROR REPORT",39)

"BLD",4630,"KRN",19,"NM","B","SCMC PRACTITIONER FLAGGED",10)

"BLD",4630,"KRN",19,"NM","B","SCMC RETRANSMIT",5)

"BLD",4630,"KRN",19,"NM","B","SCMC ROOT MENU",8)

"BLD",4630,"KRN",19,"NM","B","SCMC TOBE INACTIVATED",55)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST APPT REPORT",42)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST DISPOSITION ENTRY",36)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST ENROLL REPORT",46)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST ENTER/EDIT",35)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST INQUIRY",34)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST OVERDUE REPORT",44)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST PAR ENTER/EDIT",38)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST PRM CARE/TEAM",43)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST REOPEN ENTRIES",56)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST REPORTS MENU",37)

"BLD",4630,"KRN",19,"NM","B","SD WAIT LIST STAT REPORT",45)

"BLD",4630,"KRN",19,"NM","B","SDWL TRANSFER PRINT REQUESTS",57)

"BLD",4630,"KRN",19.1,0)
19.1
"BLD",4630,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",4630,"KRN",101,0)
101
"BLD",4630,"KRN",101,"NM",0)
^9.68A^1^1
"BLD",4630,"KRN",101,"NM",1,0)
SC PC PATIENT ASSIGN/UNASSIGN^^0
"BLD",4630,"KRN",101,"NM","B","SC PC PATIENT ASSIGN/UNASSIGN",1)

"BLD",4630,"KRN",409.61,0)
409.61
"BLD",4630,"KRN",771,0)
771
"BLD",4630,"KRN",870,0)
870
"BLD",4630,"KRN",8989.51,0)
8989.51
"BLD",4630,"KRN",8989.52,0)
8989.52
"BLD",4630,"KRN",8994,0)
8994
"BLD",4630,"KRN",8994,"NM",0)
^9.68A^10^10
"BLD",4630,"KRN",8994,"NM",1,0)
SCMC PCMM CHECK FTEE^^0
"BLD",4630,"KRN",8994,"NM",2,0)
SC EXTEND BUILD LIST^^0
"BLD",4630,"KRN",8994,"NM",3,0)
SC EXTEND FILE LIST^^0
"BLD",4630,"KRN",8994,"NM",4,0)
SCMC FILE INACTIVATION END^^0
"BLD",4630,"KRN",8994,"NM",5,0)
SC FILE ASSOCIATE CLINICS^^0
"BLD",4630,"KRN",8994,"NM",6,0)
SC GET ASSOCIATE CLINICS^^0
"BLD",4630,"KRN",8994,"NM",7,0)
SC CHECK FOR ENROLLMENT^^0
"BLD",4630,"KRN",8994,"NM",8,0)
SC POSITION RESIDENT ROLE^^0
"BLD",4630,"KRN",8994,"NM",9,0)
SCMC POSITION PC CHECK^^0
"BLD",4630,"KRN",8994,"NM",10,0)
SCMC ROLE^^0
"BLD",4630,"KRN",8994,"NM","B","SC CHECK FOR ENROLLMENT",7)

"BLD",4630,"KRN",8994,"NM","B","SC EXTEND BUILD LIST",2)

"BLD",4630,"KRN",8994,"NM","B","SC EXTEND FILE LIST",3)

"BLD",4630,"KRN",8994,"NM","B","SC FILE ASSOCIATE CLINICS",5)

"BLD",4630,"KRN",8994,"NM","B","SC GET ASSOCIATE CLINICS",6)

"BLD",4630,"KRN",8994,"NM","B","SC POSITION RESIDENT ROLE",8)

"BLD",4630,"KRN",8994,"NM","B","SCMC FILE INACTIVATION END",4)

"BLD",4630,"KRN",8994,"NM","B","SCMC PCMM CHECK FTEE",1)

"BLD",4630,"KRN",8994,"NM","B","SCMC POSITION PC CHECK",9)

"BLD",4630,"KRN",8994,"NM","B","SCMC ROLE",10)

"BLD",4630,"KRN","B",.4,.4)

"BLD",4630,"KRN","B",.401,.401)

"BLD",4630,"KRN","B",.402,.402)

"BLD",4630,"KRN","B",.403,.403)

"BLD",4630,"KRN","B",.5,.5)

"BLD",4630,"KRN","B",.84,.84)

"BLD",4630,"KRN","B",3.6,3.6)

"BLD",4630,"KRN","B",3.8,3.8)

"BLD",4630,"KRN","B",9.2,9.2)

"BLD",4630,"KRN","B",9.8,9.8)

"BLD",4630,"KRN","B",19,19)

"BLD",4630,"KRN","B",19.1,19.1)

"BLD",4630,"KRN","B",101,101)

"BLD",4630,"KRN","B",409.61,409.61)

"BLD",4630,"KRN","B",771,771)

"BLD",4630,"KRN","B",870,870)

"BLD",4630,"KRN","B",8989.51,8989.51)

"BLD",4630,"KRN","B",8989.52,8989.52)

"BLD",4630,"KRN","B",8994,8994)

"BLD",4630,"QUES",0)
^9.62^^
"BLD",4630,"REQB",0)
^9.611^1^1
"BLD",4630,"REQB",1,0)
SD*5.3*272^2
"BLD",4630,"REQB","B","SD*5.3*272",1)

"DATA",403.46,1,0)
PHYSICIAN-ATTENDING^34^1
"DATA",403.46,1,1,0)
^403.46001^10^10^3051202^^^^
"DATA",403.46,1,1,1,0)
As a physician, incumbent's duties are to advise on, administer,
"DATA",403.46,1,1,2,0)
supervise or perform professional and scientific work in one or
"DATA",403.46,1,1,3,0)
more fields of medicine. The degree of Doctor of Medicine or Doctor
"DATA",403.46,1,1,4,0)
of Osteopathy is a fundamental requirement, along with a current
"DATA",403.46,1,1,5,0)
license to practice medicine and surgery in a US State, territory
"DATA",403.46,1,1,6,0)
or the District of Columbia.
"DATA",403.46,1,1,7,0)
 
"DATA",403.46,1,1,8,0)
As an attending physician, incumbent acts as team, ward or group
"DATA",403.46,1,1,9,0)
leader, and incurs the associated responsibilities as defined by
"DATA",403.46,1,1,10,0)
the governing Credentials committee.
"DATA",403.46,1,2,0)
^403.462PA^818^381
"DATA",403.46,1,2,1,0)
1
"DATA",403.46,1,2,2,0)
2
"DATA",403.46,1,2,3,0)
3
"DATA",403.46,1,2,4,0)
4
"DATA",403.46,1,2,5,0)
5
"DATA",403.46,1,2,6,0)
6
"DATA",403.46,1,2,7,0)
7
"DATA",403.46,1,2,8,0)
8
"DATA",403.46,1,2,9,0)
9
"DATA",403.46,1,2,10,0)
10
"DATA",403.46,1,2,11,0)
11
"DATA",403.46,1,2,12,0)
12
"DATA",403.46,1,2,13,0)
13
"DATA",403.46,1,2,14,0)
14
"DATA",403.46,1,2,15,0)
15
"DATA",403.46,1,2,17,0)
17
"DATA",403.46,1,2,18,0)
18
"DATA",403.46,1,2,19,0)
19
"DATA",403.46,1,2,20,0)
20
"DATA",403.46,1,2,21,0)
21
"DATA",403.46,1,2,22,0)
22
"DATA",403.46,1,2,23,0)
23
"DATA",403.46,1,2,26,0)
26
"DATA",403.46,1,2,27,0)
27
"DATA",403.46,1,2,28,0)
28
"DATA",403.46,1,2,29,0)
29
"DATA",403.46,1,2,30,0)
30
"DATA",403.46,1,2,31,0)
31
"DATA",403.46,1,2,32,0)
32
"DATA",403.46,1,2,33,0)
33
"DATA",403.46,1,2,34,0)
34
"DATA",403.46,1,2,35,0)
35
"DATA",403.46,1,2,36,0)
36
"DATA",403.46,1,2,37,0)
37
"DATA",403.46,1,2,38,0)
38
"DATA",403.46,1,2,39,0)
39
"DATA",403.46,1,2,40,0)
40
"DATA",403.46,1,2,41,0)
41
"DATA",403.46,1,2,42,0)
42
"DATA",403.46,1,2,43,0)
43
"DATA",403.46,1,2,45,0)
45
"DATA",403.46,1,2,46,0)
46
"DATA",403.46,1,2,47,0)
47
"DATA",403.46,1,2,48,0)
48
"DATA",403.46,1,2,49,0)
49
"DATA",403.46,1,2,50,0)
50
"DATA",403.46,1,2,51,0)
51
"DATA",403.46,1,2,52,0)
52
"DATA",403.46,1,2,53,0)
53
"DATA",403.46,1,2,54,0)
54
"DATA",403.46,1,2,55,0)
55
"DATA",403.46,1,2,56,0)
56
"DATA",403.46,1,2,57,0)
57
"DATA",403.46,1,2,58,0)
58
"DATA",403.46,1,2,59,0)
59
"DATA",403.46,1,2,61,0)
61
"DATA",403.46,1,2,62,0)
62
"DATA",403.46,1,2,63,0)
63
"DATA",403.46,1,2,64,0)
64
"DATA",403.46,1,2,65,0)
65
"DATA",403.46,1,2,66,0)
66
"DATA",403.46,1,2,67,0)
67
"DATA",403.46,1,2,69,0)
69
"DATA",403.46,1,2,70,0)
70
"DATA",403.46,1,2,71,0)
71
"DATA",403.46,1,2,72,0)
72
"DATA",403.46,1,2,73,0)
73
"DATA",403.46,1,2,74,0)
74
"DATA",403.46,1,2,75,0)
75
"DATA",403.46,1,2,76,0)
76
"DATA",403.46,1,2,77,0)
77
"DATA",403.46,1,2,78,0)
78
"DATA",403.46,1,2,79,0)
79
"DATA",403.46,1,2,80,0)
80
"DATA",403.46,1,2,81,0)
81
"DATA",403.46,1,2,82,0)
82
"DATA",403.46,1,2,83,0)
83
"DATA",403.46,1,2,84,0)
84
"DATA",403.46,1,2,85,0)
85
"DATA",403.46,1,2,86,0)
86
"DATA",403.46,1,2,87,0)
87
"DATA",403.46,1,2,88,0)
88
"DATA",403.46,1,2,89,0)
89
"DATA",403.46,1,2,90,0)
90
"DATA",403.46,1,2,91,0)
91
"DATA",403.46,1,2,92,0)
92
"DATA",403.46,1,2,93,0)
93
"DATA",403.46,1,2,94,0)
94
"DATA",403.46,1,2,95,0)
95
"DATA",403.46,1,2,96,0)
96
"DATA",403.46,1,2,97,0)
97
"DATA",403.46,1,2,98,0)
98
"DATA",403.46,1,2,99,0)
99
"DATA",403.46,1,2,100,0)
100
"DATA",403.46,1,2,101,0)
101
"DATA",403.46,1,2,102,0)
102
"DATA",403.46,1,2,103,0)
103
"DATA",403.46,1,2,104,0)
104
"DATA",403.46,1,2,105,0)
105
"DATA",403.46,1,2,106,0)
106
"DATA",403.46,1,2,107,0)
107
"DATA",403.46,1,2,108,0)
108
"DATA",403.46,1,2,109,0)
109
"DATA",403.46,1,2,110,0)
110
"DATA",403.46,1,2,111,0)
111
"DATA",403.46,1,2,112,0)
112
"DATA",403.46,1,2,113,0)
113
"DATA",403.46,1,2,114,0)
114
"DATA",403.46,1,2,115,0)
115
"DATA",403.46,1,2,116,0)
116
"DATA",403.46,1,2,117,0)
117
"DATA",403.46,1,2,118,0)
118
"DATA",403.46,1,2,119,0)
119
"DATA",403.46,1,2,120,0)
120
"DATA",403.46,1,2,121,0)
121
"DATA",403.46,1,2,122,0)
122
"DATA",403.46,1,2,123,0)
123
"DATA",403.46,1,2,124,0)
124
"DATA",403.46,1,2,125,0)
125
"DATA",403.46,1,2,126,0)
126
"DATA",403.46,1,2,127,0)
127
"DATA",403.46,1,2,128,0)
128
"DATA",403.46,1,2,131,0)
131
"DATA",403.46,1,2,133,0)
133
"DATA",403.46,1,2,134,0)
134
"DATA",403.46,1,2,135,0)
135
"DATA",403.46,1,2,136,0)
136
"DATA",403.46,1,2,138,0)
138
"DATA",403.46,1,2,139,0)
139
"DATA",403.46,1,2,141,0)
141
"DATA",403.46,1,2,142,0)
142
"DATA",403.46,1,2,143,0)
143
"DATA",403.46,1,2,146,0)
146
"DATA",403.46,1,2,147,0)
147
"DATA",403.46,1,2,148,0)
148
"DATA",403.46,1,2,149,0)
149
"DATA",403.46,1,2,150,0)
150
"DATA",403.46,1,2,152,0)
152
"DATA",403.46,1,2,154,0)
154
"DATA",403.46,1,2,155,0)
155
"DATA",403.46,1,2,156,0)
156
"DATA",403.46,1,2,157,0)
157
"DATA",403.46,1,2,158,0)
158
"DATA",403.46,1,2,159,0)
159
"DATA",403.46,1,2,160,0)
160
"DATA",403.46,1,2,162,0)
162
"DATA",403.46,1,2,163,0)
163
"DATA",403.46,1,2,165,0)
165
"DATA",403.46,1,2,166,0)
166
"DATA",403.46,1,2,168,0)
168
"DATA",403.46,1,2,170,0)
170
"DATA",403.46,1,2,171,0)
171
"DATA",403.46,1,2,172,0)
172
"DATA",403.46,1,2,173,0)
173
"DATA",403.46,1,2,174,0)
174
"DATA",403.46,1,2,175,0)
175
"DATA",403.46,1,2,176,0)
176
"DATA",403.46,1,2,177,0)
177
"DATA",403.46,1,2,178,0)
178
"DATA",403.46,1,2,569,0)
569
"DATA",403.46,1,2,570,0)
570
"DATA",403.46,1,2,571,0)
571
"DATA",403.46,1,2,572,0)
572
"DATA",403.46,1,2,573,0)
573
"DATA",403.46,1,2,574,0)
574
"DATA",403.46,1,2,575,0)
575
"DATA",403.46,1,2,576,0)
576
"DATA",403.46,1,2,577,0)
577
"DATA",403.46,1,2,578,0)
578
"DATA",403.46,1,2,579,0)
579
"DATA",403.46,1,2,580,0)
580
"DATA",403.46,1,2,581,0)
581
"DATA",403.46,1,2,582,0)
582
"DATA",403.46,1,2,583,0)
583
"DATA",403.46,1,2,584,0)
584
"DATA",403.46,1,2,585,0)
585
"DATA",403.46,1,2,586,0)
586
"DATA",403.46,1,2,587,0)
587
"DATA",403.46,1,2,588,0)
588
"DATA",403.46,1,2,589,0)
589
"DATA",403.46,1,2,590,0)
590
"DATA",403.46,1,2,591,0)
591
"DATA",403.46,1,2,592,0)
592
"DATA",403.46,1,2,593,0)
593
"DATA",403.46,1,2,594,0)
594
"DATA",403.46,1,2,595,0)
595
"DATA",403.46,1,2,596,0)
596
"DATA",403.46,1,2,597,0)
597
"DATA",403.46,1,2,598,0)
598
"DATA",403.46,1,2,599,0)
599
"DATA",403.46,1,2,600,0)
600
"DATA",403.46,1,2,601,0)
601
"DATA",403.46,1,2,602,0)
602
"DATA",403.46,1,2,603,0)
603
"DATA",403.46,1,2,604,0)
604
"DATA",403.46,1,2,605,0)
605
"DATA",403.46,1,2,606,0)
606
"DATA",403.46,1,2,607,0)
607
"DATA",403.46,1,2,608,0)
608
"DATA",403.46,1,2,685,0)
685
"DATA",403.46,1,2,686,0)
686
"DATA",403.46,1,2,687,0)
687
"DATA",403.46,1,2,688,0)
688
"DATA",403.46,1,2,689,0)
689
"DATA",403.46,1,2,690,0)
690
"DATA",403.46,1,2,691,0)
691
"DATA",403.46,1,2,692,0)
692
"DATA",403.46,1,2,693,0)
693
"DATA",403.46,1,2,694,0)
694
"DATA",403.46,1,2,695,0)
695
"DATA",403.46,1,2,696,0)
696
"DATA",403.46,1,2,697,0)
697
"DATA",403.46,1,2,698,0)
698
"DATA",403.46,1,2,699,0)
699
"DATA",403.46,1,2,700,0)
700
"DATA",403.46,1,2,701,0)
701
"DATA",403.46,1,2,702,0)
702
"DATA",403.46,1,2,703,0)
703
"DATA",403.46,1,2,704,0)
704
"DATA",403.46,1,2,705,0)
705
"DATA",403.46,1,2,706,0)
706
"DATA",403.46,1,2,707,0)
707
"DATA",403.46,1,2,708,0)
708
"DATA",403.46,1,2,709,0)
709
"DATA",403.46,1,2,710,0)
710
"DATA",403.46,1,2,711,0)
711
"DATA",403.46,1,2,712,0)
712
"DATA",403.46,1,2,713,0)
713
"DATA",403.46,1,2,714,0)
714
"DATA",403.46,1,2,715,0)
715
"DATA",403.46,1,2,716,0)
716
"DATA",403.46,1,2,717,0)
717
"DATA",403.46,1,2,718,0)
718
"DATA",403.46,1,2,744,0)
744
"DATA",403.46,1,2,747,0)
747
"DATA",403.46,1,2,748,0)
748
"DATA",403.46,1,2,749,0)
749
"DATA",403.46,1,2,750,0)
750
"DATA",403.46,1,2,752,0)
752
"DATA",403.46,1,2,753,0)
753
"DATA",403.46,1,2,754,0)
754
"DATA",403.46,1,2,755,0)
755
"DATA",403.46,1,2,756,0)
756
"DATA",403.46,1,2,757,0)
757
"DATA",403.46,1,2,758,0)
758
"DATA",403.46,1,2,760,0)
760
"DATA",403.46,1,2,762,0)
762
"DATA",403.46,1,2,764,0)
764
"DATA",403.46,1,2,765,0)
765
"DATA",403.46,1,2,766,0)
766
"DATA",403.46,1,2,767,0)
767
"DATA",403.46,1,2,770,0)
770
"DATA",403.46,1,2,772,0)
772
"DATA",403.46,1,2,773,0)
773
"DATA",403.46,1,2,774,0)
774
"DATA",403.46,1,2,775,0)
775
"DATA",403.46,1,2,776,0)
776
"DATA",403.46,1,2,777,0)
777
"DATA",403.46,1,2,778,0)
778
"DATA",403.46,1,2,779,0)
779
"DATA",403.46,1,2,780,0)
780
"DATA",403.46,1,2,781,0)
781
"DATA",403.46,1,2,782,0)
782
"DATA",403.46,1,2,783,0)
783
"DATA",403.46,1,2,784,0)
784
"DATA",403.46,1,2,785,0)
785
"DATA",403.46,1,2,787,0)
787
"DATA",403.46,1,2,789,0)
789
"DATA",403.46,1,2,790,0)
790
"DATA",403.46,1,2,791,0)
791
"DATA",403.46,1,2,792,0)
792
"DATA",403.46,1,2,793,0)
793
"DATA",403.46,1,2,795,0)
795
"DATA",403.46,1,2,796,0)
796
"DATA",403.46,1,2,797,0)
797
"DATA",403.46,1,2,798,0)
798
"DATA",403.46,1,2,799,0)
799
"DATA",403.46,1,2,800,0)
800
"DATA",403.46,1,2,801,0)
801
"DATA",403.46,1,2,802,0)
802
"DATA",403.46,1,2,803,0)
803
"DATA",403.46,1,2,804,0)
804
"DATA",403.46,1,2,805,0)
805
"DATA",403.46,1,2,806,0)
806
"DATA",403.46,1,2,807,0)
807
"DATA",403.46,1,2,808,0)
808
"DATA",403.46,1,2,809,0)
809
"DATA",403.46,1,2,810,0)
810
"DATA",403.46,1,2,811,0)
811
"DATA",403.46,1,2,812,0)
812
"DATA",403.46,1,2,813,0)
813
"DATA",403.46,1,2,814,0)
814
"DATA",403.46,1,2,815,0)
815
"DATA",403.46,1,2,816,0)
816
"DATA",403.46,1,2,817,0)
817
"DATA",403.46,1,2,818,0)
818
"DATA",403.46,1,2,819,0)
819
"DATA",403.46,1,2,820,0)
820
"DATA",403.46,1,2,821,0)
821
"DATA",403.46,1,2,822,0)
822
"DATA",403.46,1,2,823,0)
823
"DATA",403.46,1,2,825,0)
825
"DATA",403.46,1,2,827,0)
827
"DATA",403.46,1,2,828,0)
828
"DATA",403.46,1,2,829,0)
829
"DATA",403.46,1,2,830,0)
830
"DATA",403.46,1,2,831,0)
831
"DATA",403.46,1,2,832,0)
832
"DATA",403.46,1,2,833,0)
833
"DATA",403.46,1,2,834,0)
834
"DATA",403.46,1,2,836,0)
836
"DATA",403.46,1,2,838,0)
838
"DATA",403.46,1,2,839,0)
839
"DATA",403.46,1,2,840,0)
840
"DATA",403.46,1,2,841,0)
841
"DATA",403.46,1,2,842,0)
842
"DATA",403.46,1,2,843,0)
843
"DATA",403.46,1,2,844,0)
844
"DATA",403.46,1,2,845,0)
845
"DATA",403.46,1,2,846,0)
846
"DATA",403.46,1,2,847,0)
847
"DATA",403.46,1,2,848,0)
848
"DATA",403.46,1,2,849,0)
849
"DATA",403.46,1,2,850,0)
850
"DATA",403.46,1,2,851,0)
851
"DATA",403.46,1,2,852,0)
852
"DATA",403.46,1,2,853,0)
853
"DATA",403.46,1,2,854,0)
854
"DATA",403.46,1,2,855,0)
855
"DATA",403.46,1,2,856,0)
856
"DATA",403.46,1,2,857,0)
857
"DATA",403.46,1,2,858,0)
858
"DATA",403.46,1,2,859,0)
859
"DATA",403.46,1,2,860,0)
860
"DATA",403.46,1,2,861,0)
861
"DATA",403.46,1,2,862,0)
862
"DATA",403.46,1,2,863,0)
863
"DATA",403.46,1,2,864,0)
864
"DATA",403.46,1,2,866,0)
866
"DATA",403.46,1,2,868,0)
868
"DATA",403.46,1,2,869,0)
869
"DATA",403.46,1,2,870,0)
870
"DATA",403.46,1,2,871,0)
871
"DATA",403.46,1,2,872,0)
872
"DATA",403.46,1,2,873,0)
873
"DATA",403.46,1,2,874,0)
874
"DATA",403.46,1,2,875,0)
875
"DATA",403.46,1,2,876,0)
876
"DATA",403.46,1,2,877,0)
877
"DATA",403.46,1,2,878,0)
878
"DATA",403.46,1,2,879,0)
879
"DATA",403.46,1,2,880,0)
880
"DATA",403.46,1,2,881,0)
881
"DATA",403.46,1,2,882,0)
882
"DATA",403.46,1,2,883,0)
883
"DATA",403.46,1,2,884,0)
884
"DATA",403.46,1,2,885,0)
885
"DATA",403.46,1,2,888,0)
888
"DATA",403.46,1,2,889,0)
889
"DATA",403.46,1,2,890,0)
890
"DATA",403.46,1,2,891,0)
891
"DATA",403.46,1,2,892,0)
892
"DATA",403.46,1,2,893,0)
893
"DATA",403.46,1,2,894,0)
894
"DATA",403.46,1,2,895,0)
895
"DATA",403.46,1,2,896,0)
896
"DATA",403.46,1,2,897,0)
897
"DATA",403.46,1,2,898,0)
898
"DATA",403.46,1,2,899,0)
899
"DATA",403.46,1,2,900,0)
900
"DATA",403.46,1,2,901,0)
901
"DATA",403.46,1,2,902,0)
902
"DATA",403.46,1,2,903,0)
903
"DATA",403.46,1,2,904,0)
904
"DATA",403.46,1,2,905,0)
905
"DATA",403.46,1,2,906,0)
906
"DATA",403.46,1,2,907,0)
907
"DATA",403.46,1,2,908,0)
908
"DATA",403.46,1,2,909,0)
909
"DATA",403.46,1,2,911,0)
911
"DATA",403.46,1,2,913,0)
913
"DATA",403.46,2,0)
PHYSICIAN-PRIMARY CARE^334^1
"DATA",403.46,2,1,0)
^403.46001^16^16^3060123^^^^
"DATA",403.46,2,1,1,0)
As a physician, incumbent's duties are to advise on, administer,
"DATA",403.46,2,1,2,0)
supervise or perform professional and scientific work in one or
"DATA",403.46,2,1,3,0)
more fields of medicine. The degree of Doctor of Medicine or Doctor
"DATA",403.46,2,1,4,0)
of Osteopathy is a fundamental requirement, along with a current
"DATA",403.46,2,1,5,0)
license to practice medicine and surgery in a US State, territory
"DATA",403.46,2,1,6,0)
or the District of Columbia.
"DATA",403.46,2,1,7,0)
 
"DATA",403.46,2,1,8,0)
As a Primary Care practitioner, the incumbent provides the first
"DATA",403.46,2,1,9,0)
point of assistance for a patient seeking care. Primary Care duties
"DATA",403.46,2,1,10,0)
include: (1) Intake and initial needs assessment, (2) Health 
"DATA",403.46,2,1,11,0)
promotion and disease prevention, (3) Management of
"DATA",403.46,2,1,12,0)
acute and chronic biopsychosocial conditions, 
"DATA",403.46,2,1,13,0)
(4) Access to other components of health care, 
"DATA",403.46,2,1,14,0)
(5) Continuity, and (6) Patient and non-professional
"DATA",403.46,2,1,15,0)
care giver education & training.
"DATA",403.46,2,1,16,0)
(from IL 10-93-031, Under Secretary for Health's Letter)
"DATA",403.46,2,2,0)
^403.462PA^787^382
"DATA",403.46,2,2,1,0)
1
"DATA",403.46,2,2,2,0)
2
"DATA",403.46,2,2,3,0)
3
"DATA",403.46,2,2,4,0)
4
"DATA",403.46,2,2,5,0)
5
"DATA",403.46,2,2,6,0)
6
"DATA",403.46,2,2,7,0)
7
"DATA",403.46,2,2,8,0)
8
"DATA",403.46,2,2,9,0)
9
"DATA",403.46,2,2,10,0)
10
"DATA",403.46,2,2,11,0)
11
"DATA",403.46,2,2,12,0)
12
"DATA",403.46,2,2,13,0)
13
"DATA",403.46,2,2,14,0)
14
"DATA",403.46,2,2,15,0)
15
"DATA",403.46,2,2,17,0)
17
"DATA",403.46,2,2,18,0)
18
"DATA",403.46,2,2,19,0)
19
"DATA",403.46,2,2,20,0)
20
"DATA",403.46,2,2,21,0)
21
"DATA",403.46,2,2,22,0)
22
"DATA",403.46,2,2,23,0)
23
"DATA",403.46,2,2,26,0)
26
"DATA",403.46,2,2,27,0)
27
"DATA",403.46,2,2,28,0)
28
"DATA",403.46,2,2,29,0)
29
"DATA",403.46,2,2,30,0)
30
"DATA",403.46,2,2,31,0)
31
"DATA",403.46,2,2,32,0)
32
"DATA",403.46,2,2,33,0)
33
"DATA",403.46,2,2,34,0)
34
"DATA",403.46,2,2,35,0)
35
"DATA",403.46,2,2,36,0)
36
"DATA",403.46,2,2,37,0)
37
"DATA",403.46,2,2,38,0)
38
"DATA",403.46,2,2,39,0)
39
"DATA",403.46,2,2,40,0)
40
"DATA",403.46,2,2,41,0)
41
"DATA",403.46,2,2,42,0)
42
"DATA",403.46,2,2,43,0)
43
"DATA",403.46,2,2,45,0)
45
"DATA",403.46,2,2,46,0)
46
"DATA",403.46,2,2,47,0)
47
"DATA",403.46,2,2,48,0)
48
"DATA",403.46,2,2,49,0)
49
"DATA",403.46,2,2,50,0)
50
"DATA",403.46,2,2,51,0)
51
"DATA",403.46,2,2,52,0)
52
"DATA",403.46,2,2,53,0)
53
"DATA",403.46,2,2,54,0)
54
"DATA",403.46,2,2,55,0)
55
"DATA",403.46,2,2,56,0)
56
"DATA",403.46,2,2,57,0)
57
"DATA",403.46,2,2,58,0)
58
"DATA",403.46,2,2,59,0)
59
"DATA",403.46,2,2,61,0)
61
"DATA",403.46,2,2,62,0)
62
"DATA",403.46,2,2,63,0)
63
"DATA",403.46,2,2,64,0)
64
"DATA",403.46,2,2,65,0)
65
"DATA",403.46,2,2,66,0)
66
"DATA",403.46,2,2,67,0)
67
"DATA",403.46,2,2,69,0)
69
"DATA",403.46,2,2,70,0)
70
"DATA",403.46,2,2,71,0)
71
"DATA",403.46,2,2,72,0)
72
"DATA",403.46,2,2,73,0)
73
"DATA",403.46,2,2,74,0)
74
"DATA",403.46,2,2,75,0)
75
"DATA",403.46,2,2,76,0)
76
"DATA",403.46,2,2,77,0)
77
"DATA",403.46,2,2,78,0)
78
"DATA",403.46,2,2,79,0)
79
"DATA",403.46,2,2,80,0)
80
"DATA",403.46,2,2,81,0)
81
"DATA",403.46,2,2,82,0)
82
"DATA",403.46,2,2,83,0)
83
"DATA",403.46,2,2,84,0)
84
"DATA",403.46,2,2,85,0)
85
"DATA",403.46,2,2,86,0)
86
"DATA",403.46,2,2,87,0)
87
"DATA",403.46,2,2,88,0)
88
"DATA",403.46,2,2,89,0)
89
"DATA",403.46,2,2,90,0)
90
"DATA",403.46,2,2,91,0)
91
"DATA",403.46,2,2,92,0)
92
"DATA",403.46,2,2,93,0)
93
"DATA",403.46,2,2,94,0)
94
"DATA",403.46,2,2,95,0)
95
"DATA",403.46,2,2,96,0)
96
"DATA",403.46,2,2,97,0)
97
"DATA",403.46,2,2,98,0)
98
"DATA",403.46,2,2,99,0)
99
"DATA",403.46,2,2,100,0)
100
"DATA",403.46,2,2,101,0)
101
"DATA",403.46,2,2,102,0)
102
"DATA",403.46,2,2,103,0)
103
"DATA",403.46,2,2,104,0)
104
"DATA",403.46,2,2,105,0)
105
"DATA",403.46,2,2,106,0)
106
"DATA",403.46,2,2,107,0)
107
"DATA",403.46,2,2,108,0)
108
"DATA",403.46,2,2,109,0)
109
"DATA",403.46,2,2,110,0)
110
"DATA",403.46,2,2,111,0)
111
"DATA",403.46,2,2,112,0)
112
"DATA",403.46,2,2,113,0)
113
"DATA",403.46,2,2,114,0)
114
"DATA",403.46,2,2,115,0)
115
"DATA",403.46,2,2,116,0)
116
"DATA",403.46,2,2,117,0)
117
"DATA",403.46,2,2,118,0)
118
"DATA",403.46,2,2,119,0)
119
"DATA",403.46,2,2,120,0)
120
"DATA",403.46,2,2,121,0)
121
"DATA",403.46,2,2,122,0)
122
"DATA",403.46,2,2,123,0)
123
"DATA",403.46,2,2,124,0)
124
"DATA",403.46,2,2,125,0)
125
"DATA",403.46,2,2,126,0)
126
"DATA",403.46,2,2,127,0)
127
"DATA",403.46,2,2,128,0)
128
"DATA",403.46,2,2,131,0)
131
"DATA",403.46,2,2,133,0)
133
"DATA",403.46,2,2,134,0)
134
"DATA",403.46,2,2,135,0)
135
"DATA",403.46,2,2,136,0)
136
"DATA",403.46,2,2,138,0)
138
"DATA",403.46,2,2,139,0)
139
"DATA",403.46,2,2,141,0)
141
"DATA",403.46,2,2,142,0)
142
"DATA",403.46,2,2,143,0)
143
"DATA",403.46,2,2,146,0)
146
"DATA",403.46,2,2,147,0)
147
"DATA",403.46,2,2,148,0)
148
"DATA",403.46,2,2,149,0)
149
"DATA",403.46,2,2,150,0)
150
"DATA",403.46,2,2,152,0)
152
"DATA",403.46,2,2,154,0)
154
"DATA",403.46,2,2,155,0)
155
"DATA",403.46,2,2,156,0)
156
"DATA",403.46,2,2,157,0)
157
"DATA",403.46,2,2,158,0)
158
"DATA",403.46,2,2,159,0)
159
"DATA",403.46,2,2,160,0)
160
"DATA",403.46,2,2,162,0)
162
"DATA",403.46,2,2,163,0)
163
"DATA",403.46,2,2,165,0)
165
"DATA",403.46,2,2,166,0)
166
"DATA",403.46,2,2,168,0)
168
"DATA",403.46,2,2,170,0)
170
"DATA",403.46,2,2,171,0)
171
"DATA",403.46,2,2,172,0)
172
"DATA",403.46,2,2,173,0)
173
"DATA",403.46,2,2,174,0)
174
"DATA",403.46,2,2,175,0)
175
"DATA",403.46,2,2,176,0)
176
"DATA",403.46,2,2,177,0)
177
"DATA",403.46,2,2,178,0)
178
"DATA",403.46,2,2,569,0)
569
"DATA",403.46,2,2,570,0)
570
"DATA",403.46,2,2,571,0)
571
"DATA",403.46,2,2,572,0)
572
"DATA",403.46,2,2,573,0)
573
"DATA",403.46,2,2,574,0)
574
"DATA",403.46,2,2,575,0)
575
"DATA",403.46,2,2,576,0)
576
"DATA",403.46,2,2,577,0)
577
"DATA",403.46,2,2,578,0)
578
"DATA",403.46,2,2,579,0)
579
"DATA",403.46,2,2,580,0)
580
"DATA",403.46,2,2,581,0)
581
"DATA",403.46,2,2,582,0)
582
"DATA",403.46,2,2,583,0)
583
"DATA",403.46,2,2,584,0)
584
"DATA",403.46,2,2,585,0)
585
"DATA",403.46,2,2,586,0)
586
"DATA",403.46,2,2,587,0)
587
"DATA",403.46,2,2,588,0)
588
"DATA",403.46,2,2,589,0)
589
"DATA",403.46,2,2,590,0)
590
"DATA",403.46,2,2,591,0)
591
"DATA",403.46,2,2,592,0)
592
"DATA",403.46,2,2,593,0)
593
"DATA",403.46,2,2,594,0)
594
"DATA",403.46,2,2,595,0)
595
"DATA",403.46,2,2,596,0)
596
"DATA",403.46,2,2,597,0)
597
"DATA",403.46,2,2,598,0)
598
"DATA",403.46,2,2,599,0)
599
"DATA",403.46,2,2,600,0)
600
"DATA",403.46,2,2,601,0)
601
"DATA",403.46,2,2,602,0)
602
"DATA",403.46,2,2,603,0)
603
"DATA",403.46,2,2,604,0)
604
"DATA",403.46,2,2,605,0)
605
"DATA",403.46,2,2,606,0)
606
"DATA",403.46,2,2,607,0)
607
"DATA",403.46,2,2,608,0)
608
"DATA",403.46,2,2,685,0)
685
"DATA",403.46,2,2,686,0)
686
"DATA",403.46,2,2,687,0)
687
"DATA",403.46,2,2,688,0)
688
"DATA",403.46,2,2,689,0)
689
"DATA",403.46,2,2,690,0)
690
"DATA",403.46,2,2,691,0)
691
"DATA",403.46,2,2,692,0)
692
"DATA",403.46,2,2,693,0)
693
"DATA",403.46,2,2,694,0)
694
"DATA",403.46,2,2,695,0)
695
"DATA",403.46,2,2,696,0)
696
"DATA",403.46,2,2,697,0)
697
"DATA",403.46,2,2,698,0)
698
"DATA",403.46,2,2,699,0)
699
"DATA",403.46,2,2,700,0)
700
"DATA",403.46,2,2,701,0)
701
"DATA",403.46,2,2,702,0)
702
"DATA",403.46,2,2,703,0)
703
"DATA",403.46,2,2,704,0)
704
"DATA",403.46,2,2,705,0)
705
"DATA",403.46,2,2,706,0)
706
"DATA",403.46,2,2,707,0)
707
"DATA",403.46,2,2,708,0)
708
"DATA",403.46,2,2,709,0)
709
"DATA",403.46,2,2,710,0)
710
"DATA",403.46,2,2,711,0)
711
"DATA",403.46,2,2,712,0)
712
"DATA",403.46,2,2,713,0)
713
"DATA",403.46,2,2,714,0)
714
"DATA",403.46,2,2,715,0)
715
"DATA",403.46,2,2,716,0)
716
"DATA",403.46,2,2,717,0)
717
"DATA",403.46,2,2,718,0)
718
"DATA",403.46,2,2,744,0)
744
"DATA",403.46,2,2,747,0)
747
"DATA",403.46,2,2,748,0)
748
"DATA",403.46,2,2,749,0)
749
"DATA",403.46,2,2,750,0)
750
"DATA",403.46,2,2,751,0)
751
"DATA",403.46,2,2,752,0)
752
"DATA",403.46,2,2,753,0)
753
"DATA",403.46,2,2,754,0)
754
"DATA",403.46,2,2,755,0)
755
"DATA",403.46,2,2,756,0)
756
"DATA",403.46,2,2,757,0)
757
"DATA",403.46,2,2,758,0)
758
"DATA",403.46,2,2,760,0)
760
"DATA",403.46,2,2,762,0)
762
"DATA",403.46,2,2,764,0)
764
"DATA",403.46,2,2,765,0)
765
"DATA",403.46,2,2,766,0)
766
"DATA",403.46,2,2,767,0)
767
"DATA",403.46,2,2,770,0)
770
"DATA",403.46,2,2,771,0)
771
"DATA",403.46,2,2,772,0)
772
"DATA",403.46,2,2,773,0)
773
"DATA",403.46,2,2,774,0)
774
"DATA",403.46,2,2,776,0)
776
"DATA",403.46,2,2,777,0)
777
"DATA",403.46,2,2,778,0)
778
"DATA",403.46,2,2,779,0)
779
"DATA",403.46,2,2,780,0)
780
"DATA",403.46,2,2,781,0)
781
"DATA",403.46,2,2,782,0)
782
"DATA",403.46,2,2,783,0)
783
"DATA",403.46,2,2,784,0)
784
"DATA",403.46,2,2,785,0)
785
"DATA",403.46,2,2,787,0)
787
"DATA",403.46,2,2,789,0)
789
"DATA",403.46,2,2,790,0)
790
"DATA",403.46,2,2,791,0)
791
"DATA",403.46,2,2,792,0)
792
"DATA",403.46,2,2,793,0)
793
"DATA",403.46,2,2,794,0)
794
"DATA",403.46,2,2,795,0)
795
"DATA",403.46,2,2,796,0)
796
"DATA",403.46,2,2,797,0)
797
"DATA",403.46,2,2,798,0)
798
"DATA",403.46,2,2,799,0)
799
"DATA",403.46,2,2,800,0)
800
"DATA",403.46,2,2,801,0)
801
"DATA",403.46,2,2,802,0)
802
"DATA",403.46,2,2,803,0)
803
"DATA",403.46,2,2,804,0)
804
"DATA",403.46,2,2,805,0)
805
"DATA",403.46,2,2,806,0)
806
"DATA",403.46,2,2,807,0)
807
"DATA",403.46,2,2,808,0)
808
"DATA",403.46,2,2,809,0)
809
"DATA",403.46,2,2,810,0)
810
"DATA",403.46,2,2,811,0)
811
"DATA",403.46,2,2,812,0)
812
"DATA",403.46,2,2,813,0)
813
"DATA",403.46,2,2,814,0)
814
"DATA",403.46,2,2,815,0)
815
"DATA",403.46,2,2,817,0)
817
"DATA",403.46,2,2,818,0)
818
"DATA",403.46,2,2,819,0)
819
"DATA",403.46,2,2,820,0)
820
"DATA",403.46,2,2,821,0)
821
"DATA",403.46,2,2,822,0)
822
"DATA",403.46,2,2,823,0)
823
"DATA",403.46,2,2,825,0)
825
"DATA",403.46,2,2,826,0)
826
"DATA",403.46,2,2,827,0)
827
"DATA",403.46,2,2,828,0)
828
"DATA",403.46,2,2,829,0)
829
"DATA",403.46,2,2,830,0)
830
"DATA",403.46,2,2,831,0)
831
"DATA",403.46,2,2,832,0)
832
"DATA",403.46,2,2,833,0)
833
"DATA",403.46,2,2,834,0)
834
"DATA",403.46,2,2,836,0)
836
"DATA",403.46,2,2,838,0)
838
"DATA",403.46,2,2,839,0)
839
"DATA",403.46,2,2,840,0)
840
"DATA",403.46,2,2,841,0)
841
"DATA",403.46,2,2,842,0)
842
"DATA",403.46,2,2,843,0)
843
"DATA",403.46,2,2,844,0)
844
"DATA",403.46,2,2,845,0)
845
"DATA",403.46,2,2,846,0)
846
"DATA",403.46,2,2,847,0)
847
"DATA",403.46,2,2,848,0)
848
"DATA",403.46,2,2,849,0)
849
"DATA",403.46,2,2,850,0)
850
"DATA",403.46,2,2,851,0)
851
"DATA",403.46,2,2,852,0)
852
"DATA",403.46,2,2,853,0)
853
"DATA",403.46,2,2,854,0)
854
"DATA",403.46,2,2,855,0)
855
"DATA",403.46,2,2,856,0)
856
"DATA",403.46,2,2,857,0)
857
"DATA",403.46,2,2,858,0)
858
"DATA",403.46,2,2,859,0)
859
"DATA",403.46,2,2,860,0)
860
"DATA",403.46,2,2,861,0)
861
"DATA",403.46,2,2,862,0)
862
"DATA",403.46,2,2,863,0)
863
"DATA",403.46,2,2,864,0)
864
"DATA",403.46,2,2,866,0)
866
"DATA",403.46,2,2,867,0)
867
"DATA",403.46,2,2,868,0)
868
"DATA",403.46,2,2,869,0)
869
"DATA",403.46,2,2,871,0)
871
"DATA",403.46,2,2,872,0)
872
"DATA",403.46,2,2,873,0)
873
"DATA",403.46,2,2,874,0)
874
"DATA",403.46,2,2,876,0)
876
"DATA",403.46,2,2,877,0)
877
"DATA",403.46,2,2,878,0)
878
"DATA",403.46,2,2,879,0)
879
"DATA",403.46,2,2,880,0)
880
"DATA",403.46,2,2,881,0)
881
"DATA",403.46,2,2,882,0)
882
"DATA",403.46,2,2,883,0)
883
"DATA",403.46,2,2,884,0)
884
"DATA",403.46,2,2,885,0)
885
"DATA",403.46,2,2,888,0)
888
"DATA",403.46,2,2,889,0)
889
"DATA",403.46,2,2,890,0)
890
"DATA",403.46,2,2,891,0)
891
"DATA",403.46,2,2,892,0)
892
"DATA",403.46,2,2,893,0)
893
"DATA",403.46,2,2,894,0)
894
"DATA",403.46,2,2,895,0)
895
"DATA",403.46,2,2,896,0)
896
"DATA",403.46,2,2,897,0)
897
"DATA",403.46,2,2,898,0)
898
"DATA",403.46,2,2,899,0)
899
"DATA",403.46,2,2,901,0)
901
"DATA",403.46,2,2,902,0)
902
"DATA",403.46,2,2,903,0)
903
"DATA",403.46,2,2,904,0)
904
"DATA",403.46,2,2,905,0)
905
"DATA",403.46,2,2,906,0)
906
"DATA",403.46,2,2,907,0)
907
"DATA",403.46,2,2,908,0)
908
"DATA",403.46,2,2,909,0)
909
"DATA",403.46,2,2,911,0)
911
"DATA",403.46,2,2,912,0)
912
"DATA",403.46,2,2,914,0)
914
"DATA",403.46,3,0)
PHYSICIAN-SUBSPECIALTY^334^1
"DATA",403.46,3,1,0)
^403.46001^10^10^3051205^^^^
"DATA",403.46,3,1,1,0)
As a physician, incumbent's duties are to advise on, administer,
"DATA",403.46,3,1,2,0)
supervise or perform professional and scientific work in one or
"DATA",403.46,3,1,3,0)
more fields of medicine. The degree of Doctor of Medicine or Doctor
"DATA",403.46,3,1,4,0)
of Osteopathy is a fundamental requirement, along with a current
"DATA",403.46,3,1,5,0)
license to practice medicine and surgery in a US State, territory
"DATA",403.46,3,1,6,0)
or the District of Columbia.
"DATA",403.46,3,1,7,0)
 
"DATA",403.46,3,1,8,0)
The incumbent is also granted clinical privileges (by the appropriate
"DATA",403.46,3,1,9,0)
governing Credentials committee) in regard to the practice of
"DATA",403.46,3,1,10,0)
Specialty or Subspecialty care in the areas of Medicine or Surgery.
"DATA",403.46,3,2,0)
^403.462PA^818^382
"DATA",403.46,3,2,1,0)
1
"DATA",403.46,3,2,2,0)
2
"DATA",403.46,3,2,3,0)
3
"DATA",403.46,3,2,4,0)
4
"DATA",403.46,3,2,5,0)
5
"DATA",403.46,3,2,6,0)
6
"DATA",403.46,3,2,7,0)
7
"DATA",403.46,3,2,8,0)
8
"DATA",403.46,3,2,9,0)
9
"DATA",403.46,3,2,10,0)
10
"DATA",403.46,3,2,11,0)
11
"DATA",403.46,3,2,12,0)
12
"DATA",403.46,3,2,13,0)
13
"DATA",403.46,3,2,14,0)
14
"DATA",403.46,3,2,15,0)
15
"DATA",403.46,3,2,17,0)
17
"DATA",403.46,3,2,18,0)
18
"DATA",403.46,3,2,19,0)
19
"DATA",403.46,3,2,20,0)
20
"DATA",403.46,3,2,21,0)
21
"DATA",403.46,3,2,22,0)
22
"DATA",403.46,3,2,23,0)
23
"DATA",403.46,3,2,26,0)
26
"DATA",403.46,3,2,27,0)
27
"DATA",403.46,3,2,28,0)
28
"DATA",403.46,3,2,29,0)
29
"DATA",403.46,3,2,30,0)
30
"DATA",403.46,3,2,31,0)
31
"DATA",403.46,3,2,32,0)
32
"DATA",403.46,3,2,33,0)
33
"DATA",403.46,3,2,34,0)
34
"DATA",403.46,3,2,35,0)
35
"DATA",403.46,3,2,36,0)
36
"DATA",403.46,3,2,37,0)
37
"DATA",403.46,3,2,38,0)
38
"DATA",403.46,3,2,39,0)
39
"DATA",403.46,3,2,40,0)
40
"DATA",403.46,3,2,41,0)
41
"DATA",403.46,3,2,42,0)
42
"DATA",403.46,3,2,43,0)
43
"DATA",403.46,3,2,45,0)
45
"DATA",403.46,3,2,46,0)
46
"DATA",403.46,3,2,47,0)
47
"DATA",403.46,3,2,48,0)
48
"DATA",403.46,3,2,49,0)
49
"DATA",403.46,3,2,50,0)
50
"DATA",403.46,3,2,51,0)
51
"DATA",403.46,3,2,52,0)
52
"DATA",403.46,3,2,53,0)
53
"DATA",403.46,3,2,54,0)
54
"DATA",403.46,3,2,55,0)
55
"DATA",403.46,3,2,56,0)
56
"DATA",403.46,3,2,57,0)
57
"DATA",403.46,3,2,58,0)
58
"DATA",403.46,3,2,59,0)
59
"DATA",403.46,3,2,61,0)
61
"DATA",403.46,3,2,62,0)
62
"DATA",403.46,3,2,63,0)
63
"DATA",403.46,3,2,64,0)
64
"DATA",403.46,3,2,65,0)
65
"DATA",403.46,3,2,66,0)
66
"DATA",403.46,3,2,67,0)
67
"DATA",403.46,3,2,69,0)
69
"DATA",403.46,3,2,70,0)
70
"DATA",403.46,3,2,71,0)
71
"DATA",403.46,3,2,72,0)
72
"DATA",403.46,3,2,73,0)
73
"DATA",403.46,3,2,74,0)
74
"DATA",403.46,3,2,75,0)
75
"DATA",403.46,3,2,76,0)
76
"DATA",403.46,3,2,77,0)
77
"DATA",403.46,3,2,78,0)
78
"DATA",403.46,3,2,79,0)
79
"DATA",403.46,3,2,80,0)
80
"DATA",403.46,3,2,81,0)
81
"DATA",403.46,3,2,82,0)
82
"DATA",403.46,3,2,83,0)
83
"DATA",403.46,3,2,84,0)
84
"DATA",403.46,3,2,85,0)
85
"DATA",403.46,3,2,86,0)
86
"DATA",403.46,3,2,87,0)
87
"DATA",403.46,3,2,88,0)
88
"DATA",403.46,3,2,89,0)
89
"DATA",403.46,3,2,90,0)
90
"DATA",403.46,3,2,91,0)
91
"DATA",403.46,3,2,92,0)
92
"DATA",403.46,3,2,93,0)
93
"DATA",403.46,3,2,94,0)
94
"DATA",403.46,3,2,95,0)
95
"DATA",403.46,3,2,96,0)
96
"DATA",403.46,3,2,97,0)
97
"DATA",403.46,3,2,98,0)
98
"DATA",403.46,3,2,99,0)
99
"DATA",403.46,3,2,100,0)
100
"DATA",403.46,3,2,101,0)
101
"DATA",403.46,3,2,102,0)
102
"DATA",403.46,3,2,103,0)
103
"DATA",403.46,3,2,104,0)
104
"DATA",403.46,3,2,105,0)
105
"DATA",403.46,3,2,106,0)
106
"DATA",403.46,3,2,107,0)
107
"DATA",403.46,3,2,108,0)
108
"DATA",403.46,3,2,109,0)
109
"DATA",403.46,3,2,110,0)
110
"DATA",403.46,3,2,111,0)
111
"DATA",403.46,3,2,112,0)
112
"DATA",403.46,3,2,113,0)
113
"DATA",403.46,3,2,114,0)
114
"DATA",403.46,3,2,115,0)
115
"DATA",403.46,3,2,116,0)
116
"DATA",403.46,3,2,117,0)
117
"DATA",403.46,3,2,118,0)
118
"DATA",403.46,3,2,119,0)
119
"DATA",403.46,3,2,120,0)
120
"DATA",403.46,3,2,121,0)
121
"DATA",403.46,3,2,122,0)
122
"DATA",403.46,3,2,123,0)
123
"DATA",403.46,3,2,124,0)
124
"DATA",403.46,3,2,125,0)
125
"DATA",403.46,3,2,126,0)
126
"DATA",403.46,3,2,127,0)
127
"DATA",403.46,3,2,128,0)
128
"DATA",403.46,3,2,131,0)
131
"DATA",403.46,3,2,133,0)
133
"DATA",403.46,3,2,134,0)
134
"DATA",403.46,3,2,135,0)
135
"DATA",403.46,3,2,136,0)
136
"DATA",403.46,3,2,138,0)
138
"DATA",403.46,3,2,139,0)
139
"DATA",403.46,3,2,141,0)
141
"DATA",403.46,3,2,142,0)
142
"DATA",403.46,3,2,143,0)
143
"DATA",403.46,3,2,146,0)
146
"DATA",403.46,3,2,147,0)
147
"DATA",403.46,3,2,148,0)
148
"DATA",403.46,3,2,149,0)
149
"DATA",403.46,3,2,150,0)
150
"DATA",403.46,3,2,152,0)
152
"DATA",403.46,3,2,154,0)
154
"DATA",403.46,3,2,155,0)
155
"DATA",403.46,3,2,156,0)
156
"DATA",403.46,3,2,157,0)
157
"DATA",403.46,3,2,158,0)
158
"DATA",403.46,3,2,159,0)
159
"DATA",403.46,3,2,160,0)
160
"DATA",403.46,3,2,162,0)
162
"DATA",403.46,3,2,163,0)
163
"DATA",403.46,3,2,165,0)
165
"DATA",403.46,3,2,166,0)
166
"DATA",403.46,3,2,168,0)
168
"DATA",403.46,3,2,170,0)
170
"DATA",403.46,3,2,171,0)
171
"DATA",403.46,3,2,172,0)
172
"DATA",403.46,3,2,173,0)
173
"DATA",403.46,3,2,174,0)
174
"DATA",403.46,3,2,175,0)
175
"DATA",403.46,3,2,176,0)
176
"DATA",403.46,3,2,177,0)
177
"DATA",403.46,3,2,178,0)
178
"DATA",403.46,3,2,569,0)
569
"DATA",403.46,3,2,570,0)
570
"DATA",403.46,3,2,571,0)
571
"DATA",403.46,3,2,572,0)
572
"DATA",403.46,3,2,573,0)
573
"DATA",403.46,3,2,574,0)
574
"DATA",403.46,3,2,575,0)
575
"DATA",403.46,3,2,576,0)
576
"DATA",403.46,3,2,577,0)
577
"DATA",403.46,3,2,578,0)
578
"DATA",403.46,3,2,579,0)
579
"DATA",403.46,3,2,580,0)
580
"DATA",403.46,3,2,581,0)
581
"DATA",403.46,3,2,582,0)
582
"DATA",403.46,3,2,583,0)
583
"DATA",403.46,3,2,584,0)
584
"DATA",403.46,3,2,585,0)
585
"DATA",403.46,3,2,586,0)
586
"DATA",403.46,3,2,587,0)
587
"DATA",403.46,3,2,588,0)
588
"DATA",403.46,3,2,589,0)
589
"DATA",403.46,3,2,590,0)
590
"DATA",403.46,3,2,591,0)
591
"DATA",403.46,3,2,592,0)
592
"DATA",403.46,3,2,593,0)
593
"DATA",403.46,3,2,594,0)
594
"DATA",403.46,3,2,595,0)
595
"DATA",403.46,3,2,596,0)
596
"DATA",403.46,3,2,597,0)
597
"DATA",403.46,3,2,598,0)
598
"DATA",403.46,3,2,599,0)
599
"DATA",403.46,3,2,600,0)
600
"DATA",403.46,3,2,601,0)
601
"DATA",403.46,3,2,602,0)
602
"DATA",403.46,3,2,603,0)
603
"DATA",403.46,3,2,604,0)
604
"DATA",403.46,3,2,605,0)
605
"DATA",403.46,3,2,606,0)
606
"DATA",403.46,3,2,607,0)
607
"DATA",403.46,3,2,608,0)
608
"DATA",403.46,3,2,685,0)
685
"DATA",403.46,3,2,686,0)
686
"DATA",403.46,3,2,687,0)
687
"DATA",403.46,3,2,688,0)
688
"DATA",403.46,3,2,689,0)
689
"DATA",403.46,3,2,690,0)
690
"DATA",403.46,3,2,691,0)
691
"DATA",403.46,3,2,692,0)
692
"DATA",403.46,3,2,693,0)
693
"DATA",403.46,3,2,694,0)
694
"DATA",403.46,3,2,695,0)
695
"DATA",403.46,3,2,696,0)
696
"DATA",403.46,3,2,697,0)
697
"DATA",403.46,3,2,698,0)
698
"DATA",403.46,3,2,699,0)
699
"DATA",403.46,3,2,700,0)
700
"DATA",403.46,3,2,701,0)
701
"DATA",403.46,3,2,702,0)
702
"DATA",403.46,3,2,703,0)
703
"DATA",403.46,3,2,704,0)
704
"DATA",403.46,3,2,705,0)
705
"DATA",403.46,3,2,706,0)
706
"DATA",403.46,3,2,707,0)
707
"DATA",403.46,3,2,708,0)
708
"DATA",403.46,3,2,709,0)
709
"DATA",403.46,3,2,710,0)
710
"DATA",403.46,3,2,711,0)
711
"DATA",403.46,3,2,712,0)
712
"DATA",403.46,3,2,713,0)
713
"DATA",403.46,3,2,714,0)
714
"DATA",403.46,3,2,715,0)
715
"DATA",403.46,3,2,716,0)
716
"DATA",403.46,3,2,717,0)
717
"DATA",403.46,3,2,718,0)
718
"DATA",403.46,3,2,744,0)
744
"DATA",403.46,3,2,747,0)
747
"DATA",403.46,3,2,748,0)
748
"DATA",403.46,3,2,749,0)
749
"DATA",403.46,3,2,750,0)
750
"DATA",403.46,3,2,751,0)
751
"DATA",403.46,3,2,752,0)
752
"DATA",403.46,3,2,753,0)
753
"DATA",403.46,3,2,754,0)
754
"DATA",403.46,3,2,755,0)
755
"DATA",403.46,3,2,756,0)
756
"DATA",403.46,3,2,757,0)
757
"DATA",403.46,3,2,758,0)
758
"DATA",403.46,3,2,759,0)
759
"DATA",403.46,3,2,760,0)
760
"DATA",403.46,3,2,762,0)
762
"DATA",403.46,3,2,764,0)
764
"DATA",403.46,3,2,765,0)
765
"DATA",403.46,3,2,766,0)
766
"DATA",403.46,3,2,767,0)
767
"DATA",403.46,3,2,770,0)
770
"DATA",403.46,3,2,771,0)
771
"DATA",403.46,3,2,772,0)
772
"DATA",403.46,3,2,773,0)
773
"DATA",403.46,3,2,774,0)
774
"DATA",403.46,3,2,776,0)
776
"DATA",403.46,3,2,777,0)
777
"DATA",403.46,3,2,778,0)
778
"DATA",403.46,3,2,779,0)
779
"DATA",403.46,3,2,780,0)
780
"DATA",403.46,3,2,781,0)
781
"DATA",403.46,3,2,782,0)
782
"DATA",403.46,3,2,783,0)
783
"DATA",403.46,3,2,784,0)
784
"DATA",403.46,3,2,785,0)
785
"DATA",403.46,3,2,787,0)
787
"DATA",403.46,3,2,789,0)
789
"DATA",403.46,3,2,790,0)
790
"DATA",403.46,3,2,791,0)
791
"DATA",403.46,3,2,792,0)
792
"DATA",403.46,3,2,793,0)
793
"DATA",403.46,3,2,794,0)
794
"DATA",403.46,3,2,795,0)
795
"DATA",403.46,3,2,796,0)
796
"DATA",403.46,3,2,797,0)
797
"DATA",403.46,3,2,798,0)
798
"DATA",403.46,3,2,799,0)
799
"DATA",403.46,3,2,800,0)
800
"DATA",403.46,3,2,801,0)
801
"DATA",403.46,3,2,802,0)
802
"DATA",403.46,3,2,803,0)
803
"DATA",403.46,3,2,804,0)
804
"DATA",403.46,3,2,805,0)
805
"DATA",403.46,3,2,806,0)
806
"DATA",403.46,3,2,807,0)
807
"DATA",403.46,3,2,808,0)
808
"DATA",403.46,3,2,809,0)
809
"DATA",403.46,3,2,810,0)
810
"DATA",403.46,3,2,811,0)
811
"DATA",403.46,3,2,812,0)
812
"DATA",403.46,3,2,813,0)
813
"DATA",403.46,3,2,814,0)
814
"DATA",403.46,3,2,815,0)
815
"DATA",403.46,3,2,816,0)
816
"DATA",403.46,3,2,817,0)
817
"DATA",403.46,3,2,818,0)
818
"DATA",403.46,3,2,819,0)
819
"DATA",403.46,3,2,820,0)
820
"DATA",403.46,3,2,821,0)
821
"DATA",403.46,3,2,822,0)
822
"DATA",403.46,3,2,823,0)
823
"DATA",403.46,3,2,825,0)
825
"DATA",403.46,3,2,827,0)
827
"DATA",403.46,3,2,828,0)
828
"DATA",403.46,3,2,829,0)
829
"DATA",403.46,3,2,830,0)
830
"DATA",403.46,3,2,831,0)
831
"DATA",403.46,3,2,832,0)
832
"DATA",403.46,3,2,833,0)
833
"DATA",403.46,3,2,834,0)
834
"DATA",403.46,3,2,835,0)
835
"DATA",403.46,3,2,838,0)
838
"DATA",403.46,3,2,839,0)
839
"DATA",403.46,3,2,840,0)
840
"DATA",403.46,3,2,841,0)
841
"DATA",403.46,3,2,842,0)
842
"DATA",403.46,3,2,843,0)
843
"DATA",403.46,3,2,844,0)
844
"DATA",403.46,3,2,846,0)
846
"DATA",403.46,3,2,847,0)
847
"DATA",403.46,3,2,848,0)
848
"DATA",403.46,3,2,849,0)
849
"DATA",403.46,3,2,850,0)
850
"DATA",403.46,3,2,851,0)
851
"DATA",403.46,3,2,852,0)
852
"DATA",403.46,3,2,853,0)
853
"DATA",403.46,3,2,854,0)
854
"DATA",403.46,3,2,855,0)
855
"DATA",403.46,3,2,856,0)
856
"DATA",403.46,3,2,857,0)
857
"DATA",403.46,3,2,858,0)
858
"DATA",403.46,3,2,859,0)
859
"DATA",403.46,3,2,860,0)
860
"DATA",403.46,3,2,861,0)
861
"DATA",403.46,3,2,862,0)
862
"DATA",403.46,3,2,863,0)
863
"DATA",403.46,3,2,864,0)
864
"DATA",403.46,3,2,866,0)
866
"DATA",403.46,3,2,867,0)
867
"DATA",403.46,3,2,868,0)
868
"DATA",403.46,3,2,869,0)
869
"DATA",403.46,3,2,870,0)
870
"DATA",403.46,3,2,871,0)
871
"DATA",403.46,3,2,872,0)
872
"DATA",403.46,3,2,873,0)
873
"DATA",403.46,3,2,874,0)
874
"DATA",403.46,3,2,875,0)
875
"DATA",403.46,3,2,876,0)
876
"DATA",403.46,3,2,877,0)
877
"DATA",403.46,3,2,879,0)
879
"DATA",403.46,3,2,880,0)
880
"DATA",403.46,3,2,881,0)
881
"DATA",403.46,3,2,883,0)
883
"DATA",403.46,3,2,884,0)
884
"DATA",403.46,3,2,885,0)
885
"DATA",403.46,3,2,888,0)
888
"DATA",403.46,3,2,889,0)
889
"DATA",403.46,3,2,890,0)
890
"DATA",403.46,3,2,891,0)
891
"DATA",403.46,3,2,892,0)
892
"DATA",403.46,3,2,893,0)
893
"DATA",403.46,3,2,894,0)
894
"DATA",403.46,3,2,895,0)
895
"DATA",403.46,3,2,896,0)
896
"DATA",403.46,3,2,897,0)
897
"DATA",403.46,3,2,898,0)
898
"DATA",403.46,3,2,899,0)
899
"DATA",403.46,3,2,900,0)
900
"DATA",403.46,3,2,902,0)
902
"DATA",403.46,3,2,903,0)
903
"DATA",403.46,3,2,904,0)
904
"DATA",403.46,3,2,905,0)
905
"DATA",403.46,3,2,906,0)
906
"DATA",403.46,3,2,907,0)
907
"DATA",403.46,3,2,908,0)
908
"DATA",403.46,3,2,909,0)
909
"DATA",403.46,3,2,911,0)
911
"DATA",403.46,3,2,913,0)
913
"DATA",403.46,3,2,914,0)
914
"DATA",403.46,4,0)
NURSE PRACTITIONER^276^3
"DATA",403.46,4,1,0)
^403.46001^7^7^3030806^^^
"DATA",403.46,4,1,1,0)
Performs appropriate assessments, orders diagnostic tests
"DATA",403.46,4,1,2,0)
and consultations as necessary, prescribes treatment 
"DATA",403.46,4,1,3,0)
interventions in accordance with established protocols,
"DATA",403.46,4,1,4,0)
provides or arranges follow-up care, and provides health
"DATA",403.46,4,1,5,0)
teaching and supportive counseling. Patient care is a joint
"DATA",403.46,4,1,6,0)
responsibility of the Nurse practitioner and the designated
"DATA",403.46,4,1,7,0)
Supervisory Physician or Physicians.
"DATA",403.46,4,2,0)
^403.462PA^668^19
"DATA",403.46,4,2,556,0)
556
"DATA",403.46,4,2,557,0)
557
"DATA",403.46,4,2,558,0)
558
"DATA",403.46,4,2,559,0)
559
"DATA",403.46,4,2,560,0)
560
"DATA",403.46,4,2,561,0)
561
"DATA",403.46,4,2,562,0)
562
"DATA",403.46,4,2,563,0)
563
"DATA",403.46,4,2,564,0)
564
"DATA",403.46,4,2,565,0)
565
"DATA",403.46,4,2,566,0)
566
"DATA",403.46,4,2,661,0)
661
"DATA",403.46,4,2,662,0)
662
"DATA",403.46,4,2,663,0)
663
"DATA",403.46,4,2,664,0)
664
"DATA",403.46,4,2,665,0)
665
"DATA",403.46,4,2,666,0)
666
"DATA",403.46,4,2,667,0)
667
"DATA",403.46,4,2,668,0)
668
"DATA",403.46,5,0)
PHYSICIAN ASSISTANT^335^3
"DATA",403.46,5,1,0)
^^6^6^2960415^^^
"DATA",403.46,5,1,1,0)
Provides diagnostic and therapeutic medical care and services
"DATA",403.46,5,1,2,0)
under the guidance of a Physician. This includes taking case
"DATA",403.46,5,1,3,0)
histories, conducting physical examinations, and ordering lab
"DATA",403.46,5,1,4,0)
and other studies. Physician Assistants also may carry out
"DATA",403.46,5,1,5,0)
special procedures, such as giving injections or other medication,
"DATA",403.46,5,1,6,0)
apply or change dressings, or suturing minor lacerations.
"DATA",403.46,5,2,0)
^403.462PA^205^3
"DATA",403.46,5,2,203,0)
203
"DATA",403.46,5,2,204,0)
204
"DATA",403.46,5,2,205,0)
205
"DATA",403.46,6,0)
NURSE (RN)^^0
"DATA",403.46,6,1,0)
^^7^7^2960415^^^
"DATA",403.46,6,1,1,0)
Provides care to patients in clinics and other settings,
"DATA",403.46,6,1,2,0)
administers anesthetic agents and supportive treatments
"DATA",403.46,6,1,3,0)
to patients undergoing outpatient surgery and other 
"DATA",403.46,6,1,4,0)
medical treatments, promotes better health practices, and
"DATA",403.46,6,1,5,0)
consults or advises nurses providing direct care to patients.
"DATA",403.46,6,1,6,0)
Persons in this position require a professional knowledge and
"DATA",403.46,6,1,7,0)
education in the field of nursing.
"DATA",403.46,7,0)
NURSE (LPN)^571^0
"DATA",403.46,7,1,0)
^^6^6^2960415^^
"DATA",403.46,7,1,1,0)
Provides a variety of nursing care and practices which do
"DATA",403.46,7,1,2,0)
not require full professional nurse education, but are
"DATA",403.46,7,1,3,0)
represented by the licensing of practical and vocational
"DATA",403.46,7,1,4,0)
nurses by a State, Territory or the District of Columbia.
"DATA",403.46,7,1,5,0)
Persons in these positions may also provide administrative
"DATA",403.46,7,1,6,0)
assistance, such as making appointments, etc.
"DATA",403.46,8,0)
CLINICAL PHARMACIST^58^0
"DATA",403.46,8,1,0)
^^11^11^2960415^^^^
"DATA",403.46,8,1,1,0)
This is a PharmD.  This is a pharmacist who:
"DATA",403.46,8,1,2,0)
Performs patient care duties related to patient medications as
"DATA",403.46,8,1,3,0)
assigned or granted by the appropriate governing committee at
"DATA",403.46,8,1,4,0)
the facility. These privileges may include and may or may not be
"DATA",403.46,8,1,5,0)
limited to:
"DATA",403.46,8,1,6,0)
(1) Initiation of renewal orders for chronic maintenance medications.
"DATA",403.46,8,1,7,0)
(2) Initiation of orders for laboratory tests necessary to monitor
"DATA",403.46,8,1,8,0)
existing drug therapy.
"DATA",403.46,8,1,9,0)
(3) Initiation of therapyupon referral by a clinician holding prescriptive
"DATA",403.46,8,1,10,0)
privileges and within the scope of practice and privileging of Clinical
"DATA",403.46,8,1,11,0)
Pharmacists.
"DATA",403.46,9,0)
SOCIAL WORKER^444^0
"DATA",403.46,9,1,0)
^^5^5^2960415^^
"DATA",403.46,9,1,1,0)
Performs patient care duties in accordance with Clinical Privileges
"DATA",403.46,9,1,2,0)
as assigned or granted by the appropriate governing committee in
"DATA",403.46,9,1,3,0)
the area of Social Work. Provides direct services to individuals,
"DATA",403.46,9,1,4,0)
groups and families with counseling, discharge planning, crisis
"DATA",403.46,9,1,5,0)
intervention, etc.
"DATA",403.46,10,0)
PHYSICIAN-PSYCHIATRIST^366^1
"DATA",403.46,10,1,0)
^403.46001^10^10^3051202^^^^
"DATA",403.46,10,1,1,0)
As a physician, incumbent's duties are to advise on, administer,
"DATA",403.46,10,1,2,0)
supervise or perform professional and scientific work in one or
"DATA",403.46,10,1,3,0)
more fields of medicine. The degree of Doctor of Medicine or Doctor
"DATA",403.46,10,1,4,0)
of Osteopathy is a fundamental requirement, along with a current
"DATA",403.46,10,1,5,0)
license to practice medicine and surgery in a US State, territory
"DATA",403.46,10,1,6,0)
or the District of Columbia.
"DATA",403.46,10,1,7,0)
 
"DATA",403.46,10,1,8,0)
The incumbent is also granted clinical privileges (by the appropriate
"DATA",403.46,10,1,9,0)
governing Credentials committee) in regard to the practice of
"DATA",403.46,10,1,10,0)
Psychiatry.
"DATA",403.46,10,2,0)
^403.462PA^885^19
"DATA",403.46,10,2,94,0)
94
"DATA",403.46,10,2,122,0)
122
"DATA",403.46,10,2,123,0)
123
"DATA",403.46,10,2,124,0)
124
"DATA",403.46,10,2,125,0)
125
"DATA",403.46,10,2,127,0)
127
"DATA",403.46,10,2,128,0)
128
"DATA",403.46,10,2,129,0)
129
"DATA",403.46,10,2,130,0)
130
"DATA",403.46,10,2,131,0)
131
"DATA",403.46,10,2,699,0)
699
"DATA",403.46,10,2,707,0)
707
"DATA",403.46,10,2,876,0)
876
"DATA",403.46,10,2,880,0)
880
"DATA",403.46,10,2,881,0)
881
"DATA",403.46,10,2,882,0)
882
"DATA",403.46,10,2,883,0)
883
"DATA",403.46,10,2,884,0)
884
"DATA",403.46,10,2,885,0)
885
"DATA",403.46,11,0)
PSYCHOLOGIST^335^0
"DATA",403.46,11,1,0)
^403.46001^5^5^3030806^^^
"DATA",403.46,11,1,1,0)
Performs patient care duties in accordance with Clinical Privileges
"DATA",403.46,11,1,2,0)
as assigned or granted by the appropriate governing committee in
"DATA",403.46,11,1,3,0)
the area of Psychology and Mental Health. This may include individual,
"DATA",403.46,11,1,4,0)
family and group counseling and psychotherapy, assertiveness and other
"DATA",403.46,11,1,5,0)
behavior training, etc.
"DATA",403.46,12,0)
REHAB/PSYCH TECHNICIAN^373^0
"DATA",403.46,12,1,0)
^^5^5^2960415^^
"DATA",403.46,12,1,1,0)
Provides patient care in accordance with Clinical Privileges
"DATA",403.46,12,1,2,0)
as assigned or granted by the appropriate governing committee in
"DATA",403.46,12,1,3,0)
the area of Psychology and Mental Health. This may include individual,
"DATA",403.46,12,1,4,0)
family or group counseling. The incumbent is typically supervised by
"DATA",403.46,12,1,5,0)
a degreed Psychologist or Mental health practitioner.
"DATA",403.46,13,0)
ADMIN COORDINATOR^78^0
"DATA",403.46,13,1,0)
^403.46001^4^4^3050726^^^^
"DATA",403.46,13,1,1,0)
The administrative coordinator for the team. This person is
"DATA",403.46,13,1,2,0)
involved with administrative (MAS requirements and/or Clinic
"DATA",403.46,13,1,3,0)
administration) duties as well as oversight of the Scheduling
"DATA",403.46,13,1,4,0)
process and Primary Care team definition.
"DATA",403.46,13,2,0)
^403.462PA
"DATA",403.46,14,0)
PATIENT SERVICES ASSISTANT^314^0
"DATA",403.46,14,1,0)
^^5^5^2960415^^
"DATA",403.46,14,1,1,0)
Provides clerical and patient processing support to the clinic,
"DATA",403.46,14,1,2,0)
or other unit of a medical facility, in support of the care and
"DATA",403.46,14,1,3,0)
treatment given to patients. This include duties as receptionist,
"DATA",403.46,14,1,4,0)
record keeping duties, clerical duties related to patient care, 
"DATA",403.46,14,1,5,0)
and miscellaneous support to the medical staff of the unit.
"DATA",403.46,15,0)
OTHER^^0
"DATA",403.46,15,1,0)
^^2^2^2960415^^
"DATA",403.46,15,1,1,0)
A general classification for those team members who do not
"DATA",403.46,15,1,2,0)
belong in any of the listed Standard Position entries.
"DATA",403.46,16,0)
RESIDENT (PHYSICIAN)^426^2
"DATA",403.46,16,1,0)
^403.46001^9^9^3051205^^^^
"DATA",403.46,16,1,1,0)
Performs patient care duties in accordance with Clinical Privileges
"DATA",403.46,16,1,2,0)
as assigned or granted by the appropriate governing committee and
"DATA",403.46,16,1,3,0)
is supervised by an Attending or assigned physician. Duties include
"DATA",403.46,16,1,4,0)
but may not be limited to completing history & physical examinations,
"DATA",403.46,16,1,5,0)
obtaining blood and other specimens, and provision of patient medical
"DATA",403.46,16,1,6,0)
care as permitted.
"DATA",403.46,16,1,7,0)
 
"DATA",403.46,16,1,8,0)
As a Resident, the incumbent is responsible for providing patient
"DATA",403.46,16,1,9,0)
care as directed by the Attending or supervising physician.
"DATA",403.46,16,2,0)
^403.462PA^145^4
"DATA",403.46,16,2,24,0)
24
"DATA",403.46,16,2,25,0)
25
"DATA",403.46,16,2,144,0)
144
"DATA",403.46,16,2,145,0)
145
"DATA",403.46,17,0)
INTERN (PHYSICIAN)^336^2
"DATA",403.46,17,1,0)
^403.46001^6^6^3051201^^^^
"DATA",403.46,17,1,1,0)
Performs patient care duties in accordance with Clinical Privileges
"DATA",403.46,17,1,2,0)
as assigned or granted by the appropriate governing committee and
"DATA",403.46,17,1,3,0)
is supervised by an Attending or assigned physician. Duties include
"DATA",403.46,17,1,4,0)
but may not be limited to completing history & physical examinations,
"DATA",403.46,17,1,5,0)
obtaining blood and other specimens, and provision of patient medical
"DATA",403.46,17,1,6,0)
care as permitted.
"DATA",403.46,17,2,0)
^403.462PA^747^3
"DATA",403.46,17,2,24,0)
24
"DATA",403.46,17,2,25,0)
25
"DATA",403.46,17,2,747,0)
747
"DATA",403.46,18,0)
MEDICAL STUDENT^255^0
"DATA",403.46,18,1,0)
^^3^3^2960415^^^
"DATA",403.46,18,1,1,0)
Performs patient care duties in accordance with Medical Center
"DATA",403.46,18,1,2,0)
Policy and Clinical Privileges as assigned or granted by the
"DATA",403.46,18,1,3,0)
appropriate governing committee at the facility.
"DATA",403.46,19,0)
MAS CLERK^222^0
"DATA",403.46,19,1,0)
^403.46001^2^2^3050719^^^
"DATA",403.46,19,1,1,0)
This person is a Medical Administrative Service clerk.  Often a major
"DATA",403.46,19,1,2,0)
amount of data entry is done by this individual.
"DATA",403.46,20,0)
DIETITIAN^101^0
"DATA",403.46,20,1,0)
^403.46001^2^2^3050719^^^^
"DATA",403.46,20,1,1,0)
An expert in dietetics.  This person is an expert in planning meals
"DATA",403.46,20,1,2,0)
and diets.
"DATA",403.46,21,0)
TEAM PHARMACIST^323^0
"DATA",403.46,21,1,0)
^^6^6^2960415^^
"DATA",403.46,21,1,1,0)
A pharmacists who:
"DATA",403.46,21,1,2,0)
(1) Is authorized to Fill/Dispense medications
"DATA",403.46,21,1,3,0)
(2) Enter/Verify medication orders
"DATA",403.46,21,1,4,0)
(3) Provide patient education relating to medications
"DATA",403.46,21,1,5,0)
(4) Renew established medications under the protocols defined by
"DATA",403.46,21,1,6,0)
the medical center
"DATA",403.46,22,0)
CLINICAL NURSE SPECIALIST^274^0
"DATA",403.46,22,1,0)
^^17^17^2990104
"DATA",403.46,22,1,1,0)
Masters Degree-prepared, registered nurses with nationally 
"DATA",403.46,22,1,2,0)
recognized clinical advanced practice certification, accountable for
"DATA",403.46,22,1,3,0)
the delivery of comprehensive health and preventive care services 
"DATA",403.46,22,1,4,0)
across the spectrum of clinical settings.  Uses an analytical
"DATA",403.46,22,1,5,0)
framework, such as nursing process, to create an environment 
"DATA",403.46,22,1,6,0)
that facilitates the delivery of care.  Coordinates and evaluates
"DATA",403.46,22,1,7,0)
integrated programs, and provides leadership in improving and
"DATA",403.46,22,1,8,0)
sustaining the quality and effectiveness of care in diverse or
"DATA",403.46,22,1,9,0)
complex programs. Function as licensed independent practitioners 
"DATA",403.46,22,1,10,0)
that do not require "supervision" by a physician, physician 
"DATA",403.46,22,1,11,0)
countersignature of orders or the care they provide. Function 
"DATA",403.46,22,1,12,0)
autonomously within a defined scope of practice in 
"DATA",403.46,22,1,13,0)
collaboration with physicians and other health care providers. 
"DATA",403.46,22,1,14,0)
[REF: IL 10-97-024, dated July 7, 1997: entitled "Under 
"DATA",403.46,22,1,15,0)
Secretary for Health's Information Letter - Utilization of Nurse 
"DATA",403.46,22,1,16,0)
Practitioners and Clinical Nurse Specialists" and Nursing
"DATA",403.46,22,1,17,0)
Qualifications Standards - Nurse Level IV]
"DATA",403.46,22,2,0)
^403.462PA^^0
"FIA",403.46)
STANDARD POSITION
"FIA",403.46,0)
^SD(403.46,
"FIA",403.46,0,0)
403.46
"FIA",403.46,0,1)
y^n^f^^^^y^m^n
"FIA",403.46,0,10)

"FIA",403.46,0,11)

"FIA",403.46,0,"RLRO")

"FIA",403.46,0,"VR")
5.3^SD
"FIA",403.46,403.46)
0
"FIA",403.46,403.46001)
0
"FIA",403.46,403.462)
0
"FIA",404.43)
PATIENT TEAM POSITION ASSIGNMENT
"FIA",404.43,0)
^SCPT(404.43,
"FIA",404.43,0,0)
404.43PI
"FIA",404.43,0,1)
y^n^f^^^^n^^n
"FIA",404.43,0,10)

"FIA",404.43,0,11)

"FIA",404.43,0,"RLRO")

"FIA",404.43,0,"VR")
5.3^SD
"FIA",404.43,404.43)
0
"FIA",404.44)
PCMM PARAMETER
"FIA",404.44,0)
^SCTM(404.44,
"FIA",404.44,0,0)
404.44
"FIA",404.44,0,1)
y^n^f^^^^n^^n
"FIA",404.44,0,10)

"FIA",404.44,0,11)

"FIA",404.44,0,"RLRO")

"FIA",404.44,0,"VR")
5.3^SD
"FIA",404.44,404.44)
0
"FIA",404.52)
POSITION ASSIGNMENT HISTORY
"FIA",404.52,0)
^SCTM(404.52,
"FIA",404.52,0,0)
404.52PIA
"FIA",404.52,0,1)
y^n^f^^^^n^^n
"FIA",404.52,0,10)

"FIA",404.52,0,11)

"FIA",404.52,0,"RLRO")

"FIA",404.52,0,"VR")
5.3^SD
"FIA",404.52,404.52)
0
"FIA",404.52,404.521)
0
"FIA",404.57)
TEAM POSITION
"FIA",404.57,0)
^SCTM(404.57,
"FIA",404.57,0,0)
404.57IA
"FIA",404.57,0,1)
y^y^f^^^^n^^n
"FIA",404.57,0,10)

"FIA",404.57,0,11)

"FIA",404.57,0,"RLRO")

"FIA",404.57,0,"VR")
5.3^SD
"FIA",404.57,404.57)
0
"FIA",404.57,404.571)
0
"FIA",404.57,404.575)
0
"INI")
PRE^SD53P297
"INIT")
POST^SD53P297
"IX",404.43,404.43,"AC",0)
404.43^AC^Disposition Waiting List Entry^MU^^R^IR^I^404.43^^^^^A
"IX",404.43,404.43,"AC",1)
D POSRM^SCMCWAIT(X(1),X(2))
"IX",404.43,404.43,"AC",2)
Q
"IX",404.43,404.43,"AC",11.1,0)
^.114IA^2^2
"IX",404.43,404.43,"AC",11.1,1,0)
1^F^404.43^.01^^1^F
"IX",404.43,404.43,"AC",11.1,1,3)

"IX",404.43,404.43,"AC",11.1,2,0)
2^F^404.43^.02^^2^F
"IX",404.43,404.43,"AC",11.1,2,3)

"IX",404.43,404.43,"ASTAT",0)
404.43^ASTAT^STATUS CROSS REFERENCE^R^^R^IR^I^404.43^^^^^S
"IX",404.43,404.43,"ASTAT",1)
S ^SCPT(404.43,"ASTAT",X(1),X(2),DA)=""
"IX",404.43,404.43,"ASTAT",2)
K ^SCPT(404.43,"ASTAT",X(1),X(2),DA)
"IX",404.43,404.43,"ASTAT",2.5)
K ^SCPT(404.43,"ASTAT")
"IX",404.43,404.43,"ASTAT",11.1,0)
^.114IA^2^2
"IX",404.43,404.43,"ASTAT",11.1,1,0)
1^F^404.43^.01^^1^F
"IX",404.43,404.43,"ASTAT",11.1,2,0)
2^F^404.43^.12^^2^F
"IX",404.57,404.57,"AD",0)
404.57^AD^Workload HL7 Trigger^MU^^F^IR^I^404.57^^^^^A
"IX",404.57,404.57,"AD",.1,0)
^^1^1^3030218^
"IX",404.57,404.57,"AD",.1,1,0)
Workload HL7 trigger. Triggers entry in PCMM HL7 EVENT file.
"IX",404.57,404.57,"AD",1)
D POSBXREF^SCMCHLX(DA,404.57)
"IX",404.57,404.57,"AD",1.4)
S X=0 I $P($G(^SCTM(404.57,DA,0)),U,4) S X=1
"IX",404.57,404.57,"AD",2)
Q
"IX",404.57,404.57,"AD",2.4)

"IX",404.57,404.57,"AD",11.1,0)
^.114IA^1^1
"IX",404.57,404.57,"AD",11.1,1,0)
1^F^404.57^.08^^1^F
"IX",404.57,404.57,"AE",0)
404.57^AE^Workload event creation^MU^^F^IR^I^404.57^^^^^A
"IX",404.57,404.57,"AE",.1,0)
^^2^2^3030218^
"IX",404.57,404.57,"AE",.1,1,0)
Workload Event Creation. Triggers entry in PCMM HL7 EVENT file for 
"IX",404.57,404.57,"AE",.1,2,0)
workload HL7 messaging.
"IX",404.57,404.57,"AE",1)
D POSBXREF^SCMCHLX(DA,404.57)
"IX",404.57,404.57,"AE",1.4)
S X=$G(X2(1))
"IX",404.57,404.57,"AE",2)
D POSBXREF^SCMCHLX(DA,404.57)
"IX",404.57,404.57,"AE",2.4)
S X=$G(X1(1))
"IX",404.57,404.57,"AE",11.1,0)
^.114IA^1^1
"IX",404.57,404.57,"AE",11.1,1,0)
1^F^404.57^.04^^1^F
"KRN",.4,2157,-1)
0^1
"KRN",.4,2157,0)
SCMC DIRECT PC FTEE^3050825.1231^@^404.52^^@^3051230
"KRN",.4,2157,"DCL","404.52^.09")
&
"KRN",.4,2157,"DCL","404.52^.097")
&
"KRN",.4,2157,"DCL","404.52^0")
&
"KRN",.4,2157,"DXS",1,9)
X DXS(1,9.2) S Y=X,X=DIP(3),X=X_Y_")",DIP(5)=$G(X) S X=1,DIP(6)=$G(X),DIP(7)=$G(X) S X=DIP(1),X=$S(DIP(2):DIP(5),DIP(6):X)
"KRN",.4,2157,"DXS",1,9.2)
X "N I,Y "_$P(^DD(404.52,.096,0),U,5,99) S DIP(1)=X S X=DIP(1)<0,DIP(2)=$G(X) S X="(",DIP(3)=$G(X),DIP(4)=$G(X) S X=DIP(1),Y=X,X=DIP(4),X=X-Y
"KRN",.4,2157,"F",1)
.03;L15;"Provider's Name"~-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEA:"~
"KRN",.4,2157,"F",2)
-404.57,.02;"PC Team";L17~-404.57,.01;"Provider's Team Position"";L17~-404.57,W $$PCP^SCMCTSK6(D0);L3;"AP or PCP";Z;"W $$PCP^SCMCTSK6(D0)"~
"KRN",.4,2157,"F",3)
-404.57,5,.01;L15;"Associated Clinic"~.09;"Direct PC FTEE";R4~
"KRN",.4,2157,"F",4)
X "N I,Y "_$P(^DD(404.52,.098,0),U,5,99) S DIP(1)=X S X=DIP(1);R4;"Patients for Position Actual/ Active";;Z;"(#.098)";&~
"KRN",.4,2157,"F",5)
.097;R4;"Patients for Position Allowed/ Maximum";~X DXS(1,9);R5;"Available Patient Openings";;Z;"$S((#.096)<0:"("_(-(#.096))_")",1:(#.096))";&~
"KRN",.4,2157,"F",6)
.099;"Adjusted Panel Size"~
"KRN",.4,2157,"H")
Direct PC FTEE and Panel Size Report
"KRN",.4,2157,"IOM")
132
"KRN",.4,2157,"LAST")

"KRN",.4,2157,"ROU")
^SCMCYPC
"KRN",.4,2157,"ROUOLD")
SCMCYPC
"KRN",.4,2157,"STATS","S",1)
0
"KRN",.4,2157,"STATS","S",2)
0
"KRN",.4,2157,"STATS","S",3)
0
"KRN",.4,2157,"STATS","S",4)
0
"KRN",.4,2157,"T",77)
4^1^1^NJ4,2X^,2
"KRN",.4,2157,"T",85)
4^2^1^C^
"KRN",.4,2157,"T",95)
4^3^1^CJ5,0^,0
"KRN",.4,2157,"T",105)
5^4^1^C^
"KRN",.4,2191,-1)
0^3
"KRN",.4,2191,0)
SCMC PENDING UNASSIGN^3040427.151^@^404.43^^@^3040728
"KRN",.4,2191,"DCL","404.43^.01")
!
"KRN",.4,2191,"DXS",1,9.2)
S DIP(101)=$S($D(^SCPT(404.42,I(100,0),0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S X=X,DIP(201)=$G(X) S X="DFN"
"KRN",.4,2191,"DXS",2,9)
X "N I,Y "_$P(^DD(404.43,.159,0),U,5,99) S DIP(1)=X S X=DIP(1) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"KRN",.4,2191,"F",1)
.01;"Patient Name";L15;C1~-404.42,^SCPT(404.42,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2191,"F",2)
-404.42,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2191,"F",3)
-404.42,-2,S DIP(201)=$S($D(^DPT(D0,0)):^(0),1:"") S X=$P(DIP(201),U,9),DIP(202)=$G(X) S X=6,DIP(203)=$G(X) S X=9,X=$E(DIP(202),DIP(203),X) W X K DIP;L4;C17;"SSN";;Z;"$E(SSN,6,9)"~
"KRN",.4,2191,"F",4)
-404.42,-2,X DXS(1,9.2) S X1=DIP(201) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM(INTERNAL(PATIENT),"DFN")"~
"KRN",.4,2191,"F",5)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2191,"F",6)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2191,"F",7)
-404.57,-404.51,.07;"Institution";L15;C23~-404.57,-404.51,.01;"PC Team";L12;C41~-404.57,304;"Provider";L15;C57~-404.57,.01;"Team Position";L14;C75~
"KRN",.4,2191,"F",8)
X DXS(2,9) W X K DIP;"Date Sched. to Inactivate";L10;C92;Z;"NUMDATE(SCHEDULED INACTIVATION DATE)"~
"KRN",.4,2191,"F",9)
D FUTAPP^SCMCTSK2(+$G(DIPA("DFN")));"Next Appt. Date/Clinic";C105;L27;Z;"D FUTAPP^SCMCTSK2(+$G(DIPA("DFN")))"~
"KRN",.4,2191,"H")
PATIENT TEAM POSITION ASSIGNMENT LIST
"KRN",.4,2191,"ROUOLD")
SCMCPT3
"KRN",.4,2192,-1)
0^2
"KRN",.4,2192,0)
SCMC INCONSISTENT^3040319.1427^@^404.57^^@^3060126
"KRN",.4,2192,"DXS",1,9.2)
S DIP(1)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^USR(8930,+$P(DIP(1),U,13),0)),U),DIP(2)=$G(X) S X="",DIP(3)=$G(X) S X=20
"KRN",.4,2192,"F",1)
304~.01;L15~.03;L25~
"KRN",.4,2192,"F",2)
W $E($P($$GET^XUA4A72(+$$GETPRTP^SCAPMCU2(D0,DT)),U,2),1,17);"PERSON CLASS";L17;Z;"W $E($P($$GET^XUA4A72(+$$GETPRTP^SCAPMCU2(D0,DT)),U,2),1,17)"~
"KRN",.4,2192,"F",3)
X DXS(1,9.2) S X=$J(DIP(3),X) S Y=X,X=DIP(2),X=X_Y W X K DIP;"USER CLASS";L15;Z;"USER CLASS_$J("",20)"~
"KRN",.4,2192,"F",4)
W $G(^UTILITY("SCMCTSK",$J,D0));X;"INCONSISTENCY ERROR";Z;"W $G(^UTILITY("SCMCTSK",$J,D0))"~
"KRN",.4,2192,"H")
STAFF-POSITION INCONSISTENCY REPORT
"KRN",.4,2192,"IOM")
132
"KRN",.4,2192,"LAST")

"KRN",.4,2192,"ROU")
^SCMCPT2
"KRN",.4,2192,"ROUOLD")
SCMCPT2
"KRN",.4,2193,-1)
0^4
"KRN",.4,2193,0)
SCMC EXTENDED^3040423.163^@^404.43^^@^3060126
"KRN",.4,2193,"DCL","404.43^.01")
!
"KRN",.4,2193,"DXS",1,9)
X "N I,Y "_$P(^DD(404.43,.159,0),U,5,99) S DIP(1)=X S X=DIP(1) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"KRN",.4,2193,"DXS",2,9.2)
S DIP(2)=$C(59)_$P($G(^DD(404.43,.13,0)),U,3),DIP(5)=$C(59)_$P($G(^DD(404.43,.13,0)),U,3),DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"")
"KRN",.4,2193,"DXS",2,9.3)
X DXS(2,9.2) S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,13)_":",2),$C(59)),DIP(3)=$G(X),DIP(4)=$G(X) S X=$P($P(DIP(5),$C(59)_$P(DIP(1),U,13)_":",2),$C(59))="OTHER"
"KRN",.4,2193,"DXS",2,9.4)
X DXS(2,9.3) S DIP(6)=$G(X) S X=" [",DIP(7)=$G(X) S X=$P(DIP(1),U,14),Y=X,X=DIP(7),X=X_Y_"]",DIP(8)=$G(X) S X=1,DIP(9)=$G(X) S X=""
"KRN",.4,2193,"F",1)
.01;"Patient";L15;C1~-404.42,^SCPT(404.42,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2193,"F",2)
-404.42,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2193,"F",3)
-404.42,-2,S DIP(201)=$S($D(^DPT(D0,0)):^(0),1:"") S X=$P(DIP(201),U,9),DIP(202)=$G(X) S X=6,DIP(203)=$G(X) S X=9,X=$E(DIP(202),DIP(203),X) W X K DIP;"SSN";L4;C17;Z;"$E(SSN,6,9)"~
"KRN",.4,2193,"F",4)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2193,"F",5)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2193,"F",6)
-404.57,-404.51,.07;"Institution";L15;C24~-404.57,-404.51,.01;"PC Team";L15;C42~-404.57,304;"Provider/ Position";L15;C60~
"KRN",.4,2193,"F",7)
-404.57,306;"Preceptor/ Position";L15;C78~X DXS(1,9) W X K DIP;"Date Sched. for Inactivation/ Reason";L8;C96;Z;"NUMDATE(SCHEDULED INACTIVATION DATE)"~
"KRN",.4,2193,"F",8)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~-404.57,.01;"";C60;L14~
"KRN",.4,2193,"F",9)
-404.57,305;"";C78;L14~
"KRN",.4,2193,"F",10)
X DXS(2,9.4) S X=$S(DIP(6):DIP(8),DIP(9):X) S Y=X,X=DIP(3),X=X_Y W X K DIP;"";C96;L36;Z;"(#.13)_$S((#.13)="OTHER":" ["_(#.14)_"]",1:"")"~
"KRN",.4,2193,"H")
PATIENT TEAM POSITION ASSIGNMENT LIST
"KRN",.4,2194,-1)
0^5
"KRN",.4,2194,0)
SC PROVIDER FLAGGED^3040430.1315^@^404.52^^@^3050824
"KRN",.4,2194,"DCL","404.44^0")
#
"KRN",.4,2194,"DCL","404.51^201")
&
"KRN",.4,2194,"DCL","404.52^.01")
!
"KRN",.4,2194,"DXS",1,9.2)
F D=0:0 S (D,D1)=$O(^VA(200,D0,"USC1","B",DICOB,D)) Q:D'>0  I $D(^VA(200,D0,"USC1",D,0))#2 S X=$P(^(0),U) S:$D(^USC(8932.1,+X,0)) X=$P(^(0),U) S Y=X S:Y'?." " DIP(101)=Y Q:'$D(D)  S D=D1
"KRN",.4,2194,"DXS",1,9.3)
S I(201)="""USC1""",J(201)=200.05 N DICOB S DICOB="" F  S DICOB=$O(^VA(200,D0,"USC1","B",DICOB)) Q:DICOB=""   X DXS(1,9.2) Q:'$D(D)
"KRN",.4,2194,"DXS",1,9.4)
N Y S I(100,0)=$G(D0) S I(201,0)=$G(D1) X DXS(1,9.3):D0>0 S X="" S D1=I(201,0)
"KRN",.4,2194,"DXS",1,9.5)
F D=0:0 S (D,D1)=$O(^VA(200,D0,"USC1","B",DICOB,D)) Q:D'>0  I $D(^VA(200,D0,"USC1",D,0))#2 S X=$P(^(0),U) S:$D(^USC(8932.1,+X,0)) X=$P(^(0),U)  X DXS(1,9.4)  Q:'$D(D)  S D=D1
"KRN",.4,2194,"DXS",1,9.6)
S I(101)="""USC1""",J(101)=200.05 N DICOB S DICOB="" F  S DICOB=$O(^VA(200,D0,"USC1","B",DICOB)) Q:DICOB=""   X DXS(1,9.5) Q:'$D(D)
"KRN",.4,2194,"DXS",1,9.7)
S I(101,0)=$G(D1) X DXS(1,9.6):D0>0 S X="" S D1=I(101,0)
"KRN",.4,2194,"DXS",2,9)
S I(0,0)=$G(D0) S X="`1" K DIC S DIC="^SCTM(404.44,",DIC(0)="MF" D ^DIC S (D,D0,D(0))=+Y S DIP(101)=$S($D(^SCTM(404.44,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1) S D0=I(0,0)
"KRN",.4,2194,"DXS",3,9)
S DIP(101)=$S($D(^SCTM(404.44,D0,1)):^(1),1:"") S X=$P(DIP(101),U,9) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"KRN",.4,2194,"F",1)
.03;"Name";C1;L20~.01;"Team Position";L15;C22~
"KRN",.4,2194,"F",2)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEAM POSITION:"~
"KRN",.4,2194,"F",3)
-404.57,5,.01;"Assoc. Clinic(s)";L15;C39~-404.57,.03;"Role";L15;C56~
"KRN",.4,2194,"F",4)
-200,^VA(200,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,3),X=X S D(0)=+X;Z;"pr:"~
"KRN",.4,2194,"F",5)
-200,S DIP(101)="" X DXS(1,9.7) S X=DIP(101) W X K DIP;"Person Class";L15;C73;Z;"LAST(PERSON CLASS:PERSON CLASS)"~
"KRN",.4,2194,"F",6)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"team:"~
"KRN",.4,2194,"F",7)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;"team:"~
"KRN",.4,2194,"F",8)
-404.57,-404.51,201;"# Of Pts.";L4;C90;~-404.44,^SCTM(404.44,^^X DXS(2,9);Z;""`1":PCMM PARAMETER:"~
"KRN",.4,2194,"F",9)
-404.44,X DXS(3,9);"Sched. Inact. Date";L8;C96;Z;"NUMDATE(PC STAFF AUTO INACTIVATE DATE)";#~
"KRN",.4,2194,"F",10)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEAM POSITION:"~
"KRN",.4,2194,"F",11)
-404.57,402;"Inconsistency Reason";L26;C106~
"KRN",.4,2194,"H")
Primary Care Staff Scheduled for Inactivation
"KRN",.4,2194,"ROUOLD")
SCMCPT4
"KRN",.4,2197,-1)
0^6
"KRN",.4,2197,0)
SCMC INACTIVATED^3040526.1501^@^404.43^^@^3040728
"KRN",.4,2197,"DCL","404.42^.01")
!
"KRN",.4,2197,"DXS",1,9)
X DXS(1,9.3) S X=$P($P(DIP(8),$C(59)_$P(DIP(1),U,12)_":",2),$C(59)),X=$S(DIP(2):DIP(3),DIP(5):DIP(6),DIP(7):X)
"KRN",.4,2197,"DXS",1,9.2)
S DIP(8)=$C(59)_$P($G(^DD(404.43,.12,0)),U,3),DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,12),X=X S X=X="NA",DIP(2)=$G(X) S X="NO APPT"
"KRN",.4,2197,"DXS",1,9.3)
X DXS(1,9.2) S DIP(3)=$G(X),DIP(4)=$G(X) S X=$P(DIP(1),U,12),X=X S X=X="DU",DIP(5)=$G(X) S X="DEATH",DIP(6)=$G(X) S X=1,DIP(7)=$G(X)
"KRN",.4,2197,"F",1)
-404.42,^SCPT(404.42,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;".01:"~-404.42,.01;L15;C1;"Patient Name"~
"KRN",.4,2197,"F",2)
-404.42,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2197,"F",3)
-404.42,-2,S DIP(201)=$S($D(^DPT(D0,0)):^(0),1:"") S X=$P(DIP(201),U,9),DIP(202)=$G(X) S X=6,DIP(203)=$G(X) S X=9,X=$E(DIP(202),DIP(203),X) W X K DIP;"SSN";L4;C17;Z;"$E(SSN,6,9)"~
"KRN",.4,2197,"F",4)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2197,"F",5)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2197,"F",6)
-404.57,-404.51,.07;"Institution";L15;C24~-404.57,-404.51,.01;"PC Team";L15;C42~
"KRN",.4,2197,"F",7)
-404.57,5,X "N I,Y "_$P(^DD(404.57,304,0),U,5,99) S DIP(101)=X S X=DIP(101) W X K DIP;L15;C60;"Provider/Team Position";Z;"CURRENT PRACTITIONER"~
"KRN",.4,2197,"F",8)
-404.57,5,X "N I,Y "_$P(^DD(404.57,306,0),U,5,99) S DIP(101)=X S X=DIP(101) W X K DIP;L15;C78;"Preceptor/Team Position";Z;"CURRENT PRECEPTOR"~
"KRN",.4,2197,"F",9)
S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,4) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;"Date PT Inactivated";l8;Z;"NUMDATE(POSITION UNASSIGNED DATE)"~
"KRN",.4,2197,"F",10)
X DXS(1,9) W X K DIP;"Reason Patient Inactivated";Z;"$S(INTERNAL(STATUS)="NA":"NO APPT",INTERNAL(STATUS)="DU":"DEATH",1:STATUS)"~
"KRN",.4,2197,"F",11)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~-404.57,.01;"";C60;L14~
"KRN",.4,2197,"F",12)
-404.57,305;"";C78;L14~
"KRN",.4,2197,"H")
PATIENT TEAM POSITION ASSIGNMENT LIST
"KRN",.4,2197,"ROUOLD")
SCMCPT5
"KRN",.4,2207,-1)
0^8
"KRN",.4,2207,0)
SCMC DIRECT PC FTEE 1 CLN^3040329.1354^@^404.52^^@^3040719
"KRN",.4,2207,"DCL","404.52^.09")
&
"KRN",.4,2207,"DCL","404.52^.097")
&
"KRN",.4,2207,"DCL","404.52^.099")
&
"KRN",.4,2207,"DCL","404.52^0")
&
"KRN",.4,2207,"DXS",1,9.2)
S I(100,0)=$G(D0),I(101,0)=$G(D1) S X="NUM",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X
"KRN",.4,2207,"DXS",1,9.3)
X DXS(1,9.2) K DIC S Y=-1,DIC="^SCTM(404.57,D0,5,",DIC(0)="MF" D ^DIC:D0>0 S (D,D1)=+Y S DIP(202)=$S($D(^SCTM(404.57,D0,5,D1,0)):^(0),1:"")
"KRN",.4,2207,"DXS",2,9)
X DXS(2,9.2) S Y=X,X=DIP(3),X=X_Y_")",DIP(5)=$G(X) S X=1,DIP(6)=$G(X),DIP(7)=$G(X) S X=DIP(1),X=$S(DIP(2):DIP(5),DIP(6):X)
"KRN",.4,2207,"DXS",2,9.2)
X "N I,Y "_$P(^DD(404.52,.096,0),U,5,99) S DIP(1)=X S X=DIP(1)<0,DIP(2)=$G(X) S X="(",DIP(3)=$G(X),DIP(4)=$G(X) S X=DIP(1),Y=X,X=DIP(4),X=X-Y
"KRN",.4,2207,"F",1)
.03;L15;"Provider's Name"~-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEA:"~
"KRN",.4,2207,"F",2)
-404.57,.02;"PC Team";L17~-404.57,.01;"Provider's Team Position"";L17~-404.57,W $$PCP^SCMCTSK6(D0);L3;"AP or PCP";Z;"W $$PCP^SCMCTSK6(D0)"~
"KRN",.4,2207,"F",3)
-404.57,D CLN^SCMCTSK6(D0);X;Z;"D CLN^SCMCTSK6(D0)"~
"KRN",.4,2207,"F",4)
-404.57,X DXS(1,9.3) S X=$P($G(^SC(+$P(DIP(202),U,1),0)),U) S D0=I(100,0) S D1=I(101,0) W X K DIP;L15;"Associated Clinic";Z;"PARAM("NUM"):ASSOCIATED CLINICS:ASSOCIATED CLINICS"~
"KRN",.4,2207,"F",5)
.09;"Direct PC FTEE";R4~X "N I,Y "_$P(^DD(404.52,.098,0),U,5,99) S DIP(1)=X S X=DIP(1);L4;"Patients for Position Actual/ Active";;Z;"(#.098)";&~
"KRN",.4,2207,"F",6)
.097;L4;"Patients for Position Allowed/ Maximum";&  Replace (#.098);L4;"Patients for Position Actual/ Active";~
"KRN",.4,2207,"F",7)
X DXS(2,9);L5;"Available Patient Openings";;Z;"$S((#.096)<0:"("_(-(#.096))_")",1:(#.096))";&~.099;"Adjusted Panel Size (# Active pts/FTEE"~
"KRN",.4,2207,"H")
Direct PC FTEE and Panel Size Report
"KRN",.4,2207,"IOM")
132
"KRN",.4,2207,"LAST")

"KRN",.4,2207,"ROU")
^SCMCPT6
"KRN",.4,2207,"ROUOLD")
SCMCPT6
"KRN",.4,2207,"STATS","S",1)
0
"KRN",.4,2207,"STATS","S",2)
0
"KRN",.4,2207,"STATS","S",3)
0
"KRN",.4,2207,"STATS","S",4)
0
"KRN",.4,2207,"STATS","S",5)
0
"KRN",.4,2207,"STATS","S",6)
0
"KRN",.4,2207,"T",77)
4^1^1^NJ4,2X^,2
"KRN",.4,2207,"T",85)
4^2^0^C^
"KRN",.4,2207,"T",95)
4^3^0^CJ5,0^
"KRN",.4,2207,"T",105)
5^4^0^C^
"KRN",.4,2207,"T",116)
6^5^1^CJ5,0^,0^S X=S(6),Y(1)=$G(X) S X=S(1),Y=X,X=Y(1),X=X,X=$S(Y:X/Y,1:"*******"),Y(2)=$G(X) S X=0,Y(3)=$G(X) S X=0,X=$J(Y(2),Y(3),X) S Y=X
"KRN",.4,2222,-1)
0^9
"KRN",.4,2222,0)
SC INACTIVATED^3050922.1017^@^404.52^^@^3050922
"KRN",.4,2222,"DCL","404.51^201")
&
"KRN",.4,2222,"DCL","404.52^.01")
!
"KRN",.4,2222,"DXS",1,9.2)
F D=0:0 S (D,D1)=$O(^VA(200,D0,"USC1","B",DICOB,D)) Q:D'>0  I $D(^VA(200,D0,"USC1",D,0))#2 S X=$P(^(0),U) S:$D(^USC(8932.1,+X,0)) X=$P(^(0),U) S Y=X S:Y'?." " DIP(101)=Y Q:'$D(D)  S D=D1
"KRN",.4,2222,"DXS",1,9.3)
S I(201)="""USC1""",J(201)=200.05 N DICOB S DICOB="" F  S DICOB=$O(^VA(200,D0,"USC1","B",DICOB)) Q:DICOB=""   X DXS(1,9.2) Q:'$D(D)
"KRN",.4,2222,"DXS",1,9.4)
N Y S I(100,0)=$G(D0) S I(201,0)=$G(D1) X DXS(1,9.3):D0>0 S X="" S D1=I(201,0)
"KRN",.4,2222,"DXS",1,9.5)
F D=0:0 S (D,D1)=$O(^VA(200,D0,"USC1","B",DICOB,D)) Q:D'>0  I $D(^VA(200,D0,"USC1",D,0))#2 S X=$P(^(0),U) S:$D(^USC(8932.1,+X,0)) X=$P(^(0),U)  X DXS(1,9.4)  Q:'$D(D)  S D=D1
"KRN",.4,2222,"DXS",1,9.6)
S I(101)="""USC1""",J(101)=200.05 N DICOB S DICOB="" F  S DICOB=$O(^VA(200,D0,"USC1","B",DICOB)) Q:DICOB=""   X DXS(1,9.5) Q:'$D(D)
"KRN",.4,2222,"DXS",1,9.7)
S I(101,0)=$G(D1) X DXS(1,9.6):D0>0 S X="" S D1=I(101,0)
"KRN",.4,2222,"F",1)
.03;"Name";C1;L20~.01;"Team Position";L15;C22~
"KRN",.4,2222,"F",2)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEAM POSITION:"~
"KRN",.4,2222,"F",3)
-404.57,5,.01;"Associated Clinic(s)";L15;C39~-404.57,.03;"Role";L15;C56~
"KRN",.4,2222,"F",4)
-200,^VA(200,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,3),X=X S D(0)=+X;Z;"PR:"~
"KRN",.4,2222,"F",5)
-200,S DIP(101)="" X DXS(1,9.7) S X=DIP(101) W X K DIP;"Person Class";L15;C73;Z;"LAST(PERSON CLASS:PERSON CLASS)"~
"KRN",.4,2222,"F",6)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEAM POSITION:"~
"KRN",.4,2222,"F",7)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;"TEAM:"~
"KRN",.4,2222,"F",8)
-404.57,-404.51,201;"# Of Pts.";L4;C90~
"KRN",.4,2222,"F",9)
S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;"Date Inactivated";L8;C96;Z;"NUMDATE(EFFECTIVE DATE)"~
"KRN",.4,2222,"F",10)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;"TEAM POSITION:"~
"KRN",.4,2222,"F",11)
-404.57,402;"Inconsistency Reason";L26;C106~
"KRN",.4,2222,"H")
Primary Care Staff Inactivated
"KRN",.4,2223,-1)
0^10
"KRN",.4,2223,0)
SCMC PENDING UNASSIGN PAT^3040504.0805^@^404.43^^@^3040505
"KRN",.4,2223,"DXS",1,9.2)
S DIP(101)=$S($D(^SCPT(404.42,I(100,0),0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S X=X,DIP(201)=$G(X) S X="DFN"
"KRN",.4,2223,"DXS",2,9)
X "N I,Y "_$P(^DD(404.43,.159,0),U,5,99) S DIP(1)=X S X=DIP(1) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"KRN",.4,2223,"F",1)
.01;"Patient Name";L15;C1~-404.42,^SCPT(404.42,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2223,"F",2)
-404.42,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2223,"F",3)
-404.42,-2,S DIP(201)=$S($D(^DPT(D0,0)):^(0),1:"") S X=$P(DIP(201),U,9),DIP(202)=$G(X) S X=6,DIP(203)=$G(X) S X=9,X=$E(DIP(202),DIP(203),X) W X K DIP;L4;C17;"SSN";;Z;"$E(SSN,6,9)"~
"KRN",.4,2223,"F",4)
-404.42,-2,X DXS(1,9.2) S X1=DIP(201) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM(INTERNAL(PATIENT),"DFN")"~
"KRN",.4,2223,"F",5)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2223,"F",6)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2223,"F",7)
-404.57,-404.51,.07;"Institution";L15;C23~-404.57,-404.51,.01;"PC Team";L12;C41~-404.57,304;"Provider";L15;C57~-404.57,.01;"Team Position";L14;C75~
"KRN",.4,2223,"F",8)
X DXS(2,9) W X K DIP;"Date Sched. to Inactivate";L10;C92;Z;"NUMDATE(SCHEDULED INACTIVATION DATE)"~
"KRN",.4,2223,"F",9)
D FUTAPP^SCMCTSK2(+$G(DIPA("DFN")));"Next Appt. Date/Clinic";C105;L27;Z;"D FUTAPP^SCMCTSK2(+$G(DIPA("DFN")))"~
"KRN",.4,2223,"H")
PATIENT TEAM POSITION ASSIGNMENT LIST
"KRN",.4,2224,-1)
0^11
"KRN",.4,2224,0)
SC BULLETIN^3060502.1107^@^404.43^^@^3060502
"KRN",.4,2224,"F",2)
S CNT=$G(CNT)+1;X;Z;"S CNT=$G(CNT)+1"~S ^TMP("SCMC",$J,CNT,D0)=0;X;Z;"S ^TMP("SCMC",$J,CNT,D0)=0"~
"KRN",.4,2224,"H")
@@
"KRN",.4,2308,-1)
0^12
"KRN",.4,2308,0)
SCMC TOBE INACTIVATED^3051219.1045^@^404.43^^@^3051219
"KRN",.4,2308,"F",1)
-404.42,^SCPT(404.42,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),X=X S D(0)=+X;Z;".01:"~
"KRN",.4,2308,"F",2)
-404.42,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~-404.42,-2,.01~-404.42,-2,.09~
"KRN",.4,2308,"F",3)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,2308,"F",4)
-404.57,-404.51,^SCTM(404.51,^^S I(100,0)=D0 S DIP(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(DIP(101),U,2),X=X S D(0)=+X;Z;".02:"~-404.57,-404.51,.07~
"KRN",.4,2308,"F",5)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~-404.57,.02~
"KRN",.4,2308,"F",6)
-404.57,^SCTM(404.57,^^S I(0,0)=D0 S DIP(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~-404.57,.01~.159~
"KRN",.4,2308,"H")
PATIENT TEAM POSITION ASSIGNMENT LIST
"KRN",.401,1455,-1)
0^1
"KRN",.401,1455,0)
SCMC DIRECT PC FTEE^3030421.091^@^404.52^^@^3050825
"KRN",.401,1455,2,0)
^.4014^4^4
"KRN",.401,1455,2,1,0)
404.51^^($P(INSTITUTION,",")_" "_$P(INSTITUTION,",",2,9))^""+#"^;"INSTITUTION: "^^^^^4
"KRN",.401,1455,2,1,2,0)
^.401418^2^2
"KRN",.401,1455,2,1,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1455,2,1,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1455,2,1,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1455,2,1,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1455,2,1,2,"B",404.52,1)

"KRN",.401,1455,2,1,2,"B",404.57,2)

"KRN",.401,1455,2,1,3,0)
^.401419^2^2
"KRN",.401,1455,2,1,3,1,0)
OVF200^9.2
"KRN",.401,1455,2,1,3,1,"OVF0")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$S('$D(^DIC(4,+$P(Y(201),U,7),0)):"",1:$P(^(0),U,1)),Y(202)=X S X=",",X=$P(Y(202),X)_" ",Y(203)=X
"KRN",.401,1455,2,1,3,2,0)
OVF200^9.3
"KRN",.401,1455,2,1,3,2,"OVF0")
X DPP(1,"OVF200",9.2) S X=$S('$D(^DIC(4,+$P(Y(201),U,7),0)):"",1:$P(^(0),U,1)),Y(204)=X S X=",",Y(205)=X S X=2,Y(206)=X S X=9
"KRN",.401,1455,2,1,3,"B","OVF200",1)

"KRN",.401,1455,2,1,3,"B","OVF200",2)

"KRN",.401,1455,2,1,"ASK")
1
"KRN",.401,1455,2,1,"CM")
X DPP(1,"OVF200",9.3) S X=$P(Y(204),Y(205),Y(206),X) S Y=X,X=Y(203),X=X_Y I D0>0 S DISX(1)=X
"KRN",.401,1455,2,1,"GET")
X DPP(1,"OVF200",9.3) S X=$P(Y(204),Y(205),Y(206),X) S Y=X,X=Y(203),X=X_Y I D0>0 S DISX(1)=X
"KRN",.401,1455,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1455,2,1,"TXT")
($P(INSTITUTION,"","")_"" ""_$P(INSTITUTION,"","",2,9)) not null
"KRN",.401,1455,2,2,0)
404.52^^PRACTITIONER^+".03^^^^^^4
"KRN",.401,1455,2,2,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$S('$D(^VA(200,+$P(Y(1),U,3),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1455,2,2,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$S('$D(^VA(200,+$P(Y(1),U,3),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1455,2,2,"IX")
^SCTM(404.52,"C",^SCTM(404.52,^2
"KRN",.401,1455,2,2,"PTRIX")
^VA(200,"B",
"KRN",.401,1455,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1455,2,2,"TXT")
PRACTITIONER not null
"KRN",.401,1455,2,3,0)
404.57^.01^POSITION^"^^^^^^4
"KRN",.401,1455,2,3,2,0)
^.401418^1^1
"KRN",.401,1455,2,3,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1455,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1455,2,3,2,"B",404.52,1)

"KRN",.401,1455,2,3,"GET")
S DISX(3)=$P($G(^SCTM(404.57,D0,0)),U)
"KRN",.401,1455,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1455,2,3,"TXT")
POSITION not null
"KRN",.401,1455,2,4,0)
404.52^^D @("SCREEN"_U_"SCMCTSK")^@"^^^^^^4
"KRN",.401,1455,2,4,"CM")
D @("SCREEN"_U_"SCMCTSK") I D0>0 S DISX(4)=X
"KRN",.401,1455,2,4,"F")
.999999^1
"KRN",.401,1455,2,4,"GET")
D @("SCREEN"_U_"SCMCTSK") I D0>0 S DISX(4)=X
"KRN",.401,1455,2,4,"QCON")
I DISX(4)=1
"KRN",.401,1455,2,4,"T")
1^1
"KRN",.401,1455,2,4,"TXT")
D @(""SCREEN""_U_""SCMCTSK"") equals 1
"KRN",.401,1455,2,"B",404.51,1)

"KRN",.401,1455,2,"B",404.52,2)

"KRN",.401,1455,2,"B",404.52,4)

"KRN",.401,1455,2,"B",404.57,3)

"KRN",.401,1455,"%D",0)
^.4012^1^1^3030421^^^^
"KRN",.401,1455,"%D",1,0)
Direct Patient FTEE for Active assignments
"KRN",.401,1480,-1)
0^3
"KRN",.401,1480,0)
SCMC PENDING UNASSIGN^3030717.1001^@^404.43^^@^3040316
"KRN",.401,1480,2,0)
^.4014^2^2
"KRN",.401,1480,2,1,0)
404.51^^INSTITUTION^""#".07^^^^^^4
"KRN",.401,1480,2,1,2,0)
^.401418^2^2
"KRN",.401,1480,2,1,2,1,0)
404.42^200^404.51^SCTM(404.51,^0
"KRN",.401,1480,2,1,2,1,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P(Y(101),U,3),X=X S D(0)=+X
"KRN",.401,1480,2,1,2,2,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1480,2,1,2,2,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1480,2,1,2,"B",404.42,1)

"KRN",.401,1480,2,1,2,"B",404.43,2)

"KRN",.401,1480,2,1,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$S('$D(^DIC(4,+$P(Y(201),U,7),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,1480,2,1,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$S('$D(^DIC(4,+$P(Y(201),U,7),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,1480,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1480,2,1,"TXT")
INSTITUTION not null
"KRN",.401,1480,2,2,0)
404.42^^PATIENT^@"".01^^^^^^4
"KRN",.401,1480,2,2,2,0)
^.401418^1^1
"KRN",.401,1480,2,2,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1480,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1480,2,2,2,"B",404.43,1)

"KRN",.401,1480,2,2,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1480,2,2,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1480,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1480,2,2,"TXT")
PATIENT not null
"KRN",.401,1480,2,"B",404.42,2)

"KRN",.401,1480,2,"B",404.51,1)

"KRN",.401,1480,"BY0")
UTILITY("SCMCTSK",$J,^1
"KRN",.401,1481,-1)
0^2
"KRN",.401,1481,0)
SCMC INCONSISTENT^3030718.0923^@^404.57^^@^3060126
"KRN",.401,1481,2,0)
^.4014^3^3
"KRN",.401,1481,2,1,0)
404.51^^INSTITUTION^"#".07^^^^^^4
"KRN",.401,1481,2,1,2,0)
^.401418^1^1
"KRN",.401,1481,2,1,2,1,0)
404.57^100^404.51^SCTM(404.51,^0
"KRN",.401,1481,2,1,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1481,2,1,2,"B",404.57,1)

"KRN",.401,1481,2,1,"CM")
S Y(101)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$S('$D(^DIC(4,+$P(Y(101),U,7),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,1481,2,1,"GET")
S Y(101)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$S('$D(^DIC(4,+$P(Y(101),U,7),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(1)=X
"KRN",.401,1481,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1481,2,1,"TXT")
INSTITUTION not null
"KRN",.401,1481,2,2,0)
404.57^^TEAM^".02^^^^^^4
"KRN",.401,1481,2,2,"CM")
S Y(1)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$S('$D(^SCTM(404.51,+$P(Y(1),U,2),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1481,2,2,"GET")
S Y(1)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$S('$D(^SCTM(404.51,+$P(Y(1),U,2),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(2)=X
"KRN",.401,1481,2,2,"IX")
^SCTM(404.57,"C",^SCTM(404.57,^2
"KRN",.401,1481,2,2,"PTRIX")
^SCTM(404.51,"B",
"KRN",.401,1481,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1481,2,2,"SER")
0.0104^0.0103
"KRN",.401,1481,2,2,"TXT")
TEAM not null
"KRN",.401,1481,2,3,0)
404.57^.01^POSITION^^^^^^^4
"KRN",.401,1481,2,3,"GET")
S DISX(3)=$P($G(^SCTM(404.57,D0,0)),U)
"KRN",.401,1481,2,3,"IX")
^SCTM(404.57,"B",^SCTM(404.57,^2
"KRN",.401,1481,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1481,2,3,"SER")
0^0
"KRN",.401,1481,2,3,"TXT")
POSITION not null
"KRN",.401,1481,2,"B",404.51,1)

"KRN",.401,1481,2,"B",404.57,2)

"KRN",.401,1481,2,"B",404.57,3)

"KRN",.401,1481,"BY0")
UTILITY("SCMCTSK",$J,^1
"KRN",.401,1482,-1)
0^6
"KRN",.401,1482,0)
SCMC INACTIVATION SORT^3040305.0933^@^404.43^^@^3040504
"KRN",.401,1482,2,0)
^.4014^2^2
"KRN",.401,1482,2,1,0)
404.43^.04^POSITION UNASSIGNED DATE^'@^^^^^^1
"KRN",.401,1482,2,1,"ASK")
1
"KRN",.401,1482,2,1,"F")
3040402.999999^T-31^Apr 3,2004
"KRN",.401,1482,2,1,"GET")
S DISX(1)=$P($G(^SCPT(404.43,D0,0)),U,4)
"KRN",.401,1482,2,1,"QCON")
I (DISX(1)]]3040402.999999)&(DISX(1)']]3040504.24)
"KRN",.401,1482,2,1,"SER")
0.9794^0.9794
"KRN",.401,1482,2,1,"T")
3040504.24^T@2400^May 4,2004@24:00
"KRN",.401,1482,2,1,"TXT")
POSITION UNASSIGNED DATE from Apr 3,2004 to May 4,2004@24:00
"KRN",.401,1482,2,2,0)
404.43^.12^STATUS^@^^^^^^3
"KRN",.401,1482,2,2,"GET")
S DISX(2)=$P($G(^SCPT(404.43,D0,0)),U,12)
"KRN",.401,1482,2,2,"IX")
^SCPT(404.43,"ASTATB",^SCPT(404.43,^2
"KRN",.401,1482,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1482,2,2,"SER")
0.3857^0.2784
"KRN",.401,1482,2,2,"TXT")
STATUS not null
"KRN",.401,1482,2,"B",404.43,1)

"KRN",.401,1482,2,"B",404.43,2)

"KRN",.401,1483,-1)
0^5
"KRN",.401,1483,0)
SCMC EXTENDED^3040315.1711^@^404.43^^@^3040315
"KRN",.401,1483,2,0)
^.4014^4^4
"KRN",.401,1483,2,1,0)
404.43^^INTERNAL(EXTEND AUTOMATIC)>0^@"B^;L1^^^^^4
"KRN",.401,1483,2,1,"CM")
S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,13),X=X S X=X>0 I D0>0 S DISX(1)=X
"KRN",.401,1483,2,1,"F")
0
"KRN",.401,1483,2,1,"GET")
S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,13),X=X S X=X>0 I D0>0 S DISX(1)=X
"KRN",.401,1483,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,1483,2,1,"T")
1
"KRN",.401,1483,2,1,"TXT")
INTERNAL(EXTEND AUTOMATIC)>0
"KRN",.401,1483,2,2,0)
404.43^.159^SCHEDULED INACTIVATION DATE^@^^^^^^1
"KRN",.401,1483,2,2,"ASK")
1
"KRN",.401,1483,2,2,"F")
3030916.999999^Sep 17,2003^Sep 17,2003
"KRN",.401,1483,2,2,"GET")
D INACTDT^SCMCTSK1(D0) S DISX(2)=X
"KRN",.401,1483,2,2,"QCON")
I (DISX(2)]]3030916.999999)&(DISX(2)']]3040315.24)
"KRN",.401,1483,2,2,"T")
3040315.24^Mar 15,2004@2400^Mar 15,2004@24:00
"KRN",.401,1483,2,2,"TXT")
SCHEDULED INACTIVATION DATE from Sep 17,2003 to Mar 15,2004@24:00
"KRN",.401,1483,2,3,0)
404.51^^INSTITUTION^""@".07^^^^^^4
"KRN",.401,1483,2,3,2,0)
^.401418^2^2
"KRN",.401,1483,2,3,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1483,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1483,2,3,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1483,2,3,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1483,2,3,2,"B",404.43,1)

"KRN",.401,1483,2,3,2,"B",404.57,2)

"KRN",.401,1483,2,3,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1483,2,3,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1483,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1483,2,3,"TXT")
INSTITUTION not null
"KRN",.401,1483,2,4,0)
404.51^.01^NAME^""@^^^^^^4
"KRN",.401,1483,2,4,2,0)
^.401418^2^2
"KRN",.401,1483,2,4,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1483,2,4,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1483,2,4,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1483,2,4,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1483,2,4,2,"B",404.43,1)

"KRN",.401,1483,2,4,2,"B",404.57,2)

"KRN",.401,1483,2,4,"GET")
S DISX(4)=$P($G(^SCTM(404.51,D0,0)),U)
"KRN",.401,1483,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1483,2,4,"TXT")
NAME not null
"KRN",.401,1483,2,"B",404.43,1)

"KRN",.401,1483,2,"B",404.43,2)

"KRN",.401,1483,2,"B",404.51,3)

"KRN",.401,1483,2,"B",404.51,4)

"KRN",.401,1484,-1)
0^4
"KRN",.401,1484,0)
SCMC FLAGGED^3040312.1305^@^404.43^^@^3040416
"KRN",.401,1484,2,0)
^.4014^4^4
"KRN",.401,1484,2,1,0)
404.43^.15^DATE FLAGGED FOR INACTIVATION^@'^^^^^^1
"KRN",.401,1484,2,1,"GET")
S DISX(1)=$P($G(^SCPT(404.43,D0,0)),U,15)
"KRN",.401,1484,2,1,"IX")
^SCPT(404.43,"AFLG",^SCPT(404.43,^2
"KRN",.401,1484,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1484,2,1,"SER")
0.3714^0.2708
"KRN",.401,1484,2,1,"TXT")
DATE FLAGGED FOR INACTIVATION not null
"KRN",.401,1484,2,2,0)
404.51^^INSTITUTION^""@".07^^^^^^4
"KRN",.401,1484,2,2,2,0)
^.401418^2^2
"KRN",.401,1484,2,2,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1484,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1484,2,2,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1484,2,2,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1484,2,2,2,"B",404.43,1)

"KRN",.401,1484,2,2,2,"B",404.57,2)

"KRN",.401,1484,2,2,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1484,2,2,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1484,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1484,2,2,"TXT")
INSTITUTION not null
"KRN",.401,1484,2,3,0)
404.42^^TEAM ASSIGNMENT^"@".03^^^^^^4
"KRN",.401,1484,2,3,2,0)
^.401418^1^1
"KRN",.401,1484,2,3,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1484,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1484,2,3,2,"B",404.43,1)

"KRN",.401,1484,2,3,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1484,2,3,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1484,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1484,2,3,"TXT")
TEAM ASSIGNMENT not null
"KRN",.401,1484,2,4,0)
404.42^^PATIENT^"@".01^^^^^^4
"KRN",.401,1484,2,4,2,0)
^.401418^1^1
"KRN",.401,1484,2,4,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1484,2,4,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1484,2,4,2,"B",404.43,1)

"KRN",.401,1484,2,4,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1484,2,4,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1484,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1484,2,4,"TXT")
PATIENT not null
"KRN",.401,1484,2,"B",404.42,3)

"KRN",.401,1484,2,"B",404.42,4)

"KRN",.401,1484,2,"B",404.43,1)

"KRN",.401,1484,2,"B",404.51,2)

"KRN",.401,1485,-1)
0^7
"KRN",.401,1485,0)
SCMC INACTIVATED^3060926.1025^@^404.43^^@^3060926
"KRN",.401,1485,2,0)
^.4014^6^6
"KRN",.401,1485,2,1,0)
404.43^.12^STATUS^'^^^^^^3
"KRN",.401,1485,2,1,"F")
DTz^D^DU (DEATH INACTIVATION)
"KRN",.401,1485,2,1,"GET")
S DISX(1)=$P($G(^SCPT(404.43,D0,0)),U,12)
"KRN",.401,1485,2,1,"IX")
^SCPT(404.43,"ASTATB",^SCPT(404.43,^2
"KRN",.401,1485,2,1,"QCON")
I (DISX(1)]]"DTz")&(DISX(1)']]"NA")
"KRN",.401,1485,2,1,"T")
NA^N^NA (NO APPT INACTIVATION)
"KRN",.401,1485,2,1,"TXT")
STATUS from DU (DEATH INACTIVATION) to NA (NO APPT INACTIVATION)
"KRN",.401,1485,2,2,0)
404.43^.04^POSITION UNASSIGNED DATE^@'^^^^^^1
"KRN",.401,1485,2,2,"ASK")
1
"KRN",.401,1485,2,2,"F")
3060618.999999^Jun 19,2006^Jun 19,2006
"KRN",.401,1485,2,2,"GET")
S DISX(2)=$P($G(^SCPT(404.43,D0,0)),U,4)
"KRN",.401,1485,2,2,"QCON")
I (DISX(2)]]3060618.999999)&(DISX(2)']]3060719.24)
"KRN",.401,1485,2,2,"T")
3060719.24^Jul 19,2006@2400^Jul 19,2006@24:00
"KRN",.401,1485,2,2,"TXT")
POSITION UNASSIGNED DATE from Jun 19,2006 to Jul 19,2006@24:00
"KRN",.401,1485,2,3,0)
404.57^^TEAM:INSTITUTION^""^;"Institution: "^^^^^4
"KRN",.401,1485,2,3,2,0)
^.401418^1^1
"KRN",.401,1485,2,3,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1485,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1485,2,3,2,"B",404.43,1)

"KRN",.401,1485,2,3,3,0)
^.401419^1^1
"KRN",.401,1485,2,3,3,1,0)
OVF100^9.2
"KRN",.401,1485,2,3,3,1,"OVF0")
S I(100,0)=$G(D0),Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:""),D0=$P(Y(101),U,2) S:'D0!'$D(^SCTM(404.51,+D0,0)) D0=-1 S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"")
"KRN",.401,1485,2,3,3,"B","OVF100",1)

"KRN",.401,1485,2,3,"CM")
X DPP(3,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(3)=X
"KRN",.401,1485,2,3,"GET")
X DPP(3,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(3)=X
"KRN",.401,1485,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1485,2,3,"TXT")
TEAM:INSTITUTION not null
"KRN",.401,1485,2,4,0)
404.42^^TEAM ASSIGNMENT^"".03^^^^^^4
"KRN",.401,1485,2,4,2,0)
^.401418^1^1
"KRN",.401,1485,2,4,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1485,2,4,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1485,2,4,2,"B",404.43,1)

"KRN",.401,1485,2,4,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,3),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1485,2,4,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,3),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1485,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1485,2,4,"TXT")
TEAM ASSIGNMENT not null
"KRN",.401,1485,2,5,0)
404.57^304^CURRENT PRACTITIONER^"^^^^^^4
"KRN",.401,1485,2,5,2,0)
^.401418^1^1
"KRN",.401,1485,2,5,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1485,2,5,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1485,2,5,2,"B",404.43,1)

"KRN",.401,1485,2,5,"F")
?z^@
"KRN",.401,1485,2,5,"GET")
S X=$P($$GETPRTP^SCAPMCU2(D0,DT),U,2) S DISX(5)=X
"KRN",.401,1485,2,5,"QCON")
I 1
"KRN",.401,1485,2,5,"T")
z^
"KRN",.401,1485,2,5,"TXT")
All CURRENT PRACTITIONER (includes nulls)
"KRN",.401,1485,2,6,0)
404.42^^PATIENT^"".01^^^^^^4
"KRN",.401,1485,2,6,2,0)
^.401418^1^1
"KRN",.401,1485,2,6,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1485,2,6,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1485,2,6,2,"B",404.43,1)

"KRN",.401,1485,2,6,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(6)=X
"KRN",.401,1485,2,6,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(6)=X
"KRN",.401,1485,2,6,"QCON")
I DISX(6)'=""
"KRN",.401,1485,2,6,"TXT")
PATIENT not null
"KRN",.401,1485,2,"B",404.42,4)

"KRN",.401,1485,2,"B",404.42,6)

"KRN",.401,1485,2,"B",404.43,1)

"KRN",.401,1485,2,"B",404.43,2)

"KRN",.401,1485,2,"B",404.57,3)

"KRN",.401,1485,2,"B",404.57,5)

"KRN",.401,1485,"%D",0)
^.4012^1^1^3060926^^^^
"KRN",.401,1485,"%D",1,0)
Patient inactivated automatically.
"KRN",.401,1486,-1)
0^8
"KRN",.401,1486,0)
SC PROVIDER FLAGGED^3040408.115^@^404.52^^@^3050824
"KRN",.401,1486,2,0)
^.4014^4^4
"KRN",.401,1486,2,1,0)
404.52^.091^DATE FLAGGED FOR INACTIVATION^'@^^^^^^1
"KRN",.401,1486,2,1,"GET")
S DISX(1)=$P($G(^SCTM(404.52,D0,0)),U,10)
"KRN",.401,1486,2,1,"IX")
^SCTM(404.52,"AFLAG",^SCTM(404.52,^2
"KRN",.401,1486,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1486,2,1,"SER")
100.0000^1.0000
"KRN",.401,1486,2,1,"TXT")
DATE FLAGGED FOR INACTIVATION not null
"KRN",.401,1486,2,2,0)
404.51^^INSTITUTION^""".07^^^^^^4
"KRN",.401,1486,2,2,2,0)
^.401418^2^2
"KRN",.401,1486,2,2,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1486,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1486,2,2,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1486,2,2,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1486,2,2,2,"B",404.52,1)

"KRN",.401,1486,2,2,2,"B",404.57,2)

"KRN",.401,1486,2,2,"ASK")
1
"KRN",.401,1486,2,2,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1486,2,2,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1486,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1486,2,2,"TXT")
INSTITUTION not null
"KRN",.401,1486,2,3,0)
404.57^^TEAM^"".02^^^^^^4
"KRN",.401,1486,2,3,2,0)
^.401418^1^1
"KRN",.401,1486,2,3,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1486,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1486,2,3,2,"B",404.52,1)

"KRN",.401,1486,2,3,"CM")
S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,2),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1486,2,3,"GET")
S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,2),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1486,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1486,2,3,"TXT")
TEAM not null
"KRN",.401,1486,2,4,0)
404.52^^PRACTITIONER^".03^^^^^^4
"KRN",.401,1486,2,4,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1486,2,4,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1486,2,4,"IX")
^SCTM(404.52,"C",^SCTM(404.52,^2
"KRN",.401,1486,2,4,"PTRIX")
^VA(200,"B",
"KRN",.401,1486,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1486,2,4,"SER")
0.0000^0.0000
"KRN",.401,1486,2,4,"TXT")
PRACTITIONER not null
"KRN",.401,1486,2,"B",404.51,2)

"KRN",.401,1486,2,"B",404.52,1)

"KRN",.401,1486,2,"B",404.52,4)

"KRN",.401,1486,2,"B",404.57,3)

"KRN",.401,1489,-1)
0^10
"KRN",.401,1489,0)
SCMC EXTENDED BY TEAM^3040120.0745^@^404.43^^@^3040121
"KRN",.401,1489,2,0)
^.4014^3^1
"KRN",.401,1489,2,3,0)
404.42^^PATIENT^"@".01^^^^^^4
"KRN",.401,1489,2,3,2,0)
^.401418^1^1
"KRN",.401,1489,2,3,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1489,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1489,2,3,2,"B",404.43,1)

"KRN",.401,1489,2,3,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1489,2,3,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1489,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1489,2,3,"TXT")
PATIENT not null
"KRN",.401,1489,2,"B",404.42,3)

"KRN",.401,1489,"BY0")
TMP("SCSORT",$J,^3
"KRN",.401,1489,"BY0D",0)
^.4011624^2^2
"KRN",.401,1489,"BY0D",1,0)
1
"KRN",.401,1489,"BY0D",1,1)
#^;"Institution: "
"KRN",.401,1489,"BY0D",2,0)
2
"KRN",.401,1489,"BY0D",2,1)
^;"Team: "
"KRN",.401,1490,-1)
0^9
"KRN",.401,1490,0)
SCMC EXTENDED BY CLINIC^3040120.0622^@^404.43^^@^3040121
"KRN",.401,1490,2,0)
^.4014^3^1
"KRN",.401,1490,2,3,0)
404.42^^PATIENT^"@".01^^^^^^4
"KRN",.401,1490,2,3,2,0)
^.401418^1^1
"KRN",.401,1490,2,3,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1490,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1490,2,3,2,"B",404.43,1)

"KRN",.401,1490,2,3,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1490,2,3,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1490,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1490,2,3,"TXT")
PATIENT not null
"KRN",.401,1490,2,"B",404.42,3)

"KRN",.401,1490,"BY0")
TMP("SCSORT",$J,^3
"KRN",.401,1490,"BY0D",0)
^.4011624^2^2
"KRN",.401,1490,"BY0D",1,0)
1
"KRN",.401,1490,"BY0D",1,1)
#^;"Institution: "
"KRN",.401,1490,"BY0D",2,0)
2
"KRN",.401,1490,"BY0D",2,1)
^;"Clinic: "
"KRN",.401,1491,-1)
0^12
"KRN",.401,1491,0)
SCMC INACTIVATION BY TEAM^3040121.0939^@^404.43^^@^3040121
"KRN",.401,1491,2,0)
^.4014^3^1
"KRN",.401,1491,2,3,0)
404.42^^PATIENT^"@".01^^^^^^4
"KRN",.401,1491,2,3,2,0)
^.401418^1^1
"KRN",.401,1491,2,3,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1491,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1491,2,3,2,"B",404.43,1)

"KRN",.401,1491,2,3,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1491,2,3,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1491,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1491,2,3,"TXT")
PATIENT not null
"KRN",.401,1491,2,"B",404.42,3)

"KRN",.401,1491,"BY0")
TMP("SCSORT",$J,^3
"KRN",.401,1491,"BY0D",0)
^.4011624^2^2
"KRN",.401,1491,"BY0D",1,0)
1
"KRN",.401,1491,"BY0D",1,1)
#^;"Institution: "
"KRN",.401,1491,"BY0D",2,0)
2
"KRN",.401,1491,"BY0D",2,1)
^;"Team: "
"KRN",.401,1492,-1)
0^11
"KRN",.401,1492,0)
SCMC INACTIVATION BY CLINIC^3040121.0939^@^404.43^^@^3040121
"KRN",.401,1492,2,0)
^.4014^3^1
"KRN",.401,1492,2,3,0)
404.42^^PATIENT^"@".01^^^^^^4
"KRN",.401,1492,2,3,2,0)
^.401418^1^1
"KRN",.401,1492,2,3,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1492,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1492,2,3,2,"B",404.43,1)

"KRN",.401,1492,2,3,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1492,2,3,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1492,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1492,2,3,"TXT")
PATIENT not null
"KRN",.401,1492,2,"B",404.42,3)

"KRN",.401,1492,"BY0")
TMP("SCSORT",$J,^3
"KRN",.401,1492,"BY0D",0)
^.4011624^2^2
"KRN",.401,1492,"BY0D",1,0)
1
"KRN",.401,1492,"BY0D",1,1)
#^;"Institution: "
"KRN",.401,1492,"BY0D",2,0)
2
"KRN",.401,1492,"BY0D",2,1)
^;"Clinic: "
"KRN",.401,1493,-1)
0^13
"KRN",.401,1493,0)
SCMC FLAGGED BY TEAM^3040121.1454^@^404.43^^@^3040121
"KRN",.401,1493,2,0)
^.4014^4^2
"KRN",.401,1493,2,3,0)
404.43^.159^SCHEDULED INACTIVATION DATE^@^^^^^^1
"KRN",.401,1493,2,3,"GET")
D INACTDT^SCMCTSK1(D0) S DISX(3)=X
"KRN",.401,1493,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1493,2,3,"SER")
0.6667^0.6667
"KRN",.401,1493,2,3,"TXT")
SCHEDULED INACTIVATION DATE not null
"KRN",.401,1493,2,4,0)
404.43^^PATIENT TEAM ASSIGNMENT^@".01^^^^^^4
"KRN",.401,1493,2,4,3,0)
^.401419^1^1
"KRN",.401,1493,2,4,3,1,0)
OVF0^9.2
"KRN",.401,1493,2,4,3,1,"OVF0")
S I(0,0)=$G(D0),Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^SCPT(404.42,+D0,0)) D0=-1 S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"")
"KRN",.401,1493,2,4,3,"B","OVF0",1)

"KRN",.401,1493,2,4,"CM")
X DPP(4,"OVF0",9.2) S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) S D0=I(0,0) I D0>0 S DISX(4)=X
"KRN",.401,1493,2,4,"GET")
X DPP(4,"OVF0",9.2) S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) S D0=I(0,0) I D0>0 S DISX(4)=X
"KRN",.401,1493,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1493,2,4,"TXT")
PATIENT TEAM ASSIGNMENT not null
"KRN",.401,1493,2,"B",404.43,3)

"KRN",.401,1493,2,"B",404.43,4)

"KRN",.401,1493,"BY0")
TMP("SCSORT",$J,^3
"KRN",.401,1493,"BY0D",0)
^.4011624^2^2
"KRN",.401,1493,"BY0D",1,0)
1
"KRN",.401,1493,"BY0D",1,1)
#^;"Institution: "
"KRN",.401,1493,"BY0D",2,0)
2
"KRN",.401,1493,"BY0D",2,1)
^;"Team: "
"KRN",.401,1494,-1)
0^14
"KRN",.401,1494,0)
SCMC FLAGGED BY CLINIC^3040121.1541^@^404.43^^@^3040204
"KRN",.401,1494,2,0)
^.4014^4^2
"KRN",.401,1494,2,3,0)
404.43^.159^SCHEDULED INACTIVATION DATE^@^^^^^^1
"KRN",.401,1494,2,3,"GET")
D INACTDT^SCMCTSK1(D0) S DISX(3)=X
"KRN",.401,1494,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1494,2,3,"SER")
0.6739^0.6739
"KRN",.401,1494,2,3,"TXT")
SCHEDULED INACTIVATION DATE not null
"KRN",.401,1494,2,4,0)
404.43^^PATIENT TEAM ASSIGNMENT^@".01^^^^^^4
"KRN",.401,1494,2,4,3,0)
^.401419^1^1
"KRN",.401,1494,2,4,3,1,0)
OVF0^9.2
"KRN",.401,1494,2,4,3,1,"OVF0")
S I(0,0)=$G(D0),Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^SCPT(404.42,+D0,0)) D0=-1 S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"")
"KRN",.401,1494,2,4,3,"B","OVF0",1)

"KRN",.401,1494,2,4,"CM")
X DPP(4,"OVF0",9.2) S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) S D0=I(0,0) I D0>0 S DISX(4)=X
"KRN",.401,1494,2,4,"GET")
X DPP(4,"OVF0",9.2) S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) S D0=I(0,0) I D0>0 S DISX(4)=X
"KRN",.401,1494,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1494,2,4,"TXT")
PATIENT TEAM ASSIGNMENT not null
"KRN",.401,1494,2,"B",404.43,3)

"KRN",.401,1494,2,"B",404.43,4)

"KRN",.401,1494,"BY0")
TMP("SCSORT",$J,^3
"KRN",.401,1494,"BY0D",0)
^.4011624^2^2
"KRN",.401,1494,"BY0D",1,0)
1
"KRN",.401,1494,"BY0D",1,1)
#^;"Institution: "
"KRN",.401,1494,"BY0D",2,0)
2
"KRN",.401,1494,"BY0D",2,1)
^;"Clinic: "
"KRN",.401,1497,-1)
0^15
"KRN",.401,1497,0)
SCMC PROVIDER INACTIVATED^3040316.1042^@^404.52^^@^3050615
"KRN",.401,1497,2,0)
^.4014^4^4
"KRN",.401,1497,2,1,0)
404.52^.11^INACTIVATED AUTOMATICALLY^^^^^^^3
"KRN",.401,1497,2,1,"GET")
S DISX(1)=$P($G(^SCTM(404.52,D0,0)),U,11)
"KRN",.401,1497,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1497,2,1,"SER")
0.8300^0.8300
"KRN",.401,1497,2,1,"TXT")
INACTIVATED AUTOMATICALLY not null
"KRN",.401,1497,2,2,0)
404.57^^TEAM:INST^""^^^^^^4
"KRN",.401,1497,2,2,2,0)
^.401418^1^1
"KRN",.401,1497,2,2,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1497,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1497,2,2,2,"B",404.52,1)

"KRN",.401,1497,2,2,3,0)
^.401419^1^1
"KRN",.401,1497,2,2,3,1,0)
OVF100^9.2
"KRN",.401,1497,2,2,3,1,"OVF0")
S I(100,0)=$G(D0),Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:""),D0=$P(Y(101),U,2) S:'D0!'$D(^SCTM(404.51,+D0,0)) D0=-1 S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"")
"KRN",.401,1497,2,2,3,"B","OVF100",1)

"KRN",.401,1497,2,2,"CM")
X DPP(2,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(2)=X
"KRN",.401,1497,2,2,"GET")
X DPP(2,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(2)=X
"KRN",.401,1497,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1497,2,2,"TXT")
TEAM:INST not null
"KRN",.401,1497,2,3,0)
404.52^^PRACTITIONER^".03^^^^^^4
"KRN",.401,1497,2,3,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1497,2,3,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1497,2,3,"IX")
^SCTM(404.52,"C",^SCTM(404.52,^2
"KRN",.401,1497,2,3,"PTRIX")
^VA(200,"B",
"KRN",.401,1497,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1497,2,3,"SER")
0.0000^0.0000
"KRN",.401,1497,2,3,"TXT")
PRACTITIONER not null
"KRN",.401,1497,2,4,0)
404.52^^TEAM POSITION^".01^^^^^^4
"KRN",.401,1497,2,4,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1497,2,4,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1497,2,4,"IX")
^SCTM(404.52,"B",^SCTM(404.52,^2
"KRN",.401,1497,2,4,"PTRIX")
^SCTM(404.57,"B",
"KRN",.401,1497,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1497,2,4,"SER")
0.0300^0.0300
"KRN",.401,1497,2,4,"TXT")
TEAM POSITION not null
"KRN",.401,1497,2,"B",404.52,1)

"KRN",.401,1497,2,"B",404.52,3)

"KRN",.401,1497,2,"B",404.52,4)

"KRN",.401,1497,2,"B",404.57,2)

"KRN",.401,1508,-1)
0^19
"KRN",.401,1508,0)
SCMC EXTENDED BULLETIN^3040305.0808^@^404.43^^@^3050615
"KRN",.401,1508,2,0)
^.4014^6^6
"KRN",.401,1508,2,1,0)
404.43^^INTERNAL(EXTEND AUTOMATIC)>0^@"B^;L1^^^^^4
"KRN",.401,1508,2,1,"CM")
S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,13),X=X S X=X>0 I D0>0 S DISX(1)=X
"KRN",.401,1508,2,1,"F")
0
"KRN",.401,1508,2,1,"GET")
S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,13),X=X S X=X>0 I D0>0 S DISX(1)=X
"KRN",.401,1508,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,1508,2,1,"T")
1
"KRN",.401,1508,2,1,"TXT")
INTERNAL(EXTEND AUTOMATIC)>0
"KRN",.401,1508,2,2,0)
404.43^.15^DATE FLAGGED FOR INACIVATION^'@^^^^^^1
"KRN",.401,1508,2,2,"GET")
S DISX(2)=$P($G(^SCPT(404.43,D0,0)),U,15)
"KRN",.401,1508,2,2,"IX")
^SCPT(404.43,"AFLG",^SCPT(404.43,^2
"KRN",.401,1508,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1508,2,2,"SER")
100.0000^1.0000
"KRN",.401,1508,2,2,"TXT")
DATE FLAGGED FOR INACIVATION not null
"KRN",.401,1508,2,3,0)
404.57^^TEAM:INSTITUTION^"#"^;"Institution: "^^^^^4
"KRN",.401,1508,2,3,2,0)
^.401418^1^1
"KRN",.401,1508,2,3,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1508,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1508,2,3,2,"B",404.43,1)

"KRN",.401,1508,2,3,3,0)
^.401419^1^1
"KRN",.401,1508,2,3,3,1,0)
OVF100^9.2
"KRN",.401,1508,2,3,3,1,"OVF0")
S I(100,0)=$G(D0),Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:""),D0=$P(Y(101),U,2) S:'D0!'$D(^SCTM(404.51,+D0,0)) D0=-1 S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"")
"KRN",.401,1508,2,3,3,"B","OVF100",1)

"KRN",.401,1508,2,3,"CM")
X DPP(3,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(3)=X
"KRN",.401,1508,2,3,"GET")
X DPP(3,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(3)=X
"KRN",.401,1508,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1508,2,3,"TXT")
TEAM:INSTITUTION not null
"KRN",.401,1508,2,4,0)
404.57^^TEAM^"".02^^^^^^4
"KRN",.401,1508,2,4,2,0)
^.401418^1^1
"KRN",.401,1508,2,4,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1508,2,4,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1508,2,4,2,"B",404.43,1)

"KRN",.401,1508,2,4,"CM")
S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,2),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1508,2,4,"GET")
S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,2),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1508,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1508,2,4,"TXT")
TEAM not null
"KRN",.401,1508,2,5,0)
404.57^304^CURRENT PRACTITIONER^"^^^^^^4
"KRN",.401,1508,2,5,2,0)
^.401418^1^1
"KRN",.401,1508,2,5,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1508,2,5,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1508,2,5,2,"B",404.43,1)

"KRN",.401,1508,2,5,"F")
?z^@
"KRN",.401,1508,2,5,"GET")
S X=$P($$GETPRTP^SCAPMCU2(D0,DT),U,2) S DISX(5)=X
"KRN",.401,1508,2,5,"QCON")
I 1
"KRN",.401,1508,2,5,"T")
z^
"KRN",.401,1508,2,5,"TXT")
All CURRENT PRACTITIONER (includes nulls)
"KRN",.401,1508,2,6,0)
404.42^^PATIENT^"".01^^^^^^4
"KRN",.401,1508,2,6,2,0)
^.401418^1^1
"KRN",.401,1508,2,6,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1508,2,6,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1508,2,6,2,"B",404.43,1)

"KRN",.401,1508,2,6,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(6)=X
"KRN",.401,1508,2,6,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(6)=X
"KRN",.401,1508,2,6,"QCON")
I DISX(6)'=""
"KRN",.401,1508,2,6,"TXT")
PATIENT not null
"KRN",.401,1508,2,"B",404.42,6)

"KRN",.401,1508,2,"B",404.43,1)

"KRN",.401,1508,2,"B",404.43,2)

"KRN",.401,1508,2,"B",404.57,3)

"KRN",.401,1508,2,"B",404.57,4)

"KRN",.401,1508,2,"B",404.57,5)

"KRN",.401,1508,"%D",0)
^.4012^1^1^3040305^^^^
"KRN",.401,1508,"%D",1,0)
Patients with extended inactivations
"KRN",.401,1509,-1)
0^21
"KRN",.401,1509,0)
SCMC FLAGGED BULLETIN^3040330.0931^@^404.43^^@^3060502
"KRN",.401,1509,2,0)
^.4014^4^4
"KRN",.401,1509,2,1,0)
404.43^.15^DATE FLAGGED FOR INACTIVATION^@'^^^^^^1
"KRN",.401,1509,2,1,"GET")
S DISX(1)=$P($G(^SCPT(404.43,D0,0)),U,15)
"KRN",.401,1509,2,1,"IX")
^SCPT(404.43,"AFLG",^SCPT(404.43,^2
"KRN",.401,1509,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1509,2,1,"SER")
100.0000^1.0000
"KRN",.401,1509,2,1,"TXT")
DATE FLAGGED FOR INACTIVATION not null
"KRN",.401,1509,2,2,0)
404.51^^INSTITUTION^""@".07^^^^^^4
"KRN",.401,1509,2,2,2,0)
^.401418^2^2
"KRN",.401,1509,2,2,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1509,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1509,2,2,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1509,2,2,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1509,2,2,2,"B",404.43,1)

"KRN",.401,1509,2,2,2,"B",404.57,2)

"KRN",.401,1509,2,2,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1509,2,2,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1509,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1509,2,2,"TXT")
INSTITUTION not null
"KRN",.401,1509,2,3,0)
404.42^^TEAM ASSIGNMENT^"@".03^^^^^^4
"KRN",.401,1509,2,3,2,0)
^.401418^1^1
"KRN",.401,1509,2,3,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1509,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1509,2,3,2,"B",404.43,1)

"KRN",.401,1509,2,3,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1509,2,3,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1509,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1509,2,3,"TXT")
TEAM ASSIGNMENT not null
"KRN",.401,1509,2,4,0)
404.42^^PATIENT^"@".01^^^^^^4
"KRN",.401,1509,2,4,2,0)
^.401418^1^1
"KRN",.401,1509,2,4,2,1,0)
404.43^100^404.42^SCPT(404.42,^0
"KRN",.401,1509,2,4,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1509,2,4,2,"B",404.43,1)

"KRN",.401,1509,2,4,"CM")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1509,2,4,"GET")
S Y(101)=$S($D(^SCPT(404.42,D0,0)):^(0),1:"") S X=$P($G(^DPT(+$P(Y(101),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1509,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1509,2,4,"TXT")
PATIENT not null
"KRN",.401,1509,2,"B",404.42,3)

"KRN",.401,1509,2,"B",404.42,4)

"KRN",.401,1509,2,"B",404.43,1)

"KRN",.401,1509,2,"B",404.51,2)

"KRN",.401,1510,-1)
0^20
"KRN",.401,1510,0)
SC PROVIDER FLAGGED BULLE^3040330.1048^@^404.52^^@^3050615
"KRN",.401,1510,2,0)
^.4014^4^4
"KRN",.401,1510,2,1,0)
404.52^.091^DATE FLAGGED FOR INACTIVATION^@^^^^^^1
"KRN",.401,1510,2,1,"GET")
S DISX(1)=$P($G(^SCTM(404.52,D0,0)),U,10)
"KRN",.401,1510,2,1,"IX")
^SCTM(404.52,"AFLAG",^SCTM(404.52,^2
"KRN",.401,1510,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1510,2,1,"SER")
100.0000^1.0000
"KRN",.401,1510,2,1,"TXT")
DATE FLAGGED FOR INACTIVATION not null
"KRN",.401,1510,2,2,0)
404.51^^INSTITUTION^""@".07^^^^^^4
"KRN",.401,1510,2,2,2,0)
^.401418^2^2
"KRN",.401,1510,2,2,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1510,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1510,2,2,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1510,2,2,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1510,2,2,2,"B",404.52,1)

"KRN",.401,1510,2,2,2,"B",404.57,2)

"KRN",.401,1510,2,2,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1510,2,2,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1510,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1510,2,2,"TXT")
INSTITUTION not null
"KRN",.401,1510,2,3,0)
404.52^^TEAM POSITION^@".01^^^^^^4
"KRN",.401,1510,2,3,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1510,2,3,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1510,2,3,"IX")
^SCTM(404.52,"B",^SCTM(404.52,^2
"KRN",.401,1510,2,3,"PTRIX")
^SCTM(404.57,"B",
"KRN",.401,1510,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1510,2,3,"SER")
0.0300^0.0300
"KRN",.401,1510,2,3,"TXT")
TEAM POSITION not null
"KRN",.401,1510,2,4,0)
404.52^^PRACTITIONER^@".03^^^^^^4
"KRN",.401,1510,2,4,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1510,2,4,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1510,2,4,"IX")
^SCTM(404.52,"C",^SCTM(404.52,^2
"KRN",.401,1510,2,4,"PTRIX")
^VA(200,"B",
"KRN",.401,1510,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1510,2,4,"SER")
0.0000^0.0000
"KRN",.401,1510,2,4,"TXT")
PRACTITIONER not null
"KRN",.401,1510,2,"B",404.51,2)

"KRN",.401,1510,2,"B",404.52,1)

"KRN",.401,1510,2,"B",404.52,3)

"KRN",.401,1510,2,"B",404.52,4)

"KRN",.401,1512,-1)
0^22
"KRN",.401,1512,0)
SC INACTIVATED^3040520.0745^@^404.52^^@^3050922
"KRN",.401,1512,2,0)
^.4014^4^4
"KRN",.401,1512,2,1,0)
404.52^.11^INACTIVATED AUTOMATICALLY^@^^^^^^3
"KRN",.401,1512,2,1,"GET")
S DISX(1)=$P($G(^SCTM(404.52,D0,0)),U,11)
"KRN",.401,1512,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,1512,2,1,"SER")
0.8300^0.8300
"KRN",.401,1512,2,1,"TXT")
INACTIVATED AUTOMATICALLY not null
"KRN",.401,1512,2,2,0)
404.57^^TEAM:INST^"+#"^;"INSTITUTION: "^^^^^4
"KRN",.401,1512,2,2,2,0)
^.401418^1^1
"KRN",.401,1512,2,2,2,1,0)
404.52^100^404.57^SCTM(404.57,^0
"KRN",.401,1512,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,1),X=X S D(0)=+X
"KRN",.401,1512,2,2,2,"B",404.52,1)

"KRN",.401,1512,2,2,3,0)
^.401419^1^1
"KRN",.401,1512,2,2,3,1,0)
OVF100^9.2
"KRN",.401,1512,2,2,3,1,"OVF0")
S I(100,0)=$G(D0),Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:""),D0=$P(Y(101),U,2) S:'D0!'$D(^SCTM(404.51,+D0,0)) D0=-1 S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"")
"KRN",.401,1512,2,2,3,"B","OVF100",1)

"KRN",.401,1512,2,2,"ASK")
1
"KRN",.401,1512,2,2,"CM")
X DPP(2,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(2)=X
"KRN",.401,1512,2,2,"GET")
X DPP(2,"OVF100",9.2) S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) S D0=I(100,0) I D0>0 S DISX(2)=X
"KRN",.401,1512,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1512,2,2,"TXT")
TEAM:INST not null
"KRN",.401,1512,2,3,0)
404.52^^PRACTITIONER^".03^^^^^^4
"KRN",.401,1512,2,3,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1512,2,3,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1512,2,3,"IX")
^SCTM(404.52,"C",^SCTM(404.52,^2
"KRN",.401,1512,2,3,"PTRIX")
^VA(200,"B",
"KRN",.401,1512,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1512,2,3,"SER")
0.0000^0.0000
"KRN",.401,1512,2,3,"TXT")
PRACTITIONER not null
"KRN",.401,1512,2,4,0)
404.52^^TEAM POSITION^".01^^^^^^4
"KRN",.401,1512,2,4,"CM")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1512,2,4,"GET")
S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) I D0>0 S DISX(4)=X
"KRN",.401,1512,2,4,"IX")
^SCTM(404.52,"B",^SCTM(404.52,^2
"KRN",.401,1512,2,4,"PTRIX")
^SCTM(404.57,"B",
"KRN",.401,1512,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,1512,2,4,"SER")
0.0300^0.0300
"KRN",.401,1512,2,4,"TXT")
TEAM POSITION not null
"KRN",.401,1512,2,"B",404.52,1)

"KRN",.401,1512,2,"B",404.52,3)

"KRN",.401,1512,2,"B",404.52,4)

"KRN",.401,1512,2,"B",404.57,2)

"KRN",.401,1594,-1)
0^23
"KRN",.401,1594,0)
SCMC TOBE INACTIVATED^3051219.1035^@^404.43^^@^3051219
"KRN",.401,1594,2,0)
^.4014^3^3
"KRN",.401,1594,2,1,0)
404.43^.159^SCHEDULED INACTIVATION DATE^@^^^^^^1
"KRN",.401,1594,2,1,"F")
3051218.999999^TODAY^Dec 19,2005
"KRN",.401,1594,2,1,"GET")
D INACTDT^SCMCTSK1(D0) S DISX(1)=X
"KRN",.401,1594,2,1,"QCON")
I (DISX(1)]]3051218.999999)&(DISX(1)']]3060217.24)
"KRN",.401,1594,2,1,"SER")
1.0000^1.0000
"KRN",.401,1594,2,1,"T")
3060217.24^TODAY+60@2400^Feb 17,2006@24:00
"KRN",.401,1594,2,1,"TXT")
SCHEDULED INACTIVATION DATE from Dec 19,2005 to Feb 17,2006@24:00
"KRN",.401,1594,2,2,0)
404.51^^INSTITUTION^""@".07^^^^^^4
"KRN",.401,1594,2,2,2,0)
^.401418^2^2
"KRN",.401,1594,2,2,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1594,2,2,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1594,2,2,2,2,0)
404.57^200^404.51^SCTM(404.51,^0
"KRN",.401,1594,2,2,2,2,"RCOD")
S I(100,0)=D0 S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(101),U,2),X=X S D(0)=+X
"KRN",.401,1594,2,2,2,"B",404.43,1)

"KRN",.401,1594,2,2,2,"B",404.57,2)

"KRN",.401,1594,2,2,"CM")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1594,2,2,"GET")
S Y(201)=$S($D(^SCTM(404.51,D0,0)):^(0),1:"") S X=$P($G(^DIC(4,+$P(Y(201),U,7),0)),U) I D0>0 S DISX(2)=X
"KRN",.401,1594,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1594,2,2,"TXT")
INSTITUTION not null
"KRN",.401,1594,2,3,0)
404.57^^TEAM^"@".02^^^^^^4
"KRN",.401,1594,2,3,2,0)
^.401418^1^1
"KRN",.401,1594,2,3,2,1,0)
404.43^100^404.57^SCTM(404.57,^0
"KRN",.401,1594,2,3,2,1,"RCOD")
S I(0,0)=D0 S Y(1)=$S($D(^SCPT(404.43,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X
"KRN",.401,1594,2,3,2,"B",404.43,1)

"KRN",.401,1594,2,3,"CM")
S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,2),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1594,2,3,"GET")
S Y(101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.51,+$P(Y(101),U,2),0)),U) I D0>0 S DISX(3)=X
"KRN",.401,1594,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1594,2,3,"TXT")
TEAM not null
"KRN",.401,1594,2,"B",404.43,1)

"KRN",.401,1594,2,"B",404.51,2)

"KRN",.401,1594,2,"B",404.57,3)

"KRN",.401,1594,"%D",0)
^.4012^1^1^3051219^^^^
"KRN",.401,1594,"%D",1,0)
Sort by date flagged by inactivation (t to t+60), institution, and team.
"KRN",3.6,196,-1)
0^1
"KRN",3.6,196,0)
SCMC PROVIDER INACTIVATION^PCMM PROVIDER AUTOMATICALLY INACTIVATED
"KRN",3.6,196,1,0)
^3.61A^1^1^3040130^^
"KRN",3.6,196,1,1,0)
Provider |1|  was inactivated from position |2|
"KRN",3.6,196,4,0)
^3.64A^2^2
"KRN",3.6,196,4,1,0)
1
"KRN",3.6,196,4,1,1,0)
^^1^1^3031217^
"KRN",3.6,196,4,1,1,1,0)
PRACTITIONER
"KRN",3.6,196,4,2,0)
2
"KRN",3.6,196,4,2,1,0)
^3.65^1^1^3040130^^
"KRN",3.6,196,4,2,1,1,0)
Team Position
"KRN",3.8,330,-1)
0^1
"KRN",3.8,330,0)
PCMM PATIENT/PROVIDER INACTIVE^PU^y^^^^
"KRN",3.8,330,2,0)
^3.801^1^1^3040719^^
"KRN",3.8,330,2,1,0)
Receive information on PCMM patient and provider inactivation
"KRN",3.8,330,3)

"KRN",3.8,330,5,0)
^3.811P^1^1
"KRN",3.8,330,5,1,0)
PCMM HL7 MESSAGES
"KRN",19,5191,-1)
2^3
"KRN",19,5191,0)
SC PCMM REPORTS MENU^PCMM Reports^^M^45^^^^^^^16
"KRN",19,5191,10,0)
^19.01IP^30^19
"KRN",19,5191,10,12,0)
10722^FTEE^99
"KRN",19,5191,10,12,"^")
SC PCMM DIRECT PC FTEE
"KRN",19,5191,10,13,0)
11167^IP
"KRN",19,5191,10,13,"^")
SCMC INCONSISTENT POSITION
"KRN",19,5191,10,14,0)
11887^INAC
"KRN",19,5191,10,14,"^")
SCMC TOBE INACTIVATED
"KRN",19,5191,10,15,0)
11169
"KRN",19,5191,10,15,"^")
SCMC RETRANSMIT
"KRN",19,5191,10,16,0)
11193
"KRN",19,5191,10,16,"^")
SCMC EXTENDED REPORT
"KRN",19,5191,10,17,0)
11194
"KRN",19,5191,10,17,"^")
SCMC INACTIVATED REPORT
"KRN",19,5191,10,18,0)
11195
"KRN",19,5191,10,18,"^")
SCMC PRACTITIONER FLAGGED
"KRN",19,5191,10,19,0)
11227
"KRN",19,5191,10,19,"^")
SCMC FLAGGED
"KRN",19,5191,10,20,0)
8944
"KRN",19,5191,10,20,"^")
SCMC PCMM GUI WORKSTATION
"KRN",19,5191,10,21,0)
11258^HAR^10
"KRN",19,5191,10,21,"^")
SCMC PCMM HISTORICAL REPORTS
"KRN",19,5191,10,22,0)
5199^TML^60
"KRN",19,5191,10,22,"^")
SC PCMM LIST TEAM'S MEMBERS
"KRN",19,5191,10,23,0)
5198^TPL^61
"KRN",19,5191,10,23,"^")
SC PCMM LIST TEAM'S PATIENTS
"KRN",19,5191,10,24,0)
5196^ITP^70
"KRN",19,5191,10,24,"^")
SC PCMM IND TEAM PROFILE
"KRN",19,5191,10,25,0)
5197^SLT^71
"KRN",19,5191,10,25,"^")
SC PCMM SUM LIST OF TEAMS
"KRN",19,5191,10,26,0)
5192^PATA^1
"KRN",19,5191,10,26,"^")
SC PCMM PT LIST W/TEAM ASSIGN
"KRN",19,5191,10,27,0)
5194^PD^20
"KRN",19,5191,10,27,"^")
SC PCMM PRACT DEMO
"KRN",19,5191,10,28,0)
9064^PD^30
"KRN",19,5191,10,28,"^")
SCMC PCMM EDIT PRACTIT #404.52
"KRN",19,5191,10,29,0)
5195^PP^45
"KRN",19,5191,10,29,"^")
SC PCMM PRACT PATIENTS
"KRN",19,5191,10,30,0)
8937^INCR^5
"KRN",19,5191,10,30,"^")
SC PCMM INCONSISTENCY REPORT
"KRN",19,5191,"U")
PCMM REPORTS
"KRN",19,5192,-1)
4^51
"KRN",19,5192,0)
SC PCMM PT LIST W/TEAM ASSIGN
"KRN",19,5193,-1)
4^50
"KRN",19,5193,0)
SC PCMM DETAIL LIST PTS
"KRN",19,5194,-1)
4^47
"KRN",19,5194,0)
SC PCMM PRACT DEMO
"KRN",19,5195,-1)
4^48
"KRN",19,5195,0)
SC PCMM PRACT PATIENTS
"KRN",19,5196,-1)
0^28
"KRN",19,5196,0)
SC PCMM IND TEAM PROFILE^Individual Team Profile^^R^^^^^^^^SCHEDULING^y
"KRN",19,5196,1,0)
^^1^1^2960206^
"KRN",19,5196,1,1,0)
This displays basic team definition information.
"KRN",19,5196,25)
PROMPTS^SCRPITP
"KRN",19,5196,"U")
INDIVIDUAL TEAM PROFILE
"KRN",19,5197,-1)
0^27
"KRN",19,5197,0)
SC PCMM SUM LIST OF TEAMS^Summary Listing of Teams^^R^^^^^^^^SCHEDULING
"KRN",19,5197,1,0)
^^3^3^2990908^^
"KRN",19,5197,1,1,0)
Often practitioners will be interested in knowing the size of their
"KRN",19,5197,1,2,0)
patient panel.  This report tallies the number of patients assigned
"KRN",19,5197,1,3,0)
for each practitioner currently assigned to the team.
"KRN",19,5197,25)
PROMPTS^SCRPSLT
"KRN",19,5197,"U")
SUMMARY LISTING OF TEAMS
"KRN",19,5198,-1)
0^26
"KRN",19,5198,0)
SC PCMM LIST TEAM'S PATIENTS^Team Patient Listing^^R^^^^^^^^SCHEDULING^^
"KRN",19,5198,1,0)
^^3^3^2990820^
"KRN",19,5198,1,1,0)
This report lists a team's patients and the clinic associated with the
"KRN",19,5198,1,2,0)
team posistion. It is useful for obtaining the names in the team's patient
"KRN",19,5198,1,3,0)
panel and for reviewing the clinics related to team positions.
"KRN",19,5198,20)

"KRN",19,5198,25)
PROMPTS^SCRPTP
"KRN",19,5198,"U")
TEAM PATIENT LISTING
"KRN",19,5199,-1)
0^25
"KRN",19,5199,0)
SC PCMM LIST TEAM'S MEMBERS^Team Member Listing^^R^^^^^^^^SCHEDULING
"KRN",19,5199,1,0)
^^3^3^2960206^^^^
"KRN",19,5199,1,1,0)
This report shows basic information on the Team and member practitioners.
"KRN",19,5199,1,2,0)
It will be used to review the names of the Practitioners assigned to the
"KRN",19,5199,1,3,0)
team during a certain time period.
"KRN",19,5199,25)
PROMPTS^SCRPTM
"KRN",19,5199,"U")
TEAM MEMBER LISTING
"KRN",19,6320,-1)
0^13
"KRN",19,6320,0)
SCMC PATIENT ASSIGN/UNASSIGN^Team/Position Assignment/Re-Assignment^^A^^SC PCMM ROLL^^^^^^SCHEDULING^^1
"KRN",19,6320,1,0)
^^22^22^3040423^
"KRN",19,6320,1,1,0)
Determines patient's Primary Care status.  Based on status it will prompt
"KRN",19,6320,1,2,0)
the user to select from the following choices:
"KRN",19,6320,1,3,0)
      
"KRN",19,6320,1,4,0)
       o  Assign patient to Primary Care or non-primary care team  
"KRN",19,6320,1,5,0)
          (if not currently assigned)
"KRN",19,6320,1,6,0)
      o Assign patient to PC or non-primary care  Practitioner position 
"KRN",19,6320,1,7,0)
         (if assigned to a team, but not PC practitioner).  User can look-up by 
"KRN",19,6320,1,8,0)
        either position name or the current practitioner assigned to the position.
"KRN",19,6320,1,9,0)
       o  Unassign from team (if assigned to a PC or non-PC team).  If patient is
"KRN",19,6320,1,10,0)
          assigned to PC position, both the PC position and PC team will be unassigned.
"KRN",19,6320,1,11,0)
       o  Unassign from position 
"KRN",19,6320,1,12,0)
      
"KRN",19,6320,1,13,0)
     While assigning/unassigning from a position: If the position has an
"KRN",19,6320,1,14,0)
     Associated Clinic, the user will be prompted to enroll/discharge the
"KRN",19,6320,1,15,0)
     patient from that Associated Clinic.
"KRN",19,6320,1,16,0)
      
"KRN",19,6320,1,17,0)
     Limitations:
"KRN",19,6320,1,18,0)
       o  Does not provide edit or delete functionality.  
"KRN",19,6320,1,19,0)
       o  Does not allow for re-assignment for patients with future PC
"KRN",19,6320,1,20,0)
          assignments.
"KRN",19,6320,1,21,0)
       o  Requires that position has a practitioner currently assigned to it.
"KRN",19,6320,1,22,0)
    To overcome the above limitations, the PCMM GUI must be used.
"KRN",19,6320,20)
D EN^SCMCQK
"KRN",19,6320,99)
57544,58472
"KRN",19,6320,99.1)
59389,47775
"KRN",19,6320,"U")
TEAM/POSITION ASSIGNMENT/RE-AS
"KRN",19,6348,-1)
0^29
"KRN",19,6348,0)
SCMC MU MASS TEAM UNASSIGNMENT^Mass Team/Position Unassignment^^A^^^^^^^^SCHEDULING^^1
"KRN",19,6348,1,0)
^^16^16^2980915^^^^
"KRN",19,6348,1,1,0)
 The Mass Team/Position Unassignment option can be used to unassign a large
"KRN",19,6348,1,2,0)
 number of patients from an active team or an active position using the List
"KRN",19,6348,1,3,0)
 Manager functionality.  It is recommended that distribution of this option be
"KRN",19,6348,1,4,0)
 limited.
"KRN",19,6348,1,5,0)
 
"KRN",19,6348,1,6,0)
 The effective date you choose for the unassignment may be in the past, today,
"KRN",19,6348,1,7,0)
 or in the future.  The list of patients displayed contains all patients with
"KRN",19,6348,1,8,0)
 assignments to the selected team/position, as of the selected effective date
"KRN",19,6348,1,9,0)
 or after the effective date.  Those with assignment dates in the future will
"KRN",19,6348,1,10,0)
 show an asterisk (*) next to the assigned date. 
"KRN",19,6348,1,11,0)
 
"KRN",19,6348,1,12,0)
 When patients are unassigned from the team, they are also automatically
"KRN",19,6348,1,13,0)
 unassigned from any associated position.  If a position is associated with
"KRN",19,6348,1,14,0)
 a clinic, you are given the opportunity to also discharge patients from
"KRN",19,6348,1,15,0)
 the clinic.
"KRN",19,6348,1,16,0)
 
"KRN",19,6348,20)
D EN^SCMCMU
"KRN",19,6348,99.1)
59389,47775
"KRN",19,6348,"U")
MASS TEAM/POSITION UNASSIGNMEN
"KRN",19,6356,-1)
4^52
"KRN",19,6356,0)
SC PCMM POSITION ASSIGN REVIEW
"KRN",19,8932,-1)
0^32
"KRN",19,8932,0)
SC PCMM HIST PAT ASSIGN LIST^Historical Patient Position Assignment Listing^^R^^^^^^^^
"KRN",19,8932,1,0)
^^2^2^2990717^^
"KRN",19,8932,1,1,0)
Option for printing patient position assignments that exist during a
"KRN",19,8932,1,2,0)
specified date range.
"KRN",19,8932,25)
SCRPO1
"KRN",19,8932,"U")
HISTORICAL PATIENT POSITION AS
"KRN",19,8933,-1)
0^33
"KRN",19,8933,0)
SC PCMM HIST PROV ASSIGN LIST^Historical Provider Position Assignment Listing^^R^^^^^^^^SCHEDULING
"KRN",19,8933,1,0)
^19.06^2^2^3040401^^^^
"KRN",19,8933,1,1,0)
Option for printing provider position assignments that exist during a 
"KRN",19,8933,1,2,0)
specified date range.
"KRN",19,8933,25)
SCRPO3
"KRN",19,8933,"U")
HISTORICAL PROVIDER POSITION A
"KRN",19,8934,-1)
0^31
"KRN",19,8934,0)
SC PCMM HIST PAT ASSIGN DETAIL^Historical Patient Assignment Detail^^R^^^^^^^^
"KRN",19,8934,1,0)
^^2^2^2990831^^^
"KRN",19,8934,1,1,0)
Option for printing all provider, position and team assignments that
"KRN",19,8934,1,2,0)
exist for a patient during a specified date range.
"KRN",19,8934,25)
SCRPO5
"KRN",19,8934,"U")
HISTORICAL PATIENT ASSIGNMENT 
"KRN",19,8936,-1)
0^30
"KRN",19,8936,0)
SC PCMM HIST TEAM ASSIGN SUMM^Historical Team Assignment Summary^^R^^^^^^^^
"KRN",19,8936,1,0)
^^2^2^2990717^^
"KRN",19,8936,1,1,0)
Option for printing counts of team and team position assignments and 
"KRN",19,8936,1,2,0)
unique patients within a specified date range.
"KRN",19,8936,25)
SCRPO6
"KRN",19,8936,"U")
HISTORICAL TEAM ASSIGNMENT SUM
"KRN",19,8937,-1)
0^53
"KRN",19,8937,0)
SC PCMM INCONSISTENCY REPORT^PCMM Inconsistency Report^^R^^^^^^^^
"KRN",19,8937,1,0)
^^2^2^2990720^^
"KRN",19,8937,1,1,0)
Option to print the Inconsistencies that may exist according to the new
"KRN",19,8937,1,2,0)
Business Rules that were established in Phase II of PCMM (Patch # 177).
"KRN",19,8937,25)
EN^SCRPV1
"KRN",19,8937,99.1)
59023,68723
"KRN",19,8937,"U")
PCMM INCONSISTENCY REPORT
"KRN",19,8944,-1)
0^7
"KRN",19,8944,0)
SCMC PCMM GUI WORKSTATION^PCMM GUI WORKSTATION^^B^^^^^^^^SCHEDULING^^
"KRN",19,8944,1,0)
^^6^6^3000207^^^^
"KRN",19,8944,1,1,0)
'B' type option for use after installation of PCMM client version
"KRN",19,8944,1,2,0)
1.2.0.0/server version SD*5.3*177.  For users to be able to use the
"KRN",19,8944,1,3,0)
Primary Care Management Module's GUI front-end, this option must be on
"KRN",19,8944,1,4,0)
either their primary or secondary menu options.  Putting this option on a
"KRN",19,8944,1,5,0)
menu will give users who have access to that menu, access to PCMM.  Note:
"KRN",19,8944,1,6,0)
'B' type options are not visible to roll & scroll users.
"KRN",19,8944,20)

"KRN",19,8944,99)
58812,34318
"KRN",19,8944,99.1)
59389,47775
"KRN",19,8944,"RPC",0)
^19.05P^100^100
"KRN",19,8944,"RPC",2,0)
SC BLD PAT CLN LIST
"KRN",19,8944,"RPC",3,0)
SC BLD PAT LIST
"KRN",19,8944,"RPC",6,0)
SC CHANGE HISTORY OK
"KRN",19,8944,"RPC",7,0)
SC DELETE ENTRY
"KRN",19,8944,"RPC",8,0)
SC DELETE HISTORY
"KRN",19,8944,"RPC",9,0)
SC FILE NUMBER
"KRN",19,8944,"RPC",10,0)
SC FILE PAT TM ASGN
"KRN",19,8944,"RPC",12,0)
SC FILE SINGLE VALUE
"KRN",19,8944,"RPC",13,0)
SC FILER
"KRN",19,8944,"RPC",14,0)
SC FIND
"KRN",19,8944,"RPC",15,0)
SC GET PAT BLOCK
"KRN",19,8944,"RPC",18,0)
SC GETS ENTRY DATA
"KRN",19,8944,"RPC",19,0)
SC GLOBAL NODE
"KRN",19,8944,"RPC",20,0)
SC GLOBAL NODE COUNT
"KRN",19,8944,"RPC",21,0)
SC HISTORY STATUS OK
"KRN",19,8944,"RPC",22,0)
SC INACTIVATE ENTRY
"KRN",19,8944,"RPC",23,0)
SC LISTER
"KRN",19,8944,"RPC",24,0)
SC LOCK/UNLOCK NODE
"KRN",19,8944,"RPC",25,0)
SC MAILMAN
"KRN",19,8944,"RPC",26,0)
SC MEAN TEST
"KRN",19,8944,"RPC",27,0)
SC NEW HISTORY OK
"KRN",19,8944,"RPC",28,0)
SC PATIENT LOOKUP
"KRN",19,8944,"RPC",29,0)
SC POSITION MEMBERS
"KRN",19,8944,"RPC",30,0)
SC PRIMARY CARE TEAM
"KRN",19,8944,"RPC",31,0)
SC PRTP
"KRN",19,8944,"RPC",32,0)
SC STAFF LOOKUP
"KRN",19,8944,"RPC",33,0)
SC TEAM LIST
"KRN",19,8944,"RPC",34,0)
SC USER CLASS STATUS
"KRN",19,8944,"RPC",35,0)
SC VALIDATOR
"KRN",19,8944,"RPC",36,0)
SCRP DEFINITION GETRECORD
"KRN",19,8944,"RPC",37,0)
SCRP FILE ENTRY GETSELECTION
"KRN",19,8944,"RPC",38,0)
SCRP QUERY CHECK NAME
"KRN",19,8944,"RPC",39,0)
SCRP QUERY DELETE
"KRN",19,8944,"RPC",40,0)
SCRP QUERY GETRECORD
"KRN",19,8944,"RPC",41,0)
SCRP QUERY SAVE
"KRN",19,8944,"RPC",42,0)
SCRP QUERY VALIDATE
"KRN",19,8944,"RPC",43,0)
SCRP REPORT PRINT
"KRN",19,8944,"RPC",44,0)
SCRP SELECTION SOURCE
"KRN",19,8944,"RPC",45,0)
SCTM AUTOLINK GETLINK
"KRN",19,8944,"RPC",46,0)
SCTM AUTOLINK GETRECORD
"KRN",19,8944,"RPC",47,0)
SCTM AUTOLINK SETRECORD
"KRN",19,8944,"RPC",48,0)
SCUT GET USER RECORD
"KRN",19,8944,"RPC",49,0)
SCUT SET USER QUERY DEFAULT
"KRN",19,8944,"RPC",50,0)
SC KEY CHECK
"KRN",19,8944,"RPC",51,0)
SC BLD PAT SCDE LIST
"KRN",19,8944,"RPC",52,0)
SC BLD PAT TM LIST
"KRN",19,8944,"RPC",53,0)
SC FILE PAT POS ASGN
"KRN",19,8944,"RPC",54,0)
SC BLD PAT POS LIST
"KRN",19,8944,"RPC",55,0)
SC PAT ENROLL CLN
"KRN",19,8944,"RPC",56,0)
SC CHECK FOR PC POS
"KRN",19,8944,"RPC",57,0)
SC FILE ALL PAT TM ASGN
"KRN",19,8944,"RPC",58,0)
SC BLD PAT APT LIST
"KRN",19,8944,"RPC",59,0)
SC FILE ALL PAT POS ASGN
"KRN",19,8944,"RPC",60,0)
SC BLD NOPC TM LIST
"KRN",19,8944,"RPC",61,0)
SC PAT ASGN MAILMAN
"KRN",19,8944,"RPC",62,0)
DDR FILER
"KRN",19,8944,"RPC",63,0)
DDR FIND1
"KRN",19,8944,"RPC",64,0)
DDR FINDER
"KRN",19,8944,"RPC",65,0)
DDR GET DD HELP
"KRN",19,8944,"RPC",66,0)
DDR DELETE ENTRY
"KRN",19,8944,"RPC",67,0)
DDR GETS ENTRY DATA
"KRN",19,8944,"RPC",68,0)
DDR LISTER
"KRN",19,8944,"RPC",69,0)
DDR LOCK/UNLOCK NODE
"KRN",19,8944,"RPC",70,0)
DDR VALIDATOR
"KRN",19,8944,"RPC",71,0)
SC ACTIVE POSITION ASSIGNMENTS
"KRN",19,8944,"RPC",72,0)
SCMC DIS TEAM POS
"KRN",19,8944,"RPC",73,0)
SCMC BLD TEAM PAT LIST
"KRN",19,8944,"RPC",75,0)
SCMC BLD REASSIGN PAT LIST
"KRN",19,8944,"RPC",76,0)
SCMC FILE PAT POS REASGN
"KRN",19,8944,"RPC",77,0)
SCMC FILE PAT TM REASGN
"KRN",19,8944,"RPC",78,0)
SCMC BLD POS PAT LIST
"KRN",19,8944,"RPC",79,0)
SCMC POSITION ASSIGN LIST
"KRN",19,8944,"RPC",80,0)
SCMC GET PARAMETER IEN
"KRN",19,8944,"RPC",81,0)
SCMC VERIFY C/S SYNC
"KRN",19,8944,"RPC",82,0)
DG CHK BS5 XREF Y/N
"KRN",19,8944,"RPC",83,0)
DG CHK PAT/DIV MEANS TEST
"KRN",19,8944,"RPC",84,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,8944,"RPC",85,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,8944,"RPC",86,0)
SC FTEE BUILD LIST
"KRN",19,8944,"RPC",87,0)
SC FTEE FILE LIST
"KRN",19,8944,"RPC",88,0)
SC PC PROVIDER
"KRN",19,8944,"RPC",89,0)
SCMC WAIT LIST ENTRY
"KRN",19,8944,"RPC",90,0)
SC SC CONDITION LIST
"KRN",19,8944,"RPC",91,0)
SC CHECK FOR ENROLLMENT
"KRN",19,8944,"RPC",92,0)
SC EXTEND BUILD LIST
"KRN",19,8944,"RPC",93,0)
SC EXTEND FILE LIST
"KRN",19,8944,"RPC",94,0)
SC FILE ASSOCIATE CLINICS
"KRN",19,8944,"RPC",95,0)
SC GET ASSOCIATE CLINICS
"KRN",19,8944,"RPC",96,0)
SC POSITION RESIDENT ROLE
"KRN",19,8944,"RPC",97,0)
SCMC FILE INACTIVATION END
"KRN",19,8944,"RPC",98,0)
SCMC PCMM CHECK FTEE
"KRN",19,8944,"RPC",99,0)
SCMC POSITION PC CHECK
"KRN",19,8944,"RPC",100,0)
SCMC ROLE
"KRN",19,8944,"U")
PCMM GUI WORKSTATION
"KRN",19,9064,-1)
4^49
"KRN",19,9064,0)
SCMC PCMM EDIT PRACTIT #404.52
"KRN",19,9075,-1)
0^22
"KRN",19,9075,0)
SCMC PCMM REJECT TRANS MENU^PCMM Reject Transmission Menu^^M^^^^^^^y^SCHEDULING
"KRN",19,9075,1,0)
^^2^2^3000224^^
"KRN",19,9075,1,1,0)
This option will contain all options associated with reporting/processing
"KRN",19,9075,1,2,0)
of PCMM HL7 Reject/Error Transmissions.
"KRN",19,9075,10,0)
^19.01IP^3^3
"KRN",19,9075,10,1,0)
9076^EP
"KRN",19,9075,10,1,"^")
SCMC PCMM TRANS ERROR PROC
"KRN",19,9075,10,2,0)
9077^ECR
"KRN",19,9075,10,2,"^")
SCMC PCMM ERR CODE REPORT
"KRN",19,9075,10,3,0)
9079^ER
"KRN",19,9075,10,3,"^")
SCMC PCMM TRANS ERROR REPORT
"KRN",19,9075,99)
60220,37290
"KRN",19,9075,99.1)
60543,36141
"KRN",19,9075,"U")
PCMM REJECT TRANSMISSION MENU
"KRN",19,9076,-1)
0^40
"KRN",19,9076,0)
SCMC PCMM TRANS ERROR PROC^PCMM Transmission Error Processing^^R^^^^^^^^SCHEDULING
"KRN",19,9076,1,0)
^19.06^2^2^3030618^^^^
"KRN",19,9076,1,1,0)
This option permits users to review transmission errors logged in the PCMM
"KRN",19,9076,1,2,0)
HL7 TRANSMISSION LOG file.
"KRN",19,9076,25)
EN^SCMCHLR1
"KRN",19,9076,99.1)
59389,47775
"KRN",19,9076,"U")
PCMM TRANSMISSION ERROR PROCES
"KRN",19,9077,-1)
0^41
"KRN",19,9077,0)
SCMC PCMM ERR CODE REPORT^PCMM Transmission Error Code Report^^R^^^^^^^^SCHEDULING
"KRN",19,9077,1,0)
^^2^2^3000210^
"KRN",19,9077,1,1,0)
This report will print a list of the error codes and descriptions for
"KRN",19,9077,1,2,0)
entries in the PCMM HL7 ERROR CODE file.
"KRN",19,9077,25)
ECRPRT^SCMCHLR7
"KRN",19,9077,99.1)
59389,47775
"KRN",19,9077,"U")
PCMM TRANSMISSION ERROR CODE R
"KRN",19,9079,-1)
0^39
"KRN",19,9079,0)
SCMC PCMM TRANS ERROR REPORT^PCMM Transmission Error Report^^R^^^^^^^^SCHEDULING
"KRN",19,9079,1,0)
^^7^7^3000225^^^
"KRN",19,9079,1,1,0)
This option will be used to produce the PCMM TRANSMISSION ERROR REPORT.
"KRN",19,9079,1,2,0)
This report will allow the user to print a list of patients for which HL7
"KRN",19,9079,1,3,0)
transmission errors were received from the Austin Automation Center (AAC).
"KRN",19,9079,1,4,0)
The user will have the ability to print all transmission errors or may
"KRN",19,9079,1,5,0)
print errors for a selected date range.  Users will also have the ability
"KRN",19,9079,1,6,0)
to sort the error list by <Patient Name>, <Date/Time Error Received>, or
"KRN",19,9079,1,7,0)
<Provider Name>.
"KRN",19,9079,25)
TERPRT^SCMCHLR8
"KRN",19,9079,99)
58128,41963
"KRN",19,9079,99.1)
59389,47775
"KRN",19,9079,"U")
PCMM TRANSMISSION ERROR REPORT
"KRN",19,10722,-1)
0^1
"KRN",19,10722,0)
SC PCMM DIRECT PC FTEE^Direct PC FTEE and Panel Size Report^^R^^SC PCMM SETUP^^^^^^
"KRN",19,10722,1,0)
^^1^1^3020730^
"KRN",19,10722,1,1,0)
Report of Direct Patient Care FTEE for active assignments
"KRN",19,10722,3.91,0)
^19.391^^0
"KRN",19,10722,25)
FTEERPT^SCMCTSK1
"KRN",19,10722,60)
SCTM(404.52,
"KRN",19,10722,62)
0
"KRN",19,10722,63)
[SCMC DIRECT PC FTEE]
"KRN",19,10722,64)
[SCMC DIRECT PC FTEE]
"KRN",19,10722,99.1)
59463,30540
"KRN",19,10722,"U")
DIRECT PC FTEE AND PANEL SIZE 
"KRN",19,10782,-1)
0^35
"KRN",19,10782,0)
SD WAIT LIST ENTER/EDIT^Enter/Edit Wait List (Sch/PCMM)^^R^^^^^^^^^^1^1
"KRN",19,10782,1,0)
^19.06^3^3^3050923^^^^
"KRN",19,10782,1,1,0)
This option allows the entry of a patient on the Scheduling/PCMM Wait 
"KRN",19,10782,1,2,0)
List or the editing of an existing wait list entry.
"KRN",19,10782,1,3,0)
List
"KRN",19,10782,15)
D EN^SDWLKIL
"KRN",19,10782,20)
D EN^SDWLKIL
"KRN",19,10782,25)
EN^SDWLE
"KRN",19,10782,"U")
ENTER/EDIT WAIT LIST (SCH/PCMM
"KRN",19,10783,-1)
0^36
"KRN",19,10783,0)
SD WAIT LIST DISPOSITION ENTRY^Disposition Wait List (Sch/PCMM) Entry^^R^^^^^^^^^^1^1
"KRN",19,10783,1,0)
^19.06^2^2^3030821^^^
"KRN",19,10783,1,1,0)
Allows the entry of a disposition reason for patients on the Wait List 
"KRN",19,10783,1,2,0)
(Sch/PCMM). Only patients that do not have a disposition are selectable.
"KRN",19,10783,15)
D EN^SDWLKIL
"KRN",19,10783,20)
D EN^SDWLKIL
"KRN",19,10783,25)
EN^SDWLDISP
"KRN",19,10783,"U")
DISPOSITION WAIT LIST (SCH/PCM
"KRN",19,10784,-1)
0^34
"KRN",19,10784,0)
SD WAIT LIST INQUIRY^Inquire Wait List (Sch/PCMM)^^R^^^^^^^^^^^1
"KRN",19,10784,1,0)
^19.06^1^1^3021008^^^
"KRN",19,10784,1,1,0)
Inquire option to Scheduling/PCMM Wait List by patient.
"KRN",19,10784,15)
D EN^SDWLKIL
"KRN",19,10784,20)

"KRN",19,10784,25)
EN^SDWLI
"KRN",19,10784,"U")
INQUIRE WAIT LIST (SCH/PCMM)
"KRN",19,10785,-1)
0^37
"KRN",19,10785,0)
SD WAIT LIST REPORTS MENU^Wait List (Sch/PCMM) Reports^^M^^^^^^^^^^1^1
"KRN",19,10785,10,0)
^19.01IP^15^15
"KRN",19,10785,10,9,0)
11779^8^8
"KRN",19,10785,10,9,"^")
SDWL TRANSFER PRINT REQUESTS
"KRN",19,10785,10,10,0)
10787^2^2
"KRN",19,10785,10,10,"^")
SD WAIT LIST PRM CARE/TEAM
"KRN",19,10785,10,11,0)
10786^3^3
"KRN",19,10785,10,11,"^")
SD WAIT LIST OVERDUE REPORT
"KRN",19,10785,10,12,0)
10790^4^4
"KRN",19,10785,10,12,"^")
SD WAIT LIST STAT REPORT
"KRN",19,10785,10,13,0)
10792^5^5
"KRN",19,10785,10,13,"^")
SD WAIT LIST ENROLL REPORT
"KRN",19,10785,10,14,0)
10789^1^1
"KRN",19,10785,10,14,"^")
SD WAIT LIST APPT REPORT
"KRN",19,10785,10,15,0)
11827^6^6
"KRN",19,10785,10,15,"^")
SD WAIT LIST REOPEN ENTRIES
"KRN",19,10785,15)
D EN^SDWLKIL
"KRN",19,10785,20)
D EN^SDWLKIL
"KRN",19,10785,99)
60543,38078
"KRN",19,10785,"U")
WAIT LIST (SCH/PCMM) REPORTS
"KRN",19,10786,-1)
4^44
"KRN",19,10786,0)
SD WAIT LIST OVERDUE REPORT
"KRN",19,10787,-1)
4^43
"KRN",19,10787,0)
SD WAIT LIST PRM CARE/TEAM
"KRN",19,10788,-1)
0^38
"KRN",19,10788,0)
SD WAIT LIST PAR ENTER/EDIT^Wait List (Sch/PCMM) Parameter Enter/Edit^^R^^SDWL PARAMETER^^^^^^SCHEDULING^^1^1
"KRN",19,10788,1,0)
^19.06^3^3^3020927^^^
"KRN",19,10788,1,1,0)
This option allows the activation and inactivation of Clinics and DSS
"KRN",19,10788,1,2,0)
Identifiers for an institution that can be used by the Wait List
"KRN",19,10788,1,3,0)
(Sch/PCMM) package
"KRN",19,10788,15)
D EN^SDWLKIL
"KRN",19,10788,20)
D EN^SDWLKIL
"KRN",19,10788,25)
EN^SDWLPE
"KRN",19,10788,"U")
WAIT LIST (SCH/PCMM) PARAMETER
"KRN",19,10789,-1)
4^42
"KRN",19,10789,0)
SD WAIT LIST APPT REPORT
"KRN",19,10790,-1)
4^45
"KRN",19,10790,0)
SD WAIT LIST STAT REPORT
"KRN",19,10792,-1)
4^46
"KRN",19,10792,0)
SD WAIT LIST ENROLL REPORT
"KRN",19,11166,-1)
0^6
"KRN",19,11166,0)
SCMC PCMM NIGHTLY TASK^PCMM NIGHTLY TASK^^R^^^^^^^^
"KRN",19,11166,1,0)
^19.06^3^3^3031201^^
"KRN",19,11166,1,1,0)
This option should be scheduled once a day. It reviews Patient team assignments
"KRN",19,11166,1,2,0)
and inactivates patients who have assignment dates greater than two years
"KRN",19,11166,1,3,0)
old and have not been seen in the last year.
"KRN",19,11166,25)
NIGHT^SCMCTSK2
"KRN",19,11166,"U")
PCMM NIGHTLY TASK
"KRN",19,11167,-1)
0^2
"KRN",19,11167,0)
SCMC INCONSISTENT POSITION^Staff/Position Inconsistency Report^^R^^SC PCMM SETUP^^^^^^
"KRN",19,11167,1,0)
^^2^2^3060920^
"KRN",19,11167,1,1,0)
Report of Active Position Assignments and their Role/Person Class/Primary Care 
"KRN",19,11167,1,2,0)
Consistency
"KRN",19,11167,25)
INCONR^SCMCTSK1
"KRN",19,11167,"U")
STAFF/POSITION INCONSISTENCY R
"KRN",19,11169,-1)
0^5
"KRN",19,11169,0)
SCMC RETRANSMIT^Retransmit one Patient or Provider^^R^^^^^^^^
"KRN",19,11169,1,0)
^19.06^4^4^3030910^^
"KRN",19,11169,1,1,0)
Resend PCMM messages for a single patient or for all patients assigned to a single provider.
"KRN",19,11169,1,2,0)
For provider also resends the Workload Message
"KRN",19,11169,1,3,0)
 
"KRN",19,11169,1,4,0)
The option creates a PCMM HL7 event entry and transmission is completed during normal background transmission times
"KRN",19,11169,25)
SEED^SCMCTSK1
"KRN",19,11169,"U")
RETRANSMIT ONE PATIENT OR PROV
"KRN",19,11192,-1)
0^8
"KRN",19,11192,0)
SCMC ROOT MENU^Primary Care Main Menu^^M^^^^^^^^
"KRN",19,11192,10,0)
^19.01IP^33^23
"KRN",19,11192,10,1,0)
10722^FTEE
"KRN",19,11192,10,1,"^")
SC PCMM DIRECT PC FTEE
"KRN",19,11192,10,3,0)
8937
"KRN",19,11192,10,3,"^")
SC PCMM INCONSISTENCY REPORT
"KRN",19,11192,10,4,0)
5191
"KRN",19,11192,10,4,"^")
SC PCMM REPORTS MENU
"KRN",19,11192,10,6,0)
6348
"KRN",19,11192,10,6,"^")
SCMC MU MASS TEAM UNASSIGNMENT
"KRN",19,11192,10,7,0)
6320
"KRN",19,11192,10,7,"^")
SCMC PATIENT ASSIGN/UNASSIGN
"KRN",19,11192,10,11,0)
9064
"KRN",19,11192,10,11,"^")
SCMC PCMM EDIT PRACTIT #404.52
"KRN",19,11192,10,12,0)
8944^GUI
"KRN",19,11192,10,12,"^")
SCMC PCMM GUI WORKSTATION
"KRN",19,11192,10,14,0)
9075
"KRN",19,11192,10,14,"^")
SCMC PCMM REJECT TRANS MENU
"KRN",19,11192,10,15,0)
9076
"KRN",19,11192,10,15,"^")
SCMC PCMM TRANS ERROR PROC
"KRN",19,11192,10,16,0)
9079
"KRN",19,11192,10,16,"^")
SCMC PCMM TRANS ERROR REPORT
"KRN",19,11192,10,19,0)
10787
"KRN",19,11192,10,19,"^")
SD WAIT LIST PRM CARE/TEAM
"KRN",19,11192,10,20,0)
6356
"KRN",19,11192,10,20,"^")
SC PCMM POSITION ASSIGN REVIEW
"KRN",19,11192,10,21,0)
5192^PATA
"KRN",19,11192,10,21,"^")
SC PCMM PT LIST W/TEAM ASSIGN
"KRN",19,11192,10,23,0)
11193^EXTD
"KRN",19,11192,10,23,"^")
SCMC EXTENDED REPORT
"KRN",19,11192,10,24,0)
11194^INAC
"KRN",19,11192,10,24,"^")
SCMC INACTIVATED REPORT
"KRN",19,11192,10,25,0)
11167^IP
"KRN",19,11192,10,25,"^")
SCMC INCONSISTENT POSITION
"KRN",19,11192,10,26,0)
11258^HAR
"KRN",19,11192,10,26,"^")
SCMC PCMM HISTORICAL REPORTS
"KRN",19,11192,10,27,0)
5194^PD
"KRN",19,11192,10,27,"^")
SC PCMM PRACT DEMO
"KRN",19,11192,10,28,0)
5195^PP
"KRN",19,11192,10,28,"^")
SC PCMM PRACT PATIENTS
"KRN",19,11192,10,29,0)
5199^TML
"KRN",19,11192,10,29,"^")
SC PCMM LIST TEAM'S MEMBERS
"KRN",19,11192,10,30,0)
5198^TPL
"KRN",19,11192,10,30,"^")
SC PCMM LIST TEAM'S PATIENTS
"KRN",19,11192,10,31,0)
5197^SLT
"KRN",19,11192,10,31,"^")
SC PCMM SUM LIST OF TEAMS
"KRN",19,11192,10,33,0)
11227^FLAG
"KRN",19,11192,10,33,"^")
SCMC FLAGGED
"KRN",19,11192,99)
60528,49654
"KRN",19,11192,"U")
PRIMARY CARE MAIN MENU
"KRN",19,11193,-1)
0^9
"KRN",19,11193,0)
SCMC EXTENDED REPORT^Patients with Extended Primary Care Inactivation^^R^^SC PCMM SETUP^^^^^^
"KRN",19,11193,1,0)
^19.06^1^1^3050926^^^^
"KRN",19,11193,1,1,0)
Patients with extended inactivations
"KRN",19,11193,25)
EXRPT^SCMCTSK2
"KRN",19,11193,60)
SCPT(404.43
"KRN",19,11193,63)
[SCMC EXTENDED]
"KRN",19,11193,64)
[SCMC EXTENDED]
"KRN",19,11193,"U")
PATIENTS WITH EXTENDED PRIMARY
"KRN",19,11194,-1)
0^11
"KRN",19,11194,0)
SCMC INACTIVATED REPORT^Patients Automated Inactivations from PC Panels^^R^^SC PCMM SETUP^^^^^^
"KRN",19,11194,1,0)
^19.06^1^1^3040309^^^^
"KRN",19,11194,1,1,0)
Report of patients inactivated due to inactivity rules by date
"KRN",19,11194,25)
INRPT^SCMCTSK2
"KRN",19,11194,60)

"KRN",19,11194,63)

"KRN",19,11194,64)

"KRN",19,11194,"U")
PATIENTS AUTOMATED INACTIVATIO
"KRN",19,11195,-1)
0^10
"KRN",19,11195,0)
SCMC PRACTITIONER FLAGGED^Staff Sched for Inactivation ^^P^^SC PCMM SETUP^^^^^^SCHEDULING^^^
"KRN",19,11195,1,0)
^19.06^1^1^3060620^^^^
"KRN",19,11195,1,1,0)
Positions Flagged for inactivation
"KRN",19,11195,15)

"KRN",19,11195,25)

"KRN",19,11195,60)
SCTM(404.52,
"KRN",19,11195,63)
[SC PROVIDER FLAGGED]
"KRN",19,11195,64)
[SC PROVIDER FLAGGED]
"KRN",19,11195,72)
D FLAG^SCMCTSK8
"KRN",19,11195,73)
D KEY^SCMCTSK8
"KRN",19,11195,"U")
STAFF SCHED FOR INACTIVATION 
"KRN",19,11226,-1)
0^12
"KRN",19,11226,0)
SCMC INACTIVATED 30^Patients Inactivated from PCP Panels in past month^^R^^SC PCMM SETUP^^^^^^
"KRN",19,11226,1,0)
^^1^1^3031208^
"KRN",19,11226,1,1,0)
Patients with extended inactivations
"KRN",19,11226,25)
IN30^SCMCTSK2
"KRN",19,11226,"U")
PATIENTS INACTIVATED FROM PCP 
"KRN",19,11227,-1)
0^14
"KRN",19,11227,0)
SCMC FLAGGED^Patients Scheduled for Inactivation from PC Panels^^R^^SC PCMM SETUP^^^^^^
"KRN",19,11227,1,0)
^19.06^1^1^3040416^^^
"KRN",19,11227,1,1,0)
Patients flagged in last 30 day for inactivation
"KRN",19,11227,25)
FLRPT^SCMCTSK2
"KRN",19,11227,60)
SCPT(404.43,
"KRN",19,11227,63)
[SCMC PENDING UNASSIGN]
"KRN",19,11227,64)

"KRN",19,11227,65)
T-30,T-30
"KRN",19,11227,66)
TODAY,T+30
"KRN",19,11227,"U")
PATIENTS SCHEDULED FOR INACTIV
"KRN",19,11258,-1)
0^17
"KRN",19,11258,0)
SCMC PCMM HISTORICAL REPORTS^HISTORICAL ASSIGNMENT REPORTS^^M^^^^^^^^
"KRN",19,11258,1,0)
^19.06^2^2^3040430^^
"KRN",19,11258,1,1,0)
Menu of options for printing assignments that exist during a specified
"KRN",19,11258,1,2,0)
date range.
"KRN",19,11258,10,0)
^19.01IP^4^4
"KRN",19,11258,10,1,0)
8934^PAD^1
"KRN",19,11258,10,1,"^")
SC PCMM HIST PAT ASSIGN DETAIL
"KRN",19,11258,10,2,0)
8932^PTAL^3
"KRN",19,11258,10,2,"^")
SC PCMM HIST PAT ASSIGN LIST
"KRN",19,11258,10,3,0)
8933^PRAL^2
"KRN",19,11258,10,3,"^")
SC PCMM HIST PROV ASSIGN LIST
"KRN",19,11258,10,4,0)
8936^TAS^4
"KRN",19,11258,10,4,"^")
SC PCMM HIST TEAM ASSIGN SUMM
"KRN",19,11258,99)
60220,37303
"KRN",19,11258,"U")
HISTORICAL ASSIGNMENT REPORTS
"KRN",19,11259,-1)
0^15
"KRN",19,11259,0)
SCMC PC STAFF AUTO INACTIVATE^Staff Inactivated Report^^P^^SC PCMM SETUP^^^^^^SCHEDULING^^^
"KRN",19,11259,1,0)
^19.06^1^1^3040412^^^^
"KRN",19,11259,1,1,0)
PC staff scheduled for inactivation.
"KRN",19,11259,15)

"KRN",19,11259,20)

"KRN",19,11259,60)
SCTM(404.52,
"KRN",19,11259,63)
[SC INACTIVATED]
"KRN",19,11259,64)
[SC INACTIVATED]
"KRN",19,11259,72)
D FLAG^SCMCTSK8
"KRN",19,11259,73)
D KEY^SCMCTSK8
"KRN",19,11259,"U")
STAFF INACTIVATED REPORT
"KRN",19,11260,-1)
0^18
"KRN",19,11260,0)
SCMC PCMM MAIN MENU^PCMM Main Menu^^M^^SC PCMM SETUP^^^^^^SCHEDULING^y^^^^^1
"KRN",19,11260,3.91,0)
^19.391^^
"KRN",19,11260,3.92,0)
^19.392A^1^1
"KRN",19,11260,3.92,1,0)
0700-1700^MO-FR
"KRN",19,11260,3.92,"B","0700-1700",1)

"KRN",19,11260,10,0)
^19.01IP^8^6
"KRN",19,11260,10,1,0)
11264^PT^1
"KRN",19,11260,10,1,"^")
SCMC PCMM REPORTS MENU
"KRN",19,11260,10,3,0)
11265^EWL^90
"KRN",19,11260,10,3,"^")
SCMC PCMM EWL MENU
"KRN",19,11260,10,5,0)
11293^HL^99
"KRN",19,11260,10,5,"^")
SCMC HL7 MENU
"KRN",19,11260,10,6,0)
11258^HAR^80
"KRN",19,11260,10,6,"^")
SCMC PCMM HISTORICAL REPORTS
"KRN",19,11260,10,7,0)
11263^TM^50
"KRN",19,11260,10,7,"^")
SCMC PCMM TEAM REPORTS MENU
"KRN",19,11260,10,8,0)
11262^PR^2
"KRN",19,11260,10,8,"^")
SCMC PCMM PROVIDER RPTS MENU
"KRN",19,11260,99)
60220,37303
"KRN",19,11260,99.1)
60543,36141
"KRN",19,11260,"U")
PCMM MAIN MENU
"KRN",19,11261,-1)
0^20
"KRN",19,11261,0)
SCMC PCMM PT RPTS MENU^Patient PC Reports Menu^^M^^^^^^^^
"KRN",19,11261,10,0)
^19.01IP^7^7
"KRN",19,11261,10,1,0)
5193^DPA^1
"KRN",19,11261,10,1,"^")
SC PCMM DETAIL LIST PTS
"KRN",19,11261,10,2,0)
5192^PATA^2
"KRN",19,11261,10,2,"^")
SC PCMM PT LIST W/TEAM ASSIGN
"KRN",19,11261,10,3,0)
11227^SCHD^3
"KRN",19,11261,10,3,"^")
SCMC FLAGGED
"KRN",19,11261,10,4,0)
11193^EXTD^4
"KRN",19,11261,10,4,"^")
SCMC EXTENDED REPORT
"KRN",19,11261,10,5,0)
11194^INAC^5
"KRN",19,11261,10,5,"^")
SCMC INACTIVATED REPORT
"KRN",19,11261,10,6,0)
8934^PAD^6
"KRN",19,11261,10,6,"^")
SC PCMM HIST PAT ASSIGN DETAIL
"KRN",19,11261,10,7,0)
8933^PTAL^7
"KRN",19,11261,10,7,"^")
SC PCMM HIST PROV ASSIGN LIST
"KRN",19,11261,99)
60220,37303
"KRN",19,11261,"U")
PATIENT PC REPORTS MENU
"KRN",19,11262,-1)
0^19
"KRN",19,11262,0)
SCMC PCMM PROVIDER RPTS MENU^PROVIDER/POSITION REPORTS AND OPTIONS^^M^^^^^^^^
"KRN",19,11262,10,0)
^19.01IP^8^8
"KRN",19,11262,10,1,0)
5194^PD^2
"KRN",19,11262,10,1,"^")
SC PCMM PRACT DEMO
"KRN",19,11262,10,2,0)
9064^EP^1
"KRN",19,11262,10,2,"^")
SCMC PCMM EDIT PRACTIT #404.52
"KRN",19,11262,10,3,0)
10722^FTEE^6
"KRN",19,11262,10,3,"^")
SC PCMM DIRECT PC FTEE
"KRN",19,11262,10,4,0)
5195^PP^3
"KRN",19,11262,10,4,"^")
SC PCMM PRACT PATIENTS
"KRN",19,11262,10,5,0)
8933^PRAL^4
"KRN",19,11262,10,5,"^")
SC PCMM HIST PROV ASSIGN LIST
"KRN",19,11262,10,6,0)
11259^SI^8
"KRN",19,11262,10,6,"^")
SCMC PC STAFF AUTO INACTIVATE
"KRN",19,11262,10,7,0)
11195^SSI^7
"KRN",19,11262,10,7,"^")
SCMC PRACTITIONER FLAGGED
"KRN",19,11262,10,8,0)
8937^INCR^5
"KRN",19,11262,10,8,"^")
SC PCMM INCONSISTENCY REPORT
"KRN",19,11262,99)
60436,36749
"KRN",19,11262,"U")
PROVIDER/POSITION REPORTS AND 
"KRN",19,11263,-1)
0^23
"KRN",19,11263,0)
SCMC PCMM TEAM REPORTS MENU^TEAM REPORTS AND OPTIONS^^M^^^^^^^^
"KRN",19,11263,10,0)
^19.01IP^6^5
"KRN",19,11263,10,1,0)
5199^TML^10
"KRN",19,11263,10,1,"^")
SC PCMM LIST TEAM'S MEMBERS
"KRN",19,11263,10,2,0)
5197^SLT^30
"KRN",19,11263,10,2,"^")
SC PCMM SUM LIST OF TEAMS
"KRN",19,11263,10,3,0)
5198^TPL^20
"KRN",19,11263,10,3,"^")
SC PCMM LIST TEAM'S PATIENTS
"KRN",19,11263,10,4,0)
5196^ITP^1
"KRN",19,11263,10,4,"^")
SC PCMM IND TEAM PROFILE
"KRN",19,11263,10,6,0)
8936^TAS^90
"KRN",19,11263,10,6,"^")
SC PCMM HIST TEAM ASSIGN SUMM
"KRN",19,11263,99)
60220,37303
"KRN",19,11263,"U")
TEAM REPORTS AND OPTIONS
"KRN",19,11264,-1)
0^21
"KRN",19,11264,0)
SCMC PCMM REPORTS MENU^PATIENT REPORTS AND OPTIONS^^M^^^^^^^^
"KRN",19,11264,10,0)
^19.01IP^13^10
"KRN",19,11264,10,4,0)
5193^DPA^2
"KRN",19,11264,10,4,"^")
SC PCMM DETAIL LIST PTS
"KRN",19,11264,10,5,0)
8934^PAD^3
"KRN",19,11264,10,5,"^")
SC PCMM HIST PAT ASSIGN DETAIL
"KRN",19,11264,10,6,0)
5192^PATA^10
"KRN",19,11264,10,6,"^")
SC PCMM PT LIST W/TEAM ASSIGN
"KRN",19,11264,10,7,0)
6356^REV^60
"KRN",19,11264,10,7,"^")
SC PCMM POSITION ASSIGN REVIEW
"KRN",19,11264,10,8,0)
8932^PTAL^70
"KRN",19,11264,10,8,"^")
SC PCMM HIST PAT ASSIGN LIST
"KRN",19,11264,10,9,0)
11227^SCHD^70
"KRN",19,11264,10,9,"^")
SCMC FLAGGED
"KRN",19,11264,10,10,0)
11193^EXTD^80
"KRN",19,11264,10,10,"^")
SCMC EXTENDED REPORT
"KRN",19,11264,10,11,0)
11194^INAC^99
"KRN",19,11264,10,11,"^")
SCMC INACTIVATED REPORT
"KRN",19,11264,10,12,0)
6320^AU^1
"KRN",19,11264,10,12,"^")
SCMC PATIENT ASSIGN/UNASSIGN
"KRN",19,11264,10,13,0)
11885^EXTP
"KRN",19,11264,10,13,"^")
SCMC EXTEND A PATIENT
"KRN",19,11264,99)
60227,41342
"KRN",19,11264,"U")
PATIENT REPORTS AND OPTIONS
"KRN",19,11265,-1)
0^16
"KRN",19,11265,0)
SCMC PCMM EWL MENU^EWL Wait List (Sch/PCMM) Menu^^M^^^^^^^^
"KRN",19,11265,10,0)
^19.01IP^5^5
"KRN",19,11265,10,1,0)
10784^1^1
"KRN",19,11265,10,1,"^")
SD WAIT LIST INQUIRY
"KRN",19,11265,10,2,0)
10782^2^2
"KRN",19,11265,10,2,"^")
SD WAIT LIST ENTER/EDIT
"KRN",19,11265,10,3,0)
10783^3^3
"KRN",19,11265,10,3,"^")
SD WAIT LIST DISPOSITION ENTRY
"KRN",19,11265,10,4,0)
10785^4^4
"KRN",19,11265,10,4,"^")
SD WAIT LIST REPORTS MENU
"KRN",19,11265,10,5,0)
10788^5^5
"KRN",19,11265,10,5,"^")
SD WAIT LIST PAR ENTER/EDIT
"KRN",19,11265,99)
60226,33094
"KRN",19,11265,"U")
EWL WAIT LIST (SCH/PCMM) MENU
"KRN",19,11293,-1)
0^24
"KRN",19,11293,0)
SCMC HL7 MENU^PCMM HL7 AND MAINTENANCE MENU^^M^^^^^^^^
"KRN",19,11293,1,0)
^^1^1^3040414^
"KRN",19,11293,1,1,0)
PCMM HL7 options
"KRN",19,11293,10,0)
^19.01IP^7^6
"KRN",19,11293,10,1,0)
11166^NT^1
"KRN",19,11293,10,1,"^")
SCMC PCMM NIGHTLY TASK
"KRN",19,11293,10,2,0)
11169^AAC^2
"KRN",19,11293,10,2,"^")
SCMC RETRANSMIT
"KRN",19,11293,10,3,0)
9079^ER^10
"KRN",19,11293,10,3,"^")
SCMC PCMM TRANS ERROR REPORT
"KRN",19,11293,10,4,0)
9076^EP^4
"KRN",19,11293,10,4,"^")
SCMC PCMM TRANS ERROR PROC
"KRN",19,11293,10,5,0)
8944^GUI^20
"KRN",19,11293,10,5,"^")
SCMC PCMM GUI WORKSTATION
"KRN",19,11293,10,7,0)
9077^ECR^3
"KRN",19,11293,10,7,"^")
SCMC PCMM ERR CODE REPORT
"KRN",19,11293,99)
60220,37303
"KRN",19,11293,"U")
PCMM HL7 AND MAINTENANCE MENU
"KRN",19,11779,-1)
4^57
"KRN",19,11779,0)
SDWL TRANSFER PRINT REQUESTS
"KRN",19,11827,-1)
4^56
"KRN",19,11827,0)
SD WAIT LIST REOPEN ENTRIES
"KRN",19,11885,-1)
0^54
"KRN",19,11885,0)
SCMC EXTEND A PATIENT^Extend Patient Inactivation Date^^R^^^^^^^^
"KRN",19,11885,25)
EXTCHUI^SCMCTSK9
"KRN",19,11885,"U")
EXTEND PATIENT INACTIVATION DA
"KRN",19,11887,-1)
0^55
"KRN",19,11887,0)
SCMC TOBE INACTIVATED^Patients Flagged for Inactivation from PC Panels^^P^^^^^^^^
"KRN",19,11887,30)
SCPT(404.43,
"KRN",19,11887,60)
SCPT(404.43,
"KRN",19,11887,63)
[SCMC TOBE INACTIVATED]
"KRN",19,11887,64)
[SCMC TOBE INACTIVATED]
"KRN",19,11887,65)
T
"KRN",19,11887,66)
T+60
"KRN",19,11887,67)
Patients Flagged for Inactivation from PC Panels
"KRN",19,11887,"U")
PATIENTS FLAGGED FOR INACTIVAT
"KRN",19,12015,-1)
1^4
"KRN",19,12015,0)
SCMC PCMM INACTIVE REPORT
"KRN",101,1978,-1)
0^1
"KRN",101,1978,0)
SC PC PATIENT ASSIGN/UNASSIGN^PCMM Assign or Unassign^^A^^SC PCMM ROLL^^^^^^SCHEDULING
"KRN",101,1978,1,0)
^101.06^2^2^3050922^^
"KRN",101,1978,1,1,0)
Used to assign/unassign patient to primary care team and/or primary
"KRN",101,1978,1,2,0)
care practitioner position.
"KRN",101,1978,15)
S VALMBCK="R" D HOME^%ZIS
"KRN",101,1978,20)
D FULL^VALM1 D:$G(DFN) PAT^SCMCQK D:'$G(DFN) EN^SCMCQK
"KRN",101,1978,26)

"KRN",101,1978,99)
59701,36778
"KRN",8994,2049,-1)
0^1
"KRN",8994,2049,0)
SCMC PCMM CHECK FTEE^FTEECHK^SCMCTSK1^1^P^0
"KRN",8994,2049,1,0)
^8994.01^1^1^3030306^^^^
"KRN",8994,2049,1,1,0)
Determine if provider has exceeded 1.0 FTEE
"KRN",8994,2049,2,0)
^8994.02A^2^2
"KRN",8994,2049,2,1,0)
SCPATCH^1^60^1^1
"KRN",8994,2049,2,1,1,0)
^^1^1^2991209^
"KRN",8994,2049,2,1,1,1,0)
PatchVersion ^ ClientVersion
"KRN",8994,2049,2,2,0)
TPIEN^1^^1
"KRN",8994,2049,2,2,1,0)
^8994.021^1^1^3030306^^
"KRN",8994,2049,2,2,1,1,0)
POSITION ASSIGNMENT HISTORY IEN ^ FTEE VALUE
"KRN",8994,2049,2,"B","SCPATCH",1)

"KRN",8994,2049,2,"B","TPIEN",2)

"KRN",8994,2049,2,"PARAMSEQ",1,1)

"KRN",8994,2049,3,0)
^8994.03^1^1^3030306^^^
"KRN",8994,2049,3,1,0)
Zero if OK otherwise 1^current FTEE
"KRN",8994,2050,-1)
0^2
"KRN",8994,2050,0)
SC EXTEND BUILD LIST^EXTEND^SCMCTSK1^2^^0
"KRN",8994,2050,1,0)
^8994.01^1^1^3030808^^
"KRN",8994,2050,1,1,0)
Return list of patients by position that will be inactive in next 60 days
"KRN",8994,2050,2,0)
^8994.02A^1^1
"KRN",8994,2050,2,1,0)
TEAM^1^^1
"KRN",8994,2050,2,1,1,0)
^8994.021^1^1^3030808^^
"KRN",8994,2050,2,1,1,1,0)
Internal Team Number
"KRN",8994,2050,2,"B","TEAM",1)

"KRN",8994,2051,-1)
0^3
"KRN",8994,2051,0)
SC EXTEND FILE LIST^FILE^SCMCTSK1^1^^0
"KRN",8994,2051,1,0)
^8994.01^1^1^3051031^^^
"KRN",8994,2051,1,1,0)
File FTEE value
"KRN",8994,2051,2,0)
^8994.02A^1^1
"KRN",8994,2051,2,1,0)
DATA^2
"KRN",8994,2051,2,"B","DATA",1)

"KRN",8994,2052,-1)
0^4
"KRN",8994,2052,0)
SCMC FILE INACTIVATION END^FILEIN^SCMCTSK3^2
"KRN",8994,2052,2,0)
^8994.02A^1^1
"KRN",8994,2052,2,1,0)
LIST ATTRIBUTES^2^512^1
"KRN",8994,2052,2,"B","LIST ATTRIBUTES",1)

"KRN",8994,2053,-1)
0^6
"KRN",8994,2053,0)
SC GET ASSOCIATE CLINICS^GETASC^SCMCTSK2^2^P
"KRN",8994,2053,1,0)
^8994.01^1^1^3031117^^
"KRN",8994,2053,1,1,0)
Get list of clinics that this position is associated to.
"KRN",8994,2053,2,0)
^8994.02A^1^1
"KRN",8994,2053,2,1,0)
PARAMETER LIST^2^512^1
"KRN",8994,2053,2,"B","PARAMETER LIST",1)

"KRN",8994,2054,-1)
0^5
"KRN",8994,2054,0)
SC FILE ASSOCIATE CLINICS^SETASC^SCMCTSK7^1^P
"KRN",8994,2054,1,0)
^8994.01^1^1^3031119^^^
"KRN",8994,2054,1,1,0)
File Associate clinics to the team position
"KRN",8994,2054,2,0)
^8994.02A^1^1
"KRN",8994,2054,2,1,0)
DATA^2^512
"KRN",8994,2054,2,"B","DATA",1)

"KRN",8994,2066,-1)
0^8
"KRN",8994,2066,0)
SC POSITION RESIDENT ROLE^ROLE^SCMCWAIT^2^A^0
"KRN",8994,2066,1,0)
^8994.01^1^1^3020815^
"KRN",8994,2066,1,1,0)
Send provider entry return 1 or zero if eligible to be Primary Care
"KRN",8994,2066,2,0)
^8994.02A^1^1
"KRN",8994,2066,2,1,0)
PROV^1
"KRN",8994,2066,2,1,1,0)
^^1^1^3020815^
"KRN",8994,2066,2,1,1,1,0)
Internal file 200 provider entry
"KRN",8994,2066,2,"B","PROV",1)

"KRN",8994,2067,-1)
0^9
"KRN",8994,2067,0)
SCMC POSITION PC CHECK^POSCHK^SCMCTSK1^1^P^0
"KRN",8994,2067,1,0)
^8994.01^1^1^3030425^^^^
"KRN",8994,2067,1,1,0)
On position setup check if consistent assignment
"KRN",8994,2067,2,0)
^8994.02A^2^1
"KRN",8994,2067,2,2,0)
TPIEN^1^^1
"KRN",8994,2067,2,2,1,0)
^8994.021^1^1^3030425^^^
"KRN",8994,2067,2,2,1,1,0)
TEAM POSITION ENTRY
"KRN",8994,2067,2,"B","TPIEN",2)

"KRN",8994,2067,3,0)
^8994.03^1^1^3030306^^^
"KRN",8994,2067,3,1,0)
Zero if OK otherwise 1^current FTEE
"KRN",8994,2068,-1)
0^7
"KRN",8994,2068,0)
SC CHECK FOR ENROLLMENT^CHKENR^SCMCTSK1^2^P
"KRN",8994,2068,1,0)
^^1^1^3031203^
"KRN",8994,2068,1,1,0)
Check Whether patient is enrolled in the position associated clincs
"KRN",8994,2068,2,0)
^8994.02A^1^1
"KRN",8994,2068,2,1,0)
LIST ATTRIBUTES^2^512^1
"KRN",8994,2068,2,"B","LIST ATTRIBUTES",1)

"KRN",8994,2069,-1)
0^10
"KRN",8994,2069,0)
SCMC ROLE^ROLE^SCMCTSK2^2^P^0
"KRN",8994,2069,1,0)
^8994.01^1^1^3031205^^^^
"KRN",8994,2069,1,1,0)
Determine boxes based on Role
"KRN",8994,2069,2,0)
^8994.02A^2^2
"KRN",8994,2069,2,1,0)
SCPATCH^1^60^1^1
"KRN",8994,2069,2,1,1,0)
^^1^1^2991209^
"KRN",8994,2069,2,1,1,1,0)
PatchVersion ^ ClientVersion
"KRN",8994,2069,2,2,0)
ROLE^1^^1
"KRN",8994,2069,2,2,1,0)
^8994.021^1^1^3031205^^^
"KRN",8994,2069,2,2,1,1,0)
ROLE^TEAM POSITION
"KRN",8994,2069,2,"B","ROLE",2)

"KRN",8994,2069,2,"B","SCPATCH",1)

"KRN",8994,2069,2,"PARAMSEQ",1,1)

"KRN",8994,2069,3,0)
^8994.03^1^1^3031205^^^^
"KRN",8994,2069,3,1,0)
STANDARD POSITION PC^PRECEPTOR^PRECEPTEE
"MBREQ")
0
"ORD",2,3.6)
3.6;2;1;;BUL^XPDTA1;;BULE1^XPDIA1;;;BULDEL^XPDIA1
"ORD",2,3.6,0)
BULLETIN
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2941102
"PKG",16,22,1,"PAH",1,0)
297^3061005^45
"PKG",16,22,1,"PAH",1,1,0)
^^6^6^3061005
"PKG",16,22,1,"PAH",1,1,1,0)
This patch will enforce business rules in PCMM and inactivate patient and
"PKG",16,22,1,"PAH",1,1,2,0)
provider PCMM assignments if they are no longer active based on the
"PKG",16,22,1,"PAH",1,1,3,0)
business rules.
"PKG",16,22,1,"PAH",1,1,4,0)
 
"PKG",16,22,1,"PAH",1,1,5,0)
Please refer to the PCMM Release Notes/Installation Guide for complete 
"PKG",16,22,1,"PAH",1,1,6,0)
details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
34
"RTN","SCAPMC25")
0^10^B22389432^B21749107
"RTN","SCAPMC25",1,0)
SCAPMC25 ;ALB/REW - Team API's:MSGDTH ; may 1999
"RTN","SCAPMC25",2,0)
 ;;5.3;Scheduling;**41,177,297**;AUG 13, 1993
"RTN","SCAPMC25",3,0)
 ;;1.0
"RTN","SCAPMC25",4,0)
MSGPT(MSGTYPE,DFN,SCTEAMA,SCDATES,SCYESCL,SCLIST,SCERR) ; users getting death message
"RTN","SCAPMC25",5,0)
 ; Input:
"RTN","SCAPMC25",6,0)
 ;  MSGTYPE:
"RTN","SCAPMC25",7,0)
 ;      1 = Death Message
"RTN","SCAPMC25",8,0)
 ;      2 = Inpatient Message
"RTN","SCAPMC25",9,0)
 ;      3 = Team Message
"RTN","SCAPMC25",10,0)
 ;      4 = Consult Message
"RTN","SCAPMC25",11,0)
 ;      5 = Inactivation Message
"RTN","SCAPMC25",12,0)
 ;
"RTN","SCAPMC25",13,0)
 ;   DFN - Pointer to Patient File #2
"RTN","SCAPMC25",14,0)
 ;  SCTEAMA -array of pointers to team file 404.51
"RTN","SCAPMC25",15,0)
 ;          if none are defined - returns all teams
"RTN","SCAPMC25",16,0)
 ;          if @scteama@('exclude') is defined - exclude listed teams
"RTN","SCAPMC25",17,0)
 ;  SCDATES("BEGIN") = begin date to search (inclusive)
"RTN","SCAPMC25",18,0)
 ;                       [default: TODAY]
"RTN","SCAPMC25",19,0)
 ;         ("END")   = end date to search (inclusive)
"RTN","SCAPMC25",20,0)
 ;                       [default: TODAY]
"RTN","SCAPMC25",21,0)
 ;         ("INCL")  = 1: only use pracitioners who were on
"RTN","SCAPMC25",22,0)
 ;                       team for entire date range
"RTN","SCAPMC25",23,0)
 ;                     0: anytime in date range
"RTN","SCAPMC25",24,0)
 ;                      [default: 1] 
"RTN","SCAPMC25",25,0)
 ; SCYESCL -boolean[1-yes(default)/0-no] Include pts asc. via enrollment?
"RTN","SCAPMC25",26,0)
 ;   SCLIST - Name of output array
"RTN","SCAPMC25",27,0)
 ;  SCERR = array NAME to store error messages.
"RTN","SCAPMC25",28,0)
 ;          [ex. ^TMP("ORXX",$J
"RTN","SCAPMC25",29,0)
 ; Output:
"RTN","SCAPMC25",30,0)
 ;  SCLIST() = array of practitioners (users) - pointers to file #200
"RTN","SCAPMC25",31,0)
 ;             Format:
"RTN","SCAPMC25",32,0)
 ;               Subscript: Sequential # from 1 to n
"RTN","SCAPMC25",33,0)
 ;               Piece     Description
"RTN","SCAPMC25",34,0)
 ;                 1       IEN of NEW PERSON file entry (#200)
"RTN","SCAPMC25",35,0)
 ;                 2       .01 of file #200
"RTN","SCAPMC25",36,0)
 ;  SCERR()  = Array of DIALOG file messages(errors) .
"RTN","SCAPMC25",37,0)
 ;  @SCERR(0)= Number of error(s), UNDEFINED if no errors
"RTN","SCAPMC25",38,0)
 ;             Foramt:
"RTN","SCAPMC25",39,0)
 ;               Subscript: Sequential # from 1 to n
"RTN","SCAPMC25",40,0)
 ;               Piece     Description
"RTN","SCAPMC25",41,0)
 ;                 1       IEN of DIALOG file
"RTN","SCAPMC25",42,0)
 ;   Returned: 1 if ok, 0 if error
"RTN","SCAPMC25",43,0)
 ;
"RTN","SCAPMC25",44,0)
ST N SCOK,SCTM,SCTP,SCX,SCY,NODE,SCZ,SCTPND
"RTN","SCAPMC25",45,0)
 N SCLSEQ,SCN,SCESEQ,SCPARM,SCP,SCBEGIN,SCEND,SCINCL,SCDTS
"RTN","SCAPMC25",46,0)
 S SCOK=1
"RTN","SCAPMC25",47,0)
 ; -- initialize control variables
"RTN","SCAPMC25",48,0)
 G:'$$OKDATA MSGQ
"RTN","SCAPMC25",49,0)
 ;given patient get list of their teams
"RTN","SCAPMC25",50,0)
 S SCOK=$$TMPT^SCAPMC(DFN,SCDATES,,"^TMP(""SCMSG1"",$J)",.SCERR)
"RTN","SCAPMC25",51,0)
 G:SCOK<1 MSGQ
"RTN","SCAPMC25",52,0)
 ;validate teams
"RTN","SCAPMC25",53,0)
 F SCX=1:1 S NODE=$G(^TMP("SCMSG1",$J,SCX)) Q:'NODE  S SCTM=+NODE D:$$OKARRAY^SCAPU1(.SCTEAMA,SCTM)  Q:SCOK<1
"RTN","SCAPMC25",54,0)
 .;given teams get list of their positions
"RTN","SCAPMC25",55,0)
 .S SCZ=$$TPTM^SCAPMC(SCTM,SCDATES,,,"^TMP(""SCMSG2"",$J)",.SCERR)
"RTN","SCAPMC25",56,0)
 .Q:'SCZ
"RTN","SCAPMC25",57,0)
 .IF SCZ<0 S SCOK=-1 Q
"RTN","SCAPMC25",58,0)
 .;given list of valid positions get list of practitioners
"RTN","SCAPMC25",59,0)
 ; should position get message?
"RTN","SCAPMC25",60,0)
 ;;bp/cmf **177** begin
"RTN","SCAPMC25",61,0)
 F SCY=1:1 S SCTPND=$G(^TMP("SCMSG2",$J,SCY)) Q:'SCTPND  D
"RTN","SCAPMC25",62,0)
 .S SCTP=$P(SCTPND,U,1)
"RTN","SCAPMC25",63,0)
 .D:$$OKPOS(MSGTYPE,SCTP,DFN,SCYESCL,SCDATES,.SCERR)
"RTN","SCAPMC25",64,0)
 ..;given list of valid positions get current practitioners
"RTN","SCAPMC25",65,0)
 ..S SCOK=$$PRTP^SCAPMC(SCTP,SCDATES,.SCLIST,.SCERR)
"RTN","SCAPMC25",66,0)
 ..Q
"RTN","SCAPMC25",67,0)
 .;new code here
"RTN","SCAPMC25",68,0)
 .;if preceptor notice turned on for message type
"RTN","SCAPMC25",69,0)
 .I +$P($G(^SCTM(404.57,SCTP,2)),U,MSGTYPE+4) D
"RTN","SCAPMC25",70,0)
 ..S SCX=+$$OKPREC2^SCMCLK(SCTP,DT)
"RTN","SCAPMC25",71,0)
 ..;if preceptor duz returned, add to array
"RTN","SCAPMC25",72,0)
 ..I SCX S @SCLIST@("SCPR",SCX)=""
"RTN","SCAPMC25",73,0)
 ..Q
"RTN","SCAPMC25",74,0)
 .Q
"RTN","SCAPMC25",75,0)
 ;
"RTN","SCAPMC25",76,0)
 ;;bp/cmf **177** orig begin
"RTN","SCAPMC25",77,0)
 ;;o;;F SCY=1:1 S SCTPND=$G(^TMP("SCMSG2",$J,SCY)) Q:'SCTPND  S SCTP=$P(SCTPND,U,1) D:$$OKPOS(MSGTYPE,SCTP,DFN,SCYESCL,SCDATES,.SCERR)
"RTN","SCAPMC25",78,0)
 ;;o;;.;given list of valid positions get current practitioners
"RTN","SCAPMC25",79,0)
 ;;o;;.S SCOK=$$PRTP^SCAPMC(SCTP,SCDATES,.SCLIST,.SCERR)
"RTN","SCAPMC25",80,0)
 ;;bp/cmf **177** orig end
"RTN","SCAPMC25",81,0)
 ;;bp/cmf **177** end
"RTN","SCAPMC25",82,0)
MSGQ F SCZ="SCMSG1","SCMSG2","SCMSG3" K ^TMP(SCZ)
"RTN","SCAPMC25",83,0)
PRACQ Q $G(@SCERR@(0))<1
"RTN","SCAPMC25",84,0)
 ;
"RTN","SCAPMC25",85,0)
OKPOS(MSGTYPE,SCTP,DFN,SCYESCL,SCDATES,SCERR) ;check if message should go out to position for given pt
"RTN","SCAPMC25",86,0)
 ;needs pre-validated input
"RTN","SCAPMC25",87,0)
 ;return 1=ok,0=not ok
"RTN","SCAPMC25",88,0)
 N GETMESS,SCOK,SCX,SCTM
"RTN","SCAPMC25",89,0)
 K ^TMP("SCMSG3",$J)
"RTN","SCAPMC25",90,0)
 S SCTM=$P($G(^SCTM(404.57,SCTP,0)),U,2)
"RTN","SCAPMC25",91,0)
 S GETMESS=$P($G(^SCTM(404.57,SCTP,2)),U,MSGTYPE)
"RTN","SCAPMC25",92,0)
 S:"T"[GETMESS SCOK=1 ;if null give messages
"RTN","SCAPMC25",93,0)
 S:GETMESS="N" SCOK=0
"RTN","SCAPMC25",94,0)
 IF GETMESS="P" D
"RTN","SCAPMC25",95,0)
 .;check if pt is assigned to position
"RTN","SCAPMC25",96,0)
 .S SCX=$$TPPT^SCAPMC(DFN,SCDATES,,,,,SCYESCL,"^TMP(""SCMSG3"",$J)",.SCERR)
"RTN","SCAPMC25",97,0)
 .S SCOK=$D(^TMP("SCMSG3",$J,"SCTP",SCTM,SCTP))
"RTN","SCAPMC25",98,0)
 .S:SCX<0 SCOK="-1^Error in position-patient call"
"RTN","SCAPMC25",99,0)
 K ^TMP("SCMSG3",$J)
"RTN","SCAPMC25",100,0)
 Q SCOK
"RTN","SCAPMC25",101,0)
 ;
"RTN","SCAPMC25",102,0)
OKDATA() ;setup/check variables
"RTN","SCAPMC25",103,0)
 N SCOK
"RTN","SCAPMC25",104,0)
 S SCOK=1
"RTN","SCAPMC25",105,0)
 D INIT^SCAPMCU1(.SCOK) ; set default dates & error array (if undefined)
"RTN","SCAPMC25",106,0)
 S:'$L($G(SCYESCL)) SCYESCL=1
"RTN","SCAPMC25",107,0)
 IF '$D(^DPT(+$G(DFN),0)) D  S SCOK=0
"RTN","SCAPMC25",108,0)
 . S SCPARM("PATIENT")=$G(PATIENT,"Undefined")
"RTN","SCAPMC25",109,0)
 . D ERR^SCAPMCU1(.SCESEQ,4045101,.SCPARM,"",.SCERR)
"RTN","SCAPMC25",110,0)
 ;
"RTN","SCAPMC25",111,0)
 ; -- is it a valid DFN passed (Error # 20001 in DIALOG file)
"RTN","SCAPMC25",112,0)
 IF '$D(^DPT(+DFN,0)) D   S SCOK=0
"RTN","SCAPMC25",113,0)
 . S SCPARM("PATIENT")=DFN
"RTN","SCAPMC25",114,0)
 . D ERR^SCAPMCU1(SCESEQ,20001,.SCPARM,"",.SCERR)
"RTN","SCAPMC25",115,0)
 Q SCOK
"RTN","SCAPMC25",116,0)
 ;
"RTN","SCAPMC25",117,0)
PCMMXMY(MSGTYPE,DFN,SCTEAMA,SCDATES,SCYESCL) ;create xmy array for the appropriate type of pcmm mess
"RTN","SCAPMC25",118,0)
 ; return 1 if success,0 if error or no users receiving message
"RTN","SCAPMC25",119,0)
 N SCOK,SCGROUP,SC200,SCGROUP
"RTN","SCAPMC25",120,0)
 IF '$G(MSGTYPE) S SCOK=0 G QTXMY
"RTN","SCAPMC25",121,0)
 S SCOK=1
"RTN","SCAPMC25",122,0)
 S SCOK=$$MSGPT(MSGTYPE,.DFN,.SCTEAMA,.SCDATES,.SCYESCL,"^TMP(""SC PCMM MAIL"",$J)")
"RTN","SCAPMC25",123,0)
 S SC200=0
"RTN","SCAPMC25",124,0)
 F  S SC200=$O(^TMP("SC PCMM MAIL",$J,"SCPR",SC200)) Q:'SC200  S XMY(SC200)=""
"RTN","SCAPMC25",125,0)
 IF $D(XMY) D
"RTN","SCAPMC25",126,0)
 .S XMY(.5)=""
"RTN","SCAPMC25",127,0)
 ELSE  D
"RTN","SCAPMC25",128,0)
 .S SCOK=0
"RTN","SCAPMC25",129,0)
 .S XMY(.5)=""
"RTN","SCAPMC25",130,0)
 K ^TMP("SC PCMM MAIL",$J)
"RTN","SCAPMC25",131,0)
QTXMY Q SCOK
"RTN","SCAPMC25",132,0)
 ;
"RTN","SCAPMC25",133,0)
MSGTEXT(MSGTYPE) ;
"RTN","SCAPMC25",134,0)
 Q $S(MSGTYPE=1:"DEATH",(MSGTYPE=2):"INPATIENT",(MSGTYPE=3):"TEAM",(MSGTYPE=4):"CONSULT",(MSGTYPE=5):"INACTIVATION",1:"ERROR")
"RTN","SCAPMC3")
0^7^B10524382^B10524382
"RTN","SCAPMC3",1,0)
SCAPMC3 ;ALB/REW - Team API's:TMPT ; 6/3/99 3:18pm
"RTN","SCAPMC3",2,0)
 ;;5.3;Scheduling;**41,177,297**;AUG 13, 1993
"RTN","SCAPMC3",3,0)
 ;;1.0
"RTN","SCAPMC3",4,0)
TMPT(DFN,SCDATES,SCPURPA,SCLIST,SCERR) ; -- list of teams for a patient
"RTN","SCAPMC3",5,0)
 ; input:
"RTN","SCAPMC3",6,0)
 ;  DFN = ien of PATIENT file [required]
"RTN","SCAPMC3",7,0)
 ;  SCDATES("BEGIN") = begin date to search (inclusive)
"RTN","SCAPMC3",8,0)
 ;                      [default: TODAY]
"RTN","SCAPMC3",9,0)
 ;        ("END")   = end date to search (inclusive)
"RTN","SCAPMC3",10,0)
 ;                      [default: TODAY]
"RTN","SCAPMC3",11,0)
 ;        ("INCL")  = 1: only use patients who were assigned to
"RTN","SCAPMC3",12,0)
 ;                       team for entire date range
"RTN","SCAPMC3",13,0)
 ;                    0: anytime in date range
"RTN","SCAPMC3",14,0)
 ;                      [default: 1] 
"RTN","SCAPMC3",15,0)
 ;  SCPURPA -array of pointers to team purpose file 403.47
"RTN","SCAPMC3",16,0)
 ;          if none are defined - returns all teams
"RTN","SCAPMC3",17,0)
 ;          if @SCPURPA@('exclude') is defined - exclude listed teams
"RTN","SCAPMC3",18,0)
 ;  SCLIST -array name to store list
"RTN","SCAPMC3",19,0)
 ;          [ex. ^TMP("SCPT",$J)]
"RTN","SCAPMC3",20,0)
 ;        
"RTN","SCAPMC3",21,0)
 ;  SCERR = array NAME to store error messages.
"RTN","SCAPMC3",22,0)
 ;          [ex. ^TMP("ORXX",$J)]
"RTN","SCAPMC3",23,0)
 ;
"RTN","SCAPMC3",24,0)
 ; Output:
"RTN","SCAPMC3",25,0)
 ;  SCLIST() = array of teams (includes SCTM xref)
"RTN","SCAPMC3",26,0)
 ;             Format:
"RTN","SCAPMC3",27,0)
 ;               Subscript: Sequential # from 1 to n
"RTN","SCAPMC3",28,0)
 ;               Piece     Description
"RTN","SCAPMC3",29,0)
 ;                 1       IEN of TEAM file entry
"RTN","SCAPMC3",30,0)
 ;                 2       Name of team
"RTN","SCAPMC3",31,0)
 ;                 3       IEN of file #404.42 (Pt Tm Assignment)
"RTN","SCAPMC3",32,0)
 ;                 4       current effective date
"RTN","SCAPMC3",33,0)
 ;                 5       current inactivate date (if any)
"RTN","SCAPMC3",34,0)
 ;                 6       pointer to 403.47 (purpose)
"RTN","SCAPMC3",35,0)
 ;                 7       Name of Purpose
"RTN","SCAPMC3",36,0)
 ;                 8       Is this the pt's PC Team?
"RTN","SCAPMC3",37,0)
 ;                Subscript: "SCTM",SCTM,IEN =""
"RTN","SCAPMC3",38,0)
 ;
"RTN","SCAPMC3",39,0)
 ;  SCERR() = Array of DIALOG file messages(errors) .
"RTN","SCAPMC3",40,0)
 ;  @SCERR@(0) = number of errors, undefined if none
"RTN","SCAPMC3",41,0)
 ;             Format:
"RTN","SCAPMC3",42,0)
 ;               Subscript: Sequential # from 1 to n
"RTN","SCAPMC3",43,0)
 ;               Piece     Description
"RTN","SCAPMC3",44,0)
 ;                 1       IEN of DIALOG file
"RTN","SCAPMC3",45,0)
 ;  Returned: 1 if ok, 0 if error
"RTN","SCAPMC3",46,0)
 ;
"RTN","SCAPMC3",47,0)
 ;
"RTN","SCAPMC3",48,0)
 ;
"RTN","SCAPMC3",49,0)
ST N SCTM,SCPTA,SCPTA0,SCP,SCTMPT
"RTN","SCAPMC3",50,0)
 N SCLSEQ,SCN,SCESEQ,SCPARM,SCP,SCBEGIN,SCEND,SCINCL,SCDTS
"RTN","SCAPMC3",51,0)
 ; -- initialize control variables
"RTN","SCAPMC3",52,0)
 G:'$$OKDATA PRACQ
"RTN","SCAPMC3",53,0)
 ; -- loop through patient team assignments
"RTN","SCAPMC3",54,0)
 S SCTM=0
"RTN","SCAPMC3",55,0)
 F  S SCTM=$O(^SCPT(404.42,"APTTM",DFN,SCTM)) Q:'SCTM  D
"RTN","SCAPMC3",56,0)
 .Q:1>$$ACTHIST^SCAPMCU2(404.58,SCTM,SCDATES,.SCERR,"SCTMPT")
"RTN","SCAPMC3",57,0)
 .S SCP=$P(^SCTM(404.51,SCTM,0),U,3)
"RTN","SCAPMC3",58,0)
 .Q:'$$OKARRAY^SCAPU1(SCPURPA,SCP)
"RTN","SCAPMC3",59,0)
 .S SCPTA=0
"RTN","SCAPMC3",60,0)
 .F  S SCPTA=$O(^SCPT(404.42,"APTTM",DFN,SCTM,SCPTA)) Q:'SCPTA  D
"RTN","SCAPMC3",61,0)
 ..S SCPTA0=$G(^SCPT(404.42,SCPTA,0))
"RTN","SCAPMC3",62,0)
 ..Q:'SCPTA0
"RTN","SCAPMC3",63,0)
 ..Q:'$$DTCHK^SCAPU1(SCBEGIN,SCEND,SCINCL,$P(SCPTA0,U,2),$P(SCPTA0,U,9))
"RTN","SCAPMC3",64,0)
 ..D BLD(.SCLIST,SCPTA,SCPTA0)
"RTN","SCAPMC3",65,0)
PRACQ Q $G(@SCERR@(0))<1
"RTN","SCAPMC3",66,0)
 ;
"RTN","SCAPMC3",67,0)
 ;
"RTN","SCAPMC3",68,0)
BLD(SCLIST,SCPTA,SCPTA0) ; -- build list of patient's teams
"RTN","SCAPMC3",69,0)
 ;
"RTN","SCAPMC3",70,0)
 ; SCLIST  - output array
"RTN","SCAPMC3",71,0)
 ; SCPTA   - ien of pt team assignment
"RTN","SCAPMC3",72,0)
 ; SCPTA0  - 0 node of pt team assignment file
"RTN","SCAPMC3",73,0)
 ; 
"RTN","SCAPMC3",74,0)
 ; this builds the array:
"RTN","SCAPMC3",75,0)
 ;                 1      2      3     4     5        6        7      8 
"RTN","SCAPMC3",76,0)
 ;   sclist(1->n)=sctm^tmname^scpta^effdt^inactdt^p403.47^purpname^pctm?
"RTN","SCAPMC3",77,0)
 ;  
"RTN","SCAPMC3",78,0)
 ;    for each scpta zero node passed to it
"RTN","SCAPMC3",79,0)
 ;    AND a xref  sclist('sctm',sctm,scpta,scn)=""
"RTN","SCAPMC3",80,0)
 N SCEFFDT,SCCNT,SCTM,SCN,SCTMNODE,SCP,SCPC
"RTN","SCAPMC3",81,0)
 S SCTM=$P(SCPTA0,U,3)
"RTN","SCAPMC3",82,0)
 Q:$D(@SCLIST@("SCTM",SCTM,SCPTA))
"RTN","SCAPMC3",83,0)
 S SCN=$G(@SCLIST@(0),0)+1
"RTN","SCAPMC3",84,0)
 S @SCLIST@(0)=SCN
"RTN","SCAPMC3",85,0)
 S SCTMNODE=$G(^SCTM(404.51,SCTM,0)),SCP=$P(SCTMNODE,U,3)
"RTN","SCAPMC3",86,0)
 ;is assignment type=1?
"RTN","SCAPMC3",87,0)
 S SCPC=$P(SCPTA0,U,8)=1
"RTN","SCAPMC3",88,0)
 S @SCLIST@(SCN)=SCTM_U_$P(SCTMNODE,U,1)_U_SCPTA_U_$P(SCPTA0,U,2)_U_$P(SCPTA0,U,9)_U_SCP_U_$S(SCP:$P($G(^SC(403.47,SCP,0)),U,1),1:SCP)_U_SCPC
"RTN","SCAPMC3",89,0)
 S @SCLIST@("SCTM",SCTM,SCPTA,SCN)=""
"RTN","SCAPMC3",90,0)
 Q
"RTN","SCAPMC3",91,0)
OKDATA() ;setup/check variables
"RTN","SCAPMC3",92,0)
 N SCOK
"RTN","SCAPMC3",93,0)
 S SCOK=1
"RTN","SCAPMC3",94,0)
 S SCPURPA=$G(SCPURPA,"")
"RTN","SCAPMC3",95,0)
 D INIT^SCAPMCU1(.SCOK) ; set default dates & error array (if undefined)
"RTN","SCAPMC3",96,0)
 IF $L($G(SCPURPA))&($G(SCPURPA)'?1A1.7AN) D  S SCOK=0
"RTN","SCAPMC3",97,0)
 . S SCPARM("PURPOSE")=$G(SCPURPA,"Undefined")
"RTN","SCAPMC3",98,0)
 . D ERR^SCAPMCU1(.SCESEQ,4045101,.SCPARM,"",.SCERR)
"RTN","SCAPMC3",99,0)
 IF '$D(^DPT(+$G(DFN),0)) D  S SCOK=0
"RTN","SCAPMC3",100,0)
 . S SCPARM("PATIENT")=$G(PATIENT,"Undefined")
"RTN","SCAPMC3",101,0)
 . D ERR^SCAPMCU1(.SCESEQ,4045101,.SCPARM,"",.SCERR)
"RTN","SCAPMC3",102,0)
 ; -- is it a valid DFN passed (Error # 20001 in DIALOG file)
"RTN","SCAPMC3",103,0)
 IF '$D(^DPT(+DFN,0)) D   S SCOK=0
"RTN","SCAPMC3",104,0)
 . S SCPARM("PATIENT")=DFN
"RTN","SCAPMC3",105,0)
 . D ERR^SCAPMCU1(SCESEQ,20001,.SCPARM,"",.SCERR)
"RTN","SCAPMC3",106,0)
 Q SCOK
"RTN","SCAPMC3",107,0)
 ;
"RTN","SCMCBK1")
0^12^B72880659^B71079112
"RTN","SCMCBK1",1,0)
SCMCBK1 ;LB/SCK - Broker Utilities for multiple patient assignments;
"RTN","SCMCBK1",2,0)
 ;;5.3;Scheduling;**41,51,210,297**;AUG 13, 1993
"RTN","SCMCBK1",3,0)
 ;;1T1;;
"RTN","SCMCBK1",4,0)
 Q
"RTN","SCMCBK1",5,0)
 ;
"RTN","SCMCBK1",6,0)
PARSE(SC) ;
"RTN","SCMCBK1",7,0)
 S SCTEAM=$G(SC("TEAM"),"")
"RTN","SCMCBK1",8,0)
 S SCPOS=$G(SC("POSITION"),"")
"RTN","SCMCBK1",9,0)
 S SCDTVAR=$G(SC("DATE"),DT)
"RTN","SCMCBK1",10,0)
 S SCDTRNG("BEGIN")=$G(SC("BEGIN"),DT)
"RTN","SCMCBK1",11,0)
 S SCDTRNG("END")=$G(SC("END"),DT)
"RTN","SCMCBK1",12,0)
 S SCDTRNG("INCL")=$G(SC("INCL"),0)
"RTN","SCMCBK1",13,0)
 S SCJOB=$G(SC("JOB"),"")
"RTN","SCMCBK1",14,0)
 S SCSTART=$G(SC("BSTART"),0)
"RTN","SCMCBK1",15,0)
 S SCEND=$G(SC("BEND"),0)
"RTN","SCMCBK1",16,0)
 S SCLAST=$G(SC("BLAST"),0)
"RTN","SCMCBK1",17,0)
 S SCFILE=$G(SC("FILE"),"")
"RTN","SCMCBK1",18,0)
 S SCJOBID=$G(SC("JOBID"),"")
"RTN","SCMCBK1",19,0)
 S SCNUM=$G(SC("MAX"),300)
"RTN","SCMCBK1",20,0)
 S SCCLN=$G(SC("CLINIC"),"")
"RTN","SCMCBK1",21,0)
 S SCSCDE=$G(SC("STOPCODE"),"")
"RTN","SCMCBK1",22,0)
 S SCFRMTM=$G(SC("FROMTEAM"),"")
"RTN","SCMCBK1",23,0)
 S SCFRMPOS=$G(SC("FROMPOS"),"")
"RTN","SCMCBK1",24,0)
 S SCDFN=$G(SC("DFN"),"")
"RTN","SCMCBK1",25,0)
 S SCMORE=$G(SC("MORE"),"")
"RTN","SCMCBK1",26,0)
 Q
"RTN","SCMCBK1",27,0)
 ;
"RTN","SCMCBK1",28,0)
NEWVAR ;
"RTN","SCMCBK1",29,0)
 ;bp/cmf 210t0 begin
"RTN","SCMCBK1",30,0)
 D CLRVAR Q
"RTN","SCMCBK1",31,0)
 ;bp/cmf 210t0 end
"RTN","SCMCBK1",32,0)
 N SCCLN,SCSCDE,SCTEAM,SCDTRNG,SCLOC,SCERMSG,SCNUM,SCCOUNT,SCMORE,SCOK1,SCER2,SCOUT,BLOCK,SCBLOCK,SCFRMTM,SCFRMPOS,SCSRCE,SCSRCTYP
"RTN","SCMCBK1",33,0)
 N SCADDFLD,SCNEW,SCOLD,SCBAD,SUBRTN,SCX,SCTMP
"RTN","SCMCBK1",34,0)
 ;
"RTN","SCMCBK1",35,0)
 K ^TMP($J,"SC PCMM IN")
"RTN","SCMCBK1",36,0)
 K ^TMP($J,"PCMM TMP")
"RTN","SCMCBK1",37,0)
 K ^TMP("SC TMP LIST",$J)
"RTN","SCMCBK1",38,0)
 K ^TMP($J,"SC PATIENT LIST")
"RTN","SCMCBK1",39,0)
 ;
"RTN","SCMCBK1",40,0)
 Q
"RTN","SCMCBK1",41,0)
 ;
"RTN","SCMCBK1",42,0)
CLRVAR ;  Clear all parsing variables        
"RTN","SCMCBK1",43,0)
 ;
"RTN","SCMCBK1",44,0)
 K SCNUM,SCSCDE,SCCLN,SCJOBID,SCFILE,SCLAST,SCEND,SCSTART,SCJOB,SCDTRNG
"RTN","SCMCBK1",45,0)
 K SCDTVAR,SCPOS,SCTEAM,SCFRMTM,SCFRMPOS,SCDFN,BLOCK,SCBLOCK,SCX,SUBRTN
"RTN","SCMCBK1",46,0)
 K SCTMP,SCBAD,SCOLD,SCNEW,SCLOC,SCERMSG,SCCOUNT,SCMORE,SCOK1
"RTN","SCMCBK1",47,0)
 K SCER2,SCOUT,SCSRCE,SCSRCTYP,SCADDFLD
"RTN","SCMCBK1",48,0)
 ;
"RTN","SCMCBK1",49,0)
 K ^TMP($J,"SC PCMM IN")
"RTN","SCMCBK1",50,0)
 K ^TMP($J,"PCMM TMP")
"RTN","SCMCBK1",51,0)
 K ^TMP("SC TMP LIST",$J)
"RTN","SCMCBK1",52,0)
 K ^TMP($J,"SC PATIENT LIST")
"RTN","SCMCBK1",53,0)
 Q
"RTN","SCMCBK1",54,0)
 ;
"RTN","SCMCBK1",55,0)
PTCLEN(SCOK,SC) ;  Enroll patient in associated clinic for a position
"RTN","SCMCBK1",56,0)
 ;       ' SC PAT ENROLL CLN '
"RTN","SCMCBK1",57,0)
 ;
"RTN","SCMCBK1",58,0)
 N SCCLN,SCDFN,SCDTVAR,SCERMSG,SCADDFLD
"RTN","SCMCBK1",59,0)
 ;
"RTN","SCMCBK1",60,0)
 D CHK^SCUTBK
"RTN","SCMCBK1",61,0)
 D TMP^SCUTBK
"RTN","SCMCBK1",62,0)
 ;
"RTN","SCMCBK1",63,0)
 D PARSE(.SC)
"RTN","SCMCBK1",64,0)
 S SCADDFLD(1)=$G(SC("ADD1"),"O")
"RTN","SCMCBK1",65,0)
 S SCOK=0
"RTN","SCMCBK1",66,0)
 ;
"RTN","SCMCBK1",67,0)
 ;Enroll Patient in all associated clincs not entrolled in
"RTN","SCMCBK1",68,0)
 F SCCLN=0:0 S SCCLN=$O(^SCTM(404.57,SCPOS,5,SCCLN)) Q:'SCCLN  D
"RTN","SCMCBK1",69,0)
 .I $D(^DPT(SCDFN,"DE","B",SCCLN)) Q
"RTN","SCMCBK1",70,0)
 .S SCOK=$$ACPTCL^SCAPMC18(SCDFN,SCCLN,"SCADDFLD",SCDTVAR,"SCERMSG")
"RTN","SCMCBK1",71,0)
 ;
"RTN","SCMCBK1",72,0)
 D CLRVAR
"RTN","SCMCBK1",73,0)
 Q
"RTN","SCMCBK1",74,0)
 ;
"RTN","SCMCBK1",75,0)
CHKPOS(SCOK,SC) ;  Check for primary care pratitioner and attending positions for patient
"RTN","SCMCBK1",76,0)
 ;    ' SC CHECK FOR PC POS '
"RTN","SCMCBK1",77,0)
 ;  Piece 1 of SCOK = 1 if ok for practitioner role
"RTN","SCMCBK1",78,0)
 ;                    0 if not ok
"RTN","SCMCBK1",79,0)
 ;  Piece 2 of SCOK = 1 if ok for ateending role
"RTN","SCMCBK1",80,0)
 ;                    0 if not ok
"RTN","SCMCBK1",81,0)
 ;
"RTN","SCMCBK1",82,0)
 N SCPOS,SCDTVAR,SCDFN
"RTN","SCMCBK1",83,0)
 ;
"RTN","SCMCBK1",84,0)
 D CHK^SCUTBK
"RTN","SCMCBK1",85,0)
 D TMP^SCUTBK
"RTN","SCMCBK1",86,0)
 ;
"RTN","SCMCBK1",87,0)
 D PARSE(.SC)
"RTN","SCMCBK1",88,0)
 ;
"RTN","SCMCBK1",89,0)
 S SCOK=$$PCRLPTTP^SCMCTPU2(SCDFN,SCPOS,SCDTVAR)
"RTN","SCMCBK1",90,0)
 ;
"RTN","SCMCBK1",91,0)
 D CLRVAR
"RTN","SCMCBK1",92,0)
 Q
"RTN","SCMCBK1",93,0)
 ;
"RTN","SCMCBK1",94,0)
NOPCTM(SCOK,SC) ;  Build list of patients with a primary care assignment, but no primary care team;
"RTN","SCMCBK1",95,0)
 ;    ' SC BLD NOPC TM LIST '
"RTN","SCMCBK1",96,0)
 ;
"RTN","SCMCBK1",97,0)
 N I1
"RTN","SCMCBK1",98,0)
 D NEWVAR
"RTN","SCMCBK1",99,0)
 ;
"RTN","SCMCBK1",100,0)
 D CHK^SCUTBK
"RTN","SCMCBK1",101,0)
 D TMP^SCUTBK
"RTN","SCMCBK1",102,0)
 ;
"RTN","SCMCBK1",103,0)
 D PARSE(.SC)
"RTN","SCMCBK1",104,0)
 ;
"RTN","SCMCBK1",105,0)
 K ^TMP($J,"SCPCNO")
"RTN","SCMCBK1",106,0)
 ;  Build exclude list
"RTN","SCMCBK1",107,0)
 S BLOCK=$S(SCPOS'="":"BLKPOS^SCMCBK",1:"BLKTM^SCMCBK")
"RTN","SCMCBK1",108,0)
 S SCBLOCK=$S(SCPOS'="":SCPOS,1:SCTEAM)
"RTN","SCMCBK1",109,0)
 D @BLOCK
"RTN","SCMCBK1",110,0)
 ;
"RTN","SCMCBK1",111,0)
 S SCOK=0
"RTN","SCMCBK1",112,0)
 ;
"RTN","SCMCBK1",113,0)
 S SCLOC="^TMP($J,""SC PCMM IN"")"
"RTN","SCMCBK1",114,0)
 D PTPCNOTM^SCAPMC20(.SCLOC,SCDTVAR)
"RTN","SCMCBK1",115,0)
 K ^TMP("SCMC",$J,"EXCLUDE PT")
"RTN","SCMCBK1",116,0)
 ;
"RTN","SCMCBK1",117,0)
 S I=""
"RTN","SCMCBK1",118,0)
 F  S I=$O(^TMP($J,"SC PCMM IN",I)) Q:'I  D
"RTN","SCMCBK1",119,0)
 . S ^TMP($J,"PCMM TMP",I)=^TMP($J,"SC PCMM IN",I)
"RTN","SCMCBK1",120,0)
 ;
"RTN","SCMCBK1",121,0)
 D ALPHA^SCAPMCU2("^TMP($J,""PCMM TMP"")","^TMP($J,""SCPCNO"")")
"RTN","SCMCBK1",122,0)
 S I1="" F  S I1=$O(^TMP($J,"SCPCNO",I1)) Q:'I1  S I=I1
"RTN","SCMCBK1",123,0)
 ;
"RTN","SCMCBK1",124,0)
 S SCOK=$J_U_+I_U_1
"RTN","SCMCBK1",125,0)
 ;
"RTN","SCMCBK1",126,0)
 D CLRVAR
"RTN","SCMCBK1",127,0)
 Q
"RTN","SCMCBK1",128,0)
 ;
"RTN","SCMCBK1",129,0)
ASGNALL(SCOK,SC) ;  Assign all entries for the selection source to the appropriate team.
"RTN","SCMCBK1",130,0)
 ;    '  SC FILE ALL PAT TM ASGN  '
"RTN","SCMCBK1",131,0)
 ;
"RTN","SCMCBK1",132,0)
 D NEWVAR
"RTN","SCMCBK1",133,0)
 ;
"RTN","SCMCBK1",134,0)
 D CHK^SCUTBK
"RTN","SCMCBK1",135,0)
 D TMP^SCUTBK
"RTN","SCMCBK1",136,0)
 ;
"RTN","SCMCBK1",137,0)
 D PARSE(.SC)
"RTN","SCMCBK1",138,0)
 S SCSRCE=$G(SC("SOURCE"),"")
"RTN","SCMCBK1",139,0)
 S SCADDFLD(.08)=$G(SC("TYPE"),99)
"RTN","SCMCBK1",140,0)
 S SCADDFLD(.1)=$G(SC("RESTRICT"),0)
"RTN","SCMCBK1",141,0)
 S SCADDFLD(.11)=DUZ
"RTN","SCMCBK1",142,0)
 S SCADDFLD(.12)=DT
"RTN","SCMCBK1",143,0)
 ;
"RTN","SCMCBK1",144,0)
 S DTMP=$G(SCDTRNG("END"))
"RTN","SCMCBK1",145,0)
 S SCDTTRNG("END")=3990101
"RTN","SCMCBK1",146,0)
 S SCOK2=$$PTTM^SCAPMC(SCTEAM,"SCDTRNG","^TMP(""SCMC"",$J,""EXCLUDE PT"")","SCER2")
"RTN","SCMCBK1",147,0)
 S SCDTRNG("END")=DTMP
"RTN","SCMCBK1",148,0)
 ;
"RTN","SCMCBK1",149,0)
 S SCSRCTYP=$P(SCSRCE,U,1)
"RTN","SCMCBK1",150,0)
 D @SCSRCTYP
"RTN","SCMCBK1",151,0)
 ;
"RTN","SCMCBK1",152,0)
 K SCBAD,SCOLD,SCNEW
"RTN","SCMCBK1",153,0)
 S SCX=$$ACPTATM^SCAPMC6("^TMP($J,""SC PATIENT LIST"")",SCTEAM,"SCADDFLD",SCDTVAR,"SCERMSG","SCNEW","SCOLD","SCBAD")
"RTN","SCMCBK1",154,0)
 ;
"RTN","SCMCBK1",155,0)
 K ^TMP("SCMC",$J,"EXCLUDE PT")
"RTN","SCMCBK1",156,0)
 D BAD(.SCBAD,.SCOLD,.SCOK)
"RTN","SCMCBK1",157,0)
 S SCOK(.1)=SCX
"RTN","SCMCBK1",158,0)
 ;
"RTN","SCMCBK1",159,0)
 D CLRVAR
"RTN","SCMCBK1",160,0)
 Q
"RTN","SCMCBK1",161,0)
 ;
"RTN","SCMCBK1",162,0)
CLN ;    File all patients in selected clinic.
"RTN","SCMCBK1",163,0)
 ;
"RTN","SCMCBK1",164,0)
 S SCOK1=$$PTCLBR^SCAPMC26($P($G(SCSRCE),U,2),.SCTEAM,"SCDTRNG")
"RTN","SCMCBK1",165,0)
 S I=0 F  S I=$O(^TMP($J,"SCCLPT",I)) Q:'I  D
"RTN","SCMCBK1",166,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"SCCLPT",I)),U))=""
"RTN","SCMCBK1",167,0)
 K ^TMP($J,"SCCLPT")
"RTN","SCMCBK1",168,0)
 Q
"RTN","SCMCBK1",169,0)
 ;
"RTN","SCMCBK1",170,0)
STOPC ;   File all patients in the selected stop code
"RTN","SCMCBK1",171,0)
 ;
"RTN","SCMCBK1",172,0)
 S SCOK1=$$PTST^SCAPMC27($P($G(SCSRCE),U,2),"SCDTRNG",SCNUM,.SCTMP,"ERRMSG",0)
"RTN","SCMCBK1",173,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",174,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",175,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",176,0)
 Q
"RTN","SCMCBK1",177,0)
 ;
"RTN","SCMCBK1",178,0)
APPT ;   File all patients for the selected clinic appointment range
"RTN","SCMCBK1",179,0)
 S SCOK1=$$PTAP^SCAPMC28($P($G(SCSRCE),U,2),"SCDTRNG",SCNUM,.SCTMP,"SCERMSG",0)
"RTN","SCMCBK1",180,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",181,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",182,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",183,0)
 Q
"RTN","SCMCBK1",184,0)
 ;
"RTN","SCMCBK1",185,0)
TEAM ;  File all patients for the selected team
"RTN","SCMCBK1",186,0)
 S SCOK1=$$PTTM^SCAPMC2($P($G(SCSRCE),U,2),"SCDTRNG",.SCTMP,"SCERMSG")
"RTN","SCMCBK1",187,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",188,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",189,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",190,0)
 Q
"RTN","SCMCBK1",191,0)
 ;
"RTN","SCMCBK1",192,0)
ASGALLP(SCOK,SC) ;  Assign all entries in the selected source to the selected team and position
"RTN","SCMCBK1",193,0)
 ;
"RTN","SCMCBK1",194,0)
 N DTMP
"RTN","SCMCBK1",195,0)
 D NEWVAR
"RTN","SCMCBK1",196,0)
 D CHK^SCUTBK
"RTN","SCMCBK1",197,0)
 D TMP^SCUTBK
"RTN","SCMCBK1",198,0)
 ;
"RTN","SCMCBK1",199,0)
 D PARSE(.SC)
"RTN","SCMCBK1",200,0)
 S SCSRCE=$G(SC("SOURCE"),"")
"RTN","SCMCBK1",201,0)
 S SCADDFLD(.05)=$G(SC("TYPE"),0)
"RTN","SCMCBK1",202,0)
 S SCADDFLD(.06)=DUZ
"RTN","SCMCBK1",203,0)
 S SCADDFLD(.07)=DT
"RTN","SCMCBK1",204,0)
 ;
"RTN","SCMCBK1",205,0)
 S DTMP=$G(SCDTRNG("END"))
"RTN","SCMCBK1",206,0)
 S SCDTRNG("END")=3990101
"RTN","SCMCBK1",207,0)
 S SCOK2=$$PTTP^SCAPMC(SCPOS,"SCDTRNG","^TMP(""SCMC"",$J,""EXCLUDE PT"")","SCER2")
"RTN","SCMCBK1",208,0)
 S SCDTRNG("END")=DTMP
"RTN","SCMCBK1",209,0)
 ;
"RTN","SCMCBK1",210,0)
 S SCSRCTYP=$P(SCSRCE,U,1)
"RTN","SCMCBK1",211,0)
 D @SCSRCTYP
"RTN","SCMCBK1",212,0)
 ;
"RTN","SCMCBK1",213,0)
 K SCBAD,SCOLD,SCNEW
"RTN","SCMCBK1",214,0)
 S SCX=$$ACPTATP^SCAPMC21("^TMP($J,""SC PATIENT LIST"")",SCPOS,"SCADDFLD",SCDTVAR,"SCERRMSG",1,"","SCNEW","SCNEW1","SCOLD","SCBAD")
"RTN","SCMCBK1",215,0)
 ;
"RTN","SCMCBK1",216,0)
 K ^TMP("SCMC",$J,"EXCLUDE PT")
"RTN","SCMCBK1",217,0)
 D BAD2(.SCBAD,.SCOLD,.SCOK)
"RTN","SCMCBK1",218,0)
 S SCOK(.1)=SCX
"RTN","SCMCBK1",219,0)
 ;
"RTN","SCMCBK1",220,0)
 D CLRVAR
"RTN","SCMCBK1",221,0)
 Q
"RTN","SCMCBK1",222,0)
 ;
"RTN","SCMCBK1",223,0)
PCLN ;  File all patients in selected clinic to the new position and team
"RTN","SCMCBK1",224,0)
 ;
"RTN","SCMCBK1",225,0)
 S SCOK1=$$PTCLBR^SCAPMC26($P($G(SCSRCE),U,2),.SCTEAM,"SCDTRNG")
"RTN","SCMCBK1",226,0)
 S I=0 F  S I=$O(^TMP($J,"SCCLPT",I)) Q:'I  D
"RTN","SCMCBK1",227,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"SCCLPT",I)),U))=""
"RTN","SCMCBK1",228,0)
 ;
"RTN","SCMCBK1",229,0)
 Q
"RTN","SCMCBK1",230,0)
 ;
"RTN","SCMCBK1",231,0)
PSTOPC ;  File all patients in with the selected stop code to the new position and team
"RTN","SCMCBK1",232,0)
 ;
"RTN","SCMCBK1",233,0)
 S SCOK1=$$PTST^SCAPMC27($P($G(SCSRCE),U,2),"SCDTRNG",500,.SCTMP,"SCERMSG",0)
"RTN","SCMCBK1",234,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",235,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",236,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",237,0)
 Q
"RTN","SCMCBK1",238,0)
 ;
"RTN","SCMCBK1",239,0)
PAPPT ;
"RTN","SCMCBK1",240,0)
 S SCOK1=$$PTAP^SCAPMC28($P($G(SCSRCE),U,2),"SCDTRNG",500,.SCTMP,"SCERMSG",0)
"RTN","SCMCBK1",241,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",242,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",243,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",244,0)
 Q
"RTN","SCMCBK1",245,0)
 ;
"RTN","SCMCBK1",246,0)
PTEAM ;
"RTN","SCMCBK1",247,0)
 S SCOK1=$$PTTM^SCAPMC2($P($G(SCSRCE),U,2),"SCDTRNG",.SCTMP,"SCERMSG")
"RTN","SCMCBK1",248,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",249,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",250,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",251,0)
 Q
"RTN","SCMCBK1",252,0)
 ;
"RTN","SCMCBK1",253,0)
PPOS ;
"RTN","SCMCBK1",254,0)
 S SCOK1=$$PTTP^SCAPMC11($P($G(SCSRCE),U,2),"SCDTRNG",.SCTMP,"SCERMSG")
"RTN","SCMCBK1",255,0)
 M ^TMP($J,"PCMM TMP")=@SCTMP
"RTN","SCMCBK1",256,0)
 S I=0 F  S I=$O(^TMP($J,"PCMM TMP",I)) Q:'I  D
"RTN","SCMCBK1",257,0)
 . S ^TMP($J,"SC PATIENT LIST",$P($G(^TMP($J,"PCMM TMP",I)),U))=""
"RTN","SCMCBK1",258,0)
 Q
"RTN","SCMCBK1",259,0)
 ;
"RTN","SCMCBK1",260,0)
BAD(SCBAD,SCOLD,SCOK) ;
"RTN","SCMCBK1",261,0)
 N SCDFN,SCPARM,DIERR
"RTN","SCMCBK1",262,0)
 S SCDFN=0
"RTN","SCMCBK1",263,0)
 F  S SCDFN=$O(SCBAD(SCDFN)) Q:'SCDFN  D
"RTN","SCMCBK1",264,0)
 . S SCPARM("PATIENT")=$P($G(^DPT(SCDFN,0)),U)_"   "_$P($G(^DPT(SCDFN,.36)),U,4)
"RTN","SCMCBK1",265,0)
 . D BLD^DIALOG(40442001.001,.SCPARM,"","SCOK","S")
"RTN","SCMCBK1",266,0)
 ;
"RTN","SCMCBK1",267,0)
 F  S SCDFN=$O(SCOLD(SCDFN)) Q:'SCDFN  D
"RTN","SCMCBK1",268,0)
 . S SCPARM("PATIENT")=$P($G(^DPT(SCDFN,0)),U)_"   "_$P($G(^DPT(SCDFN,.36)),U,4)
"RTN","SCMCBK1",269,0)
 . D BLD^DIALOG(40442001.002,.SCPARM,"","SCOK","S")
"RTN","SCMCBK1",270,0)
 D HDREC^SCUTBK3(.SCOK,$G(DIERR),"Patient Assignment to Teams")
"RTN","SCMCBK1",271,0)
 Q
"RTN","SCMCBK1",272,0)
 ;
"RTN","SCMCBK1",273,0)
BAD2(SCBAD,SCOLD,SCOK) ;
"RTN","SCMCBK1",274,0)
 N SCDFN,SCPARM,DIERR
"RTN","SCMCBK1",275,0)
 S SCDFN=0
"RTN","SCMCBK1",276,0)
 F  S SCDFN=$O(SCBAD(SCDFN)) Q:'SCDFN  D
"RTN","SCMCBK1",277,0)
 . S SCPARM("PATIENT")=$P($G(^DPT(SCDFN,0)),U)_"   "_$P($G(^DPT(SCDFN,.36)),U,4)
"RTN","SCMCBK1",278,0)
 . D BLD^DIALOG(40443001.001,.SCPARM,"","SCOK","S")
"RTN","SCMCBK1",279,0)
 ;
"RTN","SCMCBK1",280,0)
 F  S SCDFN=$O(SCOLD(SCDFN)) Q:'SCDFN  D
"RTN","SCMCBK1",281,0)
 . S SCPARM("PATIENT")=$P($G(^DPT(SCDFN,0)),U)_"   "_$P($G(^DPT(SCDFN,.36)),U,4)
"RTN","SCMCBK1",282,0)
 . D BLD^DIALOG(40443001.002,.SCPARM,"","SCOK","S")
"RTN","SCMCBK1",283,0)
 D HDREC^SCUTBK3(.SCOK,$G(DIERR),"Patient Assignment to Positions")
"RTN","SCMCBK1",284,0)
 Q
"RTN","SCMCCV5")
0^31^B13099731^B13082921
"RTN","SCMCCV5",1,0)
SCMCCV5 ;ALB/JAM;Allow edits of invalid .03 field in 404.52;12/1/99@1055
"RTN","SCMCCV5",2,0)
 ;;5.3;Scheduling;**204,297**;DEC 01, 1999
"RTN","SCMCCV5",3,0)
 ;
"RTN","SCMCCV5",4,0)
EDIT ;Entry point for cnahes to .03 field in file 404.52
"RTN","SCMCCV5",5,0)
 N SCEND
"RTN","SCMCCV5",6,0)
 D HDR(0)
"RTN","SCMCCV5",7,0)
 S SCEND=0
"RTN","SCMCCV5",8,0)
 F  D PROCESS I SCEND Q
"RTN","SCMCCV5",9,0)
 K DIE,^TMP("PCMM PRACTITIONER",$J),DTOUT,DUOUT,DIROUT,DR,DA,X,Y
"RTN","SCMCCV5",10,0)
 Q
"RTN","SCMCCV5",11,0)
 ;
"RTN","SCMCCV5",12,0)
PROCESS ;Get list of invalid .03 field in file 404.52, select and then edit
"RTN","SCMCCV5",13,0)
 N SCIEN,FND
"RTN","SCMCCV5",14,0)
 K ^TMP("PCMM PRACTITIONER",$J)
"RTN","SCMCCV5",15,0)
 S FND=$$LST()
"RTN","SCMCCV5",16,0)
 I 'FND W "No Entries found" S SCEND=1 Q
"RTN","SCMCCV5",17,0)
 ;select a valid IEN to edit
"RTN","SCMCCV5",18,0)
 S SCIEN=$$GETIEN() I 'SCIEN S SCEND=1 Q
"RTN","SCMCCV5",19,0)
 ;edit .03 field
"RTN","SCMCCV5",20,0)
REP D TPHIS(SCIEN)
"RTN","SCMCCV5",21,0)
 K DA,DR,DIE S DIE="^SCTM(404.52,",DA=SCIEN
"RTN","SCMCCV5",22,0)
 S DR=".03Practitioner" D ^DIE K DR
"RTN","SCMCCV5",23,0)
 I $D(DTOUT)!($D(DUOUT)) S SCEND=1 Q
"RTN","SCMCCV5",24,0)
 I $G(Y)<0 Q
"RTN","SCMCCV5",25,0)
 ;verify practitioner response
"RTN","SCMCCV5",26,0)
 K DA,DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","SCMCCV5",27,0)
 S DIR(0)="Y",DIR("A")="         ...OK",DIR("B")="Yes"
"RTN","SCMCCV5",28,0)
 S DIR("?")="Enter Yes or <RT> to accept or No to change response"
"RTN","SCMCCV5",29,0)
 D ^DIR K DIR I Y Q
"RTN","SCMCCV5",30,0)
 I $D(DTOUT)!$D(DUOUT)!($D(DIROUT)) Q
"RTN","SCMCCV5",31,0)
 G REP
"RTN","SCMCCV5",32,0)
 Q
"RTN","SCMCCV5",33,0)
 ;
"RTN","SCMCCV5",34,0)
GETIEN() ;Select IEN from FILE 404.52
"RTN","SCMCCV5",35,0)
 N DIR,X,Y
"RTN","SCMCCV5",36,0)
 S DIR("A")="Select IEN",DIR("?")="^D LSTIEN^SCMCCV5"
"RTN","SCMCCV5",37,0)
 S DIR(0)="FO^^K:'$D(^TMP(""PCMM PRACTITIONER"",$J,X)) X"
"RTN","SCMCCV5",38,0)
 D ^DIR I $D(DIRUT) Q 0
"RTN","SCMCCV5",39,0)
 D DSP(X)
"RTN","SCMCCV5",40,0)
 Q X
"RTN","SCMCCV5",41,0)
 ;
"RTN","SCMCCV5",42,0)
LSTIEN ;Display a list of .03 entries stored in ^TMP("PCMM PRACTITIONER",$J
"RTN","SCMCCV5",43,0)
 N IEN,SCSTP
"RTN","SCMCCV5",44,0)
 S (IEN,SCSTP)=0
"RTN","SCMCCV5",45,0)
 D HDR(1)
"RTN","SCMCCV5",46,0)
 F  S IEN=$O(^TMP("PCMM PRACTITIONER",$J,IEN)) Q:'IEN  D  I SCSTP Q
"RTN","SCMCCV5",47,0)
 . I ($Y+3>IOSL) D  I 'Y S SCSTP=1 Q
"RTN","SCMCCV5",48,0)
 . . S DIR(0)="E",DIR("A")="Enter RETURN to continue or '^' to exit"
"RTN","SCMCCV5",49,0)
 . . D ^DIR D:Y HDR(1)
"RTN","SCMCCV5",50,0)
 . D DSP(IEN)
"RTN","SCMCCV5",51,0)
 I 'SCSTP W !,?20,"To Edit, enter an IEN number from the displayed list"
"RTN","SCMCCV5",52,0)
 Q
"RTN","SCMCCV5",53,0)
 ;
"RTN","SCMCCV5",54,0)
HDR(FL) ;Print header for list of invalid entries in file 404.52
"RTN","SCMCCV5",55,0)
 W @IOF
"RTN","SCMCCV5",56,0)
 W !,?23,$S(FL:"LIST OF",1:"EDITING")_" INVALID PRACTITIONER ENTRY",!!
"RTN","SCMCCV5",57,0)
 I FL D
"RTN","SCMCCV5",58,0)
 . W ?20,"IEN",?27,"Effective Date",?44,"Team",?68,"Status",!
"RTN","SCMCCV5",59,0)
 . W ?20,"---",?27,"--------------",?44,"----",?68,"------",!
"RTN","SCMCCV5",60,0)
 Q
"RTN","SCMCCV5",61,0)
 ;
"RTN","SCMCCV5",62,0)
DSP(DIEN) ;Display record from file 404.52 for DIEN entry
"RTN","SCMCCV5",63,0)
 N SCDAT,SCDT,SCSTA,SCTP
"RTN","SCMCCV5",64,0)
 I $G(DIEN)="" Q
"RTN","SCMCCV5",65,0)
 S SCDAT=$G(^SCTM(404.52,DIEN,0)),Y=$P(SCDAT,U,2) X ^DD("DD") S SCDT=Y
"RTN","SCMCCV5",66,0)
 S SCTP=$P(SCDAT,U) S:SCTP'="" SCTP=$P($G(^SCTM(404.57,SCTP,0)),U)
"RTN","SCMCCV5",67,0)
 S SCSTA=$S($P(SCDAT,U,4):"Active",1:"Inactive")
"RTN","SCMCCV5",68,0)
 W ?20,DIEN,?27,SCDT,?44,$E(SCTP,1,20),?68,SCSTA,!
"RTN","SCMCCV5",69,0)
 Q
"RTN","SCMCCV5",70,0)
 ;
"RTN","SCMCCV5",71,0)
TPHIS(SCIEN) ;Display complete position history for team position
"RTN","SCMCCV5",72,0)
 N ZDATE,ZLIST,ZERROR,SCX,SCY,TP,C,SCSTP,SCNAM
"RTN","SCMCCV5",73,0)
 S TP=$P(^SCTM(404.52,SCIEN,0),U) I TP="" Q
"RTN","SCMCCV5",74,0)
 S ZDATE("BEGIN")=1,ZDATE("END")=9999999,ZDATE("INCL")=0,SCSTP=0,C=1
"RTN","SCMCCV5",75,0)
 S SCX=$$PRTP^SCAPMC(TP,"ZDATE","ZLIST","ZERROR",0,1)
"RTN","SCMCCV5",76,0)
 I 'SCX!($D(ZERROR)) Q
"RTN","SCMCCV5",77,0)
 W !?25,"TEAM POSITION HISTORY"
"RTN","SCMCCV5",78,0)
 W !?10,"Effective Date",?30,"Staff",?54,"Status",!
"RTN","SCMCCV5",79,0)
 S SCX=0 F  S SCX=$O(ZLIST("ALL",404.52,SCX)) Q:'SCX  D  I SCSTP Q
"RTN","SCMCCV5",80,0)
 . S SCY=ZLIST("ALL",404.52,SCX),SCNAM=$P(SCY,U,6),C=C+1
"RTN","SCMCCV5",81,0)
 . I '(C#10) S DIR(0)="E" D ^DIR W ! I 'Y S SCSTP=1 Q
"RTN","SCMCCV5",82,0)
 . W:SCNAM="" ?6,"***"
"RTN","SCMCCV5",83,0)
 . W ?10,$P(SCY,U,4),?30,$E(SCNAM,1,20),?54,$P(SCY,U,2)
"RTN","SCMCCV5",84,0)
 . W:SCNAM="" " ***" W !
"RTN","SCMCCV5",85,0)
 Q
"RTN","SCMCCV5",86,0)
 ;
"RTN","SCMCCV5",87,0)
LST() ;Returns list of invalid entries from file #404.52 for field .03
"RTN","SCMCCV5",88,0)
 ;This subroutine checks the POSITION ASSIGNMENT HISTORY FILE (#404.52)
"RTN","SCMCCV5",89,0)
 ;for invalid pointers stored in the PRACTITIONER field (#.03) and
"RTN","SCMCCV5",90,0)
 ;returns a list of all such entries ien.
"RTN","SCMCCV5",91,0)
 ;
"RTN","SCMCCV5",92,0)
 ; Output:-  
"RTN","SCMCCV5",93,0)
 ;    ^TMP("PCMM PRACTITIONER",$J,IEN - Name of array to return list
"RTN","SCMCCV5",94,0)
 ;                                      Array subsripted by ien number
"RTN","SCMCCV5",95,0)
 ;     Returns - 1 if entry found, 0 no entry found
"RTN","SCMCCV5",96,0)
 ;
"RTN","SCMCCV5",97,0)
 N IEN,PRAC
"RTN","SCMCCV5",98,0)
 S IEN=0
"RTN","SCMCCV5",99,0)
 F  S IEN=$O(^SCTM(404.52,IEN)) Q:'IEN  I $G(^SCTM(404.52,IEN,0))'="" D
"RTN","SCMCCV5",100,0)
 . S PRAC=$P(^SCTM(404.52,IEN,0),U,3)
"RTN","SCMCCV5",101,0)
 . I PRAC'>0!('$D(^VA(200,+PRAC))) S ^TMP("PCMM PRACTITIONER",$J,IEN)="" Q
"RTN","SCMCCV5",102,0)
 . I $D(^USR(8930.3,"B",PRAC))!('$$USEUSR^SCMCTPU) Q
"RTN","SCMCCV5",103,0)
 . S ^TMP("PCMM PRACTITIONER",$J,IEN)=""
"RTN","SCMCCV5",104,0)
 Q $S($D(^TMP("PCMM PRACTITIONER",$J)):1,1:0)
"RTN","SCMCDDA")
0^27^B2917179^B2918971
"RTN","SCMCDDA",1,0)
SCMCDDA ;bp/cmf - extension of SCMCDD ; 21 December 1999
"RTN","SCMCDDA",2,0)
 ;;5.3;Scheduling;**204,297**;AUG 13, 1993
"RTN","SCMCDDA",3,0)
 ;1
"RTN","SCMCDDA",4,0)
BADNEWDT() ; not a stand alone function!!  called from NEWHIST^SCMCDD
"RTN","SCMCDDA",5,0)
 ;       ; ensure team/team position is active on DATE
"RTN","SCMCDDA",6,0)
 I FILE=404.59 D  I +SCOK=0 Q 1
"RTN","SCMCDDA",7,0)
 . D OKTMTP(IEN,DATE)
"RTN","SCMCDDA",8,0)
 . Q
"RTN","SCMCDDA",9,0)
 ;
"RTN","SCMCDDA",10,0)
 I FILE=404.52 D  I +SCOK=0 Q 1
"RTN","SCMCDDA",11,0)
 . D OKTMTP(IEN,DATE)
"RTN","SCMCDDA",12,0)
 . D OKTP(IEN,DATE)
"RTN","SCMCDDA",13,0)
 . ;;bp/cmf if not active, delete newhist entry here?!? [SCHIEN]
"RTN","SCMCDDA",14,0)
 . Q
"RTN","SCMCDDA",15,0)
 ;
"RTN","SCMCDDA",16,0)
 Q 0
"RTN","SCMCDDA",17,0)
 ;
"RTN","SCMCDDA",18,0)
BADCHGDT() ; not a stand alone function!!  called from OKCHGDT^SCMCDD
"RTN","SCMCDDA",19,0)
 I FILE=404.59 D  I +SCOK=0 Q 1
"RTN","SCMCDDA",20,0)
 . N SCTP
"RTN","SCMCDDA",21,0)
 . S SCTP=$P(SCNODE,U)
"RTN","SCMCDDA",22,0)
 . D OKTMTP(SCTP,DATE)
"RTN","SCMCDDA",23,0)
 . Q
"RTN","SCMCDDA",24,0)
 ;
"RTN","SCMCDDA",25,0)
 I FILE=404.52 D  I +SCOK=0 Q 1
"RTN","SCMCDDA",26,0)
 . N SCTP
"RTN","SCMCDDA",27,0)
 . S SCTP=$P(SCNODE,U)
"RTN","SCMCDDA",28,0)
 . D OKTMTP(SCTP,DATE)
"RTN","SCMCDDA",29,0)
 . D OKTP(SCTP,DATE)
"RTN","SCMCDDA",30,0)
 . Q
"RTN","SCMCDDA",31,0)
 ;
"RTN","SCMCDDA",32,0)
 Q 0
"RTN","SCMCDDA",33,0)
 ;
"RTN","SCMCDDA",34,0)
OKTMTP(SC1,SC2) ;
"RTN","SCMCDDA",35,0)
 ; sc1 := team position ien
"RTN","SCMCDDA",36,0)
 ; sc2 := assignment date
"RTN","SCMCDDA",37,0)
 N SCNODE,SCTM
"RTN","SCMCDDA",38,0)
 S SCNODE=$G(^SCTM(404.57,SC1,0),"BAD")
"RTN","SCMCDDA",39,0)
 I SCNODE="BAD" S SCOK="0^Bad Team Position entry." Q
"RTN","SCMCDDA",40,0)
 S SCTM=$P(SCNODE,U,2)
"RTN","SCMCDDA",41,0)
 S SCNODE=$G(^SCTM(404.51,SCTM,0),"BAD")
"RTN","SCMCDDA",42,0)
 I SCNODE="BAD" S SCOK="0^Bad Team entry." Q
"RTN","SCMCDDA",43,0)
 S SCX=+$$DATES^SCAPMCU1(404.58,SCTM,SC2)
"RTN","SCMCDDA",44,0)
 I SCX<1 S SCOK="0^Team not active on selected date."
"RTN","SCMCDDA",45,0)
 Q
"RTN","SCMCDDA",46,0)
 ;
"RTN","SCMCDDA",47,0)
OKTP(SC1,SC2) ;
"RTN","SCMCDDA",48,0)
 ; sc1 := team position ien
"RTN","SCMCDDA",49,0)
 ; sc2 := assignment date
"RTN","SCMCDDA",50,0)
 S SCX=+$$DATES^SCAPMCU1(404.59,SC1,SC2)
"RTN","SCMCDDA",51,0)
 I SCX<1 S SCOK="0^Team Position not active on selected date."
"RTN","SCMCDDA",52,0)
 Q
"RTN","SCMCDDA",53,0)
 ;
"RTN","SCMCHLP")
0^2^B27060859^B22705337
"RTN","SCMCHLP",1,0)
SCMCHLP ;ALB/JDS PCMM WORKLOAD MESSAGE ; 28 Feb 2003  7:54 AM
"RTN","SCMCHLP",2,0)
 ;;5.3;Scheduling;**272,297**;AUG 13, 1993
"RTN","SCMCHLP",3,0)
 ;this version reverts BUILD & SUM to pre 297 - swo/largo 3.31.2006
"RTN","SCMCHLP",4,0)
 ;Ftee message
"RTN","SCMCHLP",5,0)
EVN(DATE,ASSDT) ;create evn segment
"RTN","SCMCHLP",6,0)
 I '$G(DATE) D NOW^%DTC S DATE=$E(%,1,12)
"RTN","SCMCHLP",7,0)
 S MSG=$$EN^VAFHLEVN("B02",DATE,,"^","^")
"RTN","SCMCHLP",8,0)
 S $P(MSG,"^",7)=$$HLDATE^HLFNC(ASSDT,"TS")
"RTN","SCMCHLP",9,0)
 S @XMITARRY@(1,1,2)=MSG
"RTN","SCMCHLP",10,0)
 Q
"RTN","SCMCHLP",11,0)
STF(PH) ;staff segment
"RTN","SCMCHLP",12,0)
 N I,ZERO
"RTN","SCMCHLP",13,0)
 ;ph pointer to position assignment file
"RTN","SCMCHLP",14,0)
 ;S ZERO=$G(^SCTM(404.52,+$G(PH),0)) Q:'$P(ZERO,U,3)
"RTN","SCMCHLP",15,0)
 ;S DOC=$P(ZERO,U,3),INST=$P($G(^SCTM(404.51,+$P($G(^SCTM(404.57,+ZERO,0)),U,2),0)),U,7),SSN=$$GET1^DIQ(200,(+DOC)_",",9),INSTNM=$$GET1^DIQ(4,(+INST)_",",.01),INST=$$GET1^DIQ(4,(+INST)_",",99)
"RTN","SCMCHLP",16,0)
 N A S A("FILE")=200,A("FIELD")=.01,A("IENS")=DOC
"RTN","SCMCHLP",17,0)
 S MSG="STF^^"_DOC_"~~~USVHA~LR~"_INST_"|"_SSN_"~~~USSA~SS"_"^"_$$HLNAME^XLFNAME(.A,"","~")
"RTN","SCMCHLP",18,0)
 S $P(MSG,U,13)=$$HLDATE^HLFNC($P($G(PZERO),U,5),"TS")
"RTN","SCMCHLP",19,0)
 S $P(MSG,U,14)=$$HLDATE^HLFNC($P($G(ZERO),U,6),"TS")
"RTN","SCMCHLP",20,0)
 S @XMITARRY@(1,1,3)=MSG
"RTN","SCMCHLP",21,0)
 Q
"RTN","SCMCHLP",22,0)
ORG(PH) ;ORG SEGMENT
"RTN","SCMCHLP",23,0)
 ;PH pointer to position assignment filePC
"RTN","SCMCHLP",24,0)
 S @XMITARRY@(1,1,4)="ORG^1^"_INST_"~"_INSTNM_"^^^^^^"_PC
"RTN","SCMCHLP",25,0)
 Q
"RTN","SCMCHLP",26,0)
MSH(PH) ;
"RTN","SCMCHLP",27,0)
 N I,ZERO,PZERO,VARDOC
"RTN","SCMCHLP",28,0)
 S DOC=0
"RTN","SCMCHLP",29,0)
 S SCMSGCNT=$G(SCMSGCNT)+1
"RTN","SCMCHLP",30,0)
 ;ph pointer to position assignment file
"RTN","SCMCHLP",31,0)
 S ZERO=$G(^SCTM(404.52,+$G(PH),0)) Q:'$P(ZERO,U,3)
"RTN","SCMCHLP",32,0)
 S (VARDOC,DOC)=$P(ZERO,U,3),FTEE=+$P(ZERO,U,9),INSTI=$P($G(^SCTM(404.51,+$P($G(^SCTM(404.57,+ZERO,0)),U,2),0)),U,7)
"RTN","SCMCHLP",33,0)
MSH1 ;Know DOC nad INSTI
"RTN","SCMCHLP",34,0)
 S INSTNM=$$GET1^DIQ(4,(+INSTI)_",",.01),INST=$$GET1^DIQ(4,(+INSTI)_",",99)
"RTN","SCMCHLP",35,0)
 ;S MAX=+$P($G(^SCTM(404.57,+ZERO,0)),U,8)
"RTN","SCMCHLP",36,0)
 S SSN=$$GET1^DIQ(200,(+DOC)_",",9)
"RTN","SCMCHLP",37,0)
 S (MAX,FTEE)=0 D SUM(DOC,INSTI)
"RTN","SCMCHLP",38,0)
 S PC=U
"RTN","SCMCHLP",39,0)
 S (PZERO,ZERO)=$$GET^XUA4A72(+DOC)
"RTN","SCMCHLP",40,0)
 I 'ZERO N I,FTOK S I="" D
"RTN","SCMCHLP",41,0)
 .F  S I=$O(^SCTM(404.52,"C",+DOC,I),-1) Q:I=""  S:'$G(FTOK) FTOK=$P($G(^SCTM(404.52,+I,0)),U,9) S (PZERO,ZERO)=$$GET^XUA4A72(+DOC,+$P($G(^SCTM(404.52,I,0)),U,8)) Q:ZERO
"RTN","SCMCHLP",42,0)
 I 'ZERO,'$G(FTOK) S DOC=0 Q
"RTN","SCMCHLP",43,0)
 S PC=$P(ZERO,U,7)_"~"_$P(ZERO,U,2)
"RTN","SCMCHLP",44,0)
 S HL("SAF")=INST Q
"RTN","SCMCHLP",45,0)
 D CREATE^HLTF(.ID)
"RTN","SCMCHLP",46,0)
 ;D HL
"RTN","SCMCHLP",47,0)
 D MSH^HLFNC2(.HL,ID_"-"_SCMSGCNT,.MSG)
"RTN","SCMCHLP",48,0)
 D NOW^%DTC S $P(MSG,"^",7)=$$HLDATE^HLFNC(%,"TS")
"RTN","SCMCHLP",49,0)
 S @XMITARRY@(1,1,1)=MSG
"RTN","SCMCHLP",50,0)
 Q
"RTN","SCMCHLP",51,0)
ZFT S @XMITARRY@(1,1,5)="ZFT^1^"_FTEE_"^"_MAX
"RTN","SCMCHLP",52,0)
 Q
"RTN","SCMCHLP",53,0)
HL S HL("ACAT")="NE"
"RTN","SCMCHLP",54,0)
 S HL("APAT")="AL"
"RTN","SCMCHLP",55,0)
 S HL("ECH")="~|\&"
"RTN","SCMCHLP",56,0)
 S HL("ETN")="B02"
"RTN","SCMCHLP",57,0)
 S HL("FS")="^"
"RTN","SCMCHLP",58,0)
 S HL("MTN")="PMU"
"RTN","SCMCHLP",59,0)
 S HL("Q")=""""""
"RTN","SCMCHLP",60,0)
 S HL("SAF")=$G(^DD("SITE",1))
"RTN","SCMCHLP",61,0)
 S HL("SAN")="PCMM"
"RTN","SCMCHLP",62,0)
 S HL("VER")=2.4
"RTN","SCMCHLP",63,0)
 S HL("PID")="P"
"RTN","SCMCHLP",64,0)
 Q
"RTN","SCMCHLP",65,0)
BUILD(VAPTR,HL,XMITARRY,HLIEN) ;Build array given pointer.
"RTN","SCMCHLP",66,0)
 ;check which file and build based on that
"RTN","SCMCHLP",67,0)
 ;If team file check if active and PC send message with new max panel
"RTN","SCMCHLP",68,0)
 ;if possition assignment history check status
"RTN","SCMCHLP",69,0)
 ;if active send FTEE
"RTN","SCMCHLP",70,0)
 ;if inactive check if PC and send zero in FTEE
"RTN","SCMCHLP",71,0)
 ;if from Team position file check if pc and send zero in FTEE.
"RTN","SCMCHLP",72,0)
 N %,DOC,EVNDATE,FTEE,ID,INSTI,INSTNM,MAX,MSG,PC,SCFUT,SSN,TP,TEAM,Z1
"RTN","SCMCHLP",73,0)
 S EVNDATE=$G(^SCPT(404.48,+$G(HLIEN),0)) I 'EVNDATE D NOW^%DTC S EVNDATE=%
"RTN","SCMCHLP",74,0)
 N HL D HL
"RTN","SCMCHLP",75,0)
 S ZERO=$G(@(U_$P(VAPTR,";",2)_(+VAPTR)_",0)")) I '$L(ZERO) D  Q 1   ;Record has vanished
"RTN","SCMCHLP",76,0)
 .N IEN S IEN=$O(^SCPT(404.471,"AWRK",VAPTR,""),-1) Q:'IEN   ;not transmitted
"RTN","SCMCHLP",77,0)
 .S TP=$P($G(^SCPT(404.48,+$G(HLIEN),0)),U,4) Q:'TP
"RTN","SCMCHLP",78,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,+TP)
"RTN","SCMCHLP",79,0)
 .I ((ACTIVE)!(VAPTR'[404.52)) D MSH(+$P(ACTIVE,U,4)) Q:'DOC  D EVN(EVNDATE,$P(ACTIVE,U,2)),STF($P(ACTIVE,U,4)),ORG($P(ACTIVE,U,4)),ZFT Q
"RTN","SCMCHLP",80,0)
 .S DOC=$P($G(^SCPT(404.471,+IEN,0)),U,8) Q:'DOC
"RTN","SCMCHLP",81,0)
 .S INSTI=$P($G(^SCTM(404.51,+$P($G(^SCTM(404.57,+TP,0)),U,2),0)),U,7)
"RTN","SCMCHLP",82,0)
 .D MSH1,EVN(EVNDATE,$P(ACTIVE,U,2)),STF(),ORG(),ZFT
"RTN","SCMCHLP",83,0)
 I VAPTR[404.57 D  Q 1  ;Team Position
"RTN","SCMCHLP",84,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,+VAPTR)
"RTN","SCMCHLP",85,0)
 .D MSH(+$P(ACTIVE,U,4)) Q:'DOC  D EVN(EVNDATE,$P(ACTIVE,U,2)),STF($P(ACTIVE,U,4)),ORG($P(ACTIVE,U,4)),ZFT
"RTN","SCMCHLP",86,0)
 I VAPTR[404.52 D  Q 1  ;Position Assignment History
"RTN","SCMCHLP",87,0)
 .I $P(ZERO,U,2)>DT S SCFUT=1 Q  ;future date wait till then
"RTN","SCMCHLP",88,0)
 .I $P(ZERO,U,2) S EVNDATE=$E($P(ZERO,U,2),1,7)_$E(EVNDATE,8,99)
"RTN","SCMCHLP",89,0)
 .D MSH(+VAPTR) Q:'DOC  D EVN(EVNDATE,$P(ZERO,U,2)),STF(+VAPTR),ORG(+VAPTR)
"RTN","SCMCHLP",90,0)
 .D ZFT
"RTN","SCMCHLP",91,0)
 I VAPTR[404.59 D  Q 1  ;Team Position History
"RTN","SCMCHLP",92,0)
 .I $P(ZERO,U,2)>DT S SCFUT=1 Q  ;Future do it then
"RTN","SCMCHLP",93,0)
 .I $P(ZERO,U,2) S EVNDATE=$E($P(ZERO,U,2),1,7)_$E(EVNDATE,8,99)
"RTN","SCMCHLP",94,0)
 .;check if active assignment on inactive team
"RTN","SCMCHLP",95,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,$P(ZERO,U,1))
"RTN","SCMCHLP",96,0)
 .D MSH(+$P(ACTIVE,U,4)) Q:'DOC  D EVN(EVNDATE,$P(ACTIVE,U,2)),STF(+$P(ACTIVE,U,4)),ORG(+$P(ACTIVE,U,4))
"RTN","SCMCHLP",97,0)
 .D ZFT
"RTN","SCMCHLP",98,0)
 Q 1
"RTN","SCMCHLP",99,0)
PROV(VAPTR) ;Get internal provider given varible pointer
"RTN","SCMCHLP",100,0)
 N ZERO,ACTIVE
"RTN","SCMCHLP",101,0)
 S ZERO=$G(@(U_$P(VAPTR,";",2)_(+VAPTR)_",0)"))
"RTN","SCMCHLP",102,0)
 I VAPTR[404.57 D  Q $$PH($P(ACTIVE,U,4))  ;Team Position
"RTN","SCMCHLP",103,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,+VAPTR) Q:'ACTIVE
"RTN","SCMCHLP",104,0)
 I VAPTR[404.52 Q $$PH(+VAPTR)
"RTN","SCMCHLP",105,0)
 I VAPTR[404.59 D  I ACTIVE Q $$PH(+VAPTR)  ;Team Position History
"RTN","SCMCHLP",106,0)
 .;check if active assignment on inactive team
"RTN","SCMCHLP",107,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,$P(ZERO,U,1))
"RTN","SCMCHLP",108,0)
 Q 0
"RTN","SCMCHLP",109,0)
PH(PH) ;Return provider from position history
"RTN","SCMCHLP",110,0)
 Q $P($G(^SCTM(404.52,+$G(PH),0)),U,3)
"RTN","SCMCHLP",111,0)
SUM(PR,INST) ; get all the  positions for this provider
"RTN","SCMCHLP",112,0)
 N I,INS,ZERO,SCA,TEAM
"RTN","SCMCHLP",113,0)
 S I=""
"RTN","SCMCHLP",114,0)
 F  S I=$O(^SCTM(404.52,"C",PR,I),-1) Q:'I  D
"RTN","SCMCHLP",115,0)
 .S ZERO=$G(^SCTM(404.52,I,0)) Q:$D(SCA(+ZERO))  S SCA(+ZERO)=""
"RTN","SCMCHLP",116,0)
 .S INS=$P($G(^SCTM(404.51,+$P($G(^SCTM(404.57,+ZERO,0)),U,2),0)),U,7)
"RTN","SCMCHLP",117,0)
 .Q:(INS'=INST)
"RTN","SCMCHLP",118,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,+ZERO,DT+.5) Q:'ACTIVE
"RTN","SCMCHLP",119,0)
 .S (Z1,ZERO)=$G(^SCTM(404.52,+$P(ACTIVE,U,4),0)) Q:$P(Z1,U,3)'=PR
"RTN","SCMCHLP",120,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.59,+Z1,DT+.5) Q:'ACTIVE
"RTN","SCMCHLP",121,0)
 .S Z1=$G(^SCTM(404.57,+Z1,0))
"RTN","SCMCHLP",122,0)
 .Q:'$P(Z1,U,4)  ;Cannot be primary
"RTN","SCMCHLP",123,0)
 .S TEAM=$G(^SCTM(404.51,+$P(Z1,U,2),0))
"RTN","SCMCHLP",124,0)
 .Q:'$P(TEAM,U,5)
"RTN","SCMCHLP",125,0)
 .S FTEE=FTEE+$P(ZERO,U,9)
"RTN","SCMCHLP",126,0)
 .S MAX=MAX+$P(Z1,U,8)
"RTN","SCMCHLR2")
0^5^B22203753^B21748718
"RTN","SCMCHLR2",1,0)
SCMCHLR2 ;ALB/KCL - PCMM HL7 Reject Processing - Build List Area; 10-JAN-2000
"RTN","SCMCHLR2",2,0)
 ;;5.3;Scheduling;**210,272,297**;AUG 13, 1993
"RTN","SCMCHLR2",3,0)
 ;
"RTN","SCMCHLR2",4,0)
EN(SCARY,SCBEG,SCEND,SCEPS,SCSORTBY,SCCNT) ;
"RTN","SCMCHLR2",5,0)
 ; Description: This entry point is used to build list area for
"RTN","SCMCHLR2",6,0)
 ; PCMM Transmission Errors.
"RTN","SCMCHLR2",7,0)
 ;
"RTN","SCMCHLR2",8,0)
 ; The following variables are 'system wide variables' in the
"RTN","SCMCHLR2",9,0)
 ; PCMM Transmission Error Processing List Manager application:
"RTN","SCMCHLR2",10,0)
 ;  Input:
"RTN","SCMCHLR2",11,0)
 ;      SCARY - Global array subscript
"RTN","SCMCHLR2",12,0)
 ;      SCBEG - Begin date for date range
"RTN","SCMCHLR2",13,0)
 ;      SCEND - End date for date range
"RTN","SCMCHLR2",14,0)
 ;      SCEPS - Error processing statuses
"RTN","SCMCHLR2",15,0)
 ;                1 -> New
"RTN","SCMCHLR2",16,0)
 ;                2 -> Checked
"RTN","SCMCHLR2",17,0)
 ;                3 -> Both
"RTN","SCMCHLR2",18,0)
 ;   SCSORTBY - Sort by criteria
"RTN","SCMCHLR2",19,0)
 ;                N -> Patient Name
"RTN","SCMCHLR2",20,0)
 ;                D -> Date/Time Ack Received
"RTN","SCMCHLR2",21,0)
 ;                P -> Provider
"RTN","SCMCHLR2",22,0)
 ;
"RTN","SCMCHLR2",23,0)
 ; Output:
"RTN","SCMCHLR2",24,0)
 ;  SCCNT - Contains number of lines in the list, pass by reference
"RTN","SCMCHLR2",25,0)
 ;
"RTN","SCMCHLR2",26,0)
 ;Display FM wait msg
"RTN","SCMCHLR2",27,0)
 D WAIT^DICD
"RTN","SCMCHLR2",28,0)
 ;
"RTN","SCMCHLR2",29,0)
 ;Get PCMM HL7 Trans Log errors
"RTN","SCMCHLR2",30,0)
 D GET(SCARY,SCBEG,SCEND,SCEPS,SCSORTBY)
"RTN","SCMCHLR2",31,0)
 ;
"RTN","SCMCHLR2",32,0)
 ;Build list area for PCMM HL7 Trans Log errors
"RTN","SCMCHLR2",33,0)
 D BLDLIST^SCMCHLR3(SCSORTBY,SCEPS,.SCCNT)
"RTN","SCMCHLR2",34,0)
 ;
"RTN","SCMCHLR2",35,0)
 ;If no PCMM HL7 Trans Log errors, display msg in list area
"RTN","SCMCHLR2",36,0)
 I 'SCCNT D
"RTN","SCMCHLR2",37,0)
 .D SET^SCMCHLR3(SCARY,1,"",1,36,0,,,,.SCCNT)
"RTN","SCMCHLR2",38,0)
 .D SET^SCMCHLR3(SCARY,2,"No 'PCMM Transmission Errors' to display.",4,41,0,,,,.SCCNT)
"RTN","SCMCHLR2",39,0)
 Q
"RTN","SCMCHLR2",40,0)
 ;
"RTN","SCMCHLR2",41,0)
 ;
"RTN","SCMCHLR2",42,0)
GET(SCARY,SCBEG,SCEND,SCEPS,SCSORTBY) ;
"RTN","SCMCHLR2",43,0)
 ; Description: Get PCMM HL7 Transmission Log errors.
"RTN","SCMCHLR2",44,0)
 ;
"RTN","SCMCHLR2",45,0)
 ;  Input:
"RTN","SCMCHLR2",46,0)
 ;      SCARY - Global array subscript
"RTN","SCMCHLR2",47,0)
 ;      SCBEG - Begin date for date range
"RTN","SCMCHLR2",48,0)
 ;      SCEND - End date for date range
"RTN","SCMCHLR2",49,0)
 ;      SCEPS - Error processing status
"RTN","SCMCHLR2",50,0)
 ;   SCSORTBY - Sort by criteria
"RTN","SCMCHLR2",51,0)
 ;
"RTN","SCMCHLR2",52,0)
 ; Output:
"RTN","SCMCHLR2",53,0)
 ;  PCMM transmission log error list sorted by:
"RTN","SCMCHLR2",54,0)
 ;
"RTN","SCMCHLR2",55,0)
 ;   Patient Name: ^TMP("SCERRSRT",$J,<sort by>,<patient name>,<trans log IEN>,<err code ien>)
"RTN","SCMCHLR2",56,0)
 ; OR,
"RTN","SCMCHLR2",57,0)
 ;   Date/Time Ack Rec'd: ^TMP("SCERRSRT",$J,<sort by>,<date/time ack rec'd>,<trans log IEN>,<err code ien>)
"RTN","SCMCHLR2",58,0)
 ; OR,
"RTN","SCMCHLR2",59,0)
 ;   Provider: ^TMP("SCERRSRT",$J,<sort by>,<provider>,<trans log IEN>,<err code ien>)
"RTN","SCMCHLR2",60,0)
 ;
"RTN","SCMCHLR2",61,0)
 N SCDFN,SCDTR,SCERIEN,SCTLIEN,SCSTAT
"RTN","SCMCHLR2",62,0)
 ;
"RTN","SCMCHLR2",63,0)
 ;Loop thru PCMM HL7 Trans Log for selected date range
"RTN","SCMCHLR2",64,0)
 F SCDTR=SCBEG:0 S SCDTR=$O(^SCPT(404.471,"AST",SCDTR)) Q:'SCDTR!($P(SCDTR,".")>SCEND)  D
"RTN","SCMCHLR2",65,0)
 .;loop thru status
"RTN","SCMCHLR2",66,0)
 .S SCSTAT=0
"RTN","SCMCHLR2",67,0)
 .F  S SCSTAT=$O(^SCPT(404.471,"AST",SCDTR,SCSTAT)) Q:SCSTAT=""  D
"RTN","SCMCHLR2",68,0)
 ..;loop thru patients
"RTN","SCMCHLR2",69,0)
 ..S SCDFN=0
"RTN","SCMCHLR2",70,0)
 ..F  S SCDFN=$O(^SCPT(404.471,"AST",SCDTR,SCSTAT,SCDFN)) Q:SCDFN=""  D
"RTN","SCMCHLR2",71,0)
 ...;loop through (#404.471) ien's
"RTN","SCMCHLR2",72,0)
 ...S SCTLIEN=0
"RTN","SCMCHLR2",73,0)
 ...F  S SCTLIEN=$O(^SCPT(404.471,"AST",SCDTR,SCSTAT,SCDFN,SCTLIEN)) Q:'SCTLIEN  D
"RTN","SCMCHLR2",74,0)
 ....;loop thru ien's of error code mult. and setup sort array
"RTN","SCMCHLR2",75,0)
 ....S SCERIEN=0
"RTN","SCMCHLR2",76,0)
 ....F  S SCERIEN=$O(^SCPT(404.471,SCTLIEN,"ERR",SCERIEN)) Q:'SCERIEN  D SORT(SCSORTBY,SCDTR,SCDFN,SCEPS,SCTLIEN,SCERIEN)
"RTN","SCMCHLR2",77,0)
 ;
"RTN","SCMCHLR2",78,0)
 Q
"RTN","SCMCHLR2",79,0)
 ;
"RTN","SCMCHLR2",80,0)
 ;
"RTN","SCMCHLR2",81,0)
SORT(SCSORTBY,SCDTR,SCDFN,SCEPS,SCTLIEN,SCERIEN) ;
"RTN","SCMCHLR2",82,0)
 ; Description: Used to set up sort array based on 'Sort Criteria' and
"RTN","SCMCHLR2",83,0)
 ; 'Error Processing Status' for PCMM Transmission Errors list display.
"RTN","SCMCHLR2",84,0)
 ;
"RTN","SCMCHLR2",85,0)
 ;  Input:
"RTN","SCMCHLR2",86,0)
 ;   SCSORTBY - Sort by criteria
"RTN","SCMCHLR2",87,0)
 ;      SCDTR - PCMM transmission log date/time ack received
"RTN","SCMCHLR2",88,0)
 ;      SCDFN - Patient IEN
"RTN","SCMCHLR2",89,0)
 ;      SCEPS - Error processing status
"RTN","SCMCHLR2",90,0)
 ;    SCTLIEN - PCMM transmission log IEN
"RTN","SCMCHLR2",91,0)
 ;    SCERIEN - IEN of record in Error Code (#404.47142) multiple
"RTN","SCMCHLR2",92,0)
 ;
"RTN","SCMCHLR2",93,0)
 ; Output: None
"RTN","SCMCHLR2",94,0)
 ;
"RTN","SCMCHLR2",95,0)
 N SCTLOG
"RTN","SCMCHLR2",96,0)
 ;
"RTN","SCMCHLR2",97,0)
 ;If sort by criteria is 'Date/Time Ack Received'
"RTN","SCMCHLR2",98,0)
 I SCSORTBY="D" D
"RTN","SCMCHLR2",99,0)
 .;get data from PCMM HL7 Trans Log
"RTN","SCMCHLR2",100,0)
 .I $$GETLOG^SCMCHLA(SCTLIEN,SCERIEN,.SCTLOG) D
"RTN","SCMCHLR2",101,0)
 ..;if Error Proc Status matches selected Error Proc Status
"RTN","SCMCHLR2",102,0)
 ..I (SCEPS=$G(SCTLOG("ERR","EPS"))!(SCEPS>2)) D
"RTN","SCMCHLR2",103,0)
 ...;setup ^tmp array sorted by date/time ack rec'd
"RTN","SCMCHLR2",104,0)
 ...S ^TMP("SCERRSRT",$J,SCSORTBY,SCDTR,SCTLIEN,SCERIEN)=""
"RTN","SCMCHLR2",105,0)
 ;
"RTN","SCMCHLR2",106,0)
 ;If sort by criteria is 'Provider'
"RTN","SCMCHLR2",107,0)
 I SCSORTBY="P" D
"RTN","SCMCHLR2",108,0)
 .N SCPTR,SCPROV,SCHL
"RTN","SCMCHLR2",109,0)
 .;get data from PCMM HL7 Trans Log
"RTN","SCMCHLR2",110,0)
 .I $$GETLOG^SCMCHLA(SCTLIEN,SCERIEN,.SCTLOG) D
"RTN","SCMCHLR2",111,0)
 ..;if Error Proc Status matches selected Error Proc Status
"RTN","SCMCHLR2",112,0)
 ..I (SCEPS=$G(SCTLOG("ERR","EPS"))!(SCEPS>2)) D
"RTN","SCMCHLR2",113,0)
 ...;get data from PCMM HL7 ID file
"RTN","SCMCHLR2",114,0)
 ...I $$GETHL7ID^SCMCHLA2($G(SCTLOG("ERR","ZPCID")),.SCHL)
"RTN","SCMCHLR2",115,0)
 ...;get provider from POSITION ASSIGNMENT HISTORY file
"RTN","SCMCHLR2",116,0)
 ...S SCPTR=$P($G(SCHL("HL7ID")),"-",2)  ; pointer to PCMM HL7 ID file
"RTN","SCMCHLR2",117,0)
 ...I $G(SCTLOG("WORK")) S SCPROV=$$PROV^SCMCHLP(SCTLOG("WORK"))
"RTN","SCMCHLR2",118,0)
 ...I '$G(SCTLOG("WORK")) S SCPROV=$P($G(^SCTM(404.52,+SCPTR,0)),"^",3)
"RTN","SCMCHLR2",119,0)
 ...;setup ^tmp array sorted by provider
"RTN","SCMCHLR2",120,0)
 ...S ^TMP("SCERRSRT",$J,SCSORTBY,$S($G(SCPROV)'="":$$EXTERNAL^DILFD(404.52,.03,,SCPROV),1:"ZZZUNKNOWN"),SCTLIEN,SCERIEN)=""
"RTN","SCMCHLR2",121,0)
 ;
"RTN","SCMCHLR2",122,0)
 ;If sort by criteria is 'Patient' (default)
"RTN","SCMCHLR2",123,0)
 I SCSORTBY="N" D
"RTN","SCMCHLR2",124,0)
 .;get data from PCMM HL7 Trans Log
"RTN","SCMCHLR2",125,0)
 .I $$GETLOG^SCMCHLA(SCTLIEN,SCERIEN,.SCTLOG) D
"RTN","SCMCHLR2",126,0)
 ..;if Error Proc Status matches selected Error Proc Status
"RTN","SCMCHLR2",127,0)
 ..I (SCEPS=$G(SCTLOG("ERR","EPS"))!(SCEPS>2)) D
"RTN","SCMCHLR2",128,0)
 ...;setup ^tmp array sorted by patient
"RTN","SCMCHLR2",129,0)
 ...I SCDFN="W" I $G(SCTLOG("WORK"))="" S SCDFN=""
"RTN","SCMCHLR2",130,0)
 ...S ^TMP("SCERRSRT",$J,SCSORTBY,$S($P($G(^DPT(+SCDFN,0)),U)'="":$P(^(0),U),SCDFN="W":"Workload Message",1:"UNKNOWN"),SCTLIEN,SCERIEN)=""
"RTN","SCMCHLR2",131,0)
 ;
"RTN","SCMCHLR2",132,0)
 Q
"RTN","SCMCHLR9")
0^6^B32131385^B30678085
"RTN","SCMCHLR9",1,0)
SCMCHLR9 ;ALB/KCL - PCMM HL7 Reject Transmission Report Con't; 22-FEB-2000
"RTN","SCMCHLR9",2,0)
 ;;5.3;Scheduling;**210,284,297**;AUG 13,1993
"RTN","SCMCHLR9",3,0)
 ;
"RTN","SCMCHLR9",4,0)
PRINT ; Description: Used to print report.
"RTN","SCMCHLR9",5,0)
 ;
"RTN","SCMCHLR9",6,0)
 ;Init variables
"RTN","SCMCHLR9",7,0)
 N CRT,QUIT,PAGE,SUBSCRPT,SCARRAY
"RTN","SCMCHLR9",8,0)
 K SCARRAY
"RTN","SCMCHLR9",9,0)
 S SCARRAY="SCERRSRT"
"RTN","SCMCHLR9",10,0)
 K ^TMP(SCARRAY,$J)
"RTN","SCMCHLR9",11,0)
 S (QUIT,PAGE)=0
"RTN","SCMCHLR9",12,0)
 S CRT=$S($E(IOST,1,2)="C-":1,1:0)
"RTN","SCMCHLR9",13,0)
 ;
"RTN","SCMCHLR9",14,0)
 ;Get PCMM HL7 Transmission Log errors
"RTN","SCMCHLR9",15,0)
 D GET^SCMCHLR2(SCARRAY,$G(SCRP("BEGIN")),$G(SCRP("END")),$G(SCRP("EPS")),$G(SCRP("SORT")))
"RTN","SCMCHLR9",16,0)
 ;
"RTN","SCMCHLR9",17,0)
 U IO
"RTN","SCMCHLR9",18,0)
 I CRT,PAGE=0 W @IOF
"RTN","SCMCHLR9",19,0)
 S PAGE=1
"RTN","SCMCHLR9",20,0)
 D HEADER
"RTN","SCMCHLR9",21,0)
 D PRINTERR($G(SCRP("SORT")),$G(SCRP("EPS")))
"RTN","SCMCHLR9",22,0)
 I CRT,'QUIT D PAUSE
"RTN","SCMCHLR9",23,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","SCMCHLR9",24,0)
 D ^%ZISC
"RTN","SCMCHLR9",25,0)
 ;
"RTN","SCMCHLR9",26,0)
 K ^TMP(SCARRAY,$J)
"RTN","SCMCHLR9",27,0)
 Q
"RTN","SCMCHLR9",28,0)
 ;
"RTN","SCMCHLR9",29,0)
LINE(LINE) ;
"RTN","SCMCHLR9",30,0)
 ; Description: Prints a line. First prints header if at end of page.
"RTN","SCMCHLR9",31,0)
 ;
"RTN","SCMCHLR9",32,0)
 I CRT,($Y>(IOSL-4)) D
"RTN","SCMCHLR9",33,0)
 .D PAUSE
"RTN","SCMCHLR9",34,0)
 .Q:QUIT
"RTN","SCMCHLR9",35,0)
 .W @IOF
"RTN","SCMCHLR9",36,0)
 .D HEADER
"RTN","SCMCHLR9",37,0)
 .W LINE
"RTN","SCMCHLR9",38,0)
 ;
"RTN","SCMCHLR9",39,0)
 E  I ('CRT),($Y>(IOSL-2)) D
"RTN","SCMCHLR9",40,0)
 .W @IOF
"RTN","SCMCHLR9",41,0)
 .D HEADER
"RTN","SCMCHLR9",42,0)
 .W LINE
"RTN","SCMCHLR9",43,0)
 ;
"RTN","SCMCHLR9",44,0)
 E  W !,LINE
"RTN","SCMCHLR9",45,0)
 Q
"RTN","SCMCHLR9",46,0)
 ;
"RTN","SCMCHLR9",47,0)
 ;
"RTN","SCMCHLR9",48,0)
HEADER ; Description: Prints the report header.
"RTN","SCMCHLR9",49,0)
 ;
"RTN","SCMCHLR9",50,0)
 N LINE,X
"RTN","SCMCHLR9",51,0)
 I $Y>1 W @IOF
"RTN","SCMCHLR9",52,0)
 W !,"PCMM Transmission Error Report"
"RTN","SCMCHLR9",53,0)
 W ?33,"Run Date: "_$$FMTE^XLFDT($$NOW^XLFDT,"1P")
"RTN","SCMCHLR9",54,0)
 W ?70,"Page ",PAGE
"RTN","SCMCHLR9",55,0)
 S PAGE=PAGE+1
"RTN","SCMCHLR9",56,0)
 W !
"RTN","SCMCHLR9",57,0)
 S X=$G(SCRP("SORT"))
"RTN","SCMCHLR9",58,0)
 W !,"Sort By: "_$S(X="N":"Patient Name",X="D":"Date Error Received",X="P":"Provider",1:"Unknown")
"RTN","SCMCHLR9",59,0)
 I SCRP("BEGIN") D
"RTN","SCMCHLR9",60,0)
 .W ?40,"Date Range: "_$$FMTE^XLFDT(SCRP("BEGIN"))_" to "_$$FMTE^XLFDT($G(SCRP("END")))
"RTN","SCMCHLR9",61,0)
 E  D
"RTN","SCMCHLR9",62,0)
 .W ?40,"Date Range: "_$$DRMSG^SCMCHLR1
"RTN","SCMCHLR9",63,0)
 S X=$G(SCRP("EPS"))
"RTN","SCMCHLR9",64,0)
 W !,"Error Processing Status: "_$S(X=1:"New",X=2:"Checked",X=3:"New/Checked",1:"Unknown")
"RTN","SCMCHLR9",65,0)
 W ?40,$$MRKMSG^SCMCHLR1
"RTN","SCMCHLR9",66,0)
 W !
"RTN","SCMCHLR9",67,0)
 ;
"RTN","SCMCHLR9",68,0)
 W !?2,"Patient Name",?23,"PATID",?31,"Date Rec",?42,"Provider",?63,"Type",?70,"EP Status"
"RTN","SCMCHLR9",69,0)
 S $P(LINE,"-",80)="-"
"RTN","SCMCHLR9",70,0)
 W !,LINE,!
"RTN","SCMCHLR9",71,0)
 Q
"RTN","SCMCHLR9",72,0)
 ;
"RTN","SCMCHLR9",73,0)
 ;
"RTN","SCMCHLR9",74,0)
PAUSE ; Description: Screen pause.  Sets QUIT=1 if user decides to quit.
"RTN","SCMCHLR9",75,0)
 ;
"RTN","SCMCHLR9",76,0)
 N DIR,X,Y
"RTN","SCMCHLR9",77,0)
 F  Q:$Y>(IOSL-3)  W !
"RTN","SCMCHLR9",78,0)
 S DIR(0)="E"
"RTN","SCMCHLR9",79,0)
 D ^DIR
"RTN","SCMCHLR9",80,0)
 I ('(+Y))!$D(DIRUT) S QUIT=1
"RTN","SCMCHLR9",81,0)
 Q
"RTN","SCMCHLR9",82,0)
 ;
"RTN","SCMCHLR9",83,0)
 ;
"RTN","SCMCHLR9",84,0)
PRINTERR(SCSORTBY,SCEPS) ; Description: Print list of errors.
"RTN","SCMCHLR9",85,0)
 ;
"RTN","SCMCHLR9",86,0)
 ;  Input:
"RTN","SCMCHLR9",87,0)
 ;   SCSORTBY - Sort by criteria
"RTN","SCMCHLR9",88,0)
 ;               N -> Patient Name
"RTN","SCMCHLR9",89,0)
 ;               D -> Date/Time Ack Received
"RTN","SCMCHLR9",90,0)
 ;               P -> Provider
"RTN","SCMCHLR9",91,0)
 ;      SCEPS -  Error processing status
"RTN","SCMCHLR9",92,0)
 ;
"RTN","SCMCHLR9",93,0)
 ; Output: None
"RTN","SCMCHLR9",94,0)
 ;
"RTN","SCMCHLR9",95,0)
 N DFN,SCSUB,SCLINE,SCTXT,SCTLIEN,SCERIEN,SCTLOG,SCPROV,SCTYPE
"RTN","SCMCHLR9",96,0)
 ;
"RTN","SCMCHLR9",97,0)
 ;Loop thru sort array by pat name, OR date ack rec'd, OR provider
"RTN","SCMCHLR9",98,0)
 S SCSUB=$S(SCSORTBY="N":"",SCSORTBY="P":"",1:0)
"RTN","SCMCHLR9",99,0)
 F  S SCSUB=$O(^TMP("SCERRSRT",$J,SCSORTBY,SCSUB)) Q:SCSUB=""  D  Q:QUIT
"RTN","SCMCHLR9",100,0)
 .;loop through PCMM HL7 Transmission Log ien(s)
"RTN","SCMCHLR9",101,0)
 .S SCTLIEN=0
"RTN","SCMCHLR9",102,0)
 .F  S SCTLIEN=$O(^TMP("SCERRSRT",$J,SCSORTBY,SCSUB,SCTLIEN)) Q:'SCTLIEN  D  Q:QUIT
"RTN","SCMCHLR9",103,0)
 ..;loop through Error Code subfile ien(s)
"RTN","SCMCHLR9",104,0)
 ..S SCERIEN=0
"RTN","SCMCHLR9",105,0)
 ..F  S SCERIEN=$O(^TMP("SCERRSRT",$J,SCSORTBY,SCSUB,SCTLIEN,SCERIEN)) Q:'SCERIEN  D  Q:QUIT
"RTN","SCMCHLR9",106,0)
 ...;
"RTN","SCMCHLR9",107,0)
 ...;get data for PCMM HL7 Trans Log entry
"RTN","SCMCHLR9",108,0)
 ...I $$GETLOG^SCMCHLA(SCTLIEN,SCERIEN,.SCTLOG) D
"RTN","SCMCHLR9",109,0)
 ....;
"RTN","SCMCHLR9",110,0)
 ....;set retransmit flag in line
"RTN","SCMCHLR9",111,0)
 ....S SCLINE=$S($G(SCTLOG("STATUS"))="M":"*",1:" ")
"RTN","SCMCHLR9",112,0)
 ....;
"RTN","SCMCHLR9",113,0)
 ....;set patient name in line
"RTN","SCMCHLR9",114,0)
 ....S SCTXT=$$LOWER^VALM1($S($G(SCTLOG("WORK")):"WORKLOAD",$G(SCTLOG("DFN")):$P($G(^DPT(SCTLOG("DFN"),0)),"^",1),1:"UNKNOWN"))
"RTN","SCMCHLR9",115,0)
 ....S SCLINE=SCLINE_" "_$$LJ(SCTXT,18)
"RTN","SCMCHLR9",116,0)
 ....;
"RTN","SCMCHLR9",117,0)
 ....;set patient id in line
"RTN","SCMCHLR9",118,0)
 ....S DFN=+SCTLOG("DFN") D PID^VADPT
"RTN","SCMCHLR9",119,0)
 ....;D SET(SCARY,SCLINE,VA("BID"),SCCOL("PATID"),SCWID("PATID"),SCNUM,,,,.SCCNT)
"RTN","SCMCHLR9",120,0)
 ....S SCLINE=SCLINE_"   "_$$LJ(VA("BID"),5)
"RTN","SCMCHLR9",121,0)
 ....;
"RTN","SCMCHLR9",122,0)
 ....;set date ack received in line
"RTN","SCMCHLR9",123,0)
 ....S SCTXT=$$LOWER^VALM1($S($G(SCTLOG("ACK DT/TM")):$E($$FDATE^VALM1(SCTLOG("ACK DT/TM")),1,8),1:"UNKNOWN"))
"RTN","SCMCHLR9",124,0)
 ....S SCLINE=SCLINE_"   "_$$LJ(SCTXT,8)
"RTN","SCMCHLR9",125,0)
 ....;
"RTN","SCMCHLR9",126,0)
 ....;set provider in display in line
"RTN","SCMCHLR9",127,0)
 ....K SCHL
"RTN","SCMCHLR9",128,0)
 ....S SCPROV=""
"RTN","SCMCHLR9",129,0)
 ....;only get provider if ZPC segment error
"RTN","SCMCHLR9",130,0)
 ....I $G(SCTLOG("WORK")) S SCPROV=$P($G(^SCPT(404.471,SCTLIEN,0)),U,8)
"RTN","SCMCHLR9",131,0)
 ....I $G(SCTLOG("ERR","SEG"))="ZPC" D
"RTN","SCMCHLR9",132,0)
 .....I $$GETHL7ID^SCMCHLA2($G(SCTLOG("ERR","ZPCID")),.SCHL)
"RTN","SCMCHLR9",133,0)
 .....S SCPTR=$P($G(SCHL("HL7ID")),"-",2)
"RTN","SCMCHLR9",134,0)
 .....I '$G(SCTLOG("WORK")) S SCPROV=$P($G(^SCTM(404.52,+$G(SCPTR),0)),"^",3)
"RTN","SCMCHLR9",135,0)
 ....S SCTXT=$$LOWER^VALM1($S($G(SCPROV)'="":$$EXTERNAL^DILFD(404.52,.03,,SCPROV),1:"N/A"))
"RTN","SCMCHLR9",136,0)
 ....S SCLINE=SCLINE_"   "_$$LJ(SCTXT,18)
"RTN","SCMCHLR9",137,0)
 ....;
"RTN","SCMCHLR9",138,0)
 ....;set provider type in line
"RTN","SCMCHLR9",139,0)
 ....S SCTYPE=$P($G(SCHL("HL7ID")),"-",4)
"RTN","SCMCHLR9",140,0)
 ....S SCTXT=$S(SCTYPE'="":SCTYPE,1:"N/A")
"RTN","SCMCHLR9",141,0)
 ....S SCLINE=SCLINE_"   "_$$LJ(SCTXT,4)
"RTN","SCMCHLR9",142,0)
 ....;
"RTN","SCMCHLR9",143,0)
 ....;set error processing status in line
"RTN","SCMCHLR9",144,0)
 ....S SCTXT=$$LOWER^VALM1($S($G(SCTLOG("ERR","EPS")):$$EXTERNAL^DILFD(404.47142,.06,,SCTLOG("ERR","EPS")),1:"UNKNOWN"))
"RTN","SCMCHLR9",145,0)
 ....S SCLINE=SCLINE_"   "_$$LJ(SCTXT,7)
"RTN","SCMCHLR9",146,0)
 ....;
"RTN","SCMCHLR9",147,0)
 ....D LINE(SCLINE) Q:QUIT
"RTN","SCMCHLR9",148,0)
 ....;
"RTN","SCMCHLR9",149,0)
 ....;set error code/desc in line
"RTN","SCMCHLR9",150,0)
 ....I $$GETEC^SCMCHLA2($G(SCTLOG("ERR","CODE")),.SCERR)
"RTN","SCMCHLR9",151,0)
 ....S SCTXT="     Error: "_$S($G(SCERR("CODE"))'="":SCERR("CODE")_"-"_$G(SCERR("SHORT")),1:$$LOWER^VALM1("UNKNOWN"))
"RTN","SCMCHLR9",152,0)
 ....S SCLINE=$$LJ(SCTXT,80)
"RTN","SCMCHLR9",153,0)
 ....D LINE(SCLINE) Q:QUIT
"RTN","SCMCHLR9",154,0)
 ;
"RTN","SCMCHLR9",155,0)
 Q
"RTN","SCMCHLR9",156,0)
 ;
"RTN","SCMCHLR9",157,0)
 ;
"RTN","SCMCHLR9",158,0)
LJ(STRING,LENGTH) ;
"RTN","SCMCHLR9",159,0)
 ;
"RTN","SCMCHLR9",160,0)
 Q $$LJ^XLFSTR($E(STRING,1,LENGTH),LENGTH)
"RTN","SCMCPR1")
0^4^B5606708^B5800140
"RTN","SCMCPR1",1,0)
SCMCPR1 ;ALB/SCK - API FILE FOR STAFF ASSIGNMENTS ; 9/14/05 12:10pm
"RTN","SCMCPR1",2,0)
 ;;5.3;Scheduling;**41,45,264,297**;AUG 13, 1993
"RTN","SCMCPR1",3,0)
 ;;1.0
"RTN","SCMCPR1",4,0)
 Q
"RTN","SCMCPR1",5,0)
 ;
"RTN","SCMCPR1",6,0)
URSLKUP(SCDAT,SCUSR,SCVAL,SCREEN,SCINST,SCPC) ;
"RTN","SCMCPR1",7,0)
 ;   Does a lookup in the USR #8930.3 file based on the user class match passed in
"RTN","SCMCPR1",8,0)
 ;
"RTN","SCMCPR1",9,0)
 ;  Input 
"RTN","SCMCPR1",10,0)
 ;      SCUSR  User class to use for lookup
"RTN","SCMCPR1",11,0)
 ;      SCVAL  Partial User name to lookup on
"RTN","SCMCPR1",12,0)
 ;   
"RTN","SCMCPR1",13,0)
 ;   Returns an array of matches found, or an error array.        
"RTN","SCMCPR1",14,0)
 ;   Format for array:        
"RTN","SCMCPR1",15,0)
 ;        SCDATA(1)=[Data]
"RTN","SCMCPR1",16,0)
 ;        SCDATA(x)=IEN^New Users Name^Title
"RTN","SCMCPR1",17,0)
 ;
"RTN","SCMCPR1",18,0)
 ;   Format for Error:
"RTN","SCMCPR1",19,0)
 ;       SCDATA(1)=[Errors]
"RTN","SCMCPR1",20,0)
 ;       SCDATA(x)=" message "
"RTN","SCMCPR1",21,0)
 ;
"RTN","SCMCPR1",22,0)
 N SCI,N,SCRTN,SCTMP,SCTITLE,SCIEN,SCN,SCUERR
"RTN","SCMCPR1",23,0)
 ;
"RTN","SCMCPR1",24,0)
 I SCUSR']""&(SCINST=1) D  G USRQ
"RTN","SCMCPR1",25,0)
 . S N=0
"RTN","SCMCPR1",26,0)
 . D SETF("[Errors]")
"RTN","SCMCPR1",27,0)
 . D SETF("No User Class Defined")
"RTN","SCMCPR1",28,0)
 ;
"RTN","SCMCPR1",29,0)
 IF $L(SCVAL)<3&(SCINST=0) D  G USRQ
"RTN","SCMCPR1",30,0)
 . S N=0
"RTN","SCMCPR1",31,0)
 .D SETF("[Errors]")
"RTN","SCMCPR1",32,0)
 .D SETF("Insufficient characters to match")
"RTN","SCMCPR1",33,0)
 ;
"RTN","SCMCPR1",34,0)
 S N=0
"RTN","SCMCPR1",35,0)
 IF SCINST=1 D
"RTN","SCMCPR1",36,0)
 . D LIST^DIC(200,"",".01;8;28","","","",SCVAL,"","IF $$ISA^USRLM(Y,SCUSR,.SCUERR)","","")
"RTN","SCMCPR1",37,0)
 ;
"RTN","SCMCPR1",38,0)
 IF SCINST=0 D
"RTN","SCMCPR1",39,0)
 .D LIST^DIC(200,"",".01;8;28","","","",SCVAL,"",SCREEN,"","")
"RTN","SCMCPR1",40,0)
 ;
"RTN","SCMCPR1",41,0)
 S N=0
"RTN","SCMCPR1",42,0)
 D SETF("[Data]")
"RTN","SCMCPR1",43,0)
 S I="" F  S I=$O(^TMP("DILIST",$J,1,I)) Q:'I  D
"RTN","SCMCPR1",44,0)
 . S SCTMP=^TMP("DILIST",$J,2,I)_U
"RTN","SCMCPR1",45,0)
 . I $G(SCPC) I $O(^SD(403.46,+SCPC,2,0)) N PC S PC=0 D  Q:'PC  ;Put back for provider by role
"RTN","SCMCPR1",46,0)
 .. N CODE S CODE=$$GET^XUA4A72(+SCTMP) D  Q:PC
"RTN","SCMCPR1",47,0)
 ... I $D(^SD(403.46,+SCPC,2,+CODE)) S PC=1
"RTN","SCMCPR1",48,0)
 . S:SCINST SCTMP=SCTMP_$$CLNAME^USRLM(+SCUSR)
"RTN","SCMCPR1",49,0)
 . S SCTMP=SCTMP_U_U_U_U_^TMP("DILIST",$J,1,I)
"RTN","SCMCPR1",50,0)
 . S SCTMP=SCTMP_U_^TMP("DILIST",$J,"ID",I,8)
"RTN","SCMCPR1",51,0)
 . S SCTMP=SCTMP_U_^TMP("DILIST",$J,"ID",I,28)
"RTN","SCMCPR1",52,0)
 . D SETF(SCTMP)
"RTN","SCMCPR1",53,0)
 ;
"RTN","SCMCPR1",54,0)
 K ^TMP("DILIST",$J)
"RTN","SCMCPR1",55,0)
USRQ Q
"RTN","SCMCPR1",56,0)
 ;
"RTN","SCMCPR1",57,0)
SETF(X) ;
"RTN","SCMCPR1",58,0)
 S N=N+1
"RTN","SCMCPR1",59,0)
 S SCDAT(N)=X
"RTN","SCMCPR1",60,0)
 Q
"RTN","SCMCPR1",61,0)
 ;
"RTN","SCMCPR1",62,0)
 ;
"RTN","SCMCPR1",63,0)
TEST(CHK) ;
"RTN","SCMCPR1",64,0)
 N SC,SCCHECK
"RTN","SCMCPR1",65,0)
 K SCK
"RTN","SCMCPR1",66,0)
 IF CHK=1 D
"RTN","SCMCPR1",67,0)
 . S DIC="^USR(8930,",DIC("A")="Enter User Class: ",DIC(0)="AEMZ"
"RTN","SCMCPR1",68,0)
 . D ^DIC
"RTN","SCMCPR1",69,0)
 . W !,Y,!
"RTN","SCMCPR1",70,0)
 . R "Lookup: ",X:60
"RTN","SCMCPR1",71,0)
 . Q:'$G(Y)>0
"RTN","SCMCPR1",72,0)
 . D URSLKUP(.SCK,$P(Y,U),X,"",CHK)
"RTN","SCMCPR1",73,0)
 ;
"RTN","SCMCPR1",74,0)
 IF CHK=0 D
"RTN","SCMCPR1",75,0)
 . R "Name: ",X:60
"RTN","SCMCPR1",76,0)
 . D URSLKUP(.SCK,"",X,"",CHK)
"RTN","SCMCPR1",77,0)
 ;
"RTN","SCMCPR1",78,0)
 ;;;W ! ZW SCK
"RTN","SCMCPR1",79,0)
TESTQ Q
"RTN","SCMCQK")
0^17^B16433135^B13287149
"RTN","SCMCQK",1,0)
SCMCQK ;ALB/REW - Single Pt Tm/Pt Tm Pos Assign and Discharge ; 1 Jul 1998
"RTN","SCMCQK",2,0)
 ;;5.3;Scheduling;**148,177,297**;AUG 13, 1993
"RTN","SCMCQK",3,0)
 ;
"RTN","SCMCQK",4,0)
EN ; - main call
"RTN","SCMCQK",5,0)
 W !,"Primary Care Team/PC Assignment/Unassignment",!
"RTN","SCMCQK",6,0)
 W !,?6,"Prior to using this option, PCMM's Graphical User Interface (GUI)"
"RTN","SCMCQK",7,0)
 W !,?6,"must be used to:"
"RTN","SCMCQK",8,0)
 W !,?10,"1) Setup active primary care and non-primary care team(s)"
"RTN","SCMCQK",9,0)
 W !,?10,"2) Setup active PC and non-primary care Practitioner position(s)"
"RTN","SCMCQK",10,0)
 W !,?10,"3) Setup any necessary preceptor/preceptee relationships"
"RTN","SCMCQK",11,0)
 W !,?10,"4) Assign practitioner to position(s)"
"RTN","SCMCQK",12,0)
 W !!?6,"A patient can only have one PC team and one"
"RTN","SCMCQK",13,0)
 W !?6,"PC Position assignment on a given day.  The patient must be"
"RTN","SCMCQK",14,0)
 W !?6,"assigned to a position's team to be assigned to the position."
"RTN","SCMCQK",15,0)
 W !!?6,"Note: You must use the PCMM GUI if the patient was:"
"RTN","SCMCQK",16,0)
 W !?10,"o unassigned from PC assignment today or in the future"
"RTN","SCMCQK",17,0)
 W !?10,"o assigned to a future PC assignment."
"RTN","SCMCQK",18,0)
 N DFN
"RTN","SCMCQK",19,0)
 F  S DFN=$$PATIENT() Q:DFN<0  D PAT
"RTN","SCMCQK",20,0)
 Q
"RTN","SCMCQK",21,0)
 ;
"RTN","SCMCQK",22,0)
PAT ;process patient
"RTN","SCMCQK",23,0)
 Q:'$G(DFN)
"RTN","SCMCQK",24,0)
 N SCTPSTAT,SCTMSTAT,SCSTAT,SCTM,SCTP
"RTN","SCMCQK",25,0)
 W !,"Checking PC Team and Position Status...",!
"RTN","SCMCQK",26,0)
 ;display PC info, check if patient has a current PC team
"RTN","SCMCQK",27,0)
 D PCMM^SCRPU4(DFN,DT)
"RTN","SCMCQK",28,0)
 D DSPL^SCMCQK2
"RTN","SCMCQK",29,0)
 N DATA
"RTN","SCMCQK",30,0)
 S DATA=$$IU^SCMCTSK1(DFN)
"RTN","SCMCQK",31,0)
 I $E(DATA)=1 I $D(^XUSEC("SC PCMM SETUP",+$G(DUZ))) D
"RTN","SCMCQK",32,0)
 .W !,"This patient was inactivated from "_$P(DATA,"~",2)_" TEAM"
"RTN","SCMCQK",33,0)
 .W !,$P(DATA,"~",4)_" Position"
"RTN","SCMCQK",34,0)
 .W !,"Do you wish to reactivate" S %=2 D YN^DICN
"RTN","SCMCQK",35,0)
 .I %=1 D FILEIN^SCMCTSK3(.DATA,+$P(DATA,"~",6))
"RTN","SCMCQK",36,0)
 W !,"Do you want to make a primary care assignment/unassignment" S %=1 D YN^DICN Q:%<0
"RTN","SCMCQK",37,0)
 I %=2 G NPC^SCMCQK2
"RTN","SCMCQK",38,0)
 ;below functions return status^message^pointer
"RTN","SCMCQK",39,0)
 S SCTMSTAT=$$YSPTTMPC^SCMCTMU2(DFN,DT)  ;ok to assign new PC team?
"RTN","SCMCQK",40,0)
 S SCTPSTAT=$$YSPTTPPC^SCMCTPU2(DFN,DT,1)  ;ok to assign new PC prac?
"RTN","SCMCQK",41,0)
 ;what is current/future PC assignment status?
"RTN","SCMCQK",42,0)
 S SCSTAT=$S((SCTMSTAT&SCTPSTAT):"NONE",('SCTMSTAT&SCTPSTAT):"TEAM",('SCTMSTAT&'SCTPSTAT):"BOTH",1:"ERROR")  ;error if PC pract w/o PC team assignment
"RTN","SCMCQK",43,0)
 W:SCSTAT="NONE" !,"No current PC Team/PC Practitioner Assignments"
"RTN","SCMCQK",44,0)
 IF $S(SCTMSTAT:0,(SCTMSTAT["future"):1,1:0) W !,$P(SCTMSTAT,U,2) S SCSTAT="FUTURE"
"RTN","SCMCQK",45,0)
 IF $S(SCTPSTAT:0,(SCTPSTAT["future"):1,1:0) W !,$P(SCTPSTAT,U,2) S SCSTAT="FUTURE"
"RTN","SCMCQK",46,0)
 S SCTM=$P(SCTMSTAT,U,3)
"RTN","SCMCQK",47,0)
 S SCTP=$P(SCTPSTAT,U,3)
"RTN","SCMCQK",48,0)
 D @SCSTAT
"RTN","SCMCQK",49,0)
 D BREAK
"RTN","SCMCQK",50,0)
 Q
"RTN","SCMCQK",51,0)
 ;
"RTN","SCMCQK",52,0)
BREAK ;
"RTN","SCMCQK",53,0)
 N DIR,X,Y
"RTN","SCMCQK",54,0)
 S DIR(0)="EA",DIR("A",1)="",DIR("A")="Press enter to continue."
"RTN","SCMCQK",55,0)
 D ^DIR
"RTN","SCMCQK",56,0)
 Q
"RTN","SCMCQK",57,0)
 ;
"RTN","SCMCQK",58,0)
NONE ;
"RTN","SCMCQK",59,0)
 N SCASSDT
"RTN","SCMCQK",60,0)
 D ASTM^SCMCQK1
"RTN","SCMCQK",61,0)
 Q
"RTN","SCMCQK",62,0)
TEAM ;
"RTN","SCMCQK",63,0)
 N DIR,X,Y,SCDISCH,SCASSDT,SCSELECT
"RTN","SCMCQK",64,0)
 S DIR(0)="SO^1:POSITION ASSIGNMENT - BY PRACTITIONER NAME;2:POSITION ASSIGNMENT - BY POSITION NAME;3:TEAM UNASSIGNMENT"
"RTN","SCMCQK",65,0)
 D ^DIR
"RTN","SCMCQK",66,0)
 IF $P(Y,U,1)=1!($P(Y,U,1)=2) D
"RTN","SCMCQK",67,0)
 .S SCSELECT=$S($P(Y,U,1)=1:"PRACT",1:"POSIT")
"RTN","SCMCQK",68,0)
 .D ASTP^SCMCQK1
"RTN","SCMCQK",69,0)
 ELSE  D:$P(Y,U,1)=3 UNTM^SCMCQK1
"RTN","SCMCQK",70,0)
 Q
"RTN","SCMCQK",71,0)
 ;
"RTN","SCMCQK",72,0)
BOTH ;
"RTN","SCMCQK",73,0)
 N DIR,X,Y,SCDISCH
"RTN","SCMCQK",74,0)
 S DIR(0)="SO^1:PC ASSIGNMENT UNASSIGNMENT;2:TEAM UNASSIGNMENT"
"RTN","SCMCQK",75,0)
 D ^DIR
"RTN","SCMCQK",76,0)
 IF $P(Y,U,1)=1 D
"RTN","SCMCQK",77,0)
 .D UNTP^SCMCQK1
"RTN","SCMCQK",78,0)
 ELSE  D:$P(Y,U,1)=2 UNTM^SCMCQK1
"RTN","SCMCQK",79,0)
 Q
"RTN","SCMCQK",80,0)
 ;
"RTN","SCMCQK",81,0)
FUTURE ;
"RTN","SCMCQK",82,0)
 W !,"This patient has future assignments for Primary Care"
"RTN","SCMCQK",83,0)
 W !,"Team and/or Practitioner"
"RTN","SCMCQK",84,0)
 W !!!,"You must use PCMM's Graphical User Interface to change"
"RTN","SCMCQK",85,0)
 Q
"RTN","SCMCQK",86,0)
 ;
"RTN","SCMCQK",87,0)
ERROR ;
"RTN","SCMCQK",88,0)
 W !,"This patient has NO active Primary Care Team, but does have"
"RTN","SCMCQK",89,0)
 W !,"an active PC Position Assignment"
"RTN","SCMCQK",90,0)
 W !!!,"You must use PCMM's Graphical User Interface to correct"
"RTN","SCMCQK",91,0)
 Q
"RTN","SCMCQK",92,0)
 ;
"RTN","SCMCQK",93,0)
PATIENT() ;Return Patient DFN or -1
"RTN","SCMCQK",94,0)
 ;
"RTN","SCMCQK",95,0)
 N DIC,X,Y
"RTN","SCMCQK",96,0)
 W !!!
"RTN","SCMCQK",97,0)
 S DIC=2
"RTN","SCMCQK",98,0)
 S DIC(0)="AEMQZ"
"RTN","SCMCQK",99,0)
 D ^DIC
"RTN","SCMCQK",100,0)
 Q $S($D(DTOUT):-1,$D(DUOUT):-1,(Y<0):-1,1:+Y)
"RTN","SCMCQK1")
0^20^B91901955^B89435180
"RTN","SCMCQK1",1,0)
SCMCQK1 ;ALB/REW - Single Pt Tm/Pt Tm Pos Assign and Discharge ; 07 Oct 2002  12:10 PM
"RTN","SCMCQK1",2,0)
 ;;5.3;Scheduling;**148,177,231,264,436,297**;AUG 13, 1993
"RTN","SCMCQK1",3,0)
 ;
"RTN","SCMCQK1",4,0)
UNTP ;unassign patient from pc prac position
"RTN","SCMCQK1",5,0)
 IF '$G(SCTP) W !,"No position defined" Q
"RTN","SCMCQK1",6,0)
 N OK,SCER,SCCL,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS
"RTN","SCMCQK1",7,0)
 S OK=0
"RTN","SCMCQK1",8,0)
 W !,"About to Unassign "_$$NAME(DFN)_" from: ",!,?8,$$POSITION(SCTP)_" position   ["_$P($$GETPRTP^SCAPMCU2(SCTP,DT),U,2)_"]"
"RTN","SCMCQK1",9,0)
 S SCDISCH=$$DATE("D")
"RTN","SCMCQK1",10,0)
 G:SCDISCH<1 QTUNTP
"RTN","SCMCQK1",11,0)
 G:'$$CONFIRM() QTUNTP
"RTN","SCMCQK1",12,0)
 S OK=$$INPTSCTP^SCAPMC22(DFN,SCTP,SCDISCH,.SCER)
"RTN","SCMCQK1",13,0)
 G:OK'>0 QTUNTP
"RTN","SCMCQK1",14,0)
 S SCCL=$P($G(^SCTM(404.57,+$G(SCTP),0)),U,9)
"RTN","SCMCQK1",15,0)
 IF SCCL D DISCL
"RTN","SCMCQK1",16,0)
QTUNTP W !,"Position Unassignment "_$S(OK:"made.",1:"NOT made.")
"RTN","SCMCQK1",17,0)
 Q
"RTN","SCMCQK1",18,0)
 ;
"RTN","SCMCQK1",19,0)
ENRCL ;
"RTN","SCMCQK1",20,0)
 N SCRESTA,SCREST,SCCLNM,SCTM
"RTN","SCMCQK1",21,0)
 N SCCL
"RTN","SCMCQK1",22,0)
 F SCCL=0:0 S SCCL=$O(^SCTM(404.57,+$G(SCTP),5,SCCL)) Q:'SCCL  D
"RTN","SCMCQK1",23,0)
 .Q:$$ACTCL(DFN,SCCL)
"RTN","SCMCQK1",24,0)
 .W !!!,"The "_$$POSITION(SCTP)_" is associated with the ",$$CLINIC(SCCL)_" clinic."
"RTN","SCMCQK1",25,0)
 .; SCRESTA = Array of pt's teams causing restricted consults
"RTN","SCMCQK1",26,0)
 .N SCRESTA
"RTN","SCMCQK1",27,0)
 .S SCREST=$$RESTPT^SCAPMCU4(DFN,DT,"SCRESTA")
"RTN","SCMCQK1",28,0)
 .IF SCREST D
"RTN","SCMCQK1",29,0)
 ..N SCTM
"RTN","SCMCQK1",30,0)
 .. S SCCLNM=Y
"RTN","SCMCQK1",31,0)
 .. W !,?5,"Patient has restricted consults due to team assignment(s):"
"RTN","SCMCQK1",32,0)
 ..S SCTM=0
"RTN","SCMCQK1",33,0)
 ..F  S SCTM=$O(SCRESTA(SCTM)) Q:'SCTM  W !,?10,SCRESTA(SCTM)
"RTN","SCMCQK1",34,0)
 .IF SCREST&'$G(SCOKCONS) D  G QTECL
"RTN","SCMCQK1",35,0)
 ..W !,?5,"This patient may only be enrolled in clinics via"
"RTN","SCMCQK1",36,0)
 ..W !,?15,"Edit Clinic Enrollment Data option"
"RTN","SCMCQK1",37,0)
 .W !,"Do you wish to enroll the patient from this clinic on "
"RTN","SCMCQK1",38,0)
 .S Y=SCASSDT X ^DD("DD") W Y,"?"
"RTN","SCMCQK1",39,0)
 .IF $$YESNO() D
"RTN","SCMCQK1",40,0)
 ..W !,"Clinic Enrollment"
"RTN","SCMCQK1",41,0)
 ..IF $$ACPTCL^SCAPMC18(DFN,SCCL,,SCASSDT,"SCENER") W " made"
"RTN","SCMCQK1",42,0)
 ..ELSE  W "NOT made"
"RTN","SCMCQK1",43,0)
QTECL Q
"RTN","SCMCQK1",44,0)
 ;
"RTN","SCMCQK1",45,0)
DISCL ;
"RTN","SCMCQK1",46,0)
 N SCCL F SCCL=0:0 S SCCL=$O(^SCTM(404.57,+$G(SCTP),5,SCCL)) Q:'SCCL  D
"RTN","SCMCQK1",47,0)
 .Q:'$$ACTCL(DFN,SCCL)
"RTN","SCMCQK1",48,0)
 .W !,$$NAME(DFN)," is enrolled in the associated "_$$CLINIC(SCCL)_" clinic."
"RTN","SCMCQK1",49,0)
 .W !,"Do you wish to discharge the patient from this clinic on "
"RTN","SCMCQK1",50,0)
 .S Y=SCDISCH X ^DD("DD") W Y,"?"
"RTN","SCMCQK1",51,0)
 .Q:'$$YESNO()
"RTN","SCMCQK1",52,0)
 .N SDFN,SDCLN S SDFN=DFN,SDCLN=SCCL
"RTN","SCMCQK1",53,0)
 .N DFN D ^SDCD
"RTN","SCMCQK1",54,0)
QTDCL Q
"RTN","SCMCQK1",55,0)
 ;
"RTN","SCMCQK1",56,0)
UNTM ;
"RTN","SCMCQK1",57,0)
 ;assign patient from pc team (and pc position if possible)
"RTN","SCMCQK1",58,0)
 N OK,SCER,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS,OK2,OK3
"RTN","SCMCQK1",59,0)
 S OK=0
"RTN","SCMCQK1",60,0)
 W !!,"About to Unassign "_$$NAME(DFN)_" from "_$$TEAMNM(SCTM)_" team"
"RTN","SCMCQK1",61,0)
 W:'SCTPSTAT !,?5,"AND from "_$$POSITION(SCTP)_" position  ["_$$WRITETP^SCMCDD1(SCTP)_"]"
"RTN","SCMCQK1",62,0)
 S SCDISCH=$$DATE("D")
"RTN","SCMCQK1",63,0)
 G:SCDISCH<1 QTUNTM
"RTN","SCMCQK1",64,0)
 G:'$$CONFIRM() QTUNTM
"RTN","SCMCQK1",65,0)
 IF 'SCTPSTAT D  G:OK2'>0 QTUNTM
"RTN","SCMCQK1",66,0)
 .W !,"PC assignment unassigned."
"RTN","SCMCQK1",67,0)
 .S OK2=$$INPTSCTP^SCAPMC22(DFN,SCTP,SCDISCH,.SCER)
"RTN","SCMCQK1",68,0)
 .IF OK2>0 D
"RTN","SCMCQK1",69,0)
 ..W "made."
"RTN","SCMCQK1",70,0)
 ..S SCCL=$P(^SCTM(404.57,SCTP,0),U,9)
"RTN","SCMCQK1",71,0)
 ..D:SCCL DISCL
"RTN","SCMCQK1",72,0)
 S OK3=$$ALLPOS()
"RTN","SCMCQK1",73,0)
 IF $$OKINPTTM^SCMCTMU2(DFN,SCTM,SCDISCH) D
"RTN","SCMCQK1",74,0)
 .S OK=$$INPTSCTM^SCAPMC7(DFN,SCTM,SCDISCH,.SCER)
"RTN","SCMCQK1",75,0)
 ELSE  D
"RTN","SCMCQK1",76,0)
 . W !,"Future/Current Patient-Position Assignment exists"
"RTN","SCMCQK1",77,0)
QTUNTM W !,"Team Unassignment "_$S(OK:"made",1:"NOT made.")
"RTN","SCMCQK1",78,0)
 Q
"RTN","SCMCQK1",79,0)
 ;
"RTN","SCMCQK1",80,0)
ALLPOS() ;unassign all patient-positions for team
"RTN","SCMCQK1",81,0)
 ; not stand-alone - needs dfn,sctm
"RTN","SCMCQK1",82,0)
 ;   return 1=No positions left assigned|0=At least 1 position assigned
"RTN","SCMCQK1",83,0)
 N OK,SCDT1,SCPTTPX,SCERRR,SCTP,SCCNT,SCPTTPI,SCLOC,SCNODE,SCPTTP2
"RTN","SCMCQK1",84,0)
 S SCDT1("BEGIN")=SCDISCH+1
"RTN","SCMCQK1",85,0)
 S SCDT1("END")=3990101
"RTN","SCMCQK1",86,0)
 S SCDT1("INCL")=0  ;anytime from now to future
"RTN","SCMCQK1",87,0)
 S OK=$$TPPT^SCAPMC23(DFN,"SCDT1",,,,,,"SCPTTPX",.SCERRR)
"RTN","SCMCQK1",88,0)
 S (SCTP,SCCNT)=0
"RTN","SCMCQK1",89,0)
 W !,"Checking for other position assignments to team..."
"RTN","SCMCQK1",90,0)
 F  S SCTP=$O(SCPTTPX("SCTP",SCTM,SCTP)) Q:'SCTP  S SCCNT=SCCNT+1 D
"RTN","SCMCQK1",91,0)
 .S SCPTTPI=$O(SCPTTPX("SCTP",SCTM,SCTP,9999999),-1)
"RTN","SCMCQK1",92,0)
 .S SCLOC=$O(SCPTTPX("SCTP",SCTM,SCTP,SCPTTPI,0))
"RTN","SCMCQK1",93,0)
 .S SCNODE=SCPTTPX(SCLOC)
"RTN","SCMCQK1",94,0)
 .S SCPTTP2(SCTP)=""
"RTN","SCMCQK1",95,0)
 .W !,?3,$P(SCNODE,U,2),"   ",$P(SCNODE,U,8)
"RTN","SCMCQK1",96,0)
 .IF $P(SCNODE,U,6)!(SCDISCH'>$P(SCNODE,U,5)) D
"RTN","SCMCQK1",97,0)
 ..W !,?5,"Unassignment date already exists or unassignment after assignment date"
"RTN","SCMCQK1",98,0)
 ..W !,?15,"- Correct via PCMM GUI"
"RTN","SCMCQK1",99,0)
 ..S OK=0
"RTN","SCMCQK1",100,0)
 W !,?5,$S(SCCNT:SCCNT,1:"No")_" current/future position assignment(s)"
"RTN","SCMCQK1",101,0)
 G:'OK!('SCCNT) QTALL
"RTN","SCMCQK1",102,0)
 W !!,"About to unassign the above patient-position assignments"
"RTN","SCMCQK1",103,0)
 IF '$$CONFIRM S OK=0 G QTALL
"RTN","SCMCQK1",104,0)
 S SCTP=0
"RTN","SCMCQK1",105,0)
 F  S SCTP=$O(SCPTTP2(SCTP)) Q:'SCTP  D  Q:'OK
"RTN","SCMCQK1",106,0)
 .S OK=$$INPTSCTP^SCAPMC22(DFN,SCTP,SCDISCH,.SCER)
"RTN","SCMCQK1",107,0)
 .W:'OK !,?10,"Problem with unassignment, correct via PCMM GUI"
"RTN","SCMCQK1",108,0)
QTALL Q OK
"RTN","SCMCQK1",109,0)
 ;
"RTN","SCMCQK1",110,0)
ASTM ;assign patient to PC team
"RTN","SCMCQK1",111,0)
 N DIC,Y,OK,SCTM,SCTMFLDS,SCER,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS
"RTN","SCMCQK1",112,0)
 S OK=0
"RTN","SCMCQK1",113,0)
 W !!,"About to Assign "_$$NAME(DFN)_" to a primary care team"
"RTN","SCMCQK1",114,0)
 I $$SC(DFN) W !!,"********** This patient is 50 percent or greater service-connected ************"
"RTN","SCMCQK1",115,0)
 S DIC="^SCTM(404.51,"
"RTN","SCMCQK1",116,0)
 S DIC(0)="AEMQZ"
"RTN","SCMCQK1",117,0)
 S DIC("S")="IF $$ACTTM^SCMCTMU(Y,DT)&($P($G(^SCTM(404.51,Y,0)),U,5))"
"RTN","SCMCQK1",118,0)
 ;  - select from active teams that can be PC Teams
"RTN","SCMCQK1",119,0)
 D ^DIC
"RTN","SCMCQK1",120,0)
 G:Y<1 QTASTM
"RTN","SCMCQK1",121,0)
 S SCTM=+Y
"RTN","SCMCQK1",122,0)
 ;The following logic to present warning message added per SD*5.3*436
"RTN","SCMCQK1",123,0)
 I $P($G(^SCTM(404.51,SCTM,0)),U,10) D  G:'SCFLAG QTASTM
"RTN","SCMCQK1",124,0)
 .S SCFLAG=0
"RTN","SCMCQK1",125,0)
 .W !!,"This team is closed to further patient assignments.  While you are"
"RTN","SCMCQK1",126,0)
 .W !,"not currently prevented from assigning this patient, you may want to"
"RTN","SCMCQK1",127,0)
 .W !,"check before continuing."
"RTN","SCMCQK1",128,0)
 .Q:'$$YESNO1()  ; new function call per SD*5.3*436
"RTN","SCMCQK1",129,0)
 .Q:'$$CONFIRM()
"RTN","SCMCQK1",130,0)
 .S SCFLAG=1 W !
"RTN","SCMCQK1",131,0)
 S SCASSDT=$$DATE("A")
"RTN","SCMCQK1",132,0)
 G:SCASSDT<1 QTASTM
"RTN","SCMCQK1",133,0)
 S SCTMCT=$$TEAMCNT^SCAPMCU1(SCTM)
"RTN","SCMCQK1",134,0)
 S SCTMMAX=$P($$GETEAM^SCAPMCU3(SCTM),"^",8)
"RTN","SCMCQK1",135,0)
 I SCTMCT'<SCTMMAX  D  G QTASTM:$$WAITYN(),QTASTM:'$$YESNO2()
"RTN","SCMCQK1",136,0)
 .W !,"This assignment will reach or exceeded the maximum set for this team."
"RTN","SCMCQK1",137,0)
 .W !,"Currently assigned: "_SCTMCT
"RTN","SCMCQK1",138,0)
 .W !,"Maximum set for team: "_SCTMMAX
"RTN","SCMCQK1",139,0)
 I SCTMCT<SCTMMAX,'$$CONFIRM() G QTASTM
"RTN","SCMCQK1",140,0)
 S SCTM=+Y
"RTN","SCMCQK1",141,0)
 ;setup fields
"RTN","SCMCQK1",142,0)
 S SCTMFLDS(.08)=1 ;primary care assignment
"RTN","SCMCQK1",143,0)
 S SCTMFLDS(.11)=$G(DUZ,.5)
"RTN","SCMCQK1",144,0)
 D NOW^%DTC S SCTMFLDS(.12)=%
"RTN","SCMCQK1",145,0)
 IF $$ACPTTM^SCAPMC(DFN,SCTM,"SCTMFLDS",SCASSDT,"SCTPTME") D
"RTN","SCMCQK1",146,0)
 .S SCSELECT=$$SELPOS()
"RTN","SCMCQK1",147,0)
 .D:$L(SCSELECT) ASTP ;prompt for position prompt
"RTN","SCMCQK1",148,0)
 .S OK=1
"RTN","SCMCQK1",149,0)
QTASTM W !,"Team Assignment "_$S(OK:"made",1:"NOT made.")
"RTN","SCMCQK1",150,0)
 Q
"RTN","SCMCQK1",151,0)
ASTP ;assign patient to PC practitioner
"RTN","SCMCQK1",152,0)
 N DIC,Y,OK,SCCL,X,SCTPFLDS,SCER,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS
"RTN","SCMCQK1",153,0)
 S OK=0
"RTN","SCMCQK1",154,0)
 W !!,"About to Assign "_$$NAME(DFN)_" to PC Position Assignment"
"RTN","SCMCQK1",155,0)
 I $$SC(DFN) W !!,"********** This patient is 50 percent or greater service-connected ************"
"RTN","SCMCQK1",156,0)
 ;lookup to display only position and [practitioner]
"RTN","SCMCQK1",157,0)
 IF SCSELECT="PRACT" D
"RTN","SCMCQK1",158,0)
 .S DIC("W")="N SCP1 S SCP1=$G(^SCTM(404.52,Y,0)) W ""    ["",$P($G(^VA(200,+$P(SCP1,U,3),0)),U,1),""]"""
"RTN","SCMCQK1",159,0)
 .S DIC("A")="POSITION's Current PRACTITIONER: "
"RTN","SCMCQK1",160,0)
 .S DIC="^SCTM(404.52,"
"RTN","SCMCQK1",161,0)
 .;Must be from team, must be activation,must not have future inactivation
"RTN","SCMCQK1",162,0)
 .S DIC("S")="I $$PRACSCR^SCMCQK1(Y)"
"RTN","SCMCQK1",163,0)
 .S D="C"
"RTN","SCMCQK1",164,0)
 ELSE  D
"RTN","SCMCQK1",165,0)
 .S DIC="^SCTM(404.57,"
"RTN","SCMCQK1",166,0)
 .S D="B"
"RTN","SCMCQK1",167,0)
 .S DIC("A")="POSITION's Name: "
"RTN","SCMCQK1",168,0)
 .S DIC("S")="I $$POSSCR^SCMCQK1(Y)"
"RTN","SCMCQK1",169,0)
 S DIC(0)="AEMQZ"
"RTN","SCMCQK1",170,0)
 D MIX^DIC1
"RTN","SCMCQK1",171,0)
 G:Y<1 QTASTP
"RTN","SCMCQK1",172,0)
 IF SCSELECT="PRACT" D
"RTN","SCMCQK1",173,0)
 .S SCTP=$P(Y,U,2)
"RTN","SCMCQK1",174,0)
 ELSE  D
"RTN","SCMCQK1",175,0)
 .S SCTP=$P(Y,U,1)
"RTN","SCMCQK1",176,0)
 S SCASSDT=$$DATE("A")
"RTN","SCMCQK1",177,0)
 G:SCASSDT<1 QTASTP
"RTN","SCMCQK1",178,0)
 S SCTMCT=$$PCPOSCNT^SCAPMCU1(SCTP),SCTMMAX=+$P($G(^SCTM(404.57,SCTP,0)),U,8)
"RTN","SCMCQK1",179,0)
 I SCTMCT'<SCTMMAX D  G QTASTP:$$WAITYN,QTASTP:'$$YESNO2
"RTN","SCMCQK1",180,0)
 .W !,"This assignment will reach or exceeded the maximum set for this position."
"RTN","SCMCQK1",181,0)
 .W !,"Currently assigned: "_SCTMCT
"RTN","SCMCQK1",182,0)
 .W !,"Maximum set for position: "_SCTMMAX
"RTN","SCMCQK1",183,0)
 G:'$$CONFIRM() QTASTP
"RTN","SCMCQK1",184,0)
 ;setup fields
"RTN","SCMCQK1",185,0)
 S SCTPFLDS(.03)=SCASSDT
"RTN","SCMCQK1",186,0)
 S SCTPFLDS(.05)=1 ;pc pract role
"RTN","SCMCQK1",187,0)
 S SCTPFLDS(.06)=$G(DUZ,.5)
"RTN","SCMCQK1",188,0)
 D NOW^%DTC S SCTPFLDS(.07)=%
"RTN","SCMCQK1",189,0)
 IF $$ACPTTP^SCAPMC21(DFN,SCTP,"SCTPFLDS",SCASSDT,"SCTPTME",0) D
"RTN","SCMCQK1",190,0)
 .S OK=1
"RTN","SCMCQK1",191,0)
 .S SCCL=$O(^SCTM(404.57,+$G(SCTP),5,0))
"RTN","SCMCQK1",192,0)
 .D:SCCL ENRCL
"RTN","SCMCQK1",193,0)
QTASTP W !,"Position Assignment "_$S(OK:"made",1:"NOT made.")
"RTN","SCMCQK1",194,0)
 Q
"RTN","SCMCQK1",195,0)
NAME(DFN) ;return patient name
"RTN","SCMCQK1",196,0)
 Q $P($G(^DPT(DFN,0)),U,1)
"RTN","SCMCQK1",197,0)
 ;
"RTN","SCMCQK1",198,0)
POSITION(SCTP) ;return position name
"RTN","SCMCQK1",199,0)
 Q $P($G(^SCTM(404.57,SCTP,0)),U,1)
"RTN","SCMCQK1",200,0)
 ;
"RTN","SCMCQK1",201,0)
TEAMNM(SCTM) ;return team name
"RTN","SCMCQK1",202,0)
 Q $P($G(^SCTM(404.51,SCTM,0)),U,1)
"RTN","SCMCQK1",203,0)
 ;
"RTN","SCMCQK1",204,0)
CLINIC(SCCL) ;return clinic name
"RTN","SCMCQK1",205,0)
 Q $P($G(^SC(+SCCL,0)),U,1)
"RTN","SCMCQK1",206,0)
 ;
"RTN","SCMCQK1",207,0)
YESNO() ;
"RTN","SCMCQK1",208,0)
 N DIR,X,Y
"RTN","SCMCQK1",209,0)
 S DIR(0)="Y",DIR("B")="YES"
"RTN","SCMCQK1",210,0)
 D ^DIR
"RTN","SCMCQK1",211,0)
 Q Y>0
"RTN","SCMCQK1",212,0)
 ;
"RTN","SCMCQK1",213,0)
YESNO1() ; added per SD*5.3*436
"RTN","SCMCQK1",214,0)
 N DIR,X,Y
"RTN","SCMCQK1",215,0)
 S DIR(0)="Y",DIR("A")="Do you wish to assign this patient now (Yes/No)?"
"RTN","SCMCQK1",216,0)
 S DIR("B")="NO"
"RTN","SCMCQK1",217,0)
 D ^DIR
"RTN","SCMCQK1",218,0)
 Q Y>0
"RTN","SCMCQK1",219,0)
 ;
"RTN","SCMCQK1",220,0)
YESNO2() ;
"RTN","SCMCQK1",221,0)
 N DIR,X,Y
"RTN","SCMCQK1",222,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","SCMCQK1",223,0)
 S DIR("A")="Do you wish to continue with the assignment (Yes/No)?"
"RTN","SCMCQK1",224,0)
 D ^DIR
"RTN","SCMCQK1",225,0)
 Q Y>0
"RTN","SCMCQK1",226,0)
CONFIRM() ;confirmation call
"RTN","SCMCQK1",227,0)
 N DIR,X,Y
"RTN","SCMCQK1",228,0)
 S DIR("A")="Are you sure (Yes/No)"
"RTN","SCMCQK1",229,0)
 S DIR(0)="Y"
"RTN","SCMCQK1",230,0)
 D ^DIR
"RTN","SCMCQK1",231,0)
 Q +Y=1
"RTN","SCMCQK1",232,0)
 ;
"RTN","SCMCQK1",233,0)
SELPOS() ;return way to select position: 1=PRACT,2=POSIT,3=NONE
"RTN","SCMCQK1",234,0)
 N DIR,X,Y
"RTN","SCMCQK1",235,0)
 W !,"Choose way to select PC POSITION Assignment: "
"RTN","SCMCQK1",236,0)
 S DIR(0)="SO^0:NONE;1:BY PRACTITIONER ASSIGNMENT;2:BY POSITION ASSIGNMENT"
"RTN","SCMCQK1",237,0)
 S DIR("B")=1
"RTN","SCMCQK1",238,0)
 D ^DIR
"RTN","SCMCQK1",239,0)
 Q $S(Y'>0:"",+Y=1:"PRACT",1:"POSIT")
"RTN","SCMCQK1",240,0)
 ;
"RTN","SCMCQK1",241,0)
DATE(TYPE) ;return date type=A or D
"RTN","SCMCQK1",242,0)
 N DIR,X,Y
"RTN","SCMCQK1",243,0)
 S DIR("A")=$S(TYPE="A":"Assignment",1:"Unassignment")_" date: "
"RTN","SCMCQK1",244,0)
 S DIR(0)="DA^::EXP"
"RTN","SCMCQK1",245,0)
 S Y=$S($D(SCDISCH):SCDISCH,$D(SCASSDT):SCASSDT,(TYPE="A"):"TODAY",1:"TODAY-1")
"RTN","SCMCQK1",246,0)
 X ^DD("DD")
"RTN","SCMCQK1",247,0)
 S DIR("B")=Y
"RTN","SCMCQK1",248,0)
 D ^DIR
"RTN","SCMCQK1",249,0)
 Q Y
"RTN","SCMCQK1",250,0)
ACTCL(DFN,SCCL) ;is patient enrolled in clinic?
"RTN","SCMCQK1",251,0)
 N SCXX
"RTN","SCMCQK1",252,0)
 S SCXX=$O(^DPT(DFN,"DE","B",SCCL,9999),-1)
"RTN","SCMCQK1",253,0)
 Q $S('SCXX:0,($P(^DPT(DFN,"DE",+SCXX,0),U,2)="I"):0,1:1)
"RTN","SCMCQK1",254,0)
 ;
"RTN","SCMCQK1",255,0)
PRACSCR(SC40452) ;screen for for file 404.52
"RTN","SCMCQK1",256,0)
 N SCP,SCNODE,OK
"RTN","SCMCQK1",257,0)
 S SCP=$G(^SCTM(404.52,SC40452,0))
"RTN","SCMCQK1",258,0)
 S OK=0
"RTN","SCMCQK1",259,0)
 G:'SCP QTPP
"RTN","SCMCQK1",260,0)
 S SCNODE=$G(^SCTM(404.57,+SCP,0))
"RTN","SCMCQK1",261,0)
 S OK=$S($P(SCNODE,U,2)'=SCTM:0,'$P(SCNODE,U,4):0,($O(^SCTM(404.52,"AIDT",+SCP,1,""))'=-$P(SCP,U,2)):0,($O(^SCTM(404.52,"AIDT",+SCP,0,-$P(SCP,U,2)),-1)):0,($$ACTTP^SCMCTPU(+SCP)>0):1,1:0)
"RTN","SCMCQK1",262,0)
QTPP Q OK
"RTN","SCMCQK1",263,0)
 ;
"RTN","SCMCQK1",264,0)
POSSCR(SCTP) ;screen for file 404.57
"RTN","SCMCQK1",265,0)
 N SCNODE
"RTN","SCMCQK1",266,0)
 S SCNODE=$G(^SCTM(404.57,SCTP,0))
"RTN","SCMCQK1",267,0)
 Q $S($P(SCNODE,U,2)'=SCTM:0,'$P(SCNODE,U,4):0,($$ACTTP^SCMCTPU(SCTP)>0):1,1:0)
"RTN","SCMCQK1",268,0)
 Q
"RTN","SCMCQK1",269,0)
WAITYN() ;
"RTN","SCMCQK1",270,0)
 N %,OK,Y
"RTN","SCMCQK1",271,0)
 I SCTMCT<SCTMMAX Q 0
"RTN","SCMCQK1",272,0)
 N A,SC S A=$$ONWAIT^SCMCWAIT(DFN) I A W:(+A=3) !,$P(A,";",2) I $S($G(SCTP):A>1,1:1) Q 0
"RTN","SCMCQK1",273,0)
 N DIR,X,Y
"RTN","SCMCQK1",274,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","SCMCQK1",275,0)
 S DIR("A")="Do you wish to place the patient on the wait list (Yes/No)?"
"RTN","SCMCQK1",276,0)
 D ^DIR
"RTN","SCMCQK1",277,0)
 I Y=1 S Y=$$WAITS^SCMCWAIT(DFN,SCTM,$G(SCTP),$G(SC)) I Y>0 W !,"Patient Placed on Wait List"
"RTN","SCMCQK1",278,0)
 Q Y>0
"RTN","SCMCQK1",279,0)
SC(DFN) ;Is patient 50 to 100%
"RTN","SCMCQK1",280,0)
 D ELIG^VADPT Q $P($G(VAEL(3)),U,2)>49
"RTN","SCMCQK2")
0^19^B56192341^n/a
"RTN","SCMCQK2",1,0)
SCMCQK2 ;ALB/REW - Single Pt Tm/Pt Tm Pos Assign and Discharge ; 07 Oct 2002  12:10 PM
"RTN","SCMCQK2",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCQK2",3,0)
 ;
"RTN","SCMCQK2",4,0)
DSPL ;
"RTN","SCMCQK2",5,0)
 N LP,SCD,SCPOS
"RTN","SCMCQK2",6,0)
 S SCTOK=$$TMPT^SCAPMC3(DFN,"SCDT","","SCD","SCER1")
"RTN","SCMCQK2",7,0)
 S SCOK=$$TPPT^SCAPMC(DFN,"","","","","","","SCPOS","SCBKERR")
"RTN","SCMCQK2",8,0)
  ;
"RTN","SCMCQK2",9,0)
  ;loop through positions only getting the ones associated with the team
"RTN","SCMCQK2",10,0)
  ;and that are active.
"RTN","SCMCQK2",11,0)
  ;
"RTN","SCMCQK2",12,0)
  F LP=0:0 S LP=$O(SCPOS(LP)) Q:'LP  D
"RTN","SCMCQK2",13,0)
  .I $P(SCPOS(LP),U,6)]"" K SCPOS(LP) Q
"RTN","SCMCQK2",14,0)
  .S SCPOS("T",$P(SCPOS(LP),U,3),+SCPOS(LP))=SCPOS(LP)
"RTN","SCMCQK2",15,0)
 S CNT=0,POS=0
"RTN","SCMCQK2",16,0)
 F LP=0:0 S LP=$O(SCD(LP)) Q:'LP  S A=SCD(LP) I '$P(A,U,8) D
"RTN","SCMCQK2",17,0)
 .I 'CNT W !!,"NON PC ASSIGNMENTS",!
"RTN","SCMCQK2",18,0)
 .S CNT=CNT+1 W !,CNT,?4,"Non-PC Team: "_$P(A,U,2),?48,"Phone: "_$P($G(^SCTM(404.51,+A,0)),U,2) S DATA(CNT)=+A
"RTN","SCMCQK2",19,0)
 .F I=0:0 S I=$O(SCPOS("T",+A,I)) Q:'I  D
"RTN","SCMCQK2",20,0)
 ..I $P(DATA(CNT),U,2) S CNT=CNT+1
"RTN","SCMCQK2",21,0)
 ..S B=SCPOS("T",+A,I)
"RTN","SCMCQK2",22,0)
 ..S DATA(CNT)=(+A)_U_(+B),POS=1
"RTN","SCMCQK2",23,0)
 ..S SCPR=$$GETPRTP^SCAPMCU2(+B,DT),RES=$$NEWPERSN^SCMCGU(+SCPR,"SCPR")
"RTN","SCMCQK2",24,0)
 ..W:$X>76 !,CNT,?4,"Non-PC Team: "_$P(A,U,2),?48,"Phone: "_$P($G(^SCTM(404.51,+A,0)),U,2)
"RTN","SCMCQK2",25,0)
 ..W !,?7,"Provider: "_$P(SCPR,U,2),?45,"Position: "_$P(B,U,2)_"       "
"RTN","SCMCQK2",26,0)
 ..W !,?10,"Pager: "_$P($G(SCPR(+SCPR)),U,5),?48,"Phone: ",$P($G(SCPR(+SCPR)),U,2),?77," "
"RTN","SCMCQK2",27,0)
 I 'CNT W !,"No active NON PC ASSIGNMENTS for this patient",!
"RTN","SCMCQK2",28,0)
 Q
"RTN","SCMCQK2",29,0)
NPC N SCDT,SCER1,SCD,SCPOS
"RTN","SCMCQK2",30,0)
 D DSPL
"RTN","SCMCQK2",31,0)
 S DIR(0)="SO^0:NONE;1:TEAM ASSIGNMENT;"_$S(CNT:"2:POSITION ASSIGNMENT;3:UNASSIGNMENT;",1:"")
"RTN","SCMCQK2",32,0)
 S DIR("B")=1
"RTN","SCMCQK2",33,0)
 D ^DIR
"RTN","SCMCQK2",34,0)
 I Y=0 Q
"RTN","SCMCQK2",35,0)
 I Y=U Q
"RTN","SCMCQK2",36,0)
 I Y=1 D ASTM G NPC
"RTN","SCMCQK2",37,0)
READ S:CNT=1 X=1 I CNT>1 W !,"Select 1-"_CNT_": " R X:DTIME  Q:X=U  S X=+X I X>CNT!X<1 G READ
"RTN","SCMCQK2",38,0)
 I Y=3 S DATA=DATA(+X) S SCTPSTAT=1,SCTP=+$P(DATA,U,2),SCTM=+DATA D UNTP:SCTP,UNTM:'SCTP G NPC
"RTN","SCMCQK2",39,0)
 S DATA=DATA(+X),SCTM=+DATA S SCSELECT=$$SELPOS() G NPC:'$L(SCSELECT) D ASTP G NPC
"RTN","SCMCQK2",40,0)
 Q
"RTN","SCMCQK2",41,0)
UNTP ;unassign patient from position
"RTN","SCMCQK2",42,0)
 IF '$G(SCTP) W !,"No position defined" Q
"RTN","SCMCQK2",43,0)
 N OK,SCER,SCCL,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS
"RTN","SCMCQK2",44,0)
 S OK=0
"RTN","SCMCQK2",45,0)
 W !,"About to Unassign "_$$NAME(DFN)_" from: ",!,?8,$$POSITION(SCTP)_" position   ["_$P($$GETPRTP^SCAPMCU2(SCTP,DT),U,2)_"]"
"RTN","SCMCQK2",46,0)
 S SCDISCH=$$DATE("D")
"RTN","SCMCQK2",47,0)
 G:SCDISCH<1 QTUNTP
"RTN","SCMCQK2",48,0)
 G:'$$CONFIRM() QTUNTP
"RTN","SCMCQK2",49,0)
 S OK=$$INPTSCTP^SCAPMC22(DFN,SCTP,SCDISCH,.SCER)
"RTN","SCMCQK2",50,0)
 G:OK'>0 QTUNTP
"RTN","SCMCQK2",51,0)
 S SCCL=$P($G(^SCTM(404.57,+$G(SCTP),0)),U,9)
"RTN","SCMCQK2",52,0)
QTUNTP W !,"Position Unassignment "_$S(OK:"made.",1:"NOT made.")
"RTN","SCMCQK2",53,0)
 Q
"RTN","SCMCQK2",54,0)
 ;
"RTN","SCMCQK2",55,0)
 ;
"RTN","SCMCQK2",56,0)
UNTM ;
"RTN","SCMCQK2",57,0)
 ;assign patient from non pc team (and pc position if possible)
"RTN","SCMCQK2",58,0)
 N OK,SCER,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS,OK2,OK3
"RTN","SCMCQK2",59,0)
 S OK=0
"RTN","SCMCQK2",60,0)
 W !!,"About to Unassign "_$$NAME(DFN)_" from "_$$TEAMNM(SCTM)_" team"
"RTN","SCMCQK2",61,0)
 W:'SCTPSTAT !,?5,"AND from "_$$POSITION(SCTP)_" position  ["_$$WRITETP^SCMCDD1(SCTP)_"]"
"RTN","SCMCQK2",62,0)
 S SCDISCH=$$DATE("D")
"RTN","SCMCQK2",63,0)
 G:SCDISCH<1 QTUNTM
"RTN","SCMCQK2",64,0)
 G:'$$CONFIRM() QTUNTM
"RTN","SCMCQK2",65,0)
 IF 'SCTPSTAT D  G:OK2'>0 QTUNTM
"RTN","SCMCQK2",66,0)
 .W !,"Unassigned."
"RTN","SCMCQK2",67,0)
 .S OK2=$$INPTSCTP^SCAPMC22(DFN,SCTP,SCDISCH,.SCER)
"RTN","SCMCQK2",68,0)
 .IF OK2>0 D
"RTN","SCMCQK2",69,0)
 ..W "made."
"RTN","SCMCQK2",70,0)
 ..S SCCL=$P(^SCTM(404.57,SCTP,0),U,9)
"RTN","SCMCQK2",71,0)
 S OK3=$$ALLPOS^SCMCQK1()
"RTN","SCMCQK2",72,0)
 IF $$OKINPTTM^SCMCTMU2(DFN,SCTM,SCDISCH) D
"RTN","SCMCQK2",73,0)
 .S OK=$$INPTSCTM^SCAPMC7(DFN,SCTM,SCDISCH,.SCER)
"RTN","SCMCQK2",74,0)
 ELSE  D
"RTN","SCMCQK2",75,0)
 . W !,"Future/Current Patient-Position Assignment exists"
"RTN","SCMCQK2",76,0)
QTUNTM W !,"Team Unassignment "_$S(OK:"made",1:"NOT made.")
"RTN","SCMCQK2",77,0)
 Q
"RTN","SCMCQK2",78,0)
 ;
"RTN","SCMCQK2",79,0)
ASTM ;assign patient to team
"RTN","SCMCQK2",80,0)
 N DIC,Y,OK,SCTM,SCTMFLDS,SCER,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS
"RTN","SCMCQK2",81,0)
 S OK=0
"RTN","SCMCQK2",82,0)
 W !!,"About to Assign "_$$NAME(DFN)_" to a non primary care team"
"RTN","SCMCQK2",83,0)
 I $$SC^SCMCQK1(DFN) W !!,"********** This patient is 50 percent or greater service-connected ************"
"RTN","SCMCQK2",84,0)
 S DIC="^SCTM(404.51,"
"RTN","SCMCQK2",85,0)
 S DIC(0)="AEMQZ"
"RTN","SCMCQK2",86,0)
 S DIC("S")="IF $$ACTTM^SCMCTMU(Y,DT) I $$NEW^SCMCQK2()"
"RTN","SCMCQK2",87,0)
 ;  - select from active teams that can not be PC Teams
"RTN","SCMCQK2",88,0)
 D ^DIC
"RTN","SCMCQK2",89,0)
 G:Y<1 QTASTM
"RTN","SCMCQK2",90,0)
 S SCTM=+Y
"RTN","SCMCQK2",91,0)
 S SCASSDT=$$DATE("A")
"RTN","SCMCQK2",92,0)
 G:SCASSDT<1 QTASTM
"RTN","SCMCQK2",93,0)
 S SCTMCT=$$TEAMCNT^SCAPMCU1(SCTM)
"RTN","SCMCQK2",94,0)
 S SCTMMAX=$P($$GETEAM^SCAPMCU3(SCTM),"^",8)
"RTN","SCMCQK2",95,0)
 I SCTMCT'<SCTMMAX  D  G QTASTM:'$$YESNO2()
"RTN","SCMCQK2",96,0)
 .W !,"This assignment will reach or exceeded the maximum set for this team."
"RTN","SCMCQK2",97,0)
 .W !,"Currently assigned: "_SCTMCT
"RTN","SCMCQK2",98,0)
 .W !,"Maximum set for team: "_SCTMMAX
"RTN","SCMCQK2",99,0)
 I SCTMCT<SCTMMAX,'$$CONFIRM() G QTASTM
"RTN","SCMCQK2",100,0)
 S SCTM=+Y
"RTN","SCMCQK2",101,0)
 ;setup fields
"RTN","SCMCQK2",102,0)
 ;S SCTMFLDS(.08)=1 ;primary care assignment
"RTN","SCMCQK2",103,0)
 S SCTMFLDS(.11)=$G(DUZ,.5)
"RTN","SCMCQK2",104,0)
 D NOW^%DTC S SCTMFLDS(.12)=%
"RTN","SCMCQK2",105,0)
 IF $$ACPTTM^SCAPMC(DFN,SCTM,"SCTMFLDS",SCASSDT,"SCTPTME") D
"RTN","SCMCQK2",106,0)
 .S SCSELECT=$$SELPOS()
"RTN","SCMCQK2",107,0)
 .D:$L(SCSELECT) ASTP ;prompt for position prompt
"RTN","SCMCQK2",108,0)
 .S OK=1
"RTN","SCMCQK2",109,0)
QTASTM W !,"Team Assignment "_$S(OK:"made",1:"NOT made.")
"RTN","SCMCQK2",110,0)
 Q
"RTN","SCMCQK2",111,0)
ASTP ;assign patient to practitioner
"RTN","SCMCQK2",112,0)
 N DIC,Y,OK,SCCL,X,SCTPFLDS,SCER,SCBEGIN,SCN,SCLIST,SCEND,SCINCL,SCLSEQ,SCDATES,SCDTS
"RTN","SCMCQK2",113,0)
 S OK=0
"RTN","SCMCQK2",114,0)
 W !!,"About to Assign "_$$NAME(DFN)_" to non PC Position Assignment"
"RTN","SCMCQK2",115,0)
 I $$SC^SCMCQK1(DFN) W !!,"********** This patient is 50 percent or greater service-connected ************"
"RTN","SCMCQK2",116,0)
 ;lookup to display only position and [practitioner]
"RTN","SCMCQK2",117,0)
 IF SCSELECT="PRACT" D
"RTN","SCMCQK2",118,0)
 .S DIC("W")="N SCP1 S SCP1=$G(^SCTM(404.52,Y,0)) W ""    ["",$P($G(^VA(200,+$P(SCP1,U,3),0)),U,1),""]"""
"RTN","SCMCQK2",119,0)
 .S DIC("A")="POSITION's Current PRACTITIONER: "
"RTN","SCMCQK2",120,0)
 .S DIC="^SCTM(404.52,"
"RTN","SCMCQK2",121,0)
 .;Must be from team, must be active,must not have future inactivation
"RTN","SCMCQK2",122,0)
 .S DIC("S")="I $$PRACSCR^SCMCQK2(Y)"
"RTN","SCMCQK2",123,0)
 .S D="C"
"RTN","SCMCQK2",124,0)
 ELSE  D
"RTN","SCMCQK2",125,0)
 .S DIC="^SCTM(404.57,"
"RTN","SCMCQK2",126,0)
 .S D="B"
"RTN","SCMCQK2",127,0)
 .S DIC("A")="POSITION's Name: "
"RTN","SCMCQK2",128,0)
 .S DIC("S")="I $$POSSCR^SCMCQK2(Y)"
"RTN","SCMCQK2",129,0)
 S DIC(0)="AEMQZ"
"RTN","SCMCQK2",130,0)
 D MIX^DIC1
"RTN","SCMCQK2",131,0)
 G:Y<1 QTASTP
"RTN","SCMCQK2",132,0)
 IF SCSELECT="PRACT" D
"RTN","SCMCQK2",133,0)
 .S SCTP=$P(Y,U,2)
"RTN","SCMCQK2",134,0)
 ELSE  D
"RTN","SCMCQK2",135,0)
 .S SCTP=$P(Y,U,1)
"RTN","SCMCQK2",136,0)
 S SCASSDT=$$DATE("A")
"RTN","SCMCQK2",137,0)
 G:SCASSDT<1 QTASTP
"RTN","SCMCQK2",138,0)
 S SCTMCT=$$PCPOSCNT^SCAPMCU1(SCTP),SCTMMAX=+$P($G(^SCTM(404.57,SCTP,0)),U,8)
"RTN","SCMCQK2",139,0)
 I SCTMCT'<SCTMMAX D  G QTASTP:'$$YESNO2
"RTN","SCMCQK2",140,0)
 .W !,"This assignment will reach or exceeded the maximum set for this position."
"RTN","SCMCQK2",141,0)
 .W !,"Currently assigned: "_SCTMCT
"RTN","SCMCQK2",142,0)
 .W !,"Maximum set for position: "_SCTMMAX
"RTN","SCMCQK2",143,0)
 G:'$$CONFIRM() QTASTP
"RTN","SCMCQK2",144,0)
 ;setup fields
"RTN","SCMCQK2",145,0)
 S SCTPFLDS(.03)=SCASSDT
"RTN","SCMCQK2",146,0)
 ;S SCTPFLDS(.05)=1 ;pc pract role
"RTN","SCMCQK2",147,0)
 S SCTPFLDS(.06)=$G(DUZ,.5)
"RTN","SCMCQK2",148,0)
 D NOW^%DTC S SCTPFLDS(.07)=%
"RTN","SCMCQK2",149,0)
 IF $$ACPTTP^SCAPMC21(DFN,SCTP,"SCTPFLDS",SCASSDT,"SCTPTME",0) D
"RTN","SCMCQK2",150,0)
 .S OK=1
"RTN","SCMCQK2",151,0)
 .S SCCL=$P(^SCTM(404.57,SCTP,0),U,9)
"RTN","SCMCQK2",152,0)
QTASTP W !,"Position Assignment "_$S(OK:"made",1:"NOT made.")
"RTN","SCMCQK2",153,0)
 Q
"RTN","SCMCQK2",154,0)
NAME(DFN) ;return patient name
"RTN","SCMCQK2",155,0)
 Q $P($G(^DPT(DFN,0)),U,1)
"RTN","SCMCQK2",156,0)
 ;
"RTN","SCMCQK2",157,0)
POSITION(SCTP) ;return position name
"RTN","SCMCQK2",158,0)
 Q $P($G(^SCTM(404.57,SCTP,0)),U,1)
"RTN","SCMCQK2",159,0)
 ;
"RTN","SCMCQK2",160,0)
TEAMNM(SCTM) ;return team name
"RTN","SCMCQK2",161,0)
 Q $P($G(^SCTM(404.51,SCTM,0)),U,1)
"RTN","SCMCQK2",162,0)
 ;
"RTN","SCMCQK2",163,0)
CLINIC(SCCL) ;return clinic name
"RTN","SCMCQK2",164,0)
 Q $P($G(^SC(+SCCL,0)),U,1)
"RTN","SCMCQK2",165,0)
 ;
"RTN","SCMCQK2",166,0)
YESNO() ;
"RTN","SCMCQK2",167,0)
 N DIR,X,Y
"RTN","SCMCQK2",168,0)
 S DIR(0)="Y",DIR("B")="YES"
"RTN","SCMCQK2",169,0)
 D ^DIR
"RTN","SCMCQK2",170,0)
 Q Y>0
"RTN","SCMCQK2",171,0)
 ;
"RTN","SCMCQK2",172,0)
YESNO2() ;
"RTN","SCMCQK2",173,0)
 N DIR,X,Y
"RTN","SCMCQK2",174,0)
 S DIR(0)="Y",DIR("B")="NO"
"RTN","SCMCQK2",175,0)
 S DIR("A")="Do you wish to continue with the assignment (Yes/No)?"
"RTN","SCMCQK2",176,0)
 D ^DIR
"RTN","SCMCQK2",177,0)
 Q Y>0
"RTN","SCMCQK2",178,0)
CONFIRM() ;confirmation call
"RTN","SCMCQK2",179,0)
 N DIR,X,Y
"RTN","SCMCQK2",180,0)
 S DIR("A")="Are you sure (Yes/No)"
"RTN","SCMCQK2",181,0)
 S DIR(0)="Y"
"RTN","SCMCQK2",182,0)
 D ^DIR
"RTN","SCMCQK2",183,0)
 Q +Y=1
"RTN","SCMCQK2",184,0)
 ;
"RTN","SCMCQK2",185,0)
SELPOS() ;return way to select position: 1=PRACT,2=POSIT,3=NONE
"RTN","SCMCQK2",186,0)
 N DIR,X,Y
"RTN","SCMCQK2",187,0)
 W !,"Choose way to select NON PC POSITION Assignment: "
"RTN","SCMCQK2",188,0)
 S DIR(0)="SO^0:NONE;1:BY PRACTITIONER ASSIGNMENT;2:BY POSITION ASSIGNMENT"
"RTN","SCMCQK2",189,0)
 S DIR("B")=1
"RTN","SCMCQK2",190,0)
 D ^DIR
"RTN","SCMCQK2",191,0)
 Q $S(Y'>0:"",+Y=1:"PRACT",1:"POSIT")
"RTN","SCMCQK2",192,0)
 ;
"RTN","SCMCQK2",193,0)
DATE(TYPE) ;return date type=A or D
"RTN","SCMCQK2",194,0)
 N DIR,X,Y
"RTN","SCMCQK2",195,0)
 S DIR("A")=$S(TYPE="A":"Assignment",1:"Unassignment")_" date: "
"RTN","SCMCQK2",196,0)
 S DIR(0)="DA^::EXP"
"RTN","SCMCQK2",197,0)
 S Y=$S($D(SCDISCH):SCDISCH,$D(SCASSDT):SCASSDT,(TYPE="A"):"TODAY",1:"TODAY-1")
"RTN","SCMCQK2",198,0)
 X ^DD("DD")
"RTN","SCMCQK2",199,0)
 S DIR("B")=Y
"RTN","SCMCQK2",200,0)
 D ^DIR
"RTN","SCMCQK2",201,0)
 Q Y
"RTN","SCMCQK2",202,0)
 ;
"RTN","SCMCQK2",203,0)
PRACSCR(SC40452) ;screen for for file 404.52
"RTN","SCMCQK2",204,0)
 N SCP,SCNODE,OK
"RTN","SCMCQK2",205,0)
 S SCP=$G(^SCTM(404.52,SC40452,0))
"RTN","SCMCQK2",206,0)
 S OK=0
"RTN","SCMCQK2",207,0)
 G:'SCP QTPP
"RTN","SCMCQK2",208,0)
 S SCNODE=$G(^SCTM(404.57,+SCP,0))
"RTN","SCMCQK2",209,0)
 S OK=$S($P(SCNODE,U,2)'=SCTM:0,$P(SCNODE,U,4):0,($O(^SCTM(404.52,"AIDT",+SCP,1,""))'=-$P(SCP,U,2)):0,($O(^SCTM(404.52,"AIDT",+SCP,0,-$P(SCP,U,2)),-1)):0,($$ACTTP^SCMCTPU(+SCP)>0):1,1:0)
"RTN","SCMCQK2",210,0)
QTPP Q OK
"RTN","SCMCQK2",211,0)
 ;
"RTN","SCMCQK2",212,0)
POSSCR(SCTP) ;screen for file 404.57
"RTN","SCMCQK2",213,0)
 N SCNODE
"RTN","SCMCQK2",214,0)
 S SCNODE=$G(^SCTM(404.57,SCTP,0))
"RTN","SCMCQK2",215,0)
 Q $S($P(SCNODE,U,2)'=SCTM:0,$P(SCNODE,U,4):0,($$ACTTP^SCMCTPU(SCTP)>0):1,1:0)
"RTN","SCMCQK2",216,0)
 Q
"RTN","SCMCQK2",217,0)
NEW() ;
"RTN","SCMCQK2",218,0)
 F I=0:0 S I=$O(SCD(I)) Q:'I  I (+SCD(I))=(+Y) Q
"RTN","SCMCQK2",219,0)
 Q 'I
"RTN","SCMCTSK")
0^1^B36414078^B26701850
"RTN","SCMCTSK",1,0)
SCMCTSK ;ALB/JDS - PCMM ; 03 Jun 2004  3:30 PM
"RTN","SCMCTSK",2,0)
 ;;5.3;Scheduling;**264,278,272,297**;AUG 13, 1993
"RTN","SCMCTSK",3,0)
 Q
"RTN","SCMCTSK",4,0)
RPT1 ;REPORT
"RTN","SCMCTSK",5,0)
 N DHD,DIOBEG
"RTN","SCMCTSK",6,0)
 S DIOBEG="D INACTIVE^SCMCTSK",DIC="^SCPT(404.43,",(FLDS,BY)="[SCMC PENDING UNASSIGN]"
"RTN","SCMCTSK",7,0)
 S DHD="Patients Flagged for Inactivation from Primary Care Panels"
"RTN","SCMCTSK",8,0)
 D EN1^DIP
"RTN","SCMCTSK",9,0)
 Q
"RTN","SCMCTSK",10,0)
INACTIVE ;run every night to determine if patient can be inactivated from
"RTN","SCMCTSK",11,0)
 ;team
"RTN","SCMCTSK",12,0)
 ;Inactivation happens for patients without activity for 24 months
"RTN","SCMCTSK",13,0)
 N I,TEAMNM
"RTN","SCMCTSK",14,0)
 D DT^DICRW S X="T-12M" D ^%DT S STDT=Y
"RTN","SCMCTSK",15,0)
 S X="T-24M" D ^%DT S TYDT=+Y
"RTN","SCMCTSK",16,0)
RPT ;eneter for report with STDT and TYDT defined
"RTN","SCMCTSK",17,0)
 S A="^SCPT(404.43,""ADFN""",L=""""""
"RTN","SCMCTSK",18,0)
 S Q=A_")"
"RTN","SCMCTSK",19,0)
 F  S Q=$Q(@Q) Q:Q'[A  D
"RTN","SCMCTSK",20,0)
 .S ENTRY=+$P(Q,",",6)
"RTN","SCMCTSK",21,0)
 .S TEAM=$P(Q,",",4)
"RTN","SCMCTSK",22,0)
 .;I $P($G(^SCTM(404.51,+TEAM,0)),U,16) Q  ;no automatic for this team
"RTN","SCMCTSK",23,0)
 .;I $G(^DPT(DFN,.35)) D DIS Q  ;Patient is deceased
"RTN","SCMCTSK",24,0)
 .I $P(Q,",",5)>STDT Q  ;Later
"RTN","SCMCTSK",25,0)
 .S ZERO=$G(^SCPT(404.43,+ENTRY,0))
"RTN","SCMCTSK",26,0)
 .I $P(ZERO,U,4) Q  ;Already unassigned
"RTN","SCMCTSK",27,0)
 .I '$P(ZERO,U,5) Q  ;not Primary Care
"RTN","SCMCTSK",28,0)
 .;I $P(ZERO,U,16) Q  ;No Automatic unassign
"RTN","SCMCTSK",29,0)
 .;Check if any activity
"RTN","SCMCTSK",30,0)
 .S DFN=$P(Q,",",3),DFN=+$G(^SCPT(404.42,+DFN,0))
"RTN","SCMCTSK",31,0)
 .S SEEN=0
"RTN","SCMCTSK",32,0)
 .S TEAM=$P(Q,",",4),TEAMNM=$P($G(^SCTM(404.51,+TEAM,0)),U)
"RTN","SCMCTSK",33,0)
 .;who was provider for this position
"RTN","SCMCTSK",34,0)
 .Q:$$SEEN1(DFN,+$P(ZERO,U,2))
"RTN","SCMCTSK",35,0)
 .;I $G(DIS) D DIS Q
"RTN","SCMCTSK",36,0)
 .S ^TMP("SCMCTSK",$J,ENTRY)=""
"RTN","SCMCTSK",37,0)
 Q
"RTN","SCMCTSK",38,0)
SEEN1(DFN,POS) ;
"RTN","SCMCTSK",39,0)
 S SEEN=0
"RTN","SCMCTSK",40,0)
 K PROV F I=0:0 S I=$O(^SCTM(404.52,"B",+$G(POS),I)) Q:'I  D
"RTN","SCMCTSK",41,0)
 .N A S A=$G(^SCTM(404.52,+I,0)) I $P(A,U,4) S PROV(+$P(A,U,3))="" Q
"RTN","SCMCTSK",42,0)
 .I $P(A,U,2)<TYDT K PROV(+$P(A,U,3))
"RTN","SCMCTSK",43,0)
 F PROV=0:0 S PROV=$O(PROV(PROV)) Q:'PROV  D SEEN
"RTN","SCMCTSK",44,0)
 Q SEEN
"RTN","SCMCTSK",45,0)
SEEN ;See if seen in last 24 months go through visits
"RTN","SCMCTSK",46,0)
 F I=0:0 S I=$O(^AUPNVSIT("AA",DFN,I)) Q:'I  Q:(9999999-I<TYDT)  D  Q:SEEN
"RTN","SCMCTSK",47,0)
 .F J=0:0 S J=$O(^AUPNVSIT("AA",DFN,I,J)) Q:'J  D
"RTN","SCMCTSK",48,0)
 ..F P=0:0 S P=$O(^AUPNVPRV("AD",J,P))  Q:'P  S:PROV=(+$G(^AUPNVPRV(P,0))) SEEN=1 Q:SEEN  ;GET THE PROVIDERJ
"RTN","SCMCTSK",49,0)
 Q
"RTN","SCMCTSK",50,0)
DIS ;discharge
"RTN","SCMCTSK",51,0)
 N ZERO S ZERO=$G(^SCPT(404.43,+ENTRY,0))
"RTN","SCMCTSK",52,0)
 I $P(ZERO,U,4) Q  ;Already discharged
"RTN","SCMCTSK",53,0)
 ;I $P(ZERO,U,16) Q
"RTN","SCMCTSK",54,0)
 S DA=ENTRY,DIE="^SCPT(404.43,",DR=".04////"_DT_";.12////IU"
"RTN","SCMCTSK",55,0)
 D ^DIE
"RTN","SCMCTSK",56,0)
 ;
"RTN","SCMCTSK",57,0)
 Q
"RTN","SCMCTSK",58,0)
DEATH ;Called from date of death event
"RTN","SCMCTSK",59,0)
 ;
"RTN","SCMCTSK",60,0)
 I $G(DGFILE)'=2 Q
"RTN","SCMCTSK",61,0)
 I $G(DGFIELD)'=.351 Q
"RTN","SCMCTSK",62,0)
 S DFN=+$G(DGDA)
"RTN","SCMCTSK",63,0)
 N DEATH,I,DR,SCJ
"RTN","SCMCTSK",64,0)
 D DEM^VADPT S DEATH=$G(VADM(6))
"RTN","SCMCTSK",65,0)
 ;loop through assignments
"RTN","SCMCTSK",66,0)
 F SCJ=0:0 S SCJ=$O(^SCPT(404.42,"B",DFN,SCJ)) Q:'SCJ  D
"RTN","SCMCTSK",67,0)
 .S ZERO=$G(^SCPT(404.42,SCJ,0)) Q:'$L(ZERO)
"RTN","SCMCTSK",68,0)
 .I DEATH,'$P(ZERO,U,9) D
"RTN","SCMCTSK",69,0)
 ..S DA=SCJ,DIE="^SCPT(404.42,",DR=".09////"_DT_";.15////DU" D ^DIE
"RTN","SCMCTSK",70,0)
 .I ('DEATH)&($P(ZERO,U,15)="DU")&($P(ZERO,U,9)) D
"RTN","SCMCTSK",71,0)
 ..S DA=SCJ,DIE="^SCPT(404.42,",DR=".09///@;.15////DD" D ^DIE
"RTN","SCMCTSK",72,0)
 .F SCI=0:0 S SCI=$O(^SCPT(404.43,"B",SCJ,SCI)) Q:'SCI  D
"RTN","SCMCTSK",73,0)
 ..S ZERO=$G(^SCPT(404.43,SCI,0)),SCTP=+$P(ZERO,U,2) Q:'$L(ZERO)
"RTN","SCMCTSK",74,0)
 ..I DEATH,$P(ZERO,U,4) Q
"RTN","SCMCTSK",75,0)
 ..I 'DEATH I (('$P(ZERO,U,4))!($P(ZERO,U,12)'="DU")) Q
"RTN","SCMCTSK",76,0)
 ..I DEATH D  Q
"RTN","SCMCTSK",77,0)
 ...S DA=SCI,DIE="^SCPT(404.43,",DR=".04////"_DT_";.12////DU" D ^DIE
"RTN","SCMCTSK",78,0)
 ..I '+$$ACTHIST^SCAPMCU2(404.52,SCTP,,.SCERR) Q
"RTN","SCMCTSK",79,0)
 ..S DA=SCI,DIE="^SCPT(404.43,",DR=".04///@;.12////DD" D ^DIE
"RTN","SCMCTSK",80,0)
 Q:'DEATH
"RTN","SCMCTSK",81,0)
 ;DISPOSITION WAIT LIST
"RTN","SCMCTSK",82,0)
 F I=0:0 S I=$O(^SDWL(409.3,"B",+$G(DFN),I)) Q:'I  S A=$G(^SDWL(409.3,I,0)) D
"RTN","SCMCTSK",83,0)
 .I $G(^SDWL(409.3,I,"DIS")) Q
"RTN","SCMCTSK",84,0)
 .N FDA S FDA(409.3,I_",",21)="D"
"RTN","SCMCTSK",85,0)
 .S FDA(409.3,I_",",19)=DT,FDA(409.3,I_",",23)="C"
"RTN","SCMCTSK",86,0)
 .S FDA(409.3,I_",",20)=DUZ
"RTN","SCMCTSK",87,0)
 .D UPDATE^DIE("","FDA")
"RTN","SCMCTSK",88,0)
 Q
"RTN","SCMCTSK",89,0)
POST ;
"RTN","SCMCTSK",90,0)
 D MES^XPDUTL("Deleting Traditional ASTAT CROSS REFERENCE from FILE 404.43")
"RTN","SCMCTSK",91,0)
 D DELIX^DDMOD(404.43,.12,1)
"RTN","SCMCTSK",92,0)
 N ENTRY,DGDA,DGFIELD,DGFILE
"RTN","SCMCTSK",93,0)
 K DGLEFDA,YEAR
"RTN","SCMCTSK",94,0)
 I '$D(^SCTM(404.46,"B","1.2.3.0")) D
"RTN","SCMCTSK",95,0)
 .K DO S DIC(0)="LM",DIC("DR")=".02////1;.03////"_DT,DIC="^SCTM(404.46,",X="1.2.3.0" D FILE^DICN
"RTN","SCMCTSK",96,0)
 I '$D(^SCTM(404.45,"B","SD*5.3*264")) D
"RTN","SCMCTSK",97,0)
 .S ENTRY=$O(^SCTM(404.46,"B","1.2.3.0",0))
"RTN","SCMCTSK",98,0)
 .S DIC("DR")=".02////"_(+ENTRY)_";.03////"_DT_";.04////1",DIC(0)="LM"
"RTN","SCMCTSK",99,0)
 .K DO S X="SD*5.3*264",DIC="^SCTM(404.45," D FILE^DICN
"RTN","SCMCTSK",100,0)
 D MES^XPDUTL("Removing Patients with Date of Death from Team/Position Assignments")
"RTN","SCMCTSK",101,0)
 S YEAR=0
"RTN","SCMCTSK",102,0)
 F DATE=0:0 S DATE=$O(^DPT("AEXP1",DATE)) Q:'DATE  F DGDA=0:0 S DGDA=$O(^DPT("AEXP1",DATE,DGDA)) Q:'DGDA  D
"RTN","SCMCTSK",103,0)
 .S DFN=+DGDA D DEM^VADPT I $G(VADM(6)) S DGFILE=2,DGFIELD=.351 D DEATH
"RTN","SCMCTSK",104,0)
 .I $E(YEAR,1,3)'=$E(DATE,1,3) S YEAR=$E(DATE,1,3) I "05"[$E(YEAR,3) D MES^XPDUTL("Starting with Dates of Death in "_(1700+YEAR))
"RTN","SCMCTSK",105,0)
 Q
"RTN","SCMCTSK",106,0)
POST278 ;postinit for 278
"RTN","SCMCTSK",107,0)
 D MES^XPDUTL("Setting up GUI to VistA mapping")
"RTN","SCMCTSK",108,0)
 I '$D(^SCTM(404.46,"B","1.2.3.1")) D
"RTN","SCMCTSK",109,0)
 .K DO S DIC(0)="LM",DIC("DR")=".02////1;.03////"_DT,DIC="^SCTM(404.46,",X="1.2.3.1" D FILE^DICN
"RTN","SCMCTSK",110,0)
 I '$D(^SCTM(404.45,"B","SD*5.3*278")) D
"RTN","SCMCTSK",111,0)
 .S ENTRY=$O(^SCTM(404.46,"B","1.2.3.1",0))
"RTN","SCMCTSK",112,0)
 .S DIC("DR")=".02////"_(+ENTRY)_";.03////"_DT_";.04////1",DIC(0)="LM"
"RTN","SCMCTSK",113,0)
 .K DO S X="SD*5.3*278",DIC="^SCTM(404.45," D FILE^DICN
"RTN","SCMCTSK",114,0)
 Q
"RTN","SCMCTSK",115,0)
FTEE(DATA,SCTEAM) ;return list of posistions for the team
"RTN","SCMCTSK",116,0)
 ;IEN^POSITION^PROVIDER^FTEE
"RTN","SCMCTSK",117,0)
 N CNT,I,J,K,A S CNT=1 S SCTEAM=+$G(SCTEAM),DATA(1)="<DATA>"
"RTN","SCMCTSK",118,0)
 S A=""
"RTN","SCMCTSK",119,0)
 F  S A=$O(^SCTM(404.57,"ATMPOS",SCTEAM,A)) Q:A=""  D
"RTN","SCMCTSK",120,0)
 .F I=0:0 S I=$O(^SCTM(404.57,"ATMPOS",SCTEAM,A,I)) Q:'I  D
"RTN","SCMCTSK",121,0)
 ..I '$$DATES^SCAPMCU1(404.59,I) Q   ;Not an active position
"RTN","SCMCTSK",122,0)
 ..I '$P($G(^SCTM(404.57,I,0)),U,4) Q  ;Not PC
"RTN","SCMCTSK",123,0)
 ..S J=-(DT+1) S J=$O(^SCTM(404.52,"AIDT",I,1,J)) Q:J=""
"RTN","SCMCTSK",124,0)
 ..I $O(^SCTM(404.52,"AIDT",I,0,-(DT+1)))<J Q
"RTN","SCMCTSK",125,0)
 ..S K=0 S K=$O(^SCTM(404.52,"AIDT",I,1,J,K)) Q:'K
"RTN","SCMCTSK",126,0)
 ..S ZERO=$G(^SCTM(404.52,+K,0)) Q:'$P(ZERO,U,4)
"RTN","SCMCTSK",127,0)
 ..S CNT=CNT+1
"RTN","SCMCTSK",128,0)
 ..S DATA(CNT)=K_U_A_U_$$GET1^DIQ(200,(+$P(ZERO,U,3))_",",.01)_U_$P(ZERO,U,9)_U_K_U_$P(ZERO,U,3)
"RTN","SCMCTSK",129,0)
 Q
"RTN","SCMCTSK",130,0)
FILE(RES,DATA) ;File data on FTEE
"RTN","SCMCTSK",131,0)
 N I
"RTN","SCMCTSK",132,0)
 F I=1:1 Q:'$D(DATA(I))   D
"RTN","SCMCTSK",133,0)
 .S ZERO=$G(^SCTM(404.52,+DATA(I),0))
"RTN","SCMCTSK",134,0)
 .I $P(ZERO,U,9)=$P(DATA(I),U,7) Q
"RTN","SCMCTSK",135,0)
 .S FLDA(404.52,(+DATA(I))_",",.09)=+$TR($P(DATA(I),U,7)," ")
"RTN","SCMCTSK",136,0)
 I $O(FLDA(0)) D FILE^DIE("E","FLDA","ERR")
"RTN","SCMCTSK",137,0)
 Q
"RTN","SCMCTSK",138,0)
FTEXR ;Ftee cross reference
"RTN","SCMCTSK",139,0)
 N DIC,DD,DO,DINUM,DS,ENTRY,VALUE
"RTN","SCMCTSK",140,0)
 I '$D(^SCTM(404.52,+DA,1,0)) S ^(0)="^404.521DA"
"RTN","SCMCTSK",141,0)
 S ENTRY=+$G(DA),VALUE=X
"RTN","SCMCTSK",142,0)
 N DIC,FLDA,Y,DA,X S DIC="^SCTM(404.52,"_ENTRY_",1,",DA(1)=ENTRY
"RTN","SCMCTSK",143,0)
 S DIC(0)="LM",X="NOW",DIC("DR")=".02////"_VALUE_";.03////"_$G(DUZ)
"RTN","SCMCTSK",144,0)
 D ^DICN
"RTN","SCMCTSK",145,0)
 Q
"RTN","SCMCTSK",146,0)
SCREEN ;Screen for active assignments
"RTN","SCMCTSK",147,0)
 N A S A=$G(^SCTM(404.52,D0,0))
"RTN","SCMCTSK",148,0)
 N J S J=-(DT+1),J=$O(^SCTM(404.52,"AIDT",+A,1,J)) I J="" S X=0 Q
"RTN","SCMCTSK",149,0)
 I '$P($G(^SCTM(404.57,+A,0)),U,4) Q  ;Not PC
"RTN","SCMCTSK",150,0)
 I '$$DATES^SCAPMCU1(404.59,+A) Q   ;Not an active position
"RTN","SCMCTSK",151,0)
 I $O(^SCTM(404.52,"AIDT",+A,0,-(DT+1)))<J S X=0 Q
"RTN","SCMCTSK",152,0)
 I '$D(^SCTM(404.52,"AIDT",+A,1,J,D0)) S X=0 Q
"RTN","SCMCTSK",153,0)
 S X=1 Q
"RTN","SCMCTSK1")
0^3^B77403484^n/a
"RTN","SCMCTSK1",1,0)
SCMCTSK1 ;ALB/JDS - PCMM Inactivations; 18 Apr 2003  9:36 AM ; 7/19/05 9:59am
"RTN","SCMCTSK1",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK1",3,0)
 Q
"RTN","SCMCTSK1",4,0)
INACTIVE ;run every night to determine if patient can be inactivated from
"RTN","SCMCTSK1",5,0)
 ;team
"RTN","SCMCTSK1",6,0)
 ;Inactivation happens for patients without activity for 24 months
"RTN","SCMCTSK1",7,0)
 N I,CNT,SC297,TPZ,TYDT,TEAMN,STDT,Q S CNT=0
"RTN","SCMCTSK1",8,0)
 D DT^DICRW S %DT="",X="T-11M" D ^%DT S STDT=Y
"RTN","SCMCTSK1",9,0)
 S SC297=$$PDAT^SCMCGU("SD*5.3*297"),X1=DT,X2=SC297 D D^%DTC S SC297=X
"RTN","SCMCTSK1",10,0)
 S X="T-"_$S(SC297>330:"11M",1:"23M") D ^%DT S TYDT=+Y
"RTN","SCMCTSK1",11,0)
 S A="^SCPT(404.43,""ADFN""",L=""""""
"RTN","SCMCTSK1",12,0)
 S Q=A_")"
"RTN","SCMCTSK1",13,0)
 F  S Q=$Q(@Q) Q:Q'[A  D
"RTN","SCMCTSK1",14,0)
 .S ENTRY=+$P(Q,",",6)
"RTN","SCMCTSK1",15,0)
 .S ZERO=$G(^SCPT(404.43,+ENTRY,0))
"RTN","SCMCTSK1",16,0)
 .S POS=+$P(ZERO,U,2)
"RTN","SCMCTSK1",17,0)
 .S TEAM=$P(Q,",",4)
"RTN","SCMCTSK1",18,0)
 .;I $P($G(^SCTM(404.51,+TEAM,0)),U,16) Q  ;no automatic for this team
"RTN","SCMCTSK1",19,0)
 .;I $G(^DPT(DFN,.35)) D DIS Q  ;Patient is deceased
"RTN","SCMCTSK1",20,0)
 .I $P(ZERO,U,3)>STDT Q  ;Later
"RTN","SCMCTSK1",21,0)
 .I $P(ZERO,U,17) Q  ;Already reactivated
"RTN","SCMCTSK1",22,0)
 .;get preceptor position
"RTN","SCMCTSK1",23,0)
 .S PREC=$$DATES^SCAPMCU1(404.53,+POS),PREC=$S(PREC:$P($G(^SCTM(404.53,+$P(PREC,U,4),0)),U,6),1:+POS)
"RTN","SCMCTSK1",24,0)
 .;see if provider changed
"RTN","SCMCTSK1",25,0)
 .I $O(^SCTM(404.52,"AIDT",+PREC,1,-STDT),-1) Q
"RTN","SCMCTSK1",26,0)
 .I $P(ZERO,U,4) Q  ;Already unassigned
"RTN","SCMCTSK1",27,0)
 .I '$P(ZERO,U,5) Q  ;Not primary care
"RTN","SCMCTSK1",28,0)
 .;I $P(ZERO,U,16) Q  ;No Automatic unassign
"RTN","SCMCTSK1",29,0)
 .;Check if any activity
"RTN","SCMCTSK1",30,0)
 .S DFN=$P(Q,",",3)
"RTN","SCMCTSK1",31,0)
 .I $G(XPDIDTOT),('(DFN#5)) D UPDATE^XPDID(DFN)
"RTN","SCMCTSK1",32,0)
 .S TEAM=$P(Q,",",4),TEAMNM=$P($G(^SCTM(404.51,+TEAM,0)),U)
"RTN","SCMCTSK1",33,0)
 .D SEEN Q:SEEN
"RTN","SCMCTSK1",34,0)
 .I '$P(ZERO,U,15) D
"RTN","SCMCTSK1",35,0)
 ..S DIE="^SCPT(404.43,",DR=".15////"_DT,DA=ENTRY D ^DIE
"RTN","SCMCTSK1",36,0)
 ..S TPZ=$G(^SCTM(404.57,+POS,2))
"RTN","SCMCTSK1",37,0)
 ..I "TP"[$P(TPZ,U,10) I $G(PROV) S CNT=CNT+1,^TMP("SCF",$J,PROV,CNT,ENTRY)=""
"RTN","SCMCTSK1",38,0)
 ..I $P(TPZ,U,9),$G(PRECP) S CNT=CNT+1,^TMP("SCF",$J,PRECP,CNT,ENTRY)=""
"RTN","SCMCTSK1",39,0)
 Q
"RTN","SCMCTSK1",40,0)
SEEN ;was patient seen
"RTN","SCMCTSK1",41,0)
 S SEEN=0
"RTN","SCMCTSK1",42,0)
 N SCPRO,I,PRECP,PRO
"RTN","SCMCTSK1",43,0)
 N X,SCPRDTS,SCPR
"RTN","SCMCTSK1",44,0)
 ;get list of providers for this position
"RTN","SCMCTSK1",45,0)
 S PROV=+$$GETPRTP^SCAPMCU2(POS,DT) S SCPRO(+PROV)=""
"RTN","SCMCTSK1",46,0)
 S SCPRDTS("BEGIN")=TYDT
"RTN","SCMCTSK1",47,0)
 S SCPRDTS("END")=DT
"RTN","SCMCTSK1",48,0)
 S X=$$PRTP^SCAPMC(POS,"SCPRDTS","SCPR")
"RTN","SCMCTSK1",49,0)
 F I=0:0 S I=$O(SCPR(I)) Q:'I  S SCPRO(+SCPR(I))=""
"RTN","SCMCTSK1",50,0)
 S PRECP=0 I $G(PREC),$G(PREC)'=POS S PRECP=+$$GETPRTP^SCAPMCU2(PREC,DT),SCPRO(+PRECP)=""
"RTN","SCMCTSK1",51,0)
 F I=TYDT:0 S I=$O(^SCE("ADFN",DFN,I)) Q:'I  D  Q:SEEN
"RTN","SCMCTSK1",52,0)
 .F J=0:0 S J=$O(^SCE("ADFN",DFN,I,J)) Q:'J  D  Q:SEEN
"RTN","SCMCTSK1",53,0)
 ..N VISIT S VISIT=+$P($G(^SCE(J,0)),U,5) I $G(^SCE(J,0))<$G(TYDT) Q
"RTN","SCMCTSK1",54,0)
 ..F PRO=0:0 S PRO=$O(SCPRO(PRO)) Q:'PRO  D  Q:SEEN
"RTN","SCMCTSK1",55,0)
 ...I $D(^SDD(409.44,"AO",J,$G(PRO))) S SEEN=1 Q  ;GET THE PROVIDERJ
"RTN","SCMCTSK1",56,0)
 ...N V F V=0:0 S V=$O(^AUPNVPRV("AD",VISIT,V)) Q:'V  I PRO=(+$G(^AUPNVPRV(V,0))) S SEEN=1 Q
"RTN","SCMCTSK1",57,0)
 Q
"RTN","SCMCTSK1",58,0)
DIS ;discharge
"RTN","SCMCTSK1",59,0)
 N ZERO S ZERO=$G(^SCPT(404.43,+ENTRY,0))
"RTN","SCMCTSK1",60,0)
 I $P(ZERO,U,4) Q  ;Already discharged
"RTN","SCMCTSK1",61,0)
 D DIS2^SCMCTSK7
"RTN","SCMCTSK1",62,0)
 Q
"RTN","SCMCTSK1",63,0)
EXTEND(DATA,SCTEAM) ;return list of patients to inactivate in next 60 days
"RTN","SCMCTSK1",64,0)
 ;IEN^POSITION^PATIENT^EXTENDED^REASON
"RTN","SCMCTSK1",65,0)
 K DATA,SCDATA,SDDATA
"RTN","SCMCTSK1",66,0)
 N CNT,I,J,K,A,POSA S CNT=1 S SCTEAM=$G(SCTEAM),DATA(1)="<DATA>"
"RTN","SCMCTSK1",67,0)
 D DT^DICRW S X="T-9M" D ^%DT S STDT=Y
"RTN","SCMCTSK1",68,0)
 S X="T-21M" D ^%DT S TYDT=+Y  ;MAKE THIS 21
"RTN","SCMCTSK1",69,0)
 S POSA=""
"RTN","SCMCTSK1",70,0)
 S POS=+$P(SCTEAM,U,2) I POS D POS,EX1 Q
"RTN","SCMCTSK1",71,0)
 F  S POSA=$O(^SCTM(404.57,"ATMPOS",+SCTEAM,POSA)) Q:POSA=""  D  Q:CNT>100
"RTN","SCMCTSK1",72,0)
 .F POS=0:0 S POS=$O(^SCTM(404.57,"ATMPOS",+SCTEAM,POSA,POS)) Q:'POS  D POS Q:CNT>100
"RTN","SCMCTSK1",73,0)
 I CNT>100 S DATA(1)="TOO MANY" Q
"RTN","SCMCTSK1",74,0)
EX1 S A="SDDATA",CNT=1 F  S A=$Q(@A) Q:A=""  D
"RTN","SCMCTSK1",75,0)
 .S B=@A
"RTN","SCMCTSK1",76,0)
 .S DATA(CNT)=(+$P(B,U,3))_U_$TR($P($P(A,"(",2),","),$C(34))_U_$TR($P(B,U,2),$C(34))_U_$P($G(^SCPT(404.43,+$P(B,U,3),0)),U,13)_U_$P($G(^SCPT(404.43,+$P(B,U,3),0)),U,14)
"RTN","SCMCTSK1",77,0)
 .S CNT=CNT+1
"RTN","SCMCTSK1",78,0)
 Q
"RTN","SCMCTSK1",79,0)
POS I '$$DATES^SCAPMCU1(404.59,POS) Q   ;Not an active position
"RTN","SCMCTSK1",80,0)
 I '$P($G(^SCTM(404.57,POS,0)),U,4) Q  ;Not PC
"RTN","SCMCTSK1",81,0)
 ;get patients for this position
"RTN","SCMCTSK1",82,0)
 K ^TMP("SC TMP LIST",$J)
"RTN","SCMCTSK1",83,0)
 S X=$$PTTP^SCAPMC(POS,"",.SCLIST,.SCERR)
"RTN","SCMCTSK1",84,0)
 S J=0 F  S J=$O(@SCLIST@(J)) Q:'J  S SCDATA=^(J) D
"RTN","SCMCTSK1",85,0)
 .N J I $P(SCDATA,U,4)>STDT Q
"RTN","SCMCTSK1",86,0)
 .I '$P($G(^SCPT(404.43,+$P(SCDATA,U,3),0)),U,5) Q
"RTN","SCMCTSK1",87,0)
 .I '$P($G(^SCPT(404.43,+$P(SCDATA,U,3),0)),U,15) Q
"RTN","SCMCTSK1",88,0)
 .S DFN=+SCDATA
"RTN","SCMCTSK1",89,0)
 .D SEEN Q:SEEN
"RTN","SCMCTSK1",90,0)
 .S SDDATA($P($G(^SCTM(404.57,POS,0)),U),$P(SCDATA,U,2),+SCDATA)=SCDATA,CNT=CNT+1
"RTN","SCMCTSK1",91,0)
 K @SCLIST
"RTN","SCMCTSK1",92,0)
 Q
"RTN","SCMCTSK1",93,0)
FILE(RES,DATA) ;File data on FTEE
"RTN","SCMCTSK1",94,0)
 N I
"RTN","SCMCTSK1",95,0)
 F I=1:1 Q:'$D(DATA(I))   D
"RTN","SCMCTSK1",96,0)
 .S $P(DATA(I),U,7)=$TR($P(DATA(I),U,7),"[]")
"RTN","SCMCTSK1",97,0)
 .S ZERO=$G(^SCPT(404.43,+DATA(I),0))
"RTN","SCMCTSK1",98,0)
 .I $P(ZERO,U,13)=$P(DATA(I),U,6) I $P(ZERO,U,14)=$P(DATA(I),U,7) Q
"RTN","SCMCTSK1",99,0)
 .S FLDA(404.43,(+DATA(I))_",",.13)=$P(DATA(I),U,6)
"RTN","SCMCTSK1",100,0)
 .S FLDA(404.43,(+DATA(I))_",",.14)=$E($P(DATA(I),U,7),1,50)
"RTN","SCMCTSK1",101,0)
 .S FLDA(404.43,(+DATA(I))_",",.16)="`"_(+$G(DUZ))
"RTN","SCMCTSK1",102,0)
 I $O(FLDA(0)) D FILE^DIE("E","FLDA","ERR")
"RTN","SCMCTSK1",103,0)
 Q
"RTN","SCMCTSK1",104,0)
SCREEN ;Screen for active assignments
"RTN","SCMCTSK1",105,0)
 N A S A=$G(^SCTM(404.52,D0,0))
"RTN","SCMCTSK1",106,0)
 N J S J=-(DT+1),J=$O(^SCTM(404.52,"AIDT",+A,1,J)) I J="" S X=0 Q
"RTN","SCMCTSK1",107,0)
 I '$P($G(^SCTM(404.57,+A,0)),U,4) Q  ;Not PC
"RTN","SCMCTSK1",108,0)
 I '$$DATES^SCAPMCU1(404.59,+A) Q   ;Not an active position
"RTN","SCMCTSK1",109,0)
 I $O(^SCTM(404.52,"AIDT",+A,0,-(DT+1)))<J S X=0 Q
"RTN","SCMCTSK1",110,0)
 I '$D(^SCTM(404.52,"AIDT",+A,1,J,D0)) S X=0 Q
"RTN","SCMCTSK1",111,0)
 S X=1 Q
"RTN","SCMCTSK1",112,0)
SUM(PR,POSI) ; get positions for this provider
"RTN","SCMCTSK1",113,0)
 N I,INS,ZERO,SCA,TEAM,FTEE,Z
"RTN","SCMCTSK1",114,0)
 S I="",FTEE=0
"RTN","SCMCTSK1",115,0)
 F  S I=$O(^SCTM(404.52,"C",PR,I),-1) Q:'I  D
"RTN","SCMCTSK1",116,0)
 .S ZERO=$G(^SCTM(404.52,I,0)) Q:$D(SCA(+ZERO))  Q:(POSI=(+ZERO))  S SCA(+ZERO)=""
"RTN","SCMCTSK1",117,0)
 .S INS=$P($G(^SCTM(404.51,+$P($G(^SCTM(404.57,+ZERO,0)),U,2),0)),U,7)
"RTN","SCMCTSK1",118,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.52,+ZERO,DT+.5) Q:'ACTIVE
"RTN","SCMCTSK1",119,0)
 .S (Z,ZERO)=$G(^SCTM(404.52,+$P(ACTIVE,U,4),0)) Q:$P(Z,U,3)'=PR
"RTN","SCMCTSK1",120,0)
 .S ACTIVE=$$DATES^SCAPMCU1(404.59,+Z,DT+.5) Q:'ACTIVE
"RTN","SCMCTSK1",121,0)
 .S Z=$G(^SCTM(404.57,+Z,0))
"RTN","SCMCTSK1",122,0)
 .Q:'$P(Z,U,4)  ;Cannot be primary
"RTN","SCMCTSK1",123,0)
 .S TEAM=$G(^SCTM(404.51,+$P(Z,U,2),0))
"RTN","SCMCTSK1",124,0)
 .Q:'$P(TEAM,U,5)
"RTN","SCMCTSK1",125,0)
 .S FTEE=FTEE+$P(ZERO,U,9)
"RTN","SCMCTSK1",126,0)
 Q FTEE
"RTN","SCMCTSK1",127,0)
FTEECHK(DATA,PAIEN) ;check Ftee greater than 1
"RTN","SCMCTSK1",128,0)
 N A S A=$G(^SCTM(404.52,+PAIEN,0)),FTEE=$$SUM(+$P(PAIEN,U,3),+A)
"RTN","SCMCTSK1",129,0)
 S DATA=0
"RTN","SCMCTSK1",130,0)
 S DATA=FTEE+$P(PAIEN,U,2)
"RTN","SCMCTSK1",131,0)
 Q
"RTN","SCMCTSK1",132,0)
SORT ;sort template
"RTN","SCMCTSK1",133,0)
 N DIC,DIPA
"RTN","SCMCTSK1",134,0)
 S DIC=4,DIC(0)="ZME"
"RTN","SCMCTSK1",135,0)
 S DIC("S")="I $D(^SCTM(404.51,""AINST"",+Y))"
"RTN","SCMCTSK1",136,0)
 S DIR("A")="Start with Institution",DIR("B")="FIRST",DIR(0)="F" D ^DIR
"RTN","SCMCTSK1",137,0)
 I X="FIRST" S DIPA("SI")="",DIPA("EI")="zzz",X=1 Q
"RTN","SCMCTSK1",138,0)
 D ^DIC I Y<0 S DIPA("SI")=X Q:X[U  D
"RTN","SCMCTSK1",139,0)
 .S DIR("A")="Go to Institutiton",DIR("B")="LAST" S DIR(0)="F" D ^DIR
"RTN","SCMCTSK1",140,0)
 .I X="LAST" S DIPA("EI")="zzz"
"RTN","SCMCTSK1",141,0)
 I Y>0 S DIPA("SI")=$P(Y(0),U),DIC(0)="AZQME",DIC("A")="Go to Institution: "
"RTN","SCMCTSK1",142,0)
 D ^DIC
"RTN","SCMCTSK1",143,0)
 I Y>0 S DIPA("EI")=$P(Y(0),U)
"RTN","SCMCTSK1",144,0)
 I Y<0 S DIPA("EI")=X Q:X[U
"RTN","SCMCTSK1",145,0)
 S X=1 Q
"RTN","SCMCTSK1",146,0)
FTEERPT ;FTEE REPORT
"RTN","SCMCTSK1",147,0)
 D FTERPT^SCMCTSK6 Q
"RTN","SCMCTSK1",148,0)
 Q
"RTN","SCMCTSK1",149,0)
POSCHK(DATA,INFO) ;
"RTN","SCMCTSK1",150,0)
 N PCLASS
"RTN","SCMCTSK1",151,0)
 ;TEAM POSITION IEN^PC^STANDARD POSITITION IEN
"RTN","SCMCTSK1",152,0)
 I '$P(INFO,U,3) S DATA="1^Role Must be Entered" Q
"RTN","SCMCTSK1",153,0)
 I $P(INFO,U,2) I '$P($G(^SD(403.46,+$P(INFO,U,3),0)),U,3) S DATA="1^This Role cannot provide Primary Care" Q
"RTN","SCMCTSK1",154,0)
 I $P(INFO,U,2),($P($G(^SD(403.46,+$P(INFO,U,3),0)),U,3)=2) I '$$DATES^SCAPMCU1(404.53,+INFO) S DATA="1^This Role cannot provide Primary Care unless Precepted" Q
"RTN","SCMCTSK1",155,0)
 S DATA=0
"RTN","SCMCTSK1",156,0)
 I ('INFO)!('$P(INFO,U,2)) Q
"RTN","SCMCTSK1",157,0)
 ;Check if provider can be in this role.
"RTN","SCMCTSK1",158,0)
 S J=-(DT+1) S J=$O(^SCTM(404.52,"AIDT",+INFO,1,J)) Q:J=""
"RTN","SCMCTSK1",159,0)
 I $O(^SCTM(404.52,"AIDT",+INFO,0,-(DT+1)))<J Q
"RTN","SCMCTSK1",160,0)
 S K=0 S K=$O(^SCTM(404.52,"AIDT",+INFO,1,J,K)) Q:'K
"RTN","SCMCTSK1",161,0)
 S ZERO=$G(^SCTM(404.52,+K,0))
"RTN","SCMCTSK1",162,0)
 ;Get person class for provider
"RTN","SCMCTSK1",163,0)
 S PCLASS=$$GET^XUA4A72(+$P(ZERO,U,3))
"RTN","SCMCTSK1",164,0)
 ;IEN^Occupation^specialty^sub-specialty^Effective date^expiration date^VA Code^specialty code
"RTN","SCMCTSK1",165,0)
 I '$D(^SD(403.46,+$P(INFO,U,3),2,"B",+PCLASS)) S DATA="1^Person Class of "_$$GET1^DIQ(200,(+$P(ZERO,U,3))_",",.01)_" is not valid in this Role." D POSCHK^SCMCTSK4
"RTN","SCMCTSK1",166,0)
 Q
"RTN","SCMCTSK1",167,0)
SEED ;seed one patient/provider
"RTN","SCMCTSK1",168,0)
 W !,"To retransmit all patients for a given provider press return to select the provider",!!
"RTN","SCMCTSK1",169,0)
 N DIC,SCADT,SCDDT,SCPAI
"RTN","SCMCTSK1",170,0)
 S SC177=$$PDAT^SCMCGU("SD*5.3*177")
"RTN","SCMCTSK1",171,0)
 I +SC177=0 D  Q
"RTN","SCMCTSK1",172,0)
 . S SC2="  Unable to obtain SD*5.3*177 Installation Date."
"RTN","SCMCTSK1",173,0)
 . D MSG^SCMCCV6(SC1,SC2)
"RTN","SCMCTSK1",174,0)
 . Q
"RTN","SCMCTSK1",175,0)
 S DIC="^DPT(",DIC(0)="MEQA" D ^DIC G PRSEED:Y'>0
"RTN","SCMCTSK1",176,0)
 ;event filer for 1 patient
"RTN","SCMCTSK1",177,0)
 S SCDFN=+Y W !,SCDFN
"RTN","SCMCTSK1",178,0)
SCDFN S SC1="^SCPT(404.43,""APCPOS"",SCDFN,1)"
"RTN","SCMCTSK1",179,0)
 ;
"RTN","SCMCTSK1",180,0)
 ;quit if no PC assignments
"RTN","SCMCTSK1",181,0)
 Q:'$D(@SC1)
"RTN","SCMCTSK1",182,0)
 S SCADT=0
"RTN","SCMCTSK1",183,0)
 F  S SCADT=$O(@SC1@(SCADT)) Q:SCADT=""  D
"RTN","SCMCTSK1",184,0)
 . S SCTP=0
"RTN","SCMCTSK1",185,0)
 . F  S SCTP=$O(@SC1@(SCADT,SCTP)) Q:'SCTP  D
"RTN","SCMCTSK1",186,0)
 . . ;
"RTN","SCMCTSK1",187,0)
 . . ; quit if team position does not exist
"RTN","SCMCTSK1",188,0)
 . . Q:'$D(^SCTM(404.57,SCTP,0))
"RTN","SCMCTSK1",189,0)
 . . S SCPAI=0
"RTN","SCMCTSK1",190,0)
 . . F  S SCPAI=$O(@SC1@(SCADT,SCTP,SCPAI)) Q:'SCPAI  D
"RTN","SCMCTSK1",191,0)
 . . . S SCDDT=$P($G(^SCPT(404.43,SCPAI,0)),U,4)
"RTN","SCMCTSK1",192,0)
 . . . ;
"RTN","SCMCTSK1",193,0)
 . . . ; quit if not active within date range
"RTN","SCMCTSK1",194,0)
 . . . Q:$$DTCHK^SCAPU1(SC177,DT,0,SCADT,SCDDT)<1
"RTN","SCMCTSK1",195,0)
 . . . N SCVAR S SCVAR=SCPAI_";SCPT(404.43,"
"RTN","SCMCTSK1",196,0)
 . . . ;
"RTN","SCMCTSK1",197,0)
 . . . ; add to HL7 event file
"RTN","SCMCTSK1",198,0)
 . . . Q:$D(^SCPT(404.48,"AACXMIT",SCVAR))
"RTN","SCMCTSK1",199,0)
 . . . Q:$$CHECK^SCMCHLB1(SCVAR)'=1
"RTN","SCMCTSK1",200,0)
 . . . D ADD^SCMCHLE("NOW",SCVAR,SCDFN,SCTP)
"RTN","SCMCTSK1",201,0)
 Q
"RTN","SCMCTSK1",202,0)
PRSEED ;seed practitioner
"RTN","SCMCTSK1",203,0)
 N AH,SC177
"RTN","SCMCTSK1",204,0)
 S SC177=$$PDAT^SCMCGU("SD*5.3*177")
"RTN","SCMCTSK1",205,0)
 I +SC177=0 D  Q
"RTN","SCMCTSK1",206,0)
 . S SC2="  Unable to obtain SD*5.3*177 Installation Date."
"RTN","SCMCTSK1",207,0)
 . D MSG^SCMCCV6(SC1,SC2)
"RTN","SCMCTSK1",208,0)
 . Q
"RTN","SCMCTSK1",209,0)
 S DIC=200,DIC(0)="MEQA",DIC("A")="Select Provider: " D ^DIC Q:Y'>0
"RTN","SCMCTSK1",210,0)
 S SCPROV=+Y
"RTN","SCMCTSK1",211,0)
 F AH=0:0 S AH=$O(^SCTM(404.52,"C",SCPROV,AH)) Q:'AH  S TP=+$G(^SCTM(404.52,+AH,0)) D
"RTN","SCMCTSK1",212,0)
 . Q:$D(SCTP(TP))
"RTN","SCMCTSK1",213,0)
 . S SCTP(TP)=1
"RTN","SCMCTSK1",214,0)
 . F SCDFN=0:0 S SCDFN=$O(^SCPT(404.43,"ADFN",SCDFN)) Q:'SCDFN  I $D(^(SCDFN,TP)) I '$D(SCU(SCDFN)) D SCDFN S SCU(SCDFN)=1
"RTN","SCMCTSK1",215,0)
 . Q:'$P($G(^SCTM(404.57,TP,0)),U,4)
"RTN","SCMCTSK1",216,0)
 . S SCVAR=AH_";SCTM(404.52,"
"RTN","SCMCTSK1",217,0)
 . ;Quit if an event entry already exists
"RTN","SCMCTSK1",218,0)
 . N QUIT,I S QUIT=0
"RTN","SCMCTSK1",219,0)
 . F I=0:0 S I=$O(^SCPT(404.48,"AACXMIT",SCVAR,I)) Q:'I  I $P($G(^SCPT(404.48,I,0)),U,8) S QUIT=1 Q
"RTN","SCMCTSK1",220,0)
 . Q:QUIT
"RTN","SCMCTSK1",221,0)
 . D ADD^SCMCHLE("NOW",SCVAR,,AH,1)
"RTN","SCMCTSK1",222,0)
 Q
"RTN","SCMCTSK1",223,0)
INCON ;get list of incositent provider assignments
"RTN","SCMCTSK1",224,0)
 N POS
"RTN","SCMCTSK1",225,0)
 D INCON^SCMCTSK3
"RTN","SCMCTSK1",226,0)
 Q
"RTN","SCMCTSK1",227,0)
INCONR ;inconsistent report
"RTN","SCMCTSK1",228,0)
 N BY
"RTN","SCMCTSK1",229,0)
 K ^TMP("SCMCTSK",$J)
"RTN","SCMCTSK1",230,0)
 S DIC="^SCTM(404.57,",(FLDS,BY)="[SCMC INCONSISTENT]",DIOBEG="D INCON^SCMCTSK1"
"RTN","SCMCTSK1",231,0)
 D EN1^DIP
"RTN","SCMCTSK1",232,0)
 Q
"RTN","SCMCTSK1",233,0)
CHKENR(DATA,INFO) ;check if patient enrolled in teamposition clinic
"RTN","SCMCTSK1",234,0)
 S DATA(0)=-1
"RTN","SCMCTSK1",235,0)
 N I
"RTN","SCMCTSK1",236,0)
 N POS,DFN S DFN=+$G(INFO) Q:'DFN  S POS=+$P($G(INFO),U,2) Q:'POS
"RTN","SCMCTSK1",237,0)
 F I=0:0 S I=$O(^SCTM(404.57,POS,5,I)) Q:'I  D CECHK^SCRPPAT2(I,.CNAME,DFN) I $L(CNAME) S:DATA(0)=-1 DATA(0)="" S DATA(0)=DATA(0)_CNAME_"."
"RTN","SCMCTSK1",238,0)
 I DATA(0)'=-1 S DATA(0)=$E(DATA(0),1,$L(DATA(0))-2)
"RTN","SCMCTSK1",239,0)
 Q
"RTN","SCMCTSK1",240,0)
INACTDT(PA) ;Scheduled inactivation date.
"RTN","SCMCTSK1",241,0)
 D INACT^SCMCTSK3 Q
"RTN","SCMCTSK1",242,0)
IU(DFN) ;is patient inactivity unassigned
"RTN","SCMCTSK1",243,0)
 Q $$IU^SCMCTSK3(DFN)
"RTN","SCMCTSK1",244,0)
 N I,A,B,DATA
"RTN","SCMCTSK2")
0^9^B89984359^n/a
"RTN","SCMCTSK2",1,0)
SCMCTSK2 ;ALB/JDS - PCMM Inactivation Nightly Job; 18 Apr 2003  9:36 AM ; 8/23/05 2:34pm
"RTN","SCMCTSK2",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK2",3,0)
 Q
"RTN","SCMCTSK2",4,0)
NIGHT ;nightly task for inactivation
"RTN","SCMCTSK2",5,0)
 N ENDDT,NOINAC,SIXM,FLGDT,L,PATDT,SEEN
"RTN","SCMCTSK2",6,0)
 K ^TMP("SCTSK",$J)
"RTN","SCMCTSK2",7,0)
 D DT^DICRW
"RTN","SCMCTSK2",8,0)
 S ALPHA=$G(^SCTM(404.44,1,1)),ALPHA=$P(ALPHA,U,8) I ALPHA<DT S ALPHA=0
"RTN","SCMCTSK2",9,0)
 ;check if this is last day of month
"RTN","SCMCTSK2",10,0)
 S X1=DT,X2=1 D C^%DTC I $E(DT,1,5)'=$E(X,1,5) I 'ALPHA D INACTIVE^SCMCTSK1
"RTN","SCMCTSK2",11,0)
 S SIXM=$P($G(^SCTM(404.44,1,1)),U,9)
"RTN","SCMCTSK2",12,0)
 I SIXM D PRFLAG
"RTN","SCMCTSK2",13,0)
 I ALPHA D INACTIVE^SCMCTSK1
"RTN","SCMCTSK2",14,0)
 S NOINAC=0 I 'ALPHA  S X1=DT,X2=1 D C^%DTC I ($E(DT,6,7)'=15)&($E(DT,1,5)=$E(X,1,5)) S NOINAC=1
"RTN","SCMCTSK2",15,0)
 ;check for 60 days after flagged for inactivation
"RTN","SCMCTSK2",16,0)
 S X1=DT,X2=$S(ALPHA:-2,1:-30) D C^%DTC S ENDDT=X
"RTN","SCMCTSK2",17,0)
 F DATE=0:0 S DATE=$O(^SCPT(404.43,"AFLG",DATE)) Q:(('DATE)!(('NOINAC)&(DATE>ENDDT)))  D
"RTN","SCMCTSK2",18,0)
 .F ENTRY=0:0 S ENTRY=$O(^SCPT(404.43,"AFLG",DATE,ENTRY)) Q:'ENTRY  D
"RTN","SCMCTSK2",19,0)
 ..S ZERO=$G(^SCPT(404.43,ENTRY,0)) Q:'ZERO
"RTN","SCMCTSK2",20,0)
 ..S DFN=+$G(^SCPT(404.42,+ZERO,0)) Q:'DFN
"RTN","SCMCTSK2",21,0)
 ..S POS=$P(ZERO,U,2)
"RTN","SCMCTSK2",22,0)
 ..I $P(ZERO,U,4) D UNFLG Q  ;already unassigned
"RTN","SCMCTSK2",23,0)
 ..I $P(ZERO,U,13) S X1=DATE,X2=$S(ALPHA:4,1:90) D C^%DTC S FLGDT=X I FLGDT>DT Q    ;ext
"RTN","SCMCTSK2",24,0)
 ..;check if criteria still met
"RTN","SCMCTSK2",25,0)
 ..I $P(ZERO,U,17) D UNFLG Q  ;Already reactivated
"RTN","SCMCTSK2",26,0)
 ..;get preceptor position
"RTN","SCMCTSK2",27,0)
 ..S %DT="",X="T-12M" D ^%DT S STDT=+Y
"RTN","SCMCTSK2",28,0)
 ..S PREC=$$DATES^SCAPMCU1(404.53,+POS),PREC=$S(PREC:$P($G(^SCTM(404.53,+$P(PREC,U,4),0)),U,6),1:+POS)
"RTN","SCMCTSK2",29,0)
 ..;see if provider changed
"RTN","SCMCTSK2",30,0)
 ..I $O(^SCTM(404.52,"AIDT",+PREC,1,-STDT),-1) D UNFLG Q
"RTN","SCMCTSK2",31,0)
 ..I '$P(ZERO,U,5) D UNFLG Q  ;Not primary care
"RTN","SCMCTSK2",32,0)
 ..S PROV=+$$GETPRTP^SCAPMCU2(POS,DT)
"RTN","SCMCTSK2",33,0)
 ..S PC=$$GET^XUA4A72(+PROV)
"RTN","SCMCTSK2",34,0)
 ..S SC297=$$PDAT^SCMCGU("SD*5.3*297")
"RTN","SCMCTSK2",35,0)
 ..N NEW S NEW=$S($P(ZERO,U,3)<SC297:0,1:1)   ;D D^%DTC S NEW=$S(X>330:0,1:1)
"RTN","SCMCTSK2",36,0)
 ..S X1=DT,X2=SC297 D D^%DTC S SC297=X
"RTN","SCMCTSK2",37,0)
 ..S X="T-"_$S(SC297>365:"11M",NEW:"11M",1:"23M") D ^%DT S TYDT=+Y D SEEN^SCMCTSK1 I $G(SEEN) D UNFLG Q 
"RTN","SCMCTSK2",38,0)
 ..S X="T-"_$S(SC297>365:"12M",NEW:"12M",1:"24M") D ^%DT S TYDT=+Y D SEEN^SCMCTSK1 I $G(SEEN) D:(DATE>ENDDT) UNFLG Q
"RTN","SCMCTSK2",39,0)
 ..I ('NOINAC)&(DATE'>ENDDT) D DIS^SCMCTSK1
"RTN","SCMCTSK2",40,0)
 ..;D MSG(POS,DFN)
"RTN","SCMCTSK2",41,0)
 ;if 6 months after installation check to flag providers
"RTN","SCMCTSK2",42,0)
 I NOINAC D:ALPHA BULL Q
"RTN","SCMCTSK2",43,0)
 S PATDT=$$PDAT^SCMCGU("SD*5.3*297") Q:'PATDT
"RTN","SCMCTSK2",44,0)
 I SIXM,SIXM'>DT D
"RTN","SCMCTSK2",45,0)
 .D PRINAC
"RTN","SCMCTSK2",46,0)
 .N FLDA
"RTN","SCMCTSK2",47,0)
 .S FLDA(404.44,"1,",19)=""
"RTN","SCMCTSK2",48,0)
 .D FILE^DIE("I","FLDA","ERR")
"RTN","SCMCTSK2",49,0)
 D BULL
"RTN","SCMCTSK2",50,0)
 Q
"RTN","SCMCTSK2",51,0)
UNFLG ;Remove the flag
"RTN","SCMCTSK2",52,0)
 N DR,DIE,DA
"RTN","SCMCTSK2",53,0)
 S DR=".15///@;.13///@;.12///@",DIE="^SCPT(404.43,",DA=ENTRY D ^DIE
"RTN","SCMCTSK2",54,0)
 Q
"RTN","SCMCTSK2",55,0)
PRFLAG ;flag incorrect provider positions
"RTN","SCMCTSK2",56,0)
 N POS
"RTN","SCMCTSK2",57,0)
 ;provider inactivation has run once
"RTN","SCMCTSK2",58,0)
 I $P($G(^SCTM(404.44,1,1)),U,11)'="" Q
"RTN","SCMCTSK2",59,0)
 D PRFLAG^SCMCTSK3
"RTN","SCMCTSK2",60,0)
 Q
"RTN","SCMCTSK2",61,0)
PRINAC ;inactivate flagged providers
"RTN","SCMCTSK2",62,0)
 N I,II
"RTN","SCMCTSK2",63,0)
 ;Provider inactivation run already
"RTN","SCMCTSK2",64,0)
 S II=$P($G(^SCTM(404.44,1,1)),U,11) I II'="",II'=DT Q
"RTN","SCMCTSK2",65,0)
 F I=0:0 S I=$O(^SCTM(404.52,I)) Q:'I  S ZERO=$G(^(I,0)) I $P(ZERO,U,10) D
"RTN","SCMCTSK2",66,0)
 .;I $P(ZERO,U,10)>$G(ENDT) Q   ;not time yet
"RTN","SCMCTSK2",67,0)
 .I $O(^SCTM(404.52,"AIDT",+ZERO,0,-9999999))<(-$P(ZERO,U,2)) Q   ;already inactivated
"RTN","SCMCTSK2",68,0)
 .;Check if criteria still valid
"RTN","SCMCTSK2",69,0)
 .S POS=+ZERO
"RTN","SCMCTSK2",70,0)
 .S PROV=+$$GETPRTP^SCAPMCU2(POS,DT)
"RTN","SCMCTSK2",71,0)
 .S PC=$$GET^XUA4A72(+PROV)
"RTN","SCMCTSK2",72,0)
 .S DR=".091///@",DIE="^SCTM(404.52,",DA=I D ^DIE  ;remove flag
"RTN","SCMCTSK2",73,0)
 .S ZERO1=$G(^SCTM(404.57,POS,0))
"RTN","SCMCTSK2",74,0)
 .I '$D(^SD(403.46,+$P(ZERO1,U,3),2,+PC)) D
"RTN","SCMCTSK2",75,0)
 ..;enter the inactivation
"RTN","SCMCTSK2",76,0)
 ..S DIC="^SCTM(404.52,",X=+ZERO,DIC("DR")=".02////"_DT_";.03////"_$P(ZERO,U,3)_";.04////0;.05///EMPLOYEE LEAVES POSITION;.11////1"
"RTN","SCMCTSK2",77,0)
 ..S DIC(0)="LM" D ^DIC
"RTN","SCMCTSK2",78,0)
 ;only run the inactivation once.
"RTN","SCMCTSK2",79,0)
 S $P(^SCTM(404.44,1,1),U,11)=DT
"RTN","SCMCTSK2",80,0)
 Q
"RTN","SCMCTSK2",81,0)
FUTAPP(DFN) ;print future appointments
"RTN","SCMCTSK2",82,0)
 N TAB,SCDT0 S TAB=$X
"RTN","SCMCTSK2",83,0)
 S SCDT=DT+.24
"RTN","SCMCTSK2",84,0)
 F  S SCDT=$O(^DPT(DFN,"S",SCDT)) Q:'SCDT  D
"RTN","SCMCTSK2",85,0)
 . S SCDT0=$G(^DPT(DFN,"S",SCDT,0)) Q:$L($P(SCDT0,U,2))
"RTN","SCMCTSK2",86,0)
 . S CLIEN=$P(SCDT0,"^") Q:'CLIEN
"RTN","SCMCTSK2",87,0)
 . S Y=SCDT X ^DD("DD") W $E(Y_" ",1,17)_" "_$E($P($G(^SC(+CLIEN,0)),U),1,10)
"RTN","SCMCTSK2",88,0)
 Q
"RTN","SCMCTSK2",89,0)
GETASC(DATA,ENTRY) ;get associated clinics
"RTN","SCMCTSK2",90,0)
 N I,CNT S CNT=0
"RTN","SCMCTSK2",91,0)
 F I=0:0 S I=$O(^SCTM(404.57,+$G(ENTRY),5,I)) Q:'I  S CNT=CNT+1,DATA(CNT)=I_U_$P($G(^SC(I,0)),U)
"RTN","SCMCTSK2",92,0)
 Q
"RTN","SCMCTSK2",93,0)
SETASC(RESULT,DATA) ;set associated clinics
"RTN","SCMCTSK2",94,0)
 D SETASC^SCMCTSK7(.RESULT,DATA) Q
"RTN","SCMCTSK2",95,0)
MSG(SCTP,DFN) ;send inactivation message
"RTN","SCMCTSK2",96,0)
         ;given list of valid positions get current practitioners
"RTN","SCMCTSK2",97,0)
 S SCLIST="SCL"
"RTN","SCMCTSK2",98,0)
 I "N"'[$P($G(^SCTM(404.57,SCTP,2)),U,9) D
"RTN","SCMCTSK2",99,0)
 .S SCOK=$$PRTP^SCAPMC(SCTP,"",.SCLIST,.SCERR)
"RTN","SCMCTSK2",100,0)
 .;if preceptor notice turned on for message type
"RTN","SCMCTSK2",101,0)
 I +$P($G(^SCTM(404.57,SCTP,2)),U,9) D
"RTN","SCMCTSK2",102,0)
 .S SCX=+$$OKPREC2^SCMCLK(SCTP,DT)
"RTN","SCMCTSK2",103,0)
 .;if preceptor duz returned, add to array
"RTN","SCMCTSK2",104,0)
 .I SCX S @SCLIST@("SCPR",SCX)=""
"RTN","SCMCTSK2",105,0)
 N XMY F I=0:0 S I=$O(@SCLIST@("SCPR",I)) Q:'I  S XMY(I)=""
"RTN","SCMCTSK2",106,0)
 S SCTEXT(1,0)="PATIENT "_$P($G(^DPT(DFN,0)),U)_" has been inactivated from primary care team position "_$P($G(^SCTM(404.57,SCTP,0)),U)
"RTN","SCMCTSK2",107,0)
 S XMSUB="Provider's Inactivated Primary Care Patients" D ^XMD
"RTN","SCMCTSK2",108,0)
 Q
"RTN","SCMCTSK2",109,0)
BULL ;end of Month Bulletin
"RTN","SCMCTSK2",110,0)
 N DISUPNO,BY,DHIT,HEAD
"RTN","SCMCTSK2",111,0)
 S DISUPNO=1,L=0
"RTN","SCMCTSK2",112,0)
 S XMSUB="Patients Scheduled for Inactivation from Primary Care Panel"
"RTN","SCMCTSK2",113,0)
 S XMY("G.PCMM PATIENT/PROVIDER INACTIVE")=""
"RTN","SCMCTSK2",114,0)
 K ^TMP("SCMC",$J),^TMP("SCMCTXT",$J),^TMP("SCML",$J)
"RTN","SCMCTSK2",115,0)
 S XMTEXT="^TMP(""SCMCTXT"",$J," ;S @XMTEXT@(0)=""
"RTN","SCMCTSK2",116,0)
 S DIC="^SCPT(404.43,",BY="[SCMC FLAGGED BULLETIN]",FLDS="[SC BULLETIN]",CNT=0
"RTN","SCMCTSK2",117,0)
 S:0 FLDS="" S IOP="",DHD="@@",(FR,TO)="" D EN1^DIP
"RTN","SCMCTSK2",118,0)
 S ^TMP("SCMCTXT",$J,1,0)="There are "_$O(^TMP("SCMC",$J,""),-1)_" Patients scheduled for inactivation in next 30 days"
"RTN","SCMCTSK2",119,0)
 D LINES(1)
"RTN","SCMCTSK2",120,0)
 D ^XMD
"RTN","SCMCTSK2",121,0)
 D PRMAIL^SCMCTSK5(1)
"RTN","SCMCTSK2",122,0)
 F SCI=0:0 S SCI=$O(^TMP("SCF",$J,SCI)) Q:'SCI  D
"RTN","SCMCTSK2",123,0)
 .K XMY S XMY(SCI)="" K ^TMP("SCMC",$J),^TMP("SCMCTXT",$J)
"RTN","SCMCTSK2",124,0)
 .M ^TMP("SCMC",$J)=^TMP("SCF",$J,SCI)
"RTN","SCMCTSK2",125,0)
 .S XMSUB="Patients Scheduled for Inactivation from Primary Care Panel"
"RTN","SCMCTSK2",126,0)
 .S XMTEXT="^TMP(""SCMCTXT"",$J,"
"RTN","SCMCTSK2",127,0)
 .;D LINES(1) D ^XMD
"RTN","SCMCTSK2",128,0)
 S DISUPNO=1
"RTN","SCMCTSK2",129,0)
 K ^TMP("SCMC",$J),^TMP("SCMCTXT")
"RTN","SCMCTSK2",130,0)
 S XMSUB="Patients With Extended PCMM Inactivation Dates"
"RTN","SCMCTSK2",131,0)
 S XMY("G.PCMM PATIENT/PROVIDER INACTIVE")=""
"RTN","SCMCTSK2",132,0)
 K ^TMP("SCMC",$J)
"RTN","SCMCTSK2",133,0)
 S XMTEXT="^TMP(""SCMCTXT"",$J," ;S @XMTEXT@(0)=""
"RTN","SCMCTSK2",134,0)
 S DIC="^SCPT(404.43,",BY="[SCMC EXTENDED BULLETIN]",DHIT="S CNT=$G(CNT)+1,^TMP(""SCMC"",$J,CNT,D0)=""""",CNT=0
"RTN","SCMCTSK2",135,0)
 S FR=",,,",TO=FR,FLDS="",IOP="",DHD="@@" D EN1^DIP
"RTN","SCMCTSK2",136,0)
 S ^TMP("SCMCTXT",$J,1,0)="There are "_$O(^TMP("SCMC",$J,""),-1)_" Patients Extended from inactivation"
"RTN","SCMCTSK2",137,0)
 D LINES(3)
"RTN","SCMCTSK2",138,0)
 D ^XMD
"RTN","SCMCTSK2",139,0)
 D PRMAIL^SCMCTSK5(3)
"RTN","SCMCTSK2",140,0)
 S DISUPNO=1
"RTN","SCMCTSK2",141,0)
 K ^TMP("SCMC",$J),^TMP("SCMCTXT")
"RTN","SCMCTSK2",142,0)
 S XMSUB="Patients Automated Inactivations from Primary Care Panels"
"RTN","SCMCTSK2",143,0)
 S XMY("G.PCMM PATIENT/PROVIDER INACTIVE")=""
"RTN","SCMCTSK2",144,0)
 K ^TMP("SCMC",$J)
"RTN","SCMCTSK2",145,0)
 S XMTEXT="^TMP(""SCMCTXT"",$J," ;S @XMTEXT@(0)=""
"RTN","SCMCTSK2",146,0)
 S DIC="^SCPT(404.43,",BY="[SCMC INACTIVATED]",DHIT="S CNT=$G(CNT)+1,^TMP(""SCMC"",$J,CNT,D0)=""""",CNT=0
"RTN","SCMCTSK2",147,0)
 S FLDS="",IOP="",DHD="@@",FR=",T-30,,",TO=",,,,," D EN1^DIP
"RTN","SCMCTSK2",148,0)
 S ^TMP("SCMCTXT",$J,1,0)="There are "_$O(^TMP("SCMC",$J,""),-1)_" Patients Inactivated in last 30 days"
"RTN","SCMCTSK2",149,0)
 D LINES(2)
"RTN","SCMCTSK2",150,0)
 D ^XMD
"RTN","SCMCTSK2",151,0)
 S DISUPNO=1
"RTN","SCMCTSK2",152,0)
 D PRMAIL^SCMCTSK5(2)
"RTN","SCMCTSK2",153,0)
 K ^TMP("SCMC",$J),^TMP("SCMCTXT")
"RTN","SCMCTSK2",154,0)
 I $P($G(^SCTM(404.44,1,1)),U,11)="" D
"RTN","SCMCTSK2",155,0)
 . S XMSUB="Primary Care Providers Scheduled for Inactivation"
"RTN","SCMCTSK2",156,0)
 . S XMY("G.PCMM PATIENT/PROVIDER INACTIVE")=""
"RTN","SCMCTSK2",157,0)
 . K ^TMP("SCMC",$J)
"RTN","SCMCTSK2",158,0)
 . S XMTEXT="^TMP(""SCMCTXT"",$J,"
"RTN","SCMCTSK2",159,0)
 . S DIC="^SCTM(404.52,",BY="[SC PROVIDER FLAGGED BULLE]",DHIT="S CNT=$G(CNT)+1,^TMP(""SCMC"",$J,CNT,D0)=""""",CNT=0
"RTN","SCMCTSK2",160,0)
 . S FLDS="",IOP="",DHD="@@",FR="",TO="" D EN1^DIP
"RTN","SCMCTSK2",161,0)
 . D LINES(4)
"RTN","SCMCTSK2",162,0)
 . D ^XMD
"RTN","SCMCTSK2",163,0)
 . D PRMAIL^SCMCTSK5(4)
"RTN","SCMCTSK2",164,0)
 . D BULL^SCMCTSK6
"RTN","SCMCTSK2",165,0)
 Q
"RTN","SCMCTSK2",166,0)
LINES(TYPE) ;Lines of Bulletin
"RTN","SCMCTSK2",167,0)
 D LINES^SCMCTSK5(TYPE) Q
"RTN","SCMCTSK2",168,0)
ROLE(DATA,INFO) ;SCMC ROLE
"RTN","SCMCTSK2",169,0)
 N ROLE,TP,I
"RTN","SCMCTSK2",170,0)
 S ROLE=+$G(INFO),TP=+$P($G(INFO),U,2)
"RTN","SCMCTSK2",171,0)
 S DATA(0)="0^0^0"
"RTN","SCMCTSK2",172,0)
 I 'ROLE Q
"RTN","SCMCTSK2",173,0)
 I 'TP Q
"RTN","SCMCTSK2",174,0)
 S DATA(0)=+$P($G(^SD(403.46,ROLE,0)),U,3) ;I DATA(0)=3!(DATA(0)=0) S DATA(0)=DATA(0)_"^0^0" Q
"RTN","SCMCTSK2",175,0)
 I $$DATES^SCAPMCU1(404.53,+TP) S DATA(0)=DATA(0)_"^1^0" Q
"RTN","SCMCTSK2",176,0)
 N PREC S PREC=0
"RTN","SCMCTSK2",177,0)
 F I=0:0 S I=$O(^SCTM(404.53,"AD",TP,I)) Q:'I  D   Q:PREC
"RTN","SCMCTSK2",178,0)
 .I $D(^SCTM(404.53,"AD",TP,I,1)) I '$D(^(0)) S PREC=1
"RTN","SCMCTSK2",179,0)
 I PREC S DATA(0)=DATA(0)_"^0^1" Q
"RTN","SCMCTSK2",180,0)
 S DATA(0)=DATA(0)_"^0^0"
"RTN","SCMCTSK2",181,0)
 Q
"RTN","SCMCTSK2",182,0)
INRPT  ; REPORT
"RTN","SCMCTSK2",183,0)
 N DIOEND,SCDHD
"RTN","SCMCTSK2",184,0)
 D PROMPT^SCMCTSK3("**** Date Range Selection ****","DATE PATIENTS INACTIVATED FROM PRIMARY CARE PANELS")
"RTN","SCMCTSK2",185,0)
 Q:'$D(^TMP("SC",$J,"XR"))
"RTN","SCMCTSK2",186,0)
 D UNASSIGN^SCMCTSK3
"RTN","SCMCTSK2",187,0)
 S Q=""""
"RTN","SCMCTSK2",188,0)
 S DIC="^SCPT(404.43," ;=0,BY="[SCMC INACTIVATION SORT]"
"RTN","SCMCTSK2",189,0)
 D BY
"RTN","SCMCTSK2",190,0)
 S (SCDHD,DHD)="AUTOMATED PATIENT INACTIVATION FROM PRIMARY CARE PANELS REPORT"
"RTN","SCMCTSK2",191,0)
 S DIOBEG="D DIOBEG^SCMCTSK4"
"RTN","SCMCTSK2",192,0)
 S DIOEND="D DIOEND1^SCMCTSK4"
"RTN","SCMCTSK2",193,0)
 S FLDS="[SCMC INACTIVATED]" ;,FR="?,,"_$TR(DIPA("SI"),","," "),TO="T,,"_$TR(DIPA("EI")_"z",","," ")
"RTN","SCMCTSK2",194,0)
 D EN1^DIP
"RTN","SCMCTSK2",195,0)
 Q
"RTN","SCMCTSK2",196,0)
IN30 ;inactivated last month
"RTN","SCMCTSK2",197,0)
 D SORT^SCMCTSK1 Q:'X
"RTN","SCMCTSK2",198,0)
 S Q=""""
"RTN","SCMCTSK2",199,0)
 S DIC="^SCPT(404.43,",L=0,BY="[SCMC INACTIVATION SORT]"
"RTN","SCMCTSK2",200,0)
 S DHD="Patients Inactivated from Primary Care Panels in the Past Month"
"RTN","SCMCTSK2",201,0)
 S FLDS="[SCMC INACTIVATED]",FR="T-31,,"_$TR(DIPA("SI"),","," "),TO="T,,"_$TR(DIPA("EI")_"z",","," ")
"RTN","SCMCTSK2",202,0)
 D EN1^DIP
"RTN","SCMCTSK2",203,0)
 Q
"RTN","SCMCTSK2",204,0)
EXRPT  ;EXTEND REPORT
"RTN","SCMCTSK2",205,0)
 K CLIN,TEAM,INST
"RTN","SCMCTSK2",206,0)
 D PROMPT^SCMCTSK3("PCMM Patients with Extended Inactivations","Scheduled Inactivation Date")
"RTN","SCMCTSK2",207,0)
 Q:'$D(^TMP("SC",$J,"XR"))
"RTN","SCMCTSK2",208,0)
 S Q="""",SORT=1
"RTN","SCMCTSK2",209,0)
 D EXTEND^SCMCTSK3
"RTN","SCMCTSK2",210,0)
 S DIC="^SCPT(404.43," ;,L=0,BY="[SCMC EXTENDED]"
"RTN","SCMCTSK2",211,0)
 S (SCDHD,DHD)="PCMM Patients with extended Inactivations"
"RTN","SCMCTSK2",212,0)
 S DIOBEG="D DIOBEG^SCMCTSK4",DIOEND="D EXTKEY^SCMCTSK9"
"RTN","SCMCTSK2",213,0)
 D BY
"RTN","SCMCTSK2",214,0)
 S FLDS="[SCMC EXTENDED]"
"RTN","SCMCTSK2",215,0)
 D EN1^DIP
"RTN","SCMCTSK2",216,0)
 Q 
"RTN","SCMCTSK2",217,0)
BY N DISPAR
"RTN","SCMCTSK2",218,0)
 S BY(0)="^TMP(""SCSORT"",$J)",L(0)=$O(^TMP("SC",$J,"SORT",99),-1)+1,DISPAR(0,1)="+",L=0 I $G(SCDHD)["FTEE" S DISPAR(0,1)="+#" ;BY="@'.01"
"RTN","SCMCTSK2",219,0)
 F I=1:1:$L(SORTN,U) S A=$P(SORTN,U,I) Q:'$L(A)  S $P(DISPAR(0,I),U,2)=";"_Q_A_": "_Q D
"RTN","SCMCTSK2",220,0)
 .I A["PATIENT" I (I>1)!($G(SCDHD)["Patients Scheduled for Inactivation from PC Panel") S $P(DISPAR(0,I),U)="@"
"RTN","SCMCTSK2",221,0)
 .I $G(SCDHD)["FTEE" D
"RTN","SCMCTSK2",222,0)
 ..I A["PROV" S $P(DISPAR(0,I),U)="@"
"RTN","SCMCTSK2",223,0)
 ..I I>1 I (A["CLI")!(A["POS") S $P(DISPAR(0,I),U)="@"_$P($G(DISPAR(0,I)),U)
"RTN","SCMCTSK2",224,0)
 S ZTSAVE("^TMP(""SC"",$J,")="",ZTSAVE("^TMP(""SCSORT"",$J,")=""
"RTN","SCMCTSK2",225,0)
 Q
"RTN","SCMCTSK2",226,0)
FLRPT  ;FLAGGED REPORT
"RTN","SCMCTSK2",227,0)
 D PROMPT^SCMCTSK3("Patients Scheduled for Inactivation from PC Panels","Date Scheduled for Inactivation")
"RTN","SCMCTSK2",228,0)
 Q:'$D(^TMP("SC",$J,"XR"))
"RTN","SCMCTSK2",229,0)
 D FLAGG^SCMCTSK3
"RTN","SCMCTSK2",230,0)
 S Q=""""
"RTN","SCMCTSK2",231,0)
 S DIC="^SCPT(404.43,",L=0
"RTN","SCMCTSK2",232,0)
 S (SCDHD,DHD)="Patients Scheduled for Inactivation from PC Panels"
"RTN","SCMCTSK2",233,0)
 D BY
"RTN","SCMCTSK2",234,0)
 S DIOBEG="D DIOBEG^SCMCTSK4"
"RTN","SCMCTSK2",235,0)
 S FLDS="[SCMC PENDING UNASSIGN]"
"RTN","SCMCTSK2",236,0)
 I $G(DISPAR(0,1))["PATIENT" S FLDS="[SCMC PENDING UNASSIGN PAT]"
"RTN","SCMCTSK2",237,0)
 S DIOEND="D DIOEND^SCMCTSK4"
"RTN","SCMCTSK2",238,0)
 D EN1^DIP
"RTN","SCMCTSK3")
0^18^B78524925^n/a
"RTN","SCMCTSK3",1,0)
SCMCTSK3 ;ALB/JDS - PCMM Inactivation Reports ; 7/19/05 10:06am
"RTN","SCMCTSK3",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK3",3,0)
 Q
"RTN","SCMCTSK3",4,0)
SORTP  ;sort template
"RTN","SCMCTSK3",5,0)
 N DIC
"RTN","SCMCTSK3",6,0)
 S DIC=200,DIC(0)="ZME"
"RTN","SCMCTSK3",7,0)
 S DIC("S")="I $D(^SCTM(404.52,""C"",+Y))"
"RTN","SCMCTSK3",8,0)
 S DIR("A")="Start with Provider",DIR("B")="FIRST",DIR(0)="F" D ^DIR
"RTN","SCMCTSK3",9,0)
 I X="FIRST" S DIPA("SP")="",DIPA("EI")="zzz",X=1 Q
"RTN","SCMCTSK3",10,0)
 D ^DIC I Y<0 S DIPA("SP")=X Q:X[U  D
"RTN","SCMCTSK3",11,0)
 .S DIR("A")="Go to Provider",DIR("B")="LAST" S DIR(0)="F" D ^DIR
"RTN","SCMCTSK3",12,0)
 .I X="LAST" S DIPA("EP")="zzz"
"RTN","SCMCTSK3",13,0)
 I Y>0 S DIPA("SP")=$P(Y(0),U),DIC(0)="AZQME",DIC("A")="Go to Provider: "
"RTN","SCMCTSK3",14,0)
 D ^DIC
"RTN","SCMCTSK3",15,0)
 I Y>0 S DIPA("EP")=$P(Y(0),U)
"RTN","SCMCTSK3",16,0)
 I Y<0 S DIPA("EP")=X Q:X[U
"RTN","SCMCTSK3",17,0)
 S X=1 Q
"RTN","SCMCTSK3",18,0)
 Q
"RTN","SCMCTSK3",19,0)
KEY ;Inactivated Report Key
"RTN","SCMCTSK3",20,0)
 D KEY^SCMCTSK3 Q
"RTN","SCMCTSK3",21,0)
SORTYP()        ; sort type
"RTN","SCMCTSK3",22,0)
 W !,"Sort report by"
"RTN","SCMCTSK3",23,0)
 S DIR(0)="SO^1:TEAM;2:ASSOCIATED CLINIC;"
"RTN","SCMCTSK3",24,0)
 S DIR("B")=1
"RTN","SCMCTSK3",25,0)
 D ^DIR
"RTN","SCMCTSK3",26,0)
 Q Y
"RTN","SCMCTSK3",27,0)
DV(PP)       ;return institution sort of patient assignment entry and then IEN of team^ien of position
"RTN","SCMCTSK3",28,0)
 N A,B,C,T,I,INSTNM,INSTN
"RTN","SCMCTSK3",29,0)
 S A=$G(^SCPT(404.43,+PP,0)),T=+$P($G(^SCPT(404.42,+A,0)),U,3) I $D(INST(T)) Q INST(T)_U_T_U_$P(A,U,2)
"RTN","SCMCTSK3",30,0)
 S I=$P($G(^SCTM(404.51,T,0)),U,7) I $O(^TMP("SC",$J,"DIV",0)) I '$D(^TMP("SC",$J,"DIV",I)) Q -1
"RTN","SCMCTSK3",31,0)
 S INSTNM=$$GET1^DIQ(4,(+I)_",",.01),INSTN=$$GET1^DIQ(4,(+I)_",",99)
"RTN","SCMCTSK3",32,0)
 S INST(T)=$S($L(INSTN)=3:INSTN_" ",1:"")_INSTNM Q INST(T)_U_T_U_$P(A,U,2)
"RTN","SCMCTSK3",33,0)
EC(PP)     ;return enrolled clinics
"RTN","SCMCTSK3",34,0)
 N I,A
"RTN","SCMCTSK3",35,0)
 S A=""
"RTN","SCMCTSK3",36,0)
 F I=0:0 S I=$O(^SCTM(404.57,+$P(ZERO,U,2),5,I)) Q:'I  D
"RTN","SCMCTSK3",37,0)
 .I '$$PTCL^SCRPO2(DFN,U_I,0,DT) Q   ;not enrolled
"RTN","SCMCTSK3",38,0)
 .I $D(CLIN(I)) S A=A_CLIN(I)_U Q
"RTN","SCMCTSK3",39,0)
 .I $O(^TMP("SC",$J,"CLINIC",0)) I '$D(^(I)) Q
"RTN","SCMCTSK3",40,0)
 .S CLIN(I)=$P($G(^SC(I,0)),U) I $L(CLIN(I)) S A=A_CLIN(I)_U
"RTN","SCMCTSK3",41,0)
 Q $S(A="":-1,1:A)
"RTN","SCMCTSK3",42,0)
TM(PP) ;Return Team
"RTN","SCMCTSK3",43,0)
 N I,A,T
"RTN","SCMCTSK3",44,0)
 S T=+$P($G(^SCPT(404.42,+ZERO,0)),U,3)
"RTN","SCMCTSK3",45,0)
 I $D(TEAM(T)) Q TEAM(T)
"RTN","SCMCTSK3",46,0)
 I $O(^TMP("SC",$J,"TEAM",0)) I '$D(^(T)) Q -1
"RTN","SCMCTSK3",47,0)
 S TEAM(T)=$P($G(^SCTM(404.51,+T,0)),U)
"RTN","SCMCTSK3",48,0)
 I '$L(TEAM(T)) K TEAM(T) Q -1
"RTN","SCMCTSK3",49,0)
 Q TEAM(T)
"RTN","SCMCTSK3",50,0)
IU(DFN) ;is patient inactivity unassigned
"RTN","SCMCTSK3",51,0)
 N I,A,B,DATA,QUIT
"RTN","SCMCTSK3",52,0)
 S DATA=-1,QUIT=0
"RTN","SCMCTSK3",53,0)
 F I=0:0 S I=$O(^SCPT(404.42,"B",+$G(DFN),I)) Q:'I  S A=$G(^SCPT(404.42,I,0)) D  Q:QUIT
"RTN","SCMCTSK3",54,0)
 .F J=0:0 S J=$O(^SCPT(404.43,"B",I,J)) Q:'J  S B=$G(^SCPT(404.43,+J,0)) D  Q:QUIT
"RTN","SCMCTSK3",55,0)
 ..I $P(B,U,5),'$P(B,U,4) K A S QUIT=1 Q
"RTN","SCMCTSK3",56,0)
 ..I $P(B,U,12)="NA" S POS=+J D
"RTN","SCMCTSK3",57,0)
 ...S A("IU",I)=A
"RTN","SCMCTSK3",58,0)
 ...S A("IUA")=A
"RTN","SCMCTSK3",59,0)
 ...S A("IUB")=B
"RTN","SCMCTSK3",60,0)
 ...I $P(A,U,8),'$P(A,U,9) S A("A")=1
"RTN","SCMCTSK3",61,0)
 ;Q:$D(A("A")) DATA
"RTN","SCMCTSK3",62,0)
 Q:'$D(A("IU")) DATA
"RTN","SCMCTSK3",63,0)
 ;S DATA="1~"_$P(^SCTM(404.51,+$P(A,U,3),0),U)_"~"_(+$P(A,U,3))_"~"_$P($G(^SCTM(404.57,+$P(B,U,2),0)),U)_"~"_($P(B,U,2))_"~"_POS
"RTN","SCMCTSK3",64,0)
 S DATA="1~"_$P(^SCTM(404.51,+$P(A("IUA"),U,3),0),U)_"~"_(+$P(A("IUA"),U,3))_"~"_$P($G(^SCTM(404.57,+$P(A("IUB"),U,2),0)),U)_"~"_($P(A("IUB"),U,2))_"~"_POS
"RTN","SCMCTSK3",65,0)
 Q DATA
"RTN","SCMCTSK3",66,0)
PROMPT(SCDESC,DATESORT) ;Prompt for report parameters, queue report
"RTN","SCMCTSK3",67,0)
 ;Input: LIST=comma delimited string of list subscripts to prompt for
"RTN","SCMCTSK3",68,0)
 ;Input: SCRTN=report routine entry point
"RTN","SCMCTSK3",69,0)
 ;Input: SCDESC=tasked job description
"RTN","SCMCTSK3",70,0)
 ;
"RTN","SCMCTSK3",71,0)
 K TEAM,CLIN,INST,^TMP("SCSORT",$J)
"RTN","SCMCTSK3",72,0)
 N SCDIV,SCBDT,SCEDT,SC,SCI,SCX,SCOUT,SCT
"RTN","SCMCTSK3",73,0)
 D HOME^%ZIS
"RTN","SCMCTSK3",74,0)
 D ENS^%ZISS
"RTN","SCMCTSK3",75,0)
 S SC="^TMP(""SC"",$J)" K @SC S SCOUT=0
"RTN","SCMCTSK3",76,0)
 D TITL^SCRPW50(SCDESC)
"RTN","SCMCTSK3",77,0)
 I $L($G(DATESORT)) D  G:'$$DTR^SCRPO(.SC,.SCBDT,.SCEDT) END
"RTN","SCMCTSK3",78,0)
 .D SUBT^SCRPW50(DATESORT)
"RTN","SCMCTSK3",79,0)
 .S SCBDT("B")="T-30",SCEDT("B")="TODAY"
"RTN","SCMCTSK3",80,0)
 .I (DATESORT["Scheduled Ina")!(DATESORT["Scheduled for Inactivation") S SCEDT("B")="T+30"
"RTN","SCMCTSK3",81,0)
 S LIST="DIV,TEAM,POS,ASPR"
"RTN","SCMCTSK3",82,0)
 ;D SUBT^SCRPW50("**** Date Range Selection ****")
"RTN","SCMCTSK3",83,0)
 ;S (SCBDT("B"),SCEDT("B"))="TODAY"
"RTN","SCMCTSK3",84,0)
 ;G:'$$DTR^SCRPO(.SC,.SCBDT,.SCEDT) END
"RTN","SCMCTSK3",85,0)
 ;D SUBT^SCRPW50("**** Report Parameter Selection ****")
"RTN","SCMCTSK3",86,0)
 F SCI=1:1:$L(LIST,",") S SCX=$P(LIST,",",SCI) D  Q:SCOUT
"RTN","SCMCTSK3",87,0)
 .S SCOUT='$$LIST^SCRPO(.SC,SCX,1)
"RTN","SCMCTSK3",88,0)
 .Q
"RTN","SCMCTSK3",89,0)
 G:SCOUT END
"RTN","SCMCTSK3",90,0)
 S SORT="DV,TM,TP,PR"_$S(SCDESC["FTEE":",AC",1:",PT")
"RTN","SCMCTSK3",91,0)
 D SUBT^SCRPW50("**** Output sort order (optional) ****")
"RTN","SCMCTSK3",92,0)
 G:'$$SORT^SCRPO(.SC,SORT,"") END
"RTN","SCMCTSK3",93,0)
 S SCT(1)="**** Report Parameters Selected ****" D SUBT^SCRPW50(SCT(1))
"RTN","SCMCTSK3",94,0)
 G:'$$PPAR^SCRPO(.SC,1,.SCT) END
"RTN","SCMCTSK3",95,0)
 S SORTN=""
"RTN","SCMCTSK3",96,0)
 F SCI=0:0 S SCI=$O(^TMP("SC",$J,"SORT",SCI)) Q:'SCI  S SORTN=SORTN_$P(^(SCI),U,2)_U
"RTN","SCMCTSK3",97,0)
 W:$G(IORESET)'[$C(99) $G(IORESET)
"RTN","SCMCTSK3",98,0)
 Q
"RTN","SCMCTSK3",99,0)
END W:$G(IORESET)'[$C(99) $G(IORESET) K ^TMP("SC",$J) Q
"RTN","SCMCTSK3",100,0)
EXTEND ;Sort Extend
"RTN","SCMCTSK3",101,0)
 K ^TMP("SCSORT",$J)
"RTN","SCMCTSK3",102,0)
 I '$D(^TMP("SC",$J,"SORT",1)) S ^(1)="DV^INSTITUTION^SCDIV",SORTN="DIVISION"
"RTN","SCMCTSK3",103,0)
 N SORT S A="" F  S A=$O(^TMP("SC",$J,A)) Q:A=""  I "XRSORTDTR"'[A I $G(^(A))'="ALL" S SORT($S(A="ASPR":"PR",A="DIV":"DV",A="POS":"TP",1:"TM",A="PATIENT":PT))=""
"RTN","SCMCTSK3",104,0)
 N I,A,ED,SD
"RTN","SCMCTSK3",105,0)
 F I=0:0 S I=$O(^SCPT(404.43,"AEXT",I)) Q:'I  F J=0:0 S J=$O(^SCPT(404.43,"AEXT",I,J)) Q:'J  D
"RTN","SCMCTSK3",106,0)
 .I '$P($G(^SCPT(404.43,J,0)),U,15) Q
"RTN","SCMCTSK3",107,0)
 .S SD=$G(^TMP("SC",$J,"DTR","BEGIN")) I SD S ED=$G(^("END")) S:'ED ED=9999999 D INACTDT^SCMCTSK1(J) I (X<SD)!(X>ED) Q
"RTN","SCMCTSK3",108,0)
 .D SORT(0)
"RTN","SCMCTSK3",109,0)
 Q
"RTN","SCMCTSK3",110,0)
FILEIN(DATA,INFO) ;undo a inactivation
"RTN","SCMCTSK3",111,0)
 ;INFO entry in PATIENT POSITION ASSIGNMENT file
"RTN","SCMCTSK3",112,0)
 N ZERO,FLDA S DATA=1
"RTN","SCMCTSK3",113,0)
 S ZERO=$G(^SCPT(404.43,+$G(INFO),0))
"RTN","SCMCTSK3",114,0)
 ;I $P(ZERO,U,12)'="IU" Q
"RTN","SCMCTSK3",115,0)
 S FLDA(404.43,(+INFO)_",",.12)=""
"RTN","SCMCTSK3",116,0)
 S FLDA(404.43,(+INFO)_",",.04)=""
"RTN","SCMCTSK3",117,0)
 S FLDA(404.43,(+INFO)_",",.15)=""
"RTN","SCMCTSK3",118,0)
 S FLDA(404.43,(+INFO)_",",.17)=DT
"RTN","SCMCTSK3",119,0)
 I $D(^SCPT(404.42,+ZERO,0)) S FLDA(404.42,(+ZERO)_",",.15)="",FLDA(404.42,(+ZERO)_",",.09)=""
"RTN","SCMCTSK3",120,0)
 D FILE^DIE("E","FLDA","ERR")
"RTN","SCMCTSK3",121,0)
 Q
"RTN","SCMCTSK3",122,0)
UNASSIGN  ;Sort UNASSIGNMENTS
"RTN","SCMCTSK3",123,0)
 N END,START
"RTN","SCMCTSK3",124,0)
 K ^TMP("SCSORT",$J)
"RTN","SCMCTSK3",125,0)
 S START=$G(^TMP("SC",$J,"DTR","BEGIN"))-.1,END=$G(^("END"))+.9
"RTN","SCMCTSK3",126,0)
 I '$D(^TMP("SC",$J,"SORT",1)) S ^(1)="DV^INSTITUTION^SCDIV",SORTN="INSTITUTION"
"RTN","SCMCTSK3",127,0)
 N I,A,STAT
"RTN","SCMCTSK3",128,0)
 F STAT="NA","DU" F J=0:0 S J=$O(^SCPT(404.43,"ASTATB",STAT,J)) Q:'J  D
"RTN","SCMCTSK3",129,0)
 .S ZERO=$G(^SCPT(404.43,J,0)) I ($P(ZERO,U,4)<START)!($P(ZERO,U,4)>END) Q
"RTN","SCMCTSK3",130,0)
 .D SORT(1)
"RTN","SCMCTSK3",131,0)
 Q
"RTN","SCMCTSK3",132,0)
DFN(A) ;Return patient from Position assigment
"RTN","SCMCTSK3",133,0)
 Q +$G(^SCPT(404.42,+$G(A),0))
"RTN","SCMCTSK3",134,0)
PA(A) ;return patient name
"RTN","SCMCTSK3",135,0)
 Q $P($G(^DPT(+$G(DFN),0)),U)
"RTN","SCMCTSK3",136,0)
PR(PP)  ;Return assigned provider
"RTN","SCMCTSK3",137,0)
 N A
"RTN","SCMCTSK3",138,0)
 S A=$$GETPRTP^SCAPMCU2(+$P(ZERO,U,2),DT)
"RTN","SCMCTSK3",139,0)
 I $O(^TMP("SC",$J,"ASPR",0)) I '$D(^(+A)) Q -1
"RTN","SCMCTSK3",140,0)
 S A=$P(A,U,2)
"RTN","SCMCTSK3",141,0)
 Q $S(A="":-1,1:A)
"RTN","SCMCTSK3",142,0)
TP(A) ;return the team position
"RTN","SCMCTSK3",143,0)
 N TP S TP=+$P($G(ZERO),U,2)
"RTN","SCMCTSK3",144,0)
 I $O(^TMP("SC",$J,"POS",0)) I '$D(^(TP)) Q -1
"RTN","SCMCTSK3",145,0)
 Q $P($G(^SCTM(404.57,+TP,0)),U)
"RTN","SCMCTSK3",146,0)
FLAGG ;Sort FLAGGED
"RTN","SCMCTSK3",147,0)
 K ^TMP("SCSORT",$J)
"RTN","SCMCTSK3",148,0)
 N I,A,J
"RTN","SCMCTSK3",149,0)
 I '$D(^TMP("SC",$J,"SORT",1)) S ^(1)="DV^INSTITUTION^SCDIV",SORTN="INSTITUTION",^(2)="TM^TEAM^SCTEAM",^(3)="PR^PROVIDER^SCPROV",^(4)="PA^PATIENT^SCPAT"
"RTN","SCMCTSK3",150,0)
 N SORT S A="" F  S A=$O(^TMP("SC",$J,A)) Q:A=""  I "XRSORTDTR"'[A I $G(^(A))'="ALL" S SORT($S(A="ASPR":"PR",A="DIV":"DV",A="POS":"TP",1:"TM",A="PATIENT":PT))=""
"RTN","SCMCTSK3",151,0)
 S SDT=$G(^TMP("SC",$J,"DTR","BEGIN")),END=$G(^("END"))+.9
"RTN","SCMCTSK3",152,0)
 F I=0:0 S I=$O(^SCPT(404.43,"AFLG",I)) Q:'I  F J=0:0 S J=$O(^SCPT(404.43,"AFLG",I,J)) Q:'J  D
"RTN","SCMCTSK3",153,0)
 .I SDT>0 S:(END'>9) END=9999999 D INACTDT^SCMCTSK1(J) I (X<SDT)!(X>END) Q
"RTN","SCMCTSK3",154,0)
 .D SORT(0)
"RTN","SCMCTSK3",155,0)
 Q
"RTN","SCMCTSK3",156,0)
SORT(INACTIVE)  ;
"RTN","SCMCTSK3",157,0)
 N A,B,C,D,E,QUIT,SCA,K,KCNT,PIECE
"RTN","SCMCTSK3",158,0)
 S ZERO=$G(^SCPT(404.43,+J,0)) Q:$S('$G(INACTIVE):$P(ZERO,U,4),1:'$P(ZERO,U,4))
"RTN","SCMCTSK3",159,0)
 S DFN=$$DFN(+ZERO)
"RTN","SCMCTSK3",160,0)
 S QUIT=0,KCNT=0
"RTN","SCMCTSK3",161,0)
 F K=1:1 Q:'$D(^TMP("SC",$J,"SORT",K))  S A=^(K) K SORT($P(A,U)) S @("A("_K_")=$$"_$P(A,U)_"("_J_")") D  I (A(K)=-1)!($P(A(K),U)="") S QUIT=1 Q
"RTN","SCMCTSK3",162,0)
 .I $P(A,U)="EC",$L(A(K),U)>2 S KCNT=K
"RTN","SCMCTSK3",163,0)
 Q:QUIT
"RTN","SCMCTSK3",164,0)
 S A="" F  S A=$O(SORT(A)) Q:A=""  S @("B=$$"_A_"("_J_")") I B=-1 S QUIT=1 Q
"RTN","SCMCTSK3",165,0)
 Q:QUIT
"RTN","SCMCTSK3",166,0)
 F PIECE=1:1:$S(KCNT:$L(A(KCNT),U)-1,1:1) D
"RTN","SCMCTSK3",167,0)
 .S B="E" K @B
"RTN","SCMCTSK3",168,0)
 .F K=1:1:$O(A(99),-1) S @B@($P(A(K),U,$S(K=KCNT:PIECE,1:1)))="" S C=$Q(@B) K @B S B=C
"RTN","SCMCTSK3",169,0)
 .S @B@(J)=""
"RTN","SCMCTSK3",170,0)
 .M ^TMP("SCSORT",$J)=E
"RTN","SCMCTSK3",171,0)
 Q
"RTN","SCMCTSK3",172,0)
INACT ;
"RTN","SCMCTSK3",173,0)
 N ALPHA,ZERO
"RTN","SCMCTSK3",174,0)
 S ALPHA=$G(^SCTM(404.44,1,1)),ALPHA=$P(ALPHA,U,8) I ALPHA<DT S ALPHA=0
"RTN","SCMCTSK3",175,0)
 S ZERO=$G(^SCPT(404.43,+$G(PA),0)) I '$P(ZERO,U,15) S X="" Q
"RTN","SCMCTSK3",176,0)
 S X1=$P(ZERO,U,15),X2=$S(ALPHA:2,1:30) I $P(ZERO,U,13) S X2=$S(ALPHA:5,1:90)
"RTN","SCMCTSK3",177,0)
 D C^%DTC Q:ALPHA  Q:$E(X,6,7)=15
"RTN","SCMCTSK3",178,0)
 F  S (ZERO,X1)=X,X2=1 D C^%DTC Q:$E(X,6,7)=15  I $E(X,6,7)="01" S X=ZERO Q
"RTN","SCMCTSK3",179,0)
 Q
"RTN","SCMCTSK3",180,0)
INCON ;Inconsistency
"RTN","SCMCTSK3",181,0)
 N X
"RTN","SCMCTSK3",182,0)
 F POS=0:0 S POS=$O(^SCTM(404.57,POS)) Q:'POS  D POSIN(POS) I $L(X) S ^TMP("SCMCTSK",$J,POS)=X
"RTN","SCMCTSK3",183,0)
 Q
"RTN","SCMCTSK3",184,0)
POSIN(POS)      ;
"RTN","SCMCTSK3",185,0)
 S X=""
"RTN","SCMCTSK3",186,0)
 N ZERO S ZERO=$G(^SCTM(404.57,POS,0))
"RTN","SCMCTSK3",187,0)
 I '$P(ZERO,U,4) Q   ;not primary care ignore this
"RTN","SCMCTSK3",188,0)
 I '$$ACTTP^SCMCTPU(POS) Q  ;inactive position   
"RTN","SCMCTSK3",189,0)
 I '$$OKPREC3^SCMCLK(POS,DT) I '$P($G(^SD(403.46,+$P(ZERO,U,3),0)),U,3) S X="Role not=PCprovider" Q
"RTN","SCMCTSK3",190,0)
 ;find provider assigned to position and their person class
"RTN","SCMCTSK3",191,0)
 S PROV=+$$GETPRTP^SCAPMCU2(POS,DT) Q:'PROV
"RTN","SCMCTSK3",192,0)
 S PC=$$GET^XUA4A72(+PROV)
"RTN","SCMCTSK3",193,0)
 I '$O(^SD(403.46,+$P(ZERO,U,3),2,0)) Q
"RTN","SCMCTSK3",194,0)
 I '$D(^SD(403.46,+$P(ZERO,U,3),2,+PC)) S X="PersonClass not valid"
"RTN","SCMCTSK3",195,0)
 Q
"RTN","SCMCTSK3",196,0)
PRFLAG ;
"RTN","SCMCTSK3",197,0)
 N LASTDT,POSH
"RTN","SCMCTSK3",198,0)
 K ^TMP("SCMCTSK",$J) N FLDA
"RTN","SCMCTSK3",199,0)
 F POS=0:0 S POS=$O(^SCTM(404.57,POS)) Q:'POS  S ZERO=$G(^(POS,0)) D
"RTN","SCMCTSK3",200,0)
 .I '$P(ZERO,U,4) Q   ;not primary care ignore this
"RTN","SCMCTSK3",201,0)
 .I '$$ACTTP^SCMCTPU(POS) Q  ;inactive position
"RTN","SCMCTSK3",202,0)
 .S LASTDT=+$O(^SCTM(404.52,"AIDT",POS,1,-DT)),POSH=+$O(^SCTM(404.52,"AIDT",POS,1,LASTDT,0)) Q:'POSH
"RTN","SCMCTSK3",203,0)
 .I $O(^SCTM(404.52,"AIDT",POS,0,-9999999))<LASTDT Q   ;inactivation already scheduled
"RTN","SCMCTSK3",204,0)
 .I $P($G(^SCTM(404.52,POSH,0)),U,10) S FLDA(404.52,POSH_",",.091)="" ;already flagged
"RTN","SCMCTSK3",205,0)
 .I '$P($G(^SCTM(404.52,POSH,0)),U,4) Q   ;inactive
"RTN","SCMCTSK3",206,0)
 .I '$$OKPREC3^SCMCLK(POS,DT) I '$P($G(^SD(403.46,+$P(ZERO,U,3),0)),U,3) S ^TMP("SCMCTSK",$J,POSH)="Role cannot be primary care" Q
"RTN","SCMCTSK3",207,0)
 .;find provider assigned to position and their person class
"RTN","SCMCTSK3",208,0)
 .S PROV=+$$GETPRTP^SCAPMCU2(POS,DT)
"RTN","SCMCTSK3",209,0)
 .S PC=$$GET^XUA4A72(+PROV)
"RTN","SCMCTSK3",210,0)
 .I '$D(^SD(403.46,+$P(ZERO,U,3),2,+PC)) S ^TMP("SCMCTSK",$J,POSH)="Person Class is not valid for this role"
"RTN","SCMCTSK3",211,0)
 F POS=0:0 S POS=$O(^TMP("SCMCTSK",$J,POS)) Q:'POS  S FLDA(404.52,POS_",",.091)=DT
"RTN","SCMCTSK3",212,0)
 F I=0:0 S I=$O(^SCTM(404.52,"AFLG",I)) Q:'I  F POSH=0:0 S POSH=$O(^SCTM(404.52,"AFLG",I,POSH)) Q:'POSH  D
"RTN","SCMCTSK3",213,0)
 .N ZERO S ZERO=$G(^SCTM(404.52,POSH,0))
"RTN","SCMCTSK3",214,0)
 .I '$P(ZERO,U,4) S FLDA(404.52,POSH_",",.091)="" Q
"RTN","SCMCTSK3",215,0)
 .I (-$O(^SCTM(404.52,"AIDT",+ZERO,0,-9999999)))>$P(ZERO,U,2) S FLDA(404.52,POSH_",",.091)=""
"RTN","SCMCTSK3",216,0)
 I $O(FLDA(0)) D FILE^DIE("I","FLDA","ERR")
"RTN","SCMCTSK3",217,0)
 K ^TMP("SCMCTSK",$J)
"RTN","SCMCTSK3",218,0)
 Q
"RTN","SCMCTSK4")
0^21^B48354390^n/a
"RTN","SCMCTSK4",1,0)
SCMCTSK4 ;ALB/JDS - PCMM Inactivation Reports ; 18 Apr 2003  9:36 AM
"RTN","SCMCTSK4",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK4",3,0)
 Q
"RTN","SCMCTSK4",4,0)
POSCHK ;
"RTN","SCMCTSK4",5,0)
 N NAME S NAME=$P($G(^SD(403.46,+$P(INFO,U,3),0)),U)
"RTN","SCMCTSK4",6,0)
 I "RESIDENT (PHYSICIAN)INTERN (PHYSICIAN)"[NAME S $P(DATA,U,3)=1 Q
"RTN","SCMCTSK4",7,0)
 I "NURSE PRACTITIONERPHYSICIAN ASSISTANT"[NAME S $P(DATA,U,3)=2 Q
"RTN","SCMCTSK4",8,0)
 I "PHYSICIAN-ATTENDINGPHYSICIAN-PRIMARY CARENURSE PRACTITIONERPHYSICIAN ASSISTANTPHYSICIAN-PSYCHIATRIST"[NAME D  Q
"RTN","SCMCTSK4",9,0)
 .S $P(DATA,U,3)=3
"RTN","SCMCTSK4",10,0)
 Q
"RTN","SCMCTSK4",11,0)
DIOBEG ;
"RTN","SCMCTSK4",12,0)
 N PG,DC
"RTN","SCMCTSK4",13,0)
 N Y,% W @IOF,!,$G(SCDHD) D NOW^%DTC S Y=% W:$X>(IOM-40) ! W ?(IOM-40)
"RTN","SCMCTSK4",14,0)
 W $P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC",U,$E(Y,4,5))_" " W:Y#100 $J(Y#100\1,2)_"," W Y\10000+1700 W:Y#1 "  "_$E(Y_0,9,10)_":"_$E(Y_"000",11,12)
"RTN","SCMCTSK4",15,0)
 W ?(IOM-15),"PAGE: 1"
"RTN","SCMCTSK4",16,0)
 S Y="",$P(Y,"-",IOM)="" W !,Y,!!
"RTN","SCMCTSK4",17,0)
 W ?(IOM/2-24),"**** Report Parameters Selected ****",!
"RTN","SCMCTSK4",18,0)
 S SC="^TMP(""SC"",$J)"
"RTN","SCMCTSK4",19,0)
 S X=$$PPAR^SCMCTSK8(.SC,.SCT)
"RTN","SCMCTSK4",20,0)
 S (PG,DC)=1
"RTN","SCMCTSK4",21,0)
 F  Q:$Y>(IOSL-3)  W !
"RTN","SCMCTSK4",22,0)
 ;I IOST["C" W !! R SCX:DT I SCX[U S DIOUT=1
"RTN","SCMCTSK4",23,0)
 Q
"RTN","SCMCTSK4",24,0)
DIOEND ;print key
"RTN","SCMCTSK4",25,0)
 N Y,% W @IOF,!,$G(SCDHD) D NOW^%DTC S Y=% W:$X>(IOM-40) ! W ?(IOM-40)
"RTN","SCMCTSK4",26,0)
 W $P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC",U,$E(Y,4,5))_" " W:Y#100 $J(Y#100\1,2)_"," W Y\10000+1700 W:Y#1 "  "_$E(Y_0,9,10)_":"_$E(Y_"000",11,12)
"RTN","SCMCTSK4",27,0)
 W ?(IOM-15),"PAGE: "_($G(DC)+1)
"RTN","SCMCTSK4",28,0)
 S Y="",$P(Y,"-",IOM)="" W !,Y,!!
"RTN","SCMCTSK4",29,0)
 W !,"   REPORT KEY"
"RTN","SCMCTSK4",30,0)
 W !,"   Field Name              Explanation of field name"
"RTN","SCMCTSK4",31,0)
 W !,"   Patient Name            Name of patient scheduled to be inactivated from their primary care team and position/provider"
"RTN","SCMCTSK4",32,0)
 W !,"   SSN                     Patient's last 4 Social Security numbers."
"RTN","SCMCTSK4",33,0)
 W !,"   PC Team                 Patient's assigned Primary Care team in PCMM."
"RTN","SCMCTSK4",34,0)
 W !,"   Provider                Name of primary care practitioner/provider currently assigned to the patient.  This will be an"
"RTN","SCMCTSK4",35,0)
 W !,"                           Associate PC Provider if the patient is assigned to an AP, or it will be a Primary Care Provider"
"RTN","SCMCTSK4",36,0)
 W !,"                           (PCP) if the patient is not assigned to an Associate PC Provider (AP.)"
"RTN","SCMCTSK4",37,0)
 W !,"   Team Position           The name of the team position to which the current practitioner/provider is assigned."
"RTN","SCMCTSK4",38,0)
 W !,"   Institution/Division    Institution name, previously called Division, in which patient receives primary care."
"RTN","SCMCTSK4",39,0)
 W !,"   Sched Date for Inactiva Date patient will be inactivated from PCMM and their Primary Care team and provider/position"
"RTN","SCMCTSK4",40,0)
 W !,"                           panels. If the patient has a completed outpatient encounter with their current PCP or an"
"RTN","SCMCTSK4",41,0)
 W !,"                           assigned AP before this date, the patient will not be inactivated.  If the patient's"
"RTN","SCMCTSK4",42,0)
 W !,"                           inactivation date is extended for 60 days, with the PCMM Extend Patient's Inactivation Date"
"RTN","SCMCTSK4",43,0)
 W !,"                           option, the patient's inactivation will not occur until the new extended date for inactivation."
"RTN","SCMCTSK4",44,0)
 W !,"                           Note: There is a patient reassignment option, which allows an inactivated patient to be"
"RTN","SCMCTSK4",45,0)
 W !,"                           reactivated to their previous Primary Care team and position if they return for care."
"RTN","SCMCTSK4",46,0)
 W !,"   Next Appt Date          Patient is scheduled for an appointment on this date."
"RTN","SCMCTSK4",47,0)
 W !,"                           May indicate patient wants to continue their assignment to their Primary Care team and provider."
"RTN","SCMCTSK4",48,0)
 W !,"   Clinic for next Appt    The clinic in which the patient has their next scheduled appointment."
"RTN","SCMCTSK4",49,0)
 Q
"RTN","SCMCTSK4",50,0)
DIOEND1 ;print Key
"RTN","SCMCTSK4",51,0)
 N Y,% W @IOF,!,$G(SCDHD) D NOW^%DTC S Y=% W:$X>(IOM-40) ! W ?(IOM-40)
"RTN","SCMCTSK4",52,0)
 W $P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC",U,$E(Y,4,5))_" " W:Y#100 $J(Y#100\1,2)_"," W Y\10000+1700 W:Y#1 "  "_$E(Y_0,9,10)_":"_$E(Y_"000",11,12)
"RTN","SCMCTSK4",53,0)
 W ?(IOM-15),"PAGE: "_($G(DC)+1)
"RTN","SCMCTSK4",54,0)
 S Y="",$P(Y,"-",IOM)="" W !,Y,!!
"RTN","SCMCTSK4",55,0)
 W !,"  REPORT KEY"
"RTN","SCMCTSK4",56,0)
 W !,"  Field Name              Explanation of field name"
"RTN","SCMCTSK4",57,0)
 W !,"  Patient Name            Name of patient scheduled to be inactivated from their primary care team and position/provider."
"RTN","SCMCTSK4",58,0)
 W !,"  SSN                     Patient's last 4 SSN numbers."
"RTN","SCMCTSK4",59,0)
 W !,"  Institution             Institution name, previously called Division, in which patient receives primary care."
"RTN","SCMCTSK4",60,0)
 W !,"  PC Team                 Patient's assigned Primary Care team in PCMM."
"RTN","SCMCTSK4",61,0)
 W !,"  Provider/               Name of Primary Care practitioner/provider currently assigned to the patient."
"RTN","SCMCTSK4",62,0)
 W !,"                          This may be an Associate PC Provider (AP,) if the patient is assigned to an AP, or"
"RTN","SCMCTSK4",63,0)
 W !,"                          it may be a Primary Care Provider (PCP) if the patient is not assigned to an"
"RTN","SCMCTSK4",64,0)
 W !,"                          Associate PC Provider (AP.)"
"RTN","SCMCTSK4",65,0)
 W !,"  Team Position           The name of the team position to which the current provider is assigned."
"RTN","SCMCTSK4",66,0)
 W !,"  Preceptor               Name of Preceptor/Primary Care Provider (PCP) if the patient is assigned to an Associate Provider."
"RTN","SCMCTSK4",67,0)
 W !,"                          If this field is blank then the patient is assigned to a PCP, who displays in the Provider field."
"RTN","SCMCTSK4",68,0)
 W !,"  Date Patient            Date patient was inactivated from PCMM and their Primary Care team and provider/position."
"RTN","SCMCTSK4",69,0)
 W !,"   Inactivated            Note: There is a PCMM patient re-assignment option."
"RTN","SCMCTSK4",70,0)
 W !,"  Reason Patient          Reason for patient's automated unassignment from their Primary Care team and provider/position."
"RTN","SCMCTSK4",71,0)
 W !,"   Inactivated            No Appt The patient has been assigned to their current Primary Care Provider (PCP) for"
"RTN","SCMCTSK4",72,0)
 W !,"                          12 months, and does not have a completed appointment encounter with their PCP or any assigned"
"RTN","SCMCTSK4",73,0)
 W !,"                          Associated Primary Care Provider (AP) within those 12 months.  Therefore, they are considered"
"RTN","SCMCTSK4",74,0)
 W !,"                          an inactive patient.  Alternatively, the patient has been assigned to their current PCP for at"
"RTN","SCMCTSK4",75,0)
 W !,"                          least 12 months, and does not have a completed appointment encounter with their PCP or any"
"RTN","SCMCTSK4",76,0)
 W !,"                          assigned Associated Primary Care Provider (AP) in the past 24 months. Therefore, they are"
"RTN","SCMCTSK4",77,0)
 W !,"                          considered an inactive patient."
"RTN","SCMCTSK4",78,0)
 W !,"                          Death - Patient's death, a date of death was entered in the Registration Package"
"RTN","SCMCTSK4",79,0)
 Q
"RTN","SCMCTSK4",80,0)
DIOEND2 ;print Key
"RTN","SCMCTSK5")
0^23^B83482396^n/a
"RTN","SCMCTSK5",1,0)
SCMCTSK5 ;ALB/JDS - PCMM Inactivation Reports ; 03 Jun 2004  3:30 PM
"RTN","SCMCTSK5",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK5",3,0)
 Q
"RTN","SCMCTSK5",4,0)
FLAG ;
"RTN","SCMCTSK5",5,0)
 ;;Patients scheduled for inactivation from their Primary Care team and
"RTN","SCMCTSK5",6,0)
 ;;Primary Care Provider assignments appear below.  Inactivation will 
"RTN","SCMCTSK5",7,0)
 ;;occur on the Scheduled Date for Inactivation date unless the patient
"RTN","SCMCTSK5",8,0)
 ;;has a completed appointment encounter with their current Primary Care
"RTN","SCMCTSK5",9,0)
 ;;Provider (PCP) or their Associate Primary Care Provider (AP) before
"RTN","SCMCTSK5",10,0)
 ;;that date.  The patient may be reactivated to their previous PCP and PC
"RTN","SCMCTSK5",11,0)
 ;;team if they return for care.
"RTN","SCMCTSK5",12,0)
 ;; 
"RTN","SCMCTSK5",13,0)
 ;;VHA DIRECTIVE 2003-063, ACTIVE PATIENTS IN PCMM, establishes the rules for
"RTN","SCMCTSK5",14,0)
 ;;PCMM automated inactivation of patients.  The following is from that Directive.
"RTN","SCMCTSK5",15,0)
 ;;  
"RTN","SCMCTSK5",16,0)
 ;;Inactivation of primary care patients from a PCMM panel occurs under the
"RTN","SCMCTSK5",17,0)
 ;;following circumstances: 
"RTN","SCMCTSK5",18,0)
 ;;(2) (a) The patient expires and 
"RTN","SCMCTSK5",19,0)
 ;;(b) Newly assigned patients (either newly-enrolled patients or patients who
"RTN","SCMCTSK5",20,0)
 ;;have been re-assigned to a different provider) who have not been seen by
"RTN","SCMCTSK5",21,0)
 ;;their PCP or Associate Provider (AP) and 12 months have passed since
"RTN","SCMCTSK5",22,0)
 ;;the time of assignment to that provider.  This provides every PCP a 1-year
"RTN","SCMCTSK5",23,0)
 ;;grace period for seeing patients added to their panel (either newly-enrolled
"RTN","SCMCTSK5",24,0)
 ;;patients or patients transferred from a different panel) before they are
"RTN","SCMCTSK5",25,0)
 ;;inactivated.  Patients must be seen by their PCP or AP within 12 months of
"RTN","SCMCTSK5",26,0)
 ;;being assigned, or they need to be inactivated from the PCP's panel.
"RTN","SCMCTSK5",27,0)
 ;;(c) Established patients that have been assigned to the PCP's panel for more 
"RTN","SCMCTSK5",28,0)
 ;;than 12 months, but have not been seen by their PCP or AP in the past 24 months
"RTN","SCMCTSK5",29,0)
 ;;need to be inactivated.
"RTN","SCMCTSK5",30,0)
 ;;(3) Patients appropriate for removal are to be identified and inactivated on
"RTN","SCMCTSK5",31,0)
 ;;a regular basis.  
"RTN","SCMCTSK5",32,0)
 ;;  
"RTN","SCMCTSK5",33,0)
 ;;With PCMM patch SD*5.3*297 installed, inactivations occur on the fifteenth
"RTN","SCMCTSK5",34,0)
 ;;and the last day of the month.
"RTN","SCMCTSK5",35,0)
 ;;  
"RTN","SCMCTSK5",36,0)
 ;;Patients Scheduled for Inactivation from Primary Care panels
"RTN","SCMCTSK5",37,0)
 ;;                                                           Date
"RTN","SCMCTSK5",38,0)
 ;;                                                           Scheduled       
"RTN","SCMCTSK5",39,0)
 ;;Patient Name         SSN  Provider          Team           for Inactivation
"RTN","SCMCTSK5",40,0)
 ;;------------------------------------------------------------------------------
"RTN","SCMCTSK5",41,0)
 Q
"RTN","SCMCTSK5",42,0)
EXT ;
"RTN","SCMCTSK5",43,0)
 ;;By using the Extend Patients Inactivation Date option, these patients'
"RTN","SCMCTSK5",44,0)
 ;;PCMM inactivation dates are now 60 days from their original inactivation date.
"RTN","SCMCTSK5",45,0)
 ;;Inactivation will occur on the Date Scheduled for Inactivation unless the
"RTN","SCMCTSK5",46,0)
 ;;patient has a completed appointment encounter with their current Primary
"RTN","SCMCTSK5",47,0)
 ;;Care Provider (PCP) or their Associate Primary Care Provider (AP) before
"RTN","SCMCTSK5",48,0)
 ;;that date.  
"RTN","SCMCTSK5",49,0)
 ;;VHA DIRECTIVE 2003-063, ACTIVE PATIENTS IN PCMM,  establishes the rules for
"RTN","SCMCTSK5",50,0)
 ;;PCMM automated inactivation of patients.  The following is from that Directive.
"RTN","SCMCTSK5",51,0)
 ;;  
"RTN","SCMCTSK5",52,0)
 ;;Inactivation of primary care patients from a PCMM panel occurs under the
"RTN","SCMCTSK5",53,0)
 ;;following circumstances: 
"RTN","SCMCTSK5",54,0)
 ;;(2) (a) The patient expires and 
"RTN","SCMCTSK5",55,0)
 ;;(b) Newly assigned patients (either newly-enrolled patients or patients who
"RTN","SCMCTSK5",56,0)
 ;;have been re-assigned to a different provider) who have not been seen by
"RTN","SCMCTSK5",57,0)
 ;;their PCP or Associate Provider (AP) and 12 months have passed since
"RTN","SCMCTSK5",58,0)
 ;;the time of assignment to that provider.  This provides every PCP a 1-year
"RTN","SCMCTSK5",59,0)
 ;;grace period for seeing patients added to their panel (either newly-enrolled
"RTN","SCMCTSK5",60,0)
 ;;patients or patients transferred from a different panel) before they are
"RTN","SCMCTSK5",61,0)
 ;;inactivated.  Patients must be seen by their PCP or AP within 12 months of
"RTN","SCMCTSK5",62,0)
 ;;being assigned, or they need to be inactivated from the PCP's panel.
"RTN","SCMCTSK5",63,0)
 ;;(c) Established patients that have been assigned to the PCP's panel for more 
"RTN","SCMCTSK5",64,0)
 ;;than 12 months, but have not been seen by their PCP or AP in the past 24 months
"RTN","SCMCTSK5",65,0)
 ;;need to be inactivated.
"RTN","SCMCTSK5",66,0)
 ;;(3) Patients appropriate for removal are to be identified and inactivated on
"RTN","SCMCTSK5",67,0)
 ;;a regular basis.
"RTN","SCMCTSK5",68,0)
 ;;    
"RTN","SCMCTSK5",69,0)
 ;;With PCMM patch SD*5.3*297 installed, inactivations occur on the fifteenth
"RTN","SCMCTSK5",70,0)
 ;;and the last day of the month. 
"RTN","SCMCTSK5",71,0)
 ;;  
"RTN","SCMCTSK5",72,0)
 ;;Patients with Extended PCMM Inactivation Dates
"RTN","SCMCTSK5",73,0)
 ;;                                                           Date
"RTN","SCMCTSK5",74,0)
 ;;                                                           Scheduled for   
"RTN","SCMCTSK5",75,0)
 ;;Patient Name         SSN  Provider         Team            Inactivation
"RTN","SCMCTSK5",76,0)
 ;;------------------------------------------------------------------------------
"RTN","SCMCTSK5",77,0)
 Q
"RTN","SCMCTSK5",78,0)
INACT ;
"RTN","SCMCTSK5",79,0)
 ;;Patients inactivated from their Primary Care team and Primary Care Provider
"RTN","SCMCTSK5",80,0)
 ;;assignments appear below.  The patient may be reactivated to their previous PCP
"RTN","SCMCTSK5",81,0)
 ;;and PC team if they return for care.
"RTN","SCMCTSK5",82,0)
 ;;VHA DIRECTIVE 2003-063, ACTIVE PATIENTS IN PCMM, establishes the rules for PCMM
"RTN","SCMCTSK5",83,0)
 ;;automated inactivation of patients.  The following is from that Directive.
"RTN","SCMCTSK5",84,0)
 ;;  
"RTN","SCMCTSK5",85,0)
 ;;Inactivation of primary care patients from a PCMM panel occurs under the
"RTN","SCMCTSK5",86,0)
 ;;following circumstances: 
"RTN","SCMCTSK5",87,0)
 ;;(2) (a) The patient expires and 
"RTN","SCMCTSK5",88,0)
 ;;(b) Newly assigned patients (either newly-enrolled patients or patients who
"RTN","SCMCTSK5",89,0)
 ;;have been re-assigned to a different provider) who have not been seen by
"RTN","SCMCTSK5",90,0)
 ;;their PCP or Associate Provider (AP) and 12 months have passed since
"RTN","SCMCTSK5",91,0)
 ;;the time of assignment to that provider.  This provides every PCP a 1-year
"RTN","SCMCTSK5",92,0)
 ;;grace period for seeing patients added to their panel (either newly-enrolled
"RTN","SCMCTSK5",93,0)
 ;;patients or patients transferred from a different panel) before they are
"RTN","SCMCTSK5",94,0)
 ;;inactivated.  Patients must be seen by their PCP or AP within 12 months of
"RTN","SCMCTSK5",95,0)
 ;;being assigned, or they need to be inactivated from the PCP's panel.
"RTN","SCMCTSK5",96,0)
 ;;(c) Established patients that have been assigned to the PCP's panel for more 
"RTN","SCMCTSK5",97,0)
 ;;than 12 months, but have not been seen by their PCP or AP in the past 24 months
"RTN","SCMCTSK5",98,0)
 ;;need to be inactivated.
"RTN","SCMCTSK5",99,0)
 ;;(3) Patients appropriate for removal are to be identified and inactivated on
"RTN","SCMCTSK5",100,0)
 ;;a regular basis..
"RTN","SCMCTSK5",101,0)
 ;;  
"RTN","SCMCTSK5",102,0)
 ;;With PCMM patch SD*5.3*297 installed, inactivations occur on the fifteenth
"RTN","SCMCTSK5",103,0)
 ;;and the last day of the month. 
"RTN","SCMCTSK5",104,0)
 ;; 
"RTN","SCMCTSK5",105,0)
 ;;Patients Automated Inactivations from Primary Care Panels
"RTN","SCMCTSK5",106,0)
 ;;                                                           Date        Reason
"RTN","SCMCTSK5",107,0)
 ;;                                                           Patient     Patient
"RTN","SCMCTSK5",108,0)
 ;;Patient Name         SSN  Provider          Team           Inact       Inact
"RTN","SCMCTSK5",109,0)
 ;;-------------------------------------------------------------------------------
"RTN","SCMCTSK5",110,0)
 Q
"RTN","SCMCTSK5",111,0)
PRIN ;
"RTN","SCMCTSK5",112,0)
 ;;WARNING- The following primary care staff will be automatically
"RTN","SCMCTSK5",113,0)
 ;;inactivated in PCMM software if a correct 'Person Class' and 
"RTN","SCMCTSK5",114,0)
 ;;'Provider Type' are not entered in the New Person File (#200) or
"RTN","SCMCTSK5",115,0)
 ;;their role and position in the 'Position Setup' window is not 
"RTN","SCMCTSK5",116,0)
 ;;corrected to correspond with their 'Provider Type', 'Person
"RTN","SCMCTSK5",117,0)
 ;;Class' and the Primary Care business rules stated below:
"RTN","SCMCTSK5",118,0)
 ;;  
"RTN","SCMCTSK5",119,0)
 ;;1. Staff designated as Primary Care Providers (PCPs) in PCMM that
"RTN","SCMCTSK5",120,0)
 ;;   are not an Attending physician (Attending MD or Attending DO) NP
"RTN","SCMCTSK5",121,0)
 ;;   or PA, shall be inactivated from PCMM
"RTN","SCMCTSK5",122,0)
 ;;2. Staff designated as Associate Providers (APs) in PCMM, that are not
"RTN","SCMCTSK5",123,0)
 ;;   a Resident/Intern (Physician) NP or PA shall be inactivated in 
"RTN","SCMCTSK5",124,0)
 ;;   PCMM
"RTN","SCMCTSK5",125,0)
 ;;3. All persons designated as an Associate Provider or Primary Care 
"RTN","SCMCTSK5",126,0)
 ;;   Provider, who do not have the correct 'Provider Type' and 'Person
"RTN","SCMCTSK5",127,0)
 ;;   Class' entered in the New Person file (#200) in VistA, shall be 
"RTN","SCMCTSK5",128,0)
 ;;   inactivated from their Primary Care positions in PCMM six months 
"RTN","SCMCTSK5",129,0)
 ;;   after installation of patch SD*5.3*297 Date: |DATE|
"RTN","SCMCTSK5",130,0)
 ;;4. Please contact your PCMM Coordiator or Information Systems 
"RTN","SCMCTSK5",131,0)
 ;;   to correct these problems
"RTN","SCMCTSK5",132,0)
 ;;  
"RTN","SCMCTSK5",133,0)
 ;;  PRIMARY CARE PROVIDERS SCHEDULDED FOR INACTIVATION
"RTN","SCMCTSK5",134,0)
 ;;  
"RTN","SCMCTSK5",135,0)
 ;;Provider's     Assoc     Team                      Person    # of Pts  Sch Inac
"RTN","SCMCTSK5",136,0)
 ;;Name           Clinics   Position   Role           Class     Assigned  Date 
"RTN","SCMCTSK5",137,0)
 ;;-------------------------------------------------------------------------------
"RTN","SCMCTSK5",138,0)
 ;;  
"RTN","SCMCTSK5",139,0)
 Q
"RTN","SCMCTSK5",140,0)
GONE ;
"RTN","SCMCTSK5",141,0)
 ;;  PRIMARY CARE PROVIDERS INACTIVATED
"RTN","SCMCTSK5",142,0)
 ;; 
"RTN","SCMCTSK5",143,0)
 ;;Provider's     Assoc     Team                      Person    # of Pts  Inac
"RTN","SCMCTSK5",144,0)
 ;;Name           Clinics   Position   Role           Class     Assigned  Date   
"RTN","SCMCTSK5",145,0)
 ;;-------------------------------------------------------------------------------
"RTN","SCMCTSK5",146,0)
 ;;    
"RTN","SCMCTSK5",147,0)
 Q
"RTN","SCMCTSK5",148,0)
MAIL(POS,T)       ;Given POS as position set up who gets mail 
"RTN","SCMCTSK5",149,0)
 I $D(^TMP("SCML",$J,"POS",POS)) Q
"RTN","SCMCTSK5",150,0)
 S ^TMP("SCML",$J,"POS",+$G(POS))=""
"RTN","SCMCTSK5",151,0)
 ;who gets mail at this position 
"RTN","SCMCTSK5",152,0)
 N TWO S TWO=$G(^SCTM(404.57,+$G(POS),2))
"RTN","SCMCTSK5",153,0)
 I $P(TWO,U,10) D  ;get preceptor
"RTN","SCMCTSK5",154,0)
 .S PREC=+$$OKPREC3^SCMCLK(POS,DT) Q:'PREC
"RTN","SCMCTSK5",155,0)
 .D POS(PREC)
"RTN","SCMCTSK5",156,0)
 I $P(TWO,U,9)="T" D  ;get team providers
"RTN","SCMCTSK5",157,0)
 .S T=$G(T)
"RTN","SCMCTSK5",158,0)
 .N I F I=0:0 S I=$O(^SCTM(404.57,"C",T,I)) Q:'I  D POS(I)
"RTN","SCMCTSK5",159,0)
 I $P(TWO,U,9)="P" D  ;get position providers
"RTN","SCMCTSK5",160,0)
 .D POS(POS) Q
"RTN","SCMCTSK5",161,0)
 Q
"RTN","SCMCTSK5",162,0)
POS(P) ;provider
"RTN","SCMCTSK5",163,0)
 N A
"RTN","SCMCTSK5",164,0)
 S A=+$$GETPRTP^SCAPMCU2(P,DT) Q:'A
"RTN","SCMCTSK5",165,0)
 S ^TMP("SCML",$J,"POS",A)=""
"RTN","SCMCTSK5",166,0)
 S ^TMP("SCML",$J,"XM",A,POS)=""
"RTN","SCMCTSK5",167,0)
 Q
"RTN","SCMCTSK5",168,0)
LINES(TYPE) ;Lines of Bulletin
"RTN","SCMCTSK5",169,0)
 N I,ZERO,ZERO1,Y
"RTN","SCMCTSK5",170,0)
 S Y=$$PDAT^SCMCGU("SD*5.3*297") X ^DD("DD")
"RTN","SCMCTSK5",171,0)
 F I=1:1 S A=$P($T(@($P("FLAG^INACT^EXT^PRIN^GONE",U,TYPE))+I),";;",2) Q:A=""  D
"RTN","SCMCTSK5",172,0)
 .S ^TMP("SCMCTXT",$J,I,0)=$S(A["|DATE|":$P(A,"|DATE|",1)_Y,1:A)
"RTN","SCMCTSK5",173,0)
 ;S ^TMP("SCMCTXT",$J,2,0)="Patient                   Team                 Position           Dt "_$S($G(XMSUB)["Fla":"Flagged",1:"Inactivate")
"RTN","SCMCTSK5",174,0)
 S (CNT,HEAD)=$O(^TMP("SCMCTXT",$J,99),-1)+1
"RTN","SCMCTSK5",175,0)
 S DIV=""
"RTN","SCMCTSK5",176,0)
 F I=0:0 S I=$O(^TMP("SCMC",$J,I)) Q:'I  S ENTRY=+$O(^(I,0)) D
"RTN","SCMCTSK5",177,0)
 .I TYPE>3 D MM(TYPE) Q
"RTN","SCMCTSK5",178,0)
 .S ZERO=$G(^SCPT(404.43,+ENTRY,0)),ZERO1=$G(^SCPT(404.42,+ZERO,0))
"RTN","SCMCTSK5",179,0)
 .D MAIL(+$P(ZERO,U,2),+$P(ZERO1,U,3)) ;find out which individuals get this
"RTN","SCMCTSK5",180,0)
 .D MAKEMAIL(TYPE)
"RTN","SCMCTSK5",181,0)
 Q
"RTN","SCMCTSK5",182,0)
MAKEMAIL(TYPE)  ;
"RTN","SCMCTSK5",183,0)
 D MAKEMAIL^SCMCTSK6(TYPE) Q
"RTN","SCMCTSK5",184,0)
MM(TYPE)        ;for providers
"RTN","SCMCTSK5",185,0)
 D MM^SCMCTSK6(TYPE) Q
"RTN","SCMCTSK5",186,0)
PRMAIL(TYPE)    ;
"RTN","SCMCTSK5",187,0)
 ;Send mail to providers
"RTN","SCMCTSK5",188,0)
 D PRMAIL^SCMCTSK6(TYPE)
"RTN","SCMCTSK6")
0^25^B62522590^n/a
"RTN","SCMCTSK6",1,0)
SCMCTSK6 ;ALB/JDS - PCMM Bulletins ; 7/19/05 10:04am
"RTN","SCMCTSK6",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK6",3,0)
 Q
"RTN","SCMCTSK6",4,0)
MAKEMAIL(TYPE)  ;
"RTN","SCMCTSK6",5,0)
 N PRE,IN
"RTN","SCMCTSK6",6,0)
 S ZERO=$G(^SCPT(404.43,+ENTRY,0)),ZERO1=$G(^SCPT(404.42,+ZERO,0))
"RTN","SCMCTSK6",7,0)
 S T=+$P(ZERO1,U,3),IN=$P($G(^SCTM(404.51,T,0)),U,7) S INSTNM=$$GET1^DIQ(4,(+IN)_",",.01)
"RTN","SCMCTSK6",8,0)
 I INSTNM'=DIV S DIV=INSTNM D
"RTN","SCMCTSK6",9,0)
 .S ^TMP("SCMCTXT",$J,CNT,0)="  "
"RTN","SCMCTSK6",10,0)
 .S ^TMP("SCMCTXT",$J,CNT+1,0)="      INSTITUTION: "_DIV,CNT=CNT+2
"RTN","SCMCTSK6",11,0)
 S PROV=$P($$GETPRTP^SCAPMCU2(+$P(ZERO,U,2),DT),U,2)
"RTN","SCMCTSK6",12,0)
 S PRE=$P($$OKPREC2^SCMCLK(+$P(ZERO,U,2),DT),U,2)
"RTN","SCMCTSK6",13,0)
 S A=$E($$NAME^SCMCQK1(+ZERO1)_$J("",30),1,20)_" "_$E($$GET1^DIQ(2,(+ZERO1)_",",.0905)_$J("",5),2,5)_" "
"RTN","SCMCTSK6",14,0)
 S A=A_$E(PROV_$J("",20),1,17)_" "_$E($E($$TEAMNM^SCMCQK1(+$P(ZERO1,U,3)),1,14)_$J("",20),1,15)
"RTN","SCMCTSK6",15,0)
 ;S A=A_" "_$E($$POSITION^SCMCQK1(+$P(ZERO,U,2))_$J("",20),1,20)
"RTN","SCMCTSK6",16,0)
 D INACTDT^SCMCTSK1(+ENTRY) S Y=X S:$G(TYPE)=2 Y=$P(ZERO,U,4),Y=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3),A=A_$E(Y_$J("",20),1,11)
"RTN","SCMCTSK6",17,0)
 I $G(TYPE)=3 S Y=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3) S A=A_" "_$E(Y_$J("",20),1,11)
"RTN","SCMCTSK6",18,0)
 I $G(TYPE)=1 S Y=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3) S A=A_" "_$E(Y_$J("",20),1,11)
"RTN","SCMCTSK6",19,0)
 I $G(TYPE)=2 S B=$P(ZERO,U,12),A=A_" "_$S(B="NA":"NO APPT",B="DU":"DECEASED",1:"Unknown")
"RTN","SCMCTSK6",20,0)
 S ^TMP("SCMCTXT",$J,CNT,0)=A
"RTN","SCMCTSK6",21,0)
 I PRE'=PROV I $L(PRE) S CNT=CNT+1,^TMP("SCMCTXT",$J,CNT,0)=$J("",26)_$E(PRE,1,17)
"RTN","SCMCTSK6",22,0)
 S CNT=CNT+1
"RTN","SCMCTSK6",23,0)
 Q
"RTN","SCMCTSK6",24,0)
MM(TYPE)        ;for providers
"RTN","SCMCTSK6",25,0)
 N EXP
"RTN","SCMCTSK6",26,0)
 S Y=$P($G(^SCTM(404.44,1,1)),U,9)
"RTN","SCMCTSK6",27,0)
 S EXP=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)
"RTN","SCMCTSK6",28,0)
 S ZERO=$G(^SCTM(404.52,+ENTRY,0)) N CLI
"RTN","SCMCTSK6",29,0)
 S TP=$G(^SCTM(404.57,+ZERO,0)) D MAIL^SCMCTSK5(+ZERO,+$P(TP,U,2)) S T=$P(TP,U,2)
"RTN","SCMCTSK6",30,0)
 S ^TMP("SCML",$J,"POS",+$P(ZERO,U,3))=""
"RTN","SCMCTSK6",31,0)
 S ^TMP("SCML",$J,"XM",+$P(ZERO,U,3),+ZERO)=""
"RTN","SCMCTSK6",32,0)
 I TYPE=5 S Y=$P(ZERO,U,2),EXP=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)
"RTN","SCMCTSK6",33,0)
 S IN=$P($G(^SCTM(404.51,T,0)),U,7) S INSTNM=$$GET1^DIQ(4,(+IN)_",",.01)
"RTN","SCMCTSK6",34,0)
 I INSTNM'=DIV S DIV=INSTNM D
"RTN","SCMCTSK6",35,0)
 .S ^TMP("SCMCTXT",$J,CNT,0)="   "
"RTN","SCMCTSK6",36,0)
 .S ^TMP("SCMCTXT",$J,CNT+1,0)="      INSTITUTION: "_DIV,CNT=CNT+2
"RTN","SCMCTSK6",37,0)
 N I,CNT1 S CNT1=0
"RTN","SCMCTSK6",38,0)
 S ROLE=$P($G(^SD(403.46,+$P(TP,U,3),0)),U)
"RTN","SCMCTSK6",39,0)
 S PC=$P($$GET^XUA4A72(+$P(ZERO,U,3)),U,2)
"RTN","SCMCTSK6",40,0)
 I $G(^TMP("SCMCTXT",$J,3,0))["|POS|" S A=^(0),^(0)=$P(A,"|POS|")_$P(TP,U)_" ROLE: "_ROLE D
"RTN","SCMCTSK6",41,0)
 .S A=$G(^TMP("SCMCTXT",$J,5,0)),^(0)=$P(A,"|PC|")_PC
"RTN","SCMCTSK6",42,0)
 F I=0:0 S I=$O(^SCTM(404.57,+ZERO,5,I)) Q:'I  S CLI(CNT1)=$P($G(^SC(I,0)),U),CNT1=CNT1+1
"RTN","SCMCTSK6",43,0)
 S A=$E($P($G(^VA(200,+$P(ZERO,U,3),0)),U)_$J("",20),1,14)_" "_$E($G(CLI(0))_$J("",10),1,9)
"RTN","SCMCTSK6",44,0)
 S A=A_" "_$E($P(TP,U)_$J("",20),1,10)_" "_$E(ROLE_$J("",20),1,14)
"RTN","SCMCTSK6",45,0)
 S A=A_" "_$E(PC_$J("",20),1,14)
"RTN","SCMCTSK6",46,0)
 S A=A_" "_$E($$PCPOSCNT^SCAPMCU1(+ZERO,DT,0)_$J("",9),1,4)_" "_EXP
"RTN","SCMCTSK6",47,0)
 S ^TMP("SCMCTXT",$J,CNT,0)=A
"RTN","SCMCTSK6",48,0)
 F I=1:1 Q:'$D(CLI(I))  I $L(CLI(I)) S CNT=CNT+1,^TMP("SCMCTXT",$J,CNT,0)=$J("",15)_$E(CLI(I),1,9)
"RTN","SCMCTSK6",49,0)
 S CNT=CNT+1
"RTN","SCMCTSK6",50,0)
 Q
"RTN","SCMCTSK6",51,0)
PRMAIL(TYPE)    ;
"RTN","SCMCTSK6",52,0)
 ;Send mail to providers
"RTN","SCMCTSK6",53,0)
 N USER
"RTN","SCMCTSK6",54,0)
 F USER=0:0 S USER=$O(^TMP("SCML",$J,"XM",USER)) Q:'USER  D
"RTN","SCMCTSK6",55,0)
 .F I=HEAD:0 S I=$O(^TMP("SCMCTXT",$J,I)) Q:'I  K ^(I)
"RTN","SCMCTSK6",56,0)
 .I TYPE=5 D M5
"RTN","SCMCTSK6",57,0)
 .S CNT=HEAD,DIV=""
"RTN","SCMCTSK6",58,0)
 .F I=0:0 S I=$O(^TMP("SCMC",$J,I)) Q:'I  S ENTRY=+$O(^(I,0)) D
"RTN","SCMCTSK6",59,0)
 ..S ZERO=$G(^SCPT(404.43,+ENTRY,0)),ZERO1=$G(^SCPT(404.42,+ZERO,0))
"RTN","SCMCTSK6",60,0)
 ..I TYPE>3 D  Q
"RTN","SCMCTSK6",61,0)
 ...S ZERO=$G(^SCTM(404.52,+ENTRY,0))
"RTN","SCMCTSK6",62,0)
 ...I $D(^TMP("SCML",$J,"XM",USER,+ZERO)) D MM(TYPE)
"RTN","SCMCTSK6",63,0)
 ..I $D(^TMP("SCML",$J,"XM",USER,+$P(ZERO,U,2))) D MAKEMAIL(TYPE)
"RTN","SCMCTSK6",64,0)
 .I CNT=HEAD Q
"RTN","SCMCTSK6",65,0)
 .S XMY(USER)="",XMTEXT="^TMP(""SCMCTXT"",$J,"
"RTN","SCMCTSK6",66,0)
 .S XMSUB="Patients Scheduled for Inactivation from Primary Care Panel"
"RTN","SCMCTSK6",67,0)
 .I TYPE=3 S XMSUB="Patients With Extended PCMM Inactivation Date"
"RTN","SCMCTSK6",68,0)
 .I TYPE=2 S XMSUB="Patients Automated Inactivations from Primary Care Panels"
"RTN","SCMCTSK6",69,0)
 .I TYPE=4 S XMSUB="Primary Care Providers Scheduled for Inactivation"
"RTN","SCMCTSK6",70,0)
 .I TYPE=5 S XMSUB="Primary Care Providers Inactivated"
"RTN","SCMCTSK6",71,0)
 .D ^XMD
"RTN","SCMCTSK6",72,0)
 Q
"RTN","SCMCTSK6",73,0)
M5 ;Individual provider bulletin
"RTN","SCMCTSK6",74,0)
 Q:$G(^TMP("SCMCTXT",$J,1,0))["ATTENTION"
"RTN","SCMCTSK6",75,0)
 F I=1:1:CNT-1 Q:'$D(^TMP("SCMCTXT",$J,I))  S A=^(I,0),^TMP("SCMCTXT",$J,I+11,0)=A
"RTN","SCMCTSK6",76,0)
 F I=0:1:10 S A=$P($T(M6+I),";;",2),^TMP("SCMCTXT",$J,I+1,0)=A
"RTN","SCMCTSK6",77,0)
 S HEAD=HEAD+12
"RTN","SCMCTSK6",78,0)
 Q
"RTN","SCMCTSK6",79,0)
M6 ;;ATTENTION: You may be inactivated as Primary Care Staff in the computer program
"RTN","SCMCTSK6",80,0)
 ;;Primary Care Management Module (PCMM) VistA
"RTN","SCMCTSK6",81,0)
 ;;Your Primary Care position |POS|       Role |ROLE|
"RTN","SCMCTSK6",82,0)
 ;;May not correspond to your Person Class of
"RTN","SCMCTSK6",83,0)
 ;;|PC|
"RTN","SCMCTSK6",84,0)
 ;;in VistA (file 200). Associate Primary Care Providers who provide Primary Care
"RTN","SCMCTSK6",85,0)
 ;;must be a Resident or Intern (Physician) a Nurse Practitioner or a Physician's
"RTN","SCMCTSK6",86,0)
 ;;Assistant. Primary Care Providers must be an Attending physician (MD or DO),
"RTN","SCMCTSK6",87,0)
 ;;Nurse Practitioner or a Physician's Assistant
"RTN","SCMCTSK6",88,0)
 ;;Please contact your PCMM Coordinator or information systems department if you
"RTN","SCMCTSK6",89,0)
 ;;do not think you should be inactivated in PCMM as a provider.
"RTN","SCMCTSK6",90,0)
 Q
"RTN","SCMCTSK6",91,0)
ACLIN ;Get sting of clinics in Alpha Order
"RTN","SCMCTSK6",92,0)
 S X=""
"RTN","SCMCTSK6",93,0)
 N A,I
"RTN","SCMCTSK6",94,0)
 F I=0:0 S I=$O(^SCTM(404.57,+$G(D0),5,I)) Q:'I  S A=$P($G(^SC(I,0)),U) I $L(A) S A(A)=""
"RTN","SCMCTSK6",95,0)
 S A="" F  S A=$O(A(A)) Q:A=""  S X=X_$E(A,1,5)_U
"RTN","SCMCTSK6",96,0)
 S X=$P(X,U,1,$S(X[U:$L(X,U)-1,1:1))
"RTN","SCMCTSK6",97,0)
 Q
"RTN","SCMCTSK6",98,0)
BULL ;
"RTN","SCMCTSK6",99,0)
 N FLDS
"RTN","SCMCTSK6",100,0)
 S DISUPNO=1
"RTN","SCMCTSK6",101,0)
 K ^TMP("SCMC",$J),^TMP("SCMCTXT",$J),^TMP("SCML",$J),XMY
"RTN","SCMCTSK6",102,0)
 S XMY("G.PCMM PATIENT/PROVIDER INACTIVE")=""
"RTN","SCMCTSK6",103,0)
 S XMTEXT="^TMP(""SCMCTXT"",$J,"
"RTN","SCMCTSK6",104,0)
 S DIC="^SCTM(404.52,",BY="[SCMC PROVIDER INACTIVATED]",DHIT="S CNT=$G(CNT)+1,^TMP(""SCMC"",$J,CNT,D0)=""""",CNT=0
"RTN","SCMCTSK6",105,0)
 S FLDS="",IOP="",DHD="@@",FR="",TO="" D EN1^DIP
"RTN","SCMCTSK6",106,0)
 S XMSUB="Primary Care Providers Inactivated"
"RTN","SCMCTSK6",107,0)
 D LINES^SCMCTSK5(5)
"RTN","SCMCTSK6",108,0)
 D ^XMD
"RTN","SCMCTSK6",109,0)
 D PRMAIL^SCMCTSK5(5)
"RTN","SCMCTSK6",110,0)
 Q
"RTN","SCMCTSK6",111,0)
FTERPT   ;FTEE REPORT
"RTN","SCMCTSK6",112,0)
 D PROMPT^SCMCTSK3("DIRECT PC FTEE-PANEL SIZE")
"RTN","SCMCTSK6",113,0)
 Q:'$D(^TMP("SC",$J,"XR"))
"RTN","SCMCTSK6",114,0)
 ;D FLAGG^SCMCTSK3
"RTN","SCMCTSK6",115,0)
 S Q=""""
"RTN","SCMCTSK6",116,0)
 S DIC="^SCTM(404.52,",L=0
"RTN","SCMCTSK6",117,0)
 D FTEE
"RTN","SCMCTSK6",118,0)
 S (SCDHD,DHD)="DIRECT PC FTEE AND PANEL SIZE REPORT"
"RTN","SCMCTSK6",119,0)
 D BY^SCMCTSK2
"RTN","SCMCTSK6",120,0)
 S DIOBEG="D DIOBEG^SCMCTSK4"
"RTN","SCMCTSK6",121,0)
 S FLDS="[SCMC DIRECT PC FTEE]"
"RTN","SCMCTSK6",122,0)
 I $D(^TMP("SC",$J,"SCLIN")) S FLDS="[SCMC DIRECT PC FTEE 1 CLN]"
"RTN","SCMCTSK6",123,0)
 S DIOEND="D DIOEND^SCMCTSK7"
"RTN","SCMCTSK6",124,0)
 D EN1^DIP
"RTN","SCMCTSK6",125,0)
 Q
"RTN","SCMCTSK6",126,0)
FTEE ;Sort FLAGGED
"RTN","SCMCTSK6",127,0)
 K ^TMP("SCSORT",$J)
"RTN","SCMCTSK6",128,0)
 N I,A,J
"RTN","SCMCTSK6",129,0)
 I '$D(^TMP("SC",$J,"SORT",1)) S ^(1)="DV^INSTITUTION^SCDIV",SORTN="INSTITUTION",^(2)="TM^TEAM^SCTEAM",^(3)="PR^PROVIDER^SCPROV"
"RTN","SCMCTSK6",130,0)
 N SORT S A="" F  S A=$O(^TMP("SC",$J,A)) Q:A=""  I "XRSORTDTR"'[A I $G(^(A))'="ALL" S SORT($S(A="ASPR":"PR",A="CLINIC":"EC",A="DIV":"DV",A="POS":"TP",1:"TM"))=""
"RTN","SCMCTSK6",131,0)
 F I=0:0 S I=$O(^SCTM(404.52,"AIDT",I)) Q:'I  S K=$O(^SCTM(404.52,"AIDT",I,1,-9999999)) I K D
"RTN","SCMCTSK6",132,0)
 .I $O(^SCTM(404.52,"AIDT",I,0,K),-1) Q   ;inactive
"RTN","SCMCTSK6",133,0)
 .S J=$O(^SCTM(404.52,"AIDT",I,1,K,0)) Q:'J
"RTN","SCMCTSK6",134,0)
 .D SORT(0)
"RTN","SCMCTSK6",135,0)
 Q
"RTN","SCMCTSK6",136,0)
SORT(INACTIVE)  ;
"RTN","SCMCTSK6",137,0)
 N A,B,C,D,E,QUIT,SCA,K,KCNT
"RTN","SCMCTSK6",138,0)
 S ZERO=$G(^SCTM(404.52,+J,0))
"RTN","SCMCTSK6",139,0)
 S QUIT=0,KCNT=0
"RTN","SCMCTSK6",140,0)
 F K=1:1 Q:'$D(^TMP("SC",$J,"SORT",K))  S A=^(K) K SORT($P(A,U)) S @("A("_K_")=$$"_$P(A,U)_"("_J_")") D  I (A(K)=-1)!($P(A(K),U)="") S QUIT=1 Q
"RTN","SCMCTSK6",141,0)
 .I ($P(A,U)="EC")!($P(A,U)="AC") D
"RTN","SCMCTSK6",142,0)
 ..I $L(A(K),U)>2 S KCNT=K
"RTN","SCMCTSK6",143,0)
 ..N I F I=1:1:$L(A(K),U)-1 S ^TMP("SC",$J,"SCLIN",+ZERO,$P(A(K),U,I))=""
"RTN","SCMCTSK6",144,0)
 Q:QUIT
"RTN","SCMCTSK6",145,0)
 S A="" F  S A=$O(SORT(A)) Q:A=""  S @("B=$$"_A_"("_J_")") I B=-1 S QUIT=1 Q
"RTN","SCMCTSK6",146,0)
 Q:QUIT
"RTN","SCMCTSK6",147,0)
 F PIECE=1:1:$S(KCNT:$L(A(KCNT),U)-1,1:1) D
"RTN","SCMCTSK6",148,0)
 .S B="E" K @B
"RTN","SCMCTSK6",149,0)
 .F K=1:1:$O(A(99),-1) S @B@($P(A(K),U,$S(K=KCNT:PIECE,1:1)))="" S C=$Q(@B) K @B S B=C
"RTN","SCMCTSK6",150,0)
 .S @B@(J)=""
"RTN","SCMCTSK6",151,0)
 .M ^TMP("SCSORT",$J)=E
"RTN","SCMCTSK6",152,0)
 Q
"RTN","SCMCTSK6",153,0)
DV(PP)       ;return institution sort of patient assignment entry and then IEN of team^ien of position
"RTN","SCMCTSK6",154,0)
 N A,B,C,T,I,INSTNM,INSTN
"RTN","SCMCTSK6",155,0)
 S T=+$P($G(^SCTM(404.57,+ZERO,0)),U,2) I $D(INST(T)) Q INST(T)_U_T_U_(+ZERO)
"RTN","SCMCTSK6",156,0)
 S I=+$P($G(^SCTM(404.51,T,0)),U,7) I $O(^TMP("SC",$J,"DIV",0)) I '$D(^TMP("SC",$J,"DIV",I)) Q -1
"RTN","SCMCTSK6",157,0)
 S INSTNM=$$GET1^DIQ(4,(+I)_",",.01),INSTN=$$GET1^DIQ(4,(+I)_",",99)
"RTN","SCMCTSK6",158,0)
 S INST(T)=$S($L(INSTN)=3:INSTN_" ",1:"")_INSTNM Q INST(T)_U_T_U_(+ZERO)
"RTN","SCMCTSK6",159,0)
EC(PP) Q $$AC(PP)
"RTN","SCMCTSK6",160,0)
AC(PP)     ;return enrolled clinics
"RTN","SCMCTSK6",161,0)
 N I,A
"RTN","SCMCTSK6",162,0)
 S A=""
"RTN","SCMCTSK6",163,0)
 F I=0:0 S I=$O(^SCTM(404.57,+ZERO,5,I)) Q:'I  D
"RTN","SCMCTSK6",164,0)
 .;I '$$PTCL^SCRPO2(DFN,U_I,0,DT) Q   ;not enrolled
"RTN","SCMCTSK6",165,0)
 .I $D(CLIN(I)) S A=A_CLIN(I)_U Q
"RTN","SCMCTSK6",166,0)
 .I $O(^TMP("SC",$J,"CLINIC",0)) I '$D(^(I)) Q
"RTN","SCMCTSK6",167,0)
 .S CLIN(I)=$P($G(^SC(I,0)),U) I $L(CLIN(I)) S A=A_CLIN(I)_U
"RTN","SCMCTSK6",168,0)
 Q $S(A="":-1,1:A)
"RTN","SCMCTSK6",169,0)
TM(PP) ;Return Team
"RTN","SCMCTSK6",170,0)
 N I,A,T
"RTN","SCMCTSK6",171,0)
 S T=+$P($G(^SCTM(404.57,+ZERO,0)),U,2)
"RTN","SCMCTSK6",172,0)
 I $D(TEAM(T)) Q TEAM(T)
"RTN","SCMCTSK6",173,0)
 I $O(^TMP("SC",$J,"TEAM",0)) I '$D(^(T)) Q -1
"RTN","SCMCTSK6",174,0)
 S TEAM(T)=$P($G(^SCTM(404.51,+T,0)),U)
"RTN","SCMCTSK6",175,0)
 I '$L(TEAM(T)) K TEAM(T) Q -1
"RTN","SCMCTSK6",176,0)
 Q TEAM(T)
"RTN","SCMCTSK6",177,0)
TP(A) ;return the team position
"RTN","SCMCTSK6",178,0)
 N TP S TP=+ZERO
"RTN","SCMCTSK6",179,0)
 I $O(^TMP("SC",$J,"POS",0)) I '$D(^(TP)) Q -1
"RTN","SCMCTSK6",180,0)
 Q $P($G(^SCTM(404.57,+TP,0)),U)
"RTN","SCMCTSK6",181,0)
PR(PP)  ;Return assigned provider
"RTN","SCMCTSK6",182,0)
 N A
"RTN","SCMCTSK6",183,0)
 I $O(^TMP("SC",$J,"ASPR",0)) I '$D(^(+$P(ZERO,U,3))) Q -1
"RTN","SCMCTSK6",184,0)
 S A=$$GET1^DIQ(200,(+$P(ZERO,U,3))_",",.01) Q $S(A="":-1,1:A)
"RTN","SCMCTSK6",185,0)
 Q
"RTN","SCMCTSK6",186,0)
PCP(D0) ;PCP or AP
"RTN","SCMCTSK6",187,0)
 N TP,A S TP=+$G(^SCTM(404.52,D0,0))
"RTN","SCMCTSK6",188,0)
 S A=$O(^SCTM(404.53,"AIDT",TP,1,0),-1) I 'A Q "PCP"
"RTN","SCMCTSK6",189,0)
 I $O(^SCTM(404.53,"AIDT",TP,0,A),-1) Q "PCP"
"RTN","SCMCTSK6",190,0)
 Q "AP"
"RTN","SCMCTSK6",191,0)
CLN(D0) ;sorted by clinic get next one
"RTN","SCMCTSK6",192,0)
 N A S A=$O(^TMP("SC",$J,"SCLIN",D0,"")) Q:A=""
"RTN","SCMCTSK6",193,0)
 N I F I=0:0 S I=$O(^SC("B",A,I)) Q:'I  I $D(^SCTM(404.57,D0,5,I)) Q
"RTN","SCMCTSK6",194,0)
 Q:'I
"RTN","SCMCTSK6",195,0)
 S DIPA("NUM")="`"_I K ^TMP("SC",$J,"SCLIN",D0,A)
"RTN","SCMCTSK7")
0^29^B31968404^n/a
"RTN","SCMCTSK7",1,0)
SCMCTSK7 ;ALB/JDS - PCMM FTEE REPORT ; 8/23/05 11:46am
"RTN","SCMCTSK7",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK7",3,0)
 Q
"RTN","SCMCTSK7",4,0)
DIOEND ;End of FTEE report
"RTN","SCMCTSK7",5,0)
 N XX
"RTN","SCMCTSK7",6,0)
 W @IOF
"RTN","SCMCTSK7",7,0)
 W !!!,"REPORT KEY",!!
"RTN","SCMCTSK7",8,0)
 F I=1:1 S A=$P($T(TIOEND+I),";;",2) Q:'$L(A)  W !,A I $Y>(IOSL-4) I $G(IOST)["C-" R XX:DTIME W @IOF
"RTN","SCMCTSK7",9,0)
 Q
"RTN","SCMCTSK7",10,0)
TIOEND ;
"RTN","SCMCTSK7",11,0)
 ;;Column Heading             Explanation of column heading
"RTN","SCMCTSK7",12,0)
 ;; 
"RTN","SCMCTSK7",13,0)
 ;;Providers Name             The name of the primary care Provider
"RTN","SCMCTSK7",14,0)
 ;;Institution                Institution name, previously called Division, where patient receives primary care
"RTN","SCMCTSK7",15,0)
 ;;PC TEAM                    The name of the primary care team to which this position (and therefore provider) is assigned.
"RTN","SCMCTSK7",16,0)
 ;;Provider's Team Position   The name of the Primary care team position to which this provider's assigned
"RTN","SCMCTSK7",17,0)
 ;;AP or PCP                  This column displays whether this provider is an Associate Primary Care Provider
"RTN","SCMCTSK7",18,0)
 ;;                           (AP) or a Primary Care Provider (PCP)
"RTN","SCMCTSK7",19,0)
 ;;Associated Clinic(s)     The scheduling clinic(s) associated with this position/provider in the PCMM software
"RTN","SCMCTSK7",20,0)
 ;;Direct PC FTEE             The number of hours the provider spends providing direct primary care expressed as a Full-Time Employee
"RTN","SCMCTSK7",21,0)
 ;;                           Equivalent Examples: One FTEE=1.00=40 hours per week. 0.75 FTEE=30 hours per week. 0.50 FTEE=20 hours
"RTN","SCMCTSK7",22,0)
 ;;                           per week. Percent FTEE is equal to 100 x the FTEE number on this report. For example FTEE=0.75= 75%
"RTN","SCMCTSK7",23,0)
 ;;Patients for Position      This represents the total maximum number of patients this provider is expected to care for on this panel
"RTN","SCMCTSK7",24,0)
 ;;              Allowed      This number is entered in the PCMM GUI 'Primary Care Team Position Setup' window on the 'Settings' tab
"RTN","SCMCTSK7",25,0)
 ;;                           Additional patients above this number may be assigned to the provider depending on local management policy
"RTN","SCMCTSK7",26,0)
 ;;Patients for Position      The actual current number of active patients assigned to this provider in PCMM at the time of this report
"RTN","SCMCTSK7",27,0)
 ;;                Actual     This number displays on the PCMM GUI 'Primary Care Team Position Setup' window on the 'Settings' tab
"RTN","SCMCTSK7",28,0)
 ;;Available Patient Openings The difference in the number of patients allowed and the actual number of patients currently assigned
"RTN","SCMCTSK7",29,0)
 ;;                           If this is a positive number, additional patient assignments may be made
"RTN","SCMCTSK7",30,0)
 ;;                           If this is a negative number (in parentheses,) the maximum number of patient assignments exceeds what is
"RTN","SCMCTSK7",31,0)
 ;;                           indicated in PCMM. Local management decides whether to assign patients over the maximum number.
"RTN","SCMCTSK7",32,0)
 ;;Adjusted Panel Size        The Adjusted Panel Size column is the result of the Active Patients column divided by the FTEE (when not 
"RTN","SCMCTSK7",33,0)
 ;;                           0) and is an attempt to standardize the panel size so comparisons can be made for providers that have
"RTN","SCMCTSK7",34,0)
 ;;                           different FTEE values.  Example, Active patients 500/0.85 FTEE=588. This is the number of patients this
"RTN","SCMCTSK7",35,0)
 ;;                           provider would be expected to provide primary care for if their FTEE=1.0
"RTN","SCMCTSK7",36,0)
 ;;FTEE and Panel Size Total  The total number of FTEE, patients for positions allowed, patients for positions actual, and available 
"RTN","SCMCTSK7",37,0)
 ;;                           patient opening for this report. If this report is sorted on Associated Clinic, then subtotals for each 
"RTN","SCMCTSK7",38,0)
 ;;                           clinic and a total for the entire report print. If this report is sorted on PC Team, then subtotals for
"RTN","SCMCTSK7",39,0)
 ;;                           each team and a total for the entire report print
"RTN","SCMCTSK7",40,0)
 Q
"RTN","SCMCTSK7",41,0)
SETASC(RESULT,DATA) ;set associated clinics        
"RTN","SCMCTSK7",42,0)
 N ENTRY,OLD S ENTRY=+$G(DATA(0))
"RTN","SCMCTSK7",43,0)
 I ENTRY I '$D(^SCTM(404.57,+ENTRY,5,0)) S ^(0)="^404.575PA^^"
"RTN","SCMCTSK7",44,0)
 F I=0:0 S I=$O(^SCTM(404.57,+ENTRY,5,I)) Q:'I  S OLD(I)=""
"RTN","SCMCTSK7",45,0)
 F I=1:1 Q:'$D(DATA(I))  S A=$P(DATA(I),U,2) K OLD(+A) I '$D(^SCTM(404.57,+ENTRY,5,+A)) D
"RTN","SCMCTSK7",46,0)
 .S DIC(0)="LM",DIC="^SCTM(404.57,"_ENTRY_",5,",X=(+A),DA(1)=ENTRY K OLD(+A) D ^DICN
"RTN","SCMCTSK7",47,0)
 ;get rid of deleted
"RTN","SCMCTSK7",48,0)
 F I=0:0 S I=$O(OLD(I)) Q:'I  S DIK="^SCTM(404.57,"_ENTRY_",5,",DA(1)=ENTRY,DA=I D ^DIK
"RTN","SCMCTSK7",49,0)
 Q
"RTN","SCMCTSK7",50,0)
DIS2 ;continue inactivation stuff
"RTN","SCMCTSK7",51,0)
 ;  Existing varibles
"RTN","SCMCTSK7",52,0)
 ;   ZERO  =  zero node of 404.43
"RTN","SCMCTSK7",53,0)
 ;   ENTRY =  ien in 404.43
"RTN","SCMCTSK7",54,0)
 ;  Newed at this line lable
"RTN","SCMCTSK7",55,0)
 ;   DA    =  iens in 404.43 and 404.42
"RTN","SCMCTSK7",56,0)
 ;   DIE   =  file numbers 404.43 and 404.42
"RTN","SCMCTSK7",57,0)
 ;   DR    =  dr edit strings
"RTN","SCMCTSK7",58,0)
 ;   SCV1  =  patient dfn
"RTN","SCMCTSK7",59,0)
 ;   SCV2  =  is there team data 1 or 0
"RTN","SCMCTSK7",60,0)
 ;   SCV3  =  team ien
"RTN","SCMCTSK7",61,0)
 ;   SCV4  =  looper
"RTN","SCMCTSK7",62,0)
 N DA,DIE,DR,SCV1,SCV2,SCV3,SCV4
"RTN","SCMCTSK7",63,0)
 ;original code has next line commented
"RTN","SCMCTSK7",64,0)
 ;I $P(ZERO,U,16)=1 Q
"RTN","SCMCTSK7",65,0)
 ;next inactivate the patient team position assignment
"RTN","SCMCTSK7",66,0)
 S DA=ENTRY,DIE="^SCPT(404.43,",DR=".04////"_DT_";.12////NA;.15///@;.13///@"
"RTN","SCMCTSK7",67,0)
 D ^DIE K DIE
"RTN","SCMCTSK7",68,0)
 ;check toggle for automatic team inactivations - site level
"RTN","SCMCTSK7",69,0)
 ;if not 1 do not inactivate from team automatically (all teams)
"RTN","SCMCTSK7",70,0)
 I $P($G(^SCTM(404.44,1,1)),U,10)'=1 Q
"RTN","SCMCTSK7",71,0)
 S DA=$P(ZERO,U) Q:'DA
"RTN","SCMCTSK7",72,0)
 ;check toggle for automatic team inactivations - team level
"RTN","SCMCTSK7",73,0)
 ;if not 1 do not inactivate from team automaticaly (this team only)
"RTN","SCMCTSK7",74,0)
 I $P($G(^SCPT(404.42,DA,0)),U,16)=1 Q
"RTN","SCMCTSK7",75,0)
 S DIE="^SCPT(404.42,",DR=".09////"_DT_";.15////IU" D ^DIE K DIE
"RTN","SCMCTSK7",76,0)
 S SCV1=$P($G(^SCPT(404.42,+$P(ZERO,U),0)),U) Q:SCV1=""
"RTN","SCMCTSK7",77,0)
 ;make a call to GETALL^SCAPMCA(DFN)
"RTN","SCMCTSK7",78,0)
 ;team info returned at ^TMP("SC",$J,DFN,"TM",IEN 404.51,IEN 404.42,"POS",IEN 404.43)    
"RTN","SCMCTSK7",79,0)
 S SCV2=$$GETALL^SCAPMCA(SCV1) Q:'1
"RTN","SCMCTSK7",80,0)
 S SCV3=$P($G(^SCTM(404.57,+$P(ZERO,U,2),0)),U,2) Q:SCV3=""
"RTN","SCMCTSK7",81,0)
 ;loop thru and inactivate all positions associated with this patient on this team
"RTN","SCMCTSK7",82,0)
 S SCV4=0 F  S SCV4=$O(^TMP("SC",$J,SCV1,"TM",SCV3,"POS",SCV4)) Q:'SCV4  D
"RTN","SCMCTSK7",83,0)
 . S DA=SCV4
"RTN","SCMCTSK7",84,0)
 . ;check for previous unassignment and quit if one exsists
"RTN","SCMCTSK7",85,0)
 . I $P($G(^SCPT(404.43,SCV4,0)),U,4) Q
"RTN","SCMCTSK7",86,0)
 . S DIE=404.43
"RTN","SCMCTSK7",87,0)
 . S DR=".04////"_DT_";.12////NA;.15///@;.13///@"
"RTN","SCMCTSK7",88,0)
 . D ^DIE K DIE
"RTN","SCMCTSK7",89,0)
 K ^TMP("SC",$J,SCV1)
"RTN","SCMCTSK7",90,0)
 Q
"RTN","SCMCTSK8")
0^30^B66850488^n/a
"RTN","SCMCTSK8",1,0)
SCMCTSK8 ;;BP/DMR - PCMM INACTIVATION REPORTS ; 8/24/05 9:36am
"RTN","SCMCTSK8",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK8",3,0)
 Q
"RTN","SCMCTSK8",4,0)
FLAG ;
"RTN","SCMCTSK8",5,0)
 IF FLDS="[SC PROVIDER FLAGGED]" D
"RTN","SCMCTSK8",6,0)
 .W !,"PRIMARY CARE STAFF SCHEDULED FOR INACTIVATION"
"RTN","SCMCTSK8",7,0)
 IF FLDS="[SC INACTIVATED]" D
"RTN","SCMCTSK8",8,0)
 .W !,"PRIMARY CARE STAFF AUTOMATED INACTIVATIONS"
"RTN","SCMCTSK8",9,0)
 W ?120,$E(DT,4,5)_"/"_$E(DT,6,7)_"/"_$E(DT,2,3)
"RTN","SCMCTSK8",10,0)
 W !!,"This report is sorted by:"
"RTN","SCMCTSK8",11,0)
 W !,"                                                           INSTITUTION"
"RTN","SCMCTSK8",12,0)
 W !,"                                                           TEAM"
"RTN","SCMCTSK8",13,0)
 W !,"                                                           PRACTITIONER"
"RTN","SCMCTSK8",14,0)
 IF FLDS="[SC PROVIDER FLAGGED]" D
"RTN","SCMCTSK8",15,0)
 .W !!,"WARNING- THE FOLLOWING PRIMARY CARE STAFF ARE SCHEDULED FOR AUTOMATED INACTIVATION FROM PCMM SOFTWARE UNLESS APPROPRIATE"
"RTN","SCMCTSK8",16,0)
 .W !,"AND CONSISTENT ENTRIES ARE ENTERED IN THE NEW PERSON FILE AND THE TEAM POSITION FILE IN ACCORDANCE WITH PRIMARY CARE AND"
"RTN","SCMCTSK8",17,0)
 .W !,"PCMM BUSINESS RULES IN VHA DIRECTIVE 2003-022.  (NOTE:  The staff's 'Person Class' is in the 'New Person' file, File #200,"
"RTN","SCMCTSK8",18,0)
 .W !,"sub-file 8932.1 and field .01.  The staff person's 'Role' is entered in the PCMM GUI, in the 'Primary Care Position Setup'"
"RTN","SCMCTSK8",19,0)
 .W !,"window on the 'Settings' tab.  'Role' is saved in the 'Team Position' file 404.57, 'Standard Role Name' field .03)."
"RTN","SCMCTSK8",20,0)
 .W !,"Following entry of correct and consistent file entries, staff will be removed from this report the next time the staff"
"RTN","SCMCTSK8",21,0)
 .W !,"inactivation routine runs, which is the last day of each month."
"RTN","SCMCTSK8",22,0)
 IF FLDS="[SC INACTIVATED]" D
"RTN","SCMCTSK8",23,0)
 .W !!,"WARNING- THE FOLLOWING PRIMARY CARE STAFF WERE AUTOMATICALLY INACTIVATED FROM THE PCMM SOFTWARE SINCE THEY DID NOT HAVE"
"RTN","SCMCTSK8",24,0)
 .W !,"APPROPRIATE AND CONSISTENT 'PERSON CLASS' AND 'STANDARD ROLE' ENTRIES ACCORDING TO THE PRIMARY CARE BUSINESS RULES IN"
"RTN","SCMCTSK8",25,0)
 .W !,"VHA DIRECTIVE 2003-022.  (The staff's 'Person Class' is in the 'New Person' file, #200, sub-file 8932.1, and field .01."
"RTN","SCMCTSK8",26,0)
 .W !,"The staff's 'Role' is entered through the PCMM GUI software, 'Primary Care Position Setup' window on the 'Settings' tab."
"RTN","SCMCTSK8",27,0)
 .W !,"'Role' is saved in the 'Team Position' file 404.57, 'Standard Role Name' field .03.) Following entry of correct and"
"RTN","SCMCTSK8",28,0)
 .W !,"consistent file entries, staff may be re-assigned/re-activated to a primary care position in PCMM."
"RTN","SCMCTSK8",29,0)
 W !!,"These are the Primary Care and PCMM business rules:"
"RTN","SCMCTSK8",30,0)
 W !!,"1.)  Primary care providers and staff designated as Primary Care Providers (PCPs) in PCMM, that are not a Primary Care"
"RTN","SCMCTSK8",31,0)
 W !,"physician (Medical Doctor or Doctor of Osteopathy) Nurse Practitioner (NP) or Physician Assistant (PA) will be"
"RTN","SCMCTSK8",32,0)
 W !,"inactivated in the PCMM software."
"RTN","SCMCTSK8",33,0)
 W !,"2.) Primary care providers and staff designated as Associate Primary Care Providers (APs,) that are not a Primary Care"
"RTN","SCMCTSK8",34,0)
 W !,"Resident/Intern (Physician,) Nurse Practitioner (NP,) or Physician Assistant (PA,) will be inactivated in the PCMM software."
"RTN","SCMCTSK8",35,0)
 W !,"3.) All staff, which are designated as a Primary Care Provider (PCP) or an Associate Primary Care Provider (AP) who do not"
"RTN","SCMCTSK8",36,0)
 W !,"have an appropriate 'Person Class' entry consistent with their 'Standard Role Name' in VistA Fileman, will be"
"RTN","SCMCTSK8",37,0)
 W !,"inactivated from their primary care position in PCMM software."
"RTN","SCMCTSK8",38,0)
 IF FLDS="[SC PROVIDER FLAGGED]" D
"RTN","SCMCTSK8",39,0)
 .W !,"4.) Staff inactivation's will occur six months after installation of this patch, SD*5.3*297."
"RTN","SCMCTSK8",40,0)
 IF FLDS="[SC INACTIVATED]" D
"RTN","SCMCTSK8",41,0)
 .W !,"4.) Staff inactivation's occurred six months after installation of this patch, SD*5.3*297."
"RTN","SCMCTSK8",42,0)
 W !!,"Please contact the PCMM Coordinator or Information Systems (IRMS) department for assistance in resolving any problems."
"RTN","SCMCTSK8",43,0)
 W @IOF
"RTN","SCMCTSK8",44,0)
 Q
"RTN","SCMCTSK8",45,0)
KEY W #
"RTN","SCMCTSK8",46,0)
 W !,"Column                      Explanation"
"RTN","SCMCTSK8",47,0)
 W !!,"Institution                 Institution name, previously called Division, in which provider sees primary care patients."
"RTN","SCMCTSK8",48,0)
 W !,"PC Team                     Staff person's Primary Care team in PCMM software."
"RTN","SCMCTSK8",49,0)
 W !,"Name                        Name of staff inactivated from their primary care position in PCMM software."
"RTN","SCMCTSK8",50,0)
 W !,"Team Position               The name of the team position to which the staff was assigned."
"RTN","SCMCTSK8",51,0)
 W !,"Associated Clinic           Associated Clinic(s) where provider saw primary care patients.  'Associated Clinics' display in the PCMM"
"RTN","SCMCTSK8",52,0)
 W !,"                            GUI, 'Primary Care Position Setup' window, on the 'Associated Clinics' tab and are saved"
"RTN","SCMCTSK8",53,0)
 W !,"                            in the Team Position file 404.575 and .01 field, 'Associated Clinics'."
"RTN","SCMCTSK8",54,0)
 W !,"Role                        The function this position serves, as entered in PCMM GUI on the 'Primary Care Position Setup' window,"
"RTN","SCMCTSK8",55,0)
 W !,"                            'General' tab and saved in the Team Position file 404.57, Standard Role Name field .03."
"RTN","SCMCTSK8",56,0)
 W !,"                            Examples:  Physician, Nurse Practitioner, Resident, Intern, Social Worker, or Psychologist."
"RTN","SCMCTSK8",57,0)
 W !,"Person Class                Nationally used clinician identifier for provider types from the New Person file #200, sub-file 8932.1,"
"RTN","SCMCTSK8",58,0)
 W !,"                            and field .01, for example, Physicians (MD and DO)."
"RTN","SCMCTSK8",59,0)
 IF FLDS="[SC INACTIVATED]" D
"RTN","SCMCTSK8",60,0)
 .W !,"# Pts Unassigned            The number of primary care patients unassigned because of this staff's inactivation in PCMM. This number"
"RTN","SCMCTSK8",61,0)
 .W !,"                            is the number viewed in the field, 'Patients for Position:  Actual', displayed in the PCMM GUI Primary"
"RTN","SCMCTSK8",62,0)
 .W !,"                            Care Position Setup window on the Settings tab.  Use the 'PCMM Inconsistency Report' to see patients"
"RTN","SCMCTSK8",63,0)
 .W !,"                            with a team assignment and no provider assignment."
"RTN","SCMCTSK8",64,0)
 .W !,"Date Inactivated            The date this staff person was inactivated from their Primary Care position in the PCMM software, if"
"RTN","SCMCTSK8",65,0)
 .W !,"                            their Role and Person Class remained inappropriate or inconsistent."
"RTN","SCMCTSK8",66,0)
 IF FLDS="[SC PROVIDER FLAGGED]" D
"RTN","SCMCTSK8",67,0)
 .W !,"# Pts Assigned              The number of primary care patients currently assigned to this provider's position.  This number,"
"RTN","SCMCTSK8",68,0)
 .W !,"                            'Patients for Position:  Actual', displays in the PCMM GUI 'Primary Care Position Setup' window"
"RTN","SCMCTSK8",69,0)
 .W !,"                            on the 'Settings' tab and is a count of the number of patients assigned to this provider position"
"RTN","SCMCTSK8",70,0)
 .W !,"                            at the time of this report."
"RTN","SCMCTSK8",71,0)
 .W !,"Scheduled Inactivate Date   Date staff will be inactivated from their Primary Care position in the PCMM software, if the staff's"
"RTN","SCMCTSK8",72,0)
 .W !,"                            'Role' and 'Person Class' aren't appropriate and consistent with Primary Care business rules."
"RTN","SCMCTSK8",73,0)
 W !,"Reason for Inconsistency/   The reason causing this primary care staff or provider's inactivation."
"RTN","SCMCTSK8",74,0)
 W !,"Inactivation                Their 'Role' and 'Person Class' must be consistent and appropriate for their assignment in"
"RTN","SCMCTSK8",75,0)
 W !,"                            PCMM.  Please refer to the Warning at the top of this report."
"RTN","SCMCTSK8",76,0)
 W !,"                            'Role not=PC provider' means the 'Standard Role Name' entered in file 404.57, .03 is not a"
"RTN","SCMCTSK8",77,0)
 W !,"                            valid role for this position to be a primary care provider.  For example, Social Workers,"
"RTN","SCMCTSK8",78,0)
 W !,"                            Dietitians, Psychologists and others may not be indicated as providing primary care or be"
"RTN","SCMCTSK8",79,0)
 W !,"                            AP's or PCP's in PCMM according to the Primary Care business rules in VHA Directives."
"RTN","SCMCTSK8",80,0)
 W !,"                            'Person Class not valid' means this person's entry in the New Person file #200 is"
"RTN","SCMCTSK8",81,0)
 W !,"                            not congruent with being the type of primary care provider entered in PCMM."
"RTN","SCMCTSK8",82,0)
 W !,"                            For example, a Resident may not be a PCP in PCMM."
"RTN","SCMCTSK8",83,0)
 W !,"Total                       Sums the number of patients who will be or were effected by practitioners inactivation's from PCMM."
"RTN","SCMCTSK8",84,0)
 W !,"Count                       A total count of the number of staff positions scheduled for inactivation or were inactivated."
"RTN","SCMCTSK8",85,0)
 Q
"RTN","SCMCTSK8",86,0)
PPAR(SC,SCT)    ;Print Sort Display
"RTN","SCMCTSK8",87,0)
 S X=$$PPAR^SCRPO(.SC,0,.SCT)
"RTN","SCMCTSK8",88,0)
 I $O(^TMP("SCSORT",$J,""))']"" W !!," *** NO RECORDS TO PRINT ***",!!
"RTN","SCMCTSK8",89,0)
 Q 1
"RTN","SCMCTSK9")
0^33^B28705844^n/a
"RTN","SCMCTSK9",1,0)
SCMCTSK9 ;;BP/DMR - PCMM ; 18 Apr 2003  9:36 AM
"RTN","SCMCTSK9",2,0)
 ;;5.3;Scheduling;**297**;AUG 13, 1993
"RTN","SCMCTSK9",3,0)
 Q
"RTN","SCMCTSK9",4,0)
EXTKEY ;
"RTN","SCMCTSK9",5,0)
 N Y,% W @IOF,!,$G(SCDHD) D NOW^%DTC S Y=% W:$X>(IOM-40) ! W ?(IOM-40)
"RTN","SCMCTSK9",6,0)
 W $P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC",U,$E(Y,4,5))_" " W:Y#100 $J(Y#100\1,2)_"," W Y\10000+1700 W:Y#1 "  "_$E(Y_0,9,10)_":"_$E(Y_"000",11,12)
"RTN","SCMCTSK9",7,0)
 W ?(IOM-15),"PAGE: "_($G(DC)+1)
"RTN","SCMCTSK9",8,0)
 S Y="",$P(Y,"-",IOM)="" W !,Y,!!
"RTN","SCMCTSK9",9,0)
 W !,"Column Heading        Explanation of column headings"
"RTN","SCMCTSK9",10,0)
 W !
"RTN","SCMCTSK9",11,0)
 W !,"Patient Name          Name of patient scheduled to be inactivated from their primary care team and position/provider."
"RTN","SCMCTSK9",12,0)
 W !,"SSN                   Patient's last 4 SSN numbers."
"RTN","SCMCTSK9",13,0)
 W !,"Institution           Institution name, previously called Division, in which patient receives primary care."
"RTN","SCMCTSK9",14,0)
 W !,"PC Team               The patient's assigned Primary Care team in PCMM."
"RTN","SCMCTSK9",15,0)
 W !,"Provider/             Name of Associate Primary Care Provider (AP) assigned to patient, if there is one."
"RTN","SCMCTSK9",16,0)
 W !," Team Position        The name of the team position to which the Associate Primary Care Provider (AP) is assigned."
"RTN","SCMCTSK9",17,0)
 W !,"Current Preceptor/    Name of Primary Care Provider (PCP) assigned to patient.  Every Primary Care patient should"
"RTN","SCMCTSK9",18,0)
 W !," Team Position        be assigned to one PCP. The name of the team position to which the Primary Care Provider (PCP)"
"RTN","SCMCTSK9",19,0)
 W !,"                      is assigned."
"RTN","SCMCTSK9",20,0)
 W !,"Date Scheduled for    Date patient will be inactivated from PCMM and their Primary Care team and provider/position unless"
"RTN","SCMCTSK9",21,0)
 W !," Inactivation         they have a completed outpatient appointment encounter with their current PCP or AP before this date."
"RTN","SCMCTSK9",22,0)
 W !,"                      Note: There is a patient reassignment option, which allows an inactivated patient to be reactivated"
"RTN","SCMCTSK9",23,0)
 W !,"                      to their previous Primary Care team and position if they return for care."
"RTN","SCMCTSK9",24,0)
 W !,"Reason for Extended   The reason entered for extending the patient's time before inactivation from PC panels."
"RTN","SCMCTSK9",25,0)
 W !," Inactivation         Entry of this field is in the PCMM GUI, Patient drop down menu, and the Extend Patient's Date for"
"RTN","SCMCTSK9",26,0)
 W !,"                      Inactivation from PC Panels option."
"RTN","SCMCTSK9",27,0)
 Q
"RTN","SCMCTSK9",28,0)
EXTCHUI ;roll n scroll option to extend a patient
"RTN","SCMCTSK9",29,0)
 N DA,DIC,DIE,DR,SCTM,SCARRAY,SCHIGH,SCX,V1
"RTN","SCMCTSK9",30,0)
 S SCTM=0 F  D P1 Q:+SCTM<1
"RTN","SCMCTSK9",31,0)
 Q
"RTN","SCMCTSK9",32,0)
P1 D GCL S DIC="^SCTM(404.51,",DIC(0)="AEQMZ" D ^DIC S SCTM=+Y Q:+SCTM<1
"RTN","SCMCTSK9",33,0)
 W !,"Searching...",!
"RTN","SCMCTSK9",34,0)
 D EXTEND(.SCARRAY,SCTM)
"RTN","SCMCTSK9",35,0)
 I $G(^TMP("SCMCTSK9","OUT",$J,1))="<DATA>" W !,"No Patients to Extend..." D GCL Q
"RTN","SCMCTSK9",36,0)
 S SCHIGH=$O(^TMP("SCMCTSK9","OUT",$J,9999999),-1)
"RTN","SCMCTSK9",37,0)
 S SCX=999 F  Q:(SCX="^")!(SCX="")  D P2
"RTN","SCMCTSK9",38,0)
 Q
"RTN","SCMCTSK9",39,0)
P2 W !,"Select From:  ",!!
"RTN","SCMCTSK9",40,0)
 S V1=0 F  S V1=$O(^TMP("SCMCTSK9","OUT",$J,V1)) Q:'V1  D
"RTN","SCMCTSK9",41,0)
 . W $J(V1,2)_" ",$P(^TMP("SCMCTSK9","OUT",$J,V1),U,3),!
"RTN","SCMCTSK9",42,0)
 F  W !,"Select 1-",SCHIGH," " R SCX:DTIME Q:(SCX="^")!(SCX="")!((SCX'>SCHIGH)&(SCX>0))  D
"RTN","SCMCTSK9",43,0)
 . I $E(SCX,1)="?" W !,"Select 1-",SCHIGH," or '^' to exit" Q
"RTN","SCMCTSK9",44,0)
 . I (+SCX<1)!(+SCX>SCHIGH) W !,"Select a valid number" Q
"RTN","SCMCTSK9",45,0)
 I SCX'?1.9N Q
"RTN","SCMCTSK9",46,0)
 S DIE="^SCPT(404.43,"
"RTN","SCMCTSK9",47,0)
 S DA=$P(^TMP("SCMCTSK9","OUT",$J,SCX),U)
"RTN","SCMCTSK9",48,0)
 S DR=".13//DO NOT EXTEND;S Y=.16 I X=4 S Y=.14;.14;.16////"_DUZ
"RTN","SCMCTSK9",49,0)
 D ^DIE
"RTN","SCMCTSK9",50,0)
 Q
"RTN","SCMCTSK9",51,0)
EXTEND(DATA,SCTEAM) ;return list of patients to inactivate in next 60 days
"RTN","SCMCTSK9",52,0)
 ;IEN^POSITION^PATIENT^EXTENDED^REASON
"RTN","SCMCTSK9",53,0)
 K DATA,SCDATA,SDDATA
"RTN","SCMCTSK9",54,0)
 N CNT,I,J,K,A,POSA S CNT=1 S SCTEAM=$G(SCTEAM),^TMP("SCMCTSK9","OUT",$J,1)="<DATA>"
"RTN","SCMCTSK9",55,0)
 D DT^DICRW S X="T-9M" D ^%DT S STDT=Y
"RTN","SCMCTSK9",56,0)
 S X="T-21M" D ^%DT S TYDT=+Y  ;MAKE THIS 21
"RTN","SCMCTSK9",57,0)
 S POSA=""
"RTN","SCMCTSK9",58,0)
 F  S POSA=$O(^SCTM(404.57,"ATMPOS",+SCTEAM,POSA)) Q:POSA=""  D
"RTN","SCMCTSK9",59,0)
 .F POS=0:0 S POS=$O(^SCTM(404.57,"ATMPOS",+SCTEAM,POSA,POS)) Q:'POS  D POS
"RTN","SCMCTSK9",60,0)
EX1 S A="^TMP(""SCMCTSK9"",$J)",CNT=1 F  S A=$Q(@A) Q:A=""!($P(A,",",2)'=$J)  D
"RTN","SCMCTSK9",61,0)
 .S B=@A
"RTN","SCMCTSK9",62,0)
 .S ^TMP("SCMCTSK9","OUT",$J,CNT)=(+$P(B,U,3))_U_$TR($P($P(A,"(",4),","),$C(34))_U_$TR($P(B,U,2),$C(34))_U_$P($G(^SCPT(404.43,+$P(B,U,3),0)),U,13)_U_$P($G(^SCPT(404.43,+$P(B,U,3),0)),U,14)
"RTN","SCMCTSK9",63,0)
 .S CNT=CNT+1
"RTN","SCMCTSK9",64,0)
 Q
"RTN","SCMCTSK9",65,0)
POS I '$$DATES^SCAPMCU1(404.59,POS) Q   ;Not an active position
"RTN","SCMCTSK9",66,0)
 I '$P($G(^SCTM(404.57,POS,0)),U,4) Q  ;Not PC
"RTN","SCMCTSK9",67,0)
 ;get patients for this position
"RTN","SCMCTSK9",68,0)
 K ^TMP("SC TMP LIST",$J)
"RTN","SCMCTSK9",69,0)
 S X=$$PTTP^SCAPMC(POS,"",.SCLIST,.SCERR)
"RTN","SCMCTSK9",70,0)
 S J=0 F  S J=$O(@SCLIST@(J)) Q:'J  S SCDATA=^(J) D
"RTN","SCMCTSK9",71,0)
 .N J I $P(SCDATA,U,4)>STDT Q
"RTN","SCMCTSK9",72,0)
 .I '$P($G(^SCPT(404.43,+$P(SCDATA,U,3),0)),U,5) Q
"RTN","SCMCTSK9",73,0)
 .I '$P($G(^SCPT(404.43,+$P(SCDATA,U,3),0)),U,15) Q
"RTN","SCMCTSK9",74,0)
 .S DFN=+SCDATA
"RTN","SCMCTSK9",75,0)
 .D SEEN Q:SEEN
"RTN","SCMCTSK9",76,0)
 .S ^TMP("SCMCTSK9",$J,$P($G(^SCTM(404.57,POS,0)),U),$P(SCDATA,U,2),+SCDATA)=SCDATA,CNT=CNT+1
"RTN","SCMCTSK9",77,0)
 K @SCLIST
"RTN","SCMCTSK9",78,0)
 Q
"RTN","SCMCTSK9",79,0)
SEEN ;was patient seen
"RTN","SCMCTSK9",80,0)
 S SEEN=0
"RTN","SCMCTSK9",81,0)
 N SCPRO,I,PRECP,PRO
"RTN","SCMCTSK9",82,0)
 N X,SCPRDTS,SCPR
"RTN","SCMCTSK9",83,0)
 ;get list of providers for this position
"RTN","SCMCTSK9",84,0)
 S PROV=+$$GETPRTP^SCAPMCU2(POS,DT) S SCPRO(+PROV)=""
"RTN","SCMCTSK9",85,0)
 S SCPRDTS("BEGIN")=TYDT
"RTN","SCMCTSK9",86,0)
 S SCPRDTS("END")=DT
"RTN","SCMCTSK9",87,0)
 S X=$$PRTP^SCAPMC(POS,"SCPRDTS","SCPR")
"RTN","SCMCTSK9",88,0)
 F I=0:0 S I=$O(SCPR(I)) Q:'I  S SCPRO(+SCPR(I))=""
"RTN","SCMCTSK9",89,0)
 S PRECP=0 I $G(PREC),$G(PREC)'=POS S PRECP=+$$GETPRTP^SCAPMCU2(PREC,DT),SCPRO(+PRECP)=""
"RTN","SCMCTSK9",90,0)
 F I=TYDT:0 S I=$O(^SCE("ADFN",DFN,I)) Q:'I  D  Q:SEEN
"RTN","SCMCTSK9",91,0)
 .F J=0:0 S J=$O(^SCE("ADFN",DFN,I,J)) Q:'J  D  Q:SEEN
"RTN","SCMCTSK9",92,0)
 ..N VISIT S VISIT=+$P($G(^SCE(J,0)),U,5) I $G(^SCE(J,0))<$G(TYDT) Q
"RTN","SCMCTSK9",93,0)
 ..F PRO=0:0 S PRO=$O(SCPRO(PRO)) Q:'PRO  D  Q:SEEN
"RTN","SCMCTSK9",94,0)
 ...I $D(^SDD(409.44,"AO",J,$G(PRO))) S SEEN=1 Q  ;GET THE PROVIDERJ
"RTN","SCMCTSK9",95,0)
 ...N V F V=0:0 S V=$O(^AUPNVPRV("AD",VISIT,V)) Q:'V  I PRO=(+$G(^AUPNVPRV(V,0))) S SEEN=1 Q
"RTN","SCMCTSK9",96,0)
 Q
"RTN","SCMCTSK9",97,0)
GCL ;clean temp globals
"RTN","SCMCTSK9",98,0)
 K ^TMP("SCMCTSK9",$J)
"RTN","SCMCTSK9",99,0)
 K ^TMP("SCMCTSK9","OUT",$J)
"RTN","SCMCTSK9",100,0)
 Q
"RTN","SCMCWAIT")
0^11^B13044802^B12216597
"RTN","SCMCWAIT",1,0)
SCMCWAIT ;ALB/SCK - Broker Utilities for Placement on Wait List ; 30 Oct 2002  3:42 PM
"RTN","SCMCWAIT",2,0)
 ;;5.3;Scheduling;**264,297**;AUG 13, 1993
"RTN","SCMCWAIT",3,0)
 ;
"RTN","SCMCWAIT",4,0)
 Q
"RTN","SCMCWAIT",5,0)
 ;
"RTN","SCMCWAIT",6,0)
WAIT(SCOK,SC) ; Place patient on wait list
"RTN","SCMCWAIT",7,0)
 ;  'SC BLD PAT CLN LIST'
"RTN","SCMCWAIT",8,0)
 ;
"RTN","SCMCWAIT",9,0)
 ;M ^JDS=SC
"RTN","SCMCWAIT",10,0)
 N COMMENT
"RTN","SCMCWAIT",11,0)
 S TEAM=$G(SC("TEAM")),POS=$G(SC("POSITION")),DFN=$G(SC("DFN")),COMMENT=$G(SC("COMMENT")),SC=$G(SC("SC"))
"RTN","SCMCWAIT",12,0)
 S INST=+$P($G(^SCTM(404.51,+$G(TEAM),0)),U,7)
"RTN","SCMCWAIT",13,0)
 D INPUT^SDWLRP1(.RES,DFN_U_$S(POS:2,1:1)_U_TEAM_U_$S(POS:POS_U_DUZ,1:U_DUZ)_U_COMMENT_U_SC)
"RTN","SCMCWAIT",14,0)
 Q
"RTN","SCMCWAIT",15,0)
WAITS(DFN,TEAM,POS,SC) ;
"RTN","SCMCWAIT",16,0)
 N DR
"RTN","SCMCWAIT",17,0)
 N Y
"RTN","SCMCWAIT",18,0)
 D INPUT^SDWLRP1(.RES,DFN_U_$S(POS:2,1:1)_U_TEAM_U_$S(POS:POS_U_DUZ,1:U_DUZ)_"^^"_SC)
"RTN","SCMCWAIT",19,0)
 I $G(RES) S OK=0,DA=+$P(RES,U,2),DIE="^SDWL(409.3,",DR="25;S OK=1" D ^DIE  I '$G(OK) S DIK=DIE D ^DIK W !,"Wait list entry deleted" S RES=0
"RTN","SCMCWAIT",20,0)
 Q RES
"RTN","SCMCWAIT",21,0)
TEAMRM(DFN,TEAM) ;
"RTN","SCMCWAIT",22,0)
 N I
"RTN","SCMCWAIT",23,0)
 F I=0:0 S I=$O(^SDWL(409.3,"B",+$G(DFN),I)) Q:'I  S A=$G(^SDWL(409.3,I,0)) D
"RTN","SCMCWAIT",24,0)
 .I 12'[$P(A,U,5) Q
"RTN","SCMCWAIT",25,0)
 .;I $P(A,U,6)'=$G(TEAM) Q
"RTN","SCMCWAIT",26,0)
 .I $G(^SDWL(409.3,I,"DIS")) Q
"RTN","SCMCWAIT",27,0)
 .;INACTIVATE I
"RTN","SCMCWAIT",28,0)
 .N:0 FDA S FDA(409.3,I_",",21)="SA"
"RTN","SCMCWAIT",29,0)
 .S FDA(409.3,I_",",19)=DT,FDA(409.3,I_",",23)="C"
"RTN","SCMCWAIT",30,0)
 .S FDA(409.3,I_",",20)=DUZ
"RTN","SCMCWAIT",31,0)
 .D UPDATE^DIE("","FDA")
"RTN","SCMCWAIT",32,0)
 Q
"RTN","SCMCWAIT",33,0)
POSRM(TEAMP,POS) ;
"RTN","SCMCWAIT",34,0)
 S DFN=+$G(^SCPT(404.42,+$G(TEAMP),0))
"RTN","SCMCWAIT",35,0)
 I $G(POS) I '$P($G(^SCPT(404.43,+POS,0)),U,5) Q   ;not pc
"RTN","SCMCWAIT",36,0)
 I '$P($G(^SCPT(404.42,+$G(TEAMP),0)),U,8) Q   ;not pc
"RTN","SCMCWAIT",37,0)
 ;S ^JDS("TEAMP")=TEAMP,^JDS("POS")=POS,^JDS("DFN")=DFN
"RTN","SCMCWAIT",38,0)
 N I
"RTN","SCMCWAIT",39,0)
 F I=0:0 S I=$O(^SDWL(409.3,"B",+$G(DFN),I)) Q:'I  S A=$G(^SDWL(409.3,I,0)) D
"RTN","SCMCWAIT",40,0)
 .I 12'[$P(A,U,5) Q
"RTN","SCMCWAIT",41,0)
 .;I $P(A,U,7)'=$G(POS) Q
"RTN","SCMCWAIT",42,0)
 .I $G(^SDWL(409.3,I,"DIS")) Q
"RTN","SCMCWAIT",43,0)
 .N FDA S FDA(409.3,I_",",21)="SA",FDA(409.3,I_",",23)="C"
"RTN","SCMCWAIT",44,0)
 .S FDA(409.3,I_",",19)=DT
"RTN","SCMCWAIT",45,0)
 .S FDA(409.3,I_",",20)=DUZ
"RTN","SCMCWAIT",46,0)
 .D FILE^DIE("","FDA")
"RTN","SCMCWAIT",47,0)
 .;INACTIVATE
"RTN","SCMCWAIT",48,0)
 Q
"RTN","SCMCWAIT",49,0)
ONWAIT(DFN) ;is patient on wait list
"RTN","SCMCWAIT",50,0)
 D DEM^VADPT I $G(VADM(6)) Q 9  ;Patient is dead
"RTN","SCMCWAIT",51,0)
 N I
"RTN","SCMCWAIT",52,0)
 S X=0
"RTN","SCMCWAIT",53,0)
 F I=0:0 S I=$O(^SDWL(409.3,"B",+$G(DFN),I)) Q:'I  S A=$G(^SDWL(409.3,I,0)) D  Q:X
"RTN","SCMCWAIT",54,0)
 .I 12'[$P(A,U,5) Q
"RTN","SCMCWAIT",55,0)
 .I $G(^SDWL(409.3,I,"DIS")) Q
"RTN","SCMCWAIT",56,0)
 .S X="3;ON WAITLIST TEAM: "_$P($G(^SCTM(404.51,+$P(A,U,6),0)),U)
"RTN","SCMCWAIT",57,0)
 .I $P(A,U,7) S X=X_" POSITION: "_$P($G(^SCTM(404.57,+$P(A,U,7),0)),U)
"RTN","SCMCWAIT",58,0)
 I X Q X
"RTN","SCMCWAIT",59,0)
 ;Q X
"RTN","SCMCWAIT",60,0)
 ;CHECK IF ON TEAM
"RTN","SCMCWAIT",61,0)
 N SCD,SCDT S SCOK=$$TMPT^SCAPMC3(DFN,"SCDT","","SCD","SCER1") I $D(SCD(1)) S X=1
"RTN","SCMCWAIT",62,0)
 N SCPOS S SCOK=$$TPPT^SCAPMC(DFN,.SCDT,"","","","","","SCPOS","SCBKERR") I $D(SCPOS(1)) S X=2
"RTN","SCMCWAIT",63,0)
 Q X
"RTN","SCMCWAIT",64,0)
 ;CHECK IF ON POSITION
"RTN","SCMCWAIT",65,0)
SORT ;From sort template
"RTN","SCMCWAIT",66,0)
 S X=0
"RTN","SCMCWAIT",67,0)
 Q
"RTN","SCMCWAIT",68,0)
PC(RESULT,POS) ;rpc to see if provider can be pc
"RTN","SCMCWAIT",69,0)
 N POENT
"RTN","SCMCWAIT",70,0)
 D ROLE(.RES,POS) I RES=1 S RESULT(0)=0 Q
"RTN","SCMCWAIT",71,0)
 S POENT=+$O(^SCTM(404.52,"AIDT",+$G(POS),1,-(DT+.1))),POENT=$O(^(POENT,0))
"RTN","SCMCWAIT",72,0)
 ;S PROV=+$P($G(^SCTM(404.52,+$G(POENT),0)),U,3)
"RTN","SCMCWAIT",73,0)
 I 'POENT S RESULT(0)=1 Q
"RTN","SCMCWAIT",74,0)
 N D0 S D0=+$G(POENT) D SORT S RESULT(0)=X
"RTN","SCMCWAIT",75,0)
 Q
"RTN","SCMCWAIT",76,0)
ROLE(RESULT,POS) ;rpc to see if role of position is resident
"RTN","SCMCWAIT",77,0)
 N ZERO S ZERO=$G(^SCTM(404.57,+$G(POS),0))
"RTN","SCMCWAIT",78,0)
 I $P(ZERO,U,4) S RESULT=0 Q  ;Already pc let them change it.
"RTN","SCMCWAIT",79,0)
 S RESULT=0
"RTN","SCMCWAIT",80,0)
 I $P($G(^SD(403.46,+$P(ZERO,U,3),0)),U)="RESIDENT (PHYSICIAN)" S RESULT=1
"RTN","SCMCWAIT",81,0)
 Q
"RTN","SCMCWAIT",82,0)
SC(DFN) ;Is patient 0-50 sc%
"RTN","SCMCWAIT",83,0)
 N TEAM,INST S TEAM=$P(DFN,U,2),INST=+$P($G(^SCTM(404.51,+TEAM,0)),U,7)
"RTN","SCMCWAIT",84,0)
 S X=0,DFN=+DFN
"RTN","SCMCWAIT",85,0)
 N A D ELIG^VADPT S A=$G(VAEL(3)) I $P(A,U)'="Y" Q 0
"RTN","SCMCWAIT",86,0)
 I $P(A,U,2)<50 Q $P(A,U,2)
"RTN","SCMCWAIT",87,0)
 Q 0
"RTN","SCMCWAIT",88,0)
SCLI(RESULT,SC) ;sc sc list
"RTN","SCMCWAIT",89,0)
 K RESULT
"RTN","SCMCWAIT",90,0)
 S DFN=+$G(SC("DFN"))
"RTN","SCMCWAIT",91,0)
 D SDSC^SDWLRP3(.RES,DFN) I RES=-1 S RESULT(0)=-1 Q
"RTN","SCMCWAIT",92,0)
 S RESULT(0)="<RESULTS>" N CNT,I S CNT=1 F I=0:0 S I=$O(^TMP("SDWLRP3",$J,I)) Q:'I  S RESULT(CNT)=^(I),CNT=CNT+1
"RTN","SCRPO")
0^22^B56300672^B53537149
"RTN","SCRPO",1,0)
SCRPO ;BP-CIOFO/KEITH - Report prompting utilities ; 20 Aug 99  7:46 AM
"RTN","SCRPO",2,0)
 ;;5.3;Scheduling;**177,297**;AUG 13, 1993
"RTN","SCRPO",3,0)
 ;
"RTN","SCRPO",4,0)
DTR(SC,SCDTB,SCDTE) ;Date range prompts
"RTN","SCRPO",5,0)
 ;Input: SC=name of array to return values
"RTN","SCRPO",6,0)
 ;       @SC@("DTR","BDT")=begin date (internal^external)
"RTN","SCRPO",7,0)
 ;       @SC@("DTR","EDT")=end date (internal^external)
"RTN","SCRPO",8,0)
 ;Input: SCDTB=array to manipulate %DT begin date values (optional)
"RTN","SCRPO",9,0)
 ;Input: SCDTE=array to manipulate %DT end date values (optional)
"RTN","SCRPO",10,0)
 ;Output: '1' for success, '0' otherwise
"RTN","SCRPO",11,0)
 N %DT M %DT=SCDTB W !
"RTN","SCRPO",12,0)
 S:'$L($G(%DT)) %DT="AEPX"
"RTN","SCRPO",13,0)
 I %DT["A" S:'$L($G(%DT("A"))) %DT("A")="Select beginning date: "
"RTN","SCRPO",14,0)
 D ^%DT I Y<1 Q 0
"RTN","SCRPO",15,0)
 S @SC@("DTR","BEGIN")=Y X ^DD("DD") S @SC@("DTR","PBDT")=Y
"RTN","SCRPO",16,0)
EDT K %DT M %DT=SCDTE W !
"RTN","SCRPO",17,0)
 S:'$L($G(%DT)) %DT="AEPX"
"RTN","SCRPO",18,0)
 I %DT["A" S:'$L($G(%DT("A"))) %DT("A")="   Select ending date: "
"RTN","SCRPO",19,0)
 D ^%DT I Y<1 K SC Q 0
"RTN","SCRPO",20,0)
 I Y<@SC@("DTR","BEGIN") W !!,$C(7),"End date cannot be before begin date!",! G EDT
"RTN","SCRPO",21,0)
 S @SC@("DTR","END")=Y X ^DD("DD") S @SC@("DTR","PEDT")=Y
"RTN","SCRPO",22,0)
 S @SC@("DTR","INCL")=0
"RTN","SCRPO",23,0)
 D XR(.SC,"DTR","Date Range") Q 1
"RTN","SCRPO",24,0)
 ;
"RTN","SCRPO",25,0)
ATYPE(SC) ;Prompt for assignment types
"RTN","SCRPO",26,0)
 ;Input: SC=array to return values (pass by reference)
"RTN","SCRPO",27,0)
 ;       @SC@("ATYPE")=assignment types (internal^external)
"RTN","SCRPO",28,0)
 ;Output: '1' for success, '0' otherwise
"RTN","SCRPO",29,0)
 N DIR,DTOUT,DUOUT
"RTN","SCRPO",30,0)
 S DIR(0)="S^P:PRIMARY CARE ASSIGNMENTS;N:NON-PRIMARY CARE ASSIGNMENTS;B:BOTH PC AND NON-PC"
"RTN","SCRPO",31,0)
 S DIR("A")="Specify the type of assignments to include",DIR("B")="BOTH"
"RTN","SCRPO",32,0)
 W ! D ^DIR Q:$D(DTOUT)!$D(DUOUT) 0
"RTN","SCRPO",33,0)
 S @SC@("ATYPE")=Y_U_Y(0)
"RTN","SCRPO",34,0)
 D XR(.SC,"ATYPE","Type of Assignments") Q 1
"RTN","SCRPO",35,0)
 ;
"RTN","SCRPO",36,0)
DSUM(SC) ;Prompt for detail or summary
"RTN","SCRPO",37,0)
 ;Input SC=array to return values (pass by reference)
"RTN","SCRPO",38,0)
 ;      @SC@("FMT")=format (internal^external)
"RTN","SCRPO",39,0)
 ;Output: '1' for success, '0' otherwise
"RTN","SCRPO",40,0)
 N DIR,DTOUT,DUOUT
"RTN","SCRPO",41,0)
 K DIR S DIR(0)="S^D:DETAIL + SUMMARY;S:SUMMARY ONLY"
"RTN","SCRPO",42,0)
 S DIR("A")="Specify output format",DIR("B")="DETAIL + SUMMARY"
"RTN","SCRPO",43,0)
 W ! D ^DIR Q:$D(DTOUT)!$D(DUOUT) 0
"RTN","SCRPO",44,0)
 S @SC@("FMT")=Y_U_Y(0)
"RTN","SCRPO",45,0)
 D XR(.SC,"FMT","Report Format") Q 1
"RTN","SCRPO",46,0)
 ;
"RTN","SCRPO",47,0)
LIST(SC,WHAT,SUBH,LIMIT) ;Get list of entries from a file
"RTN","SCRPO",48,0)
 ;Input: SC=array to return values (pass by reference)
"RTN","SCRPO",49,0)
 ;       @SC@(WHAT)="ALL" for all entries, or,
"RTN","SCRPO",50,0)
 ;       @SC@(WHAT,ifn)=name of record
"RTN","SCRPO",51,0)
 ;       @SC@(WHAT,name,ifn)=""
"RTN","SCRPO",52,0)
 ;Input: WHAT=type of selection
"RTN","SCRPO",53,0)
 ;        "DIV" for division
"RTN","SCRPO",54,0)
 ;        "TEAM" for TEAM
"RTN","SCRPO",55,0)
 ;        "ROLE" for STANDARD POSITION
"RTN","SCRPO",56,0)
 ;        "POS" for TEAM POSITION
"RTN","SCRPO",57,0)
 ;        "PCP" for PC provider (NEW PERSON)
"RTN","SCRPO",58,0)
 ;        "ASPR" for assigned provider (NEW PERSON)
"RTN","SCRPO",59,0)
 ;        "APR" for associate provider (NEW PERSON)
"RTN","SCRPO",60,0)
 ;        "CLINIC" for enrolled clinic (HOSPITAL LOCATION)
"RTN","SCRPO",61,0)
 ;Input: SUBH='1' to display category subheader (optional)
"RTN","SCRPO",62,0)
 ;Input: LIMIT=maximum selections (optional, default 20)
"RTN","SCRPO",63,0)
 ;Output: '1' for success, '0' otherwise
"RTN","SCRPO",64,0)
 ;
"RTN","SCRPO",65,0)
 N SCW,SCI,SCOUT,DIC,X,Y,SCA,SCB,SCQUIT,SCS,DTOUT,DUOUT
"RTN","SCRPO",66,0)
 Q:'$L(WHAT) 0  S:'$G(LIMIT) LIMIT=20 S (SCOUT,SCQUIT)=0
"RTN","SCRPO",67,0)
 F SCI="DIV","TEAM","ROLE","POS","PCP","ASPR","APR","CLINIC" S SCW(SCI)=""
"RTN","SCRPO",68,0)
 Q:'$D(SCW(WHAT)) 0
"RTN","SCRPO",69,0)
 D @WHAT S DIC(0)="AEMQ"
"RTN","SCRPO",70,0)
 I $G(SUBH) D SUBT^SCRPW50("**** "_SCA_" Selection ****")
"RTN","SCRPO",71,0)
 S SCB=$J("Select "_SCA_":  ",29),DIC("A")=SCB_"ALL// "
"RTN","SCRPO",72,0)
 I $L($G(SCS)) S DIC("S")=SCS
"RTN","SCRPO",73,0)
 F SCI=1:1:LIMIT D  Q:SCOUT!SCQUIT
"RTN","SCRPO",74,0)
 .W ! D ^DIC I $D(DTOUT)!$D(DUOUT) S SCQUIT=1 Q
"RTN","SCRPO",75,0)
 .I SCI=1,X="" W "  (ALL)" S @SC@(WHAT)="ALL",SCOUT=1 Q
"RTN","SCRPO",76,0)
 .I X="" S SCOUT=1 Q
"RTN","SCRPO",77,0)
 .I Y>0 S @SC@(WHAT,+Y)=$P(Y,U,2),@SC@(WHAT,$P(Y,U,2),+Y)=""
"RTN","SCRPO",78,0)
 .S DIC("A")=SCB
"RTN","SCRPO",79,0)
 .Q
"RTN","SCRPO",80,0)
 D XR(.SC,WHAT,SCA) Q 'SCQUIT
"RTN","SCRPO",81,0)
 ;
"RTN","SCRPO",82,0)
DIV S DIC="^DIC(4,",SCA="Institution",SCS="I $D(^SCTM(404.51,""AINST"",+Y))" Q
"RTN","SCRPO",83,0)
TEAM S DIC="^SCTM(404.51,",SCA="Team" Q
"RTN","SCRPO",84,0)
ROLE S DIC="^SD(403.46,",SCA="Role" Q
"RTN","SCRPO",85,0)
POS S DIC="^SCTM(404.57,",SCA="Team Position" Q
"RTN","SCRPO",86,0)
PCP S DIC="^VA(200,",SCA="PC Provider" Q
"RTN","SCRPO",87,0)
ASPR S DIC="^VA(200,",SCA="Assigned Provider" Q
"RTN","SCRPO",88,0)
APR S DIC="^VA(200,",SCA="Associate Provider" Q
"RTN","SCRPO",89,0)
CLINIC S DIC="^SC(",SCA="Associated Clinic",DIC("S")="I $P(^(0),U,3)=""C""" Q
"RTN","SCRPO",90,0)
 ;
"RTN","SCRPO",91,0)
SORT(SC,SCEL,SCSP) ;Prompt for optional sort elements
"RTN","SCRPO",92,0)
 ;Input: SC=array to return sort order (pass by reference)
"RTN","SCRPO",93,0)
 ;Input: SCX=comma delimited string of element acronyms where
"RTN","SCRPO",94,0)
 ;           'IN' = INSTITUTION
"RTN","SCRPO",95,0)
 ;           'TM' = TEAM
"RTN","SCRPO",96,0)
 ;           'RO' = ROLE
"RTN","SCRPO",97,0)
 ;           'TP' = TEAM POSITION
"RTN","SCRPO",98,0)
 ;           'PR' = PROVIDER
"RTN","SCRPO",99,0)
 ;           'AC' = ASSOCIATED CLINIC
"RTN","SCRPO",100,0)
 ;           'EC' = ENROLLED CLINIC
"RTN","SCRPO",101,0)
 ;           'PT' = PATIENT
"RTN","SCRPO",102,0)
 ;           'PA' = PATIENT
"RTN","SCRPO",103,0)
 ;Input: SCSP=acronym of last sort to add if not selected (optional)
"RTN","SCRPO",104,0)
 ;Output: '0' for abnormal exit, '1' otherwise
"RTN","SCRPO",105,0)
 ;        @SC@("SORT",1,elementacronym)=element
"RTN","SCRPO",106,0)
 ;        @SC@("SORT",2,elementacronym)=element, etc.
"RTN","SCRPO",107,0)
 ;
"RTN","SCRPO",108,0)
 N DIR,SCI,SCX,SCY,SCQUIT,SCZ
"RTN","SCRPO",109,0)
 Q:'$L(SCEL)
"RTN","SCRPO",110,0)
 S SCQUIT=0
"RTN","SCRPO",111,0)
 F SCI=1:1:$L(SCEL,",") D
"RTN","SCRPO",112,0)
 .S SCX=$P(SCEL,",",SCI),SCX=$S(SCX="PA":"PT",SCX="DV":"IN",1:SCX),SCY(SCX)=SCI,SCZ=$P($T(@SCX),";;",2)
"RTN","SCRPO",113,0)
 .S SCZ(SCX)=$P(SCZ,U,2),SCX=$P(SCZ,U)
"RTN","SCRPO",114,0)
 .I $L(SCX) S SCX(SCI)=";"_SCX
"RTN","SCRPO",115,0)
 .Q
"RTN","SCRPO",116,0)
 Q:'$O(SCX(""))
"RTN","SCRPO",117,0)
 S SCI=0 D QSORT("Sort output by")
"RTN","SCRPO",118,0)
 I $L($G(SCSP)),$D(SCY(SCSP)) D
"RTN","SCRPO",119,0)
 .S SCI=SCI+1,SCZ=$P($T(@SCSP),";;",2),@SC@("SORT",SCI)=$P(SCZ,":")_U_$P(SCZ,":",2)
"RTN","SCRPO",120,0)
 .Q
"RTN","SCRPO",121,0)
 D XR(.SC,"SORT","Output will be sorted by") Q 'SCQUIT
"RTN","SCRPO",122,0)
 ;
"RTN","SCRPO",123,0)
QSORT(DIRA) ;Prompt for sort
"RTN","SCRPO",124,0)
 N DTOUT,DUOUT
"RTN","SCRPO",125,0)
 S DIR("A")=DIRA
"RTN","SCRPO",126,0)
 S DIR(0)=$$DIR0() Q:DIR(0)=""
"RTN","SCRPO",127,0)
 D ^DIR I $D(DTOUT)!$D(DUOUT) S SCQUIT=1 Q
"RTN","SCRPO",128,0)
 Q:X=""
"RTN","SCRPO",129,0)
 S SCI=SCI+1,@SC@("SORT",SCI)=$S(Y="IN":"DV",Y="PT":"PA",1:Y)_U_Y(0)_U_SCZ(Y)
"RTN","SCRPO",130,0)
 K SCX(SCY(Y)),SCY(Y) D QSORT("Within "_Y(0)_", sort by")
"RTN","SCRPO",131,0)
 Q
"RTN","SCRPO",132,0)
 ;
"RTN","SCRPO",133,0)
DIR0() ;Return value for DIR(0)
"RTN","SCRPO",134,0)
 N SCI
"RTN","SCRPO",135,0)
 S SCX="",SCI=0
"RTN","SCRPO",136,0)
 F  S SCI=$O(SCX(SCI)) Q:'SCI  S SCX=SCX_SCX(SCI)
"RTN","SCRPO",137,0)
 S SCX=$E(SCX,2,999) S:$L(SCX) SCX="SO^"_SCX
"RTN","SCRPO",138,0)
 Q SCX
"RTN","SCRPO",139,0)
 ;
"RTN","SCRPO",140,0)
DV ;;IN:INSTITUTION^SCDIV
"RTN","SCRPO",141,0)
IN ;;IN:INSTITUTION^SCDIV
"RTN","SCRPO",142,0)
TM ;;TM:TEAM^SCTEAM
"RTN","SCRPO",143,0)
RO ;;RO:ROLE^SCROLE
"RTN","SCRPO",144,0)
TP ;;TP:TEAM POSITION^SCPOS
"RTN","SCRPO",145,0)
PR ;;PR:PROVIDER^SCPROV
"RTN","SCRPO",146,0)
EC ;;EC:ENROLLED CLINIC^SCLINIC
"RTN","SCRPO",147,0)
AC ;;AC:ASSOCIATED CLINIC^SCLINIC
"RTN","SCRPO",148,0)
PA ;;PA:PATIENT^SCPAT
"RTN","SCRPO",149,0)
PT ;;PT:PATIENT^SCPAT
"RTN","SCRPO",150,0)
 ;
"RTN","SCRPO",151,0)
XR(SC,SUB,VAL) ;Create x-ref for printing parameters
"RTN","SCRPO",152,0)
 ;Input: SC=array to return parameters
"RTN","SCRPO",153,0)
 ;Input: SUB=name of subscript holding parameters being x-ref'd
"RTN","SCRPO",154,0)
 ;Input: VAL=value for item subtitle (optional)
"RTN","SCRPO",155,0)
 ;
"RTN","SCRPO",156,0)
 S @SC@("XR")=$G(@SC@("XR"))+1,@SC@("XR",@SC@("XR"),SUB)=$G(VAL) Q
"RTN","SCRPO",157,0)
 ;
"RTN","SCRPO",158,0)
PPAR(SC,OK,SCT) ;Print report parameters
"RTN","SCRPO",159,0)
 ;Input: SC=array of report parameters
"RTN","SCRPO",160,0)
 ;Input: OK='1' to prompt for parameter ok (optional)
"RTN","SCRPO",161,0)
 ;Input: SCT=report title
"RTN","SCRPO",162,0)
 ;Output: '1' if ok, '0' otherwise
"RTN","SCRPO",163,0)
 ;
"RTN","SCRPO",164,0)
 N SCL,SCI,SCX,SCOUT,SCLAB,SCF,SCVAL,COL,DTOUT,DUOUT
"RTN","SCRPO",165,0)
 S COL=$S($E(IOST)="C":12,1:38)
"RTN","SCRPO",166,0)
 S (SCI,SCOUT)=0,SCLAB="",SCL=1
"RTN","SCRPO",167,0)
 F  S SCI=$O(@SC@("XR",SCI)) Q:'SCI!SCOUT  D
"RTN","SCRPO",168,0)
 .S SCX=$O(@SC@("XR",SCI,"")),SCLAB=@SC@("XR",SCI,SCX)
"RTN","SCRPO",169,0)
 .I $E(IOST)="C",SCL>18 D WAIT Q:SCOUT  S SCL=0
"RTN","SCRPO",170,0)
 .I $E(IOST)="P",$Y>(IOSL-4) D HDR(.SCT) Q:SCOUT
"RTN","SCRPO",171,0)
 .S SCL=SCL+1 W ! Q:SCX="SPACE"
"RTN","SCRPO",172,0)
 .S SCL=SCL+1 W !?(COL),$J(SCLAB,24),": "
"RTN","SCRPO",173,0)
 .I SCX="DTR" W @SC@("DTR","PBDT")," to ",@SC@("DTR","PEDT") Q
"RTN","SCRPO",174,0)
 .I $G(@SC@(SCX))="ALL" W "ALL" Q
"RTN","SCRPO",175,0)
 .I $D(@SC@(SCX))=1 W $P(@SC@(SCX),U,2) Q
"RTN","SCRPO",176,0)
 .I SCX="SORT" S SCF=0,SCVAL=0 D  Q
"RTN","SCRPO",177,0)
 ..F  S SCVAL=$O(@SC@(SCX,SCVAL)) Q:'SCVAL!SCOUT  D
"RTN","SCRPO",178,0)
 ...I SCF,$E(IOST)="C",SCL>18 D WAIT Q:SCOUT  S SCL=0
"RTN","SCRPO",179,0)
 ...I SCF,$E(IOST)="P",$Y>(IOSL-4) D HDR(.SCT) Q:SCOUT
"RTN","SCRPO",180,0)
 ...I SCF W ! S SCL=SCL+1
"RTN","SCRPO",181,0)
 ...W ?(COL+26+$S(SCX="SORT":(SCF*2),1:0)),$P(@SC@(SCX,SCVAL),U,2)
"RTN","SCRPO",182,0)
 ...S SCF=SCF+1
"RTN","SCRPO",183,0)
 ...Q
"RTN","SCRPO",184,0)
 ..Q
"RTN","SCRPO",185,0)
 .S SCF=0,SCVAL=999999999999
"RTN","SCRPO",186,0)
 .F  S SCVAL=$O(@SC@(SCX,SCVAL)) Q:SCVAL=""!SCOUT  D
"RTN","SCRPO",187,0)
 ..I $E(IOST)="C",SCL>18 D WAIT Q:SCOUT  S SCL=0
"RTN","SCRPO",188,0)
 ..I $E(IOST)="P",$Y>(IOSL-4) D HDR(.SCT) Q:SCOUT
"RTN","SCRPO",189,0)
 ..I SCF W ! S SCL=SCL+1
"RTN","SCRPO",190,0)
 ..W ?(COL+26+$S(SCX="SORT":(SCF*2),1:0)),SCVAL
"RTN","SCRPO",191,0)
 ..S SCF=SCF+1
"RTN","SCRPO",192,0)
 ..Q
"RTN","SCRPO",193,0)
 .Q
"RTN","SCRPO",194,0)
 S SCX=1 I $G(OK) N DIR S DIR(0)="Y",DIR("B")="YES",DIR("A")="OK" D
"RTN","SCRPO",195,0)
 .W ! D ^DIR I $D(DTOUT)!$D(DUOUT) S SCX=0 Q
"RTN","SCRPO",196,0)
 .S SCX=Y
"RTN","SCRPO",197,0)
 .Q
"RTN","SCRPO",198,0)
 Q SCX
"RTN","SCRPO",199,0)
 ;
"RTN","SCRPO",200,0)
WAIT N DIR S DIR(0)="E" W ! D ^DIR S SCOUT=Y'=1 W @IOF Q
"RTN","SCRPO",201,0)
 ;
"RTN","SCRPO",202,0)
HDR(SCT,SCIOM) ;Print report header
"RTN","SCRPO",203,0)
 ;Input: SCT=array of header lines
"RTN","SCRPO",204,0)
 ;Input: SCIOM=right margin (optional)
"RTN","SCRPO",205,0)
 ;
"RTN","SCRPO",206,0)
 N SCI
"RTN","SCRPO",207,0)
 S:'$G(SCIOM) SCIOM=IOM
"RTN","SCRPO",208,0)
 I $E(IOST)="C",SCFF N DIR S DIR(0)="E" W ! D ^DIR S SCOUT=Y'=1 Q:SCOUT
"RTN","SCRPO",209,0)
 D STOP Q:SCOUT
"RTN","SCRPO",210,0)
 I SCFF!($E(IOST)="C") W $$XY^SCRPW50(IOF,1,0)
"RTN","SCRPO",211,0)
 I $X W $$XY^SCRPW50("",0,0)
"RTN","SCRPO",212,0)
 W SCLINE
"RTN","SCRPO",213,0)
 S SCI=0 F  S SCI=$O(SCT(SCI)) Q:'SCI  D
"RTN","SCRPO",214,0)
 .W !?(SCIOM-$L(SCT(SCI))\2),SCT(SCI)
"RTN","SCRPO",215,0)
 .Q
"RTN","SCRPO",216,0)
 W !,SCLINE,!,"Date printed: ",SCPNOW,?(SCIOM-6-$L(SCPAGE)),"Page: ",SCPAGE
"RTN","SCRPO",217,0)
 W !,SCLINE S SCFF=1,SCPAGE=SCPAGE+1
"RTN","SCRPO",218,0)
 Q
"RTN","SCRPO",219,0)
 ;
"RTN","SCRPO",220,0)
STOP ;Check for stop task request
"RTN","SCRPO",221,0)
 S:$D(ZTQUEUED) (SCOUT,ZTSTOP)=$S($$S^%ZTLOAD:1,1:0) Q
"RTN","SCRPO",222,0)
 ;
"RTN","SCRPO",223,0)
ELIG(DFN) ;Get Primary Eligibility
"RTN","SCRPO",224,0)
 ;Input: DFN=patient ifn
"RTN","SCRPO",225,0)
 N PRIM,PRIM1
"RTN","SCRPO",226,0)
 S PRIM=$P($G(^DPT(DFN,.36)),U) Q:PRIM<1 "[unknown]"
"RTN","SCRPO",227,0)
 S PRIM=$P($G(^DIC(8,PRIM,0)),U,9) Q:PRIM<1 "[unknown]"
"RTN","SCRPO",228,0)
 ;MAS Primary Eligibility Code
"RTN","SCRPO",229,0)
 S PRIM=$P($G(^DIC(8.1,PRIM,0)),U) Q:PRIM="" "[unknown]"
"RTN","SCRPO",230,0)
 S PRIM1=PRIM
"RTN","SCRPO",231,0)
 ;
"RTN","SCRPO",232,0)
 S PRIM=$TR(PRIM,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","SCRPO",233,0)
 I PRIM="NON-SERVICE CONNECTED" S PRIM="NSC"
"RTN","SCRPO",234,0)
 I PRIM["SERVICE CONNECTED" S PRIM=$P(PRIM,"SERVICE CONNECTED")_"SC"_$P(PRIM,"SERVICE CONNECTED",2,999)
"RTN","SCRPO",235,0)
 I PRIM["LESS THAN" S PRIM=$P(PRIM,"LESS THAN")_"<"_$P(PRIM,"LESS THAN",2,999)
"RTN","SCRPO",236,0)
 I PRIM[" TO " S PRIM=$P(PRIM," TO ")_"-"_$P(PRIM," TO ",2,999)
"RTN","SCRPO",237,0)
 I PRIM["%" S PRIM=$TR(PRIM,"%","")
"RTN","SCRPO",238,0)
 S PRIM=$E(PRIM,1,9)
"RTN","SCRPO",239,0)
 Q PRIM1_U_PRIM
"RTN","SCRPO6")
0^13^B54277580^B52931297
"RTN","SCRPO6",1,0)
SCRPO6 ;BP-CIOFO/KEITH - Historical Team Assignment Summary ; 9/14/99 10:07am
"RTN","SCRPO6",2,0)
 ;;5.3;Scheduling;**177,297**;AUG 13, 1993
"RTN","SCRPO6",3,0)
 ;
"RTN","SCRPO6",4,0)
EN ;Queue report
"RTN","SCRPO6",5,0)
 N LIST,RTN,DESC
"RTN","SCRPO6",6,0)
 S SUMON=0
"RTN","SCRPO6",7,0)
 W !,"Print Final Summary Only" S %=2 D YN^DICN I %=1 S SUMON=1
"RTN","SCRPO6",8,0)
 S LIST="DIV,TEAM"
"RTN","SCRPO6",9,0)
 S RTN="RUN^SCRPO6"
"RTN","SCRPO6",10,0)
 S DESC="Historical Team Assignment Summary"
"RTN","SCRPO6",11,0)
 D PROMPT(LIST,RTN,DESC) Q
"RTN","SCRPO6",12,0)
 ;
"RTN","SCRPO6",13,0)
PROMPT(LIST,SCRTN,SCDESC) ;Prompt for report parameters, queue report
"RTN","SCRPO6",14,0)
 ;Input: LIST=comma delimited string of list subscripts to prompt for
"RTN","SCRPO6",15,0)
 ;Input: SCRTN=report routine entry point
"RTN","SCRPO6",16,0)
 ;Input: SCDESC=tasked job description
"RTN","SCRPO6",17,0)
 ;
"RTN","SCRPO6",18,0)
 N SCDIV,SCBDT,SCEDT,SC,SCI,SCX,SCOUT,SCT
"RTN","SCRPO6",19,0)
 S SC="^TMP(""SC"",$J)" K @SC S SCOUT=0
"RTN","SCRPO6",20,0)
 D TITL^SCRPW50(SCDESC)
"RTN","SCRPO6",21,0)
 D SUBT^SCRPW50("**** Date Range Selection ****")
"RTN","SCRPO6",22,0)
 S (SCBDT("B"),SCEDT("B"))="TODAY"
"RTN","SCRPO6",23,0)
 G:'$$DTR^SCRPO(.SC,.SCBDT,.SCEDT) END
"RTN","SCRPO6",24,0)
 D SUBT^SCRPW50("**** Report Parameter Selection ****")
"RTN","SCRPO6",25,0)
 F SCI=1:1:$L(LIST,",") S SCX=$P(LIST,",",SCI) D  Q:SCOUT
"RTN","SCRPO6",26,0)
 .S SCOUT='$$LIST^SCRPO(.SC,SCX,1)
"RTN","SCRPO6",27,0)
 .Q
"RTN","SCRPO6",28,0)
 G:SCOUT END
"RTN","SCRPO6",29,0)
 S SCT(1)="**** Report Parameters Selected ****" D SUBT^SCRPW50(SCT(1))
"RTN","SCRPO6",30,0)
 G:'$$PPAR^SCRPO(.SC,1,.SCT) END
"RTN","SCRPO6",31,0)
 W !!,"This report requires 132 column output!"
"RTN","SCRPO6",32,0)
 W ! N ZTSAVE S ZTSAVE("^TMP(""SC"",$J,")="",ZTSAVE("SC")="",ZTSAVE("SUMON")=""
"RTN","SCRPO6",33,0)
 D EN^XUTMDEVQ(SCRTN,SCDESC,.ZTSAVE)
"RTN","SCRPO6",34,0)
END K ^TMP("SC",$J) D DISP0^SCRPW23,END^SCRPW50 Q
"RTN","SCRPO6",35,0)
 ;
"RTN","SCRPO6",36,0)
STOP ;Check for stop task request
"RTN","SCRPO6",37,0)
 S:$D(ZTQUEUED) (SCOUT,ZTSTOP)=$S($$S^%ZTLOAD:1,1:0) Q
"RTN","SCRPO6",38,0)
 ;
"RTN","SCRPO6",39,0)
RUN ;Print report
"RTN","SCRPO6",40,0)
 N SCI,SCOUT
"RTN","SCRPO6",41,0)
 K ^TMP("SCRPT",$J)
"RTN","SCRPO6",42,0)
 S SCOUT=0
"RTN","SCRPO6",43,0)
 D BUILD Q:SCOUT  D COUNT^SCRPO7 D STOP Q:SCOUT
"RTN","SCRPO6",44,0)
 D PRINT
"RTN","SCRPO6",45,0)
 K ^TMP("SCRPT",$J),^TMP("SCRATCH",$J) Q
"RTN","SCRPO6",46,0)
 ;
"RTN","SCRPO6",47,0)
BUILD ;gather report information
"RTN","SCRPO6",48,0)
 N SCTM
"RTN","SCRPO6",49,0)
 ;build from list of teams
"RTN","SCRPO6",50,0)
 I $O(^TMP("SC",$J,"TEAM",0)) S SCTM=0 D  Q
"RTN","SCRPO6",51,0)
 .F  S SCTM=$O(^TMP("SC",$J,"TEAM",SCTM)) Q:'SCTM!SCOUT  D
"RTN","SCRPO6",52,0)
 ..D CKTEAM^SCRPO7(SCTM),STOP
"RTN","SCRPO6",53,0)
 ..Q
"RTN","SCRPO6",54,0)
 .Q
"RTN","SCRPO6",55,0)
 ;build from all teams
"RTN","SCRPO6",56,0)
 S SCTM=0 F  S SCTM=$O(^SCTM(404.51,SCTM)) Q:'SCTM!SCOUT  D
"RTN","SCRPO6",57,0)
 .D CKTEAM^SCRPO7(SCTM),STOP
"RTN","SCRPO6",58,0)
 .Q
"RTN","SCRPO6",59,0)
 Q
"RTN","SCRPO6",60,0)
 ;
"RTN","SCRPO6",61,0)
PRINT ;Print report
"RTN","SCRPO6",62,0)
 N SCLF,SCFF,SCLINE,SCPAGE,SCPNOW,SCTITL
"RTN","SCRPO6",63,0)
 S (SCLF,SCFF)=0
"RTN","SCRPO6",64,0)
 D HINI D:$E(IOST)="C" DISP0^SCRPW23
"RTN","SCRPO6",65,0)
 S SCTITL(2)=$$HDRX("P") D HDR^SCRPO(.SCTITL,132) Q:SCOUT  S SCOUT=$$PPAR^SCRPO(.SC,,.SCTITL)=0
"RTN","SCRPO6",66,0)
 Q:SCOUT
"RTN","SCRPO6",67,0)
 I '$D(^TMP("SCRPT",$J,0)) D  Q
"RTN","SCRPO6",68,0)
 .K SCTITL(2) D HDR^SCRPO(.SCTITL,132) Q:SCOUT
"RTN","SCRPO6",69,0)
 .S SCX="No team or team position assignments found within selected report parameters!"
"RTN","SCRPO6",70,0)
 .W !!?(132-$L(SCX)\2),SCX
"RTN","SCRPO6",71,0)
 .Q
"RTN","SCRPO6",72,0)
 S SCPAGE=1
"RTN","SCRPO6",73,0)
 S SCTITL(2)=$$HDRX("S") D HDR^SCRPO(.SCTITL,132),SHDR("S") Q:SCOUT
"RTN","SCRPO6",74,0)
 S SCDIV="" F  S SCDIV=$O(^TMP("SCRPT",$J,1,SCDIV)) Q:SCDIV=""!SCOUT  D
"RTN","SCRPO6",75,0)
 .S SCX=^TMP("SCRPT",$J,1,SCDIV) D SLINE(SCDIV,SCX,12,.SCLF) S SCTEAM=""
"RTN","SCRPO6",76,0)
 .F  S SCTEAM=$O(^TMP("SCRPT",$J,1,SCDIV,"TEAM",SCTEAM)) Q:SCTEAM=""!SCOUT  D
"RTN","SCRPO6",77,0)
 ..S SCX=^TMP("SCRPT",$J,1,SCDIV,"TEAM",SCTEAM)
"RTN","SCRPO6",78,0)
 ..D SLINE("  "_SCTEAM,SCX,10,.SCLF)
"RTN","SCRPO6",79,0)
 ..Q
"RTN","SCRPO6",80,0)
 .Q
"RTN","SCRPO6",81,0)
 Q:SCOUT
"RTN","SCRPO6",82,0)
 S SCX=^TMP("SCRPT",$J,0,0) D SLINE("REPORT TOTAL:",SCX,12,.SCLF)
"RTN","SCRPO6",83,0)
 Q:SCOUT  D FOOT^SCRPO7
"RTN","SCRPO6",84,0)
 Q:$G(SUMON)
"RTN","SCRPO6",85,0)
 I $D(^TMP("SCRPT",$J,0,0,"TLIST")) D
"RTN","SCRPO6",86,0)
 .S SCTITL(2)=$$HDRX("T") D HDR^SCRPO(.SCTITL,132),SHDR("T") Q:SCOUT
"RTN","SCRPO6",87,0)
 .S SCDIV=""
"RTN","SCRPO6",88,0)
 .F  S SCDIV=$O(^TMP("SCRPT",$J,0,0,"TLIST",SCDIV)) Q:SCDIV=""!SCOUT  D
"RTN","SCRPO6",89,0)
 ..S SCTEAM=""
"RTN","SCRPO6",90,0)
 ..F  S SCTEAM=$O(^TMP("SCRPT",$J,0,0,"TLIST",SCDIV,SCTEAM)) Q:SCTEAM=""!SCOUT  D
"RTN","SCRPO6",91,0)
 ...S SCPNAM=""
"RTN","SCRPO6",92,0)
 ...F  S SCPNAM=$O(^TMP("SCRPT",$J,0,0,"TLIST",SCDIV,SCTEAM,SCPNAM)) Q:SCPNAM=""!SCOUT  D
"RTN","SCRPO6",93,0)
 ....S SCI=0
"RTN","SCRPO6",94,0)
 ....F  S SCI=$O(^TMP("SCRPT",$J,0,0,"TLIST",SCDIV,SCTEAM,SCPNAM,SCI)) Q:'SCI!SCOUT  D
"RTN","SCRPO6",95,0)
 .....S SCX=^TMP("SCRPT",$J,0,0,"TLIST",SCDIV,SCTEAM,SCPNAM,SCI)
"RTN","SCRPO6",96,0)
 .....D TLINE(SCDIV,SCTEAM,SCPNAM,SCX)
"RTN","SCRPO6",97,0)
 .....Q
"RTN","SCRPO6",98,0)
 ....Q
"RTN","SCRPO6",99,0)
 ...Q
"RTN","SCRPO6",100,0)
 ..Q
"RTN","SCRPO6",101,0)
 .Q
"RTN","SCRPO6",102,0)
 Q:SCOUT  I $D(^TMP("SCRPT",$J,0,0,"PLIST")) D
"RTN","SCRPO6",103,0)
 .S SCTITL(2)=$$HDRX("TP") D HDR^SCRPO(.SCTITL,132),SHDR("P") Q:SCOUT
"RTN","SCRPO6",104,0)
 .S SCDIV=""
"RTN","SCRPO6",105,0)
 .F  S SCDIV=$O(^TMP("SCRPT",$J,0,0,"PLIST",SCDIV)) Q:SCDIV=""!SCOUT  D
"RTN","SCRPO6",106,0)
 ..S SCTEAM=""
"RTN","SCRPO6",107,0)
 ..F  S SCTEAM=$O(^TMP("SCRPT",$J,0,0,"PLIST",SCDIV,SCTEAM)) Q:SCTEAM=""!SCOUT  D
"RTN","SCRPO6",108,0)
 ...S SCPNAM=""
"RTN","SCRPO6",109,0)
 ...F  S SCPNAM=$O(^TMP("SCRPT",$J,0,0,"PLIST",SCDIV,SCTEAM,SCPNAM)) Q:SCPNAM=""!SCOUT  D
"RTN","SCRPO6",110,0)
 ....S SCI=0
"RTN","SCRPO6",111,0)
 ....F  S SCI=$O(^TMP("SCRPT",$J,0,0,"PLIST",SCDIV,SCTEAM,SCPNAM,SCI)) Q:'SCI!SCOUT  D
"RTN","SCRPO6",112,0)
 .....S SCX=^TMP("SCRPT",$J,0,0,"PLIST",SCDIV,SCTEAM,SCPNAM,SCI)
"RTN","SCRPO6",113,0)
 .....D PLINE(SCDIV,SCTEAM,SCPNAM,SCX)
"RTN","SCRPO6",114,0)
 .....Q
"RTN","SCRPO6",115,0)
 ....Q
"RTN","SCRPO6",116,0)
 ...Q
"RTN","SCRPO6",117,0)
 ..Q
"RTN","SCRPO6",118,0)
 .Q
"RTN","SCRPO6",119,0)
 I 'SCOUT,$E(IOST)="C" N DIR S DIR(0)="E" W ! D ^DIR
"RTN","SCRPO6",120,0)
 Q
"RTN","SCRPO6",121,0)
 ;
"RTN","SCRPO6",122,0)
SLINE(SCN,SCX,SCPF,SCLF) ;Print summary line
"RTN","SCRPO6",123,0)
 ;Input: SCN=name of item to print
"RTN","SCRPO6",124,0)
 ;Input: SCX=string of item values
"RTN","SCRPO6",125,0)
 ;Input: SCPF=minimum lines without page feed
"RTN","SCRPO6",126,0)
 ;Input: SCLF=extra line feed flag
"RTN","SCRPO6",127,0)
 ;
"RTN","SCRPO6",128,0)
 N SCI,SCY
"RTN","SCRPO6",129,0)
 S SCY="2^3^7^5^4^9^8^10^6^11^12"
"RTN","SCRPO6",130,0)
 I $Y>(IOSL-SCPF) D FOOT^SCRPO7,HDR^SCRPO(.SCTITL,132),SHDR("S") S SCLF=0
"RTN","SCRPO6",131,0)
 Q:SCOUT  W:SCPF>10&SCLF !
"RTN","SCRPO6",132,0)
 ;bp/djb Omit PC? column from REPORT TOTAL line.
"RTN","SCRPO6",133,0)
 ;Old code start
"RTN","SCRPO6",134,0)
 ;W !,$E($P(SCN,U),1,28),?30,$S($P(SCX,U)="":"NO",1:$P(SCX,U))
"RTN","SCRPO6",135,0)
 ;Old code end
"RTN","SCRPO6",136,0)
 ;New code start
"RTN","SCRPO6",137,0)
 I SCN["REPORT TOTAL" W !,$E($P(SCN,U),1,28)
"RTN","SCRPO6",138,0)
 E  W !,$E($P(SCN,U),1,28),?30,$S($P(SCX,U)="":"NO",1:$P(SCX,U))
"RTN","SCRPO6",139,0)
 ;New code end
"RTN","SCRPO6",140,0)
 F SCI=1:1:11 W ?(27+(9*SCI)),$J(+$P(SCX,U,$P(SCY,U,SCI)),6,0)
"RTN","SCRPO6",141,0)
 S SCLF=1
"RTN","SCRPO6",142,0)
 Q
"RTN","SCRPO6",143,0)
 ;
"RTN","SCRPO6",144,0)
TLINE(SCDIV,SCTEAM,SCPNAM,SCX) ;Print broken team assignment line
"RTN","SCRPO6",145,0)
 ;Input: SCDIV=division
"RTN","SCRPO6",146,0)
 ;Input: SCTEAM=team
"RTN","SCRPO6",147,0)
 ;Input: SCPNAM=patient name
"RTN","SCRPO6",148,0)
 ;Input: SCX=string of patient assignment data
"RTN","SCRPO6",149,0)
 ;
"RTN","SCRPO6",150,0)
 N SCI,Y
"RTN","SCRPO6",151,0)
 F SCI=3,4 S Y=$P($P(SCX,U,SCI),".") X ^DD("DD") S $P(SCX,U,SCI)=Y
"RTN","SCRPO6",152,0)
 I $Y>(IOSL-4) D HDR^SCRPO(.SCTITL,132),SHDR("T") Q:SCOUT
"RTN","SCRPO6",153,0)
 W !,$P(SCDIV,U),?32,$P(SCTEAM,U),?64,SCPNAM
"RTN","SCRPO6",154,0)
 W ?96,$TR($P(SCX,U,2),"-",""),?108,$P(SCX,U,3),?121,$P(SCX,U,4)
"RTN","SCRPO6",155,0)
 Q
"RTN","SCRPO6",156,0)
 ;
"RTN","SCRPO6",157,0)
PLINE(SCDIV,SCTEAM,SCPNAM,SCX) ;Print broken team assignment line
"RTN","SCRPO6",158,0)
 ;Input: SCDIV=division
"RTN","SCRPO6",159,0)
 ;Input: SCTEAM=team
"RTN","SCRPO6",160,0)
 ;Input: SCPNAM=patient name
"RTN","SCRPO6",161,0)
 ;Input: SCX=string of patient assignment data
"RTN","SCRPO6",162,0)
 ;
"RTN","SCRPO6",163,0)
 N SCI,Y
"RTN","SCRPO6",164,0)
 F SCI=3,4 S Y=$P($P(SCX,U,SCI),".") X ^DD("DD") S $P(SCX,U,SCI)=Y
"RTN","SCRPO6",165,0)
 I $Y>(IOSL-4) D HDR^SCRPO(.SCTITL,132),SHDR("P") Q:SCOUT
"RTN","SCRPO6",166,0)
 W !,$P(SCDIV,U),?24,$P(SCTEAM,U),?48,SCPNAM,?72,$TR($P(SCX,U,2),"-","")
"RTN","SCRPO6",167,0)
 W ?84,$P(SCX,U,5),?108,$P(SCX,U,3),?121,$P(SCX,U,4)
"RTN","SCRPO6",168,0)
 Q
"RTN","SCRPO6",169,0)
 ;
"RTN","SCRPO6",170,0)
HDRX(SCX) ;extra header line
"RTN","SCRPO6",171,0)
 ;Input: SCX='P' for parameters, 'S' for summary, 'T' for broken team
"RTN","SCRPO6",172,0)
 ;            assignments, 'TP' for broken team position assignments
"RTN","SCRPO6",173,0)
 ;
"RTN","SCRPO6",174,0)
 Q:SCX="P" "Selected Report Parameters"
"RTN","SCRPO6",175,0)
 Q:SCX="S" "Summary of Team and Team Position Assignments Effective: "_^TMP("SC",$J,"DTR","PBDT")_" to "_^TMP("SC",$J,"DTR","PEDT")
"RTN","SCRPO6",176,0)
 Q:SCX="T" "Team Assignments Without Active Position Assignments Effective: "_^TMP("SC",$J,"DTR","PBDT")_" to "_^TMP("SC",$J,"DTR","PEDT")
"RTN","SCRPO6",177,0)
 Q:SCX="TP" "Position Assignments Without Active Team Assignments Effective: "_^TMP("SC",$J,"DTR","PBDT")_" to "_^TMP("SC",$J,"DTR","PEDT")
"RTN","SCRPO6",178,0)
 Q:"" 
"RTN","SCRPO6",179,0)
 ;
"RTN","SCRPO6",180,0)
HINI ;Initialize header variables
"RTN","SCRPO6",181,0)
 N Y
"RTN","SCRPO6",182,0)
 S SCTITL(1)="<*>  HISTORICAL TEAM ASSIGNMENT SUMMARY  <*>"
"RTN","SCRPO6",183,0)
 S SCLINE="",$P(SCLINE,"-",133)="",SCPAGE=1
"RTN","SCRPO6",184,0)
 S Y=$$NOW^XLFDT() X ^DD("DD") S SCPNOW=$P(Y,":",1,2)
"RTN","SCRPO6",185,0)
 Q
"RTN","SCRPO6",186,0)
 ;
"RTN","SCRPO6",187,0)
SHDR(X) ;Print subheader
"RTN","SCRPO6",188,0)
 Q:SCOUT
"RTN","SCRPO6",189,0)
 N SCI
"RTN","SCRPO6",190,0)
 I X="S" D  Q
"RTN","SCRPO6",191,0)
 .W !?56,"Team  --Team Position-  --Team Position-    Total",?116,"Pts w/o  Pts w/o"
"RTN","SCRPO6",192,0)
 .W !,"Division",?38,"Max.     Team  Assign.  ---Assignments--  ---Unique Pts.--   Unique     Open     Pos.     Team"
"RTN","SCRPO6",193,0)
 .W !?2,"Team",?30,"PC?     Pts.  Assign.  Uniques  PC",?72,"Non-PC  PC",?90,"Non-PC     Pts.    Slots  Assign.  Assign."
"RTN","SCRPO6",194,0)
 .W !,$E(SCLINE,1,28),"  ---" F SCI=0:1:10 W ?(35+(9*SCI)),"-------"
"RTN","SCRPO6",195,0)
 .Q
"RTN","SCRPO6",196,0)
 I X="T" D  Q
"RTN","SCRPO6",197,0)
 .W !,"Division",?32,"Team",?64,"Patient Name",?96,"SSN",?108,"Active Date",?121,"Inact. Date"
"RTN","SCRPO6",198,0)
 .W ! F SCI=1:1:3 W $E(SCLINE,1,30),"  "
"RTN","SCRPO6",199,0)
 .W "----------  -----------  -----------"
"RTN","SCRPO6",200,0)
 .Q
"RTN","SCRPO6",201,0)
 I X="P" D  Q
"RTN","SCRPO6",202,0)
 .W !,"Division",?24,"Team",?48,"Patient Name",?72,"SSN",?84,"Team Position",?108,"Active Date",?121,"Inact. Date"
"RTN","SCRPO6",203,0)
 .W ! F SCI=1:1:3 W $E(SCLINE,1,22),"  "
"RTN","SCRPO6",204,0)
 .W "----------  ",$E(SCLINE,1,22),"  -----------  -----------"
"RTN","SCRPO6",205,0)
 .Q
"RTN","SCRPO6",206,0)
 Q
"RTN","SCRPPAT")
0^15^B62259749^B49944496
"RTN","SCRPPAT",1,0)
SCRPPAT ;ALB/CMM - Practitioner's Patients ; 8/30/99 3:17pm
"RTN","SCRPPAT",2,0)
 ;;5.3;Scheduling;**41,52,177,297**;AUG 13, 1993
"RTN","SCRPPAT",3,0)
 ;
"RTN","SCRPPAT",4,0)
 ;Listing of Practitioner's Patients
"RTN","SCRPPAT",5,0)
 ;
"RTN","SCRPPAT",6,0)
PROMPTS ;
"RTN","SCRPPAT",7,0)
 ;Prompt for division, team, role, practitioner, summary only and print device
"RTN","SCRPPAT",8,0)
 ;
"RTN","SCRPPAT",9,0)
 N QTIME,PRNT,VAUTP,Y,VAUTD,VAUTT,VAUTR,VAUTS,SORT,NUMBER
"RTN","SCRPPAT",10,0)
 K SCUP
"RTN","SCRPPAT",11,0)
 S QTIME=""
"RTN","SCRPPAT",12,0)
 W ! D INST^SCRPU1 I Y=-1 G ERR
"RTN","SCRPPAT",13,0)
 W ! K Y D PRMTT^SCRPU1 I '$D(VAUTT) G ERR
"RTN","SCRPPAT",14,0)
 W ! K Y D ROLE^SCRPU1 I '$D(VAUTR) G ERR
"RTN","SCRPPAT",15,0)
 W ! D PRACT^SCRPU1 I '$D(VAUTP) G ERR
"RTN","SCRPPAT",16,0)
 W ! S VAUTS=$$SUMM^SCRPU2() I VAUTS<0 G ERR
"RTN","SCRPPAT",17,0)
 W ! S SORT=$$SORT^SCRPU2() I SORT<1 G ERR
"RTN","SCRPPAT",18,0)
 S PRNT=$$PDEVICE^SCRPU3()
"RTN","SCRPPAT",19,0)
 I PRNT=-1 G ERR
"RTN","SCRPPAT",20,0)
 I PRNT["Q;" S QTIME=$$GETTIME^SCRPU3()
"RTN","SCRPPAT",21,0)
 I QTIME=-1 G ERR
"RTN","SCRPPAT",22,0)
 I PRNT'?1"Q;".E S PRNT="Q;"_PRNT
"RTN","SCRPPAT",23,0)
 S NUMBER=$$ENTRY2(.VAUTD,.VAUTT,.VAUTR,.VAUTP,VAUTS,SORT,PRNT,QTIME)
"RTN","SCRPPAT",24,0)
 I NUMBER>0 W !!,"Print queued, task number: ",NUMBER
"RTN","SCRPPAT",25,0)
 Q
"RTN","SCRPPAT",26,0)
 D QUE(.VAUTD,.VAUTT,.VAUTR,.VAUTP,VAUTS,SORT) Q
"RTN","SCRPPAT",27,0)
 ;
"RTN","SCRPPAT",28,0)
QUE(INST,TEAM,ROLE,PRACT,SUMM,SORT) ;queue report
"RTN","SCRPPAT",29,0)
 ;Input Parameters: 
"RTN","SCRPPAT",30,0)
 ;INST - institutions selected (variable and array) 
"RTN","SCRPPAT",31,0)
 ;TEAM - teams selected (variable and array) 
"RTN","SCRPPAT",32,0)
 ;ROLE - roles selected (variable and array) 
"RTN","SCRPPAT",33,0)
 ;PRACT - practitioners selected (variable and array) 
"RTN","SCRPPAT",34,0)
 ;SUMM - summary info? y/n (1-yes/0-no) yes don't print patient data 
"RTN","SCRPPAT",35,0)
 ;SORT - sort criteria (1-d,t,p/2-d,p,t)
"RTN","SCRPPAT",36,0)
 N ZTSAVE,II
"RTN","SCRPPAT",37,0)
 F II="INST","INST(","TEAM","TEAM(","ROLE","ROLE(","PRACT(","PRACT","SUMM","SORT" S ZTSAVE(II)=""
"RTN","SCRPPAT",38,0)
 W ! D EN^XUTMDEVQ("QENTRY^SCRPPAT","Practitioner's Patients",.ZTSAVE)
"RTN","SCRPPAT",39,0)
 Q
"RTN","SCRPPAT",40,0)
 ;
"RTN","SCRPPAT",41,0)
ENTRY2(INST,TEAM,ROLE,PRACT,SUMM,SORT,IOP,ZTDTH) ;
"RTN","SCRPPAT",42,0)
 ;Second entry point for GUI to use
"RTN","SCRPPAT",43,0)
 ;Input Parameters:
"RTN","SCRPPAT",44,0)
 ;INST - institutions selected (variable and array)
"RTN","SCRPPAT",45,0)
 ;TEAM - teams selected (variable and array)
"RTN","SCRPPAT",46,0)
 ;ROLE - roles selected (variable and array)
"RTN","SCRPPAT",47,0)
 ;PRACT - practitioners selected (ien new person file) - (variable and array)
"RTN","SCRPPAT",48,0)
 ;SUMM - summary info? y/n (1-yes/0-no) yes don't print patient data
"RTN","SCRPPAT",49,0)
 ;SORT - sort criteria (1-d,t,p/2-d,p,t)
"RTN","SCRPPAT",50,0)
 ;IOP - print device
"RTN","SCRPPAT",51,0)
 ;ZTDTH - queue time (optional)
"RTN","SCRPPAT",52,0)
 ;
"RTN","SCRPPAT",53,0)
 ;validate parameters
"RTN","SCRPPAT",54,0)
 I '$D(INST)!'$D(TEAM)!'$D(ROLE)!'$D(PRACT)!'$D(SUMM)!'$D(SORT)!'$D(IOP)!(IOP="") Q
"RTN","SCRPPAT",55,0)
 ;
"RTN","SCRPPAT",56,0)
 N NUMBER
"RTN","SCRPPAT",57,0)
 S IOST=$P(IOP,"^",2),IOP=$P(IOP,"^")
"RTN","SCRPPAT",58,0)
 I IOP?1"Q;".E S IOP=$P(IOP,"Q;",2)
"RTN","SCRPPAT",59,0)
 I IOST?1"C-".E D QENTRY G RET
"RTN","SCRPPAT",60,0)
 I ZTDTH="" S ZTDTH=$H
"RTN","SCRPPAT",61,0)
 S ZTRTN="QENTRY^SCRPPAT"
"RTN","SCRPPAT",62,0)
 S ZTDESC="Practitioner's Patients",ZTIO=IOP
"RTN","SCRPPAT",63,0)
 N II
"RTN","SCRPPAT",64,0)
 F II="IOSL","INST","INST(","TEAM","TEAM(","ROLE","ROLE(","PRACT(","PRACT","SUMM","IOP","SORT" S ZTSAVE(II)=""
"RTN","SCRPPAT",65,0)
 D ^%ZTLOAD
"RTN","SCRPPAT",66,0)
RET S NUMBER=0
"RTN","SCRPPAT",67,0)
 I $D(ZTSK) S NUMBER=ZTSK
"RTN","SCRPPAT",68,0)
 D EXIT1
"RTN","SCRPPAT",69,0)
 Q NUMBER
"RTN","SCRPPAT",70,0)
 ;
"RTN","SCRPPAT",71,0)
QENTRY ;
"RTN","SCRPPAT",72,0)
 ;driver entry point
"RTN","SCRPPAT",73,0)
 S TITL="Practitioner's Patients"
"RTN","SCRPPAT",74,0)
 I SUMM S TITL=TITL_" Summary Report"
"RTN","SCRPPAT",75,0)
 S STORE="^TMP("_$J_",""SCRPPAT"")"
"RTN","SCRPPAT",76,0)
 K @STORE
"RTN","SCRPPAT",77,0)
 S @STORE=0
"RTN","SCRPPAT",78,0)
 D DRIVE^SCRPPAT2
"RTN","SCRPPAT",79,0)
 I $O(@STORE@(0))="" S NODATA=$$NODATA^SCRPU3(TITL)
"RTN","SCRPPAT",80,0)
 I '$D(NODATA) D PRINTIT(STORE,IOP,TITL,SORT)
"RTN","SCRPPAT",81,0)
 D EXIT2
"RTN","SCRPPAT",82,0)
 Q
"RTN","SCRPPAT",83,0)
 ;
"RTN","SCRPPAT",84,0)
ERR ;
"RTN","SCRPPAT",85,0)
EXIT1 ;
"RTN","SCRPPAT",86,0)
 K ZTDTH,ZTRTN,ZTDESC,ZTSK,ZTIO,ZTSAVE,VAUTD,VAUTT,VAUTP,VAUTR
"RTN","SCRPPAT",87,0)
 K SCUP,VAUTS,SORT
"RTN","SCRPPAT",88,0)
 Q
"RTN","SCRPPAT",89,0)
 ;
"RTN","SCRPPAT",90,0)
EXIT2 ;
"RTN","SCRPPAT",91,0)
 K @STORE
"RTN","SCRPPAT",92,0)
 K STORE,TITL,IOP,PRACT,INST,TEAM,ROLE,SORT,SUMM,NODATA,STOP
"RTN","SCRPPAT",93,0)
 Q
"RTN","SCRPPAT",94,0)
 ;
"RTN","SCRPPAT",95,0)
PRINTIT(STORE,IOP,TITL,SORT) ; Print All Data
"RTN","SCRPPAT",96,0)
 ;STORE - global location of data
"RTN","SCRPPAT",97,0)
 ;IOP - device to print to
"RTN","SCRPPAT",98,0)
 ;TITL - title of report
"RTN","SCRPPAT",99,0)
 ;SORT - sort order 1-div,team,pract/2-div,pract,team
"RTN","SCRPPAT",100,0)
 ;
"RTN","SCRPPAT",101,0)
 N PAGE
"RTN","SCRPPAT",102,0)
 S PAGE=1,STOP=0 W:$E(IOST)="C" @IOF
"RTN","SCRPPAT",103,0)
 N SEC1,SEC2,SEC2,SEC3,SEC4,ST1,ST2,ST3,ST4
"RTN","SCRPPAT",104,0)
 I SORT=1 S SEC1="""T""",SEC2="""P""",SEC3="""TN""",SEC4="""PN"""
"RTN","SCRPPAT",105,0)
 I SORT=2!(SORT=3) S SEC1="""P""",SEC2="""T""",SEC3="""PN""",SEC4="""TN"""
"RTN","SCRPPAT",106,0)
 ;I SORT=3 S SEC4=SEC3,SEC3="""TN"""
"RTN","SCRPPAT",107,0)
 N SEC,TRD,INS,INAME,SECN,TRDN,PT,FIRST
"RTN","SCRPPAT",108,0)
 S (INAME,INS)="",FIRST=1
"RTN","SCRPPAT",109,0)
 F  S INAME=$O(@STORE@("I",INAME)) Q:INAME=""!(STOP)  D
"RTN","SCRPPAT",110,0)
 .S INS=$O(@STORE@("I",INAME,""))
"RTN","SCRPPAT",111,0)
 .Q:INS=""!STOP
"RTN","SCRPPAT",112,0)
 .D S
"RTN","SCRPPAT",113,0)
 ;I SORT=3 D
"RTN","SCRPPAT",114,0)
 ;.N I F I=0:0 S I=$O(@STORE@("P",I)) Q:'I  D
"RTN","SCRPPAT",115,0)
 ;..S A="" F  S A=$O(@STORE@("P",I,A)) Q:A=""  S @STORE@("P1",A,$O(@STORE@("P",I,A,0)))="" 
"RTN","SCRPPAT",116,0)
 ;.F  S INAME=$O(@STORE@("P1",INAME)) Q:INAME=""!(STOP)  D
"RTN","SCRPPAT",117,0)
 ;..S INS=$O(@STORE@("P1",INAME,""))
"RTN","SCRPPAT",118,0)
 ;..Q:INS=""!STOP
"RTN","SCRPPAT",119,0)
 ;..D S W !,STORE,!,ST1 R XXX
"RTN","SCRPPAT",120,0)
 D S1
"RTN","SCRPPAT",121,0)
 Q
"RTN","SCRPPAT",122,0)
S ;
"RTN","SCRPPAT",123,0)
 S SECN="",ST1=$E(STORE,1,($L(STORE)-1))_","_SEC1_")"
"RTN","SCRPPAT",124,0)
 F  S SECN=$O(@ST1@(INS,SECN)) Q:SECN=""!(STOP)  D
"RTN","SCRPPAT",125,0)
 .S SEC=$O(@ST1@(INS,SECN,"")) ;ien of team or practitioner
"RTN","SCRPPAT",126,0)
 .Q:SEC=""
"RTN","SCRPPAT",127,0)
 .S ST3=$E(STORE,1,($L(STORE)-1))_","_SEC3_")"
"RTN","SCRPPAT",128,0)
 .S TRDN="",ST2=$E(STORE,1,($L(STORE)-1))_","_SEC2_")"
"RTN","SCRPPAT",129,0)
 .F  S TRDN=$O(@ST2@(INS,TRDN)) Q:TRDN=""!(STOP)  D
"RTN","SCRPPAT",130,0)
 ..S TRD=$O(@ST2@(INS,TRDN,"")) ;ien of team or practitioner
"RTN","SCRPPAT",131,0)
 ..Q:TRD=""
"RTN","SCRPPAT",132,0)
 ..;have first team and first practitioner ien
"RTN","SCRPPAT",133,0)
 ..S ST4=$E(STORE,1,($L(STORE)-1))_","_SEC4_")"
"RTN","SCRPPAT",134,0)
 ..D PRNT(ST4,ST3,SEC3,.PAGE,TITL,INS,SEC,TRD) Q:STOP
"RTN","SCRPPAT",135,0)
 Q
"RTN","SCRPPAT",136,0)
S1 I $E(IOST)="C",'STOP W ! N DIR S DIR(0)="E" D ^DIR S STOP=Y'=1
"RTN","SCRPPAT",137,0)
 I 'STOP,SUMM=0 S (FIRST,SUMM)=1,TITL=TITL_" Summary Report" W @IOF D PRINTIT(STORE,$G(IOP),TITL,SORT)
"RTN","SCRPPAT",138,0)
 Q
"RTN","SCRPPAT",139,0)
 ;
"RTN","SCRPPAT",140,0)
PRNT(ST4,ST3,SEC3,PAGE,TITL,INS,SEC,TRD) ;
"RTN","SCRPPAT",141,0)
 ;
"RTN","SCRPPAT",142,0)
 N POS
"RTN","SCRPPAT",143,0)
 I (SEC3="""PN""")&($D(@ST3@(INS,SEC,TRD))) D
"RTN","SCRPPAT",144,0)
 .;get each position for practitioner
"RTN","SCRPPAT",145,0)
 .N MORE S POS="",MORE=0
"RTN","SCRPPAT",146,0)
 .F  S POS=$O(@ST3@(INS,SEC,TRD,POS)) Q:POS=""!(STOP)  D
"RTN","SCRPPAT",147,0)
 ..I 'SUMM I SORT=3 D  Q
"RTN","SCRPPAT",148,0)
 ...;I MORE ;S FIRST=0
"RTN","SCRPPAT",149,0)
 ...K @STORE@("H1") D SHEAD^SCRPPAT3
"RTN","SCRPPAT",150,0)
 ...I 'MORE I (PAGE=1)!(IOST?1"C-".E) D TITLE^SCRPU3(.PAGE,TITL)
"RTN","SCRPPAT",151,0)
 ...I 'MORE W !,$G(@ST3@(INS,SEC,TRD,POS)),!
"RTN","SCRPPAT",152,0)
 ...D PAT^SCRPPAT3(INS,SEC,TRD,SEC3,ST3,ST4,POS) S MORE=1
"RTN","SCRPPAT",153,0)
 ...I $O(@ST3@(INS,SEC,TRD,POS))="" D
"RTN","SCRPPAT",154,0)
 ....I (IOST?1"C-".E) D HOLD(.PAGE,"") S PAGE=PAGE+1 Q:STOP
"RTN","SCRPPAT",155,0)
 ....I (IOST'?1"C-".E) D NEWP1^SCRPU3(.PAGE,TITL) Q:STOP
"RTN","SCRPPAT",156,0)
 ..I SUMM D  Q
"RTN","SCRPPAT",157,0)
 ...I FIRST D TITLE^SCRPU3(.PAGE,TITL),SHEAD^SCRPPAT3,SSH S FIRST=0
"RTN","SCRPPAT",158,0)
 ...I (IOST'?1"C-".E),$Y>(IOSL-4) D NEWP1^SCRPU3(.PAGE,TITL) Q:STOP  D SSH
"RTN","SCRPPAT",159,0)
 ...I (IOST?1"C-".E),$Y>(IOSL-6) D HOLD^SCRPU3(.PAGE,TITL) Q:STOP  D SSH
"RTN","SCRPPAT",160,0)
 ...W !,@STORE@("SUM0",INS,SEC,TRD,POS)
"RTN","SCRPPAT",161,0)
 ...W ?72,$J($G(@STORE@("TOTAL",INS,SEC,TRD,POS)),8)
"RTN","SCRPPAT",162,0)
 ...Q
"RTN","SCRPPAT",163,0)
 ..Q:SORT=3
"RTN","SCRPPAT",164,0)
 ..I FIRST D:'MORE TITLE^SCRPU3(.PAGE,TITL) D SHEAD^SCRPPAT3
"RTN","SCRPPAT",165,0)
 ..I (IOST'?1"C-".E),'SUMM,'FIRST D NEWP1^SCRPU3(.PAGE,TITL) W:'STOP !,$G(@STORE@(INS))
"RTN","SCRPPAT",166,0)
 ..I (IOST?1"C-".E),'SUMM,'FIRST D HOLD^SCRPU3(.PAGE,TITL) W:'STOP !,$G(@STORE@(INS))
"RTN","SCRPPAT",167,0)
 ..Q:STOP  S FIRST=1 I 'MORE S FIRST=0
"RTN","SCRPPAT",168,0)
 ..W !,$G(@ST3@(INS,SEC,TRD,POS)) ;write practitioner (sort 1)
"RTN","SCRPPAT",169,0)
 ..I $L($G(@ST3@(INS,SEC,TRD,POS,"PRCP"))) W !,@ST3@(INS,SEC,TRD,POS,"PRCP")
"RTN","SCRPPAT",170,0)
 ..I $G(SORT)'=3 W !,$G(@ST4@(INS,TRD)) ;write team (sort 2)
"RTN","SCRPPAT",171,0)
 ..W !,$G(@STORE@(INS))
"RTN","SCRPPAT",172,0)
 ..;$o through patients for practitioner on team
"RTN","SCRPPAT",173,0)
 ..D PAT^SCRPPAT3(INS,SEC,TRD,SEC3,ST3,ST4,POS) Q:STOP
"RTN","SCRPPAT",174,0)
 ..I (IOST'?1"C-".E),$Y>(IOSL-4) D NEWP1^SCRPU3(.PAGE,TITL) Q:STOP
"RTN","SCRPPAT",175,0)
 ..I (IOST?1"C-".E),$Y>(IOSL-6) D HOLD^SCRPU3(.PAGE,TITL) Q:STOP
"RTN","SCRPPAT",176,0)
 ..D TOTAL1^SCRPPAT3(INS,SEC,TRD,POS) ;print team/practitioner total
"RTN","SCRPPAT",177,0)
 ;
"RTN","SCRPPAT",178,0)
 I (SEC3="""TN""")&($D(@ST4@(INS,TRD,SEC))) D
"RTN","SCRPPAT",179,0)
 .S POS=""
"RTN","SCRPPAT",180,0)
 .F  S POS=$O(@ST4@(INS,TRD,SEC,POS)) Q:POS=""!(STOP)  D
"RTN","SCRPPAT",181,0)
 ..I SUMM D  Q
"RTN","SCRPPAT",182,0)
 ...I FIRST D TITLE^SCRPU3(.PAGE,TITL),SHEAD^SCRPPAT3,SSH S FIRST=0
"RTN","SCRPPAT",183,0)
 ...I (IOST'?1"C-".E),$Y>(IOSL-4) D NEWP1^SCRPU3(.PAGE,TITL) Q:STOP  D SSH
"RTN","SCRPPAT",184,0)
 ...I (IOST?1"C-".E),$Y>(IOSL-6) D HOLD^SCRPU3(.PAGE,TITL) Q:STOP  D SSH
"RTN","SCRPPAT",185,0)
 ...W !,@STORE@("SUM0",INS,TRD,SEC,POS)
"RTN","SCRPPAT",186,0)
 ...W ?72,$J(@STORE@("TOTAL",INS,TRD,SEC,POS),8)
"RTN","SCRPPAT",187,0)
 ...Q
"RTN","SCRPPAT",188,0)
 ..I FIRST D TITLE^SCRPU3(.PAGE,TITL),SHEAD^SCRPPAT3
"RTN","SCRPPAT",189,0)
 ..I (IOST'?1"C-".E),'SUMM,'FIRST D NEWP1^SCRPU3(.PAGE,TITL)
"RTN","SCRPPAT",190,0)
 ..I (IOST?1"C-".E),'SUMM,'FIRST D HOLD^SCRPU3(.PAGE,TITL)
"RTN","SCRPPAT",191,0)
 ..Q:STOP  S FIRST=0
"RTN","SCRPPAT",192,0)
 ..I $G(SORT)'=3 W !,$G(@ST3@(INS,SEC)) ;write team (sort 1)
"RTN","SCRPPAT",193,0)
 ..W !,$G(@STORE@(INS))
"RTN","SCRPPAT",194,0)
 ..I $G(SORT)'=3 W !,$G(@ST4@(INS,TRD,SEC,POS)) ;write practitioner (sort 2)
"RTN","SCRPPAT",195,0)
 ..I $L($G(@ST4@(INS,TRD,SEC,POS,"PRCP"))) W !,@ST4@(INS,TRD,SEC,POS,"PRCP")
"RTN","SCRPPAT",196,0)
 ..W !
"RTN","SCRPPAT",197,0)
 ..;$o through patients for practitioner on team
"RTN","SCRPPAT",198,0)
 ..D PAT^SCRPPAT3(INS,SEC,TRD,SEC3,ST3,ST4,POS) Q:STOP
"RTN","SCRPPAT",199,0)
 ..I (IOST'?1"C-".E),$Y>(IOSL-4) D NEWP1^SCRPU3(.PAGE,TITL) Q:STOP
"RTN","SCRPPAT",200,0)
 ..I (IOST?1"C-".E),$Y>(IOSL-6) D HOLD^SCRPU3(.PAGE,TITL) Q:STOP
"RTN","SCRPPAT",201,0)
 ..D TOTAL1^SCRPPAT3(INS,SEC,TRD,POS) ;print team/practitioner total
"RTN","SCRPPAT",202,0)
 Q
"RTN","SCRPPAT",203,0)
 ;
"RTN","SCRPPAT",204,0)
SSH ;Summary subheader
"RTN","SCRPPAT",205,0)
 W !?72,"Patients",!,"Practitioner",?24,"Position",?48,"Team"
"RTN","SCRPPAT",206,0)
 W ?72,"Assigned",! N SCI F SCI=1:1:80 W "="
"RTN","SCRPPAT",207,0)
 Q
"RTN","SCRPPAT",208,0)
HOLD(PAGE,TIT,MARG) ;
"RTN","SCRPPAT",209,0)
 ;device is home, reached end of page
"RTN","SCRPPAT",210,0)
 N X
"RTN","SCRPPAT",211,0)
 S MARG=$G(MARG) S:MARG'>80 MARG=80
"RTN","SCRPPAT",212,0)
 W !!,"Press Any Key to Continue or '^' to Quit" R X:DTIME
"RTN","SCRPPAT",213,0)
 I '$T!(X="^") S STOP=1 Q
"RTN","SCRPPAT",214,0)
 W @IOF
"RTN","SCRPPAT",215,0)
 Q
"RTN","SCRPPAT2")
0^14^B29043068^B28106328
"RTN","SCRPPAT2",1,0)
SCRPPAT2 ;ALB/CMM - Practitioner's Patients ; 12/12/00 3:46pm
"RTN","SCRPPAT2",2,0)
 ;;5.3;Scheduling;**41,48,174,181,177,231,433,297**;AUG 13, 1993
"RTN","SCRPPAT2",3,0)
 ;
"RTN","SCRPPAT2",4,0)
 ;Listing of Practitioner's Patients
"RTN","SCRPPAT2",5,0)
 ;
"RTN","SCRPPAT2",6,0)
DRIVE ;
"RTN","SCRPPAT2",7,0)
 ;driver module
"RTN","SCRPPAT2",8,0)
 N PRAC,INF,ARRY,ERROR,NXT,OKAY,PIEN,TPRC
"RTN","SCRPPAT2",9,0)
 S ARRY="^TMP(""SCARRAY"","_$J_")",ERROR="ERR"
"RTN","SCRPPAT2",10,0)
 S TPRC="^TMP(""SCRP"",$J,""PRACT"")" M @TPRC=PRACT
"RTN","SCRPPAT2",11,0)
 K @ARRY,@ERROR,PRACT
"RTN","SCRPPAT2",12,0)
 I @TPRC=1 D ALL^SCRPPAT3 ;all practitioners selected
"RTN","SCRPPAT2",13,0)
 S NXT=0
"RTN","SCRPPAT2",14,0)
 F  S NXT=$O(@TPRC@(NXT)) Q:NXT=""!(NXT'?.N)  D
"RTN","SCRPPAT2",15,0)
 .I @TPRC=0 S PIEN=NXT
"RTN","SCRPPAT2",16,0)
 .I @TPRC=1 S PIEN=$P(@TPRC@(NXT),"^")
"RTN","SCRPPAT2",17,0)
 .K @ARRY,@ERROR
"RTN","SCRPPAT2",18,0)
 .S OKAY=$$PTPR^SCAPMC14(PIEN,"","","",ARRY,ERROR) ;patients for practitioner
"RTN","SCRPPAT2",19,0)
 .I '+OKAY Q
"RTN","SCRPPAT2",20,0)
 .D LOOPPT(ARRY,PIEN) ;loop through patients for practitioner
"RTN","SCRPPAT2",21,0)
 K @ARRY,@ERROR,@TPRC
"RTN","SCRPPAT2",22,0)
 K:SUMM @STORE@("PT")
"RTN","SCRPPAT2",23,0)
 Q
"RTN","SCRPPAT2",24,0)
 ;
"RTN","SCRPPAT2",25,0)
LOOPPT(ARY,PRAC) ;loop through patients for practitioner
"RTN","SCRPPAT2",26,0)
 ;ARY - array of patients for selected practitioner
"RTN","SCRPPAT2",27,0)
 ;PRAC - practitioner ien
"RTN","SCRPPAT2",28,0)
 N NXT,PIEN,TPIEN,PNAME,TPIEN,NODE,PTP,TPI,TPN,CLIEN,CNAME,PTA,PTAN,TIEN
"RTN","SCRPPAT2",29,0)
 N PC,TNODE,TNAME,PINF,POSN,PRCP
"RTN","SCRPPAT2",30,0)
 S NXT=0
"RTN","SCRPPAT2",31,0)
 F  S NXT=$O(@ARY@(NXT)) Q:NXT=""!(NXT'?.N)  D
"RTN","SCRPPAT2",32,0)
 .S NODE=$G(@ARY@(NXT))
"RTN","SCRPPAT2",33,0)
 .Q:NODE=""
"RTN","SCRPPAT2",34,0)
 .S PIEN=+$P(NODE,"^") ;ien of patient file entry
"RTN","SCRPPAT2",35,0)
 .S TPIEN=+$P(NODE,"^",3) ;ien of patient team position assignment
"RTN","SCRPPAT2",36,0)
 .S PTP=$G(^SCPT(404.43,TPIEN,0))
"RTN","SCRPPAT2",37,0)
 .Q:PTP=""
"RTN","SCRPPAT2",38,0)
 .S PTA=+$P(PTP,"^") ;patient team assignment ien (404.42)
"RTN","SCRPPAT2",39,0)
 .S PTAN=$G(^SCPT(404.42,PTA,0))
"RTN","SCRPPAT2",40,0)
 .Q:PTAN=""
"RTN","SCRPPAT2",41,0)
 .S TIEN=+$P(PTAN,"^",3) ;team file ien (404.51)
"RTN","SCRPPAT2",42,0)
 .I $G(TEAM)'=1,'$D(TEAM(TIEN)) Q  ;not a selected team
"RTN","SCRPPAT2",43,0)
 .S TNODE=$G(^SCTM(404.51,TIEN,0))
"RTN","SCRPPAT2",44,0)
 .Q:TNODE=""  I $G(INST)'=1,'$D(INST(+$P(TNODE,U,7))) Q
"RTN","SCRPPAT2",45,0)
 .S TNAME=$P(TNODE,"^") ;team name
"RTN","SCRPPAT2",46,0)
 .S TPI=+$P(PTP,"^",2) ;Team Position file ien (404.57)
"RTN","SCRPPAT2",47,0)
 .S TPN=$G(^SCTM(404.57,TPI,0))
"RTN","SCRPPAT2",48,0)
 .Q:TPN=""
"RTN","SCRPPAT2",49,0)
 .I $G(ROLE)'=1,'$D(ROLE(+$P(TPN,U,3))) Q  ;not a selected role
"RTN","SCRPPAT2",50,0)
 .S POSN=$P(TPN,"^") ;position name
"RTN","SCRPPAT2",51,0)
 .S CLIEN=+$P(TPN,"^",9) ;associated clinic ien
"RTN","SCRPPAT2",52,0)
 .;commented next line off - clinic enrollment no longer needed SD*5.3*433
"RTN","SCRPPAT2",53,0)
 .;D CECHK(CLIEN,.CNAME,PIEN) ;is patient enrolled in associated clinic?
"RTN","SCRPPAT2",54,0)
 .S CNAME=$P($G(^SC(CLIEN,0)),"^")  ; SD*5.3*433 remove enroll check
"RTN","SCRPPAT2",55,0)
 .S PC=$S($P(PTP,"^",5)=0:0,1:1) ;primary care position 1or2-yes/0-no
"RTN","SCRPPAT2",56,0)
 .S PNAME=$P($G(^VA(200,+PRAC,0)),"^") ;practitioner name
"RTN","SCRPPAT2",57,0)
 .Q:PNAME=""
"RTN","SCRPPAT2",58,0)
 .S PRCP=$P($$OKPREC2^SCMCLK(TPI,DT),U,2)
"RTN","SCRPPAT2",59,0)
 .S PINF=PIEN_"^"_$$PDATA^SCRPEC(PIEN,CLIEN,1)
"RTN","SCRPPAT2",60,0)
 .;$$PDATA returns pt name,pid,mt,pelig,status,status date,last appt,nxt appt
"RTN","SCRPPAT2",61,0)
 .D FORMAT(CNAME,PINF,PC,TIEN,TNAME,PRAC,PNAME,POSN,TPI,PRCP) ;formats data for display
"RTN","SCRPPAT2",62,0)
 Q
"RTN","SCRPPAT2",63,0)
 ;
"RTN","SCRPPAT2",64,0)
CECHK(CLIEN,CNAME,PIEN) ;
"RTN","SCRPPAT2",65,0)
 ;CLIEN - clinic ien
"RTN","SCRPPAT2",66,0)
 ;CNAME - clinic name returned if patient is enrolled in clien clinic
"RTN","SCRPPAT2",67,0)
 ;PIEN - patien ien
"RTN","SCRPPAT2",68,0)
 ;
"RTN","SCRPPAT2",69,0)
 N EN,NODE
"RTN","SCRPPAT2",70,0)
 S CNAME=""
"RTN","SCRPPAT2",71,0)
 I $D(^DPT(PIEN,"DE","B",CLIEN)) D
"RTN","SCRPPAT2",72,0)
 .;enrolled at one time, check if discharged
"RTN","SCRPPAT2",73,0)
 .S EN=$O(^DPT(PIEN,"DE","B",CLIEN,""))
"RTN","SCRPPAT2",74,0)
 .S NODE=$G(^DPT(PIEN,"DE",EN,0))
"RTN","SCRPPAT2",75,0)
 .Q:NODE=""
"RTN","SCRPPAT2",76,0)
 .I $P(NODE,"^",3)="" S CNAME=$P($G(^SC(CLIEN,0)),"^") ;clinic name
"RTN","SCRPPAT2",77,0)
 .I $P(NODE,"^",3)'="",$P(NODE,"^",3)>DT S CNAME=$P($G(^SC(CLIEN,0)),"^") ;clinic name
"RTN","SCRPPAT2",78,0)
 Q
"RTN","SCRPPAT2",79,0)
 ;
"RTN","SCRPPAT2",80,0)
FORMAT(CNAME,PINF,PC,TIEN,TNAME,PRAC,PNAME,POSN,TPI,PRCP) ; format data for display
"RTN","SCRPPAT2",81,0)
 ;CNAME - clinic name
"RTN","SCRPPAT2",82,0)
 ;PINF - patient/clinic data
"RTN","SCRPPAT2",83,0)
 ;PC - primary care 1/0
"RTN","SCRPPAT2",84,0)
 ;TIEN - team file ien (#404.51)
"RTN","SCRPPAT2",85,0)
 ;TNAME - team name
"RTN","SCRPPAT2",86,0)
 ;PRAC - practitioner ien (#200)
"RTN","SCRPPAT2",87,0)
 ;PNAME - practitioner name
"RTN","SCRPPAT2",88,0)
 ;POSN - position name
"RTN","SCRPPAT2",89,0)
 ;TPI - team position ien (#404.57)
"RTN","SCRPPAT2",90,0)
 ;PRCP - preceptor name
"RTN","SCRPPAT2",91,0)
 ;
"RTN","SCRPPAT2",92,0)
 N IIEN,INAME,ERR
"RTN","SCRPPAT2",93,0)
 S ERR=$$SETUP^SCRPPAT3(.IIEN,.INAME,TIEN,TNAME,PRAC,PNAME,POSN,TPI,PRCP)
"RTN","SCRPPAT2",94,0)
 I ERR Q
"RTN","SCRPPAT2",95,0)
 ;
"RTN","SCRPPAT2",96,0)
 I SORT=1 D STOR(IIEN,TIEN,PRAC,PINF,PNAME,TNAME,TPI) ;sort division,team,practitioner
"RTN","SCRPPAT2",97,0)
 I SORT=2 D STOR(IIEN,PRAC,TIEN,PINF,PNAME,TNAME,TPI) ;sort division,practitioner,team
"RTN","SCRPPAT2",98,0)
 I SORT=3 D STOR(1,PRAC,1,PINF,PNAME,"T3",TPI)
"RTN","SCRPPAT2",99,0)
 Q
"RTN","SCRPPAT2",100,0)
 ;
"RTN","SCRPPAT2",101,0)
STOR(IIEN,SEC,TRD,PINF,PNAME,TNAME,TPI) ;
"RTN","SCRPPAT2",102,0)
 ;IIEN - ien institution
"RTN","SCRPPAT2",103,0)
 ;SEC - second sort subscript, IEN team or IEN practitioner
"RTN","SCRPPAT2",104,0)
 ;TRD - third sort subscript, IEN team or IEN practitioner
"RTN","SCRPPAT2",105,0)
 ;PINF - patient/clinic info
"RTN","SCRPPAT2",106,0)
 ;PNAME - practitioner name
"RTN","SCRPPAT2",107,0)
 ;TNAME - team name
"RTN","SCRPPAT2",108,0)
 ;TPI - team position ien
"RTN","SCRPPAT2",109,0)
 ;
"RTN","SCRPPAT2",110,0)
 N PIEN,PTNAME,PID
"RTN","SCRPPAT2",111,0)
 S PIEN=+$P(PINF,"^") ;patient ien 
"RTN","SCRPPAT2",112,0)
 S PTNAME=$E($P(PINF,"^",2),1,15) ;patient name
"RTN","SCRPPAT2",113,0)
 Q:$D(@STORE@("PT",IIEN,SEC,TRD,TPI,PTNAME,PIEN))
"RTN","SCRPPAT2",114,0)
 S @STORE@("PT",IIEN,SEC,TRD,TPI,PTNAME,PIEN)=""
"RTN","SCRPPAT2",115,0)
 ;
"RTN","SCRPPAT2",116,0)
 I 'SUMM,'$D(@STORE@("PTOT",IIEN,SEC,TRD,PIEN)) D
"RTN","SCRPPAT2",117,0)
 .;count each unique patient for any given practitioner for grand total
"RTN","SCRPPAT2",118,0)
 .S @STORE@("PTOT",IIEN,SEC,TRD,PIEN)=""
"RTN","SCRPPAT2",119,0)
 .S @STORE@("TOTAL",IIEN,PRAC,0)=$G(@STORE@("TOTAL",IIEN,PRAC,0))+1 ;patient count by practitioner
"RTN","SCRPPAT2",120,0)
 ;
"RTN","SCRPPAT2",121,0)
 S @STORE@("TOTAL",IIEN,PRAC,$S(SORT=3:1,1:TIEN),TPI)=$G(@STORE@("TOTAL",IIEN,PRAC,$S(SORT=3:1,1:TIEN),TPI))+1 ;patient count by practitioner and team
"RTN","SCRPPAT2",122,0)
 Q:SUMM
"RTN","SCRPPAT2",123,0)
 ;
"RTN","SCRPPAT2",124,0)
 S @STORE@(IIEN,SEC,TRD,TPI,PIEN)=PTNAME
"RTN","SCRPPAT2",125,0)
 S PID=$P(PINF,"^",3),PID=$TR(PID,"-","")
"RTN","SCRPPAT2",126,0)
 S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),18)=$E(PID,6,10) ;last 4 pid - 5 places is for any pseudo
"RTN","SCRPPAT2",127,0)
 S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),25)=$P(PINF,"^",4) ;means test status
"RTN","SCRPPAT2",128,0)
 S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),31)=$P(PINF,"^",5) ;eligibility
"RTN","SCRPPAT2",129,0)
 ;Removed by patch 174
"RTN","SCRPPAT2",130,0)
 ;S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),40)=$P(PINF,"^",6) ;patient status
"RTN","SCRPPAT2",131,0)
 S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),42)=$P(PINF,"^",8) ;last appt
"RTN","SCRPPAT2",132,0)
 S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),54)=$P(PINF,"^",9) ;nxt appt
"RTN","SCRPPAT2",133,0)
 S $E(@STORE@(IIEN,SEC,TRD,TPI,PIEN),66)=$E(CNAME,1,15) ;clinic
"RTN","SCRPPAT2",134,0)
 Q
"RTN","SCRPPAT3")
0^24^B30801721^B27851309
"RTN","SCRPPAT3",1,0)
SCRPPAT3 ;ALB/CMM - Practitioner's Patients ; 8/30/99 3:14pm
"RTN","SCRPPAT3",2,0)
 ;;5.3;Scheduling;**41,52,148,174,181,177,297**;AUG 13, 1993
"RTN","SCRPPAT3",3,0)
 ;
"RTN","SCRPPAT3",4,0)
 ;Listing of Practitioner's Patients
"RTN","SCRPPAT3",5,0)
 ;
"RTN","SCRPPAT3",6,0)
PAT(INS,SEC,TRD,SEC3,ST3,ST4,POS) ;
"RTN","SCRPPAT3",7,0)
 ;writes patients for position/practitioner
"RTN","SCRPPAT3",8,0)
 N PTN,PT,FIRST
"RTN","SCRPPAT3",9,0)
 S PTN="",FIRST=1
"RTN","SCRPPAT3",10,0)
 I SUMM D TOTAL1^SCRPPAT3(INS,SEC,TRD,POS) Q  ;Summary only
"RTN","SCRPPAT3",11,0)
 F  S PTN=$O(@STORE@("PT",INS,SEC,TRD,POS,PTN)) Q:PTN=""!(STOP)  D
"RTN","SCRPPAT3",12,0)
 .S PT=0
"RTN","SCRPPAT3",13,0)
 .F  S PT=$O(@STORE@("PT",INS,SEC,TRD,POS,PTN,PT)) Q:'PT!(STOP)  D
"RTN","SCRPPAT3",14,0)
 ..I (IOST'?1"C-".E),$Y>(IOSL-5) S MORE=0 D NEWP1^SCRPU3(.PAGE,TITL) D:'STOP HEAD2(INS,SEC,TRD,SEC3,ST3,ST4,POS) D:(('FIRST&'STOP)!($G(SORT)=3)) HEADER
"RTN","SCRPPAT3",15,0)
 ..I (IOST?1"C-".E),$Y>(IOSL-5) S MORE=0 D HOLD^SCRPU3(.PAGE,TITL) D:'STOP HEAD2(INS,SEC,TRD,SEC3,ST3,ST4,POS) D:'FIRST&'STOP HEADER
"RTN","SCRPPAT3",16,0)
 ..Q:STOP
"RTN","SCRPPAT3",17,0)
 ..I FIRST D HEADER S FIRST=0
"RTN","SCRPPAT3",18,0)
 ..W !,$G(@STORE@(INS,SEC,TRD,POS,PT)) ;print patient detail line
"RTN","SCRPPAT3",19,0)
 ..Q
"RTN","SCRPPAT3",20,0)
 .Q
"RTN","SCRPPAT3",21,0)
 Q
"RTN","SCRPPAT3",22,0)
 ;
"RTN","SCRPPAT3",23,0)
SPRINT(STORE,IOP,TITL,SORT) ; Summary Print Only
"RTN","SCRPPAT3",24,0)
 ;STORE - global location of data
"RTN","SCRPPAT3",25,0)
 ;IOP - device to print to
"RTN","SCRPPAT3",26,0)
 ;TITL - title of report
"RTN","SCRPPAT3",27,0)
 ;SORT - sort order 1-div,team,pract/2-div,pract,team
"RTN","SCRPPAT3",28,0)
 ;
"RTN","SCRPPAT3",29,0)
 N PAGE
"RTN","SCRPPAT3",30,0)
 S PAGE=1,STOP=0
"RTN","SCRPPAT3",31,0)
 D OPEN^SCRPU3
"RTN","SCRPPAT3",32,0)
 Q:$G(POP)
"RTN","SCRPPAT3",33,0)
 D TITLE^SCRPU3(.PAGE,TITL)
"RTN","SCRPPAT3",34,0)
 D CLOSE^SCRPU3
"RTN","SCRPPAT3",35,0)
 Q
"RTN","SCRPPAT3",36,0)
 ;
"RTN","SCRPPAT3",37,0)
TOTAL1(INS,SEC,TRD,POS) ;
"RTN","SCRPPAT3",38,0)
 ;print team/practitioner total
"RTN","SCRPPAT3",39,0)
 N TEM,PRC
"RTN","SCRPPAT3",40,0)
 I SORT=1 S TEM=SEC,PRC=TRD
"RTN","SCRPPAT3",41,0)
 I SORT=2!(SORT=3) S TEM=TRD,PRC=SEC
"RTN","SCRPPAT3",42,0)
 W !!,$G(@STORE@("TH",INS,PRC,TEM,POS)),$G(@STORE@("TOTAL",INS,PRC,TEM,POS))
"RTN","SCRPPAT3",43,0)
 Q
"RTN","SCRPPAT3",44,0)
 ;
"RTN","SCRPPAT3",45,0)
HEAD2(INS,SEC,TRD,SEC3,ST3,ST4,POS) ;
"RTN","SCRPPAT3",46,0)
 I (SEC3="""TN""")&($D(@ST4@(INS,TRD,SEC))) D
"RTN","SCRPPAT3",47,0)
 .W !,$G(@ST3@(INS,SEC)) ;write team (sort 1)
"RTN","SCRPPAT3",48,0)
 .W !,$G(@STORE@(INS))
"RTN","SCRPPAT3",49,0)
 .W !,$G(@ST4@(INS,TRD,SEC,POS)) ;write practitioner (sort 2)
"RTN","SCRPPAT3",50,0)
 .I $L($G(@STORE@("PN",INS,TRD,SEC,POS,"PRCP"))) W !,@STORE@("PN",INS,TRD,SEC,POS,"PRCP")
"RTN","SCRPPAT3",51,0)
 .W !
"RTN","SCRPPAT3",52,0)
 I (SEC3="""PN""")&($D(@ST3@(INS,SEC,TRD))) D
"RTN","SCRPPAT3",53,0)
 .W !,$G(@ST3@(INS,SEC,TRD,POS)) ;write practitioner (sort 1)
"RTN","SCRPPAT3",54,0)
 .I $G(SORT)'=3 I $L($G(@STORE@("PN",INS,SEC,TRD,POS,"PRCP"))) W !,@STORE@("PN",INS,SEC,TRD,POS,"PRCP")
"RTN","SCRPPAT3",55,0)
 .I $G(SORT)'=3 W !,$G(@ST4@(INS,TRD)) ;write team (sort 2)
"RTN","SCRPPAT3",56,0)
 .W !,$G(@STORE@(INS))
"RTN","SCRPPAT3",57,0)
 Q
"RTN","SCRPPAT3",58,0)
 ;
"RTN","SCRPPAT3",59,0)
HEADER ;
"RTN","SCRPPAT3",60,0)
 Q:$G(MORE)
"RTN","SCRPPAT3",61,0)
 I SORT=3 S MORE=1
"RTN","SCRPPAT3",62,0)
 N NXT
"RTN","SCRPPAT3",63,0)
 F NXT="H1","H2","H3" W !,$G(@STORE@(NXT))
"RTN","SCRPPAT3",64,0)
 W !
"RTN","SCRPPAT3",65,0)
 Q
"RTN","SCRPPAT3",66,0)
 ;
"RTN","SCRPPAT3",67,0)
SHEAD ;
"RTN","SCRPPAT3",68,0)
 S @STORE@("H2")="Pt Name"
"RTN","SCRPPAT3",69,0)
 S $E(@STORE@("H2"),18)="Pt ID"
"RTN","SCRPPAT3",70,0)
 S $E(@STORE@("H1"),25)="M.T."
"RTN","SCRPPAT3",71,0)
 S $E(@STORE@("H2"),25)="Stat"
"RTN","SCRPPAT3",72,0)
 S $E(@STORE@("H1"),31)="Prim"
"RTN","SCRPPAT3",73,0)
 S $E(@STORE@("H2"),31)="Elig"
"RTN","SCRPPAT3",74,0)
 ;Removed by patch 174
"RTN","SCRPPAT3",75,0)
 ;S $E(@STORE@("H1"),39)="Pat"
"RTN","SCRPPAT3",76,0)
 ;S $E(@STORE@("H2"),39)="Stat"
"RTN","SCRPPAT3",77,0)
 S $E(@STORE@("H1"),42)="Last"
"RTN","SCRPPAT3",78,0)
 S $E(@STORE@("H2"),42)="Appt"
"RTN","SCRPPAT3",79,0)
 S $E(@STORE@("H1"),54)="Next"
"RTN","SCRPPAT3",80,0)
 S $E(@STORE@("H2"),54)="Appt"
"RTN","SCRPPAT3",81,0)
 S $E(@STORE@("H2"),66)="Clinic"
"RTN","SCRPPAT3",82,0)
 S $P(@STORE@("H3"),"=",81)=""
"RTN","SCRPPAT3",83,0)
 Q
"RTN","SCRPPAT3",84,0)
ALL ;
"RTN","SCRPPAT3",85,0)
 ;get all practitioners for all teams selected
"RTN","SCRPPAT3",86,0)
 I TEAM=1 D TALL ;all teams selected
"RTN","SCRPPAT3",87,0)
 N TIEN,OKAY,XLIST,YLIST,SCTP,SCI,SCDT
"RTN","SCRPPAT3",88,0)
 S TIEN=""
"RTN","SCRPPAT3",89,0)
 F  S TIEN=$O(TEAM(TIEN)) Q:TIEN=""!(TIEN'?.N)  D
"RTN","SCRPPAT3",90,0)
 .I $D(TEAM(TIEN)) D
"RTN","SCRPPAT3",91,0)
 ..K XLIST
"RTN","SCRPPAT3",92,0)
 ..S OKAY=$$TPTM^SCAPMC(TIEN,"","","","XLIST","ERROR")
"RTN","SCRPPAT3",93,0)
 ..S SCTP=0 F  S SCTP=$O(XLIST("SCTP",TIEN,SCTP)) Q:'SCTP  D
"RTN","SCRPPAT3",94,0)
 ...K YLIST S SCDT="SCDT",(SCDT("BEGIN"),SCDT("END"))=DT,SCDT("INCL")=0
"RTN","SCRPPAT3",95,0)
 ...S OKAY=$$PRTP^SCAPMC(SCTP,.SCDT,"YLIST","ERROR",1,0)
"RTN","SCRPPAT3",96,0)
 ...S SCI=0 F  S SCI=$O(YLIST(SCI)) Q:'SCI  D
"RTN","SCRPPAT3",97,0)
 ....S @TPRC@(0)=$G(@TPRC@(0))+1
"RTN","SCRPPAT3",98,0)
 ....S @TPRC@(@TPRC@(0))=YLIST(SCI)
"RTN","SCRPPAT3",99,0)
 Q
"RTN","SCRPPAT3",100,0)
 ;
"RTN","SCRPPAT3",101,0)
TALL ;
"RTN","SCRPPAT3",102,0)
 ;get all active team for divisions selected
"RTN","SCRPPAT3",103,0)
 N NXT,IIEN,NODE
"RTN","SCRPPAT3",104,0)
 S NXT=0,IIEN=""
"RTN","SCRPPAT3",105,0)
 ;$O through team file and find all active teams for selected divisions
"RTN","SCRPPAT3",106,0)
 F  S IIEN=$O(^SCTM(404.51,"AINST",IIEN)) Q:IIEN=""  D
"RTN","SCRPPAT3",107,0)
 .I INST=1!$D(INST(IIEN)) D
"RTN","SCRPPAT3",108,0)
 ..S TIEN=0
"RTN","SCRPPAT3",109,0)
 ..F  S TIEN=$O(^SCTM(404.51,"AINST",IIEN,TIEN)) Q:TIEN=""  D
"RTN","SCRPPAT3",110,0)
 ...I $$ACTTM^SCMCTMU(TIEN) S TEAM(TIEN)=""
"RTN","SCRPPAT3",111,0)
 Q
"RTN","SCRPPAT3",112,0)
 ;
"RTN","SCRPPAT3",113,0)
SETUP(IIEN,INAME,TIEN,TNAME,PRAC,PNAME,POSN,TPI,PRCP) ;
"RTN","SCRPPAT3",114,0)
 ;setup data
"RTN","SCRPPAT3",115,0)
 S IIEN=+$P($G(^SCTM(404.51,TIEN,0)),"^",7) ;institution ien
"RTN","SCRPPAT3",116,0)
 S INAME=$P($G(^DIC(4,IIEN,0)),"^") ;institution name
"RTN","SCRPPAT3",117,0)
 I INAME="" S INAME="[BAD DATA]"
"RTN","SCRPPAT3",118,0)
 ;
"RTN","SCRPPAT3",119,0)
 I PNAME="" S PNAME="[BAD DATA]"
"RTN","SCRPPAT3",120,0)
 I TNAME="" S TNAME="[BAD DATA]"
"RTN","SCRPPAT3",121,0)
 I $G(SORT)=3 S IIEN=1,TIEN=1
"RTN","SCRPPAT3",122,0)
 I '$D(@STORE@("PN",IIEN,PRAC,TIEN,TPI)) S @STORE@("PN",IIEN,PRAC,TIEN,TPI)="Practitioner: "_PNAME_$S(SORT=3:"",1:" ("_POSN_")")
"RTN","SCRPPAT3",123,0)
 I $L(PRCP) S @STORE@("PN",IIEN,PRAC,TIEN,TPI,"PRCP")="   Preceptor: "_PRCP
"RTN","SCRPPAT3",124,0)
 I '$D(@STORE@("TN",IIEN,$S($G(SORT)=3:1,1:TIEN))) S @STORE@("TN",IIEN,$S($G(SORT)=3:1,1:TIEN))="        Team: "_TNAME
"RTN","SCRPPAT3",125,0)
 ;
"RTN","SCRPPAT3",126,0)
 I '$D(@STORE@("I",$S($G(SORT)=3:"S3",1:INAME),IIEN)) S @STORE@("I",$S($G(SORT)=3:"S3",1:INAME),IIEN)="",@STORE@(IIEN)=$S(SORT=3:"",1:"    Division: "_INAME)
"RTN","SCRPPAT3",127,0)
 S @STORE@("T",IIEN,$S($G(SORT)=3:"T3",1:TNAME),$S($G(SORT)=3:1,1:TIEN))=""
"RTN","SCRPPAT3",128,0)
 I '$D(@STORE@("P",IIEN,PNAME,PRAC,TPI)) S @STORE@("P",IIEN,PNAME,PRAC,TPI)=""
"RTN","SCRPPAT3",129,0)
 I '$D(@STORE@("TOTAL",IIEN,PRAC,0)) S @STORE@("TOTAL",IIEN,PRAC,0)=0
"RTN","SCRPPAT3",130,0)
 I '$D(@STORE@("TOTAL",IIEN,PRAC,TIEN)) S @STORE@("TOTAL",IIEN,PRAC,TIEN)=0
"RTN","SCRPPAT3",131,0)
 ;
"RTN","SCRPPAT3",132,0)
 S @STORE@("TH",IIEN,PRAC)="Patient Count for "_PNAME_": "
"RTN","SCRPPAT3",133,0)
 S @STORE@("TH",IIEN,PRAC,TIEN,TPI)="Patient Count for "_PNAME_": "
"RTN","SCRPPAT3",134,0)
 N SCX
"RTN","SCRPPAT3",135,0)
 S SCX=$E(PNAME,1,22),$E(SCX,25)=$E(POSN,1,22),$E(SCX,49)=$E(TNAME,1,22)
"RTN","SCRPPAT3",136,0)
 S @STORE@("SUM0",IIEN,PRAC,TIEN,TPI)=SCX
"RTN","SCRPPAT3",137,0)
 ;
"RTN","SCRPPAT3",138,0)
 S @STORE@("TH",IIEN)="** Note: Patient Panel Count is a count of unique patients for each practitioner"
"RTN","SCRPPAT3",139,0)
 Q 0
"RTN","SCRPU2")
0^28^B22624198^B21971558
"RTN","SCRPU2",1,0)
SCRPU2 ;ALB/CMM - GENERIC PROMPTS FOR PCMM REPORTS ; 12 Jan 99  1:23 PM
"RTN","SCRPU2",2,0)
 ;;5.3;Scheduling;**41,174,297**;AUG 13, 1993
"RTN","SCRPU2",3,0)
 ;
"RTN","SCRPU2",4,0)
DTRANG(FIRST,SECOND) ;Date Range - begin date ^ end date => fileman format
"RTN","SCRPU2",5,0)
 ;FIRST - first prompt (not required)
"RTN","SCRPU2",6,0)
 ;SECOND - second prompt (not required)
"RTN","SCRPU2",7,0)
 N BDATE,EDATE,DIROUT,DUOUT,DTOUT
"RTN","SCRPU2",8,0)
 S EDATE=-1
"RTN","SCRPU2",9,0)
 S DIR(0)="D^::E",DIR("B")="Today"
"RTN","SCRPU2",10,0)
 I '$D(FIRST) S DIR("A")="Begin Date"
"RTN","SCRPU2",11,0)
 I $D(FIRST) S DIR("A")=FIRST
"RTN","SCRPU2",12,0)
 D ^DIR
"RTN","SCRPU2",13,0)
 I $D(DTOUT)!(X="Today") S BDATE=$P(DT,".")
"RTN","SCRPU2",14,0)
 I $D(DUOUT)!($D(DIROUT))  Q -1
"RTN","SCRPU2",15,0)
 S BDATE=+Y
"RTN","SCRPU2",16,0)
DEN I '$D(SECOND) S DIR("A")="End Date"
"RTN","SCRPU2",17,0)
 I $D(SECOND) S DIR("A")=SECOND
"RTN","SCRPU2",18,0)
 K DTOUT,X,Y
"RTN","SCRPU2",19,0)
 D ^DIR
"RTN","SCRPU2",20,0)
 I $D(DTOUT)!(X="Today") S EDATE=$P(DT,".")
"RTN","SCRPU2",21,0)
 I $D(DUOUT)!($D(DIROUT)) Q -1
"RTN","SCRPU2",22,0)
 S EDATE=+Y
"RTN","SCRPU2",23,0)
 I EDATE<BDATE W !,"End date can't occur before Begin Date",! G DEN
"RTN","SCRPU2",24,0)
 K X,Y,DIR
"RTN","SCRPU2",25,0)
 Q BDATE_"^"_EDATE
"RTN","SCRPU2",26,0)
 ;
"RTN","SCRPU2",27,0)
GTEAM(CLN,DFN) ;
"RTN","SCRPU2",28,0)
 ;given clinic and patient, find related team
"RTN","SCRPU2",29,0)
 N TPEN,FOUND,TEAM
"RTN","SCRPU2",30,0)
 S TPEN="",FOUND=0
"RTN","SCRPU2",31,0)
 F  S TPEN=$O(^SCTM(404.57,"D",CLN,TPEN)) Q:TPEN=""!(FOUND)  D
"RTN","SCRPU2",32,0)
 .S TEAM=$P(^SCTM(404.57,TPEN,0),"^",2)
"RTN","SCRPU2",33,0)
 .I $D(^SCPT(404.42,"APTTM",DFN,TEAM)) S FOUND=1
"RTN","SCRPU2",34,0)
 I FOUND=1 Q TEAM
"RTN","SCRPU2",35,0)
 Q FOUND
"RTN","SCRPU2",36,0)
 ;
"RTN","SCRPU2",37,0)
ASSUN ;
"RTN","SCRPU2",38,0)
 ;prompt for assigned or unassigned to Primary Care Team
"RTN","SCRPU2",39,0)
 N VAUTVB
"RTN","SCRPU2",40,0)
 S VAUTVB="VAUTA"
"RTN","SCRPU2",41,0)
 W !,"(A)ssigned or (U)nassigned Patients to Primary Care Team: "
"RTN","SCRPU2",42,0)
 R X:DTIME
"RTN","SCRPU2",43,0)
 I (X="^")!'$T G ERR
"RTN","SCRPU2",44,0)
 I (X'="A")&(X'="U") D HLP G ASSUN
"RTN","SCRPU2",45,0)
 I (X="")!(X["?") D HLP G ASSUN
"RTN","SCRPU2",46,0)
 I X="A" S @VAUTVB=1
"RTN","SCRPU2",47,0)
 I X="U" S @VAUTVB=0
"RTN","SCRPU2",48,0)
 K X
"RTN","SCRPU2",49,0)
 Q
"RTN","SCRPU2",50,0)
 ;
"RTN","SCRPU2",51,0)
PCLNHR() ;Prompt to Print Clinic Hours
"RTN","SCRPU2",52,0)
 S DIR("A")="Print Clinic Hours",DIR("B")="Y"
"RTN","SCRPU2",53,0)
 Q $$YESNO()
"RTN","SCRPU2",54,0)
 ;
"RTN","SCRPU2",55,0)
PCLNIN() ;Prompt to Print Clinic Information
"RTN","SCRPU2",56,0)
 S DIR("A")="Print Clinic Information",DIR("B")="Y"
"RTN","SCRPU2",57,0)
 Q $$YESNO()
"RTN","SCRPU2",58,0)
 ;
"RTN","SCRPU2",59,0)
SUMM() ;Prompt to Print Summary Only (y/n)
"RTN","SCRPU2",60,0)
 S DIR("A")="Print Summary Only",DIR("B")="N"
"RTN","SCRPU2",61,0)
 S DIR("?")="Enter 'Y' to have patient names excluded, 'N' to include patient names"
"RTN","SCRPU2",62,0)
 Q $$YESNO()
"RTN","SCRPU2",63,0)
 ;
"RTN","SCRPU2",64,0)
YESNO() ;Yes/No prompt
"RTN","SCRPU2",65,0)
 N X,DTOUT,DUOUT,DIROUT,Y
"RTN","SCRPU2",66,0)
 S DIR(0)="Y"
"RTN","SCRPU2",67,0)
 D ^DIR
"RTN","SCRPU2",68,0)
 I $D(DTOUT)!(X="") S Y=$S(DIR("B")="Y":1,1:0)
"RTN","SCRPU2",69,0)
 I $D(DUOUT)!($D(DIROUT)) S Y=-1
"RTN","SCRPU2",70,0)
 K DIR
"RTN","SCRPU2",71,0)
 Q +Y
"RTN","SCRPU2",72,0)
 ;
"RTN","SCRPU2",73,0)
PTSTAT ;Prompt for Patient Status (All, OPT, AC)
"RTN","SCRPU2",74,0)
 ;Modified by patch 172
"RTN","SCRPU2",75,0)
 S VAUTPS=1 Q
"RTN","SCRPU2",76,0)
 ;
"RTN","SCRPU2",77,0)
 N X,STAT,VAUTVB
"RTN","SCRPU2",78,0)
 S VAUTVB="VAUTPS"
"RTN","SCRPU2",79,0)
 W !,"Patient Status: ALL//"
"RTN","SCRPU2",80,0)
 R X:DTIME
"RTN","SCRPU2",81,0)
 I '$T!(X="")!(X="ALL") S @VAUTVB=1
"RTN","SCRPU2",82,0)
 I X="^" G ERR
"RTN","SCRPU2",83,0)
 I (X["?") D HLP2 G PTSTAT
"RTN","SCRPU2",84,0)
 I X="A"!(X="AC") S @VAUTVB="AC"
"RTN","SCRPU2",85,0)
 I X="O"!(X="OPT") S @VAUTVB="OPT"
"RTN","SCRPU2",86,0)
 I '$D(@VAUTVB) D HLP2 G PTSTAT
"RTN","SCRPU2",87,0)
 Q
"RTN","SCRPU2",88,0)
 ;
"RTN","SCRPU2",89,0)
HLP2 ;help prompt for Patient Status
"RTN","SCRPU2",90,0)
 W !,"Enter: ",!?10,"- A or AC for patients whose status is AC"
"RTN","SCRPU2",91,0)
 W !?10,"- O or OPT for patient whose status is OPT"
"RTN","SCRPU2",92,0)
 W !?10,"- Enter or ALL for both AC and OPT patients"
"RTN","SCRPU2",93,0)
 Q
"RTN","SCRPU2",94,0)
HLP ;
"RTN","SCRPU2",95,0)
 ;help prompt
"RTN","SCRPU2",96,0)
 W !,"Enter: ",!?5,"- A for patients assigned to the team as Primary Care"
"RTN","SCRPU2",97,0)
 W !?10,"- U for patients not assigned to the team as Primary Care"
"RTN","SCRPU2",98,0)
 Q
"RTN","SCRPU2",99,0)
 ;
"RTN","SCRPU2",100,0)
ERR S Y=-1 I $O(@VAUTVB@(0))="" K @VAUTVB
"RTN","SCRPU2",101,0)
QUIT S:'$D(Y) Y=1 K DIC,J,VAERR,VAI,VAJ,VAJ1,VAX,VAUTNI,VAUTSTR,VAUTVB,X
"RTN","SCRPU2",102,0)
 Q
"RTN","SCRPU2",103,0)
 ;
"RTN","SCRPU2",104,0)
SORT() ;
"RTN","SCRPU2",105,0)
 ;Prompt for sorting by Division, Team, Practitioner or Division, Practitioner, Team
"RTN","SCRPU2",106,0)
 ;
"RTN","SCRPU2",107,0)
EN1 N X
"RTN","SCRPU2",108,0)
 W !,"Sort By:",!?10,"[1] Division, Team, Practitioner",!?10,"[2] Division, Practitioner, Team"
"RTN","SCRPU2",109,0)
 W !?10,"[3] Practitioner,Associated Clinic"
"RTN","SCRPU2",110,0)
 W !!,"Select 1 or 2 or 3: "
"RTN","SCRPU2",111,0)
 R X:DTIME
"RTN","SCRPU2",112,0)
 I (X="^")!'$T Q 0
"RTN","SCRPU2",113,0)
 I (X'="1")&(X'="2")&(X'=3) D HLP3 G EN1
"RTN","SCRPU2",114,0)
 I (X["?")!(X="") D HLP3 G EN1
"RTN","SCRPU2",115,0)
 Q X
"RTN","SCRPU2",116,0)
HLP3 ;
"RTN","SCRPU2",117,0)
 ;help prompt
"RTN","SCRPU2",118,0)
 W !,"Enter: ",!?5,"- 1 to sort by Division, Team, Practitioner "
"RTN","SCRPU2",119,0)
 W !?10,"- 2 to sort by Division, Practitioner, Team"
"RTN","SCRPU2",120,0)
 Q
"RTN","SCRPU2",121,0)
 ;
"RTN","SCRPU2",122,0)
SORT2() ;Prompt for sorting by:
"RTN","SCRPU2",123,0)
 ;   [1] Division, Team, Patient Name
"RTN","SCRPU2",124,0)
 ;or [2] Division, Team, Last 4 Pt ID
"RTN","SCRPU2",125,0)
 ;or [3] Division, Team, Practitioner, Patient Name
"RTN","SCRPU2",126,0)
 ;or [4] Division, Team, Practitioner, Last 4 Pt ID
"RTN","SCRPU2",127,0)
 ;
"RTN","SCRPU2",128,0)
EN4 ;
"RTN","SCRPU2",129,0)
 N X
"RTN","SCRPU2",130,0)
 W !,"Sort By:",!?10,"[1] Division, Team, Patient Name"
"RTN","SCRPU2",131,0)
 W !?10,"[2] Division, Team, Last 4 Pt ID"
"RTN","SCRPU2",132,0)
 W !?10,"[3] Division, Team, Practitioner, Patient Name"
"RTN","SCRPU2",133,0)
 W !?10,"[4] Division, Team, Practitioner, Last 4 Pt ID"
"RTN","SCRPU2",134,0)
 W !!,"Select 1, 2, 3, or 4: "
"RTN","SCRPU2",135,0)
 R X:DTIME
"RTN","SCRPU2",136,0)
 I X=""!(X="^")!'$T Q 0
"RTN","SCRPU2",137,0)
 I (X'="1")&(X'="2")&(X'="3")&(X'="4") D HLP4 G EN4
"RTN","SCRPU2",138,0)
 I (X["?") D HLP4 G EN4
"RTN","SCRPU2",139,0)
 Q X
"RTN","SCRPU2",140,0)
HLP4 ;
"RTN","SCRPU2",141,0)
 ;help prompt
"RTN","SCRPU2",142,0)
 W !,"Enter: ",!?5,"- 1 to sort by Division, Team, Patient Name"
"RTN","SCRPU2",143,0)
 W !?10,"- 2 to sort by Division, Team, Last 4 Pt ID"
"RTN","SCRPU2",144,0)
 W !?10,"- 3 to sort by Division, Team, Practitioner, Patient Name"
"RTN","SCRPU2",145,0)
 W !?10,"- 4 to sort by Division, Team, Practitioner, Last 4 Pt ID"
"RTN","SCRPU2",146,0)
 Q
"RTN","SCUTBK1")
0^26^B6471871^B6329555
"RTN","SCUTBK1",1,0)
SCUTBK1 ;ALB/MJK - Scheduling Broker Utilities ;[ 03/08/95  3:41 PM ]
"RTN","SCUTBK1",2,0)
 ;;5.3;Scheduling;**4,297**;AUG 13, 1993
"RTN","SCUTBK1",3,0)
 ;
"RTN","SCUTBK1",4,0)
 Q
"RTN","SCUTBK1",5,0)
 ;
"RTN","SCUTBK1",6,0)
DIKC(SCOK,SC) ; -- broker callback to kill a file entry
"RTN","SCUTBK1",7,0)
 ;
"RTN","SCUTBK1",8,0)
 N DIK,DA
"RTN","SCUTBK1",9,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",10,0)
 ;
"RTN","SCUTBK1",11,0)
 ; -- array parsing
"RTN","SCUTBK1",12,0)
 S DIK=$G(SC("ROOT"))
"RTN","SCUTBK1",13,0)
 S DA=+$G(SC("IEN"))
"RTN","SCUTBK1",14,0)
 ;
"RTN","SCUTBK1",15,0)
 IF DIK]"",$D(@(DIK_DA_",0)")) D
"RTN","SCUTBK1",16,0)
 . D ^DIK
"RTN","SCUTBK1",17,0)
 . S SCOK=1
"RTN","SCUTBK1",18,0)
 ELSE  D
"RTN","SCUTBK1",19,0)
 . S SCOK=0
"RTN","SCUTBK1",20,0)
 Q
"RTN","SCUTBK1",21,0)
 ;
"RTN","SCUTBK1",22,0)
LOCKC(SCOK,SC) ; -- broker callback to lock/unlock a node
"RTN","SCUTBK1",23,0)
 ;
"RTN","SCUTBK1",24,0)
 N SCNODE
"RTN","SCUTBK1",25,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",26,0)
 ;
"RTN","SCUTBK1",27,0)
 ; -- array parsing
"RTN","SCUTBK1",28,0)
 S SCNODE=$G(SC("NODE"))
"RTN","SCUTBK1",29,0)
 I SCNODE[",)" S SCOK=1 Q
"RTN","SCUTBK1",30,0)
 ;
"RTN","SCUTBK1",31,0)
 IF SCNODE]"" D
"RTN","SCUTBK1",32,0)
 . IF $G(SC("LOCKMODE")) D
"RTN","SCUTBK1",33,0)
 . . L @("+"_SCNODE_":"_$G(SC("TIMEOUT"),5))
"RTN","SCUTBK1",34,0)
 . . S SCOK=$T
"RTN","SCUTBK1",35,0)
 . ELSE  D
"RTN","SCUTBK1",36,0)
 . . L @("-"_SCNODE)
"RTN","SCUTBK1",37,0)
 . . S SCOK=1
"RTN","SCUTBK1",38,0)
 ELSE  D 
"RTN","SCUTBK1",39,0)
 . S SCOK=0
"RTN","SCUTBK1",40,0)
 Q
"RTN","SCUTBK1",41,0)
 ;
"RTN","SCUTBK1",42,0)
FILENOC(SCFLNO,SCNAME) ; -- broker callback to get File #
"RTN","SCUTBK1",43,0)
 ;
"RTN","SCUTBK1",44,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",45,0)
 S SCFLNO=+$O(^DIC("B",SCNAME,""))
"RTN","SCUTBK1",46,0)
 Q
"RTN","SCUTBK1",47,0)
 ;
"RTN","SCUTBK1",48,0)
NODEC(SCNODE,SCROOT) ; -- broker callback to get global node value
"RTN","SCUTBK1",49,0)
 ;
"RTN","SCUTBK1",50,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",51,0)
 ;S SCNODE=$G(@SCROOT)
"RTN","SCUTBK1",52,0)
 IF $D(@SCROOT)=0!($D(@SCROOT)=10) D
"RTN","SCUTBK1",53,0)
 . S SCNODE="{{"_$D(@SCROOT)_"}}"
"RTN","SCUTBK1",54,0)
 IF $D(@SCROOT)=1!($D(@SCROOT)=11) D
"RTN","SCUTBK1",55,0)
 . S SCNODE=$G(@SCROOT)
"RTN","SCUTBK1",56,0)
 Q
"RTN","SCUTBK1",57,0)
 ;
"RTN","SCUTBK1",58,0)
GLCNT(SCOK,SC) ; -- extrinsic call to invoke broker to return number of
"RTN","SCUTBK1",59,0)
 ;       global nodes found at cross reference
"RTN","SCUTBK1",60,0)
 N SCNODE,SCTEAM,SCXREF,SCFRST
"RTN","SCUTBK1",61,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",62,0)
 ;
"RTN","SCUTBK1",63,0)
 S (SCFRST,SCOK)=""
"RTN","SCUTBK1",64,0)
 S SCNODE=$G(SC("ROOT"))
"RTN","SCUTBK1",65,0)
 S SCXREF=$G(SC("XREF"))
"RTN","SCUTBK1",66,0)
 S SCVAL=$G(SC("VALUE"))
"RTN","SCUTBK1",67,0)
 ;
"RTN","SCUTBK1",68,0)
 S:SCXREF="" SCXREF="B"
"RTN","SCUTBK1",69,0)
 S I="",X=0
"RTN","SCUTBK1",70,0)
 F  S I=$O(@SCNODE@(SCXREF,SCVAL,I)) Q:I=""  D
"RTN","SCUTBK1",71,0)
 . S X=X+1
"RTN","SCUTBK1",72,0)
 S SCOK=$G(X)
"RTN","SCUTBK1",73,0)
 Q
"RTN","SCUTBK1",74,0)
 ;
"RTN","SCUTBK1",75,0)
IFNODE(SCNODE,SCROOT) ; -- extrinsic call to check if node exists.
"RTN","SCUTBK1",76,0)
 ; passes in full node reference.
"RTN","SCUTBK1",77,0)
 N X
"RTN","SCUTBK1",78,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",79,0)
 ;
"RTN","SCUTBK1",80,0)
 IF $D(@SCROOT)=0!($D(@SCROOT)=10) D
"RTN","SCUTBK1",81,0)
 . S SCNODE="{{"_$D(@SCROOT)_"}}"
"RTN","SCUTBK1",82,0)
 IF $D(@SCROOT)=1!($D(@SCROOT)=11) D
"RTN","SCUTBK1",83,0)
 . S SCNODE=$G(@SCROOT)
"RTN","SCUTBK1",84,0)
 Q
"RTN","SCUTBK1",85,0)
 ;
"RTN","SCUTBK1",86,0)
PRTP(SCACTV,SC) ;
"RTN","SCUTBK1",87,0)
 ;
"RTN","SCUTBK1",88,0)
 N SCRTN,SCERRX,SCOK,SCIEN,SCKDT
"RTN","SCUTBK1",89,0)
 D TMP^SCUTBK
"RTN","SCUTBK1",90,0)
 D CHK^SCUTBK
"RTN","SCUTBK1",91,0)
 ;
"RTN","SCUTBK1",92,0)
 I $G(SC("IEN"))=0 D  G PRTPQ
"RTN","SCUTBK1",93,0)
 . S SCACTV=0
"RTN","SCUTBK1",94,0)
 S SCIEN=SC("IEN")
"RTN","SCUTBK1",95,0)
 ;
"RTN","SCUTBK1",96,0)
 S SCKDT=""
"RTN","SCUTBK1",97,0)
 S SCKDT("BEGIN")=$G(SC("BEGIN"),DT)
"RTN","SCUTBK1",98,0)
 S SCKDT("END")=$G(SC("END"),DT)
"RTN","SCUTBK1",99,0)
 S SCKDT("INCL")=$G(SC("INCL"),0)
"RTN","SCUTBK1",100,0)
 ;
"RTN","SCUTBK1",101,0)
 S SCOK=$$PRTP^SCAPMC8(SCIEN,"SCKDT","SCRTN","SCERRX")
"RTN","SCUTBK1",102,0)
 S SCACTV=$S(SCOK:$G(SCRTN(1),"0"),1:"0")
"RTN","SCUTBK1",103,0)
PRTPQ Q
"RTN","SCUTBK10")
0^16^B14108218^B13713071
"RTN","SCUTBK10",1,0)
SCUTBK10 ;ALB/SCK - Scheduling Broker Utilities ; 04 Sep 2002  12:53 PM
"RTN","SCUTBK10",2,0)
 ;;5.3;Scheduling;**41,264,297**;AUG 13, 1993
"RTN","SCUTBK10",3,0)
 ;
"RTN","SCUTBK10",4,0)
 Q
"RTN","SCUTBK10",5,0)
 ;
"RTN","SCUTBK10",6,0)
PARSE(SC) ;
"RTN","SCUTBK10",7,0)
 S SCFILE=$G(SC("FILE"))
"RTN","SCUTBK10",8,0)
 S SCIEN=$G(SC("IEN"))
"RTN","SCUTBK10",9,0)
 S SCVAL=$G(SC("VALUE"))
"RTN","SCUTBK10",10,0)
 S SCSTATUS=$G(SC("STATUS"))
"RTN","SCUTBK10",11,0)
 S SCSUBJ=$G(SC("SUBJ"),"PCMM NOTIFICATION")
"RTN","SCUTBK10",12,0)
 S SCDATE=$G(SC("DATE"))
"RTN","SCUTBK10",13,0)
 S SCADR=$G(SC("ADDRESS"))
"RTN","SCUTBK10",14,0)
 S SCHIEN=$G(SC("HIEN"))
"RTN","SCUTBK10",15,0)
 Q
"RTN","SCUTBK10",16,0)
 ;
"RTN","SCUTBK10",17,0)
PTASGMM(SCOK,SC) ;  Send MailMan message on single patient assignment to either 
"RTN","SCUTBK10",18,0)
 ; a team or a position.
"RTN","SCUTBK10",19,0)
 ;
"RTN","SCUTBK10",20,0)
 ;   Input:   SC = BT^404.42 Ien   Sets before action for team assign.
"RTN","SCUTBK10",21,0)
 ;            SC = AT^404.42 Ien   Sets after action for team assign.
"RTN","SCUTBK10",22,0)
 ;            SC = BP^404.43 Ien  Sets before action for position assign
"RTN","SCUTBK10",23,0)
 ;            SC = BA^404.43 Ien  Sets after action for position assign 
"RTN","SCUTBK10",24,0)
 ;
"RTN","SCUTBK10",25,0)
 N SCACT,SCIEN
"RTN","SCUTBK10",26,0)
 ;
"RTN","SCUTBK10",27,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",28,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",29,0)
 ;
"RTN","SCUTBK10",30,0)
 S SCOK=0
"RTN","SCUTBK10",31,0)
 S SCACT=$P($G(SC),U,1)
"RTN","SCUTBK10",32,0)
 S SCIEN=$P($G(SC),U,2)
"RTN","SCUTBK10",33,0)
 G:SCACT="" PTASGNQ
"RTN","SCUTBK10",34,0)
 G:SCIEN="" PTASGNQ
"RTN","SCUTBK10",35,0)
 ;
"RTN","SCUTBK10",36,0)
 D @SCACT
"RTN","SCUTBK10",37,0)
 S SCOK=1
"RTN","SCUTBK10",38,0)
PTASGNQ Q
"RTN","SCUTBK10",39,0)
 ;
"RTN","SCUTBK10",40,0)
BT ;
"RTN","SCUTBK10",41,0)
 D BEFORETM^SCMCDD1(SCIEN)
"RTN","SCUTBK10",42,0)
 Q
"RTN","SCUTBK10",43,0)
AT ;
"RTN","SCUTBK10",44,0)
 D AFTERTM^SCMCDD1(SCIEN)
"RTN","SCUTBK10",45,0)
 Q
"RTN","SCUTBK10",46,0)
BP ;
"RTN","SCUTBK10",47,0)
 D BEFORETP^SCMCDD1(SCIEN)
"RTN","SCUTBK10",48,0)
 Q
"RTN","SCUTBK10",49,0)
AP ;
"RTN","SCUTBK10",50,0)
 D AFTERTP^SCMCDD1(SCIEN)
"RTN","SCUTBK10",51,0)
 Q
"RTN","SCUTBK10",52,0)
 ;
"RTN","SCUTBK10",53,0)
MAILC(SCOK,SC) ;   call to invoke broker to send a mailman message from the
"RTN","SCUTBK10",54,0)
 ;           client
"RTN","SCUTBK10",55,0)
 ;
"RTN","SCUTBK10",56,0)
 N SCSUBJ,SCTEXT
"RTN","SCUTBK10",57,0)
 ;
"RTN","SCUTBK10",58,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",59,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",60,0)
 ;
"RTN","SCUTBK10",61,0)
 S SCOK=0
"RTN","SCUTBK10",62,0)
 S SCSUBJ=$G(SC("SUBJ"),"PCMM NOTIFICATION")
"RTN","SCUTBK10",63,0)
 S SCADR=$G(SC("ADDRESS"))
"RTN","SCUTBK10",64,0)
 ;
"RTN","SCUTBK10",65,0)
 S XMDUZ=DUZ
"RTN","SCUTBK10",66,0)
 S XMSUB=SCSUBJ
"RTN","SCUTBK10",67,0)
 D XMZ^XMA2
"RTN","SCUTBK10",68,0)
 G:XMZ<1 MAILQ
"RTN","SCUTBK10",69,0)
 ;
"RTN","SCUTBK10",70,0)
 D BLDTEXT(.SC,.SCTEXT)
"RTN","SCUTBK10",71,0)
 S XMTEXT="SCTEXT("
"RTN","SCUTBK10",72,0)
 ;
"RTN","SCUTBK10",73,0)
 I $P(SCADR,U,2)="TEST" D
"RTN","SCUTBK10",74,0)
 . S XMY("G.PCM MESSAGING@DEVFEX.ISC-ALBANY.VA.GOV")=""
"RTN","SCUTBK10",75,0)
 ;
"RTN","SCUTBK10",76,0)
 I $P(SCADR,U,2)="S" D
"RTN","SCUTBK10",77,0)
 . S XMY($P(SCADR,U,1))=""
"RTN","SCUTBK10",78,0)
 ;
"RTN","SCUTBK10",79,0)
 I $D(XMY)>0 D
"RTN","SCUTBK10",80,0)
 . D ^XMD
"RTN","SCUTBK10",81,0)
 . S SCOK=XMZ
"RTN","SCUTBK10",82,0)
MAILQ Q
"RTN","SCUTBK10",83,0)
 ;
"RTN","SCUTBK10",84,0)
BLDTEXT(SCVAL,SCTXT) ;  Build the message text array from the client
"RTN","SCUTBK10",85,0)
 ;
"RTN","SCUTBK10",86,0)
 N SCLINE,CNT
"RTN","SCUTBK10",87,0)
 S SCLINE=""
"RTN","SCUTBK10",88,0)
 F  S SCLINE=$O(SCVAL(SCLINE)) Q:+SCLINE=0  D
"RTN","SCUTBK10",89,0)
 . S SCTXT(SCLINE)=SCVAL(SCLINE)
"RTN","SCUTBK10",90,0)
 Q
"RTN","SCUTBK10",91,0)
 ;
"RTN","SCUTBK10",92,0)
NEWHIST(SCOK,SC) ;  Call to invoke the broker to determine whether the date for
"RTN","SCUTBK10",93,0)
 ;          the history entry being added is valid.
"RTN","SCUTBK10",94,0)
 ;
"RTN","SCUTBK10",95,0)
 N SCFILE,SCIEN,SCDATE,SCSTATUS,SCVAL,SCERMSG
"RTN","SCUTBK10",96,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",97,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",98,0)
 ;
"RTN","SCUTBK10",99,0)
 S SCOK=0
"RTN","SCUTBK10",100,0)
 D PARSE(.SC)
"RTN","SCUTBK10",101,0)
 ;
"RTN","SCUTBK10",102,0)
 S SCOK=$$NEWHIST^SCMCDD(SCFILE,SCIEN,SCDATE,"SCERMSG",SCSTATUS)
"RTN","SCUTBK10",103,0)
NEWDTQ Q
"RTN","SCUTBK10",104,0)
 ;
"RTN","SCUTBK10",105,0)
NEWSTC(SCOK,SC) ;  Call to invoke the broker to determine whether the status
"RTN","SCUTBK10",106,0)
 ;          entry for the current entry is valid.
"RTN","SCUTBK10",107,0)
 ;
"RTN","SCUTBK10",108,0)
 N SCFILE,SCIEN,SCDATE,SCSTATUS,SCVAL,SCERMSG
"RTN","SCUTBK10",109,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",110,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",111,0)
 ;
"RTN","SCUTBK10",112,0)
 S SCOK=0
"RTN","SCUTBK10",113,0)
 D PARSE(.SC)
"RTN","SCUTBK10",114,0)
 ;
"RTN","SCUTBK10",115,0)
 S SCOK=$$NEWHIST^SCMCDD(SCFILE,SCIEN,SCDATE,"SCERMSG",SCSTATUS)
"RTN","SCUTBK10",116,0)
NEWSTQ Q
"RTN","SCUTBK10",117,0)
 ;
"RTN","SCUTBK10",118,0)
DELDTC(SCOK,SC) ;  Call to invoke the broker to see if the history entry can
"RTN","SCUTBK10",119,0)
 ;          be deleted.
"RTN","SCUTBK10",120,0)
 ;
"RTN","SCUTBK10",121,0)
 N SCFILE,SCHIEN,SCERMSG
"RTN","SCUTBK10",122,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",123,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",124,0)
 ;
"RTN","SCUTBK10",125,0)
 S SCOK=0
"RTN","SCUTBK10",126,0)
 D PARSE(.SC)
"RTN","SCUTBK10",127,0)
 ;
"RTN","SCUTBK10",128,0)
 S SCOK=$$OKDEL^SCMCDD(SCFILE,SCHIEN,"SCERMSG")
"RTN","SCUTBK10",129,0)
DELDTQ Q
"RTN","SCUTBK10",130,0)
 ;
"RTN","SCUTBK10",131,0)
INACTC(SCOK,SC) ;   Call to invoke the broker to see if the history entry can
"RTN","SCUTBK10",132,0)
 ;           be inactivated.
"RTN","SCUTBK10",133,0)
 ;
"RTN","SCUTBK10",134,0)
 N SCFILE,SCIEN,SCDATE
"RTN","SCUTBK10",135,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",136,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",137,0)
 ;
"RTN","SCUTBK10",138,0)
 S SCOK=0
"RTN","SCUTBK10",139,0)
 D PARSE(.SC)
"RTN","SCUTBK10",140,0)
 ;
"RTN","SCUTBK10",141,0)
 S SCOK=$$OKINACT^SCMCDD(SCFILE,SCIEN,SCDATE,"SCERMSG")
"RTN","SCUTBK10",142,0)
INACTQ Q
"RTN","SCUTBK10",143,0)
 ;
"RTN","SCUTBK10",144,0)
CHGDTC(SCOK,SC) ;  Call to see if the date change for the history entry is 
"RTN","SCUTBK10",145,0)
 ;          valid.
"RTN","SCUTBK10",146,0)
 ;
"RTN","SCUTBK10",147,0)
 N SCFILE,SCIEN,SCDATE,SCERMSG
"RTN","SCUTBK10",148,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",149,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",150,0)
 ;
"RTN","SCUTBK10",151,0)
 S SCOK=0
"RTN","SCUTBK10",152,0)
 D PARSE(.SC)
"RTN","SCUTBK10",153,0)
 ;
"RTN","SCUTBK10",154,0)
 S SCOK=$$OKCHGDT^SCMCDD(SCFILE,SCHIEN,SCDATE,"SCERMSG")
"RTN","SCUTBK10",155,0)
CHGDTQ Q
"RTN","SCUTBK10",156,0)
 ;
"RTN","SCUTBK10",157,0)
MNTEST(SCOK,SC) ;
"RTN","SCUTBK10",158,0)
 D CHK^SCUTBK
"RTN","SCUTBK10",159,0)
 D TMP^SCUTBK
"RTN","SCUTBK10",160,0)
 S DFN=+SC
"RTN","SCUTBK10",161,0)
 S SCOK=$$LST^DGMTU(DFN),$P(SCOK,U,10)=$$ONWAIT^SCMCWAIT(DFN),$P(SCOK,U,11)=$$SC^SCMCWAIT(SC)
"RTN","SCUTBK10",162,0)
 S $P(SCOK,U,12)=$$IU^SCMCTSK1(DFN)
"RTN","SCUTBK10",163,0)
 Q
"RTN","SCUTBK10",164,0)
 ;
"RTN","SCUTBK11")
0^34^B28671391^B27718164
"RTN","SCUTBK11",1,0)
SCUTBK11 ;ALB/SCK - Scheduling Broker Utilities; 2/2/96 ;9/7/96  17:28
"RTN","SCUTBK11",2,0)
 ;;5.3;Scheduling;**41,54,86,148,177,205,209,255,297**;AUG 13, 1993
"RTN","SCUTBK11",3,0)
 ;
"RTN","SCUTBK11",4,0)
 Q
"RTN","SCUTBK11",5,0)
PARSE(SC) ;
"RTN","SCUTBK11",6,0)
 S SCDFN=$G(SC("DFN"),"")
"RTN","SCUTBK11",7,0)
 S SCPIEN=$G(SC("PIEN"),"")
"RTN","SCUTBK11",8,0)
 S:$D(SC("TEAM")) SCTM=$G(SC("TEAM"))
"RTN","SCUTBK11",9,0)
 S:$D(SC("BEGIN")) SCDT("BEGIN")=$G(SC("BEGIN"))
"RTN","SCUTBK11",10,0)
 S:$D(SC("END")) SCDT("END")=$G(SC("END"))
"RTN","SCUTBK11",11,0)
 I $D(SC("END")) S SCDT("INCL")=0
"RTN","SCUTBK11",12,0)
 S SCFILE=$G(SC("FILE"))
"RTN","SCUTBK11",13,0)
 S SCIEN=$G(SC("IEN"))
"RTN","SCUTBK11",14,0)
 S SCFIELD=$G(SC("FIELD"))
"RTN","SCUTBK11",15,0)
 S SCVAL=$G(SC("VALUE"))
"RTN","SCUTBK11",16,0)
 Q
"RTN","SCUTBK11",17,0)
 ;
"RTN","SCUTBK11",18,0)
TMLST(SCDATA,SC) ;
"RTN","SCUTBK11",19,0)
 ;  -- Return a list of teams for a patient.  Pass in the DFN and
"RTN","SCUTBK11",20,0)
 ;     optionally a date range and/or a team purpose to restrict the
"RTN","SCUTBK11",21,0)
 ;     team look up.  Return only the team entry, strip out any other
"RTN","SCUTBK11",22,0)
 ;     array items.
"RTN","SCUTBK11",23,0)
 ;
"RTN","SCUTBK11",24,0)
 N DFN,SCDT,SCPURP,SCLIST,SCER1,SCOK,SCD
"RTN","SCUTBK11",25,0)
 ;
"RTN","SCUTBK11",26,0)
 D CHK^SCUTBK
"RTN","SCUTBK11",27,0)
 D TMP^SCUTBK
"RTN","SCUTBK11",28,0)
 ;
"RTN","SCUTBK11",29,0)
 S DFN=$G(SC("DFN"))
"RTN","SCUTBK11",30,0)
 S SCDT("BEGIN")=$G(SC("BEGIN"),"")
"RTN","SCUTBK11",31,0)
 I $L(SCDT("BEGIN"))>2 S SCDT("INCL")=$G(SC("INCL"),0)
"RTN","SCUTBK11",32,0)
 S SCDT("END")=$G(SC("END"),"")
"RTN","SCUTBK11",33,0)
 S SCPURP=$G(SC("PURP"),"")
"RTN","SCUTBK11",34,0)
 ;
"RTN","SCUTBK11",35,0)
 S SCOK=$$TMPT^SCAPMC3(DFN,"SCDT","","SCD","SCER1")
"RTN","SCUTBK11",36,0)
 ;
"RTN","SCUTBK11",37,0)
 S I=0 F  S I=$O(SCD(I)) Q:'I  S SCDATA(I)=SCD(I)
"RTN","SCUTBK11",38,0)
TMQ Q
"RTN","SCUTBK11",39,0)
 ;
"RTN","SCUTBK11",40,0)
FINDP(SCOUT,SCIN) ; patient lookup used by SC PATIENT LOOKUP rpc
"RTN","SCUTBK11",41,0)
 ; input:
"RTN","SCUTBK11",42,0)
 ;   SCIN("VALUE") = value to lookup
"RTN","SCUTBK11",43,0)
 ;     Lookup uses multiple index lookup of File #2
"RTN","SCUTBK11",44,0)
 ; output:
"RTN","SCUTBK11",45,0)
 ;   SCOUT = location of data = ^TMP("DILIST",$J,i,0)
"RTN","SCUTBK11",46,0)
 ;   for i=1:number of records returned: 
"RTN","SCUTBK11",47,0)
 ;    DFN^patient name^DOB^PID^DOD
"RTN","SCUTBK11",48,0)
 ;     1        2       3   4   5
"RTN","SCUTBK11",49,0)
 ;
"RTN","SCUTBK11",50,0)
 ;bp/cmf 205 original code next line
"RTN","SCUTBK11",51,0)
 ;D FIND^DIC(2,,".01;.03;.363;.09","MPS",SCIN("VALUE"),500)
"RTN","SCUTBK11",52,0)
 ;bp/cmf 205 change code next line
"RTN","SCUTBK11",53,0)
 ;oifo/swo 297 added .351 for DOD warning new functionality
"RTN","SCUTBK11",54,0)
 D FIND^DIC(2,,".01;.03;.363;.09;.351","PS",SCIN("VALUE"),300,"B^BS^BS5^SSN")
"RTN","SCUTBK11",55,0)
 I $G(DIERR) D CLEAN^DILF Q
"RTN","SCUTBK11",56,0)
 N SCOUNT S SCOUNT=+^TMP("DILIST",$J,0)
"RTN","SCUTBK11",57,0)
 N SC F SC=1:1:SCOUNT D
"RTN","SCUTBK11",58,0)
 . N NODE,SSN,DSSN,PLID
"RTN","SCUTBK11",59,0)
 . S NODE=^TMP("DILIST",$J,SC,0)
"RTN","SCUTBK11",60,0)
 . ;Apply DOB screen
"RTN","SCUTBK11",61,0)
 . S $P(NODE,U,3)=$$DOB^DPTLK1(+NODE)
"RTN","SCUTBK11",62,0)
 . ;Apply SSN screen
"RTN","SCUTBK11",63,0)
 . S SSN=$$SSN^DPTLK1(+NODE)
"RTN","SCUTBK11",64,0)
 . S DSSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,11)
"RTN","SCUTBK11",65,0)
 . S PLID=$P(NODE,U,4)
"RTN","SCUTBK11",66,0)
 . I $E(SSN,1,9)'?9N S (DSSN,PLID)=SSN
"RTN","SCUTBK11",67,0)
 . S $P(NODE,U,4)=$S($L(PLID)>5:PLID,1:DSSN)
"RTN","SCUTBK11",68,0)
 . ;Move screened data back into output global
"RTN","SCUTBK11",69,0)
 . ;oifo/swo 297 piece 6 is DOD field. Added for DOD warning
"RTN","SCUTBK11",70,0)
 . S ^TMP("DILIST",$J,SC,0)=$P(NODE,U,1,4)_U_$P(NODE,U,6)
"RTN","SCUTBK11",71,0)
 K ^TMP("DILIST",$J,0)
"RTN","SCUTBK11",72,0)
 K SCOUT S SCOUT="^TMP(""DILIST"","_$J_")"
"RTN","SCUTBK11",73,0)
 Q
"RTN","SCUTBK11",74,0)
PSLST(SCDATA,SC) ;
"RTN","SCUTBK11",75,0)
 ;
"RTN","SCUTBK11",76,0)
 ;  - Returns a array of positions that show the person currently
"RTN","SCUTBK11",77,0)
 ;    assigned to the position, the preceptor for that position,
"RTN","SCUTBK11",78,0)
 ;    for the patient is assigned to.
"RTN","SCUTBK11",79,0)
 ;
"RTN","SCUTBK11",80,0)
 ;    Pass in the Patient's DFN
"RTN","SCUTBK11",81,0)
 ;    To restrict to specific entries, pass in the following:
"RTN","SCUTBK11",82,0)
 ;      Beginning and Ending Date Range 
"RTN","SCUTBK11",83,0)
 ;      A specific Team Position
"RTN","SCUTBK11",84,0)
 ;      A Specific User entry (8930)
"RTN","SCUTBK11",85,0)
 ;      A specific Team Purpose.  (Read SCAPMC23 for how it exclude
"RTN","SCUTBK11",86,0)
 ;        a specific team purpose.
"RTN","SCUTBK11",87,0)
 ;      A specific role
"RTN","SCUTBK11",88,0)
 ;      Flag whether to include patients associated by enrollement
"RTN","SCUTBK11",89,0)
 ;    
"RTN","SCUTBK11",90,0)
 N SCDT,SCD,SCER1,SCDFN,SCPRP,SCPST,SCRLE,SCIND,SCUSR,SCTM,SCDTE
"RTN","SCUTBK11",91,0)
 ;
"RTN","SCUTBK11",92,0)
 D CHK^SCUTBK
"RTN","SCUTBK11",93,0)
 D TMP^SCUTBK
"RTN","SCUTBK11",94,0)
 ;
"RTN","SCUTBK11",95,0)
 D PARSE(.SC)
"RTN","SCUTBK11",96,0)
 S SCDTE=$G(SCDT("BEGIN"))
"RTN","SCUTBK11",97,0)
 ;
"RTN","SCUTBK11",98,0)
 S CNT=0
"RTN","SCUTBK11",99,0)
 K ^TMP($J,"PSLST")
"RTN","SCUTBK11",100,0)
 S SCOK=$$TPPT^SCAPMC(SCDFN,.SCDT,"","","","","","SCD","SCER1")
"RTN","SCUTBK11",101,0)
 S I=0 F  S I=$O(SCD(I)) Q:'I  D
"RTN","SCUTBK11",102,0)
 . I $D(SCTM) D
"RTN","SCUTBK11",103,0)
 .. Q:$P(SCD(I),U,3)'=SCTM
"RTN","SCUTBK11",104,0)
 .. S ^TMP($J,"PSLST",I)=$P($G(SCD(I)),U,3)_U_$P($G(SCD(I)),U,4)_U_$P($G(SCD(I)),U,1,2)_U_$P($G(SCD(I)),U,7,8)
"RTN","SCUTBK11",105,0)
 . ;
"RTN","SCUTBK11",106,0)
 . I '$D(SCTM) D
"RTN","SCUTBK11",107,0)
 .. S ^TMP($J,"PSLST",I)=$P($G(SCD(I)),U,3)_U_$P($G(SCD(I)),U,4)_U_$P($G(SCD(I)),U,1,2)_U_$P($G(SCD(I)),U,7,8)
"RTN","SCUTBK11",108,0)
 ;
"RTN","SCUTBK11",109,0)
 S CNT=0
"RTN","SCUTBK11",110,0)
 S I=""
"RTN","SCUTBK11",111,0)
 F  S I=$O(^TMP($J,"PSLST",I)) Q:'I  D
"RTN","SCUTBK11",112,0)
 . S:'$D(SCDTE) SCDTE=DT
"RTN","SCUTBK11",113,0)
 . S SCPIEN=$P($G(^TMP($J,"PSLST",I)),U,3)
"RTN","SCUTBK11",114,0)
 . S SCDATA(CNT)=^TMP($J,"PSLST",I)_U_$$PSMBR(SCPIEN,SCDTE)_U_+$P($G(^SCPT(404.43,$P($G(^TMP($J,"PSLST",I)),U,2),0)),U,5)_U_+$P($G(^SCTM(404.57,SCPIEN,0)),U,4)
"RTN","SCUTBK11",115,0)
 . S CNT=CNT+1
"RTN","SCUTBK11",116,0)
 K ^TMP($J,"PSLST")
"RTN","SCUTBK11",117,0)
 ;
"RTN","SCUTBK11",118,0)
PSLTQ Q
"RTN","SCUTBK11",119,0)
 ;
"RTN","SCUTBK11",120,0)
PSMBR(SCPIEN,SCPDT) ;
"RTN","SCUTBK11",121,0)
 ;
"RTN","SCUTBK11",122,0)
 N SCPRCP,SCMBR,SCPP
"RTN","SCUTBK11",123,0)
 ;
"RTN","SCUTBK11",124,0)
 S SCMBR=$$GETPRTP^SCAPMCU2(SCPIEN,SCPDT)
"RTN","SCUTBK11",125,0)
 S SCMBR=$S(+SCMBR>0:SCMBR,1:U)
"RTN","SCUTBK11",126,0)
 S SCPP=$$OKPREC2^SCMCLK(SCPIEN,SCPDT)
"RTN","SCUTBK11",127,0)
 S SCPRCP=$S(+SCPP>0:SCPP,1:U)
"RTN","SCUTBK11",128,0)
 Q SCMBR_U_SCPRCP
"RTN","SCUTBK11",129,0)
 ;
"RTN","SCUTBK11",130,0)
VFILE(SCOK,SC) ;
"RTN","SCUTBK11",131,0)
 N SCFILE,SCIEN,SCFIELD,SCVAL,SCFDA,SCMSG
"RTN","SCUTBK11",132,0)
 ;
"RTN","SCUTBK11",133,0)
 D CHK^SCUTBK
"RTN","SCUTBK11",134,0)
 D TMP^SCUTBK
"RTN","SCUTBK11",135,0)
 ;
"RTN","SCUTBK11",136,0)
 S SCOK=1
"RTN","SCUTBK11",137,0)
 D PARSE(.SC)
"RTN","SCUTBK11",138,0)
 S SCFDA(SCFILE,""_SCIEN_","_"",SCFIELD)=SCVAL
"RTN","SCUTBK11",139,0)
 ;
"RTN","SCUTBK11",140,0)
 D FILE^DIE("K","SCFDA","SCMSG")
"RTN","SCUTBK11",141,0)
 ;
"RTN","SCUTBK11",142,0)
 I $D(SCMSG("DIERR")) D
"RTN","SCUTBK11",143,0)
 . S SCOK=0
"RTN","SCUTBK11",144,0)
 Q
"RTN","SCUTBK11",145,0)
 ;
"RTN","SCUTBK11",146,0)
SECKEY(SCOK,SCKEY) ;
"RTN","SCUTBK11",147,0)
 ;
"RTN","SCUTBK11",148,0)
 D CHK^SCUTBK
"RTN","SCUTBK11",149,0)
 ;
"RTN","SCUTBK11",150,0)
 S SCOK=$D(^XUSEC(SCKEY,DUZ))
"RTN","SCUTBK11",151,0)
 Q
"RTN","SCUTBK11",152,0)
 ;
"RTN","SCUTBK11",153,0)
PSALST(SCDATA,SC) ;
"RTN","SCUTBK11",154,0)
 ;
"RTN","SCUTBK11",155,0)
 ;  - Returns a array of positions that show the person currently
"RTN","SCUTBK11",156,0)
 ;    assigned to the position, the preceptor for that position,
"RTN","SCUTBK11",157,0)
 ;    for the patient is assigned to.
"RTN","SCUTBK11",158,0)
 ;
"RTN","SCUTBK11",159,0)
 ;    Pass in the Patient's DFN
"RTN","SCUTBK11",160,0)
 ;    To restrict to specific entries, pass in the following:
"RTN","SCUTBK11",161,0)
 ;      Beginning and Ending Date Range 
"RTN","SCUTBK11",162,0)
 ;      A specific Team Position
"RTN","SCUTBK11",163,0)
 ;      A Specific User entry (8930)
"RTN","SCUTBK11",164,0)
 ;      A specific Team Purpose.  (Read SCAPMC23 for how it exclude
"RTN","SCUTBK11",165,0)
 ;        a specific team purpose.
"RTN","SCUTBK11",166,0)
 ;      A specific role
"RTN","SCUTBK11",167,0)
 ;      Flag whether to include patients associated by enrollement
"RTN","SCUTBK11",168,0)
 ;    
"RTN","SCUTBK11",169,0)
 N SCDT,SCD,SCER1,SCDFN,SCPRP,SCPST,SCRLE,SCIND,SCUSR,SCTM,SCDTE,SCPTTMA
"RTN","SCUTBK11",170,0)
 ;
"RTN","SCUTBK11",171,0)
 D CHK^SCUTBK
"RTN","SCUTBK11",172,0)
 D TMP^SCUTBK
"RTN","SCUTBK11",173,0)
 ;
"RTN","SCUTBK11",174,0)
 D PARSE(.SC)
"RTN","SCUTBK11",175,0)
 S SCPTTMA=$G(SC("TEAMASSIGN")) ;NEW JLU
"RTN","SCUTBK11",176,0)
 S SCDTE=$G(SCDT("BEGIN"),DT)   ;bp/cmf 177 added DT for gui
"RTN","SCUTBK11",177,0)
 ;
"RTN","SCUTBK11",178,0)
 S CNT=0
"RTN","SCUTBK11",179,0)
 K ^TMP($J,"PSLST")
"RTN","SCUTBK11",180,0)
 S SCOK=$$TPPT^SCAPMC(SCDFN,.SCDT,"","","","","","SCD","SCER1")
"RTN","SCUTBK11",181,0)
 S I=0 F  S I=$O(SCD(I)) Q:'I  D
"RTN","SCUTBK11",182,0)
 .Q:$P(SCD(I),U,11)'=SCPTTMA
"RTN","SCUTBK11",183,0)
 .S ^TMP($J,"PSLST",I)=$P($G(SCD(I)),U,3)_U_$P($G(SCD(I)),U,4)_U_$P($G(SCD(I)),U,1,2)_U_$P($G(SCD(I)),U,7,8)
"RTN","SCUTBK11",184,0)
 ;
"RTN","SCUTBK11",185,0)
 S CNT=0
"RTN","SCUTBK11",186,0)
 S I=""
"RTN","SCUTBK11",187,0)
 F  S I=$O(^TMP($J,"PSLST",I)) Q:'I  D
"RTN","SCUTBK11",188,0)
 . S:'$D(SCDTE) SCDTE=DT
"RTN","SCUTBK11",189,0)
 . S SCPIEN=$P($G(^TMP($J,"PSLST",I)),U,3)
"RTN","SCUTBK11",190,0)
 . S SCDATA(CNT)=^TMP($J,"PSLST",I)_U_$$PSMBR(SCPIEN,SCDTE)_U_+$P($G(^SCPT(404.43,$P($G(^TMP($J,"PSLST",I)),U,2),0)),U,5)_U_+$P($G(^SCTM(404.57,SCPIEN,0)),U,4)
"RTN","SCUTBK11",191,0)
 . S CNT=CNT+1
"RTN","SCUTBK11",192,0)
 K ^TMP($J,"PSLST")
"RTN","SCUTBK11",193,0)
 ;
"RTN","SCUTBK11",194,0)
PSALSTQ Q
"RTN","SD53P297")
0^^B12438133^n/a
"RTN","SD53P297",1,0)
SD53P297 ;ALB/JDS - Pre/Post-Install;15-Nov-2001 ; 8/8/05 2:01pm
"RTN","SD53P297",2,0)
 ;;5.3;Scheduling;**297**;Aug 13, 1993
"RTN","SD53P297",3,0)
 ;
"RTN","SD53P297",4,0)
 ;
"RTN","SD53P297",5,0)
ENV ;Main entry point for Environment check point.
"RTN","SD53P297",6,0)
 ;
"RTN","SD53P297",7,0)
 S XPDABORT=""
"RTN","SD53P297",8,0)
 I XPDABORT="" K XPDABORT
"RTN","SD53P297",9,0)
 Q
"RTN","SD53P297",10,0)
 ;
"RTN","SD53P297",11,0)
 ;
"RTN","SD53P297",12,0)
PRE ;Main entry point for Pre-init items.
"RTN","SD53P297",13,0)
 ;
"RTN","SD53P297",14,0)
 N I
"RTN","SD53P297",15,0)
 F I=0:0 S I=$O(^SD(403.46,I)) Q:'I   I $P($G(^(I,0)),U,3)]"" D
"RTN","SD53P297",16,0)
 .S DIE="^SD(403.46,",DR=".03///@",DA=I D ^DIE
"RTN","SD53P297",17,0)
 F SCI=0:0 S SCI=$O(^SD(403.46,SCI)) Q:'SCI  D
"RTN","SD53P297",18,0)
 .F J=0:0 S J=$O(^SD(403.46,SCI,2,J)) Q:'J  S DIK="^SD(403.46,"_SCI_",2,",DA=J,DA(1)=SCI D ^DIK
"RTN","SD53P297",19,0)
 Q
"RTN","SD53P297",20,0)
 ;
"RTN","SD53P297",21,0)
 ;
"RTN","SD53P297",22,0)
POST ;Main entry point for Post-init items.
"RTN","SD53P297",23,0)
 ;
"RTN","SD53P297",24,0)
 D MES^XPDUTL("Updating Client/Server entries")
"RTN","SD53P297",25,0)
 N ENTRY,E608,LASTD
"RTN","SD53P297",26,0)
 K DGLEFDA
"RTN","SD53P297",27,0)
 I '$D(^SCTM(404.46,"B","1.3.0.0")) D
"RTN","SD53P297",28,0)
 .K DO S DIC(0)="LM",DIC("DR")=".02////1;.03////"_DT,DIC="^SCTM(404.46,",X="1.3.0.0" D FILE^DICN
"RTN","SD53P297",29,0)
 I '$D(^SCTM(404.45,"B","SD*5.3*297")) D
"RTN","SD53P297",30,0)
 .S ENTRY=$O(^SCTM(404.46,"B","1.3.0.0",0))
"RTN","SD53P297",31,0)
 .S DIC("DR")=".02////"_(+ENTRY)_";.03////"_DT_";.04////1",DIC(0)="LM"
"RTN","SD53P297",32,0)
 .K DO S X="SD*5.3*297",DIC="^SCTM(404.45," D FILE^DICN
"RTN","SD53P297",33,0)
 ;move 608M errors to retransmit and disappear
"RTN","SD53P297",34,0)
 D MES^XPDUTL("Setting 608M PCMM errors for correction")
"RTN","SD53P297",35,0)
 S E608=$O(^SCPT(404.472,"B","608M",0))
"RTN","SD53P297",36,0)
 F I=0:0 S I=$O(^SCPT(404.471,"ASTAT","RJ",I)) Q:'I  D
"RTN","SD53P297",37,0)
 .I $D(^SCPT(404.571,I,"ERR","B",+E608)) S DA=I,DIE="^SCPT(404.471,",DR=".04////M" D ^DIE
"RTN","SD53P297",38,0)
 D MES^XPDUTL("Moving Team Position Clinic to multiple")
"RTN","SD53P297",39,0)
 ;move associated clinics to multiple
"RTN","SD53P297",40,0)
 F I=0:0 S I=$O(^SCTM(404.57,I)) Q:'I  S ZERO=$G(^(I,0)) I $D(^SCTM(404.51,+$P(ZERO,U,2),0)) I $P(ZERO,U,9) D
"RTN","SD53P297",41,0)
 .S X=$P(ZERO,U,9) I $D(^SCTM(404.57,I,5,+X)) Q
"RTN","SD53P297",42,0)
 .I '$D(^SCTM(404.57,I,5,0)) S ^(0)="^404.575PA^^"
"RTN","SD53P297",43,0)
 .S DIC="^SCTM(404.57,"_I_",5,",DIC(0)="LM",DA(1)=I D ^DICN
"RTN","SD53P297",44,0)
 ;If before May set up as alpha site
"RTN","SD53P297",45,0)
 ;Set up provider inactivation date 6 months away
"RTN","SD53P297",46,0)
 D MES^XPDUTL("Setting up 6 month  for provider inactivations")
"RTN","SD53P297",47,0)
 S X1=DT,X2=180 D C^%DTC S X1=$E(X,1,5)_28
"RTN","SD53P297",48,0)
 F  S LASTD=X1,X2=1 D C^%DTC S X1=X Q:($E(LASTD,1,5)'=$E(X,1,5))
"RTN","SD53P297",49,0)
 I '$P($G(^SCTM(404.44,1,1)),U,9) S DIE="^SCTM(404.44,",DA=1,DR="19////"_LASTD D ^DIE
"RTN","SD53P297",50,0)
 I DT<3051215 D
"RTN","SD53P297",51,0)
 .S DIE="^SCTM(404.44,",DA=1,DR="18////3051215" D ^DIE
"RTN","SD53P297",52,0)
 ;set default auto inactivate team on
"RTN","SD53P297",53,0)
 S DIE="^SCTM(404.44,",DA=1,DR="20///YES" D ^DIE
"RTN","SD53P297",54,0)
 ;Set default notification to No
"RTN","SD53P297",55,0)
 F I=0:0 S I=$O(^SCTM(404.57,I)) Q:'I  S ZERO=$G(^(I,2)) I $P(ZERO,U,9)="" S DR="2.09////N",DIE="^SCTM(404.57,",DA=I D ^DIE
"RTN","SD53P297",56,0)
 S XPDIDTOT=+$O(^SCPT(404.43,"ADFN",""),-1) D MES^XPDUTL("Queuing Routine to Flag Inactive PCMM assignments")
"RTN","SD53P297",57,0)
 S ZTRTN="INACTIVE^SCMCTSK1",ZTIO="",ZTDTH=$H,ZTDESC="PCMM Inactive patients"  D ^%ZTLOAD
"RTN","SD53P297",58,0)
 D MES^XPDUTL("Task "_$G(ZTSK))
"RTN","SD53P297",59,0)
MEN S X="SCMC PCMM PROVIDER RPTS MENU",DIC="^DIC(19,",DIC(0)="M" D ^DIC S SD=+Y
"RTN","SD53P297",60,0)
 I SD>0 D
"RTN","SD53P297",61,0)
 .S X="SCMC MU MASS TEAM UNASSIGNMENT",DIC="^DIC(19,"_SD_",10,",DIC(0)="M",DA(1)=SD D ^DIC Q:Y'>0
"RTN","SD53P297",62,0)
 .S DA(1)=SD,DIK="^DIC(19,"_SD_",10,",DA=+Y D ^DIK
"RTN","SD53P297",63,0)
 S X="SDOUTPUT",DIC="^DIC(19,",DIC(0)="M" D ^DIC Q:Y'>0  S SD=+Y
"RTN","SD53P297",64,0)
 I '$D(^DIC(19,+Y,10,0)) Q
"RTN","SD53P297",65,0)
 S X="SCMC PCMM MAIN MENU",DIC="^DIC(19,"_SD_",10,",DIC(0)="LM",DA(1)=SD D ^DIC
"RTN","SD53P297",66,0)
 S X="SC PCMM REPORTS MENU",DIC="^DIC(19,"_SD_",10,",DIC(0)="M",DA(1)=SD D ^DIC Q:'Y
"RTN","SD53P297",67,0)
 S DA(1)=SD,DIK="^DIC(19,"_SD_",10,",DA=+Y D ^DIK
"RTN","SD53P297",68,0)
 ;
"RTN","SD53P297",69,0)
 ;
"RTN","SD53P297",70,0)
 Q
"RTN","SDPPTEM")
0^32^B45405058^B45693063
"RTN","SDPPTEM",1,0)
SDPPTEM ;BP-CIOFO/KEITH - Patient Profile Team Info ; 8/27/99 10:39am
"RTN","SDPPTEM",2,0)
 ;;5.3;Scheduling;**41,177,297**;AUG 13, 1993
"RTN","SDPPTEM",3,0)
 ;
"RTN","SDPPTEM",4,0)
 ;Gathering Team Information for Patient Profile
"RTN","SDPPTEM",5,0)
 ;
"RTN","SDPPTEM",6,0)
TDATA(DFN,VALMCNT,SDATE,SDPRT,SDCOL) ;Team information - gather, format and optionally print.
"RTN","SDPPTEM",7,0)
 ;Input: DFN=patient ifn
"RTN","SDPPTEM",8,0)
 ;Input: VALMCNT=variable to return number of lines (pass by reference)
"RTN","SDPPTEM",9,0)
 ;Input: SDATE=effective date (optional)
"RTN","SDPPTEM",10,0)
 ;Input: SDPRT=print flag, 'P' for PC info only, 'A' for all (optional)
"RTN","SDPPTEM",11,0)
 ;Input: SDCOL=column to print in conjunction with SDPRT flag (optional)
"RTN","SDPPTEM",12,0)
 ;
"RTN","SDPPTEM",13,0)
 Q:DFN'>0
"RTN","SDPPTEM",14,0)
 N SDI,SDATE,SDLIST,SDX,SDLN,SDY,SDPH,SDTEAM,SDPTA,SDII,SDIII,SDZ
"RTN","SDPPTEM",15,0)
 N SDTM,SDTMN,SDPO,SDPON,SDPR,SDPRN
"RTN","SDPPTEM",16,0)
 N PAGER,PHONE
"RTN","SDPPTEM",17,0)
 ;
"RTN","SDPPTEM",18,0)
 F SDI="SDPLIST","SDTEMP" K ^TMP(SDI,$J)
"RTN","SDPPTEM",19,0)
 S SDCOL=+$G(SDCOL),SDATE=$G(SDATE) S:SDATE<1 SDATE=DT
"RTN","SDPPTEM",20,0)
 F SDI="BEGIN","END" S SDATE(SDI)=SDATE
"RTN","SDPPTEM",21,0)
 S SDATE="SDATE",SDLIST="^TMP(""SDPLIST"",$J)",SDLN=2
"RTN","SDPPTEM",22,0)
 ;
"RTN","SDPPTEM",23,0)
 S SDI=$$GETALL^SCAPMCA(DFN,.SDATE,SDLIST)
"RTN","SDPPTEM",24,0)
 ;
"RTN","SDPPTEM",25,0)
 ;PC Team
"RTN","SDPPTEM",26,0)
 S SDI=0 F  S SDI=$O(^TMP("SDPLIST",$J,DFN,"PCTM",SDI)) Q:'SDI  D
"RTN","SDPPTEM",27,0)
 .S SDX=$G(^TMP("SDPLIST",$J,DFN,"PCTM",SDI)) Q:'$L(SDX)
"RTN","SDPPTEM",28,0)
 .S SDY=""
"RTN","SDPPTEM",29,0)
 .D S1("Primary Care Team",$P(SDX,U,2))
"RTN","SDPPTEM",30,0)
 .S SDPH=$P($G(^SCTM(404.51,+SDX,0)),U,2) D:$L(SDPH) S2("Phone",SDPH)
"RTN","SDPPTEM",31,0)
 .S:$P(SDX,U,3) SDPTA($P(SDX,U,3))=""
"RTN","SDPPTEM",32,0)
 .D STL(SDY)
"RTN","SDPPTEM",33,0)
 .Q
"RTN","SDPPTEM",34,0)
 ;
"RTN","SDPPTEM",35,0)
 ;AP
"RTN","SDPPTEM",36,0)
 S SDI=0 F  S SDI=$O(^TMP("SDPLIST",$J,DFN,"PCAP",SDI)) Q:'SDI  D
"RTN","SDPPTEM",37,0)
 .S SDX=$G(^TMP("SDPLIST",$J,DFN,"PCAP",SDI)) Q:'$L(SDX)
"RTN","SDPPTEM",38,0)
 .S SDY=""
"RTN","SDPPTEM",39,0)
 .D S1("Associate Provider",$P(SDX,U,2))
"RTN","SDPPTEM",40,0)
 .D S2("Position",$P(SDX,U,4))
"RTN","SDPPTEM",41,0)
 .D STL(SDY)
"RTN","SDPPTEM",42,0)
 .D PHONE($P(SDX,U,1))
"RTN","SDPPTEM",43,0)
 .S SDY=""
"RTN","SDPPTEM",44,0)
 .D S3("Pager",PAGER)
"RTN","SDPPTEM",45,0)
 .D S4("Phone",PHONE)
"RTN","SDPPTEM",46,0)
 .D STL(SDY)
"RTN","SDPPTEM",47,0)
 .Q
"RTN","SDPPTEM",48,0)
 ;PCP
"RTN","SDPPTEM",49,0)
 S SDI=0 F  S SDI=$O(^TMP("SDPLIST",$J,DFN,"PCPR",SDI)) Q:'SDI  D
"RTN","SDPPTEM",50,0)
 .S SDX=$G(^TMP("SDPLIST",$J,DFN,"PCPR",SDI)) Q:'$L(SDX)
"RTN","SDPPTEM",51,0)
 .S SDY=""
"RTN","SDPPTEM",52,0)
 .D S1("PC Provider",$P(SDX,U,2))
"RTN","SDPPTEM",53,0)
 .D S2("Position",$P(SDX,U,4))
"RTN","SDPPTEM",54,0)
 .D STL(SDY)
"RTN","SDPPTEM",55,0)
 .D PHONE($P(SDX,U,1))
"RTN","SDPPTEM",56,0)
 .S SDY=""
"RTN","SDPPTEM",57,0)
 .D S3("Pager",PAGER)
"RTN","SDPPTEM",58,0)
 .D S4("Phone",PHONE)
"RTN","SDPPTEM",59,0)
 .D STL(SDY)
"RTN","SDPPTEM",60,0)
 .Q
"RTN","SDPPTEM",61,0)
 ;
"RTN","SDPPTEM",62,0)
 I $G(SDPRT)="P" D PRT G TDQ
"RTN","SDPPTEM",63,0)
 S SDII=0
"RTN","SDPPTEM",64,0)
 F  S SDII=$O(^TMP("SDPLIST",$J,DFN,"NPCPOS",SDII)) Q:'SDII  D
"RTN","SDPPTEM",65,0)
 .S SDX=^TMP("SDPLIST",$J,DFN,"NPCPOS",SDII)
"RTN","SDPPTEM",66,0)
 .Q:'$D(SDPTA(+$P(SDX,U,11)))  S SDIII=0
"RTN","SDPPTEM",67,0)
 .F  S SDIII=$O(^TMP("SDPLIST",$J,DFN,"NPCPR",SDIII)) Q:'SDIII  D
"RTN","SDPPTEM",68,0)
 ..S SDZ=^TMP("SDPLIST",$J,DFN,"NPCPR",SDIII)
"RTN","SDPPTEM",69,0)
 ..Q:$P(SDZ,U,3)'=+SDX  S SDY=""
"RTN","SDPPTEM",70,0)
 ..D S1("Non-PC Provider",$P(SDZ,U,2)),S2("Position",$P(SDZ,U,4))
"RTN","SDPPTEM",71,0)
 ..D STL(SDY) Q
"RTN","SDPPTEM",72,0)
 .Q
"RTN","SDPPTEM",73,0)
 S SDI=0
"RTN","SDPPTEM",74,0)
 F  S SDI=$O(^TMP("SDPLIST",$J,DFN,"NPCTM",SDI)) Q:'SDI  D
"RTN","SDPPTEM",75,0)
 .S SDX=^TMP("SDPLIST",$J,DFN,"NPCTM",SDI)
"RTN","SDPPTEM",76,0)
 .S SDTEAM($P(SDX,U,2),+SDX)="",SDPTA=$P(SDX,U,3) Q:'SDPTA  D
"RTN","SDPPTEM",77,0)
 ..S SDII=0
"RTN","SDPPTEM",78,0)
 ..F  S SDII=$O(^TMP("SDPLIST",$J,DFN,"NPCPOS",SDII)) Q:'SDII  D
"RTN","SDPPTEM",79,0)
 ...S SDY=^TMP("SDPLIST",$J,DFN,"NPCPOS",SDII)
"RTN","SDPPTEM",80,0)
 ...Q:$P(SDY,U,11)'=SDPTA
"RTN","SDPPTEM",81,0)
 ...S SDTEAM($P(SDX,U,2),+SDX,$P(SDY,U,2),+SDY)="",SDIII=0
"RTN","SDPPTEM",82,0)
 ...F  S SDIII=$O(^TMP("SDPLIST",$J,DFN,"NPCPR",SDIII)) Q:'SDIII  D
"RTN","SDPPTEM",83,0)
 ....S SDZ=^TMP("SDPLIST",$J,DFN,"NPCPR",SDIII)
"RTN","SDPPTEM",84,0)
 ....Q:$P(SDZ,U,3)'=+SDY
"RTN","SDPPTEM",85,0)
 ....S SDTEAM($P(SDX,U,2),+SDX,$P(SDY,U,2),+SDY,$P(SDZ,U,2),+SDZ)=""
"RTN","SDPPTEM",86,0)
 ....Q
"RTN","SDPPTEM",87,0)
 ...Q
"RTN","SDPPTEM",88,0)
 ..Q
"RTN","SDPPTEM",89,0)
 .Q
"RTN","SDPPTEM",90,0)
 S SDTM="" F  S SDTM=$O(SDTEAM(SDTM)) Q:SDTM=""  D
"RTN","SDPPTEM",91,0)
 .S SDTMN=0 F  S SDTMN=$O(SDTEAM(SDTM,SDTMN)) Q:'SDTMN  D
"RTN","SDPPTEM",92,0)
 ..I SDLN>0 D STL("")
"RTN","SDPPTEM",93,0)
 ..S SDY="" D S1("Non-PC Team",SDTM)
"RTN","SDPPTEM",94,0)
 ..S SDPH=$P($G(^SCTM(404.51,+SDTMN,0)),U,2) D:$L(SDPH) S2("Phone",SDPH)
"RTN","SDPPTEM",95,0)
 ..D STL(SDY) S SDPO=""
"RTN","SDPPTEM",96,0)
 ..F  S SDPO=$O(SDTEAM(SDTM,SDTMN,SDPO)) Q:SDPO=""  S SDPON=0 D
"RTN","SDPPTEM",97,0)
 ...F  S SDPON=$O(SDTEAM(SDTM,SDTMN,SDPO,SDPON)) Q:'SDPON  D
"RTN","SDPPTEM",98,0)
 ....I $O(SDTEAM(SDTM,SDTMN,SDPO,SDPON,""))="" S SDY="" D S1("Non-PC Provider",""),S2("Position",SDPO),STL(SDY) Q
"RTN","SDPPTEM",99,0)
 ....S SDPR=""
"RTN","SDPPTEM",100,0)
 ....F  S SDPR=$O(SDTEAM(SDTM,SDTMN,SDPO,SDPON,SDPR)) Q:SDPR=""  D
"RTN","SDPPTEM",101,0)
 .....S SDPRN=0
"RTN","SDPPTEM",102,0)
 .....F  S SDPRN=$O(SDTEAM(SDTM,SDTMN,SDPO,SDPON,SDPR,SDPRN)) Q:'SDPRN  D
"RTN","SDPPTEM",103,0)
 ......S SDY=""
"RTN","SDPPTEM",104,0)
 ......D S1("Non-PC Provider",SDPR)
"RTN","SDPPTEM",105,0)
 ......D S2("Position",SDPO)
"RTN","SDPPTEM",106,0)
 ......D STL(SDY)
"RTN","SDPPTEM",107,0)
 ......D PHONE(SDPRN)
"RTN","SDPPTEM",108,0)
 ......S SDY=""
"RTN","SDPPTEM",109,0)
 ......D S3("Pager",PAGER)
"RTN","SDPPTEM",110,0)
 ......D S4("Phone",PHONE)
"RTN","SDPPTEM",111,0)
 ......D STL(SDY)
"RTN","SDPPTEM",112,0)
 ......Q
"RTN","SDPPTEM",113,0)
 .....Q
"RTN","SDPPTEM",114,0)
 ....Q
"RTN","SDPPTEM",115,0)
 ...Q
"RTN","SDPPTEM",116,0)
 ..Q
"RTN","SDPPTEM",117,0)
 .Q
"RTN","SDPPTEM",118,0)
 ;
"RTN","SDPPTEM",119,0)
 I $G(SDPRT)="A" D PRT G TDQ
"RTN","SDPPTEM",120,0)
 S SDY="",$E(SDY,29)="*** Team Information ***"
"RTN","SDPPTEM",121,0)
 S ^TMP("SDTEMP",$J,1)=SDY,^TMP("SDTEMP",$J,2)=""
"RTN","SDPPTEM",122,0)
 I SDLN=2 S SDY="",$E(SDY,20)="-- No team assignment information found --",^TMP("SDTEMP",$J,3)=SDY
"RTN","SDPPTEM",123,0)
 S GBL=$G(GBL,"") I $L(GBL)<1 S GBL=$S('$D(VALMAR):"^TMP(""SDPP"",$J)",$L(VALMAR)>1:VALMAR,1:"^TMP(""SDPP"",$J)")
"RTN","SDPPTEM",124,0)
 ;add line at bottom of array for readability
"RTN","SDPPTEM",125,0)
 S SDI=$O(^TMP("SDTEMP",$J,""),-1)+1,^TMP("SDTEMP",$J,SDI)=""
"RTN","SDPPTEM",126,0)
 ;respect the array count passed in to the function
"RTN","SDPPTEM",127,0)
 S (SDII,VALMCNT)=$O(@GBL@(""),-1)+1
"RTN","SDPPTEM",128,0)
 S SDI=0
"RTN","SDPPTEM",129,0)
 F  S SDI=$O(^TMP("SDTEMP",$J,SDI)) Q:'SDI  D
"RTN","SDPPTEM",130,0)
 .S SDX=^TMP("SDTEMP",$J,SDI),SDII=SDII+1
"RTN","SDPPTEM",131,0)
 .S @GBL@(SDII,0)=SDX,VALMCNT=$G(VALMCNT)+1
"RTN","SDPPTEM",132,0)
 .I SDLN<7,SDI>3 S SDII=SDII+1,@GBL@(SDII,0)="",VALMCNT=$G(VALMCNT)+1
"RTN","SDPPTEM",133,0)
 .Q
"RTN","SDPPTEM",134,0)
TDQ F SDI="SDPLIST","SDTEMP" K ^TMP(SDI,$J,DFN)
"RTN","SDPPTEM",135,0)
 Q
"RTN","SDPPTEM",136,0)
 ;
"RTN","SDPPTEM",137,0)
S1(SDT,SDX) ;Set first piece of string
"RTN","SDPPTEM",138,0)
 ;Input: SDT=subtitle
"RTN","SDPPTEM",139,0)
 ;Input: SDX=data value
"RTN","SDPPTEM",140,0)
 S SDY=$J(SDT,18)_": "_$E(SDX,1,28) Q
"RTN","SDPPTEM",141,0)
 ;
"RTN","SDPPTEM",142,0)
S2(SDT,SDX) ;Set second piece of string
"RTN","SDPPTEM",143,0)
 ;Input: SDT=subtitle
"RTN","SDPPTEM",144,0)
 ;Input: SDX=data value
"RTN","SDPPTEM",145,0)
 I $L($G(SDPRT)),SDCOL>0 Q
"RTN","SDPPTEM",146,0)
 S $E(SDY,53)=$J(SDT,8)_": "_$E(SDX,1,18) Q
"RTN","SDPPTEM",147,0)
 ;
"RTN","SDPPTEM",148,0)
S3(SDT,SDX) ;Set first piece of string that displays phone numbers
"RTN","SDPPTEM",149,0)
 ;Input: SDT=subtitle
"RTN","SDPPTEM",150,0)
 ;Input: SDX=data value
"RTN","SDPPTEM",151,0)
 S SDY=$J(SDT,30)_": "_$E(SDX,1,20)
"RTN","SDPPTEM",152,0)
 Q
"RTN","SDPPTEM",153,0)
 ;
"RTN","SDPPTEM",154,0)
S4(SDT,SDX) ;Set second piece of string that displays phone numbers
"RTN","SDPPTEM",155,0)
 ;Input: SDT=subtitle
"RTN","SDPPTEM",156,0)
 ;Input: SDX=data value
"RTN","SDPPTEM",157,0)
 I $L($G(SDPRT)),SDCOL>0 Q
"RTN","SDPPTEM",158,0)
 S $E(SDY,56)=$J(SDT,4)_": "_$E(SDX,1,20)
"RTN","SDPPTEM",159,0)
 Q
"RTN","SDPPTEM",160,0)
 ;
"RTN","SDPPTEM",161,0)
PHONE(IEN) ;Get provider's pager and phone numbers.
"RTN","SDPPTEM",162,0)
 ;Return: PAGER = Pager number
"RTN","SDPPTEM",163,0)
 ;        PHONE = Phone number
"RTN","SDPPTEM",164,0)
 NEW LIST
"RTN","SDPPTEM",165,0)
 S (PAGER,PHONE)=""
"RTN","SDPPTEM",166,0)
 Q:'$G(IEN)
"RTN","SDPPTEM",167,0)
 Q:'$$NEWPERSN^SCMCGU(IEN,"LIST")
"RTN","SDPPTEM",168,0)
 S PAGER=$P(LIST(IEN),U,5)
"RTN","SDPPTEM",169,0)
 S PHONE=$P(LIST(IEN),U,2)
"RTN","SDPPTEM",170,0)
 Q
"RTN","SDPPTEM",171,0)
 ;
"RTN","SDPPTEM",172,0)
STL(SDY) ;Set text line
"RTN","SDPPTEM",173,0)
 ;Input: SDY=string
"RTN","SDPPTEM",174,0)
 S SDLN=SDLN+1
"RTN","SDPPTEM",175,0)
 S ^TMP("SDTEMP",$J,SDLN)=SDY
"RTN","SDPPTEM",176,0)
 Q
"RTN","SDPPTEM",177,0)
 ;
"RTN","SDPPTEM",178,0)
PRT ;Write assignment information
"RTN","SDPPTEM",179,0)
 N SDI S SDI=0
"RTN","SDPPTEM",180,0)
 F  S SDI=$O(^TMP("SDTEMP",$J,SDI)) Q:'SDI  D
"RTN","SDPPTEM",181,0)
 .W !?(SDCOL),^TMP("SDTEMP",$J,SDI) Q
"RTN","SDPPTEM",182,0)
 Q
"RTN","SDPPTEM",183,0)
 ;
"RTN","SDPPTEM",184,0)
PCLINE(DFN,SDATE) ;PC provider, associate and team in a single line
"RTN","SDPPTEM",185,0)
 ;Input: DFN=patient ifn
"RTN","SDPPTEM",186,0)
 ;Input: SDATE=effective date (optional)
"RTN","SDPPTEM",187,0)
 ;Output: PC provider, associate and team formatted as 80 character
"RTN","SDPPTEM",188,0)
 ;        line, or "" if none
"RTN","SDPPTEM",189,0)
 ;
"RTN","SDPPTEM",190,0)
 N SDLIST,SDI,SDX,SDY,SDZ,SDL,SDC,SDTL
"RTN","SDPPTEM",191,0)
 Q:'DFN ""  S:$G(SDATE)<1 SDATE=DT S SDLIST="^TMP(""SDPLIST"",$J)"
"RTN","SDPPTEM",192,0)
 F SDI="BEGIN","END" S SDATE(SDI)=SDATE
"RTN","SDPPTEM",193,0)
 S SDATE="SDATE"
"RTN","SDPPTEM",194,0)
 S SDI=$$GETALL^SCAPMCA(DFN,.SDATE,SDLIST)
"RTN","SDPPTEM",195,0)
 S SDY="PC Prov: ^Assoc. Prov: ^Team: ",SDL=48,SDC=3,SDTL=0
"RTN","SDPPTEM",196,0)
 S SDX(1)=$$PCL("PCPR")
"RTN","SDPPTEM",197,0)
 S SDX(2)=$$PCL("PCAP")
"RTN","SDPPTEM",198,0)
 S SDX(3)=$$PCL("PCTM")
"RTN","SDPPTEM",199,0)
 K ^TMP("SDPLIST",$J,DFN)
"RTN","SDPPTEM",200,0)
 F SDI=1,2,3 S SDZ($L(SDX(SDI)),SDI)=""
"RTN","SDPPTEM",201,0)
 S SDI="" F  S SDI=$O(SDZ(SDI)) Q:SDI=""  D
"RTN","SDPPTEM",202,0)
 .S SDII=0 F  S SDII=$O(SDZ(SDI,SDII)) Q:'SDII  D
"RTN","SDPPTEM",203,0)
 ..I 'SDI S SDC=SDC-1 Q
"RTN","SDPPTEM",204,0)
 ..I SDI<(SDL\SDC) S SDX(SDII)=$P(SDY,U,SDII)_SDX(SDII),SDL=SDL-SDI,SDC=SDC-1 Q
"RTN","SDPPTEM",205,0)
 ..S SDX(SDII)=$P(SDY,U,SDII)_$E(SDX(SDII),1,(SDL\SDC))
"RTN","SDPPTEM",206,0)
 ..Q
"RTN","SDPPTEM",207,0)
 .Q
"RTN","SDPPTEM",208,0)
 F SDI=1,2,3 S SDTL=SDTL+$L(SDX(SDI))
"RTN","SDPPTEM",209,0)
 Q:SDTL=0 ""
"RTN","SDPPTEM",210,0)
 S SDX=SDX(1),$E(SDX,($L(SDX)+1+(80-SDTL\2)))=SDX(2),$E(SDX,81-$L(SDX(3)))=SDX(3)
"RTN","SDPPTEM",211,0)
 Q SDX
"RTN","SDPPTEM",212,0)
 ;
"RTN","SDPPTEM",213,0)
PCL(SDSUB) ;Get name value
"RTN","SDPPTEM",214,0)
 ;Input: SDSUB=node from GETALL^SCAPMCA
"RTN","SDPPTEM",215,0)
 N SDN
"RTN","SDPPTEM",216,0)
 S SDN=+$G(^TMP("SDPLIST",$J,DFN,"PCPOS",0))
"RTN","SDPPTEM",217,0)
 Q:SDN=0 ""
"RTN","SDPPTEM",218,0)
 Q:SDN>1 "[ambiguous data]"
"RTN","SDPPTEM",219,0)
 S SDN=+$G(^TMP("SDPLIST",$J,DFN,SDSUB,0))
"RTN","SDPPTEM",220,0)
 Q:SDN=0 ""
"RTN","SDPPTEM",221,0)
 Q:SDN>1 "[ambiguous data]"
"RTN","SDPPTEM",222,0)
 Q $P($G(^TMP("SDPLIST",$J,DFN,SDSUB,1)),U,2)
"SEC","^DIC",404.57,404.57,0,"DD")
@
"SEC","^DIC",404.57,404.57,0,"DEL")
@
"SEC","^DIC",404.57,404.57,0,"LAYGO")
@
"SEC","^DIC",404.57,404.57,0,"RD")
d
"SEC","^DIC",404.57,404.57,0,"WR")
@
"VER")
8.0^22.0
"^DD",403.46,403.46,0)
FIELD^^2^5
"^DD",403.46,403.46,0,"DDA")
N
"^DD",403.46,403.46,0,"DT")
3031210
"^DD",403.46,403.46,0,"IX","B",403.46,.01)

"^DD",403.46,403.46,0,"IX","USR",403.46,.02)

"^DD",403.46,403.46,0,"NM","STANDARD POSITION")

"^DD",403.46,403.46,0,"PT",404.57,.03)

"^DD",403.46,403.46,0,"PT",404.95,40)

"^DD",403.46,403.46,0,"PT",404.9503,.01)

"^DD",403.46,403.46,0,"VRPK")
SD
"^DD",403.46,403.46,.01,0)
STANDARD POSITION^RF^^0;1^K:$L(X)>50!($L(X)<3)!'(X'?1P.E) X
"^DD",403.46,403.46,.01,1,0)
^.1
"^DD",403.46,403.46,.01,1,1,0)
403.46^B
"^DD",403.46,403.46,.01,1,1,1)
S ^SD(403.46,"B",$E(X,1,30),DA)=""
"^DD",403.46,403.46,.01,1,1,2)
K ^SD(403.46,"B",$E(X,1,30),DA)
"^DD",403.46,403.46,.01,3)
Choose standard position from list defined by VA Central Office.
"^DD",403.46,403.46,.01,21,0)
^.001^3^3^3040406^^^
"^DD",403.46,403.46,.01,21,1,0)
Standard role the provider performs as part of this team.
"^DD",403.46,403.46,.01,21,2,0)
 
"^DD",403.46,403.46,.01,21,3,0)
These standard positions are defined by Central Office.
"^DD",403.46,403.46,.01,"DT")
2950224
"^DD",403.46,403.46,.02,0)
USER CLASSIFICATION^P8930'^USR(8930,^0;2^Q
"^DD",403.46,403.46,.02,1,0)
^.1
"^DD",403.46,403.46,.02,1,1,0)
403.46^USR
"^DD",403.46,403.46,.02,1,1,1)
S ^SD(403.46,"USR",$E(X,1,30),DA)=""
"^DD",403.46,403.46,.02,1,1,2)
K ^SD(403.46,"USR",$E(X,1,30),DA)
"^DD",403.46,403.46,.02,1,1,"DT")
2950228
"^DD",403.46,403.46,.02,3)
The class of users defined in the USR CLASS File (#8930) that are permited to fill this position.
"^DD",403.46,403.46,.02,21,0)
^^1^1^2950728^^^
"^DD",403.46,403.46,.02,21,1,0)
Name of the user class that may fill this standard position.
"^DD",403.46,403.46,.02,"DT")
2950728
"^DD",403.46,403.46,.03,0)
ALLOWED TO BE PRIMARY CARE^S^1:YES;0:NO;2:CAN BE PRIMARY AS PRECEPTED;3:NP CAN BE PRIMARY;^0;3^Q
"^DD",403.46,403.46,.03,21,0)
^^4^4^3060712^
"^DD",403.46,403.46,.03,21,1,0)
Can this position provide Primary Care to the patient
"^DD",403.46,403.46,.03,21,2,0)
This field is used to determine inconsistencies between the Team Position
"^DD",403.46,403.46,.03,21,3,0)
Role and the ability of that role to act a Primary Care Provider.
"^DD",403.46,403.46,.03,21,4,0)
This fields value is distributed by patch SD*5.3*297 and should not be changed.
"^DD",403.46,403.46,.03,"DT")
3031210
"^DD",403.46,403.46,1,0)
DESCRIPTION^403.46001^^1;0
"^DD",403.46,403.46,2,0)
PERSON CLASS^403.462PA^^2;0
"^DD",403.46,403.46,2,21,0)
^^4^4^3040406^
"^DD",403.46,403.46,2,21,1,0)
This multiple defines which Person Class(es) are allowed in this position.
"^DD",403.46,403.46,2,21,2,0)
If none is indicated all Person Classes are permitted.
"^DD",403.46,403.46,2,21,3,0)
This field is used to insure consistency between Practitioner and Team Position
"^DD",403.46,403.46,2,21,4,0)
Standard Role. This field is populated with patch SD*5.3*297 and should not be edited.
"^DD",403.46,403.46001,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",403.46,403.46001,0,"DT")
2950222
"^DD",403.46,403.46001,0,"NM","DESCRIPTION")

"^DD",403.46,403.46001,0,"UP")
403.46
"^DD",403.46,403.46001,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",403.46,403.46001,.01,3)
This is the long description of the standard position
"^DD",403.46,403.46001,.01,21,0)
^^1^1^2950222^
"^DD",403.46,403.46001,.01,21,1,0)
This is a more complete description of the standard position.
"^DD",403.46,403.46001,.01,"DT")
2950222
"^DD",403.46,403.462,0)
PERSON CLASS SUB-FIELD^^.01^1
"^DD",403.46,403.462,0,"DT")
3020821
"^DD",403.46,403.462,0,"IX","B",403.462,.01)

"^DD",403.46,403.462,0,"NM","PERSON CLASS")

"^DD",403.46,403.462,0,"UP")
403.46
"^DD",403.46,403.462,.01,0)
PERSON CLASS^MP8932.1'X^USC(8932.1,^0;1^S DINUM=X
"^DD",403.46,403.462,.01,1,0)
^.1
"^DD",403.46,403.462,.01,1,1,0)
403.462^B
"^DD",403.46,403.462,.01,1,1,1)
S ^SD(403.46,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",403.46,403.462,.01,1,1,2)
K ^SD(403.46,DA(1),2,"B",$E(X,1,30),DA)
"^DD",403.46,403.462,.01,3)
Enter only if this role restricts by person class
"^DD",403.46,403.462,.01,21,0)
^.001^1^1^3021025^^
"^DD",403.46,403.462,.01,21,1,0)
Screen of Providers that can be assigned to a position. If no entries all providers are allowed
"^DD",403.46,403.462,.01,"DT")
3020821
"^DD",404.43,404.43,0)
FIELD^^.17^16
"^DD",404.43,404.43,0,"DT")
3040526
"^DD",404.43,404.43,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^SCTM(404.57,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(404.57,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",404.43,404.43,0,"IX","ACTDFN1",404.43,.01)

"^DD",404.43,404.43,0,"IX","ACTDFN2",404.43,.03)

"^DD",404.43,404.43,0,"IX","ACTDFN3",404.43,.04)

"^DD",404.43,404.43,0,"IX","ACTPC1",404.43,.01)

"^DD",404.43,404.43,0,"IX","ACTPC2",404.43,.03)

"^DD",404.43,404.43,0,"IX","ACTPC3",404.43,.05)

"^DD",404.43,404.43,0,"IX","ACTPC4",404.43,.04)

"^DD",404.43,404.43,0,"IX","ADFN",404.43,.01)

"^DD",404.43,404.43,0,"IX","ADFN1",404.43,.02)

"^DD",404.43,404.43,0,"IX","ADFN2",404.43,.03)

"^DD",404.43,404.43,0,"IX","AEVENT1",404.43,.01)

"^DD",404.43,404.43,0,"IX","AEVENT2",404.43,.05)

"^DD",404.43,404.43,0,"IX","AEVENT3",404.43,.02)

"^DD",404.43,404.43,0,"IX","AEVENT4",404.43,.03)

"^DD",404.43,404.43,0,"IX","AEVENT5",404.43,.04)

"^DD",404.43,404.43,0,"IX","AEXT",404.43,.13)

"^DD",404.43,404.43,0,"IX","AFLG",404.43,.15)

"^DD",404.43,404.43,0,"IX","APCPOS",404.43,.01)

"^DD",404.43,404.43,0,"IX","APCPOS1",404.43,.05)

"^DD",404.43,404.43,0,"IX","APCPOS2",404.43,.03)

"^DD",404.43,404.43,0,"IX","APCPOS3",404.43,.02)

"^DD",404.43,404.43,0,"IX","APRIMARY",404.43,.01)

"^DD",404.43,404.43,0,"IX","APRIMARY1",404.43,.02)

"^DD",404.43,404.43,0,"IX","APRIMARY2",404.43,.03)

"^DD",404.43,404.43,0,"IX","APTPA",404.43,.02)

"^DD",404.43,404.43,0,"IX","APTPA1",404.43,.01)

"^DD",404.43,404.43,0,"IX","ASTATB",404.43,.12)

"^DD",404.43,404.43,0,"IX","ATEST",404.43,.12)

"^DD",404.43,404.43,0,"IX","B",404.43,.01)

"^DD",404.43,404.43,0,"NM","PATIENT TEAM POSITION ASSIGNMENT")

"^DD",404.43,404.43,0,"PT",404.471,.07)

"^DD",404.43,404.43,0,"PT",404.48,.07)

"^DD",404.43,404.43,0,"VRPK")
SD
"^DD",404.43,404.43,.01,0)
PATIENT TEAM ASSIGNMENT^RP404.42'^SCPT(404.42,^0;1^Q
"^DD",404.43,404.43,.01,1,0)
^.1
"^DD",404.43,404.43,.01,1,1,0)
404.43^B
"^DD",404.43,404.43,.01,1,1,1)
S ^SCPT(404.43,"B",$E(X,1,30),DA)=""
"^DD",404.43,404.43,.01,1,1,2)
K ^SCPT(404.43,"B",$E(X,1,30),DA)
"^DD",404.43,404.43,.01,1,2,0)
404.43^APRIMARY^MUMPS
"^DD",404.43,404.43,.01,1,2,1)
N SC2,SC3 S SC2=$P($G(^SCPT(404.43,DA,0)),U,2) I SC2 S SC3=$P($G(^(0)),U,3) I SC3]"" S ^SCPT(404.43,"APRIMARY",X,SC2,-SC3,DA)=""
"^DD",404.43,404.43,.01,1,2,2)
N SC2,SC3 S SC2=$P($G(^SCPT(404.43,DA,0)),U,2) I SC2 S SC3=$P($G(^(0)),U,3) I SC3]"" K ^SCPT(404.43,"APRIMARY",X,SC2,-SC3,DA)
"^DD",404.43,404.43,.01,1,2,"%D",0)
^^1^1^2950908^
"^DD",404.43,404.43,.01,1,2,"%D",1,0)
This sorts by PATIENT TEAM ASSIGNMENT(#.01), then by TEAM POSITION(#.02), then by -POSITION ASSIGNED DATE(#.03).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.01,1,2,"DT")
2950908
"^DD",404.43,404.43,.01,1,3,0)
404.43^APTPA1^MUMPS
"^DD",404.43,404.43,.01,1,3,1)
N SC1 S SC1=$P($G(^SCPT(404.43,DA,0)),U,2) I SC1 S ^SCPT(404.43,"APTPA",SC1,X,DA)=""
"^DD",404.43,404.43,.01,1,3,2)
N SC1 S SC1=$P($G(^SCPT(404.43,DA,0)),U,2) I SC1 K ^SCPT(404.43,"APTPA",SC1,X,DA)
"^DD",404.43,404.43,.01,1,3,"%D",0)
^^1^1^2951023^
"^DD",404.43,404.43,.01,1,3,"%D",1,0)
This sorts by TEAM POSITION(#.02), then by PATIENT TEAM ASSIGNMENT(#.01).  There is an associated cross reference for the TEAM POSITION Field (#.02).
"^DD",404.43,404.43,.01,1,3,"DT")
2951023
"^DD",404.43,404.43,.01,1,4,0)
404.43^ADFN^MUMPS
"^DD",404.43,404.43,.01,1,4,1)
N SCDFN,SC2,SC3 S SC2=$P($G(^SCPT(404.43,DA,0)),U,2) I SC2 S SC3=$P($G(^(0)),U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,X,0)),U,1) I SCDFN S ^SCPT(404.43,"ADFN",SCDFN,SC2,SC3,DA)=""
"^DD",404.43,404.43,.01,1,4,2)
N SCDFN,SC2,SC3 S SC2=$P($G(^SCPT(404.43,DA,0)),U,2) I SC2 S SC3=$P($G(^(0)),U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,X,0)),U,1) I SCDFN K ^SCPT(404.43,"ADFN",SCDFN,SC2,SC3,DA)
"^DD",404.43,404.43,.01,1,4,"%D",0)
^^1^1^2960319^^^^
"^DD",404.43,404.43,.01,1,4,"%D",1,0)
This sorts by PATIENT File ien (DFN), then by TEAM POSITION(#.02), then by POSITION ASSIGNED DATE(#.03).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.01,1,4,"DT")
2960319
"^DD",404.43,404.43,.01,1,5,0)
404.43^APCPOS^MUMPS
"^DD",404.43,404.43,.01,1,5,1)
N SC2,SC3,SC4 S SC2=$P($G(^SCPT(404.43,DA,0)),U,5) I SC2]"" S SC3=$P($G(^(0)),U,3) I SC3]"" S SC4=$P($G(^(0)),U,2) I SC4 D SETPC^SCMCDD1(X,SC2,SC3,SC4,DA)
"^DD",404.43,404.43,.01,1,5,2)
N SC2,SC3,SC4 S SC2=$P($G(^SCPT(404.43,DA,0)),U,5) I SC2]"" S SC3=$P($G(^(0)),U,3) I SC3]"" S SC4=$P($G(^(0)),U,2) I SC4 D KILLPC^SCMCDD1(X,SC2,SC3,SC4,DA)
"^DD",404.43,404.43,.01,1,5,"%D",0)
^^1^1^2960214^^^^
"^DD",404.43,404.43,.01,1,5,"%D",1,0)
This sorts by PATIENT (via Patient Team Assignement), then by PC ROLE(#.05), then by -POSITION ASSIGNED DATE(#.03), then by TEAM POSITION(#.02).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.01,1,5,"DT")
2960214
"^DD",404.43,404.43,.01,1,6,0)
404.43^AEVENT1^MUMPS
"^DD",404.43,404.43,.01,1,6,1)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.01,1,6,2)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.01,1,6,"%D",0)
^^1^1^2990507^
"^DD",404.43,404.43,.01,1,6,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.43,404.43,.01,1,6,"DT")
2990507
"^DD",404.43,404.43,.01,1,7,0)
404.43^ACTDFN1^MUMPS
"^DD",404.43,404.43,.01,1,7,1)
N ND,SCDFN,SC3,SC4 S ND=$G(^SCPT(404.43,DA,0)),SC3=$P(ND,U,3) I SC3]"" S SC4=$P(ND,U,4) I SC4']"" S SCDFN=$P($G(^SCPT(404.42,X,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTDFN",SCDFN,DA)=""
"^DD",404.43,404.43,.01,1,7,2)
N ND,SCDFN,SC3,SC4 S ND=$G(^SCPT(404.43,DA,0)),SC3=$P(ND,U,3) I SC3]"" S SC4=$P(ND,U,4) I SC4']"" S SCDFN=$P($G(^SCPT(404.42,X,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTDFN",SCDFN,DA)
"^DD",404.43,404.43,.01,1,7,"%D",0)
^^2^2^2990726^^
"^DD",404.43,404.43,.01,1,7,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN).
"^DD",404.43,404.43,.01,1,7,"%D",2,0)
There are associated xrefs for fields .03 and .04.
"^DD",404.43,404.43,.01,1,7,"DT")
2990723
"^DD",404.43,404.43,.01,1,8,0)
404.43^ACTPC1^MUMPS
"^DD",404.43,404.43,.01,1,8,1)
N ND,SCDFN,SC3,SC4,SC5 S ND=$G(^SCPT(404.43,DA,0)),SC3=$P(ND,U,3) I SC3]"" S SC4=$P(ND,U,4) I SC4']"" S SC5=$P(ND,U,5) I SC5 S SCDFN=$P($G(^SCPT(404.42,X,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTPC",SCDFN,SC5,DA)=""
"^DD",404.43,404.43,.01,1,8,2)
N ND,SCDFN,SC3,SC4,SC5 S ND=$G(^SCPT(404.43,DA,0)),SC3=$P(ND,U,3) I SC3]"" S SC4=$P(ND,U,4) I SC4']"" S SC5=$P(ND,U,5) I SC5 S SCDFN=$P($G(^SCPT(404.42,X,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTPC",SCDFN,SC5,DA)
"^DD",404.43,404.43,.01,1,8,"%D",0)
^^3^3^2990723^
"^DD",404.43,404.43,.01,1,8,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN),
"^DD",404.43,404.43,.01,1,8,"%D",2,0)
then by PC ROLE(#.05). There are associated xrefs for fields
"^DD",404.43,404.43,.01,1,8,"%D",3,0)
.03, .04 and .05.
"^DD",404.43,404.43,.01,1,8,"DT")
2990723
"^DD",404.43,404.43,.01,3)
This is an entry in the team position assignment file.
"^DD",404.43,404.43,.01,21,0)
^^1^1^2950508^^
"^DD",404.43,404.43,.01,21,1,0)
This is an entry in the team position assignment file.
"^DD",404.43,404.43,.01,"DT")
3021007
"^DD",404.43,404.43,.02,0)
TEAM POSITION^RP404.57'X^SCTM(404.57,^0;2^S DIC("S")="I $$OKTP^SCMCTPU(DA,Y)"
"^DD",404.43,404.43,.02,1,0)
^.1
"^DD",404.43,404.43,.02,1,1,0)
404.43^APRIMARY1^MUMPS
"^DD",404.43,404.43,.02,1,1,1)
N SC1,SC3 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,3) I SC3]"" S ^SCPT(404.43,"APRIMARY",SC1,X,-SC3,DA)=""
"^DD",404.43,404.43,.02,1,1,2)
N SC1,SC3 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,3) I SC3]"" K ^SCPT(404.43,"APRIMARY",SC1,X,-SC3,DA)
"^DD",404.43,404.43,.02,1,1,"%D",0)
^^1^1^2950908^
"^DD",404.43,404.43,.02,1,1,"%D",1,0)
This sorts by PATIENT TEAM ASSIGNMENT(#.01), then by TEAM POSITION(#.02), then by -POSITION ASSIGNED DATE(#.03).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.02,1,1,"DT")
2950908
"^DD",404.43,404.43,.02,1,2,0)
404.43^APTPA^MUMPS
"^DD",404.43,404.43,.02,1,2,1)
N SC2 S SC2=$P($G(^SCPT(404.43,DA,0)),U,1) I SC2 S ^SCPT(404.43,"APTPA",X,SC2,DA)=""
"^DD",404.43,404.43,.02,1,2,2)
N SC2 S SC2=$P($G(^SCPT(404.43,DA,0)),U,1) I SC2 K ^SCPT(404.43,"APTPA",X,SC2,DA)
"^DD",404.43,404.43,.02,1,2,"%D",0)
^^1^1^2951023^
"^DD",404.43,404.43,.02,1,2,"%D",1,0)
This sorts by TEAM POSITION(#.02), then by PATIENT TEAM ASSIGNMENT(#.01).  There is an associated cross reference for the PATIENT TEAM ASSIGNMENT Field (#.01).
"^DD",404.43,404.43,.02,1,2,"DT")
2951023
"^DD",404.43,404.43,.02,1,3,0)
404.43^ADFN1^MUMPS
"^DD",404.43,404.43,.02,1,3,1)
N SCDFN,SC1,SC3 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ADFN",SCDFN,X,SC3,DA)=""
"^DD",404.43,404.43,.02,1,3,2)
N SCDFN,SC1,SC3 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ADFN",SCDFN,X,SC3,DA)
"^DD",404.43,404.43,.02,1,3,"%D",0)
^^1^1^2960319^^^
"^DD",404.43,404.43,.02,1,3,"%D",1,0)
This sorts by PATIENT file ien (DFN), then by TEAM POSITION(#.02), then by POSITION ASSIGNED DATE(#.03).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.02,1,3,"DT")
2960319
"^DD",404.43,404.43,.02,1,4,0)
404.43^APCPOS3^MUMPS
"^DD",404.43,404.43,.02,1,4,1)
N SC1,SC2,SC3 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,5) I SC2]"" S SC3=$P($G(^(0)),U,3) I SC3]"" D SETPC^SCMCDD1(SC1,SC2,SC3,X,DA)
"^DD",404.43,404.43,.02,1,4,2)
N SC1,SC2,SC3 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,5) I SC2]"" S SC3=$P($G(^(0)),U,3) I SC3]"" D KILLPC^SCMCDD1(SC1,SC2,SC3,X,DA)
"^DD",404.43,404.43,.02,1,4,"%D",0)
^^2^2^2960214^^^^
"^DD",404.43,404.43,.02,1,4,"%D",1,0)
This sorts by Patient (via PATIENT TEAM ASSIGNMENT(#.01)), then by PC ROLE(#.05), then by -POSITION ASSIGNED DATE(#.03), then by
"^DD",404.43,404.43,.02,1,4,"%D",2,0)
 TEAM POSITION(#.02).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.02,1,4,"DT")
2960214
"^DD",404.43,404.43,.02,1,5,0)
404.43^AEVENT3^MUMPS
"^DD",404.43,404.43,.02,1,5,1)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.02,1,5,2)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.02,1,5,"%D",0)
^^1^1^2990507^
"^DD",404.43,404.43,.02,1,5,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.43,404.43,.02,1,5,"DT")
2990507
"^DD",404.43,404.43,.02,3)
Enter the position associated with the patient.
"^DD",404.43,404.43,.02,12)
used to assure position is from team
"^DD",404.43,404.43,.02,12.1)
S DIC("S")="I $$OKTP^SCMCTPU(DA,Y)"
"^DD",404.43,404.43,.02,21,0)
^^1^1^2960215^^^^
"^DD",404.43,404.43,.02,21,1,0)
This is the position associated with the patient.
"^DD",404.43,404.43,.02,23,0)
^^1^1^2960215^^^^
"^DD",404.43,404.43,.02,23,1,0)
Position must be from parent team - see screen.
"^DD",404.43,404.43,.02,"DT")
3020731
"^DD",404.43,404.43,.03,0)
POSITION ASSIGNED DATE^RDX^^0;3^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X N SC1,SCNODE S SC1=$G(X),SCNODE=$G(^SCPT(404.43,+$G(DA),0)) K:'$$OKACTTP^SCMCTPU(SCNODE,SC1) X
"^DD",404.43,404.43,.03,1,0)
^.1
"^DD",404.43,404.43,.03,1,1,0)
404.43^APRIMARY2^MUMPS
"^DD",404.43,404.43,.03,1,1,1)
N SC1,SC2 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,2) I SC2 S ^SCPT(404.43,"APRIMARY",SC1,SC2,-X,DA)=""
"^DD",404.43,404.43,.03,1,1,2)
N SC1,SC2 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,2) I SC2 K ^SCPT(404.43,"APRIMARY",SC1,SC2,-X,DA)
"^DD",404.43,404.43,.03,1,1,"%D",0)
^^1^1^2950908^
"^DD",404.43,404.43,.03,1,1,"%D",1,0)
This sorts by PATIENT TEAM ASSIGNMENT(#.01), then by TEAM POSITION(#.02), then by -POSITION ASSIGNED DATE(#.03).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.03,1,1,"DT")
2950908
"^DD",404.43,404.43,.03,1,2,0)
404.43^ADFN2^MUMPS
"^DD",404.43,404.43,.03,1,2,1)
N SCDFN,SC1,SC2 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,2) I SC2 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ADFN",SCDFN,SC2,X,DA)=""
"^DD",404.43,404.43,.03,1,2,2)
N SCDFN,SC1,SC2 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,2) I SC2 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ADFN",SCDFN,SC2,X,DA)
"^DD",404.43,404.43,.03,1,2,"%D",0)
^^1^1^2960319^^
"^DD",404.43,404.43,.03,1,2,"%D",1,0)
This sorts by PATIENT file ien (DFN), then by TEAM POSITION(#.02), then by POSITION ASSIGNED DATE(#.03).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.03,1,2,"DT")
2960319
"^DD",404.43,404.43,.03,1,3,0)
404.43^APCPOS2^MUMPS
"^DD",404.43,404.43,.03,1,3,1)
N SC1,SC2,SC4 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,5) I SC2]"" S SC4=$P($G(^(0)),U,2) I SC4 D SETPC^SCMCDD1(SC1,SC2,X,SC4,DA)
"^DD",404.43,404.43,.03,1,3,2)
N SC1,SC2,SC4 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,5) I SC2]"" S SC4=$P($G(^(0)),U,2) I SC4 D KILLPC^SCMCDD1(SC1,SC2,X,SC4,DA)
"^DD",404.43,404.43,.03,1,3,"%D",0)
^^1^1^2960214^^^^
"^DD",404.43,404.43,.03,1,3,"%D",1,0)
This sorts by Patient (via PATIENT TEAM ASSIGNMENT(#.01)), then by PC ROLE(#.05), then by -POSITION ASSIGNED DATE(#.03), then by TEAM POSITION(#.02).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.03,1,3,"DT")
2960214
"^DD",404.43,404.43,.03,1,4,0)
404.43^AEVENT4^MUMPS
"^DD",404.43,404.43,.03,1,4,1)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.03,1,4,2)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.03,1,4,"%D",0)
^^1^1^2990507^
"^DD",404.43,404.43,.03,1,4,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.43,404.43,.03,1,4,"DT")
2990507
"^DD",404.43,404.43,.03,1,5,0)
404.43^ACTDFN2^MUMPS
"^DD",404.43,404.43,.03,1,5,1)
N ND,SCDFN,SC1,SC4 S ND=$G(^SCPT(404.43,DA,0)),SC4=$P(ND,U,4) I SC4']"" S SC1=$P(ND,U,1) I SC1 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTDFN",SCDFN,DA)=""
"^DD",404.43,404.43,.03,1,5,2)
N ND,SCDFN,SC1,SC4 S ND=$G(^SCPT(404.43,DA,0)),SC4=$P(ND,U,4) I SC4']"" S SC1=$P(ND,U,1) I SC1 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTDFN",SCDFN,DA)
"^DD",404.43,404.43,.03,1,5,"%D",0)
^^2^2^2990723^
"^DD",404.43,404.43,.03,1,5,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN).
"^DD",404.43,404.43,.03,1,5,"%D",2,0)
There are associated xrefs for fields .01 and .04.
"^DD",404.43,404.43,.03,1,5,"DT")
2990723
"^DD",404.43,404.43,.03,1,6,0)
404.43^ACTPC2^MUMPS
"^DD",404.43,404.43,.03,1,6,1)
N ND,SCDFN,SC1,SC4,SC5 S ND=$G(^SCPT(404.43,DA,0)),SC4=$P(ND,U,4) I SC4']"" S SC1=$P(ND,U,1) I SC1 S SC5=$P(ND,U,5) I SC5 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTPC",SCDFN,SC5,DA)=""
"^DD",404.43,404.43,.03,1,6,2)
N ND,SCDFN,SC1,SC4,SC5 S ND=$G(^SCPT(404.43,DA,0)),SC4=$P(ND,U,4) I SC4']"" S SC1=$P(ND,U,1) I SC1 S SC5=$P(ND,U,5) I SC5 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTPC",SCDFN,SC5,DA)
"^DD",404.43,404.43,.03,1,6,"%D",0)
^^3^3^2990723^
"^DD",404.43,404.43,.03,1,6,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN),
"^DD",404.43,404.43,.03,1,6,"%D",2,0)
then by PC ROLE(#.05). There are associated xrefs for fields
"^DD",404.43,404.43,.03,1,6,"%D",3,0)
.01, .04 and .05.
"^DD",404.43,404.43,.03,1,6,"DT")
2990723
"^DD",404.43,404.43,.03,3)
S %DT="ESTX" D ^%DT S X=Y K:Y<1 X N SC1,SCNODE S SC1=$G(X),SCNODE=$G(^SCPT(404.43,D0,0)) K:'$$OKACTTP^SCMCTPU(SCNODE,SC1) X
"^DD",404.43,404.43,.03,21,0)
^^1^1^2960517^^^^
"^DD",404.43,404.43,.03,21,1,0)
This is the date that the team position was assigned to the patient.
"^DD",404.43,404.43,.03,"DT")
2990723
"^DD",404.43,404.43,.04,0)
POSITION UNASSIGNED DATE^DX^^0;4^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X N SC1,SCNODE S SC1=$G(X),SCNODE=$G(^SCPT(404.43,DA,0)) K:'$$OKINTP^SCMCTPU(SCNODE,SC1) X
"^DD",404.43,404.43,.04,1,0)
^.1
"^DD",404.43,404.43,.04,1,1,0)
404.43^AEVENT5^MUMPS
"^DD",404.43,404.43,.04,1,1,1)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.04,1,1,2)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.04,1,1,"%D",0)
^^1^1^2990507^
"^DD",404.43,404.43,.04,1,1,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.43,404.43,.04,1,1,"DT")
2990507
"^DD",404.43,404.43,.04,1,2,0)
404.43^ACTDFN3^MUMPS
"^DD",404.43,404.43,.04,1,2,1)
N ND,SCDFN,SC1,SC3 S ND=$G(^SCPT(404.43,DA,0)),SC1=$P(ND,U,1) I SC1 S SC3=$P(ND,U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTDFN",SCDFN,DA)
"^DD",404.43,404.43,.04,1,2,2)
N ND,SCDFN,SC1,SC3 S ND=$G(^SCPT(404.43,DA,0)),SC1=$P(ND,U,1) I SC1 S SC3=$P(ND,U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTDFN",SCDFN,DA)=""
"^DD",404.43,404.43,.04,1,2,"%D",0)
^^2^2^2990723^^
"^DD",404.43,404.43,.04,1,2,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN).
"^DD",404.43,404.43,.04,1,2,"%D",2,0)
There are associated xrefs for fields .01 and .03.
"^DD",404.43,404.43,.04,1,2,"DT")
2990723
"^DD",404.43,404.43,.04,1,3,0)
404.43^ACTPC4^MUMPS
"^DD",404.43,404.43,.04,1,3,1)
N ND,SCDFN,SC1,SC3,SC5 S ND=$G(^SCPT(404.43,DA,0)),SC1=$P(ND,U,1) I SC1 S SC3=$P(ND,U,3) I SC3]"" S SC5=$P(ND,U,5) I SC5 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTPC",SCDFN,SC5,DA)
"^DD",404.43,404.43,.04,1,3,2)
N ND,SCDFN,SC1,SC3,SC5 S ND=$G(^SCPT(404.43,DA,0)),SC1=$P(ND,U,1) I SC1 S SC3=$P(ND,U,3) I SC3]"" S SC5=$P(ND,U,5) I SC5 S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTPC",SCDFN,SC5,DA)=""
"^DD",404.43,404.43,.04,1,3,"%D",0)
^^3^3^2990723^
"^DD",404.43,404.43,.04,1,3,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN),
"^DD",404.43,404.43,.04,1,3,"%D",2,0)
then by PC ROLE(#.05). There are associated xrefs for fields
"^DD",404.43,404.43,.04,1,3,"%D",3,0)
.01, .03 and .05.
"^DD",404.43,404.43,.04,1,3,"DT")
2990723
"^DD",404.43,404.43,.04,3)
This is the date that the position is no longer associated with the patient.
"^DD",404.43,404.43,.04,21,0)
^^1^1^2950717^
"^DD",404.43,404.43,.04,21,1,0)
This is the date/time that the position is no longer associated with the patient.
"^DD",404.43,404.43,.04,"DT")
2990723
"^DD",404.43,404.43,.05,0)
PC ROLE^SX^0:NON PC ASSIGNMENT;1:PC ASSIGNMENT;2:PC ATTENDING;^0;5^N SC1 S SC1=$$OKROLE^SCMCTPU(DA,X) K:'SC1 X
"^DD",404.43,404.43,.05,1,0)
^.1
"^DD",404.43,404.43,.05,1,1,0)
404.43^APCPOS1^MUMPS
"^DD",404.43,404.43,.05,1,1,1)
N SC1,SC3,SC4 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,3) I SC3]"" S SC4=$P($G(^(0)),U,2) I SC4 D SETPC^SCMCDD1(SC1,X,SC3,SC4,DA)
"^DD",404.43,404.43,.05,1,1,2)
N SC1,SC3,SC4 S SC1=$P($G(^SCPT(404.43,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,3) I SC3]"" S SC4=$P($G(^(0)),U,2) I SC4 D KILLPC^SCMCDD1(SC1,X,SC3,SC4,DA)
"^DD",404.43,404.43,.05,1,1,"%D",0)
^^1^1^2960214^^^^
"^DD",404.43,404.43,.05,1,1,"%D",1,0)
This sorts by Patient (via PATIENT TEAM ASSIGNMENT(#.01)), then by PC ROLE(#.05), then by -POSITION ASSIGNED DATE(#.03), then by TEAM POSITION(#.02).  There are associated cross references for each of these fields.
"^DD",404.43,404.43,.05,1,1,"DT")
2960214
"^DD",404.43,404.43,.05,1,2,0)
404.43^AEVENT2^MUMPS
"^DD",404.43,404.43,.05,1,2,1)
D PTPXREF^SCMCHLX(DA)
"^DD",404.43,404.43,.05,1,2,2)
D PTPXREF^SCMCHLX(DA,X)
"^DD",404.43,404.43,.05,1,2,"%D",0)
^^1^1^2990507^
"^DD",404.43,404.43,.05,1,2,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.43,404.43,.05,1,2,"DT")
2990507
"^DD",404.43,404.43,.05,1,3,0)
404.43^ACTPC3^MUMPS
"^DD",404.43,404.43,.05,1,3,1)
N ND,SCDFN,SC1,SC4,SC3 S ND=$G(^SCPT(404.43,DA,0)),SC4=$P(ND,U,4) I SC4']"" S SC1=$P(ND,U,1) I SC1 S SC3=$P(ND,U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN S ^SCPT(404.43,"ACTPC",SCDFN,X,DA)=""
"^DD",404.43,404.43,.05,1,3,2)
N ND,SCDFN,SC1,SC4,SC3 S ND=$G(^SCPT(404.43,DA,0)),SC4=$P(ND,U,4) I SC4']"" S SC1=$P(ND,U,1) I SC1 S SC3=$P(ND,U,3) I SC3]"" S SCDFN=$P($G(^SCPT(404.42,SC1,0)),U,1) I SCDFN K ^SCPT(404.43,"ACTPC",SCDFN,X,DA)
"^DD",404.43,404.43,.05,1,3,"%D",0)
^^3^3^2990723^
"^DD",404.43,404.43,.05,1,3,"%D",1,0)
This sorts currently active entries by PATIENT file ien (DFN),
"^DD",404.43,404.43,.05,1,3,"%D",2,0)
then by PC ROLE(#.05). There are associated xrefs for fields
"^DD",404.43,404.43,.05,1,3,"%D",3,0)
.01, .03 and .04.
"^DD",404.43,404.43,.05,1,3,"DT")
2990723
"^DD",404.43,404.43,.05,3)
PC Assignments are only allowed if Patient Team Assignment is for Primary Care
"^DD",404.43,404.43,.05,21,0)
^^2^2^2990802^^^^
"^DD",404.43,404.43,.05,21,1,0)
This is used to indicate if patient - team position assigment is a 
"^DD",404.43,404.43,.05,21,2,0)
special one (e.g. primary care practitioner or primary care attending).
"^DD",404.43,404.43,.05,23,0)
^^1^1^2990802^^^^
"^DD",404.43,404.43,.05,23,1,0)
This is only allowable if the team assignment is a pc team assignment.
"^DD",404.43,404.43,.05,"DT")
2990802
"^DD",404.43,404.43,.06,0)
USER ENTERING^P200'^VA(200,^0;6^Q
"^DD",404.43,404.43,.06,3)
The user who initially created the record
"^DD",404.43,404.43,.06,21,0)
^^1^1^2960312^
"^DD",404.43,404.43,.06,21,1,0)
This is the user who initially created the record.
"^DD",404.43,404.43,.06,"DT")
2960312
"^DD",404.43,404.43,.07,0)
DATE/TIME ENTERED^D^^0;7^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",404.43,404.43,.07,3)
This is the date/time that the history of the position was entered.
"^DD",404.43,404.43,.07,21,0)
^^1^1^2960312^
"^DD",404.43,404.43,.07,21,1,0)
This is the date/time that the history of the position was entered.
"^DD",404.43,404.43,.07,"DT")
2960312
"^DD",404.43,404.43,.08,0)
LAST EDITED BY^P200'^VA(200,^0;8^Q
"^DD",404.43,404.43,.08,3)
This is the user who last edited the record.
"^DD",404.43,404.43,.08,21,0)
^^1^1^2960312^
"^DD",404.43,404.43,.08,21,1,0)
This is the user who last edited the record.
"^DD",404.43,404.43,.08,"DT")
2960312
"^DD",404.43,404.43,.09,0)
DATE/TIME LAST EDITED^D^^0;9^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",404.43,404.43,.09,3)
This is the date/time the record was last edited.
"^DD",404.43,404.43,.09,21,0)
^^1^1^2960312^
"^DD",404.43,404.43,.09,21,1,0)
This is the date/time the record was last edited.
"^DD",404.43,404.43,.09,"DT")
2960312
"^DD",404.43,404.43,.12,0)
STATUS^S^DU:DEATH INACTIVATION;NA:NO APPT INACTIVATION;DD:REASIGNED AFTER DATE OF DEATH REMOVED;^0;12^Q
"^DD",404.43,404.43,.12,1,0)
^.1^^-1
"^DD",404.43,404.43,.12,1,2,0)
404.43^ASTATB
"^DD",404.43,404.43,.12,1,2,1)
S ^SCPT(404.43,"ASTATB",$E(X,1,30),DA)=""
"^DD",404.43,404.43,.12,1,2,2)
K ^SCPT(404.43,"ASTATB",$E(X,1,30),DA)
"^DD",404.43,404.43,.12,1,2,"%D",0)
^^1^1^2981120^
"^DD",404.43,404.43,.12,1,2,"%D",1,0)
Sort by Status
"^DD",404.43,404.43,.12,1,2,"DT")
2981120
"^DD",404.43,404.43,.12,21,0)
^^3^3^3040406^
"^DD",404.43,404.43,.12,21,1,0)
Status of this assignment if action on this assignment was made  either
"^DD",404.43,404.43,.12,21,2,0)
by entering Date of Death, removing Date of Death, or because position was
"^DD",404.43,404.43,.12,21,3,0)
inactivated by patient inactivity.
"^DD",404.43,404.43,.12,"DT")
3040526
"^DD",404.43,404.43,.13,0)
EXTEND AUTOMATIC INACTIVATION^S^0:DO NOT EXTEND;1:PATIENT HAS FUTURE PC APPOINTMENT;2:PROVIDER REQUEST-WILL CONTACT PATIENT;3:PATIENT CONTACTED SITE FOR APPOINTMENT;4:OTHER;^0;13^Q
"^DD",404.43,404.43,.13,1,0)
^.1
"^DD",404.43,404.43,.13,1,1,0)
404.43^AEXT
"^DD",404.43,404.43,.13,1,1,1)
S ^SCPT(404.43,"AEXT",$E(X,1,30),DA)=""
"^DD",404.43,404.43,.13,1,1,2)
K ^SCPT(404.43,"AEXT",$E(X,1,30),DA)
"^DD",404.43,404.43,.13,1,1,"%D",0)
^.101^1^1^3040405^^
"^DD",404.43,404.43,.13,1,1,"%D",1,0)
Extended from automatic inactivation
"^DD",404.43,404.43,.13,1,1,"DT")
3040119
"^DD",404.43,404.43,.13,3)
Enter if you wish to extend this automatic inactivation date by 60 days
"^DD",404.43,404.43,.13,21,0)
^^2^2^3040406^
"^DD",404.43,404.43,.13,21,1,0)
This is entered in PCMM GUI and is the reason for extending this assignments 
"^DD",404.43,404.43,.13,21,2,0)
inactivation. If 'Other' is entered a comment is required.
"^DD",404.43,404.43,.13,"DT")
3040119
"^DD",404.43,404.43,.14,0)
EXTENSION COMMENT^F^^0;14^K:$L(X)>50!($L(X)<2) X
"^DD",404.43,404.43,.14,3)
Answer must be 2-50 characters in length.
"^DD",404.43,404.43,.14,21,0)
^.001^2^2^3040406^^^
"^DD",404.43,404.43,.14,21,1,0)
If extended for 'OTHER' then this is the free text reason.
"^DD",404.43,404.43,.14,21,2,0)
This is entered in the PCMM GUI
"^DD",404.43,404.43,.14,"DT")
3031009
"^DD",404.43,404.43,.15,0)
DATE FLAGGED FOR INACTIVATION^D^^0;15^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.43,404.43,.15,1,0)
^.1
"^DD",404.43,404.43,.15,1,1,0)
404.43^AFLG
"^DD",404.43,404.43,.15,1,1,1)
S ^SCPT(404.43,"AFLG",$E(X,1,30),DA)=""
"^DD",404.43,404.43,.15,1,1,2)
K ^SCPT(404.43,"AFLG",$E(X,1,30),DA)
"^DD",404.43,404.43,.15,1,1,"%D",0)
^^1^1^3031015^
"^DD",404.43,404.43,.15,1,1,"%D",1,0)
Date record flagged for inactivation. Used to inactivate record 60 days later
"^DD",404.43,404.43,.15,1,1,"DT")
3031015
"^DD",404.43,404.43,.15,21,0)
^.001^1^1^3040310^^
"^DD",404.43,404.43,.15,21,1,0)
Date background job flagged the record for inactivation due to inactivity.
"^DD",404.43,404.43,.15,"DT")
3040310
"^DD",404.43,404.43,.159,0)
SCHEDULED INACTIVATION DATE^CD^^ ; ^D INACTDT^SCMCTSK1(D0)
"^DD",404.43,404.43,.159,9)
^
"^DD",404.43,404.43,.159,9.01)

"^DD",404.43,404.43,.159,9.1)
D INACTDT^SCMCTSK1(D0)
"^DD",404.43,404.43,.159,21,0)
^^1^1^3040405^
"^DD",404.43,404.43,.159,21,1,0)
Date this patient is scheduled to be inactivated if not seen by that time.
"^DD",404.43,404.43,.159,"DT")
3040315
"^DD",404.43,404.43,.16,0)
EXTENDED BY^P200'^VA(200,^0;16^Q
"^DD",404.43,404.43,.16,3)
Person who filed extension of inactivation
"^DD",404.43,404.43,.16,21,0)
^.001^1^1^3040405^^
"^DD",404.43,404.43,.16,21,1,0)
Automatically filed with extension
"^DD",404.43,404.43,.16,"DT")
3031028
"^DD",404.43,404.43,.17,0)
DATE DISINACTIVATED^D^^0;17^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.43,404.43,.17,21,0)
^^1^1^3040210^
"^DD",404.43,404.43,.17,21,1,0)
Date reassigned after being automatically inactivated
"^DD",404.43,404.43,.17,"DT")
3040210
"^DD",404.44,404.44,0)
FIELD^^21^11
"^DD",404.44,404.44,0,"DDA")
N
"^DD",404.44,404.44,0,"DT")
3060724
"^DD",404.44,404.44,0,"IX","AC",404.44,19)

"^DD",404.44,404.44,0,"IX","B",404.44,.01)

"^DD",404.44,404.44,0,"NM","PCMM PARAMETER")

"^DD",404.44,404.44,0,"VRPK")
SD
"^DD",404.44,404.44,.01,0)
NUMBER^RNJ3,0^^0;1^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",404.44,404.44,.01,1,0)
^.1
"^DD",404.44,404.44,.01,1,1,0)
404.44^B
"^DD",404.44,404.44,.01,1,1,1)
S ^SCTM(404.44,"B",$E(X,1,30),DA)=""
"^DD",404.44,404.44,.01,1,1,2)
K ^SCTM(404.44,"B",$E(X,1,30),DA)
"^DD",404.44,404.44,.01,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",404.44,404.44,.01,21,0)
^^3^3^2990817^^
"^DD",404.44,404.44,.01,21,1,0)
This is a bogus field.  There should only be one entry for this
"^DD",404.44,404.44,.01,21,2,0)
file.  The IEN of this entry must be 1 at this time.  If other entries are
"^DD",404.44,404.44,.01,21,3,0)
added and the code not adjusted PCMM will not function properly.
"^DD",404.44,404.44,.01,"DT")
2990817
"^DD",404.44,404.44,12,0)
DISABLE ALL CLIENTS^S^1:YES;0:NO;^1;2^Q
"^DD",404.44,404.44,12,21,0)
^^2^2^2990817^^
"^DD",404.44,404.44,12,21,1,0)
This field is set to yes if one wants to disable all PCMM GUI client
"^DD",404.44,404.44,12,21,2,0)
workstations. A null value will work the same as a zero.
"^DD",404.44,404.44,12,"DT")
2990817
"^DD",404.44,404.44,13,0)
DISABLE CLIENT AUTO-UPDATE^S^1:YES;0:NO;^1;3^Q
"^DD",404.44,404.44,13,21,0)
^^2^2^2990823^
"^DD",404.44,404.44,13,21,1,0)
This field is used to indicate if client auto updating, registering the client
"^DD",404.44,404.44,13,21,2,0)
in 404.46, can happen.
"^DD",404.44,404.44,13,"DT")
2990823
"^DD",404.44,404.44,14,0)
RPC TIME LIMIT^RNJ3,0^^1;4^K:+X'=X!(X>300)!(X<30)!(X?.E1"."1N.N) X
"^DD",404.44,404.44,14,3)
Type a Number between 30 and 300, 0 Decimal Digits
"^DD",404.44,404.44,14,21,0)
^^3^3^3000207^
"^DD",404.44,404.44,14,21,1,0)
This value represents the maximum number of seconds the client should
"^DD",404.44,404.44,14,21,2,0)
wait for a response from the server.  This value should be set as low
"^DD",404.44,404.44,14,21,3,0)
as possible consistent with allowing the client to avoid timeout errors.
"^DD",404.44,404.44,14,23,0)
^^3^3^3000207^^
"^DD",404.44,404.44,14,23,1,0)
The value retrieved from this field is returned to the client by the SCMC
"^DD",404.44,404.44,14,23,2,0)
VERIFY C/S SYNC remote procedure.  The client then uses this value to
"^DD",404.44,404.44,14,23,3,0)
update the run time property RPCTimelimit in all RPCBroker components.
"^DD",404.44,404.44,14,"DT")
2991206
"^DD",404.44,404.44,15,0)
HL7 TRANSMIT LIMIT^NJ6,0^^1;5^K:+X'=X!(X>999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",404.44,404.44,15,3)
Type a Number between 1 and 999999, 0 Decimal Digits
"^DD",404.44,404.44,15,21,0)
^^5^5^3000207^
"^DD",404.44,404.44,15,21,1,0)
This value represents the maximum number of records which will be
"^DD",404.44,404.44,15,21,2,0)
transmitted during any given PCMM HL7 transmission session.  The default
"^DD",404.44,404.44,15,21,3,0)
value is 999999.  It is recommended this value be left AS IS, unless
"^DD",404.44,404.44,15,21,4,0)
the background HL7 messaging volume is adversely affecting system
"^DD",404.44,404.44,15,21,5,0)
performance.
"^DD",404.44,404.44,15,23,0)
^^3^3^3000207^
"^DD",404.44,404.44,15,23,1,0)
The value retrieved from this field is used by the 
"^DD",404.44,404.44,15,23,2,0)
SCMC PCMM HL7 TRANSMIT nightly background option to
"^DD",404.44,404.44,15,23,3,0)
regulate the maximum number of records to transmit.
"^DD",404.44,404.44,15,"DT")
2991206
"^DD",404.44,404.44,16,0)
HL7 AUTO RETRANSMIT PERIOD^NJ3,0^^1;6^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",404.44,404.44,16,3)
Enter a number from 1 to 999.
"^DD",404.44,404.44,16,21,0)
^^2^2^3000207^
"^DD",404.44,404.44,16,21,1,0)
Enter the number of days that an auto retransmit of HL7 messages
"^DD",404.44,404.44,16,21,2,0)
should occur if no ACK message is received.
"^DD",404.44,404.44,16,"DT")
3000203
"^DD",404.44,404.44,17,0)
BASELINE RUN DATE^D^^1;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.44,404.44,17,21,0)
^^2^2^3000323^
"^DD",404.44,404.44,17,21,1,0)
  This field contains the date the PCMM Baseline was run.
"^DD",404.44,404.44,17,21,2,0)
  The Baseline can only run once at a site.
"^DD",404.44,404.44,17,"DT")
3000323
"^DD",404.44,404.44,18,0)
SHORT INTERVAL EXPIRATION DATE^D^^1;8^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.44,404.44,18,3)
Enter date short intervals expire (Debug ONLY)
"^DD",404.44,404.44,18,21,0)
^^16^16^3060712^
"^DD",404.44,404.44,18,21,1,0)
This field is used for debugging only.  Normally it will hold no value.  
"^DD",404.44,404.44,18,21,2,0)
This field should not be populated unless requested by EVS or Field 
"^DD",404.44,404.44,18,21,3,0)
Office personnel trouble shooting a PCMM issue.
"^DD",404.44,404.44,18,21,4,0)
 
"^DD",404.44,404.44,18,21,5,0)
When a date greater than the current date is entered in this field the 
"^DD",404.44,404.44,18,21,6,0)
PCMM automated inactivation process will operate in short interval mode 
"^DD",404.44,404.44,18,21,7,0)
until the current date is greater than the date entered in this field.  
"^DD",404.44,404.44,18,21,8,0)
The following PCMM processes are affected while a future date populates 
"^DD",404.44,404.44,18,21,9,0)
this field:
"^DD",404.44,404.44,18,21,10,0)
 
"^DD",404.44,404.44,18,21,11,0)
Inactivations occur every two days in lieu the standard mid-month and end 
"^DD",404.44,404.44,18,21,12,0)
of month.
"^DD",404.44,404.44,18,21,13,0)
 
"^DD",404.44,404.44,18,21,14,0)
PCMM auto inactivation notifications are generated nightly vs. monthly.
"^DD",404.44,404.44,18,21,15,0)
 
"^DD",404.44,404.44,18,21,16,0)
Inactivation grace window is reduced from thirty days to four.
"^DD",404.44,404.44,18,"DT")
3060712
"^DD",404.44,404.44,19,0)
PC STAFF AUTO INACTIVATE DATE^DI^^1;9^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.44,404.44,19,1,0)
^.1
"^DD",404.44,404.44,19,1,1,0)
404.44^AC
"^DD",404.44,404.44,19,1,1,1)
S ^SCTM(404.44,"AC",$E(X,1,30),DA)=""
"^DD",404.44,404.44,19,1,1,2)
K ^SCTM(404.44,"AC",$E(X,1,30),DA)
"^DD",404.44,404.44,19,1,1,"DT")
3040323
"^DD",404.44,404.44,19,3)
Cannot be edited
"^DD",404.44,404.44,19,21,0)
^.001^7^7^3040324^^^^
"^DD",404.44,404.44,19,21,1,0)
Date Primary Care providers (PCPs and APs) and 
"^DD",404.44,404.44,19,21,2,0)
staff with inconsistent Person Class  and Standard Role
"^DD",404.44,404.44,19,21,3,0)
 entries will be inactivated due to Primary Care business rules.  Only 
"^DD",404.44,404.44,19,21,4,0)
physicians, NPs and PAs
"^DD",404.44,404.44,19,21,5,0)
can be Primary Care Providers (PCP.)  Only Resident or Intern (Physicians,) NPs, and 
"^DD",404.44,404.44,19,21,6,0)
PAs can be Associate Providers (AP.)
"^DD",404.44,404.44,19,21,7,0)
This date is 6 Months after installation of patch SD*5.3*297.
"^DD",404.44,404.44,19,23,0)
^.001^1^1^3040324^^^
"^DD",404.44,404.44,19,23,1,0)
Cannot be edited. Is deleted after used to inactivate providers
"^DD",404.44,404.44,19,"DT")
3040323
"^DD",404.44,404.44,20,0)
TEAM AUTO INACTIVATE^S^0:NO;1:YES;^1;10^Q
"^DD",404.44,404.44,20,21,0)
^^9^9^3060712^
"^DD",404.44,404.44,20,21,1,0)
If this field is set to YES, then when a patient is inactivated from 
"^DD",404.44,404.44,20,21,2,0)
their primary care provider assignment by the nightly job they will also
"^DD",404.44,404.44,20,21,3,0)
be inactivated from the same TEAM and all other positions on that TEAM.
"^DD",404.44,404.44,20,21,4,0)
 
"^DD",404.44,404.44,20,21,5,0)
If this field is set to NO, then when a patient is inactivated from their 
"^DD",404.44,404.44,20,21,6,0)
primary care panel by the nightly job only thier primary care provider 
"^DD",404.44,404.44,20,21,7,0)
assignment will be inactivated.
"^DD",404.44,404.44,20,21,8,0)
 
"^DD",404.44,404.44,20,21,9,0)
The default value is YES.
"^DD",404.44,404.44,20,"DT")
3060215
"^DD",404.44,404.44,21,0)
PC STAFF INACTIVATION RUN DATE^D^^1;11^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.44,404.44,21,3)
DATE THAT PC STAFF WERE INACTIVATED BY THE NIGHTLY JOB
"^DD",404.44,404.44,21,21,0)
^^10^10^3060724^
"^DD",404.44,404.44,21,21,1,0)
This field records the date Primary Care providers are inactivated by the 
"^DD",404.44,404.44,21,21,2,0)
PCMM nightly job process.
"^DD",404.44,404.44,21,21,3,0)
 
"^DD",404.44,404.44,21,21,4,0)
Six months after the installation of patch SD*5.3*297 all primary care 
"^DD",404.44,404.44,21,21,5,0)
providers identified as having an incorrect person class assignment will 
"^DD",404.44,404.44,21,21,6,0)
be inactivated.  This is a one time, clean-up event for PCMM Primary Care 
"^DD",404.44,404.44,21,21,7,0)
Providers.
"^DD",404.44,404.44,21,21,8,0)
 
"^DD",404.44,404.44,21,21,9,0)
This field is populated by a background process and should be manipulated 
"^DD",404.44,404.44,21,21,10,0)
through FileMan.
"^DD",404.44,404.44,21,"DT")
3060724
"^DD",404.52,404.52,0)
FIELD^^1^15
"^DD",404.52,404.52,0,"DDA")
N
"^DD",404.52,404.52,0,"DT")
3040322
"^DD",404.52,404.52,0,"ID",.02)
W "   ",$E($P(^(0),U,2),4,5)_"-"_$E($P(^(0),U,2),6,7)_"-"_$E($P(^(0),U,2),2,3)
"^DD",404.52,404.52,0,"ID",.03)
S %I=Y,Y=$S('$D(^(0)):"",$D(^VA(200,+$P(^(0),U,3),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(200,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",404.52,404.52,0,"ID",.04)
W "   ",@("$P($P($C(59)_$S($D(^DD(404.52,.04,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,4)_"":"",2),$C(59),1)")
"^DD",404.52,404.52,0,"IX","AEVENT09",404.52,.09)

"^DD",404.52,404.52,0,"IX","AEVENT1",404.52,.01)

"^DD",404.52,404.52,0,"IX","AEVENT2",404.52,.02)

"^DD",404.52,404.52,0,"IX","AEVENT3",404.52,.03)

"^DD",404.52,404.52,0,"IX","AEVENT4",404.52,.04)

"^DD",404.52,404.52,0,"IX","AFLAG",404.52,.091)

"^DD",404.52,404.52,0,"IX","AFTEE",404.52,.09)

"^DD",404.52,404.52,0,"IX","AIDT",404.52,.01)

"^DD",404.52,404.52,0,"IX","AIDT1",404.52,.02)

"^DD",404.52,404.52,0,"IX","AIDT2",404.52,.04)

"^DD",404.52,404.52,0,"IX","ASTATUS",404.52,.04)

"^DD",404.52,404.52,0,"IX","AWRK",404.52,.01)

"^DD",404.52,404.52,0,"IX","B",404.52,.01)

"^DD",404.52,404.52,0,"IX","C",404.52,.03)

"^DD",404.52,404.52,0,"IX","FTEXR",404.52,.09)

"^DD",404.52,404.52,0,"NM","POSITION ASSIGNMENT HISTORY")

"^DD",404.52,404.52,0,"PT",404.471,.07)

"^DD",404.52,404.52,0,"PT",404.48,.07)

"^DD",404.52,404.52,0,"PT",404.54,.02)

"^DD",404.52,404.52,0,"VRPK")
SD
"^DD",404.52,404.52,.01,0)
TEAM POSITION^RP404.57'X^SCTM(404.57,^0;1^Q
"^DD",404.52,404.52,.01,1,0)
^.1
"^DD",404.52,404.52,.01,1,1,0)
404.52^B
"^DD",404.52,404.52,.01,1,1,1)
S ^SCTM(404.52,"B",$E(X,1,30),DA)=""
"^DD",404.52,404.52,.01,1,1,2)
K ^SCTM(404.52,"B",$E(X,1,30),DA)
"^DD",404.52,404.52,.01,1,2,0)
404.52^AIDT^MUMPS
"^DD",404.52,404.52,.01,1,2,1)
N SC2,SC3 S SC2=$P($G(^SCTM(404.52,DA,0)),U,4) I SC2]"" S SC3=$P($G(^(0)),U,2) I SC3]"" S ^SCTM(404.52,"AIDT",X,SC2,-SC3,DA)=""
"^DD",404.52,404.52,.01,1,2,2)
N SC2,SC3 S SC2=$P($G(^SCTM(404.52,DA,0)),U,4) I SC2]"" S SC3=$P($G(^(0)),U,2) I SC3]"" K ^SCTM(404.52,"AIDT",X,SC2,-SC3,DA)
"^DD",404.52,404.52,.01,1,2,"%D",0)
^^1^1^2950802^
"^DD",404.52,404.52,.01,1,2,"%D",1,0)
This sorts by TEAM POSITION(#.01), then by STATUS(#.04), then by -EFFECTIVE DATE(#.02).  There are associated cross references for each of these fields.
"^DD",404.52,404.52,.01,1,2,"DT")
2950802
"^DD",404.52,404.52,.01,1,3,0)
404.52^AEVENT1^MUMPS
"^DD",404.52,404.52,.01,1,3,1)
D POSHXREF^SCMCHLX(DA)
"^DD",404.52,404.52,.01,1,3,2)
D POSHXREF^SCMCHLX(DA)
"^DD",404.52,404.52,.01,1,3,"%D",0)
^^1^1^2990507^
"^DD",404.52,404.52,.01,1,3,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.52,404.52,.01,1,3,"DT")
2990507
"^DD",404.52,404.52,.01,1,4,0)
^^TRIGGER^404.52^.07
"^DD",404.52,404.52,.01,1,4,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X=DIV S X=DUZ X ^DD(404.52,.01,1,4,1.4)
"^DD",404.52,404.52,.01,1,4,1.4)
S DIH=$S($D(^SCTM(404.52,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,7)=DIV,DIH=404.52,DIG=.07 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",404.52,404.52,.01,1,4,2)
Q
"^DD",404.52,404.52,.01,1,4,"%D",0)
^^2^2^2990630^
"^DD",404.52,404.52,.01,1,4,"%D",1,0)
This trigger updates the field USER ENTERING.  It is intended to record who
"^DD",404.52,404.52,.01,1,4,"%D",2,0)
entered the record.
"^DD",404.52,404.52,.01,1,4,"CREATE VALUE")
S X=DUZ
"^DD",404.52,404.52,.01,1,4,"DELETE VALUE")
NO EFFECT
"^DD",404.52,404.52,.01,1,4,"DT")
2990630
"^DD",404.52,404.52,.01,1,4,"FIELD")
user
"^DD",404.52,404.52,.01,1,5,0)
^^TRIGGER^404.52^.08
"^DD",404.52,404.52,.01,1,5,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P(Y(1),U,8),X=X S DIU=X K Y X ^DD(404.52,.01,1,5,1.1) X ^DD(404.52,.01,1,5,1.4)
"^DD",404.52,404.52,.01,1,5,1.1)
S X=DIV S %=$P($H,",",2),X=DT_(%\60#60/100+(%\3600)+(%#60/10000)/100)
"^DD",404.52,404.52,.01,1,5,1.4)
S DIH=$S($D(^SCTM(404.52,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,8)=DIV,DIH=404.52,DIG=.08 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",404.52,404.52,.01,1,5,2)
Q
"^DD",404.52,404.52,.01,1,5,"%D",0)
^^1^1^2990630^
"^DD",404.52,404.52,.01,1,5,"%D",1,0)
This cross reference is intended to record when the entry is added.
"^DD",404.52,404.52,.01,1,5,"CREATE VALUE")
NOW
"^DD",404.52,404.52,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",404.52,404.52,.01,1,5,"DT")
2990630
"^DD",404.52,404.52,.01,1,5,"FIELD")
date
"^DD",404.52,404.52,.01,1,6,0)
404.52^AWRK
"^DD",404.52,404.52,.01,1,6,1)
S ^SCTM(404.52,"AWRK",$E(X,1,30),DA)=""
"^DD",404.52,404.52,.01,1,6,2)
K ^SCTM(404.52,"AWRK",$E(X,1,30),DA)
"^DD",404.52,404.52,.01,1,6,"%D",0)
^^1^1^3030323^
"^DD",404.52,404.52,.01,1,6,"%D",1,0)
Keep track of workload on deletion
"^DD",404.52,404.52,.01,1,6,"DT")
3030323
"^DD",404.52,404.52,.01,1,7,0)
404.52^AWRK^MUMPS
"^DD",404.52,404.52,.01,1,7,1)
Q
"^DD",404.52,404.52,.01,1,7,2)
D POSBXREF^SCMCHLX(DA,404.52)
"^DD",404.52,404.52,.01,1,7,"%D",0)
^^1^1^3030323^
"^DD",404.52,404.52,.01,1,7,"%D",1,0)
Keep track of workload on deletion
"^DD",404.52,404.52,.01,1,7,"DT")
3030323
"^DD",404.52,404.52,.01,3)
This is the entry in the Team Position file.
"^DD",404.52,404.52,.01,21,0)
^^1^1^2990317^^^
"^DD",404.52,404.52,.01,21,1,0)
This is the entry in the Team Position file.
"^DD",404.52,404.52,.01,"DT")
3030323
"^DD",404.52,404.52,.02,0)
EFFECTIVE DATE^RD^^0;2^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",404.52,404.52,.02,1,0)
^.1^^-1
"^DD",404.52,404.52,.02,1,1,0)
404.52^AIDT1^MUMPS
"^DD",404.52,404.52,.02,1,1,1)
N SC1,SC2 S SC1=$P($G(^SCTM(404.52,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,4) I SC2]"" S ^SCTM(404.52,"AIDT",SC1,SC2,-X,DA)=""
"^DD",404.52,404.52,.02,1,1,2)
N SC1,SC2 S SC1=$P($G(^SCTM(404.52,DA,0)),U,1) I SC1 S SC2=$P($G(^(0)),U,4) I SC2]"" K ^SCTM(404.52,"AIDT",SC1,SC2,-X,DA)
"^DD",404.52,404.52,.02,1,1,"%D",0)
^^1^1^2950802^
"^DD",404.52,404.52,.02,1,1,"%D",1,0)
This sorts by TEAM POSITION(#.01), then by STATUS(#.04), then by -EFFECTIVE DATE(#.02).  There are associated cross references for each of these fields.
"^DD",404.52,404.52,.02,1,1,"DT")
2950802
"^DD",404.52,404.52,.02,1,2,0)
404.52^AEVENT2^MUMPS
"^DD",404.52,404.52,.02,1,2,1)
D POSHXREF^SCMCHLX(DA)
"^DD",404.52,404.52,.02,1,2,2)
D POSHXREF^SCMCHLX(DA)
"^DD",404.52,404.52,.02,1,2,"%D",0)
^^1^1^2990507^
"^DD",404.52,404.52,.02,1,2,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.52,404.52,.02,1,2,"DT")
2990507
"^DD",404.52,404.52,.02,3)
This is the date/time that the practitioner took over the position.
"^DD",404.52,404.52,.02,21,0)
^^1^1^2950908^^^
"^DD",404.52,404.52,.02,21,1,0)
This is the date/time that the practitioner took over the team position.
"^DD",404.52,404.52,.02,"DT")
2950908
"^DD",404.52,404.52,.03,0)
PRACTITIONER^R*P200'X^VA(200,^0;3^S DIC("S")="I ($D(^USR(8930.3,""B"",+Y)))!('$$USEUSR^SCMCTPU)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",404.52,404.52,.03,1,0)
^.1
"^DD",404.52,404.52,.03,1,1,0)
404.52^C
"^DD",404.52,404.52,.03,1,1,1)
S ^SCTM(404.52,"C",$E(X,1,30),DA)=""
"^DD",404.52,404.52,.03,1,1,2)
K ^SCTM(404.52,"C",$E(X,1,30),DA)
"^DD",404.52,404.52,.03,1,1,"DT")
2950807
"^DD",404.52,404.52,.03,1,2,0)
404.52^AEVENT3^MUMPS
"^DD",404.52,404.52,.03,1,2,1)
D POSHXREF^SCMCHLX(DA)
"^DD",404.52,404.52,.03,1,2,2)
D POSHXREF^SCMCHLX(DA)
"^DD",404.52,404.52,.03,1,2,"%D",0)
^^1^1^2990507^
"^DD",404.52,404.52,.03,1,2,"%D",1,0)
Trigger an entry into PCMM HL7 EVENT file when this field is edited.
"^DD",404.52,404.52,.03,1,2,"DT")
2990507
"^DD",404.52,404.52,.03,3)
This is the practitioner that holds the position.
"^DD",404.52,404.52,.03,12)
This assures that the practitioner is in the USR Class Membership file (8930.3)
"^DD",404.52,404.52,.03,12.1)
S DIC("S")="I ($D(^USR(8930.3,""B"",+Y)))!('$$USEUSR^SCMCTPU)"
"^DD",404.52,404.52,.03,21,0)
^.001^1^1^3040330^^^^
"^DD",404.52,404.52,.03,21,1,0)
This is a staff member who is entered in the USR CLASS MEMBERSHIP file (8930.3).
"^DD",404.52,404.52,.03,23,0)
^.001^1^1^3040330^^^^
"^DD",404.52,404.52,.03,23,1,0)
Screen insures entry in 8930.3
"^DD",404.52,404.52,.03,"DT")
2960528
"^DD",404.52,404.52,.04,0)
STATUS^RS^1:ACTIVE;0:INACTIVE;^0;4^Q
"^DD",404.52,404.52,.04,1,0)
^.1
"^DD",404.52,404.52,.04,1,1,0)
404.52^AIDT2^MUMPS
"^DD",404.52,404.52,.04,1,1,1)
N SC1,SC3 S SC1=$P($G(^SCTM(404.52,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,2) I SC3]"" S ^SCTM(404.52,"AIDT",SC1,X,-SC3,DA)=""
"^DD",404.52,404.52,.04,1,1,2)
N SC1,SC3 S SC1=$P($G(^SCTM(404.52,DA,0)),U,1) I SC1 S SC3=$P($G(^(0)),U,2) I SC3]"" K ^SCTM(404.52,"AIDT",SC1,X,-SC3,DA)
"^DD",404.52,404.52,.04,1,1,"%D",0)
^.101^1^1^3021216^^
"^DD",404.52,404.52,.04,1,1,"%D",1,0)
This sorts by TEAM POSITION(#.01), then by STATUS(#.04), then by -EFFECTIVE DATE(#.02).  There are associated cross references for each of these fields.
"^DD",404.52,404.52,.04,1,1,"DT")
2950802
"^DD",404.52,404.52,.04,1,2,0)
404.52^ASTATUS^MUMPS
"^DD",404.52,404.52,.04,1,2,1)
I 'X D POSBXREF^SCMCHLX(DA,404.52)
"^DD",404.52,404.52,.04,1,2,2)
Q
"^DD",404.52,404.52,.04,1,2,"%D",0)
^.101^1^1^3030218^^^
"^DD",404.52,404.52,.04,1,2,"%D",1,0)
For HL7 Workload Transmission. Creates an entry in PCMM HL7 EVENT file.
"^DD",404.52,404.52,.04,1,2,"DT")
3021216
"^DD",404.52,404.52,.04,3)
This indicates if the practitioner's position assignment is active or inactive.
"^DD",404.52,404.52,.04,21,0)
^^2^2^2950911^^^
"^DD",404.52,404.52,.04,21,1,0)
This indicates whether the practitioner's position assignment is
"^DD",404.52,404.52,.04,21,2,0)
active or inactive.
"^DD",404.52,404.52,.04,"DT")
3021216
"^DD",404.52,404.52,.05,0)
STATUS REASON^R*P403.44'X^SD(403.44,^0;5^S DIC("S")="IF $$RSNDICS^SCAPMCU1(""ZM5"")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",404.52,404.52,.05,3)
This is the reason that the position assignment changed.
"^DD",404.52,404.52,.05,12)
This is the reason that the position assignment changed.
"^DD",404.52,404.52,.05,12.1)
S DIC("S")="IF $$RSNDICS^SCAPMCU1(""ZM5"")"
"^DD",404.52,404.52,.05,21,0)
^^1^1^2950714^^
"^DD",404.52,404.52,.05,21,1,0)
This is the reason that the position assignment changed.
"^DD",404.52,404.52,.05,"DT")
2960528
"^DD",404.52,404.52,.07,0)
USER ENTERING^P200'^VA(200,^0;7^Q
"^DD",404.52,404.52,.07,3)
Enter the name of the person responsible for entering this entry.
"^DD",404.52,404.52,.07,5,1,0)
404.52^.01^4
"^DD",404.52,404.52,.07,21,0)
^^2^2^2990630^
"^DD",404.52,404.52,.07,21,1,0)
This field is a pointer to the person responsible for entering this entry. It
"^DD",404.52,404.52,.07,21,2,0)
is triggered by the .01 field.
"^DD",404.52,404.52,.07,"DT")
2990630
"^DD",404.52,404.52,.08,0)
DATE/TIME ENTERED^D^^0;8^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",404.52,404.52,.08,3)
Enter the date this entry was created.
"^DD",404.52,404.52,.08,5,1,0)
404.52^.01^5
"^DD",404.52,404.52,.08,21,0)
^^2^2^2990630^
"^DD",404.52,404.52,.08,21,1,0)
This field contains the date/time this entry was added to this file.  It is
"^DD",404.52,404.52,.08,21,2,0)
triggered from the .01 field.
"^DD",404.52,404.52,.08,"DT")
2990630
"^DD",404.52,404.52,.09,0)
PRIMARY CARE FTEE EQUIVALENT^NJ4,2X^^0;9^K:+X'=X!(X>1)!(X<0)!(X?.E1"."3N.N) X
"^DD",404.52,404.52,.09,1,0)
^.1
"^DD",404.52,404.52,.09,1,1,0)
404.52^AFTEE^MUMPS
"^DD",404.52,404.52,.09,1,1,1)
D POSBXREF^SCMCHLX(DA,404.52)
"^DD",404.52,404.52,.09,1,1,2)
D POSBXREF^SCMCHLX(DA,404.52)
"^DD",404.52,404.52,.09,1,1,"%D",0)
^.101^1^1^3030218^^^^
"^DD",404.52,404.52,.09,1,1,"%D",1,0)
For HL7 Workload transmission. Creates an entry in PCMM HL7 EVENT file.
"^DD",404.52,404.52,.09,1,1,"DT")
3021216
"^DD",404.52,404.52,.09,1,2,0)
404.52^FTEXR^MUMPS
"^DD",404.52,404.52,.09,1,2,1)
D FTEXR^SCMCTSK
"^DD",404.52,404.52,.09,1,2,2)
I '$O(^SCTM(404.52,DA,1,0)) D FTEXR^SCMCTSK
"^DD",404.52,404.52,.09,1,2,"%D",0)
^.101^1^1^3040227^^
"^DD",404.52,404.52,.09,1,2,"%D",1,0)
Keep track of FTEE changes
"^DD",404.52,404.52,.09,1,2,"DT")
3040227
"^DD",404.52,404.52,.09,3)
Type a Number between 0 and 1, 2 Decimal Digits Total for site cannot exceed 1
"^DD",404.52,404.52,.09,21,0)
^^2^2^3030218^
"^DD",404.52,404.52,.09,21,1,0)
Workload measurement for Primary Care Providers. This information is transmitted
"^DD",404.52,404.52,.09,21,2,0)
in the HL7 workload message.
"^DD",404.52,404.52,.09,"DT")
3040227
"^DD",404.52,404.52,.091,0)
DATE FLAGGED FOR INACTIVATION^D^^0;10^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",404.52,404.52,.091,1,0)
^.1^^0
"^DD",404.52,404.52,.091,1,1,0)
404.52^AFLAG
"^DD",404.52,404.52,.091,1,1,1)
S ^SCTM(404.52,"AFLAG",$E(X,1,30),DA)=""
"^DD",404.52,404.52,.091,1,1,2)
K ^SCTM(404.52,"AFLAG",$E(X,1,30),DA)
"^DD",404.52,404.52,.091,1,1,"%D",0)
^^1^1^3060712^
"^DD",404.52,404.52,.091,1,1,"%D",1,0)
Track positions designated for inactivation
"^DD",404.52,404.52,.091,1,1,"DT")
3031010
"^DD",404.52,404.52,.091,21,0)
^.001^3^3^3060712^^^^
"^DD",404.52,404.52,.091,21,1,0)
Practitioners may be flagged for inactivation if their person class 
"^DD",404.52,404.52,.091,21,2,0)
is inconsistent with the position role and primary care designation.
"^DD",404.52,404.52,.091,21,3,0)
The flagging of providers is handled by PCMM NIGHTLY TASK option.
"^DD",404.52,404.52,.091,"DT")
3040324
"^DD",404.52,404.52,.096,0)
AVAILABLE POSITIONS^CJ5^^ ; ^X "N I,Y "_$P(^DD(404.52,.097,0),U,5,99) S Y(404.52,.096,1)=X X "N I,Y "_$P(^DD(404.52,.098,0),U,5,99) S Y(404.52,.096,2)=X S X=Y(404.52,.096,1)-Y(404.52,.096,2)
"^DD",404.52,404.52,.096,9)
^
"^DD",404.52,404.52,.096,9.01)
404.52^.098;404.52^.097
"^DD",404.52,404.52,.096,9.1)
MAX-CURR
"^DD",404.52,404.52,.096,"DT")
3040322
"^DD",404.52,404.52,.097,0)
MAX NUMBER OF PATIENTS^CJ5,0^^ ; ^X ^DD(404.52,.097,9.2) S Y(404.52,.097,101)=$S($D(^SCTM(404.57,D0,0)):^(0),1:"") S X=$P(Y(404.52,.097,101),U,8) S D0=Y(404.52,.097,80) S X=$J(X,0,0)
"^DD",404.52,404.52,.097,9)
^
"^DD",404.52,404.52,.097,9.01)
404.57^.08;404.52^.01
"^DD",404.52,404.52,.097,9.1)
TEAM POSITION:MAX
"^DD",404.52,404.52,.097,9.2)
S Y(404.52,.097,80)=$G(D0),Y(404.52,.097,1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:""),D0=$P(Y(404.52,.097,1),U,1) S:'D0!'$D(^SCTM(404.57,+D0,0)) D0=-1
"^DD",404.52,404.52,.098,0)
CURRENT ACTIVE PATIENTS^CJ5,0^^ ; ^S X=$$PCPOSCNT^SCAPMCU1(+$G(^SCTM(404.52,D0,0)),DT,0)
"^DD",404.52,404.52,.098,9)
^
"^DD",404.52,404.52,.098,9.01)

"^DD",404.52,404.52,.098,9.1)
S X=$$PCPOSCNT^SCAPMCU1(+$G(^SCTM(404.52,D0,0)),DT,0)
"^DD",404.52,404.52,.099,0)
ADJUSTED PANEL SIZE^CJ5,0^^ ; ^X ^DD(404.52,.099,9.3) S Y(404.52,.099,5)=$G(X) S X=0,X=$J(Y(404.52,.099,4),Y(404.52,.099,5),X) S X=$J(X,0,0)
"^DD",404.52,404.52,.099,9)
^
"^DD",404.52,404.52,.099,9.01)
404.52^.09;404.52^.098
"^DD",404.52,404.52,.099,9.02)
S X=S("404.52^.098"),Y(1)=$G(X) S X=S("404.52^.09"),Y=X,X=Y(1),X=X,X=$S(Y:X/Y,1:"*******"),Y(2)=$G(X) S X=0,Y(3)=$G(X) S X=0,X=$J(Y(2),Y(3),X) S Y=X
"^DD",404.52,404.52,.099,9.1)
$J((#.098)/(#.09),0,0)
"^DD",404.52,404.52,.099,9.2)
X "N I,Y "_$P(^DD(404.52,.098,0),U,5,99) S Y(404.52,.099,1)=X S Y(404.52,.099,3)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=Y(404.52,.099,1)
"^DD",404.52,404.52,.099,9.3)
X ^DD(404.52,.099,9.2) S Y(404.52,.099,2)=$G(X) S X=$P(Y(404.52,.099,3),U,9),Y=X,X=Y(404.52,.099,2),X=X,X=$S(Y:X/Y,1:"*******"),Y(404.52,.099,4)=$G(X) S X=0
"^DD",404.52,404.52,.099,9.4)
X ^DD(404.52,.099,9.3) S Y(404.52,.099,101)=$G(X) S X=Y(404.52,.099,102),Y(404.52,.099,103)=$G(X) S X=$P($G(^SC(+$P(Y(404.52,.099,104),U,9),0)),U)
"^DD",404.52,404.52,.099,"DT")
3040322
"^DD",404.52,404.52,.11,0)
INACTIVATED AUTOMATICALLY^S^1:YES;^0;11^Q
"^DD",404.52,404.52,.11,1,0)
^.1^^0
"^DD",404.52,404.52,.11,1,1,0)
^^BULLETIN MESSAGE
"^DD",404.52,404.52,.11,1,1,1)
S Y(0)=X,D0=DA X "N DIIND F DIIND=1.001:.001 Q:$D(^DD(404.52,.11,1,1,DIIND))[0  X ^(DIIND)" K XMY S XMB="SCMC PROVIDER INACTIVATION" D ^XMB:$D(^XMB(3.6,"B",XMB)) K Y,XMB
"^DD",404.52,404.52,.11,1,1,1.001)
S X=Y(0) S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^VA(200,+$P(Y(1),U,3),0)),U) S XMB(1)=X
"^DD",404.52,404.52,.11,1,1,1.002)
S X=Y(0) S Y(1)=$S($D(^SCTM(404.52,D0,0)):^(0),1:"") S X=$P($G(^SCTM(404.57,+$P(Y(1),U,1),0)),U) S XMB(2)=X
"^DD",404.52,404.52,.11,1,1,2)
Q
"^DD",404.52,404.52,.11,1,1,"CREATE PARAMETER #1")
PRACTI
"^DD",404.52,404.52,.11,1,1,"CREATE PARAMETER #2")
TEAM POS
"^DD",404.52,404.52,.11,1,1,"CREATE VALUE")
SCMC PROVIDER INACTIVATION
"^DD",404.52,404.52,.11,1,1,"DELETE VALUE")
NO EFFECT
"^DD",404.52,404.52,.11,3)
Set by background job on inactivated providers
"^DD",404.52,404.52,.11,21,0)
^.001^3^3^3040406^^^
"^DD",404.52,404.52,.11,21,1,0)
Set by background job. Do not edit
"^DD",404.52,404.52,.11,21,2,0)
This is set by the PCMM NIGHTLY TASK option when a flagged record remains
"^DD",404.52,404.52,.11,21,3,0)
inconsistent 6 months after installation of patch SD*5.3*297
"^DD",404.52,404.52,.11,"DT")
3040402
"^DD",404.52,404.52,1,0)
FTEE HISTORY^404.521DA^^1;0
"^DD",404.52,404.52,1,21,0)
^^2^2^3040406^
"^DD",404.52,404.52,1,21,1,0)
Historical changes in FTEE values.
"^DD",404.52,404.52,1,21,2,0)
This is set by crossreference, should not be edited.
"^DD",404.52,404.521,0)
FTEE HISTORY SUB-FIELD^^.03^3
"^DD",404.52,404.521,0,"DT")
3040225
"^DD",404.52,404.521,0,"IX","B",404.521,.01)

"^DD",404.52,404.521,0,"NM","FTEE HISTORY")

"^DD",404.52,404.521,0,"UP")
404.52
"^DD",404.52,404.521,.01,0)
FTEE HISTORY^D^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",404.52,404.521,.01,1,0)
^.1
"^DD",404.52,404.521,.01,1,1,0)
404.521^B
"^DD",404.52,404.521,.01,1,1,1)
S ^SCTM(404.52,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",404.52,404.521,.01,1,1,2)
K ^SCTM(404.52,DA(1),1,"B",$E(X,1,30),DA)
"^DD",404.52,404.521,.01,21,0)
^.001^2^2^3040406^^
"^DD",404.52,404.521,.01,21,1,0)
Record of changes in FTEE
"^DD",404.52,404.521,.01,21,2,0)
This is set automatically, should not be edited.
"^DD",404.52,404.521,.01,"DT")
3040225
"^DD",404.52,404.521,.02,0)
VALUE^NJ4,2^^0;2^K:+X'=X!(X>1)!(X<0)!(X?.E1"."3N.N) X
"^DD",404.52,404.521,.02,3)
Type a Number between 0 and 1, 2 Decimal Digits
"^DD",404.52,404.521,.02,21,0)
^.001^2^2^3040406^^
"^DD",404.52,404.521,.02,21,1,0)
Historical record of FTEE changes
"^DD",404.52,404.521,.02,21,2,0)
This is set automatically, should not be edited.
"^DD",404.52,404.521,.02,"DT")
3040225
"^DD",404.52,404.521,.03,0)
USER^P200'^VA(200,^0;3^Q
"^DD",404.52,404.521,.03,21,0)
^^2^2^3040406^
"^DD",404.52,404.521,.03,21,1,0)
User making changes to FTEE.
"^DD",404.52,404.521,.03,21,2,0)
This is set automatically.
"^DD",404.52,404.521,.03,"DT")
3040225
"^DD",404.57,404.57,0)
FIELD^^402^37
"^DD",404.57,404.57,0,"DDA")
N
"^DD",404.57,404.57,0,"DT")
3040323
"^DD",404.57,404.57,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^SCTM(404.51,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(404.51,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",404.57,404.57,0,"ID","WRITE")
D EN^DDIOL($$WRITETP^SCMCDD1(Y),"","?0")
"^DD",404.57,404.57,0,"IX","AC",404.57,.03)

"^DD",404.57,404.57,0,"IX","APRIMARY",404.57,.01)

"^DD",404.57,404.57,0,"IX","APRIMARY1",404.57,.02)

"^DD",404.57,404.57,0,"IX","ASCTEAM",404.57,.09)

"^DD",404.57,404.57,0,"IX","ATMPOS",404.57,.01)

"^DD",404.57,404.57,0,"IX","ATMPOS1",404.57,.02)

"^DD",404.57,404.57,0,"IX","AUSR",404.57,.13)

"^DD",404.57,404.57,0,"IX","B",404.57,.01)

"^DD",404.57,404.57,0,"IX","C",404.57,.02)

"^DD",404.57,404.57,0,"IX","D",404.57,.09)

"^DD",404.57,404.57,0,"NM","TEAM POSITION")

"^DD",404.57,404.57,0,"PT",44.40457,.01)

"^DD",404.57,404.57,0,"PT",403.34,.01)

"^DD",404.57,404.57,0,"PT",404.4143,.02)

"^DD",404.57,404.57,0,"PT",404.43,.02)

"^DD",404.57,404.57,0,"PT",404.471,.07)

"^DD",404.57,404.57,0,"PT",404.48,.07)

"^DD",404.57,404.57,0,"PT",404.52,.01)

"^DD",404.57,404.57,0,"PT",404.53,.01)

"^DD",404.57,404.57,0,"PT",404.53,.06)

"^DD",404.57,404.57,0,"PT",404.57,.1)

"^DD",404.57,404.57,0,"PT",404.59,.01)

"^DD",404.57,404.57,0,"PT",409.3,6)

"^DD",404.57,404.57,0,"PT",500065,.01)

"^DD",404.57,404.57,0,"VRPK")
SD
"^DD",404.57,404.57,.01,0)
POSITION^RFX^^0;1^N SCZ K:$L(X)>30!($L(X)<3) X D:$D(X) IPTF^SCMCTPU(X,.SCZ,.X)
"^DD",404.57,404.57,.01,1,0)
^.1
"^DD",404.57,404.57,.01,1,1,0)
404.57^B
"^DD",404.57,404.57,.01,1,1,1)
S ^SCTM(404.57,"B",$E(X,1,30),DA)=""
"^DD",404.57,404.57,.01,1,1,2)
K ^SCTM(404.57,"B",$E(X,1,30),DA)
"^DD",404.57,404.57,.01,1,2,0)
404.57^APRIMARY^MUMPS
"^DD",404.57,404.57,.01,1,2,1)
N SC2 S SC2=$P($G(^SCTM(404.57,DA,0)),U,2) I SC2 S ^SCTM(404.57,"APRIMARY",X,SC2,DA)=""
"^DD",404.57,404.57,.01,1,2,2)
N SC2 S SC2=$P($G(^SCTM(404.57,DA,0)),U,2) I SC2 K ^SCTM(404.57,"APRIMARY",X,SC2,DA)
"^DD",404.57,404.57,.01,1,2,"%D",0)
^^1^1^2951214^^^^
"^DD",404.57,404.57,.01,1,2,"%D",1,0)
This sorts by POSITION(#.01), then by TEAM(#.02).  There is an associated cross reference for the TEAM Field (#.02).
"^DD",404.57,404.57,.01,1,2,"DT")
2950503
"^DD",404.57,404.57,.01,1,3,0)
404.57^ATMPOS^MUMPS
"^DD",404.57,404.57,.01,1,3,1)
N SC1 S SC1=$P($G(^SCTM(404.57,DA,0)),U,2) I SC1 S ^SCTM(404.57,"ATMPOS",SC1,X,DA)=""
"^DD",404.57,404.57,.01,1,3,2)
N SC1 S SC1=$P($G(^SCTM(404.57,DA,0)),U,2) I SC1 K ^SCTM(404.57,"ATMPOS",SC1,X,DA)
"^DD",404.57,404.57,.01,1,3,"%D",0)
^^1^1^2950503^
"^DD",404.57,404.57,.01,1,3,"%D",1,0)
This sorts by TEAM(#.02), then by POSITION(#.01).  There is an associated cross reference for the TEAM Field (#.02).
"^DD",404.57,404.57,.01,1,3,"DT")
2950503
"^DD",404.57,404.57,.01,3)
Answer must be 3-30 characters in length - No duplicate position names within a team.
"^DD",404.57,404.57,.01,21,0)
^.001^1^1^3051011^^^^
"^DD",404.57,404.57,.01,21,1,0)
This is the Name of the Team Position.
"^DD",404.57,404.57,.01,"DT")
2960306
"^DD",404.57,404.57,.02,0)
TEAM^RP404.51'X^SCTM(404.51,^0;2^N SC D:$D(X)#2 IPTF^SCMCTPU(.SC,X,.X)
"^DD",404.57,404.57,.02,1,0)
^.1
"^DD",404.57,404.57,.02,1,1,0)
404.57^APRIMARY1^MUMPS
"^DD",404.57,404.57,.02,1,1,1)
N SC1 S SC1=$P($G(^SCTM(404.57,DA,0)),U,1) I SC1]"" S ^SCTM(404.57,"APRIMARY",SC1,X,DA)=""
"^DD",404.57,404.57,.02,1,1,2)
N SC1 S SC1=$P($G(^SCTM(404.57,DA,0)),U,1) I SC1]"" K ^SCTM(404.57,"APRIMARY",SC1,X,DA)
"^DD",404.57,404.57,.02,1,1,"%D",0)
^^1^1^2951214^^^^
"^DD",404.57,404.57,.02,1,1,"%D",1,0)
This sorts by POSITION(#.01), then by TEAM(#.02).  There is an associated cross reference for the POSITION Field (#.01).
"^DD",404.57,404.57,.02,1,1,"DT")
2950503
"^DD",404.57,404.57,.02,1,2,0)
404.57^C
"^DD",404.57,404.57,.02,1,2,1)
S ^SCTM(404.57,"C",$E(X,1,30),DA)=""
"^DD",404.57,404.57,.02,1,2,2)
K ^SCTM(404.57,"C",$E(X,1,30),DA)
"^DD",404.57,404.57,.02,1,2,"DT")
2950308
"^DD",404.57,404.57,.02,1,3,0)
404.57^ATMPOS1^MUMPS
"^DD",404.57,404.57,.02,1,3,1)
N SC2 S SC2=$P($G(^SCTM(404.57,DA,0)),U,1) I SC2]"" S ^SCTM(404.57,"ATMPOS",X,SC2,DA)=""
"^DD",404.57,404.57,.02,1,3,2)
N SC2 S SC2=$P($G(^SCTM(404.57,DA,0)),U,1) I SC2]"" K ^SCTM(404.57,"ATMPOS",X,SC2,DA)
"^DD",404.57,404.57,.02,1,3,"%D",0)
^^1^1^2950503^
"^DD",404.57,404.57,.02,1,3,"%D",1,0)
This sorts by TEAM(#.02), then by POSITION(#.01).  There is an associated cross reference for the POSITION Field (#.01).
"^DD",404.57,404.57,.02,1,3,"DT")
2950503
"^DD",404.57,404.57,.02,3)
This is the entry in the team File
"^DD",404.57,404.57,.02,21,0)
^^1^1^2951128^^^^
"^DD",404.57,404.57,.02,21,1,0)
Entry in the team file.
"^DD",404.57,404.57,.02,23,0)
^^1^1^2951128^^
"^DD",404.57,404.57,.02,23,1,0)
Pointer  to TEAM File (#404.51)
"^DD",404.57,404.57,.02,"DT")
2950905
"^DD",404.57,404.57,.03,0)
STANDARD ROLE NAME^RP403.46'^SD(403.46,^0;3^Q
"^DD",404.57,404.57,.03,1,0)
^.1
"^DD",404.57,404.57,.03,1,1,0)
404.57^AC
"^DD",404.57,404.57,.03,1,1,1)
S ^SCTM(404.57,"AC",$E(X,1,30),DA)=""
"^DD",404.57,404.57,.03,1,1,2)
K ^SCTM(404.57,"AC",$E(X,1,30),DA)
"^DD",404.57,404.57,.03,1,1,"DT")
2960126
"^DD",404.57,404.57,.03,3)
This is the associated standard position from the list provided by VACO.
"^DD",404.57,404.57,.03,21,0)
^^3^3^2950228^^^
"^DD",404.57,404.57,.03,21,1,0)
Standard role the provider performs as part of this team.
"^DD",404.57,404.57,.03,21,2,0)
 
"^DD",404.57,404.57,.03,21,3,0)
These standard positions are defined by Central Office.
"^DD",404.57,404.57,.03,"DT")
2960126
"^DD",404.57,404.57,.04,0)
POSSIBLE PRIMARY PRACTITIONER?^S^1:YES;0:NO;^0;4^Q
"^DD",404.57,404.57,.04,3)
'YES' indicates that this position may function as primary practitioner or attending.
"^DD",404.57,404.57,.04,21,0)
^^4^4^2990623^^^^
"^DD",404.57,404.57,.04,21,1,0)
Can this position be the primary care provider for a patient?
"^DD",404.57,404.57,.04,21,2,0)
 
"^DD",404.57,404.57,.04,21,3,0)
(Even if the position's principle purpose is not primary care, it still maybe able act as a primary care provider for some patients. This field indicates if that is possible.)
"^DD",404.57,404.57,.04,21,4,0)
Note: This also enables the position to be a PC Attending Position.
"^DD",404.57,404.57,.04,"DT")
3030213
"^DD",404.57,404.57,.08,0)
MAX NUMBER OF PATIENTS^NJ5,0^^0;8^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",404.57,404.57,.08,3)
Type a Number between 0 and 99999, 0 Decimal Digits
"^DD",404.57,404.57,.08,21,0)
^^2^2^2960528^^^
"^DD",404.57,404.57,.08,21,1,0)
Once the current number of assigned patients reaches this
"^DD",404.57,404.57,.08,21,2,0)
level, further assignment of this position should be avoided.
"^DD",404.57,404.57,.08,"DT")
3030213
"^DD",404.57,404.57,.09,0)
ASSOCIATED CLINIC^*P44'^SC(^0;9^S DIC("S")="IF $P(^(0),""^"",3)=""C""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",404.57,404.57,.09,1,0)
^.1
"^DD",404.57,404.57,.09,1,1,0)
404.57^D
"^DD",404.57,404.57,.09,1,1,1)
S ^SCTM(404.57,"D",$E(X,1,30),DA)=""
"^DD",404.57,404.57,.09,1,1,2)
K ^SCTM(404.57,"D",$E(X,1,30),DA)
"^DD",404.57,404.57,.09,1,1,"DT")
2950313
"^DD",404.57,404.57,.09,1,2,0)
404.57^ASCTEAM^MUMPS
"^DD",404.57,404.57,.09,1,2,1)
D SETSCTM^SCMCDD2(DA,X)
"^DD",404.57,404.57,.09,1,2,2)
D KILLSCTM^SCMCDD2(DA,X)
"^DD",404.57,404.57,.09,1,2,"%D",0)
^^4^4^2960401^
"^DD",404.57,404.57,.09,1,2,"%D",1,0)
This edits the whole cross reference in the Hospital Location File (#44),
"^DD",404.57,404.57,.09,1,2,"%D",2,0)
'TEAM'.  This cross-reference allows users to use the team name to find
"^DD",404.57,404.57,.09,1,2,"%D",3,0)
clinics associated with the team's team positions.  See the 'ASCTEAM'
"^DD",404.57,404.57,.09,1,2,"%D",4,0)
cross-reference of the TEAM (#404.51) File's NAME (#.01) Field.
"^DD",404.57,404.57,.09,1,2,"DT")
2960401
"^DD",404.57,404.57,.09,3)
Enter the clinic that is associated with this position.
"^DD",404.57,404.57,.09,12)
Allows only clinic locations.
"^DD",404.57,404.57,.09,12.1)
S DIC("S")="IF $P(^(0),""^"",3)=""C"""
"^DD",404.57,404.57,.09,21,0)
^^5^5^2950502^^^^
"^DD",404.57,404.57,.09,21,1,0)
This field allows the site to associate a specific clinic with a
"^DD",404.57,404.57,.09,21,2,0)
Team Position.
"^DD",404.57,404.57,.09,21,3,0)
 
"^DD",404.57,404.57,.09,21,4,0)
This association will be used to find the clinics for team members
"^DD",404.57,404.57,.09,21,5,0)
during various appointing and information processes.
"^DD",404.57,404.57,.09,"DT")
2960401
"^DD",404.57,404.57,.1,0)
*PRECEPTOR POSITION^*P404.57'^SCTM(404.57,^0;10^S DIC("S")="I $$OKPREC^SCAPMCU1($P(^SCTM(404.57,DA,0),U,2))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",404.57,404.57,.1,1,0)
^.1^^0
"^DD",404.57,404.57,.1,3)
Enter position that supervises this current position.
"^DD",404.57,404.57,.1,12)
requires preceptor to be of team & possible preceptor
"^DD",404.57,404.57,.1,12.1)
S DIC("S")="I $$OKPREC^SCAPMCU1($P(^SCTM(404.57,DA,0),U,2))"
"^DD",404.57,404.57,.1,21,0)
^^5^5^2950717^^^^
"^DD",404.57,404.57,.1,21,1,0)
This field contains the name of the Team Position that is responsible for
"^DD",404.57,404.57,.1,21,2,0)
supervising this current position.
"^DD",404.57,404.57,.1,21,3,0)
 
"^DD",404.57,404.57,.1,21,4,0)
It is an optional field. However, when indicated, this field usually
"^DD",404.57,404.57,.1,21,5,0)
contains an attending position.
"^DD",404.57,404.57,.1,"DT")
2990610
"^DD",404.57,404.57,.11,0)
BEEPER NUMBER^F^^0;11^K:$L(X)>20!($L(X)<3) X
"^DD",404.57,404.57,.11,3)
Answer must be 3-20 characters in length.
"^DD",404.57,404.57,.11,21,0)
^^1^1^2950801^^
"^DD",404.57,404.57,.11,21,1,0)
This is the pager or beeper number that is used by this team position.
"^DD",404.57,404.57,.11,"DT")
2950801
"^DD",404.57,404.57,.12,0)
CAN ACT AS PRECEPTOR?^S^1:YES;0:NO;^0;12^Q
"^DD",404.57,404.57,.12,3)
This indicates if position can supervise other positions.
"^DD",404.57,404.57,.12,21,0)
^^2^2^2950717^
"^DD",404.57,404.57,.12,21,1,0)
By answering 'YES', this position may be used as a preceptor position
"^DD",404.57,404.57,.12,21,2,0)
for the team.
"^DD",404.57,404.57,.12,"DT")
2950717
"^DD",404.57,404.57,.13,0)
USER CLASS^P8930'^USR(8930,^0;13^Q
"^DD",404.57,404.57,.13,1,0)
^.1
"^DD",404.57,404.57,.13,1,1,0)
404.57^AUSR
"^DD",404.57,404.57,.13,1,1,1)
S ^SCTM(404.57,"AUSR",$E(X,1,30),DA)=""
"^DD",404.57,404.57,.13,1,1,2)
K ^SCTM(404.57,"AUSR",$E(X,1,30),DA)
"^DD",404.57,404.57,.13,1,1,"%D",0)
^^1^1^2960322^^
"^DD",404.57,404.57,.13,1,1,"%D",1,0)
This provides a x-ref on the USER CLASS Field
"^DD",404.57,404.57,.13,1,1,"DT")
2960322
"^DD",404.57,404.57,.13,3)
Class of users who will fill this position
"^DD",404.57,404.57,.13,21,0)
^^2^2^2960517^^^^
"^DD",404.57,404.57,.13,21,1,0)
This is an entry in the USR CLASS file to which anyone assigned to the
"^DD",404.57,404.57,.13,21,2,0)
position must belong.
"^DD",404.57,404.57,.13,"DT")
2960517
"^DD",404.57,404.57,1,0)
POSITION DESCRIPTION^404.571^^1;0
"^DD",404.57,404.57,2.01,0)
DEATH MESSAGE^S^T:TEAM'S PATIENTS;P:POSITION'S PATIENTS;N:DO NOT SEND;^2;1^Q
"^DD",404.57,404.57,2.01,3)
This determines for which patients the position receives messages related to patient death.
"^DD",404.57,404.57,2.01,21,0)
^.001^1^1^3030922^^^^
"^DD",404.57,404.57,2.01,21,1,0)
This determines for which patients the position receives messages related to patient death.
"^DD",404.57,404.57,2.01,"DT")
2960502
"^DD",404.57,404.57,2.02,0)
INPATIENT MESSAGE^S^T:TEAM'S PATIENTS;P:POSITION'S PATIENTS;N:DO NOT SEND;^2;2^Q
"^DD",404.57,404.57,2.02,3)
This determines for which patients the position receives messages related to inpatient activity.
"^DD",404.57,404.57,2.02,21,0)
^^1^1^2960502^^^^
"^DD",404.57,404.57,2.02,21,1,0)
This determines for which patients the position receives messages related to inpatient activity.
"^DD",404.57,404.57,2.02,"DT")
2960502
"^DD",404.57,404.57,2.03,0)
TEAM MESSAGE^S^T:TEAM'S PATIENTS;P:POSITION'S PATIENTS;N:DO NOT SEND;^2;3^Q
"^DD",404.57,404.57,2.03,3)
This determines for which patients the position receives messages related to team activity.
"^DD",404.57,404.57,2.03,21,0)
^^3^3^2960502^^^^
"^DD",404.57,404.57,2.03,21,1,0)
This determines for which patients the position receives messages related 
"^DD",404.57,404.57,2.03,21,2,0)
to team activity such as assignment or re-assignment of a position or
"^DD",404.57,404.57,2.03,21,3,0)
team to the patient.
"^DD",404.57,404.57,2.03,"DT")
2960502
"^DD",404.57,404.57,2.04,0)
CONSULT MESSAGE^S^T:TEAM'S PATIENTS;P:POSITION'S PATIENTS;N:DO NOT SEND;^2;4^Q
"^DD",404.57,404.57,2.04,3)
This determines for which patients the position receives messages related to activity in clinics to which the patient is not enrolled.
"^DD",404.57,404.57,2.04,21,0)
^^1^1^2960502^^^^
"^DD",404.57,404.57,2.04,21,1,0)
This determines for which patients the position receives messages related to activity in clinics to which the patient is not enrolled.
"^DD",404.57,404.57,2.04,"DT")
2960502
"^DD",404.57,404.57,2.05,0)
PRECEPTOR DEATH MESSAGE^S^1:YES;0:NO;^2;5^Q
"^DD",404.57,404.57,2.05,3)
Enter 'YES' if the preceptor should be notified on death entries.
"^DD",404.57,404.57,2.05,21,0)
^^2^2^2990511^
"^DD",404.57,404.57,2.05,21,1,0)
A yes entry triggers a mailmessage on a death entry for the preceptor of
"^DD",404.57,404.57,2.05,21,2,0)
this position.
"^DD",404.57,404.57,2.05,"DT")
2990511
"^DD",404.57,404.57,2.06,0)
PRECEPTOR INPATIENT MESSAGE^S^1:YES;0:NO;^2;6^Q
"^DD",404.57,404.57,2.06,3)
Enter 'YES' if the preceptor should be notified on inpatient activity.
"^DD",404.57,404.57,2.06,21,0)
^^2^2^2990511^
"^DD",404.57,404.57,2.06,21,1,0)
A yes entry triggers a mailmessage on inpatient activity for the preceptor
"^DD",404.57,404.57,2.06,21,2,0)
ofthis position.
"^DD",404.57,404.57,2.06,"DT")
2990511
"^DD",404.57,404.57,2.07,0)
PRECEPTOR TEAM MESSAGE^S^1:YES;0:NO;^2;7^Q
"^DD",404.57,404.57,2.07,3)
Enter 'YES' if the preceptor should be notified on team activity.
"^DD",404.57,404.57,2.07,21,0)
^^2^2^2990511^
"^DD",404.57,404.57,2.07,21,1,0)
A yes entry triggers a mailmessage on team activity for the preceptor
"^DD",404.57,404.57,2.07,21,2,0)
of this position.
"^DD",404.57,404.57,2.07,"DT")
2990511
"^DD",404.57,404.57,2.08,0)
PRECEPTOR CONSULT MESSAGE^S^1:YES;0:NO;^2;8^Q
"^DD",404.57,404.57,2.08,3)
Enter 'YES' if the preceptor should be notified on consult activity.
"^DD",404.57,404.57,2.08,21,0)
^^2^2^2990511^
"^DD",404.57,404.57,2.08,21,1,0)
A yes entry triggers a mailmessage on consult activity for the preceptor
"^DD",404.57,404.57,2.08,21,2,0)
of this position.
"^DD",404.57,404.57,2.08,"DT")
2990511
"^DD",404.57,404.57,2.09,0)
AUTOMATIC INACTIVATION MESSAGE^S^T:TEAM'S PATIENTS;P:POSITION'S PATIENTS;N:DO NOT SEND;^2;9^Q
"^DD",404.57,404.57,2.09,3)
This determines for which patients the position receives messages related to patient inactivation.
"^DD",404.57,404.57,2.09,21,0)
^^1^1^3030922^
"^DD",404.57,404.57,2.09,21,1,0)
Determines where patient inactivation messages are sent
"^DD",404.57,404.57,2.09,"DT")
3030922
"^DD",404.57,404.57,2.1,0)
PRECEPTOR INACTIVATION MESSAGE^S^1:YES;0:NO;^2;10^Q
"^DD",404.57,404.57,2.1,3)
Enter 'YES' if the preceptor should be notified on automatic patient inactivation.
"^DD",404.57,404.57,2.1,21,0)
^.001^1^1^3030922^^
"^DD",404.57,404.57,2.1,21,1,0)
Notify Preceptor if patient is automatically inactivated
"^DD",404.57,404.57,2.1,"DT")
3030922
"^DD",404.57,404.57,5,0)
ASSOCIATED CLINICS^404.575PA^^5;0
"^DD",404.57,404.57,5,21,0)
^.001^2^2^3040406^^
"^DD",404.57,404.57,5,21,1,0)
Multiple Entry of Associated Clinics. This replaces single value 
"^DD",404.57,404.57,5,21,2,0)
used before patch SD*5.3*297
"^DD",404.57,404.57,200,0)
CURRENT # OF PC PATIENTS^CJ8^^ ; ^S X=$$PCPOSCNT^SCAPMCU1(D0,DT)
"^DD",404.57,404.57,200,.1)
CURRENT NUMBER OF PRIMARY CARE PATIENTS
"^DD",404.57,404.57,200,9)
^
"^DD",404.57,404.57,200,9.01)

"^DD",404.57,404.57,200,9.1)
S X=$$PCPOSCNT^SCAPMCU1(D0,DT)
"^DD",404.57,404.57,200,21,0)
^^2^2^2960520^^^^
"^DD",404.57,404.57,200,21,1,0)
This calculates the current number of Primary Care patients
"^DD",404.57,404.57,200,21,2,0)
for this team position.
"^DD",404.57,404.57,200,"DT")
2950728
"^DD",404.57,404.57,201,0)
CURRENT # OF PATIENTS^CJ8^^ ; ^S X=$$PCPOSCNT^SCAPMCU1(D0,DT,0)
"^DD",404.57,404.57,201,9)
^
"^DD",404.57,404.57,201,9.01)

"^DD",404.57,404.57,201,9.1)
S X=$$PCPOSCNT^SCAPMCU1(D0,DT,0)
"^DD",404.57,404.57,201,21,0)
^^2^2^2960520^
"^DD",404.57,404.57,201,21,1,0)
This is the number of all patients (primary care & otherwise) associated
"^DD",404.57,404.57,201,21,2,0)
with the team.
"^DD",404.57,404.57,201,"DT")
3040322
"^DD",404.57,404.57,202,0)
FUTURE # OF PC PATIENTS^CJ8,0^^ ; ^S X=$$PCPOSCNT^SCAPMCU1(D0,DT,1,1) S X=$J(X,0,0)
"^DD",404.57,404.57,202,9)
^
"^DD",404.57,404.57,202,9.01)

"^DD",404.57,404.57,202,9.1)
S X=$$PCPOSCNT^SCAPMCU1(D0,DT,1,1)
"^DD",404.57,404.57,202,21,0)
^^1^1^2990429^
"^DD",404.57,404.57,202,21,1,0)
The number of current AND future PC assignments to this team position.
"^DD",404.57,404.57,203,0)
FUTURE # OF PATIENTS^CJ8,0^^ ; ^S X=$$PCPOSCNT^SCAPMCU1(D0,DT,0,1) S X=$J(X,0,0)
"^DD",404.57,404.57,203,9)
^
"^DD",404.57,404.57,203,9.01)

"^DD",404.57,404.57,203,9.1)
S X=$$PCPOSCNT^SCAPMCU1(D0,DT,0,1)
"^DD",404.57,404.57,203,21,0)
^^1^1^2990429^
"^DD",404.57,404.57,203,21,1,0)
The number of current AND future assignments to this team position.
"^DD",404.57,404.57,300,0)
CURRENT STATUS^CJ8^^ ; ^S X=$S((+$$ACTTP^SCMCTPU(D0)=1):"Active",1:"Inactive")
"^DD",404.57,404.57,300,9)
^
"^DD",404.57,404.57,300,9.01)

"^DD",404.57,404.57,300,9.1)
S X=$S((+$$ACTTP^SCMCTPU(D0)=1):"Active",1:"Inactive")
"^DD",404.57,404.57,300,21,0)
^^1^1^2960213^^^^
"^DD",404.57,404.57,300,21,1,0)
This indicates if the team position is active on the current date.
"^DD",404.57,404.57,300,"DT")
2950714
"^DD",404.57,404.57,301,0)
CURRENT EFFECTIVE DATE^CJ8^^ ; ^N Y S X="" S Y=$P($$ACTTP^SCMCTPU(D0),U,2) D DD^%DT S X=Y
"^DD",404.57,404.57,301,9)
^
"^DD",404.57,404.57,301,9.01)

"^DD",404.57,404.57,301,9.1)
N Y S X="" S Y=$P($$ACTTP^SCMCTPU(D0),U,2) D DD^%DT S X=Y
"^DD",404.57,404.57,301,21,0)
^^1^1^2950807^^^^
"^DD",404.57,404.57,301,21,1,0)
This is the most recent date (not in future) that the active status changed.
"^DD",404.57,404.57,302,0)
CURRENT ACTIVATION DATE^CJ8^^ ; ^N Y S X="" S Y=$P($$DATES^SCAPMCU1(404.59,D0,DT),U,2) D DD^%DT S X=Y
"^DD",404.57,404.57,302,9)
^
"^DD",404.57,404.57,302,9.01)

"^DD",404.57,404.57,302,9.1)
N Y S X="" S Y=$P($$DATES^SCAPMCU1(404.59,D0,DT),U,2) D DD^%DT S X=Y
"^DD",404.57,404.57,302,21,0)
^^4^4^2950807^^^^
"^DD",404.57,404.57,302,21,1,0)
This is the activation date of the position based on today's date:
"^DD",404.57,404.57,302,21,2,0)
  For positions never active - this is the next date where the position is active
"^DD",404.57,404.57,302,21,3,0)
  For positions that are active now - this is the date it became active
"^DD",404.57,404.57,302,21,4,0)
  For positions that are currently inactive - this is the last activation date
"^DD",404.57,404.57,303,0)
CURRENT INACTIVATION DATE^CJ8^^ ; ^N Y S X="" S Y=$P($$DATES^SCAPMCU1(404.59,D0,DT),U,3) D DD^%DT S X=Y
"^DD",404.57,404.57,303,9)
^
"^DD",404.57,404.57,303,9.01)

"^DD",404.57,404.57,303,9.1)
N Y S X="" S Y=$P($$DATES^SCAPMCU1(404.59,D0,DT),U,3) D DD^%DT S X=Y
"^DD",404.57,404.57,303,21,0)
^^2^2^2950807^^^^
"^DD",404.57,404.57,303,21,1,0)
If it is inactive, this is the day the position became inactive.  If it is
"^DD",404.57,404.57,303,21,2,0)
active it is the day the position will become inactive.
"^DD",404.57,404.57,304,0)
CURRENT PRACTITIONER^CJ8^^ ; ^S X=$P($$GETPRTP^SCAPMCU2(D0,DT),U,2)
"^DD",404.57,404.57,304,9)
^
"^DD",404.57,404.57,304,9.01)

"^DD",404.57,404.57,304,9.1)
S X=$P($$GETPRTP^SCAPMCU2(D0,DT),U,2)
"^DD",404.57,404.57,304,"DT")
3031113
"^DD",404.57,404.57,305,0)
CURRENT PRECEPTOR POSITION^CJ40^^ ; ^S X=$P($$OKPREC3^SCMCLK(D0,DT),U,2)
"^DD",404.57,404.57,305,9)
^
"^DD",404.57,404.57,305,9.01)

"^DD",404.57,404.57,305,9.1)
S X=$P($$OKPREC3^SCMCLK(D0,DT),U,2)
"^DD",404.57,404.57,305,"DT")
2990412
"^DD",404.57,404.57,306,0)
CURRENT PRECEPTOR^CJ30^^ ; ^S X=$P($$OKPREC2^SCMCLK(D0,DT),U,2)
"^DD",404.57,404.57,306,9)
^
"^DD",404.57,404.57,306,9.01)

"^DD",404.57,404.57,306,9.1)
S X=$P($$OKPREC2^SCMCLK(D0,DT),U,2)
"^DD",404.57,404.57,307,0)
ACTIVE PRECEPTS^CJ3^^ ; ^S X=$S(+$$OKPREC1^SCMCLK(D0,DT)=0:"YES",1:"")
"^DD",404.57,404.57,307,9)
^
"^DD",404.57,404.57,307,9.01)

"^DD",404.57,404.57,307,9.1)
S X=$S(+$$OKPREC1^SCMCLK(D0,DT)=0:"YES",1:"")
"^DD",404.57,404.57,400,0)
ALLOW PRECEPTED CHANGE^CJ8^^ ; ^S X=$S($$OKPREC4^SCMCLK(D0)=1:"YES",1:"NO")
"^DD",404.57,404.57,400,9)
^
"^DD",404.57,404.57,400,9.01)

"^DD",404.57,404.57,400,9.1)
S X=$S($$OKPREC4^SCMCLK(D0)=1:"YES",1:"NO")
"^DD",404.57,404.57,400,21,0)
^^4^4^2990624^
"^DD",404.57,404.57,400,21,1,0)
Determines if a patient assignment has been made after the date a position
"^DD",404.57,404.57,400,21,2,0)
became precepted.  A 'NO' return flags the GUI to always require an active
"^DD",404.57,404.57,400,21,3,0)
preceptor assignment and disables the 'can act as preceptor' and 'can act
"^DD",404.57,404.57,400,21,4,0)
as preceptor' controls.
"^DD",404.57,404.57,401,0)
ALLOW PRECEPTOR CHANGE^CJ8^^ ; ^S X=$S($$OKPREC1^SCMCLK(D0,1)=1:"YES",1:"NO")
"^DD",404.57,404.57,401,9)
^
"^DD",404.57,404.57,401,9.01)

"^DD",404.57,404.57,401,9.1)
S X=$S($$OKPREC1^SCMCLK(D0,1)=1:"YES",1:"NO")
"^DD",404.57,404.57,401,21,0)
^^4^4^2990624^
"^DD",404.57,404.57,401,21,1,0)
Determines if a preceptor assignment has been made after the date a
"^DD",404.57,404.57,401,21,2,0)
position became preceptor.  A 'NO' return flags the GUI to always require
"^DD",404.57,404.57,401,21,3,0)
an active staff assignment and disables the 'can act as preceptor' and
"^DD",404.57,404.57,401,21,4,0)
'can act as preceptor' controls.
"^DD",404.57,404.57,402,0)
STAFF/POS INCONSISTENT REASON^CJ40^^ ; ^D POSIN^SCMCTSK3(D0)
"^DD",404.57,404.57,402,9)
^
"^DD",404.57,404.57,402,9.01)

"^DD",404.57,404.57,402,9.1)
D POSIN^SCMCTSK3(D0)
"^DD",404.57,404.57,402,21,0)
^^4^4^3040402^
"^DD",404.57,404.57,402,21,1,0)
This is a computed field that checks for any inconsistency
"^DD",404.57,404.57,402,21,2,0)
between the Position Role, PC assignment and the Person
"^DD",404.57,404.57,402,21,3,0)
Class of the current active provider.
"^DD",404.57,404.57,402,21,4,0)
The value is blank if there is not an inconsistency.
"^DD",404.57,404.57,402,"DT")
3040323
"^DD",404.57,404.571,0)
POSITION DESCRIPTION SUB-FIELD^^.01^1
"^DD",404.57,404.571,0,"DT")
2950222
"^DD",404.57,404.571,0,"NM","POSITION DESCRIPTION")

"^DD",404.57,404.571,0,"UP")
404.57
"^DD",404.57,404.571,.01,0)
POSITION DESCRIPTION^W^^0;1^Q
"^DD",404.57,404.571,.01,3)
Detailed description of position where duties of the role are outlined.
"^DD",404.57,404.571,.01,21,0)
^^1^1^2950222^
"^DD",404.57,404.571,.01,21,1,0)
This is the long description of the position.
"^DD",404.57,404.571,.01,"DT")
2950222
"^DD",404.57,404.575,0)
ASSOCIATED CLINICS SUB-FIELD^^.01^1
"^DD",404.57,404.575,0,"DT")
3031107
"^DD",404.57,404.575,0,"IX","ASCTEAM",404.575,.01)

"^DD",404.57,404.575,0,"IX","B",404.575,.01)

"^DD",404.57,404.575,0,"NM","ASSOCIATED CLINICS")

"^DD",404.57,404.575,0,"UP")
404.57
"^DD",404.57,404.575,.01,0)
ASSOCIATED CLINICS^*P44'X^SC(^0;1^S DIC("S")="I $P(^(0),U,3)=""C""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X I $D(X) S DINUM=X
"^DD",404.57,404.575,.01,1,0)
^.1
"^DD",404.57,404.575,.01,1,1,0)
404.575^B
"^DD",404.57,404.575,.01,1,1,1)
S ^SCTM(404.57,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",404.57,404.575,.01,1,1,2)
K ^SCTM(404.57,DA(1),5,"B",$E(X,1,30),DA)
"^DD",404.57,404.575,.01,1,2,0)
404.575^ASCTEAM^MUMPS
"^DD",404.57,404.575,.01,1,2,1)
D SETSCTM^SCMCDD2(DA(1),X)
"^DD",404.57,404.575,.01,1,2,2)
D KILLSCTM^SCMCDD2(DA(1),X)
"^DD",404.57,404.575,.01,1,2,"%D",0)
^^1^1^3031107^
"^DD",404.57,404.575,.01,1,2,"%D",1,0)
Set Team entry in Clinic file
"^DD",404.57,404.575,.01,1,2,"DT")
3031107
"^DD",404.57,404.575,.01,3)
Enter Clinic(s) associated with this position
"^DD",404.57,404.575,.01,12)
Only Clinics
"^DD",404.57,404.575,.01,12.1)
S DIC("S")="I $P(^(0),U,3)=""C"""
"^DD",404.57,404.575,.01,21,0)
^.001^3^3^3040402^^
"^DD",404.57,404.575,.01,21,1,0)
Clinics associated with this position
"^DD",404.57,404.575,.01,21,2,0)
Replaces single value field used before patch
"^DD",404.57,404.575,.01,21,3,0)
SD*5.3*297
"^DD",404.57,404.575,.01,"DT")
3031107
"^DIC",403.46,403.46,0)
STANDARD POSITION^403.46
"^DIC",403.46,403.46,0,"GL")
^SD(403.46,
"^DIC",403.46,403.46,"%D",0)
^^14^14^2960415^^^
"^DIC",403.46,403.46,"%D",1,0)
This table contains the standard team positions used by PCMM.
"^DIC",403.46,403.46,"%D",2,0)
 
"^DIC",403.46,403.46,"%D",3,0)
Each Team Position entry must map to one of these standard roles.
"^DIC",403.46,403.46,"%D",4,0)
 
"^DIC",403.46,403.46,"%D",5,0)
Sites are NOT allowed to edit the structure of this file.  Making any 
"^DIC",403.46,403.46,"%D",6,0)
kind of revision to this file may result in a faulty performance of the
"^DIC",403.46,403.46,"%D",7,0)
Primary Care Management Software or other DHCP software that uses this 
"^DIC",403.46,403.46,"%D",8,0)
file.  Updates to this file should only be done as a result of an 
"^DIC",403.46,403.46,"%D",9,0)
official patch to the Scheduling Module.
"^DIC",403.46,403.46,"%D",10,0)
 
"^DIC",403.46,403.46,"%D",11,0)
Sites are NOT allowed to edit this file's fields via FileMan, without 
"^DIC",403.46,403.46,"%D",12,0)
the direction of DHCP Customer Support.  Deleting, changing, or adding 
"^DIC",403.46,403.46,"%D",13,0)
entries to this file may result in faulty performance of the Primary 
"^DIC",403.46,403.46,"%D",14,0)
Care Management Software or other DHCP software that uses this file.
"^DIC",403.46,"B","STANDARD POSITION",403.46)

"^DIC",404.43,404.43,0)
PATIENT TEAM POSITION ASSIGNMENT^404.43
"^DIC",404.43,404.43,0,"GL")
^SCPT(404.43,
"^DIC",404.43,404.43,"%D",0)
^^12^12^2990802^^
"^DIC",404.43,404.43,"%D",1,0)
This file contains a history of positions that have been assigned
"^DIC",404.43,404.43,"%D",2,0)
to the patient.
"^DIC",404.43,404.43,"%D",3,0)
Sites are NOT allowed to edit the structure of this file.  Making any 
"^DIC",404.43,404.43,"%D",4,0)
kind of revision to this file may result in a faulty performance of the
"^DIC",404.43,404.43,"%D",5,0)
Primary Care Management Software or other DHCP software that uses this 
"^DIC",404.43,404.43,"%D",6,0)
file.  Updates to this file should only be done as a result of an 
"^DIC",404.43,404.43,"%D",7,0)
official patch to the Scheduling Module.
"^DIC",404.43,404.43,"%D",8,0)
 
"^DIC",404.43,404.43,"%D",9,0)
Sites are NOT allowed to edit this file's fields via FileMan, without 
"^DIC",404.43,404.43,"%D",10,0)
the direction of DHCP Customer Support.  Deleting, changing, or adding 
"^DIC",404.43,404.43,"%D",11,0)
entries to this file may result in faulty performance of the Primary 
"^DIC",404.43,404.43,"%D",12,0)
Care Management Software or other DHCP software that uses this file.
"^DIC",404.43,"B","PATIENT TEAM POSITION ASSIGNMENT",404.43)

"^DIC",404.44,404.44,0)
PCMM PARAMETER^404.44
"^DIC",404.44,404.44,0,"GL")
^SCTM(404.44,
"^DIC",404.44,404.44,"%",0)
^1.005^^0
"^DIC",404.44,404.44,"%D",0)
^^4^4^2990817^^
"^DIC",404.44,404.44,"%D",1,0)
This is the parameter file for PCMM.  There should be only one entry in this
"^DIC",404.44,404.44,"%D",2,0)
file.  The IEN of this entry must be 1.  If other entries are added and the
"^DIC",404.44,404.44,"%D",3,0)
code not adjusted PCMM will not function properly.  This file should only be
"^DIC",404.44,404.44,"%D",4,0)
updated or modified with the help of NVS or a PCMM developer.
"^DIC",404.44,"B","PCMM PARAMETER",404.44)

"^DIC",404.52,404.52,0)
POSITION ASSIGNMENT HISTORY^404.52PI
"^DIC",404.52,404.52,0,"GL")
^SCTM(404.52,
"^DIC",404.52,404.52,"%D",0)
^^12^12^2960415^^^^
"^DIC",404.52,404.52,"%D",1,0)
This table holds the history of which users were assigned to each
"^DIC",404.52,404.52,"%D",2,0)
Team Position and when.
"^DIC",404.52,404.52,"%D",3,0)
Sites are NOT allowed to edit the structure of this file.  Making any 
"^DIC",404.52,404.52,"%D",4,0)
kind of revision to this file may result in a faulty performance of the
"^DIC",404.52,404.52,"%D",5,0)
Primary Care Management Software or other DHCP software that uses this 
"^DIC",404.52,404.52,"%D",6,0)
file.  Updates to this file should only be done as a result of an 
"^DIC",404.52,404.52,"%D",7,0)
official patch to the Scheduling Module.
"^DIC",404.52,404.52,"%D",8,0)
 
"^DIC",404.52,404.52,"%D",9,0)
Sites are NOT allowed to edit this file's fields via FileMan, without 
"^DIC",404.52,404.52,"%D",10,0)
the direction of DHCP Customer Support.  Deleting, changing, or adding 
"^DIC",404.52,404.52,"%D",11,0)
entries to this file may result in faulty performance of the Primary 
"^DIC",404.52,404.52,"%D",12,0)
Care Management Software or other DHCP software that uses this file.
"^DIC",404.52,"B","POSITION ASSIGNMENT HISTORY",404.52)

"^DIC",404.57,404.57,0)
TEAM POSITION^404.57I
"^DIC",404.57,404.57,0,"GL")
^SCTM(404.57,
"^DIC",404.57,404.57,"%",0)
^1.005^^0
"^DIC",404.57,404.57,"%D",0)
^^1^1^2990412^^^^
"^DIC",404.57,404.57,"%D",1,0)
This table contains the practitioner and administrative positions associated with a Team.
"^DIC",404.57,"B","TEAM POSITION",404.57)

"BLD",4630,6)
^399
**END**
**END**
