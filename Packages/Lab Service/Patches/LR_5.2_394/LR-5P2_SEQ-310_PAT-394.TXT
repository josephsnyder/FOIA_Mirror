$TXT Created by YORTY,M ROBERT at DEVVCC.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 03/02/09 at 10:36
=============================================================================
Run Date: JUN 22, 2009                     Designation: LR*5.2*394
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #310                    Status: Released
                  Compliance Date: JUL 23, 2009
=============================================================================

Associated patches: (v)LR*5.2*385  <<= must be installed BEFORE `LR*5.2*394'

Subject: LRCAPDAR (LAR) CORRECTIONS

Category: 
  - Routine

Description:
============

 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*394 does not 
 contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
 DIRECTIVE 2004-053 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
   
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*394 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
   
 RISK ANALYSIS: Changes made by patch LR*5.2*394 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
   
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
 made, no specific validation requirements exist as a result of 
 installation of this patch.
   
 =========================================================================
   
 This patch will addresses the following issues:
   
  1.  It will correct an omission from LR*5.2*385 for the DSS Lab 
      Results Extract to truncate results that are greater than 20
      characters long causing the result to be omitted from the extract.
   
  2.  It will correct a logic issue with LRCAPDAR that was causing the (#8)
      DAY value field of LAB RESULTS EXTRACT File (#727.824) to take on a
      record's Order Date value.
   
  3.  It will correct a logic issue with LRCAPDAR in the cases of an 
      accession containing more than one tests associated to a DSS test
      name.
  
   
   
  Associated NSR(S):
  ==================
  N/A
   
   
  Associated Remedy Tickets:
  =========================
  1. HD0000000286298 - Omission of results being truncated to 20 chars.
  2. HD0000000269615 - Logic calculating SPECIMEN COLLECTION DATE
  3. HD0000000148210 - Occult Blood tests not getting built properly in 
                        file 727.824.
  
   
   
  Remedy Ticket Overview:
  =======================
  1. HD0000000286298 - Omission of results being truncated to 20 chars.
                 
     Problem
     ------------
     DSS LAR Extract results greater than 20 characters are not getting 
     filed into the LAR Extract.
  
     Solution
     ------------
     Results greater than 20 characters in length are truncated to 20
     characters.
  
     Routine:  LRCAPDAR
   
   
  2. HD0000000269615 - Logic calculating SPECIMEN COLLECTION DATE
   
     Problem
     -------
     FILE tag was inadvertently placed within the test loop.  This was 
     causing a variable to be set, sometimes, to the order collection date
     rather than specimen date taken.  This variable would translate to 
     the DAY (#8) field of the LAB RESULTS EXTRACT (#727.824) file and 
     would affect the LAR Extract and LAR Audit Report.
  
     Solution
     --------
     FILE tag placed at appropriate place in looping process.  
  
     Routine:  LRCAPDAR
   
  3. HD0000000148210 - Occult blood tests not getting built properly in 
                       file 727.824.
  
     Problem
     -------
     It appears that the lab test results for occult are not getting built 
     properly in VistA Lab Results file (727.824).  The problem seems to
     occur when the patient receives multiple occult blood tests the same
     day.
  
     The routine LRCAPDAR built the array LRVV with only the DSS Test #.  
     This caused multiple local tests with the same DSS Test# to get tossed
     when setting into the array LRVV.  Leaving only the last local test 
     result to get filed.
  
     Solution
     --------
     Edit the array LRVV to include the DSS Test# and LRDN local test name.
     Modify the code to allow storing results per accession with the same 
     DSS Test#.
  
  
  TEST SITES:
  -----------
  LITTLE ROCK, AK
  DETROIT, MI  
  BILOXI, MS  
  
  
  INSTALLATION INSTRUCTIONS:
  =========================
  The install time for this patch is less than 2 minutes. This patch
  can be installed when Laboratory users are on the system.
   
  NOTE: Kernel patches must be current on the target system
        to avoid problems loading and/or installing this patch.
   
    1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
        option will load the KIDS patch onto your system.
   
    2.  The patch has now been loaded into a Transport global on your
        system.  You now need to use KIDS to install the transport global.
   
    3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
        select the 'Installation' menu.
   
    4.  Use the 'Verify Checksum in Transport Global' option and verify 
 that
        all routines have the correct checksums.
   
    5.  On the KIDS menu, under the 'Installation' menu, use the following
        options:
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
   
        If you wish to preserve a copy of the routines exported in this 
        patch prior to installation, you should use the 'Backup a Transport
        Global' option at this time.  You may also compare the routines in
        your production account to the routines in the patch by using the
        'Compare a Transport Global to Current System' option.
   
    6.  Use the 'Install Package(s)' option under the 'Installation' menu
        and select the package 'LR*5.2*394'.
   
        If prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//',
        press <ENTER>.
   
        If prompted 'Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? NO//', press <ENTER>.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994;Build 2

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LRCAPDAR
    Before: B14747213   After: B15584035  **143,169,258,307,326,386,385,394**
 
Routine list of preceding patches: 385

=============================================================================
User Information:
Entered By  : YORTY,M ROBERT                Date Entered  : DEC 10, 2008
Completed By: MULLER,RICHARD                Date Completed: JUN 08, 2009
Released By : BELSCHWINDER,MICHAEL          Date Released : JUN 22, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
