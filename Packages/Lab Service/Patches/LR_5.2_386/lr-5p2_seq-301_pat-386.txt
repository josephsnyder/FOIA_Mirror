$TXT Created by CARPENTER,TERRY at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Tuesday, 07/08/08 at 10:30
=============================================================================
Run Date: NOV 12, 2008                     Designation: LR*5.2*386
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #301                    Status: Released
                  Compliance Date: DEC 13, 2008
=============================================================================

Associated patches: (v)LR*5.2*221  <<= must be installed BEFORE `LR*5.2*386'
                    (v)LR*5.2*326  <<= must be installed BEFORE `LR*5.2*386'

Subject: CORRECT PROBLEM WITH DSS LAB RESULTS EXTRACT

Category: 
  - Routine
  - Data Dictionary

Description:
============

 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*386 does not 
 contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
 DIRECTIVE 2004-053 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*386 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*386 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
 made, no specific validation requirements exist as a result of 
 installation of this patch.
  
 ==========================================================================
  
 This patch will addresses the following 3 issues:
  
 1.  It will correct a problem with the DSS Lab Results Extract whereby
     results that are greater than 10 characters long cause the record to
     be omitted from the extract.  
  
 2.  It also addresses a merge problem whereby "ghost" tests are added to a
     merged patient because of a failure to cleanup after the previous
     merge attempt.  
  
 3.  It will fix a problem which allows for a result that is supposed to be
     numeric to be entered with 2 decimal points. 
  
  
 Associated NSR(S):
 ==================
 N/A
  
  
 Associated Remedy Tickets:
 =========================
 1. HD0000000197958 - Partial extract of some LAR tests
 2. HD0000000070197 - Merge accession adding "ghost" test
    Duplicates:       HD0000000191338
                      HD0000000209274
                      HD0000000249568
 3. HD0000000251259 - LRNUM allows storing of result with 2 decimal places
  
  
 Participating Test Sites:
 =========================
 Biloxi VAMC
 Fayetteville VAMC
 Montana HCS
 Shreveport VAMC
  
  
 Remedy Ticket Overview:
 =======================
 1. HD0000000197958 - Partial extract of some LAR tests
                
    Problem
    ------------
    The DSS Lab Results extract stores data in a temporary file (#64.368)
    before transmission to Austin.  The DD for the results field in this
    temporary file allows for only 10 characters. An entered result that 
    is longer than 10 characters will cause the entire record to be omitted
    from the extract.
  
    Solution
    ------------
    Modify the DD for this field (^DD(64.368,1)) to allow 20 characters
    instead of 10.  Also modify routine LRCAPDAR to truncate results
    that might be greater than 20 characters so that all the records make
    it into the extract.
  
    Routine:  LRCAPDAR
  
  
 2. HD0000000070197 - Merge accession adding "ghost" test
  
    Problem
    -------
    When trying to merge 2 accessions, if the merge is unsuccessful (the
    patients are different) the related tests are not cleaned up and they 
    appear on the next accession that is merged.
  
    Solution
    --------
    Modify routine LR7OMERG to clean up after a failed merge attempt.
  
    Routine:  LR7OMERG
  
  
 3. HD0000000251259 - LRNUM allows storing of result with 2 decimal places
  
    Problem
    -------
    A test result that is supposed to be numeric can be entered with 2
    decimal points.
  
    Solution
    --------
    Do not allow a result to be entered with 2 decimal points if the result
    is supposed to be numeric.
   
    Routine:  LRNUM
  
  
 Data Dictionary:
 ================
    
    Before change:
    --------------
    Global ^DD(64.368,1 -- NOTE: translation in effect
    ^DD(64.368,1,0)=RESULTS^F^^0;2^K:$L(X)>10!($L(X)<1) X
                 3)=Answer must be 1-10 characters in length.
    ^DD(64.368,1,21,0)=^^1^1^3001114^
    ^DD(64.368,1,21,1,0)=This field contains the result value extracted for
    the test.
    ^DD(64.368,1,"DT")=2970219
  
    After change:
    -------------
    Global ^DD(64.368,1 -- NOTE: translation in effect
    ^DD(64.368,1,0)=RESULTS^FX^^0;2^K:$L(X)>20!($L(X)<1) X
                 3)=Answer must be 1-20 characters in length.
    ^DD(64.368,1,21,0)=^^1^1^3001114^
    ^DD(64.368,1,21,1,0)=This field contains the result value extracted for
    the test.
    ^DD(64.368,1,"DT")=3080703
    
  
 INSTALLATION INSTRUCTIONS:
 =========================
 The install time for this patch is less than 2 minutes. This patch
 can be installed when Laboratory users are on the system.
  
 NOTE: Kernel patches must be current on the target system
       to avoid problems loading and/or installing this patch.
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
       option will load the KIDS patch onto your system.
  
   2.  The patch has now been loaded into a Transport global on your
       system.  You now need to use KIDS to install the transport global.
  
   3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
   4.  Use the 'Verify Checksum in Transport Global' option and verify that
       all routines have the correct checksums.
  
   5.  On the KIDS menu, under the 'Installation' menu, use the following
       options:
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
  
       If you wish to preserve a copy of the routines exported in this 
       patch prior to installation, you should use the 'Backup a Transport
       Global' option at this time.  You may also compare the routines in
       your production account to the routines in the patch by using the
       'Compare a Transport Global to Current System' option.
  
   6.  Use the 'Install Package(s)' option under the 'Installation' menu
       and select the package 'LR*5.2*386'.
  
       If prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//',
       press <ENTER>.
  
       If prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? NO//', press <ENTER>.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LR7OMERG
    Before: B35177380   After: B35154595  **121,221,386**
Routine Name: LRCAPDAR
    Before: B16896329   After: B16950099  **143,169,258,307,326,386**
Routine Name: LRNUM
    Before:  B9064140   After:  B9049441  **153,221,386**
 
Routine list of preceding patches: 221, 326

=============================================================================
User Information:
Entered By  : CARPENTER,TERRY               Date Entered  : JUN 20, 2008
Completed By: WERNER,GARY                   Date Completed: NOV 12, 2008
Released By : SAUNDERS,TOM                  Date Released : NOV 12, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
