$TXT Created by CARPENTER,TERRY at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 05/06/10 at 11:38
=============================================================================
Run Date: OCT 20, 2010                     Designation: LR*5.2*402
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #318                    Status: Released
                  Compliance Date: NOV 20, 2010
=============================================================================

Associated patches: (v)LR*5.2*271  <<= must be installed BEFORE `LR*5.2*402'
                    (v)LR*5.2*316  <<= must be installed BEFORE `LR*5.2*402'

Subject: CORRECTION TO LRENTER & MODIFY AN EXISTING DATA NAME

Category: 
  - Routine

Description:
============

 This patch will address the following 2 items:
  
 1.  The option MODIFY AN EXISTING DATA NAME allows for the modification
     of the input parameters for data elements that are not DATA NAMES
     which can lead to a corrupted database.
  
 2.  The option LRENTER (Enter/verify/modify data (manual)) sometimes
     prompts the user to select an accession area twice.
  
 ASSOCIATED NSR:
 ===============
 N/A
  
  
 ASSOCIATED REMEDY TICKETS:
 =========================
 1.  HD0000000358200 - Lab comments do not work
  
 2.  HD0000000374106 - Software bug in option LRENTER
  
  
 PARTICIPATING TEST SITES:
 =========================
 VA Boston HCS
 VA Central TX HCS
 Miami VAMC
 Wilkes-Barre VAMC
  
  
 BLOOD BANK CLEARANCE:
 =====================
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*402 does not 
 contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
 DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*402 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*402 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
 made, no specific validation requirements exist as a result of 
 installation of this patch.
  
  
 REMEDY TICKET OVERVIEW:
 =======================
 1.  HD0000000358200 - Lab comments do not work
  
     Problem:
     --------
     The LAB option MODIFY AN EXISTING DATA NAME was designed to give
     the lab ADPAC the ability to modify the definition of the RESULTS
     field for laboratory tests. Each lab test has its own field definition
     for results. These are DATA NAMES.  This option, however, allows for
     modification of fields that are not DATA NAMES, in some cases causing
     database corruption.
  
     Resolution:
     ---------
     Modify routine LRWU6 to only allow for the modification of the 
     laboratory test result fields (DATA NAMES) as the documentation
     describes.  
  
     Technical:
     ----------
     Set DIC("S") to screen out elements that are not DATA NAMES.
  
     Routine:  LRWU6
  
  
 2.  HD0000000374106 - Software bug in option LRENTER
  
     Problem:
     --------
     When an accession area is defined in the ACCESSION file (#68) with a 
     USER ACCESS AUTHORIZATION field (# .9), the option LRENTER will prompt
     the user twice when the user enters one of these Accession areas at 
     the 'Select Accession:' prompt.  This is because routine LRWU4 is
     using the IEN (Internal Entry Number) from file 19.1 (SECURITY KEY)
     for a lookup into the cross-reference ^XUSEC (file 19.1 - SECURITY
     KEY).
  
     Solution:
     ---------
     Modify routine LRWU4 to use the correct field for locating the cross-
     reference for file 19.1.
  
     Technical:
     ----------
     Changed the code to use the .01 field (NAME) of file 19.1 (Security
     Key) in the cross-reference lookup into ^XUSEC (file 19.1 - Security 
     Key).  This is accomplished by the use of the supported API
     $$LKUP^XPDKEY().
  
     Routine:  LRWU4
  
  
 INSTALLATION INSTRUCTIONS:
 =========================
 The install time for this patch is less than 2 minutes. This patch can be
 installed when Laboratory users are on the system.
  
 NOTE: Kernel patches must be current on the target system
       to avoid problems loading and/or installing this patch.
  
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
       option will load the KIDS patch onto your system.
  
   2.  The patch has now been loaded into a Transport global on your
       system.  You now need to use KIDS to install the transport global.
  
   3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
   4.  Use the 'Verify Checksum in Transport Global' option and verify that
       all routines have the correct checksums.
  
   5.  On the KIDS menu, under the 'Installation' menu, use the following
       options:
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
  
       If you wish to preserve a copy of the routines exported in this 
       patch prior to installation, you should use the 'Backup a Transport
       Global' option at this time.  You may also compare the routines in
       your production account to the routines in the patch by using the
       'Compare a Transport Global to Current System' option.
  
   6.  Use the 'Install Package(s)' option under the 'Installation' menu
       and select the package 'LR*5.2*402.
  
       If prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//,
       choose 'NO'.
  
       If prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? NO//', choose 'NO'.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LRWU4
    Before: B24612683   After: B24817010  **128,153,201,271,402**
Routine Name: LRWU6
    Before:  B9868953   After: B10023759  **316,402**
 
Routine list of preceding patches: 271, 316

=============================================================================
User Information:
Entered By  : CARPENTER,TERRY               Date Entered  : FEB 04, 2010
Completed By: WERNER,GARY                   Date Completed: SEP 28, 2010
Released By : BELSCHWINDER,MICHAEL          Date Released : OCT 20, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
