KIDS Distribution saved on May 13, 2009@11:56:57
LR*5.2*335
**KIDS**:LR*5.2*335^

**INSTALL NAME**
LR*5.2*335
"BLD",5304,0)
LR*5.2*335^LAB SERVICE^0^3090513^y
"BLD",5304,1,0)
^9.61A^496^496^3090513^^^
"BLD",5304,1,1,0)
LR*5.2*335 is being exported as part of the VBECS package release. The 
"BLD",5304,1,2,0)
installation of this patch will be controlled by a phase release. An 
"BLD",5304,1,3,0)
Implementation Manager will be assigned to your site and will contact 
"BLD",5304,1,4,0)
your POC for VBECS and will provide your site with the location of the 
"BLD",5304,1,5,0)
KIDS Host Files prior to your scheduled installation date installation 
"BLD",5304,1,6,0)
Sequence.
"BLD",5304,1,7,0)
 
"BLD",5304,1,8,0)
Select elements of VistA data must be transferred to the VBECS Blood Bank 
"BLD",5304,1,9,0)
system prior to its initial operation. This will preserve patient related 
"BLD",5304,1,10,0)
clinically and historically relevant information. This patch will install 
"BLD",5304,1,11,0)
the software necessary to prepare the data for extraction from the VistA 
"BLD",5304,1,12,0)
database, and extract the data to text files for transfer to the VBECS 
"BLD",5304,1,13,0)
system. Some of the VistA data will be standardized to nationally 
"BLD",5304,1,14,0)
recognized Blood Bank definitions during the extraction. Logical checks 
"BLD",5304,1,15,0)
in the software will ensure data integrity. Once the data on the VistA 
"BLD",5304,1,16,0)
side have been evaluated and converted to the new database, specific 
"BLD",5304,1,17,0)
VistA Blood Bank options will be deactivated (placed out of order) so 
"BLD",5304,1,18,0)
that the legacy database cannot be altered. These options are listed 
"BLD",5304,1,19,0)
below under "The following options are placed out of order." More details 
"BLD",5304,1,20,0)
can be found in the "Blood Bank Pre-Implementation Data Validation, 
"BLD",5304,1,21,0)
Mapping, and Conversion ADPAC Guide" document. The inadvertent or 
"BLD",5304,1,22,0)
unintentional deactivation of these options could cause a disruption in 
"BLD",5304,1,23,0)
Blood Bank operations. 
"BLD",5304,1,24,0)
 
"BLD",5304,1,25,0)
Please read and follow the instructions in the "Blood Bank 
"BLD",5304,1,26,0)
Pre-Implementation Data Validation, Mapping, and Conversion Installation 
"BLD",5304,1,27,0)
and User Guide" before proceeding with the installation.
"BLD",5304,1,28,0)
 
"BLD",5304,1,29,0)
 
"BLD",5304,1,30,0)
BLOOD BANK CLEARANCE: 1/6/2009
"BLD",5304,1,31,0)
VISTA Laboratory Package patch LR*5.2*335 contains changes to software 
"BLD",5304,1,32,0)
controlled by VHA DIRECTIVE 2004-058, titled VISTA BLOOD BANK SOFTWARE.
"BLD",5304,1,33,0)
Changes include:
"BLD",5304,1,34,0)
Access is restricted on the following files:
"BLD",5304,1,35,0)
File #    File Name              Field #     Field Name
"BLD",5304,1,36,0)
=====     =========              =======     ==========
"BLD",5304,1,37,0)
62.55     AGGLUTINATION STRENGTH     .01     NAME
"BLD",5304,1,38,0)
62.55     AGGLUTINATION STRENGTH       1     WILL STAND FOR
"BLD",5304,1,39,0)
63.01     BLOOD BANK                 .01     DATE/TIME SPECIMEN TAKEN
"BLD",5304,1,40,0)
63.01     BLOOD BANK                 .03     DATE REPORT COMPLETED
"BLD",5304,1,41,0)
63.01     BLOOD BANK                 .04     ENTERING PERSON
"BLD",5304,1,42,0)
63.01     BLOOD BANK                 .05     SPECIMEN
"BLD",5304,1,43,0)
63.01     BLOOD BANK                .055     COLLECTION SAMPLE
"BLD",5304,1,44,0)
63.01     BLOOD BANK                 .06     ACCESSION NUMBER
"BLD",5304,1,45,0)
63.01     BLOOD BANK                 .07     PHYSICIAN
"BLD",5304,1,46,0)
63.01     BLOOD BANK                 .08     WARD
"BLD",5304,1,47,0)
63.01     BLOOD BANK                 .09     PHLEBOTOMIST
"BLD",5304,1,48,0)
63.01     BLOOD BANK                  .1     DATE/TIME RECEIVED
"BLD",5304,1,49,0)
63.01     BLOOD BANK                 .12     ACCESSION LINK
"BLD",5304,1,50,0)
63.01     BLOOD BANK                 .99     SPECIMEN COMMENT
"BLD",5304,1,51,0)
63.01     BLOOD BANK                 2.1     DIRECT AHG(POLYSPECIFIC)
"BLD",5304,1,52,0)
63.01     BLOOD BANK                 2.2     DIRECT AHG(5 min incub)
"BLD",5304,1,53,0)
63.01     BLOOD BANK                 2.3     DIRECT AHG CC
"BLD",5304,1,54,0)
63.01     BLOOD BANK                 2.4     ANTI-IgG
"BLD",5304,1,55,0)
63.01     BLOOD BANK                 2.5     ANTI-IgG CC
"BLD",5304,1,56,0)
63.01     BLOOD BANK                 2.6     ANTI-COMPLEMENT
"BLD",5304,1,57,0)
63.01     BLOOD BANK                 2.7     ANTI-COMPLEMENT (5 min incub)
"BLD",5304,1,58,0)
63.01     BLOOD BANK                 2.8     ANTI-COMPLEMENT CC
"BLD",5304,1,59,0)
63.01     BLOOD BANK                 2.9     DIRECT AHG INTERPRETATION
"BLD",5304,1,60,0)
63.01     BLOOD BANK                2.91     DIRECT AHG TEST COMMENT
"BLD",5304,1,61,0)
63.01     BLOOD BANK                   3     ELUATE ANTIBODY
"BLD",5304,1,62,0)
63.01     BLOOD BANK                   4     SCREEN CELL METHOD
"BLD",5304,1,63,0)
63.01     BLOOD BANK                   6     ANTIBODY SCREEN 
"BLD",5304,1,64,0)
INTERPRETATION
"BLD",5304,1,65,0)
63.01     BLOOD BANK                 6.1     RBC ANTIGEN PRESENT
"BLD",5304,1,66,0)
63.01     BLOOD BANK                 6.2     RBC ANTIGEN ABSENT
"BLD",5304,1,67,0)
63.01     BLOOD BANK                 6.3     HLA ANTIGEN PRESENT
"BLD",5304,1,68,0)
63.01     BLOOD BANK                 6.4     HLA ANTIGEN ABSENT
"BLD",5304,1,69,0)
63.01     BLOOD BANK                   7     SERUM ANTIBODY
"BLD",5304,1,70,0)
63.01     BLOOD BANK                   8     ANTIBODY SCREEN COMMENT
"BLD",5304,1,71,0)
63.01     BLOOD BANK                   9     RBC TYPING METHOD
"BLD",5304,1,72,0)
63.01     BLOOD BANK                  10     ABO INTERPRETATION
"BLD",5304,1,73,0)
63.01     BLOOD BANK                10.2     ABO TYPING TECH
"BLD",5304,1,74,0)
63.01     BLOOD BANK                10.3     ABO TESTING COMMENT
"BLD",5304,1,75,0)
63.01     BLOOD BANK                  11     RH  INTERPRETATION
"BLD",5304,1,76,0)
63.01     BLOOD BANK                11.2     RH TYPING TECH
"BLD",5304,1,77,0)
63.01     BLOOD BANK                11.3     RH TESTING COMMENT
"BLD",5304,1,78,0)
63.01     BLOOD BANK                 121     PT CELLS+ANTI D (sal)
"BLD",5304,1,79,0)
63.01     BLOOD BANK                 122     PT CELLS+RH CTRL (sal)
"BLD",5304,1,80,0)
63.01     BLOOD BANK                 123     PT CELLS(sal)+ANTI D(hp IS)
"BLD",5304,1,81,0)
63.01     BLOOD BANK                 124     PT CELLS(ser)+ANTI D(hp IS)
"BLD",5304,1,82,0)
63.01     BLOOD BANK                 125     PT CELLS+ANTI D (hp 37)
"BLD",5304,1,83,0)
63.01     BLOOD BANK                 126     PT CELLS+ANTI D (hp AHG)
"BLD",5304,1,84,0)
63.01     BLOOD BANK                 127     PT CELLS+ANTI D SLIDE (hp)
"BLD",5304,1,85,0)
63.01     BLOOD BANK                 128     PT CELLS(sal)+RH CTRL (hp IS)
"BLD",5304,1,86,0)
63.01     BLOOD BANK                 129     PT CELLS(ser)+RH CTRL(hp IS)
"BLD",5304,1,87,0)
63.01     BLOOD BANK               129.1     PT CELLS+RH CTRL (hp 37)
"BLD",5304,1,88,0)
63.01     BLOOD BANK              129.11     PT CELLS+RH CTRL (hp AHG)
"BLD",5304,1,89,0)
63.01     BLOOD BANK              129.12     PT CELLS+RH CTRL SLIDE (hp)
"BLD",5304,1,90,0)
63.01     BLOOD BANK                 131     INTERPRETATION OF RH TESTING
"BLD",5304,1,91,0)
63.01     BLOOD BANK                 132     RH TEST COMMENT
"BLD",5304,1,92,0)
63.01     BLOOD BANK                 133     PT Cells(sal)+Anti D(mod) IS
"BLD",5304,1,93,0)
63.01     BLOOD BANK                 134     PT Cells(ser)+Anti D(mod) IS
"BLD",5304,1,94,0)
63.01     BLOOD BANK                 135     PT Cells+Anti D(mod) 37
"BLD",5304,1,95,0)
63.01     BLOOD BANK                 136     PT Cells+Anti D(mod) AHG
"BLD",5304,1,96,0)
63.01     BLOOD BANK                 138     PT Cells(sal)+RH Ctrl(sal) IS
"BLD",5304,1,97,0)
63.01     BLOOD BANK                 139     PT Cells(ser)+RH Ctrl(sal) IS
"BLD",5304,1,98,0)
63.01     BLOOD BANK               139.1     PT Cells+RH Ctrl(sal) 37
"BLD",5304,1,99,0)
63.01     BLOOD BANK              139.11     PT Cells+RH Ctrl(sal) AHG
"BLD",5304,1,100,0)
63.01     BLOOD BANK                 141     PT CELLS(ser)+ANTI A IS
"BLD",5304,1,101,0)
63.01     BLOOD BANK                 142     PT CELLS(sal)+ANTI A IS
"BLD",5304,1,102,0)
63.01     BLOOD BANK                 143     PT CELLS+ANTI A SLIDE
"BLD",5304,1,103,0)
63.01     BLOOD BANK                 144     PT CELLS(ser)+ANTI B IS
"BLD",5304,1,104,0)
63.01     BLOOD BANK                 145     PT CELLS(sal)+ANTI B IS
"BLD",5304,1,105,0)
63.01     BLOOD BANK                 146     PT CELLS+ANTI B SLIDE
"BLD",5304,1,106,0)
63.01     BLOOD BANK                 147     PT CELLS(ser)+ANTI A,B IS
"BLD",5304,1,107,0)
63.01     BLOOD BANK                 148     PT CELLS(ser)+ANTI A,B (RT)
"BLD",5304,1,108,0)
63.01     BLOOD BANK                 149     PT CELLS(sal)+ANTI A,B (IS)
"BLD",5304,1,109,0)
63.01     BLOOD BANK               149.1     PT CELLS(sal)+ANTI A,B (RT)
"BLD",5304,1,110,0)
63.01     BLOOD BANK              149.11     PT CELLS+ANTI A,B SLIDE
"BLD",5304,1,111,0)
63.01     BLOOD BANK              149.12     PT SERUM+A1 CELLS
"BLD",5304,1,112,0)
63.01     BLOOD BANK              149.13     PT SERUM+B CELLS
"BLD",5304,1,113,0)
63.01     BLOOD BANK                 151     INTERPRETATION OF ABO TESTING
"BLD",5304,1,114,0)
63.01     BLOOD BANK                 152     ABO TESTING COMMENT
"BLD",5304,1,115,0)
63.01     BLOOD BANK                 153     INTERPRETATION ABO 
"BLD",5304,1,116,0)
GROUP(cell)
"BLD",5304,1,117,0)
63.01     BLOOD BANK                 154     INTERPRETATION ABO GROUP(ser)
"BLD",5304,1,118,0)
63.011    RBC ANTIGEN PRESENT        .01     RBC ANTIGEN PRESENT
"BLD",5304,1,119,0)
63.011    RBC ANTIGEN PRESENT        .02     COMMENT
"BLD",5304,1,120,0)
63.0112   RBC ANTIGEN ABSENT         .01     RBC ANTIGEN ABSENT
"BLD",5304,1,121,0)
63.0112   RBC ANTIGEN ABSENT         .02     COMMENT
"BLD",5304,1,122,0)
63.0114   HLA ANTIGEN ABSENT         .01     HLA ANTIGEN ABSENT
"BLD",5304,1,123,0)
63.0114   HLA ANTIGEN ABSENT         .02     COMMENT
"BLD",5304,1,124,0)
63.012    ELUATE ANTIBODY            .01     ELUATE ANTIBODY
"BLD",5304,1,125,0)
63.013    HLA ANTIGEN PRESENT        .01     HLA ANTIGEN PRESENT
"BLD",5304,1,126,0)
63.013    HLA ANTIGEN PRESENT        .02     COMMENT
"BLD",5304,1,127,0)
63.014    SCREEN CELL METHOD         .01     SCREEN CELL METHOD
"BLD",5304,1,128,0)
63.014    SCREEN CELL METHOD         .02     TECHNIQUE
"BLD",5304,1,129,0)
63.014    SCREEN CELL METHOD           1     SCREEN CELL
"BLD",5304,1,130,0)
63.015    SCREEN CELL                .01     SCREEN CELL
"BLD",5304,1,131,0)
63.015    SCREEN CELL                .02     SOURCE
"BLD",5304,1,132,0)
63.015    SCREEN CELL                .03     INTERPRETATION
"BLD",5304,1,133,0)
63.015    SCREEN CELL                .04     IS
"BLD",5304,1,134,0)
63.015    SCREEN CELL                .05     37 C
"BLD",5304,1,135,0)
63.015    SCREEN CELL                .06     AHG
"BLD",5304,1,136,0)
63.015    SCREEN CELL                .07     CONTROL CELL
"BLD",5304,1,137,0)
63.015    SCREEN CELL                .08     ROOM TEMP
"BLD",5304,1,138,0)
63.015    SCREEN CELL                .09     12-18 C
"BLD",5304,1,139,0)
63.015    SCREEN CELL                 .1     4 C
"BLD",5304,1,140,0)
63.018    RBC TYPING METHOD          .01     RBC TYPING METHOD
"BLD",5304,1,141,0)
63.018    RBC TYPING METHOD          .02     TECHNIQUE
"BLD",5304,1,142,0)
63.018    RBC TYPING METHOD            1     ANTISERUM
"BLD",5304,1,143,0)
63.019    ANTISERUM                  .01     ANTISERUM
"BLD",5304,1,144,0)
63.019    ANTISERUM                  .02     LOT #
"BLD",5304,1,145,0)
63.019    ANTISERUM                  .03     INTERPRETATION
"BLD",5304,1,146,0)
63.019    ANTISERUM                  .04     IS
"BLD",5304,1,147,0)
63.019    ANTISERUM                  .05     37 C
"BLD",5304,1,148,0)
63.019    ANTISERUM                  .06     AHG
"BLD",5304,1,149,0)
63.019    ANTISERUM                  .07     CONTROL CELL
"BLD",5304,1,150,0)
63.019    ANTISERUM                  .08     ROOM TEMP
"BLD",5304,1,151,0)
63.019    ANTISERUM                  .09     12-18 C
"BLD",5304,1,152,0)
63.019    ANTISERUM                   .1     4 C
"BLD",5304,1,153,0)
63.199    SPECIMEN COMMENT           .01     SPECIMEN COMMENT
"BLD",5304,1,154,0)
63.46     SERUM ANTIBODY             .01     SERUM ANTIBODY
"BLD",5304,1,155,0)
63.46     SERUM ANTIBODY             .02     ANTIBODY COMMENT
"BLD",5304,1,156,0)
63.48     ANTIBODY SCREEN COMMENT    .01     ANTIBODY SCREEN COMMENT
"BLD",5304,1,157,0)
65.50     Entire File
"BLD",5304,1,158,0)
66.20     Entire File
"BLD",5304,1,159,0)
66.50     Entire File
"BLD",5304,1,160,0)
66.90     Entire File
"BLD",5304,1,161,0)
 
"BLD",5304,1,162,0)
The following options are placed out of order:
"BLD",5304,1,163,0)
Option Name   Option Text
"BLD",5304,1,164,0)
=======================================================================
"BLD",5304,1,165,0)
LRBLAD        Print data change audits
"BLD",5304,1,166,0)
LRBLAR        Remove data change audits
"BLD",5304,1,167,0)
LRBLDA        Donor collection/deferral edit
"BLD",5304,1,168,0)
LRBLDAWARD    Acknowledge donor award by deletion
"BLD",5304,1,169,0)
LRBLDC        Donor collection/processing
"BLD",5304,1,170,0)
LRBLDCP       Collection disposition/component preparation
"BLD",5304,1,171,0)
LRBLDCU       Cumulative donations and awards
"BLD",5304,1,172,0)
LRBLDCX       Edit donor consent
"BLD",5304,1,173,0)
LRBLDD        Donor demographics
"BLD",5304,1,174,0)
LRBLDDAT      ABO/Rh testing of donor units
"BLD",5304,1,175,0)
LRBLDEDIT     Blood donor group/type edit
"BLD",5304,1,176,0)
LRBLDEF       Permanent deferral/special comments
"BLD",5304,1,177,0)
LRBLDK        Remove ex-donors
"BLD",5304,1,178,0)
LRBLDLG       Donor registration
"BLD",5304,1,179,0)
LRBLDLT       Enter/edit donor letters
"BLD",5304,1,180,0)
LRBLDMV       Move a blood donation
"BLD",5304,1,181,0)
LRBLDO        Old blood donor records
"BLD",5304,1,182,0)
LRBLDPH       Donor phenotyping
"BLD",5304,1,183,0)
LRBLDR        Donor history, physical and consent form
"BLD",5304,1,184,0)
LRBLDRR       Test review/Component labeling/release
"BLD",5304,1,185,0)
LRBLDT        Lab tests(not ABO/Rh) on donor units
"BLD",5304,1,186,0)
LRBLDUC       Donor unit ABO/Rh recheck
"BLD",5304,1,187,0)
LRBLIDN       Disposition -not transfused
"BLD",5304,1,188,0)
LRBLIDR       Disposition -relocation
"BLD",5304,1,189,0)
LRBLILA       Unit CAUTION tag labels
"BLD",5304,1,190,0)
LRBLILR       Log-in regular (invoices)
"BLD",5304,1,191,0)
LRBLILS       Enter blood inventory typing charges
"BLD",5304,1,192,0)
LRBLISH       Shipping invoices for blood components
"BLD",5304,1,193,0)
LRBLIUC       Unit ABO/Rh confirmation
"BLD",5304,1,194,0)
LRBLIUP       Unit phenotyping
"BLD",5304,1,195,0)
LRBLIUR       Units release to stock (cancel) by patient
"BLD",5304,1,196,0)
LRBLIW        Inventory ABO/Rh testing worksheet
"BLD",5304,1,197,0)
LRBLJM        Edit pooled blood product
"BLD",5304,1,198,0)
LRBLJTR       Transfer unit to new division
"BLD",5304,1,199,0)
LRBLPC        Request/select/xmatch blood components
"BLD",5304,1,200,0)
LRBLPCS       Blood component requests
"BLD",5304,1,201,0)
LRBLPED       Pediatric unit preparation
"BLD",5304,1,202,0)
LRBLPEDIT     Patient ABO/Rh edit
"BLD",5304,1,203,0)
LRBLPER       Previous records
"BLD",5304,1,204,0)
LRBLPET       Enter test data
"BLD",5304,1,205,0)
LRBLPH        Patient Medication List
"BLD",5304,1,206,0)
LRBLPIC       Select units for patients
"BLD",5304,1,207,0)
LRBLPLOGIN    Specimen log-in
"BLD",5304,1,208,0)
LRBLPOST      File 81 conversion
"BLD",5304,1,209,0)
LRBLPSI       Special instructions
"BLD",5304,1,210,0)
LRBLPT        Blood transfusion results
"BLD",5304,1,211,0)
LRBLPTXR      Unknown unit transfusion reaction
"BLD",5304,1,212,0)
LRBLPX        Enter crossmatch results
"BLD",5304,1,213,0)
LRBLRIN       Supplier invoices (inventory)
"BLD",5304,1,214,0)
LRBLRIS       Special typing charges (inventory)
"BLD",5304,1,215,0)
LRBLRIT       Supplier transactions (inventory)
"BLD",5304,1,216,0)
LRBLSEB       Edit blood product file
"BLD",5304,1,217,0)
LRBLSEC       Edit unit - patient fields
"BLD",5304,1,218,0)
LRBLSED       Edit unit disposition fields
"BLD",5304,1,219,0)
LRBLSEE       Free autologous/directed donor units
"BLD",5304,1,220,0)
LRBLSEF       Edit blood bank descriptions file
"BLD",5304,1,221,0)
LRBLSEH       Edit donor history questions
"BLD",5304,1,222,0)
LRBLSEL       Edit unit log-in
"BLD",5304,1,223,0)
LRBLSER       Remove units with final disposition
"BLD",5304,1,224,0)
LRBLSET       Tests for inclusion in transfusion report
"BLD",5304,1,225,0)
LRBLSEU       Edit blood bank utility file
"BLD",5304,1,226,0)
LRBLSF        Edit number of lines in a label
"BLD",5304,1,227,0)
LRBLSI        Blood bank inventory edit options
"BLD",5304,1,228,0)
LRBLSLL       Edit lab letter file
"BLD",5304,1,229,0)
LRBLSMS       Maximum surgical blood order edit
"BLD",5304,1,230,0)
LRBLSNO       Edit Corresponding Antigen/Antibody
"BLD",5304,1,231,0)
LRBLSP        Blood bank patient edit options
"BLD",5304,1,232,0)
LRBLSPP       Edit previous transfusion record
"BLD",5304,1,233,0)
LRBLSRI       Remove inappropriate transfusion requests
"BLD",5304,1,234,0)
LRBLSRQ       Edit Blood Component Request File
"BLD",5304,1,235,0)
LRBLSSP       Edit blood bank site parameters
"BLD",5304,1,236,0)
LRBLST        Tests for display on patient look-up
"BLD",5304,1,237,0)
LRBLTTW       Test worklist
"BLD",5304,1,238,0)
LRBLTX        Tests for transfusion follow-up
"BLD",5304,1,239,0)
LRBLVAL       Blood bank validation documentation
"BLD",5304,1,240,0)
 
"BLD",5304,1,241,0)
RISK ANALYSIS: The changes made by patch LR*5.2*335 affect Blood Bank 
"BLD",5304,1,242,0)
software functionality, however the RISK is considered to be low.
"BLD",5304,1,243,0)
  Inappropriate use of the "Disable VistA Blood Bank components"
"BLD",5304,1,244,0)
  [VBEC BB COMPONENTS DISABLE] option can disable the VistA 5.2
"BLD",5304,1,245,0)
  Blood Bank system.  This risk is minimal since the "Enable VistA
"BLD",5304,1,246,0)
  Blood Bank components" [VBEC BB COMPONENTS ENABLE] option can be
"BLD",5304,1,247,0)
  used to restore full operations.
"BLD",5304,1,248,0)
 
"BLD",5304,1,249,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*335 does not 
"BLD",5304,1,250,0)
alter or modify any software design safeguards or safety critical 
"BLD",5304,1,251,0)
elements functions.
"BLD",5304,1,252,0)
 
"BLD",5304,1,253,0)
POTENTIAL IMPACT ON SITES: This patch contains changes to 0 routines and 
"BLD",5304,1,254,0)
4 files identified in Veterans Health Administration (VHA) Directive 
"BLD",5304,1,255,0)
2004-058, group B listing. The changes have no effect on medical device 
"BLD",5304,1,256,0)
control functions.
"BLD",5304,1,257,0)
  This is the final step prior to the transfer of Blood Bank operations
"BLD",5304,1,258,0)
  to the VBECS system. All future impact will be dealt with through VBECS
"BLD",5304,1,259,0)
  development
"BLD",5304,1,260,0)
 
"BLD",5304,1,261,0)
VALIDATION REQUIREMENTS BY OPTION:
"BLD",5304,1,262,0)
  No VistA Blood Bank 5.2 options are released with this patch.
"BLD",5304,1,263,0)
  However, the options listed above should be tested to ensure that
"BLD",5304,1,264,0)
  they have been disabled after the completion of the data conversion.
"BLD",5304,1,265,0)
   
"BLD",5304,1,266,0)
 
"BLD",5304,1,267,0)
FILES CREATED DURING THE INSTALLATION OF THIS PATCH:
"BLD",5304,1,268,0)
FILE #      NAME
"BLD",5304,1,269,0)
======      ====
"BLD",5304,1,270,0)
6000        VBECS SITE PARAMETERS
"BLD",5304,1,271,0)
6001        VBECS DATA INTEGRITY/CONVERSION STATISTICS
"BLD",5304,1,272,0)
6003        VISTA BLOOD BANK RESTRICTED OPTIONS LIST
"BLD",5304,1,273,0)
6005        VBECS MATCHING TABLE
"BLD",5304,1,274,0)
6007        STANDARD VBECS DATA
"BLD",5304,1,275,0)
6009        VBECS FILE & FIELD LEVEL SECURITY
"BLD",5304,1,276,0)
 
"BLD",5304,1,277,0)
MAIL GROUPS CREATED DURING THE INSTALLATION OF THIS PATCH
"BLD",5304,1,278,0)
MAIL GROUP:
"BLD",5304,1,279,0)
===========
"BLD",5304,1,280,0)
VBECS DATA CONVERSION
"BLD",5304,1,281,0)
 
"BLD",5304,1,282,0)
ROUTINES INSTALLED DURING THE INSTALLATION OF THIS PATCH:
"BLD",5304,1,283,0)
ROUTINE:
"BLD",5304,1,284,0)
========
"BLD",5304,1,285,0)
VBECDC00
"BLD",5304,1,286,0)
VBECDC01
"BLD",5304,1,287,0)
VBECDC02
"BLD",5304,1,288,0)
VBECDC19
"BLD",5304,1,289,0)
VBECDCDC
"BLD",5304,1,290,0)
VBECDCHX
"BLD",5304,1,291,0)
VBECDCM
"BLD",5304,1,292,0)
VBECDCM0
"BLD",5304,1,293,0)
VBECDCM1
"BLD",5304,1,294,0)
VBECDCM2
"BLD",5304,1,295,0)
VBECDCMP
"BLD",5304,1,296,0)
VBECDCNM
"BLD",5304,1,297,0)
VBECDCR
"BLD",5304,1,298,0)
VBECDCSP
"BLD",5304,1,299,0)
VBECDCST
"BLD",5304,1,300,0)
VBECDCU
"BLD",5304,1,301,0)
VBECDCU1
"BLD",5304,1,302,0)
VBECDCU2
"BLD",5304,1,303,0)
VBECDCX
"BLD",5304,1,304,0)
VBECDCX1
"BLD",5304,1,305,0)
 
"BLD",5304,1,306,0)
OPTIONS CREATED DURING THE INSTALLATION OF THIS PATCH:
"BLD",5304,1,307,0)
Option Name                    Option Text
"BLD",5304,1,308,0)
===========                    ===========
"BLD",5304,1,309,0)
VBEC ANTIBODY/ANTIGEN UTIL.    Utilities that manipulate Antibody/Antigen 
"BLD",5304,1,310,0)
data
"BLD",5304,1,311,0)
VBEC BB COMPONENTS DISABLE     Disable VistA Blood Bank components
"BLD",5304,1,312,0)
VBEC BB COMPONENTS ENABLE      Enable VistA Blood Bank components
"BLD",5304,1,313,0)
VBEC CONVERSION UTILITIES      Utilities used for the data conversion
"BLD",5304,1,314,0)
VBEC DATA CONV. TO HOST FILES  Convert VistA Blood Bank data to host files
"BLD",5304,1,315,0)
VBEC DATA CONVERSION STATS     Display data conversion statistics
"BLD",5304,1,316,0)
VBEC DATA VALIDATION           Run Legacy VistA Blood Bank Data Validation
"BLD",5304,1,317,0)
VBEC DELETE ANTIBODY/ANTIGEN   Delete Antibody/Antigen temporary matching 
"BLD",5304,1,318,0)
files 
"BLD",5304,1,319,0)
VBEC DELETE CONV. STATS        Delete data conversion and anomaly check 
"BLD",5304,1,320,0)
histories
"BLD",5304,1,321,0)
VBEC DELETE EXTRACTED DATA     Delete all Blood Bank Data in Temporary 
"BLD",5304,1,322,0)
Globals
"BLD",5304,1,323,0)
VBEC DELETE SYSTEM LEVEL FILES Delete Blood Bank Data in System Level 
"BLD",5304,1,324,0)
Files
"BLD",5304,1,325,0)
VBEC DELETE TRANS. REACTION    Delete Transfusion Reaction temporary 
"BLD",5304,1,326,0)
match files
"BLD",5304,1,327,0)
VBEC INVALID DATA REPORT       Invalid Blood Bank Data Report
"BLD",5304,1,328,0)
VBEC MAIN MENU                 VBECS Data Matching/Conversion Menu
"BLD",5304,1,329,0)
VBEC MATCH ANTIBODY/ANTIGEN    Match VistA antibody/antigen data
"BLD",5304,1,330,0)
VBEC MATCH TRANSFUS REACTION   Match VistA transfusion reaction data
"BLD",5304,1,331,0)
VBEC POST-CONVERSION UTILITIES Utilities used after the data conversion 
"BLD",5304,1,332,0)
has run
"BLD",5304,1,333,0)
VBEC PRE-CONVERSION UTILITIES  Utilities used prior to the data conversion
"BLD",5304,1,334,0)
VBEC PRINT SQL/VISTA MATCHES   Matched Blood Bank data report
"BLD",5304,1,335,0)
VBEC SITE PARAMETER ENTER/EDIT Enter/Edit Site Parameter Data 
"BLD",5304,1,336,0)
VBEC STANDARD ANTIBODIES       Standard Antigens and Antibodies Print
"BLD",5304,1,337,0)
VBEC STANDARD TRANS. REACTIONS Standard Transfusion Reactions Print
"BLD",5304,1,338,0)
VBEC TRANS. REACTION UTILITIES Utilities that manipulate Trans. Reaction 
"BLD",5304,1,339,0)
data
"BLD",5304,1,340,0)
VBEC UNDO ANTIBODY/ANTIGEN     Undo all antibody/antigen matches
"BLD",5304,1,341,0)
VBEC UNDO SINGLE MATCHING      Unmatch a single matched VistA record 
"BLD",5304,1,342,0)
VBEC UNDO TRANS. REACTIONS     Undo all transfusion reaction matches
"BLD",5304,1,343,0)
VBEC UNMATCHED VISTA DATA RPT  Unmatched VistA Blood Bank Data Report
"BLD",5304,1,344,0)
VBEC UPDATE ANTIBODY/ANTIGEN   Update antibody/antigen records in 
"BLD",5304,1,345,0)
matching file
"BLD",5304,1,346,0)
VBEC UPDATE TRANS. REACT. REC  Update trans. reaction records in matching 
"BLD",5304,1,347,0)
file
"BLD",5304,1,348,0)
 
"BLD",5304,1,349,0)
Associated Remedy Tickets:  None
"BLD",5304,1,350,0)
==========================
"BLD",5304,1,351,0)
 
"BLD",5304,1,352,0)
Test Site(s):
"BLD",5304,1,353,0)
==============
"BLD",5304,1,354,0)
 HEARTLAND-EAST HCS
"BLD",5304,1,355,0)
 PHILADELPHIA, PA
"BLD",5304,1,356,0)
 SAN DIEGO, CA
"BLD",5304,1,357,0)
 
"BLD",5304,1,358,0)
Installation Sequence 
"BLD",5304,1,359,0)
======================
"BLD",5304,1,360,0)
The files listed below represent the patches will be part of the 
"BLD",5304,1,361,0)
controlled phased release.  Follow the sequence listed below when your 
"BLD",5304,1,362,0)
phased installation occurs.
"BLD",5304,1,363,0)
 
"BLD",5304,1,364,0)
  1. LR*5.2*335
"BLD",5304,1,365,0)
  2. LR*5.2*367
"BLD",5304,1,366,0)
  3. VBECS Bundle (consisting of VBEC*1*0 and LR*5.2*325)
"BLD",5304,1,367,0)
  4. VBEC*1.0*1
"BLD",5304,1,368,0)
  5. OR*3.0*212
"BLD",5304,1,369,0)
 
"BLD",5304,1,370,0)
COMPONENT SUMMARY:
"BLD",5304,1,371,0)
==================
"BLD",5304,1,372,0)
This patch installs ROUTINES, FILES, OPTIONS and a MAIL GROUP. For full 
"BLD",5304,1,373,0)
details about the components being imported with this patch, please see 
"BLD",5304,1,374,0)
the Blood Bank Pre-Implementation Data Validation, Mapping, and 
"BLD",5304,1,375,0)
Conversion Technical Manual
"BLD",5304,1,376,0)
 
"BLD",5304,1,377,0)
Documentation Retrieval:
"BLD",5304,1,378,0)
========================
"BLD",5304,1,379,0)
Although this is a controlled, phased released, the user & technical 
"BLD",5304,1,380,0)
documentation will be available to all sites when the patch is officially 
"BLD",5304,1,381,0)
released and the phased implementations start. This will allow sites the 
"BLD",5304,1,382,0)
opportunity to retrieve the documents before their phased installation 
"BLD",5304,1,383,0)
date
"BLD",5304,1,384,0)
 
"BLD",5304,1,385,0)
Documentation is available for the VBECS package on the 
"BLD",5304,1,386,0)
ANONYMOUS.SOFTWARE directory at one of the following Office of 
"BLD",5304,1,387,0)
Information (OI) Field Offices. Sites may retrieve documentation either 
"BLD",5304,1,388,0)
the ".PDF" or "DOC" format in one of the following ways:
"BLD",5304,1,389,0)
 
"BLD",5304,1,390,0)
The preferred method is to FTP the files from:
"BLD",5304,1,391,0)
Download.vista.domain.ext
"BLD",5304,1,392,0)
 
"BLD",5304,1,393,0)
This transmits files from the first available FTP server. Sites may also 
"BLD",5304,1,394,0)
elect to retrieve documentation directly from a specific server as 
"BLD",5304,1,395,0)
follows:
"BLD",5304,1,396,0)
       Albany                  DOMAIN.EXT
"BLD",5304,1,397,0)
       Hines                   DOMAIN.EXT
"BLD",5304,1,398,0)
       Salt Lake City          DOMAIN.EXT
"BLD",5304,1,399,0)
 
"BLD",5304,1,400,0)
NOTE:  The documentation files listed below will be listed in each of the 
"BLD",5304,1,401,0)
VBECS and LR patches that are part of the VBECS package and associate 
"BLD",5304,1,402,0)
patches, they only need to be downloaded once.
"BLD",5304,1,403,0)
 
"BLD",5304,1,404,0)
File Name                                   Retrieval format:  Binary
"BLD",5304,1,405,0)
===========                                 ==========================
"BLD",5304,1,406,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"BLD",5304,1,407,0)
ADPAC Guide.doc
"BLD",5304,1,408,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"BLD",5304,1,409,0)
ADPAC Guide.pdf
"BLD",5304,1,410,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"BLD",5304,1,411,0)
Installation and User Guide.doc
"BLD",5304,1,412,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"BLD",5304,1,413,0)
Installation and User Guide.pdf
"BLD",5304,1,414,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"BLD",5304,1,415,0)
Technical Manual.doc
"BLD",5304,1,416,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"BLD",5304,1,417,0)
Technical Manual.pdf
"BLD",5304,1,418,0)
VBECS Data Conversion Recommended Validation Method.xls
"BLD",5304,1,419,0)
VBECS Application Interfacing Support Software Installation and User 
"BLD",5304,1,420,0)
Configuration Guide.doc
"BLD",5304,1,421,0)
VBECS Application Interfacing Support Software Installation and User 
"BLD",5304,1,422,0)
Configuration Guide.pdf
"BLD",5304,1,423,0)
VBECS Implementation Process.xls
"BLD",5304,1,424,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Installation 
"BLD",5304,1,425,0)
Guide.doc
"BLD",5304,1,426,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Installation 
"BLD",5304,1,427,0)
Guide.pdf
"BLD",5304,1,428,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Technical 
"BLD",5304,1,429,0)
Manual-Security Guide.doc
"BLD",5304,1,430,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Technical 
"BLD",5304,1,431,0)
Manual-Security Guide.pdf
"BLD",5304,1,432,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 User Guide.doc
"BLD",5304,1,433,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 User Guide.pdf
"BLD",5304,1,434,0)
Known Defects and Anomalies.doc
"BLD",5304,1,435,0)
Known Defects and Anomalies.pdf
"BLD",5304,1,436,0)
 
"BLD",5304,1,437,0)
  Installation Information:
"BLD",5304,1,438,0)
  ==========================
"BLD",5304,1,439,0)
 
"BLD",5304,1,440,0)
This patch is exported as part of the VBECS Blood Bank System and allows 
"BLD",5304,1,441,0)
the conversion of limited existing Blood Bank data from VistA to VBECS. 
"BLD",5304,1,442,0)
Please refer to the "Blood Bank Pre-Implementation Data Validation, 
"BLD",5304,1,443,0)
Mapping, and Conversion Installation and User Guide" for installation 
"BLD",5304,1,444,0)
information. The files listed below may be obtained via FTP. The 
"BLD",5304,1,445,0)
installation of VBECS and its related patches are being handled as a 
"BLD",5304,1,446,0)
controlled release. The implementation manager will contact you with the 
"BLD",5304,1,447,0)
location of the KIDS Host Files prior to your scheduled installation 
"BLD",5304,1,448,0)
date. The documentation files will be available for download in advance 
"BLD",5304,1,449,0)
of installation through the anonymous download site as shown below.
"BLD",5304,1,450,0)
 
"BLD",5304,1,451,0)
  Installation Files: 
"BLD",5304,1,452,0)
  ===================
"BLD",5304,1,453,0)
The following files are exported for LR*5.2*335:
"BLD",5304,1,454,0)
   LR_52_335.KID
"BLD",5304,1,455,0)
 
"BLD",5304,1,456,0)
   VBECSBATCH.COM
"BLD",5304,1,457,0)
 
"BLD",5304,1,458,0)
LR_52_335.KID and VBECSBATCH.COM files will be made available by the 
"BLD",5304,1,459,0)
Implementation Manager prior to your site's implementation schedule along 
"BLD",5304,1,460,0)
with instruction to retrieve.
"BLD",5304,1,461,0)
 
"BLD",5304,1,462,0)
Installation Instructions:
"BLD",5304,1,463,0)
==========================
"BLD",5304,1,464,0)
This patch may be loaded with users on the system.
"BLD",5304,1,465,0)
Installation will take less than 5 minutes.
"BLD",5304,1,466,0)
 
"BLD",5304,1,467,0)
    1) Use the 'LOAD A DISTRIBUTION' option on the KIDS Installation
"BLD",5304,1,468,0)
       menu. The Host File name is LR_52_335.KID. Answer YES to the
"BLD",5304,1,469,0)
       question: "Want to Continue with Load? YES//"
"BLD",5304,1,470,0)
    2) From the Kernel Installation and Distribution System Menu,
"BLD",5304,1,471,0)
       select the Installation menu.
"BLD",5304,1,472,0)
    3) From this menu, you may elect to use the following options
"BLD",5304,1,473,0)
       (when prompted for the INSTALL NAME, enter LR*5.2*335).
"BLD",5304,1,474,0)
       a) Backup a Transport Global - this option will create a backup
"BLD",5304,1,475,0)
          message of any routines exported with the patch. It will NOT
"BLD",5304,1,476,0)
          backup any other changes such as DDs or templates.
"BLD",5304,1,477,0)
       b) Compare Transport Global to Current System - this option will
"BLD",5304,1,478,0)
          allow you to view all changes that will be made when the patch
"BLD",5304,1,479,0)
          is installed. It compares all components of the patch
"BLD",5304,1,480,0)
          (routines, DDs, templates, etc.).
"BLD",5304,1,481,0)
       c) Verify Checksums in Transport Global - this option will allow
"BLD",5304,1,482,0)
          you to ensure the integrity of the routines that are in the
"BLD",5304,1,483,0)
          transport global.
"BLD",5304,1,484,0)
       d) Print Transport Global - this option will allow you to view the
"BLD",5304,1,485,0)
          components of the KIDS build.
"BLD",5304,1,486,0)
    4) Use the Install Package(s) option and select the package
"BLD",5304,1,487,0)
       LR*5.2*335.
"BLD",5304,1,488,0)
    5) When prompted "Enter the Coordinator for Mail Group 'VBECS DATA
"BLD",5304,1,489,0)
       CONVERSION':" Enter the name of the person who will manage the
"BLD",5304,1,490,0)
       VBECS DATA CONVERSION mailgroup.
"BLD",5304,1,491,0)
    6) When prompted  'Want KIDS to Rebuild Menu Trees Upon Completion
"BLD",5304,1,492,0)
       of Install? YES//  respond YES 
"BLD",5304,1,493,0)
    7) When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
"BLD",5304,1,494,0)
       YES//', respond NO.
"BLD",5304,1,495,0)
    8) When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
"BLD",5304,1,496,0)
       Protocols? YES//', respond NO.
"BLD",5304,4,0)
^9.64PA^6009^6
"BLD",5304,4,6000,0)
6000
"BLD",5304,4,6000,222)
y^y^f^^^^n
"BLD",5304,4,6001,0)
6001
"BLD",5304,4,6001,222)
y^y^f^^^^n
"BLD",5304,4,6003,0)
6003
"BLD",5304,4,6003,222)
y^y^f^^n^^y^a^n
"BLD",5304,4,6005,0)
6005
"BLD",5304,4,6005,222)
y^y^f^^^^n^^
"BLD",5304,4,6005,224)

"BLD",5304,4,6007,0)
6007
"BLD",5304,4,6007,222)
y^y^f^^n^^y^o^n
"BLD",5304,4,6009,0)
6009
"BLD",5304,4,6009,222)
y^y^f^^n^^y^o^n
"BLD",5304,4,6009,224)

"BLD",5304,4,"B",6000,6000)

"BLD",5304,4,"B",6001,6001)

"BLD",5304,4,"B",6003,6003)

"BLD",5304,4,"B",6005,6005)

"BLD",5304,4,"B",6007,6007)

"BLD",5304,4,"B",6009,6009)

"BLD",5304,6.3)
5
"BLD",5304,"ABNS",0)
^9.66A^^
"BLD",5304,"ABPKG")
n^n
"BLD",5304,"KRN",0)
^9.67PA^8989.52^19
"BLD",5304,"KRN",.4,0)
.4
"BLD",5304,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",5304,"KRN",.401,0)
.401
"BLD",5304,"KRN",.401,"NM",0)
^9.68A^^
"BLD",5304,"KRN",.402,0)
.402
"BLD",5304,"KRN",.402,"NM",0)
^9.68A^^
"BLD",5304,"KRN",.403,0)
.403
"BLD",5304,"KRN",.403,"NM",0)
^9.68A^^
"BLD",5304,"KRN",.5,0)
.5
"BLD",5304,"KRN",.84,0)
.84
"BLD",5304,"KRN",3.6,0)
3.6
"BLD",5304,"KRN",3.6,"NM",0)
^9.68A^^
"BLD",5304,"KRN",3.8,0)
3.8
"BLD",5304,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",5304,"KRN",3.8,"NM",1,0)
VBECS DATA CONVERSION^^0
"BLD",5304,"KRN",3.8,"NM","B","VBECS DATA CONVERSION",1)

"BLD",5304,"KRN",9.2,0)
9.2
"BLD",5304,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",5304,"KRN",9.8,0)
9.8
"BLD",5304,"KRN",9.8,"NM",0)
^9.68A^23^20
"BLD",5304,"KRN",9.8,"NM",1,0)
VBECDC01^^0^B38136752
"BLD",5304,"KRN",9.8,"NM",2,0)
VBECDC02^^0^B4904086
"BLD",5304,"KRN",9.8,"NM",4,0)
VBECDCHX^^0^B13671377
"BLD",5304,"KRN",9.8,"NM",5,0)
VBECDCM^^0^B20099895
"BLD",5304,"KRN",9.8,"NM",6,0)
VBECDCM0^^0^B11064686
"BLD",5304,"KRN",9.8,"NM",7,0)
VBECDCM1^^0^B24209996
"BLD",5304,"KRN",9.8,"NM",8,0)
VBECDCM2^^0^B22225177
"BLD",5304,"KRN",9.8,"NM",9,0)
VBECDCMP^^0^B16912213
"BLD",5304,"KRN",9.8,"NM",10,0)
VBECDCNM^^0^B13224428
"BLD",5304,"KRN",9.8,"NM",11,0)
VBECDCR^^0^B30083905
"BLD",5304,"KRN",9.8,"NM",12,0)
VBECDCSP^^0^B1068327
"BLD",5304,"KRN",9.8,"NM",13,0)
VBECDCST^^0^B10953715
"BLD",5304,"KRN",9.8,"NM",14,0)
VBECDCU^^0^B32610200
"BLD",5304,"KRN",9.8,"NM",15,0)
VBECDCU1^^0^B14426272
"BLD",5304,"KRN",9.8,"NM",16,0)
VBECDCU2^^0^B36794365
"BLD",5304,"KRN",9.8,"NM",17,0)
VBECDCX^^0^B45221687
"BLD",5304,"KRN",9.8,"NM",19,0)
VBECDC19^^0^B52486759
"BLD",5304,"KRN",9.8,"NM",20,0)
VBECDC00^^0^B29006974
"BLD",5304,"KRN",9.8,"NM",22,0)
VBECDCX1^^0^B10155625
"BLD",5304,"KRN",9.8,"NM",23,0)
VBECDCDC^^0^B30473665
"BLD",5304,"KRN",9.8,"NM","B","VBECDC00",20)

"BLD",5304,"KRN",9.8,"NM","B","VBECDC01",1)

"BLD",5304,"KRN",9.8,"NM","B","VBECDC02",2)

"BLD",5304,"KRN",9.8,"NM","B","VBECDC19",19)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCDC",23)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCHX",4)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCM",5)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCM0",6)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCM1",7)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCM2",8)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCMP",9)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCNM",10)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCR",11)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCSP",12)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCST",13)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCU",14)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCU1",15)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCU2",16)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCX",17)

"BLD",5304,"KRN",9.8,"NM","B","VBECDCX1",22)

"BLD",5304,"KRN",19,0)
19
"BLD",5304,"KRN",19,"NM",0)
^9.68A^45^29
"BLD",5304,"KRN",19,"NM",1,0)
VBEC ANTIBODY/ANTIGEN UTIL.^^0
"BLD",5304,"KRN",19,"NM",4,0)
VBEC CONVERSION UTILITIES^^0
"BLD",5304,"KRN",19,"NM",5,0)
VBEC DATA CONV. TO HOST FILES^^0
"BLD",5304,"KRN",19,"NM",6,0)
VBEC DATA VALIDATION^^0
"BLD",5304,"KRN",19,"NM",7,0)
VBEC DELETE ANTIBODY/ANTIGEN^^0
"BLD",5304,"KRN",19,"NM",10,0)
VBEC DELETE EXTRACTED DATA^^0
"BLD",5304,"KRN",19,"NM",11,0)
VBEC DELETE SYSTEM LEVEL FILES^^0
"BLD",5304,"KRN",19,"NM",12,0)
VBEC DELETE TRANS. REACTION^^0
"BLD",5304,"KRN",19,"NM",13,0)
VBEC INVALID DATA REPORT^^0
"BLD",5304,"KRN",19,"NM",16,0)
VBEC MAIN MENU^^0
"BLD",5304,"KRN",19,"NM",17,0)
VBEC MATCH ANTIBODY/ANTIGEN^^0
"BLD",5304,"KRN",19,"NM",21,0)
VBEC POST-CONVERSION UTILITIES^^0
"BLD",5304,"KRN",19,"NM",22,0)
VBEC PRE-CONVERSION UTILITIES^^0
"BLD",5304,"KRN",19,"NM",23,0)
VBEC SITE PARAMETER ENTER/EDIT^^0
"BLD",5304,"KRN",19,"NM",24,0)
VBEC STANDARD ANTIBODIES^^0
"BLD",5304,"KRN",19,"NM",27,0)
VBEC STANDARD TRANS. REACTIONS^^0
"BLD",5304,"KRN",19,"NM",28,0)
VBEC TRANS. REACTION UTILITIES^^0
"BLD",5304,"KRN",19,"NM",29,0)
VBEC UNDO ANTIBODY/ANTIGEN^^0
"BLD",5304,"KRN",19,"NM",32,0)
VBEC UNDO SINGLE MATCHING^^0
"BLD",5304,"KRN",19,"NM",34,0)
VBEC UNMATCHED VISTA DATA RPT^^0
"BLD",5304,"KRN",19,"NM",35,0)
VBEC UPDATE ANTIBODY/ANTIGEN^^0
"BLD",5304,"KRN",19,"NM",38,0)
VBEC UPDATE TRANS. REACT. REC^^0
"BLD",5304,"KRN",19,"NM",39,0)
VBEC UNDO TRANS. REACTIONS^^0
"BLD",5304,"KRN",19,"NM",40,0)
VBEC PRINT SQL/VISTA MATCHES^^0
"BLD",5304,"KRN",19,"NM",41,0)
VBEC BB COMPONENTS DISABLE^^0
"BLD",5304,"KRN",19,"NM",42,0)
VBEC BB COMPONENTS ENABLE^^0
"BLD",5304,"KRN",19,"NM",43,0)
VBEC MATCH TRANSFUS REACTION^^0
"BLD",5304,"KRN",19,"NM",44,0)
VBEC DELETE CONV. STATS^^0
"BLD",5304,"KRN",19,"NM",45,0)
VBEC DATA CONVERSION STATS^^0
"BLD",5304,"KRN",19,"NM","B","VBEC ANTIBODY/ANTIGEN UTIL.",1)

"BLD",5304,"KRN",19,"NM","B","VBEC BB COMPONENTS DISABLE",41)

"BLD",5304,"KRN",19,"NM","B","VBEC BB COMPONENTS ENABLE",42)

"BLD",5304,"KRN",19,"NM","B","VBEC CONVERSION UTILITIES",4)

"BLD",5304,"KRN",19,"NM","B","VBEC DATA CONV. TO HOST FILES",5)

"BLD",5304,"KRN",19,"NM","B","VBEC DATA CONVERSION STATS",45)

"BLD",5304,"KRN",19,"NM","B","VBEC DATA VALIDATION",6)

"BLD",5304,"KRN",19,"NM","B","VBEC DELETE ANTIBODY/ANTIGEN",7)

"BLD",5304,"KRN",19,"NM","B","VBEC DELETE CONV. STATS",44)

"BLD",5304,"KRN",19,"NM","B","VBEC DELETE EXTRACTED DATA",10)

"BLD",5304,"KRN",19,"NM","B","VBEC DELETE SYSTEM LEVEL FILES",11)

"BLD",5304,"KRN",19,"NM","B","VBEC DELETE TRANS. REACTION",12)

"BLD",5304,"KRN",19,"NM","B","VBEC INVALID DATA REPORT",13)

"BLD",5304,"KRN",19,"NM","B","VBEC MAIN MENU",16)

"BLD",5304,"KRN",19,"NM","B","VBEC MATCH ANTIBODY/ANTIGEN",17)

"BLD",5304,"KRN",19,"NM","B","VBEC MATCH TRANSFUS REACTION",43)

"BLD",5304,"KRN",19,"NM","B","VBEC POST-CONVERSION UTILITIES",21)

"BLD",5304,"KRN",19,"NM","B","VBEC PRE-CONVERSION UTILITIES",22)

"BLD",5304,"KRN",19,"NM","B","VBEC PRINT SQL/VISTA MATCHES",40)

"BLD",5304,"KRN",19,"NM","B","VBEC SITE PARAMETER ENTER/EDIT",23)

"BLD",5304,"KRN",19,"NM","B","VBEC STANDARD ANTIBODIES",24)

"BLD",5304,"KRN",19,"NM","B","VBEC STANDARD TRANS. REACTIONS",27)

"BLD",5304,"KRN",19,"NM","B","VBEC TRANS. REACTION UTILITIES",28)

"BLD",5304,"KRN",19,"NM","B","VBEC UNDO ANTIBODY/ANTIGEN",29)

"BLD",5304,"KRN",19,"NM","B","VBEC UNDO SINGLE MATCHING",32)

"BLD",5304,"KRN",19,"NM","B","VBEC UNDO TRANS. REACTIONS",39)

"BLD",5304,"KRN",19,"NM","B","VBEC UNMATCHED VISTA DATA RPT",34)

"BLD",5304,"KRN",19,"NM","B","VBEC UPDATE ANTIBODY/ANTIGEN",35)

"BLD",5304,"KRN",19,"NM","B","VBEC UPDATE TRANS. REACT. REC",38)

"BLD",5304,"KRN",19.1,0)
19.1
"BLD",5304,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",5304,"KRN",101,0)
101
"BLD",5304,"KRN",101,"NM",0)
^9.68A^^
"BLD",5304,"KRN",409.61,0)
409.61
"BLD",5304,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",5304,"KRN",771,0)
771
"BLD",5304,"KRN",870,0)
870
"BLD",5304,"KRN",8989.51,0)
8989.51
"BLD",5304,"KRN",8989.52,0)
8989.52
"BLD",5304,"KRN",8994,0)
8994
"BLD",5304,"KRN","B",.4,.4)

"BLD",5304,"KRN","B",.401,.401)

"BLD",5304,"KRN","B",.402,.402)

"BLD",5304,"KRN","B",.403,.403)

"BLD",5304,"KRN","B",.5,.5)

"BLD",5304,"KRN","B",.84,.84)

"BLD",5304,"KRN","B",3.6,3.6)

"BLD",5304,"KRN","B",3.8,3.8)

"BLD",5304,"KRN","B",9.2,9.2)

"BLD",5304,"KRN","B",9.8,9.8)

"BLD",5304,"KRN","B",19,19)

"BLD",5304,"KRN","B",19.1,19.1)

"BLD",5304,"KRN","B",101,101)

"BLD",5304,"KRN","B",409.61,409.61)

"BLD",5304,"KRN","B",771,771)

"BLD",5304,"KRN","B",870,870)

"BLD",5304,"KRN","B",8989.51,8989.51)

"BLD",5304,"KRN","B",8989.52,8989.52)

"BLD",5304,"KRN","B",8994,8994)

"BLD",5304,"QUES",0)
^9.62^^
"BLD",5304,"REQB",0)
^9.611^^
"DATA",6003,1,0)
LRBLAD
"DATA",6003,1,1,0)
^^2^2^3020927^^
"DATA",6003,1,1,1,0)
Prints data changes from one date to another in order to provide an audit  
"DATA",6003,1,1,2,0)
trail for changes in 'verified' data.
"DATA",6003,2,0)
LRBLAR
"DATA",6003,2,1,0)
^^2^2^3020927^^
"DATA",6003,2,1,1,0)
Deletes old data change audits from one date to another once a hard copy
"DATA",6003,2,1,2,0)
has been generated.
"DATA",6003,3,0)
LRBLDA
"DATA",6003,3,1,0)
^^1^1^3020927^^^^
"DATA",6003,3,1,1,0)
Allows editing of data relating to donor collection or deferrals
"DATA",6003,4,0)
LRBLDAWARD
"DATA",6003,4,1,0)
^^4^4^3020927^^^
"DATA",6003,4,1,1,0)
If new award is to be given a blood donor then 'YES' will be on
"DATA",6003,4,1,2,0)
 record.  After award is given the entry should be deleted.
"DATA",6003,4,1,3,0)
 Deletion will trigger the TOTAL AWARD field in file 65.5 and
"DATA",6003,4,1,4,0)
 increment the total by 1.
"DATA",6003,5,0)
LRBLDC
"DATA",6003,5,1,0)
^^1^1^3020927^^^
"DATA",6003,5,1,1,0)
Entry of blood donor collection data for a specific donation attempt.
"DATA",6003,6,0)
LRBLDCP
"DATA",6003,6,1,0)
^^2^2^3020927^^^
"DATA",6003,6,1,1,0)
Enter information from the most recent donation regarding component
"DATA",6003,6,1,2,0)
 preparation or collection disposition.
"DATA",6003,7,0)
LRBLDCU
"DATA",6003,7,1,0)
^^3^3^3020927^^
"DATA",6003,7,1,1,0)
Calculates cumulative weighted donations for blood donor. (If a donation of
"DATA",6003,7,1,2,0)
 whole blood is given a weight of 1, and cytopheresis may be given a
"DATA",6003,7,1,3,0)
 weight of 4.)
"DATA",6003,8,0)
LRBLDCX
"DATA",6003,8,1,0)
^^1^1^3020927^^
"DATA",6003,8,1,1,0)
Allows editing of blood donor consent on the History, physical & consent form for a donation.
"DATA",6003,9,0)
LRBLDD
"DATA",6003,9,1,0)
^^1^1^3020927^^^
"DATA",6003,9,1,1,0)
Enter/edit blood donor demographics for a donor already in the Donor file.
"DATA",6003,10,0)
LRBLDDAT
"DATA",6003,10,1,0)
^^1^1^3020927^^^
"DATA",6003,10,1,1,0)
Entry of ABO group and Rh type testing results of blood donor units
"DATA",6003,11,0)
LRBLDEDIT
"DATA",6003,11,1,0)
^^2^2^3020927^^^^
"DATA",6003,11,1,1,0)
Allows editing of blood donor group and type if blood bank
"DATA",6003,11,1,2,0)
 supervisor's key is held.
"DATA",6003,12,0)
LRBLDEF
"DATA",6003,12,1,0)
^^4^4^3020927^^^
"DATA",6003,12,1,1,0)
Allows entering or editing permanent deferral for a blood donor
"DATA",6003,12,1,2,0)
 and asks the reason(s) for permanent deferral.
"DATA",6003,12,1,3,0)
 Only users with the blood bank supervisor key can use this
"DATA",6003,12,1,4,0)
 option.
"DATA",6003,13,0)
LRBLDK
"DATA",6003,13,1,0)
^^1^1^3020927^^^
"DATA",6003,13,1,1,0)
Removes ex-blood donors from the blood donor file, once a hard copy has been printed.
"DATA",6003,14,0)
LRBLDLG
"DATA",6003,14,1,0)
^^1^1^3020927^^^
"DATA",6003,14,1,1,0)
Entry of blood donor registration data.
"DATA",6003,15,0)
LRBLDLT
"DATA",6003,15,1,0)
^^2^2^3020927^^
"DATA",6003,15,1,1,0)
Enter or edit letters to blood donors for recruitment,
"DATA",6003,15,1,2,0)
 appreciation, etc.
"DATA",6003,16,0)
LRBLDMV
"DATA",6003,16,1,0)
^^1^1^3020927^
"DATA",6003,16,1,1,0)
Allows a user holding the LRBLSUPER key to move a blood donation from one donor to another.
"DATA",6003,17,0)
LRBLDO
"DATA",6003,17,1,0)
^^1^1^3030815^
"DATA",6003,17,1,1,0)
Enter old blood donor records into the database.
"DATA",6003,18,0)
LRBLDPH
"DATA",6003,18,1,0)
^^1^1^3020927^^^
"DATA",6003,18,1,1,0)
Enter the blood donor phenotyping (non ABO/Rh) test results
"DATA",6003,19,0)
LRBLDR
"DATA",6003,19,1,0)
^^2^2^3020927^^^^
"DATA",6003,19,1,1,0)
Print the donor history, physical and consent form for recording information
"DATA",6003,19,1,2,0)
regarding each specific donation attempt.
"DATA",6003,20,0)
LRBLDRR
"DATA",6003,20,1,0)
^^2^2^3020927^^^^
"DATA",6003,20,1,1,0)
Allows reviewing of tests performed on blood donation, records labeling and
"DATA",6003,20,1,2,0)
 releasing of components into the inventory file.
"DATA",6003,21,0)
LRBLDT
"DATA",6003,21,1,0)
^^1^1^3020927^^
"DATA",6003,21,1,1,0)
Stores results of lab tests (other than ABO/Rh) on blood donations.
"DATA",6003,22,0)
LRBLDUC
"DATA",6003,22,1,0)
^^1^1^3020927^
"DATA",6003,22,1,1,0)
Donor unit ABO/Rh recheck.
"DATA",6003,23,0)
LRBLIDN
"DATA",6003,23,1,0)
^^2^2^3020927^^^^
"DATA",6003,23,1,1,0)
Enter disposition of blood component units in inventory that have
"DATA",6003,23,1,2,0)
 a disposition other than transfused.
"DATA",6003,24,0)
LRBLIDR
"DATA",6003,24,1,0)
^^1^1^3020927^^^^
"DATA",6003,24,1,1,0)
Enter the information for the relocation of a blood component unit.
"DATA",6003,25,0)
LRBLILA
"DATA",6003,25,1,0)
^^2^2^3020927^^^^
"DATA",6003,25,1,1,0)
This option prints labels to be pasted to UNIT CAUTION TAGS
"DATA",6003,25,1,2,0)
 (VA Form 10-2984). The tag MUST still be initialed by tech.
"DATA",6003,26,0)
LRBLILR
"DATA",6003,26,1,0)
^^1^1^3020927^^^^
"DATA",6003,26,1,1,0)
Log-in blood component units in the blood inventory file (#65).
"DATA",6003,27,0)
LRBLILS
"DATA",6003,27,1,0)
^^1^1^3020927^^^
"DATA",6003,27,1,1,0)
Enter any additional typing charges for blood component units in inventory.
"DATA",6003,28,0)
LRBLISH
"DATA",6003,28,1,0)
^^1^1^3020927^^
"DATA",6003,28,1,1,0)
Prints units shipped to other facilities
"DATA",6003,29,0)
LRBLIUC
"DATA",6003,29,1,0)
^^1^1^3020927^^^
"DATA",6003,29,1,1,0)
Enter results of confirmation testing for the ABO/Rh of blood component units in inventory.
"DATA",6003,30,0)
LRBLIUP
"DATA",6003,30,1,0)
^^1^1^3020927^^^^
"DATA",6003,30,1,1,0)
Enter non ABO/Rh phenotypes of blood component units in inventory.
"DATA",6003,31,0)
LRBLIUR
"DATA",6003,31,1,0)
^^2^2^3020927^^^
"DATA",6003,31,1,1,0)
Enter units released (those no longer needed to be kept on crossmatch)
"DATA",6003,31,1,2,0)
to allow the units to be returned to available stock.
"DATA",6003,32,0)
LRBLIW
"DATA",6003,32,1,0)
^^3^3^3020927^^^
"DATA",6003,32,1,1,0)
Prints entries for repeat ABO/Rh testing from inventory which are
"DATA",6003,32,1,2,0)
 automatically put in a queue when a unit is logged-in under inventory
"DATA",6003,32,1,3,0)
 log-in if the unit requires a crossmatch.
"DATA",6003,33,0)
LRBLJM
"DATA",6003,33,1,0)
^^3^3^3020927^
"DATA",6003,33,1,1,0)
Allows adding or removing a unit to a pooled blood product 
"DATA",6003,33,1,2,0)
or deletion of the pooled product if the pool has no 
"DATA",6003,33,1,3,0)
disposition.
"DATA",6003,34,0)
LRBLJTR
"DATA",6003,34,1,0)
^^2^2^3020927^
"DATA",6003,34,1,1,0)
Transfers unit from one division to another.
"DATA",6003,34,1,2,0)
 Record of transfer is kept in field 999 of file 65.
"DATA",6003,35,0)
LRBLPC
"DATA",6003,35,1,0)
^^2^2^3030321^
"DATA",6003,35,1,1,0)
Request blood component for patient, select units from inventory and 
"DATA",6003,35,1,2,0)
enter results of crossmatching units with patient's blood sample.
"DATA",6003,36,0)
LRBLPH
"DATA",6003,36,1,0)
^^1^1^3030321^
"DATA",6003,36,1,1,0)
Enter test data for blood bank patient.
"DATA",6003,37,0)
LRBLPCS
"DATA",6003,37,1,0)
^^1^1^3020927^^^
"DATA",6003,37,1,1,0)
Enter blood component requests for a patient.
"DATA",6003,38,0)
LRBLPED
"DATA",6003,38,1,0)
^^1^1^3020927^
"DATA",6003,38,1,1,0)
Prepare pediatric units from existing units in inventory
"DATA",6003,39,0)
LRBLPEDIT
"DATA",6003,39,1,0)
^^2^2^3020927^^
"DATA",6003,39,1,1,0)
Allows editing patient ABO/Rh if user holds blood bank
"DATA",6003,39,1,2,0)
 supervisor key.
"DATA",6003,40,0)
LRBLPER
"DATA",6003,40,1,0)
^^1^1^3020927^^^^
"DATA",6003,40,1,1,0)
Enter old blood bank records for a patient
"DATA",6003,41,0)
LRBLPET
"DATA",6003,41,1,0)
^^1^1^3020927^^^^
"DATA",6003,41,1,1,0)
Enter test data for blood bank patient.
"DATA",6003,42,0)
LRBLPIC
"DATA",6003,42,1,0)
^^2^2^3020927^^^
"DATA",6003,42,1,1,0)
This option allows selecting blood component units in inventory for
"DATA",6003,42,1,2,0)
 a patient.
"DATA",6003,43,0)
LRBLPLOGIN
"DATA",6003,43,1,0)
^^1^1^3020927^^^^
"DATA",6003,43,1,1,0)
Log-in blood sample from a patient for blood bank tests and procedures.
"DATA",6003,44,0)
LRBLPOST
"DATA",6003,44,1,0)
^^1^1^3030815^
"DATA",6003,44,1,1,0)
Converts entries in file 81, field 66, to file 66.5.
"DATA",6003,45,0)
LRBLPSI
"DATA",6003,45,1,0)
^^2^2^3020927^^^^
"DATA",6003,45,1,1,0)
Special instructions for blood bank if patient has antibody
"DATA",6003,45,1,2,0)
 or other transfusion problems
"DATA",6003,46,0)
LRBLPT
"DATA",6003,46,1,0)
^^1^1^3020927^^^
"DATA",6003,46,1,1,0)
Records date of transfusion and transfusion comments.
"DATA",6003,47,0)
LRBLPTXR
"DATA",6003,47,1,0)
^^2^2^3020927^
"DATA",6003,47,1,1,0)
Transfusion reactions without identifying specific units are entered 
"DATA",6003,47,1,2,0)
using this option
"DATA",6003,48,0)
LRBLPX
"DATA",6003,48,1,0)
^^2^2^3020927^^
"DATA",6003,48,1,1,0)
Records results of crossmatch and allows user to make the blood component
"DATA",6003,48,1,2,0)
 available for patient use.
"DATA",6003,49,0)
LRBLRIN
"DATA",6003,49,1,0)
^^1^1^3020927^^^
"DATA",6003,49,1,1,0)
This option prints the invoices of suppliers of blood component units.
"DATA",6003,50,0)
LRBLRIS
"DATA",6003,50,1,0)
^^2^2^3020927^^^
"DATA",6003,50,1,1,0)
This option prints the list of special blood cell typing charges of
"DATA",6003,50,1,2,0)
 units in inventory.
"DATA",6003,51,0)
LRBLRIT
"DATA",6003,51,1,0)
^^1^1^3020927^^^^
"DATA",6003,51,1,1,0)
This option prints the transactions of suppliers of blood component units.
"DATA",6003,52,0)
LRBLSI
"DATA",6003,52,1,0)
^^1^1^3030321^
"DATA",6003,52,1,1,0)
Edit options for blood bank inventory file (#65)
"DATA",6003,53,0)
LRBLSEB
"DATA",6003,53,1,0)
^^1^1^3020927^^^
"DATA",6003,53,1,1,0)
Allows editing the blood product file (#66).
"DATA",6003,54,0)
LRBLSEC
"DATA",6003,54,1,0)
^^2^2^3020927^^^^
"DATA",6003,54,1,1,0)
Allows editing PATIENT XMATCHED/ASSIGNED and DATE/TIME UNIT RELOCATION
"DATA",6003,54,1,2,0)
 fields.
"DATA",6003,55,0)
LRBLSED
"DATA",6003,55,1,0)
^^3^3^3020927^^^
"DATA",6003,55,1,1,0)
Edit disposition, disposition date, disposition comment, patient transfused,
"DATA",6003,55,1,2,0)
 physician, service, transfusion comment and modify to/from fields in
"DATA",6003,55,1,3,0)
 blood bank inventory file (#65).
"DATA",6003,56,0)
LRBLSEE
"DATA",6003,56,1,0)
^19.06^6^6^3020927^^^^
"DATA",6003,56,1,1,0)
If a blood component in the inventory file is only for an autologous
"DATA",6003,56,1,2,0)
 donor and it is desired to free the unit for other patients this
"DATA",6003,56,1,3,0)
 option can free the unit.  However if any of the screening tests on
"DATA",6003,56,1,4,0)
 the unit is positive (syphilis serology, HBsAg, HTLV-III antibody)
"DATA",6003,56,1,5,0)
 or the unit did not have all of the screening tests performed
"DATA",6003,56,1,6,0)
 the unit cannot be made available to anyone other than the donor.
"DATA",6003,57,0)
LRBLSEF
"DATA",6003,57,1,0)
^^1^1^3020927^^^
"DATA",6003,57,1,1,0)
Allows editing the laboratory/blood bank description file.
"DATA",6003,58,0)
LRBLSEH
"DATA",6003,58,1,0)
^^2^2^3020927^^^^
"DATA",6003,58,1,1,0)
Allows editing of the blood donor history questions which appear on the
"DATA",6003,58,1,2,0)
 donor history,physical and consent form.
"DATA",6003,59,0)
LRBLSEL
"DATA",6003,59,1,0)
^^1^1^3020927^^^
"DATA",6003,59,1,1,0)
Allows editing blood component unit log-in prompts.
"DATA",6003,60,0)
LRBLSER
"DATA",6003,60,1,0)
^^2^2^3020927^^^
"DATA",6003,60,1,1,0)
Removes from inventory those blood component units with
"DATA",6003,60,1,2,0)
 final dispositions after a hard copy has been printed.
"DATA",6003,61,0)
LRBLSET
"DATA",6003,61,1,0)
^^1^1^3020927^^^
"DATA",6003,61,1,1,0)
Tests to be printed with blood components transfused.
"DATA",6003,62,0)
LRBLSEU
"DATA",6003,62,1,0)
^^1^1^3020927^^^
"DATA",6003,62,1,1,0)
Allows editing entries in the blood donor utility file.
"DATA",6003,63,0)
LRBLSF
"DATA",6003,63,1,0)
^^2^2^3020927^^^^
"DATA",6003,63,1,1,0)
The number of lines from the top of one label to the top of the next
"DATA",6003,63,1,2,0)
 label.  This is used as the default value when printing various labels.
"DATA",6003,64,0)
LRBLSLL
"DATA",6003,64,1,0)
^^1^1^3020927^
"DATA",6003,64,1,1,0)
Option allows adding/editing letters or consults in lab letter file.
"DATA",6003,65,0)
LRBLSMS
"DATA",6003,65,1,0)
^^2^2^3020927^^
"DATA",6003,65,1,1,0)
Allows entering/editing the pre-operative surgical blood 
"DATA",6003,65,1,2,0)
 component orders for an operation.
"DATA",6003,66,0)
LRBLSNO
"DATA",6003,66,1,0)
^^2^2^3020927^^^^
"DATA",6003,66,1,1,0)
Allows enter/edit of corresponding antigen or antibody (field .04)
"DATA",6003,66,1,2,0)
 in file 61.3 (FUNCTION FIELD of SNOMED).
"DATA",6003,67,0)
LRBLSPP
"DATA",6003,67,1,0)
^^2^2^3020927^^^^
"DATA",6003,67,1,1,0)
Edit previous transfusion data entered via [LRBLPER] 'Enter previous
"DATA",6003,67,1,2,0)
 records' option.
"DATA",6003,68,0)
LRBLSRI
"DATA",6003,68,1,0)
^^2^2^3020927^^
"DATA",6003,68,1,1,0)
Deletes only inappropriate transfusion requests that have been
"DATA",6003,68,1,2,0)
 printed.
"DATA",6003,69,0)
LRBLSRQ
"DATA",6003,69,1,0)
^^1^1^3020927^^^^
"DATA",6003,69,1,1,0)
Edit requests for blood components
"DATA",6003,70,0)
LRBLSSP
"DATA",6003,70,1,0)
^^1^1^3020927^^
"DATA",6003,70,1,1,0)
Allows local site configuration of certain options.
"DATA",6003,71,0)
LRBLST
"DATA",6003,71,1,0)
^^2^2^3020927^^^^
"DATA",6003,71,1,1,0)
Edit/enter lab tests to be displayed for a specific specimen (ex. blood)
"DATA",6003,71,1,2,0)
 when a patient is entered for xmatching or for selecting blood components.
"DATA",6003,72,0)
LRBLTTW
"DATA",6003,72,1,0)
^^1^1^3020927^^^
"DATA",6003,72,1,1,0)
Provides a list of tests on a worklist.
"DATA",6003,73,0)
LRBLTX
"DATA",6003,73,1,0)
^^2^2^3020927^
"DATA",6003,73,1,1,0)
Select tests, appropriate specimens and values for transfusion follow-up
"DATA",6003,73,1,2,0)
 for identifying transfusion related disorders.
"DATA",6003,74,0)
LRBLVAL
"DATA",6003,74,1,0)
^^1^1^3020927^
"DATA",6003,74,1,1,0)
Documents validation testing of blood bank options.
"DATA",6003,75,0)
LRBLSP
"DATA",6003,75,1,0)
^^1^1^3030321^
"DATA",6003,75,1,1,0)
Blood bank patient options available for supervisor
"DATA",6007,2,0)
Anti-A1^51620^2^AB
"DATA",6007,2,1)
61.3
"DATA",6007,3,0)
Anti-Au(a)^52650^3^AB
"DATA",6007,3,1)
61.3
"DATA",6007,5,0)
Anti-C^52020^5^AB
"DATA",6007,5,1)
61.3
"DATA",6007,6,0)
Anti-Ce^52070^6^AB
"DATA",6007,6,1)
61.3
"DATA",6007,7,0)
Anti-C(w)^52080^7^AB
"DATA",6007,7,1)
61.3
"DATA",6007,8,0)
Anti-C(x)^52090^8^AB
"DATA",6007,8,1)
61.3
"DATA",6007,9,0)
Anti-Co(a)^53010^9^AB
"DATA",6007,9,1)
61.3
"DATA",6007,10,0)
Anti-Co(b)^53020^10^AB
"DATA",6007,10,1)
61.3
"DATA",6007,11,0)
Anti-D^52010^11^AB
"DATA",6007,11,1)
61.3
"DATA",6007,12,0)
Anti-Di(a)^52520^12^AB
"DATA",6007,12,1)
61.3
"DATA",6007,13,0)
Anti-Di(b)^52530^13^AB
"DATA",6007,13,1)
61.3
"DATA",6007,14,0)
Anti-Do(a)^52610^14^AB
"DATA",6007,14,1)
61.3
"DATA",6007,15,0)
Anti-Do(b)^53030^15^AB
"DATA",6007,15,1)
61.3
"DATA",6007,16,0)
Anti-E^52030^16^AB
"DATA",6007,16,1)
61.3
"DATA",6007,17,0)
Anti-E(w)^52110^17^AB
"DATA",6007,17,1)
61.3
"DATA",6007,18,0)
Anti-Fy(a)^52440^18^AB
"DATA",6007,18,1)
61.3
"DATA",6007,19,0)
Anti-Fy(b)^52450^19^AB
"DATA",6007,19,1)
61.3
"DATA",6007,20,0)
Anti-G^52120^20^AB
"DATA",6007,20,1)
61.3
"DATA",6007,21,0)
Anti-H^51640^21^AB
"DATA",6007,21,1)
61.3
"DATA",6007,22,0)
Anti-I^51750^22^AB
"DATA",6007,22,1)
61.3
"DATA",6007,23,0)
Anti-I(int)^51770^23^AB
"DATA",6007,23,1)
61.3
"DATA",6007,24,0)
Anti-Jk(a)^52410^24^AB
"DATA",6007,24,1)
61.3
"DATA",6007,25,0)
Anti-Jk3^52430^25^AB
"DATA",6007,25,1)
61.3
"DATA",6007,26,0)
Anti-Jk(b)^52420^26^AB
"DATA",6007,26,1)
61.3
"DATA",6007,27,0)
Anti-Js(a)^51850^27^AB
"DATA",6007,27,1)
61.3
"DATA",6007,28,0)
Anti-Js(b)^51860^28^AB
"DATA",6007,28,1)
61.3
"DATA",6007,29,0)
Anti-K^51810^29^AB
"DATA",6007,29,1)
61.3
"DATA",6007,30,0)
Anti-Kp(a)^51830^30^AB
"DATA",6007,30,1)
61.3
"DATA",6007,31,0)
Anti-Kp(b)^51840^31^AB
"DATA",6007,31,1)
61.3
"DATA",6007,32,0)
Anti-LW^52180^32^AB
"DATA",6007,32,1)
61.3
"DATA",6007,33,0)
Anti-Le(a)^51680^33^AB
"DATA",6007,33,1)
61.3
"DATA",6007,34,0)
Anti-Le(b)^51690^34^AB
"DATA",6007,34,1)
61.3
"DATA",6007,36,0)
Anti-Le, other^51720^36^AB
"DATA",6007,36,1)
61.3
"DATA",6007,37,0)
Anti-Lu^52340^37^AB
"DATA",6007,37,1)
61.3
"DATA",6007,38,0)
Anti-Lu(a)^52350^38^AB
"DATA",6007,38,1)
61.3
"DATA",6007,40,0)
Anti-Lu(b)^52360^40^AB
"DATA",6007,40,1)
61.3
"DATA",6007,41,0)
Anti-M^52190^41^AB
"DATA",6007,41,1)
61.3
"DATA",6007,42,0)
Anti-M(g)^52220^42^AB
"DATA",6007,42,1)
61.3
"DATA",6007,43,0)
Anti-M, other^52230^43^AB
"DATA",6007,43,1)
61.3
"DATA",6007,44,0)
Anti-Mi(a)^52210^44^AB
"DATA",6007,44,1)
61.3
"DATA",6007,45,0)
Anti-N^52280^45^AB
"DATA",6007,45,1)
61.3
"DATA",6007,46,0)
Anti-N, other^52290^46^AB
"DATA",6007,46,1)
61.3
"DATA",6007,47,0)
Anti-P^51870^47^AB
"DATA",6007,47,1)
61.3
"DATA",6007,48,0)
Anti-P1^51880^48^AB
"DATA",6007,48,1)
61.3
"DATA",6007,49,0)
Anti-P1+P+P(k)^51890^49^AB
"DATA",6007,49,1)
61.3
"DATA",6007,50,0)
Anti-S^52310^50^AB
"DATA",6007,50,1)
61.3
"DATA",6007,51,0)
Anti-Sc1^53040^51^AB
"DATA",6007,51,1)
61.3
"DATA",6007,52,0)
Anti-Sc2^53050^52^AB
"DATA",6007,52,1)
61.3
"DATA",6007,53,0)
Anti-Sd(a)^53060^53^AB
"DATA",6007,53,1)
61.3
"DATA",6007,54,0)
Anti-U^52330^54^AB
"DATA",6007,54,1)
61.3
"DATA",6007,55,0)
Anti-V^52100^55^AB
"DATA",6007,55,1)
61.3
"DATA",6007,56,0)
Anti-Xg(a)^52510^56^AB
"DATA",6007,56,1)
61.3
"DATA",6007,57,0)
Anti-Yt(a)^52540^57^AB
"DATA",6007,57,1)
61.3
"DATA",6007,58,0)
Anti-Yt(b)^52550^58^AB
"DATA",6007,58,1)
61.3
"DATA",6007,59,0)
Anti-c^52040^59^AB
"DATA",6007,59,1)
61.3
"DATA",6007,60,0)
Anti-e^52050^60^AB
"DATA",6007,60,1)
61.3
"DATA",6007,61,0)
Anti-f^52060^61^AB
"DATA",6007,61,1)
61.3
"DATA",6007,62,0)
Anti-i^51760^62^AB
"DATA",6007,62,1)
61.3
"DATA",6007,63,0)
Anti-k^51820^63^AB
"DATA",6007,63,1)
61.3
"DATA",6007,64,0)
Anti-Pk^51900^64^AB
"DATA",6007,64,1)
61.3
"DATA",6007,65,0)
Anti rhesus, other^52130^65^AB
"DATA",6007,65,1)
61.3
"DATA",6007,66,0)
Anti rhesus, NOS^52000^66^AB
"DATA",6007,66,1)
61.3
"DATA",6007,67,0)
Anti-s^52320^67^AB
"DATA",6007,67,1)
61.3
"DATA",6007,71,0)
Anti-Ch^^71^AB
"DATA",6007,71,1)
61.3
"DATA",6007,72,0)
Cold auto-antibody^^72^AB
"DATA",6007,72,1)
61.3
"DATA",6007,73,0)
Anti-Cs(a)^^73^AB
"DATA",6007,73,1)
61.3
"DATA",6007,74,0)
HTLA (probable)^^74^AB
"DATA",6007,74,1)
61.3
"DATA",6007,75,0)
Anti-JMH^^75^AB
"DATA",6007,75,1)
61.3
"DATA",6007,76,0)
Anti-Kn(a)^^76^AB
"DATA",6007,76,1)
61.3
"DATA",6007,77,0)
Anti-McC(a)^^77^AB
"DATA",6007,77,1)
61.3
"DATA",6007,78,0)
Anti-Rg^^78^AB
"DATA",6007,78,1)
61.3
"DATA",6007,79,0)
Warm auto-antibody^^79^AB
"DATA",6007,79,1)
61.3
"DATA",6007,80,0)
Anti-Yk(a)^^80^AB
"DATA",6007,80,1)
61.3
"DATA",6007,81,0)
Anti-Au(b)^^81^AB
"DATA",6007,81,1)
61.3
"DATA",6007,82,0)
Anti-LW(a)^^86^AB
"DATA",6007,82,1)
61.3
"DATA",6007,83,0)
Anti-LW(b)^^87^AB
"DATA",6007,83,1)
61.3
"DATA",6007,86,0)
Au(a)^^3^AN
"DATA",6007,86,1)
61.3
"DATA",6007,87,0)
Au(b)^^4^AN
"DATA",6007,87,1)
61.3
"DATA",6007,89,0)
C^50730^6^AN
"DATA",6007,89,1)
61.3
"DATA",6007,90,0)
c^^7^AN
"DATA",6007,90,1)
61.3
"DATA",6007,92,0)
Ch^^9^AN
"DATA",6007,92,1)
61.3
"DATA",6007,93,0)
Co(a)^^10^AN
"DATA",6007,93,1)
61.3
"DATA",6007,94,0)
Co(b)^^11^AN
"DATA",6007,94,1)
61.3
"DATA",6007,95,0)
Cs(a)^^12^AN
"DATA",6007,95,1)
61.3
"DATA",6007,96,0)
C(w)^^13^AN
"DATA",6007,96,1)
61.3
"DATA",6007,97,0)
C(x)^^14^AN
"DATA",6007,97,1)
61.3
"DATA",6007,98,0)
D^^15^AN
"DATA",6007,98,1)
61.3
"DATA",6007,99,0)
Di(a)^^16^AN
"DATA",6007,99,1)
61.3
"DATA",6007,100,0)
Di(b)^^17^AN
"DATA",6007,100,1)
61.3
"DATA",6007,101,0)
Do(a)^^18^AN
"DATA",6007,101,1)
61.3
"DATA",6007,102,0)
Do(b)^^19^AN
"DATA",6007,102,1)
61.3
"DATA",6007,103,0)
E^^20^AN
"DATA",6007,103,1)
61.3
"DATA",6007,104,0)
e^^21^AN
"DATA",6007,104,1)
61.3
"DATA",6007,105,0)
E(w)^^22^AN
"DATA",6007,105,1)
61.3
"DATA",6007,106,0)
Fy(a)^^23^AN
"DATA",6007,106,1)
61.3
"DATA",6007,107,0)
Fy(b)^^24^AN
"DATA",6007,107,1)
61.3
"DATA",6007,108,0)
H^^25^AN
"DATA",6007,108,1)
61.3
"DATA",6007,112,0)
Jk(a)^^29^AN
"DATA",6007,112,1)
61.3
"DATA",6007,113,0)
Jk(b)^^30^AN
"DATA",6007,113,1)
61.3
"DATA",6007,115,0)
JMH^^32^AN
"DATA",6007,115,1)
61.3
"DATA",6007,116,0)
Js(a)^^33^AN
"DATA",6007,116,1)
61.3
"DATA",6007,117,0)
Js(b)^^34^AN
"DATA",6007,117,1)
61.3
"DATA",6007,118,0)
k^^35^AN
"DATA",6007,118,1)
61.3
"DATA",6007,119,0)
Kn(a)^^36^AN
"DATA",6007,119,1)
61.3
"DATA",6007,120,0)
K^^37^AN
"DATA",6007,120,1)
61.3
"DATA",6007,121,0)
Kp(a)^^38^AN
"DATA",6007,121,1)
61.3
"DATA",6007,122,0)
Kp(b)^^39^AN
"DATA",6007,122,1)
61.3
"DATA",6007,123,0)
Le(a)^^40^AN
"DATA",6007,123,1)
61.3
"DATA",6007,125,0)
Le(b)^^42^AN
"DATA",6007,125,1)
61.3
"DATA",6007,129,0)
Lu(a)^^46^AN
"DATA",6007,129,1)
61.3
"DATA",6007,132,0)
LW(a)^^49^AN
"DATA",6007,132,1)
61.3
"DATA",6007,133,0)
LW(b)^^50^AN
"DATA",6007,133,1)
61.3
"DATA",6007,134,0)
M^^51^AN
"DATA",6007,134,1)
61.3
"DATA",6007,135,0)
McC(a)^^52^AN
"DATA",6007,135,1)
61.3
"DATA",6007,136,0)
M(g)^^53^AN
"DATA",6007,136,1)
61.3
"DATA",6007,137,0)
Mi(a)^^54^AN
"DATA",6007,137,1)
61.3
"DATA",6007,138,0)
N^^55^AN
"DATA",6007,138,1)
61.3
"DATA",6007,139,0)
P^^56^AN
"DATA",6007,139,1)
61.3
"DATA",6007,140,0)
P1^^57^AN
"DATA",6007,140,1)
61.3
"DATA",6007,141,0)
P1+P+P(k)^^58^AN
"DATA",6007,141,1)
61.3
"DATA",6007,142,0)
P(k)^^59^AN
"DATA",6007,142,1)
61.3
"DATA",6007,143,0)
Rg^^60^AN
"DATA",6007,143,1)
61.3
"DATA",6007,144,0)
s^^61^AN
"DATA",6007,144,1)
61.3
"DATA",6007,145,0)
Sc1^^62^AN
"DATA",6007,145,1)
61.3
"DATA",6007,146,0)
S^^63^AN
"DATA",6007,146,1)
61.3
"DATA",6007,147,0)
Sc2^^64^AN
"DATA",6007,147,1)
61.3
"DATA",6007,148,0)
Sd(a)^^65^AN
"DATA",6007,148,1)
61.3
"DATA",6007,149,0)
U^^66^AN
"DATA",6007,149,1)
61.3
"DATA",6007,150,0)
V^^67^AN
"DATA",6007,150,1)
61.3
"DATA",6007,151,0)
Xg(a)^^68^AN
"DATA",6007,151,1)
61.3
"DATA",6007,152,0)
Yk(a)^^69^AN
"DATA",6007,152,1)
61.3
"DATA",6007,153,0)
Yt(a)^^70^AN
"DATA",6007,153,1)
61.3
"DATA",6007,154,0)
Yt(b)^^71^AN
"DATA",6007,154,1)
61.3
"DATA",6007,155,0)
Anaphylaxis^^A
"DATA",6007,155,1)
65.4
"DATA",6007,156,0)
Circulatory^^C
"DATA",6007,156,1)
65.4
"DATA",6007,157,0)
Delayed Hemolytic^^D
"DATA",6007,157,1)
65.4
"DATA",6007,158,0)
Febrile Nonhemolytic^^F
"DATA",6007,158,1)
65.4
"DATA",6007,159,0)
Graft vs. Host disease^^G
"DATA",6007,159,1)
65.4
"DATA",6007,160,0)
Acute Hemolytic^^H
"DATA",6007,160,1)
65.4
"DATA",6007,161,0)
Transfusion Related Acute Lung Injury^^L
"DATA",6007,161,1)
65.4
"DATA",6007,162,0)
Other^^O
"DATA",6007,162,1)
65.4
"DATA",6007,163,0)
Post-Transfusion: Associated Disease^^P
"DATA",6007,163,1)
65.4
"DATA",6007,165,0)
Lu(b)^^47^AN
"DATA",6007,165,1)
61.3
"DATA",6007,167,0)
Anti-Le(ab)^51710^35^AB
"DATA",6007,167,1)
61.3
"DATA",6007,168,0)
Anti-Lu3^52370^39^AB
"DATA",6007,168,1)
61.3
"DATA",6007,169,0)
Antibody to High-Incidence Antigen^^70^AB
"DATA",6007,169,1)
61.3
"DATA",6007,170,0)
Antibody to Low-Incidence Antigen^^68^AB
"DATA",6007,170,1)
61.3
"DATA",6007,171,0)
Antibody, No Specificity Identified^^69^AB
"DATA",6007,171,1)
61.3
"DATA",6007,172,0)
A1^^2^AN
"DATA",6007,172,1)
61.3
"DATA",6007,173,0)
Urticaria^^U
"DATA",6007,173,1)
65.4
"DATA",6009,62.55,0)
62.55^^
"DATA",6009,62.55,"DD",0)
^6009.01A^2^2
"DATA",6009,62.55,"DD",1,0)
62.55^.01
"DATA",6009,62.55,"DD",1,"PREW")

"DATA",6009,62.55,"DD",1,"PSTW")

"DATA",6009,62.55,"DD",2,0)
62.55^1
"DATA",6009,62.55,"DD",2,"PREW")

"DATA",6009,62.55,"DD",2,"PSTW")

"DATA",6009,63,0)
63^^
"DATA",6009,63,"DD",0)
^6009.01A^116^116
"DATA",6009,63,"DD",1,0)
63.01^.01
"DATA",6009,63,"DD",1,"PREW")

"DATA",6009,63,"DD",1,"PSTW")

"DATA",6009,63,"DD",2,0)
63.01^.03
"DATA",6009,63,"DD",2,"PREW")

"DATA",6009,63,"DD",2,"PSTW")

"DATA",6009,63,"DD",3,0)
63.01^.04
"DATA",6009,63,"DD",3,"PREW")

"DATA",6009,63,"DD",3,"PSTW")

"DATA",6009,63,"DD",4,0)
63.01^.05
"DATA",6009,63,"DD",4,"PREW")

"DATA",6009,63,"DD",4,"PSTW")

"DATA",6009,63,"DD",5,0)
63.01^.055
"DATA",6009,63,"DD",5,"PREW")

"DATA",6009,63,"DD",5,"PSTW")

"DATA",6009,63,"DD",6,0)
63.01^.06
"DATA",6009,63,"DD",6,"PREW")

"DATA",6009,63,"DD",6,"PSTW")

"DATA",6009,63,"DD",7,0)
63.01^.07
"DATA",6009,63,"DD",7,"PREW")

"DATA",6009,63,"DD",7,"PSTW")

"DATA",6009,63,"DD",8,0)
63.01^.08
"DATA",6009,63,"DD",8,"PREW")

"DATA",6009,63,"DD",8,"PSTW")

"DATA",6009,63,"DD",9,0)
63.01^.09
"DATA",6009,63,"DD",9,"PREW")

"DATA",6009,63,"DD",9,"PSTW")

"DATA",6009,63,"DD",10,0)
63.01^.1
"DATA",6009,63,"DD",10,"PREW")

"DATA",6009,63,"DD",10,"PSTW")

"DATA",6009,63,"DD",11,0)
63.01^.12
"DATA",6009,63,"DD",11,"PREW")

"DATA",6009,63,"DD",11,"PSTW")

"DATA",6009,63,"DD",12,0)
63.01^.99
"DATA",6009,63,"DD",12,"PREW")

"DATA",6009,63,"DD",12,"PSTW")

"DATA",6009,63,"DD",13,0)
63.01^2.1
"DATA",6009,63,"DD",13,"PREW")

"DATA",6009,63,"DD",13,"PSTW")

"DATA",6009,63,"DD",14,0)
63.01^2.2
"DATA",6009,63,"DD",14,"PREW")

"DATA",6009,63,"DD",14,"PSTW")

"DATA",6009,63,"DD",15,0)
63.01^2.3
"DATA",6009,63,"DD",15,"PREW")

"DATA",6009,63,"DD",15,"PSTW")

"DATA",6009,63,"DD",16,0)
63.01^2.4
"DATA",6009,63,"DD",16,"PREW")

"DATA",6009,63,"DD",16,"PSTW")

"DATA",6009,63,"DD",17,0)
63.01^2.5
"DATA",6009,63,"DD",17,"PREW")

"DATA",6009,63,"DD",17,"PSTW")

"DATA",6009,63,"DD",18,0)
63.01^2.6
"DATA",6009,63,"DD",18,"PREW")

"DATA",6009,63,"DD",18,"PSTW")

"DATA",6009,63,"DD",19,0)
63.01^2.7
"DATA",6009,63,"DD",19,"PREW")

"DATA",6009,63,"DD",19,"PSTW")

"DATA",6009,63,"DD",20,0)
63.01^2.8
"DATA",6009,63,"DD",20,"PREW")

"DATA",6009,63,"DD",20,"PSTW")

"DATA",6009,63,"DD",21,0)
63.01^2.9
"DATA",6009,63,"DD",21,"PREW")

"DATA",6009,63,"DD",21,"PSTW")

"DATA",6009,63,"DD",22,0)
63.01^2.91
"DATA",6009,63,"DD",22,"PREW")

"DATA",6009,63,"DD",22,"PSTW")

"DATA",6009,63,"DD",23,0)
63.01^3
"DATA",6009,63,"DD",23,"PREW")

"DATA",6009,63,"DD",23,"PSTW")

"DATA",6009,63,"DD",24,0)
63.01^4
"DATA",6009,63,"DD",24,"PREW")

"DATA",6009,63,"DD",24,"PSTW")

"DATA",6009,63,"DD",25,0)
63.01^6
"DATA",6009,63,"DD",25,"PREW")

"DATA",6009,63,"DD",25,"PSTW")

"DATA",6009,63,"DD",26,0)
63.01^6.1
"DATA",6009,63,"DD",26,"PREW")

"DATA",6009,63,"DD",26,"PSTW")

"DATA",6009,63,"DD",27,0)
63.01^6.2
"DATA",6009,63,"DD",27,"PREW")

"DATA",6009,63,"DD",27,"PSTW")

"DATA",6009,63,"DD",28,0)
63.01^6.3
"DATA",6009,63,"DD",28,"PREW")

"DATA",6009,63,"DD",28,"PSTW")

"DATA",6009,63,"DD",29,0)
63.01^6.4
"DATA",6009,63,"DD",29,"PREW")

"DATA",6009,63,"DD",29,"PSTW")

"DATA",6009,63,"DD",30,0)
63.01^7
"DATA",6009,63,"DD",30,"PREW")

"DATA",6009,63,"DD",30,"PSTW")

"DATA",6009,63,"DD",31,0)
63.01^8
"DATA",6009,63,"DD",31,"PREW")

"DATA",6009,63,"DD",31,"PSTW")

"DATA",6009,63,"DD",32,0)
63.01^9
"DATA",6009,63,"DD",32,"PREW")

"DATA",6009,63,"DD",32,"PSTW")

"DATA",6009,63,"DD",33,0)
63.01^10
"DATA",6009,63,"DD",33,"PREW")

"DATA",6009,63,"DD",33,"PSTW")

"DATA",6009,63,"DD",34,0)
63.01^10.2
"DATA",6009,63,"DD",34,"PREW")

"DATA",6009,63,"DD",34,"PSTW")

"DATA",6009,63,"DD",35,0)
63.01^10.3
"DATA",6009,63,"DD",35,"PREW")

"DATA",6009,63,"DD",35,"PSTW")

"DATA",6009,63,"DD",36,0)
63.01^11
"DATA",6009,63,"DD",36,"PREW")

"DATA",6009,63,"DD",36,"PSTW")

"DATA",6009,63,"DD",37,0)
63.01^11.2
"DATA",6009,63,"DD",37,"PREW")

"DATA",6009,63,"DD",37,"PSTW")

"DATA",6009,63,"DD",38,0)
63.01^11.3
"DATA",6009,63,"DD",38,"PREW")

"DATA",6009,63,"DD",38,"PSTW")

"DATA",6009,63,"DD",39,0)
63.01^121
"DATA",6009,63,"DD",39,"PREW")

"DATA",6009,63,"DD",39,"PSTW")

"DATA",6009,63,"DD",40,0)
63.01^122
"DATA",6009,63,"DD",40,"PREW")

"DATA",6009,63,"DD",40,"PSTW")

"DATA",6009,63,"DD",41,0)
63.01^123
"DATA",6009,63,"DD",41,"PREW")

"DATA",6009,63,"DD",41,"PSTW")

"DATA",6009,63,"DD",42,0)
63.01^124
"DATA",6009,63,"DD",42,"PREW")

"DATA",6009,63,"DD",42,"PSTW")

"DATA",6009,63,"DD",43,0)
63.01^125
"DATA",6009,63,"DD",43,"PREW")

"DATA",6009,63,"DD",43,"PSTW")

"DATA",6009,63,"DD",44,0)
63.01^126
"DATA",6009,63,"DD",44,"PREW")

"DATA",6009,63,"DD",44,"PSTW")

"DATA",6009,63,"DD",45,0)
63.01^127
"DATA",6009,63,"DD",45,"PREW")

"DATA",6009,63,"DD",45,"PSTW")

"DATA",6009,63,"DD",46,0)
63.01^128
"DATA",6009,63,"DD",46,"PREW")

"DATA",6009,63,"DD",46,"PSTW")

"DATA",6009,63,"DD",47,0)
63.01^129
"DATA",6009,63,"DD",47,"PREW")

"DATA",6009,63,"DD",47,"PSTW")

"DATA",6009,63,"DD",48,0)
63.01^129.1
"DATA",6009,63,"DD",48,"PREW")

"DATA",6009,63,"DD",48,"PSTW")

"DATA",6009,63,"DD",49,0)
63.01^129.11
"DATA",6009,63,"DD",49,"PREW")

"DATA",6009,63,"DD",49,"PSTW")

"DATA",6009,63,"DD",50,0)
63.01^129.12
"DATA",6009,63,"DD",50,"PREW")

"DATA",6009,63,"DD",50,"PSTW")

"DATA",6009,63,"DD",51,0)
63.01^131
"DATA",6009,63,"DD",51,"PREW")

"DATA",6009,63,"DD",51,"PSTW")

"DATA",6009,63,"DD",52,0)
63.01^132
"DATA",6009,63,"DD",52,"PREW")

"DATA",6009,63,"DD",52,"PSTW")

"DATA",6009,63,"DD",53,0)
63.01^133
"DATA",6009,63,"DD",53,"PREW")

"DATA",6009,63,"DD",53,"PSTW")

"DATA",6009,63,"DD",54,0)
63.01^134
"DATA",6009,63,"DD",54,"PREW")

"DATA",6009,63,"DD",54,"PSTW")

"DATA",6009,63,"DD",55,0)
63.01^135
"DATA",6009,63,"DD",55,"PREW")

"DATA",6009,63,"DD",55,"PSTW")

"DATA",6009,63,"DD",56,0)
63.01^136
"DATA",6009,63,"DD",56,"PREW")

"DATA",6009,63,"DD",56,"PSTW")

"DATA",6009,63,"DD",57,0)
63.01^138
"DATA",6009,63,"DD",57,"PREW")

"DATA",6009,63,"DD",57,"PSTW")

"DATA",6009,63,"DD",58,0)
63.01^139
"DATA",6009,63,"DD",58,"PREW")

"DATA",6009,63,"DD",58,"PSTW")

"DATA",6009,63,"DD",59,0)
63.01^139.1
"DATA",6009,63,"DD",59,"PREW")

"DATA",6009,63,"DD",59,"PSTW")

"DATA",6009,63,"DD",60,0)
63.01^139.11
"DATA",6009,63,"DD",60,"PREW")

"DATA",6009,63,"DD",60,"PSTW")

"DATA",6009,63,"DD",61,0)
63.01^141
"DATA",6009,63,"DD",61,"PREW")

"DATA",6009,63,"DD",61,"PSTW")

"DATA",6009,63,"DD",62,0)
63.01^142
"DATA",6009,63,"DD",62,"PREW")

"DATA",6009,63,"DD",62,"PSTW")

"DATA",6009,63,"DD",63,0)
63.01^143
"DATA",6009,63,"DD",63,"PREW")

"DATA",6009,63,"DD",63,"PSTW")

"DATA",6009,63,"DD",64,0)
63.01^144
"DATA",6009,63,"DD",64,"PREW")

"DATA",6009,63,"DD",64,"PSTW")

"DATA",6009,63,"DD",65,0)
63.01^145
"DATA",6009,63,"DD",65,"PREW")

"DATA",6009,63,"DD",65,"PSTW")

"DATA",6009,63,"DD",66,0)
63.01^146
"DATA",6009,63,"DD",66,"PREW")

"DATA",6009,63,"DD",66,"PSTW")

"DATA",6009,63,"DD",67,0)
63.01^147
"DATA",6009,63,"DD",67,"PREW")

"DATA",6009,63,"DD",67,"PSTW")

"DATA",6009,63,"DD",68,0)
63.01^148
"DATA",6009,63,"DD",68,"PREW")

"DATA",6009,63,"DD",68,"PSTW")

"DATA",6009,63,"DD",69,0)
63.01^149
"DATA",6009,63,"DD",69,"PREW")

"DATA",6009,63,"DD",69,"PSTW")

"DATA",6009,63,"DD",70,0)
63.01^149.1
"DATA",6009,63,"DD",70,"PREW")

"DATA",6009,63,"DD",70,"PSTW")

"DATA",6009,63,"DD",71,0)
63.01^149.11
"DATA",6009,63,"DD",71,"PREW")

"DATA",6009,63,"DD",71,"PSTW")

"DATA",6009,63,"DD",72,0)
63.01^149.12
"DATA",6009,63,"DD",72,"PREW")

"DATA",6009,63,"DD",72,"PSTW")

"DATA",6009,63,"DD",73,0)
63.01^149.13
"DATA",6009,63,"DD",73,"PREW")

"DATA",6009,63,"DD",73,"PSTW")

"DATA",6009,63,"DD",74,0)
63.01^151
"DATA",6009,63,"DD",74,"PREW")

"DATA",6009,63,"DD",74,"PSTW")

"DATA",6009,63,"DD",75,0)
63.01^152
"DATA",6009,63,"DD",75,"PREW")

"DATA",6009,63,"DD",75,"PSTW")

"DATA",6009,63,"DD",76,0)
63.01^153
"DATA",6009,63,"DD",76,"PREW")

"DATA",6009,63,"DD",76,"PSTW")

"DATA",6009,63,"DD",77,0)
63.01^154
"DATA",6009,63,"DD",77,"PREW")

"DATA",6009,63,"DD",77,"PSTW")

"DATA",6009,63,"DD",78,0)
63.011^.01
"DATA",6009,63,"DD",78,"PREW")

"DATA",6009,63,"DD",78,"PSTW")

"DATA",6009,63,"DD",79,0)
63.011^.02
"DATA",6009,63,"DD",79,"PREW")

"DATA",6009,63,"DD",79,"PSTW")

"DATA",6009,63,"DD",80,0)
63.0112^.01
"DATA",6009,63,"DD",80,"PREW")

"DATA",6009,63,"DD",80,"PSTW")

"DATA",6009,63,"DD",81,0)
63.0112^.02
"DATA",6009,63,"DD",81,"PREW")

"DATA",6009,63,"DD",81,"PSTW")

"DATA",6009,63,"DD",82,0)
63.0114^.01
"DATA",6009,63,"DD",82,"PREW")

"DATA",6009,63,"DD",82,"PSTW")

"DATA",6009,63,"DD",83,0)
63.0114^.02
"DATA",6009,63,"DD",83,"PREW")

"DATA",6009,63,"DD",83,"PSTW")

"DATA",6009,63,"DD",84,0)
63.012^.01
"DATA",6009,63,"DD",84,"PREW")

"DATA",6009,63,"DD",84,"PSTW")

"DATA",6009,63,"DD",85,0)
63.013^.01
"DATA",6009,63,"DD",85,"PREW")

"DATA",6009,63,"DD",85,"PSTW")

"DATA",6009,63,"DD",86,0)
63.013^.02
"DATA",6009,63,"DD",86,"PREW")

"DATA",6009,63,"DD",86,"PSTW")

"DATA",6009,63,"DD",87,0)
63.014^.01
"DATA",6009,63,"DD",87,"PREW")

"DATA",6009,63,"DD",87,"PSTW")

"DATA",6009,63,"DD",88,0)
63.014^.02
"DATA",6009,63,"DD",88,"PREW")

"DATA",6009,63,"DD",88,"PSTW")

"DATA",6009,63,"DD",89,0)
63.014^1
"DATA",6009,63,"DD",89,"PREW")

"DATA",6009,63,"DD",89,"PSTW")

"DATA",6009,63,"DD",90,0)
63.015^.01
"DATA",6009,63,"DD",90,"PREW")

"DATA",6009,63,"DD",90,"PSTW")

"DATA",6009,63,"DD",91,0)
63.015^.02
"DATA",6009,63,"DD",91,"PREW")

"DATA",6009,63,"DD",91,"PSTW")

"DATA",6009,63,"DD",92,0)
63.015^.03
"DATA",6009,63,"DD",92,"PREW")

"DATA",6009,63,"DD",92,"PSTW")

"DATA",6009,63,"DD",93,0)
63.015^.04
"DATA",6009,63,"DD",93,"PREW")

"DATA",6009,63,"DD",93,"PSTW")

"DATA",6009,63,"DD",94,0)
63.015^.05
"DATA",6009,63,"DD",94,"PREW")

"DATA",6009,63,"DD",94,"PSTW")

"DATA",6009,63,"DD",95,0)
63.015^.06
"DATA",6009,63,"DD",95,"PREW")

"DATA",6009,63,"DD",95,"PSTW")

"DATA",6009,63,"DD",96,0)
63.015^.07
"DATA",6009,63,"DD",96,"PREW")

"DATA",6009,63,"DD",96,"PSTW")

"DATA",6009,63,"DD",97,0)
63.015^.08
"DATA",6009,63,"DD",97,"PREW")

"DATA",6009,63,"DD",97,"PSTW")

"DATA",6009,63,"DD",98,0)
63.015^.09
"DATA",6009,63,"DD",98,"PREW")

"DATA",6009,63,"DD",98,"PSTW")

"DATA",6009,63,"DD",99,0)
63.015^.1
"DATA",6009,63,"DD",99,"PREW")

"DATA",6009,63,"DD",99,"PSTW")

"DATA",6009,63,"DD",100,0)
63.018^.01
"DATA",6009,63,"DD",100,"PREW")

"DATA",6009,63,"DD",100,"PSTW")

"DATA",6009,63,"DD",101,0)
63.018^.02
"DATA",6009,63,"DD",101,"PREW")

"DATA",6009,63,"DD",101,"PSTW")

"DATA",6009,63,"DD",102,0)
63.018^1
"DATA",6009,63,"DD",102,"PREW")

"DATA",6009,63,"DD",102,"PSTW")

"DATA",6009,63,"DD",103,0)
63.019^.01
"DATA",6009,63,"DD",103,"PREW")

"DATA",6009,63,"DD",103,"PSTW")

"DATA",6009,63,"DD",104,0)
63.019^.02
"DATA",6009,63,"DD",104,"PREW")

"DATA",6009,63,"DD",104,"PSTW")

"DATA",6009,63,"DD",105,0)
63.019^.03
"DATA",6009,63,"DD",105,"PREW")

"DATA",6009,63,"DD",105,"PSTW")

"DATA",6009,63,"DD",106,0)
63.019^.04
"DATA",6009,63,"DD",106,"PREW")

"DATA",6009,63,"DD",106,"PSTW")

"DATA",6009,63,"DD",107,0)
63.019^.05
"DATA",6009,63,"DD",107,"PREW")

"DATA",6009,63,"DD",107,"PSTW")

"DATA",6009,63,"DD",108,0)
63.019^.06
"DATA",6009,63,"DD",108,"PREW")

"DATA",6009,63,"DD",108,"PSTW")

"DATA",6009,63,"DD",109,0)
63.019^.07
"DATA",6009,63,"DD",109,"PREW")

"DATA",6009,63,"DD",109,"PSTW")

"DATA",6009,63,"DD",110,0)
63.019^.08
"DATA",6009,63,"DD",110,"PREW")

"DATA",6009,63,"DD",110,"PSTW")

"DATA",6009,63,"DD",111,0)
63.019^.09
"DATA",6009,63,"DD",111,"PREW")

"DATA",6009,63,"DD",111,"PSTW")

"DATA",6009,63,"DD",112,0)
63.019^.1
"DATA",6009,63,"DD",112,"PREW")

"DATA",6009,63,"DD",112,"PSTW")

"DATA",6009,63,"DD",113,0)
63.199^.01
"DATA",6009,63,"DD",113,"PREW")

"DATA",6009,63,"DD",113,"PSTW")

"DATA",6009,63,"DD",114,0)
63.46^.01
"DATA",6009,63,"DD",114,"PREW")

"DATA",6009,63,"DD",114,"PSTW")

"DATA",6009,63,"DD",115,0)
63.46^.02
"DATA",6009,63,"DD",115,"PREW")

"DATA",6009,63,"DD",115,"PSTW")

"DATA",6009,63,"DD",116,0)
63.48^.01
"DATA",6009,63,"DD",116,"PREW")

"DATA",6009,63,"DD",116,"PSTW")

"DATA",6009,65.5,0)
65.5^^
"DATA",6009,66.2,0)
66.2^^
"DATA",6009,66.5,0)
66.5^^
"DATA",6009,66.9,0)
66.9^^
"FIA",6000)
VBECS SITE PARAMETERS
"FIA",6000,0)
^VBEC(6000,
"FIA",6000,0,0)
6000P
"FIA",6000,0,1)
y^y^f^^^^n
"FIA",6000,0,10)

"FIA",6000,0,11)

"FIA",6000,0,"RLRO")

"FIA",6000,0,"VR")
5.2^LR
"FIA",6000,6000)
0
"FIA",6001)
VBECS DATA INTEGRITY/CONVERSION STATISTICS
"FIA",6001,0)
^VBEC(6001,
"FIA",6001,0,0)
6001D
"FIA",6001,0,1)
y^y^f^^^^n
"FIA",6001,0,10)

"FIA",6001,0,11)

"FIA",6001,0,"RLRO")

"FIA",6001,0,"VR")
5.2^LR
"FIA",6001,6001)
0
"FIA",6001,6001.01)
0
"FIA",6001,6001.02)
0
"FIA",6003)
VISTA BLOOD BANK RESTRICTED OPTIONS LIST
"FIA",6003,0)
^VBEC(6003,
"FIA",6003,0,0)
6003
"FIA",6003,0,1)
y^y^f^^n^^y^a^n
"FIA",6003,0,10)

"FIA",6003,0,11)

"FIA",6003,0,"RLRO")

"FIA",6003,0,"VR")
5.2^LR
"FIA",6003,6003)
0
"FIA",6003,6003.01)
0
"FIA",6005)
VBECS MATCHING TABLE
"FIA",6005,0)
^VBEC(6005,
"FIA",6005,0,0)
6005I
"FIA",6005,0,1)
y^y^f^^^^n^^
"FIA",6005,0,10)

"FIA",6005,0,11)

"FIA",6005,0,"RLRO")

"FIA",6005,0,"VR")
5.2^LR
"FIA",6005,6005)
0
"FIA",6007)
STANDARD VBECS DATA
"FIA",6007,0)
^VBEC(6007,
"FIA",6007,0,0)
6007
"FIA",6007,0,1)
y^y^f^^n^^y^o^n
"FIA",6007,0,10)

"FIA",6007,0,11)

"FIA",6007,0,"RLRO")

"FIA",6007,0,"VR")
5.2^LR
"FIA",6007,6007)
0
"FIA",6009)
VBECS FILE & FIELD LEVEL SECURITY
"FIA",6009,0)
^VBEC(6009,
"FIA",6009,0,0)
6009
"FIA",6009,0,1)
y^y^f^^n^^y^o^n
"FIA",6009,0,10)

"FIA",6009,0,11)

"FIA",6009,0,"RLRO")

"FIA",6009,0,"VR")
5.2^LR
"FIA",6009,6009)
0
"FIA",6009,6009.01)
0
"KRN",3.8,1768,-1)
0^1
"KRN",3.8,1768,0)
VBECS DATA CONVERSION^PU^y^^^^
"KRN",3.8,1768,2,0)
^3.801^2^2^3050928^^^^
"KRN",3.8,1768,2,1,0)
This mail group will be used to pass information to those individuals 
"KRN",3.8,1768,2,2,0)
supporting the VistA Blood Establishment Computer system (VBECS).
"KRN",3.8,1768,3)

"KRN",19,14419,-1)
0^16
"KRN",19,14419,0)
VBEC MAIN MENU^VBECS Data Matching/Conversion Menu^^M^^LRLIASON^^^^^^
"KRN",19,14419,1,0)
^19.06^4^4^3040128^^^
"KRN",19,14419,1,1,0)
This is the top level menu to facilitate data matching and data conversion
"KRN",19,14419,1,2,0)
from VistA Blood Bank v5.2 files to VistA Blood Establishment Computer
"KRN",19,14419,1,3,0)
Software (VBECS) tables.  It is the top of a menu tree to which all other 
"KRN",19,14419,1,4,0)
menus are attached.
"KRN",19,14419,10,0)
^19.01IP^3^3
"KRN",19,14419,10,1,0)
14441^PRE^1
"KRN",19,14419,10,1,"^")
VBEC PRE-CONVERSION UTILITIES
"KRN",19,14419,10,2,0)
14442^CONV^2
"KRN",19,14419,10,2,"^")
VBEC CONVERSION UTILITIES
"KRN",19,14419,10,3,0)
14443^POST^3
"KRN",19,14419,10,3,"^")
VBEC POST-CONVERSION UTILITIES
"KRN",19,14419,99)
60198,50240
"KRN",19,14419,99.1)
60198,14408
"KRN",19,14419,"U")
VBECS DATA MATCHING/CONVERSION
"KRN",19,14420,-1)
0^10
"KRN",19,14420,0)
VBEC DELETE EXTRACTED DATA^Delete all Blood Bank Data in Temporary Globals^^R^^^^^^^^^^
"KRN",19,14420,1,0)
^19.06^10^10^3050809^^^^
"KRN",19,14420,1,1,0)
This option deletes the site's production account of the ^TMP("VBEC"*,$J) 
"KRN",19,14420,1,2,0)
name spaced global.  This deletes at the namespace level without regard to
"KRN",19,14420,1,3,0)
the job number ($J).  The data deleted is temporarily staged data 
"KRN",19,14420,1,4,0)
extracted from VistA Blood Bank prior to writing the data out to system 
"KRN",19,14420,1,5,0)
host files.  The temporary staging global is used to accumulate data, and 
"KRN",19,14420,1,6,0)
prepare it appropriate for relational tables.
"KRN",19,14420,1,7,0)
 
"KRN",19,14420,1,8,0)
When running the database conversion features in a test mode, this option 
"KRN",19,14420,1,9,0)
must be run prior to running the data conversion option.  It cleans out 
"KRN",19,14420,1,10,0)
the previously extracted data, so that test results will be accurate.
"KRN",19,14420,20)

"KRN",19,14420,25)
DELETE^VBECDCU(0)
"KRN",19,14420,"U")
DELETE ALL BLOOD BANK DATA IN 
"KRN",19,14421,-1)
0^11
"KRN",19,14421,0)
VBEC DELETE SYSTEM LEVEL FILES^Delete Blood Bank Data in System Level Files^^R^^^^^^^^VBECS^^
"KRN",19,14421,1,0)
^^11^11^3050215^
"KRN",19,14421,1,1,0)
This option can be used while testing the data base conversion to delete 
"KRN",19,14421,1,2,0)
the host system files to which the VistA Blood Bank conversion data has 
"KRN",19,14421,1,3,0)
been written.  This makes it possible to retest and rewrite these files 
"KRN",19,14421,1,4,0)
through the data conversion option, ensuring accurate test results.
"KRN",19,14421,1,5,0)
 
"KRN",19,14421,1,6,0)
In a production environment, these files should NOT be deleted 
"KRN",19,14421,1,7,0)
immediately after the data conversion is complete.  They should be left 
"KRN",19,14421,1,8,0)
in place for enough time to guarantee that the there are no data 
"KRN",19,14421,1,9,0)
conversion problems on the VBECS side.  These files can be used by 
"KRN",19,14421,1,10,0)
programmers in debugging, to determine whether there are problems due to
"KRN",19,14421,1,11,0)
converted data.
"KRN",19,14421,20)

"KRN",19,14421,25)
DEL^VBECDCU2
"KRN",19,14421,99)
59260,41339
"KRN",19,14421,"U")
DELETE BLOOD BANK DATA IN SYST
"KRN",19,14422,-1)
0^5
"KRN",19,14422,0)
VBEC DATA CONV. TO HOST FILES^Convert VistA Blood Bank data to host files^^R^^^^^^^^
"KRN",19,14422,1,0)
^19.06^7^7^3050830^^^^
"KRN",19,14422,1,1,0)
This option will collect legacy VistA Blood Bank data and move it to host
"KRN",19,14422,1,2,0)
system files. A separate process, outside of the scope of the VistA side 
"KRN",19,14422,1,3,0)
of the data conversion, will transfer those host files to VBECS tables.  
"KRN",19,14422,1,4,0)
 
"KRN",19,14422,1,5,0)
The data matching work must be complete before this option can be run. 
"KRN",19,14422,1,6,0)
This option uses the VistA Blood Bank data and the matching files to 
"KRN",19,14422,1,7,0)
determine data values to write to host system files.
"KRN",19,14422,25)
EN^VBECDC01(1)
"KRN",19,14422,"U")
CONVERT VISTA BLOOD BANK DATA 
"KRN",19,14423,-1)
0^6
"KRN",19,14423,0)
VBEC DATA VALIDATION^Run Legacy VistA Blood Bank Data Validation^^R^^^^^^^^
"KRN",19,14423,1,0)
^19.06^4^4^3050607^^
"KRN",19,14423,1,1,0)
This option performs a data validation check on legacy VistA Blood Bank
"KRN",19,14423,1,2,0)
data based on pre-defined business rules.  If there are issues with
"KRN",19,14423,1,3,0)
invalid data, they'll need to be resolved before data can be converted to
"KRN",19,14423,1,4,0)
VBECS table attributes.
"KRN",19,14423,25)
EN^VBECDC01(0)
"KRN",19,14423,"U")
RUN LEGACY VISTA BLOOD BANK DA
"KRN",19,14424,-1)
0^23
"KRN",19,14424,0)
VBEC SITE PARAMETER ENTER/EDIT^Enter/Edit Site Parameter Data ^^R^^^^^^^^
"KRN",19,14424,1,0)
^19.06^5^5^3051011^^^
"KRN",19,14424,1,1,0)
This option allows the user to input the name of the facility, the 
"KRN",19,14424,1,2,0)
default directory where the system level data extract files are to 
"KRN",19,14424,1,3,0)
reside, and the VBECS mail group where data conversion information is to 
"KRN",19,14424,1,4,0)
be routed. Sites must assign users to the mail group in order to receive 
"KRN",19,14424,1,5,0)
information.
"KRN",19,14424,25)
EN^VBECDCSP
"KRN",19,14424,"U")
ENTER/EDIT SITE PARAMETER DATA
"KRN",19,14425,-1)
0^13
"KRN",19,14425,0)
VBEC INVALID DATA REPORT^Invalid Blood Bank Data Report^^R^^^^^^^^
"KRN",19,14425,1,0)
^19.06^9^9^3051101^^^
"KRN",19,14425,1,1,0)
This option displays or prints the results of the VistA Blood Bank data
"KRN",19,14425,1,2,0)
pre-conversion integrity check.  It should be used as necessary while 
"KRN",19,14425,1,3,0)
performing data matching work prior to data conversion.  Problems listed 
"KRN",19,14425,1,4,0)
on the report should be addressed before continuing with the data 
"KRN",19,14425,1,5,0)
conversion.  Unmatched data will not be converted.
"KRN",19,14425,1,6,0)
 
"KRN",19,14425,1,7,0)
This report should also be run immediately before data conversion to 
"KRN",19,14425,1,8,0)
verify that all desired matches have been made, and data issues have been 
"KRN",19,14425,1,9,0)
addressed.
"KRN",19,14425,25)
EN^VBECDCR
"KRN",19,14425,"U")
INVALID BLOOD BANK DATA REPORT
"KRN",19,14426,-1)
0^24
"KRN",19,14426,0)
VBEC STANDARD ANTIBODIES^Standard Antigens and Antibodies Print^^R^^^^^^^^^^1^1
"KRN",19,14426,1,0)
^^1^1^3020604^
"KRN",19,14426,1,1,0)
This option displays the list of standard antigens and antibodies.
"KRN",19,14426,15)
K VBECFILE
"KRN",19,14426,20)
S VBECFILE=61.3
"KRN",19,14426,25)
EN^VBECDCST
"KRN",19,14426,668000,0)
^19.0668
"KRN",19,14426,"U")
STANDARD ANTIGENS AND ANTIBODI
"KRN",19,14427,-1)
0^27
"KRN",19,14427,0)
VBEC STANDARD TRANS. REACTIONS^Standard Transfusion Reactions Print^^R^^^^^^^^^^1^1
"KRN",19,14427,1,0)
^^1^1^3020604^
"KRN",19,14427,1,1,0)
This option displays the list of standard transfusion reactions.
"KRN",19,14427,15)
K VBECFILE
"KRN",19,14427,20)
S VBECFILE=65.4
"KRN",19,14427,25)
EN^VBECDCST
"KRN",19,14427,"U")
STANDARD TRANSFUSION REACTIONS
"KRN",19,14428,-1)
0^40
"KRN",19,14428,0)
VBEC PRINT SQL/VISTA MATCHES^Matched Blood Bank data report^^R^^^^^^^^VBECS
"KRN",19,14428,1,0)
^^2^2^3020923^
"KRN",19,14428,1,1,0)
This option displays all of the VistA data elements matched to their 
"KRN",19,14428,1,2,0)
equivalent VBECS entries.
"KRN",19,14428,25)
EN^VBECDCMP
"KRN",19,14428,"U")
MATCHED BLOOD BANK DATA REPORT
"KRN",19,14429,-1)
0^34
"KRN",19,14429,0)
VBEC UNMATCHED VISTA DATA RPT^Unmatched VistA Blood Bank Data Report^^R^^^^^^^^VBECS
"KRN",19,14429,1,0)
^^5^5^3021117^
"KRN",19,14429,1,1,0)
This option displays all of the VistA data elements that have not yet 
"KRN",19,14429,1,2,0)
been matched to VBECS entries.  This option should be used during the 
"KRN",19,14429,1,3,0)
manual data matching work prior to data conversion to determine which 
"KRN",19,14429,1,4,0)
entries still need to be matched.  If not matched, the entry will not be 
"KRN",19,14429,1,5,0)
converted to VBECS.
"KRN",19,14429,25)
EN^VBECDCNM
"KRN",19,14429,"U")
UNMATCHED VISTA BLOOD BANK DAT
"KRN",19,14430,-1)
0^29
"KRN",19,14430,0)
VBEC UNDO ANTIBODY/ANTIGEN^Undo all antibody/antigen matches^^R^^^^^^^^VBECS
"KRN",19,14430,1,0)
^^2^2^3020826^
"KRN",19,14430,1,1,0)
Use this option with caution.  It deletes all the matches between the
"KRN",19,14430,1,2,0)
VistA antibody/antigen records and the matched antibody/antigen records.
"KRN",19,14430,25)
EN613^VBECDCM1
"KRN",19,14430,"U")
UNDO ALL ANTIBODY/ANTIGEN MATC
"KRN",19,14431,-1)
0^39
"KRN",19,14431,0)
VBEC UNDO TRANS. REACTIONS^Undo all transfusion reaction matches^^R^^^^^^^^VBECS
"KRN",19,14431,1,0)
^19.06^3^3^3040823^^
"KRN",19,14431,1,1,0)
Use this option with caution.  It deletes all the mappings between the
"KRN",19,14431,1,2,0)
VistA transfusion reaction records and the matched transfusion reaction
"KRN",19,14431,1,3,0)
records.
"KRN",19,14431,25)
EN654^VBECDCM1
"KRN",19,14431,"U")
UNDO ALL TRANSFUSION REACTION 
"KRN",19,14432,-1)
0^32
"KRN",19,14432,0)
VBEC UNDO SINGLE MATCHING^Unmatch a single matched VistA record ^^R^^^^^^^^VBECS
"KRN",19,14432,1,0)
^^2^2^3020827^
"KRN",19,14432,1,1,0)
This option allows the user to delete a single VistA record that is
"KRN",19,14432,1,2,0)
matched.
"KRN",19,14432,25)
SINGLE^VBECDCM1
"KRN",19,14432,"U")
UNMATCH A SINGLE MATCHED VISTA
"KRN",19,14433,-1)
0^7
"KRN",19,14433,0)
VBEC DELETE ANTIBODY/ANTIGEN^Delete Antibody/Antigen temporary matching files ^^R^^^^^^^^VBECS
"KRN",19,14433,1,0)
^19.06^4^4^3040727^^
"KRN",19,14433,1,1,0)
Deletes all antibody/antigen data from the VBECS MATCHING TABLE (#6005)
"KRN",19,14433,1,2,0)
file.  File 6005 is a temporary file, designed for population and use for 
"KRN",19,14433,1,3,0)
the purpose of matching VistA data to standard data prior to database 
"KRN",19,14433,1,4,0)
conversion.
"KRN",19,14433,25)
ENP613^VBECDCM1
"KRN",19,14433,"U")
DELETE ANTIBODY/ANTIGEN TEMPOR
"KRN",19,14434,-1)
0^12
"KRN",19,14434,0)
VBEC DELETE TRANS. REACTION^Delete Transfusion Reaction temporary match files^^R^^^^^^^^VBECS
"KRN",19,14434,1,0)
^19.06^4^4^3040823^^^
"KRN",19,14434,1,1,0)
Deletes transfusion reaction data from the VBECS MATCHING TABLE (#6005)
"KRN",19,14434,1,2,0)
file. File 6005 is a temporary file designed for population and use for 
"KRN",19,14434,1,3,0)
the purpose of matching VistA data to standard data prior to database 
"KRN",19,14434,1,4,0)
conversion.
"KRN",19,14434,25)
ENP654^VBECDCM1
"KRN",19,14434,"U")
DELETE TRANSFUSION REACTION TE
"KRN",19,14435,-1)
0^35
"KRN",19,14435,0)
VBEC UPDATE ANTIBODY/ANTIGEN^Update antibody/antigen records in matching file^^R^^^^^^^^VBECS
"KRN",19,14435,1,0)
^19.06^7^7^3021126^^
"KRN",19,14435,1,1,0)
Update VistA antibody/antigen data in our VBECS MATCHING TABLE (#6005)
"KRN",19,14435,1,2,0)
file.  The data on the VistA side may have changed due to the addition,
"KRN",19,14435,1,3,0)
deletion, or the editing of data.  This option non-destructively adds 
"KRN",19,14435,1,4,0)
anything added to VistA since the last creation or update.  The report of 
"KRN",19,14435,1,5,0)
unmatched items, and the report of matched items should be run after 
"KRN",19,14435,1,6,0)
running this option to get a  list of new matching work created as a 
"KRN",19,14435,1,7,0)
result of the update.
"KRN",19,14435,25)
EN613^VBECDCM0
"KRN",19,14435,"U")
UPDATE ANTIBODY/ANTIGEN RECORD
"KRN",19,14436,-1)
0^38
"KRN",19,14436,0)
VBEC UPDATE TRANS. REACT. REC^Update trans. reaction records in matching file^^R^^^^^^^^VBECS
"KRN",19,14436,1,0)
^19.06^7^7^3051011^^
"KRN",19,14436,1,1,0)
Update VistA transfusion reaction data in our VBECS MATCHING TABLE (#6005)
"KRN",19,14436,1,2,0)
file.  The data on the VistA side may have changed due to the addition,
"KRN",19,14436,1,3,0)
deletion, or the editing of data. This option non-destructively adds
"KRN",19,14436,1,4,0)
anything added to VistA since the last creation or update.  The report of 
"KRN",19,14436,1,5,0)
unmatched items, and the report of matched items should be run after 
"KRN",19,14436,1,6,0)
running this option to get a  list of new matching work created as a 
"KRN",19,14436,1,7,0)
result of the update.
"KRN",19,14436,25)
EN654^VBECDCM2
"KRN",19,14436,"U")
UPDATE TRANS. REACTION RECORDS
"KRN",19,14437,-1)
0^17
"KRN",19,14437,0)
VBEC MATCH ANTIBODY/ANTIGEN^Match VistA antibody/antigen data^^R^^^^^^^^VBECS
"KRN",19,14437,1,0)
^19.06^5^5^3050913^^^^
"KRN",19,14437,1,1,0)
This option is used to match VistA antibody/antigen data to standardized
"KRN",19,14437,1,2,0)
entries. The matches will be used during the data conversion to determine 
"KRN",19,14437,1,3,0)
which data values to write to host system files.  The standardized entries
"KRN",19,14437,1,4,0)
will be used in VBECS.  Each VistA entry must be matched to a standard 
"KRN",19,14437,1,5,0)
entry.  If not matched, the VistA data will not be converted.
"KRN",19,14437,25)
EN613^VBECDCM
"KRN",19,14437,"U")
MATCH VISTA ANTIBODY/ANTIGEN D
"KRN",19,14438,-1)
0^43
"KRN",19,14438,0)
VBEC MATCH TRANSFUS REACTION^Match VistA transfusion reaction data^^R^^^^^^^^VBECS
"KRN",19,14438,1,0)
^19.06^6^6^3051011^^^^
"KRN",19,14438,1,1,0)
This option is used to match VistA transfusion reaction types to
"KRN",19,14438,1,2,0)
standardized entries. The matches will be used during the data conversion
"KRN",19,14438,1,3,0)
to determine which data values to write to host system files.  The
"KRN",19,14438,1,4,0)
standardized entries will be used in VBECS.  Each VistA entry must be
"KRN",19,14438,1,5,0)
matched to a standard entry.  If not matched, the VistA data will not be
"KRN",19,14438,1,6,0)
converted.
"KRN",19,14438,25)
EN654^VBECDCM
"KRN",19,14438,"U")
MATCH VISTA TRANSFUSION REACTI
"KRN",19,14439,-1)
0^41
"KRN",19,14439,0)
VBEC BB COMPONENTS DISABLE^Disable VistA Blood Bank components^^R^^^^^^^^VBECS^^1^1
"KRN",19,14439,1,0)
^^5^5^3021117^
"KRN",19,14439,1,1,0)
This option will allow the user to disable VistA Blood Bank options,
"KRN",19,14439,1,2,0)
files, and fields. The program automatically disables all options, files,
"KRN",19,14439,1,3,0)
and fields necessary so that users cannot enter or edit data in the VistA
"KRN",19,14439,1,4,0)
Blood Bank application.  This option should be run just before starting
"KRN",19,14439,1,5,0)
the data conversion.
"KRN",19,14439,15)
K VBECECHO
"KRN",19,14439,20)
S VBECECHO=""
"KRN",19,14439,25)
EN^VBECDC19(1)
"KRN",19,14439,"U")
DISABLE VISTA BLOOD BANK COMPO
"KRN",19,14440,-1)
0^42
"KRN",19,14440,0)
VBEC BB COMPONENTS ENABLE^Enable VistA Blood Bank components^^R^^^^^^^^VBECS^^1^1
"KRN",19,14440,1,0)
^^10^10^3050215^
"KRN",19,14440,1,1,0)
This option will allow the user to re-enable specific VistA Blood Bank
"KRN",19,14440,1,2,0)
options, files, and fields that have been disabled by running the option 
"KRN",19,14440,1,3,0)
to Disable VistA Blood Bank components.  It should NOT be run on a 
"KRN",19,14440,1,4,0)
production system after the data conversion is started.  The VistA Blood 
"KRN",19,14440,1,5,0)
Bank options should remain disabled after the data conversion. 
"KRN",19,14440,1,6,0)
 
"KRN",19,14440,1,7,0)
This option can be run when operating in test mode, after testing the 
"KRN",19,14440,1,8,0)
database conversion on a test system.  It will make the VistA Blood Bank 
"KRN",19,14440,1,9,0)
menus and options accessible once again to anyone testing the data 
"KRN",19,14440,1,10,0)
conversion.
"KRN",19,14440,15)
K VBECECHO
"KRN",19,14440,20)
S VBECECHO=""
"KRN",19,14440,25)
EN^VBECDC19(0)
"KRN",19,14440,"U")
ENABLE VISTA BLOOD BANK COMPON
"KRN",19,14441,-1)
0^22
"KRN",19,14441,0)
VBEC PRE-CONVERSION UTILITIES^Utilities used prior to the data conversion^^M^^^^^^^^VBECS
"KRN",19,14441,1,0)
^19.06^7^7^3040128^^^
"KRN",19,14441,1,1,0)
This menu contains options that must be used prior to data conversion. 
"KRN",19,14441,1,2,0)
Work prior to data conversion consists of matching VistA Blood Bank data 
"KRN",19,14441,1,3,0)
to standard data, entering data conversion site parameters, and validating
"KRN",19,14441,1,4,0)
data matches. Data to be matched includes antibodies/antigens, blood 
"KRN",19,14441,1,5,0)
products, blood suppliers, and transfusion reaction types. The options in 
"KRN",19,14441,1,6,0)
this menu automatically set up temporary files containing the VistA Blood 
"KRN",19,14441,1,7,0)
Bank data that must be matched, and facilitate manual matching.
"KRN",19,14441,10,0)
^19.01IP^10^8
"KRN",19,14441,10,1,0)
14423
"KRN",19,14441,10,1,"^")
VBEC DATA VALIDATION
"KRN",19,14441,10,2,0)
14424
"KRN",19,14441,10,2,"^")
VBEC SITE PARAMETER ENTER/EDIT
"KRN",19,14441,10,3,0)
14429
"KRN",19,14441,10,3,"^")
VBEC UNMATCHED VISTA DATA RPT
"KRN",19,14441,10,4,0)
14425
"KRN",19,14441,10,4,"^")
VBEC INVALID DATA REPORT
"KRN",19,14441,10,5,0)
14428
"KRN",19,14441,10,5,"^")
VBEC PRINT SQL/VISTA MATCHES
"KRN",19,14441,10,6,0)
14432
"KRN",19,14441,10,6,"^")
VBEC UNDO SINGLE MATCHING
"KRN",19,14441,10,7,0)
14445^AA
"KRN",19,14441,10,7,"^")
VBEC ANTIBODY/ANTIGEN UTIL.
"KRN",19,14441,10,10,0)
14444^TR^
"KRN",19,14441,10,10,"^")
VBEC TRANS. REACTION UTILITIES
"KRN",19,14441,99)
60198,50240
"KRN",19,14441,"U")
UTILITIES USED PRIOR TO THE DA
"KRN",19,14442,-1)
0^4
"KRN",19,14442,0)
VBEC CONVERSION UTILITIES^Utilities used for the data conversion^^M^^^^^^^^VBECS
"KRN",19,14442,1,0)
^19.06^14^14^3030701^^^
"KRN",19,14442,1,1,0)
This menu contains options used during data conversion from VistA Blood 
"KRN",19,14442,1,2,0)
Bank to VBECS.  All data matching must be accounted for prior to running 
"KRN",19,14442,1,3,0)
the data conversion.  The data conversion moves VistA Blood Bank data to 
"KRN",19,14442,1,4,0)
temporary host system files, using match data stored in other temporary 
"KRN",19,14442,1,5,0)
files to determine values for blood products, transfusion reactions, blood
"KRN",19,14442,1,6,0)
suppliers, antibodies and antigens.
"KRN",19,14442,1,7,0)
 
"KRN",19,14442,1,8,0)
The VistA Blood Bank options and menus must be placed out of order before 
"KRN",19,14442,1,9,0)
running the data conversion.  This prevents blood bank users from 
"KRN",19,14442,1,10,0)
entering and editing data during the data conversion.
"KRN",19,14442,1,11,0)
 
"KRN",19,14442,1,12,0)
The data conversion functionality does not move data into the VBECS 
"KRN",19,14442,1,13,0)
tables.  Moving data into the VBECS tables is outside of the scope of the 
"KRN",19,14442,1,14,0)
VistA side of the data conversion.
"KRN",19,14442,10,0)
^19.01IP^1^1
"KRN",19,14442,10,1,0)
14422^^
"KRN",19,14442,10,1,"^")
VBEC DATA CONV. TO HOST FILES
"KRN",19,14442,99)
60198,50240
"KRN",19,14442,"U")
UTILITIES USED FOR THE DATA CO
"KRN",19,14443,-1)
0^21
"KRN",19,14443,0)
VBEC POST-CONVERSION UTILITIES^Utilities used after the data conversion has run^^M^^^^^^^^VBECS
"KRN",19,14443,1,0)
^19.06^12^12^3040414^^^^
"KRN",19,14443,1,1,0)
This menu contains options that should be run after the data conversion
"KRN",19,14443,1,2,0)
has successfully completed. They can also be used to test the data 
"KRN",19,14443,1,3,0)
conversion repeatedly prior to running it in a production account.  These 
"KRN",19,14443,1,4,0)
options perform clean-up functions, such as deleting data in temporary 
"KRN",19,14443,1,5,0)
files used to stage the conversion data prior to writing it out to host 
"KRN",19,14443,1,6,0)
system files, and deleting the host system files.  If running in test 
"KRN",19,14443,1,7,0)
mode, the option to enable VistA Blood Bank options can be run to make 
"KRN",19,14443,1,8,0)
the options accessible to users again after the data conversion is run.  
"KRN",19,14443,1,9,0)
If running on a production system, the option to enable VistA Blood Bank 
"KRN",19,14443,1,10,0)
options should NOT be run after the data conversion because users should 
"KRN",19,14443,1,11,0)
never be allowed to enter data on the VistA Blood Bank system after the 
"KRN",19,14443,1,12,0)
production data conversion is run.
"KRN",19,14443,10,0)
^19.01IP^7^7
"KRN",19,14443,10,2,0)
14420
"KRN",19,14443,10,2,"^")
VBEC DELETE EXTRACTED DATA
"KRN",19,14443,10,3,0)
14440
"KRN",19,14443,10,3,"^")
VBEC BB COMPONENTS ENABLE
"KRN",19,14443,10,4,0)
14439
"KRN",19,14443,10,4,"^")
VBEC BB COMPONENTS DISABLE
"KRN",19,14443,10,5,0)
14421
"KRN",19,14443,10,5,"^")
VBEC DELETE SYSTEM LEVEL FILES
"KRN",19,14443,10,6,0)
14447^HIST
"KRN",19,14443,10,6,"^")
VBEC DELETE CONV. STATS
"KRN",19,14443,10,7,0)
14448^STAT
"KRN",19,14443,10,7,"^")
VBEC DATA CONVERSION STATS
"KRN",19,14443,99)
60198,50240
"KRN",19,14443,"U")
UTILITIES USED AFTER THE DATA 
"KRN",19,14444,-1)
0^28
"KRN",19,14444,0)
VBEC TRANS. REACTION UTILITIES^Utilities that manipulate Trans. Reaction data^^M^^^^^^^^VBECS
"KRN",19,14444,1,0)
^19.06^7^7^3051011^^^^
"KRN",19,14444,1,1,0)
This menu contains options that manipulate Transfusion Reaction data.  
"KRN",19,14444,1,2,0)
VistA transfusion reactions must be matched to a standard table prior to 
"KRN",19,14444,1,3,0)
data conversion.  This menu facilitates creating a temporary file with 
"KRN",19,14444,1,4,0)
existing VistA transfusion reaction types, matching them to a standard 
"KRN",19,14444,1,5,0)
table, undoing the matches, printing a list of the matches, updating the 
"KRN",19,14444,1,6,0)
temporary file with VistA changes, and completely deleting the temporary 
"KRN",19,14444,1,7,0)
file.
"KRN",19,14444,10,0)
^19.01IP^5^5
"KRN",19,14444,10,1,0)
14434
"KRN",19,14444,10,1,"^")
VBEC DELETE TRANS. REACTION
"KRN",19,14444,10,2,0)
14438^2^2
"KRN",19,14444,10,2,"^")
VBEC MATCH TRANSFUS REACTION
"KRN",19,14444,10,3,0)
14427^^
"KRN",19,14444,10,3,"^")
VBEC STANDARD TRANS. REACTIONS
"KRN",19,14444,10,4,0)
14431
"KRN",19,14444,10,4,"^")
VBEC UNDO TRANS. REACTIONS
"KRN",19,14444,10,5,0)
14436^1^1
"KRN",19,14444,10,5,"^")
VBEC UPDATE TRANS. REACT. REC
"KRN",19,14444,99)
60198,50240
"KRN",19,14444,"U")
UTILITIES THAT MANIPULATE TRAN
"KRN",19,14445,-1)
0^1
"KRN",19,14445,0)
VBEC ANTIBODY/ANTIGEN UTIL.^Utilities that manipulate Antibody/Antigen data^^M^^^^^^^^VBECS
"KRN",19,14445,1,0)
^19.06^8^8^3030103^^^
"KRN",19,14445,1,1,0)
This is a menu that contains options to manipulate Antibody/Antigen 
"KRN",19,14445,1,2,0)
data.  VistA antibody/antigen data must be matched to a standard list of 
"KRN",19,14445,1,3,0)
antigens and antibodies prior to data conversion.  This menu contains 
"KRN",19,14445,1,4,0)
options that facilitate matching.  Antibody/antigen records must first be 
"KRN",19,14445,1,5,0)
moved to a temporary file, which can be kept in synchronization with the 
"KRN",19,14445,1,6,0)
VistA data by using the updating feature.  Matches can be assigned and 
"KRN",19,14445,1,7,0)
undone, and a list of matches can be printed.  The temporary table can be 
"KRN",19,14445,1,8,0)
completely deleted.
"KRN",19,14445,10,0)
^19.01IP^5^5
"KRN",19,14445,10,1,0)
14433
"KRN",19,14445,10,1,"^")
VBEC DELETE ANTIBODY/ANTIGEN
"KRN",19,14445,10,2,0)
14437^2^2
"KRN",19,14445,10,2,"^")
VBEC MATCH ANTIBODY/ANTIGEN
"KRN",19,14445,10,3,0)
14426^^
"KRN",19,14445,10,3,"^")
VBEC STANDARD ANTIBODIES
"KRN",19,14445,10,4,0)
14430
"KRN",19,14445,10,4,"^")
VBEC UNDO ANTIBODY/ANTIGEN
"KRN",19,14445,10,5,0)
14435^1^1
"KRN",19,14445,10,5,"^")
VBEC UPDATE ANTIBODY/ANTIGEN
"KRN",19,14445,99)
60198,50240
"KRN",19,14445,"U")
UTILITIES THAT MANIPULATE ANTI
"KRN",19,14447,-1)
0^44
"KRN",19,14447,0)
VBEC DELETE CONV. STATS^Delete data conversion and anomaly check histories^^R^^^^^^^^VBECS
"KRN",19,14447,1,0)
^^2^2^3040414^
"KRN",19,14447,1,1,0)
This option deletes all data conversion and anomaly check histories from
"KRN",19,14447,1,2,0)
the VBECS DATA INTEGRITY/CONVERSION STATISTICS (#6001) file.
"KRN",19,14447,25)
DEL6001^VBECDCU2
"KRN",19,14447,"U")
DELETE DATA CONVERSION AND ANO
"KRN",19,14448,-1)
0^45
"KRN",19,14448,0)
VBEC DATA CONVERSION STATS^Display data conversion statistics^^R^^^^^^^^VBECS
"KRN",19,14448,1,0)
^19.06^19^19^3040420^^^
"KRN",19,14448,1,1,0)
This option displays the number of data elements converted per Lab Data 
"KRN",19,14448,1,2,0)
(#63) file record and/or the total number of data elements converted for 
"KRN",19,14448,1,3,0)
all Lab Data file records.
"KRN",19,14448,1,4,0)
 
"KRN",19,14448,1,5,0)
Some of the data elements converted are: SEX, DOB, ABO, RBC ANTIGENS
"KRN",19,14448,1,6,0)
PRESENT, RBC ANTIGENS PRESENT COMMENTS, RBC ANTIGENS PRESENT CHARS, 
"KRN",19,14448,1,7,0)
BLOOD BANK COMMENTS, & BLOOD BANK COMMENT CHARS.
"KRN",19,14448,1,8,0)
 
"KRN",19,14448,1,9,0)
The entire set of data elements converted can identified when the FileMan
"KRN",19,14448,1,10,0)
'LIST FILE ATTRIBUTES' option is run on the VBECS DATA 
"KRN",19,14448,1,11,0)
INTEGRITY/CONVERSION STATISTICS (#6001) file. The data elements 
"KRN",19,14448,1,12,0)
converted are those fields which reside in the DATA CONVERSION STATISTICS
"KRN",19,14448,1,13,0)
multiple (field: 200, sub-file: 6001.02).
"KRN",19,14448,1,14,0)
 
"KRN",19,14448,1,15,0)
The values passed reflect the number of times the data element exists
"KRN",19,14448,1,16,0)
for a qualifying Lab Data record. For example, if a Lab Data file record 
"KRN",19,14448,1,17,0)
has an instance of BLOOD BANK COMMENTS, which is a word processing field, 
"KRN",19,14448,1,18,0)
then one instance of that data element is attributed to our Lab Data file 
"KRN",19,14448,1,19,0)
record.
"KRN",19,14448,25)
VBECDCDC
"KRN",19,14448,"U")
DISPLAY DATA CONVERSION STATIS
"MBREQ")
0
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950408^1999
"PKG",26,22,1,"PAH",1,0)
335^3090513^7
"PKG",26,22,1,"PAH",1,1,0)
^^496^496^3090513
"PKG",26,22,1,"PAH",1,1,1,0)
LR*5.2*335 is being exported as part of the VBECS package release. The 
"PKG",26,22,1,"PAH",1,1,2,0)
installation of this patch will be controlled by a phase release. An 
"PKG",26,22,1,"PAH",1,1,3,0)
Implementation Manager will be assigned to your site and will contact 
"PKG",26,22,1,"PAH",1,1,4,0)
your POC for VBECS and will provide your site with the location of the 
"PKG",26,22,1,"PAH",1,1,5,0)
KIDS Host Files prior to your scheduled installation date installation 
"PKG",26,22,1,"PAH",1,1,6,0)
Sequence.
"PKG",26,22,1,"PAH",1,1,7,0)
 
"PKG",26,22,1,"PAH",1,1,8,0)
Select elements of VistA data must be transferred to the VBECS Blood Bank 
"PKG",26,22,1,"PAH",1,1,9,0)
system prior to its initial operation. This will preserve patient related 
"PKG",26,22,1,"PAH",1,1,10,0)
clinically and historically relevant information. This patch will install 
"PKG",26,22,1,"PAH",1,1,11,0)
the software necessary to prepare the data for extraction from the VistA 
"PKG",26,22,1,"PAH",1,1,12,0)
database, and extract the data to text files for transfer to the VBECS 
"PKG",26,22,1,"PAH",1,1,13,0)
system. Some of the VistA data will be standardized to nationally 
"PKG",26,22,1,"PAH",1,1,14,0)
recognized Blood Bank definitions during the extraction. Logical checks 
"PKG",26,22,1,"PAH",1,1,15,0)
in the software will ensure data integrity. Once the data on the VistA 
"PKG",26,22,1,"PAH",1,1,16,0)
side have been evaluated and converted to the new database, specific 
"PKG",26,22,1,"PAH",1,1,17,0)
VistA Blood Bank options will be deactivated (placed out of order) so 
"PKG",26,22,1,"PAH",1,1,18,0)
that the legacy database cannot be altered. These options are listed 
"PKG",26,22,1,"PAH",1,1,19,0)
below under "The following options are placed out of order." More details 
"PKG",26,22,1,"PAH",1,1,20,0)
can be found in the "Blood Bank Pre-Implementation Data Validation, 
"PKG",26,22,1,"PAH",1,1,21,0)
Mapping, and Conversion ADPAC Guide" document. The inadvertent or 
"PKG",26,22,1,"PAH",1,1,22,0)
unintentional deactivation of these options could cause a disruption in 
"PKG",26,22,1,"PAH",1,1,23,0)
Blood Bank operations. 
"PKG",26,22,1,"PAH",1,1,24,0)
 
"PKG",26,22,1,"PAH",1,1,25,0)
Please read and follow the instructions in the "Blood Bank 
"PKG",26,22,1,"PAH",1,1,26,0)
Pre-Implementation Data Validation, Mapping, and Conversion Installation 
"PKG",26,22,1,"PAH",1,1,27,0)
and User Guide" before proceeding with the installation.
"PKG",26,22,1,"PAH",1,1,28,0)
 
"PKG",26,22,1,"PAH",1,1,29,0)
 
"PKG",26,22,1,"PAH",1,1,30,0)
BLOOD BANK CLEARANCE: 1/6/2009
"PKG",26,22,1,"PAH",1,1,31,0)
VISTA Laboratory Package patch LR*5.2*335 contains changes to software 
"PKG",26,22,1,"PAH",1,1,32,0)
controlled by VHA DIRECTIVE 2004-058, titled VISTA BLOOD BANK SOFTWARE.
"PKG",26,22,1,"PAH",1,1,33,0)
Changes include:
"PKG",26,22,1,"PAH",1,1,34,0)
Access is restricted on the following files:
"PKG",26,22,1,"PAH",1,1,35,0)
File #    File Name              Field #     Field Name
"PKG",26,22,1,"PAH",1,1,36,0)
=====     =========              =======     ==========
"PKG",26,22,1,"PAH",1,1,37,0)
62.55     AGGLUTINATION STRENGTH     .01     NAME
"PKG",26,22,1,"PAH",1,1,38,0)
62.55     AGGLUTINATION STRENGTH       1     WILL STAND FOR
"PKG",26,22,1,"PAH",1,1,39,0)
63.01     BLOOD BANK                 .01     DATE/TIME SPECIMEN TAKEN
"PKG",26,22,1,"PAH",1,1,40,0)
63.01     BLOOD BANK                 .03     DATE REPORT COMPLETED
"PKG",26,22,1,"PAH",1,1,41,0)
63.01     BLOOD BANK                 .04     ENTERING PERSON
"PKG",26,22,1,"PAH",1,1,42,0)
63.01     BLOOD BANK                 .05     SPECIMEN
"PKG",26,22,1,"PAH",1,1,43,0)
63.01     BLOOD BANK                .055     COLLECTION SAMPLE
"PKG",26,22,1,"PAH",1,1,44,0)
63.01     BLOOD BANK                 .06     ACCESSION NUMBER
"PKG",26,22,1,"PAH",1,1,45,0)
63.01     BLOOD BANK                 .07     PHYSICIAN
"PKG",26,22,1,"PAH",1,1,46,0)
63.01     BLOOD BANK                 .08     WARD
"PKG",26,22,1,"PAH",1,1,47,0)
63.01     BLOOD BANK                 .09     PHLEBOTOMIST
"PKG",26,22,1,"PAH",1,1,48,0)
63.01     BLOOD BANK                  .1     DATE/TIME RECEIVED
"PKG",26,22,1,"PAH",1,1,49,0)
63.01     BLOOD BANK                 .12     ACCESSION LINK
"PKG",26,22,1,"PAH",1,1,50,0)
63.01     BLOOD BANK                 .99     SPECIMEN COMMENT
"PKG",26,22,1,"PAH",1,1,51,0)
63.01     BLOOD BANK                 2.1     DIRECT AHG(POLYSPECIFIC)
"PKG",26,22,1,"PAH",1,1,52,0)
63.01     BLOOD BANK                 2.2     DIRECT AHG(5 min incub)
"PKG",26,22,1,"PAH",1,1,53,0)
63.01     BLOOD BANK                 2.3     DIRECT AHG CC
"PKG",26,22,1,"PAH",1,1,54,0)
63.01     BLOOD BANK                 2.4     ANTI-IgG
"PKG",26,22,1,"PAH",1,1,55,0)
63.01     BLOOD BANK                 2.5     ANTI-IgG CC
"PKG",26,22,1,"PAH",1,1,56,0)
63.01     BLOOD BANK                 2.6     ANTI-COMPLEMENT
"PKG",26,22,1,"PAH",1,1,57,0)
63.01     BLOOD BANK                 2.7     ANTI-COMPLEMENT (5 min incub)
"PKG",26,22,1,"PAH",1,1,58,0)
63.01     BLOOD BANK                 2.8     ANTI-COMPLEMENT CC
"PKG",26,22,1,"PAH",1,1,59,0)
63.01     BLOOD BANK                 2.9     DIRECT AHG INTERPRETATION
"PKG",26,22,1,"PAH",1,1,60,0)
63.01     BLOOD BANK                2.91     DIRECT AHG TEST COMMENT
"PKG",26,22,1,"PAH",1,1,61,0)
63.01     BLOOD BANK                   3     ELUATE ANTIBODY
"PKG",26,22,1,"PAH",1,1,62,0)
63.01     BLOOD BANK                   4     SCREEN CELL METHOD
"PKG",26,22,1,"PAH",1,1,63,0)
63.01     BLOOD BANK                   6     ANTIBODY SCREEN 
"PKG",26,22,1,"PAH",1,1,64,0)
INTERPRETATION
"PKG",26,22,1,"PAH",1,1,65,0)
63.01     BLOOD BANK                 6.1     RBC ANTIGEN PRESENT
"PKG",26,22,1,"PAH",1,1,66,0)
63.01     BLOOD BANK                 6.2     RBC ANTIGEN ABSENT
"PKG",26,22,1,"PAH",1,1,67,0)
63.01     BLOOD BANK                 6.3     HLA ANTIGEN PRESENT
"PKG",26,22,1,"PAH",1,1,68,0)
63.01     BLOOD BANK                 6.4     HLA ANTIGEN ABSENT
"PKG",26,22,1,"PAH",1,1,69,0)
63.01     BLOOD BANK                   7     SERUM ANTIBODY
"PKG",26,22,1,"PAH",1,1,70,0)
63.01     BLOOD BANK                   8     ANTIBODY SCREEN COMMENT
"PKG",26,22,1,"PAH",1,1,71,0)
63.01     BLOOD BANK                   9     RBC TYPING METHOD
"PKG",26,22,1,"PAH",1,1,72,0)
63.01     BLOOD BANK                  10     ABO INTERPRETATION
"PKG",26,22,1,"PAH",1,1,73,0)
63.01     BLOOD BANK                10.2     ABO TYPING TECH
"PKG",26,22,1,"PAH",1,1,74,0)
63.01     BLOOD BANK                10.3     ABO TESTING COMMENT
"PKG",26,22,1,"PAH",1,1,75,0)
63.01     BLOOD BANK                  11     RH  INTERPRETATION
"PKG",26,22,1,"PAH",1,1,76,0)
63.01     BLOOD BANK                11.2     RH TYPING TECH
"PKG",26,22,1,"PAH",1,1,77,0)
63.01     BLOOD BANK                11.3     RH TESTING COMMENT
"PKG",26,22,1,"PAH",1,1,78,0)
63.01     BLOOD BANK                 121     PT CELLS+ANTI D (sal)
"PKG",26,22,1,"PAH",1,1,79,0)
63.01     BLOOD BANK                 122     PT CELLS+RH CTRL (sal)
"PKG",26,22,1,"PAH",1,1,80,0)
63.01     BLOOD BANK                 123     PT CELLS(sal)+ANTI D(hp IS)
"PKG",26,22,1,"PAH",1,1,81,0)
63.01     BLOOD BANK                 124     PT CELLS(ser)+ANTI D(hp IS)
"PKG",26,22,1,"PAH",1,1,82,0)
63.01     BLOOD BANK                 125     PT CELLS+ANTI D (hp 37)
"PKG",26,22,1,"PAH",1,1,83,0)
63.01     BLOOD BANK                 126     PT CELLS+ANTI D (hp AHG)
"PKG",26,22,1,"PAH",1,1,84,0)
63.01     BLOOD BANK                 127     PT CELLS+ANTI D SLIDE (hp)
"PKG",26,22,1,"PAH",1,1,85,0)
63.01     BLOOD BANK                 128     PT CELLS(sal)+RH CTRL (hp IS)
"PKG",26,22,1,"PAH",1,1,86,0)
63.01     BLOOD BANK                 129     PT CELLS(ser)+RH CTRL(hp IS)
"PKG",26,22,1,"PAH",1,1,87,0)
63.01     BLOOD BANK               129.1     PT CELLS+RH CTRL (hp 37)
"PKG",26,22,1,"PAH",1,1,88,0)
63.01     BLOOD BANK              129.11     PT CELLS+RH CTRL (hp AHG)
"PKG",26,22,1,"PAH",1,1,89,0)
63.01     BLOOD BANK              129.12     PT CELLS+RH CTRL SLIDE (hp)
"PKG",26,22,1,"PAH",1,1,90,0)
63.01     BLOOD BANK                 131     INTERPRETATION OF RH TESTING
"PKG",26,22,1,"PAH",1,1,91,0)
63.01     BLOOD BANK                 132     RH TEST COMMENT
"PKG",26,22,1,"PAH",1,1,92,0)
63.01     BLOOD BANK                 133     PT Cells(sal)+Anti D(mod) IS
"PKG",26,22,1,"PAH",1,1,93,0)
63.01     BLOOD BANK                 134     PT Cells(ser)+Anti D(mod) IS
"PKG",26,22,1,"PAH",1,1,94,0)
63.01     BLOOD BANK                 135     PT Cells+Anti D(mod) 37
"PKG",26,22,1,"PAH",1,1,95,0)
63.01     BLOOD BANK                 136     PT Cells+Anti D(mod) AHG
"PKG",26,22,1,"PAH",1,1,96,0)
63.01     BLOOD BANK                 138     PT Cells(sal)+RH Ctrl(sal) IS
"PKG",26,22,1,"PAH",1,1,97,0)
63.01     BLOOD BANK                 139     PT Cells(ser)+RH Ctrl(sal) IS
"PKG",26,22,1,"PAH",1,1,98,0)
63.01     BLOOD BANK               139.1     PT Cells+RH Ctrl(sal) 37
"PKG",26,22,1,"PAH",1,1,99,0)
63.01     BLOOD BANK              139.11     PT Cells+RH Ctrl(sal) AHG
"PKG",26,22,1,"PAH",1,1,100,0)
63.01     BLOOD BANK                 141     PT CELLS(ser)+ANTI A IS
"PKG",26,22,1,"PAH",1,1,101,0)
63.01     BLOOD BANK                 142     PT CELLS(sal)+ANTI A IS
"PKG",26,22,1,"PAH",1,1,102,0)
63.01     BLOOD BANK                 143     PT CELLS+ANTI A SLIDE
"PKG",26,22,1,"PAH",1,1,103,0)
63.01     BLOOD BANK                 144     PT CELLS(ser)+ANTI B IS
"PKG",26,22,1,"PAH",1,1,104,0)
63.01     BLOOD BANK                 145     PT CELLS(sal)+ANTI B IS
"PKG",26,22,1,"PAH",1,1,105,0)
63.01     BLOOD BANK                 146     PT CELLS+ANTI B SLIDE
"PKG",26,22,1,"PAH",1,1,106,0)
63.01     BLOOD BANK                 147     PT CELLS(ser)+ANTI A,B IS
"PKG",26,22,1,"PAH",1,1,107,0)
63.01     BLOOD BANK                 148     PT CELLS(ser)+ANTI A,B (RT)
"PKG",26,22,1,"PAH",1,1,108,0)
63.01     BLOOD BANK                 149     PT CELLS(sal)+ANTI A,B (IS)
"PKG",26,22,1,"PAH",1,1,109,0)
63.01     BLOOD BANK               149.1     PT CELLS(sal)+ANTI A,B (RT)
"PKG",26,22,1,"PAH",1,1,110,0)
63.01     BLOOD BANK              149.11     PT CELLS+ANTI A,B SLIDE
"PKG",26,22,1,"PAH",1,1,111,0)
63.01     BLOOD BANK              149.12     PT SERUM+A1 CELLS
"PKG",26,22,1,"PAH",1,1,112,0)
63.01     BLOOD BANK              149.13     PT SERUM+B CELLS
"PKG",26,22,1,"PAH",1,1,113,0)
63.01     BLOOD BANK                 151     INTERPRETATION OF ABO TESTING
"PKG",26,22,1,"PAH",1,1,114,0)
63.01     BLOOD BANK                 152     ABO TESTING COMMENT
"PKG",26,22,1,"PAH",1,1,115,0)
63.01     BLOOD BANK                 153     INTERPRETATION ABO 
"PKG",26,22,1,"PAH",1,1,116,0)
GROUP(cell)
"PKG",26,22,1,"PAH",1,1,117,0)
63.01     BLOOD BANK                 154     INTERPRETATION ABO GROUP(ser)
"PKG",26,22,1,"PAH",1,1,118,0)
63.011    RBC ANTIGEN PRESENT        .01     RBC ANTIGEN PRESENT
"PKG",26,22,1,"PAH",1,1,119,0)
63.011    RBC ANTIGEN PRESENT        .02     COMMENT
"PKG",26,22,1,"PAH",1,1,120,0)
63.0112   RBC ANTIGEN ABSENT         .01     RBC ANTIGEN ABSENT
"PKG",26,22,1,"PAH",1,1,121,0)
63.0112   RBC ANTIGEN ABSENT         .02     COMMENT
"PKG",26,22,1,"PAH",1,1,122,0)
63.0114   HLA ANTIGEN ABSENT         .01     HLA ANTIGEN ABSENT
"PKG",26,22,1,"PAH",1,1,123,0)
63.0114   HLA ANTIGEN ABSENT         .02     COMMENT
"PKG",26,22,1,"PAH",1,1,124,0)
63.012    ELUATE ANTIBODY            .01     ELUATE ANTIBODY
"PKG",26,22,1,"PAH",1,1,125,0)
63.013    HLA ANTIGEN PRESENT        .01     HLA ANTIGEN PRESENT
"PKG",26,22,1,"PAH",1,1,126,0)
63.013    HLA ANTIGEN PRESENT        .02     COMMENT
"PKG",26,22,1,"PAH",1,1,127,0)
63.014    SCREEN CELL METHOD         .01     SCREEN CELL METHOD
"PKG",26,22,1,"PAH",1,1,128,0)
63.014    SCREEN CELL METHOD         .02     TECHNIQUE
"PKG",26,22,1,"PAH",1,1,129,0)
63.014    SCREEN CELL METHOD           1     SCREEN CELL
"PKG",26,22,1,"PAH",1,1,130,0)
63.015    SCREEN CELL                .01     SCREEN CELL
"PKG",26,22,1,"PAH",1,1,131,0)
63.015    SCREEN CELL                .02     SOURCE
"PKG",26,22,1,"PAH",1,1,132,0)
63.015    SCREEN CELL                .03     INTERPRETATION
"PKG",26,22,1,"PAH",1,1,133,0)
63.015    SCREEN CELL                .04     IS
"PKG",26,22,1,"PAH",1,1,134,0)
63.015    SCREEN CELL                .05     37 C
"PKG",26,22,1,"PAH",1,1,135,0)
63.015    SCREEN CELL                .06     AHG
"PKG",26,22,1,"PAH",1,1,136,0)
63.015    SCREEN CELL                .07     CONTROL CELL
"PKG",26,22,1,"PAH",1,1,137,0)
63.015    SCREEN CELL                .08     ROOM TEMP
"PKG",26,22,1,"PAH",1,1,138,0)
63.015    SCREEN CELL                .09     12-18 C
"PKG",26,22,1,"PAH",1,1,139,0)
63.015    SCREEN CELL                 .1     4 C
"PKG",26,22,1,"PAH",1,1,140,0)
63.018    RBC TYPING METHOD          .01     RBC TYPING METHOD
"PKG",26,22,1,"PAH",1,1,141,0)
63.018    RBC TYPING METHOD          .02     TECHNIQUE
"PKG",26,22,1,"PAH",1,1,142,0)
63.018    RBC TYPING METHOD            1     ANTISERUM
"PKG",26,22,1,"PAH",1,1,143,0)
63.019    ANTISERUM                  .01     ANTISERUM
"PKG",26,22,1,"PAH",1,1,144,0)
63.019    ANTISERUM                  .02     LOT #
"PKG",26,22,1,"PAH",1,1,145,0)
63.019    ANTISERUM                  .03     INTERPRETATION
"PKG",26,22,1,"PAH",1,1,146,0)
63.019    ANTISERUM                  .04     IS
"PKG",26,22,1,"PAH",1,1,147,0)
63.019    ANTISERUM                  .05     37 C
"PKG",26,22,1,"PAH",1,1,148,0)
63.019    ANTISERUM                  .06     AHG
"PKG",26,22,1,"PAH",1,1,149,0)
63.019    ANTISERUM                  .07     CONTROL CELL
"PKG",26,22,1,"PAH",1,1,150,0)
63.019    ANTISERUM                  .08     ROOM TEMP
"PKG",26,22,1,"PAH",1,1,151,0)
63.019    ANTISERUM                  .09     12-18 C
"PKG",26,22,1,"PAH",1,1,152,0)
63.019    ANTISERUM                   .1     4 C
"PKG",26,22,1,"PAH",1,1,153,0)
63.199    SPECIMEN COMMENT           .01     SPECIMEN COMMENT
"PKG",26,22,1,"PAH",1,1,154,0)
63.46     SERUM ANTIBODY             .01     SERUM ANTIBODY
"PKG",26,22,1,"PAH",1,1,155,0)
63.46     SERUM ANTIBODY             .02     ANTIBODY COMMENT
"PKG",26,22,1,"PAH",1,1,156,0)
63.48     ANTIBODY SCREEN COMMENT    .01     ANTIBODY SCREEN COMMENT
"PKG",26,22,1,"PAH",1,1,157,0)
65.50     Entire File
"PKG",26,22,1,"PAH",1,1,158,0)
66.20     Entire File
"PKG",26,22,1,"PAH",1,1,159,0)
66.50     Entire File
"PKG",26,22,1,"PAH",1,1,160,0)
66.90     Entire File
"PKG",26,22,1,"PAH",1,1,161,0)
 
"PKG",26,22,1,"PAH",1,1,162,0)
The following options are placed out of order:
"PKG",26,22,1,"PAH",1,1,163,0)
Option Name   Option Text
"PKG",26,22,1,"PAH",1,1,164,0)
=======================================================================
"PKG",26,22,1,"PAH",1,1,165,0)
LRBLAD        Print data change audits
"PKG",26,22,1,"PAH",1,1,166,0)
LRBLAR        Remove data change audits
"PKG",26,22,1,"PAH",1,1,167,0)
LRBLDA        Donor collection/deferral edit
"PKG",26,22,1,"PAH",1,1,168,0)
LRBLDAWARD    Acknowledge donor award by deletion
"PKG",26,22,1,"PAH",1,1,169,0)
LRBLDC        Donor collection/processing
"PKG",26,22,1,"PAH",1,1,170,0)
LRBLDCP       Collection disposition/component preparation
"PKG",26,22,1,"PAH",1,1,171,0)
LRBLDCU       Cumulative donations and awards
"PKG",26,22,1,"PAH",1,1,172,0)
LRBLDCX       Edit donor consent
"PKG",26,22,1,"PAH",1,1,173,0)
LRBLDD        Donor demographics
"PKG",26,22,1,"PAH",1,1,174,0)
LRBLDDAT      ABO/Rh testing of donor units
"PKG",26,22,1,"PAH",1,1,175,0)
LRBLDEDIT     Blood donor group/type edit
"PKG",26,22,1,"PAH",1,1,176,0)
LRBLDEF       Permanent deferral/special comments
"PKG",26,22,1,"PAH",1,1,177,0)
LRBLDK        Remove ex-donors
"PKG",26,22,1,"PAH",1,1,178,0)
LRBLDLG       Donor registration
"PKG",26,22,1,"PAH",1,1,179,0)
LRBLDLT       Enter/edit donor letters
"PKG",26,22,1,"PAH",1,1,180,0)
LRBLDMV       Move a blood donation
"PKG",26,22,1,"PAH",1,1,181,0)
LRBLDO        Old blood donor records
"PKG",26,22,1,"PAH",1,1,182,0)
LRBLDPH       Donor phenotyping
"PKG",26,22,1,"PAH",1,1,183,0)
LRBLDR        Donor history, physical and consent form
"PKG",26,22,1,"PAH",1,1,184,0)
LRBLDRR       Test review/Component labeling/release
"PKG",26,22,1,"PAH",1,1,185,0)
LRBLDT        Lab tests(not ABO/Rh) on donor units
"PKG",26,22,1,"PAH",1,1,186,0)
LRBLDUC       Donor unit ABO/Rh recheck
"PKG",26,22,1,"PAH",1,1,187,0)
LRBLIDN       Disposition -not transfused
"PKG",26,22,1,"PAH",1,1,188,0)
LRBLIDR       Disposition -relocation
"PKG",26,22,1,"PAH",1,1,189,0)
LRBLILA       Unit CAUTION tag labels
"PKG",26,22,1,"PAH",1,1,190,0)
LRBLILR       Log-in regular (invoices)
"PKG",26,22,1,"PAH",1,1,191,0)
LRBLILS       Enter blood inventory typing charges
"PKG",26,22,1,"PAH",1,1,192,0)
LRBLISH       Shipping invoices for blood components
"PKG",26,22,1,"PAH",1,1,193,0)
LRBLIUC       Unit ABO/Rh confirmation
"PKG",26,22,1,"PAH",1,1,194,0)
LRBLIUP       Unit phenotyping
"PKG",26,22,1,"PAH",1,1,195,0)
LRBLIUR       Units release to stock (cancel) by patient
"PKG",26,22,1,"PAH",1,1,196,0)
LRBLIW        Inventory ABO/Rh testing worksheet
"PKG",26,22,1,"PAH",1,1,197,0)
LRBLJM        Edit pooled blood product
"PKG",26,22,1,"PAH",1,1,198,0)
LRBLJTR       Transfer unit to new division
"PKG",26,22,1,"PAH",1,1,199,0)
LRBLPC        Request/select/xmatch blood components
"PKG",26,22,1,"PAH",1,1,200,0)
LRBLPCS       Blood component requests
"PKG",26,22,1,"PAH",1,1,201,0)
LRBLPED       Pediatric unit preparation
"PKG",26,22,1,"PAH",1,1,202,0)
LRBLPEDIT     Patient ABO/Rh edit
"PKG",26,22,1,"PAH",1,1,203,0)
LRBLPER       Previous records
"PKG",26,22,1,"PAH",1,1,204,0)
LRBLPET       Enter test data
"PKG",26,22,1,"PAH",1,1,205,0)
LRBLPH        Patient Medication List
"PKG",26,22,1,"PAH",1,1,206,0)
LRBLPIC       Select units for patients
"PKG",26,22,1,"PAH",1,1,207,0)
LRBLPLOGIN    Specimen log-in
"PKG",26,22,1,"PAH",1,1,208,0)
LRBLPOST      File 81 conversion
"PKG",26,22,1,"PAH",1,1,209,0)
LRBLPSI       Special instructions
"PKG",26,22,1,"PAH",1,1,210,0)
LRBLPT        Blood transfusion results
"PKG",26,22,1,"PAH",1,1,211,0)
LRBLPTXR      Unknown unit transfusion reaction
"PKG",26,22,1,"PAH",1,1,212,0)
LRBLPX        Enter crossmatch results
"PKG",26,22,1,"PAH",1,1,213,0)
LRBLRIN       Supplier invoices (inventory)
"PKG",26,22,1,"PAH",1,1,214,0)
LRBLRIS       Special typing charges (inventory)
"PKG",26,22,1,"PAH",1,1,215,0)
LRBLRIT       Supplier transactions (inventory)
"PKG",26,22,1,"PAH",1,1,216,0)
LRBLSEB       Edit blood product file
"PKG",26,22,1,"PAH",1,1,217,0)
LRBLSEC       Edit unit - patient fields
"PKG",26,22,1,"PAH",1,1,218,0)
LRBLSED       Edit unit disposition fields
"PKG",26,22,1,"PAH",1,1,219,0)
LRBLSEE       Free autologous/directed donor units
"PKG",26,22,1,"PAH",1,1,220,0)
LRBLSEF       Edit blood bank descriptions file
"PKG",26,22,1,"PAH",1,1,221,0)
LRBLSEH       Edit donor history questions
"PKG",26,22,1,"PAH",1,1,222,0)
LRBLSEL       Edit unit log-in
"PKG",26,22,1,"PAH",1,1,223,0)
LRBLSER       Remove units with final disposition
"PKG",26,22,1,"PAH",1,1,224,0)
LRBLSET       Tests for inclusion in transfusion report
"PKG",26,22,1,"PAH",1,1,225,0)
LRBLSEU       Edit blood bank utility file
"PKG",26,22,1,"PAH",1,1,226,0)
LRBLSF        Edit number of lines in a label
"PKG",26,22,1,"PAH",1,1,227,0)
LRBLSI        Blood bank inventory edit options
"PKG",26,22,1,"PAH",1,1,228,0)
LRBLSLL       Edit lab letter file
"PKG",26,22,1,"PAH",1,1,229,0)
LRBLSMS       Maximum surgical blood order edit
"PKG",26,22,1,"PAH",1,1,230,0)
LRBLSNO       Edit Corresponding Antigen/Antibody
"PKG",26,22,1,"PAH",1,1,231,0)
LRBLSP        Blood bank patient edit options
"PKG",26,22,1,"PAH",1,1,232,0)
LRBLSPP       Edit previous transfusion record
"PKG",26,22,1,"PAH",1,1,233,0)
LRBLSRI       Remove inappropriate transfusion requests
"PKG",26,22,1,"PAH",1,1,234,0)
LRBLSRQ       Edit Blood Component Request File
"PKG",26,22,1,"PAH",1,1,235,0)
LRBLSSP       Edit blood bank site parameters
"PKG",26,22,1,"PAH",1,1,236,0)
LRBLST        Tests for display on patient look-up
"PKG",26,22,1,"PAH",1,1,237,0)
LRBLTTW       Test worklist
"PKG",26,22,1,"PAH",1,1,238,0)
LRBLTX        Tests for transfusion follow-up
"PKG",26,22,1,"PAH",1,1,239,0)
LRBLVAL       Blood bank validation documentation
"PKG",26,22,1,"PAH",1,1,240,0)
 
"PKG",26,22,1,"PAH",1,1,241,0)
RISK ANALYSIS: The changes made by patch LR*5.2*335 affect Blood Bank 
"PKG",26,22,1,"PAH",1,1,242,0)
software functionality, however the RISK is considered to be low.
"PKG",26,22,1,"PAH",1,1,243,0)
  Inappropriate use of the "Disable VistA Blood Bank components"
"PKG",26,22,1,"PAH",1,1,244,0)
  [VBEC BB COMPONENTS DISABLE] option can disable the VistA 5.2
"PKG",26,22,1,"PAH",1,1,245,0)
  Blood Bank system.  This risk is minimal since the "Enable VistA
"PKG",26,22,1,"PAH",1,1,246,0)
  Blood Bank components" [VBEC BB COMPONENTS ENABLE] option can be
"PKG",26,22,1,"PAH",1,1,247,0)
  used to restore full operations.
"PKG",26,22,1,"PAH",1,1,248,0)
 
"PKG",26,22,1,"PAH",1,1,249,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*335 does not 
"PKG",26,22,1,"PAH",1,1,250,0)
alter or modify any software design safeguards or safety critical 
"PKG",26,22,1,"PAH",1,1,251,0)
elements functions.
"PKG",26,22,1,"PAH",1,1,252,0)
 
"PKG",26,22,1,"PAH",1,1,253,0)
POTENTIAL IMPACT ON SITES: This patch contains changes to 0 routines and 
"PKG",26,22,1,"PAH",1,1,254,0)
4 files identified in Veterans Health Administration (VHA) Directive 
"PKG",26,22,1,"PAH",1,1,255,0)
2004-058, group B listing. The changes have no effect on medical device 
"PKG",26,22,1,"PAH",1,1,256,0)
control functions.
"PKG",26,22,1,"PAH",1,1,257,0)
  This is the final step prior to the transfer of Blood Bank operations
"PKG",26,22,1,"PAH",1,1,258,0)
  to the VBECS system. All future impact will be dealt with through VBECS
"PKG",26,22,1,"PAH",1,1,259,0)
  development
"PKG",26,22,1,"PAH",1,1,260,0)
 
"PKG",26,22,1,"PAH",1,1,261,0)
VALIDATION REQUIREMENTS BY OPTION:
"PKG",26,22,1,"PAH",1,1,262,0)
  No VistA Blood Bank 5.2 options are released with this patch.
"PKG",26,22,1,"PAH",1,1,263,0)
  However, the options listed above should be tested to ensure that
"PKG",26,22,1,"PAH",1,1,264,0)
  they have been disabled after the completion of the data conversion.
"PKG",26,22,1,"PAH",1,1,265,0)
   
"PKG",26,22,1,"PAH",1,1,266,0)
 
"PKG",26,22,1,"PAH",1,1,267,0)
FILES CREATED DURING THE INSTALLATION OF THIS PATCH:
"PKG",26,22,1,"PAH",1,1,268,0)
FILE #      NAME
"PKG",26,22,1,"PAH",1,1,269,0)
======      ====
"PKG",26,22,1,"PAH",1,1,270,0)
6000        VBECS SITE PARAMETERS
"PKG",26,22,1,"PAH",1,1,271,0)
6001        VBECS DATA INTEGRITY/CONVERSION STATISTICS
"PKG",26,22,1,"PAH",1,1,272,0)
6003        VISTA BLOOD BANK RESTRICTED OPTIONS LIST
"PKG",26,22,1,"PAH",1,1,273,0)
6005        VBECS MATCHING TABLE
"PKG",26,22,1,"PAH",1,1,274,0)
6007        STANDARD VBECS DATA
"PKG",26,22,1,"PAH",1,1,275,0)
6009        VBECS FILE & FIELD LEVEL SECURITY
"PKG",26,22,1,"PAH",1,1,276,0)
 
"PKG",26,22,1,"PAH",1,1,277,0)
MAIL GROUPS CREATED DURING THE INSTALLATION OF THIS PATCH
"PKG",26,22,1,"PAH",1,1,278,0)
MAIL GROUP:
"PKG",26,22,1,"PAH",1,1,279,0)
===========
"PKG",26,22,1,"PAH",1,1,280,0)
VBECS DATA CONVERSION
"PKG",26,22,1,"PAH",1,1,281,0)
 
"PKG",26,22,1,"PAH",1,1,282,0)
ROUTINES INSTALLED DURING THE INSTALLATION OF THIS PATCH:
"PKG",26,22,1,"PAH",1,1,283,0)
ROUTINE:
"PKG",26,22,1,"PAH",1,1,284,0)
========
"PKG",26,22,1,"PAH",1,1,285,0)
VBECDC00
"PKG",26,22,1,"PAH",1,1,286,0)
VBECDC01
"PKG",26,22,1,"PAH",1,1,287,0)
VBECDC02
"PKG",26,22,1,"PAH",1,1,288,0)
VBECDC19
"PKG",26,22,1,"PAH",1,1,289,0)
VBECDCDC
"PKG",26,22,1,"PAH",1,1,290,0)
VBECDCHX
"PKG",26,22,1,"PAH",1,1,291,0)
VBECDCM
"PKG",26,22,1,"PAH",1,1,292,0)
VBECDCM0
"PKG",26,22,1,"PAH",1,1,293,0)
VBECDCM1
"PKG",26,22,1,"PAH",1,1,294,0)
VBECDCM2
"PKG",26,22,1,"PAH",1,1,295,0)
VBECDCMP
"PKG",26,22,1,"PAH",1,1,296,0)
VBECDCNM
"PKG",26,22,1,"PAH",1,1,297,0)
VBECDCR
"PKG",26,22,1,"PAH",1,1,298,0)
VBECDCSP
"PKG",26,22,1,"PAH",1,1,299,0)
VBECDCST
"PKG",26,22,1,"PAH",1,1,300,0)
VBECDCU
"PKG",26,22,1,"PAH",1,1,301,0)
VBECDCU1
"PKG",26,22,1,"PAH",1,1,302,0)
VBECDCU2
"PKG",26,22,1,"PAH",1,1,303,0)
VBECDCX
"PKG",26,22,1,"PAH",1,1,304,0)
VBECDCX1
"PKG",26,22,1,"PAH",1,1,305,0)
 
"PKG",26,22,1,"PAH",1,1,306,0)
OPTIONS CREATED DURING THE INSTALLATION OF THIS PATCH:
"PKG",26,22,1,"PAH",1,1,307,0)
Option Name                    Option Text
"PKG",26,22,1,"PAH",1,1,308,0)
===========                    ===========
"PKG",26,22,1,"PAH",1,1,309,0)
VBEC ANTIBODY/ANTIGEN UTIL.    Utilities that manipulate Antibody/Antigen 
"PKG",26,22,1,"PAH",1,1,310,0)
data
"PKG",26,22,1,"PAH",1,1,311,0)
VBEC BB COMPONENTS DISABLE     Disable VistA Blood Bank components
"PKG",26,22,1,"PAH",1,1,312,0)
VBEC BB COMPONENTS ENABLE      Enable VistA Blood Bank components
"PKG",26,22,1,"PAH",1,1,313,0)
VBEC CONVERSION UTILITIES      Utilities used for the data conversion
"PKG",26,22,1,"PAH",1,1,314,0)
VBEC DATA CONV. TO HOST FILES  Convert VistA Blood Bank data to host files
"PKG",26,22,1,"PAH",1,1,315,0)
VBEC DATA CONVERSION STATS     Display data conversion statistics
"PKG",26,22,1,"PAH",1,1,316,0)
VBEC DATA VALIDATION           Run Legacy VistA Blood Bank Data Validation
"PKG",26,22,1,"PAH",1,1,317,0)
VBEC DELETE ANTIBODY/ANTIGEN   Delete Antibody/Antigen temporary matching 
"PKG",26,22,1,"PAH",1,1,318,0)
files 
"PKG",26,22,1,"PAH",1,1,319,0)
VBEC DELETE CONV. STATS        Delete data conversion and anomaly check 
"PKG",26,22,1,"PAH",1,1,320,0)
histories
"PKG",26,22,1,"PAH",1,1,321,0)
VBEC DELETE EXTRACTED DATA     Delete all Blood Bank Data in Temporary 
"PKG",26,22,1,"PAH",1,1,322,0)
Globals
"PKG",26,22,1,"PAH",1,1,323,0)
VBEC DELETE SYSTEM LEVEL FILES Delete Blood Bank Data in System Level 
"PKG",26,22,1,"PAH",1,1,324,0)
Files
"PKG",26,22,1,"PAH",1,1,325,0)
VBEC DELETE TRANS. REACTION    Delete Transfusion Reaction temporary 
"PKG",26,22,1,"PAH",1,1,326,0)
match files
"PKG",26,22,1,"PAH",1,1,327,0)
VBEC INVALID DATA REPORT       Invalid Blood Bank Data Report
"PKG",26,22,1,"PAH",1,1,328,0)
VBEC MAIN MENU                 VBECS Data Matching/Conversion Menu
"PKG",26,22,1,"PAH",1,1,329,0)
VBEC MATCH ANTIBODY/ANTIGEN    Match VistA antibody/antigen data
"PKG",26,22,1,"PAH",1,1,330,0)
VBEC MATCH TRANSFUS REACTION   Match VistA transfusion reaction data
"PKG",26,22,1,"PAH",1,1,331,0)
VBEC POST-CONVERSION UTILITIES Utilities used after the data conversion 
"PKG",26,22,1,"PAH",1,1,332,0)
has run
"PKG",26,22,1,"PAH",1,1,333,0)
VBEC PRE-CONVERSION UTILITIES  Utilities used prior to the data conversion
"PKG",26,22,1,"PAH",1,1,334,0)
VBEC PRINT SQL/VISTA MATCHES   Matched Blood Bank data report
"PKG",26,22,1,"PAH",1,1,335,0)
VBEC SITE PARAMETER ENTER/EDIT Enter/Edit Site Parameter Data 
"PKG",26,22,1,"PAH",1,1,336,0)
VBEC STANDARD ANTIBODIES       Standard Antigens and Antibodies Print
"PKG",26,22,1,"PAH",1,1,337,0)
VBEC STANDARD TRANS. REACTIONS Standard Transfusion Reactions Print
"PKG",26,22,1,"PAH",1,1,338,0)
VBEC TRANS. REACTION UTILITIES Utilities that manipulate Trans. Reaction 
"PKG",26,22,1,"PAH",1,1,339,0)
data
"PKG",26,22,1,"PAH",1,1,340,0)
VBEC UNDO ANTIBODY/ANTIGEN     Undo all antibody/antigen matches
"PKG",26,22,1,"PAH",1,1,341,0)
VBEC UNDO SINGLE MATCHING      Unmatch a single matched VistA record 
"PKG",26,22,1,"PAH",1,1,342,0)
VBEC UNDO TRANS. REACTIONS     Undo all transfusion reaction matches
"PKG",26,22,1,"PAH",1,1,343,0)
VBEC UNMATCHED VISTA DATA RPT  Unmatched VistA Blood Bank Data Report
"PKG",26,22,1,"PAH",1,1,344,0)
VBEC UPDATE ANTIBODY/ANTIGEN   Update antibody/antigen records in 
"PKG",26,22,1,"PAH",1,1,345,0)
matching file
"PKG",26,22,1,"PAH",1,1,346,0)
VBEC UPDATE TRANS. REACT. REC  Update trans. reaction records in matching 
"PKG",26,22,1,"PAH",1,1,347,0)
file
"PKG",26,22,1,"PAH",1,1,348,0)
 
"PKG",26,22,1,"PAH",1,1,349,0)
Associated Remedy Tickets:  None
"PKG",26,22,1,"PAH",1,1,350,0)
==========================
"PKG",26,22,1,"PAH",1,1,351,0)
 
"PKG",26,22,1,"PAH",1,1,352,0)
Test Site(s):
"PKG",26,22,1,"PAH",1,1,353,0)
==============
"PKG",26,22,1,"PAH",1,1,354,0)
 HEARTLAND-EAST HCS
"PKG",26,22,1,"PAH",1,1,355,0)
 PHILADELPHIA, PA
"PKG",26,22,1,"PAH",1,1,356,0)
 SAN DIEGO, CA
"PKG",26,22,1,"PAH",1,1,357,0)
 
"PKG",26,22,1,"PAH",1,1,358,0)
Installation Sequence 
"PKG",26,22,1,"PAH",1,1,359,0)
======================
"PKG",26,22,1,"PAH",1,1,360,0)
The files listed below represent the patches will be part of the 
"PKG",26,22,1,"PAH",1,1,361,0)
controlled phased release.  Follow the sequence listed below when your 
"PKG",26,22,1,"PAH",1,1,362,0)
phased installation occurs.
"PKG",26,22,1,"PAH",1,1,363,0)
 
"PKG",26,22,1,"PAH",1,1,364,0)
  1. LR*5.2*335
"PKG",26,22,1,"PAH",1,1,365,0)
  2. LR*5.2*367
"PKG",26,22,1,"PAH",1,1,366,0)
  3. VBECS Bundle (consisting of VBEC*1*0 and LR*5.2*325)
"PKG",26,22,1,"PAH",1,1,367,0)
  4. VBEC*1.0*1
"PKG",26,22,1,"PAH",1,1,368,0)
  5. OR*3.0*212
"PKG",26,22,1,"PAH",1,1,369,0)
 
"PKG",26,22,1,"PAH",1,1,370,0)
COMPONENT SUMMARY:
"PKG",26,22,1,"PAH",1,1,371,0)
==================
"PKG",26,22,1,"PAH",1,1,372,0)
This patch installs ROUTINES, FILES, OPTIONS and a MAIL GROUP. For full 
"PKG",26,22,1,"PAH",1,1,373,0)
details about the components being imported with this patch, please see 
"PKG",26,22,1,"PAH",1,1,374,0)
the Blood Bank Pre-Implementation Data Validation, Mapping, and 
"PKG",26,22,1,"PAH",1,1,375,0)
Conversion Technical Manual
"PKG",26,22,1,"PAH",1,1,376,0)
 
"PKG",26,22,1,"PAH",1,1,377,0)
Documentation Retrieval:
"PKG",26,22,1,"PAH",1,1,378,0)
========================
"PKG",26,22,1,"PAH",1,1,379,0)
Although this is a controlled, phased released, the user & technical 
"PKG",26,22,1,"PAH",1,1,380,0)
documentation will be available to all sites when the patch is officially 
"PKG",26,22,1,"PAH",1,1,381,0)
released and the phased implementations start. This will allow sites the 
"PKG",26,22,1,"PAH",1,1,382,0)
opportunity to retrieve the documents before their phased installation 
"PKG",26,22,1,"PAH",1,1,383,0)
date
"PKG",26,22,1,"PAH",1,1,384,0)
 
"PKG",26,22,1,"PAH",1,1,385,0)
Documentation is available for the VBECS package on the 
"PKG",26,22,1,"PAH",1,1,386,0)
ANONYMOUS.SOFTWARE directory at one of the following Office of 
"PKG",26,22,1,"PAH",1,1,387,0)
Information (OI) Field Offices. Sites may retrieve documentation either 
"PKG",26,22,1,"PAH",1,1,388,0)
the ".PDF" or "DOC" format in one of the following ways:
"PKG",26,22,1,"PAH",1,1,389,0)
 
"PKG",26,22,1,"PAH",1,1,390,0)
The preferred method is to FTP the files from:
"PKG",26,22,1,"PAH",1,1,391,0)
Download.vista.domain.ext
"PKG",26,22,1,"PAH",1,1,392,0)
 
"PKG",26,22,1,"PAH",1,1,393,0)
This transmits files from the first available FTP server. Sites may also 
"PKG",26,22,1,"PAH",1,1,394,0)
elect to retrieve documentation directly from a specific server as 
"PKG",26,22,1,"PAH",1,1,395,0)
follows:
"PKG",26,22,1,"PAH",1,1,396,0)
       Albany                  DOMAIN.EXT
"PKG",26,22,1,"PAH",1,1,397,0)
       Hines                   DOMAIN.EXT
"PKG",26,22,1,"PAH",1,1,398,0)
       Salt Lake City          DOMAIN.EXT
"PKG",26,22,1,"PAH",1,1,399,0)
 
"PKG",26,22,1,"PAH",1,1,400,0)
NOTE:  The documentation files listed below will be listed in each of the 
"PKG",26,22,1,"PAH",1,1,401,0)
VBECS and LR patches that are part of the VBECS package and associate 
"PKG",26,22,1,"PAH",1,1,402,0)
patches, they only need to be downloaded once.
"PKG",26,22,1,"PAH",1,1,403,0)
 
"PKG",26,22,1,"PAH",1,1,404,0)
File Name                                   Retrieval format:  Binary
"PKG",26,22,1,"PAH",1,1,405,0)
===========                                 ==========================
"PKG",26,22,1,"PAH",1,1,406,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"PKG",26,22,1,"PAH",1,1,407,0)
ADPAC Guide.doc
"PKG",26,22,1,"PAH",1,1,408,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"PKG",26,22,1,"PAH",1,1,409,0)
ADPAC Guide.pdf
"PKG",26,22,1,"PAH",1,1,410,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"PKG",26,22,1,"PAH",1,1,411,0)
Installation and User Guide.doc
"PKG",26,22,1,"PAH",1,1,412,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"PKG",26,22,1,"PAH",1,1,413,0)
Installation and User Guide.pdf
"PKG",26,22,1,"PAH",1,1,414,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"PKG",26,22,1,"PAH",1,1,415,0)
Technical Manual.doc
"PKG",26,22,1,"PAH",1,1,416,0)
Blood Bank Pre-Implementation Data Validation, Mapping, and Conversion 
"PKG",26,22,1,"PAH",1,1,417,0)
Technical Manual.pdf
"PKG",26,22,1,"PAH",1,1,418,0)
VBECS Data Conversion Recommended Validation Method.xls
"PKG",26,22,1,"PAH",1,1,419,0)
VBECS Application Interfacing Support Software Installation and User 
"PKG",26,22,1,"PAH",1,1,420,0)
Configuration Guide.doc
"PKG",26,22,1,"PAH",1,1,421,0)
VBECS Application Interfacing Support Software Installation and User 
"PKG",26,22,1,"PAH",1,1,422,0)
Configuration Guide.pdf
"PKG",26,22,1,"PAH",1,1,423,0)
VBECS Implementation Process.xls
"PKG",26,22,1,"PAH",1,1,424,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Installation 
"PKG",26,22,1,"PAH",1,1,425,0)
Guide.doc
"PKG",26,22,1,"PAH",1,1,426,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Installation 
"PKG",26,22,1,"PAH",1,1,427,0)
Guide.pdf
"PKG",26,22,1,"PAH",1,1,428,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Technical 
"PKG",26,22,1,"PAH",1,1,429,0)
Manual-Security Guide.doc
"PKG",26,22,1,"PAH",1,1,430,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 Technical 
"PKG",26,22,1,"PAH",1,1,431,0)
Manual-Security Guide.pdf
"PKG",26,22,1,"PAH",1,1,432,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 User Guide.doc
"PKG",26,22,1,"PAH",1,1,433,0)
VistA Blood Establishment Computer Software (VBECS) 1.4.0.0 User Guide.pdf
"PKG",26,22,1,"PAH",1,1,434,0)
Known Defects and Anomalies.doc
"PKG",26,22,1,"PAH",1,1,435,0)
Known Defects and Anomalies.pdf
"PKG",26,22,1,"PAH",1,1,436,0)
 
"PKG",26,22,1,"PAH",1,1,437,0)
  Installation Information:
"PKG",26,22,1,"PAH",1,1,438,0)
  ==========================
"PKG",26,22,1,"PAH",1,1,439,0)
 
"PKG",26,22,1,"PAH",1,1,440,0)
This patch is exported as part of the VBECS Blood Bank System and allows 
"PKG",26,22,1,"PAH",1,1,441,0)
the conversion of limited existing Blood Bank data from VistA to VBECS. 
"PKG",26,22,1,"PAH",1,1,442,0)
Please refer to the "Blood Bank Pre-Implementation Data Validation, 
"PKG",26,22,1,"PAH",1,1,443,0)
Mapping, and Conversion Installation and User Guide" for installation 
"PKG",26,22,1,"PAH",1,1,444,0)
information. The files listed below may be obtained via FTP. The 
"PKG",26,22,1,"PAH",1,1,445,0)
installation of VBECS and its related patches are being handled as a 
"PKG",26,22,1,"PAH",1,1,446,0)
controlled release. The implementation manager will contact you with the 
"PKG",26,22,1,"PAH",1,1,447,0)
location of the KIDS Host Files prior to your scheduled installation 
"PKG",26,22,1,"PAH",1,1,448,0)
date. The documentation files will be available for download in advance 
"PKG",26,22,1,"PAH",1,1,449,0)
of installation through the anonymous download site as shown below.
"PKG",26,22,1,"PAH",1,1,450,0)
 
"PKG",26,22,1,"PAH",1,1,451,0)
  Installation Files: 
"PKG",26,22,1,"PAH",1,1,452,0)
  ===================
"PKG",26,22,1,"PAH",1,1,453,0)
The following files are exported for LR*5.2*335:
"PKG",26,22,1,"PAH",1,1,454,0)
   LR_52_335.KID
"PKG",26,22,1,"PAH",1,1,455,0)
 
"PKG",26,22,1,"PAH",1,1,456,0)
   VBECSBATCH.COM
"PKG",26,22,1,"PAH",1,1,457,0)
 
"PKG",26,22,1,"PAH",1,1,458,0)
LR_52_335.KID and VBECSBATCH.COM files will be made available by the 
"PKG",26,22,1,"PAH",1,1,459,0)
Implementation Manager prior to your site's implementation schedule along 
"PKG",26,22,1,"PAH",1,1,460,0)
with instruction to retrieve.
"PKG",26,22,1,"PAH",1,1,461,0)
 
"PKG",26,22,1,"PAH",1,1,462,0)
Installation Instructions:
"PKG",26,22,1,"PAH",1,1,463,0)
==========================
"PKG",26,22,1,"PAH",1,1,464,0)
This patch may be loaded with users on the system.
"PKG",26,22,1,"PAH",1,1,465,0)
Installation will take less than 5 minutes.
"PKG",26,22,1,"PAH",1,1,466,0)
 
"PKG",26,22,1,"PAH",1,1,467,0)
    1) Use the 'LOAD A DISTRIBUTION' option on the KIDS Installation
"PKG",26,22,1,"PAH",1,1,468,0)
       menu. The Host File name is LR_52_335.KID. Answer YES to the
"PKG",26,22,1,"PAH",1,1,469,0)
       question: "Want to Continue with Load? YES//"
"PKG",26,22,1,"PAH",1,1,470,0)
    2) From the Kernel Installation and Distribution System Menu,
"PKG",26,22,1,"PAH",1,1,471,0)
       select the Installation menu.
"PKG",26,22,1,"PAH",1,1,472,0)
    3) From this menu, you may elect to use the following options
"PKG",26,22,1,"PAH",1,1,473,0)
       (when prompted for the INSTALL NAME, enter LR*5.2*335).
"PKG",26,22,1,"PAH",1,1,474,0)
       a) Backup a Transport Global - this option will create a backup
"PKG",26,22,1,"PAH",1,1,475,0)
          message of any routines exported with the patch. It will NOT
"PKG",26,22,1,"PAH",1,1,476,0)
          backup any other changes such as DDs or templates.
"PKG",26,22,1,"PAH",1,1,477,0)
       b) Compare Transport Global to Current System - this option will
"PKG",26,22,1,"PAH",1,1,478,0)
          allow you to view all changes that will be made when the patch
"PKG",26,22,1,"PAH",1,1,479,0)
          is installed. It compares all components of the patch
"PKG",26,22,1,"PAH",1,1,480,0)
          (routines, DDs, templates, etc.).
"PKG",26,22,1,"PAH",1,1,481,0)
       c) Verify Checksums in Transport Global - this option will allow
"PKG",26,22,1,"PAH",1,1,482,0)
          you to ensure the integrity of the routines that are in the
"PKG",26,22,1,"PAH",1,1,483,0)
          transport global.
"PKG",26,22,1,"PAH",1,1,484,0)
       d) Print Transport Global - this option will allow you to view the
"PKG",26,22,1,"PAH",1,1,485,0)
          components of the KIDS build.
"PKG",26,22,1,"PAH",1,1,486,0)
    4) Use the Install Package(s) option and select the package
"PKG",26,22,1,"PAH",1,1,487,0)
       LR*5.2*335.
"PKG",26,22,1,"PAH",1,1,488,0)
    5) When prompted "Enter the Coordinator for Mail Group 'VBECS DATA
"PKG",26,22,1,"PAH",1,1,489,0)
       CONVERSION':" Enter the name of the person who will manage the
"PKG",26,22,1,"PAH",1,1,490,0)
       VBECS DATA CONVERSION mailgroup.
"PKG",26,22,1,"PAH",1,1,491,0)
    6) When prompted  'Want KIDS to Rebuild Menu Trees Upon Completion
"PKG",26,22,1,"PAH",1,1,492,0)
       of Install? YES//  respond YES 
"PKG",26,22,1,"PAH",1,1,493,0)
    7) When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
"PKG",26,22,1,"PAH",1,1,494,0)
       YES//', respond NO.
"PKG",26,22,1,"PAH",1,1,495,0)
    8) When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
"PKG",26,22,1,"PAH",1,1,496,0)
       Protocols? YES//', respond NO.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
20
"RTN","VBECDC00")
0^20^B29006974
"RTN","VBECDC00",1,0)
VBECDC00 ;hoifo/gjc-data conversion & pre-implementation;Nov 21, 2002
"RTN","VBECDC00",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDC00",3,0)
 ;
"RTN","VBECDC00",4,0)
 ;Medical Device #:
"RTN","VBECDC00",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDC00",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDC00",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDC00",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDC00",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDC00",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDC00",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDC00",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDC00",13,0)
 ;regulations.
"RTN","VBECDC00",14,0)
 ;
"RTN","VBECDC00",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDC00",16,0)
 ;Call to $$S^%ZTLOAD is supported by IA: 10063
"RTN","VBECDC00",17,0)
 ;Call to $$NOW^XLFDT is supported by IA: 10103
"RTN","VBECDC00",18,0)
 ;Call to ^%ZTLOAD is supported by IA: 10063
"RTN","VBECDC00",19,0)
 ;Call to UPDATE^DIE is supported by IA: 2053
"RTN","VBECDC00",20,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDC00",21,0)
 ;Direct global read of ^DPT(DFN,"LR") supported by IA: 10035
"RTN","VBECDC00",22,0)
 ;
"RTN","VBECDC00",23,0)
START ; entry point queued/not queued.  Update the VBECS DATA INTEGRITY/CONV
"RTN","VBECDC00",24,0)
 ; ERSION STATISTICS (#6001)
"RTN","VBECDC00",25,0)
 ;
"RTN","VBECDC00",26,0)
 ; Note: the variables VBECCNV & VBECIEN are defined in VBECDC01 and
"RTN","VBECDC00",27,0)
 ; are passed into START subroutine via the ZTSAVE array when calling
"RTN","VBECDC00",28,0)
 ; ^%ZTLOAD.
"RTN","VBECDC00",29,0)
 ;
"RTN","VBECDC00",30,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","VBECDC00",31,0)
 ;
"RTN","VBECDC00",32,0)
 ; initialize error trap
"RTN","VBECDC00",33,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDC00",34,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDC00",35,0)
 ;
"RTN","VBECDC00",36,0)
 D:VBECCNV EN^VBECDC19(1) ; lock out options when converting data
"RTN","VBECDC00",37,0)
 ;
"RTN","VBECDC00",38,0)
 S (CNT,DFN,LRSTOP)=0 S:$G(U)'="^" U="^" K ^TMP("VBEC 63",$J)
"RTN","VBECDC00",39,0)
 ;
"RTN","VBECDC00",40,0)
 ;initialize the global that keeps track of ALL data elements for ALL
"RTN","VBECDC00",41,0)
 ;records
"RTN","VBECDC00",42,0)
 ;
"RTN","VBECDC00",43,0)
 K X S $P(X,"0^",28)="",^TMP("VBEC FINIS",$J,0)=X K X
"RTN","VBECDC00",44,0)
 K ^TMP($J,"VBEC_TR_REACT"),^TMP($J,"VBEC_TR_TRD") S VBTRA=0 F  S VBTRA=$O(^LRD(65,VBTRA)) Q:'VBTRA  D
"RTN","VBECDC00",45,0)
  . I $P($G(^LRD(65,VBTRA,6)),"^")]"",$P($G(^LRD(65,VBTRA,6)),"^",5)  D
"RTN","VBECDC00",46,0)
  . . S VBLRDFN=$P(^LRD(65,VBTRA,6),"^"),VBDFN=$P(^LR(VBLRDFN,0),"^",3) Q:$P(^LR(VBLRDFN,0),"^",2)'=2
"RTN","VBECDC00",47,0)
  . . S ^TMP($J,"VBEC_TR_REACT",VBDFN,VBTRA)=""
"RTN","VBECDC00",48,0)
 ;
"RTN","VBECDC00",49,0)
 ;Create an index in the TMP global to make it easier to find Transfusion Reactions by DFN ;RLM 04/20/2005
"RTN","VBECDC00",50,0)
 ;
"RTN","VBECDC00",51,0)
 F  S DFN=$O(^DPT(DFN)) Q:DFN'>0  D  Q:LRSTOP
"RTN","VBECDC00",52,0)
 .;
"RTN","VBECDC00",53,0)
 .I $$S^%ZTLOAD() S (ZTSTOP,LRSTOP)=1 Q  ; has the user stopped the task?
"RTN","VBECDC00",54,0)
 .;
"RTN","VBECDC00",55,0)
 .Q:'$D(^DPT(DFN,"LR"))#2  ; patient w/o Lab Data (#63) file data
"RTN","VBECDC00",56,0)
 .;
"RTN","VBECDC00",57,0)
 .S LRDFN=+$G(^DPT(DFN,"LR"))
"RTN","VBECDC00",58,0)
 .;
"RTN","VBECDC00",59,0)
 .I LRDFN'>0 D  Q
"RTN","VBECDC00",60,0)
 ..K LRARY S LRARY(.01)=2,LRARY(.02)=DFN,LRARY(.09)=$P($T(ERRMSG+1^VBECDC02),";",4)
"RTN","VBECDC00",61,0)
 ..D LOGEXC^VBECDC02(VBECIEN,.LRARY) K LRARY ; log this exception regardless of the task
"RTN","VBECDC00",62,0)
 ..Q
"RTN","VBECDC00",63,0)
 .;
"RTN","VBECDC00",64,0)
 .I $$BRKPNT^VBECDCU1(LRDFN,DFN) D  Q
"RTN","VBECDC00",65,0)
 ..K LRARY S LRARY(.01)=2,LRARY(.02)=DFN,LRARY(.03)=63,LRARY(.04)=LRDFN
"RTN","VBECDC00",66,0)
 ..S LRARY(.09)=$P($T(ERRMSG+2^VBECDC02),";",4)
"RTN","VBECDC00",67,0)
 ..D LOGEXC^VBECDC02(VBECIEN,.LRARY) K LRARY ; log this exception regardless of the task
"RTN","VBECDC00",68,0)
 ..Q
"RTN","VBECDC00",69,0)
 .;
"RTN","VBECDC00",70,0)
 .I '$O(^LR(LRDFN,"BB",0)) Q  ; blood bank data missing for this patient
"RTN","VBECDC00",71,0)
 .;
"RTN","VBECDC00",72,0)
  . I 'LRSTOP,$P(^DPT(DFN,0),"^")["MERGING INTO" S DPTNAME=$P(^DPT(DFN,0),"^") D  Q
"RTN","VBECDC00",73,0)
  . . S VBECMRG=$P($P(DPTNAME,"`",2)," ")
"RTN","VBECDC00",74,0)
  . . K LRARY S LRARY(.01)=2,LRARY(.02)=DFN,LRARY(.03)=2,LRARY(.04)=VBECMRG,LRARY(.09)=$P($T(ERRMSG+3^VBECDC02),";",4)
"RTN","VBECDC00",75,0)
  . . D LOGEXC^VBECDC02(VBECIEN,.LRARY) K LRARY ; log this exception
"RTN","VBECDC00",76,0)
  . . Q
"RTN","VBECDC00",77,0)
 .;
"RTN","VBECDC00",78,0)
 .; if the data conversion process is active save off all LAB DATA file
"RTN","VBECDC00",79,0)
 .; specific data into the appropriate ^TMP("VBEC 63"*,$J) global
"RTN","VBECDC00",80,0)
 .;
"RTN","VBECDC00",81,0)
 .I 'LRSTOP,VBECCNV D PAT^VBECDCX(DFN,LRDFN)
"RTN","VBECDC00",82,0)
 .;
"RTN","VBECDC00",83,0)
 .;
"RTN","VBECDC00",84,0)
 .;save off patient specific data for each record in the Lab Data file
"RTN","VBECDC00",85,0)
 .I VBECCNV D:$D(^TMP("VBEC FINIS",$J,VBECRTOT,0))#2 PATREC(VBECIEN)
"RTN","VBECDC00",86,0)
 .Q
"RTN","VBECDC00",87,0)
 ;
"RTN","VBECDC00",88,0)
 ; kill off unnecessary ^TMP("VBEC 63",$J) global
"RTN","VBECDC00",89,0)
 K ^TMP("VBEC 63",$J)
"RTN","VBECDC00",90,0)
 ;
"RTN","VBECDC00",91,0)
 ; actions if the user teminates process (a check exists within to
"RTN","VBECDC00",92,0)
 ; execute specific code depending on if the anomaly check or the data
"RTN","VBECDC00",93,0)
 ; conversion is executing)
"RTN","VBECDC00",94,0)
 ;
"RTN","VBECDC00",95,0)
 S VBECANOM=+$O(^VBEC(6001,VBECIEN,"ERR",0)) ; do anomalies exist?
"RTN","VBECDC00",96,0)
 ;
"RTN","VBECDC00",97,0)
 ; If the process was stopped by the user via TaskMan (1)
"RTN","VBECDC00",98,0)
 ; If errored out, LRSTOP=-1 (set in ERR^VBECDCU1)
"RTN","VBECDC00",99,0)
 I LRSTOP=1 D STOPPED^VBECDC01
"RTN","VBECDC00",100,0)
 ;
"RTN","VBECDC00",101,0)
 ; If the process has completed without user intervention:
"RTN","VBECDC00",102,0)
 I 'LRSTOP D
"RTN","VBECDC00",103,0)
 .;
"RTN","VBECDC00",104,0)
 .; 1-if data to convert, save off the ^TMP("VBEC"*,$J) namespaced
"RTN","VBECDC00",105,0)
 .;   global into system level files to be extracted by SQL Server
"RTN","VBECDC00",106,0)
 .;   (make sure data tabulation globals are saved off properly)
"RTN","VBECDC00",107,0)
 .I VBECCNV,($$DATA^VBECDCU1($J)) D
"RTN","VBECDC00",108,0)
 ..S VBECNUSB=+$O(^TMP("VBEC FINIS",$J,$C(32)),-1)+1
"RTN","VBECDC00",109,0)
 ..S ^TMP("VBEC FINIS",$J,0)=^TMP("VBEC FINIS",$J,0)_$C(13)
"RTN","VBECDC00",110,0)
 ..S ^TMP("VBEC FINIS",$J,VBECNUSB,0)=^TMP("VBEC FINIS",$J,0)
"RTN","VBECDC00",111,0)
 ..K VBECNUSB,^TMP("VBEC FINIS",$J,0)
"RTN","VBECDC00",112,0)
 ..D SAVE^VBECDCU1 ;(1)
"RTN","VBECDC00",113,0)
 ..;the last record in the VBEC FINIS file will be be comprised of the
"RTN","VBECDC00",114,0)
 ..;totals for all data elements for all records.
"RTN","VBECDC00",115,0)
 ..Q
"RTN","VBECDC00",116,0)
 .;
"RTN","VBECDC00",117,0)
 .; 2-if there is no data to convert, let the user know via an alert.
"RTN","VBECDC00",118,0)
 .I VBECCNV,('$$DATA^VBECDCU1($J)) D
"RTN","VBECDC00",119,0)
 ..D ALERT^VBECDCU(DUZ,VBECCNV,VBECANOM,-1) ;(2)
"RTN","VBECDC00",120,0)
 ..Q
"RTN","VBECDC00",121,0)
 .;
"RTN","VBECDC00",122,0)
 .; 3-if there are anomalies, regardless of whether the anomaly check
"RTN","VBECDC00",123,0)
 .;   or data conversion was run, inform the user via an alert.
"RTN","VBECDC00",124,0)
 .E  D ALERT^VBECDCU(DUZ,VBECCNV,VBECANOM,"") ;(3)
"RTN","VBECDC00",125,0)
 .;
"RTN","VBECDC00",126,0)
 .; 4-file the date/time the data conversion/anomaly check finished
"RTN","VBECDC00",127,0)
 .D UP6001F^VBECDC02(VBECIEN,+$E($$NOW^XLFDT(),1,12)) ;(4)
"RTN","VBECDC00",128,0)
 .Q
"RTN","VBECDC00",129,0)
 ;
"RTN","VBECDC00",130,0)
XIT ; clean up symbol table, exit routine
"RTN","VBECDC00",131,0)
 K CNT,DFN,LRD1,LRDFN,LRSTOP,VBECANOM,VBECIEN,VBECRTOT
"RTN","VBECDC00",132,0)
 Q
"RTN","VBECDC00",133,0)
 ;
"RTN","VBECDC00",134,0)
PATREC(VBECIEN) ;file patient specific Lab Data file data into the DATA
"RTN","VBECDC00",135,0)
 ;CONVERSION STATISTIC multiple (6001.02)
"RTN","VBECDC00",136,0)
 ;Input: VBECIEN=the record number of the data conversion
"RTN","VBECDC00",137,0)
 S LRTMP=$G(^TMP("VBEC FINIS",$J,VBECRTOT,0))
"RTN","VBECDC00",138,0)
 S LRIEN="+"_LRDFN_","_VBECIEN_","
"RTN","VBECDC00",139,0)
 S LROOT(1,6001.02,LRIEN,.01)=$P(LRTMP,U)
"RTN","VBECDC00",140,0)
 F I=2:1:27 S LROOT(1,6001.02,LRIEN,I)=$P(LRTMP,U,I)
"RTN","VBECDC00",141,0)
 D UPDATE^DIE("E","LROOT(1)","")
"RTN","VBECDC00",142,0)
 K I,LRIEN,LROOT,LRTMP
"RTN","VBECDC00",143,0)
 Q
"RTN","VBECDC01")
0^1^B38136752
"RTN","VBECDC01",1,0)
VBECDC01 ;hoifo/gjc-data conversion & pre-implementation;Nov 21, 2002
"RTN","VBECDC01",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDC01",3,0)
 ;
"RTN","VBECDC01",4,0)
 ;Medical Device #:
"RTN","VBECDC01",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDC01",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDC01",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDC01",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDC01",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDC01",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDC01",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDC01",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDC01",13,0)
 ;regulations.
"RTN","VBECDC01",14,0)
 ;
"RTN","VBECDC01",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDC01",16,0)
 ;Call to $$GOTLOCAL^XMXAPIG is supported by IA: 3006
"RTN","VBECDC01",17,0)
 ;Call to $$GET1^DIQ is supported by IA: 2056
"RTN","VBECDC01",18,0)
 ;Call to $$FMTE^XLFDT is supported by IA: 10103
"RTN","VBECDC01",19,0)
 ;Call to $$NOW^XLFDT is supported by IA: 10103
"RTN","VBECDC01",20,0)
 ;
"RTN","VBECDC01",21,0)
EN(VBECCNV) ; entry point for both the pre-implementation and data
"RTN","VBECDC01",22,0)
 ; conversion.
"RTN","VBECDC01",23,0)
 ; Input: if VBECCNV evaluates to one, then the software
"RTN","VBECDC01",24,0)
 ;        executes data conversion logic.  If VBECCNV evaluates
"RTN","VBECDC01",25,0)
 ;        to zero, then the pre-implementation logic is executed.
"RTN","VBECDC01",26,0)
 ;
"RTN","VBECDC01",27,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,DUZ=.5:1,1:0) W !!?3,$C(7),"DUZ & DUZ(0) must be defined to an active user (not POSTMASTER) in order to",!?3,"proceed." Q
"RTN","VBECDC01",28,0)
 ;
"RTN","VBECDC01",29,0)
 ; initialize error trap
"RTN","VBECDC01",30,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDC01",31,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDC01",32,0)
 ;
"RTN","VBECDC01",33,0)
 ;If the data conversion process is selected to run, check the following
"RTN","VBECDC01",34,0)
 ;conditions:
"RTN","VBECDC01",35,0)
 ;
"RTN","VBECDC01",36,0)
 ; a) If none of the VistA data been mapped prior to the data conversion
"RTN","VBECDC01",37,0)
 ;    convey that information to the user and exit the data conversion
"RTN","VBECDC01",38,0)
 ; b) check if mapped data remains consistent with data from the parent
"RTN","VBECDC01",39,0)
 ;    (61.3 & 65.4) files.  If not, do not proceed with the
"RTN","VBECDC01",40,0)
 ;    conversion
"RTN","VBECDC01",41,0)
 ; c) check if the exported mail group has active local members (users
"RTN","VBECDC01",42,0)
 ;    checked for activity within the last seven days)
"RTN","VBECDC01",43,0)
 ; d) is there a process running that has not yet finished? If so, do
"RTN","VBECDC01",44,0)
 ;    not allow another process to start (data conv. or anomaly check)
"RTN","VBECDC01",45,0)
 ;
"RTN","VBECDC01",46,0)
 I VBECCNV,$$NOMAP^VBECDCU2() Q  ;condition a
"RTN","VBECDC01",47,0)
 I VBECCNV,$$EN^VBECDCHX() D  Q  ;condition b
"RTN","VBECDC01",48,0)
 .W !!?3,"Mapping errors were identified; data conversion terminated."
"RTN","VBECDC01",49,0)
 .Q
"RTN","VBECDC01",50,0)
 I '$$GOTLOCAL^XMXAPIG("VBECS DATA CONVERSION",7) D  Q  ;condition c
"RTN","VBECDC01",51,0)
 .W !!?3,"There must be at least one local user assigned to the VBECS"
"RTN","VBECDC01",52,0)
 .W !?3,"DATA CONVERSION Mail Group.  This user must have been actively"
"RTN","VBECDC01",53,0)
 .W !?3,"using VistA MailMan within the last seven (7) days.",$C(7)
"RTN","VBECDC01",54,0)
 .Q
"RTN","VBECDC01",55,0)
 ;
"RTN","VBECDC01",56,0)
 I +$O(^VBEC(6001,0)) S VBECST=$$INPROC()
"RTN","VBECDC01",57,0)
 I $L($G(VBECST)) D  K VBECST Q
"RTN","VBECDC01",58,0)
 .W !!,"The "_$S($P(VBECST,U,2)=1:"data conversion",1:"pre-implementation")_" has been started on: "_$$FMTE^XLFDT($P(VBECST,U,3),"1P")
"RTN","VBECDC01",59,0)
 .W !,"by: "_$$GET1^DIQ(200,+$P(VBECST,U),.01)_". This process must first complete"
"RTN","VBECDC01",60,0)
 .W !,"before the "_$S(VBECCNV=1:"data conversion",1:"pre-implementation")_" can be run."
"RTN","VBECDC01",61,0)
 .Q
"RTN","VBECDC01",62,0)
 I VBECCNV D  I $D(VBECSTP) K VBECSTP Q  ;Only ask for database on conversion
"RTN","VBECDC01",63,0)
  . W !!?3,"You must enter the name of the database "
"RTN","VBECDC01",64,0)
  . W !?3,"where the converted data will be loaded."
"RTN","VBECDC01",65,0)
  . W !!?3,"An invalid database name will cause a failure"
"RTN","VBECDC01",66,0)
  . W !?3,"when loading the data into VBECS."
"RTN","VBECDC01",67,0)
  . F  D  I $D(VBECSTP)!(VBECDBN]"") Q
"RTN","VBECDC01",68,0)
  . . W !!!,?3 R "VBECS Database Name: ",VBECDBN  I VBECDBN=""!(VBECDBN["^") S VBECDBN="^",VBECSTP="" W !!?3,"Invalid database name. Conversion stopped." Q
"RTN","VBECDC01",69,0)
  . . I VBECDBN?.E1C.E W !?4,"The database name cannot contain control characters.",!?4,"Please re-enter it." S VBECDBN=""
"RTN","VBECDC01",70,0)
  . . I VBECDBN?1N.E W !?4,"The database name cannot begin with a number.",!?4,"Please re-enter it." S VBECDBN=""
"RTN","VBECDC01",71,0)
  . . I $TR(VBECDBN,"_","")?.E1P.E W !?4,"The database name cannot contain punctuation except for an underscore.",!?4,"Please re-enter it." S VBECDBN=""
"RTN","VBECDC01",72,0)
 ;
"RTN","VBECDC01",73,0)
 I VBECCNV D  I $D(VBECSTP) K VBECSTP Q  ;Only ask for server on conversion
"RTN","VBECDC01",74,0)
  . W !!?3,"You must enter the name of the server "
"RTN","VBECDC01",75,0)
  . W !?3,"where the converted data will be loaded."
"RTN","VBECDC01",76,0)
  . W !!?3,"An invalid server name will cause a failure"
"RTN","VBECDC01",77,0)
  . W !?3,"when loading the data into VBECS."
"RTN","VBECDC01",78,0)
  . F  D  I $D(VBECSTP)!(VBECDBN1]"") Q
"RTN","VBECDC01",79,0)
  . . W !!!,?3 R "VBECS Server Name: ",VBECDBN1  I VBECDBN1=""!(VBECDBN1["^") S VBECDBN1="^",VBECSTP="" W !!?3,"Invalid server name. Conversion stopped." Q
"RTN","VBECDC01",80,0)
  . . I VBECDBN1?.E1C.E W !?4,"The server name cannot contain control characters.",!?4,"Please re-enter it." S VBECDBN1=""
"RTN","VBECDC01",81,0)
  . . I VBECDBN1?1N.E W !?4,"The server name cannot begin with a number.",!?4,"Please re-enter it." S VBECDBN1=""
"RTN","VBECDC01",82,0)
  . . I $TR(VBECDBN1,"_-","")?.E1P.E W !?4,"The server name cannot contain punctuation except for an underscore (_) or dash (-).",!?4,"Please re-enter it." S VBECDBN1=""
"RTN","VBECDC01",83,0)
 ;
"RTN","VBECDC01",84,0)
 K VBECST W @IOF ;clear screen of past dialogue
"RTN","VBECDC01",85,0)
 S (VBECDESC,ZTDESC)="VBECS "_$S(VBECCNV=1:"data conversion",1:"pre-implementation")
"RTN","VBECDC01",86,0)
 W !?3,"The "_ZTDESC_" process will take some time to complete.",!?3,"It would be best if this process was run in the background.",!
"RTN","VBECDC01",87,0)
 ;
"RTN","VBECDC01",88,0)
 ; file the start time, process type, & user information into file 6001
"RTN","VBECDC01",89,0)
 S VBECIEN=$$UP6001S^VBECDC02(+$E($$NOW^XLFDT(),1,12),VBECCNV,DUZ)
"RTN","VBECDC01",90,0)
 I VBECIEN'>0 D  Q
"RTN","VBECDC01",91,0)
 .W !!?3,"Error filing "_ZTDESC_" statistics.",$C(7) K ZTDESC,VBECIEN
"RTN","VBECDC01",92,0)
 .Q
"RTN","VBECDC01",93,0)
 ; kick off the task, queued or real-time
"RTN","VBECDC01",94,0)
 S ZTRTN="START^VBECDC00",ZTSAVE("DUZ")="",ZTSAVE("VBECCNV")="",ZTSAVE("VBECDBN")="",ZTSAVE("VBECDBN1")=""
"RTN","VBECDC01",95,0)
 S ZTSAVE("VBECIEN")="",ZTIO="" D ^%ZTLOAD
"RTN","VBECDC01",96,0)
 ; display task number for user reference
"RTN","VBECDC01",97,0)
 I +$G(ZTSK) W !!,VBECDESC_" task number: "_ZTSK,!
"RTN","VBECDC01",98,0)
 E  D UP6001P^VBECDC02(VBECIEN) ;user exits prematurely
"RTN","VBECDC01",99,0)
 K VBEC,VBECDESC,VBECIEN,ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTSK
"RTN","VBECDC01",100,0)
 Q
"RTN","VBECDC01",101,0)
 ;
"RTN","VBECDC01",102,0)
STOPPED ; entry point executed when the user stops a task with TaskMan
"RTN","VBECDC01",103,0)
 ; if the user stopped the process:
"RTN","VBECDC01",104,0)
 ; 1-DATA CONVERSION ONLY delete all data in all related ^TMP globals
"RTN","VBECDC01",105,0)
 ; 2-DATA CONVERSION ONLY set options back 'in-order'
"RTN","VBECDC01",106,0)
 ; 3-alert the user to the stoppage
"RTN","VBECDC01",107,0)
 ; 4-delete the record from the VBECS DATA
"RTN","VBECDC01",108,0)
 ; INTEGRITY/CONVERSION STATISTICS (#6001) file.
"RTN","VBECDC01",109,0)
 ;
"RTN","VBECDC01",110,0)
 ; Variables used within this function:
"RTN","VBECDC01",111,0)
 ;  VBECCNV-indicates if the data conversion (1) or data anomalies check
"RTN","VBECDC01",112,0)
 ;          (0) is running
"RTN","VBECDC01",113,0)
 ;      DUZ-the internal entry number of the person resposible for this
"RTN","VBECDC01",114,0)
 ;          task
"RTN","VBECDC01",115,0)
 ;  VBECIEN-is the IEN of the record in the VBECS DATA
"RTN","VBECDC01",116,0)
 ;          INTEGRITY/CONVERSION STATISTICS (#6001) file
"RTN","VBECDC01",117,0)
 ; VBECANOM-flag to indicate if anomalies exist (zero if no anomalies,
"RTN","VBECDC01",118,0)
 ;          some number greater than zero if anomalies exist.)
"RTN","VBECDC01",119,0)
 ;
"RTN","VBECDC01",120,0)
 I VBECCNV D
"RTN","VBECDC01",121,0)
 .D DELTMP($J) ;delete data in temporary globals ^TMP(,$J
"RTN","VBECDC01",122,0)
 .D EN^VBECDC19(0) ;set options back in order, clear write nodes
"RTN","VBECDC01",123,0)
 .Q
"RTN","VBECDC01",124,0)
 ;next line performed for the anomaly check & data conversion
"RTN","VBECDC01",125,0)
 D ALERT^VBECDCU(DUZ,VBECCNV,VBECANOM,"S"),UP6001P^VBECDC02(VBECIEN)
"RTN","VBECDC01",126,0)
 Q
"RTN","VBECDC01",127,0)
 ;
"RTN","VBECDC01",128,0)
INPROC() ;is there a current data conversion or anomaly process on
"RTN","VBECDC01",129,0)
 ;file that has not completed? If so, prevent this current request
"RTN","VBECDC01",130,0)
 ;from starting (collision errors)
"RTN","VBECDC01",131,0)
 N VBECI,VBEC0,VBECSTOP,VBECX
"RTN","VBECDC01",132,0)
 S VBECI=$C(32),VBECSTOP=0,VBECX=""
"RTN","VBECDC01",133,0)
 F  S VBECI=$O(^VBEC(6001,VBECI),-1) Q:'VBECI  D  Q:VBECSTOP
"RTN","VBECDC01",134,0)
 .S VBEC0=$G(^VBEC(6001,VBECI,0))
"RTN","VBECDC01",135,0)
 .I $P(VBEC0,U,3)="" S VBECX=$P(VBEC0,U,4)_U_$P(VBEC0,U,2)_U_$P(VBEC0,U)
"RTN","VBECDC01",136,0)
 .I  S VBECSTOP=1
"RTN","VBECDC01",137,0)
 .Q
"RTN","VBECDC01",138,0)
 Q VBECX
"RTN","VBECDC01",139,0)
 ;
"RTN","VBECDC01",140,0)
DELTMP(DOLLARJ) ;Delete all Blood Bank Data in Temporary Globals
"RTN","VBECDC01",141,0)
 ;
"RTN","VBECDC01",142,0)
 N X S X="VBEC FINI"
"RTN","VBECDC01",143,0)
 F  S VBECX=$O(^TMP(VBECX)) Q:VBECX=""!(VBECX]"VBEC63 zzz")  D
"RTN","VBECDC01",144,0)
 .K ^TMP(VBECX,DOLLARJ)
"RTN","VBECDC01",145,0)
 .Q
"RTN","VBECDC01",146,0)
 Q
"RTN","VBECDC01",147,0)
 ;
"RTN","VBECDC02")
0^2^B4904086
"RTN","VBECDC02",1,0)
VBECDC02 ;hoifo/gjc-data conversion & pre-implementation;Nov 21, 2002
"RTN","VBECDC02",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDC02",3,0)
 ;
"RTN","VBECDC02",4,0)
 ;Medical Device #:
"RTN","VBECDC02",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDC02",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDC02",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDC02",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDC02",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDC02",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDC02",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDC02",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDC02",13,0)
 ;regulations.
"RTN","VBECDC02",14,0)
 ;
"RTN","VBECDC02",15,0)
 ;Call to FILE^DIE is supported by IA: 2053
"RTN","VBECDC02",16,0)
 ;Call to UPDATE^DIE is supported by IA: 2053
"RTN","VBECDC02",17,0)
 ;
"RTN","VBECDC02",18,0)
UP6001F(VBECIEN,LRFINI) ; file the date/time the process finished running for
"RTN","VBECDC02",19,0)
 ; a record in the VBECS DATA INTEGRITY/CONVERSION STATISTICS (#6001)
"RTN","VBECDC02",20,0)
 ; file.
"RTN","VBECDC02",21,0)
 ; input: VBECIEN-the IEN of the record being updated
"RTN","VBECDC02",22,0)
 ;        LRFINI-the date/time the process completed
"RTN","VBECDC02",23,0)
 K LRFDA S LRFDA(6001,VBECIEN_",",.03)=LRFINI
"RTN","VBECDC02",24,0)
 D FILE^DIE("","LRFDA","") K LRFDA
"RTN","VBECDC02",25,0)
 Q
"RTN","VBECDC02",26,0)
 ;
"RTN","VBECDC02",27,0)
UP6001P(VBECIEN) ; delete a VBECS DATA INTEGRITY/CONVERSION STATISTICS
"RTN","VBECDC02",28,0)
 ; file (#6001) record
"RTN","VBECDC02",29,0)
 ; input: VBECIEN-the IEN of the record (file: 6001) being deleted
"RTN","VBECDC02",30,0)
 K LRFDA S LRFDA(6001,VBECIEN_",",.01)="@"
"RTN","VBECDC02",31,0)
 D FILE^DIE("","LRFDA","") K LRFDA
"RTN","VBECDC02",32,0)
 Q
"RTN","VBECDC02",33,0)
 ;
"RTN","VBECDC02",34,0)
LOGEXC(VBECIEN,LRARY) ; log the error the error and relevant data
"RTN","VBECDC02",35,0)
 ; Input: VBECIEN-IEN ('D0') of record in file 6001 (top-level)
"RTN","VBECDC02",36,0)
 ;        LRARY-local array subscripted by...
"RTN","VBECDC02",37,0)
 ;        .01-file navigated from
"RTN","VBECDC02",38,0)
 ;        .02-the internal entry number of the file navigated from
"RTN","VBECDC02",39,0)
 ;        .03-file navigated to
"RTN","VBECDC02",40,0)
 ;        .04-the internal entry number of the file navigated from
"RTN","VBECDC02",41,0)
 ;        .05-Lab Data patient identifier (1st of a possible two)
"RTN","VBECDC02",42,0)
 ;        .06-Lab Data patient identifier (2nd of a possible two)
"RTN","VBECDC02",43,0)
 ;        .07-duplicated component (blood product)
"RTN","VBECDC02",44,0)
 ;        .08-duplicated component id (unit id)
"RTN","VBECDC02",45,0)
 ;        .09-error message code (see ERRMSG subroutine)
"RTN","VBECDC02",46,0)
 ;
"RTN","VBECDC02",47,0)
 ; Fields .05-.08 identify the condition where the same patient or
"RTN","VBECDC02",48,0)
 ; different patients have the same component/component id data
"RTN","VBECDC02",49,0)
 ; associated with a transfusion record
"RTN","VBECDC02",50,0)
 ;
"RTN","VBECDC02",51,0)
 K LRD1,LRIEN,LROOT S LRX=0
"RTN","VBECDC02",52,0)
 S LRD1=$O(^VBEC(6001,VBECIEN,"ERR",$C(32)),-1)
"RTN","VBECDC02",53,0)
 S:LRD1="" LRD1=1 ;first instance of anomaly
"RTN","VBECDC02",54,0)
 S LRIEN="+"_LRD1_","_VBECIEN_","
"RTN","VBECDC02",55,0)
 F  S LRX=$O(LRARY(LRX)) Q:'LRX  S LROOT(1,6001.01,LRIEN,LRX)=LRARY(LRX)
"RTN","VBECDC02",56,0)
 D UPDATE^DIE("","LROOT(1)","")
"RTN","VBECDC02",57,0)
 K LRD1,LRIEN,LROOT,LRX
"RTN","VBECDC02",58,0)
 Q
"RTN","VBECDC02",59,0)
 ;
"RTN","VBECDC02",60,0)
UP6001S(LRSTRT,LRPROC,LRWHO) ; Update the VBECS DATA INTEGRITY/CONVERSION
"RTN","VBECDC02",61,0)
 ; STATISTICS (#6001) file.
"RTN","VBECDC02",62,0)
 ;  input: LRSTRT=timestamp of when the process started
"RTN","VBECDC02",63,0)
 ;         LRPROC=identify the process, 1 for data conversion
"RTN","VBECDC02",64,0)
 ;                0 for data validation
"RTN","VBECDC02",65,0)
 ;         LRWHO=user who is responsible for the process
"RTN","VBECDC02",66,0)
 ; output: LRY(1)=ien of the newly created record in file 6001
"RTN","VBECDC02",67,0)
 ;
"RTN","VBECDC02",68,0)
 K LRFDA N LRY
"RTN","VBECDC02",69,0)
 S LRFDA(1,6001,"+1,",.01)=LRSTRT,LRFDA(1,6001,"+1,",.02)=LRPROC,LRFDA(1,6001,"+1,",.04)=LRWHO
"RTN","VBECDC02",70,0)
 D UPDATE^DIE("","LRFDA(1)","LRY") K LRFDA
"RTN","VBECDC02",71,0)
 Q $G(LRY(1))
"RTN","VBECDC02",72,0)
 ;
"RTN","VBECDC02",73,0)
ERRMSG ; standard error messages
"RTN","VBECDC02",74,0)
 ;;1;Laboratory Reference (#63) field, Patient (#2) file data corruption
"RTN","VBECDC02",75,0)
 ;;2;Patient mismatch between files: Patient (#2) & Lab Data (#63)
"RTN","VBECDC02",76,0)
 ;;3;Duplicate Patient Merge indicated in Patient Name
"RTN","VBECDC02",77,0)
 ;;;
"RTN","VBECDC19")
0^19^B52486759
"RTN","VBECDC19",1,0)
VBECDC19 ;hoifo/gjc-utilities for VistA Blood Bank options (#19);Nov 21, 2002
"RTN","VBECDC19",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDC19",3,0)
 ;
"RTN","VBECDC19",4,0)
 ;Medical Device #:
"RTN","VBECDC19",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDC19",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDC19",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDC19",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDC19",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDC19",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDC19",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDC19",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDC19",13,0)
 ;regulations.
"RTN","VBECDC19",14,0)
 ;
"RTN","VBECDC19",15,0)
 ;Call to FILE^DIE is supported by IA: 2053
"RTN","VBECDC19",16,0)
 ;Call to $$IENS^DILF is supported by IA: 2054
"RTN","VBECDC19",17,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDC19",18,0)
 ;Call to OUT^XPDMENU is supported by IA: 1157
"RTN","VBECDC19",19,0)
 ;Call to BMES^XPDUTL is supported by IA: 10141
"RTN","VBECDC19",20,0)
 ;Setting the "DI" node in the data dictionary supported by IA: 3805
"RTN","VBECDC19",21,0)
 ;Setting the 'write access' (9) node in the Agglutination Strength File
"RTN","VBECDC19",22,0)
 ; (62.55) data dictionary is supported by IA: 4468
"RTN","VBECDC19",23,0)
 ;Setting the 'write access' (9) node in the Lab Data (63) file data
"RTN","VBECDC19",24,0)
 ; dictionary is supported by IA: 4469
"RTN","VBECDC19",25,0)
 ;
"RTN","VBECDC19",26,0)
EN(VBECFLG) ;
"RTN","VBECDC19",27,0)
 ;input: VBECFLG=1 set options 'out-of-order', else place options
"RTN","VBECDC19",28,0)
 ;       in order.
"RTN","VBECDC19",29,0)
 ;
"RTN","VBECDC19",30,0)
 ; call to OUT^XPDMENU(OPT,TXT) supported by IA: 1157
"RTN","VBECDC19",31,0)
 ;
"RTN","VBECDC19",32,0)
 ; Need to check if this option is independently invoked, or executed
"RTN","VBECDC19",33,0)
 ; during the data conversion process.  If independent, ask the user for
"RTN","VBECDC19",34,0)
 ; his/her real intentions.  VBECECHO is set in the Entry/Exit Action
"RTN","VBECDC19",35,0)
 ; fields in the option file for options: VBEC BB COMPONENTS ENABLE &
"RTN","VBECDC19",36,0)
 ; VBEC BB COMPONENTS DISABLE
"RTN","VBECDC19",37,0)
 ;
"RTN","VBECDC19",38,0)
 I $D(VBECECHO)#2 D
"RTN","VBECDC19",39,0)
 .S X=$S(VBECFLG=1:"dis",1:"en")_"able"
"RTN","VBECDC19",40,0)
 .S DIR(0)="Y",DIR("A",1)=" ",DIR("A",2)="Are you sure you want to "_X_" specific VistA Blood Bank option, files,",DIR("A")="and fields"
"RTN","VBECDC19",41,0)
 .S DIR("B")="No",DIR("?")="Enter 'Yes' to "_X_" selected components, or 'No' to exit without taking action." D ^DIR
"RTN","VBECDC19",42,0)
 .S:$D(DIRUT) VBECYN=0
"RTN","VBECDC19",43,0)
 .S:'$D(DIRUT) VBECYN=+Y ;1 for yes, 0 for no
"RTN","VBECDC19",44,0)
 .K DIR,DIROUT,DIRUT,DTOUT,DUOUT,VBECACTN,X,Y
"RTN","VBECDC19",45,0)
 .Q
"RTN","VBECDC19",46,0)
 I $G(VBECYN)=0 K VBECYN Q
"RTN","VBECDC19",47,0)
 I VBECFLG,$P($G(^VBEC(6009,65.5,0)),"^",3)="Y" W:$D(VBECECHO)#2 !,"Options, files, and fields have already been disabled." Q  ;RLM 10/31/05
"RTN","VBECDC19",48,0)
 ;
"RTN","VBECDC19",49,0)
 S VBECMSG="finished setting specific VistA Blood Bank options "_$S(VBECFLG=1:"'Out-of-Order'",1:"'In Order'")_"."
"RTN","VBECDC19",50,0)
 S I=0 F  S I=$O(^VBEC(6003,I)) Q:'I  D
"RTN","VBECDC19",51,0)
 .S OPT=$P($G(^VBEC(6003,I,0)),U)
"RTN","VBECDC19",52,0)
 .Q:OPT="LRBLAD"!(OPT="LRBLPC")!(OPT="LRBLSI")
"RTN","VBECDC19",53,0)
 .S TXT=$S(VBECFLG=1:"out-of-order",1:"@")
"RTN","VBECDC19",54,0)
 .D OUT^XPDMENU(OPT,TXT)
"RTN","VBECDC19",55,0)
 .Q
"RTN","VBECDC19",56,0)
 D BMES^XPDUTL(VBECMSG)
"RTN","VBECDC19",57,0)
 K I,OPT,TXT,VBECMSG
"RTN","VBECDC19",58,0)
 D EN1(VBECFLG) ; set file level and field level access
"RTN","VBECDC19",59,0)
 Q
"RTN","VBECDC19",60,0)
 ;
"RTN","VBECDC19",61,0)
EN1(VBECFLG) ;
"RTN","VBECDC19",62,0)
 ;input: VBECFLG=1 disable sub-file data dictionary (write access)
"RTN","VBECDC19",63,0)
 ;       or set the file restriction node ^DD(file#,0,"DI")
"RTN","VBECDC19",64,0)
 ;
"RTN","VBECDC19",65,0)
 ;       VBECFLG=0 enable sub-file data dictionary nodes (write access)
"RTN","VBECDC19",66,0)
 ;                 or kill the file restriction node ^DD(file#,0,"DI")
"RTN","VBECDC19",67,0)
 ;
"RTN","VBECDC19",68,0)
 ; Note: this routine called from VBECDC19
"RTN","VBECDC19",69,0)
 ;
"RTN","VBECDC19",70,0)
 ; Note: Using Integration Agreement# 3805 to set and kill the
"RTN","VBECDC19",71,0)
 ; ^DD(file#,0,"DI") node.
"RTN","VBECDC19",72,0)
 ;
"RTN","VBECDC19",73,0)
 ;
"RTN","VBECDC19",74,0)
 I VBECFLG,$P($G(^VBEC(6009,65.5,0)),"^",3)="Y" W:$D(VBECECHO)#2 !,"Options, files, and fields have already been disabled." Q  ;RLM 10/31/05
"RTN","VBECDC19",75,0)
 N VBECIEN S GG=0,U="^",VBECMSG="Finished "_$S(VBECFLG=1:"dis",1:"en")_"abling specific VistA Blood Bank components."
"RTN","VBECDC19",76,0)
 F  S GG=$O(^VBEC(6009,GG)) Q:'GG  D
"RTN","VBECDC19",77,0)
 .;
"RTN","VBECDC19",78,0)
 .; need to check if only whole file restrictions apply, or if a
"RTN","VBECDC19",79,0)
 .; sub-file/field levels are involved
"RTN","VBECDC19",80,0)
 .;
"RTN","VBECDC19",81,0)
 .I +$O(^VBEC(6009,GG,"DD",0)) D
"RTN","VBECDC19",82,0)
 ..;
"RTN","VBECDC19",83,0)
 ..; sub-file/field levels exist
"RTN","VBECDC19",84,0)
 ..;
"RTN","VBECDC19",85,0)
 ..S HH=0 F  S HH=$O(^VBEC(6009,GG,"DD",HH)) Q:'HH  D
"RTN","VBECDC19",86,0)
 ...S VBECIEN(1)=GG,VBECIEN=HH,VBECIENS=$$IENS^DILF(.VBECIEN)
"RTN","VBECDC19",87,0)
 ...I VBECFLG=1 D
"RTN","VBECDC19",88,0)
 ....;
"RTN","VBECDC19",89,0)
 ....; 1) obtain sub-file and field information
"RTN","VBECDC19",90,0)
 ....; 2) set pre-conv. field write access to pre-conv. value
"RTN","VBECDC19",91,0)
 ....; 3) set pst-conv. field write access to pst-conv. value
"RTN","VBECDC19",92,0)
 ....; 4) hardset write node access
"RTN","VBECDC19",93,0)
 ....; 5) file data tracking pre/post conversion field level values
"RTN","VBECDC19",94,0)
 ....;
"RTN","VBECDC19",95,0)
 ....S VBECNODE=$G(^VBEC(6009,GG,"DD",HH,0))
"RTN","VBECDC19",96,0)
 ....S VBECFLD=$P(VBECNODE,U,2),VBECFLE=$P(VBECNODE,U) ;(1)
"RTN","VBECDC19",97,0)
 ....S VBECB4=$G(^DD(VBECFLE,VBECFLD,9))
"RTN","VBECDC19",98,0)
 ....S:VBECB4]"" VBECFDA(6009.01,VBECIENS,1)=VBECB4 ;(2)
"RTN","VBECDC19",99,0)
 ....S VBECFDA(6009.01,VBECIENS,2)="^" ;(3)
"RTN","VBECDC19",100,0)
 ....S ^DD(VBECFLE,VBECFLD,9)="^" ;(4)
"RTN","VBECDC19",101,0)
 ....D FILE^DIE("","VBECFDA") ;(5)
"RTN","VBECDC19",102,0)
 ....Q
"RTN","VBECDC19",103,0)
 ...E  D
"RTN","VBECDC19",104,0)
 ....;
"RTN","VBECDC19",105,0)
 ....; 1) obtain sub-file and field information
"RTN","VBECDC19",106,0)
 ....; 2) set pre-conv. field to pre-conv. write access value
"RTN","VBECDC19",107,0)
 ....;    2A) if pre-conv value was null delete data in the field
"RTN","VBECDC19",108,0)
 ....;    2B) if pre-conv value was not null restore the field to
"RTN","VBECDC19",109,0)
 ....;        the pre-conv value of the field
"RTN","VBECDC19",110,0)
 ....; 3) set write access node to pre-conv. value (if any)
"RTN","VBECDC19",111,0)
 ....; 4) kill write access data dictionary node if no pre-conv. value
"RTN","VBECDC19",112,0)
 ....; 5) set pst-conv write access field to null
"RTN","VBECDC19",113,0)
 ....; 6) file data tracking pre-conversion field level values
"RTN","VBECDC19",114,0)
 ....;
"RTN","VBECDC19",115,0)
 ....S VBECNODE=$G(^VBEC(6009,GG,"DD",HH,0))
"RTN","VBECDC19",116,0)
 ....S VBECFLD=$P(VBECNODE,U,2),VBECFLE=$P(VBECNODE,U) ;(1)
"RTN","VBECDC19",117,0)
 ....S VBECB4=$G(^VBEC(6009,GG,"DD",HH,"PREW"))
"RTN","VBECDC19",118,0)
 ....S:VBECB4="" VBECFDA(6009.01,VBECIENS,1)="@" ;(2A)
"RTN","VBECDC19",119,0)
 ....S:VBECB4]"" VBECFDA(6009.01,VBECIENS,1)=VBECB4 ;(2B)
"RTN","VBECDC19",120,0)
 ....S:VBECB4]"" ^DD(VBECFLE,VBECFLD,9)=VBECB4 ;(3)
"RTN","VBECDC19",121,0)
 ....K:VBECB4="" ^DD(VBECFLE,VBECFLD,9) ;(4)
"RTN","VBECDC19",122,0)
 ....S VBECFDA(6009.01,VBECIENS,2)="@" ;(5)
"RTN","VBECDC19",123,0)
 ....D FILE^DIE("","VBECFDA") ;(6)
"RTN","VBECDC19",124,0)
 ....Q
"RTN","VBECDC19",125,0)
 ...K VBECB4,VBECFDA,VBECFLD,VBECFLE,VBECIENS,VBECNODE
"RTN","VBECDC19",126,0)
 ...Q
"RTN","VBECDC19",127,0)
 ..K HH
"RTN","VBECDC19",128,0)
 ..Q
"RTN","VBECDC19",129,0)
 .;
"RTN","VBECDC19",130,0)
 .; whole file restriction check
"RTN","VBECDC19",131,0)
 .;
"RTN","VBECDC19",132,0)
 .I VBECFLG=1 D
"RTN","VBECDC19",133,0)
 ..;
"RTN","VBECDC19",134,0)
 ..; Disabling file access, or imposing file restrictions
"RTN","VBECDC19",135,0)
 ..; 1) find the file restriction value before the data conversion
"RTN","VBECDC19",136,0)
 ..;    (no pre-data conversion file level restrictions anticipated)
"RTN","VBECDC19",137,0)
 ..;       1A) if pre-conv value was not null set the field to the
"RTN","VBECDC19",138,0)
 ..;           pre-conv value of the field
"RTN","VBECDC19",139,0)
 ..; 2) hard set the 2nd piece of ^DD(File#,0,"DI") to "Y"
"RTN","VBECDC19",140,0)
 ..; 3) Set pst-conversion file restriction value,'Y' into the correct
"RTN","VBECDC19",141,0)
 ..;    field (#.03)
"RTN","VBECDC19",142,0)
 ..; 4) file the data.
"RTN","VBECDC19",143,0)
 ..;
"RTN","VBECDC19",144,0)
 ..Q:$D(^VBEC(6009,GG,"DD"))  ;RLM 10/31/05
"RTN","VBECDC19",145,0)
 ..S VBECB4=$P($G(^DD(GG,0,"DI")),U,2) ;(1)
"RTN","VBECDC19",146,0)
 ..S:VBECB4]"" VBECFDA(6009,GG_",",.02)=VBECB4 ;(1A)
"RTN","VBECDC19",147,0)
 ..S $P(^DD(GG,0,"DI"),U,2)="Y" ;(2)
"RTN","VBECDC19",148,0)
 ..S VBECFDA(6009,GG_",",.03)="Y" ;(3)
"RTN","VBECDC19",149,0)
 ..D FILE^DIE("","VBECFDA") ;(4)
"RTN","VBECDC19",150,0)
 ..Q
"RTN","VBECDC19",151,0)
 .E  D
"RTN","VBECDC19",152,0)
 ..;
"RTN","VBECDC19",153,0)
 ..; Enabling file access, or lifting the file restriction
"RTN","VBECDC19",154,0)
 ..; 1) find the file restriction value before the data conversion
"RTN","VBECDC19",155,0)
 ..;    (no file level restrictions are expected on these files prior
"RTN","VBECDC19",156,0)
 ..;    to the data conversion).
"RTN","VBECDC19",157,0)
 ..; 2) restore the data dictionary to its pre-conversion state (if
"RTN","VBECDC19",158,0)
 ..;    ^DD(GG,0,"DI") didn't exist prior to the conversion, it will
"RTN","VBECDC19",159,0)
 ..;    after the restore. The key fact is that the first & second
"RTN","VBECDC19",160,0)
 ..;    pieces of the "DI" node will be null)
"RTN","VBECDC19",161,0)
 ..; 3) if file restriction exists, track in the pre-conv. value field
"RTN","VBECDC19",162,0)
 ..; 4) update the pre-conversion restriction tracking field to null
"RTN","VBECDC19",163,0)
 ..; 5) update the post-conversion restriction tracking field to null
"RTN","VBECDC19",164,0)
 ..; 6) file the data into the file
"RTN","VBECDC19",165,0)
 ..;
"RTN","VBECDC19",166,0)
 ..S VBECB4=$P(^VBEC(6009,GG,0),U,2) ;(1)
"RTN","VBECDC19",167,0)
 ..S $P(^DD(GG,0,"DI"),U,2)=VBECB4 ;(2)
"RTN","VBECDC19",168,0)
 ..S:VBECB4="" VBECFDA(6009,GG_",",.02)="@" ;(3)
"RTN","VBECDC19",169,0)
 ..S:VBECB4]"" VBECFDA(6009,GG_",",.02)=VBECB4 ;(4)
"RTN","VBECDC19",170,0)
 ..S VBECFDA(6009,GG_",",.03)="@" ;(5)
"RTN","VBECDC19",171,0)
 ..D FILE^DIE("","VBECFDA") ;(6)
"RTN","VBECDC19",172,0)
 ..Q
"RTN","VBECDC19",173,0)
 .K VBECB4,VBECFDA
"RTN","VBECDC19",174,0)
 .Q
"RTN","VBECDC19",175,0)
 D BMES^XPDUTL(VBECMSG)
"RTN","VBECDC19",176,0)
 K GG,VBECMSG
"RTN","VBECDC19",177,0)
 Q
"RTN","VBECDC19",178,0)
 ;
"RTN","VBECDCDC")
0^23^B30473665
"RTN","VBECDCDC",1,0)
VBECDCDC ;hoifo/gjc-display data conversion statistics;Nov 21, 2002
"RTN","VBECDCDC",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCDC",3,0)
 ;
"RTN","VBECDCDC",4,0)
 ;Medical Device #:
"RTN","VBECDCDC",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCDC",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCDC",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCDC",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCDC",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCDC",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCDC",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCDC",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCDC",13,0)
 ;regulations.
"RTN","VBECDCDC",14,0)
 ;
"RTN","VBECDCDC",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCDC",16,0)
 ;Call to $$S^%ZTLOAD is supported by IA: 10063
"RTN","VBECDCDC",17,0)
 ;Call to $$EXTERNAL^DILFD is supported by IA: 2055
"RTN","VBECDCDC",18,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCDC",19,0)
 ;Call to $$FMTE^XLFDT is supported by IA: 10103
"RTN","VBECDCDC",20,0)
 ;Call to $$CJ^XLFSTR is supported by IA: 10104
"RTN","VBECDCDC",21,0)
 ;Call to EN^XUTMDEVQ is supported by IA: 1519
"RTN","VBECDCDC",22,0)
 ;Call to ^DIC is supported by IA: 10006
"RTN","VBECDCDC",23,0)
 ;Call to $$DT^XLFDT is supported by IA: 10103
"RTN","VBECDCDC",24,0)
 ;
"RTN","VBECDCDC",25,0)
EN ;entry point for data conversion report.  this is an evocable entry
"RTN","VBECDCDC",26,0)
 ;point for the option: VBEC PRINT SQL/VISTA MAPPINGS.
"RTN","VBECDCDC",27,0)
 ;
"RTN","VBECDCDC",28,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,DUZ=.5:1,1:0) W !!?3,$C(7),"DUZ & DUZ(0) must be defined to an active user (not POSTMASTER) in order to",!?3,"proceed." Q
"RTN","VBECDCDC",29,0)
 ;
"RTN","VBECDCDC",30,0)
 ; initialize the error trap
"RTN","VBECDCDC",31,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCDC",32,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCDC",33,0)
 ;
"RTN","VBECDCDC",34,0)
 S DIC="^VBEC(6001,",DIC(0)="QEANZ",DIC("A")="Select the data conversion event date/time: ",DIC("S")="I $P(^(0),""^"",2)" D ^DIC
"RTN","VBECDCDC",35,0)
 I $D(DTOUT)#2!($D(DUOUT)#2)!(+Y'>0) K DIC,DTOUT,DUOUT,X,Y Q
"RTN","VBECDCDC",36,0)
 S VBECIEN=+Y ;data conversion record ien
"RTN","VBECDCDC",37,0)
 S VBECY0=Y(0),VBECY00=Y(0,0)
"RTN","VBECDCDC",38,0)
 K DIC,X,Y
"RTN","VBECDCDC",39,0)
 ;
"RTN","VBECDCDC",40,0)
 S DIR(0)="S^B:Both Individual & Summary;I:Individual Records;S:Summary"
"RTN","VBECDCDC",41,0)
 S DIR("A")="Enter Data Conversion statistics report type",DIR("B")="Summary"
"RTN","VBECDCDC",42,0)
 S DIR("?",1)="Enter 'B' to obtain both individual and overall data element counts"
"RTN","VBECDCDC",43,0)
 S DIR("?",2)="Enter 'I' to obtain individual data element counts"
"RTN","VBECDCDC",44,0)
 S DIR("?",3)="Enter 'S' to obtain overall data element counts"
"RTN","VBECDCDC",45,0)
 S DIR("?")="Enter '^' to stop." D ^DIR K DIR
"RTN","VBECDCDC",46,0)
 I $D(DIRUT) K DIROUT,DIRUT,DTOUT,DUOUT,X,Y D KILL Q
"RTN","VBECDCDC",47,0)
 S VBECTY=Y ;'B' for both, 'S' for summary only, 'I' for individual recs
"RTN","VBECDCDC",48,0)
 ;
"RTN","VBECDCDC",49,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","VBECDCDC",50,0)
 ;
"RTN","VBECDCDC",51,0)
 S VBECR="START^VBECDCDC"
"RTN","VBECDCDC",52,0)
 F I="VBECIEN","VBECTY","VBECY0","VBECY00" S VBECS(I)=""
"RTN","VBECDCDC",53,0)
 K I S VBECD="VBECS display current data conversion statistics"
"RTN","VBECDCDC",54,0)
 S VBECZ="MQ" D EN^XUTMDEVQ(VBECR,VBECD,.VBECS,,1)
"RTN","VBECDCDC",55,0)
 I +$G(ZTSK)>0 W !!,"Task Number: "_ZTSK,!
"RTN","VBECDCDC",56,0)
 ;
"RTN","VBECDCDC",57,0)
KILL ;clean up symbol table, exit
"RTN","VBECDCDC",58,0)
 K VBECD,VBECIEN,VBECR,VBECTY,VBECY0,VBECY00,VBECZ
"RTN","VBECDCDC",59,0)
 Q
"RTN","VBECDCDC",60,0)
 ;
"RTN","VBECDCDC",61,0)
START ;start the process of displaying how many specific data elements were
"RTN","VBECDCDC",62,0)
 ;FTP'ed by the SQL Server process for the VBECS data conversion
"RTN","VBECDCDC",63,0)
 ;
"RTN","VBECDCDC",64,0)
 S:$D(ZTQUEUED) ZTREQ="@" S:U'="^" U="^"
"RTN","VBECDCDC",65,0)
 K ^TMP("VBEC TOTALS",$J) S $P(^TMP("VBEC TOTALS",$J),"0^",28)=""
"RTN","VBECDCDC",66,0)
 S VBECPG=1,$P(VBECLN,"-",(IOM+1))="",VBECTDAY=$$FMTE^XLFDT($$DT^XLFDT(),"1P")
"RTN","VBECDCDC",67,0)
 S VBECDCFN=$$FMTE^XLFDT($E($P(VBECY0,U,3),1,12),1)
"RTN","VBECDCDC",68,0)
 S VBECUSER=$$EXTERNAL^DILFD(6001,.04,,$P(VBECY0,U,4))
"RTN","VBECDCDC",69,0)
 S (VBECIEN1,VBECNT,VBECXIT)=0 D HDR
"RTN","VBECDCDC",70,0)
 F  S VBECIEN1=$O(^VBEC(6001,VBECIEN,"TOT",VBECIEN1)) Q:VBECIEN1'>0  D  Q:VBECXIT
"RTN","VBECDCDC",71,0)
 .S VBEC0=$G(^VBEC(6001,VBECIEN,"TOT",VBECIEN1,0)) Q:VBEC0=""
"RTN","VBECDCDC",72,0)
 .S VBECNT=VBECNT+1
"RTN","VBECDCDC",73,0)
 .I VBECNT#500=0 I $$S^%ZTLOAD() S (ZTSTOP,VBECXIT)=1 Q:VBECXIT
"RTN","VBECDCDC",74,0)
 .D:VBECTY'="S" PRINT(VBEC0) Q:VBECXIT
"RTN","VBECDCDC",75,0)
 .F VBECI=1:1:27 D
"RTN","VBECDCDC",76,0)
 ..S:VBECI'>2 $P(^TMP("VBEC TOTALS",$J),U,VBECI)=$P(^TMP("VBEC TOTALS",$J),U,VBECI)+1
"RTN","VBECDCDC",77,0)
 ..S:VBECI>2 $P(^TMP("VBEC TOTALS",$J),U,VBECI)=$P(^TMP("VBEC TOTALS",$J),U,VBECI)+$P(VBEC0,U,VBECI)
"RTN","VBECDCDC",78,0)
 ..Q
"RTN","VBECDCDC",79,0)
 .Q
"RTN","VBECDCDC",80,0)
 W:'VBECNT !,$$CJ^XLFSTR("*** No Records To Print ***",IOM)
"RTN","VBECDCDC",81,0)
 I VBECNT,(VBECTY'="I") D
"RTN","VBECDCDC",82,0)
 .W:VBECTY="B" ! ;need the additional line feed to separate data
"RTN","VBECDCDC",83,0)
 .W !,$$CJ^XLFSTR("Total number of data elements converted",IOM)
"RTN","VBECDCDC",84,0)
 .D PRINT(^TMP("VBEC TOTALS",$J))
"RTN","VBECDCDC",85,0)
 .Q
"RTN","VBECDCDC",86,0)
 ;
"RTN","VBECDCDC",87,0)
EXIT ;kill and quit
"RTN","VBECDCDC",88,0)
 K VBEC0,VBECD,VBECDCFN,VBECFLD,VBECI,VBECIEN,VBECIEN1,VBECLN,VBECNT,VBECPG,VBECR,VBECTDAY,VBECUSER,VBECXIT,VBECZ
"RTN","VBECDCDC",89,0)
 K ^TMP("VBEC TOTALS",$J)
"RTN","VBECDCDC",90,0)
 Q
"RTN","VBECDCDC",91,0)
 ;
"RTN","VBECDCDC",92,0)
EOS ; end of screen (eos) check & refresh screen action
"RTN","VBECDCDC",93,0)
 ; check to see if additional data exist to print, if not exit w/o
"RTN","VBECDCDC",94,0)
 ; issuing the eos prompt.
"RTN","VBECDCDC",95,0)
 ;
"RTN","VBECDCDC",96,0)
 I +VBECFLD=27,($O(^VBEC(6001,VBECIEN,"TOT",VBECIEN1))="") Q
"RTN","VBECDCDC",97,0)
 I $E(IOST)="C" K DIR S DIR(0)="E" D ^DIR S VBECXIT=$S(Y'>0:1,1:0)
"RTN","VBECDCDC",98,0)
 K DIR,X,Y Q:VBECXIT
"RTN","VBECDCDC",99,0)
HDR ; draw header
"RTN","VBECDCDC",100,0)
 W:($E(IOST)="C")!(VBECPG>1) @IOF
"RTN","VBECDCDC",101,0)
 W !,$$CJ^XLFSTR("VistA Blood Bank Data Element Summary",IOM)
"RTN","VBECDCDC",102,0)
 W !,"Data Conversion start time: "_VBECY00
"RTN","VBECDCDC",103,0)
 W !,"Data Conversion end time: "_VBECDCFN
"RTN","VBECDCDC",104,0)
 W !,"User: "_VBECUSER
"RTN","VBECDCDC",105,0)
 W !,"Report Run Date: ",VBECTDAY,?69,"Page: ",VBECPG,!,VBECLN
"RTN","VBECDCDC",106,0)
 S VBECPG=VBECPG+1
"RTN","VBECDCDC",107,0)
 Q
"RTN","VBECDCDC",108,0)
 ;
"RTN","VBECDCDC",109,0)
PRINT(VBECDSTR) ;print data
"RTN","VBECDCDC",110,0)
 ;Input: VBECDSTR=data string; each delimited piece indicates the
"RTN","VBECDCDC",111,0)
 ; total number of occurences for a data element.
"RTN","VBECDCDC",112,0)
 F VBECI=1:1 S VBECFLD=$P($T(FORMAT+VBECI),";;",2) Q:VBECFLD=""  D  Q:VBECXIT
"RTN","VBECDCDC",113,0)
 .W !,$P(VBECFLD,";",2)_": "_$P(VBECDSTR,U,VBECI)
"RTN","VBECDCDC",114,0)
 .I $Y>(IOSL-4) D EOS ;sets the variable VBECXIT
"RTN","VBECDCDC",115,0)
 .W:+VBECFLD=27&($O(^VBEC(6001,VBECIEN,"TOT",VBECIEN1))>0) !
"RTN","VBECDCDC",116,0)
 .Q
"RTN","VBECDCDC",117,0)
 Q
"RTN","VBECDCDC",118,0)
 ;
"RTN","VBECDCDC",119,0)
FORMAT ;field names are formatted here
"RTN","VBECDCDC",120,0)
 ;;1;LRDFN
"RTN","VBECDCDC",121,0)
 ;;2;DFN
"RTN","VBECDCDC",122,0)
 ;;3;Family Name
"RTN","VBECDCDC",123,0)
 ;;4;Given Name
"RTN","VBECDCDC",124,0)
 ;;5;Middle Name
"RTN","VBECDCDC",125,0)
 ;;6;Suffix (Name)
"RTN","VBECDCDC",126,0)
 ;;7;Sex
"RTN","VBECDCDC",127,0)
 ;;8;DOB
"RTN","VBECDCDC",128,0)
 ;;9;SSN
"RTN","VBECDCDC",129,0)
 ;;10;ICN
"RTN","VBECDCDC",130,0)
 ;;11;ABO
"RTN","VBECDCDC",131,0)
 ;;12;RH
"RTN","VBECDCDC",132,0)
 ;;13;RBC Antigens Present
"RTN","VBECDCDC",133,0)
 ;;14;RBC Antigens Present Comments
"RTN","VBECDCDC",134,0)
 ;;15;RBC Antigens Present Chars
"RTN","VBECDCDC",135,0)
 ;;16;RBC Antigens Absent
"RTN","VBECDCDC",136,0)
 ;;17;RBC Antigens Absent Comments
"RTN","VBECDCDC",137,0)
 ;;18;RBC Antigens Absent Chars
"RTN","VBECDCDC",138,0)
 ;;19;Antibodies Identified
"RTN","VBECDCDC",139,0)
 ;;20;Antibodies Identified Comments
"RTN","VBECDCDC",140,0)
 ;;21;Antibodies Identified Chars
"RTN","VBECDCDC",141,0)
 ;;22;Transfusion Reaction Date
"RTN","VBECDCDC",142,0)
 ;;23;Transfusion Reaction
"RTN","VBECDCDC",143,0)
 ;;24;Transfusion Reaction Comments
"RTN","VBECDCDC",144,0)
 ;;25;Trans. Reaction Comment Chars
"RTN","VBECDCDC",145,0)
 ;;26;Blood Bank Comments
"RTN","VBECDCDC",146,0)
 ;;27;Blood Bank Comment Chars
"RTN","VBECDCDC",147,0)
 ;;
"RTN","VBECDCHX")
0^4^B13671377
"RTN","VBECDCHX",1,0)
VBECDCHX ;hoifo/gjc-data conversion & pre-implementation;Nov 21, 2002
"RTN","VBECDCHX",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCHX",3,0)
 ;
"RTN","VBECDCHX",4,0)
 ;Medical Device #:
"RTN","VBECDCHX",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCHX",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCHX",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCHX",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCHX",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCHX",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCHX",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCHX",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCHX",13,0)
 ;regulations.
"RTN","VBECDCHX",14,0)
 ;
"RTN","VBECDCHX",15,0)
 ;Call to $$ROOT^DILFD is supported by IA: 2055
"RTN","VBECDCHX",16,0)
 ;
"RTN","VBECDCHX",17,0)
 ; This routine is called from the main data conversion software
"RTN","VBECDCHX",18,0)
 ; (VBECDC01).  This routine checks if antigen/antibody, transfusion
"RTN","VBECDCHX",19,0)
 ; reaction, blood product, or blood supplier data has been edited
"RTN","VBECDCHX",20,0)
 ; or deleted from the legacy VistA Blood Bank files.  I do not check
"RTN","VBECDCHX",21,0)
 ; for added data to the legacy VistA Blood Bank files; other options
"RTN","VBECDCHX",22,0)
 ; within the software exist for this purpose.
"RTN","VBECDCHX",23,0)
 ;
"RTN","VBECDCHX",24,0)
 ;  input: no data input into this module
"RTN","VBECDCHX",25,0)
 ; return: VBECFLG - 1 if a discrepancy exists, else 0
"RTN","VBECDCHX",26,0)
 ; check the data, all of this is run real-time (no queuing)
"RTN","VBECDCHX",27,0)
 ;
"RTN","VBECDCHX",28,0)
 ; variable definitions:
"RTN","VBECDCHX",29,0)
 ; CNT-counter, used to print '.' every 100 records
"RTN","VBECDCHX",30,0)
 ; VBEC01-'file-ien' or 'file' data (.01 field on file 6005)
"RTN","VBECDCHX",31,0)
 ; VBECDA-record ien file 6005
"RTN","VBECDCHX",32,0)
 ; VBECDATA-antigen/antibody, trans. react., blood prod., blood supplier
"RTN","VBECDCHX",33,0)
 ; VBECFILE-file number of legacy data
"RTN","VBECDCHX",34,0)
 ; VBECFLG-indicates if data is valid across files/sub-file:
"RTN","VBECDCHX",35,0)
 ;         61.3, 65.4, & 6005 (1 for no, 0 for yes)
"RTN","VBECDCHX",36,0)
 ; VBECGUID-only checking data that has been mapped
"RTN","VBECDCHX",37,0)
 ; VBECIEN-record ien (.01 field, file 6005 2nd piece delimited by '-')
"RTN","VBECDCHX",38,0)
 ;         (not applicable on blood supplier data)
"RTN","VBECDCHX",39,0)
 ; VBECL0-legacy file (#s 61.3, or 65.4) zero node
"RTN","VBECDCHX",40,0)
 ; VBECLCX-checksum for a data record, legacy file (#s 61.3 & 65.4)
"RTN","VBECDCHX",41,0)
 ; VBECLID-identifier on legacy file
"RTN","VBECDCHX",42,0)
 ; VBECLNM-name of record in legacy file
"RTN","VBECDCHX",43,0)
 ; VBECLTOT-checksum value for legacy data (name and identifier)
"RTN","VBECDCHX",44,0)
 ; VBECRT-legacy file data global. in all cases: ^LAB(File#
"RTN","VBECDCHX",45,0)
 ; VBECSTR-temporary string data, holding variable
"RTN","VBECDCHX",46,0)
 ; VBECT0-transitory file (# 6005) zero node
"RTN","VBECDCHX",47,0)
 ; VBECTCX-checksum for a data record, transitory file (# 6005)
"RTN","VBECDCHX",48,0)
 ; VBECTID-identifier on  transitory file
"RTN","VBECDCHX",49,0)
 ; VBECTNM-name of record in transitory file
"RTN","VBECDCHX",50,0)
 ; VBECTTOT-checksum value for transitory data (name and identifier)
"RTN","VBECDCHX",51,0)
 ;
"RTN","VBECDCHX",52,0)
EN() ; Main entry point to check if mapped data remains consistent with
"RTN","VBECDCHX",53,0)
 ; data from the parent (61.3 & 65.4) files.  If not, do not
"RTN","VBECDCHX",54,0)
 ; proceed with the data conversion (VBECDC01).
"RTN","VBECDCHX",55,0)
 ;
"RTN","VBECDCHX",56,0)
 W @IOF N CNT,VBECFLG S (CNT,VBECFLG)=0 ;assume successful test
"RTN","VBECDCHX",57,0)
 ;check the antigen/antibody data first
"RTN","VBECDCHX",58,0)
 F VBECFILE=61.3,65.4 D  Q:VBECFLG
"RTN","VBECDCHX",59,0)
 .S VBEC01=VBECFILE,VBECRT=$$ROOT^DILFD(VBEC01,"",1)
"RTN","VBECDCHX",60,0)
 .S VBECDATA=$S(VBECFILE="61.3":"Antibody/Antigen",VBECFILE="65.4":"Transfusion Reaction",VBECFILE="66":"Blood Product",1:"Blood Supplier")
"RTN","VBECDCHX",61,0)
 .W !,"Checking the integrity of "_VBECDATA_" data.",!,"'*' indicates truncated data (65 chars max)."
"RTN","VBECDCHX",62,0)
 .;obtain the GUID.  Only checking mapped data
"RTN","VBECDCHX",63,0)
 .S VBECGUID=""
"RTN","VBECDCHX",64,0)
 .F  S VBECGUID=$O(^VBEC(6005,"AB",VBEC01,VBECGUID)) Q:VBECGUID=""  D  Q:VBECFLG=1
"RTN","VBECDCHX",65,0)
 ..S VBECDA=+$O(^VBEC(6005,"AB",VBEC01,VBECGUID,0)) Q:'VBECDA  ;ien
"RTN","VBECDCHX",66,0)
 ..;
"RTN","VBECDCHX",67,0)
 ..;must have data on the node
"RTN","VBECDCHX",68,0)
 ..S VBECT0=$G(^VBEC(6005,VBECDA,0)) Q:VBECT0=""
"RTN","VBECDCHX",69,0)
 ..;
"RTN","VBECDCHX",70,0)
 ..S VBECIEN=+$P($P(VBECT0,U),"-",2) Q:'VBECIEN
"RTN","VBECDCHX",71,0)
 ..;
"RTN","VBECDCHX",72,0)
 ..;obtain .01 field value and identifier
"RTN","VBECDCHX",73,0)
 ..S VBECSTR=$$FILEIEN(VBECRT,VBECIEN)
"RTN","VBECDCHX",74,0)
 ..S VBECLNM=$P(VBECSTR,U),VBECLID=$P(VBECSTR,U,2)
"RTN","VBECDCHX",75,0)
 ..;
"RTN","VBECDCHX",76,0)
 ..;compare the checksums of the data between the parent files (61.3
"RTN","VBECDCHX",77,0)
 ..;& 65.4) against the mapped data in file 6005 
"RTN","VBECDCHX",78,0)
 ..S VBECTNM=$P(VBECT0,U,2),VBECTID=$P(VBECT0,U,3)
"RTN","VBECDCHX",79,0)
 ..S VBECLTOT=$$CHECKSUM^VBECDCU2(VBECLNM)+$$CHECKSUM^VBECDCU2(VBECLID)
"RTN","VBECDCHX",80,0)
 ..S VBECTTOT=$$CHECKSUM^VBECDCU2(VBECTNM)+$$CHECKSUM^VBECDCU2(VBECTID)
"RTN","VBECDCHX",81,0)
 ..I VBECLTOT'=VBECTTOT S VBECFLG=1 D
"RTN","VBECDCHX",82,0)
 ...;
"RTN","VBECDCHX",83,0)
 ...;display the discrepancies to the user
"RTN","VBECDCHX",84,0)
 ...W !,"Legacy NAME: "_VBECLNM
"RTN","VBECDCHX",85,0)
 ...W !,"Mapped NAME: "_VBECTNM
"RTN","VBECDCHX",86,0)
 ...W !,"Legacy ID: "_$E(VBECLID,1,65)_$S($L(VBECLID)>65:"*",1:"")
"RTN","VBECDCHX",87,0)
 ...W !,"Mapped ID: "_$E(VBECTID,1,65)_$S($L(VBECTID)>65:"*",1:"")
"RTN","VBECDCHX",88,0)
 ...Q
"RTN","VBECDCHX",89,0)
 ..S CNT=CNT+1 W:'(CNT#100) "."
"RTN","VBECDCHX",90,0)
 ..Q
"RTN","VBECDCHX",91,0)
 .Q
"RTN","VBECDCHX",92,0)
 ;
"RTN","VBECDCHX",93,0)
KILL ; kill and quit
"RTN","VBECDCHX",94,0)
 K VBEC01,VBECDA,VBECDATA,VBECFILE,VBECGUID,VBECL0,VBECLCX,VBECLID
"RTN","VBECDCHX",95,0)
 K VBECLNM,VBECLTOT,VBECRT,VBECT0,VBECTCX,VBECTTOT
"RTN","VBECDCHX",96,0)
 Q VBECFLG
"RTN","VBECDCHX",97,0)
 ;
"RTN","VBECDCHX",98,0)
FILEIEN(VBECRT,VBECIEN) ; For records tracking the parent file and record ien,
"RTN","VBECDCHX",99,0)
 ; define the NAME and ID values here.  Note ID values reside on
"RTN","VBECDCHX",100,0)
 ; different pieces for different files.
"RTN","VBECDCHX",101,0)
 ; Antibody/Antigen data resides in: ^LAB(61.3,
"RTN","VBECDCHX",102,0)
 ; Transfusion Reaction data resides in: ^LAB(65.4,
"RTN","VBECDCHX",103,0)
 ; input: VBECIEN-ien of the record in question
"RTN","VBECDCHX",104,0)
 ;        VBECRT-file root of the data global
"RTN","VBECDCHX",105,0)
 ;        Note: VBECFILE is of a global scope
"RTN","VBECDCHX",106,0)
 ; return: VBECSTR-delimited string: NAME^ID (optional)
"RTN","VBECDCHX",107,0)
 N VBECL0,VBECPCE S VBECL0=$G(@VBECRT@(VBECIEN,0)) Q:VBECL0="" ""
"RTN","VBECDCHX",108,0)
 ;
"RTN","VBECDCHX",109,0)
 ; VBECPCE is the SNOMED code for antibody/antigen data or the full name
"RTN","VBECDCHX",110,0)
 ; of our transfusion reaction.
"RTN","VBECDCHX",111,0)
 ; If data changes on the VistA side (name or required identifier value)
"RTN","VBECDCHX",112,0)
 ; the data conversion will not proceed.
"RTN","VBECDCHX",113,0)
 ;
"RTN","VBECDCHX",114,0)
 S VBECPCE=$S(VBECFILE=61.3:2,1:3) ;note origin of data
"RTN","VBECDCHX",115,0)
 Q $P(VBECL0,U)_"^"_$P(VBECL0,U,VBECPCE)
"RTN","VBECDCHX",116,0)
 ;
"RTN","VBECDCM")
0^5^B20099895
"RTN","VBECDCM",1,0)
VBECDCM ;hoifo/gjc-data mapping utilities.;Nov 21, 2002
"RTN","VBECDCM",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCM",3,0)
 ;
"RTN","VBECDCM",4,0)
 ;Medical Device #:
"RTN","VBECDCM",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCM",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCM",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCM",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCM",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCM",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCM",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCM",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCM",13,0)
 ;regulations.
"RTN","VBECDCM",14,0)
 ;
"RTN","VBECDCM",15,0)
 ;Call to $$NEWERR^%ZTER supported by IA: 1621
"RTN","VBECDCM",16,0)
 ;Call to ^DIC supported by IA: 10006
"RTN","VBECDCM",17,0)
 ;Call to MIX^DIC1 supported by IA: 10007
"RTN","VBECDCM",18,0)
 ;Call to FILE^DIE supported by IA: 2053
"RTN","VBECDCM",19,0)
 ;Execution of ^%ZOSF("TEST") supported by IA: 10096
"RTN","VBECDCM",20,0)
 ;
"RTN","VBECDCM",21,0)
EN613 ; entry point for mapping utilities on antibodies & antigens
"RTN","VBECDCM",22,0)
 D EN613^VBECDCM0 ;check for adds, edits, or deletes on the VistA side
"RTN","VBECDCM",23,0)
 S VBECFN=61.3 D GO Q
"RTN","VBECDCM",24,0)
 ;
"RTN","VBECDCM",25,0)
EN654 ; entry point for mapping utilities on transfusion reactions
"RTN","VBECDCM",26,0)
 D EN654^VBECDCM2 ;check for adds, edits, or deletes on the VistA side
"RTN","VBECDCM",27,0)
 S VBECFN=65.4 D GO Q
"RTN","VBECDCM",28,0)
 ;
"RTN","VBECDCM",29,0)
GO ; main entry point for mapping...
"RTN","VBECDCM",30,0)
 ; VBECXIT is used to denote when the application is to be exited
"RTN","VBECDCM",31,0)
 ; VBECFNM is the attribute name within the VistA file (blood product,
"RTN","VBECDCM",32,0)
 ; antigen/antibody, transfusion reaction, & blood supplier)
"RTN","VBECDCM",33,0)
 ;
"RTN","VBECDCM",34,0)
 ; initialize error trap
"RTN","VBECDCM",35,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCM",36,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCM",37,0)
 ;
"RTN","VBECDCM",38,0)
 S VBECXIT=0
"RTN","VBECDCM",39,0)
 S VBECFNM=$S(VBECFN=61.3:"Antigen/Antibody",VBECFN=65.4:"Transfusion Reaction",VBECFN=66:"Blood Product",66.01:"Blood Supplier",1:"")
"RTN","VBECDCM",40,0)
 ;
"RTN","VBECDCM",41,0)
 ; Lock the file that is being mapped to disallow another user the
"RTN","VBECDCM",42,0)
 ; ability to add/edit/delete records in the file.  If we cannot lock,
"RTN","VBECDCM",43,0)
 ; we need to try again at a later date.
"RTN","VBECDCM",44,0)
 L +^VBEC(6005):5
"RTN","VBECDCM",45,0)
 I '$T D  D XIT Q
"RTN","VBECDCM",46,0)
 .W !!,"The "_VBECFNM_" file is being edited by another user.",!,"Try again later."
"RTN","VBECDCM",47,0)
 .Q
"RTN","VBECDCM",48,0)
 ;
"RTN","VBECDCM",49,0)
 ; select the VistA element to map & the standardized value to map to
"RTN","VBECDCM",50,0)
 F  D  Q:VBECXIT
"RTN","VBECDCM",51,0)
 .S VBECVSTA=$$VSTLOOK(VBECFNM,VBECFN)
"RTN","VBECDCM",52,0)
 .I +VBECVSTA=-1 S VBECXIT=1 Q
"RTN","VBECDCM",53,0)
 .S VBECSQL=$$SQLLOOK(VBECFNM,VBECFN,VBECVSTA)
"RTN","VBECDCM",54,0)
 .I +VBECSQL=-1 S VBECXIT=1 Q
"RTN","VBECDCM",55,0)
 .; file pointer to standardized data (fld: .05)
"RTN","VBECDCM",56,0)
 .K VBECFDA
"RTN","VBECDCM",57,0)
 .S VBECFDA(8,6005,+VBECVSTA_",",.05)=+VBECSQL
"RTN","VBECDCM",58,0)
 .D FILE^DIE("","VBECFDA(8)","")
"RTN","VBECDCM",59,0)
 .; end of data filing
"RTN","VBECDCM",60,0)
 .Q
"RTN","VBECDCM",61,0)
 ;*********************************************************************
"RTN","VBECDCM",62,0)
 ;
"RTN","VBECDCM",63,0)
XIT ; kill and quit
"RTN","VBECDCM",64,0)
 L -^VBEC(6005) K VBECFDA,VBECFN,VBECFNM,VBECSQL,VBECVSTA,VBECXIT,X,Y
"RTN","VBECDCM",65,0)
 Q
"RTN","VBECDCM",66,0)
 ;
"RTN","VBECDCM",67,0)
SQLLOOK(VBECFNM,VBECFN,VBECVSTA) ; Lookup on standardized blood products,
"RTN","VBECDCM",68,0)
 ; transfusion reactions, blood suppliers, and antigens/antibodies.
"RTN","VBECDCM",69,0)
 ;
"RTN","VBECDCM",70,0)
 ; Input: VBECFNM=attribute to be mapped, i.e., transfusion reactions
"RTN","VBECDCM",71,0)
 ;        & antigens/antibodies.
"RTN","VBECDCM",72,0)
 ;        VBECFN=VistA file #; VistA file where the attribute resides
"RTN","VBECDCM",73,0)
 ;        VBECVSTA=ien^file#-ien^name attribute^identifier^
"RTN","VBECDCM",74,0)
 ;                 antibody/antigen flag
"RTN","VBECDCM",75,0)
 ;
"RTN","VBECDCM",76,0)
 ; return: ien^attribute name^attribute key, -1 if lookup fails
"RTN","VBECDCM",77,0)
 ;
"RTN","VBECDCM",78,0)
 N VBECSQL,VBECID,VBECVK,VBECVN
"RTN","VBECDCM",79,0)
 ; VBECVK=antibody/antigen flag or null
"RTN","VBECDCM",80,0)
 ; VBECVN=VistA name (.01)
"RTN","VBECDCM",81,0)
 ; VBECID=for antibodies only, SNOMED code
"RTN","VBECDCM",82,0)
 S VBECVN=$P(VBECVSTA,U,3),VBECID=$P(VBECVSTA,U,4)
"RTN","VBECDCM",83,0)
 S VBECVK=$P(VBECVSTA,U,5)
"RTN","VBECDCM",84,0)
 ;
"RTN","VBECDCM",85,0)
 F  D  Q:+VBECSQL
"RTN","VBECDCM",86,0)
 .S DIC="^VBEC(6007,",DIC("A")="Select a standardized "_VBECFNM_": "
"RTN","VBECDCM",87,0)
 .S DIC(0)="QEAMZ"
"RTN","VBECDCM",88,0)
 .S DIC("S")="I $D(^VBEC(6007,""FNUM"",VBECFN,+Y))#2" ; common to all
"RTN","VBECDCM",89,0)
 .;
"RTN","VBECDCM",90,0)
 .;additional logic for antibody/antigen screen
"RTN","VBECDCM",91,0)
 .S:VBECFN=61.3 DIC("S")=DIC("S")_" N VBECQ S VBECQ=$G(^VBEC(6007,+Y,0)) I $P(VBECQ,U,4)=VBECVK"
"RTN","VBECDCM",92,0)
 .;
"RTN","VBECDCM",93,0)
 .;display identifier when looking up antibody/antigen
"RTN","VBECDCM",94,0)
 .S:VBECFN=61.3 DIC("W")="N VBEC67 S VBEC67=$G(^VBEC(6007,+Y,0)) W $P(VBEC67,U,2)_$S($P(VBEC67,U,4)=""AB"":"" (Antibody)"",$P(VBEC67,U,2)=""AN"":"" (Antigen)"",1:"""")"
"RTN","VBECDCM",95,0)
 .;
"RTN","VBECDCM",96,0)
 .D ^DIC K DIC,VBECSCR
"RTN","VBECDCM",97,0)
 .I $D(DUOUT)!($D(DTOUT))!(+Y=-1) S VBECSQL=-1 Q
"RTN","VBECDCM",98,0)
 .; VBECSQL format: internal entry # ^ attribute name ^ attribute key
"RTN","VBECDCM",99,0)
 .S VBECSQL=+Y_U_$P(Y(0),U,1,2)
"RTN","VBECDCM",100,0)
 .Q
"RTN","VBECDCM",101,0)
 Q VBECSQL
"RTN","VBECDCM",102,0)
 ;
"RTN","VBECDCM",103,0)
VSTLOOK(VBECFNM,VBECFN) ; Lookup on standardized VistA blood products,
"RTN","VBECDCM",104,0)
 ; transfusion reactions, blood suppliers, and antigens/antibodies.
"RTN","VBECDCM",105,0)
 ;
"RTN","VBECDCM",106,0)
 ; Input: VBECFNM=attribute to be mapped, i.e., blood products,
"RTN","VBECDCM",107,0)
 ;        transfusion reactions, blood suppliers, and
"RTN","VBECDCM",108,0)
 ;        antigens/antibodies.
"RTN","VBECDCM",109,0)
 ;        VBECFN=VistA file #; VistA file where the attribute resides
"RTN","VBECDCM",110,0)
 ;
"RTN","VBECDCM",111,0)
 ; return if antibody/antigen: ien ^ file#-ien ^ name attribute ^
"RTN","VBECDCM",112,0)
 ;                             ^ identifier ^ antibody/antigen flag
"RTN","VBECDCM",113,0)
 ;       transfusion reaction: ien ^ file#-ien ^ name attribute ^
"RTN","VBECDCM",114,0)
 ;                             null (no identifier) ^ (no flag)
"RTN","VBECDCM",115,0)
 ;
"RTN","VBECDCM",116,0)
 ;                             -1 if lookup fails
"RTN","VBECDCM",117,0)
 ;
"RTN","VBECDCM",118,0)
 N VBECVSTA
"RTN","VBECDCM",119,0)
 F  D  Q:+VBECVSTA
"RTN","VBECDCM",120,0)
 .K D,DIC,DO S DIC(0)="QEFASZ" S:VBECFN=61.3 DIC(0)=DIC(0)_"X"
"RTN","VBECDCM",121,0)
 .S D="N^VA",DIC="^VBEC(6005,",DIC("A")="Select VistA "_VBECFNM_": "
"RTN","VBECDCM",122,0)
 .S:VBECFN=61.3 DIC("W")="N VBEC24 S VBEC24=$P($G(^VBEC(6005,+Y,0)),U,2,4) W $P(VBEC24,U,2)_$S($P(VBEC24,U,3)=""AB"":"" (Antibody)"",$P(VBEC24,U,3)=""AN"":"" (Antigen)"",1:"""")"
"RTN","VBECDCM",123,0)
 .;S:VBECFN=61.3 DIC("W")="N VBEC04 S VBEC04=$P($G(^VBEC(6005,+Y,0)),U,4) W $S(VBEC04=""AB"":""(Antibody)"",VBEC04=""AN"":""(Antigen)"",1:"""")"
"RTN","VBECDCM",124,0)
 .S DIC("S")="N VBEC05 S VBEC05=$G(^VBEC(6005,+Y,0)) I +VBEC05=VBECFN,$P(VBEC05,U,5)="""""
"RTN","VBECDCM",125,0)
 .D MIX^DIC1 K D,DIC,DO
"RTN","VBECDCM",126,0)
 .I $D(DUOUT)!($D(DTOUT))!(+Y=-1) S VBECVSTA=-1 Q
"RTN","VBECDCM",127,0)
 .S VBECVSTA=+Y_U_$P(Y(0),U,1,4)
"RTN","VBECDCM",128,0)
 .Q
"RTN","VBECDCM",129,0)
 Q VBECVSTA
"RTN","VBECDCM",130,0)
 ;
"RTN","VBECDCM0")
0^6^B11064686
"RTN","VBECDCM0",1,0)
VBECDCM0 ;hoifo/gjc-VBECS MAPPING TABLE add, edit & delete utilities.;Nov 21, 2002
"RTN","VBECDCM0",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCM0",3,0)
 ;
"RTN","VBECDCM0",4,0)
 ; main entry point for VBECS MAPPING TABLE (#6005) file operations
"RTN","VBECDCM0",5,0)
 ;
"RTN","VBECDCM0",6,0)
 ;Medical Device #:
"RTN","VBECDCM0",7,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCM0",8,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCM0",9,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCM0",10,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCM0",11,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCM0",12,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCM0",13,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCM0",14,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCM0",15,0)
 ;regulations.
"RTN","VBECDCM0",16,0)
 ;
"RTN","VBECDCM0",17,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCM0",18,0)
 ;Call to FILE^DIE is supported by IA: 2053
"RTN","VBECDCM0",19,0)
 ;Call to $$NOW^XLFDT is supported by IA: 10103
"RTN","VBECDCM0",20,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCM0",21,0)
 ;
"RTN","VBECDCM0",22,0)
EN613 ;Initially populate the file with antigen/antibody data
"RTN","VBECDCM0",23,0)
 ;
"RTN","VBECDCM0",24,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCM0",25,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCM0",26,0)
 I +$O(^VBEC(6005,"AA","61.3-"))'=61.3 D
"RTN","VBECDCM0",27,0)
 .Q:'$$LOCK^VBECDCU2(61.3)
"RTN","VBECDCM0",28,0)
 .W !!,"Adding site configured 'Antigen/Antibody' information into the VBECS MAPPING",!,"TABLE file (#6005)."
"RTN","VBECDCM0",29,0)
 .S CNT=0
"RTN","VBECDCM0",30,0)
 .F VBECANTI="AB","AN" D  ;antibodies & antigens
"RTN","VBECDCM0",31,0)
 ..S VBECY=0 F  S VBECY=$O(^LAB(61.3,"E",VBECANTI,VBECY)) Q:'VBECY  D
"RTN","VBECDCM0",32,0)
 ...S VBECY(0)=$G(^LAB(61.3,VBECY,0)),CNT=CNT+1
"RTN","VBECDCM0",33,0)
 ...D POP6005^VBECDCM2(61.3,VBECY,$P(VBECY(0),U),$P(VBECY(0),U,2),VBECANTI)
"RTN","VBECDCM0",34,0)
 ...W:'(CNT#100) "."
"RTN","VBECDCM0",35,0)
 ...Q
"RTN","VBECDCM0",36,0)
 ..Q
"RTN","VBECDCM0",37,0)
 .D UNLOCK^VBECDCU2(61.3)
"RTN","VBECDCM0",38,0)
 .Q
"RTN","VBECDCM0",39,0)
 S:+$O(^VBEC(6005,"AA","61.3-"))=61.3 VBECFLG=1
"RTN","VBECDCM0",40,0)
 I  W !!,CNT_" antibody/antigen record"_$S(CNT=1:"",1:"s")_" added.",!
"RTN","VBECDCM0",41,0)
 ;
"RTN","VBECDCM0",42,0)
 ;handle antigen/antibody edit, delete, and add events here
"RTN","VBECDCM0",43,0)
 ;
"RTN","VBECDCM0",44,0)
 E  D
"RTN","VBECDCM0",45,0)
 .Q:'$$LOCK^VBECDCU2(61.3)  S VBECFLG=0
"RTN","VBECDCM0",46,0)
 .F VBECANTI="AB","AN" D  ;antibodies & antigens
"RTN","VBECDCM0",47,0)
 ..S VBECY=0 F  S VBECY=$O(^LAB(61.3,"E",VBECANTI,VBECY)) Q:'VBECY  D
"RTN","VBECDCM0",48,0)
 ...S VBECY(0)=$G(^LAB(61.3,VBECY,0)),VBEC01=61.3_"-"_VBECY
"RTN","VBECDCM0",49,0)
 ...S VBECIEN=+$O(^VBEC(6005,"B",VBEC01,0))
"RTN","VBECDCM0",50,0)
 ...;
"RTN","VBECDCM0",51,0)
 ...;if antigen/antibody not filed in 6005, add it
"RTN","VBECDCM0",52,0)
 ...I 'VBECIEN S VBECFLG=1 D POP6005^VBECDCM2(61.3,VBECY,$P(VBECY(0),U),$P(VBECY(0),U,2),VBECANTI) Q
"RTN","VBECDCM0",53,0)
 ...S VBECIEN(0)=$G(^VBEC(6005,VBECIEN,0))
"RTN","VBECDCM0",54,0)
 ...;
"RTN","VBECDCM0",55,0)
 ...;check if the name or identifier attribute has been edited
"RTN","VBECDCM0",56,0)
 ...S VBECTOT=0,VBECTOT=$$CHECKSUM^VBECDCU2($P(VBECY(0),U))
"RTN","VBECDCM0",57,0)
 ...S VBECTOT=VBECTOT+$$CHECKSUM^VBECDCU2($P(VBECY(0),U,2))
"RTN","VBECDCM0",58,0)
 ...S VBECTOT=VBECTOT+$$CHECKSUM^VBECDCU2($P(VBECY(0),U,5))
"RTN","VBECDCM0",59,0)
 ...I VBECTOT'=$P(VBECIEN(0),U,6) D  S VBECFLG=1 K VBECTOT
"RTN","VBECDCM0",60,0)
 ....S:$P(VBECY(0),U)'=$P(VBECIEN(0),U,2) VBECFDA(6005,VBECIEN_",",.02)=$P(VBECY(0),U)
"RTN","VBECDCM0",61,0)
 ....S:$P(VBECY(0),U,2)'=$P(VBECIEN(0),U,3) VBECFDA(6005,VBECIEN_",",.03)=$P(VBECY(0),U,2)
"RTN","VBECDCM0",62,0)
 ....S:$P(VBECY(0),U,5)'=$P(VBECIEN(0),U,4) VBECFDA(6005,VBECIEN_",",.04)=$P(VBECY(0),U,5)
"RTN","VBECDCM0",63,0)
 ....S VBECFDA(6005,VBECIEN_",",.05)="@"
"RTN","VBECDCM0",64,0)
 ....S VBECFDA(6005,VBECIEN_",",.06)=VBECTOT
"RTN","VBECDCM0",65,0)
 ....S VBECFDA(6005,VBECIEN_",",.07)=+$E($$NOW^XLFDT(),1,12)
"RTN","VBECDCM0",66,0)
 ....D FILE^DIE("","VBECFDA")
"RTN","VBECDCM0",67,0)
 ....Q
"RTN","VBECDCM0",68,0)
 ...;
"RTN","VBECDCM0",69,0)
 ...Q
"RTN","VBECDCM0",70,0)
 ..Q
"RTN","VBECDCM0",71,0)
 .D UNLOCK^VBECDCU2(61.3)
"RTN","VBECDCM0",72,0)
 .Q
"RTN","VBECDCM0",73,0)
 D DELETE^VBECDCM2(61.3)
"RTN","VBECDCM0",74,0)
 I $G(VBECFLG) W !!,"Antigen/Antibody information updated.",!
"RTN","VBECDCM0",75,0)
 E  W !!,"Antigen/Antibody information current, not updated.",!
"RTN","VBECDCM0",76,0)
 D XIT^VBECDCM2
"RTN","VBECDCM0",77,0)
 Q
"RTN","VBECDCM0",78,0)
 ;
"RTN","VBECDCM1")
0^7^B24209996
"RTN","VBECDCM1",1,0)
VBECDCM1 ;hoifo/gjc-VBECS MAPPING TABLE delete utilities.;Nov 21, 2002
"RTN","VBECDCM1",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCM1",3,0)
 ;
"RTN","VBECDCM1",4,0)
 ;Medical Device #:
"RTN","VBECDCM1",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCM1",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCM1",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCM1",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCM1",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCM1",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCM1",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCM1",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCM1",13,0)
 ;regulations.
"RTN","VBECDCM1",14,0)
 ;
"RTN","VBECDCM1",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCM1",16,0)
 ;Call to IX^DIC is supported by IA: 10006
"RTN","VBECDCM1",17,0)
 ;Call to FILE^DIE is supported by IA: 2053
"RTN","VBECDCM1",18,0)
 ;Call to ^DIK is supported by IA: 10013
"RTN","VBECDCM1",19,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCM1",20,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCM1",21,0)
 ;
"RTN","VBECDCM1",22,0)
EN613 ; decouple antibodies/antigens
"RTN","VBECDCM1",23,0)
 S VBECFN=61.3,VBECNME="Antibodies/Antigens"
"RTN","VBECDCM1",24,0)
 D ASK,XIT
"RTN","VBECDCM1",25,0)
 Q
"RTN","VBECDCM1",26,0)
EN654 ; decouple transfusion reactions
"RTN","VBECDCM1",27,0)
 S VBECFN=65.4,VBECNME="Transfusion Reactions"
"RTN","VBECDCM1",28,0)
 D ASK,XIT
"RTN","VBECDCM1",29,0)
 Q
"RTN","VBECDCM1",30,0)
ENP613 ; purge VistA antibodies/antigens 
"RTN","VBECDCM1",31,0)
 S VBECFN=61.3,VBECNME="Antibodies/Antigens"
"RTN","VBECDCM1",32,0)
 D PURGALL K VBECFN,VBECNME
"RTN","VBECDCM1",33,0)
 Q
"RTN","VBECDCM1",34,0)
ENP654 ; purge VistA transfusion reactions mapping
"RTN","VBECDCM1",35,0)
 S VBECFN=65.4,VBECNME="Transfusion Reactions"
"RTN","VBECDCM1",36,0)
 D PURGALL K VBECFN,VBECNME
"RTN","VBECDCM1",37,0)
 Q
"RTN","VBECDCM1",38,0)
 ;
"RTN","VBECDCM1",39,0)
PURGALL ; purge all the records in the VBECS MAPPING TABLE (#6005) file
"RTN","VBECDCM1",40,0)
 ; initialize the error trap
"RTN","VBECDCM1",41,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCM1",42,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCM1",43,0)
 Q:'$$LOCK^VBECDCU2(6005)
"RTN","VBECDCM1",44,0)
 N VBECXIT S VBECXIT=0
"RTN","VBECDCM1",45,0)
 I $O(^VBEC(6005,"AB",VBECFN,""))'="" D  Q:VBECXIT
"RTN","VBECDCM1",46,0)
 .;Data has been mapped, ask user if purge should proceed.
"RTN","VBECDCM1",47,0)
 .N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","VBECDCM1",48,0)
 .S DIR(0)="Y",DIR("B")="No"
"RTN","VBECDCM1",49,0)
 .S DIR("A")=VBECNME_" have been mapped, are you sure you want to purge"
"RTN","VBECDCM1",50,0)
 .S DIR("?")="Enter 'Yes' to purge "_VBECNME_", or 'No' to exit without purging."
"RTN","VBECDCM1",51,0)
 .D ^DIR
"RTN","VBECDCM1",52,0)
 .I $D(DIRUT)#2 S VBECXIT=1 Q
"RTN","VBECDCM1",53,0)
 .S VBECXIT=$S(Y=0:1,1:0)
"RTN","VBECDCM1",54,0)
 .;If the user takes the default of 'No', the value of Y is zero.
"RTN","VBECDCM1",55,0)
 .;Set VBECXIT accordingly to exit without purging.
"RTN","VBECDCM1",56,0)
 .Q
"RTN","VBECDCM1",57,0)
 S DIK="^VBEC(6005,",CNT=0
"RTN","VBECDCM1",58,0)
 W !,"Please be patient, this may take awhile"
"RTN","VBECDCM1",59,0)
 S:VBECFN'=66.01 VBEC01=VBECFN_"-"
"RTN","VBECDCM1",60,0)
 S:VBECFN=66.01 VBEC01=VBECFN
"RTN","VBECDCM1",61,0)
 I VBEC01'=66.01  F  S VBEC01=$O(^VBEC(6005,"B",VBEC01)) Q:VBEC01=""!(+VBEC01'=VBECFN)  D PURGE(VBEC01,.CNT) ; not blood supplier
"RTN","VBECDCM1",62,0)
 D:VBEC01=66.01 PURGE(VBEC01,.CNT) ; blood supplier
"RTN","VBECDCM1",63,0)
 W:CNT !!,"Done, total number of records deleted: "_CNT
"RTN","VBECDCM1",64,0)
 W:'CNT !!,"No record(s) to delete."
"RTN","VBECDCM1",65,0)
 D UNLOCK^VBECDCU2(6005)
"RTN","VBECDCM1",66,0)
 K %,CNT,DIC,VBEC01,X,Y
"RTN","VBECDCM1",67,0)
 Q
"RTN","VBECDCM1",68,0)
 ;
"RTN","VBECDCM1",69,0)
PURGE(VBEC01,CNT) ; purge at the record level using DIK
"RTN","VBECDCM1",70,0)
 ; input: VBEC01=sub-file number or file number-ien VBEC MATCHING TABLE
"RTN","VBECDCM1",71,0)
 ;               file.
"RTN","VBECDCM1",72,0)
 ;           CNT=The number of records purged.
"RTN","VBECDCM1",73,0)
 N %,DA,DIK,X,Y S DA=0,DIK="^VBEC(6005,"
"RTN","VBECDCM1",74,0)
 F  S DA=$O(^VBEC(6005,"B",VBEC01,DA)) Q:'DA  D
"RTN","VBECDCM1",75,0)
 .D ^DIK S CNT=CNT+1
"RTN","VBECDCM1",76,0)
 .W:'(CNT#100) "." ; process is active
"RTN","VBECDCM1",77,0)
 .Q
"RTN","VBECDCM1",78,0)
 Q
"RTN","VBECDCM1",79,0)
 ;
"RTN","VBECDCM1",80,0)
SINGLE ; decouple relations for a single record
"RTN","VBECDCM1",81,0)
 ; initialize the error trap
"RTN","VBECDCM1",82,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCM1",83,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCM1",84,0)
 Q:'$$LOCK^VBECDCU2(6005)
"RTN","VBECDCM1",85,0)
 S VBECFILE=$$ATTR^VBECDCU1() ; select data attribute family
"RTN","VBECDCM1",86,0)
 I VBECFILE="^" D KILSIN Q
"RTN","VBECDCM1",87,0)
 K D,DIC,DO S D="N",DIC="^VBEC(6005,",DIC(0)="QEFASZ",VBECFILE=+VBECFILE
"RTN","VBECDCM1",88,0)
 S DIC("S")="N VBEC S VBEC=$G(^(0)) I $P(VBEC,U,5)'="""",(+$P(VBEC,U)=VBECFILE)"
"RTN","VBECDCM1",89,0)
 S DIC("W")="W $S($P(^(0),U,3)'="""":"" (""_$P(^(0),U,3)_"")"",1:"""")"
"RTN","VBECDCM1",90,0)
 D IX^DIC K D,DIC,DO I +Y=-1 D KILSIN Q
"RTN","VBECDCM1",91,0)
 S VBECIEN=+Y,VBECREC=$P(Y(0),U,2)_" ("_$P(Y(0),U,3)_")"
"RTN","VBECDCM1",92,0)
 D DECUP(VBECIEN)
"RTN","VBECDCM1",93,0)
 W !!,"Mapping for "_VBECREC_" decoupled.",!
"RTN","VBECDCM1",94,0)
KILSIN D UNLOCK^VBECDCU2(6005) K VBECFILE,VBECIEN,VBECREC,X,Y
"RTN","VBECDCM1",95,0)
 Q
"RTN","VBECDCM1",96,0)
 ;
"RTN","VBECDCM1",97,0)
ASK ; decouple records from the VBECS MAPPING TABLE (#6005) file
"RTN","VBECDCM1",98,0)
 ; initialize the error trap
"RTN","VBECDCM1",99,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCM1",100,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCM1",101,0)
 S Y=$$YN() Q:Y=0  ; user chooses not to decouple
"RTN","VBECDCM1",102,0)
 S CNT=0 W !!?3,"Please be patient, this may take a while",!
"RTN","VBECDCM1",103,0)
 Q:'$$LOCK^VBECDCU2(6005)
"RTN","VBECDCM1",104,0)
 S VBECGUID=""
"RTN","VBECDCM1",105,0)
 F  S VBECGUID=$O(^VBEC(6005,"AB",VBECFN,VBECGUID)) Q:VBECGUID=""  D
"RTN","VBECDCM1",106,0)
 .S VBECIEN=0
"RTN","VBECDCM1",107,0)
 .F  S VBECIEN=$O(^VBEC(6005,"AB",VBECFN,VBECGUID,VBECIEN)) Q:'VBECIEN  D
"RTN","VBECDCM1",108,0)
 ..D DECUP(VBECIEN)
"RTN","VBECDCM1",109,0)
 ..S CNT=CNT+1 W:'(CNT#100) "." ; process is active
"RTN","VBECDCM1",110,0)
 ..Q
"RTN","VBECDCM1",111,0)
 .Q
"RTN","VBECDCM1",112,0)
 W !?3,"Finished decoupling ",CNT," mapped records from the VBECS MAPPING TABLE (#6005)",!?3,"file.  For VistA "_VBECNME_" data types."
"RTN","VBECDCM1",113,0)
 D UNLOCK^VBECDCU2(6005)
"RTN","VBECDCM1",114,0)
 Q
"RTN","VBECDCM1",115,0)
 ;
"RTN","VBECDCM1",116,0)
DECUP(Y) ; delete the STANDARD VBECS DATA (#.05), CHECKSUM (#.06), &
"RTN","VBECDCM1",117,0)
 ; TIMESTAMP (#.07) field level data (essentially unmap)
"RTN","VBECDCM1",118,0)
 ;input: Y=ien of record in file 6005
"RTN","VBECDCM1",119,0)
 K VBECFDA S VBECFDA(8,6005,Y_",",.05)="@"
"RTN","VBECDCM1",120,0)
 D FILE^DIE("E","VBECFDA(8)") K VBECFDA
"RTN","VBECDCM1",121,0)
 Q
"RTN","VBECDCM1",122,0)
 ;
"RTN","VBECDCM1",123,0)
XIT ; kill and quit
"RTN","VBECDCM1",124,0)
 K CNT,VBECFDA,VBECFN,VBECGUID,VBECIEN,VBECNME,X,Y
"RTN","VBECDCM1",125,0)
 Q
"RTN","VBECDCM1",126,0)
 ;
"RTN","VBECDCM1",127,0)
YN() ; yes/no to decoupling question...
"RTN","VBECDCM1",128,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","VBECDCM1",129,0)
 S DIR(0)="Y",DIR("A")="Are you sure you want to decouple mappings",DIR("B")="No"
"RTN","VBECDCM1",130,0)
 S DIR("?")="Enter 'Yes' to decouple mappings, or 'No' to exit without decoupling mappings."
"RTN","VBECDCM1",131,0)
 D ^DIR S:$D(DIRUT) Y=0
"RTN","VBECDCM1",132,0)
 Q Y
"RTN","VBECDCM1",133,0)
 ;
"RTN","VBECDCM2")
0^8^B22225177
"RTN","VBECDCM2",1,0)
VBECDCM2 ;hoifo/gjc-VBECS MAPPING TABLE add, edit & delete utilities;Nov 21, 2002
"RTN","VBECDCM2",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCM2",3,0)
 ;
"RTN","VBECDCM2",4,0)
 ;Medical Device #:
"RTN","VBECDCM2",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCM2",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCM2",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCM2",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCM2",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCM2",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCM2",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCM2",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCM2",13,0)
 ;regulations.
"RTN","VBECDCM2",14,0)
 ;
"RTN","VBECDCM2",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCM2",16,0)
 ;Call to FILE^DIE is supported by IA: 2053
"RTN","VBECDCM2",17,0)
 ;Call to UPDATE^DIE is supported by IA: 2053
"RTN","VBECDCM2",18,0)
 ;Call to ^DIK is supported by IA: 10013
"RTN","VBECDCM2",19,0)
 ;Call to $$ROOT^DILFD is supported by IA: 2055
"RTN","VBECDCM2",20,0)
 ;Call to $$NOW^XLFDT is supported by IA: 10103
"RTN","VBECDCM2",21,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCM2",22,0)
 ;
"RTN","VBECDCM2",23,0)
EN654 ; handle transfusion reactions.
"RTN","VBECDCM2",24,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCM2",25,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCM2",26,0)
 ;
"RTN","VBECDCM2",27,0)
 ;initially add trans. reactions to file 6005
"RTN","VBECDCM2",28,0)
 ;
"RTN","VBECDCM2",29,0)
 I +$O(^VBEC(6005,"AA","65.4-"))'=65.4 D
"RTN","VBECDCM2",30,0)
 .Q:'$$LOCK^VBECDCU2(65.4)
"RTN","VBECDCM2",31,0)
 .W !!,"Adding site configured 'Transfusion Reaction' information into the VBECS MAPPING",!,"TABLE file (#6005)."
"RTN","VBECDCM2",32,0)
 .S (CNT,VBECY)=0
"RTN","VBECDCM2",33,0)
 .F  S VBECY=$O(^LAB(65.4,VBECY)) Q:'VBECY  D  ;trans. react.
"RTN","VBECDCM2",34,0)
 ..S VBECY(0)=$G(^LAB(65.4,VBECY,0)) Q:$P(VBECY(0),U,2)'="T"
"RTN","VBECDCM2",35,0)
 ..S CNT=CNT+1 D POP6005(65.4,VBECY,$P(VBECY(0),U),$P(VBECY(0),U,3))
"RTN","VBECDCM2",36,0)
 ..W:'(CNT#100) "."
"RTN","VBECDCM2",37,0)
 ..Q
"RTN","VBECDCM2",38,0)
 .D UNLOCK^VBECDCU2(65.4)
"RTN","VBECDCM2",39,0)
 .Q
"RTN","VBECDCM2",40,0)
 S:+$O(^VBEC(6005,"AA","65.4-"))=65.4 VBECFLG=1
"RTN","VBECDCM2",41,0)
 I  W !!,CNT_" transfusion record"_$S(CNT=1:"",1:"s")_" added.",!
"RTN","VBECDCM2",42,0)
 ;
"RTN","VBECDCM2",43,0)
 ;handle transfusion reaction edit, and add events here
"RTN","VBECDCM2",44,0)
 ;
"RTN","VBECDCM2",45,0)
 E  D
"RTN","VBECDCM2",46,0)
 .S VBECFLG=0 Q:'$$LOCK^VBECDCU2(65.4)  ;RLM 10/27/05
"RTN","VBECDCM2",47,0)
 .S VBECY=0 F  S VBECY=$O(^LAB(65.4,VBECY)) Q:'VBECY  D
"RTN","VBECDCM2",48,0)
 ..S VBECY(0)=$G(^LAB(65.4,VBECY,0)),VBEC01=65.4_"-"_VBECY
"RTN","VBECDCM2",49,0)
 ..S VBECIEN=+$O(^VBEC(6005,"B",VBEC01,0)),VBECIEN(0)=$G(^VBEC(6005,VBECIEN,0))
"RTN","VBECDCM2",50,0)
 ..;
"RTN","VBECDCM2",51,0)
 ..;if transfusion reaction not filed in 6005, add it
"RTN","VBECDCM2",52,0)
 ..I 'VBECIEN,($P(VBECY(0),U,2)="T") S VBECFLG=1 D POP6005(65.4,VBECY,$P(VBECY(0),U),$P(VBECY(0),U,3))  ;if added, no need to perform edit check
"RTN","VBECDCM2",53,0)
 ..Q:'VBECIEN
"RTN","VBECDCM2",54,0)
 ..;
"RTN","VBECDCM2",55,0)
 ..;check if the name or identifier attribute has been edited
"RTN","VBECDCM2",56,0)
 ..;if parent record changes from TRANSFUSION REACTION delete from 6005
"RTN","VBECDCM2",57,0)
 ..I $P(VBECY(0),U,2)'="T" D  Q
"RTN","VBECDCM2",58,0)
 ...K DA,DIK S DA=VBECIEN,DIK="^VBEC(6005,",VBECFLG=1 D ^DIK
"RTN","VBECDCM2",59,0)
 ...K %,DA,DIC,DIK,X,Y
"RTN","VBECDCM2",60,0)
 ...Q
"RTN","VBECDCM2",61,0)
 ..S VBECTOT=0,VBECTOT=$$CHECKSUM^VBECDCU2($P(VBECY(0),U))
"RTN","VBECDCM2",62,0)
 ..S VBECTOT=VBECTOT+$$CHECKSUM^VBECDCU2($P(VBECY(0),U,3))
"RTN","VBECDCM2",63,0)
 ..I VBECTOT'=$P(VBECIEN(0),U,6) D  S VBECFLG=1 K VBECTOT
"RTN","VBECDCM2",64,0)
 ...S:$P(VBECY(0),U)'=$P(VBECIEN(0),U,2) VBECFDA(6005,VBECIEN_",",.02)=$P(VBECY(0),U)
"RTN","VBECDCM2",65,0)
 ...S:$P(VBECY(0),U,3)'=$P(VBECIEN(0),U,3) VBECFDA(6005,VBECIEN_",",.03)=$P(VBECY(0),U,3)
"RTN","VBECDCM2",66,0)
 ...S VBECFDA(6005,VBECIEN_",",.05)="@"
"RTN","VBECDCM2",67,0)
 ...S VBECFDA(6005,VBECIEN_",",.06)=VBECTOT
"RTN","VBECDCM2",68,0)
 ...S VBECFDA(6005,VBECIEN_",",.07)=+$E($$NOW^XLFDT(),1,12)
"RTN","VBECDCM2",69,0)
 ...D FILE^DIE("","VBECFDA")
"RTN","VBECDCM2",70,0)
 ...Q
"RTN","VBECDCM2",71,0)
 ..Q
"RTN","VBECDCM2",72,0)
 .D UNLOCK^VBECDCU2(65.4)
"RTN","VBECDCM2",73,0)
 .Q
"RTN","VBECDCM2",74,0)
 ; handle delete transaction reaction actions here
"RTN","VBECDCM2",75,0)
 D DELETE(65.4)
"RTN","VBECDCM2",76,0)
 I $G(VBECFLG) W !!,"Transfusion Reaction information updated.",! ;RLM 10/27/05
"RTN","VBECDCM2",77,0)
 E  W !!,"Transfusion Reaction information current, not updated.",!
"RTN","VBECDCM2",78,0)
 D XIT
"RTN","VBECDCM2",79,0)
 Q
"RTN","VBECDCM2",80,0)
 ;
"RTN","VBECDCM2",81,0)
XIT ; unlock, kill, and quit
"RTN","VBECDCM2",82,0)
 L -^VBEC(6005)
"RTN","VBECDCM2",83,0)
 K CNT,DIR,DIRUT,DTOUT,DUOUT,VBEC01,VBECANTI,VBECFLD,VBECFLE,VBECFLG,VBECHLP,VBECIEN,VBECRT,VBECTMP,VBECXIT,VBECX,VBECY,VBECYN,X,Y
"RTN","VBECDCM2",84,0)
 K ^TMP($J,"VBEC SUPPLIER")
"RTN","VBECDCM2",85,0)
 Q
"RTN","VBECDCM2",86,0)
 ;
"RTN","VBECDCM2",87,0)
POP6005(VBECFILE,VBECIEN,VBEC01,VBECID,VBECANTI) ; Populate the
"RTN","VBECDCM2",88,0)
 ; VBECS MAPPING TABLE file (#6005) with antigen/antibody & blood
"RTN","VBECDCM2",89,0)
 ; transfusion reaction data.
"RTN","VBECDCM2",90,0)
 ; Input: VBECFILE=VistA file referenced (required)
"RTN","VBECDCM2",91,0)
 ;         VBECIEN=VistA internal entry number referenced
"RTN","VBECDCM2",92,0)
 ;          VBEC01=value of the .01 field (required, external)
"RTN","VBECDCM2",93,0)
 ;          VBECID=file identifier
"RTN","VBECDCM2",94,0)
 ;        VBECANTI=antibody/antigen identifier
"RTN","VBECDCM2",95,0)
 ;
"RTN","VBECDCM2",96,0)
 S VBECTOT=0,VBECTOT=$$CHECKSUM^VBECDCU2(VBEC01)
"RTN","VBECDCM2",97,0)
 S VBECTOT=VBECTOT+$$CHECKSUM^VBECDCU2(VBECID)
"RTN","VBECDCM2",98,0)
 S:$G(VBECANTI)'="" VBECTOT=VBECTOT+$$CHECKSUM^VBECDCU2(VBECANTI)
"RTN","VBECDCM2",99,0)
 F  S COUNT=(+$O(^VBEC(6005,$C(32)),-1)+1) Q:'($D(^VBEC(6005,COUNT,0))#2)
"RTN","VBECDCM2",100,0)
 S VBECFDA(6005,"+"_COUNT_",",.01)=VBECFILE_"-"_VBECIEN
"RTN","VBECDCM2",101,0)
 S VBECFDA(6005,"+"_COUNT_",",.02)=VBEC01
"RTN","VBECDCM2",102,0)
 S:$G(VBECID)'="" VBECFDA(6005,"+"_COUNT_",",.03)=VBECID
"RTN","VBECDCM2",103,0)
 S:$G(VBECANTI)'="" VBECFDA(6005,"+"_COUNT_",",.04)=VBECANTI
"RTN","VBECDCM2",104,0)
 S VBECFDA(6005,"+"_COUNT_",",.06)=VBECTOT
"RTN","VBECDCM2",105,0)
 S VBECFDA(6005,"+"_COUNT_",",.07)=+$E($$NOW^XLFDT(),1,12)
"RTN","VBECDCM2",106,0)
 D UPDATE^DIE("E","VBECFDA") K COUNT,VBECFDA,VBECTOT
"RTN","VBECDCM2",107,0)
 Q
"RTN","VBECDCM2",108,0)
 ;
"RTN","VBECDCM2",109,0)
DELETE(VBECFN) ; delete individual record from file 6005 that no longer exist
"RTN","VBECDCM2",110,0)
 ; in their parent files.
"RTN","VBECDCM2",111,0)
 ;Input: VBECFN=the file number of the parent file
"RTN","VBECDCM2",112,0)
 ;return: VBECFLG=indicates if updates (deletions) to file 6005 occurred
"RTN","VBECDCM2",113,0)
 N VBEC6005,VBECIEN,VBECRT,VBECX K %,DA,DIC,DIK,X,Y
"RTN","VBECDCM2",114,0)
 S VBECX=VBECFN_"-",VBECRT=$$ROOT^DILFD(VBECFN,"",1)
"RTN","VBECDCM2",115,0)
 F  S VBECX=$O(^VBEC(6005,"B",VBECX)) Q:VBECX=""!(+VBECX'=VBECFN)  D
"RTN","VBECDCM2",116,0)
 .S VBEC6005=$O(^VBEC(6005,"B",VBECX,0)) Q:VBEC6005=0
"RTN","VBECDCM2",117,0)
 .S VBECIEN=+$P(VBECX,"-",2)
"RTN","VBECDCM2",118,0)
 .I $D(@VBECRT@(VBECIEN,0))#2 Q  ;data resides in the parent file
"RTN","VBECDCM2",119,0)
 .S DIK="^VBEC(6005,",DA=VBEC6005,VBECFLG=1 D ^DIK K %,DA,DIC,DIK,X,Y
"RTN","VBECDCM2",120,0)
 Q
"RTN","VBECDCM2",121,0)
 ;
"RTN","VBECDCMP")
0^9^B16912213
"RTN","VBECDCMP",1,0)
VBECDCMP ;hoifo/gjc-print mapped data from VBECS MAPPING TABLE (#6005);Nov 21, 2002
"RTN","VBECDCMP",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCMP",3,0)
 ;
"RTN","VBECDCMP",4,0)
 ;Medical Device #:
"RTN","VBECDCMP",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCMP",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCMP",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCMP",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCMP",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCMP",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCMP",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCMP",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCMP",13,0)
 ;regulations.
"RTN","VBECDCMP",14,0)
 ;
"RTN","VBECDCMP",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCMP",16,0)
 ;Call to $$S^%ZTLOAD is supported by IA: 10063
"RTN","VBECDCMP",17,0)
 ;Call to $$EXTERNAL^DILFD is supported by IA: 2055
"RTN","VBECDCMP",18,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCMP",19,0)
 ;Call to $$DT^XLFDT is supported by IA: 10103
"RTN","VBECDCMP",20,0)
 ;Call to $$FMTE^XLFDT is supported by IA: 10103
"RTN","VBECDCMP",21,0)
 ;Call to $$CJ^XLFSTR is supported by IA: 10104
"RTN","VBECDCMP",22,0)
 ;Call to EN^XUTMDEVQ is supported by IA: 1519
"RTN","VBECDCMP",23,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCMP",24,0)
 ;
"RTN","VBECDCMP",25,0)
EN ; entry point for data mapping report.  this is an evocable entry point
"RTN","VBECDCMP",26,0)
 ; for the option: VBEC PRINT SQL/VISTA MAPPINGS.
"RTN","VBECDCMP",27,0)
 ;
"RTN","VBECDCMP",28,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,DUZ=.5:1,1:0) W !!?3,$C(7),"DUZ & DUZ(0) must be defined to an active user (not POSTMASTER) in order to",!?3,"proceed." Q
"RTN","VBECDCMP",29,0)
 ;
"RTN","VBECDCMP",30,0)
 ; initialize the error trap
"RTN","VBECDCMP",31,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCMP",32,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCMP",33,0)
 ;
"RTN","VBECDCMP",34,0)
RPT6005 ; Select the mapped VistA attribute you wish to examine. 
"RTN","VBECDCMP",35,0)
 K DIR S DIR(0)="S^AA:Antigen/Antibody;TR:Transfusion Reaction",DIR("A")="Select mapped data attribute to display"
"RTN","VBECDCMP",36,0)
 S DIR("?",1)="Enter 'AA' for Antibodies and Antigens (Vista File: Function Field #61.3)"
"RTN","VBECDCMP",37,0)
 S DIR("?",2)="Enter 'TR' for Transfusion Reaction (VistA File: Blood Bank Utility"
"RTN","VBECDCMP",38,0)
 S DIR("?")="#65.4)" D ^DIR
"RTN","VBECDCMP",39,0)
 I $D(DIRUT) D EXIT Q
"RTN","VBECDCMP",40,0)
 S VBECFILE=$S(Y="AA":61.3,1:65.4),VBECATT=Y(0)
"RTN","VBECDCMP",41,0)
 ;
"RTN","VBECDCMP",42,0)
 ; check to see that data exists in the VBECS MAPPING TABLE (#6005) 
"RTN","VBECDCMP",43,0)
 ; file for the attribute selected.
"RTN","VBECDCMP",44,0)
 I $O(^VBEC(6005,"B",$S(VBECFILE'=66.01:VBECFILE_"-",1:VBECFILE)))="" D  Q
"RTN","VBECDCMP",45,0)
 .W !!,"There is no "_VBECATT_" data in the VBECS MAPPING TABLE (#6005)"
"RTN","VBECDCMP",46,0)
 .W !,"file to be printed.",$C(7)
"RTN","VBECDCMP",47,0)
 .Q
"RTN","VBECDCMP",48,0)
 ;
"RTN","VBECDCMP",49,0)
 S VBECR="GO6005^VBECDCMP"
"RTN","VBECDCMP",50,0)
 F I="DUZ","VBECFILE","VBECATT" S VBECS(I)=""
"RTN","VBECDCMP",51,0)
 K I S VBECD="VBECS display current data mapping relationships"
"RTN","VBECDCMP",52,0)
 S VBECZ="MQ" D EN^XUTMDEVQ(VBECR,VBECD,.VBECS,,1)
"RTN","VBECDCMP",53,0)
 I +$G(ZTSK)>0 W !!,"Task Number: "_ZTSK,!
"RTN","VBECDCMP",54,0)
 ;
"RTN","VBECDCMP",55,0)
EXIT ;clean up the symbol table; exit the utility
"RTN","VBECDCMP",56,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT,POP,VBECATT,VBECFIEN,VBECIEN,VBECD,VBECFILE,VBECR,VBECS,VBECY,VBECZ,X,Y,ZTSK
"RTN","VBECDCMP",57,0)
 Q
"RTN","VBECDCMP",58,0)
 ;
"RTN","VBECDCMP",59,0)
GO6005 ; print mapping data information from the VBECS MAPPING TABLE (#6005)
"RTN","VBECDCMP",60,0)
 ; file.
"RTN","VBECDCMP",61,0)
 Q:'$G(VBECFILE)  S:$D(ZTQUEUED) ZTREQ="@"
"RTN","VBECDCMP",62,0)
 ;
"RTN","VBECDCMP",63,0)
 S PAGE=1,$P(LINE,"-",(IOM+1))="",TODAY=$$FMTE^XLFDT($$DT^XLFDT(),"1P")
"RTN","VBECDCMP",64,0)
 S (VBECXIT,VBECSTOP)=0,VBECGUID="" D HDR
"RTN","VBECDCMP",65,0)
 F  S VBECGUID=$O(^VBEC(6005,"AB",VBECFILE,VBECGUID)) Q:VBECGUID=""  D  Q:VBECXIT!(VBECSTOP)
"RTN","VBECDCMP",66,0)
 .S VBECIEN=0
"RTN","VBECDCMP",67,0)
 .F  S VBECIEN=$O(^VBEC(6005,"AB",VBECFILE,VBECGUID,VBECIEN)) Q:'VBECIEN  D  Q:VBECXIT!(VBECSTOP)
"RTN","VBECDCMP",68,0)
 ..S VBECY(0)=$G(^VBEC(6005,VBECIEN,0))
"RTN","VBECDCMP",69,0)
 ..S VBECFIEN=$P(VBECY(0),U),VBECNAME=$P(VBECY(0),U,2)
"RTN","VBECDCMP",70,0)
 ..S VBECNME=$P($G(^VBEC(6007,VBECGUID,0)),U)
"RTN","VBECDCMP",71,0)
 ..S VBECANTI=$$EXTERNAL^DILFD(6005,.04,,$P(VBECY(0),U,4))
"RTN","VBECDCMP",72,0)
 ..I $$S^%ZTLOAD() S (ZTSTOP,VBECSTOP)=1 Q
"RTN","VBECDCMP",73,0)
 ..W !!,"VistA FileMan File: "_$P(VBECFIEN,"-")
"RTN","VBECDCMP",74,0)
 ..W:$P(VBECFIEN,"-",2) !,"VistA FileMan IEN: "_$P(VBECFIEN,"-",2)
"RTN","VBECDCMP",75,0)
 ..W !,"Standard Record Name: "_VBECNME
"RTN","VBECDCMP",76,0)
 ..I $Y>(IOSL-4) D EOS Q:VBECXIT
"RTN","VBECDCMP",77,0)
 ..W !,"VistA Record Name : "_VBECNAME
"RTN","VBECDCMP",78,0)
 ..W:VBECANTI'="" !,"Antigen/Antibody  : "_VBECANTI
"RTN","VBECDCMP",79,0)
 ..I $Y>(IOSL-4) D EOS
"RTN","VBECDCMP",80,0)
 ..Q
"RTN","VBECDCMP",81,0)
 .Q
"RTN","VBECDCMP",82,0)
 W:$G(VBECFIEN)="" !,$$CJ^XLFSTR("*** No Records To Print ***",IOM)
"RTN","VBECDCMP",83,0)
 ;
"RTN","VBECDCMP",84,0)
 K LINE,PAGE,POP,TODAY,VBEC01,VBECANTI,VBECIEN,VBECGUID,VBECNAME,VBECNME,VBECXIT,VBECSTOP
"RTN","VBECDCMP",85,0)
 Q
"RTN","VBECDCMP",86,0)
 ;
"RTN","VBECDCMP",87,0)
EOS ; end of screen (eos) check & refresh screen action
"RTN","VBECDCMP",88,0)
 ; check to see if additional data exist to print, if not exit w/o
"RTN","VBECDCMP",89,0)
 ; issuing the eos prompt.
"RTN","VBECDCMP",90,0)
 ;
"RTN","VBECDCMP",91,0)
 I $E(IOST)="C" K DIR S DIR(0)="E" D ^DIR S VBECXIT=$S(Y'>0:1,1:0)
"RTN","VBECDCMP",92,0)
 K DIR,X,Y Q:VBECXIT
"RTN","VBECDCMP",93,0)
HDR ; draw header
"RTN","VBECDCMP",94,0)
 W:($E(IOST)="C")!(PAGE>1) @IOF
"RTN","VBECDCMP",95,0)
 W !,$$CJ^XLFSTR("VistA Data Mapped To Standard SQL Server Attributes",IOM)
"RTN","VBECDCMP",96,0)
 W !,"Date: ",TODAY,?69,"Page: ",PAGE,!,LINE
"RTN","VBECDCMP",97,0)
 S PAGE=PAGE+1,HEADER="Attribute being mapped: "_VBECATT
"RTN","VBECDCMP",98,0)
 W !,$$CJ^XLFSTR(HEADER,IOM) K HEADER
"RTN","VBECDCMP",99,0)
 Q
"RTN","VBECDCMP",100,0)
 ;
"RTN","VBECDCNM")
0^10^B13224428
"RTN","VBECDCNM",1,0)
VBECDCNM ;hoifo/gjc-print unmapped data from 61.3 or 65.4;Nov 21, 2002
"RTN","VBECDCNM",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCNM",3,0)
 ;
"RTN","VBECDCNM",4,0)
 ;Medical Device #:
"RTN","VBECDCNM",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCNM",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCNM",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCNM",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCNM",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCNM",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCNM",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCNM",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCNM",13,0)
 ;regulations.
"RTN","VBECDCNM",14,0)
 ;
"RTN","VBECDCNM",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCNM",16,0)
 ;Call to $$S^%ZTLOAD is supported by IA: 10063
"RTN","VBECDCNM",17,0)
 ;Call to $$EXTERNAL^DILFD is supported by IA: 2055
"RTN","VBECDCNM",18,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCNM",19,0)
 ;Call to $$DT^XLFDT is supported by IA: 10103
"RTN","VBECDCNM",20,0)
 ;Call to $$FMTE^XLFDT is supported by IA: 10103
"RTN","VBECDCNM",21,0)
 ;Call to $$CJ^XLFSTR is supported by IA: 10104
"RTN","VBECDCNM",22,0)
 ;Call to EN^XUTMDEVQ is supported by IA: 1519
"RTN","VBECDCNM",23,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCNM",24,0)
 ;
"RTN","VBECDCNM",25,0)
EN ; entry point for unmapped data report.  this is an evocable entry point
"RTN","VBECDCNM",26,0)
 ; for the option: ???.
"RTN","VBECDCNM",27,0)
 ;
"RTN","VBECDCNM",28,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,DUZ=.5:1,1:0) W !!?3,$C(7),"DUZ & DUZ(0) must be defined to an active user (not POSTMASTER) in order to",!?3,"proceed." Q
"RTN","VBECDCNM",29,0)
 ;
"RTN","VBECDCNM",30,0)
RPT6005 ; Select the unmapped VistA attribute you wish to examine. 
"RTN","VBECDCNM",31,0)
 ;
"RTN","VBECDCNM",32,0)
 ; initialize the error trap code
"RTN","VBECDCNM",33,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCNM",34,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCNM",35,0)
 ;
"RTN","VBECDCNM",36,0)
 S VBECS=$$ATTR^VBECDCU1() ; select data attribute family
"RTN","VBECDCNM",37,0)
 I VBECS="^" D EXIT Q
"RTN","VBECDCNM",38,0)
 S VBECFILE=$P(VBECS,U),VBECATT=$P(VBECS,U,2)
"RTN","VBECDCNM",39,0)
 ;
"RTN","VBECDCNM",40,0)
 K VBECS S VBECR="GO^VBECDCNM"
"RTN","VBECDCNM",41,0)
 F I="DUZ","VBECFILE","VBECATT" S VBECS(I)=""
"RTN","VBECDCNM",42,0)
 K I S VBECD="VBECS display currently unmapped VistA Blood bank data"
"RTN","VBECDCNM",43,0)
 S VBECZ="MQ" D EN^XUTMDEVQ(VBECR,VBECD,.VBECS,,1)
"RTN","VBECDCNM",44,0)
 I +$G(ZTSK)>0 W !!,"Task Number: "_ZTSK,!
"RTN","VBECDCNM",45,0)
 ;
"RTN","VBECDCNM",46,0)
EXIT ;clean up the symbol table; exit the utility
"RTN","VBECDCNM",47,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT,POP,VBECATT,VBECIEN,VBECD,VBECFILE,VBECR,VBECS,VBECZ,X,Y,ZTSK
"RTN","VBECDCNM",48,0)
 Q
"RTN","VBECDCNM",49,0)
 ;
"RTN","VBECDCNM",50,0)
GO ; print unmapped data from file: 61.3 or 65.4
"RTN","VBECDCNM",51,0)
 ;
"RTN","VBECDCNM",52,0)
 ;Note: VBECFILE will either be 61.3 or 65.4
"RTN","VBECDCNM",53,0)
 Q:'$G(VBECFILE)  S:$D(ZTQUEUED) ZTREQ="@"
"RTN","VBECDCNM",54,0)
 ;
"RTN","VBECDCNM",55,0)
 S PAGE=1,$P(LINE,"-",(IOM+1))="",TODAY=$$FMTE^XLFDT($$DT^XLFDT(),"1P")
"RTN","VBECDCNM",56,0)
 D HDR S (VBECXIT,VBECSTOP)=0 S VBEC02=""
"RTN","VBECDCNM",57,0)
 F  S VBEC02=$O(^VBEC(6005,"N",VBEC02)) Q:VBEC02=""  D  Q:VBECXIT!(VBECSTOP)
"RTN","VBECDCNM",58,0)
 .S VBECIEN=0
"RTN","VBECDCNM",59,0)
 .F  S VBECIEN=$O(^VBEC(6005,"N",VBEC02,VBECIEN)) Q:'VBECIEN  D  Q:VBECXIT!(VBECSTOP)
"RTN","VBECDCNM",60,0)
 ..S VBECY(0)=$G(^VBEC(6005,VBECIEN,0))
"RTN","VBECDCNM",61,0)
 ..Q:+$P(VBECY(0),U)'=VBECFILE  ;sorting by file, printing by alpha
"RTN","VBECDCNM",62,0)
 ..Q:$P(VBECY(0),U,5)'=""  ;GUID chk
"RTN","VBECDCNM",63,0)
 ..S VBECFIEN=$P(VBECY(0),U),VBECNAME=$P(VBECY(0),U,2)
"RTN","VBECDCNM",64,0)
 ..S VBECANTI=$$EXTERNAL^DILFD(6005,.04,,$P(VBECY(0),U,4))
"RTN","VBECDCNM",65,0)
 ..I $$S^%ZTLOAD() S (ZTSTOP,VBECSTOP)=1 Q
"RTN","VBECDCNM",66,0)
 ..;
"RTN","VBECDCNM",67,0)
 ..W !,VBECNAME W:VBECFILE=61.3 ?34,VBECANTI W:VBECFILE=66 ?44,$P(VBECY(0),U,3)
"RTN","VBECDCNM",68,0)
 ..I $Y>(IOSL-4) D EOS
"RTN","VBECDCNM",69,0)
 ..Q
"RTN","VBECDCNM",70,0)
 .Q
"RTN","VBECDCNM",71,0)
 ;
"RTN","VBECDCNM",72,0)
 W:$G(VBECFIEN)="" !,$$CJ^XLFSTR("*** No Records To Print ***",IOM)
"RTN","VBECDCNM",73,0)
 K LINE,PAGE,POP,TODAY,VBEC02,VBECANTI,VBECFIEN,VBECIEN,VBECNAME,VBECXIT,VBECY,VBECSTOP
"RTN","VBECDCNM",74,0)
 Q
"RTN","VBECDCNM",75,0)
 ;
"RTN","VBECDCNM",76,0)
EOS ; end of screen (eos) check & refresh screen action
"RTN","VBECDCNM",77,0)
 ; check to see if additional data, for this particular file,
"RTN","VBECDCNM",78,0)
 ; exists to print, if not exit w/o issuing the eos prompt.
"RTN","VBECDCNM",79,0)
 ;
"RTN","VBECDCNM",80,0)
 Q:$O(^VBEC(6005,"B",VBECFIEN))=""
"RTN","VBECDCNM",81,0)
 ;
"RTN","VBECDCNM",82,0)
 I $E(IOST)="C" K DIR S DIR(0)="E" D ^DIR S VBECXIT=$S(Y'>0:1,1:0)
"RTN","VBECDCNM",83,0)
 K DIR,X,Y Q:VBECXIT
"RTN","VBECDCNM",84,0)
HDR ; draw header
"RTN","VBECDCNM",85,0)
 W:($E(IOST)="C")!(PAGE>1) @IOF
"RTN","VBECDCNM",86,0)
 W !,$$CJ^XLFSTR("VistA Data Not Mapped To Standard SQL Server Attributes",80)
"RTN","VBECDCNM",87,0)
 W !,"Date: ",TODAY,?69,"Page: ",PAGE
"RTN","VBECDCNM",88,0)
 W:VBECFILE=61.3 !,"Antigen/Antibody",?34,"Identifier"
"RTN","VBECDCNM",89,0)
 I VBECFILE=65.4 W !,"Transfusion Reaction"
"RTN","VBECDCNM",90,0)
 W:VBECFILE=66 !,"Blood Product",?44,"Blood Product Code"
"RTN","VBECDCNM",91,0)
 W:VBECFILE=66.01 !,"Supplier"
"RTN","VBECDCNM",92,0)
 W !,LINE S PAGE=PAGE+1
"RTN","VBECDCNM",93,0)
 Q
"RTN","VBECDCNM",94,0)
 ;
"RTN","VBECDCR")
0^11^B30083905
"RTN","VBECDCR",1,0)
VBECDCR ;hoifo/gjc-data conversion & pre-implementation reporting mechanism;Nov 21, 2002
"RTN","VBECDCR",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCR",3,0)
 ;
"RTN","VBECDCR",4,0)
 ;Medical Device #:
"RTN","VBECDCR",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCR",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCR",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCR",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCR",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCR",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCR",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCR",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCR",13,0)
 ;regulations.
"RTN","VBECDCR",14,0)
 ;
"RTN","VBECDCR",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCR",16,0)
 ;Call to $$S^%ZTLOAD is supported by IA: 10063
"RTN","VBECDCR",17,0)
 ;Call to FILE^DID is supported by IA: 2052
"RTN","VBECDCR",18,0)
 ;Call to $$EXTERNAL^DILFD is supported by IA: 2055
"RTN","VBECDCR",19,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCR",20,0)
 ;Call to ^DIWP is supported by IA: 10011
"RTN","VBECDCR",21,0)
 ;Call to $$DT^XLFDT is supported by IA: 10103
"RTN","VBECDCR",22,0)
 ;Call to $$FMTE^XLFDT is supported by IA: 10103
"RTN","VBECDCR",23,0)
 ;Call to $$CJ^XLFSTR is supported by IA: 10104
"RTN","VBECDCR",24,0)
 ;Call to EN^XUTMDEVQ is supported by IA: 1519
"RTN","VBECDCR",25,0)
 ;global read on ^DPT(DFN,0) for patient name supported by IA: 10035
"RTN","VBECDCR",26,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCR",27,0)
 ;
"RTN","VBECDCR",28,0)
EN ; entry point for anomaly report
"RTN","VBECDCR",29,0)
 ;
"RTN","VBECDCR",30,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,DUZ=.5:1,1:0) W !!?3,$C(7),"DUZ & DUZ(0) must be defined to an active user (not POSTMASTER) in order to",!?3,"proceed." Q
"RTN","VBECDCR",31,0)
 ;
"RTN","VBECDCR",32,0)
 ; initialize the error trap
"RTN","VBECDCR",33,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCR",34,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCR",35,0)
 ;
"RTN","VBECDCR",36,0)
 ; check to see if anomaly data exists for the most recent record in the
"RTN","VBECDCR",37,0)
 ; VBECS DATA INTEGRITY/CONVERSION STATISTICS (#6001) file.
"RTN","VBECDCR",38,0)
 S VBECIEN=$O(^VBEC(6001,$C(32)),-1)
"RTN","VBECDCR",39,0)
 I '$O(^VBEC(6001,VBECIEN,"ERR",0)) D  Q
"RTN","VBECDCR",40,0)
 .K VBECIEN
"RTN","VBECDCR",41,0)
 .W !!?3,"There are no occurrences of VistA Blood Bank data anomalies on file to be",!?3,"displayed.",$C(7)
"RTN","VBECDCR",42,0)
 .Q
"RTN","VBECDCR",43,0)
 ;
"RTN","VBECDCR",44,0)
 S VBECR="START^VBECDCR",VBECS("DUZ")="",VBECS("VBECIEN")=""
"RTN","VBECDCR",45,0)
 S VBECZ="MQ",VBECD="VBECS data anomaly reporting process"
"RTN","VBECDCR",46,0)
 D EN^XUTMDEVQ(VBECR,VBECD,.VBECS,,1)
"RTN","VBECDCR",47,0)
 I +$G(ZTSK)>0 W !!,"Task Number: "_ZTSK,!
"RTN","VBECDCR",48,0)
 K VBECIEN,VBECD,VBECR,VBECS,VBECZ,ZTSK
"RTN","VBECDCR",49,0)
 Q
"RTN","VBECDCR",50,0)
 ;
"RTN","VBECDCR",51,0)
START ; display the data
"RTN","VBECDCR",52,0)
 ;
"RTN","VBECDCR",53,0)
 ; VBEC(1)=process start timestamp (internal)
"RTN","VBECDCR",54,0)
 ; VBEC(2)=process (internal)
"RTN","VBECDCR",55,0)
 ; VBEC(3)=process finish timestamp (internal)
"RTN","VBECDCR",56,0)
 ; VBEC(4)=user responsible for process (internal)
"RTN","VBECDCR",57,0)
 ; VBECX(1)=process start timestamp (external)
"RTN","VBECDCR",58,0)
 ; VBECX(2)=process (external)
"RTN","VBECDCR",59,0)
 ; VBECX(3)=process finish timestamp (external)
"RTN","VBECDCR",60,0)
 ; VBECX(4)=user responsible for process (external)
"RTN","VBECDCR",61,0)
 ; VBEC1A(1)=file navigated (pointer)
"RTN","VBECDCR",62,0)
 ; VBEC1A(2)=ien of record in file navigated
"RTN","VBECDCR",63,0)
 ; VBEC1A(3)=file navigate to (pointer)
"RTN","VBECDCR",64,0)
 ; VBEC1A(4)=ien of record in file navigated to
"RTN","VBECDCR",65,0)
 ; VBEC1A(5)=lrdfn1 dup blood component/blood component id (same patient)
"RTN","VBECDCR",66,0)
 ; VBEC1A(6)=lrdfn2 dup blood component/blood component id (diff patients)
"RTN","VBECDCR",67,0)
 ; VBEC1A(7)=blood component (pointer)
"RTN","VBECDCR",68,0)
 ; VBEC1A(8)=blood component id
"RTN","VBECDCR",69,0)
 ; VBEC1A(9)=user readable data integrity issue
"RTN","VBECDCR",70,0)
 ;
"RTN","VBECDCR",71,0)
 S:$D(ZTQUEUED) ZTREQ="@" S PAGE=1,(VBEC1,VBECXIT,VBECSTOP)=0,U="^"
"RTN","VBECDCR",72,0)
 S $P(LINE,"*",81)="",TODAY=$$FMTE^XLFDT($$DT^XLFDT(),1)
"RTN","VBECDCR",73,0)
 S VBEC(0)=$G(^VBEC(6001,VBECIEN,0))
"RTN","VBECDCR",74,0)
 F I=1:1:4 S VBEC(I)=$P(VBEC(0),U,I) ;internal
"RTN","VBECDCR",75,0)
 F I=1:1:4 S VBECX(I)=$$EXTERNAL^DILFD(6001,".0"_I,"L",VBEC(I)) ;external
"RTN","VBECDCR",76,0)
 D HDR ; header output
"RTN","VBECDCR",77,0)
 F  S VBEC1=$O(^VBEC(6001,VBECIEN,"ERR",VBEC1)) Q:'VBEC1  D  Q:VBECXIT!(VBECSTOP)
"RTN","VBECDCR",78,0)
 .I $$S^%ZTLOAD() S (ZTSTOP,VBECSTOP)=1 Q
"RTN","VBECDCR",79,0)
 .S VBECERR(0)=$G(^VBEC(6001,VBECIEN,"ERR",VBEC1,0))
"RTN","VBECDCR",80,0)
 .F I=1:1:9 S VBEC1A(I)=$P(VBECERR(0),U,I)
"RTN","VBECDCR",81,0)
 .S ERRTOT(VBEC1A(1))=+$G(ERRTOT(VBEC1A(1)))+1
"RTN","VBECDCR",82,0)
 .D FILE^DID(VBEC1A(1),"","NAME","VBECFR")
"RTN","VBECDCR",83,0)
 .D:VBEC1A(3) FILE^DID(VBEC1A(3),"","NAME","VBECTO")
"RTN","VBECDCR",84,0)
 .S VBECOMP=$$EXTERNAL^DILFD(6001.01,.07,"L",VBEC1A(7)) ; value or null
"RTN","VBECDCR",85,0)
 .S X=VBEC1A(9),DIWL=1,DIWR=55,DIWF="" D ^DIWP ; format text...
"RTN","VBECDCR",86,0)
 .W !,"File Navigated: "_VBECFR("NAME")_"("_VBEC1A(1)_")"
"RTN","VBECDCR",87,0)
 .I $Y>(IOSL-4) D EOS Q:VBECXIT
"RTN","VBECDCR",88,0)
 .W:VBEC1A(2) !,$$NAME(VBEC1A(1),VBEC1A(2))
"RTN","VBECDCR",89,0)
 .W:VBEC1A(3) !,"File Navigated To: "_VBECTO("NAME")_"("_VBEC1A(3)_")"
"RTN","VBECDCR",90,0)
 .I $Y>(IOSL-4) D EOS Q:VBECXIT
"RTN","VBECDCR",91,0)
 .W:VBEC1A(4) !,$$NAME(VBEC1A(3),VBEC1A(4))
"RTN","VBECDCR",92,0)
 .W:VBEC1A(5) !,"Similar Blood Component/Blood Component ID for Lab Data patient"
"RTN","VBECDCR",93,0)
 .W $S((VBEC1A(5)&VBEC1A(6)):"s:",(VBEC1A(5)&'VBEC1A(6)):":",1:"")
"RTN","VBECDCR",94,0)
 .I $Y>(IOSL-4) D EOS Q:VBECXIT
"RTN","VBECDCR",95,0)
 .W:VBEC1A(5) !?3,"LRDFN (IEN in Lab Data file): "_VBEC1A(5)
"RTN","VBECDCR",96,0)
 .W:VBEC1A(6) !?3,"LRDFN (conflicting patient IEN): "_VBEC1A(6)
"RTN","VBECDCR",97,0)
 .I $Y>(IOSL-4) D EOS Q:VBECXIT
"RTN","VBECDCR",98,0)
 .W:VBEC1A(7) !,"Blood Component: "_VBECOMP
"RTN","VBECDCR",99,0)
 .W:VBEC1A(8)'="" !,"Blood Component ID: "_VBEC1A(8)
"RTN","VBECDCR",100,0)
 .I $Y>(IOSL-4) D EOS Q:VBECXIT
"RTN","VBECDCR",101,0)
 .W !,"Data Integrity Issue: " S A=0
"RTN","VBECDCR",102,0)
 .I $Y>(IOSL-4) D EOS Q:VBECXIT  W !
"RTN","VBECDCR",103,0)
 .F  S A=$O(^UTILITY($J,"W",DIWL,A)) Q:'A!(VBECXIT)  D
"RTN","VBECDCR",104,0)
 ..I $Y>(IOSL-4) D EOS Q:VBECXIT  W !
"RTN","VBECDCR",105,0)
 ..W ?22,$G(^UTILITY($J,"W",DIWL,A,0)),!
"RTN","VBECDCR",106,0)
 ..Q
"RTN","VBECDCR",107,0)
 .K A,DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,DN,VBEC1A,VBECFR,VBECOMP,VBECTO,X,Z,^UTILITY($J,"W")
"RTN","VBECDCR",108,0)
 .Q
"RTN","VBECDCR",109,0)
 ;
"RTN","VBECDCR",110,0)
ERRTOT ; print error total for each file
"RTN","VBECDCR",111,0)
 I $Y>(IOSL-6) D EOS Q:VBECXIT  W !
"RTN","VBECDCR",112,0)
 S I=0 F  S I=$O(ERRTOT(I)) Q:'I  W !,"Total number of anomalies for file "_I_": "_$G(ERRTOT(I))
"RTN","VBECDCR",113,0)
 ;
"RTN","VBECDCR",114,0)
XIT ; cleanup after yourself before you go...
"RTN","VBECDCR",115,0)
 K A,DIRUT,DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,DN,DTOUT,DUOUT,ERRTOT,I,LINE,PAGE,TODAY,VBEC,VBEC1,VBEC1A,VBECERR,VBECFR,VBECOMP,VBECTO,VBECX,VBECXIT,X,Z,^UTILITY($J,"W"),VBECSTOP
"RTN","VBECDCR",116,0)
 Q
"RTN","VBECDCR",117,0)
 ;
"RTN","VBECDCR",118,0)
EOS ; end of screen check & refresh screen action
"RTN","VBECDCR",119,0)
 I $E(IOST)="C" K DIR S DIR(0)="E" D ^DIR S VBECXIT=$S(Y'>0:1,1:0) K DIR,X,Y
"RTN","VBECDCR",120,0)
 Q:VBECXIT
"RTN","VBECDCR",121,0)
HDR ; draw header
"RTN","VBECDCR",122,0)
 W:($E(IOST)="C")!(PAGE>1) @IOF
"RTN","VBECDCR",123,0)
 W !,$$CJ^XLFSTR("VistA Blood Bank Data Anomalies Report",80)
"RTN","VBECDCR",124,0)
 W !,"Date: ",TODAY,?69,"Page: ",PAGE S PAGE=PAGE+1
"RTN","VBECDCR",125,0)
 W !,"Process initiated by: "_$E(VBECX(4),1,25),?49,"Process: "_VBECX(2)
"RTN","VBECDCR",126,0)
 W !,"Start time: "_VBECX(1),?49,"Finish time: "_VBECX(3),!,LINE
"RTN","VBECDCR",127,0)
 Q
"RTN","VBECDCR",128,0)
 ;
"RTN","VBECDCR",129,0)
NAME(FILE,IEN) ; Using file number and ien, determine the value of the .01
"RTN","VBECDCR",130,0)
 ; field and pass it back (along with the data descriptor).
"RTN","VBECDCR",131,0)
 ; input: FILE-file number, either 2, 63, 65, or 66
"RTN","VBECDCR",132,0)
 ;        IEN-internal entry number of the record in question
"RTN","VBECDCR",133,0)
 ; output: (examples) Patient Name: Doe,John, Lab Data ID: 12345,
"RTN","VBECDCR",134,0)
 ;         Unit ID: ABC123, Blood Component: CPDA-1 RED BLOOD CELLS
"RTN","VBECDCR",135,0)
 ;
"RTN","VBECDCR",136,0)
 Q:FILE=2 "Patient Name: "_$P($G(^DPT(IEN,0)),U)_$S($P($G(^DPT(IEN,0)),U)]"":" ("_$E($P($G(^DPT(IEN,0)),U,9),1,3)_"-"_$E($P($G(^DPT(IEN,0)),U,9),4,5)_"-"_$E($P($G(^DPT(IEN,0)),U,9),6,9)_")",1:"")
"RTN","VBECDCR",137,0)
 Q:FILE=63 "Lab Data ID: "_$P($G(^LR(IEN,0)),U)
"RTN","VBECDCR",138,0)
 Q:FILE=65 "Unit ID: "_$P($G(^LRD(65,IEN,0)),U)
"RTN","VBECDCR",139,0)
 Q:FILE=66 "Blood Component: "_$P($G(^LAB(66,IEN,0)),U)
"RTN","VBECDCR",140,0)
 ;
"RTN","VBECDCSP")
0^12^B1068327
"RTN","VBECDCSP",1,0)
VBECDCSP ;hoifo/gjc-site parameter enter/edit (#6000);Nov 21, 2002
"RTN","VBECDCSP",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCSP",3,0)
 ;
"RTN","VBECDCSP",4,0)
 ;Medical Device #:
"RTN","VBECDCSP",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCSP",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCSP",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCSP",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCSP",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCSP",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCSP",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCSP",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCSP",13,0)
 ;regulations.
"RTN","VBECDCSP",14,0)
 ;
"RTN","VBECDCSP",15,0)
 ;Call to ^DIC is supported by IA: 10006
"RTN","VBECDCSP",16,0)
 ;Call to ^DIE is supported by IA: 10018
"RTN","VBECDCSP",17,0)
 ;Call to GET1^DIQ is supported by IA: 2056
"RTN","VBECDCSP",18,0)
 ;Call to KSP^XUPARAM is supported by IA: 2541
"RTN","VBECDCSP",19,0)
 ;
"RTN","VBECDCSP",20,0)
EN ; entry point for site parameter enter/edit
"RTN","VBECDCSP",21,0)
 S (DIC,DIE)="^VBEC(6000,",DIC("A")="Select Facility: ",DIC(0)="QEALMNZ"
"RTN","VBECDCSP",22,0)
 S VBECDFLT=$$KSP^XUPARAM("INST")
"RTN","VBECDCSP",23,0)
 S:VBECDFLT DIC("B")=$$GET1^DIQ(4,VBECDFLT,.01)
"RTN","VBECDCSP",24,0)
 D ^DIC I Y=-1 D XIT Q
"RTN","VBECDCSP",25,0)
 S DA=+Y,DIE("NO^")="BACK",DR=".06R;.07R//VBECS DATA CONVERSION" D ^DIE
"RTN","VBECDCSP",26,0)
XIT ; kill and quit
"RTN","VBECDCSP",27,0)
 K %,D0,DA,DDH,DI,DIC,DIE,DQ,DR,DTOUT,DUOUT,DZ,I,VBECDFLT,X,Y
"RTN","VBECDCSP",28,0)
 Q
"RTN","VBECDCST")
0^13^B10953715
"RTN","VBECDCST",1,0)
VBECDCST ;hoifo/gjc-print data from VBECS STANDARD TABLE DATA (#6007);Nov 21, 2002
"RTN","VBECDCST",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCST",3,0)
 ;
"RTN","VBECDCST",4,0)
 ;Medical Device #:
"RTN","VBECDCST",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCST",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCST",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCST",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCST",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCST",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCST",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCST",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCST",13,0)
 ;regulations.
"RTN","VBECDCST",14,0)
 ;
"RTN","VBECDCST",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCST",16,0)
 ;Call to EN1^DIP is supported by IA: 10010
"RTN","VBECDCST",17,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCST",18,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCST",19,0)
 ;
"RTN","VBECDCST",20,0)
EN ; entry point for standard table data report
"RTN","VBECDCST",21,0)
 ;
"RTN","VBECDCST",22,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,DUZ=.5:1,1:0) W !!?3,$C(7),"DUZ & DUZ(0) must be defined to an active user (not POSTMASTER) in order to",!?3,"proceed." Q
"RTN","VBECDCST",23,0)
 ;
"RTN","VBECDCST",24,0)
 ; initialize the error trap
"RTN","VBECDCST",25,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCST",26,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCST",27,0)
 ;
"RTN","VBECDCST",28,0)
 ; check to see that data exists in the VBECS STANDARD TABLE DATA FILE
"RTN","VBECDCST",29,0)
 ; (#6007).
"RTN","VBECDCST",30,0)
 I '+$O(^VBEC(6007,0)) D  Q
"RTN","VBECDCST",31,0)
 .W !!?3,"There is no data in the VBECS STANDARD TABLE DATA FILE (#6007)",!,"to be printed.",$C(7)
"RTN","VBECDCST",32,0)
 .Q
"RTN","VBECDCST",33,0)
 ;
"RTN","VBECDCST",34,0)
 S VBECXIT=0 F  D  Q:VBECXIT
"RTN","VBECDCST",35,0)
 .; enter the FROM range for the attribute name
"RTN","VBECDCST",36,0)
 .S DIR(0)="FAO^1:175^K:X'?1AN.ANP X",DIR("A")="Start With Attribute Name: "
"RTN","VBECDCST",37,0)
 .S DIR("?",1)="  To sort in sequence, starting with a particular Attribute Name, enter that"
"RTN","VBECDCST",38,0)
 .S DIR("?",2)="  Attribute Name.  Some displays might take a while due to the number of"
"RTN","VBECDCST",39,0)
 .S DIR("?")="  records in the file."
"RTN","VBECDCST",40,0)
 .D ^DIR S:$D(DTOUT)!$D(DUOUT) VBECXIT=-1 Q:VBECXIT
"RTN","VBECDCST",41,0)
 .S VBECFR=Y K DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","VBECDCST",42,0)
 .; enter the TO range for the attribute name
"RTN","VBECDCST",43,0)
 .S DIR(0)="FAO^1:175^K:X'?1AN.ANP X",DIR("A")="Go To Attribute Name: "
"RTN","VBECDCST",44,0)
 .S DIR("?",1)="  To sort in sequence, up to a particular Attribute Name, enter that"
"RTN","VBECDCST",45,0)
 .S DIR("?",2)="  Attribute Name.  Some displays might take a while due to the number"
"RTN","VBECDCST",46,0)
 .S DIR("?")="  of records in the file."
"RTN","VBECDCST",47,0)
 .D ^DIR S:$D(DTOUT)!$D(DUOUT) VBECXIT=-1 Q:VBECXIT
"RTN","VBECDCST",48,0)
 .S VBECTO=Y K DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","VBECDCST",49,0)
 .I $L(VBECFR),$L(VBECTO),(VBECFR]VBECTO) W !!,"'Go To' value must follow the 'Start With' value.",!
"RTN","VBECDCST",50,0)
 .ELSE  S VBECXIT=1
"RTN","VBECDCST",51,0)
 .Q
"RTN","VBECDCST",52,0)
 I VBECXIT=-1 D XIT QUIT
"RTN","VBECDCST",53,0)
 I VBECFILE=61.3 D GO613
"RTN","VBECDCST",54,0)
 I VBECFILE=65.4 D GO654
"RTN","VBECDCST",55,0)
 Q
"RTN","VBECDCST",56,0)
 ;
"RTN","VBECDCST",57,0)
GO613 ; entry point for antigen/antibody report
"RTN","VBECDCST",58,0)
 S L=0,DIC="^VBEC(6007,"
"RTN","VBECDCST",59,0)
 S FLDS=".01;C1;L28;""Name"",.04;C30;""Antibody/Antigen"",.02;C50;""SNOMED"""
"RTN","VBECDCST",60,0)
 S BY=".11,.01",FR="61.3,"_VBECFR,TO="61.3,"_VBECTO D EN1^DIP
"RTN","VBECDCST",61,0)
 D XIT
"RTN","VBECDCST",62,0)
 Q
"RTN","VBECDCST",63,0)
 ;
"RTN","VBECDCST",64,0)
GO654 ; entry point for transfusion reaction report
"RTN","VBECDCST",65,0)
 S L=0,DIC="^VBEC(6007,"
"RTN","VBECDCST",66,0)
 S FLDS=".01;C1;""Transfusion Reaction"""
"RTN","VBECDCST",67,0)
 S BY=".11,.01",FR="65.4,"_VBECFR,TO="65.4,"_VBECTO D EN1^DIP
"RTN","VBECDCST",68,0)
 D XIT
"RTN","VBECDCST",69,0)
 Q
"RTN","VBECDCST",70,0)
 ;
"RTN","VBECDCST",71,0)
XIT ; clean up symbol table, exit
"RTN","VBECDCST",72,0)
 K BY,D0,DIC,DIR,DIROUT,DIRUT,DTOUT,DUOUT,DIWF,FR,L,POP,TO,VBECFR,VBECTO,VBECXIT,X,Y
"RTN","VBECDCST",73,0)
 Q
"RTN","VBECDCST",74,0)
 ;
"RTN","VBECDCU")
0^14^B32610200
"RTN","VBECDCU",1,0)
VBECDCU ;hoifo/gjc-data conversion & pre-implementation utilities;Nov 21, 2002
"RTN","VBECDCU",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCU",3,0)
 ;
"RTN","VBECDCU",4,0)
 ;Medical Device #:
"RTN","VBECDCU",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCU",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCU",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCU",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCU",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCU",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCU",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCU",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCU",13,0)
 ;regulations.
"RTN","VBECDCU",14,0)
 ;
"RTN","VBECDCU",15,0)
 ;Call to $$GTF^%ZISH is supported by IA: 2320
"RTN","VBECDCU",16,0)
 ;Call to $$EXTERNAL^DILFD is supported by IA: 2055
"RTN","VBECDCU",17,0)
 ;Call to GETS^DIQ is supported by IA: 2056
"RTN","VBECDCU",18,0)
 ;Call to GETICN^MPIF001 is supported by IA: 2701
"RTN","VBECDCU",19,0)
 ;Call to $$FMTE^XLFDT is supported by IA: 10103
"RTN","VBECDCU",20,0)
 ;Call to SETUP^XQALERT is supported by IA: 10081
"RTN","VBECDCU",21,0)
 ;Call to GETS^DIQ is supported by IA: 10060
"RTN","VBECDCU",22,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCU",23,0)
 ;Call to $$FMADD^XLFDT is supported by IA: 10103
"RTN","VBECDCU",24,0)
 ;
"RTN","VBECDCU",25,0)
GTF(VBECGR,VBECIS,VBECF) ; save off data stored in a global to a VMS
"RTN","VBECDCU",26,0)
 ; or NT/2000 file.
"RTN","VBECDCU",27,0)
 ; input: VBECGR=global reference
"RTN","VBECDCU",28,0)
 ;        VBECIS=Identifies the incrementing subscript level. For
"RTN","VBECDCU",29,0)
 ;               example, if you pass ^TMP(115,1,1,0) as the global
"RTN","VBECDCU",30,0)
 ;               reference parameter, and pass 3 as the incr_subsc
"RTN","VBECDCU",31,0)
 ;               parameter, $$GTF will increment the third subscript,
"RTN","VBECDCU",32,0)
 ;               ^TMP(115,1,x), but will read nodes at the full global
"RTN","VBECDCU",33,0)
 ;               reference ^TMP(115,1,x,0).
"RTN","VBECDCU",34,0)
 ;         VBECF=Name of the file where the data is to reside.
"RTN","VBECDCU",35,0)
 ; output: 1=success, 0=failure
"RTN","VBECDCU",36,0)
 ;
"RTN","VBECDCU",37,0)
 ; Here's an example (from the Hines development account) on how the
"RTN","VBECDCU",38,0)
 ; the call works: S Y=$$GTF^%ZISH($NA(^TMP("VBEC NP",$J,1,0)),3,
"RTN","VBECDCU",39,0)
 ; "SYS$USER:[CEBE]","ZZNP.TXT")
"RTN","VBECDCU",40,0)
 S VBECP=$P($G(^VBEC(6000,1,0)),U,6) ; VBECP=file path
"RTN","VBECDCU",41,0)
 ;
"RTN","VBECDCU",42,0)
 Q $$GTF^%ZISH(VBECGR,VBECIS,VBECP,VBECF)
"RTN","VBECDCU",43,0)
 ;
"RTN","VBECDCU",44,0)
DELETE(VBECY) ; purge the ^TMP("VBEC*",$J) global
"RTN","VBECDCU",45,0)
 ; input: VBECY=$J or process id, or zero to kill along all processes.
"RTN","VBECDCU",46,0)
 S VBECY=+$G(VBECY),VBECX="VBEC FINI"
"RTN","VBECDCU",47,0)
 F  S VBECX=$O(^TMP(VBECX)) Q:VBECX=""!(VBECX]"VBEC63 zzz")  D  Q:'VBECYN
"RTN","VBECDCU",48,0)
 .I '$D(VBECYN)#2 D  Q:'VBECYN
"RTN","VBECDCU",49,0)
 ..K DIR,DTOUT,DUOUT,DIRUT
"RTN","VBECDCU",50,0)
 ..S DIR(0)="Y",DIR("A")="Are you sure you want to delete the temporary globals"
"RTN","VBECDCU",51,0)
 ..S DIR("B")="No",DIR("?")="Answer 'Yes' to delete globals, or 'No' forgo global deletion." D ^DIR S VBECYN=Y
"RTN","VBECDCU",52,0)
 ..S:$D(DIRUT)#2 VBECYN=0
"RTN","VBECDCU",53,0)
 ..Q
"RTN","VBECDCU",54,0)
 .W !,"Killing ^TMP("""_VBECX_""""
"RTN","VBECDCU",55,0)
 .W $S(VBECY>0:","_VBECY_")",1:")")
"RTN","VBECDCU",56,0)
 .K:VBECY ^TMP(VBECX,VBECY) K:'VBECY ^TMP(VBECX)
"RTN","VBECDCU",57,0)
 .H 1
"RTN","VBECDCU",58,0)
 .Q
"RTN","VBECDCU",59,0)
 W:'$D(VBECYN)#2 !!,"No data to delete."
"RTN","VBECDCU",60,0)
 W:$D(VBECYN)#2 !!,"Done..." K VBECX,VBECY,VBECYN,X,Y
"RTN","VBECDCU",61,0)
 Q
"RTN","VBECDCU",62,0)
 ;
"RTN","VBECDCU",63,0)
NP200(IEN) ; gather New Person information in order to populate
"RTN","VBECDCU",64,0)
 ; the appropriate SQL Server table on the VBECS side.
"RTN","VBECDCU",65,0)
 ; Name, SSN, Termination Date, & Division are the attributes returned.
"RTN","VBECDCU",66,0)
 ; Input: IEN the internal entry number of the New Person record.
"RTN","VBECDCU",67,0)
 ; We'll be saving New Person (NP) data off in ^TMP("VBEC NP",$J) and
"RTN","VBECDCU",68,0)
 ; plan to create our NP VMS file after all other VMS files are closed.
"RTN","VBECDCU",69,0)
 Q:IEN=""!(+IEN'=IEN)  K LRARY N LRSTR
"RTN","VBECDCU",70,0)
 S LRTRMDT="" D GETS^DIQ(200,IEN_",",".01;9;9.2;16*","EI","LRARY")
"RTN","VBECDCU",71,0)
 S LRNAME=LRARY(200,IEN_",",.01,"E")
"RTN","VBECDCU",72,0)
 S LRSSN=LRARY(200,IEN_",",9,"E") S:LRSSN="" LRSSN="*"
"RTN","VBECDCU",73,0)
 Q:($D(^TMP("VBECX NP",$J,IEN,LRNAME,LRSSN)))#2  ; data already exists
"RTN","VBECDCU",74,0)
 S:LRARY(200,IEN_",",9.2,"I")'="" LRTRMDT=$$DATE(LRARY(200,IEN_",",9.2,"I"))
"RTN","VBECDCU",75,0)
 I ($D(LRARY(200.02))\10) D
"RTN","VBECDCU",76,0)
 .S LRA="" F  S LRA=$O(LRARY(200.02,LRA)) Q:LRA=""  D
"RTN","VBECDCU",77,0)
 ..S DIVPTR=LRARY(200.02,LRA,.01,"I")
"RTN","VBECDCU",78,0)
 ..S DIVNAME=LRARY(200.02,LRA,.01,"E")
"RTN","VBECDCU",79,0)
 ..S CNT=$$CNT("VBEC NP",$J),CNT=CNT+1
"RTN","VBECDCU",80,0)
 ..S LRSTR=IEN_"^"_LRNAME_"^"_LRSSN_"^"_LRTRMDT_"^"_DIVPTR_"^"_DIVNAME
"RTN","VBECDCU",81,0)
 ..S VBECTOT("VBEC NP")=+$G(VBECTOT("VBEC NP"))+1
"RTN","VBECDCU",82,0)
 ..S ^TMP("VBEC NP",$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCU",83,0)
 ..S ^TMP("VBECX NP",$J,IEN,LRNAME,LRSSN)=""
"RTN","VBECDCU",84,0)
 ..Q
"RTN","VBECDCU",85,0)
 .Q
"RTN","VBECDCU",86,0)
 E  D
"RTN","VBECDCU",87,0)
 .S CNT=$$CNT("VBEC NP",$J),CNT=CNT+1
"RTN","VBECDCU",88,0)
 .S LRSTR=IEN_"^"_LRNAME_"^"_LRSSN_"^"_"^"_LRTRMDT_"^^"
"RTN","VBECDCU",89,0)
 .S VBECTOT("VBEC NP")=+$G(VBECTOT("VBEC NP"))+1
"RTN","VBECDCU",90,0)
 .S ^TMP("VBEC NP",$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCU",91,0)
 .S ^TMP("VBECX NP",$J,IEN,LRNAME,LRSSN)=""
"RTN","VBECDCU",92,0)
 .Q
"RTN","VBECDCU",93,0)
 K CNT,DIVNAME,DIVPTR,LRA,LRNAME,LRSSN,LRTRMDT ; LRTRMDT=termination date
"RTN","VBECDCU",94,0)
 K LRARY Q
"RTN","VBECDCU",95,0)
 ;
"RTN","VBECDCU",96,0)
XTRNL(LRFL,LRFD,LRFLG,LRINT) ; change data from its internal value
"RTN","VBECDCU",97,0)
 ; to its external value.
"RTN","VBECDCU",98,0)
 ; LRFL-file or subfile number   LRFLD-field number
"RTN","VBECDCU",99,0)
 ; LRFLG-Output transform for pointer data. 'F' if the first field
"RTN","VBECDCU",100,0)
 ;  in a pointer chain has a output transform, apply the transform
"RTN","VBECDCU",101,0)
 ;  & quit.  'L' if the last field in a pointer chain has a output
"RTN","VBECDCU",102,0)
 ;  transform, apply the transform & quit.  'U' if the first field
"RTN","VBECDCU",103,0)
 ;  in a pointer chain has a output transform, apply the transform
"RTN","VBECDCU",104,0)
 ;  to the last field in the pointer chain & quit.
"RTN","VBECDCU",105,0)
 ;  function documented @ VA FileMan v22 Programmer Manual pg:2-171
"RTN","VBECDCU",106,0)
 ;  LRINT-the internal value being converted.
"RTN","VBECDCU",107,0)
 Q $$EXTERNAL^DILFD(LRFL,LRFD,LRFLG,LRINT)
"RTN","VBECDCU",108,0)
 ;
"RTN","VBECDCU",109,0)
DATE(LRDATE) ; date/time transformed.  Initial format created in order to
"RTN","VBECDCU",110,0)
 ; handle an individual's date of birth, input in 'LRDATE', formatted
"RTN","VBECDCU",111,0)
 ; 'mm/dd/yy<sp>time'.
"RTN","VBECDCU",112,0)
 ;
"RTN","VBECDCU",113,0)
 ; check for midnight date/time (yyymmdd.24) and convert it to
"RTN","VBECDCU",114,0)
 ; a valid SQL Server date/time.  Example: if date/time is: 3030715.24
"RTN","VBECDCU",115,0)
 ; convert to: 3030715.235959
"RTN","VBECDCU",116,0)
 I $P(LRDATE,".",2)=24 S LRDATE=$$FMADD^XLFDT(LRDATE,0,0,0,-1)
"RTN","VBECDCU",117,0)
 ;
"RTN","VBECDCU",118,0)
 S LRMTH="^Jan^Feb^Mar^Apr^May^Jun^Jul^Aug^Sep^Oct^Nov^Dec"
"RTN","VBECDCU",119,0)
 S LRDATE=$$FMTE^XLFDT(LRDATE,1),LRDATE=$TR(LRDATE,",","")
"RTN","VBECDCU",120,0)
 S LRDATE=$TR(LRDATE,$P(LRDATE," "),$L($P(LRMTH,U_$P(LRDATE," ")),U))
"RTN","VBECDCU",121,0)
 S LRDATE=$TR($P(LRDATE,"@")," ","/")_$S(LRDATE["@":"@"_$P(LRDATE,"@",2),1:"")
"RTN","VBECDCU",122,0)
 Q $TR(LRDATE,"@"," ")
"RTN","VBECDCU",123,0)
 ;
"RTN","VBECDCU",124,0)
ALERT(DUZ,TSK,FLG,ABN) ;trigger an alert when the pre-implementation or
"RTN","VBECDCU",125,0)
 ;data conversion finishes.
"RTN","VBECDCU",126,0)
 ;Input: DUZ-The user initiating these tasks, and ultimately informed
"RTN","VBECDCU",127,0)
 ;           when the process completes.
"RTN","VBECDCU",128,0)
 ;       TSK-The task being executed; either the pre-implementation or
"RTN","VBECDCU",129,0)
 ;           the data conversion.  '1' implies data conversion, '0'
"RTN","VBECDCU",130,0)
 ;           implies the pre-implementation
"RTN","VBECDCU",131,0)
 ;       FLG-status of data conversion: >0=anomalies, 0=no anomalies
"RTN","VBECDCU",132,0)
 ;       ABN-flag to indicate if abnormal conditions exist, specifically
"RTN","VBECDCU",133,0)
 ;           if the user stopped the process via TaskMan, or if data to
"RTN","VBECDCU",134,0)
 ;           convert does not exist.  Input will be -1 for no data, and
"RTN","VBECDCU",135,0)
 ;           "S" if the user stopped the process.
"RTN","VBECDCU",136,0)
 ;
"RTN","VBECDCU",137,0)
 K XQA,XQAMSG,XQAROU S XQA(DUZ)=""
"RTN","VBECDCU",138,0)
 S XQAMSG="VBECS "_$S(TSK=0:"Anomaly Check",1:"Data Conversion")_" complete"
"RTN","VBECDCU",139,0)
 S:ABN=-1 XQAMSG=XQAMSG_", data non-existent"
"RTN","VBECDCU",140,0)
 S:ABN="S" XQAMSG=XQAMSG_", user terminated"
"RTN","VBECDCU",141,0)
 I FLG=0 S XQAMSG=XQAMSG_", anomalies non-existent."
"RTN","VBECDCU",142,0)
 I FLG>0 S XQAMSG=XQAMSG_", anomalies identified."
"RTN","VBECDCU",143,0)
 D SETUP^XQALERT K XQA,XQAMSG,XQAROU
"RTN","VBECDCU",144,0)
 Q
"RTN","VBECDCU",145,0)
 ;
"RTN","VBECDCU",146,0)
RPT(TSK) ;report header
"RTN","VBECDCU",147,0)
 ; Input: TSK-The task being executed; either the pre-implementation or
"RTN","VBECDCU",148,0)
 ;           the data conversion.  'DC' implies data conversion, 'PI'
"RTN","VBECDCU",149,0)
 ;           implies the pre-implementation
"RTN","VBECDCU",150,0)
 W:$E(IOST,1,2)="C-" @IOF
"RTN","VBECDCU",151,0)
 S $P(VBECLN,"-",(IOM+1))=""
"RTN","VBECDCU",152,0)
 W !,"VBECS "_$S(TSK="DC"=1:"data conversion",1:"pre-implementation")_" process",?$S(IOM=132:117,1:65),"Page 1 of 1",VBECLN
"RTN","VBECDCU",153,0)
 Q
"RTN","VBECDCU",154,0)
 ;
"RTN","VBECDCU",155,0)
CNT(X,Y) ; return the value of a subscript
"RTN","VBECDCU",156,0)
 ; Input: X=the name of the subscript, i.e., "VBEC63 DEM"
"RTN","VBECDCU",157,0)
 ;        Y=$J
"RTN","VBECDCU",158,0)
 Q +$O(^TMP(X,Y,999999999999),-1)
"RTN","VBECDCU",159,0)
 ;
"RTN","VBECDCU",160,0)
SWAP(LRF,LRP) ; swap the VistA pointer (or free-text blood supplier) data for
"RTN","VBECDCU",161,0)
 ; the SQL GUID equivalent.  In the case that the entry is not mapped
"RTN","VBECDCU",162,0)
 ; (VistA pointer has no corresponding SQL Server GUID), this utility
"RTN","VBECDCU",163,0)
 ; returns null.
"RTN","VBECDCU",164,0)
 ; input: LRF=file being mapped
"RTN","VBECDCU",165,0)
 ;        LRP=VistA pointer value (IEN or record 'pointed to')
"RTN","VBECDCU",166,0)
 ;return: null or a valid GUID
"RTN","VBECDCU",167,0)
 ;
"RTN","VBECDCU",168,0)
 Q:LRF="" "" Q:LRP="" "" N VBEC6005,VBEC6007
"RTN","VBECDCU",169,0)
 I LRF'=66.01 S VBEC6005=$O(^VBEC(6005,"B",LRF_"-"_LRP,""))
"RTN","VBECDCU",170,0)
 E  S VBEC6005=$O(^VBEC(6005,"AA",LRF,LRP,""))
"RTN","VBECDCU",171,0)
 Q:VBEC6005="" ""
"RTN","VBECDCU",172,0)
 S VBEC6007=$P($G(^VBEC(6005,VBEC6005,0)),U,5)
"RTN","VBECDCU",173,0)
 Q:VBEC6007="" ""
"RTN","VBECDCU",174,0)
 Q $P($G(^VBEC(6007,VBEC6007,0)),U,3)
"RTN","VBECDCU",175,0)
 ;
"RTN","VBECDCU",176,0)
BLUT(Y) ; obtain ABO GROUP (#.05) & RH TYPE (#.06) from Lab Data (#63) file
"RTN","VBECDCU",177,0)
 S Y("ABO")=$P($G(^LR(Y,0)),U,5),Y("RH")=$E($P($G(^LR(Y,0)),U,6),1)
"RTN","VBECDCU",178,0)
 ; note: we're interested 'n' for negative & 'p' for positive (1 char)
"RTN","VBECDCU",179,0)
 Q Y("ABO")_U_Y("RH")
"RTN","VBECDCU",180,0)
 ;
"RTN","VBECDCU",181,0)
ICN(DFN) ; obtain the patient's ICN.  DFN is input, and either the ICN,
"RTN","VBECDCU",182,0)
 ; if it exists, or null will be returned.
"RTN","VBECDCU",183,0)
 ;   APIs used by this subroutine (in extrinsic function $$ICN)
"RTN","VBECDCU",184,0)
 ; #2701-$$GETICN^MPIF001(DFN), this function returns the ICN
"RTN","VBECDCU",185,0)
 S LRICN="" ; default to null
"RTN","VBECDCU",186,0)
 I ($T(GETICN^MPIF001)'="") D
"RTN","VBECDCU",187,0)
 .; the $$GETICN^MPIF001 returns delimited data.  If the ICN exists,
"RTN","VBECDCU",188,0)
 .; it's returned as ICN_'V'_ICN checksum.  If it doesn't exist, it's
"RTN","VBECDCU",189,0)
 .; returned as -1_'^'_error message.  We change -1 to null for SQL
"RTN","VBECDCU",190,0)
 .S LRICN=$$GETICN^MPIF001(DFN),LRICN=$S($P(LRICN,"^")="-1":"",1:LRICN)
"RTN","VBECDCU",191,0)
 .Q
"RTN","VBECDCU",192,0)
 Q LRICN
"RTN","VBECDCU",193,0)
 ;
"RTN","VBECDCU1")
0^15^B14426272
"RTN","VBECDCU1",1,0)
VBECDCU1 ;hoifo/gjc-data conversion & pre-implementation utilities;Nov 21, 2002
"RTN","VBECDCU1",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCU1",3,0)
 ;
"RTN","VBECDCU1",4,0)
 ;Medical Device #:
"RTN","VBECDCU1",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCU1",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCU1",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCU1",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCU1",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCU1",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCU1",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCU1",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCU1",13,0)
 ;regulations.
"RTN","VBECDCU1",14,0)
 ;
"RTN","VBECDCU1",15,0)
 ;Call to ^%ZTER is supported by IA: 1621
"RTN","VBECDCU1",16,0)
 ;Call to $$GET1^DIQ is supported by IA: 2056
"RTN","VBECDCU1",17,0)
 ;Call to SETUP^XQALERT is supported by IA: 10081
"RTN","VBECDCU1",18,0)
 ;
"RTN","VBECDCU1",19,0)
ATTR() ; select the data family to display
"RTN","VBECDCU1",20,0)
 ; Output: the file that the VistA data resides in as well as the full
"RTN","VBECDCU1",21,0)
 ;         name of the data family -  EX: 61.3^Antigen/Antibody
"RTN","VBECDCU1",22,0)
 ;
"RTN","VBECDCU1",23,0)
 K DIR,DIRUT,DIROUT,DTOUT,DUOUT,X,Y N VBECFILE,VBECATT
"RTN","VBECDCU1",24,0)
 ;S DIR(0)="S^AA:Antigen/Antibody;BP:Blood Product;BS:Blood Supplier;TR:Transfusion Reaction",DIR("A")="Select the unmapped data attribute to display"
"RTN","VBECDCU1",25,0)
 S DIR(0)="S^AA:Antigen/Antibody;TR:Transfusion Reaction",DIR("A")="Select the unmapped data attribute to display"
"RTN","VBECDCU1",26,0)
 S DIR("?",1)="Enter 'AA' for Antibodies and Antigens (Vista File: Function Field #61.3)"
"RTN","VBECDCU1",27,0)
 ;S DIR("?",2)="Enter 'BP' for Blood Product (Vista File: Blood Product #66)"
"RTN","VBECDCU1",28,0)
 ;S DIR("?",3)="Enter 'BS' for Blood Supplier"
"RTN","VBECDCU1",29,0)
 S DIR("?",2)="Enter 'TR' for Transfusion Reaction (VistA File: Blood Bank Utility"
"RTN","VBECDCU1",30,0)
 S DIR("?")="#65.4)" D ^DIR
"RTN","VBECDCU1",31,0)
 I $D(DIRUT) K DIR,DIRUT,DIROUT,DTOUT,DUOUT,X,Y S (VBECFILE,VBECATT)=""
"RTN","VBECDCU1",32,0)
 E  S VBECFILE=$S(Y="AA":61.3,1:65.4),VBECATT=Y(0)
"RTN","VBECDCU1",33,0)
 ;E  S VBECFILE=$S(Y="AA":61.3,Y="TR":65.4,Y="BP":66,1:66.01),VBECATT=Y(0)
"RTN","VBECDCU1",34,0)
 Q VBECFILE_"^"_VBECATT
"RTN","VBECDCU1",35,0)
 ;
"RTN","VBECDCU1",36,0)
BRKPNT(LRDFN,DFN) ; check for broken pointers between files 2 & 63.
"RTN","VBECDCU1",37,0)
 ; Check the pointer from the Patient (#2) to the Lab Data (#63)
"RTN","VBECDCU1",38,0)
 ; file against the Parent File (#.02), piece two of LRDATA, and
"RTN","VBECDCU1",39,0)
 ; Name (#.03), piece three of LRDATA, fields on the Lab Data file.
"RTN","VBECDCU1",40,0)
 ; Parent File field value must equal 2 (Pat. file) & Name field
"RTN","VBECDCU1",41,0)
 ; value must equal the DFN of the patient for the pointer to be
"RTN","VBECDCU1",42,0)
 ; correct.
"RTN","VBECDCU1",43,0)
 ;
"RTN","VBECDCU1",44,0)
 ; Input LRDFN: pointer, ien of the Lab Data record in the Patient file
"RTN","VBECDCU1",45,0)
 ;         DFN: DFN of the patient in the Patient file
"RTN","VBECDCU1",46,0)
 ;     Returns: 1 if the link between the files is broken, else 0
"RTN","VBECDCU1",47,0)
 ;
"RTN","VBECDCU1",48,0)
 N LRDATA S LRDATA=$G(^LR(LRDFN,0))
"RTN","VBECDCU1",49,0)
 Q $S($P(LRDATA,U,2)'=2:1,$P(LRDATA,U,3)'=DFN:1,1:0)
"RTN","VBECDCU1",50,0)
 ;
"RTN","VBECDCU1",51,0)
SAVE ; Save off the legacy Blood Bank data into globals, ^TMP(name_space,$J)
"RTN","VBECDCU1",52,0)
 ; and then move data from globals to either VMS files or text files on
"RTN","VBECDCU1",53,0)
 ; a Microsoft machine.
"RTN","VBECDCU1",54,0)
 ;
"RTN","VBECDCU1",55,0)
 ;           global subscript to file name conversion
"RTN","VBECDCU1",56,0)
 ;           ---------------------------------------- 
"RTN","VBECDCU1",57,0)
 ;"VBEC63 PAT"   ->  "VBEC63_PAT"
"RTN","VBECDCU1",58,0)
 ;"VBEC63 ANTIP" ->  "VBEC63_ANTIP"
"RTN","VBECDCU1",59,0)
 ;"VBEC63 ANTIA" ->  "VBEC63_ANTIA"
"RTN","VBECDCU1",60,0)
 ;"VBEC63 AI"    ->  "VBEC63_AI"
"RTN","VBECDCU1",61,0)
 ;"VBEC63 BBC"   ->  "VBEC63_BBC"
"RTN","VBECDCU1",62,0)
 ;"VBEC63 TD"    ->  "VBEC63_TD"
"RTN","VBECDCU1",63,0)
 ;"VBEC63 TRD"   ->  "VBEC63_TRD"
"RTN","VBECDCU1",64,0)
 ;"VBEC63 TC"    ->  "VBEC63_TC"
"RTN","VBECDCU1",65,0)
 ;"VBEC63 TRC"   ->  "VBEC63_TRC"
"RTN","VBECDCU1",66,0)
 ;"VBEC FINIS"   ->  "VBEC_FINIS"
"RTN","VBECDCU1",67,0)
 ;
"RTN","VBECDCU1",68,0)
 N LRDATA,LRNAME,LRNODE,LRC,LRX
"RTN","VBECDCU1",69,0)
 S LRDATA=0 ; if data, flip LRDATA to 1
"RTN","VBECDCU1",70,0)
 S LRDATA=$$DATA($J)
"RTN","VBECDCU1",71,0)
 I 'LRDATA DO ALERT^VBECDCU(DUZ,VBECCNV,0,-1) QUIT
"RTN","VBECDCU1",72,0)
 F VBECI=1:1:7 S VBECI1=$P($T(SUBS+VBECI),";;",2) I '$D(^TMP(VBECI1,$J)) S ^TMP(VBECI1,$J)="" ;RLM 10/28/05
"RTN","VBECDCU1",73,0)
 ;
"RTN","VBECDCU1",74,0)
 ; Set DBCONV.INI file.  This will tell the system where to find the
"RTN","VBECDCU1",75,0)
 ; database on the VBECS system
"RTN","VBECDCU1",76,0)
 S ^TMP("DBCONV.INI",$J,1,0)="[database]"
"RTN","VBECDCU1",77,0)
 S ^TMP("DBCONV.INI",$J,2,0)="database name="_VBECDBN
"RTN","VBECDCU1",78,0)
 S ^TMP("DBCONV.INI",$J,3,0)="[server]"
"RTN","VBECDCU1",79,0)
 S ^TMP("DBCONV.INI",$J,4,0)="server name="_VBECDBN1
"RTN","VBECDCU1",80,0)
 S LRNODE="^TMP(""DBCONV.INI"","_$J_",1,0)"
"RTN","VBECDCU1",81,0)
 S LRFLG=$$GTF^VBECDCU($NA(@LRNODE),3,"DBCONV.INI")
"RTN","VBECDCU1",82,0)
 ;
"RTN","VBECDCU1",83,0)
 ; Set finish global.  This global is used to flag the SQL Server box
"RTN","VBECDCU1",84,0)
 ; that data exists, and that the data can be set into SQL tables.
"RTN","VBECDCU1",85,0)
 ;
"RTN","VBECDCU1",86,0)
 S LRX="VBEC FINI"
"RTN","VBECDCU1",87,0)
 F  S LRX=$O(^TMP(LRX)) Q:LRX=""!(LRX]"VBEC63 zzz")  D
"RTN","VBECDCU1",88,0)
 .S LRNODE="^TMP("""_LRX_""","_$J_",1,0)"
"RTN","VBECDCU1",89,0)
 .S LRNAME=$TR(LRX," ","_")_".TXT"
"RTN","VBECDCU1",90,0)
 .S LRFLG=$$GTF^VBECDCU($NA(@LRNODE),3,LRNAME)
"RTN","VBECDCU1",91,0)
 .Q
"RTN","VBECDCU1",92,0)
 Q
"RTN","VBECDCU1",93,0)
 ;
"RTN","VBECDCU1",94,0)
DATA(Y) ; determine if we've captured data and create empty files if no data found
"RTN","VBECDCU1",95,0)
 ;  Input: Y=$J or process id
"RTN","VBECDCU1",96,0)
 K LRXX N LRZ S LRXX="VBEC FINI",LRZ=0
"RTN","VBECDCU1",97,0)
 F  S LRXX=$O(^TMP(LRXX)) Q:LRXX=""!(LRXX]"VBEC63 zzz")  D
"RTN","VBECDCU1",98,0)
  . I $E(LRXX,1,4)="VBEC",('$D(^TMP(LRXX,Y))\10) S ^TMP(LRXX,Y,1,0)=""
"RTN","VBECDCU1",99,0)
  . Q
"RTN","VBECDCU1",100,0)
 K LRXX Q 1
"RTN","VBECDCU1",101,0)
 ;
"RTN","VBECDCU1",102,0)
ERR ;come here on error, record error in error trap and alert all VBEC mail
"RTN","VBECDCU1",103,0)
 ;group members
"RTN","VBECDCU1",104,0)
 N XQA,XQAMSG
"RTN","VBECDCU1",105,0)
 ;record error & write message
"RTN","VBECDCU1",106,0)
 S XQA(DUZ)="",XQAMSG="Option "_$TR($E($G(XQY0),1,30),"^","")_" has encountered an Error."
"RTN","VBECDCU1",107,0)
 ; IA: 10111 read ^XMB(3.8,DO,0) with FileMan (supported)
"RTN","VBECDCU1",108,0)
 S VBECMG=$$GET1^DIQ(3.8,+$P($G(^VBEC(6000,1,0)),U,7)_",",.01)
"RTN","VBECDCU1",109,0)
 S:VBECMG'="" XQA("G."_VBECMG)=""
"RTN","VBECDCU1",110,0)
 D ^%ZTER,SETUP^XQALERT K VBECMG
"RTN","VBECDCU1",111,0)
 S LRSTOP=-1 ;data conversion/integrity checker must stop processing
"RTN","VBECDCU1",112,0)
 Q
"RTN","VBECDCU1",113,0)
 ;
"RTN","VBECDCU1",114,0)
SUBS ;
"RTN","VBECDCU1",115,0)
 ;;VBEC63 PAT
"RTN","VBECDCU1",116,0)
 ;;VBEC63 ANTIP
"RTN","VBECDCU1",117,0)
 ;;VBEC63 ANTIA
"RTN","VBECDCU1",118,0)
 ;;VBEC63 AI
"RTN","VBECDCU1",119,0)
 ;;VBEC63 BBC
"RTN","VBECDCU1",120,0)
 ;;VBEC63 TRD
"RTN","VBECDCU1",121,0)
 ;;VBEC63 TRC
"RTN","VBECDCU1",122,0)
 ;;VBEC FINIS
"RTN","VBECDCU1",123,0)
FILES ; here are the file names for used for the legacy Blood Bank data
"RTN","VBECDCU1",124,0)
 ;;VBEC63_PAT
"RTN","VBECDCU1",125,0)
 ;;VBEC63_ANTIP
"RTN","VBECDCU1",126,0)
 ;;VBEC63_ANTIA
"RTN","VBECDCU1",127,0)
 ;;VBEC63_AI
"RTN","VBECDCU1",128,0)
 ;;VBEC63_BBC
"RTN","VBECDCU1",129,0)
 ;;VBEC63_TRD
"RTN","VBECDCU1",130,0)
 ;;VBEC63_TRC
"RTN","VBECDCU1",131,0)
 ;;VBEC_FINIS
"RTN","VBECDCU1",132,0)
 ;;
"RTN","VBECDCU2")
0^16^B36794365
"RTN","VBECDCU2",1,0)
VBECDCU2 ;hoifo/gjc-data conversion & pre-implementation utilities;Nov 21, 2002
"RTN","VBECDCU2",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCU2",3,0)
 ;
"RTN","VBECDCU2",4,0)
 ;Medical Device #:
"RTN","VBECDCU2",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCU2",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCU2",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCU2",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCU2",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCU2",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCU2",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCU2",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCU2",13,0)
 ;regulations.
"RTN","VBECDCU2",14,0)
 ;
"RTN","VBECDCU2",15,0)
 ;Call to $$DEL^%ZISH is supported by IA: 2320
"RTN","VBECDCU2",16,0)
 ;Call to $$GET1^DID is supported by IA: 2052
"RTN","VBECDCU2",17,0)
 ;Call to FILE^DID is supported by IA: 2052
"RTN","VBECDCU2",18,0)
 ;Call to ^DIE is supported by IA: 10018
"RTN","VBECDCU2",19,0)
 ;Call to FILE^DIE is supported by IA: 2053
"RTN","VBECDCU2",20,0)
 ;Call to $$ROOT^DILFD is supported by IA: 2055
"RTN","VBECDCU2",21,0)
 ;Call to ^DIR is supported by IA: 10026
"RTN","VBECDCU2",22,0)
 ;Call to $$FMDIFF^XLFDT is supported by IA: 10103
"RTN","VBECDCU2",23,0)
 ;Call to ^DIK is supported by IA: 10013
"RTN","VBECDCU2",24,0)
 ;
"RTN","VBECDCU2",25,0)
SPARAM ; Site parameter enter edit.
"RTN","VBECDCU2",26,0)
 S DIE="^VBEC(6000,",DR=".01;.06R;.07R",DA=1 D ^DIE
"RTN","VBECDCU2",27,0)
 Q
"RTN","VBECDCU2",28,0)
 ;
"RTN","VBECDCU2",29,0)
NOMAP() ; check if the user has mapped VistA data (blood products, antigen/
"RTN","VBECDCU2",30,0)
 ; antibodies, blood supplier, and transfusion reactions) to their
"RTN","VBECDCU2",31,0)
 ; SQL Server equivalents.
"RTN","VBECDCU2",32,0)
 ; returns: '1' if any of the attributes identified above are not mapped
"RTN","VBECDCU2",33,0)
 N VBEC S VBEC=0
"RTN","VBECDCU2",34,0)
 ;I $O(^VBEC(6005,"AB",61.3,""))="" W !!,"Antigen/Antibodies have not been mapped, please resolve this issue before running the data conversion." S VBEC=1
"RTN","VBECDCU2",35,0)
 I $O(^VBEC(6005,"AB",61.3,""))="" W !!,"Antigen/Antibodies have not been mapped" D  ;RLM 10/27/05
"RTN","VBECDCU2",36,0)
  . S DIR("A")="Do you wish to continue? ",DIR(0)="Y",DIR("B")="No" D ^DIR Q:Y
"RTN","VBECDCU2",37,0)
  . S VBEC=1 W !,"Please resolve this issue before running the data conversion." Q
"RTN","VBECDCU2",38,0)
 I VBEC Q 1
"RTN","VBECDCU2",39,0)
 I $O(^VBEC(6005,"AB",65.4,""))="" W !!,"Transfusion Reactions have not been mapped" D  ;RLM 10/27/05
"RTN","VBECDCU2",40,0)
  . S DIR("A")="Do you wish to continue? ",DIR(0)="Y",DIR("B")="No" D ^DIR Q:Y
"RTN","VBECDCU2",41,0)
  . S VBEC=1 W !,"Please resolve this issue before running the data conversion." Q
"RTN","VBECDCU2",42,0)
 ;I $O(^VBEC(6005,"AB",66,""))="" W !!,"Blood Products have not been mapped, please resolve this issue before running the data conversion." S VBEC=1
"RTN","VBECDCU2",43,0)
 ;I $O(^VBEC(6005,"AB",66.01,""))="" W !!,"Blood Suppliers have not been mapped, please resolve this issue before running the data conversion." S VBEC=1
"RTN","VBECDCU2",44,0)
 Q VBEC
"RTN","VBECDCU2",45,0)
 ;
"RTN","VBECDCU2",46,0)
LOCK(VBECFN) ;file lock utility
"RTN","VBECDCU2",47,0)
 ; Input: VBECNUM=file number
"RTN","VBECDCU2",48,0)
 ;blood supplier is a multiple in the Blood Product file.
"RTN","VBECDCU2",49,0)
 ; Output: one if the file was locked, else return zero
"RTN","VBECDCU2",50,0)
 N VBECAT,VBECFLE,VBECRT,VBECLOCK
"RTN","VBECDCU2",51,0)
 S VBECRT=$$ROOT^DILFD($S(VBECFN=66.01:66,1:VBECFN),"",1)
"RTN","VBECDCU2",52,0)
 S VBECAT=$S(VBECFN=61.3:"antigens/antibodies",VBECFN=65.4:"transfusion reactions",VBECFN=66:"blood products",VBECFN=66.01:"blood suppliers",1:$$GET1^DID(VBECFN,.01,"","LABEL"))
"RTN","VBECDCU2",53,0)
 D FILE^DID(VBECFN,"","NAME","VBECTMP")
"RTN","VBECDCU2",54,0)
 L +@(VBECRT):5 S VBECLOCK=$T
"RTN","VBECDCU2",55,0)
 I '$T W !!,"Another person is editing "_VBECAT_" in the "_VBECTMP("NAME")_$S(VBECFN=66.01:" sub-file.",1:" file."),!,"Try again later...",$C(7)
"RTN","VBECDCU2",56,0)
 Q VBECLOCK
"RTN","VBECDCU2",57,0)
 ;
"RTN","VBECDCU2",58,0)
UNLOCK(VBECFN) ; unlock a file
"RTN","VBECDCU2",59,0)
 ; Input: X=file number
"RTN","VBECDCU2",60,0)
 S:VBECFN=66.01 VBECFN=66
"RTN","VBECDCU2",61,0)
 L -@($$ROOT^DILFD(VBECFN,"",1))
"RTN","VBECDCU2",62,0)
 Q
"RTN","VBECDCU2",63,0)
 ;
"RTN","VBECDCU2",64,0)
DEL ; delete the VMS or Microsoft legacy Blood Bank files from the
"RTN","VBECDCU2",65,0)
 ; server.  This will be an entry point for an option.
"RTN","VBECDCU2",66,0)
 S LR6001=$G(^VBEC(6001,+$O(^VBEC(6001,$C(32)),-1),0))
"RTN","VBECDCU2",67,0)
 S LRPROC=$P(LR6001,U,2),LRDATE=$P(LR6001,U,3)
"RTN","VBECDCU2",68,0)
 ;
"RTN","VBECDCU2",69,0)
 I LRDATE=""
"RTN","VBECDCU2",70,0)
 I  W !!?3,"The completion process timestamp does not exist.  There are"
"RTN","VBECDCU2",71,0)
 I  W !?3,"no system files to delete at this time."
"RTN","VBECDCU2",72,0)
 I  K LR6001,LRDATE Q
"RTN","VBECDCU2",73,0)
 ;
"RTN","VBECDCU2",74,0)
 I LRPROC'=1
"RTN","VBECDCU2",75,0)
 I  W !!?3,"The data conversion has not been run.  There are no system"
"RTN","VBECDCU2",76,0)
 I  W !?3,"files to delete at this time."
"RTN","VBECDCU2",77,0)
 I  K LR6001,LRDATE Q
"RTN","VBECDCU2",78,0)
 ;
"RTN","VBECDCU2",79,0)
 S LRPATH=$P($G(^VBEC(6000,1,0)),U,6)
"RTN","VBECDCU2",80,0)
 I LRPATH="" W !!,"Default Directory (file path) not defined.  Cannot"
"RTN","VBECDCU2",81,0)
 I  W !,"delete system level legacy Blood Bank files.",$C(13)
"RTN","VBECDCU2",82,0)
 I  D DELXIT Q
"RTN","VBECDCU2",83,0)
 ;
"RTN","VBECDCU2",84,0)
 ;check the number of days the system files have been resident
"RTN","VBECDCU2",85,0)
 S LRELPSE=$$FMDIFF^XLFDT(DT,LRDATE\1,1)
"RTN","VBECDCU2",86,0)
 I LRELPSE<10 D
"RTN","VBECDCU2",87,0)
 .W !!,"Due to the length of time the conversion process runs, it's best if the system",!,"files remain in their specified directory for a minimum of ten (10) days."
"RTN","VBECDCU2",88,0)
 .W !!,"Reports can be generated from these extract files which can be compared to",!,"legacy Blood Bank reports in order to validate the extract data.",!
"RTN","VBECDCU2",89,0)
 .Q
"RTN","VBECDCU2",90,0)
 K DIR S DIR(0)="Y",DIR("?")="Enter 'Yes' to delete system files, or 'No' to preserve them.",DIR("B")="No",DIR("A")="Purge system level data extract files" D ^DIR
"RTN","VBECDCU2",91,0)
 I Y=0!($D(DIRUT)) D DELXIT Q
"RTN","VBECDCU2",92,0)
 ;
"RTN","VBECDCU2",93,0)
 F LRI=1:1 S LRFILE=$P($T(FILES+LRI^VBECDCU1),";;",2) Q:LRFILE=""  D
"RTN","VBECDCU2",94,0)
 .S LRARY(LRFILE_".TXT")=""
"RTN","VBECDCU2",95,0)
 .Q
"RTN","VBECDCU2",96,0)
 I $O(LRARY(""))="" W !!,"System level legacy Blood Bank files not found.",$C(13)
"RTN","VBECDCU2",97,0)
 I  D DELXIT Q
"RTN","VBECDCU2",98,0)
 S LRARY("DBCONV.INI")=""
"RTN","VBECDCU2",99,0)
 S LRSLT=$$DEL^%ZISH(LRPATH,$NA(LRARY)) ;file names stored in an array
"RTN","VBECDCU2",100,0)
 W !!,"All system level legacy Blood Bank files "_$S(LRSLT=1:"have",1:"have not")_" been deleted.",$C(13)
"RTN","VBECDCU2",101,0)
 ;
"RTN","VBECDCU2",102,0)
DELXIT K DIR,DIRUT,DIROUT,DTOUT,DUOUT,LR6001,LRDATE,LRELPSE,LRFILE,LRHLP,LRI,LRPATH,LRPROC,LRSLT,X,Y
"RTN","VBECDCU2",103,0)
 Q
"RTN","VBECDCU2",104,0)
 ;
"RTN","VBECDCU2",105,0)
CHECKSUM(STR) ;This tag builds a checksum value for a string
"RTN","VBECDCU2",106,0)
 ; input: string value to be converted
"RTN","VBECDCU2",107,0)
 ;return: numeric checksum of the string
"RTN","VBECDCU2",108,0)
 ;
"RTN","VBECDCU2",109,0)
 N J,X,Y S X=$L(STR),Y=0
"RTN","VBECDCU2",110,0)
 F J=1:1:X S Y=$A(STR,J)*(J+1)+Y
"RTN","VBECDCU2",111,0)
 Q Y
"RTN","VBECDCU2",112,0)
 ;
"RTN","VBECDCU2",113,0)
DEL6001 ;Delete all data conversion and anomaly check history from the
"RTN","VBECDCU2",114,0)
 ;VBECS DATA INTEGRITY/CONVERSION STATISTICS (#6001) file.
"RTN","VBECDCU2",115,0)
 I '$O(^VBEC(6001,0)) W !!?3,"No data conversion and anomaly check history data to delete, exiting.",$C(7) Q
"RTN","VBECDCU2",116,0)
 W !!?3,"This option deletes all data conversion and anomaly check history"
"RTN","VBECDCU2",117,0)
 W !?3,"from the VBECS DATA INTEGRITY/CONVERSION STATISTICS (#6001) file.",!
"RTN","VBECDCU2",118,0)
 S DIR(0)="Y",DIR("A",1)="Are you sure you want to delete data conversion and anomaly check",DIR("A")="histories",DIR("B")="No"
"RTN","VBECDCU2",119,0)
 S DIR("?",1)="Enter 'Y'es to delete data conversion and anomaly check histories",DIR("?")="or 'N'o to prevent deletion."
"RTN","VBECDCU2",120,0)
 D ^DIR
"RTN","VBECDCU2",121,0)
 I Y=1 D  ;user answered 'yes' to the above question
"RTN","VBECDCU2",122,0)
 .S DIK="^VBEC(6001,",(DA,VBECNT)=0
"RTN","VBECDCU2",123,0)
 .F  S DA=$O(^VBEC(6001,DA)) Q:'DA  D ^DIK S VBECNT=VBECNT+1
"RTN","VBECDCU2",124,0)
 .W !!?3,"Done; "_VBECNT_" data conversion and anomaly check histor"_$S(VBECNT=1:"y",1:"ies")_" deleted."
"RTN","VBECDCU2",125,0)
 .K DA,DIC,DIK,VBECNT,X,Y
"RTN","VBECDCU2",126,0)
 .Q
"RTN","VBECDCU2",127,0)
 W:$D(DTOUT)#2 " Timed out without response, no data has been deleted.",$C(7)
"RTN","VBECDCU2",128,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","VBECDCU2",129,0)
 Q
"RTN","VBECDCX")
0^17^B45221687
"RTN","VBECDCX",1,0)
VBECDCX ;hoifo/gjc-data conversion & pre-implementation data extract;Nov 21, 2002
"RTN","VBECDCX",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCX",3,0)
 ;
"RTN","VBECDCX",4,0)
 ;Medical Device #:
"RTN","VBECDCX",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCX",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCX",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCX",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCX",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCX",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCX",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCX",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCX",13,0)
 ;regulations.
"RTN","VBECDCX",14,0)
 ;
"RTN","VBECDCX",15,0)
 ;Call to $$NEWERR^%ZTER is supported by IA: 1621
"RTN","VBECDCX",16,0)
 ;Call to NAMECOMP^XLFNAME is supported by IA: 3065
"RTN","VBECDCX",17,0)
 ;Execution of ^%ZOSF("TEST") is supported by IA: 10096
"RTN","VBECDCX",18,0)
 ;Direct global read of ^DPT(DFN,0) supported by IA: 10035
"RTN","VBECDCX",19,0)
 ;
"RTN","VBECDCX",20,0)
 ; This routine was originally created to handle data extracts from
"RTN","VBECDCX",21,0)
 ; VistA's Lab Data (#63) file.
"RTN","VBECDCX",22,0)
 ;
"RTN","VBECDCX",23,0)
PAT(DFN,LRDFN) ; build the primary patient identifier string.
"RTN","VBECDCX",24,0)
 ; convert specific patient attributes from VistA to SQL tables.
"RTN","VBECDCX",25,0)
 ; Values to covert and maximum string lengths:
"RTN","VBECDCX",26,0)
 ; LRDFN=ien of the patient record in the Lab Data (#63) file (12)
"RTN","VBECDCX",27,0)
 ; DFN=ien of the patient in the Patient (#2) file (12)
"RTN","VBECDCX",28,0)
 ; LRNAM=LRNAM("FAMILY")^LRNAM("GIVEN")^LRNAM("MIDDLE")^LRNAM("SUFFIX")
"RTN","VBECDCX",29,0)
 ; LRNAM(patient name) subcomponents above concatenated (30)
"RTN","VBECDCX",30,0)
 ; LRSEX(sex)='M' or 'F', (1)
"RTN","VBECDCX",31,0)
 ; LRDOB(date of birth)='mm/dd/yy<sp>time' time optional, (18)
"RTN","VBECDCX",32,0)
 ; LRSSN(ssn)='123456789' (9)
"RTN","VBECDCX",33,0)
 ; LRICN(ICN)='100072010000' (12)
"RTN","VBECDCX",34,0)
 ; $P(LRBO,U) (blood type)='AB' (2)
"RTN","VBECDCX",35,0)
 ; $P(LRBLD,U,2) (RH type)='N' or 'P' (1)
"RTN","VBECDCX",36,0)
 ;
"RTN","VBECDCX",37,0)
 ; Output:
"RTN","VBECDCX",38,0)
 ;  LRSTR=DFN^LRNAM^LRSEX^LRDOB^^^LRSSN^LRICN^$P(LRBLD,U)^$P(LRBLD,U,2)
"RTN","VBECDCX",39,0)
 ;  LRNAM=LRNAM("FAMILY")^LRNAM("GIVEN")^LRNAM("MIDDLE")^LRNAM("SUFFIX")
"RTN","VBECDCX",40,0)
 ;
"RTN","VBECDCX",41,0)
 ; initialize the error trap
"RTN","VBECDCX",42,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERR^VBECDCU1"
"RTN","VBECDCX",43,0)
 E  S X="D ERR^VBECDCU1",@^%ZOSF("TRAP")
"RTN","VBECDCX",44,0)
 ;initialize the global that keeps track of data elements by LRDFN
"RTN","VBECDCX",45,0)
 ;increment the subscript tracking data elements at the record level
"RTN","VBECDCX",46,0)
 S VBECRTOT=+$$CNT^VBECDCU("VBEC FINIS",$J)+1
"RTN","VBECDCX",47,0)
 K X S $P(X,"0^",28)="",^TMP("VBEC FINIS",$J,VBECRTOT,0)=X K X
"RTN","VBECDCX",48,0)
 ;
"RTN","VBECDCX",49,0)
 S DPT(0)=$G(^DPT(DFN,0)),DPTNAME=$P(DPT(0),U),LRSTR="",U="^"
"RTN","VBECDCX",50,0)
 D NAMECOMP^XLFNAME(.DPTNAME) S LRSEX=$P(DPT(0),U,2)
"RTN","VBECDCX",51,0)
 ;
"RTN","VBECDCX",52,0)
 I DPTNAME("FAMILY")["MERGING INTO" D  Q
"RTN","VBECDCX",53,0)
  . S VBECMRG=$P($P(DPTNAME("FAMILY"),"`",2)," ")
"RTN","VBECDCX",54,0)
  . K LRARY S LRARY(.01)=2,LRARY(.02)=DFN,LRARY(.03)=2,LRARY(.04)=VBECMRG,LRARY(.09)=$P($T(ERRMSG+3^VBECDC02),";",4)
"RTN","VBECDCX",55,0)
  . D LOGEXC^VBECDC02(VBECIEN,.LRARY) K LRARY ; log this exception regardless of the task
"RTN","VBECDCX",56,0)
  . Q
"RTN","VBECDCX",57,0)
 ;
"RTN","VBECDCX",58,0)
 S LRDOB=$P(DPT(0),U,3) ;return the internal FM value for DOB
"RTN","VBECDCX",59,0)
 ;
"RTN","VBECDCX",60,0)
 S LRSSN=$$STRIP^VBECDCX1($P(DPT(0),U,9))
"RTN","VBECDCX",61,0)
 S DPTNAME=$$STRIP^VBECDCX1($G(DPTNAME("FAMILY")))_U_$$STRIP^VBECDCX1($G(DPTNAME("GIVEN")))_U_$$STRIP^VBECDCX1($G(DPTNAME("MIDDLE")))_U_$$STRIP^VBECDCX1($G(DPTNAME("SUFFIX")))
"RTN","VBECDCX",62,0)
 ;obtain patient's ICN
"RTN","VBECDCX",63,0)
 S LRICN=$$ICN^VBECDCU(DFN),LRSTR=LRDFN_U_DFN_U_DPTNAME_U_LRSEX_U_LRDOB_U_U_U_$E(LRSSN,1,9)_U_LRICN
"RTN","VBECDCX",64,0)
 ; obtain ABO GROUP (#.05) & RH TYPE (#.06) from Lab Data (#63) file
"RTN","VBECDCX",65,0)
 S LRBLD=$$BLUT^VBECDCU(LRDFN)
"RTN","VBECDCX",66,0)
 S LRSTR=LRSTR_U_LRBLD
"RTN","VBECDCX",67,0)
 ;tabulate data elements per LAB DATA record
"RTN","VBECDCX",68,0)
 S:LRDFN $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U)=LRDFN
"RTN","VBECDCX",69,0)
 S:DFN $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,2)=DFN
"RTN","VBECDCX",70,0)
 S:$G(DPTNAME("FAMILY"))'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,3)=1
"RTN","VBECDCX",71,0)
 S:$G(DPTNAME("GIVEN"))'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,4)=1
"RTN","VBECDCX",72,0)
 S:$G(DPTNAME("MIDDLE"))'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,5)=1
"RTN","VBECDCX",73,0)
 S:$G(DPTNAME("SUFFIX"))'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,6)=1
"RTN","VBECDCX",74,0)
 S:LRSEX'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,7)=1
"RTN","VBECDCX",75,0)
 S:LRDOB'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,8)=1
"RTN","VBECDCX",76,0)
 S:LRSSN'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,9)=1
"RTN","VBECDCX",77,0)
 S:LRICN'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,10)=1
"RTN","VBECDCX",78,0)
 S:$P(LRBLD,U)'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,11)=1
"RTN","VBECDCX",79,0)
 S:$P(LRBLD,U,2)'="" $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,12)=1
"RTN","VBECDCX",80,0)
 ;tabulate data elements for all LAB DATA records except LRDFN & DFN
"RTN","VBECDCX",81,0)
 F I=3:1:12 S $P(^TMP("VBEC FINIS",$J,0),U,I)=$P(^TMP("VBEC FINIS",$J,0),U,I)+$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,I)
"RTN","VBECDCX",82,0)
 ;
"RTN","VBECDCX",83,0)
 K I S CNT=$$CNT^VBECDCU("VBEC63 PAT",$J),CNT=CNT+1
"RTN","VBECDCX",84,0)
 S ^TMP("VBEC63 PAT",$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCX",85,0)
 D ANTI(DFN,LRDFN,"AP"),ANTI(DFN,LRDFN,"AA"),ANTI(DFN,LRDFN,"AI")
"RTN","VBECDCX",86,0)
 D TRD(DFN,LRDFN),BBC^VBECDCX1(DFN,LRDFN)
"RTN","VBECDCX",87,0)
 S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,28)=$C(13)
"RTN","VBECDCX",88,0)
 D KILL
"RTN","VBECDCX",89,0)
 Q
"RTN","VBECDCX",90,0)
 ;
"RTN","VBECDCX",91,0)
ANTI(DFN,LRDFN,LRCHAR) ; extract 'RBC ANTIGENS PRESENT/ABSENT' or 'ANTIBODIES
"RTN","VBECDCX",92,0)
 ; IDENTIFIED' data from the legacy Blood Bank application.  Notice the
"RTN","VBECDCX",93,0)
 ; practice of swapping out the VistA ien for the antibodies equivalent
"RTN","VBECDCX",94,0)
 ; SQL GUID.
"RTN","VBECDCX",95,0)
 ; Input: DFN=patient DFN
"RTN","VBECDCX",96,0)
 ;      LRDFN=lab patient ien in the Lab Data (#63) file
"RTN","VBECDCX",97,0)
 ;     LRCHAR=char, 'AP' for antigens present, 'AI' for antigens
"RTN","VBECDCX",98,0)
 ;            identified and 'AA' for antibodies absent
"RTN","VBECDCX",99,0)
 S LRD1=0,LRN=$S(LRCHAR="AP":1,LRCHAR="AA":1.5,1:1.7)
"RTN","VBECDCX",100,0)
 S LRS=$S(LRCHAR="AP":"VBEC63 ANTIP",LRCHAR="AA":"VBEC63 ANTIA",1:"VBEC63 AI")
"RTN","VBECDCX",101,0)
 S:LRN=1 LRPCE=13 S:LRN=1.5 LRPCE=16 S:LRN=1.7 LRPCE=19
"RTN","VBECDCX",102,0)
 F  S LRD1=$O(^LR(LRDFN,LRN,LRD1)) Q:'LRD1  D
"RTN","VBECDCX",103,0)
 .S LRD=$G(^LR(LRDFN,LRN,LRD1,0)) Q:LRD=""
"RTN","VBECDCX",104,0)
 .I LRN'=1.7 S LRSTR=LRDFN_U_DFN_U_LRD1_U_$$STRIP^VBECDCX1($$SWAP^VBECDCU(61.3,$P(LRD,U)))_U_LRCHAR_U_$$STRIP^VBECDCX1($P(LRD,U,2)) ; antigens present/absent
"RTN","VBECDCX",105,0)
 .I LRN=1.7 S LRSTR=LRDFN_U_DFN_U_LRD1_U_$$STRIP^VBECDCX1($$SWAP^VBECDCU(61.3,$P(LRD,U)))_U_LRCHAR_U_$$STRIP^VBECDCX1($P(LRD,U,2)) ; antibodies
"RTN","VBECDCX",106,0)
 .S CNT=$$CNT^VBECDCU(LRS,$J)
"RTN","VBECDCX",107,0)
 .S CNT=CNT+1,^TMP(LRS,$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCX",108,0)
 .S:LRN=1 LRPCE=13 S:LRN=1.5 LRPCE=16 S:LRN=1.7 LRPCE=19
"RTN","VBECDCX",109,0)
 .;
"RTN","VBECDCX",110,0)
 .;total up the number of times antigens present/absent & antibodies
"RTN","VBECDCX",111,0)
 .;identified in addition to their respective comments appear in patient
"RTN","VBECDCX",112,0)
 .;specific data
"RTN","VBECDCX",113,0)
 .D ANTIAB^VBECDCX1
"RTN","VBECDCX",114,0)
 .;
"RTN","VBECDCX",115,0)
 .Q
"RTN","VBECDCX",116,0)
 ;total up the number of times antigens present/absent & antibodies
"RTN","VBECDCX",117,0)
 ;identified in addition to their respective comments appear for ALL
"RTN","VBECDCX",118,0)
 ;patient data
"RTN","VBECDCX",119,0)
 F I=LRPCE:1:LRPCE+2 S $P(^TMP("VBEC FINIS",$J,0),U,I)=$P(^TMP("VBEC FINIS",$J,0),U,I)+$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,I)
"RTN","VBECDCX",120,0)
 ;
"RTN","VBECDCX",121,0)
 K CNT,I,LRD,LRD1,LRN,LRPCE,LRS,LRSTR
"RTN","VBECDCX",122,0)
 Q
"RTN","VBECDCX",123,0)
 ;
"RTN","VBECDCX",124,0)
TCTRC(DFN,LRDFN,LRD1) ; save off the transfusion or transfusion
"RTN","VBECDCX",125,0)
 ; reaction comments.  called from both TRANS & TRANSR
"RTN","VBECDCX",126,0)
 ; from TRANS
"RTN","VBECDCX",127,0)
 ; Input: DFN=patient DFN
"RTN","VBECDCX",128,0)
 ;      LRDFN=lab patient ien in the Lab Data (#63) file
"RTN","VBECDCX",129,0)
 ;       LRD1=second level subscript; equivalent to FileMan's D1
"RTN","VBECDCX",130,0)
 S (LRD2,Z)=0,LRSUB="VBEC63 TRC"
"RTN","VBECDCX",131,0)
 ;indicate the number of occurences of transfusion reaction records
"RTN","VBECDCX",132,0)
 F  S LRD2=$O(^LR(LRDFN,1.9,LRD1,1,LRD2)) Q:'LRD2  D
"RTN","VBECDCX",133,0)
 .S Z=Z+1 S:Z=1 $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,24)=1
"RTN","VBECDCX",134,0)
 .S LRTRCMT=$$STRIP^VBECDCX1($P($G(^LR(LRDFN,1.9,LRD1,1,LRD2,0)),U))
"RTN","VBECDCX",135,0)
 .Q:'($P(LRD1,"."))  ;RLM 05/10/07
"RTN","VBECDCX",136,0)
 .S LRSTR="",LRSTR=LRDFN_U_DFN_U_$P(LRD1,".")_U_LRD2_U_LRTRCMT
"RTN","VBECDCX",137,0)
 .S CNT=$$CNT^VBECDCU(LRSUB,$J)
"RTN","VBECDCX",138,0)
 .S CNT=CNT+1,^TMP(LRSUB,$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCX",139,0)
 .D TRCMNT^VBECDCX1
"RTN","VBECDCX",140,0)
 .Q
"RTN","VBECDCX",141,0)
 K LRD2,LRSTR,LRSUB,LRTRCMT,Z
"RTN","VBECDCX",142,0)
 Q
"RTN","VBECDCX",143,0)
 ;
"RTN","VBECDCX",144,0)
TRD(DFN,LRDFN) ; Extract transfusion reaction date data; date/time, reaction
"RTN","VBECDCX",145,0)
 ; type, person entering reaction 
"RTN","VBECDCX",146,0)
 ; Input: DFN=patient DFN
"RTN","VBECDCX",147,0)
 ;      LRDFN=lab patient ien in the Lab Data (#63) file
"RTN","VBECDCX",148,0)
 ;FILE 63 data here
"RTN","VBECDCX",149,0)
 S LRD1=0 F  S LRD1=$O(^LR(LRDFN,1.9,LRD1)) Q:'LRD1  D
"RTN","VBECDCX",150,0)
 .S LRD=$G(^LR(LRDFN,1.9,LRD1,0)) Q:LRD=""
"RTN","VBECDCX",151,0)
 .S VBTRD=$$SWAP^VBECDCU(65.4,$P(LRD,U,2)) Q:VBTRD=""
"RTN","VBECDCX",152,0)
 .Q:'($P(LRD1,"."))  ;RLM 05/03/07
"RTN","VBECDCX",153,0)
 .S LRSTR=LRDFN_U_DFN_U_$P(LRD1,".")_U_$$DATE^VBECDCU($P(LRD,U))_U_VBTRD
"RTN","VBECDCX",154,0)
 .;
"RTN","VBECDCX",155,0)
 .S CNT=$$CNT^VBECDCU("VBEC63 TRD",$J)
"RTN","VBECDCX",156,0)
 .S CNT=CNT+1,^TMP("VBEC63 TRD",$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCX",157,0)
 .D TRDTAB^VBECDCX1
"RTN","VBECDCX",158,0)
 .D TCTRC(DFN,LRDFN,LRD1) ; get transfusion reaction comments
"RTN","VBECDCX",159,0)
 .Q
"RTN","VBECDCX",160,0)
 ;
"RTN","VBECDCX",161,0)
 ;File 65 data here
"RTN","VBECDCX",162,0)
 S CNT=$$CNT^VBECDCU("VBEC63 TRD",$J)
"RTN","VBECDCX",163,0)
 S VBTRA="" F  S VBTRA=$O(^TMP($J,"VBEC_TR_REACT",DFN,VBTRA)) Q:VBTRA=""  D
"RTN","VBECDCX",164,0)
 . Q:'$P($G(^LRD(65,VBTRA,6)),"^",5)  ;Q:'$P(^LRD(65,VBTRA,6),"^",8)
"RTN","VBECDCX",165,0)
 . S VBTRD=$P(^LRD(65,VBTRA,6),"^",8)
"RTN","VBECDCX",166,0)
 . S VBTRD=$$SWAP^VBECDCU(65.4,VBTRD) Q:VBTRD=""  ;S:VBTRD="" VBTRD="J"
"RTN","VBECDCX",167,0)
 . S VBECTRDD=$P($G(^LRD(65,VBTRA,4)),"^",2),VBECTRDD=$S(VBECTRDD="":DT,1:$$DATE^VBECDCU(VBECTRDD))
"RTN","VBECDCX",168,0)
 . S CNT=CNT+1,^TMP("VBEC63 TRD",$J,CNT,0)=LRDFN_"^"_DFN_"^65^"_VBECTRDD_"^"_VBTRD_$C(13)
"RTN","VBECDCX",169,0)
 . S LRD="1^1" D TRDTAB^VBECDCX1
"RTN","VBECDCX",170,0)
 ;
"RTN","VBECDCX",171,0)
 ;
"RTN","VBECDCX",172,0)
 ;total up the number of instances of transfusion reaction related data
"RTN","VBECDCX",173,0)
 ;including transfusion reaction comment character counts for ALL
"RTN","VBECDCX",174,0)
 ;records.
"RTN","VBECDCX",175,0)
TRTOT ;
"RTN","VBECDCX",176,0)
 F I=22:1:25 S $P(^TMP("VBEC FINIS",$J,0),U,I)=$P(^TMP("VBEC FINIS",$J,0),U,I)+$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,I)
"RTN","VBECDCX",177,0)
 K LRD,LRD1,LRSTR
"RTN","VBECDCX",178,0)
 Q
"RTN","VBECDCX",179,0)
 ;
"RTN","VBECDCX",180,0)
KILL ; kill variables
"RTN","VBECDCX",181,0)
 K CNT,DPT,DPTNAME,LRBLD,LRDATE,LRICN,LRMTH,DPTNAME,LRSEX,LRSSN,LRSTR
"RTN","VBECDCX",182,0)
 Q
"RTN","VBECDCX1")
0^22^B10155625
"RTN","VBECDCX1",1,0)
VBECDCX1 ;hoifo/gjc-data conversion & pre-implementation data extract;Nov 21, 2002
"RTN","VBECDCX1",2,0)
 ;;5.2;LAB SERVICE;**335**;Sep 27, 1994;Build 5
"RTN","VBECDCX1",3,0)
 ;
"RTN","VBECDCX1",4,0)
 ;Medical Device #:
"RTN","VBECDCX1",5,0)
 ;Note: The food and Drug Administration classifies this software as a
"RTN","VBECDCX1",6,0)
 ;medical device.  As such, it may not be changed in any way.
"RTN","VBECDCX1",7,0)
 ;Modifications to this software may result in an adulterated medical
"RTN","VBECDCX1",8,0)
 ;device under 21CFR820, the use of which is considered to be a
"RTN","VBECDCX1",9,0)
 ;violation of US Federal Statutes.  Acquiring and implementing this
"RTN","VBECDCX1",10,0)
 ;software through the Freedom of Information Act requires the
"RTN","VBECDCX1",11,0)
 ;implementer to assume total responsibility for the software, and
"RTN","VBECDCX1",12,0)
 ;become a registered manufacturer of a medical device, subject to FDA
"RTN","VBECDCX1",13,0)
 ;regulations.
"RTN","VBECDCX1",14,0)
 ;
"RTN","VBECDCX1",15,0)
ANTIAB ;save off totals of ANTIBODIES IDENTIFIED, ANTIBODIES IDENTIFIED
"RTN","VBECDCX1",16,0)
 ;COMMENTS, RBC ANTIGENS PRESENT, RBC ANTIGENS PRESENT COMMENT,
"RTN","VBECDCX1",17,0)
 ;RBC ANTIGENS ABSENT, RBC ANTIGENS ABSENT COMMENT.
"RTN","VBECDCX1",18,0)
 ;total up the number of times antigens present/absent & antibodies
"RTN","VBECDCX1",19,0)
 ;identified appear in patient specific data
"RTN","VBECDCX1",20,0)
 I $P(LRD,U)'="" S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,LRPCE)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,LRPCE)+1
"RTN","VBECDCX1",21,0)
 I $P(LRD,U,2)'="" D
"RTN","VBECDCX1",22,0)
 .S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,LRPCE+1)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,LRPCE+1)+1 ;do comments exist?
"RTN","VBECDCX1",23,0)
 .;save # of comment chars
"RTN","VBECDCX1",24,0)
 .S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,LRPCE+2)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,LRPCE+2)+$L($$STRIP^VBECDCX1($P(LRD,U,2)))
"RTN","VBECDCX1",25,0)
 .Q
"RTN","VBECDCX1",26,0)
 Q
"RTN","VBECDCX1",27,0)
 ;
"RTN","VBECDCX1",28,0)
TRDTAB ;tabulate the number of transfusion date/time and transfusion reaction
"RTN","VBECDCX1",29,0)
 ;type records
"RTN","VBECDCX1",30,0)
 I $P(LRD,U)'="" S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,22)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,22)+1
"RTN","VBECDCX1",31,0)
 I $P(LRD,U,2)'="" S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,23)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,23)+1
"RTN","VBECDCX1",32,0)
 Q
"RTN","VBECDCX1",33,0)
 ;
"RTN","VBECDCX1",34,0)
TRCMNT ;tabulate the number of transfusion comments and the total number of
"RTN","VBECDCX1",35,0)
 ;characters for all transfusion comments.
"RTN","VBECDCX1",36,0)
 ;LRTRCMT defined in TCTRC^VBECDCX
"RTN","VBECDCX1",37,0)
 S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,25)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,25)+$L(LRTRCMT)
"RTN","VBECDCX1",38,0)
 Q
"RTN","VBECDCX1",39,0)
 ;
"RTN","VBECDCX1",40,0)
BBC(DFN,LRDFN) ; extract 'BLOOD BANK COMMENTS' data from the legacy
"RTN","VBECDCX1",41,0)
 ; Blood Bank application.  The first node will have the timestamp
"RTN","VBECDCX1",42,0)
 ; (date) of when the comments were most recently edited.
"RTN","VBECDCX1",43,0)
 ; Input: DFN=patient DFN
"RTN","VBECDCX1",44,0)
 ;      LRDFN=lab patient ien in the Lab Data (#63) file
"RTN","VBECDCX1",45,0)
 S (LRD1,Z)=0,LRBBCDT=$P($G(^LR(LRDFN,3,0)),U,5)
"RTN","VBECDCX1",46,0)
 S LRBBCDT=$P(LRBBCDT,".") ;RLM 03/27/2007
"RTN","VBECDCX1",47,0)
 S:LRBBCDT'?7N LRBBCDT=-1 ;should be a date w/o time
"RTN","VBECDCX1",48,0)
 S:LRBBCDT'=-1 LRBBCDT=$$DATE^VBECDCU(LRBBCDT)
"RTN","VBECDCX1",49,0)
 S:LRBBCDT=-1 LRBBCDT="" ;RLM 03/27/2007
"RTN","VBECDCX1",50,0)
 F  S LRD1=$O(^LR(LRDFN,3,LRD1)) Q:'LRD1  D
"RTN","VBECDCX1",51,0)
 .S LRD=$G(^LR(LRDFN,3,LRD1,0)) Q:LRD=""
"RTN","VBECDCX1",52,0)
 .;translate carets '^' to nulls
"RTN","VBECDCX1",53,0)
 .S LRD=$TR(LRD,"^","")
"RTN","VBECDCX1",54,0)
 .;strip leading spaces & trailing spaces
"RTN","VBECDCX1",55,0)
 .S LRD=$$STRIP(LRD),Z=Z+1
"RTN","VBECDCX1",56,0)
 .S LRSTR=LRDFN_U_DFN_U_LRD1_U_LRD_U_LRBBCDT
"RTN","VBECDCX1",57,0)
 .S:Z=1 $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,26)=1
"RTN","VBECDCX1",58,0)
 .S $P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,27)=$P(^TMP("VBEC FINIS",$J,VBECRTOT,0),U,27)+$L(LRD)
"RTN","VBECDCX1",59,0)
 .S CNT=$$CNT^VBECDCU("VBEC63 BBC",$J)
"RTN","VBECDCX1",60,0)
 .S CNT=CNT+1,^TMP("VBEC63 BBC",$J,CNT,0)=LRSTR_$C(13)
"RTN","VBECDCX1",61,0)
 .S VBECTOT("VBEC63 BBC")=+$G(VBECTOT("VBEC63 BBC"))+1
"RTN","VBECDCX1",62,0)
 .;total BBC character count for ALL records.
"RTN","VBECDCX1",63,0)
 .S $P(^TMP("VBEC FINIS",$J,0),U,27)=+$P(^TMP("VBEC FINIS",$J,0),U,27)+$L(LRD)
"RTN","VBECDCX1",64,0)
 .;total up the number of instances Blood Bank Comments (BBC)
"RTN","VBECDCX1",65,0)
 .S:Z=1 $P(^TMP("VBEC FINIS",$J,0),U,26)=+$P(^TMP("VBEC FINIS",$J,0),U,26)+1
"RTN","VBECDCX1",66,0)
 .Q
"RTN","VBECDCX1",67,0)
 K CNT,I,LRBBCDT,LRD,LRD1,LRSTR,Z
"RTN","VBECDCX1",68,0)
 Q
"RTN","VBECDCX1",69,0)
 ;
"RTN","VBECDCX1",70,0)
STRIP(X) ;strip leading and trailing spaces from a data string.
"RTN","VBECDCX1",71,0)
 ; input: string to be checked for leading and trailing spaces
"RTN","VBECDCX1",72,0)
 ;return: string without leading and trailing spaces
"RTN","VBECDCX1",73,0)
 ;strip leading spaces first...
"RTN","VBECDCX1",74,0)
 F  Q:$F(X," ")'=2  S X=$E(X,2,$L(X))
"RTN","VBECDCX1",75,0)
 ;then strip trailing spaces...
"RTN","VBECDCX1",76,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","VBECDCX1",77,0)
 Q X
"RTN","VBECDCX1",78,0)
 ;
"SEC","^DIC",6000,6000,0,"AUDIT")
@
"SEC","^DIC",6000,6000,0,"DD")
@
"SEC","^DIC",6000,6000,0,"DEL")
@
"SEC","^DIC",6000,6000,0,"LAYGO")
@
"SEC","^DIC",6000,6000,0,"RD")
@
"SEC","^DIC",6000,6000,0,"WR")
@
"SEC","^DIC",6001,6001,0,"AUDIT")
@
"SEC","^DIC",6001,6001,0,"DD")
@
"SEC","^DIC",6001,6001,0,"DEL")
@
"SEC","^DIC",6001,6001,0,"LAYGO")
@
"SEC","^DIC",6001,6001,0,"RD")
@
"SEC","^DIC",6001,6001,0,"WR")
@
"SEC","^DIC",6003,6003,0,"AUDIT")
@
"SEC","^DIC",6003,6003,0,"DD")
@
"SEC","^DIC",6003,6003,0,"DEL")
@
"SEC","^DIC",6003,6003,0,"LAYGO")
@
"SEC","^DIC",6003,6003,0,"RD")
@
"SEC","^DIC",6003,6003,0,"WR")
@
"SEC","^DIC",6005,6005,0,"AUDIT")
@
"SEC","^DIC",6005,6005,0,"DD")
@
"SEC","^DIC",6005,6005,0,"DEL")
@
"SEC","^DIC",6005,6005,0,"LAYGO")
@
"SEC","^DIC",6005,6005,0,"RD")
@
"SEC","^DIC",6005,6005,0,"WR")
@
"SEC","^DIC",6007,6007,0,"AUDIT")
@
"SEC","^DIC",6007,6007,0,"DD")
@
"SEC","^DIC",6007,6007,0,"DEL")
@
"SEC","^DIC",6007,6007,0,"LAYGO")
@
"SEC","^DIC",6007,6007,0,"RD")
@
"SEC","^DIC",6007,6007,0,"WR")
@
"SEC","^DIC",6009,6009,0,"AUDIT")

"SEC","^DIC",6009,6009,0,"DD")

"SEC","^DIC",6009,6009,0,"DEL")

"SEC","^DIC",6009,6009,0,"LAYGO")

"SEC","^DIC",6009,6009,0,"RD")

"SEC","^DIC",6009,6009,0,"WR")

"VER")
8.0^22.0
"^DD",6000,6000,0)
FIELD^^.07^8
"^DD",6000,6000,0,"DDA")
N
"^DD",6000,6000,0,"DT")
3020812
"^DD",6000,6000,0,"IX","B",6000,.01)

"^DD",6000,6000,0,"NM","VBECS SITE PARAMETERS")

"^DD",6000,6000,0,"VRPK")
LR
"^DD",6000,6000,.001,0)
NUMBER^NJ1,0^^ ^K:+X'=X!(X>1)!(X<1)!(X?.E1"."1N.N) X
"^DD",6000,6000,.001,3)
System generated, only the whole number one (1) is accepted.
"^DD",6000,6000,.001,21,0)
^^1^1^3020308^
"^DD",6000,6000,.001,21,1,0)
Used to have VA FileMan only have one entry in the file.
"^DD",6000,6000,.001,23,0)
^^2^2^3020308^
"^DD",6000,6000,.001,23,1,0)
System generated, only the whole number one (1) is accepted.  Input 
"^DD",6000,6000,.001,23,2,0)
transform on the .01 field sets DINUM equal to one.
"^DD",6000,6000,.001,"DT")
3020308
"^DD",6000,6000,.01,0)
FACILITY NAME^RP4'XI^DIC(4,^0;1^S DINUM=1
"^DD",6000,6000,.01,1,0)
^.1
"^DD",6000,6000,.01,1,1,0)
6000^B
"^DD",6000,6000,.01,1,1,1)
S ^VBEC(6000,"B",$E(X,1,30),DA)=""
"^DD",6000,6000,.01,1,1,2)
K ^VBEC(6000,"B",$E(X,1,30),DA)
"^DD",6000,6000,.01,3)
Enter the name of the facility here.
"^DD",6000,6000,.01,21,0)
^^1^1^3020812^^
"^DD",6000,6000,.01,21,1,0)
This is the name of the facility running this application.
"^DD",6000,6000,.01,"DT")
3030918
"^DD",6000,6000,.02,0)
TOTAL LAB DATA RECORDS^NJ15,0^^0;2^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6000,6000,.02,3)
This is the total number of Blood Bank records in the Lab Data file.
"^DD",6000,6000,.02,21,0)
^^2^2^3020618^
"^DD",6000,6000,.02,21,1,0)
This field indicates the total number of records in the Lab Data 
"^DD",6000,6000,.02,21,2,0)
(#63) file when the data conversion begins.
"^DD",6000,6000,.02,"DT")
3020618
"^DD",6000,6000,.03,0)
NUM LAB DATA RECORDS CONVERTED^NJ15,0^^0;3^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6000,6000,.03,3)
This is the number of Lab Data records converted to VBECS. 
"^DD",6000,6000,.03,21,0)
^^3^3^3021023^
"^DD",6000,6000,.03,21,1,0)
The number of records in the Lab Data (#63) file converted to VBECS is 
"^DD",6000,6000,.03,21,2,0)
automatically entered here when the data conversion application finishes
"^DD",6000,6000,.03,21,3,0)
processing.
"^DD",6000,6000,.03,"DT")
3020517
"^DD",6000,6000,.04,0)
TOTAL BLOOD INVENTORY RECORDS^NJ15,0^^0;4^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6000,6000,.04,3)
This is the total number of records in the Blood Inventory file.
"^DD",6000,6000,.04,21,0)
^^1^1^3020618^
"^DD",6000,6000,.04,21,1,0)
This is the total number of records in the Blood Inventory (#65.4) file. 
"^DD",6000,6000,.04,"DT")
3020618
"^DD",6000,6000,.05,0)
NUM BLOOD INVENTORY RECS CNVT^NJ15,0^^0;5^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6000,6000,.05,3)
Number of Blood Inventory records converted to VBECS.
"^DD",6000,6000,.05,21,0)
^^3^3^3021023^
"^DD",6000,6000,.05,21,1,0)
The number of Blood Inventory (#65.4) file records converted to VBECS is
"^DD",6000,6000,.05,21,2,0)
automatically entered here when the data conversion application finishes
"^DD",6000,6000,.05,21,3,0)
processing.
"^DD",6000,6000,.05,"DT")
3020517
"^DD",6000,6000,.06,0)
DEFAULT DIRECTORY^RFX^^0;6^K:X["*"!$L(X)>80!($L(X)<3) X X:$D(X) ^DD(6000,.06,9.2) K:'$D(VBECDIR)#2 X K VBECDIR
"^DD",6000,6000,.06,3)
Input the default directory where the Blood Bank legacy data finally resides.
"^DD",6000,6000,.06,9.2)
N IO,POP D OPEN^%ZISH("VBEC",X,"VBECZZ.TMP","W") S:'POP VBECDIR=POP D:'POP CLOSE^%ZISH("VBEC")
"^DD",6000,6000,.06,21,0)
^^52^52^3020517^
"^DD",6000,6000,.06,21,1,0)
This field identifies the default directory where the legacy data files 
"^DD",6000,6000,.06,21,2,0)
reside.  On an Open VMS machine, the format will look something like: 
"^DD",6000,6000,.06,21,3,0)
'SYS$USER:[USER]'.  The directory specification ([USER]) optionally can 
"^DD",6000,6000,.06,21,4,0)
be preceded by a device name, in this case, 'SYS$USER' (and colon [:]).  
"^DD",6000,6000,.06,21,5,0)
Wildcard characters are not allowed. When identifying a subdirectory, 
"^DD",6000,6000,.06,21,6,0)
separate the names of the directory levels with periods (.).
"^DD",6000,6000,.06,21,7,0)
 
"^DD",6000,6000,.06,21,8,0)
Both file systems use the backslash (\) character to separate directory 
"^DD",6000,6000,.06,21,9,0)
names and the file name when forming a path. General rules for 
"^DD",6000,6000,.06,21,10,0)
applications creating names for directories and files or processing names 
"^DD",6000,6000,.06,21,11,0)
supplied by the user include the following:
"^DD",6000,6000,.06,21,12,0)
 
"^DD",6000,6000,.06,21,13,0)
* Use any character in the current code page for a name, but do not use a 
"^DD",6000,6000,.06,21,14,0)
path separator, a character in the range 0 through 31, or any character 
"^DD",6000,6000,.06,21,15,0)
explicitly disallowed by the file system. A name can contain characters 
"^DD",6000,6000,.06,21,16,0)
in the extended character set (128-255). Use the backslash (\), the 
"^DD",6000,6000,.06,21,17,0)
forward slash (/), or both to separate components in a path. No other
"^DD",6000,6000,.06,21,18,0)
 
"^DD",6000,6000,.06,21,19,0)
* Character is acceptable as a path separator. Note that UNC names must 
"^DD",6000,6000,.06,21,20,0)
adhere to the following format: \\server\share.
"^DD",6000,6000,.06,21,21,0)
 
"^DD",6000,6000,.06,21,22,0)
* Use a period (.) as a directory component in a path to
"^DD",6000,6000,.06,21,23,0)
 represent the current directory. 
"^DD",6000,6000,.06,21,24,0)
 
"^DD",6000,6000,.06,21,25,0)
* Use two consecutive periods (..) as a directory component in a path to 
"^DD",6000,6000,.06,21,26,0)
represent the parent of the current directory.
"^DD",6000,6000,.06,21,27,0)
 
"^DD",6000,6000,.06,21,28,0)
* Use a period (.) to separate the base file name from the extension in a 
"^DD",6000,6000,.06,21,29,0)
directory name or file name. 
"^DD",6000,6000,.06,21,30,0)
 
"^DD",6000,6000,.06,21,31,0)
* Do not use the following characters in directory names or file names, 
"^DD",6000,6000,.06,21,32,0)
because they are reserved: < > : " / \ |
"^DD",6000,6000,.06,21,33,0)
 
"^DD",6000,6000,.06,21,34,0)
* Do not use device names, such as aux, con, lpt1, and prn, as file names 
"^DD",6000,6000,.06,21,35,0)
or directory names. 
"^DD",6000,6000,.06,21,36,0)
 
"^DD",6000,6000,.06,21,37,0)
* Do not assume case sensitivity. Consider names such as OSCAR, Oscar, 
"^DD",6000,6000,.06,21,38,0)
and oscar to be the same. 
"^DD",6000,6000,.06,21,39,0)
 
"^DD",6000,6000,.06,21,40,0)
By following the rules listed in this section, an application can create 
"^DD",6000,6000,.06,21,41,0)
valid names for files and directories regardless of the file system in 
"^DD",6000,6000,.06,21,42,0)
use. 
"^DD",6000,6000,.06,21,43,0)
 
"^DD",6000,6000,.06,21,44,0)
Backslashes (\) are used as element dividers in paths (dividing the file 
"^DD",6000,6000,.06,21,45,0)
name from the path to it, or directories from one another in a path). You 
"^DD",6000,6000,.06,21,46,0)
cannot use them in file or directory names. They may be required as part 
"^DD",6000,6000,.06,21,47,0)
of volume names (for example, "C:\").
"^DD",6000,6000,.06,21,48,0)
 
"^DD",6000,6000,.06,21,49,0)
These are only examples of default directory names and should not be 
"^DD",6000,6000,.06,21,50,0)
taken literally.
"^DD",6000,6000,.06,21,51,0)
 
"^DD",6000,6000,.06,21,52,0)
These names will most likely differ from site to site.
"^DD",6000,6000,.06,"DT")
3020730
"^DD",6000,6000,.07,0)
VBECS MAIL GROUP^R*P3.8'X^XMB(3.8,^0;7^S DIC("S")="I $E($P($G(^XMB(3.8,+Y,0)),""^""),1,5)=""VBECS""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",6000,6000,.07,3)
The name of the mail group where data conversion information should be sent is automatically entered here at the time of the post-installation.
"^DD",6000,6000,.07,12)
point to VBEC name spaced mail groups only.
"^DD",6000,6000,.07,12.1)
S DIC("S")="I $E($P($G(^XMB(3.8,+Y,0)),""^""),1,5)=""VBECS"""
"^DD",6000,6000,.07,21,0)
^.001^3^3^3020618^^
"^DD",6000,6000,.07,21,1,0)
This is the mail group the person responsible for data validation and 
"^DD",6000,6000,.07,21,2,0)
data conversion should expect to see mail regarding results of the 
"^DD",6000,6000,.07,21,3,0)
aforementioned processes.
"^DD",6000,6000,.07,"DT")
3020730
"^DD",6001,6001,0)
FIELD^^200^6
"^DD",6001,6001,0,"DDA")
N
"^DD",6001,6001,0,"DT")
3080509
"^DD",6001,6001,0,"IX","B",6001,.01)

"^DD",6001,6001,0,"NM","VBECS DATA INTEGRITY/CONVERSION STATISTICS")

"^DD",6001,6001,0,"VRPK")
LR
"^DD",6001,6001,.01,0)
PROCESS START TIMESTAMP^RD^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",6001,6001,.01,1,0)
^.1
"^DD",6001,6001,.01,1,1,0)
6001^B
"^DD",6001,6001,.01,1,1,1)
S ^VBEC(6001,"B",$E(X,1,30),DA)=""
"^DD",6001,6001,.01,1,1,2)
K ^VBEC(6001,"B",$E(X,1,30),DA)
"^DD",6001,6001,.01,3)
System generated value, it's the process start time.
"^DD",6001,6001,.01,21,0)
^^2^2^3020512^
"^DD",6001,6001,.01,21,1,0)
This is the date/time the process, either the data integrity check or 
"^DD",6001,6001,.01,21,2,0)
data conversion, started running on the host system.
"^DD",6001,6001,.01,"DT")
3020517
"^DD",6001,6001,.02,0)
PROCESS^S^1:CONVERT DATA;0:VALIDATE DATA;^0;2^Q
"^DD",6001,6001,.02,3)
System generated value, identifies the goal of the process.
"^DD",6001,6001,.02,21,0)
^^1^1^3020512^
"^DD",6001,6001,.02,21,1,0)
This field identifies the goal of the process.
"^DD",6001,6001,.02,"DT")
3020514
"^DD",6001,6001,.03,0)
PROCESS COMPLETION TIMESTAMP^DX^^0;3^S %DT="ESTX",%DT(0)=$P($G(^VBEC(6001,D0,0)),U) D ^%DT K %DT(0) S X=Y K:Y<1 X
"^DD",6001,6001,.03,3)
System generated value, the timestamp when the process finishes running. Process completion date/time must fall chronologically after the process start timestamp.
"^DD",6001,6001,.03,21,0)
^^2^2^3020512^
"^DD",6001,6001,.03,21,1,0)
This is the date/time the process, either the data integrity check or data
"^DD",6001,6001,.03,21,2,0)
conversion, finished running on the host system.
"^DD",6001,6001,.03,"DT")
3020517
"^DD",6001,6001,.04,0)
USER^P200'^VA(200,^0;4^Q
"^DD",6001,6001,.04,3)
System generated value, identifies the user running this process.
"^DD",6001,6001,.04,21,0)
^^1^1^3020512^
"^DD",6001,6001,.04,21,1,0)
This field identifies the user running this process.
"^DD",6001,6001,.04,"DT")
3020512
"^DD",6001,6001,100,0)
DATA INTEGRITY ISSUES^6001.01PA^^ERR;0
"^DD",6001,6001,200,0)
DATA CONVERSION STATISTICS^6001.02A^^TOT;0
"^DD",6001,6001.01,0)
DATA INTEGRITY ISSUES SUB-FIELD^^.09^9
"^DD",6001,6001.01,0,"DT")
3080509
"^DD",6001,6001.01,0,"IX","B",6001.01,.01)

"^DD",6001,6001.01,0,"NM","DATA INTEGRITY ISSUES")

"^DD",6001,6001.01,0,"UP")
6001
"^DD",6001,6001.01,.01,0)
FILE^R*P1'^DIC(^0;1^S DIC("S")="I Y=2!(Y=63)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",6001,6001.01,.01,1,0)
^.1
"^DD",6001,6001.01,.01,1,1,0)
6001.01^B
"^DD",6001,6001.01,.01,1,1,1)
S ^VBEC(6001,DA(1),"ERR","B",$E(X,1,30),DA)=""
"^DD",6001,6001.01,.01,1,1,2)
K ^VBEC(6001,DA(1),"ERR","B",$E(X,1,30),DA)
"^DD",6001,6001.01,.01,3)
System generated, tracks data integrity issues by file.
"^DD",6001,6001.01,.01,12)
Only the Patient (#2) and Lab Data (#63) files are being evaluated.
"^DD",6001,6001.01,.01,12.1)
S DIC("S")="I Y=2!(Y=63)"
"^DD",6001,6001.01,.01,21,0)
^.001^8^8^3040211^^^^
"^DD",6001,6001.01,.01,21,1,0)
System generated, tracks data integrity issues.  This multiple
"^DD",6001,6001.01,.01,21,2,0)
identifies the data integrity issue as well as the file where the
"^DD",6001,6001.01,.01,21,3,0)
integrity issue exists.  This points to the file where the process
"^DD",6001,6001.01,.01,21,4,0)
originally navigated from.
"^DD",6001,6001.01,.01,21,5,0)
 
"^DD",6001,6001.01,.01,21,6,0)
In the case of data integrity issues between the Patient (#2) and Lab
"^DD",6001,6001.01,.01,21,7,0)
Data (#63) files, this field will store the file number of the Patient
"^DD",6001,6001.01,.01,21,8,0)
(#2) file.
"^DD",6001,6001.01,.01,23,0)
^.001^2^2^3040211^^^^
"^DD",6001,6001.01,.01,23,1,0)
Will screen for the following files: Patient (#2) and Lab Data (#63) by 
"^DD",6001,6001.01,.01,23,2,0)
Application Group.
"^DD",6001,6001.01,.01,"DT")
3040211
"^DD",6001,6001.01,.02,0)
IEN OF INVALID RECORD^NJ15,0^^0;2^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1.N) X
"^DD",6001,6001.01,.02,3)
Type a number between 1 and 999999999999999, 0 Decimal Digits
"^DD",6001,6001.01,.02,21,0)
^^2^2^3020618^
"^DD",6001,6001.01,.02,21,1,0)
This field is system generated and contains the IEN of the record with 
"^DD",6001,6001.01,.02,21,2,0)
invalid or questionable data.
"^DD",6001,6001.01,.02,"DT")
3080509
"^DD",6001,6001.01,.03,0)
ASSOCIATED FILE^*P1'^DIC(^0;3^S DIC("S")="I Y=63!(Y=65)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",6001,6001.01,.03,3)
System generated, file number of associated file.
"^DD",6001,6001.01,.03,12)
Lab Data (#63) and Blood Inventory (#65) are the only valid files.
"^DD",6001,6001.01,.03,12.1)
S DIC("S")="I Y=63!(Y=65)"
"^DD",6001,6001.01,.03,21,0)
^.001^3^3^3030225^^^^
"^DD",6001,6001.01,.03,21,1,0)
If two files are involved in the data validation problem, this field will 
"^DD",6001,6001.01,.03,21,2,0)
contain the associated file number (expected to be the Lab Data (#63) or 
"^DD",6001,6001.01,.03,21,3,0)
Blood Inventory (#65) file).
"^DD",6001,6001.01,.03,"DT")
3030225
"^DD",6001,6001.01,.04,0)
IEN OF INVALID ASSOC'D REC^NJ15,0^^0;4^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1.N) X
"^DD",6001,6001.01,.04,3)
Type a number between 1 and 999999999999999, 0 Decimal Digits
"^DD",6001,6001.01,.04,21,0)
^^2^2^3020618^
"^DD",6001,6001.01,.04,21,1,0)
This field is system generated and tracks the IEN of the record of the
"^DD",6001,6001.01,.04,21,2,0)
associated file.
"^DD",6001,6001.01,.04,"DT")
3080509
"^DD",6001,6001.01,.05,0)
LRDFN ONE^NJ15,0^^0;5^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1.N) X
"^DD",6001,6001.01,.05,3)
Type a number between 1 and 999999999999999, 0 Decimal Digits
"^DD",6001,6001.01,.05,21,0)
^^2^2^3020618^
"^DD",6001,6001.01,.05,21,1,0)
This field will store the IEN of a record in the Lab Data (#63) file.  
"^DD",6001,6001.01,.05,21,2,0)
From this information, patient information can be derived.
"^DD",6001,6001.01,.05,23,0)
^^8^8^3020618^
"^DD",6001,6001.01,.05,23,1,0)
The intent is to keep a record of which Lab Data (#63) patient or
"^DD",6001,6001.01,.05,23,2,0)
patients, in the TRANSFUSION RECORD sub-file have duplicate Component 
"^DD",6001,6001.01,.05,23,3,0)
and Component ID data.
"^DD",6001,6001.01,.05,23,4,0)
 
"^DD",6001,6001.01,.05,23,5,0)
If duplicate Component/Component ID data exist for a single patient, only 
"^DD",6001,6001.01,.05,23,6,0)
the LRDFN ONE (#.05) field will be populated.  If there are two different 
"^DD",6001,6001.01,.05,23,7,0)
patients experiencing this problem, then both the LRDFN ONE and LRDFN TWO 
"^DD",6001,6001.01,.05,23,8,0)
(#.06) fields will be populated.
"^DD",6001,6001.01,.05,"DT")
3080509
"^DD",6001,6001.01,.06,0)
LRDFN TWO^NJ15,0^^0;6^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1.N) X
"^DD",6001,6001.01,.06,3)
Type a number between 1 and 999999999999999, 0 Decimal Digits
"^DD",6001,6001.01,.06,21,0)
^^2^2^3020618^
"^DD",6001,6001.01,.06,21,1,0)
This field will store the IEN of a record in the Lab Data (#63) file.  
"^DD",6001,6001.01,.06,21,2,0)
From this information, patient information can be derived.
"^DD",6001,6001.01,.06,23,0)
^^8^8^3020618^
"^DD",6001,6001.01,.06,23,1,0)
The intent is to keep a record of which Lab Data (#63) patient or 
"^DD",6001,6001.01,.06,23,2,0)
patients, in the TRANSFUSION RECORD sub-file have duplicate Component and 
"^DD",6001,6001.01,.06,23,3,0)
Component ID data.
"^DD",6001,6001.01,.06,23,4,0)
 
"^DD",6001,6001.01,.06,23,5,0)
If duplicate Component/Component ID data exist for a single patient, only 
"^DD",6001,6001.01,.06,23,6,0)
the LRDFN ONE (#.05) field will be populated.  If there are two different 
"^DD",6001,6001.01,.06,23,7,0)
patients experiencing this problem, then both the LRDFN ONE and LRDFN TWO 
"^DD",6001,6001.01,.06,23,8,0)
(#.06) fields will be populated.
"^DD",6001,6001.01,.06,"DT")
3080509
"^DD",6001,6001.01,.07,0)
COMPONENT^P66'^LAB(66,^0;7^Q
"^DD",6001,6001.01,.07,3)
System generated, this is a duplicate Blood Product Component stored for reporting purposes.
"^DD",6001,6001.01,.07,21,0)
^.001^2^2^3040211^^
"^DD",6001,6001.01,.07,21,1,0)
This field contains the Component that is duplicated along with the 
"^DD",6001,6001.01,.07,21,2,0)
Component ID for either a single patient, or, multiple patients.
"^DD",6001,6001.01,.07,23,0)
^.001^5^5^3040211^^
"^DD",6001,6001.01,.07,23,1,0)
Part of the invalid data tracking process for duplicate
"^DD",6001,6001.01,.07,23,2,0)
component/component ID data for a single or multiple patients.
"^DD",6001,6001.01,.07,23,3,0)
 
"^DD",6001,6001.01,.07,23,4,0)
Not screened because data captured is expected to be screened in the 
"^DD",6001,6001.01,.07,23,5,0)
TRANSFUSION RECORD (#63.017) sub-file.
"^DD",6001,6001.01,.07,"DT")
3020423
"^DD",6001,6001.01,.08,0)
COMPONENT ID^F^^0;8^K:$L(X)>13!($L(X)<2) X
"^DD",6001,6001.01,.08,3)
System generated, this is a duplicate Blood Product Component ID stored for reporting purposes.
"^DD",6001,6001.01,.08,21,0)
^^2^2^3020618^
"^DD",6001,6001.01,.08,21,1,0)
This field contains the Component that is duplicated along with the
"^DD",6001,6001.01,.08,21,2,0)
Component ID for either a single patient, or, multiple patients.
"^DD",6001,6001.01,.08,23,0)
^^4^4^3020618^
"^DD",6001,6001.01,.08,23,1,0)
Part of the invalid data tracking process for duplicate
"^DD",6001,6001.01,.08,23,2,0)
component/component ID data for a single or multiple patients. Not
"^DD",6001,6001.01,.08,23,3,0)
screened because data captured is expected to be screened in the
"^DD",6001,6001.01,.08,23,4,0)
TRANSFUSION RECORD (#63.017) sub-file.
"^DD",6001,6001.01,.08,"DT")
3020423
"^DD",6001,6001.01,.09,0)
DATA INTEGRITY ISSUE^F^^0;9^K:$L(X)>100!($L(X)<3) X
"^DD",6001,6001.01,.09,3)
System generated, this field tracks the relevant information as to why the data integrity issue exists.
"^DD",6001,6001.01,.09,21,0)
^^2^2^3020423^
"^DD",6001,6001.01,.09,21,1,0)
This field is system generated and tracks the relevant information as to 
"^DD",6001,6001.01,.09,21,2,0)
why the data integrity issue exists.
"^DD",6001,6001.01,.09,"DT")
3020423
"^DD",6001,6001.02,0)
DATA CONVERSION STATISTICS SUB-FIELD^^27^27
"^DD",6001,6001.02,0,"DT")
3040310
"^DD",6001,6001.02,0,"IX","B",6001.02,.01)

"^DD",6001,6001.02,0,"NM","DATA CONVERSION STATISTICS")

"^DD",6001,6001.02,0,"UP")
6001
"^DD",6001,6001.02,.01,0)
LRDFN^NJ12,0X^^0;1^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1N.N) X S:$D(X)#2 DINUM=X
"^DD",6001,6001.02,.01,3)
Non-interactive; format will be a number between 1 and 999999999999999, 0 decimal digits.
"^DD",6001,6001.02,.01,21,0)
^.001^2^2^3040419^^^
"^DD",6001,6001.02,.01,21,1,0)
This field tracks the number of records converted to VBECS from the Lab
"^DD",6001,6001.02,.01,21,2,0)
Data (#63) file.
"^DD",6001,6001.02,.01,"DT")
3040419
"^DD",6001,6001.02,2,0)
DFN^NJ12,0^^0;2^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,2,3)
Non-interactive; format will be a number between 1 and 999999999999999, 0 decimal digits.
"^DD",6001,6001.02,2,21,0)
^^1^1^3040310^
"^DD",6001,6001.02,2,21,1,0)
DFN is the IEN of the patient record from the Patient (#2) file.
"^DD",6001,6001.02,2,"DT")
3040310
"^DD",6001,6001.02,3,0)
FAMILY NAME^NJ9,0^^0;3^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,3,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'Family Name' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,3,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,3,21,1,0)
Tabulates the number of times the 'Family Name' data element exists for
"^DD",6001,6001.02,3,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,3,"DT")
3040310
"^DD",6001,6001.02,4,0)
GIVEN NAME^NJ9,0^^0;4^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,4,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'Given Name' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,4,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,4,21,1,0)
Tabulates the number of times the 'Given Name' data element exists for 
"^DD",6001,6001.02,4,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,4,"DT")
3040310
"^DD",6001,6001.02,5,0)
MIDDLE NAME^NJ9,0^^0;5^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,5,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'Middle Name' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,5,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,5,21,1,0)
Tabulates the number of times the 'Middle Name' data element exists for 
"^DD",6001,6001.02,5,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,5,"DT")
3040310
"^DD",6001,6001.02,6,0)
SUFFIX (NAME)^NJ9,0^^0;6^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,6,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'Suffix' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,6,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,6,21,1,0)
Tabulates the number of times the 'Suffix' data element exists for 
"^DD",6001,6001.02,6,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,6,"DT")
3040310
"^DD",6001,6001.02,7,0)
SEX^NJ9,0^^0;7^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,7,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'Sex' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,7,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,7,21,1,0)
Tabulates the number of times the 'Sex' data element exists for 
"^DD",6001,6001.02,7,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,7,"DT")
3040310
"^DD",6001,6001.02,8,0)
DOB^NJ9,0^^0;8^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,8,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'DOB' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,8,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,8,21,1,0)
Tabulates the number of times the 'DOB' data element exists for 
"^DD",6001,6001.02,8,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,8,"DT")
3040310
"^DD",6001,6001.02,9,0)
SSN^NJ9,0^^0;9^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,9,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'SSN' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,9,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,9,21,1,0)
Tabulates the number of times the 'SSN' data element exists for 
"^DD",6001,6001.02,9,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,9,"DT")
3040310
"^DD",6001,6001.02,10,0)
ICN^NJ9,0^^0;10^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,10,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'ICN' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,10,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,10,21,1,0)
Tabulates the number of times the 'ICN' data element exists for 
"^DD",6001,6001.02,10,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,10,"DT")
3040310
"^DD",6001,6001.02,11,0)
ABO^NJ9,0^^0;11^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,11,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'ABO' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,11,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,11,21,1,0)
Tabulates the number of times the 'ABO' data element exists for 
"^DD",6001,6001.02,11,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,11,"DT")
3040310
"^DD",6001,6001.02,12,0)
RH^NJ9,0^^0;12^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,12,3)
Non-interactive; indicates the number of occurrences (maximum of one) that the 'RH' data element appears in the Lab Data file record. Will either not exist (0), or exist (1).
"^DD",6001,6001.02,12,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,12,21,1,0)
Tabulates the number of times the 'RH' data element exists for 
"^DD",6001,6001.02,12,21,2,0)
this Lab Data record. Possible values are zero (0) or one (1).
"^DD",6001,6001.02,12,"DT")
3040310
"^DD",6001,6001.02,13,0)
RBC ANTIGENS PRESENT^NJ9,0^^0;13^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,13,3)
Non-interactive; indicates the number of 'RBC Antigen Present' records related to this Lab Data record.
"^DD",6001,6001.02,13,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,13,21,1,0)
Indicates the number of 'RBC Antigen Present' records related to this Lab
"^DD",6001,6001.02,13,21,2,0)
Data record.
"^DD",6001,6001.02,13,"DT")
3040310
"^DD",6001,6001.02,14,0)
RBC ANTIGENS PRESENT COMMENTS^NJ9,0^^0;14^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,14,3)
Non-interactive; indicates the number of 'RBC Antigen Present Comment' records related to this Lab Data record.
"^DD",6001,6001.02,14,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,14,21,1,0)
Indicates the number of 'RBC Antigen Present Comment' records related to
"^DD",6001,6001.02,14,21,2,0)
this Lab Data record.
"^DD",6001,6001.02,14,"DT")
3040310
"^DD",6001,6001.02,15,0)
RBC ANTIGENS PRESENT CHARS^NJ9,0^^0;15^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,15,3)
Non-interactive; indicates the number of characters of all the 'RBC Antigen Present' data related to this Lab Data record.
"^DD",6001,6001.02,15,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,15,21,1,0)
Indicates the number of characters of all the 'RBC Antigen Present
"^DD",6001,6001.02,15,21,2,0)
Comment' data related to this Lab Data record.
"^DD",6001,6001.02,15,"DT")
3040310
"^DD",6001,6001.02,16,0)
RBC ANTIGENS ABSENT^NJ9,0^^0;16^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,16,3)
Non-interactive; indicates the number of 'RBC Antigen Present' data related to this Lab Data record.
"^DD",6001,6001.02,16,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,16,21,1,0)
Indicates the number of 'RBC Antigen Absent' data related to this Lab Data
"^DD",6001,6001.02,16,21,2,0)
record.
"^DD",6001,6001.02,16,"DT")
3040310
"^DD",6001,6001.02,17,0)
RBC ANTIGENS ABSENT COMMENTS^NJ9,0^^0;17^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,17,3)
Non-interactive; indicates the number of 'RBC Antigen Absent' data related to this Lab Data record.
"^DD",6001,6001.02,17,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,17,21,1,0)
Indicates the number of 'RBC Antigen Absent Comment' data related to this
"^DD",6001,6001.02,17,21,2,0)
Lab Data record.
"^DD",6001,6001.02,17,"DT")
3040310
"^DD",6001,6001.02,18,0)
RBC ANTIGENS ABSENT CHARS^NJ9,0^^0;18^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,18,3)
Non-interactive; indicates the number of characters of all the 'RBC Antigen Absent' data related to this Lab Data record.
"^DD",6001,6001.02,18,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,18,21,1,0)
Indicates the number of characters of all the 'RBC Antigen Absent Comment'
"^DD",6001,6001.02,18,21,2,0)
data related to this Lab Data record.
"^DD",6001,6001.02,18,"DT")
3040310
"^DD",6001,6001.02,19,0)
ANTIBODIES IDENTIFIED^NJ9,0^^0;19^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,19,3)
Non-interactive; indicates the number of 'Antibodies Identified' data related to this Lab Data record.
"^DD",6001,6001.02,19,21,0)
^.001^2^2^3040310^^
"^DD",6001,6001.02,19,21,1,0)
Indicates the number of 'Antibodies Identified' data related to this Lab
"^DD",6001,6001.02,19,21,2,0)
Data record.
"^DD",6001,6001.02,19,"DT")
3040310
"^DD",6001,6001.02,20,0)
ANTIBODIES IDENTIFIED COMMENTS^NJ9,0^^0;20^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,20,3)
Non-interactive; indicates the number of 'Antibodies Identified Comment' data related to this Lab Data record.
"^DD",6001,6001.02,20,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,20,21,1,0)
Indicates the number of 'Antibodies Identified Comment' data related to
"^DD",6001,6001.02,20,21,2,0)
this Lab Data record.
"^DD",6001,6001.02,20,"DT")
3040310
"^DD",6001,6001.02,21,0)
ANTIBODIES IDENTIFIED CHARS^NJ9,0^^0;21^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,21,3)
Non-interactive; indicates the number of characters of all the 'Antibodies Identified Comment' data related to this Lab Data record.
"^DD",6001,6001.02,21,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,21,21,1,0)
Indicates the number of characters of all the 'Antibodies Identified 
"^DD",6001,6001.02,21,21,2,0)
Comment' data related to this Lab Data record.
"^DD",6001,6001.02,21,"DT")
3040310
"^DD",6001,6001.02,22,0)
TRANSFUSION REACTION DATE^NJ9,0^^0;22^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,22,3)
Non-interactive; indicates the number of occurrences that 'Transfusion Reaction Date' data appears in this Lab Data file record. 
"^DD",6001,6001.02,22,21,0)
^.001^2^2^3040310^^
"^DD",6001,6001.02,22,21,1,0)
Indicates the number of occurrences that 'Transfusion Reaction Date' data
"^DD",6001,6001.02,22,21,2,0)
appears in this Lab Data file record.
"^DD",6001,6001.02,22,"DT")
3040310
"^DD",6001,6001.02,23,0)
TRANSFUSION REACTION^NJ9,0^^0;23^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,23,3)
Non-interactive; indicates the number of occurrences that 'Transfusion Reaction' data appears in this Lab Data file record. 
"^DD",6001,6001.02,23,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,23,21,1,0)
Indicates the number of occurrences that 'Transfusion Reaction' data
"^DD",6001,6001.02,23,21,2,0)
appears in this Lab Data file record.
"^DD",6001,6001.02,23,"DT")
3040310
"^DD",6001,6001.02,24,0)
TRANSFUSION REACTION COMMENTS^NJ9,0^^0;24^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,24,3)
Non-interactive; indicates the number of occurrences that 'Transfusion Reaction Comments' appear for this Lab Data record.
"^DD",6001,6001.02,24,21,0)
^^2^2^3040310^
"^DD",6001,6001.02,24,21,1,0)
Non-interactive; indicates the number of occurrences that 'Transfusion 
"^DD",6001,6001.02,24,21,2,0)
Reaction Comments' appear for this Lab Data record.
"^DD",6001,6001.02,24,"DT")
3040310
"^DD",6001,6001.02,25,0)
TRANS. REACTION COMMENT CHARS^NJ9,0^^0;25^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,25,3)
Non-interactive; indicates the number of characters of all the 'Transfusion Reaction Comment' data related to this Lab Data record.
"^DD",6001,6001.02,25,21,0)
^.001^2^2^3040310^^
"^DD",6001,6001.02,25,21,1,0)
Indicates the number of characters of all the 'Transfusion Reaction 
"^DD",6001,6001.02,25,21,2,0)
Comment' data related to this Lab Data record.
"^DD",6001,6001.02,25,"DT")
3040310
"^DD",6001,6001.02,26,0)
BLOOD BANK COMMENTS^NJ9,0^^0;26^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,26,3)
Non-interactive; indicates the number of occurrences that the 'Blood Bank Comment' data element appears in the Lab Data file record.
"^DD",6001,6001.02,26,21,0)
^.001^2^2^3040310^^
"^DD",6001,6001.02,26,21,1,0)
Non-interactive; indicates the number of occurrences that the 'Blood Bank 
"^DD",6001,6001.02,26,21,2,0)
Comment' data element appears in the Lab Data file record.
"^DD",6001,6001.02,26,"DT")
3040310
"^DD",6001,6001.02,27,0)
BLOOD BANK COMMENT CHARS^NJ9,0^^0;27^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6001,6001.02,27,3)
Non-interactive; indicates the number of characters of all the 'Blood Bank Comments' data related to this Lab Data record.
"^DD",6001,6001.02,27,21,0)
^.001^2^2^3040310^^
"^DD",6001,6001.02,27,21,1,0)
Indicates the number of characters of all the 'Blood Bank Comments' data
"^DD",6001,6001.02,27,21,2,0)
related to this Lab Data record.
"^DD",6001,6001.02,27,"DT")
3040310
"^DD",6003,6003,0)
FIELD^^100^2
"^DD",6003,6003,0,"DDA")
N
"^DD",6003,6003,0,"DT")
3020807
"^DD",6003,6003,0,"IX","B",6003,.01)

"^DD",6003,6003,0,"NM","VISTA BLOOD BANK RESTRICTED OPTIONS LIST")

"^DD",6003,6003,0,"VRPK")
LR
"^DD",6003,6003,.01,0)
OPTION^RFX^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",6003,6003,.01,1,0)
^.1
"^DD",6003,6003,.01,1,1,0)
6003^B
"^DD",6003,6003,.01,1,1,1)
S ^VBEC(6003,"B",$E(X,1,30),DA)=""
"^DD",6003,6003,.01,1,1,2)
K ^VBEC(6003,"B",$E(X,1,30),DA)
"^DD",6003,6003,.01,3)
Enter the name of the VistA Blood Bank option that will be set 'out-of-order'.  Answer must be 3-30 characters in length.
"^DD",6003,6003,.01,21,0)
^^2^2^3020807^
"^DD",6003,6003,.01,21,1,0)
The name of the VistA Blood Bank (LRBL) option that will be set 
"^DD",6003,6003,.01,21,2,0)
'out-of-order'.
"^DD",6003,6003,.01,"DEL",1,0)
I 1 D EN^DDIOL("Blood Bank option names are not to be deleted.",,"!,$C(7)")
"^DD",6003,6003,.01,"DT")
3020808
"^DD",6003,6003,100,0)
DESCRIPTION^6003.01^^1;0
"^DD",6003,6003,100,21,0)
^^3^3^3020927^
"^DD",6003,6003,100,21,1,0)
This field contains a brief explanation of the particular option. It will
"^DD",6003,6003,100,21,2,0)
be displayed in the menu system to the user when '??' are entered to the
"^DD",6003,6003,100,21,3,0)
selection choice of the parent menu.
"^DD",6003,6003.01,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",6003,6003.01,0,"DT")
3020807
"^DD",6003,6003.01,0,"NM","DESCRIPTION")

"^DD",6003,6003.01,0,"UP")
6003
"^DD",6003,6003.01,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",6003,6003.01,.01,3)
Describe the functionality of the option.
"^DD",6003,6003.01,.01,21,0)
^.001^1^1^3020927^^
"^DD",6003,6003.01,.01,21,1,0)
This field describes the purpose of the option.
"^DD",6003,6003.01,.01,"DT")
3020807
"^DD",6005,6005,0)
FIELD^^.07^7
"^DD",6005,6005,0,"DDA")
N
"^DD",6005,6005,0,"DT")
3020726
"^DD",6005,6005,0,"ID",.02)
W ""
"^DD",6005,6005,0,"ID",.03)
W ""
"^DD",6005,6005,0,"IX","AA1",6005,.01)

"^DD",6005,6005,0,"IX","AA2",6005,.02)

"^DD",6005,6005,0,"IX","AB1",6005,.01)

"^DD",6005,6005,0,"IX","AB2",6005,.05)

"^DD",6005,6005,0,"IX","B",6005,.01)

"^DD",6005,6005,0,"IX","D",6005,.05)

"^DD",6005,6005,0,"IX","N",6005,.02)

"^DD",6005,6005,0,"IX","VA",6005,.03)

"^DD",6005,6005,0,"NM","VBECS MATCHING TABLE")

"^DD",6005,6005,0,"VRPK")
LR
"^DD",6005,6005,.01,0)
FILE-IEN^RFX^^0;1^K:$L(X)>18!($L(X)<3)!(X'?2N0.1"."0.2N0.1"-"0.12N) X
"^DD",6005,6005,.01,1,0)
^.1
"^DD",6005,6005,.01,1,1,0)
6005^B
"^DD",6005,6005,.01,1,1,1)
S ^VBEC(6005,"B",$E(X,1,30),DA)=""
"^DD",6005,6005,.01,1,1,2)
K ^VBEC(6005,"B",$E(X,1,30),DA)
"^DD",6005,6005,.01,1,2,0)
6005^AA1^MUMPS
"^DD",6005,6005,.01,1,2,1)
N VBEC S VBEC(0)=$G(^VBEC(6005,DA,0)) S:$P(VBEC(0),"^",2)]"" ^VBEC(6005,"AA",X,$P(VBEC(0),"^",2),DA)=""
"^DD",6005,6005,.01,1,2,2)
N VBEC S VBEC(0)=$G(^VBEC(6005,DA,0)) K:$P(VBEC(0),"^",2)]"" ^VBEC(6005,"AA",X,$P(VBEC(0),"^",2),DA)
"^DD",6005,6005,.01,1,2,3)
do not delete
"^DD",6005,6005,.01,1,2,"%D",0)
^.101^2^2^3020703^^^
"^DD",6005,6005,.01,1,2,"%D",1,0)
Links the names of VistA Blood bank attributes with their unique file 
"^DD",6005,6005,.01,1,2,"%D",2,0)
number-internal entry number pair.
"^DD",6005,6005,.01,1,2,"DT")
3020703
"^DD",6005,6005,.01,1,3,0)
6005^AB1^MUMPS
"^DD",6005,6005,.01,1,3,1)
N VBEC S VBEC=$G(^VBEC(6005,DA,0)) S:$P(VBEC,"^",5)]"" ^VBEC(6005,"AB",+X,$P(VBEC,"^",5),DA)=""
"^DD",6005,6005,.01,1,3,2)
N VBEC S VBEC=$G(^VBEC(6005,DA,0)) K:$P(VBEC,"^",5)]"" ^VBEC(6005,"AB",+X,$P(VBEC,"^",5),DA)
"^DD",6005,6005,.01,1,3,3)
Do not delete.
"^DD",6005,6005,.01,1,3,"%D",0)
^^3^3^3020717^
"^DD",6005,6005,.01,1,3,"%D",1,0)
Used to help purge and print mapping table data.  Cross-reference is 
"^DD",6005,6005,.01,1,3,"%D",2,0)
also used to check if more than one VistA record is mapped to a
"^DD",6005,6005,.01,1,3,"%D",3,0)
standardized data element.
"^DD",6005,6005,.01,1,3,"DT")
3020717
"^DD",6005,6005,.01,3)
Please answer with a 'file-ien' combination between 3-18 characters in length with a '-' separating the file number and ien.  The file number may have a decimal imbedded. 
"^DD",6005,6005,.01,21,0)
^^1^1^3020620^
"^DD",6005,6005,.01,21,1,0)
This field identifies the file and record number (ien) of the data.
"^DD",6005,6005,.01,"DEL",1,0)
I 1 D EN^DDIOL("VistA Blood Bank data cannot be deleted.")
"^DD",6005,6005,.01,"DT")
3020717
"^DD",6005,6005,.02,0)
NAME ATTRIBUTE^RF^^0;2^K:$L(X)>40!($L(X)<1) X
"^DD",6005,6005,.02,1,0)
^.1
"^DD",6005,6005,.02,1,1,0)
6005^AA2^MUMPS
"^DD",6005,6005,.02,1,1,1)
N VBEC S VBEC(0)=$G(^VBEC(6005,DA,0)) S:$P(VBEC(0),"^") ^VBEC(6005,"AA",$P(VBEC(0),"^"),X,DA)=""
"^DD",6005,6005,.02,1,1,2)
N VBEC S VBEC(0)=$G(^VBEC(6005,DA,0)) K:$P(VBEC(0),"^") ^VBEC(6005,"AA",$P(VBEC(0),"^"),X,DA)
"^DD",6005,6005,.02,1,1,3)
do not delete
"^DD",6005,6005,.02,1,1,"%D",0)
^.101^2^2^3020703^^^
"^DD",6005,6005,.02,1,1,"%D",1,0)
Links the names of VistA Blood bank attributes with their unique file 
"^DD",6005,6005,.02,1,1,"%D",2,0)
number-internal entry number pair.
"^DD",6005,6005,.02,1,1,"DT")
3020703
"^DD",6005,6005,.02,1,2,0)
6005^N^MUMPS
"^DD",6005,6005,.02,1,2,1)
S ^VBEC(6005,"N",$E(X,1,40),DA)=""
"^DD",6005,6005,.02,1,2,2)
K ^VBEC(6005,"N",$E(X,1,40),DA)
"^DD",6005,6005,.02,1,2,3)
Do not delete, allows the user to select data by name.
"^DD",6005,6005,.02,1,2,"%D",0)
^^4^4^3030723^
"^DD",6005,6005,.02,1,2,"%D",1,0)
This cross-reference will allow the user greater flexibility when 
"^DD",6005,6005,.02,1,2,"%D",2,0)
selecting VistA Blood Bank data elements.  The FILE-IEN (.01) field is 
"^DD",6005,6005,.02,1,2,"%D",3,0)
confusing to the Blood Bank ADPAC.  The name of the data element, not the 
"^DD",6005,6005,.02,1,2,"%D",4,0)
IEN, will be the way that the user goes about selecting data elements.
"^DD",6005,6005,.02,1,2,"DT")
3030723
"^DD",6005,6005,.02,3)
Answer must be 1-40 characters in length.
"^DD",6005,6005,.02,21,0)
^.001^3^3^3020717^^
"^DD",6005,6005,.02,21,1,0)
The intention is to keep track of any edits to the name attribute.  If 
"^DD",6005,6005,.02,21,2,0)
the name attribute changes through edits on the VistA side, the mapping 
"^DD",6005,6005,.02,21,3,0)
process will need to be performed.
"^DD",6005,6005,.02,"DT")
3030723
"^DD",6005,6005,.03,0)
IDENTIFIER ATTRIBUTE^F^^0;3^K:$L(X)>80!($L(X)<1) X
"^DD",6005,6005,.03,1,0)
^.1
"^DD",6005,6005,.03,1,1,0)
6005^VA
"^DD",6005,6005,.03,1,1,1)
S ^VBEC(6005,"VA",$E(X,1,30),DA)=""
"^DD",6005,6005,.03,1,1,2)
K ^VBEC(6005,"VA",$E(X,1,30),DA)
"^DD",6005,6005,.03,1,1,3)
Do not delete.
"^DD",6005,6005,.03,1,1,"%D",0)
^^2^2^3030820^
"^DD",6005,6005,.03,1,1,"%D",1,0)
Cross-references by attribute to aid in standard VistA data record
"^DD",6005,6005,.03,1,1,"%D",2,0)
selection.
"^DD",6005,6005,.03,1,1,"DT")
3030820
"^DD",6005,6005,.03,3)
Answer must be 1-80 characters in length.
"^DD",6005,6005,.03,21,0)
^.001^3^3^3020717^^^
"^DD",6005,6005,.03,21,1,0)
The intention is to keep track of any edits to the identifier
"^DD",6005,6005,.03,21,2,0)
attribute.  If the identifier attribute changes on the VistA side, the
"^DD",6005,6005,.03,21,3,0)
mapping process will need to be performed.
"^DD",6005,6005,.03,"DT")
3030820
"^DD",6005,6005,.04,0)
ANTIGEN/ANTIBODY IDENTFIER^S^AB:Antibody;AN:Antigen;^0;4^Q
"^DD",6005,6005,.04,3)
This is not intended to be a user interactive field.
"^DD",6005,6005,.04,21,0)
^^3^3^3020620^
"^DD",6005,6005,.04,21,1,0)
This field is used to identify the entity to a greater granularity.  When
"^DD",6005,6005,.04,21,2,0)
mapping Function Field (#61.3) data only, it will need to be known whether
"^DD",6005,6005,.04,21,3,0)
the entity is an antigen or an antibody.
"^DD",6005,6005,.04,"DT")
3020620
"^DD",6005,6005,.05,0)
STANDARD VBECS DATA^P6007'^VBEC(6007,^0;5^Q
"^DD",6005,6005,.05,1,0)
^.1
"^DD",6005,6005,.05,1,1,0)
6005^AB2^MUMPS
"^DD",6005,6005,.05,1,1,1)
S VBEC=$G(^VBEC(6005,DA,0)) S:$P(VBEC,"^")]"" ^VBEC(6005,"AB",+$P(VBEC,"^"),X,DA)=""
"^DD",6005,6005,.05,1,1,2)
S VBEC=$G(^VBEC(6005,DA,0)) K:$P(VBEC,"^")]"" ^VBEC(6005,"AB",+$P(VBEC,"^"),X,DA)
"^DD",6005,6005,.05,1,1,3)
Do not delete...
"^DD",6005,6005,.05,1,1,"%D",0)
^^3^3^3020717^
"^DD",6005,6005,.05,1,1,"%D",1,0)
Used to help purge and print mapping table data.  Cross-reference is 
"^DD",6005,6005,.05,1,1,"%D",2,0)
also used to check if more than one VistA record is mapped to a
"^DD",6005,6005,.05,1,1,"%D",3,0)
standardized data element.
"^DD",6005,6005,.05,1,1,"DT")
3020717
"^DD",6005,6005,.05,1,2,0)
6005^D
"^DD",6005,6005,.05,1,2,1)
S ^VBEC(6005,"D",$E(X,1,30),DA)=""
"^DD",6005,6005,.05,1,2,2)
K ^VBEC(6005,"D",$E(X,1,30),DA)
"^DD",6005,6005,.05,1,2,3)
Do not delete...
"^DD",6005,6005,.05,1,2,"%D",0)
^^1^1^3020717^
"^DD",6005,6005,.05,1,2,"%D",1,0)
Used to select a single mapped record for deletion.
"^DD",6005,6005,.05,1,2,"DT")
3020717
"^DD",6005,6005,.05,3)
This is the standard VBECS attribute our VistA record maps to.
"^DD",6005,6005,.05,21,0)
^^3^3^3020620^
"^DD",6005,6005,.05,21,1,0)
This field will store the pointer to the STANDARD VBECS DATA (#6007) file.
"^DD",6005,6005,.05,21,2,0)
From this, we can derive the globally unique identifier (GUID) of the 
"^DD",6005,6005,.05,21,3,0)
standard data value.
"^DD",6005,6005,.05,"DT")
3020717
"^DD",6005,6005,.06,0)
CHECKSUM^NJ15,0^^0;6^K:+X'=X!(X>999999999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",6005,6005,.06,3)
Enter the checksum value of the name attribute and identifier attribute (optional).
"^DD",6005,6005,.06,21,0)
^^2^2^3020726^
"^DD",6005,6005,.06,21,1,0)
Indicates the total checksum values of the name attribute and identifier 
"^DD",6005,6005,.06,21,2,0)
attribute (optional).
"^DD",6005,6005,.06,23,0)
^^2^2^3020726^
"^DD",6005,6005,.06,23,1,0)
Strings are passed into the CHECKSUM^VBECDCU2 module and their nummeric
"^DD",6005,6005,.06,23,2,0)
checksum value is returned.
"^DD",6005,6005,.06,"DT")
3020726
"^DD",6005,6005,.07,0)
TIMESTAMP^D^^0;7^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",6005,6005,.07,3)
Enter the date/time the record was added, edited, or deleted.
"^DD",6005,6005,.07,21,0)
^^1^1^3020726^
"^DD",6005,6005,.07,21,1,0)
Indicates the date/time the record was added, edited, or deleted.
"^DD",6005,6005,.07,"DT")
3020726
"^DD",6007,6007,0)
FIELD^^.15^9
"^DD",6007,6007,0,"DDA")
N
"^DD",6007,6007,0,"DT")
3040204
"^DD",6007,6007,0,"IX","B",6007,.01)

"^DD",6007,6007,0,"IX","FNUM",6007,.11)

"^DD",6007,6007,0,"IX","SA",6007,.02)

"^DD",6007,6007,0,"IX","U",6007,.01)

"^DD",6007,6007,0,"NM","STANDARD VBECS DATA")

"^DD",6007,6007,0,"PT",6005,.05)

"^DD",6007,6007,0,"VRPK")
LR
"^DD",6007,6007,.01,0)
ATTRIBUTE NAME^RF^^0;1^K:$L(X)>175!($L(X)<1)!'(X'?1P.E) X
"^DD",6007,6007,.01,1,0)
^.1
"^DD",6007,6007,.01,1,1,0)
6007^B
"^DD",6007,6007,.01,1,1,1)
S ^VBEC(6007,"B",$E(X,1,30),DA)=""
"^DD",6007,6007,.01,1,1,2)
K ^VBEC(6007,"B",$E(X,1,30),DA)
"^DD",6007,6007,.01,1,2,0)
6007^U^MUMPS
"^DD",6007,6007,.01,1,2,1)
S ^VBEC(6007,"U",$$UP^XLFSTR(X),DA)=""
"^DD",6007,6007,.01,1,2,2)
K ^VBEC(6007,"U",$$UP^XLFSTR(X),DA)
"^DD",6007,6007,.01,1,2,3)
Do not delete.
"^DD",6007,6007,.01,1,2,"%D",0)
^^3^3^3030403^
"^DD",6007,6007,.01,1,2,"%D",1,0)
Uppercase cross-reference allows the user to input data in uppercase, 
"^DD",6007,6007,.01,1,2,"%D",2,0)
lowercase, or mixed case and have the FileMan lookup covert the input to 
"^DD",6007,6007,.01,1,2,"%D",3,0)
uppercase for greater matching efficiency.
"^DD",6007,6007,.01,1,2,"DT")
3030403
"^DD",6007,6007,.01,3)
This is the name of the attribute.  Answer must be 1-175 characters in length.
"^DD",6007,6007,.01,21,0)
^.001^1^1^3050913^^
"^DD",6007,6007,.01,21,1,0)
This is the name of the attribute.
"^DD",6007,6007,.01,"DEL",1,0)
I 0 I 1 D EN^DDIOL("Standardized VBECS data cannot be deleteD.")
"^DD",6007,6007,.01,"DT")
3060606
"^DD",6007,6007,.02,0)
ATTRIBUTE KEY ^FI^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",6007,6007,.02,1,0)
^.1
"^DD",6007,6007,.02,1,1,0)
6007^SA
"^DD",6007,6007,.02,1,1,1)
S ^VBEC(6007,"SA",$E(X,1,30),DA)=""
"^DD",6007,6007,.02,1,1,2)
K ^VBEC(6007,"SA",$E(X,1,30),DA)
"^DD",6007,6007,.02,1,1,3)
Do not delete.
"^DD",6007,6007,.02,1,1,"%D",0)
^^2^2^3030820^
"^DD",6007,6007,.02,1,1,"%D",1,0)
Cross-references by attribute to aid in standard SQL data record
"^DD",6007,6007,.02,1,1,"%D",2,0)
selection.
"^DD",6007,6007,.02,1,1,"DT")
3030820
"^DD",6007,6007,.02,3)
Enter the attribute key.  Answer must be 1-30 characters in length.
"^DD",6007,6007,.02,21,0)
^^2^2^3020611^
"^DD",6007,6007,.02,21,1,0)
This this the attribute key.  It is an identifier that ensure the 
"^DD",6007,6007,.02,21,2,0)
uniqueness of a record.
"^DD",6007,6007,.02,"DT")
3050913
"^DD",6007,6007,.03,0)
GUID^FI^^0;3^K:$L(X)>40!($L(X)<1) X
"^DD",6007,6007,.03,3)
Globally Unique Identifier for an attribute.  Answer must be 1-40 characters in length.
"^DD",6007,6007,.03,21,0)
^^2^2^3020611^
"^DD",6007,6007,.03,21,1,0)
This is the Globally Unique Identifier (GUID) of the attribute stored in 
"^DD",6007,6007,.03,21,2,0)
a SQL Server table.
"^DD",6007,6007,.03,"DT")
3050913
"^DD",6007,6007,.04,0)
ANTIGEN/ANTIBODY IDENTIFER^S^AB:Antibody;AN:Antigen;^0;4^Q
"^DD",6007,6007,.04,3)
This is not intended to be a user interactive field.
"^DD",6007,6007,.04,21,0)
^^3^3^3040204^
"^DD",6007,6007,.04,21,1,0)
This field is used to identify the entity to a greater granularity.  When
"^DD",6007,6007,.04,21,2,0)
mapping Function Field (#61.3) data only, it will need to be known whether
"^DD",6007,6007,.04,21,3,0)
the entity is an antigen or an antibody.
"^DD",6007,6007,.04,"DT")
3040204
"^DD",6007,6007,.11,0)
VA FILEMAN FILE^FI^^1;1^K:$L(X)>5!($L(X)<2) X
"^DD",6007,6007,.11,1,0)
^.1
"^DD",6007,6007,.11,1,1,0)
6007^FNUM
"^DD",6007,6007,.11,1,1,1)
S ^VBEC(6007,"FNUM",$E(X,1,30),DA)=""
"^DD",6007,6007,.11,1,1,2)
K ^VBEC(6007,"FNUM",$E(X,1,30),DA)
"^DD",6007,6007,.11,1,1,"%D",0)
^^2^2^3020616^
"^DD",6007,6007,.11,1,1,"%D",1,0)
File-wide cross reference on VistA file number.  Used to limit the 
"^DD",6007,6007,.11,1,1,"%D",2,0)
display and look-up to one file at a time.
"^DD",6007,6007,.11,1,1,"DT")
3020616
"^DD",6007,6007,.11,3)
This is the VistA file number that is most closely related to the data.  Answer must be 2-5 characters in length.
"^DD",6007,6007,.11,21,0)
^^2^2^3020611^
"^DD",6007,6007,.11,21,1,0)
This is the VistA FileMan file that contains data most closely related
"^DD",6007,6007,.11,21,2,0)
to the attribute name of this record.
"^DD",6007,6007,.11,"DT")
3020616
"^DD",6007,6007,.12,0)
ADDRESS^FI^^1;2^K:$L(X)>60!($L(X)<3) X
"^DD",6007,6007,.12,3)
Enter the address of the blood supplier.  Answer must be 3-60 characters in length.
"^DD",6007,6007,.12,21,0)
^^1^1^3020611^
"^DD",6007,6007,.12,21,1,0)
This is the address of the blood supplier.
"^DD",6007,6007,.12,"DT")
3020611
"^DD",6007,6007,.13,0)
CITY^FI^^1;3^K:$L(X)>45!($L(X)<2) X
"^DD",6007,6007,.13,3)
Enter the city where the blood supplier is located.  Answer must be 2-45 characters in length.
"^DD",6007,6007,.13,21,0)
^^1^1^3020611^
"^DD",6007,6007,.13,21,1,0)
This is the city where the blood supplier is located.
"^DD",6007,6007,.13,"DT")
3020611
"^DD",6007,6007,.14,0)
STATE^P5'I^DIC(5,^1;4^Q
"^DD",6007,6007,.14,3)
Enter the state where the blood supplier is located.
"^DD",6007,6007,.14,21,0)
^^1^1^3020611^
"^DD",6007,6007,.14,21,1,0)
This is the state where the blood supplier is located.
"^DD",6007,6007,.14,"DT")
3020611
"^DD",6007,6007,.15,0)
ZIP CODE^FI^^1;5^K:$L(X)>10!($L(X)<5) X
"^DD",6007,6007,.15,3)
Enter the zip code of the blood supplier.  Answer must be 5-10 characters in length.
"^DD",6007,6007,.15,21,0)
^^1^1^3020611^
"^DD",6007,6007,.15,21,1,0)
This is the zip code of the blood supplier.
"^DD",6007,6007,.15,"DT")
3020611
"^DD",6009,6009,0)
FIELD^^100^4
"^DD",6009,6009,0,"DDA")
N
"^DD",6009,6009,0,"DT")
3021025
"^DD",6009,6009,0,"IX","B",6009,.01)

"^DD",6009,6009,0,"NM","VBECS FILE & FIELD LEVEL SECURITY")

"^DD",6009,6009,0,"VRPK")
LR
"^DD",6009,6009,.01,0)
FILE NUMBER^RNJ5,2X^^0;1^K:+X'=X!(X>69.99)!(X<60)!(X?.E1"."3N.N) X S:$D(X) DINUM=X
"^DD",6009,6009,.01,1,0)
^.1
"^DD",6009,6009,.01,1,1,0)
6009^B
"^DD",6009,6009,.01,1,1,1)
S ^VBEC(6009,"B",$E(X,1,30),DA)=""
"^DD",6009,6009,.01,1,1,2)
K ^VBEC(6009,"B",$E(X,1,30),DA)
"^DD",6009,6009,.01,3)
Type a VistA Blood Bank File Number between 60 and 69.99, 2 Decimal Digits
"^DD",6009,6009,.01,21,0)
^.001^1^1^3020807^^
"^DD",6009,6009,.01,21,1,0)
The VistA file number of the file being tracked.
"^DD",6009,6009,.01,"DEL",1,0)
I 1 D EN^DDIOL("Blood Bank file/field records are not to be deleted.",,"!,$C(7)")
"^DD",6009,6009,.01,"DT")
3020807
"^DD",6009,6009,.02,0)
PRE-CONV. RESTRICTED ACCESS^S^Y:Yes;^0;2^Q
"^DD",6009,6009,.02,3)
Enter 'Y' for yes if restricted access applies to this file prior to executing the data conversion application.
"^DD",6009,6009,.02,21,0)
^^2^2^3021024^
"^DD",6009,6009,.02,21,1,0)
This field tracks if restricted access applies to this file prior to 
"^DD",6009,6009,.02,21,2,0)
executing the data conversion application.
"^DD",6009,6009,.02,"DT")
3021024
"^DD",6009,6009,.03,0)
PST-CONV. RESTRICTED ACCESS^S^Y:Yes;^0;3^Q
"^DD",6009,6009,.03,3)
Enter 'Y' for yes if restricted access applies to this file after executing the data conversion application.
"^DD",6009,6009,.03,21,0)
^^2^2^3021024^
"^DD",6009,6009,.03,21,1,0)
This field tracks if restricted access applies to this file after  
"^DD",6009,6009,.03,21,2,0)
executing the data conversion application.
"^DD",6009,6009,.03,"DT")
3021024
"^DD",6009,6009,100,0)
DATA DICTIONARY^6009.01A^^DD;0
"^DD",6009,6009.01,0)
DATA DICTIONARY SUB-FIELD^^2^4
"^DD",6009,6009.01,0,"DT")
3021025
"^DD",6009,6009.01,0,"IX","B",6009.01,.01)

"^DD",6009,6009.01,0,"NM","DATA DICTIONARY")

"^DD",6009,6009.01,0,"UP")
6009
"^DD",6009,6009.01,.01,0)
DATA DICTIONARY^NJ12,9X^^0;1^K:+X'=X!(X>69.999999999)!(X<60)!(X?.E1"."10N.N) X
"^DD",6009,6009.01,.01,1,0)
^.1
"^DD",6009,6009.01,.01,1,1,0)
6009.01^B
"^DD",6009,6009.01,.01,1,1,1)
S ^VBEC(6009,DA(1),"DD","B",$E(X,1,30),DA)=""
"^DD",6009,6009.01,.01,1,1,2)
K ^VBEC(6009,DA(1),"DD","B",$E(X,1,30),DA)
"^DD",6009,6009.01,.01,3)
Enter the appropriate Blood Bank data dictionary number.  Type a Number between 60 and 69.999999999, 9 Decimal Digits
"^DD",6009,6009.01,.01,21,0)
^.001^2^2^3020808^^
"^DD",6009,6009.01,.01,21,1,0)
Tracks the data dictionary file/sub-file number and field for the purpose 
"^DD",6009,6009.01,.01,21,2,0)
of recording field-level security (read, write, delete, and audit access).
"^DD",6009,6009.01,.01,"DT")
3020808
"^DD",6009,6009.01,.02,0)
FIELD^NJ15,7^^0;2^K:+X'=X!(X>9999999.9999999)!(X<.001)!(X?.E1"."8N.N) X
"^DD",6009,6009.01,.02,3)
Enter the appropriate field number.  Type a Number between .001 and 9999999.9999999, 7 Decimal Digits
"^DD",6009,6009.01,.02,21,0)
^^2^2^3020808^
"^DD",6009,6009.01,.02,21,1,0)
Tracks the data dictionary and field number for the purpose of 
"^DD",6009,6009.01,.02,21,2,0)
identifying 'before & after' field security information.
"^DD",6009,6009.01,.02,"DT")
3020808
"^DD",6009,6009.01,1,0)
PRE-CONVERSION WRITE ACCESS^F^^PREW;E1,245^K:$L(X)>245!($L(X)<1) X
"^DD",6009,6009.01,1,3)
Automated field add, edit, and delete.  Answer must be 1-245 characters in length.
"^DD",6009,6009.01,1,21,0)
^^2^2^3021025^
"^DD",6009,6009.01,1,21,1,0)
Indicates the write level access of the field prior to the data
"^DD",6009,6009.01,1,21,2,0)
conversion.
"^DD",6009,6009.01,1,"DT")
3021025
"^DD",6009,6009.01,2,0)
POST-CONVERSION WRITE ACCESS^F^^PSTW;E1,245^K:$L(X)>245!($L(X)<1) X
"^DD",6009,6009.01,2,3)
Automated field add, edit, and delete.  Answer must be 1-245 characters in length.
"^DD",6009,6009.01,2,21,0)
^^1^1^3021025^
"^DD",6009,6009.01,2,21,1,0)
Indicates the write level access of the field after the data conversion.
"^DD",6009,6009.01,2,"DT")
3021025
"^DIC",6000,6000,0)
VBECS SITE PARAMETERS^6000P
"^DIC",6000,6000,0,"GL")
^VBEC(6000,
"^DIC",6000,6000,"%",0)
^1.005^^0
"^DIC",6000,6000,"%D",0)
^^5^5^3040507^
"^DIC",6000,6000,"%D",1,0)
This file tracks site specific Blood Bank information for the purpose of
"^DIC",6000,6000,"%D",2,0)
validating and converting data from the following files: Patient (#2) 
"^DIC",6000,6000,"%D",3,0)
and Lab Data (#63). This file also records the number of data elements 
"^DIC",6000,6000,"%D",4,0)
converted per record and the total number of characters for textual data 
"^DIC",6000,6000,"%D",5,0)
elements per record.
"^DIC",6000,"B","VBECS SITE PARAMETERS",6000)

"^DIC",6001,6001,0)
VBECS DATA INTEGRITY/CONVERSION STATISTICS^6001
"^DIC",6001,6001,0,"GL")
^VBEC(6001,
"^DIC",6001,6001,"%D",0)
^1.001^6^6^3040714^^
"^DIC",6001,6001,"%D",1,0)
This file tracks Blood Bank data integrity issues for the following 
"^DIC",6001,6001,"%D",2,0)
files: Patient (#2) and Lab Data (#63).
"^DIC",6001,6001,"%D",3,0)
 
"^DIC",6001,6001,"%D",4,0)
These issues are checked during the pre-implementation phase of the Blood 
"^DIC",6001,6001,"%D",5,0)
Bank data conversion.  A record is kept so the Blood Bank ADPACs can
"^DIC",6001,6001,"%D",6,0)
resolve those issues logged, so clean data can be moved into SQL tables.
"^DIC",6001,"B","VBECS DATA INTEGRITY/CONVERSION STATISTICS",6001)

"^DIC",6003,6003,0)
VISTA BLOOD BANK RESTRICTED OPTIONS LIST^6003
"^DIC",6003,6003,0,"GL")
^VBEC(6003,
"^DIC",6003,6003,"%",0)
^1.005^^0
"^DIC",6003,6003,"%D",0)
^^3^3^3030612^
"^DIC",6003,6003,"%D",1,0)
This file exports the names of VistA Blood Bank (LRBL name spaced) options
"^DIC",6003,6003,"%D",2,0)
that will be set 'Out of Order' once the data conversion has successfully
"^DIC",6003,6003,"%D",3,0)
completed.
"^DIC",6003,"B","VISTA BLOOD BANK RESTRICTED OPTIONS LIST",6003)

"^DIC",6005,6005,0)
VBECS MATCHING TABLE^6005
"^DIC",6005,6005,0,"GL")
^VBEC(6005,
"^DIC",6005,6005,"%",0)
^1.005^^0
"^DIC",6005,6005,"%D",0)
^^2^2^3040507^
"^DIC",6005,6005,"%D",1,0)
The purpose of this file is to store different VistA data elements for 
"^DIC",6005,6005,"%D",2,0)
the purpose of linking them to standard VBEC data elements. 
"^DIC",6005,"B","VBECS MATCHING TABLE",6005)

"^DIC",6007,6007,0)
STANDARD VBECS DATA^6007
"^DIC",6007,6007,0,"GL")
^VBEC(6007,
"^DIC",6007,6007,"%",0)
^1.005^^0
"^DIC",6007,6007,"%D",0)
^^5^5^3041103^
"^DIC",6007,6007,"%D",1,0)
This file holds VBECS data that will be mapped against the Function Field
"^DIC",6007,6007,"%D",2,0)
(#61.3) file for antigens/antibodies and the Blood Bank Utility (#65.4) 
"^DIC",6007,6007,"%D",3,0)
file for transfusion reactions. VistA Antibody/antigen and transfusion
"^DIC",6007,6007,"%D",4,0)
reaction data for the purposes of mapping is being stored in the VBECS 
"^DIC",6007,6007,"%D",5,0)
MATCHING TABLE (#6005) file.
"^DIC",6007,"B","STANDARD VBECS DATA",6007)

"^DIC",6009,6009,0)
VBECS FILE & FIELD LEVEL SECURITY^6009
"^DIC",6009,6009,0,"GL")
^VBEC(6009,
"^DIC",6009,6009,"%D",0)
^^3^3^3030612^
"^DIC",6009,6009,"%D",1,0)
This file exports the file and field numbers of VistA Blood Bank (LRBL
"^DIC",6009,6009,"%D",2,0)
name spaced) data dictionaries that will 'write protect' these files 
"^DIC",6009,6009,"%D",3,0)
and fields once the data conversion has successfully completed.
"^DIC",6009,"B","VBECS FILE & FIELD LEVEL SECURITY",6009)

**END**
**END**
