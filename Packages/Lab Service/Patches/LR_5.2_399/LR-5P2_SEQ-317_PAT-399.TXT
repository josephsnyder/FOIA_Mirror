$TXT Created by CARPENTER,TERRY at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Monday, 02/01/10 at 13:57
=============================================================================
Run Date: JUL 07, 2010                     Designation: LR*5.2*399
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #317                    Status: Released
                  Compliance Date: AUG 07, 2010
=============================================================================

Associated patches: (v)LR*5.2*280  <<= must be installed BEFORE `LR*5.2*399'
                    (v)LR*5.2*394  <<= must be installed BEFORE `LR*5.2*399'

Subject: SYNTAX ERROR IN DSS LABORATORY EXTRACT

Category: 
  - Routine

Description:
============

 This Lab Service patch will address the following 2 issues:
  
   1.  The DSS Laboratory Extract encounters a <SYNTAX> error when a lab 
       result contains a semi-colon (;)
  
   2.  A <SUBSCRIPT> error occurs when a user attempts to exit (^) option 
       LR LOINC UNMAP/DELETE DEFAULT at the RESULT NLT CODE prompt or when
       there is no RESULT NLT CODE on file and the user <returns> through
       this prompt.
  
  
 ASSOCIATED NSR(s):
 ==================
 N/A
  
  
 ASSOCIATED REMEDY TICKET:
 ========================
 1. HD0000000318426 - Lab Report Extract
  
    Duplicate:
    HD0000000321170 - Lab Extract issue
  
 2. HD0000000373099 - Subscript Error using the Unmap/Delete Lab Tests
                      to Default LOINC Code option
  
     
 PARTICIPATING TEST SITES:
 =========================
 Central Texas HCS
 Southern Arizona HCS
 Western New York HCS
  
  
 REMEDY TICKET OVERVIEW:
 =======================
 1. HD0000000318426 - Lab Report Extract
  
    Problem:
    --------
    The DSS Laboratory Extract gets a <SYNTAX> error when FileMan attempts
    to set an entry into the LAB DSS LAR EXTRACT FILE (# 64.036) when the
    RESULTS subfile (#64.368) contains a test result containing a semi-
    colon (;).
  
    Solution:
    ---------
    Modify routine LRCAPDAR to translate ($TR) any semi-colon (;) that 
    appears in the result field to a dash (-) prior to the FileMan call
    which sets the entry into the LAB DSS LAR EXTRACT file (# 64.036).
  
    Routine:  LRAPDAR
  
  
 2. HD0000000373099 - Subscript Error using the Unmap/Delete Lab Tests
                      to Default LOINC Code option
  
    Problem:
    --------
    A <SUBSCRIPT> error occurs when a user attempts to exit (^) at the
    RESULT NLT CODE prompt in option LR LOINC UNMAP/DELETE DEFAULT.  The
    same error also occurs when the RESULTS field (#1) of the LABORATORY 
    TEST file (#60) is null and the user <returns> through this prompt.
  
    Solution:
    ---------
    Modify routine LRLNC0 to not continue unless variable LRNLT is defined.
  
    Routine:  LRLNC0
  
  
 BLOOD BANK CLEARANCE:
 =====================
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*399 does not 
 contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
 DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*399 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*399 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
 made, no specific validation requirements exist as a result of 
 installation of this patch.
  
  
 INSTALLATION INSTRUCTIONS:
 =========================
 The install time for this patch is less than 2 minutes. This patch can be
 installed when Laboratory users are on the system.
  
 NOTE: Kernel patches must be current on the target system
       to avoid problems loading and/or installing this patch.
  
  
 1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
     option will load the KIDS patch onto your system.
  
 2.  The patch has now been loaded into a Transport global on your
     system.  You now need to use KIDS to install the transport global.
  
 3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
     select the 'Installation' menu.
  
 4.  Use the 'Verify Checksum in Transport Global' option and verify that
     all routines have the correct checksums.
  
 5.  On the KIDS menu, under the 'Installation' menu, use the following
     options:
       Print Transport Global
       Compare Transport Global to Current System
       Backup a Transport Global
  
       If you wish to preserve a copy of the routines exported in this 
       patch prior to installation, you should use the 'Backup a Transport
       Global' option at this time.  You may also compare the routines in
       your production account to the routines in the patch by using the
       'Compare a Transport Global to Current System' option.
  
 6.  Use the 'Install Package(s)' option under the 'Installation' menu
     and select the package 'LR*5.2*399.
  
     If prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//,
     choose 'NO'.
  
     If prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? NO//', choose 'NO'.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LRCAPDAR
    Before: B15584035   After: B15683759  **143,169,258,307,326,386,385,
                                           394,399**
Routine Name: LRLNC0
    Before: B90839764   After: B90965448  **215,232,278,280,399**
 
Routine list of preceding patches: 280, 394

=============================================================================
User Information:
Entered By  : CARPENTER,TERRY               Date Entered  : JUL 31, 2009
Completed By: WERNER,GARY                   Date Completed: JUN 16, 2010
Released By : SAUNDERS,TOM                  Date Released : JUL 07, 2010
=============================================================================


Packman Mail Message:
=====================

$END TXT
