Released LR*5.2*375 SEQ #295
Extracted from mail message
**KIDS**:LR*5.2*375^

**INSTALL NAME**
LR*5.2*375
"BLD",7581,0)
LR*5.2*375^LAB SERVICE^0^3080207^y
"BLD",7581,1,0)
^^2^2^3080207^
"BLD",7581,1,1,0)
This patch corrects a problem related to "in common" accession
"BLD",7581,1,2,0)
areas when tests with unique accession numbers are involved.
"BLD",7581,4,0)
^9.64PA^^
"BLD",7581,6)
2^
"BLD",7581,6.3)
3
"BLD",7581,"ABPKG")
n
"BLD",7581,"KRN",0)
^9.67PA^8989.52^19
"BLD",7581,"KRN",.4,0)
.4
"BLD",7581,"KRN",.401,0)
.401
"BLD",7581,"KRN",.402,0)
.402
"BLD",7581,"KRN",.403,0)
.403
"BLD",7581,"KRN",.5,0)
.5
"BLD",7581,"KRN",.84,0)
.84
"BLD",7581,"KRN",3.6,0)
3.6
"BLD",7581,"KRN",3.8,0)
3.8
"BLD",7581,"KRN",9.2,0)
9.2
"BLD",7581,"KRN",9.8,0)
9.8
"BLD",7581,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7581,"KRN",9.8,"NM",1,0)
LRWLST11^^0^B57149101
"BLD",7581,"KRN",9.8,"NM","B","LRWLST11",1)

"BLD",7581,"KRN",19,0)
19
"BLD",7581,"KRN",19.1,0)
19.1
"BLD",7581,"KRN",101,0)
101
"BLD",7581,"KRN",409.61,0)
409.61
"BLD",7581,"KRN",771,0)
771
"BLD",7581,"KRN",870,0)
870
"BLD",7581,"KRN",8989.51,0)
8989.51
"BLD",7581,"KRN",8989.52,0)
8989.52
"BLD",7581,"KRN",8994,0)
8994
"BLD",7581,"KRN","B",.4,.4)

"BLD",7581,"KRN","B",.401,.401)

"BLD",7581,"KRN","B",.402,.402)

"BLD",7581,"KRN","B",.403,.403)

"BLD",7581,"KRN","B",.5,.5)

"BLD",7581,"KRN","B",.84,.84)

"BLD",7581,"KRN","B",3.6,3.6)

"BLD",7581,"KRN","B",3.8,3.8)

"BLD",7581,"KRN","B",9.2,9.2)

"BLD",7581,"KRN","B",9.8,9.8)

"BLD",7581,"KRN","B",19,19)

"BLD",7581,"KRN","B",19.1,19.1)

"BLD",7581,"KRN","B",101,101)

"BLD",7581,"KRN","B",409.61,409.61)

"BLD",7581,"KRN","B",771,771)

"BLD",7581,"KRN","B",870,870)

"BLD",7581,"KRN","B",8989.51,8989.51)

"BLD",7581,"KRN","B",8989.52,8989.52)

"BLD",7581,"KRN","B",8994,8994)

"BLD",7581,"QUES",0)
^9.62^^
"BLD",7581,"REQB",0)
^9.611^1^1
"BLD",7581,"REQB",1,0)
LR*5.2*331^2
"BLD",7581,"REQB","B","LR*5.2*331",1)

"MBREQ")
0
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950304
"PKG",26,22,1,"PAH",1,0)
375^3080207^33308
"PKG",26,22,1,"PAH",1,1,0)
^^2^2^3080207
"PKG",26,22,1,"PAH",1,1,1,0)
This patch corrects a problem related to "in common" accession
"PKG",26,22,1,"PAH",1,1,2,0)
areas when tests with unique accession numbers are involved.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","LRWLST11")
0^1^B57149101^B57122966
"RTN","LRWLST11",1,0)
LRWLST11 ;DALOI/CJS,RWF/FHS - ACCESSION SETUP ;July 19, 2006
"RTN","LRWLST11",2,0)
 ;;5.2;LAB SERVICE;**121,128,153,202,286,331,375**;Sep 27, 1994;Build 3
"RTN","LRWLST11",3,0)
 ;
"RTN","LRWLST11",4,0)
ST21 ;
"RTN","LRWLST11",5,0)
 S LRTS="",LRIX=0
"RTN","LRWLST11",6,0)
 F  S LRIX=$O(LRTSTS(LRWLC,LRUNQ,LRAA,LRIX)) Q:LRIX<1  D SET Q:LRUNQ
"RTN","LRWLST11",7,0)
 ;
"RTN","LRWLST11",8,0)
 S LRNT=$$NOW^XLFDT
"RTN","LRWLST11",9,0)
 D SCDT,SLRSS
"RTN","LRWLST11",10,0)
 ;
"RTN","LRWLST11",11,0)
COMMON ; Setup 'in common' accession if not already setup unless it will be 
"RTN","LRWLST11",12,0)
 ; when tests are acessioned to the 'in common' area.
"RTN","LRWLST11",13,0)
 I +LRWLC,+LRWLC'=+LRAA,$G(^LRO(68,LRWLC,1,LRAD,1,LRAN,0))=$G(LRDFN) D
"RTN","LRWLST11",14,0)
 . I 'LRUNQ,$D(LRTSTS(LRWLC,LRUNQ,LRWLC)) Q
"RTN","LRWLST11",15,0)
 . Q:$G(^LRO(68,LRWLC,1,LRAD,1,LRAN,.1))
"RTN","LRWLST11",16,0)
 . N LRAA,LRACC,LRCDTX,LRCOMMON,LREND,LRIDT,LRNODE3,LRORDRR,LRORU3,LRQUIET,LRTJ,LRUID,X,Y
"RTN","LRWLST11",17,0)
 . S (LRQUIET,LRCOMMON)=1,LRAA=+LRWLC,LRORDRR=""
"RTN","LRWLST11",18,0)
 . S X=LRSS,LRCDTX=LRCDT
"RTN","LRWLST11",19,0)
 . N LRCDT,LRSS
"RTN","LRWLST11",20,0)
 . S LRCDT=LRCDTX,LRSS=X_U_(1+$G(LRLBLBP))
"RTN","LRWLST11",21,0)
 . D STWLN^LRWLST1 Q:$G(LREND)
"RTN","LRWLST11",22,0)
 . D ST2^LRWLST1 Q:$G(LREND)
"RTN","LRWLST11",23,0)
 . D SCDT,SLRSS
"RTN","LRWLST11",24,0)
 ;
"RTN","LRWLST11",25,0)
 Q
"RTN","LRWLST11",26,0)
 ;
"RTN","LRWLST11",27,0)
 ;
"RTN","LRWLST11",28,0)
SCDT ; Set collection, inverse and lab arrival date/times on accession
"RTN","LRWLST11",29,0)
 N FDA,LR6802,LRDIE
"RTN","LRWLST11",30,0)
 S LR6802=LRAN_","_LRAD_","_LRAA_","
"RTN","LRWLST11",31,0)
 S FDA(4,68.02,LR6802,9)=LRCDT
"RTN","LRWLST11",32,0)
 S FDA(4,68.02,LR6802,10)=LREAL
"RTN","LRWLST11",33,0)
 I '$D(LRPHSET) S FDA(4,68.02,LR6802,12)=LRNT
"RTN","LRWLST11",34,0)
 S FDA(4,68.02,LR6802,13.5)=LRIDT
"RTN","LRWLST11",35,0)
 D FILE^DIE("","FDA(4)","LRDIE(4)")
"RTN","LRWLST11",36,0)
 I $D(LRDIE(4)) D MAILALRT^LRWLST1
"RTN","LRWLST11",37,0)
 Q
"RTN","LRWLST11",38,0)
 ;
"RTN","LRWLST11",39,0)
 ;
"RTN","LRWLST11",40,0)
SLRSS ;
"RTN","LRWLST11",41,0)
 ;
"RTN","LRWLST11",42,0)
 S X=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,5,1,0)) ; change for AP
"RTN","LRWLST11",43,0)
 S H8=$S($D(LRSPEC):LRSPEC,1:X)_U_$S("CYEMSPAU"[LRSS:LRACC,1:LRACC)_U_$S(LRSS="MI":LRPRAC,1:"")_U_$S(LRSS="MI":LRLLOC,1:"")_"^^"_$S(LRSS="CH":LRPRAC,1:"")_"^"_$S(LRSS="MI":$P(LRSAMP,";",1),LRSS="CH":LRLLOC,1:"")
"RTN","LRWLST11",44,0)
 ;
"RTN","LRWLST11",45,0)
 I $S(LRSS="CH":1,LRSS="MI":1,1:0) D
"RTN","LRWLST11",46,0)
 . I $G(LRORDRR)="R",+$G(LRRSITE("RSITE")) S $P(H8,U,9)=+LRRSITE("RSITE")_";DIC(4,"
"RTN","LRWLST11",47,0)
 . I $G(LROLLOC),$G(LRORDRR)'="R" S $P(H8,U,9)=LROLLOC_";SC("
"RTN","LRWLST11",48,0)
 . S $P(H8,U,10)=$S($G(LRDUZ(2)):LRDUZ(2),1:$G(DUZ(2)))
"RTN","LRWLST11",49,0)
 ;
"RTN","LRWLST11",50,0)
 S ^LR(LRDFN,LRSS,LRIDT,0)=LRCDT_U_LREAL_"^^^"_H8
"RTN","LRWLST11",51,0)
 I $G(LRORU3)'="" S ^LR(LRDFN,LRSS,LRIDT,"ORU")=LRORU3
"RTN","LRWLST11",52,0)
 ;
"RTN","LRWLST11",53,0)
ST3 D ST4:(LRSS="MI"),LRCCOM
"RTN","LRWLST11",54,0)
 ;
"RTN","LRWLST11",55,0)
 S LRDPF=$P(^LR(LRDFN,0),U,2),DFN=$P(^(0),U,3),LRPR=1
"RTN","LRWLST11",56,0)
 S LRRB=0
"RTN","LRWLST11",57,0)
 I LRDPF=2 S LRRB=$$GET1^DIQ(2,DFN_",",.101),LRRB=$S(LRRB'="":LRRB,1:0)
"RTN","LRWLST11",58,0)
 ;
"RTN","LRWLST11",59,0)
 Q:$G(LRORDR)="P"
"RTN","LRWLST11",60,0)
 ;
"RTN","LRWLST11",61,0)
 I '$D(LRTJ) D  Q
"RTN","LRWLST11",62,0)
 . I $G(LRORDRR)="R",LRSS="CH",$G(LRORU3)'="",$P(LRORU3,"^")'=$P(LRORU3,"^",4) Q  ; Don't print, use label from sending facility.
"RTN","LRWLST11",63,0)
 . I LRLBLBP,'$G(LRCOMMON) S LRLBL(LRAA,LRAN)=LRSN_U_LRAD_U_LRODT_U_LRRB_U_LRLLOC_U_LRACC_U_$S($D(LRORD):LRORD,1:"")
"RTN","LRWLST11",64,0)
 S I=0
"RTN","LRWLST11",65,0)
 F  S I=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,I)) Q:I<.5  S LRTS=^(I,0) D Z
"RTN","LRWLST11",66,0)
 Q
"RTN","LRWLST11",67,0)
 ;
"RTN","LRWLST11",68,0)
 ;
"RTN","LRWLST11",69,0)
ST4 ;
"RTN","LRWLST11",70,0)
 S $P(^LR(LRDFN,LRSS,LRIDT,0),U,10)=$S($D(LRNT):LRNT,1:""),$P(^(0),U,8)=LRLLOC
"RTN","LRWLST11",71,0)
 ; Used to be LRSPCDSC,63.05,.9 (Word Processing field) replaces 63.05,.99
"RTN","LRWLST11",72,0)
 S:$D(LRCCOM) ^LR(LRDFN,LRSS,LRIDT,99)=LRCCOM
"RTN","LRWLST11",73,0)
 I '$D(LRPHSET) D
"RTN","LRWLST11",74,0)
 . N DA,DIE,DR
"RTN","LRWLST11",75,0)
 . S DIE="^LR("_LRDFN_",""MI"",",DA=LRIDT,DA(1)=LRDFN
"RTN","LRWLST11",76,0)
 . ;S DR=.9
"RTN","LRWLST11",77,0)
 . ;I '$G(LRQUIET) W:DR'=.9 !!,"Order comment:"
"RTN","LRWLST11",78,0)
 . S DR=.99_$S($L($G(LRGCOM)):"///"_LRGCOM,$L($G(LRCCOM)):"//"_LRCCOM,1:"")
"RTN","LRWLST11",79,0)
 . I '$G(LRQUIET) W:DR'=.99 !!,"Order comment:"
"RTN","LRWLST11",80,0)
 . D ^DIE
"RTN","LRWLST11",81,0)
 I '$G(LRQUIET),'$D(LRPHSET),'$D(LRGCOM) W !,"Description OK? Y//" D % G ST4:%["N"
"RTN","LRWLST11",82,0)
 K DR,DIC,DIE
"RTN","LRWLST11",83,0)
 Q
"RTN","LRWLST11",84,0)
 ;
"RTN","LRWLST11",85,0)
 ;
"RTN","LRWLST11",86,0)
ST5 S I("SUBSC")=$S(I("EDIT")[11.5:26,I("EDIT")[15:27,I("EDIT")[19:28,I("EDIT")[23:29,I("EDIT")[34:30,1:-1) Q:I("SUBSC")=-1
"RTN","LRWLST11",87,0)
 S I("PNTR")=$S(I("EDIT")[11.5:"^63.061A^",I("EDIT")[15:"^63.361A^",I("EDIT")[19:"^63.111A^",I("EDIT")[23:"^63.181A^",1:"^63.432A^")
"RTN","LRWLST11",88,0)
 S I("N")=1+$S($D(^LR(LRDFN,"MI",LRIDT,I("SUBSC"),0)):$P(^(0),U,4),1:0),^(0)=I("PNTR")_I("N")_U_I("N"),^(I("N"),0)=I("TEST")
"RTN","LRWLST11",89,0)
 Q
"RTN","LRWLST11",90,0)
 ;
"RTN","LRWLST11",91,0)
 ;
"RTN","LRWLST11",92,0)
SET S LRTS=LRTSTS(LRWLC,LRUNQ,LRAA,LRIX),LRIN=$P(LRTS,U,3),LRORIFN=$P(LRTS,U,4),LRTSORU=+$P(LRTS,U,6),LRTS=$P(LRTS,U,1,2),LRBACK=$P(LRTS,U,5)
"RTN","LRWLST11",93,0)
 ;
"RTN","LRWLST11",94,0)
 I '$G(LRQUIET),'$D(LRPHSET) D
"RTN","LRWLST11",95,0)
 . W !,$P(^LAB(60,+LRTS,0),U)
"RTN","LRWLST11",96,0)
 . I $D(LRSPEC),LRSPEC D
"RTN","LRWLST11",97,0)
 . . S I=$S($D(^LAB(61,+LRSPEC,0)):$P(^(0),U),1:""),J=$S($D(^LAB(62,+LRSAMP,0)):$P(^(0),U),1:"")
"RTN","LRWLST11",98,0)
 . . W ?30,J W:I'=J "  ",I
"RTN","LRWLST11",99,0)
 ;
"RTN","LRWLST11",100,0)
 I '$G(LRQUIET),'$D(LRPHSET),+LRTS,$O(^LAB(60,+LRTS,7,0))>0 D
"RTN","LRWLST11",101,0)
 . N S
"RTN","LRWLST11",102,0)
 . S DIC="^LAB(60,",DA=+LRTS,DR=7
"RTN","LRWLST11",103,0)
 . D EN^DIQ H 3
"RTN","LRWLST11",104,0)
 I '$G(LRQUIET),'$D(LRPHSET),+LRTS D
"RTN","LRWLST11",105,0)
 . N S
"RTN","LRWLST11",106,0)
 . S DIC="^LAB(60,"_(+LRTS)_",3,"
"RTN","LRWLST11",107,0)
 . S DA=+$O(^LAB(60,+LRTS,3,"B",+LRSAMP,0)),DR=2
"RTN","LRWLST11",108,0)
 . I DA>0,$O(^LAB(60,+LRTS,3,DA,2,0))>0 D EN^DIQ H 3
"RTN","LRWLST11",109,0)
 ;
"RTN","LRWLST11",110,0)
 D ORUT
"RTN","LRWLST11",111,0)
 D CAP^LRWLST12
"RTN","LRWLST11",112,0)
 K LRTSTS(LRWLC,LRUNQ,LRAA,LRIX)
"RTN","LRWLST11",113,0)
 ;
"RTN","LRWLST11",114,0)
 S ^LRO(69,LRODT,1,LRSN,2,LRIN,0)=LRTS_U_LRAD_U_LRAA_U_LRAN_"^^"_LRORIFN_"^^IP^L^^^^"_LRBACK
"RTN","LRWLST11",115,0)
 S ^LRO(69,LRODT,1,LRSN,2,"B",+LRTS,LRIN)=""
"RTN","LRWLST11",116,0)
 ;
"RTN","LRWLST11",117,0)
 ; When file 63 is enhanced to accept comments per test comments should
"RTN","LRWLST11",118,0)
 ; be put there instead of field 99.
"RTN","LRWLST11",119,0)
 I $O(^LRO(69,LRODT,1,LRSN,2,LRIN,1,0)) D
"RTN","LRWLST11",120,0)
 . I LRSS'="CH"!($D(^LR(LRDFN,LRSS,LRIDT,0))[0) Q
"RTN","LRWLST11",121,0)
 . S X=$S($D(^LR(LRDFN,LRSS,LRIDT,1,0)):$P(^(0),"^",3),1:0),I=0
"RTN","LRWLST11",122,0)
 . F  S I=$O(^LRO(69,LRODT,1,LRSN,2,LRIN,1,I)) Q:I<1  S II=^(I,0) S X=X+1,^LR(LRDFN,LRSS,LRIDT,1,X,0)=II
"RTN","LRWLST11",123,0)
 . S:X ^LR(LRDFN,LRSS,LRIDT,1,0)="^63.041^"_X_U_X
"RTN","LRWLST11",124,0)
 ;
"RTN","LRWLST11",125,0)
RUID I $G(LRORU3)'="" D
"RTN","LRWLST11",126,0)
 . N DA,DIE,DIC,DLAYGO,DR,X,Y
"RTN","LRWLST11",127,0)
 . S DLAYGO=69
"RTN","LRWLST11",128,0)
 . S DA=LRIN,DA(1)=LRSN,DA(2)=LRODT,DIC="^LRO(69,"_DA(2)_",1,"_DA(1)_",2,"
"RTN","LRWLST11",129,0)
 . S DIE=DIC,DR="13////"_$P(LRORU3,U)_";14////"_$P(LRORU3,U,2)_";15////"_$P(LRORU3,U,3)_";16////"_$P(LRORU3,U,4)_";17////"_$P(LRORU3,U,5)
"RTN","LRWLST11",130,0)
 . D ^DIE
"RTN","LRWLST11",131,0)
 Q
"RTN","LRWLST11",132,0)
 ;
"RTN","LRWLST11",133,0)
 ;
"RTN","LRWLST11",134,0)
% R %:DTIME Q:%=""!(%["N")!(%["Y")  W !,"Answer 'Y' or 'N': " G %
"RTN","LRWLST11",135,0)
 ;
"RTN","LRWLST11",136,0)
 ;
"RTN","LRWLST11",137,0)
LRCCOM ;
"RTN","LRWLST11",138,0)
 N I,LRCCOM,LRTN,X
"RTN","LRWLST11",139,0)
 S (I,LRTN,LRCCOM)=0 Q:LRSS'="CH"!($D(^LR(LRDFN,LRSS,LRIDT,0))[0)
"RTN","LRWLST11",140,0)
 F  S I=$O(^LRO(69,LRODT,1,LRSN,6,I)) Q:I<1  I $D(^(I,0)) S X=^(0),LRCCOM=LRCCOM+1,^LR(LRDFN,LRSS,LRIDT,1,LRCCOM,0)=X
"RTN","LRWLST11",141,0)
 F  S LRTN=$O(^LRO(69,LRODT,1,LRSN,2,LRTN)) Q:'LRTN  I $D(^(LRTN,0)) S X=^(0) I $P(X,"^",8),'$P(X,"^",3),$O(^(1,0)) D  ;Get comments for expanded panels
"RTN","LRWLST11",142,0)
 . S I=0 F  S I=$O(^LRO(69,LRODT,1,LRSN,2,LRTN,1,I)) Q:'I  I $D(^(I,0)) S X=^(0),LRCCOM=LRCCOM+1,^LR(LRDFN,LRSS,LRIDT,1,LRCCOM,0)=X
"RTN","LRWLST11",143,0)
 S:LRCCOM ^LR(LRDFN,LRSS,LRIDT,1,0)="^63.041^"_LRCCOM_U_LRCCOM
"RTN","LRWLST11",144,0)
 Q
"RTN","LRWLST11",145,0)
 ;
"RTN","LRWLST11",146,0)
 ;
"RTN","LRWLST11",147,0)
Z L +^LRO(69.1,LRTE)
"RTN","LRWLST11",148,0)
 S LRZ3=$S($D(^LRO(69.1,LRTE,1,0)):$P(^(0),U,3),1:0)
"RTN","LRWLST11",149,0)
Z1 S LRZ3=LRZ3+1 G:$D(^LRO(69.1,LRTE,1,LRZ3)) Z1
"RTN","LRWLST11",150,0)
 S LRZO="^LRO(69.1,"_LRTE_",1,",LRZ1="69.11P",LRZB=+LRTS,LRIFN=LRZ3
"RTN","LRWLST11",151,0)
 D Z^LRWU
"RTN","LRWLST11",152,0)
 S ^LRO(69.1,LRTE,1,LRIFN,0)=+LRTS_"^"_LRLLOC_"^"_LRRB_"^"_LRDFN_"^"_LRSN_"^"_LRTJ_"^"_LRAD_"^"_LRAA_"^"_LRAN_"^"_+LROLLOC
"RTN","LRWLST11",153,0)
 S ^LRO(69.1,"LRPH",LRTE,LRLLOC,LRRB,LRDFN,LRSN)=LRTJ_"^"_LRAD_"^"_LRIFN,^(LRSN,LRAA,LRAN,+LRTS)=+LRTS
"RTN","LRWLST11",154,0)
 L -^LRO(69.1,LRTE)
"RTN","LRWLST11",155,0)
 Q
"RTN","LRWLST11",156,0)
 ;
"RTN","LRWLST11",157,0)
 ;
"RTN","LRWLST11",158,0)
ORUT Q:'$G(LRTSORU)!($G(LRSS)'="CH")
"RTN","LRWLST11",159,0)
 N LRTT,DLAYGO,DIC,DIE,DR,LRTST,DA,LRURG
"RTN","LRWLST11",160,0)
 S DA=LRIDT,DA(1)=LRDFN
"RTN","LRWLST11",161,0)
 S LRNLT=$$NLT^LRVER1(+LRTSORU) Q:+LRNLT<1  Q:$D(^LR(DA(1),LRSS,DA,"ORUT","B",LRNLT))
"RTN","LRWLST11",162,0)
 S DR=".35///^S X=LRNLT",DR(1)=".35"
"RTN","LRWLST11",163,0)
 S DR(1,63.04)=".35///^S X=LRNLT"
"RTN","LRWLST11",164,0)
 S DR(1,63.07)=".01///^S X=LRNLT"
"RTN","LRWLST11",165,0)
 S DIC="^LR("_DA(1)_","""_LRSS_""","
"RTN","LRWLST11",166,0)
 S DIC(0)="MNL",DIE=DIC W:$G(LRDBUG) !,LRNLT
"RTN","LRWLST11",167,0)
 D ^DIE
"RTN","LRWLST11",168,0)
 ;
"RTN","LRWLST11",169,0)
ORUT2 S LRTST=$P($G(^LAM($O(^LAM("E",LRNLT,0)),0)),U) Q:LRTST=""!('$G(LR696IEN))
"RTN","LRWLST11",170,0)
 Q:'($D(^LRO(69.6,LR696IEN,0))#2)!($D(^LRO(69.6,LR696IEN,2,"C",LRNLT)))
"RTN","LRWLST11",171,0)
 S:'$D(^LRO(69.6,LR696IEN,2,0)) ^(0)="^69.64A^"
"RTN","LRWLST11",172,0)
 S DLAYGO=69.6
"RTN","LRWLST11",173,0)
 K DIC,DIE,DA,DR,DA
"RTN","LRWLST11",174,0)
 S DA=LR696IEN
"RTN","LRWLST11",175,0)
 S LRURG="R",LRURG=$S($L($P($G(^LAB(62.05,+$P(LRTS,U,2),0)),U,4)):$P(^(0),U,4),1:LRURG)
"RTN","LRWLST11",176,0)
 S (DIE,DIC)="^LRO(69.6,",DIC(0)="LM"
"RTN","LRWLST11",177,0)
 S DR=20_"///"_LRTST_";",DR(1,69.6)="20///"_LRTST_";"
"RTN","LRWLST11",178,0)
 S DR(2,69.64)=".01///"_LRTST_";1///"_LRNLT_";4///"_LRURG_";5////160;8///"_LRNT_";9///"_LRUID
"RTN","LRWLST11",179,0)
 D ^DIE
"RTN","LRWLST11",180,0)
 Q
"RTN","LRWLST11",181,0)
 ;
"RTN","LRWLST11",182,0)
 ;
"RTN","LRWLST11",183,0)
SICA ; Check accessions 'in common' and setup reference to this accession
"RTN","LRWLST11",184,0)
 N FDA,LR6802,LRDIE,LRAA
"RTN","LRWLST11",185,0)
 S LRX=$P($G(^LRO(68,LRWLC,1,LRAD,1,LRAN,.2)),"^"),LRAA=0
"RTN","LRWLST11",186,0)
 F  S LRAA=$O(LRTSTS(LRWLC,LRUNQ,LRAA)) Q:LRAA<1  I LRWLC'=LRAA D
"RTN","LRWLST11",187,0)
 . S LR6802=LRAN_","_LRAD_","_LRAA_","
"RTN","LRWLST11",188,0)
 . S FDA(5,68.02,LR6802,15.1)=LRX
"RTN","LRWLST11",189,0)
 . D FILE^DIE("","FDA(5)","LRDIE(5)")
"RTN","LRWLST11",190,0)
 . I $D(LRDIE(5)) D MAILALRT^LRWLST1
"RTN","LRWLST11",191,0)
 Q
"VER")
8.0^22.0
"BLD",7581,6)
^295
**END**
**END**
