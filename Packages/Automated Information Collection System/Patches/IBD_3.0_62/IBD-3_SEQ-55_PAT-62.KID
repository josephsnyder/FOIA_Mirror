Released IBD*3*62 SEQ #55
Extracted from mail message
**KIDS**:IBD*3.0*62^

**INSTALL NAME**
IBD*3.0*62
"BLD",7486,0)
IBD*3.0*62^AUTOMATED INFO COLLECTION SYS^0^3090929^y
"BLD",7486,4,0)
^9.64PA^^
"BLD",7486,6.3)
9
"BLD",7486,"ABPKG")
n
"BLD",7486,"KRN",0)
^9.67PA^779.2^20
"BLD",7486,"KRN",.4,0)
.4
"BLD",7486,"KRN",.401,0)
.401
"BLD",7486,"KRN",.402,0)
.402
"BLD",7486,"KRN",.403,0)
.403
"BLD",7486,"KRN",.5,0)
.5
"BLD",7486,"KRN",.84,0)
.84
"BLD",7486,"KRN",3.6,0)
3.6
"BLD",7486,"KRN",3.8,0)
3.8
"BLD",7486,"KRN",9.2,0)
9.2
"BLD",7486,"KRN",9.8,0)
9.8
"BLD",7486,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",7486,"KRN",9.8,"NM",1,0)
IBDF18E0^^0^B42573446
"BLD",7486,"KRN",9.8,"NM","B","IBDF18E0",1)

"BLD",7486,"KRN",19,0)
19
"BLD",7486,"KRN",19.1,0)
19.1
"BLD",7486,"KRN",101,0)
101
"BLD",7486,"KRN",409.61,0)
409.61
"BLD",7486,"KRN",771,0)
771
"BLD",7486,"KRN",779.2,0)
779.2
"BLD",7486,"KRN",870,0)
870
"BLD",7486,"KRN",8989.51,0)
8989.51
"BLD",7486,"KRN",8989.52,0)
8989.52
"BLD",7486,"KRN",8994,0)
8994
"BLD",7486,"KRN","B",.4,.4)

"BLD",7486,"KRN","B",.401,.401)

"BLD",7486,"KRN","B",.402,.402)

"BLD",7486,"KRN","B",.403,.403)

"BLD",7486,"KRN","B",.5,.5)

"BLD",7486,"KRN","B",.84,.84)

"BLD",7486,"KRN","B",3.6,3.6)

"BLD",7486,"KRN","B",3.8,3.8)

"BLD",7486,"KRN","B",9.2,9.2)

"BLD",7486,"KRN","B",9.8,9.8)

"BLD",7486,"KRN","B",19,19)

"BLD",7486,"KRN","B",19.1,19.1)

"BLD",7486,"KRN","B",101,101)

"BLD",7486,"KRN","B",409.61,409.61)

"BLD",7486,"KRN","B",771,771)

"BLD",7486,"KRN","B",779.2,779.2)

"BLD",7486,"KRN","B",870,870)

"BLD",7486,"KRN","B",8989.51,8989.51)

"BLD",7486,"KRN","B",8989.52,8989.52)

"BLD",7486,"KRN","B",8994,8994)

"BLD",7486,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",7486,"QUES",0)
^9.62^^
"BLD",7486,"REQB",0)
^9.611^1^1
"BLD",7486,"REQB",1,0)
IBD*3.0*23^2
"BLD",7486,"REQB","B","IBD*3.0*23",1)

"MBREQ")
0
"PKG",421,-1)
1^1
"PKG",421,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",421,20,0)
^9.402P^^
"PKG",421,22,0)
^9.49I^1^1
"PKG",421,22,1,0)
3.0^2970212^2970424^1258
"PKG",421,22,1,"PAH",1,0)
62^3090929
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","IBDF18E0")
0^1^B42573446^B40950973
"RTN","IBDF18E0",1,0)
IBDF18E0 ;ALB/CJM - ENCOUNTER FORM - PCE DEVICE INTERFACE utilities ;04-OCT-94
"RTN","IBDF18E0",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**11,25,38,36,23,62**;APR 24, 1997;Build 9
"RTN","IBDF18E0",3,0)
 ;
"RTN","IBDF18E0",4,0)
SETPXCA ;set values from TEMP() into the PXCA()
"RTN","IBDF18E0",5,0)
 ;
"RTN","IBDF18E0",6,0)
 N NODE,NUMBER,IBQUIT,Y,Y1,X
"RTN","IBDF18E0",7,0)
 S PROVIDER=+$P(PXCA("ENCOUNTER"),"^",4)
"RTN","IBDF18E0",8,0)
 I PROVIDER,"^P^S^"'[("^"_$P(PXCA("ENCOUNTER"),"^",15)_"^") S $P(PXCA("ENCOUNTER"),"^",15)="S" D LOGERR^IBDF18E2(3579603,.FORMID,"",PROVIDER)
"RTN","IBDF18E0",9,0)
 ;
"RTN","IBDF18E0",10,0)
 S NODE="" F  S NODE=$O(TEMP(NODE)) Q:NODE=""  S NUMBER=0,FID="" F  S FID=$O(TEMP(NODE,FID)) Q:FID=""  S ITEM="" F  S ITEM=$O(TEMP(NODE,FID,ITEM)) Q:ITEM=""  D
"RTN","IBDF18E0",11,0)
 .S IBQUIT=0
"RTN","IBDF18E0",12,0)
 .I NODE="PROCEDURE" S X=TEMP(NODE,FID,ITEM) D
"RTN","IBDF18E0",13,0)
 ..I $P(X,"^",2)="" S $P(X,"^",2)=1
"RTN","IBDF18E0",14,0)
 ..S Y=0 F  S Y=$O(PXCA(NODE,PROVIDER,Y)) Q:'Y!(IBQUIT)  D
"RTN","IBDF18E0",15,0)
 ...S Y1=$G(PXCA(NODE,PROVIDER,Y))
"RTN","IBDF18E0",16,0)
 ...I $P(X,"^")=$P(Y1,"^"),$P(X,"^",3,7)=$P(Y1,"^",3,7) S $P(PXCA(NODE,PROVIDER,Y),"^",2)=$P(PXCA(NODE,PROVIDER,Y),"^",2)+$P(X,"^",2),IBQUIT=1
"RTN","IBDF18E0",17,0)
 ..Q:IBQUIT
"RTN","IBDF18E0",18,0)
 ..S TEMP(NODE,FID,ITEM)=X
"RTN","IBDF18E0",19,0)
 .I IBQUIT K TEMP(NODE,FID,ITEM) Q
"RTN","IBDF18E0",20,0)
 .S NUMBER=NUMBER+1
"RTN","IBDF18E0",21,0)
 .S PXCA(NODE,PROVIDER,NUMBER)=TEMP(NODE,FID,ITEM)
"RTN","IBDF18E0",22,0)
 .I $D(TEMP(NODE,FID,ITEM,"MODIFIER")) D MODPXCA
"RTN","IBDF18E0",23,0)
 .K TEMP(NODE,FID,ITEM)
"RTN","IBDF18E0",24,0)
 ;
"RTN","IBDF18E0",25,0)
 ; -- default c/o date time to now if not passed
"RTN","IBDF18E0",26,0)
 I '$P($G(^IBD(357.09,1,1)),"^",2) D  ;cont only if s/p not answerred
"RTN","IBDF18E0",27,0)
 .I $D(PXCA("ENCOUNTER")) I $P(PXCA("ENCOUNTER"),"^",14)="" D  ;quit if we are already passing c/o date/time
"RTN","IBDF18E0",28,0)
 ..N SDOE S SDOE=$$FNDSDOE^IBDFDE($S(+$G(FORMID("DFN")):+$G(FORMID("DFN")),+$G(IBDF("DFN")):+$G(IBDF("DFN")),1:$G(DFN)),$S(+$G(FORMID("APPT")):+$G(FORMID("APPT")),+$G(IBDF("APPT")):+$G(IBDF("APPT")),1:$G(APPT)))
"RTN","IBDF18E0",29,0)
 ..Q:$$COMDT^SDCOU(+SDOE)  ;c/o already performed, don't overwrite
"RTN","IBDF18E0",30,0)
 ..N IBDDFN,IBDAPPT,IBDCLN,IBDCOST
"RTN","IBDF18E0",31,0)
 ..S IBDDFN=$S(+$G(FORMID("DFN")):+$G(FORMID("DFN")),+$G(IBDF("DFN")):+$G(IBDF("DFN")),1:$G(DFN))
"RTN","IBDF18E0",32,0)
 ..S IBDAPPT=$S(+$G(FORMID("APPT")):+$G(FORMID("APPT")),+$G(IBDF("APPT")):+$G(IBDF("APPT")),1:$G(APPT))
"RTN","IBDF18E0",33,0)
 ..S IBDCLN=$S(+$G(FORMID("CLINIC")):+$G(FORMID("CLINIC")),+$G(IBDF("CLINIC")):+$G(IBDF("CLINIC")),1:$G(CLN))
"RTN","IBDF18E0",34,0)
 ..S IBDCOST=$$STATUS^SDAM1(IBDDFN,IBDAPPT,IBDCLN,$G(^DPT(IBDDFN,0))) Q:$P(IBDCOST,";",5)
"RTN","IBDF18E0",35,0)
 ..S $P(PXCA("ENCOUNTER"),"^",14)=$E($$HTFM^XLFDT($H),1,12)
"RTN","IBDF18E0",36,0)
 ;
"RTN","IBDF18E0",37,0)
 D OTHRBUB
"RTN","IBDF18E0",38,0)
 Q
"RTN","IBDF18E0",39,0)
 ;
"RTN","IBDF18E0",40,0)
 ;
"RTN","IBDF18E0",41,0)
OTHRBUB ; -- check procedure and diagnosis node for other bubble, but no data
"RTN","IBDF18E0",42,0)
 N NODE,CODE,OUT,X,XX
"RTN","IBDF18E0",43,0)
 S I=0 F  S I=$O(PXCA("PROCEDURE",I)) Q:I=""  S J=0 F  S J=$O(PXCA("PROCEDURE",I,J)) Q:J=""  D
"RTN","IBDF18E0",44,0)
 .I +$G(PXCA("PROCEDURE",I,J))<1 D  ;no code, may be treatment
"RTN","IBDF18E0",45,0)
 ..I $P($G(PXCA("PROCEDURE",I,J)),"^",6)["OTHER#" D  ;no code, narr=other
"RTN","IBDF18E0",46,0)
 ...D LOGERR^IBDF18E2(3579612,.FORMID)
"RTN","IBDF18E0",47,0)
 ...K PXCA("PROCEDURE",I,J)
"RTN","IBDF18E0",48,0)
 .I +$G(PXCA("PROCEDURE",I,J)),$P($G(PXCA("PROCEDURE",I,J)),"^",6)["OTHER#" D
"RTN","IBDF18E0",49,0)
 ..;; --change to api cpt ; dhh
"RTN","IBDF18E0",50,0)
 ..S CODE=$$CPT^ICPTCOD(CODE)
"RTN","IBDF18E0",51,0)
 ..S $P(PXCA("PROCEDURE",I,J),"^",6)=$S(+CODE'=-1:$E($P((CODE),"^",3),1,80),1:"")
"RTN","IBDF18E0",52,0)
 ;
"RTN","IBDF18E0",53,0)
 S I=0 F  S I=$O(PXCA("DIAGNOSIS/PROBLEM",I)) Q:I=""  S J=0 F  S J=$O(PXCA("DIAGNOSIS/PROBLEM",I,J)) Q:J=""  D
"RTN","IBDF18E0",54,0)
 .I $P($G(PXCA("DIAGNOSIS/PROBLEM",I,J)),"^",13)="" K OUT D
"RTN","IBDF18E0",55,0)
 ..S X=$P($$ICDDX^ICDCODE(+$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^"),$G(DT),"",1),"^",2) D
"RTN","IBDF18E0",56,0)
 ...S XX=$$ICDD^ICDCODE(X,"OUT"),$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13)=$E($G(OUT(1)),1,79)
"RTN","IBDF18E0",57,0)
 .I $P($G(PXCA("DIAGNOSIS/PROBLEM",I,J)),"^",13)["OTHER#" K OUT D
"RTN","IBDF18E0",58,0)
 ..S X=$P($$ICDDX^ICDCODE(+$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^"),$G(DT),"",1),"^",2) D
"RTN","IBDF18E0",59,0)
 ...S XX=$$ICDD^ICDCODE(X,"OUT"),$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13)=$E($G(OUT(1)),1,79)
"RTN","IBDF18E0",60,0)
 Q
"RTN","IBDF18E0",61,0)
 ;
"RTN","IBDF18E0",62,0)
PRO ; -- make sure diagnosis code is added to DIAGNOSIS/PROBLEM node
"RTN","IBDF18E0",63,0)
 S I=0 F  S I=$O(PXCA("DIAGNOSIS/PROBLEM",I)) Q:I=""  S J=0 F  S J=$O(PXCA("DIAGNOSIS/PROBLEM",I,J)) Q:J=""  D
"RTN","IBDF18E0",64,0)
 .I $TR($P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",5,8),"^","")']"",($P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",2)="") S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",2)="S" D
"RTN","IBDF18E0",65,0)
 ..D LOGERR^IBDF18E2(3579505,.FORMID,"",+PXCA("DIAGNOSIS/PROBLEM",I,J),"","","",$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13))
"RTN","IBDF18E0",66,0)
 .Q:+$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^")
"RTN","IBDF18E0",67,0)
 .I +$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",3) D
"RTN","IBDF18E0",68,0)
 ..S IBX=$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",3) D
"RTN","IBDF18E0",69,0)
 ...I $D(^LEX)>1 S X="LEXU" X ^%ZOSF("TEST") I $T S IBX=$$ICDONE^LEXU(IBX) S:$L(IBX)<1 IBX=799.9 Q  ; clinical lexicon next version to be in ^LEX
"RTN","IBDF18E0",70,0)
 ...S X="GMPTU" X ^%ZOSF("TEST") I $T S IBX=$$ICDONE^GMPTU(IBX) S:$L(IBX)<1 IBX=799.9 Q
"RTN","IBDF18E0",71,0)
 ...S IBX=799.9
"RTN","IBDF18E0",72,0)
 ...Q
"RTN","IBDF18E0",73,0)
 ..S IBXI=+$O(^ICD9("BA",IBX_" ",0)) I +IBXI<1 S IBXI=+$O(^ICD9("BA",799.9_" ",0))
"RTN","IBDF18E0",74,0)
 ..I +IBXI<1 D LOGERR^IBDF18E2(3579506,.FORMID,"",$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",3),"","","",$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",13)) Q
"RTN","IBDF18E0",75,0)
 ..S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^")=IBXI
"RTN","IBDF18E0",76,0)
 ..Q
"RTN","IBDF18E0",77,0)
 .;
"RTN","IBDF18E0",78,0)
 .; -- set diagnosis code from problem list into piece 1 of array
"RTN","IBDF18E0",79,0)
 .I +$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",4) S $P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^")=$$PROBDIA^IBDFBK3(+$P(PXCA("DIAGNOSIS/PROBLEM",I,J),"^",4))
"RTN","IBDF18E0",80,0)
 Q
"RTN","IBDF18E0",81,0)
 ;
"RTN","IBDF18E0",82,0)
CODES ; -- if addt'l codes to pass and qual is prim or sec, send 2nd code
"RTN","IBDF18E0",83,0)
 N VALUE,IBI,OQLFR
"RTN","IBDF18E0",84,0)
 S OQLFR=QLFR
"RTN","IBDF18E0",85,0)
 Q:$G(QLFR)']""
"RTN","IBDF18E0",86,0)
 Q:"PRIMARYSECONDARYADD TO PROBLEM LIST"'[$P($G(^IBD(357.98,QLFR,0)),"^")
"RTN","IBDF18E0",87,0)
 F IBI=3,4 S VALUE=$P($G(^IBD(357.95,FORMTYPE,1,BUB,2)),"^",IBI) Q:'$G(VALUE)  D
"RTN","IBDF18E0",88,0)
 .N QLFR,TEXT,X,Y
"RTN","IBDF18E0",89,0)
 .D
"RTN","IBDF18E0",90,0)
 ..S X=VALUE
"RTN","IBDF18E0",91,0)
 ..I $G(^ICD9($G(X),0))="" K X S Y="" Q
"RTN","IBDF18E0",92,0)
 ..E  S Y=$$ICDDX^ICDCODE(+X,$G(DT),"",1),Y=$P(Y,"^",4)
"RTN","IBDF18E0",93,0)
 .S TEXT=Y
"RTN","IBDF18E0",94,0)
 .S QLFR=$O(^IBD(357.98,"B",$S($E(OQLFR)="S":"SECONDARY",1:"ADD TO PROBLEM LIST"),0))
"RTN","IBDF18E0",95,0)
 .S ITEM=ITEM_"."_IBI
"RTN","IBDF18E0",96,0)
 .D SETTEMP^IBDF18E1
"RTN","IBDF18E0",97,0)
 .S ITEM=$P(ITEM,".")
"RTN","IBDF18E0",98,0)
 Q
"RTN","IBDF18E0",99,0)
 ;
"RTN","IBDF18E0",100,0)
TRACKING(FORMID) ;get form tracking info,sets FORMID array, which should be pass
"RTN","IBDF18E0",101,0)
 ;
"RTN","IBDF18E0",102,0)
 S NODE=$G(^IBD(357.96,FORMID,0))
"RTN","IBDF18E0",103,0)
 Q:NODE="" 0
"RTN","IBDF18E0",104,0)
 S FORMID("APPT")=$P(NODE,"^",3),FORMID("CLINIC")=$P(NODE,"^",10),FORMID("DFN")=$P(NODE,"^",2),FORMID("SOURCE")=$P(NODE,"^",7)
"RTN","IBDF18E0",105,0)
 Q 1
"RTN","IBDF18E0",106,0)
 ;
"RTN","IBDF18E0",107,0)
SC ; -- if SC answered yes then all other classifications = null
"RTN","IBDF18E0",108,0)
 I $P(PXCA("ENCOUNTER"),"^",6) S $P(PXCA("ENCOUNTER"),"^",7,9)="^^"
"RTN","IBDF18E0",109,0)
 ;
"RTN","IBDF18E0",110,0)
 ; - If 'no classifications' was bubbled in then all other
"RTN","IBDF18E0",111,0)
 ;   classifications = null
"RTN","IBDF18E0",112,0)
 I $P($G(PXCA("IBD NOCLASSIFICATION")),"^",3) S $P(PXCA("ENCOUNTER"),"^",6,10)="^^^^"
"RTN","IBDF18E0",113,0)
 Q
"RTN","IBDF18E0",114,0)
 ;
"RTN","IBDF18E0",115,0)
INPT(DFN,APPT) ; -- determine inpatient status
"RTN","IBDF18E0",116,0)
 N INPT
"RTN","IBDF18E0",117,0)
 S INPT=$P($G(^DPT(+$G(DFN),"S",+$G(APPT),0)),"^",2)="I"
"RTN","IBDF18E0",118,0)
 Q:'INPT
"RTN","IBDF18E0",119,0)
 ;
"RTN","IBDF18E0",120,0)
 ; -- kill erroneous warnings for inpatients
"RTN","IBDF18E0",121,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,6))["SC flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,6)
"RTN","IBDF18E0",122,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,7))["AO flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,7)
"RTN","IBDF18E0",123,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,8))["IR flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,8)
"RTN","IBDF18E0",124,0)
 I $G(PXCA("WARNING","ENCOUNTER",0,0,9))["EC flag is missing" K PXCA("WARNING","ENCOUNTER",0,0,9)
"RTN","IBDF18E0",125,0)
 Q
"RTN","IBDF18E0",126,0)
MODPXCA ; -- copy CPT Modifier information from TEMP to PXCA
"RTN","IBDF18E0",127,0)
 ;
"RTN","IBDF18E0",128,0)
 N MOD,MODX,MODNODE,CODE
"RTN","IBDF18E0",129,0)
 S CODE=$P($G(TEMP(NODE,FID,ITEM)),"^")
"RTN","IBDF18E0",130,0)
 S MOD=0 F  S MOD=$O(TEMP(NODE,FID,ITEM,"MODIFIER",MOD)) Q:MOD']""  D
"RTN","IBDF18E0",131,0)
 . S MODX=TEMP(NODE,FID,ITEM,"MODIFIER",MOD)
"RTN","IBDF18E0",132,0)
 . S MODNODE=$$MODP^ICPTMOD(CODE,MODX)
"RTN","IBDF18E0",133,0)
 . S:+MODNODE>0 PXCA(NODE,PROVIDER,NUMBER,MODX)=$$MOD^ICPTMOD(+MODNODE,"I")
"RTN","IBDF18E0",134,0)
 Q
"RTN","IBDF18E0",135,0)
VSTPXCA ; -- copy CPT Modifier information from TEMP to PXCA for Visit
"RTN","IBDF18E0",136,0)
 ;
"RTN","IBDF18E0",137,0)
 N I,J,MOD,MODX
"RTN","IBDF18E0",138,0)
 S I=0 F  S I=$O(TEMP("ENCOUNTER",I)) Q:I']""  D
"RTN","IBDF18E0",139,0)
 . S J=0 F  S J=$O(TEMP("ENCOUNTER",I,J)) Q:'J  D
"RTN","IBDF18E0",140,0)
 .. S MOD=0 F  S MOD=$O(TEMP("ENCOUNTER",I,J,"MODIFIER",MOD)) Q:MOD']""  D
"RTN","IBDF18E0",141,0)
 ... S MODX=TEMP("ENCOUNTER",I,J,"MODIFIER",MOD)
"RTN","IBDF18E0",142,0)
 ... S PXCA("ENCOUNTER","MODIFIER",MODX)=""
"RTN","IBDF18E0",143,0)
 K TEMP("ENCOUNTER")
"RTN","IBDF18E0",144,0)
 Q
"VER")
8.0^22.0
"BLD",7486,6)
^55
**END**
**END**
