$TXT Created by NABER,DAVID A at DEVCUR.FO-SLC.MED.VA.GOV  (KIDS) on Wednesday, 04/01/09 at 14:31
=============================================================================
Run Date: JUN 24, 2009                     Designation: GMRA*4*42
Package : GMRA - ADVERSE REACTION TRACKING    Priority: Mandatory
Version : 4        SEQ #40                      Status: Released
                  Compliance Date: JUL 25, 2009
=============================================================================

Associated patches: (v)GMRA*4*26   <<= must be installed BEFORE `GMRA*4*42'
                    (v)GMRA*4*38   <<= must be installed BEFORE `GMRA*4*42'
                    (v)GMRA*4*41   <<= must be installed BEFORE `GMRA*4*42'

Subject: PROGRESS NOTES AND HISTORICAL ALLERGY ENTRIES

Category: 
  - Routine

Description:
============

 In the allergy package, a progress note is created whenever an observed drug 
 allergy is entered for a patient.  That note is then added to the list of 
 items to be signed when changing the patient or refreshing the patient's data.
  
 Historical allergies, regardless of whether they are drug related or not, do 
 not create progress notes.
  
 During internal testing of another issue, it was discovered that a note
 can be associated, or appear to be associated, to an historical allergy
 entry.  Using the following scenario, the issue can be seen:
  
 1. Open a fresh session of CPRS.
 2. Patient One: Enter Observed Drug allergy; File|Refresh. Get a note,  as 
    expected, and sign. 
 3. Patient One: Enter Historical. File|Refresh. Note, unexpected; 
    error on trying to sign (will likely be an unable to cosign error).
  
 At this point, any addition historical entries will appear to have a note 
 associated with it.  In fact, what is happening is the same note is appearing 
 on the "to be signed" list even though it may already be signed.  No new 
 notes are created and the note stays associated with the correct patient and 
 correct allergy.
  
 After the installation of this patch, the system will correctly handle the 
 creation of the progress note for observed entries and will no longer 
 associate a progress note with an historical entry.
  
 While testing this patch, it was discovered that the zero node of the 
 XTMP global entry that stores data from the HDR isn't correctly set at 
 the time the data is retrieved.  As a result, the daily clean up process 
 that clears out the XTMP global will not clear this data, which may cause 
 an unnecessary build up of data in XTMP.  The zero node will now be set 
 correctly.
  
 Related to the HDR work, the code that indicates when new allergy data 
 should be sent to the HDR would sometimes stop processing due to a task 
 manager issue.  The code has been modified to add a fail safe so that if 
 the data isn't sent to the HDR as a result of a task related error, a new 
 task will be created to send the data.  Previously, manual intervention 
 was required.
  
 INSTALLATION
 ============
 This patch may be installed with users on the system although it is 
 recommended that it be installed during non-peak hours to minimize 
 potential disruption to users as an error may occur if a user is entering 
 allergies during the time of installation. This patch should take less
 than 1 minute to install.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter GMRA*4.0*42):
         a.  Backup a Transport Global
         b.  Compare Transport Global to Current System
         c.  Verify Checksums in Transport Global
  
 4.  Use the Install Package(s) option and select the package GMRA*4.0*42.
  
 5.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? NO//',
     hit enter.
  
 6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? NO//', hit enter.
  
 7.  If prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0'.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;4.0;Adverse Reaction Tracking;**[Patch List]**;Mar 29, 1996;Build 4

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: GMRAGUI1
    Before: B59106496   After: B59206501  **21,25,36,38,42**
Routine Name: GMRAHDR
    Before: B21654904   After: B23798281  **18,24,26,42**
Routine Name: GMRAOR
    Before: B69044277   After: B67130954  **2,13,26,37,41,42**
 
Routine list of preceding patches: 38, 41

=============================================================================
User Information:                          Hold Date     : JUN 18, 2009
Entered By  : NABER,DAVID A                 Date Entered  : FEB 03, 2009
Completed By: OLSEN,JAMES                   Date Completed: MAY 19, 2009
Released By : HEMBREE,SUSAN                 Date Released : JUN 24, 2009
=============================================================================


Packman Mail Message:
=====================

$END TXT
