$TXT Created by                     at MNTVBB.DOMAIN.EXT  (KIDS) on Tuesday, 10/22/19 at 17:38
=============================================================================
Run Date: JAN 06, 2020                     Designation: LA*5.2*99
Package : LA - AUTOMATED LAB INSTRUMENTS      Priority: Mandatory
Version : 5.2        SEQ #73                    Status: Released
                  Compliance Date: FEB 06, 2020
=============================================================================

Associated patches: (v)LA*5.2*88   <<= must be installed BEFORE `LA*5.2*99'

Subject: REFERENCE RANGES WITH NEGATIVE VALUES

Category: 
  - Routine

Description:
============

 The patch addresses one (1) issue:
  
 1. When a result returns from a send-out laboratory containing results
    with a reference range with a negative value, VistA Lab parses the 
    values erroneously and renders the range as a positive value. 
  
 Associated NSR(s):
 ------------------
 N/A
  
 Associated ServiceNow ticket(s):
 ==========================
 1. INC4872523 - Reference Ranges With Negative Values
  
 Blood Bank Review:
 ==================
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*99 contains 
 changes to a package referenced in ProPath standard titled: BBM Team 
 Review of VistA Patches. This patch does not alter or modify any VistA 
 Blood Bank software design safeguards or safety critical elements 
 functions.
  
 RISK ANALYSIS: Changes made by patch LA*5.2*99 have no adverse effect on 
 Blood Bank software functionality, therefore RISK is none.
  
  
 Associated NSR(s):
 ==================
 N/A
  
 Participating Test Sites:
 =========================
 Minneapolis VAMC 
 St Cloud VA HCS
 Northport VAMC
  
  
 Remedy Overview:
 ================
 1. INC4872523 - Reference Ranges With Negative Values
  
 Problem:
 --------
 When a reference laboratory sends results for a lab test with a reference
 range with a negative value like: -9.9  TO +3.3, VistA parses the ranges
 improperly.  The reference range is contained in the incoming HL7 OBX 
 segment:
  
  OBX|7|NM|085937^IgG, Syn Rate,CSF^L^14116-8^IgG synthesis rate^LN|
  |33.4|mg/day| -9.9  - +3.3|H||N|F|20190305||201903010958|01
  
 Vista Lab is reporting out the reference range as "<=9.9" which is 
 incorrect.
  
 The reason that the current reference range parsing is not working is the
 program uses the "-" to piece out the reference low and the reference 
 high.  When the code pulls the 1st piece (reference low) delimited by a 
 "-", it gets a null value.  Pulling the 2nd piece (reference high) 
 returns "9.9" which is not negative and is not the reference high.
  
 Resolution:
 -----------
 The routine ^LA7VIN5A is modified to determine whether either or both of
 the reference ranges are negative and extract them appropriately.
  
 Routines: LA7VIN5A
  
 Components:
 ===========
 N/A
  
 Installation Instructions:
 ==========================
    The install time for this patch is less than 2 minutes. This patch 
    Can be installed when Laboratory users are on the system.
  
    NOTE: Kernel patches must be current on the target system to avoid
          problems loading and/or installing this patch.
  
    1. Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu. This
       option will load the KIDS patch onto your system.
  
    2. The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the transport global.
  
    3. On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
    4. Use the 'Verify Checksum in Transport Global' option and verify
       that all routines have the correct checksums.
     
    5. On the KIDS menu, under the 'Installation' menu, use the 
       Following options:
               Print Transport Global
               Compare Transport Global to Current System
               Backup a Transport Global
  
       To preserve a copy of the routines exported in this patch prior
       to installation, you should use the 'Backup a Transport Global' 
       option at this time. You may also compare the routines in your 
       production account to the routines in the patch by using the 
      'Compare a Transport Global to Current System' option.
  
    6. Use the 'Install Package(s)' option under the 'Installation' 
       Menu and select the package 'LA*5.2*99'.
  
       If prompted 'Want KIDS to INHIBIT LOGONs during the install? 
       YES//, choose 'NO'.
  
       If prompted 'Want to DISABLE Scheduled Options, Menu Options, 
       And Protocols? YES//', choose 'NO'.
  
 Back-out/Rollback Strategy:
 --------------------------
 In the event of a catastrophic failure, the Facility CIO may make the 
 decision to back-out the patch.
   
 It is imperative that you have performed a backup of the routine 
 included in this patch prior to installation.
  
 The back-out plan is to restore the routine from the backup created.  
 No data was modified by this patch installation and, therefore, no 
 rollback strategy is required.
  
 To verify the back-out completed successfully, ensure the checksum 
 matches the pre-patch checksum from the patch descriptions.

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**[Patch List]**;Sep 27, 1994;Build 3

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LA7VIN5A
    Before: B34608326   After: B38793140  **46,64,67,72,66,74,88,99**
 
Routine list of preceding patches: 88

=============================================================================
User Information:
Entered By  :                               Date Entered  : APR 02, 2019
Completed By:                               Date Completed: JAN 03, 2020
Released By :                               Date Released : JAN 06, 2020
=============================================================================


Packman Mail Message:
=====================

$END TXT
