Released LA*5.2*81 SEQ #60
Extracted from mail message
**KIDS**:LA*5.2*81^

**INSTALL NAME**
LA*5.2*81
"BLD",9366,0)
LA*5.2*81^AUTOMATED LAB INSTRUMENTS^0^3130514^y
"BLD",9366,1,0)
^^2^2^3130514^^
"BLD",9366,1,1,0)
1. Erroneous nodes created in File 68 for MICRO with VITEK result 
"BLD",9366,1,2,0)
   interface.
"BLD",9366,4,0)
^9.64PA^^
"BLD",9366,6.3)
2
"BLD",9366,"ABPKG")
n
"BLD",9366,"INI")
START^LA81PRE
"BLD",9366,"INID")
^^y
"BLD",9366,"KRN",0)
^9.67PA^779.2^20
"BLD",9366,"KRN",.4,0)
.4
"BLD",9366,"KRN",.401,0)
.401
"BLD",9366,"KRN",.402,0)
.402
"BLD",9366,"KRN",.403,0)
.403
"BLD",9366,"KRN",.5,0)
.5
"BLD",9366,"KRN",.84,0)
.84
"BLD",9366,"KRN",3.6,0)
3.6
"BLD",9366,"KRN",3.8,0)
3.8
"BLD",9366,"KRN",9.2,0)
9.2
"BLD",9366,"KRN",9.8,0)
9.8
"BLD",9366,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",9366,"KRN",9.8,"NM",1,0)
LAMIAUT8^^0^B16110731
"BLD",9366,"KRN",9.8,"NM",2,0)
LA81PRE^^0^B5953653
"BLD",9366,"KRN",9.8,"NM","B","LA81PRE",2)

"BLD",9366,"KRN",9.8,"NM","B","LAMIAUT8",1)

"BLD",9366,"KRN",19,0)
19
"BLD",9366,"KRN",19.1,0)
19.1
"BLD",9366,"KRN",101,0)
101
"BLD",9366,"KRN",409.61,0)
409.61
"BLD",9366,"KRN",771,0)
771
"BLD",9366,"KRN",779.2,0)
779.2
"BLD",9366,"KRN",870,0)
870
"BLD",9366,"KRN",8989.51,0)
8989.51
"BLD",9366,"KRN",8989.52,0)
8989.52
"BLD",9366,"KRN",8994,0)
8994
"BLD",9366,"KRN","B",.4,.4)

"BLD",9366,"KRN","B",.401,.401)

"BLD",9366,"KRN","B",.402,.402)

"BLD",9366,"KRN","B",.403,.403)

"BLD",9366,"KRN","B",.5,.5)

"BLD",9366,"KRN","B",.84,.84)

"BLD",9366,"KRN","B",3.6,3.6)

"BLD",9366,"KRN","B",3.8,3.8)

"BLD",9366,"KRN","B",9.2,9.2)

"BLD",9366,"KRN","B",9.8,9.8)

"BLD",9366,"KRN","B",19,19)

"BLD",9366,"KRN","B",19.1,19.1)

"BLD",9366,"KRN","B",101,101)

"BLD",9366,"KRN","B",409.61,409.61)

"BLD",9366,"KRN","B",771,771)

"BLD",9366,"KRN","B",779.2,779.2)

"BLD",9366,"KRN","B",870,870)

"BLD",9366,"KRN","B",8989.51,8989.51)

"BLD",9366,"KRN","B",8989.52,8989.52)

"BLD",9366,"KRN","B",8994,8994)

"BLD",9366,"QUES",0)
^9.62^^
"BLD",9366,"REQB",0)
^9.611^^
"INI")
START^LA81PRE
"MBREQ")
0
"PKG",53,-1)
1^1
"PKG",53,0)
AUTOMATED LAB INSTRUMENTS^LA^Lab Auto-Instrument Package
"PKG",53,20,0)
^9.402P^^
"PKG",53,22,0)
^9.49I^1^1
"PKG",53,22,1,0)
5.2^2940927^2950304
"PKG",53,22,1,"PAH",1,0)
81^3130514
"PKG",53,22,1,"PAH",1,1,0)
^^2^2^3130514
"PKG",53,22,1,"PAH",1,1,1,0)
1. Erroneous nodes created in File 68 for MICRO with VITEK result 
"PKG",53,22,1,"PAH",1,1,2,0)
   interface.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LA81PRE")
0^2^B5953653^n/a
"RTN","LA81PRE",1,0)
LA81PRE ;VMP/RB-PURGE ALL INVALID VITEK NODES ^LRO(68,12,1,DATE,1,ACC#,1,4,WKLD CD,0) 1/7/2013
"RTN","LA81PRE",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**81**;Sep 27, 1994;Build 2
"RTN","LA81PRE",3,0)
 ;;
"RTN","LA81PRE",4,0)
 ;  Pre install routine in patch LA*5.2*81 that will purge erroneous
"RTN","LA81PRE",5,0)
 ;  entries in file# 68 that were caused by an incorrect node set
"RTN","LA81PRE",6,0)
 ;  when the results were set into file #68 for VITEK.
"RTN","LA81PRE",7,0)
 ;
"RTN","LA81PRE",8,0)
 ;Kill example: ^LRO(68,12,1,2980000,1,1596,1,4,1142,0)="^^52;1;3"
"RTN","LA81PRE",9,0)
 ;Also, will check correct node ^LRO(68,12,1,2980000,1,1596,4,1142,0)
"RTN","LA81PRE",10,0)
 ;to insure piece 3 is set. If not, will move erroneous node piece 3 to correct node:
"RTN","LA81PRE",11,0)
 ;ex. ^LRO(68,12,1,2980000,1,1596,4,1142,0)="1142^9^^1315^2980224^^1^7087"
"RTN","LA81PRE",12,0)
 ;;
"RTN","LA81PRE",13,0)
 Q
"RTN","LA81PRE",14,0)
START N LRSTART,IEN68,LREND,LRAA,LRAD,LRAN,LRTEST,LRBAD,LRGOOD,TOT,TOT1,TOT2,TOT3,DATA
"RTN","LA81PRE",15,0)
 I $D(^XTMP("LA81PRE")) Q
"RTN","LA81PRE",16,0)
 D NOW^%DTC S LRSTART=%
"RTN","LA81PRE",17,0)
 S ^XTMP("LA81PRE","START COMPILE")=LRSTART
"RTN","LA81PRE",18,0)
 S ^XTMP("LA81PRE","END COMPILE")="RUNNING"
"RTN","LA81PRE",19,0)
 S ^XTMP("LA81PRE",0)=$$FMADD^XLFDT(LRSTART,120)_"^"_LRSTART
"RTN","LA81PRE",20,0)
 S U="^",LRAA=0,(TOT,TOT1,TOT2,TOT3)=0
"RTN","LA81PRE",21,0)
1 S LRAA=$O(^LRO(68,LRAA)),LRAD=0 G EXIT:+LRAA=0
"RTN","LA81PRE",22,0)
2 S LRAD=$O(^LRO(68,LRAA,1,LRAD)),LRAN=0 G 1:'LRAD
"RTN","LA81PRE",23,0)
3 S LRAN=$O(^LRO(68,LRAA,1,LRAD,1,LRAN)),LRTEST=0 G 2:'LRAN
"RTN","LA81PRE",24,0)
 S TOT=TOT+1
"RTN","LA81PRE",25,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,LRAN,1,4)) G 3
"RTN","LA81PRE",26,0)
4 S LRTEST=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,1,4,LRTEST)) G 3:'LRTEST
"RTN","LA81PRE",27,0)
 S TOT1=TOT1+1
"RTN","LA81PRE",28,0)
 S LRBAD=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,1,4,LRTEST,0)) G 3:LRBAD=""
"RTN","LA81PRE",29,0)
 S LRGOOD=$G(^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST,0))
"RTN","LA81PRE",30,0)
 I LRGOOD'="" D
"RTN","LA81PRE",31,0)
 . I $P(LRGOOD,U,3)'="" Q
"RTN","LA81PRE",32,0)
 . S DATA=$P(LRBAD,U,3)
"RTN","LA81PRE",33,0)
 . S DA=LRTEST,DR="2///^S X=DATA"
"RTN","LA81PRE",34,0)
 . S DIE="^LRO(68,LRAA,1,LRAD,1,LRAN,4," D ^DIE K DIE,DA,DR
"RTN","LA81PRE",35,0)
 . S ^XTMP("LA81PRE",68,LRAA,1,LRAD,1,LRAN,1,4,LRTEST,1)=^LRO(68,LRAA,1,LRAD,1,LRAN,4,LRTEST,0)
"RTN","LA81PRE",36,0)
 . S TOT2=TOT2+1
"RTN","LA81PRE",37,0)
 S ^XTMP("LA81PRE",68,LRAA,1,LRAD,1,LRAN,1,4,LRTEST,0)=^LRO(68,LRAA,1,LRAD,1,LRAN,1,4,LRTEST,0)
"RTN","LA81PRE",38,0)
 K ^LRO(68,LRAA,1,LRAD,1,LRAN,1,4,LRTEST,0)
"RTN","LA81PRE",39,0)
 S TOT3=TOT3+1
"RTN","LA81PRE",40,0)
 G 4
"RTN","LA81PRE",41,0)
EXIT ;
"RTN","LA81PRE",42,0)
 D NOW^%DTC S LREND=%
"RTN","LA81PRE",43,0)
 S ^XTMP("LA81PRE","TOTALS")=TOT_U_TOT1_U_TOT3
"RTN","LA81PRE",44,0)
 S ^XTMP("LA81PRE","END COMPILE")=LREND
"RTN","LA81PRE",45,0)
 W !!,"Number of File #68 accessions reviewed: ",TOT
"RTN","LA81PRE",46,0)
 W !!,"Number of erroneous nodes found: ",TOT1
"RTN","LA81PRE",47,0)
 W !!,"Number of good node 4 recs updated with DELETED rec field LOAD LIST ENTRY: ",TOT2
"RTN","LA81PRE",48,0)
 W !!,"Number of erroneous nodes killed: ",TOT3
"RTN","LA81PRE",49,0)
 K %
"RTN","LA81PRE",50,0)
 Q
"RTN","LAMIAUT8")
0^1^B16110731^B15523733
"RTN","LAMIAUT8",1,0)
LAMIAUT8 ;FHS/SLC - ADD OR DELETE FROM VITEK LOAD LIST ;7/20/90  09:35
"RTN","LAMIAUT8",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**81**;Sep 27, 1994;Build 2
"RTN","LAMIAUT8",3,0)
ADD ;
"RTN","LAMIAUT8",4,0)
 I '$D(^LRO(68,LRAA,1,LRAD,1,X,0)) W !,$C(7),"THIS IS NOT A VALID ACCESSION NUMBER " Q
"RTN","LAMIAUT8",5,0)
 S ^TMP("LR",$J,"T",X)=+^(0)_U_+(^(5,1,0)) W !,"  <<<  ADDED  >>> ",! Q
"RTN","LAMIAUT8",6,0)
 Q
"RTN","LAMIAUT8",7,0)
DELETE ;
"RTN","LAMIAUT8",8,0)
 I '$D(^TMP("LR",$J,"T",X)) W !,$C(7),"THIS NUMBER IS NOT ON THE LIST " Q
"RTN","LAMIAUT8",9,0)
 K ^TMP("LR",$J,"T",X) W !,"  <<<  DELETED  >>> ",! Q
"RTN","LAMIAUT8",10,0)
 Q
"RTN","LAMIAUT8",11,0)
STUFF ;
"RTN","LAMIAUT8",12,0)
 S LRAA=$S(LRALL:$P(^LRO(68.2,LRINST,10,+$O(^LRO(68.2,LRINST,10,0)),0),U,2),1:$P(^LRO(68.2,LRINST,10,LRPROF,0),U,2))
"RTN","LAMIAUT8",13,0)
 S:'$D(^LRO(68.2,LRINST,1,0)) ^(0)="^68.21^"
"RTN","LAMIAUT8",14,0)
 F LRAN=0:0 S LRAN=$O(^TMP("LR",$J,"T",LRAN)) Q:LRAN<1  S LRSPEC=$P(^(LRAN),U,2) D STUFF1 I $O(X(0)) D STUFF3
"RTN","LAMIAUT8",15,0)
 S $P(^LRO(68.2,LRINST,2),U,4)=LRTRAY,$P(^(2),U,5)=LRCUP,$P(^(2),U)=DT
"RTN","LAMIAUT8",16,0)
 Q
"RTN","LAMIAUT8",17,0)
STUFF1 ;
"RTN","LAMIAUT8",18,0)
 K X F AA=0:0 S AA=$O(^LRO(68,LRAA,1,LRAD,1,LRAN,4,AA)) Q:AA<1  I $D(^(AA,0)) S LRURG=$S($P(^(0),U,2):$P(^(0),U,2),1:9) I $D(LRTP(AA)) D STUFF2
"RTN","LAMIAUT8",19,0)
 Q
"RTN","LAMIAUT8",20,0)
STUFF2 ;
"RTN","LAMIAUT8",21,0)
 I LRTP(AA) Q:LRSPEC=LRTP(AA)
"RTN","LAMIAUT8",22,0)
 S X(AA)=AA_U_LRURG,X(AA,$O(LRTP(AA,0)))="" Q
"RTN","LAMIAUT8",23,0)
STUFF3 ;
"RTN","LAMIAUT8",24,0)
 X LRTRANS I '$D(^LRO(68.2,LRINST,1,LRTRAY,0)) S ^(0)=LRTRAY_U_DT_U_DUZ_U_LRAA,$P(^LRO(68.2,LRINST,1,0),U,3)=LRTRAY,$P(^(0),U,4)=$P(^(0),U,4)+1 W !,"B"
"RTN","LAMIAUT8",25,0)
 S:'$D(^LRO(68.2,LRINST,1,LRTRAY,1,0)) ^(0)="^68.22PA^1^1"
"RTN","LAMIAUT8",26,0)
 I '$D(^LRO(68.2,LRINST,1,LRTRAY,1,LRCUP,1,0)) S ^(0)="^68.222^" W "."
"RTN","LAMIAUT8",27,0)
 S ^LRO(68.2,LRINST,1,LRTRAY,1,LRCUP,0)=LRAA_U_LRAD_U_LRAN_U_$O(LRTP($O(X(0)),0))_U_LRSPEC
"RTN","LAMIAUT8",28,0)
 F X=0:0 S X=$O(X(X)) Q:X=""  S ^LRO(68.2,LRINST,1,LRTRAY,1,LRCUP,1,X,0)=X(X),$P(^LRO(68.2,LRINST,1,LRTRAY,1,LRCUP,1,0),U,3)=X,$P(^(0),U,4)=$P(^(0),U,4)+1 D LRO
"RTN","LAMIAUT8",29,0)
 Q
"RTN","LAMIAUT8",30,0)
LRO S $P(^LRO(68,LRAA,1,LRAD,1,LRAN,4,X,0),U,3)=LRINST_";"_LRTRAY_";"_LRCUP Q    ;LA*5.2*81 change LRAN,1,4 to LRAN,4 for node/piece set
"RTN","LAMIAUT8",31,0)
 Q
"RTN","LAMIAUT8",32,0)
PROF ;
"RTN","LAMIAUT8",33,0)
 S LRAA=$S($D(^LRO(68.2,LRINST,10,1,0)):+$P(^(0),U,2),1:0) I 'LRAA W !!?10,"NO ACCESSION AREA ASSIGNED " S LREND=1 Q
"RTN","LAMIAUT8",34,0)
 S Y(0)=^LRO(68,LRAA,0) I $P(Y(0),U,14) S LRP=14 D ACCESS I LREND W !!?10,"Access denied to this Accession Area." Q
"RTN","LAMIAUT8",35,0)
 F I=0:0 S I=$O(^LRO(68.2,LRINST,10,LRPROF,1,I)) Q:I<1  I $D(^(I,0)) S LRTP(+^(0))=$P(^(0),U,2),LRTP(+^(0),LRPROF)=""
"RTN","LAMIAUT8",36,0)
 F T=0:0 S T=$O(^LRO(68.2,LRINST,10,LRPROF,2,T)) Q:T<1  F C=0:0 S C=$O(^LRO(68.2,LRINST,10,LRPROF,2,T,1,C)) Q:C<1  S LRCT=^(C,0) D CTRLTST S LRCTRL(T,C)=X
"RTN","LAMIAUT8",37,0)
 F I=0:0 S I=$O(^LRO(68.2,LRINST,10,LRPROF,3,I)) Q:I<1  S LRDSPEC(+^(I,0))=""
"RTN","LAMIAUT8",38,0)
 Q
"RTN","LAMIAUT8",39,0)
CTRLTST ;from LRLL1, LRLL2
"RTN","LAMIAUT8",40,0)
 S X=LRCT_U F J=0:0 S J=$O(^LAB(62.3,LRCT,2,J)) Q:J<1  S Y=+^(J,0) S:$D(^LRO(68.2,LRINST,10,LRPROF,1,"B",+Y)) X=X_+Y_U
"RTN","LAMIAUT8",41,0)
 I '$P(X,U,2) W !,"CONTROL ",$P(^LAB(62.3,+X,0),U,1)," HAS NO TEST FOR THIS PROFILE."
"RTN","LAMIAUT8",42,0)
 Q
"RTN","LAMIAUT8",43,0)
CLEAR ;from LRLL
"RTN","LAMIAUT8",44,0)
 W !,"WANT TO UNLOAD THE ",$S(LRTYPE:"LOAD",1:"WORK")," LIST FIRST" S %=2 D YN^DICN W:%=0 !,"If you're not sure, we'll skip it." W:%=-1 !,"Nothing cleared." S DUOUT=(%=-1) Q:%'=1
"RTN","LAMIAUT8",45,0)
 D CLEAR^LRLLS3 S (LAST,^LRO(68.2,LRINST,2))=DT_"^1^1^0^0",$P(^(1,0),U,3,4)=0 F I=0:0 S I=$O(^LRO(68.2,LRINST,1,0)) Q:I<1  S $P(^(0),U,3)=I,$P(^(0),U,4)=I
"RTN","LAMIAUT8",46,0)
 I LRTYPE W !,"Do you want to delete all unverified ",$P(^LRO(68.2,LRINST,0),U)," instrument data" S %=2 D YN^DICN S DUOUT=(%=-1) Q:%'=1  K ^LAH(LRINST)
"RTN","LAMIAUT8",47,0)
 Q
"RTN","LAMIAUT8",48,0)
ACCESS ;
"RTN","LAMIAUT8",49,0)
 S LRKEY=+$P(Y(0),U,LRP),LRKEY=$S($D(^DIC(19.1,LRKEY,0)):$P(^(0),U),1:0),LREND=$S($D(^XUSEC(LRKEY,DUZ)):0,1:1)
"RTN","LAMIAUT8",50,0)
 Q
"VER")
8.0^22.0
"BLD",9366,6)
^60
**END**
**END**
