$TXT Created by PULEO,ANTHONY at CPRS27.FO-SLC.MED.VA.GOV  (KIDS) on Wednesday, 10/01/08 at 18:01
=============================================================================
Run Date: NOV 04, 2008                     Designation: GMPL*2*37
Package : GMPL - PROBLEM LIST                 Priority: EMERGENCY
Version : 2        SEQ #32                      Status: Released
                  Compliance Date: NOV 06, 2008
=============================================================================

Associated patches: (v)OR*3*243    <<= must be installed BEFORE `GMPL*2*37'

Subject: PROBLEM LIST REPAIR DUE TO SHAD

Category: 
  - Routine

Description:
============

 When entering a new problem in CPRS 27 with an Immediacy of "<unknown>" a 
 zero is entered in the PRIORITY field of the PROBLEM File, file #9000011.
 The Priority field should be null for an unknown problem. With a zero value
 in the PRIORITY field this creates a bad entry in the Clinical Reminder Index
 that causes Clinical Reminders to incorrectly evaluate ICD9 data that is
 stored in the PROBLEM File.
 
 This patch contains two fixes to address this problem. The fix is a change
 to GMPLSAVE to evaluate the data that is being passed to this routine. If
 CPRS passes a zero value for the Priority field GMPLSAVE will set the
 Priority field to null.
 
 A post-install routine will evaluate the PROBLEM file, for entries that 
 contain a zero in the Priority field. If any entries in the PROBLEM file,
 contains a zero the Priority field will be set to Null and the entry will be
 corrected in the Clinical Reminder Index. A mailman message will be sent to
 the person installing this patch. The message will list out the number of
 entries that contain a zero value in the priority field. The number of
 entries that were corrected and a final check to make sure that all the bad
 entries were corrected.
 
 Test Plan
 =========
    1. Check to see if you have bad entries in your account. This can be done
       by doing a global listing of the Clinical Reminder Index from
       programmer mode.
        DEV5A4:CPRS27 47d3>D ^%G
        Device:      Right margin: 80=>
        Global ^PXRMINDX(9000011,"PSPI",,,0
        ^PXRMINDX(9000011,"PSPI",9,"A",0,1864,3070509,300)=
        ^PXRMINDX(9000011,"PSPI",9,"A",0,3087,3070509,304)=
        ^PXRMINDX(9000011,"PSPI",37,"A",0,10813,3081001,336)=
        ^PXRMINDX(9000011,"PSPI",43,"A",0,2753,3060823,268)=
        ^PXRMINDX(9000011,"PSPI",48,"A",0,374,3061121,299)=
        ^PXRMINDX(9000011,"PSPI",48,"A",0,381,3061115,292)=
        ^PXRMINDX(9000011,"PSPI",48,"A",0,381,3061121,297)=
    2. Install GMPL*2.0*37 into your account
       A post-install routine will be tasked off to clean-up these entries.
       If bad entries are not found this will be display in the mailman message.
 
 Subj: Correction of invalid entries in the PROBLEM file  [#50169]
 1 line
 From: POSTMASTER
 -----------------------------------------------------------------------------
 No invalid entries found in the PROBLEM file.
 
       If this mailman matches with the results in step 1 go to step #4
 
       If bad entries are found in the account the mailman message will 
       display something like this.
 
 Subj: Correction of invalid entries in the PROBLEM file  [#50168]
 8 lines
 From: POSTMASTER 
 -----------------------------------------------------------------------------
 Initial count of invalid entries in the PROBLEM file.
    7 Invalid entries in the PROBLEM file.
  
 Number of entries that were change.
   7 entries in the PROBLEM file corrected.
  
 Count of entries that are still invalid.
   0 Invalid entries in the PROBLEM file.
 
    3. Do another global listing on the Clinical Reminders Index and verify 
       bad entries are not returned.
       Global ^PXRMINDX(9000011,"PSPI",,,0
       Global ^
    4. Sign into CPRS and select a test patient.
    5. Go to the Problems tab and click the New Problem button
    6. Complete the problem but leave the Immediacy value to "<unknown>"
    7. Do a FileMan Inquiry on the PROBLEM File and verify the Priority 
       field does not show in the output with a value of zero. The Priority
       field should not show in the output.
 
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch may be installed with users on the system.  It should be 
 installed at a time of minimal usage of the system.  Installation
 should take less than 2 minutes to install.
 
 1. Use the INSTALL/CHECK MESSAGE option on the Packman menu.
  
 2. Review your mapped set.  If the routine listed in the
    ROUTINE SUMMARY section is mapped, it should be removed
    from the mapped set at this time.
  
 3. From the Kernel Installation and Distribution System Menu, select
    the Installation menu.
 4. From this menu, you may elect to use the following options
    (when prompted for INSTALL NAME, enter GMPL*2.0*37):
        a.  Backup a Transport Global
        b.  Compare Transport Global to Current System
        c.  Verify Checksums in Transport Global
  
 5. Use the Install Package(s) option and select the package GMPL*2.0*37.
  
 6. When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
    respond "NO".
  
 7. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? YES//', respond "NO".
  
 8. If the routine was unmapped as part of step 2, it should be returned
    to the mapped set once the installation has run to completion.
 9. The init routines GMTSP87I may be deleted once the installation has
    completed.
 
 
 

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;2.0;Problem List;**[Patch List]**;Aug 25, 1994;Build 1

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: GMPLP37I
    Before:       n/a   After:  B8498002  **37**
Routine Name: GMPLSAVE
    Before: B28058379   After: B29343254  **26,31,35,37**
 
Routine list of preceding patches: 35

=============================================================================
User Information:
Entered By  : SHUMWAY,GARY                  Date Entered  : OCT 01, 2008
Completed By: SERVICE,JOHN                  Date Completed: NOV 04, 2008
Released By : MONTGOMERY,ALAN               Date Released : NOV 04, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
