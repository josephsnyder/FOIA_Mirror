$TXT Created by SMITH,ROBERT at VMPDEV20.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 08/01/07 at 13:05
=============================================================================
Run Date: MAY 28, 2008                     Designation: PSS*1*130
Package : PSS - PHARMACY DATA MANAGEMENT      Priority: Mandatory
Version : 1       SEQ #120                      Status: Released
                  Compliance Date: JUN 28, 2008
=============================================================================


Subject: ORDERABLE ITEM SYNONYM AND DRUG FILE VAC INDEX FIX

Category: 
  - Data Dictionary
  - Routine

Description:
============

 This patch will correct the issues reported in:
  
 1) HD0000000194979 - Orderable Item dialog box issue
 2) HD0000000177768 - Lookup by VA Class brings up incorrect meds
  
 Associated Remedy Ticket(s)
 ===========================
 1) HD0000000194979
 2) HD0000000177768
     Duplicates   HD0000000180269
  
 Overview of Remedy Ticket(s)
 ============================
  
 1) HD0000000194979 - Orderable Item dialog box issue
  
   Problem:
   --------
   When ordering medications via CPRS and using the drugs synonym in the 
   Orderable Item Dialog box it does not correctly display the medication
   if the synonym contains a leading and/or trailing spaces.
  
   Resolution:
   -----------
   Modify the INPUT TRANSFORM for the SYNYONYM field (#.01) OF THE SYNONYM 
   sub-file (#2) of the PHARMACY ORDERABLE ITEM file (#50.7) to strip any
   leading and/or trailing spaces.
  
 2) HD0000000177768 - Lookup by VA Class brings up incorrect meds
  
   Problem:
   --------
   When user lookups a drug using the VA CLASSIFICATION field (#2) of the
   DRUG file (#50) the incorrect drug is returned.
  
   Resolution:
   -----------
   Create a routine that will identify which drugs have multiple NATIONAL 
   DRUG CLASS indexes associated to the drug.  The NATIONAL DRUG CLASS field
   (#25) of The DRUG file (#50) will then be re-indexed and update the "VAC
   index.
  
 TECHNICAL:
 ==========
 1) Modify the INPUT TRANSFORM for the PHARMACY ORDERABLE ITEM file (#50.7)
 SYNONYM sub-file (#50.72) SYNONYM field (#2) to use S X=$$TRIM^XLFSTR(X,,"
 ") to strip leading/trailing spaces. Create PSSP130 routine to step
 through the PHARMACY ORDERABLE ITEM file (#50.7) SYNONYM sub-file (#50.72)
 SYNONYM field (#2) and remove leading/trailing spaces from the SYNONYM.
 After the SYNONYMS have had the leading/trailing removed, send a MailMan
 message with the PHARMACY Orderable Items that had the SYNONYMS repaired.
   
 2) Create PSSP130 routine to step through the DRUG file (#50) NATIONAL DRUG
 CLASS field (#25) index (^PSDRUG("VAC") and identify drugs with multiple VAC
 indexes. If a drug has multiple indexes, re-index the VAC index.  After the 
 ^DRUG("VAC" has been re-indexed, send a MailMan message with the names, old 
 NATIONAL DRUG CLASS indexes and the new NATIONAL DRUG CLASS index.
  
 Test Sites
 ==========
 DANVILLE
 OKLAHOMA CITY
 NY HARBOR
  
 DATA DICTIONARY CHANGES:
 =========================
  
 Before:
 -------
 DATA          NAME                  GLOBAL        DATA
 ELEMENT       TITLE                 LOCATION      TYPE
 ----------------------------------------------------------------------------
  
 50.72,.01  SYNONYM                0;1 FREE TEXT (Multiply asked)
  
           INPUT TRANSFORM:  K:$L(X)>30!($L(X)<1) X
  
 After:
 ------
 DATA          NAME                  GLOBAL        DATA
 ELEMENT       TITLE                 LOCATION      TYPE
 ----------------------------------------------------------------------------
  
 50.72,.01  SYNONYM                0;1 FREE TEXT (Multiply asked)
  
           INPUT TRANSFORM:  S X=$$TRIM^XLFSTR(X,," ") K:$L(X)>30!($L(X)<1) X
  
 Installation Instructions
 =========================
 If installed during the normal workday, it is recommended that the 
 Pharmacy Data Management users be off the system.  Other VISTA users
 will not be affected.
  
 Install Time - less than 5 minutes (unless otherwise indicated)
  
 The routine PSSP130 creates a mail message that is sent to the 
 installer. That message should be forwarded to the Pharmacy ADPAC and/or
 designee for review.
  
 Routine PSSP130 May be deleted after successful patch installation.
  
 1.  LOAD TRANSPORT GLOBAL 
     ---------------------
     Choose the PackMan message containing this patch and invoke the 
     INSTALL/CHECK MESSAGE PackMan option.  
              
 2.  START UP KIDS 
     -------------
     Start up the Kernel Installation and Distribution System Menu 
     [XPD MAIN]: 
    
          Edits and Distribution ...  
          Utilities ...  
          Installation ...  
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
          Load a Distribution
          Print Transport Global 
          Compare Transport Global to Current System 
          Verify Checksums in Transport Global 
          Install Package(s) 
          Restart Install of Package(s) 
          Unload a Distribution 
          Backup a Transport Global 
 Select Installation Option: 
    
 3.  Select Installation Option: 
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter PSS*1.0*130):
       
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
         (routines, DD's, templates, etc.).
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
  
 4.  Select Installation Option: Install Package(s) 
                                 ------------------
     a.  Choose the Install Package(s) option to start the patch
         install and when prompted for Install Name, enter PSS*1.0*130.
  
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
         YES//' answer NO
  
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols? Yes//' respond NO

Routine Information:
====================
The second line of each of these routines now looks like:
 ;;1.0; PHARMACY DATA MANAGEMENT;**[Patch List]**;9/30/97;Build 6

The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSSP130
    Before:       n/a   After: B18754852  **130**

=============================================================================
User Information:
Entered By  : SMITH,ROBERT J                Date Entered  : JUN 28, 2007
Completed By: HEFFERNAN,COREY               Date Completed: MAY 22, 2008
Released By : CAMPBELL,THOMAS               Date Released : MAY 28, 2008
=============================================================================


Packman Mail Message:
=====================

$END TXT
